[{"tags": ["ruby-on-rails", "ruby", "multithreading"], "answers": [{"comments": [{"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1482423635, "post_id": 41274617, "comment_id": 69777164, "body": "Nice this is exactly what I wanted! I ended up dropping the <code>VERSION</code>, since it doesn&#39;t seem to matter."}], "tags": [], "owner": {"reputation": 17539, "user_id": 512453, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0372e5193a1dd972857e7498cdd8643?s=128&d=identicon&r=PG", "display_name": "Teddy", "link": "https://stackoverflow.com/users/512453/teddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1482371003, "creation_date": 1482371003, "answer_id": 41274617, "question_id": 41273416, "link": "https://stackoverflow.com/questions/41273416/railsserver-railsconsole-is-there-one-for-rake-tasks/41274617#41274617", "title": "Rails::Server, Rails::Console, is there one for Rake Tasks?", "body": "<p>This should work:</p>\n\n<pre><code>config.threadsafe! unless defined?(Rake::VERSION)\n</code></pre>\n"}], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 41274617, "answer_count": 1, "score": 1, "last_activity_date": 1482371003, "creation_date": 1482361502, "last_edit_date": 1482362209, "question_id": 41273416, "link": "https://stackoverflow.com/questions/41273416/railsserver-railsconsole-is-there-one-for-rake-tasks", "title": "Rails::Server, Rails::Console, is there one for Rake Tasks?", "body": "<p>I am trying to introduce multithreading in our application with puma.</p>\n\n<ul>\n<li>Ruby 2.1.8</li>\n<li>Rails 3.2.12</li>\n</ul>\n\n<p>I added <code>config.threadsafe!</code> to <code>config/application.rb</code> so that I could test things out in development, and from what I was reading it was good to add in general, as it locks every shared variable within a Mutex.</p>\n\n<p><a href=\"https://bearmetal.eu/theden/how-do-i-know-whether-my-rails-app-is-thread-safe-or-not/\" rel=\"nofollow noreferrer\">https://bearmetal.eu/theden/how-do-i-know-whether-my-rails-app-is-thread-safe-or-not/</a></p>\n\n<p>This configuration is know to cause issues with rake tasks, no code is eager loaded, tons of uninitialized constants.</p>\n\n<p>I stubbled across this recommendation:</p>\n\n<pre><code>config.threadsafe! unless $rails_rake_task\n</code></pre>\n\n<p>However:</p>\n\n<pre><code>puts \"*\" * 10\nputs $rails_rake_task\nputs \"*\" * 10\nconfig.threadsafe! unless $rails_rake_task\n</code></pre>\n\n<p>Then running the command:</p>\n\n<pre><code>rake assets:precompile RAILS_ENV=production # development eager loads anyways\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>**********\n\n**********\n</code></pre>\n\n<p>The recommended variable is not defined.</p>\n\n<p>I am aware that there are special modules in Rails whenever you use a console over a server.</p>\n\n<p>Ex:</p>\n\n<pre><code>rails c\ndefined?(Rails::Console)\n=&gt; \"constant\"\ndefined?(Rails::Server)\n=&gt; nil\n\nrails s\ndefined?(Rails::Server)\n=&gt; \"constant\"\ndefined?(Rails::Console)\n=&gt; nil\n</code></pre>\n\n<p>Is there something like this for rake tasks?</p>\n\n<p>Kind of running out of ideas here, expect for overriding stuff I'd really rather not touch.</p>\n\n<p>Currently I am doing:</p>\n\n<pre><code>config.threadsafe! if defined?(Rails::Server)\n</code></pre>\n\n<p>Which is fine, but I would rather exclude rake tasks explicitly.</p>\n"}, {"tags": ["arrays", "ruby", "ruby-on-rails-3", "hash"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1482362332, "post_id": 41273433, "comment_id": 69748508, "body": "Pinching your idea from another <a href=\"http://stackoverflow.com/a/41261105/5101493\">answer</a> you posted today: <code>x.sort_by { |k,_| k.to_i }</code> would be better, no?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482362760, "post_id": 41273433, "comment_id": 69748643, "body": "I didn&#39;t notice that the key was also a string. Thanks."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1482362686, "last_edit_date": 1482362686, "creation_date": 1482361601, "answer_id": 41273433, "question_id": 41273345, "link": "https://stackoverflow.com/questions/41273345/how-to-sort-hash-in-rails/41273433#41273433", "title": "How to sort hash in rails", "body": "<p>I don't think it's possible to sort a hash directly. Converting to a sorted array and back again : </p>\n\n<pre><code>x.sort_by{ |key,_| key.to_i }.to_h\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>=&gt; {\"1\"=&gt;{:name=&gt;\"test1\", :age=&gt;\"1\"},\n \"2\"=&gt;{:name=&gt;\"test3\", :age=&gt;\"2\"},\n \"3\"=&gt;{:name=&gt;\"test5\", :adn=&gt;\"3\"},\n \"4\"=&gt;{:name=&gt;\"test4\", :adn=&gt;\"4\"},\n \"5\"=&gt;{:name=&gt;\"test2\", :age=&gt;\"5\"}}\n</code></pre>\n\n<p>If you want to sort by age :</p>\n\n<pre><code>x.sort_by{|k,v| v[:age].to_i}.to_h\n</code></pre>\n\n<p>If you want to sort by age or adn (in case it wasn't a typo) :</p>\n\n<pre><code>x.sort_by{|k,v| ( v[:age] || v[:adn] ).to_i}.to_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1482368325, "last_edit_date": 1482368325, "creation_date": 1482364897, "answer_id": 41273867, "question_id": 41273345, "link": "https://stackoverflow.com/questions/41273345/how-to-sort-hash-in-rails/41273867#41273867", "title": "How to sort hash in rails", "body": "<p>Here are some other ways of doing that.</p>\n\n<pre><code>x.keys.sort_by(&amp;:to_i).each_with_object({}) { |k,h| h[k] = x[k] }\n  #=&gt; {\"1\"=&gt;{:name=&gt;\"test1\", :age=&gt;\"1\"},\n  #    \"2\"=&gt;{:name=&gt;\"test3\", :age=&gt;\"2\"},\n  #    \"3\"=&gt;{:name=&gt;\"test5\", :adn=&gt;\"3\"},\n  #    \"4\"=&gt;{:name=&gt;\"test4\", :adn=&gt;\"4\"},\n  #    \"5\"=&gt;{:name=&gt;\"test2\", :age=&gt;\"5\"}} \n</code></pre>\n\n<p>or</p>\n\n<pre><code>k = x.keys.sort_by(&amp;:to_i)\nk.zip(x.values_at(*k)).to_h\n</code></pre>\n\n<p>and if <code>x</code> is to be modified,</p>\n\n<pre><code>x.keys.sort_by(&amp;:to_i).each { |k| x[k] = x.delete(k) }\nx\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482409862, "post_id": 41274582, "comment_id": 69768045, "body": "Note that keys are strings and won&#39;t be sorted as integers"}], "tags": [], "owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "is_accepted": false, "score": 1, "last_activity_date": 1482387944, "last_edit_date": 1482387944, "creation_date": 1482370815, "answer_id": 41274582, "question_id": 41273345, "link": "https://stackoverflow.com/questions/41273345/how-to-sort-hash-in-rails/41274582#41274582", "title": "How to sort hash in rails", "body": "<p>You almost do it, just replace <code>flatten</code> with <code>to_h</code></p>\n\n<pre><code>x.sort.to_h\n# =&gt; {\"1\"=&gt;{:name=&gt;\"test1\", :age=&gt;\"1\"}, \"2\"=&gt;{:name=&gt;\"test3\", :age=&gt;\"2\"}, \"3\"=&gt;{:name=&gt;\"test5\", :adn=&gt;\"3\"}, \"4\"=&gt;{:name=&gt;\"test4\", :adn=&gt;\"4\"}, \"5\"=&gt;{:name=&gt;\"test2\", :age=&gt;\"5\"}} \n</code></pre>\n\n<p>Works in ruby 2.1.8</p>\n"}], "owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2934, "favorite_count": 0, "accepted_answer_id": 41273867, "answer_count": 3, "score": 6, "last_activity_date": 1482387944, "creation_date": 1482361114, "question_id": 41273345, "link": "https://stackoverflow.com/questions/41273345/how-to-sort-hash-in-rails", "title": "How to sort hash in rails", "body": "<p>I have a hash</p>\n\n<pre><code>x= {\n  \"1\"=&gt;{:name=&gt;\"test1\", :age=&gt;\"1\"}, \n  \"5\"=&gt;{:name=&gt;\"test2\", :age=&gt;\"5\"}, \n  \"2\"=&gt;{:name=&gt;\"test3\", :age=&gt;\"2\"}, \n  \"4\"=&gt;{:name=&gt;\"test4\", :adn=&gt;\"4\"}, \n  \"3\"=&gt;{:name=&gt;\"test5\", :adn=&gt;\"3\"}\n }\n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code>x= {\n  \"1\"=&gt;{:name=&gt;\"test1\", :age=&gt;\"1\"}, \n  \"2\"=&gt;{:name=&gt;\"test3\", :age=&gt;\"2\"}, \n  \"3\"=&gt;{:name=&gt;\"test5\", :age=&gt;\"3\"}, \n  \"4\"=&gt;{:name=&gt;\"test4\", :adn=&gt;\"4\"}, \n  \"5\"=&gt;{:name=&gt;\"test2\", :adn=&gt;\"5\"}\n }\n</code></pre>\n\n<p>What I have so far, I tried doing x.sort.flatten and i got </p>\n\n<pre><code>[\n  \"1\", {:name=&gt;\"test1\", :age=&gt;\"1\"}, \n  \"2\", {:name=&gt;\"test3\", :age=&gt;\"2\"}, \n  \"3\", {:name=&gt;\"test5\", :adn=&gt;\"3\"}, \n  \"4\", {:name=&gt;\"test4\", :adn=&gt;\"4\"}, \n  \"5\", {:name=&gt;\"test2\", :age=&gt;\"5\"}\n]\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1482361269, "creation_date": 1482361269, "answer_id": 41273374, "question_id": 41273313, "link": "https://stackoverflow.com/questions/41273313/best-way-to-compare-field-against-array-of-strings-with-sequel-gem/41273374#41273374", "title": "Best way to compare field against array of strings with Sequel Gem?", "body": "<p>If your field can be equal to one of multiple words, you can use :</p>\n\n<pre><code>SELECT * FROM table WHERE field IN ('apple', 'banana', 'carrot', 'dog', ....)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1482428151, "creation_date": 1482428151, "answer_id": 41288866, "question_id": 41273313, "link": "https://stackoverflow.com/questions/41273313/best-way-to-compare-field-against-array-of-strings-with-sequel-gem/41288866#41288866", "title": "Best way to compare field against array of strings with Sequel Gem?", "body": "<p>PostgreSQL will probably not use an index for a regular expression lookup with <code>|</code>s, which would explain the slow speed on large datasets.  The <code>IN</code> operator is what you want to use, as it should be able to use an index lookup (assuming the appropriate index).  In Sequel:</p>\n\n<pre><code>DB[:table].where(:field=&gt;['string1', 'string2', 'string3'])\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482428151, "creation_date": 1482360980, "question_id": 41273313, "link": "https://stackoverflow.com/questions/41273313/best-way-to-compare-field-against-array-of-strings-with-sequel-gem", "title": "Best way to compare field against array of strings with Sequel Gem?", "body": "<p>If I need to check a field in a table against an array of possible strings (using Postgres with the Sequel gem), what's the fastest way to do so? I've tried building a regular expression from the array with <code>|</code>'s inbetween each entry, and then using it to search the table using <code>.where</code>, but it's slow... and I'm hoping there may be a faster way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "capybara-webkit"], "answers": [{"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1482384058, "post_id": 41273566, "comment_id": 69753956, "body": "If you need to disable concatentation that means that one of the earlier files is throwing an error which is stopping the rest of the files from being evaluated (in test/producation mode where the files are concatenated)- check you dev console in development mode and fix any JS errors being shown."}, {"owner": {"reputation": 683, "user_id": 740764, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5e836c45590de7477d89cd5fa64e7803?s=128&d=identicon&r=PG", "display_name": "Louise", "link": "https://stackoverflow.com/users/740764/louise"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1482408414, "post_id": 41273566, "comment_id": 69767242, "body": "Thanks for the advice! There are no errors in dev, I thought Capybara should show me any js errors (with js: true and js_errors: true) but none appear."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1482432814, "post_id": 41273566, "comment_id": 69782252, "body": "IIRC js_errors is a Poltergeist option not capybara-webkit.  In capybara-webkit you&#39;d need to check <code>page.driver.error_messages</code> to see any errors that were raised by JS - I&#39;ll bet that will show you some errors related to something like ES6 features that capybara-webkit doesn&#39;t support"}], "tags": [], "owner": {"reputation": 683, "user_id": 740764, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5e836c45590de7477d89cd5fa64e7803?s=128&d=identicon&r=PG", "display_name": "Louise", "link": "https://stackoverflow.com/users/740764/louise"}, "is_accepted": false, "score": 4, "last_activity_date": 1482362558, "creation_date": 1482362558, "answer_id": 41273566, "question_id": 41273303, "link": "https://stackoverflow.com/questions/41273303/how-to-load-css-and-js-in-capybara/41273566#41273566", "title": "How to load CSS and JS in Capybara?", "body": "<p>In my case, it did have something to do with the asset pipeline.</p>\n\n<p>After I turned off asset concatenation in test.rb, it all worked fine.</p>\n\n<p>test.rb:</p>\n\n<pre><code># Debug mode disables concatenation and preprocessing of assets.\n  # This option may cause significant delays in view rendering with a large\n  # number of complex assets.\n  config.assets.debug = true\n</code></pre>\n\n<p>spec_helper:</p>\n\n<pre><code>Capybara.register_driver :chrome do |app|\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome)\nend\n\nCapybara.javascript_driver = :chrome\nCapybara.asset_host = \"http://localhost:3000\"\n</code></pre>\n\n<p>Sorted. I needed to switch to chromedriver to find this out - it depended on me actually being able to watch the test driver do its job in a real browser, and open the Chrome javascript console (while capybara was paused in the debugger) to poke around and see what was going on.</p>\n"}], "owner": {"reputation": 683, "user_id": 740764, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5e836c45590de7477d89cd5fa64e7803?s=128&d=identicon&r=PG", "display_name": "Louise", "link": "https://stackoverflow.com/users/740764/louise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1808, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482362558, "creation_date": 1482360932, "question_id": 41273303, "link": "https://stackoverflow.com/questions/41273303/how-to-load-css-and-js-in-capybara", "title": "How to load CSS and JS in Capybara?", "body": "<p>I'm trying to write integration tests for my Rails application. Its GUI is pretty complex, so it needs lots of integration tests (as opposed to controller or unit tests) to make sure all the AJAX requests and DOM rendering work correctly.</p>\n\n<p>I've tried Capybara, Capybara-webkit, Poltergeist, and Chromedriver - but none of them are executing any of my CSS or document.ready functions.</p>\n\n<p>I've done an extensive amount of reading and tried many solutions, but am having no success. I think it may be something to do with the asset pipeline.</p>\n\n<p>I'm not sure where to look next to troubleshoot the issue.</p>\n\n<p>Thanks,\nLouise</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1482361745, "post_id": 41273268, "comment_id": 69748346, "body": "You almost got it in your second try. <code>order_item</code> belongs to a <code>Product</code>, so, you don&#39;t need your second loop, you can access your product with <code>order_item.product</code>"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 0, "creation_date": 1482363719, "post_id": 41273507, "comment_id": 69748888, "body": "When I try the first way I now get :undefined method `name&#39; for nil:NilClass"}, {"owner": {"reputation": 339, "user_id": 3666372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca62a5c4f74a0c91a79f10e613c1c9b3?s=128&d=identicon&r=PG&f=1", "display_name": "anyarms", "link": "https://stackoverflow.com/users/3666372/anyarms"}, "reply_to_user": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 0, "creation_date": 1482364558, "post_id": 41273507, "comment_id": 69749084, "body": "What happens when you try <code>OrderItem.all.map{ |o| o.product.name }.join(&#39;, &#39;)</code> in the console? (My guess is that you will get the same error)."}, {"owner": {"reputation": 339, "user_id": 3666372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca62a5c4f74a0c91a79f10e613c1c9b3?s=128&d=identicon&r=PG&f=1", "display_name": "anyarms", "link": "https://stackoverflow.com/users/3666372/anyarms"}, "reply_to_user": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 0, "creation_date": 1482364970, "post_id": 41273507, "comment_id": 69749203, "body": "Reasoning: there&#39;s probably an <code>order_item</code> in the db with no associated <code>product</code>. You could check with <code>OrderItem.where(product: nil)</code> (also in the console)."}, {"owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 0, "creation_date": 1482427588, "post_id": 41273507, "comment_id": 69779640, "body": "Yeah you were right there were was a few orders without products once I got rid of those I was a able to get the first way working, thanks!"}], "tags": [], "owner": {"reputation": 339, "user_id": 3666372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca62a5c4f74a0c91a79f10e613c1c9b3?s=128&d=identicon&r=PG&f=1", "display_name": "anyarms", "link": "https://stackoverflow.com/users/3666372/anyarms"}, "is_accepted": true, "score": 1, "last_activity_date": 1482362134, "creation_date": 1482362134, "answer_id": 41273507, "question_id": 41273268, "link": "https://stackoverflow.com/questions/41273268/show-products-that-belong-to-orders-on-admin-pannel/41273507#41273507", "title": "show products that belong to orders on admin pannel", "body": "<p>You can do this in either way you suggest: just keep an eye on your collections vs. items</p>\n\n<h2>First Way:</h2>\n\n<p>This one puts all your items in a single <code>&lt;td&gt;</code></p>\n\n<pre><code>&lt;tbody&gt;\n  &lt;% @orders.each do |order| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= order.id %&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= order.order_items.map{ |o| o.product.name }.join(', ') %&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= order.total %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<h2>Second Way:</h2>\n\n<p>Here, each <code>order_item</code> gets its own <code>&lt;td&gt;</code></p>\n\n<pre><code>&lt;tbody&gt;\n  &lt;% @orders.each do |order| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= order.id %&gt;&lt;/td&gt;\n          &lt;% order.order_items each do |order_item| %&gt;\n              &lt;td&gt;&lt;%= order_item.product.name %&gt;&lt;/td&gt;\n           &lt;% end %&gt;\n       &lt;td&gt;&lt;%= order.total %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>You might consider adding some <code>has_many through</code> or <code>delegate</code> relationships in your models in the long term - it will make this kind of association a little tidier.</p>\n"}], "owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 41273507, "answer_count": 1, "score": 0, "last_activity_date": 1482362134, "creation_date": 1482360721, "question_id": 41273268, "link": "https://stackoverflow.com/questions/41273268/show-products-that-belong-to-orders-on-admin-pannel", "title": "show products that belong to orders on admin pannel", "body": "<p>I am trying to show the name of each product that belongs to an order on my admin panel but I cant seem to get it. </p>\n\n<p>here are my associations:</p>\n\n<pre><code> OrderItem belongs_to :product\n OrderItem belongs_to :order\n Product has_many :order_items\n Order has_many :order_items\n</code></pre>\n\n<p>I have tried two different things:</p>\n\n<pre><code>&lt;tbody&gt;\n    &lt;% @orders.each do |order| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= order.id %&gt;&lt;/td&gt;\n         &lt;td&gt;&lt;%= order.order_items.product.name %&gt;&lt;/td&gt;\n         &lt;td&gt;&lt;%= order.total %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n</code></pre>\n\n<p>This gets me this error:</p>\n\n<pre><code>undefined method `name' for #&lt;Array:0x0000000535fbb0&gt;\n</code></pre>\n\n<p>So then I try to loop through like this:</p>\n\n<pre><code>&lt;tbody&gt;\n    &lt;% @orders.each do |order| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= order.id %&gt;&lt;/td&gt;\n            &lt;% order.order_items each do |order_item| %&gt;\n                &lt;% order_item.products each do |product| %&gt;\n                    &lt;td&gt;&lt;%= product.name %&gt;&lt;/td&gt;\n                &lt;% end %&gt;\n             &lt;% end %&gt;\n         &lt;td&gt;&lt;%= order.total %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n</code></pre>\n\n<p>And I get this error: </p>\n\n<pre><code>undefined local variable or method `each' for &lt;Class:0x007fce540aa3f0&gt;:0x007fce5417fed8&gt;\n</code></pre>\n\n<p>Here is my controller code:</p>\n\n<pre><code>  def orders\n      @orders = Order.all\n      @order_items = OrderItem.all\n      @products = Product.all\n  end\n</code></pre>\n\n<p>I am not sure where I am going wrong any help would be appreciated, thanks. </p>\n"}, {"tags": ["ruby", "crystal-lang"], "comments": [{"owner": {"reputation": 471, "user_id": 2319934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4fd94526342e5486f1df4362c33abe?s=128&d=identicon&r=PG", "display_name": "SplittyDev", "link": "https://stackoverflow.com/users/2319934/splittydev"}, "edited": false, "score": 0, "creation_date": 1482360798, "post_id": 41273150, "comment_id": 69747975, "body": "To the close-voter, could you please explain yourself, so I can improve my question?"}, {"owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1482434056, "post_id": 41273150, "comment_id": 69782852, "body": "I don&#39;t think mixing Ruby and Crystal in this question is reasonable - not every Ruby idiom is a Crystal idiom."}, {"owner": {"reputation": 471, "user_id": 2319934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4fd94526342e5486f1df4362c33abe?s=128&d=identicon&r=PG", "display_name": "SplittyDev", "link": "https://stackoverflow.com/users/2319934/splittydev"}, "reply_to_user": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1482446189, "post_id": 41273150, "comment_id": 69788082, "body": "@mgarciaisaia that is right. I tagged both because in this context it didn&#39;t matter too much. Crystal has <code>Nil</code> type and tries to feel like Ruby, so I think this question applies to both."}], "answers": [{"comments": [{"owner": {"reputation": 471, "user_id": 2319934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4fd94526342e5486f1df4362c33abe?s=128&d=identicon&r=PG", "display_name": "SplittyDev", "link": "https://stackoverflow.com/users/2319934/splittydev"}, "edited": false, "score": 0, "creation_date": 1482360677, "post_id": 41273175, "comment_id": 69747933, "body": "Thank you. Could you expand your answer a little and maybe add a link to official Ruby documentation that encourages that behavior? Other than that, the answer is good, I&#39;ll accept it in a few minutes :)"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 471, "user_id": 2319934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4fd94526342e5486f1df4362c33abe?s=128&d=identicon&r=PG", "display_name": "SplittyDev", "link": "https://stackoverflow.com/users/2319934/splittydev"}, "edited": false, "score": 0, "creation_date": 1482361037, "post_id": 41273175, "comment_id": 69748070, "body": "@splittydev anything in particular that you would like me to expand on? Official ruby documentation does not cover best practices like this, it is assumed that you learn them from other sources. The best reference is probably the book &quot;Ruby Best Practices&quot; by Gregory Brown"}, {"owner": {"reputation": 471, "user_id": 2319934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4fd94526342e5486f1df4362c33abe?s=128&d=identicon&r=PG", "display_name": "SplittyDev", "link": "https://stackoverflow.com/users/2319934/splittydev"}, "edited": false, "score": 0, "creation_date": 1482361109, "post_id": 41273175, "comment_id": 69748102, "body": "if the official ruby documentation doesn&#39;t cover this, then your answer is perfectly fine. thanks"}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 5, "last_activity_date": 1482361110, "last_edit_date": 1482361110, "creation_date": 1482360278, "answer_id": 41273175, "question_id": 41273150, "link": "https://stackoverflow.com/questions/41273150/what-is-the-idiomatic-way-of-returning-optional-values/41273175#41273175", "title": "What is the idiomatic way of returning optional values?", "body": "<p>Yes, return <code>nil</code></p>\n\n<p>Returning <code>nil</code> is the encouraged best practice in Ruby. You can check for that with <code>foo.nil?</code></p>\n\n<p>NB, if you are interested in learning more best practices for Ruby, best refer to the book \"Ruby Best Practices\" by Gregory Brown.</p>\n\n<hr>\n\n<p>On a related note, the language defaults to returning <code>nil</code> in many places. For example, when an <code>if</code> expression has no else block it's return value for the else block is <code>nil</code>. </p>\n\n<p>So you can simplify your example as</p>\n\n<pre><code>def foo\n  123 if bar\nend\n</code></pre>\n\n<p>which will return <code>nil</code> if <code>bar</code> is not truthy</p>\n"}, {"tags": [], "owner": {"reputation": 2800, "user_id": 4990850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26f1aafc5591d499822488281852972f?s=128&d=identicon&r=PG", "display_name": "asterite", "link": "https://stackoverflow.com/users/4990850/asterite"}, "is_accepted": false, "score": 3, "last_activity_date": 1482403826, "creation_date": 1482403826, "answer_id": 41281408, "question_id": 41273150, "link": "https://stackoverflow.com/questions/41273150/what-is-the-idiomatic-way-of-returning-optional-values/41281408#41281408", "title": "What is the idiomatic way of returning optional values?", "body": "<p>In Crystal <code>nil</code> is the preferred way to indicate the absence of a value, and is usually combined with other values to mean \"something can either be returned (<code>T</code>) or not (<code>Nil</code>)\". The API docs also explain this and mention several ways to deal with nil: <a href=\"https://crystal-lang.org/api/0.20.1/Nil.html\" rel=\"nofollow noreferrer\">https://crystal-lang.org/api/0.20.1/Nil.html</a> </p>\n"}], "owner": {"reputation": 471, "user_id": 2319934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df4fd94526342e5486f1df4362c33abe?s=128&d=identicon&r=PG", "display_name": "SplittyDev", "link": "https://stackoverflow.com/users/2319934/splittydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 41273175, "answer_count": 2, "score": 1, "last_activity_date": 1482403826, "creation_date": 1482360152, "question_id": 41273150, "link": "https://stackoverflow.com/questions/41273150/what-is-the-idiomatic-way-of-returning-optional-values", "title": "What is the idiomatic way of returning optional values?", "body": "<p>I just kinda ran against a wall here.\nLet's say my code is something like the following:</p>\n\n<pre><code>def foo\n    if bar\n        123\n    else\n        nil\n    end\nend\n</code></pre>\n\n<p>Here the return value is either Int or Nil.\nI'm used to the concept of optionals (in languages like Rust, F#, Haskell) and this is really confusing me.</p>\n\n<p>I realize that I can return a value of any type without problems, but coming from a more functional background it just feels wrong.</p>\n\n<p>In Rust, I'd return an <code>Option&lt;T&gt;</code>. That way I could easily test whether <code>Some</code> value was returned, or no value (<code>None</code>). In Ruby/Crystal that seems like a silly thing to do though.</p>\n\n<p>So, here's the question:<br>\nShould I just return <code>nil</code> in the case that there is no useful value to return and test against that, and is this the idiomatic way of handling such cases? If not, how should I do it in an idiomatic way?</p>\n"}, {"tags": ["ruby", "selenium", "capybara"], "comments": [{"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482358717, "post_id": 41272540, "comment_id": 69747151, "body": "I should also add that the find selector works in firebug"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1482361093, "post_id": 41272540, "comment_id": 69748091, "body": "If you look in a real browser you&#39;ll probably see the actual file input is hidden or transparent - what&#39;s the exact error?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1482361220, "post_id": 41272540, "comment_id": 69748147, "body": "View source over inspect? ElementNotFound, I&#39;ll post it tomorrow"}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 4559634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wozvY.jpg?s=128&g=1", "display_name": "peter pawar", "link": "https://stackoverflow.com/users/4559634/peter-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1482386682, "creation_date": 1482386682, "answer_id": 41276700, "question_id": 41272540, "link": "https://stackoverflow.com/questions/41272540/is-there-something-special-about-a-file-type-input-that-makes-it-not-able-to-fin/41276700#41276700", "title": "Is there something special about a file type input that makes it not able to find?", "body": "<p>Instead of using <code>within(:xpath, [containing span xpath])</code> can you directly check the xpath of input like: <code>has_xpath?(\".//span[contains(text(),'Browse')]/input\")</code> \nand if it is returning true then try with using \n<code>find(:xpath, \".//span[contains(text(),'Browse')]/input\").send_keys ('C:\\Users\\...\\blah.txt')</code></p>\n\n<p>If you are aware about the 'pry' gem then you can debug this thing by trying various xpath combinations instead of just running the whole script, So you will get to know the actual problem. </p>\n"}, {"tags": [], "owner": {"reputation": 6700, "user_id": 5097027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YqLt4.jpg?s=128&g=1", "display_name": "NarendraR", "link": "https://stackoverflow.com/users/5097027/narendrar"}, "is_accepted": false, "score": 0, "last_activity_date": 1482390321, "creation_date": 1482390321, "answer_id": 41277507, "question_id": 41272540, "link": "https://stackoverflow.com/questions/41272540/is-there-something-special-about-a-file-type-input-that-makes-it-not-able-to-fin/41277507#41277507", "title": "Is there something special about a file type input that makes it not able to find?", "body": "<p>I think there is mistake in your xpath</p>\n\n<p><code>.//*[@type=\"file\"]</code></p>\n\n<p>Change to</p>\n\n<p><code>.//*[@type='file']</code></p>\n\n<p>as browser can detect attribute value with double quotes(\" \") but inside script you need to use it in single quote (' ')</p>\n\n<p>Also can make different combinations of your XPath like</p>\n\n<p><code>//input[@type='file']</code></p>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1482435667, "creation_date": 1482435667, "answer_id": 41290570, "question_id": 41272540, "link": "https://stackoverflow.com/questions/41272540/is-there-something-special-about-a-file-type-input-that-makes-it-not-able-to-fin/41290570#41290570", "title": "Is there something special about a file type input that makes it not able to find?", "body": "<p>Judging by the class <code>btn-file</code> on the wrapper class, it's probable you're using Bootstrap and one of the \"standard\" methods to hide the actual file input element so that it can be style the same across multiple browsers.  There are a number of ways of hiding the button from just setting display:none on it to the more \"modern\" method of expanding it to the same size as the replacement button and seeting it's opacity to 0 so it become a transparent overlay on the replacement.  </p>\n\n<p>The basic strategy to dealing with this kind of setup in Capybara is to use <code>execute_script</code> to make the element visible first and then use <code>attach_file</code> or <code>set</code> as normal.  For instance if your site is using the opacity method of hiding the file element you could do something like</p>\n\n<pre><code>within_frame('frame1') do\n  within_frame('frame2') do\n    within(:xpath, [containing span xpath]) do  # finds this\n      file_input = find(:file, visible: :all)\n      page.driver.browser.execute_script(\"$(arguments[0]).css('opacity',1)\", file_input.native)          \n      file_input.set('C:\\Users\\...\\blah.txt')\n    end\n  end\nend\n</code></pre>\n\n<p>Note - this code assumes you're using jQuery in your page and will only work with the selenium driver since it uses seleniums driver specific ability to pass elements from capybara to selenium in the execute_script call. If not using jQuery the JS will need to change and if using another driver you would need to find the element in the JS script using DOM methods and then modify its opacity.</p>\n"}], "owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1482435667, "creation_date": 1482357257, "last_edit_date": 1482358855, "question_id": 41272540, "link": "https://stackoverflow.com/questions/41272540/is-there-something-special-about-a-file-type-input-that-makes-it-not-able-to-fin", "title": "Is there something special about a file type input that makes it not able to find?", "body": "<p>I'm looking to add files to an <code>&lt;input type=\"file\"&gt;</code> </p>\n\n<p>Here is a snippet of the html</p>\n\n<pre><code> &lt;span class=\"btn btn-xs btn-primary btn-file\"&gt; #found\n    &lt;span class=\"blahicon blahicon-upload\"&gt;&lt;/span&gt;\n    Browse\n    &lt;input type=\"file\" data-bind=\"value: fileName, event: { change: uploadImagesOnChange }\"\n    accept=\"blah/txt\" multiple=\"\"&gt; #not found\n &lt;/span&gt;\n</code></pre>\n\n<p>and here's the capybara and ruby</p>\n\n<pre><code> within_frame('frame1') do\n   within_frame('frame2') do\n     within(:xpath, [containing span xpath]) do  # finds this\n       find(:xpath, './/*[@type=\"file\"]').send_keys('C:\\Users\\...\\blah.txt') #ElementNotFound\n     end\n   end\n end\n</code></pre>\n\n<p>I see no hidden block and it's super scoped.  Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-2.3.1"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1482372419, "post_id": 41272750, "comment_id": 69750980, "body": "This. Modules and classes are objects just like any other object, there is nothing special about them. You would delegate methods between them in exactly the same way you would delegate methods between any other two objects, because they <i>are</i> just any other objects."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1482358150, "creation_date": 1482358150, "answer_id": 41272750, "question_id": 41272437, "link": "https://stackoverflow.com/questions/41272437/ruby-how-to-delegate-module-function-of-namespace-to-namespacebase-inner-class/41272750#41272750", "title": "Ruby how to delegate module function of Namespace to Namespace::Base inner class", "body": "<p>You can use a standard Ruby library called <a href=\"https://ruby-doc.org/stdlib-2.3.1/libdoc/forwardable/rdoc/SingleForwardable.html\" rel=\"nofollow noreferrer\">Forwardable</a>.</p>\n\n<pre><code>require 'forwardable'\n\nmodule Abstract\n  extend SingleForwardable\n  class Base\n    def self.where(p)\n      \"where from base : #{p}\"\n    end\n  end\n\n  delegate :where =&gt; Base\nend\n\nAbstract.where(id: 3)\n# =&gt; \"where from base : {:id=&gt;3}\"\n</code></pre>\n\n<p>For multiple methods, you can write :</p>\n\n<pre><code>delegate [:where, :another_method] =&gt; Base\n</code></pre>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 41272750, "answer_count": 1, "score": 1, "last_activity_date": 1482358150, "creation_date": 1482356837, "question_id": 41272437, "link": "https://stackoverflow.com/questions/41272437/ruby-how-to-delegate-module-function-of-namespace-to-namespacebase-inner-class", "title": "Ruby how to delegate module function of Namespace to Namespace::Base inner class", "body": "<p>I was confronted against choosing either #1 :</p>\n\n<pre><code>class Abstract\nend\nclass Abstract::Foo &lt; Abstract\nend\nclass Abstract::Bar &lt; Abstract\nend\n</code></pre>\n\n<p>versus #2 :</p>\n\n<pre><code>module Abstract\n  class Base\n  end\n  class Foo &lt; Base\n  end\n  class Bar &lt; Base\n  end\nend\n</code></pre>\n\n<p>I ended up choosing option #2, as my <code>Abstract</code> felt more like a namespace, and I could eventually add other things like </p>\n\n<pre><code>module Abstract # Instead of class if I had used option #1\n  class SomeAbstractService\n  end\nend\n</code></pre>\n\n<p>However I feel that calling <code>Abstract::Base.some_class_method</code> is a bit weird. it possible to add a module function delegation ? For example if my <code>Base</code> is an ActiveRecord or Mongoid model (so Foo and Bar are like STI), i'd like to be able to query the collection/table with</p>\n\n<p><code>Abstract.where(...)</code> instead of <code>Abstract::Base.where(...)</code></p>\n\n<p>Is it possible to delegate the module function <code>.where</code> to the constant/class <code>Base</code> ?</p>\n\n<p>Something like</p>\n\n<pre><code>module Abstract\n  class Base\n  end\n\n  delegate_module_function :where, to: :Base\nend\n</code></pre>\n\n<p>Or is there a different/better way to do that ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 15480, "user_id": 229688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FVcL0.jpg?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/229688/arnaud"}, "edited": false, "score": 0, "creation_date": 1482361532, "post_id": 41272434, "comment_id": 69748279, "body": "It sounds very wrong. Can you elaborate? How is login status dependent on the cache?"}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3263538, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d93259c7a68ffbd700af0711891f4b52?s=128&d=identicon&r=PG&f=1", "display_name": "wgraydev", "link": "https://stackoverflow.com/users/3263538/wgraydev"}, "is_accepted": false, "score": 0, "last_activity_date": 1482416403, "creation_date": 1482416403, "answer_id": 41285245, "question_id": 41272434, "link": "https://stackoverflow.com/questions/41272434/clearing-part-of-the-rails-cache-and-not-all-of-it-with-rails-cache-clear/41285245#41285245", "title": "Clearing part of the Rails cache and not all of it with Rails.cache.clear", "body": "<p>Because I'm using a cache based session store, when the cache gets cleared the user gets logged out of their session.</p>\n\n<p>I did some research and unfortunately...</p>\n\n<blockquote>\n  <p>If you ever need to reset your cache (say you upgraded Rails and your\n  old cached data is no longer accurate), there\u2019s no way to do that\n  without expiring everyone\u2019s sessions.</p>\n</blockquote>\n\n<p>-- via <a href=\"http://www.justinweiss.com/articles/how-rails-sessions-work/\" rel=\"nofollow noreferrer\">Justin Weiss's blog</a></p>\n\n<p>If we ever want to remedy the issue of clearing sessions when the cache is cleared we will need to store our sessions in the database instead.</p>\n"}], "owner": {"reputation": 103, "user_id": 3263538, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d93259c7a68ffbd700af0711891f4b52?s=128&d=identicon&r=PG&f=1", "display_name": "wgraydev", "link": "https://stackoverflow.com/users/3263538/wgraydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482416403, "creation_date": 1482356829, "question_id": 41272434, "link": "https://stackoverflow.com/questions/41272434/clearing-part-of-the-rails-cache-and-not-all-of-it-with-rails-cache-clear", "title": "Clearing part of the Rails cache and not all of it with Rails.cache.clear", "body": "<p>I'm trying to clear part of my rails cache. My problem is that there are logs that are being cached that need to be cleared but if I clear the whole cache active users will be logged out of the site.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 17599, "user_id": 552822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec7a11a127dd10d98e1a9a64fb86f1f?s=128&d=identicon&r=PG", "display_name": "Jonah", "link": "https://stackoverflow.com/users/552822/jonah"}, "edited": false, "score": 5, "creation_date": 1482356288, "post_id": 41272255, "comment_id": 69746038, "body": "Are you asking about a <code>constant</code> as in the question title or <code>class</code> as in the question body?"}], "answers": [{"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1482356125, "creation_date": 1482356125, "answer_id": 41272272, "question_id": 41272255, "link": "https://stackoverflow.com/questions/41272255/what-is-the-difference-between-a-constant-and-a-variable-in-ruby/41272272#41272272", "title": "What is the difference between a constant and a variable in Ruby?", "body": "<ul>\n<li>A variable can change its value, it can vary.</li>\n<li>A constant cannot change its value, it is constant.</li>\n</ul>\n\n<p>In Ruby things are a bit more complex though. You can reassign the value of constants, but it will print a warning. This is meant to be used for debugging only and the general principle still applies that constants are meant to be used for values that never change.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1482372674, "post_id": 41272494, "comment_id": 69751027, "body": "In your first example, you are <i>not</i> changing the constant. You are changing the object referenced by the constant. This is only a point of confusion if you don&#39;t understand the difference between a thing and a name used to refer to a thing. But if you don&#39;t understand that difference, then there will be whole lot of other things that confuse you, anyway."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1482418384, "post_id": 41272494, "comment_id": 69773509, "body": "@J&#246;rgWMittag This is exactly what I was trying to say, albeit probably a bit too brief. I edited my answer to clarify this a bit more."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 4, "last_activity_date": 1482418278, "last_edit_date": 1482418278, "creation_date": 1482357105, "answer_id": 41272494, "question_id": 41272255, "link": "https://stackoverflow.com/questions/41272255/what-is-the-difference-between-a-constant-and-a-variable-in-ruby/41272494#41272494", "title": "What is the difference between a constant and a variable in Ruby?", "body": "<p>The idea of constants in Ruby is that they can get a value assigned only once while you can assign a new value to a variable as many times as you want. Now technically, you can assign a new value even to a constant. Ruby will however issue a warning in this case and you should try to avoid this case.</p>\n\n<p>I guess the main point leading to confusion of people new to Ruby is that even values assigned to constants can be modified without a warning (e.g. by adding new elements to an array). References by a constant are no different to variables here in that the reference does not restrict what can be done with the value. The object referenced by either a variable or constant is always independent from that.</p>\n\n<p>In this example, I assign a new array to the <code>ARRAY</code> constant. Later, I can happily change the array by adding a new member to it. The constant is not concerned by this.</p>\n\n<pre><code>ARRAY = []\n# =&gt; []\nARRAY &lt;&lt; :foo\nARRAY\n# =&gt; [:foo]\n</code></pre>\n\n<p>The only thing forbidden (or, well, allowed with a warning) is if you try to assign a completely new value to a constant:</p>\n\n<pre><code>ARRAY2 = []\n# =&gt; []\nARRAY2 = [:bar]\n# warning: already initialized constant ARRAY2\nARRAY2\n=&gt; [:bar]\n</code></pre>\n\n<p>As such, it is common practice to immediately freeze values assigned to constants to fully deny any further changes and ensure that the original value is preserved (unless someone assigns a new value):</p>\n\n<pre><code>ARRAY3 = [:foo, :bar].freeze\nARRAY3 &lt;&lt; :baz\n# RuntimeError: can't modify frozen Array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": false, "score": 0, "last_activity_date": 1484925814, "creation_date": 1484925814, "answer_id": 41767030, "question_id": 41272255, "link": "https://stackoverflow.com/questions/41272255/what-is-the-difference-between-a-constant-and-a-variable-in-ruby/41767030#41767030", "title": "What is the difference between a constant and a variable in Ruby?", "body": "<p>In Ruby, a constant is an identifier that starts with a capital letter; it is intended to be assigned only once.  You can reassign a constant, but you should not.  Doing so will generate a warning:</p>\n\n<pre><code>NAME = \"Fred\"\nNAME = \"Barney\"    # =&gt; Warning: Already initialized constant NAME\n</code></pre>\n\n<p>A variable is an identifier that does not start with a capital letter; it may be assigned to more than once:</p>\n\n<pre><code>name = \"Fred\"\nname = \"Barney\"    # =&gt; No warning\n</code></pre>\n\n<p>When you create a class, a constant is created with the same name as the class; that constant is bound to the class:</p>\n\n<pre><code>class Foo\nend\n</code></pre>\n\n<p>This is equivalent to this code which creates a new anonymous class and assigns it to the constant Foo:</p>\n\n<pre><code>Foo = Class.new do\nend\n</code></pre>\n\n<p>You can reassign the constant identifier Foo, as you can with any other constant, but of course you shouldn't, and you will still get the warning:</p>\n\n<pre><code>Foo = 123    # =&gt; Already initialized constant Foo\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6288485, "user_type": "registered", "profile_image": "https://graph.facebook.com/726689237470491/picture?type=large", "display_name": "Alestaire Caines", "link": "https://stackoverflow.com/users/6288485/alestaire-caines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 826, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1484925814, "creation_date": 1482356051, "question_id": 41272255, "link": "https://stackoverflow.com/questions/41272255/what-is-the-difference-between-a-constant-and-a-variable-in-ruby", "title": "What is the difference between a constant and a variable in Ruby?", "body": "<p>So, I'm doing a Ruby course on CodeAcademy and I'm stuck in differentiating the difference between a variable and a class. Can someone please explain the difference to me? I'll give you cookies! ^^. No matter where I look online I can't find any information on this.</p>\n"}, {"tags": ["ruby", "bit-manipulation"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1482356432, "last_edit_date": 1482356432, "creation_date": 1482355820, "answer_id": 41272200, "question_id": 41272082, "link": "https://stackoverflow.com/questions/41272082/examine-integer-bit-by-bit-get-and-set/41272200#41272200", "title": "Examine integer bit by bit (get and set)", "body": "<p>Binary math!</p>\n\n<pre><code>n = 55\nnum_bits = Math.log2(n).ceil + 1\n(0...num_bits).each do |bit_idx|\n  mask = 1 &lt;&lt; bit_idx\n\n  # set bit\n  n |= mask\n\n  # unset bit\n  n &amp;= ~mask\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 3, "last_activity_date": 1482356294, "last_edit_date": 1482356294, "creation_date": 1482356037, "answer_id": 41272250, "question_id": 41272082, "link": "https://stackoverflow.com/questions/41272082/examine-integer-bit-by-bit-get-and-set/41272250#41272250", "title": "Examine integer bit by bit (get and set)", "body": "<p>The bitwise operators can be used for this:</p>\n\n<p><code>^</code> \"exclusive or\" to flip a bit</p>\n\n<p><code>|</code> \"or\" to set a bit</p>\n\n<p>e.g. to set the nth bit:</p>\n\n<pre><code>x = x | (2 ** n) # or more concisely x |= 2 ** n \n</code></pre>\n\n<p>or to flip it</p>\n\n<pre><code>x = x ^ (2 ** n) # or more concisely x ^= 2 ** n \n</code></pre>\n\n<p>A range with <code>each</code> would be a way to implement your pseudo code:</p>\n\n<pre><code>(0...num_bits).each do |bit|\n   ...\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 0, "creation_date": 1482370654, "post_id": 41272635, "comment_id": 69750568, "body": "This is awesome, but is there a way to make the probability weighted, instead of complete random? I only want to flip bits at a <code>0.002</code> chance"}], "tags": [], "owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "is_accepted": false, "score": 1, "last_activity_date": 1482357674, "creation_date": 1482357674, "answer_id": 41272635, "question_id": 41272082, "link": "https://stackoverflow.com/questions/41272082/examine-integer-bit-by-bit-get-and-set/41272635#41272635", "title": "Examine integer bit by bit (get and set)", "body": "<p>You need to reframe that question to get a better answer. As I understand it, you want to randomly flip bits (or not). To give you the most flexibility, I would deconstruct this problem into two simpler problems.</p>\n\n<ol>\n<li>Construct a bit mask to indicate which bits get flipped or not.</li>\n<li>Use XOR on that bit mask to flip any bits set on the bit mask.</li>\n</ol>\n\n<p>For step 1, you could just make up a random number up to the number of digits you want.</p>\n\n<pre><code>n = 137 # 10001001\nbit_mask = rand(2**8) # 10110110\nflipped = n ^ bit_mask # 00111111\n# flip the first, third, fourth, sixth and seventh bits\n# should be 00111111\n# 63\n</code></pre>\n\n<p>And that's that.</p>\n"}, {"tags": [], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "is_accepted": false, "score": 0, "last_activity_date": 1482372795, "last_edit_date": 1592644375, "creation_date": 1482372795, "answer_id": 41274825, "question_id": 41272082, "link": "https://stackoverflow.com/questions/41272082/examine-integer-bit-by-bit-get-and-set/41274825#41274825", "title": "Examine integer bit by bit (get and set)", "body": "<h2>Bitwise Operations</h2>\n<p>I pulled bits from each answer to make:</p>\n<pre><code># Getter\nmy_int[i]\n\n# Setter\u2014only works setting to 1, not to 0\nmy_int | 1 &lt;&lt; i\n\n# Setter\u2014set to 0\nmy_int - (1 &lt;&lt; i)\n\n# Flipper\nmy_int ^ 1 &lt;&lt; i\n</code></pre>\n"}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 41272250, "answer_count": 4, "score": 2, "last_activity_date": 1482372795, "creation_date": 1482355218, "last_edit_date": 1482356023, "question_id": 41272082, "link": "https://stackoverflow.com/questions/41272082/examine-integer-bit-by-bit-get-and-set", "title": "Examine integer bit by bit (get and set)", "body": "<p>I need to do something like this:</p>\n\n<pre><code>For each bit in integer\n  if (probability)\n    flip the bit\n  end\nend\n</code></pre>\n\n<p>I know there is a cool trick <code>my_int[3]</code> to get the bit at an index, but this method can't <em>set</em> the bit.</p>\n\n<p>Converting <code>to_s(2)</code> is too inefficient, ideally I'll be keeping them as integers.</p>\n"}, {"tags": ["html", "ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1483751114, "post_id": 41271889, "comment_id": 70239831, "body": "Perhaps if your markup in <code>div</code> were valid it&#39;d work better? You can&#39;t use <code>&quot;&lt;div&gt;...&quot;</code>, it needs to be <code>&quot;&lt;div...&quot;</code>. You&#39;re terminating the tag prematurely so Nokogiri won&#39;t accept it."}], "answers": [{"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 1, "last_activity_date": 1482364645, "creation_date": 1482364645, "answer_id": 41273836, "question_id": 41271889, "link": "https://stackoverflow.com/questions/41271889/add-div-to-nokogiri-xml-nodeset/41273836#41273836", "title": "Add div to Nokogiri XML NodeSet", "body": "<p>Try this</p>\n\n<pre><code>html_string = \"&lt;div id='todd' class='{{customer.name}} {{shop.domain}}'&gt;&lt;/div&gt;\"\npage.at('head').add_child(html_string)\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 41273836, "answer_count": 1, "score": 0, "last_activity_date": 1482530031, "creation_date": 1482354294, "last_edit_date": 1482530031, "question_id": 41271889, "link": "https://stackoverflow.com/questions/41271889/add-div-to-nokogiri-xml-nodeset", "title": "Add div to Nokogiri XML NodeSet", "body": "<p>I'm just trying to add a \"dummy\" div into the head of this HTML snippet, and I've tried 100 ways and nothing is working.</p>\n\n<p>This is what the <code>head</code> looks like when I pull it down:</p>\n\n<pre><code>&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n  &lt;title&gt;Horraa&lt;/title&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>I just want to put in this dummy div:</p>\n\n<pre><code>&lt;div&gt; id='todd' class='{{customer.name}} {{shop.domain}}'&lt;/div&gt;\n</code></pre>\n\n<p>So the end result is this</p>\n\n<pre><code>&lt;head&gt;\n&lt;div&gt; id='todd' class='{{customer.name}} {{shop.domain}}'&lt;/div&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n  &lt;title&gt;Horraa&lt;/title&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>This is my Nokogiri</p>\n\n<pre><code>page = Nokogiri::HTML(todd)\nhead = page.css('head')\n</code></pre>\n\n<p>Head is now a <code>Nokogiri::XML::NodeSet</code></p>\n\n<p>This doesn't work</p>\n\n<pre><code>div = \"&lt;div&gt; id='todd' class='{{customer.name}} {{shop.domain}}'&lt;/div&gt;\"\nhead.push(div)\n</code></pre>\n\n<p>Or this</p>\n\n<pre><code>div = \"&lt;div&gt; id='todd' class='{{customer.name}} {{shop.domain}}'&lt;/div&gt;\"\nupdate = Nokogiri::XML::Node.new('div', todd)\nupdate['class'] = '{{customer.name}} {{shop.domain}}'\nhead.add_previous_sibling(update)\nhead &lt;&lt; update\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>head.add_next_sibling \"&lt;div&gt; id='todd' class='{{customer.name}} {{shop.domain}}'&lt;/div&gt;\"\n</code></pre>\n\n<p>and I've tried 10 others, but this is getting long.. Where did I go astray?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "edited": false, "score": 0, "creation_date": 1482353603, "post_id": 41271670, "comment_id": 69744689, "body": "ok but my problem is the type of the variables... is there a specific type for the email? and also for attribute who could take different values?"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 0, "creation_date": 1482353783, "post_id": 41271670, "comment_id": 69744791, "body": "@RobertoCaravelli email is a string, there is not a specific type. What do you mean by &quot;attribute who could take different values ?&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "edited": false, "score": 0, "creation_date": 1482354017, "post_id": 41271670, "comment_id": 69744894, "body": "In my app, the GenericUsers have to specify what kind of musician they are, for example drummer/guitarist/bassist etc....."}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 0, "creation_date": 1482354211, "post_id": 41271670, "comment_id": 69745004, "body": "@RobertoCaravelli a musician can have multiple type ?"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 0, "creation_date": 1482354326, "post_id": 41271670, "comment_id": 69745053, "body": "I think that this post should help you : <a href=\"http://stackoverflow.com/questions/18691253/ruby-on-rails-saving-multiple-values-in-a-single-database-cell\" title=\"ruby on rails saving multiple values in a single database cell\">stackoverflow.com/questions/18691253/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "edited": false, "score": 0, "creation_date": 1482354676, "post_id": 41271670, "comment_id": 69745253, "body": "When users register in my app with a form, I show them different choice for the musician type, but probably I should model this parameters like a simple string"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "reply_to_user": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 0, "creation_date": 1482354858, "post_id": 41271670, "comment_id": 69745361, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/131192/discussion-between-roberto-caravelli-and-antonin-mrchd\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "is_accepted": false, "score": 0, "last_activity_date": 1482353409, "last_edit_date": 1495542826, "creation_date": 1482353409, "answer_id": 41271670, "question_id": 41271547, "link": "https://stackoverflow.com/questions/41271547/parameters-type-for-entity-in-ruby-on-rails/41271670#41271670", "title": "parameters type for entity in ruby on rails", "body": "<p>You can write this in the command line :</p>\n\n<pre><code>rails generate scaffold Post username:string email:string firstname:string gender:string ...\n</code></pre>\n\n<p>and for the primary key you can find answer here :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9644509/how-to-add-a-primary-key-to-a-table-in-rails\">how to add a primary key to a table in rails</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482353409, "creation_date": 1482352911, "question_id": 41271547, "link": "https://stackoverflow.com/questions/41271547/parameters-type-for-entity-in-ruby-on-rails", "title": "parameters type for entity in ruby on rails", "body": "<p>I'm new to ruby on rails</p>\n\n<p>I'm modeling the entity \"GenericUser\" for my web app; I should generate it using scaffolding specifying many attribute : username and email (the primary key of the database table), FirstName, LastName, Gender, and other attribute that could take different value, for example MusicianRole could be \"guitarist\", \"drummer\" etc that the user could choose at the registration</p>\n\n<p>The question is: How should I have to specify the type of all these attributes correctly? </p>\n"}, {"tags": ["ruby", "rubygems", "hipchat"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1482353304, "post_id": 41271497, "comment_id": 69744534, "body": "<a href=\"https://github.com/hipchat/hipchat-rb/blob/e65b02d966ebce30d0601a3235fa6e6e9cef3216/lib/hipchat/user.rb#L43\" rel=\"nofollow noreferrer\">github.com/hipchat/hipchat-rb/blob/&hellip;</a>"}, {"owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1482355592, "post_id": 41271497, "comment_id": 69745718, "body": "got it that worked."}], "answers": [{"tags": [], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "is_accepted": true, "score": 1, "last_activity_date": 1482355720, "creation_date": 1482355720, "answer_id": 41272174, "question_id": 41271497, "link": "https://stackoverflow.com/questions/41271497/how-to-attach-files-to-ruby-hipchat-messages/41272174#41272174", "title": "How to attach files to ruby hipchat messages?", "body": "<p>the working solution:</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'hipchat'\n\nclient = HipChat::Client.new('HIPCHAT_TOKEN', :api_version =&gt; 'v2', :server_url =&gt; 'HIPCHAT_URL')\nclient.user('some_username').send_file('message', File.open('some-file.txt') )\n</code></pre>\n"}], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 41272174, "answer_count": 1, "score": 1, "last_activity_date": 1482355720, "creation_date": 1482352620, "question_id": 41271497, "link": "https://stackoverflow.com/questions/41271497/how-to-attach-files-to-ruby-hipchat-messages", "title": "How to attach files to ruby hipchat messages?", "body": "<p>I want to send text files through hipchat using the <a href=\"https://github.com/hipchat/hipchat-rb\" rel=\"nofollow noreferrer\">ruby hipchat-rb gem</a>.  There doesn't seem to be a way to do this described in the readme of this gem.  Is it possible to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "amazon-ec2", "passenger"], "comments": [{"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 1, "creation_date": 1482352373, "post_id": 41271024, "comment_id": 69744025, "body": "Try <code>bundle update</code>"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1482356291, "post_id": 41271024, "comment_id": 69746041, "body": "did you run <code>bundle</code> or <code>bundle install</code>?"}, {"owner": {"reputation": 828, "user_id": 5805587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22379edbe1679a7b17b5ce821748d233?s=128&d=identicon&r=PG&f=1", "display_name": "khalidh", "link": "https://stackoverflow.com/users/5805587/khalidh"}, "edited": false, "score": 0, "creation_date": 1482356930, "post_id": 41271024, "comment_id": 69746319, "body": "yes, but same problem"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1482358789, "post_id": 41271024, "comment_id": 69747176, "body": "can you post your gem file too? in particular the place you specify rails, or activesupport. and did you do any <code>gem install</code> instead of <code>bundle install</code>? it seems the gem you are trying to install required a different version of <code>active_support</code>, which is locked at version 4.2.6"}], "answers": [{"tags": [], "owner": {"reputation": 15480, "user_id": 229688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FVcL0.jpg?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/229688/arnaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1482361726, "creation_date": 1482361726, "answer_id": 41273450, "question_id": 41271024, "link": "https://stackoverflow.com/questions/41271024/it-looks-like-bundler-could-not-find-a-gem-maybe-you-didnt-install-all-the-gem/41273450#41273450", "title": "It looks like Bundler could not find a gem. Maybe you didn&#39;t install all the gems that this application needs", "body": "<p>A step seems to be missing in the tutorial, run</p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>Then you should be able to run</p>\n\n<pre><code>bundle install\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 7368034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c506cfceb5e49e659ed5a8d555a664?s=128&d=identicon&r=PG&f=1", "display_name": "user7368034", "link": "https://stackoverflow.com/users/7368034/user7368034"}, "is_accepted": true, "score": 2, "last_activity_date": 1483426908, "creation_date": 1483426908, "answer_id": 41438094, "question_id": 41271024, "link": "https://stackoverflow.com/questions/41271024/it-looks-like-bundler-could-not-find-a-gem-maybe-you-didnt-install-all-the-gem/41438094#41438094", "title": "It looks like Bundler could not find a gem. Maybe you didn&#39;t install all the gems that this application needs", "body": "<p>You have to install rails 4.2.6 gem</p>\n\n<pre><code>gem install rails -v 4.2.6\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sudo gem install rails -v 4.2.6\n</code></pre>\n"}], "owner": {"reputation": 828, "user_id": 5805587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22379edbe1679a7b17b5ce821748d233?s=128&d=identicon&r=PG&f=1", "display_name": "khalidh", "link": "https://stackoverflow.com/users/5805587/khalidh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2279, "favorite_count": 0, "accepted_answer_id": 41438094, "answer_count": 2, "score": 2, "last_activity_date": 1483426908, "creation_date": 1482350611, "last_edit_date": 1482398025, "question_id": 41271024, "link": "https://stackoverflow.com/questions/41271024/it-looks-like-bundler-could-not-find-a-gem-maybe-you-didnt-install-all-the-gem", "title": "It looks like Bundler could not find a gem. Maybe you didn&#39;t install all the gems that this application needs", "body": "<p>I am deployed rails application in apache using passenger gem, I am getting below error. followed the link to deploy rails application<br>\n<a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-passenger-and-apache-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-passenger-and-apache-on-ubuntu-14-04</a>  </p>\n\n<p>Error:-</p>\n\n<pre><code>  It looks like Bundler could not find a gem. Maybe you didn't install all the gems that this application needs.  \nTo install your gems, please run:\n\n    bundle install  \n\n\n      If that didn't work, then the problem is probably caused by your application being run under a different environment  \nthan it's supposed to. Please check the following:\n\n        Is this app supposed to be run as the www-data user?\n        Is this app being run on the correct Ruby interpreter? Below you will see which Ruby interpreter Phusion Passenger attempted to use.  \n</code></pre>\n\n<p>trace:-  </p>\n\n<pre><code>        -------- The exception is as follows: -------\n        Your bundle is locked to activesupport (4.2.6), but that version could not be found in any of the sources listed in your Gemfile.   \n    If you haven't changed sources, that means the author of activesupport (4.2.6) has removed it.   \n    You'll need to update your bundle to a different version of activesupport (4.2.6) that hasn't been removed in order to install. (Bundler::GemNotFound)\n\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb:179:in `rescue in specs'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb:173:in `specs'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb:233:in `specs_for'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb:222:in `requested_specs'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:118:in `block in definition_method'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:19:in `setup'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler.rb:99:in `setup'\n          /var/lib/gems/2.3.0/gems/bundler-1.13.6/lib/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n          /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n          /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n          /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:430:in `activate_gem'\n          /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:297:in `block in run_load_path_setup_code'\n          /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:435:in `running_bundler'\n          /usr/lib/ruby/vendor_ruby/phusion_passenger/loader_shared_helpers.rb:296:in `run_load_path_setup_code'\n          /usr/share/passenger/helper-scripts/rack-preloader.rb:100:in `preload_app'\n          /usr/share/passenger/helper-scripts/rack-preloader.rb:156:in `&lt;module:App&gt;'\n          /usr/share/passenger/helper-scripts/rack-preloader.rb:30:in `&lt;module:PhusionPassenger&gt;'\n\n      /usr/share/passenger/helper-scripts/rack-preloader.rb:29:in `&lt;main&gt;'  \n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<pre><code>    source 'https://rubygems.org'\n    # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n    gem 'rails', '4.2.6'\n    # Use sqlite3 as the database for Active Record\n    gem 'sqlite3'\n    # Use SCSS for stylesheets\n    gem 'sass-rails', '~&gt; 5.0'\n    # Use Uglifier as compressor for JavaScript assets\n    gem 'uglifier', '&gt;= 1.3.0'\n    # Use CoffeeScript for .coffee assets and views\n    gem 'coffee-rails', '~&gt; 4.1.0'\n    # See https://github.com/rails/execjs#readme for more supported runtimes\n    # gem 'therubyracer', platforms: :ruby\n\n    # Use jquery as the JavaScript library\n    gem 'jquery-rails'\n    # Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\n    gem 'turbolinks'\n    # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n    gem 'jbuilder', '~&gt; 2.0'\n    # bundle exec rake doc:rails generates the API under doc/api.\n    gem 'sdoc', '~&gt; 0.4.0', group: :doc\n    gem \"unicorn\"\n    gem \"thin\"\n    gem \"passenger\"  \n    group :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n</code></pre>\n"}, {"tags": ["ruby", "testing", "rspec", "automation", "appium"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482376685, "post_id": 41270851, "comment_id": 69751976, "body": "maybe try <code>require &#39;selenium&#47;rspec&#39;</code> as well."}, {"owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482399691, "post_id": 41270851, "comment_id": 69761642, "body": "what gem I should add to be able require this &#39;selenium/rspec&#39;? I have the following list of gems:"}, {"owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482399733, "post_id": 41270851, "comment_id": 69761673, "body": "source &#39;<a href=\"http://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>&#39; gem &#39;ruby&#39; gem &#39;rspec-core&#39;, &#39;~&gt; 3.4.0&#39; gem &#39;touch_action&#39;, &#39;~&gt; 1.3.3&#39; gem &#39;appium_lib&#39;, &#39;~&gt; 8.0.2&#39; gem &#39;appium_capybara&#39; gem &#39;rspec&#39; gem &#39;capybara-screenshot&#39;, :group =&gt; :test gem &#39;launchy&#39; gem &#39;capybara&#39; gem &#39;test-unit&#39; gem &#39;selenium-webdriver&#39; gem &#39;rails&#39; gem &quot;page-object&quot; gem &#39;ruby-debug-ide&#39; gem &#39;debase&#39; gem &#39;byebug&#39; gem &#39;rspec-rails&#39; gem &quot;selenium-client&quot; gem &#39;rspec-rails&#39; gem &#39;rspec-expectations&#39;"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482399768, "post_id": 41270851, "comment_id": 69761688, "body": "It shoukd be there in selenium-client. I was just suggesting in case it wasnt autoloading or something"}, {"owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482400901, "post_id": 41270851, "comment_id": 69762457, "body": "it says &quot;cannot load such file -- selenium/rspec&quot;,"}], "owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482349849, "creation_date": 1482349849, "question_id": 41270851, "link": "https://stackoverflow.com/questions/41270851/got-uninitialized-constant-seleniumrspec-error-when-trying-to-use-capture-s", "title": "Got &quot;uninitialized constant Selenium::RSpec&quot; error when trying to use &quot;capture_system_state&quot; method from &quot;selenium-client&quot; lib (Ruby + Appium + Rspec)", "body": "<p>I have the following code:</p>\n\n<pre><code>require 'rubygems'\nrequire 'rspec/core'\nrequire 'touch_action'\nrequire 'appium_lib'\nrequire 'rspec/expectations'\nrequire \"selenium\"\nrequire \"selenium/client\"\nrequire \"selenium-client\"\n\nRSpec.configure do |config|\n  config.include RSpec::Matchers\n  config.include Selenium\n  config.before(:example) do |example|\n    desired_caps = {\n        caps: {\n            platformName: 'Android',\n            versionNumber: '6.0.1',\n            deviceName: 'Galaxy S6',\n            device: 'Android',\n            takesScreenshot: true,\n            screenshotWaitTimeout: 20,\n            app: '../app-mockBLE_SK.apk'\n        }\n    }\n\n    @driver = Appium::Driver.new(desired_caps).start_driver\n    @driver.manage.timeouts.implicit_wait = 120\n  end\n  Appium::Logger.level = Logger::INFO\n\n  config.after do |result|\n    a = Selenium::RSpec::Reporting::SystemCapture.capture_system_state(@driver, self)\n    puts a.to_s\n    driver.save_screenshot '../Reports/1.png'\n    @driver.remove_app 'com.medtronicndt.envisionpro.mock'\n    @driver.quit\n  end\n\nend\n</code></pre>\n\n<p>But when I run my TC I see \"uninitialized constant Selenium::RSpec\" error. Why it doesn't allows me to call \"capture_system_state\" method? The reason of I am trying call this method is to determine when TC fails and do screenshot.</p>\n"}, {"tags": ["sql", "ruby", "ruby-on-rails-3", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1482346883, "post_id": 41269985, "comment_id": 69741015, "body": "Do you have the generated sql?"}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482347512, "post_id": 41269985, "comment_id": 69741358, "body": "Hi @EricDuminil, I just made a quick edit and added the generated SQL."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482348240, "post_id": 41269985, "comment_id": 69741781, "body": "<code>SELECT DISTINCT SUM(workout_duration)</code> looks wrong. I don&#39;t know how to get it in one rails query. You could get a list of <code>workouts</code> based on distinct <code>post_id</code> first, and sum duration after."}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482349947, "post_id": 41269985, "comment_id": 69742710, "body": "I just tried <code>@distinct_posts = @user.results.joins(:workout).select(:user_id, :post_id).distinct</code> and then <code>@minute_total = @distinct_posts.sum(:workout_length)</code> and it generated basically the same SQL. I might just defer to using raw SQL but I feel like that query would take longer to execute than with the nifty rails functions..."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482350251, "post_id": 41269985, "comment_id": 69742860, "body": "Yes, you&#39;d need a <code>.to_a</code> after the first query."}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482355736, "post_id": 41269985, "comment_id": 69745784, "body": "I think it might be most efficient to just grab my results via raw SQL, which I achieved. However, right now my <code>ActiveRecord::Base.connection.execute(sql_query)</code> query is returning <code>[{&quot;SUM(workout_duration)&quot;=&gt;3, 0=&gt;3}]</code>...I feel dumb for not being able to properly extract the sum, but I can&#39;t seem to figure that out...how do I get it to just spit out &quot;3&quot; rather than that hash?"}, {"owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482355957, "post_id": 41269985, "comment_id": 69745875, "body": "Well I think I just solved my problem by doing <code>ActiveRecord::Base.connection.execute(sql_query)[0][0]</code>...I just feel weird about doing that...I think I&#39;m going to go ahead and mark this as solved."}], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "is_accepted": true, "score": 0, "last_activity_date": 1482356119, "creation_date": 1482356119, "answer_id": 41272271, "question_id": 41269985, "link": "https://stackoverflow.com/questions/41269985/cant-sum-distinct-values-in-ruby-on-rails/41272271#41272271", "title": "Can&#39;t SUM DISTINCT values in Ruby on Rails", "body": "<p>I solved this by using raw SQL:</p>\n\n<pre><code> @minute_total = ActiveRecord::Base.connection.execute(minute_query)[0][0]\n\nprivate\ndef minute_query\n\"SELECT SUM(workout_duration) \nFROM (SELECT DISTINCT(results.post_id), results.user_id, workouts.workout_duration \nFROM results LEFT OUTER JOIN workouts ON results.workout_id = workouts.id   \nWHERE results.user_id = #{@user.id})\"\nend\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 1, "accepted_answer_id": 41272271, "answer_count": 1, "score": 3, "last_activity_date": 1482356119, "creation_date": 1482346484, "last_edit_date": 1482347478, "question_id": 41269985, "link": "https://stackoverflow.com/questions/41269985/cant-sum-distinct-values-in-ruby-on-rails", "title": "Can&#39;t SUM DISTINCT values in Ruby on Rails", "body": "<p>I have 4 tables: Users, Workouts, Exercises, and Results. A \"User\" posts \"Results\" for \"Exercises\" which are linked to a single \"Workout\". But when the user posts results, since there are multiple exercises, results for one workout can be linked with a unique \"post_id\". I would like to know how many total minutes a user exercised based on how many \"post_ids\" they provided which can be linked to the \"Workouts\" table where a \"workout_duration\" column shows how many minutes each workout lasts. Here is some sample data, where in this case the workout (workout_id=1) has two exercises and has a workout_duration of 1 minute.</p>\n\n<p>Results:</p>\n\n<pre><code>user_id| workout_id| post_id| exercise_id| number_of_reps|\n-------+-----------+--------+------------+---------------+\n    123|         1 |       1|          1 |             18|\n    123|         1 |       1|          2 |             29|      \n    123|         1 |       2|          1 |             15|\n    123|         1 |       2|          2 |             30|\n    123|         1 |       3|          1 |             20|\n    123|         1 |       3|          2 |             28|\n-------+-----------+--------+------------+---------------+\n</code></pre>\n\n<p>Workouts:</p>\n\n<pre><code>workout_id| workout_duration|\n----------+-----------------+\n         1|                1|\n</code></pre>\n\n<p>I tried to retrieve the total number of minutes based on the query below, but it is returning a sum of 6 when I want it to return a value of 3...I think this is because the SUM is not taking into account DISTINCT post_ids...rather it is just summing all post_ids. </p>\n\n<pre><code>@user = User.find(current_user)\n@total_minutes = @user.results.includes(:workout).select(:post_id).distinct.sum(:workout_duration)\n</code></pre>\n\n<p>I have searched high and low for solutions to no avail...any ideas?</p>\n\n<p>EDIT:\nHere is the generated SQL from the query above:</p>\n\n<pre><code>SELECT DISTINCT SUM(workout_duration) \nFROM \"results\" \nLEFT OUTER JOIN \"workouts\" ON \"workouts\".\"id\" = \"results\".\"workout_id\" \nWHERE \"results\".\"user_id\" = ?  [[\"user_id\", 123]]\n</code></pre>\n"}, {"tags": ["ruby", "heroku", "sequel", "heroku-postgres", "sequel-gem"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1482428390, "creation_date": 1482428390, "answer_id": 41288935, "question_id": 41269950, "link": "https://stackoverflow.com/questions/41269950/ruby-sequel-migrations-running-but-fail-to-add-columns/41288935#41288935", "title": "Ruby Sequel migrations running, but fail to add columns", "body": "<p>It depends how your rake task is written.  Sequel does not ship rake tasks, so you'll have to check where you got the rake task from.</p>\n\n<p>In general, the only reason that the migration wouldn't add the column is if the migration wasn't run.  For example, if the schema version in the database was already 19, then it wouldn't run migration 19 when you migrate up.  This would explain why it did run the migration when you copied it to migration 20 and then migrated up.  If you run the migrator with a database logger, Sequel will log migration activity (in addition to SQL).</p>\n"}], "owner": {"reputation": 105, "user_id": 3888023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbd26c98df447464cfa56dbe870e7d45?s=128&d=identicon&r=PG&f=1", "display_name": "jdmcpeek", "link": "https://stackoverflow.com/users/3888023/jdmcpeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 41288935, "answer_count": 1, "score": 1, "last_activity_date": 1482428390, "creation_date": 1482346366, "question_id": 41269950, "link": "https://stackoverflow.com/questions/41269950/ruby-sequel-migrations-running-but-fail-to-add-columns", "title": "Ruby Sequel migrations running, but fail to add columns", "body": "<p>I am using the Heroku Postgres addon for my DB (basic version). Ruby Sequel is my ORM for schema management. </p>\n\n<p>Recently, some migrations have not updated the DB schema.</p>\n\n<p>I run migration 19, 019_add_last_unique_story_to_user.rb: </p>\n\n<pre><code>Sequel.migration do\n  up do\n    alter_table(:state_tables) do\n      add_column :last_unique_story, Integer, default: 0\n      add_column :last_unique_story_read?, TrueClass, default: true\n    end\n  end\n  down do\n    alter_table(:state_tables) do\n      drop_column :last_unique_story\n      drop_column :last_unique_story_read?\n    end\n  end\nend\n</code></pre>\n\n<p>This updates the DB[:schema_info] from version 18 to 19, but no columns are added to the :state_table table. This problem exists for both production and local databases. I have tried migrating multiple times and checked that the db url was correct. </p>\n\n<p>My quick fix:\nI copy and pasted the above code into a <em>20th</em> migration, 020_test.rb, and ran my rake migration task <code>rake db:migrate:up</code>. This successfully updated the database.</p>\n\n<p>Does anyone know what could be going on here? Why do some migrations run successfully, update the migration version, yet not update any columns? Could this be a naming issue, a caching issue, or a Heroku issue? Thanks for you help! </p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1482345631, "post_id": 41269615, "comment_id": 69740320, "body": "What is your question?"}, {"owner": {"reputation": 1411, "user_id": 5346525, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kqOTt.jpg?s=128&g=1", "display_name": "Deepak Dholiyan", "link": "https://stackoverflow.com/users/5346525/deepak-dholiyan"}, "edited": false, "score": 0, "creation_date": 1482345808, "post_id": 41269615, "comment_id": 69740433, "body": "Question is not clear"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1482352910, "post_id": 41269615, "comment_id": 69744323, "body": "So... you want something that converts the actual representation of the enum (which is 0-8) converted to a string-representation of the rails-visible enum value (eg &quot;gender&quot;)... ?"}, {"owner": {"reputation": 21, "user_id": 2183932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c1d69d9f08dc24f14c15ef82862645?s=128&d=identicon&r=PG", "display_name": "Cesar Eduardo Rodriguez", "link": "https://stackoverflow.com/users/2183932/cesar-eduardo-rodriguez"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1482354226, "post_id": 41269615, "comment_id": 69745011, "body": "Hi @TarynEast Yes I want to see the string representation in json (I updated my question with examples), any other value required in the query (not shown in this example) has its string representation but I don&#39;t know what is going on when doing a nested join"}, {"owner": {"reputation": 21, "user_id": 2183932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c1d69d9f08dc24f14c15ef82862645?s=128&d=identicon&r=PG", "display_name": "Cesar Eduardo Rodriguez", "link": "https://stackoverflow.com/users/2183932/cesar-eduardo-rodriguez"}, "edited": false, "score": 0, "creation_date": 1482354449, "post_id": 41269615, "comment_id": 69745133, "body": "When you use as_json enum values are shown in strings and it is not working in this example."}], "owner": {"reputation": 21, "user_id": 2183932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c1d69d9f08dc24f14c15ef82862645?s=128&d=identicon&r=PG", "display_name": "Cesar Eduardo Rodriguez", "link": "https://stackoverflow.com/users/2183932/cesar-eduardo-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1482354086, "creation_date": 1482345176, "last_edit_date": 1482354086, "question_id": 41269615, "link": "https://stackoverflow.com/questions/41269615/nested-join-query-enum-values-show-up-as-integers-in-its-json-representation", "title": "Nested Join query enum values show up as integers in its json representation", "body": "<p>When doing a select of a nested association enum value and changing it to its json representation these values wont convert to strings, any other simple join value has its string representation. </p>\n\n<p>Enum: (Example, real enum has more values)</p>\n\n<pre><code>enum category_type: [:gender, :another_value]\n</code></pre>\n\n<p>Query: (Example, real query has more joins and fields)</p>\n\n<pre><code>  def self.report\n    select_fields = 'question_categories.category_type'\n\n    joins(question: :question_category)\n      .select(select_fields)\n      .group('question_categories.category_type')\n  end\n</code></pre>\n\n<p>JSON: Right Now</p>\n\n<pre><code>[{\"id\"=&gt;nil, \"category_type\"=&gt;0},\n {\"id\"=&gt;nil, \"category_type\"=&gt;1}]\n</code></pre>\n\n<p>JSON: What i want to see</p>\n\n<pre><code>[{\"id\"=&gt;nil, \"category_type\"=&gt;\"gender\"},\n {\"id\"=&gt;nil, \"category_type\"=&gt;\"another value\"}]\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5087, "user_id": 2942471, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000008666513/picture?type=large", "display_name": "manonthemat", "link": "https://stackoverflow.com/users/2942471/manonthemat"}, "edited": false, "score": 0, "creation_date": 1482344089, "post_id": 41269289, "comment_id": 69739445, "body": "A better place for this would be codereview.stackexchange.com"}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1482344540, "post_id": 41269289, "comment_id": 69739685, "body": "You may consider <code>accepts_nested_attributes_for</code> in UsersController. Then you don&#39;t need to assign the company explicitly in the action."}], "answers": [{"tags": [], "owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "is_accepted": true, "score": 1, "last_activity_date": 1482344592, "creation_date": 1482344592, "answer_id": 41269463, "question_id": 41269289, "link": "https://stackoverflow.com/questions/41269289/assign-user-to-a-company-on-sign-up/41269463#41269463", "title": "Assign User to a Company on sign up", "body": "<p>You could use <a href=\"http://apidock.com/rails/ActiveRecord/Relation/first_or_create\" rel=\"nofollow noreferrer\"><code>first_or_create</code></a>:</p>\n\n<pre><code>user.company = Company.where(name: params['company']).first_or_create\n</code></pre>\n\n<p>...which basically does what it says on the tin.</p>\n"}], "owner": {"reputation": 3, "user_id": 7321409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c8a255a0f28b123c6f3d186cfc9da60?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7321409/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41269463, "answer_count": 1, "score": 0, "last_activity_date": 1482346334, "creation_date": 1482344002, "last_edit_date": 1482346334, "question_id": 41269289, "link": "https://stackoverflow.com/questions/41269289/assign-user-to-a-company-on-sign-up", "title": "Assign User to a Company on sign up", "body": "<p>Let's say I have a User model:</p>\n\n<pre><code>    class User\n      has_secure_password\n      belongs_to :company, required: true\n    end\n</code></pre>\n\n<p>And a Company model:</p>\n\n<pre><code>    class Company\n      has_many :users, dependent: :destroy\n    end\n</code></pre>\n\n<p>I wand to create a form that assigns the User to a Company, either a new one if my app doesn't have a record with that company name, or a pre-existing Company.</p>\n\n<p>This is what I have so far, but I am sure there is dryer method...</p>\n\n<pre><code>    class UsersController\n      def create\n        user = User.new(user_params)\n        user.company = Company.find_by_name(params['company']) || Comapny.create(name: params['company'])\n        if user.save\n          redirect_to root_path\n        else\n          redirect_to singup_path\n        end\n      end\n    end\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sinatra", "octopus"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482376885, "post_id": 41269075, "comment_id": 69752031, "body": "Which threads are you talking about?"}, {"owner": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482424510, "post_id": 41269075, "comment_id": 69777795, "body": "@maxple The threads that serve a request on the server."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482430826, "post_id": 41269075, "comment_id": 69781278, "body": "See <a href=\"http://stackoverflow.com/questions/22211547/how-to-make-activerecord-threadsafe\" title=\"how to make activerecord threadsafe\">stackoverflow.com/questions/22211547/&hellip;</a>"}], "owner": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482343235, "creation_date": 1482343235, "question_id": 41269075, "link": "https://stackoverflow.com/questions/41269075/using-multiple-database-connections-on-the-same-model-with-thread-safety-in-sina", "title": "Using multiple database connections on the same model with thread safety in Sinatra", "body": "<p>I have a Sinatra application that is written in jruby and compiled into java and deployed on multi threaded Apache Tomcat server.</p>\n\n<p>In one of the controllers, I want to be able to specify the model to use a particular database connection. So far I have looked at <a href=\"https://github.com/thiagopradi/octopus\" rel=\"nofollow noreferrer\">octopus gem</a>. I am not sure if octopus is thread safe or not.</p>\n\n<p>Is there an easy way to do this while being thread safe?</p>\n"}, {"tags": ["ruby", "namespaces", "ruby-2.0", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 0, "creation_date": 1482693252, "post_id": 41269039, "comment_id": 69851256, "body": "Appreciate you showing how you determined it, thanks!"}, {"owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 0, "creation_date": 1482695892, "post_id": 41269039, "comment_id": 69851825, "body": "One thing that&#39;s interesting and slightly confusing is the following scenario: [1] pry(main)&gt; class C1 [1] pry(main)* end =&gt; nil [2] pry(main)&gt; class C2 &lt; C1 [2] pry(main)* class Nested &lt; Nested [2] pry(main)* end [2] pry(main)* end NameError: uninitialized constant C2::Nested from (pry):4:in `&lt;class:C2&gt;&#39; [3] pry(main)&gt;"}, {"owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 0, "creation_date": 1482695907, "post_id": 41269039, "comment_id": 69851830, "body": "So, by not defining C1::Nested, the error message is NameError: uninitialized constant C2::Nested, does this make sense to you?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1482343086, "creation_date": 1482343086, "answer_id": 41269039, "question_id": 41268784, "link": "https://stackoverflow.com/questions/41268784/how-does-ruby-namespace-the-parent-class-of-a-nested-class/41269039#41269039", "title": "How does Ruby namespace the parent class of a nested class", "body": "<p>It is quite easy to get youself:</p>\n\n<pre><code>class C1; class Nested; end; end\nclass C2&lt;C1; class Nested&lt;Nested; end; end\n\nC2::Nested.ancestors\n#\u21d2 [\n#  [0] C2::Nested &lt; C1::Nested,\n#  [1] C1::Nested &lt; Object,\n#  [2] Object &lt; BasicObject,\n#  [3] PP::ObjectMixin,\n#  [4] Kernel,\n#  [5] BasicObject\n# ]\n</code></pre>\n\n<p>So, yes, It\u2019s implicitly resolved to <code>ApplicationPolicy::Scope</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 1, "creation_date": 1482693016, "post_id": 41269051, "comment_id": 69851213, "body": "Thank you for the quick reply, and sorry for taking a while to respond. Your answer was awesome an super thorough! Thank you. For some reason, the shorthand of <code>class Scope &lt; Scope</code> really referring to <code>ApplicationPolicy::Scope</code> doesn&#39;t seem natural to me or what I would expect, but I guess it&#39;s just the way it is and at least now I understand!"}, {"owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 0, "creation_date": 1482694835, "post_id": 41269051, "comment_id": 69851578, "body": "One thing that&#39;s interesting and slightly confusing is the following scenario:  [1] pry(main)&gt; class C1 [1] pry(main)* end =&gt; nil [2] pry(main)&gt; class C2 &lt; C1 [2] pry(main)*   class Nested &lt; Nested [2] pry(main)*   end [2] pry(main)* end NameError: uninitialized constant C2::Nested from (pry):4:in `&lt;class:C2&gt;&#39; [3] pry(main)&gt;"}, {"owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 0, "creation_date": 1482694976, "post_id": 41269051, "comment_id": 69851611, "body": "By not defining <code>C1::Nested</code>, the error message is <code>NameError: uninitialized constant C2::Nested</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "edited": false, "score": 0, "creation_date": 1482695235, "post_id": 41269051, "comment_id": 69851670, "body": "You&#39;re welcome. I agree the syntax is a bit too convoluted. I wouldn&#39;t use it for anything that should be read by other people."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 4, "last_activity_date": 1482344179, "last_edit_date": 1482344179, "creation_date": 1482343140, "answer_id": 41269051, "question_id": 41268784, "link": "https://stackoverflow.com/questions/41268784/how-does-ruby-namespace-the-parent-class-of-a-nested-class/41269051#41269051", "title": "How does Ruby namespace the parent class of a nested class", "body": "<h1>Short answer</h1>\n\n<p>You are right on both counts. You can check it with <a href=\"https://ruby-doc.org/core-2.3.0/Module.html#method-i-ancestors\" rel=\"nofollow noreferrer\"><code>Class#ancestors</code></a> :</p>\n\n<pre><code>class ApplicationPolicy\n  class Scope\n  end\nend\n\nclass PostPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n  end\nend\n\np PostPolicy::Scope.ancestors\n#=&gt; [PostPolicy::Scope, ApplicationPolicy::Scope, Object, Kernel, BasicObject]\n</code></pre>\n\n<h1>Equivalent code</h1>\n\n<p>The above code is exactly the same as :</p>\n\n<pre><code>class ApplicationPolicy\nend\n\nclass ApplicationPolicy::Scope\nend\n\nclass PostPolicy &lt; ApplicationPolicy\nend\n\nclass PostPolicy::Scope &lt; ApplicationPolicy::Scope\nend\n\np PostPolicy::Scope.ancestors\n#=&gt; [PostPolicy::Scope, ApplicationPolicy::Scope, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>Note that <code>PostPolicy::Scope</code> doesn't inherit from <code>PostPolicy</code>. They are independant classes, the former just happens to be defined in the namespace of the latter.</p>\n\n<h1>Another way to check</h1>\n\n<pre><code>class A\n  class Scope\n  end\nend\n\nclass B &lt; A\n  class Scope &lt; Scope\n  end\nend\n\nclass C\n  class Scope &lt; Scope\n  end\nend\n</code></pre>\n\n<p>fails with :</p>\n\n<pre><code>namespace.rb:26:in `&lt;class:C&gt;': uninitialized constant C::Scope (NameError)\n    from namespace.rb:25:in `&lt;main&gt;'\n</code></pre>\n\n<p>It means that <code>Scope</code> must come from <code>A</code> namespace.</p>\n"}], "owner": {"reputation": 671, "user_id": 1022988, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3bd37d358d61584d5d08b42148ab090c?s=128&d=identicon&r=PG", "display_name": "mackshkatz", "link": "https://stackoverflow.com/users/1022988/mackshkatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 0, "accepted_answer_id": 41269051, "answer_count": 2, "score": 3, "last_activity_date": 1482344179, "creation_date": 1482342112, "question_id": 41268784, "link": "https://stackoverflow.com/questions/41268784/how-does-ruby-namespace-the-parent-class-of-a-nested-class", "title": "How does Ruby namespace the parent class of a nested class", "body": "<p>While working with the Ruby gem Pundit, I realized I was unsure of the way some namespacing works within Ruby and I do not like mysteries/uncertainties in my mind.</p>\n\n<p>Pundit suggests you set up an <code>application_policy.rb</code> as so:</p>\n\n<pre><code>class ApplicationPolicy\n  class Scope\n     .\n     .\n     .\n  end\nend\n</code></pre>\n\n<p>What actually is happening inside of the class doesn't matter, just the structure of the classes do.</p>\n\n<p>Then you specify a policy for a  particular resource that inherits from <code>ApplicationPolicy</code>, say <code>post_policy.rb</code> as so:</p>\n\n<pre><code>class PostPolicy &lt; ApplicationPolicy\n  class Scope &lt; Scope\n  end\nend\n</code></pre>\n\n<p>My general question is, inside my <code>PostPolicy</code>, when I declare that <code>Scope &lt; Scope</code>, what does the parent <code>Scope</code> refer to? Does it automatically get namespaced within the parent of the outer class? So is it essentially the same as inheriting from <code>ApplicationPolicy::Scope</code>? I am having trouble finding a way to answer this on my own, thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "controller"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482338452, "post_id": 41267621, "comment_id": 69736305, "body": "first of all: you do not need to use <code>all</code> only when you do this <code>Post.all</code>"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482338631, "post_id": 41267621, "comment_id": 69736426, "body": "why is your <code>params[:id]</code> not the user_id but the username?"}], "answers": [{"comments": [{"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482339292, "post_id": 41267743, "comment_id": 69736803, "body": "@Fallenhero nah, I don&#39;t think so. It&#39;s rather illogical to display posts of any user on profile page"}, {"owner": {"reputation": 67, "user_id": 7311390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a051b6cbc96fee8e339e642f2d1c6d2?s=128&d=identicon&r=PG&f=1", "display_name": "naridi", "link": "https://stackoverflow.com/users/7311390/naridi"}, "edited": false, "score": 0, "creation_date": 1482340010, "post_id": 41267743, "comment_id": 69737207, "body": "@NikitaMisharin everything in that worked except the &quot;, created_at: 7.days.ago&quot;. It displayed no posts on the profile page."}], "tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": false, "score": 0, "last_activity_date": 1482340189, "last_edit_date": 1482340189, "creation_date": 1482338437, "answer_id": 41267743, "question_id": 41267621, "link": "https://stackoverflow.com/questions/41267621/merging-controller-lines/41267743#41267743", "title": "Merging controller lines", "body": "<p>You got it almost right, should've use key arguments, though.\nHere is the working solution</p>\n\n<pre><code>Post.where(user_id: User.find_by_username(params[:id]).id).where('created_at &gt; ?', 7.days.ago)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 7311390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a051b6cbc96fee8e339e642f2d1c6d2?s=128&d=identicon&r=PG&f=1", "display_name": "naridi", "link": "https://stackoverflow.com/users/7311390/naridi"}, "edited": false, "score": 0, "creation_date": 1482340203, "post_id": 41268114, "comment_id": 69737319, "body": "Worked! Thanks so much, I didn&#39;t know about the two &quot;.where&quot; trick!"}], "tags": [], "owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "is_accepted": true, "score": 0, "last_activity_date": 1482339697, "creation_date": 1482339697, "answer_id": 41268114, "question_id": 41267621, "link": "https://stackoverflow.com/questions/41267621/merging-controller-lines/41268114#41268114", "title": "Merging controller lines", "body": "<pre><code>@posts = Post.all.where(\"user_id = ?\", User.find_by_username(params[:id]).id)\n@posts = Post.where('created_at &gt;= :seven_days_ago', seven_days_ago: Time.now - 7.days)\n</code></pre>\n\n<p>You could fix it by chaining two <code>where</code>.</p>\n\n<pre><code>@posts = Post.all.where(\"user_id = ?\", User.find_by_username(params[:id]).id)\n                 .where('created_at &gt;= :seven_days_ago', seven_days_ago: Time.now - 7.days)\n</code></pre>\n\n<p>More, you can use subquery instead of two separate query</p>\n\n<pre><code>@posts = Post.all.where(:user_id =&gt; User.where(:username =&gt; params[:id]))\n                 .where('created_at &gt;= :seven_days_ago', seven_days_ago: Time.now - 7.days)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7311390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a051b6cbc96fee8e339e642f2d1c6d2?s=128&d=identicon&r=PG&f=1", "display_name": "naridi", "link": "https://stackoverflow.com/users/7311390/naridi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41268114, "answer_count": 2, "score": 0, "last_activity_date": 1482340189, "creation_date": 1482338073, "question_id": 41267621, "link": "https://stackoverflow.com/questions/41267621/merging-controller-lines", "title": "Merging controller lines", "body": "<p>In my pages_controller.rb, I have the following defined for a user's profile page:</p>\n\n<pre><code>def profile\n if (User.find_by_username(params[:id]))\n  @username = params[:id]\n  @users = User.all.where(\"id = ?\", User.find_by_username(params[:id]).id)\n  @posts = Post.all.where(\"user_id = ?\", User.find_by_username(params[:id]).id)\n else\n  # redirect to 404 (root for now)\n  redirect_to root_path, :notice=&gt; \"User not found\"\n end\n  @newPost = Post.new\nend\n</code></pre>\n\n<p>As displayed above, I use this line to show posts on a profile page that only belong to that user:</p>\n\n<pre><code>@posts = Post.all.where(\"user_id = ?\", User.find_by_username(params[:id]).id)\n</code></pre>\n\n<p>However, I also want to add this line, which will only show posts that are less than a day old:</p>\n\n<pre><code>@posts = Post.where('created_at &gt;= :seven_days_ago', seven_days_ago: Time.now - 7.days)\n</code></pre>\n\n<p>How do I merge these two together? I thought I can just do this:</p>\n\n<pre><code>@posts = Post.all.where(\"user_id = ?\", User.find_by_username(params[:id]).id, 'created_at &gt;= :seven_days_ago', seven_days_ago: Time.now - 7.days)\n</code></pre>\n\n<p>But that isn't allowed. What's the proper fix?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 1922229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f75ca1b0bcb23af72d31f51872366f4?s=128&d=identicon&r=PG", "display_name": "rsnyder", "link": "https://stackoverflow.com/users/1922229/rsnyder"}, "is_accepted": true, "score": 0, "last_activity_date": 1482941589, "creation_date": 1482941589, "answer_id": 41365798, "question_id": 41267570, "link": "https://stackoverflow.com/questions/41267570/bsoninvalidobjectid-illegal-objectid-format-rails-3-1-1/41365798#41365798", "title": "BSON::InvalidObjectId illegal ObjectId format Rails 3.1.1", "body": "<p>I found that the issue is in my <code>services_controller</code></p>\n\n<p>There was a line <code>before_filter :load_service_by_slug, :only =&gt; [:edit, :update, :move_up, :move_down]</code></p>\n\n<p>I had to add <code>:destroy</code> to that line. </p>\n"}], "owner": {"reputation": 305, "user_id": 1922229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f75ca1b0bcb23af72d31f51872366f4?s=128&d=identicon&r=PG", "display_name": "rsnyder", "link": "https://stackoverflow.com/users/1922229/rsnyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 41365798, "answer_count": 1, "score": 0, "last_activity_date": 1482941589, "creation_date": 1482337885, "last_edit_date": 1482939606, "question_id": 41267570, "link": "https://stackoverflow.com/questions/41267570/bsoninvalidobjectid-illegal-objectid-format-rails-3-1-1", "title": "BSON::InvalidObjectId illegal ObjectId format Rails 3.1.1", "body": "<p>I'm getting the following error when trying to use the delete method in a Ruby on Rails application.</p>\n\n<p><code>BSON::InvalidObjectId in ServicesController#destroy</code></p>\n\n<p>I'm using Rails 3.1.1 and MongoDB v2.4.15</p>\n\n<p>Below is the <code>Delete</code> link in question.</p>\n\n<p><code>%li= link_to 'Delete', @service, :method =&gt; :delete, :confirm =&gt; \"Are you sure you want to delete this service?\"</code></p>\n\n<p>Here is the log error:</p>\n\n<pre><code>Started DELETE \"/services/appeals\" for 127.0.0.1 at 2016-12-21 11:08:42 -0500\nCreating scope :orderable_scope. Overwriting existing method Service.orderable_scope.\n  Processing by ServicesController#destroy as HTML\n  Parameters: {\"authenticity_token\"=&gt;\"xxx\", \"id\"=&gt;\"appeals\"}\nCompleted 500 Internal Server Error in 11ms\n\nBSON::InvalidObjectId (illegal ObjectId format: appeals):\n</code></pre>\n\n<p>When deleting items in other collections it works fine. I'm able to use the \"services\" edit link without errors. Below is the working <code>Delete</code> link and logs for deleting an attorney.</p>\n\n<p><strong>Working Link</strong>\n<code>%li= link_to \"Delete\", @attorney, :method =&gt; :delete, :confirm =&gt; \"Are you sure you want to delete this attorney?\"</code></p>\n\n<p><strong>Working Log</strong></p>\n\n<pre><code>Started DELETE \"/attorneys/first-last\" for 127.0.0.1 at 2016-12-21 10:37:07 -0500\nCreating scope :orderable_scope. Overwriting existing method Attorney.orderable_scope.Processing by AttorneysController#destroy as HTMLParameters: {\"authenticity_token\"=&gt;\"xxx\", \"id\"=&gt;\"first-last\"}\nMONGODB x_development['system.namespaces'].find({})\nMONGODB x_development['attorneys'].find({:slug=&gt;\"first-last\"}).limit(-1).sort([[:_id, :asc]])\nMONGODB x_development['system.namespaces'].find({})\nMONGODB x_development['users'].find({:_id=&gt;BSON::ObjectId('585a9dbc737da97cbd000006')}).limit(-1).sort([[:_id, :asc]])\nCreating scope :orderable_scope. Overwriting existing method Service.orderable_scope.\nMONGODB x_development['system.namespaces'].find({})\nRedirected to http://0.0.0.0:3000/attorneys\nCompleted 302 Found in 69ms` \n</code></pre>\n\n<p>It's another developers application that I'm trying to get working correctly again. I'm not very experienced with Ruby, Rails, or MongoDB.</p>\n\n<p><strong>UPDATE</strong>\nBelow is the <code>Full Trace</code></p>\n\n<pre><code>bson (1.4.0) lib/bson/types/object_id.rb:126:in `from_string'\nmongoid (2.4.12) lib/mongoid/fields/internal/object_id.rb:38:in `serialize'\nmongoid (2.4.12) lib/mongoid/criterion/optional.rb:97:in `for_ids'\nmongoid (2.4.12) lib/mongoid/criteria.rb:310:in `search'\nmongoid (2.4.12) lib/mongoid/criterion/inclusion.rb:125:in `find'\nmongoid (2.4.12) lib/mongoid/finders.rb:84:in `find'\ninherited_resources (1.3.1) lib/inherited_resources/base_helpers.rb:44:in `resource'\ncancan (1.6.7) lib/cancan/inherited_resource.rb:11:in `load_resource_instance'\ncancan (1.6.7) lib/cancan/controller_resource.rb:32:in `load_resource'\ncancan (1.6.7) lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'\ncancan (1.6.7) lib/cancan/controller_resource.rb:10:in `block in add_before_filter'\nactivesupport (3.1.1) lib/active_support/callbacks.rb:439:in `_run__3707406960644643515__process_action__1333295842175195574__callbacks'\nactivesupport (3.1.1) lib/active_support/callbacks.rb:386:in `_run_process_action_callbacks'\nactivesupport (3.1.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (3.1.1) lib/abstract_controller/callbacks.rb:17:in `process_action'\nactionpack (3.1.1) lib/action_controller/metal/rescue.rb:17:in `process_action'\nactionpack (3.1.1) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'\nactivesupport (3.1.1) lib/active_support/notifications.rb:53:in `block in instrument'\nactivesupport (3.1.1) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (3.1.1) lib/active_support/notifications.rb:53:in `instrument'\nactionpack (3.1.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'\nactionpack (3.1.1) lib/action_controller/metal/params_wrapper.rb:201:in `process_action'\nactionpack (3.1.1) lib/abstract_controller/base.rb:121:in `process'\nactionpack (3.1.1) lib/abstract_controller/rendering.rb:45:in `process'\nactionpack (3.1.1) lib/action_controller/metal.rb:193:in `dispatch'\nactionpack (3.1.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'\nactionpack (3.1.1) lib/action_controller/metal.rb:236:in `block in action'\nactionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:65:in `call'\nactionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:65:in `dispatch'\nactionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:29:in `call'\nrack-mount (0.8.3) lib/rack/mount/route_set.rb:152:in `block in call'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:96:in `block in recognize'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:131:in `optimized_each'\nrack-mount (0.8.3) lib/rack/mount/code_generation.rb:95:in `recognize'\nrack-mount (0.8.3) lib/rack/mount/route_set.rb:141:in `call'\nactionpack (3.1.1) lib/action_dispatch/routing/route_set.rb:532:in `call'\nmongoid (2.4.12) lib/rack/mongoid/middleware/identity_map.rb:33:in `block in call'\nmongoid (2.4.12) lib/mongoid.rb:133:in `unit_of_work'\nmongoid (2.4.12) lib/rack/mongoid/middleware/identity_map.rb:33:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'\nrack (1.3.6) lib/rack/etag.rb:23:in `call'\nrack (1.3.6) lib/rack/conditionalget.rb:35:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/head.rb:14:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/flash.rb:243:in `call'\nrack (1.3.6) lib/rack/session/abstract/id.rb:195:in `context'\nrack (1.3.6) lib/rack/session/abstract/id.rb:190:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/cookies.rb:331:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (3.1.1) lib/active_support/callbacks.rb:392:in `_run_call_callbacks'\nactivesupport (3.1.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (3.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/reloader.rb:68:in `call'\nrack (1.3.6) lib/rack/sendfile.rb:101:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/remote_ip.rb:48:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'\nrailties (3.1.1) lib/rails/rack/logger.rb:13:in `call'\nrack (1.3.6) lib/rack/methodoverride.rb:24:in `call'\nrack (1.3.6) lib/rack/runtime.rb:17:in `call'\nactivesupport (3.1.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'\nrack (1.3.6) lib/rack/lock.rb:15:in `call'\nactionpack (3.1.1) lib/action_dispatch/middleware/static.rb:53:in `call'\nrailties (3.1.1) lib/rails/engine.rb:456:in `call'\nrailties (3.1.1) lib/rails/rack/content_length.rb:16:in `call'\nrailties (3.1.1) lib/rails/rack/log_tailer.rb:14:in `call'\nrack (1.3.6) lib/rack/handler/webrick.rb:59:in `service'\n/Users/Home/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'\n/Users/Home/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'\n/Users/Home/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'\n</code></pre>\n\n<p>Anyone have any ideas? Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "rspec", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482338634, "post_id": 41267561, "comment_id": 69736427, "body": "What browser/versions are you using? The select list was selected for me when using Firefox v 50.1 and Chrome v55."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482338849, "post_id": 41267561, "comment_id": 69736551, "body": "I noticed that when the page loads, there is a &quot;loading&quot; image instead of the form controls. If you watch the script run (or take a screenshot), do you see the form controls load before the 30 second timeout?"}, {"owner": {"reputation": 483, "user_id": 1049663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OA6SO.jpg?s=128&g=1", "display_name": "Azher", "link": "https://stackoverflow.com/users/1049663/azher"}, "edited": false, "score": 0, "creation_date": 1482339486, "post_id": 41267561, "comment_id": 69736914, "body": "Hi Justin, I am using Chrome v55. Yes, there is a loading image that comes up after a while but I get the same issue even when the image has come and gone. Did you manage to select an option successfully when you ran the test? because it&#39;s not working for me."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1482341271, "post_id": 41267561, "comment_id": 69737867, "body": "@Azher Yes, it&#39;s coming but only when I use Chrome, not when I use Firefox, did you try with firefox?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482341530, "post_id": 41267561, "comment_id": 69738022, "body": "@Azher, yes, the option was successfully selected for me. Are you using the latest Chromedriver - v2.26?"}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482342370, "post_id": 41267561, "comment_id": 69738457, "body": "@JustinKo I am using chromedriver v2.26, but still that error is coming, but it&#39;s not happening in firefox."}, {"owner": {"reputation": 483, "user_id": 1049663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OA6SO.jpg?s=128&g=1", "display_name": "Azher", "link": "https://stackoverflow.com/users/1049663/azher"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482343131, "post_id": 41267561, "comment_id": 69738872, "body": "@Justin HHmmm I am using Chrome 55.0.2883.95 and Chromedriver -v2.26. I&#39;m still getting same issue. Did you do something different or just use the same code that I posted above?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482343835, "post_id": 41267561, "comment_id": 69739299, "body": "@Azher, I just copy and pasted your code (plus added a line to open Chrome and directly navigate to the URL). I wonder if it is an OS specific bug. I&#39;m on Windows, which means I am using the win32 version of chromedriver with the latest stable Chrome release which is still just 55.0.2883.87."}, {"owner": {"reputation": 483, "user_id": 1049663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OA6SO.jpg?s=128&g=1", "display_name": "Azher", "link": "https://stackoverflow.com/users/1049663/azher"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1482492314, "post_id": 41267561, "comment_id": 69803304, "body": "@JustinKo Thank you for your help and identifying the issue. Titusfortner came up with a solution that works. It&#39;s a weird one and I will be raising this as a chromedriver bug as i&#39;m sure i&#39;ll probably come across this again."}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 1049663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OA6SO.jpg?s=128&g=1", "display_name": "Azher", "link": "https://stackoverflow.com/users/1049663/azher"}, "edited": false, "score": 0, "creation_date": 1482492173, "post_id": 41271154, "comment_id": 69803216, "body": "Thanks titusfortner, this actually works. It was a weird issue and I will be raising a chromedriver bug. Once again thank you for finding a solution to what was a blocker."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": true, "score": 2, "last_activity_date": 1482351128, "creation_date": 1482351128, "answer_id": 41271154, "question_id": 41267561, "link": "https://stackoverflow.com/questions/41267561/unable-to-get-true-condition-on-a-found-element-in-a-select-list-and-select-it/41271154#41271154", "title": "Unable to get &quot;true condition&quot; on a found element in a select list and select it", "body": "<p>This is a weird one. On my mac the select list shows as visible in Firefox, but not in Chrome. Watir checks for select list to be visible before trying to click on the option. The option element is implemented in Selenium so that it will always return as visible.</p>\n\n<p>So this will work for you: </p>\n\n<pre><code>browser.option(label: 'Working capital').click\n</code></pre>\n\n<p>I'm not sure why they are different, or what the issue is on Windows vs Chrome. Presumably chromedriver is using the same isDisplayed javascript code as geckodriver. You could probably raise this as a chromedriver bug.</p>\n"}], "owner": {"reputation": 483, "user_id": 1049663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OA6SO.jpg?s=128&g=1", "display_name": "Azher", "link": "https://stackoverflow.com/users/1049663/azher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1489, "favorite_count": 2, "accepted_answer_id": 41271154, "answer_count": 1, "score": 0, "last_activity_date": 1482351128, "creation_date": 1482337870, "last_edit_date": 1482339731, "question_id": 41267561, "link": "https://stackoverflow.com/questions/41267561/unable-to-get-true-condition-on-a-found-element-in-a-select-list-and-select-it", "title": "Unable to get &quot;true condition&quot; on a found element in a select list and select it", "body": "<p>I'm using Watir 6 with Rspec and i'm having trouble accessing a select list and selecting one of the options. </p>\n\n<p>The URL is: <a href=\"https://www.fundingcircle.com/businesses/apply?video=true\" rel=\"nofollow noreferrer\">https://www.fundingcircle.com/businesses/apply?video=true</a></p>\n\n<p>The code in question which is failing is:</p>\n\n<pre><code>browser.select_list(name: 'loan_product').select('Working capital')\n</code></pre>\n\n<p>HTML:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;select name=\"loan_product\" required=\"\" ng-model=\"prequal.borrower.loan_product\" ng-options=\"product as product.label for product in prequal.loanProducts\" styled-select=\"\" placeholder=\"Please select...\" fc-input=\"\" class=\"ng-scope ng-pristine ng-invalid ng-invalid-required fc-touched\"&gt;\r\n&lt;option value=\"?\" selected=\"selected\" label=\"\"&gt;&lt;/option&gt;&lt;option value=\"0\" label=\"Working capital\"&gt;Working capital&lt;/option&gt;&lt;option value=\"1\" label=\"Expansion/growth\"&gt;Expansion/growth&lt;/option&gt;&lt;option value=\"2\" label=\"Refinancing a loan\"&gt;Refinancing a loan&lt;/option&gt;&lt;option value=\"3\" label=\"Asset finance\"&gt;Asset finance&lt;/option&gt;&lt;option value=\"4\" label=\"Tax payment\"&gt;Tax payment&lt;/option&gt;&lt;option value=\"5\" label=\"Commercial mortgage\"&gt;Commercial mortgage&lt;/option&gt;&lt;option value=\"6\" label=\"Other\"&gt;Other&lt;/option&gt;&lt;/select&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The error I keep on receiving regardless of how many times I have tried changing the code is:</p>\n\n<pre><code>This code has slept for the duration of the default timeout waiting for an Element to be present. If the test is still passing, consider using Element#exists? instead of rescuing UnknownObjectException\nWatir::Exception::UnknownObjectException: element located, but timed out after 30 seconds, waiting for true condition on {:name=&gt;\"loan_product\", :tag_name=&gt;\"select\"}\nfrom /Users/.rvm/gems/ruby-2.2.2/gems/watir-6.0.2/lib/watir/elements/element.rb:528:in `rescue in wait_for_present'\n</code></pre>\n\n<p>The elements exist and all select list options show as true, but unfortunately they don't seem to be visible or present according to the test. Last option I feel is to manipulate the javascript, but I don't want to go down this route if I can help it. I would really appreciate it if someone could put me on the right path and advise how I can get past this issue. Any help would be much appreciated.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "foreign-key-relationship", "lookup-tables", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482336753, "post_id": 41267178, "comment_id": 69735273, "body": "I&#39;m not sure I understand why you have multiple foreign keys. Shouldn&#39;t <code>Carrot has_many :peas</code>?"}, {"owner": {"reputation": 95, "user_id": 4855153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SLZbQ.jpg?s=128&g=1", "display_name": "Phil_ish", "link": "https://stackoverflow.com/users/4855153/phil-ish"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482337063, "post_id": 41267178, "comment_id": 69735485, "body": "In the context of the app, no, a carrot doesn&#39;t have many peas. It&#39;s actually completely independent from peas. The foreign keys are from two other tables.  I should have been more clear but didn&#39;t want to over complicate the question."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1482340587, "post_id": 41267178, "comment_id": 69737520, "body": "I don&#39;t see any problems with your syntax, nor do I think your problem has anything to do with syntax, yet it features prominently in your subject line (i.e. the single most important part of your question, the part upon which people base their decision to click on your question or not). Can you clarify what the exact problem with Ruby syntax is that you are having?"}, {"owner": {"reputation": 95, "user_id": 4855153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SLZbQ.jpg?s=128&g=1", "display_name": "Phil_ish", "link": "https://stackoverflow.com/users/4855153/phil-ish"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1482341219, "post_id": 41267178, "comment_id": 69737841, "body": "@Jorg, perhaps its the wrong syntax for what I&#39;m trying to achieve, not that the syntax itself is incorrect. If &quot;feels&quot; correct, but I&#39;m not getting to my desired outcome which is to find another row in another table with the same foreign key values as the requesting table. I guess I will try to word my questions better in the future?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1482359236, "post_id": 41267178, "comment_id": 69747359, "body": "So both the <code>peas</code> and <code>carrots</code> tables have <code>fk_id</code> and <code>fk2_id</code> columns and those columns have the same meaning in both tables. And given a <code>Carrot</code> instance, you want to find the <code>Pea</code> that has the same <code>fk_id</code> and <code>fk2_id</code> as that <code>Carrot</code>? Or do you have a <code>Pea</code> instance and want to find the <code>Carrot</code> with the same <code>fk_id</code> and <code>fk2_id</code> as your <code>Pea</code>?"}, {"owner": {"reputation": 95, "user_id": 4855153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SLZbQ.jpg?s=128&g=1", "display_name": "Phil_ish", "link": "https://stackoverflow.com/users/4855153/phil-ish"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1482370021, "post_id": 41267178, "comment_id": 69750402, "body": "@mu, I think it&#39;s more the later. In the context of my app, the pea instance comes first (or already exists) and have two characteristics, for example, called &#39;in_season&#39; and &#39;on_sale&#39;. Then carrots are added, one at a time. I want to find (or match?) the newly created rows of carrots that also have the characteristics &#39;in_season&#39; and &#39;on_sale&#39;.  If found we &quot;Say This&quot; else we &quot;Say That&quot;. This is far from the best example, but since I started with peas and carrots...kinda stuck on this road. I hope this makes sense. Thanks for the input."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1482431347, "post_id": 41267178, "comment_id": 69781520, "body": "Why wouldn&#39;t something like <code>Carrot.where(:fk_id =&gt; self.fk_id, :fk2_id =&gt; self.fk2_id)</code> work?"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4855153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SLZbQ.jpg?s=128&g=1", "display_name": "Phil_ish", "link": "https://stackoverflow.com/users/4855153/phil-ish"}, "edited": false, "score": 0, "creation_date": 1482594503, "post_id": 41267525, "comment_id": 69832729, "body": "Although this didn&#39;t provide a solution it did force me to look at the issue differently. I&#39;m sure the method wasn&#39;t called but still not sure why. My Carrot model mimics real-life but might have been the more complicated way to achieve what I was intending to accomplish. Ended up creating a new column with Carrot data into a table that was already associated with Pea. I could do this and still remain within the apps context. Upvoting because it forced me to look at the solution from a different angle."}], "tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": false, "score": 1, "last_activity_date": 1482343711, "last_edit_date": 1482343711, "creation_date": 1482337736, "answer_id": 41267525, "question_id": 41267178, "link": "https://stackoverflow.com/questions/41267178/ruby-syntax-for-finding-same-foreign-key-values-in-different-tables/41267525#41267525", "title": "Ruby Syntax for finding same foreign key values in different tables", "body": "<p><code>find</code> only accepts primary_key as an argument. Use <code>find_by</code> for search by other attributes.</p>\n\n<pre><code>def pea\n  @p = Carrot.find_by(fk_id: 'pea.fk_id', fk2_id: 'pea.fk2_id')\nend\n</code></pre>\n\n<p>Also <code>find</code> throws an error if it find nothing, so if you see no errors <strong>chances are that you haven't called method <code>pea</code> at all</strong>.</p>\n"}], "owner": {"reputation": 95, "user_id": 4855153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SLZbQ.jpg?s=128&g=1", "display_name": "Phil_ish", "link": "https://stackoverflow.com/users/4855153/phil-ish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482343711, "creation_date": 1482336540, "question_id": 41267178, "link": "https://stackoverflow.com/questions/41267178/ruby-syntax-for-finding-same-foreign-key-values-in-different-tables", "title": "Ruby Syntax for finding same foreign key values in different tables", "body": "<p>I have a table (peas) containing several foreign keys in each row and listing them in it's index view. I have other tables (carrots) that contain the same foreign keys. </p>\n\n<p>From the first table (peas) I want to find the row in the other table (carrots) that contain the same foreign key values, put that in a variable (@p) to be used inside a conditional statement to be displayed in the index view of the first table (peas). What I've created so far is not throwing an error so it's hard to diagnose.</p>\n\n<p>I've tried to change the operand but having no success. </p>\n\n<p>Pea Model (Adding method to Model because there are no database changes)</p>\n\n<pre><code>  def pea\n    @p = Carrot.find({ :fk_id =&gt; 'pea.fk_id', :fk2_id =&gt; 'pea.fk2_id' })\n  end\n</code></pre>\n\n<p>Corresponding Peas Index View (Inside an each loop)</p>\n\n<pre><code>&lt;% if @p.present?  %&gt;\n &lt;p&gt;Say This&lt;/p&gt;\n&lt;% else %&gt;\n &lt;p&gt;Say That&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Once I've found the row that matches the two foreign keys (fk_id &amp; fk2_id) I'll know that the match is unique. In other words there will only be one row in Carrots that contains the same two foreign key values in Peas.</p>\n\n<p>I feel like I'm missing something really obvious. I've searched similar questions and can't quite match this scenario enough to hack a solution together. </p>\n\n<pre><code>Pea belongs_to :Carrot\nCarrot has_one :Pea\n</code></pre>\n\n<p>Any help in the right direction is appreciated.</p>\n\n<p>RoR - Rails 4.2.5.2 / ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin14], Sqlite3 (dev), Postgresl (Prod), Mac</p>\n"}, {"tags": ["ruby", "websocket", "rack", "ws4py"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1486885790, "post_id": 41266797, "comment_id": 71532943, "body": "This doesn&#39;t look Rails related...? seems a pure Rack application in Ruby. Consider removing the Rails tag, perhaps adding the Rack tag. Also consider using a <code>module</code> and defining a method <code>call</code> instead of using a <code>lambda</code>, since you can return from a function and it&#39;s easier to manage the flow of the logic."}, {"owner": {"reputation": 22783, "user_id": 1113772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uLSIj.png?s=128&g=1", "display_name": "Paul Sweatte", "link": "https://stackoverflow.com/users/1113772/paul-sweatte"}, "edited": false, "score": 0, "creation_date": 1496207136, "post_id": 41266797, "comment_id": 75559294, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34269561/return-json-from-ruby-using-rack\">return json from ruby using rack</a>"}], "owner": {"reputation": 967, "user_id": 1832746, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b33e3e1d45f119c592d7517fc98c6bd?s=128&d=identicon&r=PG", "display_name": "XAnguera", "link": "https://stackoverflow.com/users/1832746/xanguera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1491391967, "creation_date": 1482335355, "last_edit_date": 1491391967, "question_id": 41266797, "link": "https://stackoverflow.com/questions/41266797/how-to-return-from-a-rails-rack-call", "title": "How to return from a Rails rack call?", "body": "<p>I am using Faye websocket <a href=\"https://github.com/faye/faye-websocket-ruby\" rel=\"nofollow noreferrer\">implementation</a>. When a websocket is detected I want to make sure the user sent a given header before I open the connection, or else I want to return an error.\nI tried returning error 401 using <code>[]</code> but I keep oberving that the code continues execution and the websocket is created anyway. I managed to prevent it by adding <code>return</code> after it, but I am not sure this is the right way. On the client side I am implementing it in python using ws4py and when I return I get an exception raised indicating it received a 302 code, not the 401 I was expecting to send.</p>\n\n<p>My ruby code (without the websocket events code) follows: </p>\n\n<pre><code>  App = lambda do |env|\n    if Faye::WebSocket.websocket?(env)\n      unless env['HTTP_MY_HEADER']\n        [401, {'Content-Type' =&gt; 'application/json'}, '{\"message\": \"I was expecting a header here\"}']\n        #return (??)\n      end\n\n      ws = Faye::WebSocket.new(env)\n      # Rest of websocket call handling\n    else\n      # Normal HTTP request\n      [200, {'Content-Type' =&gt; 'text/plain'}, ['Hello']]\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "thor"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1482337475, "post_id": 41266530, "comment_id": 69735708, "body": "Your code works just fine for me. Maybe the <code>format</code> method doesn&#39;t output anything before exiting or the output goes to stderr instead of stdout?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1482337652, "post_id": 41266530, "comment_id": 69735818, "body": "Can you provide a (failing) sample implementation for <code>format</code> so we can reproduce your problem?"}, {"owner": {"reputation": 326, "user_id": 955121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99293c5cff22a79b8e87742cc73ad7e?s=128&d=identicon&r=PG", "display_name": "Dan R", "link": "https://stackoverflow.com/users/955121/dan-r"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1482339299, "post_id": 41266530, "comment_id": 69736811, "body": "I&#39;ll try and put something together. I tried chaging the output part to_stderr, and it still didn&#39;t work.  What&#39;s interesting is that if you look at the pastebin, it&#39;s definitely sending the output at lines 1 &amp; 2. But it&#39;s not capturing it. I suspect it might be a quirk of how Thor&#39;s say_status funciton works. I see lots of examples using the &quot;capture&quot; example in Thor&#39;s <a href=\"https://github.com/erikhuda/thor/blob/master/spec/helper.rb\" rel=\"nofollow noreferrer\">spec/helper</a>, but all of those examples don&#39;t seem to work with capturing errors and output at once."}, {"owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "edited": false, "score": 0, "creation_date": 1486623652, "post_id": 41266530, "comment_id": 71427409, "body": "did you ever get this working?"}, {"owner": {"reputation": 326, "user_id": 955121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99293c5cff22a79b8e87742cc73ad7e?s=128&d=identicon&r=PG", "display_name": "Dan R", "link": "https://stackoverflow.com/users/955121/dan-r"}, "edited": false, "score": 0, "creation_date": 1486652875, "post_id": 41266530, "comment_id": 71446434, "body": "Nope, I&#39;ve mostly been dealing with other issues, hopefully I&#39;ll be able to get back to this soon."}], "answers": [{"tags": [], "owner": {"reputation": 740, "user_id": 3343740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e682b959a75893cabba5a01fb05bfc86?s=128&d=identicon&r=PG&f=1", "display_name": "austinheiman", "link": "https://stackoverflow.com/users/3343740/austinheiman"}, "is_accepted": false, "score": 1, "last_activity_date": 1537300043, "creation_date": 1537300043, "answer_id": 52393618, "question_id": 41266530, "link": "https://stackoverflow.com/questions/41266530/rspec-how-to-compound-matchers-raise-error-and-output-to-stdout/52393618#52393618", "title": "RSpec - How to compound matchers raise_error and output.to_stdout?", "body": "<p>this works for me</p>\n\n<pre><code>expect { whatever }.to output('stderr message').to_stderr\n                   .and output(Regexp.new('stdout message')).to_stdout\n                   .and raise_error('Error message')\n</code></pre>\n"}], "owner": {"reputation": 326, "user_id": 955121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99293c5cff22a79b8e87742cc73ad7e?s=128&d=identicon&r=PG", "display_name": "Dan R", "link": "https://stackoverflow.com/users/955121/dan-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1537300043, "creation_date": 1482334591, "last_edit_date": 1482337178, "question_id": 41266530, "link": "https://stackoverflow.com/questions/41266530/rspec-how-to-compound-matchers-raise-error-and-output-to-stdout", "title": "RSpec - How to compound matchers raise_error and output.to_stdout?", "body": "<p>I've got a Thor based ruby CLI project to which I'm trying to add unit testing. It started as a pet project and is now rather large and important internally. Anyway, I have never really started unit testing, only grafted onto existing examples, and so I'm very much a noob when it comes to rspec.</p>\n\n<p>I'm starting with a rather basic example, making sure that if I give it a file that doesn't exist, that it replies with an explanatory error and exits.</p>\n\n<p>Here's the ways I have tried to compound them:</p>\n\n<pre><code>context 'with incorrect filename' do\n  it 'should fail cleanly' do\n    expect do\n      subject.format('bad_file_name')\n    end.to output('   ERROR  Unable to load file bad_file_name, exiting...').to_stdout.and raise_error(SystemExit)\n  end\nend\n</code></pre>\n\n<p>which works but doesn't capture the stdout properly <a href=\"http://pastebin.com/iUpZXTAZ\" rel=\"nofollow noreferrer\">output here</a>.. also tried:</p>\n\n<pre><code>context 'with incorrect filename' do\n  it 'should fail cleanly' do\n    expect do\n      expect do\n        subject.format('fixtures/invalid.yaml')\n      end.to output('   ERROR  Unable to load file bad_file_name, exiting...').to_stdout\n    end.to raise_error(SystemExit)\n  end\nend\n</code></pre>\n\n<p>Which looks like it works, except (as this example shows) it's not actually testing the output because that output wouldn't match.</p>\n\n<p>So what's the right way to check both an error that was raised and the output to stdout at the same time?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "twilio", "ngrok"], "comments": [{"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1482334325, "post_id": 41266207, "comment_id": 69733556, "body": "What error do you mean? Is there a stack trace?"}, {"owner": {"reputation": 1051, "user_id": 6516543, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/490d1cbaa93509332e51cef027d15817?s=128&d=identicon&r=PG&f=1", "display_name": "DianaBG", "link": "https://stackoverflow.com/users/6516543/dianabg"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1482334718, "post_id": 41266207, "comment_id": 69733819, "body": "The error is &quot;ArgumentError in MessagesController#reply&quot; &quot;Before process_action callback :authenticate_user! has not been defined&quot;"}, {"owner": {"reputation": 1051, "user_id": 6516543, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/490d1cbaa93509332e51cef027d15817?s=128&d=identicon&r=PG&f=1", "display_name": "DianaBG", "link": "https://stackoverflow.com/users/6516543/dianabg"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1482334738, "post_id": 41266207, "comment_id": 69733830, "body": "and it highlights the line &quot;skip_before_filter :authenticate_user!, :only =&gt; &quot;reply&quot;&quot;"}, {"owner": {"reputation": 1051, "user_id": 6516543, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/490d1cbaa93509332e51cef027d15817?s=128&d=identicon&r=PG&f=1", "display_name": "DianaBG", "link": "https://stackoverflow.com/users/6516543/dianabg"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1482334837, "post_id": 41266207, "comment_id": 69733902, "body": "When I remove that line, i get this error: &quot; NameError in MessagesController#reply&quot; ...&quot; uninitialized constant MessagesController::Twilio&quot;. this highlights the code ```    @client = Twilio::REST::Client.new account_sid, auth_token```"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1482334896, "post_id": 41266207, "comment_id": 69733942, "body": "OK, still looking into your first error, but that second one sounds like you haven&#39;t installed the Twilio gem. Add <code>gem &#39;twilio-ruby&#39;</code> to your Gemfile, run <code>bundle install</code> and try that again."}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1482334938, "post_id": 41266207, "comment_id": 69733976, "body": "Are you using Rails 4 or 5?"}], "answers": [{"tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": true, "score": 21, "last_activity_date": 1482335186, "creation_date": 1482335186, "answer_id": 41266746, "question_id": 41266207, "link": "https://stackoverflow.com/questions/41266207/rails-before-process-action-callback-authenticate-user-has-not-been-defined/41266746#41266746", "title": "Rails: Before process_action callback :authenticate_user! has not been defined", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>It looks like this was a problem that Rails 5 seems to have introduced. If the filter hasn't been defined by the time it is used in a controller it will raise an error. <a href=\"https://github.com/thoughtbot/clearance/issues/621\" rel=\"noreferrer\">This was discovered in the Clearance project too</a>.</p>\n\n<p><a href=\"https://github.com/thoughtbot/clearance/pull/626\" rel=\"noreferrer\">Their fix</a> was to pass the <code>raise: false</code> option to <code>skip_before_filter</code>:</p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n  skip_before_filter :verify_authenticity_token \n  skip_before_filter :authenticate_user!, :only =&gt; \"reply\", :raise =&gt; false\n\nend\n</code></pre>\n\n<p>Let me know if that helps at all.</p>\n"}, {"tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1598807768, "creation_date": 1598807768, "answer_id": 63660084, "question_id": 41266207, "link": "https://stackoverflow.com/questions/41266207/rails-before-process-action-callback-authenticate-user-has-not-been-defined/63660084#63660084", "title": "Rails: Before process_action callback :authenticate_user! has not been defined", "body": "<p>I had a similar issue to this when I was working on a <strong>Rails 6</strong> application with <strong>Devise</strong> gem for authentication and authorization.</p>\n<p>I added a <code>skip_before_action :authenticate_admin!, only: [:index, :show]</code> to the <strong>Products</strong> controller</p>\n<pre><code>class ProductsController &lt; ApplicationController\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\n  skip_before_action :authenticate_admin!, only: [:index, :show]\n\n  def index\n    @products = Product.all\n  end\n  .\n  .\n  .\nend\n</code></pre>\n<p>And it was throwing the error below when I visit the <strong>Products</strong> page:</p>\n<pre><code>Before process_action callback :authenticate_admin! has not been defined\n</code></pre>\n<p><strong>Here's how I fixed it</strong>:</p>\n<p>To use the <code>skip_before_action :authenticate_admin!, only: [:index, :show]</code> in the <strong>Products</strong> controller, I first needed to define the <code>before_action :authenticate_user!</code> in the <code>application_controller</code>:</p>\n<pre><code># app/controllers/application_controller.rb:\n\nclass ApplicationController &lt; ActionController::Base\n\n  protect_from_forgery with: :exception\n\n  before_action :authenticate_admin!\n\nend\n</code></pre>\n<p>Now I can use the <code>skip_before_action :authenticate_admin!, only: [:index, :show]</code> in the <strong>Products</strong> controller:</p>\n<pre><code>class ProductsController &lt; ApplicationController\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\n  skip_before_action :authenticate_admin!, only: [:index, :show]\n\n  def index\n    @products = Product.all\n  end\n  .\n  .\n  .\nend\n</code></pre>\n<p>An alternative, if I don't want to define the <code>before_action :authenticate_user!</code> in the <code>application_controller</code> is to use the <code>before_action :authenticate_admin!, except: [:index, :show]</code>:</p>\n<pre><code>class ProductsController &lt; ApplicationController\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_admin!, except: [:index, :show]\n\n  def index\n    @products = Product.all\n  end\n  .\n  .\n  .\nend\n</code></pre>\n<p>That's all.</p>\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 1051, "user_id": 6516543, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/490d1cbaa93509332e51cef027d15817?s=128&d=identicon&r=PG&f=1", "display_name": "DianaBG", "link": "https://stackoverflow.com/users/6516543/dianabg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7668, "favorite_count": 2, "accepted_answer_id": 41266746, "answer_count": 2, "score": 12, "last_activity_date": 1598807768, "creation_date": 1482333772, "last_edit_date": 1598806729, "question_id": 41266207, "link": "https://stackoverflow.com/questions/41266207/rails-before-process-action-callback-authenticate-user-has-not-been-defined", "title": "Rails: Before process_action callback :authenticate_user! has not been defined", "body": "<p>I'm creating a rails app that includes devise.\nI'm trying to add Twilio messaging to my site with Ngrok, i used this tutorial:\n<a href=\"https://www.twilio.com/blog/2016/04/receive-and-reply-to-sms-in-rails.html\" rel=\"noreferrer\">https://www.twilio.com/blog/2016/04/receive-and-reply-to-sms-in-rails.html</a></p>\n\n<p>I was able to open Ngrok in the console and get the web-id they give for my url.\nI keep getting this error when I plug the url into my browser ..I'm supposed to get to my own rails local app. Not sure whats wrong. </p>\n\n<p>What I added in my messaging controller made for ngrok: </p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n  skip_before_filter :verify_authenticity_token \n  skip_before_filter :authenticate_user!, :only =&gt; \"reply\"\n\ndef reply\n   message_body = params[\"Body\"]\n   from_number = params[\"From\"]\n   boot_twilio\n   sms = @client.messages.create(\n     from: Rails.application.secrets.twilio_number,\n     to: from_number,\n     body: \"Hello there, thanks for texting me. Your number is #{from_number}.\"\n  )\n  #twilio expects a HTTP response to this request\nend\n\n\nprivate\n def boot_twilio\n   account_sid = Rails.application.secrets.twilio_sid\n   auth_token = Rails.application.secrets.twilio_token\n   @client = Twilio::REST::Client.new account_sid, auth_token\n end\nend\n</code></pre>\n\n<p>really unsure what is wrong.\nwhen its not connecting to the 'def reply' and authenticate_user should be defined by devise. </p>\n"}, {"tags": ["ruby", "sequel"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482330749, "post_id": 41264845, "comment_id": 69731070, "body": "Do you have an example for  NATURAL_ELEMENT and  array_of_expressions?"}, {"owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482331977, "post_id": 41264845, "comment_id": 69731921, "body": "ok, let&#39;s have a look at how reduce would work for summing up numbers: <code>reduce(0, [1, 2, 3, 4]) { |first, second| first + second }</code>.  0 is the natural / identity element of addition and then you have an array of the elements you want to call the given function on."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482332050, "post_id": 41264845, "comment_id": 69731960, "body": "How about <code>[1,2,3,4].reduce(0){|a,b| a+b}</code> or just <code>[1,2,3,4].reduce(&amp;:+)</code> ?"}, {"owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482332547, "post_id": 41264845, "comment_id": 69732300, "body": "Ah sorry for the confusion, I am actually looking for the natural element for Sequel expressions, an array of sequel expressions might look like this: <code>[Sequel.expr(field: 1), Sequel.expr(field2: 2)]</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482332605, "post_id": 41264845, "comment_id": 69732336, "body": "I know. That&#39;s why I asked for concrete examples for your array_of_expressions."}, {"owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482332642, "post_id": 41264845, "comment_id": 69732359, "body": "So I need something where <code>something &amp; Sequel.expr(field: 1) == Sequel.expr(field: 1)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 2, "last_activity_date": 1482333446, "creation_date": 1482333446, "answer_id": 41266099, "question_id": 41264845, "link": "https://stackoverflow.com/questions/41264845/sequel-gem-identity-natural-element/41266099#41266099", "title": "Sequel gem identity / natural element", "body": "<p>What you want is a <em>universal set</em>, i.e. a set containing all possible elements. This is the identity for set intersections. If you use <code>Sequel.expr(nil)</code>, you'll have the equivalent of an empty set.</p>\n\n<p>I'm not aware of any universal set (or other identity object) in Sequel, but you could try to implement one. Here's an example (using the <code>Singleton</code> module for good measure):</p>\n\n<pre><code>require \"singleton\"\n\nclass UniversalSet\n  include Singleton\n\n  def &amp;(other)\n    other\n  end\nend\n\nUNIVERSAL_SET = UniversalSet.instance\n</code></pre>\n\n<p>Now you can use this in set intersection operations. The type of the elements is irrelevant, so it works fine for <code>SQL</code> objects, as well.</p>\n\n<pre><code>UNIVERSAL_SET &amp; [1, 2, 3]\n#=&gt; [1, 2, 3]\n</code></pre>\n\n<p>If you want to, you can also implement the other set operations for the universal set.</p>\n\n<p>This, however, has the downside that it is not commutative. If you try the inverse:</p>\n\n<pre><code>[1, 2, 3] &amp; UNIVERSAL_SET\n</code></pre>\n\n<p>it will throw an error. This is a limitation in the available coercion constructs in Ruby. (Currently you can only overload operators commutatively for numbers.)</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1482333965, "last_edit_date": 1482333965, "creation_date": 1482333455, "answer_id": 41266104, "question_id": 41264845, "link": "https://stackoverflow.com/questions/41264845/sequel-gem-identity-natural-element/41266104#41266104", "title": "Sequel gem identity / natural element", "body": "<p>Here's your <code>something</code> for which <code>something &amp; Sequel.expr(field: 1) == Sequel.expr(field: 1)</code>:</p>\n\n<pre><code>class IdentityFunction\n   def self.&amp;(b)\n    b\n  end\nend\n\nIdentityFunction &amp; \"test\" #=&gt; \"test\"\nIdentityFunction &amp; 3 #=&gt; 3\n</code></pre>\n\n<p>You can write :</p>\n\n<pre><code>[[1,2,3,4,5], [2,3,4], [3,4,5]].reduce(IdentityFunction){|a,b| a &amp; b} #=&gt; [3, 4]\n</code></pre>\n\n<p>Please note that <a href=\"https://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\"><code>reduce</code></a> takes the first element as start value by default, so <code>IdentityFunction</code> isn't even needed :</p>\n\n<pre><code>[[1,2,3,4,5], [2,3,4], [3,4,5]].reduce{|a,b| a &amp; b} #=&gt; [3, 4]\n</code></pre>\n\n<p>Which means what you want to achieve could probably be written as :</p>\n\n<pre><code>array_of_expressions.reduce{ |first, second| first &amp; second }\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>array_of_expressions.reduce(&amp;:&amp;)\n</code></pre>\n"}], "owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1482333965, "creation_date": 1482329692, "question_id": 41264845, "link": "https://stackoverflow.com/questions/41264845/sequel-gem-identity-natural-element", "title": "Sequel gem identity / natural element", "body": "<p>I am trying to use a reduce function to &amp;-connect multiple sequel expressions. However in the beginning I'd have the need for a natural element / identity element Sequel-expression. i.e. an expression that can be &amp;-connected without changing the meaning of the query. I tried just using nil, but that does not seem to work. Is there such a thing?^^</p>\n\n<p>Imagine the following</p>\n\n<pre><code>def reduce(buffer, array, &amp;func)\n  return buffer if array.empty?\n\n  if buffer.nil? # I basically want to get rid of this\n    reduce(array[0], array[1..-1], &amp;func)\n  else\n    reduce(func.call(buffer, array[0]), array[1..-1], &amp;func)\n  end\nend\n\n# to be able to call:\nreduce(NATURAL_ELEMENT, array_of_expressions) { |first, second| first &amp; second }\n</code></pre>\n\n<p>When calling <code>Sequel.expr(nil)</code> I get a <code>#&lt;Sequel::SQL::Wrapper @value=&gt;nil&gt;</code> but I don't know exactly what effect that has. Is this what I am looking for?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2034, "user_id": 2486496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rpd3r.jpg?s=128&g=1", "display_name": "gravity", "link": "https://stackoverflow.com/users/2486496/gravity"}, "edited": false, "score": 0, "creation_date": 1482334748, "post_id": 41264702, "comment_id": 69733842, "body": "Possibly related - <a href=\"http://stackoverflow.com/questions/39823011/return-to-readline-version-6-x-in-homebrew-to-fix-postgresql\" title=\"return to readline version 6 x in homebrew to fix postgresql\">stackoverflow.com/questions/39823011/&hellip;</a>"}, {"owner": {"reputation": 1999, "user_id": 456791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FpYCJ.png?s=128&g=1", "display_name": "Bek", "link": "https://stackoverflow.com/users/456791/bek"}, "edited": false, "score": 0, "creation_date": 1482347405, "post_id": 41264702, "comment_id": 69741301, "body": "<a href=\"http://stackoverflow.com/questions/16756287/cannot-execute-rails-console-due-to-an-error-with-readline\" title=\"cannot execute rails console due to an error with readline\">stackoverflow.com/questions/16756287/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "is_accepted": true, "score": 0, "last_activity_date": 1482330502, "creation_date": 1482330502, "answer_id": 41265121, "question_id": 41264702, "link": "https://stackoverflow.com/questions/41264702/why-do-i-get-error-when-trying-to-start-rails-console/41265121#41265121", "title": "Why do I get error when trying to start rails console", "body": "<p>If you've updated readline, then you may need to recompile ruby. If you're using rbenv, try uninstalling this version of ruby and reinstalling it.</p>\n"}], "owner": {"reputation": 3, "user_id": 7326047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75565a9c0cc73b73a651283d653325fc?s=128&d=identicon&r=PG&f=1", "display_name": "\u6881\u4e16\u8c6a", "link": "https://stackoverflow.com/users/7326047/%e6%a2%81%e4%b8%96%e8%b1%aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 41265121, "answer_count": 1, "score": 0, "last_activity_date": 1482330541, "creation_date": 1482329266, "last_edit_date": 1482330541, "question_id": 41264702, "link": "https://stackoverflow.com/questions/41264702/why-do-i-get-error-when-trying-to-start-rails-console", "title": "Why do I get error when trying to start rails console", "body": "<pre><code>$ rails c\n\nRunning via Spring preloader in process 3921\n/Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require': dlopen(/Users/liangshihao/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle, 9): Library not loaded: /usr/local/opt/readline/lib/libreadline.6.dylib (LoadError)\n  Referenced from: /Users/liangshihao/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n  Reason: image not found - /Users/liangshihao/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `block in require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/irb/completion.rb:10:in `&lt;top (required)&gt;'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `block in require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/console.rb:3:in `&lt;top (required)&gt;'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `block in require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:138:in `require_command!'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `block in require'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require'\n    from /Users/liangshihao/railsbridge/suggestotron/bin/rails:9:in `&lt;top (required)&gt;'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `load'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `block in load'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from /Users/liangshihao/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:287:in `load'\n    from /Users/liangshihao/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/liangshihao/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>thanks for any help you can provide</p>\n"}, {"tags": ["ruby", "bash", "macos", "environment-variables", "rubymine"], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 1064501, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5c83b9b945e2fbad3cd254dc98650679?s=128&d=identicon&r=PG", "display_name": "Sergey Blohin", "link": "https://stackoverflow.com/users/1064501/sergey-blohin"}, "edited": false, "score": 0, "creation_date": 1482322704, "post_id": 41262642, "comment_id": 69725743, "body": "Thank you! I understand it."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1482322587, "creation_date": 1482322587, "answer_id": 41262642, "question_id": 41262604, "link": "https://stackoverflow.com/questions/41262604/how-reload-system-env-in-rubymine/41262642#41262642", "title": "How reload system ENV in RubyMine?", "body": "<p>You can't. Environment variables are inherited by newly started subprocesses. After the subprocess has started, it has its own independent set of environment variables.</p>\n"}], "owner": {"reputation": 542, "user_id": 1064501, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5c83b9b945e2fbad3cd254dc98650679?s=128&d=identicon&r=PG", "display_name": "Sergey Blohin", "link": "https://stackoverflow.com/users/1064501/sergey-blohin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 41262642, "answer_count": 1, "score": 0, "last_activity_date": 1482326086, "creation_date": 1482322445, "last_edit_date": 1482326086, "question_id": 41262604, "link": "https://stackoverflow.com/questions/41262604/how-reload-system-env-in-rubymine", "title": "How reload system ENV in RubyMine?", "body": "<p>I try to set <code>ENV</code> variable in <code>~/.bash_profile</code>, for example <code>export foo='42'</code>.<br>\nIf RubyMine was running, I can't read this <code>foo</code> variable as <code>ENV['foo']</code>.\nIf I restart RubyMine, I can read <code>foo</code> from system ENV.<br>\nHow can I say RubyMine, that it must to reload system ENV?</p>\n"}, {"tags": ["ruby", "rest", "middleware", "faraday"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1482319379, "post_id": 41261565, "comment_id": 69723676, "body": "<code>require &#39;hashie&#39;</code>?"}, {"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482327187, "post_id": 41261565, "comment_id": 69728646, "body": "Tried that as well."}], "answers": [{"tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": true, "score": 0, "last_activity_date": 1482399016, "creation_date": 1482399016, "answer_id": 41279813, "question_id": 41261565, "link": "https://stackoverflow.com/questions/41261565/faradayerror-hashie-is-not-registered-on-faradaymiddleware/41279813#41279813", "title": "Faraday::Error: :hashie is not registered on Faraday::Middleware", "body": "<p>Voila! It is fixed.</p>\n\n<p><strong>Current</strong></p>\n\n<pre><code>faraday.response :json, :content_type !=&gt; /\\bjson$/\nfaraday.use :hashie # FaradayMiddleware::Mashify\n</code></pre>\n\n<p><strong>After Fix</strong></p>\n\n<pre><code>faraday.response :mashify\nfaraday.response :json, :content_type =&gt; /\\bjson$/\n</code></pre>\n\n<p>I could fix by reading <a href=\"https://github.com/lostisland/faraday_middleware/blob/c5836ae55857272732b33eb0e0a98d60e995a376/lib/faraday_middleware.rb#L30\" rel=\"nofollow noreferrer\">the code</a>!</p>\n"}], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 41279813, "answer_count": 1, "score": 0, "last_activity_date": 1482399016, "creation_date": 1482319111, "last_edit_date": 1482384038, "question_id": 41261565, "link": "https://stackoverflow.com/questions/41261565/faradayerror-hashie-is-not-registered-on-faradaymiddleware", "title": "Faraday::Error: :hashie is not registered on Faraday::Middleware", "body": "<p>I am creating a wrapper gem for a RESTful API. I am getting following error when I try to add <code>hashie</code> middleware as per the <a href=\"https://github.com/lostisland/faraday_middleware#dependencies\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<pre><code>Magpress::Login::#call#test_0001_should return valid JWT token:\nFaraday::Error: :hashie is not registered on Faraday::Middleware\n    /home/amit/.rvm/gems/ruby-2.2.2@magpress/gems/faraday-0.10.0/lib/faraday.rb:184:in `lookup_middleware'\n    /home/amit/.rvm/gems/ruby-2.2.2@magpress/gems/faraday-0.10.0/lib/faraday/rack_builder.rb:204:in `use_symbol'\n    /home/amit/.rvm/gems/ruby-2.2.2@magpress/gems/faraday-0.10.0/lib/faraday/rack_builder.rb:84:in `use'\n    /home/amit/projects/bt/magpress/lib/magpress/client.rb:24:in `block in connection'\n    /home/amit/.rvm/gems/ruby-2.2.2@magpress/gems/faraday-0.10.0/lib/faraday/connection.rb:91:in `initialize'\n    /home/amit/.rvm/gems/ruby-2.2.2@magpress/gems/faraday-0.10.0/lib/faraday.rb:70:in `new'\n    /home/amit/.rvm/gems/ruby-2.2.2@magpress/gems/faraday-0.10.0/lib/faraday.rb:70:in `new'\n    /home/amit/projects/bt/magpress/lib/magpress/client.rb:18:in `connection'\n    /home/amit/projects/bt/magpress/lib/magpress/base.rb:7:in `initialize'\n    /home/amit/projects/bt/magpress/test/login_spec.rb:13:in `new'\n    /home/amit/projects/bt/magpress/test/login_spec.rb:13:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Here is how I delcared dependencies in <code>.gemspec</code>.</p>\n\n<pre><code>...\n  spec.add_dependency \"faraday\"\n  spec.add_dependency \"faraday_middleware\"\n  spec.add_dependency \"hashie\"\n....\n</code></pre>\n\n<p>and the class that uses faraday and it's middleware</p>\n\n<pre><code>require 'faraday'\nrequire 'faraday_middleware'\nrequire 'hashie'\nmodule Magpress\n  class Client\n    def connection(url)\n      conn = ::Faraday.new(url) do |faraday|\n        faraday.request :json\n\n        faraday.response :json, :content_type =&gt; /\\bjson$/\n\n        # faraday.use :instrumentation\n        faraday.use :hashie # FaradayMiddleware::Mashify\n        faraday.adapter Faraday.default_adapter\n      end   \n      conn\n    end\n  end\nend\n</code></pre>\n\n<p>farady and middlware gem versions</p>\n\n<pre><code>amit@amit:~/projects/bt/magpress$ gem list | grep faraday\nfaraday (0.10.0)\nfaraday_middleware (0.10.1)\n</code></pre>\n\n<p>What could be wrong here?</p>\n\n<p>If I replace <code>:hashie</code> with <code>FaradayMiddleware::Mashify</code>, the errors goes away but the <code>response.body</code> returns instance of vanilla <code>Hash</code> instead of \n<code>Hashie::Mash</code></p>\n"}, {"tags": ["ruby", "mechanize"], "comments": [{"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "edited": false, "score": 0, "creation_date": 1482319567, "post_id": 41261548, "comment_id": 69723782, "body": "Are you sure you&#39;re using the correct username and password?"}, {"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "edited": false, "score": 0, "creation_date": 1482319594, "post_id": 41261548, "comment_id": 69723798, "body": "Also, there is no need to go to <code>main_page = @agent.get(&#39;http:&#47;&#47;www.shodan.io&#39;)</code>. Just go directly to the login page."}, {"owner": {"reputation": 23, "user_id": 7325356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7d7f2583a5287ea74f41a566a3dcd3?s=128&d=identicon&r=PG&f=1", "display_name": "DevilBlues", "link": "https://stackoverflow.com/users/7325356/devilblues"}, "reply_to_user": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "edited": false, "score": 0, "creation_date": 1482325761, "post_id": 41261548, "comment_id": 69727701, "body": "Sure I use the correct password, because when I use the wrong password when I show the body and open it in firefox I have the page that notice me that it is the wrong password"}], "answers": [{"comments": [{"owner": {"reputation": 268, "user_id": 3707264, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100004626277186/picture?type=large", "display_name": "user3707264", "link": "https://stackoverflow.com/users/3707264/user3707264"}, "edited": false, "score": 0, "creation_date": 1519925689, "post_id": 41264591, "comment_id": 85115575, "body": "I don&#39;t know why but update form.submit to form.click_button solved my issue"}], "tags": [], "owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "is_accepted": true, "score": 3, "last_activity_date": 1482328941, "creation_date": 1482328941, "answer_id": 41264591, "question_id": 41261548, "link": "https://stackoverflow.com/questions/41261548/ruby-mechanize-cant-log-on-a-website/41264591#41264591", "title": "RUBY - Mechanize : Can&#39;t log on a Website", "body": "<p>OK, looks like they are checking the user agent. Try setting that as follows:</p>\n\n<pre><code>require 'mechanize'\n\nUSERNAME = \"&lt;your username&gt;\"\nPASSWORD = \"&lt;your password&gt;\"\nUSER_AGENT = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36\"\n\nmechanize = Mechanize.new do |a|\n  a.user_agent = USER_AGENT\nend\n\nform_page = mechanize.get('https://account.shodan.io/login')\nform = form_page.form_with(:id =&gt;'login-form')\nform.field_with(:name =&gt; 'username').value=USERNAME\nform.field_with(:name =&gt; 'password').value=PASSWORD\npage = form.click_button\n\nputs page.body\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7325356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7d7f2583a5287ea74f41a566a3dcd3?s=128&d=identicon&r=PG&f=1", "display_name": "DevilBlues", "link": "https://stackoverflow.com/users/7325356/devilblues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 1, "accepted_answer_id": 41264591, "answer_count": 1, "score": 2, "last_activity_date": 1482330419, "creation_date": 1482319052, "last_edit_date": 1482330419, "question_id": 41261548, "link": "https://stackoverflow.com/questions/41261548/ruby-mechanize-cant-log-on-a-website", "title": "RUBY - Mechanize : Can&#39;t log on a Website", "body": "<p>I am trying to log on shodan.io with a bot, but it does not work. Each time I try to submit my form, it goes to the welcome page without being logged. </p>\n\n<p>My code is the following :</p>\n\n<pre><code>@agent = Mechanize.new\n@agent.log = Logger.new \"mech.log\"\nmain_page = @agent.get('http://www.shodan.io')\nform_page = main_page.link_with(:href =&gt; \"https://account.shodan.io/login\").click\nform = form_page.form_with(:id =&gt;'login-form')\nform.field_with(:name =&gt; 'username').value=\"User\"\nform.field_with(:name =&gt; 'password').value=\"Pass\" \nlogged_page=@agent.submit form\n</code></pre>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1482318033, "post_id": 41261089, "comment_id": 69722847, "body": "There is a lot of tutorials and guides in the internet, have you tried anything?"}], "answers": [{"tags": [], "owner": {"reputation": 1697, "user_id": 5231528, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xhIP7.jpg?s=128&g=1", "display_name": "Miguel Coder", "link": "https://stackoverflow.com/users/5231528/miguel-coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1482318135, "creation_date": 1482318135, "answer_id": 41261241, "question_id": 41261089, "link": "https://stackoverflow.com/questions/41261089/how-to-make-an-ajax-request-in-ruby-on-rails/41261241#41261241", "title": "How to make an ajax request in ruby on rails?", "body": "<p>Assuming that you already have you RESTful API setup on your Rails Server, then all you would have to do is send the Ajax request. If you haven't done that, this tutorial will teach you how to do it.</p>\n\n<p><a href=\"https://www.codementor.io/ruby-on-rails/tutorial/creating-simple-api-with-rails\" rel=\"nofollow noreferrer\">https://www.codementor.io/ruby-on-rails/tutorial/creating-simple-api-with-rails</a></p>\n\n<p>After that all you have to do is:</p>\n\n<pre><code>$.post(\"/path/to/url\",\n{\n    apiid: \"1\",\n    apikey: \"1\",\n    email: \"some@email.com\"\n},\nfunction(data, status){\n    alert(\"Data: \" + data + \"\\nStatus: \" + status);\n});\n</code></pre>\n\n<p>The first parameter is the route endpoint, the second parameter is your json data, and the third parameter is a callback function that is executed when the server is done executing it's update.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6781525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1778594295763454/picture?type=large", "display_name": "Elsie Hamilton", "link": "https://stackoverflow.com/users/6781525/elsie-hamilton"}, "edited": false, "score": 0, "creation_date": 1482320420, "post_id": 41261519, "comment_id": 69724267, "body": "I want to know that how to get the bring the data in the controller like in php we use <code>$_POST[&#39;apiid&#39;]</code> to get the data so here in ruby how can we get the data in controller ?"}, {"owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "reply_to_user": {"reputation": 145, "user_id": 6781525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1778594295763454/picture?type=large", "display_name": "Elsie Hamilton", "link": "https://stackoverflow.com/users/6781525/elsie-hamilton"}, "edited": false, "score": 1, "creation_date": 1482332639, "post_id": 41261519, "comment_id": 69732353, "body": "To access submitted form data in controller you can use params. for an example if you send post request as apiid: &#39;sad&#39; by ajax. you can access as params[:apiid]. If you are not aware about what actual is the field name you can inspect params to view all the form data."}], "tags": [], "owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "is_accepted": false, "score": 1, "last_activity_date": 1482318957, "creation_date": 1482318957, "answer_id": 41261519, "question_id": 41261089, "link": "https://stackoverflow.com/questions/41261089/how-to-make-an-ajax-request-in-ruby-on-rails/41261519#41261519", "title": "How to make an ajax request in ruby on rails?", "body": "<p>You can set apiid, apikey and email in hidden field or can assign in the formData properties later.\nAll data here is grab from form. the url is the form action, method is an action set in form. </p>\n\n<p>Note: <code>.form_submit</code> is a class of form not button.</p>\n\n<pre><code>$( '.form_submit' ).submit(function(e){\n    e.preventDefault();\n    var remoteCall = new RemoteCall(this);\n    remoteCall.ajax()\n  })\nfunction RemoteCall(element){\n  this.url = element.action;\n  this.method = element.method;\n  this.dataType = 'json';\n  this.formData = $(element).serialize()\n}\nRemoteCall.prototype.ajax = function(){\n    $.ajax({ method: this.method,\n             url: this.url,\n             data: this.formData,\n             dataType: 'json'\n          }).done(function(msg){\n             alert('done'); \n          }).fail(function(msg){ alert('Sorry request could not complete'); });\n}\n</code></pre>\n\n<p>Hope this will solve your problem. </p>\n"}, {"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1482320728, "creation_date": 1482320728, "answer_id": 41262083, "question_id": 41261089, "link": "https://stackoverflow.com/questions/41261089/how-to-make-an-ajax-request-in-ruby-on-rails/41262083#41262083", "title": "How to make an ajax request in ruby on rails?", "body": "<p>You can use <a href=\"http://api.jquery.com/jquery.ajax/#jQuery-ajax-url-settings\" rel=\"nofollow noreferrer\">jQuery ajax</a> option <code>data</code> to send the params in an ajax request:</p>\n\n<pre><code>$(document).ready(function(){\n  $(\".form_submit\").click(function() {\n    var apiid = $('#apiid').val();\n    var apikey = $('#apikey').val();\n    var email = $('#email').val();\n\n    $.ajax(path_to_api_action, {\n      data: { apiid: apiid, apikey: apikey, email: email }\n      // Add other options\n    })\n  });  \n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "is_accepted": true, "score": 3, "last_activity_date": 1482330777, "creation_date": 1482330777, "answer_id": 41265224, "question_id": 41261089, "link": "https://stackoverflow.com/questions/41261089/how-to-make-an-ajax-request-in-ruby-on-rails/41265224#41265224", "title": "How to make an ajax request in ruby on rails?", "body": "<p>Once you've sent the data to your server via js with something like</p>\n\n<pre><code>$.post(\"/your/url\",\n{\n    apiid: \"1\",\n    apikey: \"1\",\n    email: \"some@email.com\"\n});\n</code></pre>\n\n<p>Then you can access these parameters in your controller via the params hash:</p>\n\n<pre><code>def api\n  params[:apiid]\n  params[:apikey]\n  params[:email]\nend\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6781525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1778594295763454/picture?type=large", "display_name": "Elsie Hamilton", "link": "https://stackoverflow.com/users/6781525/elsie-hamilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6776, "favorite_count": 1, "accepted_answer_id": 41265224, "answer_count": 4, "score": 2, "last_activity_date": 1482330777, "creation_date": 1482317716, "question_id": 41261089, "link": "https://stackoverflow.com/questions/41261089/how-to-make-an-ajax-request-in-ruby-on-rails", "title": "How to make an ajax request in ruby on rails?", "body": "<p>Hello I am new to ruby on rails I have just started to learn. I would like to know how can I make the ajax request.\nMy js code:</p>\n\n<pre><code>$(document).ready(function(){\n  $(\".form_submit\").click(function() {\n         var apiid = $('#apiid').val();\n         var apikey = $('#apikey').val();\n         var email = $('#email').val();\n           console.log(\"apiid  = \",apiid , \" apikey = \",apikey , \" email = \",email);\n\n  });  \n});\n</code></pre>\n\n<p>Now I want to send apiid , apikey and email to my controller.</p>\n\n<pre><code>def api \n//here I want apiid, apikey,email from js\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482352985, "post_id": 41261076, "comment_id": 69744358, "body": "You need an &quot;Excel&quot; tag."}], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1482319374, "creation_date": 1482319374, "answer_id": 41261640, "question_id": 41261076, "link": "https://stackoverflow.com/questions/41261076/splitting-values-in-hash/41261640#41261640", "title": "Splitting values in Hash", "body": "<p>If you can modify your original hash from</p>\n\n<pre><code>hash = {\"PPS_Id\"=&gt;[\"fe4d7c06-215a-48a7-966d-19ab58976548\", \"6e90208e-4ab2-4d44-bbaa-9a874bff095b\"], \"Amount\"=&gt;\"[\\\"10000.000\\\", \\\"2374.000\\\"]\"}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>hash = {\"PPS_Id\"=&gt;[\"fe4d7c06-215a-48a7-966d-19ab58976548\", \"6e90208e-4ab2-4d44-bbaa-9a874bff095b\"], \"Amount\"=&gt;[\"10000.000\", \"2374.000\"]}\n</code></pre>\n\n<p>Note: the last value in the hash is an <code>Array</code> instead of a <code>String</code>.</p>\n\n<p>Then, you can generate an Array of hashes on which you can iterate to fill your excel:</p>\n\n<pre><code>ary = hash.inject([]) do |r, (key, value)|\n  value.each_with_index do |e, i|\n    r[i] ||= {}\n    r[i][key] = e\n  end\n  r\nend\n\nary     # [{\"PPS_Id\"=&gt;\"fe4d7c06-215a-48a7-966d-19ab58976548\", \"Amount\"=&gt;\"10000.000\"}, {\"PPS_Id\"=&gt;\"6e90208e-4ab2-4d44-bbaa-9a874bff095b\", \"Amount\"=&gt;\"2374.000\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1482322135, "creation_date": 1482322135, "answer_id": 41262511, "question_id": 41261076, "link": "https://stackoverflow.com/questions/41261076/splitting-values-in-hash/41262511#41262511", "title": "Splitting values in Hash", "body": "<p>If your hash really looks like this :</p>\n\n<pre><code>hash = {\"PPS_Id\"=&gt;[\"fe4d7c06-215a-48a7-966d-19ab58976548\", \"6e90208e-4ab2-4d44-bbaa-9a874bff095b\"],\n        \"Amount\"=&gt;\"[\\\"10000.000\\\", \\\"2374.000\\\"]\"}\n</code></pre>\n\n<p>you can use scan to parse the floats first :</p>\n\n<pre><code>hash[\"Amount\"] = hash[\"Amount\"].scan(/[\\d\\-\\.]+/)\n</code></pre>\n\n<p>Your hash will now look like :</p>\n\n<pre><code>{\"PPS_Id\"=&gt;[\"fe4d7c06-215a-48a7-966d-19ab58976548\", \"6e90208e-4ab2-4d44-bbaa-9a874bff095b\"],\n \"Amount\"=&gt;[\"10000.000\", \"2374.000\"]}\n</code></pre>\n\n<p>To get the table you want, you could just <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">transpose</a> the hash values :</p>\n\n<pre><code>hash.values_at(\"PPS_Id\", \"Amount\").transpose.each{|id, amount|\n  puts format(\"%s\\t%.3f\", id, amount)\n}\n</code></pre>\n\n<p>It will output :</p>\n\n<pre><code>fe4d7c06-215a-48a7-966d-19ab58976548    10000.000\n6e90208e-4ab2-4d44-bbaa-9a874bff095b    2374.000\n</code></pre>\n"}], "owner": {"reputation": 915, "user_id": 2845312, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/nbUXW.png?s=128&g=1", "display_name": "d_luffy_de", "link": "https://stackoverflow.com/users/2845312/d-luffy-de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 41261640, "answer_count": 2, "score": 1, "last_activity_date": 1482357882, "creation_date": 1482317679, "last_edit_date": 1482357882, "question_id": 41261076, "link": "https://stackoverflow.com/questions/41261076/splitting-values-in-hash", "title": "Splitting values in Hash", "body": "<p>I have a Hash in the following format:</p>\n\n<pre><code>{\"PPS_Id\"=&gt;[\"fe4d7c06-215a-48a7-966d-19ab58976548\", \"6e90208e-4ab2-4d44-bbaa-9a874bff095b\"], \"Amount\"=&gt;\"[\\\"10000.000\\\", \\\"2374.000\\\"]\"}\n</code></pre>\n\n<p>When I write this data into an excel get the following output.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z2ppi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z2ppi.png\" alt=\"enter image description here\"></a>\nI want to write the data into the Excel this way:</p>\n\n<pre><code>PPS_Id                                     Amount\nfe4d7c06-215a-48a7-966d-19ab58976548       10000.000\n6e90208e-4ab2-4d44-bbaa-9a874bff095b       2374.000\n</code></pre>\n\n<p>How do I convert my current Hash to the below?</p>\n\n<pre><code>{PPS_Id\"=&gt;[\"fe4d7c06-215a-48a7-966d-19ab58976548\",\"Amount\"=&gt;\"10000.000\"},{PPS_Id\"=&gt;[\"6e90208e-4ab2-4d44-bbaa-9a874bff095b\",\"Amount\"=&gt;\"2374.000\"}\n</code></pre>\n\n<p>Can you please assist.</p>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1482317711, "post_id": 41261034, "comment_id": 69722619, "body": "You&#39;re comparing strings, not numbers. If you want numbers, do like <code>n1 = gets.to_i</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1482317763, "post_id": 41261034, "comment_id": 69722651, "body": "Also, use <code>a.sort</code>, not <code>a.sort!</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1482318048, "post_id": 41261034, "comment_id": 69722855, "body": "Also JFYI: this example was trivial enough that we could guess what problem you&#39;re having. But in the future, if you claim something like &quot;this code doesn&#39;t work for this condition&quot;, you must elaborate on that: provide what output you <b>expect</b> and what output you are <b>actually getting</b>. Also, make sure that the code contains <b>all necessary input</b>. In short, you&#39;ll need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If you don&#39;t provide that, your question is likely to attract downvotes and closevotes (also likely to not get any answers)."}, {"owner": {"reputation": 63, "user_id": 7325271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a039b87eb381243cf862122bed41edff?s=128&d=identicon&r=PG&f=1", "display_name": "Sarim Aleem", "link": "https://stackoverflow.com/users/7325271/sarim-aleem"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1482322292, "post_id": 41261034, "comment_id": 69725448, "body": "Ok, thank you. I am new to this, but i&#39;ll take your advice next time I ask a question!!"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482326441, "post_id": 41261034, "comment_id": 69728149, "body": "Some notes: you do seem to be repeating yourself an awful lot so consider using <a href=\"http://ruby-doc.org/core-2.3.3/Integer.html#method-i-times\" rel=\"nofollow noreferrer\">Integer#times</a>; there are two <code>get.chomps</code> which serve no purpose; you should use <code>puts</code> not <code>print</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482358545, "post_id": 41261034, "comment_id": 69747087, "body": "@sagarpandya82 : Creating an empty array and pushing each element into it is almost never Rubyish."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482359078, "post_id": 41261034, "comment_id": 69747294, "body": "@SarimAleem Consider using the <a href=\"https://rubygems.org/gems/ordinalize\" rel=\"nofollow noreferrer\">ordinalize gem</a>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1482330002, "post_id": 41261105, "comment_id": 69730549, "body": "The discrepancy between <code>String#&lt;=&gt;</code> and <code>String#succ</code> always confuses me: <code>&#39;9&#39;.succ &gt; &#39;9&#39; #=&gt; false</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1482336546, "post_id": 41261105, "comment_id": 69735122, "body": "@Stefan <code>&#39;09&#39;.succ &gt; &#39;09&#39;</code> ;)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1482336693, "post_id": 41261105, "comment_id": 69735224, "body": "And it&#39;s not just numbers: <code>&#39;z&#39;.succ &gt; &#39;z&#39; #=&gt; false</code> ;-)"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1482338816, "post_id": 41261105, "comment_id": 69736530, "body": "<code>to_i</code> does the chomp-ing for you."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 7, "last_activity_date": 1482340083, "last_edit_date": 1482340083, "creation_date": 1482317793, "answer_id": 41261105, "question_id": 41261034, "link": "https://stackoverflow.com/questions/41261034/why-does-this-ruby-sequence-not-work-for-double-digit-numbers/41261105#41261105", "title": "Why does this ruby sequence not work for double digit numbers?", "body": "<h1>Sort array of strings or array of integers</h1>\n\n<p><code>[n1, n2, n3, n4, n5]</code> is an array of strings, and strings are compared with <a href=\"https://en.wikipedia.org/wiki/Lexicographical_order\" rel=\"nofollow noreferrer\">lexicographic order</a>.</p>\n\n<pre><code>[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"].sort\n#=&gt; [\"1\", \"10\", \"11\", \"12\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]\n\n[\"12\", \"11\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\"].sort_by(&amp;:to_i)\n#=&gt; [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"]\n</code></pre>\n\n<p>So you need :</p>\n\n<pre><code>print \"your numbers from smallest to largest are: #{a.sort_by(&amp;:to_i)}\"\n</code></pre>\n\n<p>or just convert your string array to an integer array :</p>\n\n<pre><code>a = [n1, n2, n3, n4, n5].map(&amp;:to_i)\n\nprint \"your numbers from smallest to largest are: #{a.sort}\"\n</code></pre>\n\n<h1>Refactoring</h1>\n\n<p>Here's a shorter way to write your script :</p>\n\n<pre><code>puts \"Hello participant today we will be rearranging your numbers from smallest to largest, press enter to continue!!\"\ngets\n\na = %w(first second third fourth fifth).map do |ordinal|\n  puts \"Please enter your #{ordinal} number\"\n  gets.to_i\nend\n\nputs \"Your numbers from smallest to largest are: #{a.sort}\"\ngets\n\nputs \"Thank you for participating, See you next time!!\"\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7325271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a039b87eb381243cf862122bed41edff?s=128&d=identicon&r=PG&f=1", "display_name": "Sarim Aleem", "link": "https://stackoverflow.com/users/7325271/sarim-aleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 41261105, "answer_count": 1, "score": 4, "last_activity_date": 1482340083, "creation_date": 1482317559, "last_edit_date": 1482321401, "question_id": 41261034, "link": "https://stackoverflow.com/questions/41261034/why-does-this-ruby-sequence-not-work-for-double-digit-numbers", "title": "Why does this ruby sequence not work for double digit numbers?", "body": "<p>I was creating a program with ruby to organises sequences of numbers. It worked perfectly except when two digit numbers were involved, here is the code:</p>\n\n<pre><code>print \"Hello participant today we will be rearranging your numbers from smallest to largest, press enter to continue!!\"\ngets.chomp\n\nprint \"Please enter your first number\"\nn1 = gets.chomp\n\nprint \"Please enter your second number\"\nn2 = gets.chomp\n\nprint \"Please enter your third number\"\nn3 = gets.chomp\n\nprint \"Please enter your fourth number\"\nn4 = gets.chomp\n\nprint \"Please enter your fifth number\"\nn5 = gets.chomp\n\na = [n1, n2, n3, n4, n5]\n\nprint \"your numbers from smallest to largest are: #{a.sort!}\"\ngets.chomp\n\nprint \"thank you for participating, See you next time!!\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "rspec-rails"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1482315088, "creation_date": 1482315088, "answer_id": 41260220, "question_id": 41260162, "link": "https://stackoverflow.com/questions/41260162/rspec-doesnt-run-first-test-case/41260220#41260220", "title": "rspec doesn&#39;t run first test case", "body": "<p>It's a shared example, not a real test. It is supposed to be included in other test groups. Like this:</p>\n\n<pre><code>  describe '#whatever' do\n    it_behaves_like 'update user'\n\n    it 'runs shared example' do\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7304864, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/38ffb47c7e457b459ea8f7341fccd516?s=128&d=identicon&r=PG&f=1", "display_name": "user7304864", "link": "https://stackoverflow.com/users/7304864/user7304864"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482315088, "creation_date": 1482314908, "question_id": 41260162, "link": "https://stackoverflow.com/questions/41260162/rspec-doesnt-run-first-test-case", "title": "rspec doesn&#39;t run first test case", "body": "<p>The block <code>#update</code> doesn't run. Why? How to change it to run all of them. <code>#anything</code> works fine.</p>\n\n<pre><code>describe UsersController, type: :controller do\n  login_admin\n\n  describe '#update' do\n    def user_update_params(roles:)\n      {\n        role_ids: roles.map(&amp;:id),\n        name: 'new'\n      }\n    end\n\n    shared_examples_for 'update user' do\n      it 'change the user' do\n        expect do\n          put :update, id: user.id, user: user_params\n        end.to change { user.reload.name }\n      end\n    end\n  end\n\n  describe '#anything' do\n    it 'is ok' do\n      #runs ok\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "search"], "comments": [{"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 1, "creation_date": 1482306112, "post_id": 41257440, "comment_id": 69715235, "body": "try with <code>@renter = Renters.search(params)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7324290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d623508701a8698e038b0db449e7c3f5?s=128&d=identicon&r=PG&f=1", "display_name": "fazi13", "link": "https://stackoverflow.com/users/7324290/fazi13"}, "edited": false, "score": 0, "creation_date": 1482374773, "post_id": 41258617, "comment_id": 69751516, "body": "thanks I think this is the right track, but I would like to have kind of 2 different searches so if you know the license number you can fill in that field OR if you know the ID number you fill in that one, but usually not both fields. I think this way is requiring both fields to be searched?"}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "reply_to_user": {"reputation": 1, "user_id": 7324290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d623508701a8698e038b0db449e7c3f5?s=128&d=identicon&r=PG&f=1", "display_name": "fazi13", "link": "https://stackoverflow.com/users/7324290/fazi13"}, "edited": false, "score": 0, "creation_date": 1482375889, "post_id": 41258617, "comment_id": 69751804, "body": "okay .. how would you know which is which from a single text field (sent as <code>params[:licence]</code>) on your search form ?"}, {"owner": {"reputation": 1, "user_id": 7324290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d623508701a8698e038b0db449e7c3f5?s=128&d=identicon&r=PG&f=1", "display_name": "fazi13", "link": "https://stackoverflow.com/users/7324290/fazi13"}, "edited": false, "score": 0, "creation_date": 1482378599, "post_id": 41258617, "comment_id": 69752414, "body": "sorry, I wasn&#39;t sure how to implement a second search field at the time, I added <code>&lt;%= text_field_tag :id, nil, placeholder: &quot;ID Number&quot; %&gt;</code>"}], "tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": false, "score": 0, "last_activity_date": 1482310151, "creation_date": 1482310151, "answer_id": 41258617, "question_id": 41257440, "link": "https://stackoverflow.com/questions/41257440/ror-trying-to-search-by-id-number-or-license-number/41258617#41258617", "title": "RoR: Trying to search by ID number or License Number", "body": "<p>you can do something like this if you are getting value on <code>params[:licence]</code> from your form submit on your controller action <code>search</code></p>\n\n<p><strong>controller.rb</strong></p>\n\n<pre><code>def search\n  @renter = Renters.search(params[:licence])\nend\n</code></pre>\n\n<p><strong>app/models/renters.rb</strong></p>\n\n<pre><code>class Renters &lt; ActiveRecord::Base\n  def self.search(query)\n    like_query = \"%#{query}%\"\n    renters = Renters.where(\"id LIKE ? OR license_no LIKE ?\", like_query, like_query)\n  end\nend \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7324290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d623508701a8698e038b0db449e7c3f5?s=128&d=identicon&r=PG&f=1", "display_name": "fazi13", "link": "https://stackoverflow.com/users/7324290/fazi13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482379230, "creation_date": 1482305715, "last_edit_date": 1482379230, "question_id": 41257440, "link": "https://stackoverflow.com/questions/41257440/ror-trying-to-search-by-id-number-or-license-number", "title": "RoR: Trying to search by ID number or License Number", "body": "<p>hi so I'm trying to do 2 things, one of them is to basically redirect to a model's ID number so input is \"1\" and redirects to</p>\n\n<pre><code>localhost:3000/model/1\n</code></pre>\n\n<p>and the second part is actually doing a search. each model has a text field string for license_no and I want to be able to search and return results\n<br>currently, I am not sure how I would combine these into 1 search form if thats possible or if it would require 2 separate search forms\n<br>i have a search form with only the license_no field but it always returns no results found...\n<br>apologize that the model name isn't in singular, the guide I was using to learn RoR had it that way and everything worked, but I have so many references to renters in my project that it would be a while to find all of them\n</p>\n\n<p><strong>index.html.erb</strong>  </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= form_tag search_renters_path, method: get do |f| %&gt;\n    &lt;%= text_field_tag :license, nil, placeholder: \"License Number\" %&gt;\n    &lt;%= submit_tag 'Search', class: \"btn-large\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>models/renters.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Renters &lt; ActiveRecord::Base\n    validates_presence_of :license_no\n    def self.search(params)\n        renters = Renters.where(\"license_no LIKE?\", \"%#{params[:license]}%\")\n    end\nend\n</code></pre>\n\n<p><strong>controller.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def search\n    @renter = Renters.search([params])\nend\n</code></pre>\n\n<p><strong>search.html.erb - snippet</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;% if @renter.blank? %&gt;\n    no results\n&lt;% else %&gt;\n    #show results\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>editted code</strong><br>\n<strong>models/renters.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def self.search(params)\n    license_query = \"%#{params[:license]}%\"\n    id_query = \"%#{params[:id]}%\"\n    renters = Renters.where(\"license_no LIKE ?\", license_query) if params[:license].present?\n    renters = Renters.where(\"id LIKE ?\", id_query) if params[:id].present?\n  end\n</code></pre>\n\n<p><strong>controller</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def search\n  @renter = Renters.search(params)\nend\n</code></pre>\n\n<p><strong>search form</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= form_tag search_renters_path, method: :get do |f| %&gt;\n                      &lt;%= text_field_tag :license, nil, placeholder: \"Driver's License\" %&gt;\n                      &lt;%= text_field_tag :id, nil, placeholder: \"ID number\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I'm trying to use the if present? statements to allow a user to decide whether to input ID No or License No. you don't need to input both just one. currently, if I search for a license no, it returns no results. but when I search for an ID, it returns the relevant result</p>\n"}, {"tags": ["ruby", "string", "split"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1482303934, "post_id": 41256931, "comment_id": 69714126, "body": "if the dot should always comes only at the last then you may try this <code>&quot;log&#47;archive&#47;2016-12-21.zip&quot;.split(&#47;[\\&#47;.]&#47;)[-2]</code>"}, {"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1482304104, "post_id": 41256931, "comment_id": 69714216, "body": "Yes dot will always come at last"}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1482304361, "post_id": 41256931, "comment_id": 69714333, "body": "Even it isn&#39;t the easiest solution, i would allways go with a regex ( \\/(\\d{4}-\\d{2}-\\d{2})\\.zip ). The reason is, that you can test it with a match, and you will surely detect if the structure of the string changes. I don&#39;t know how number 2 behaves, but i wouldn&#39;t go with number 3, since it can evaluate strings with no dates at all..."}], "answers": [{"comments": [{"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1482304464, "post_id": 41257068, "comment_id": 69714369, "body": "If the the strings are from a directory read, this would be a really good solution. But my question out of interest, what will happen if there is no valid date in the file name ? for example &quot;log/archive/12-21.zip&quot;"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1482304532, "post_id": 41257068, "comment_id": 69714406, "body": "@DoktorOSwaldo in that case, instead of passing the value directly to <code>Date.parse</code> you will have to handle the parsing on your own and compose a date."}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1482304602, "post_id": 41257068, "comment_id": 69714451, "body": "yeah but do you know the behaviour of ruby in this case, will it fail and give an exception ? or will it be something like 1970-12-21 ?"}, {"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1482305400, "post_id": 41257068, "comment_id": 69714852, "body": "it is sure that date will be in proper format always"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1482308711, "post_id": 41257068, "comment_id": 69716486, "body": "First: <code>File.basename</code> acts on a string - it doesn&#39;t matter if the string was generated from another <code>File</code> action. So it is irrelevant whether the strings were obtained from a directory read - it is the format of the string that is relevant"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1482308880, "post_id": 41257068, "comment_id": 69716584, "body": "Second: <code>Date.parse &#39;12-21&#39;</code> returns a date matching the 12th of the current month. (on my system anyway) - try it at a &#39;irb&#39; prompt - remember to <code>require date</code> first."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 4, "last_activity_date": 1482304308, "creation_date": 1482304308, "answer_id": 41257068, "question_id": 41256931, "link": "https://stackoverflow.com/questions/41256931/extract-date-part-from-a-file-path-string/41257068#41257068", "title": "Extract date part from a file path string", "body": "<p>You can use <code>File.basename</code> passing the extension:</p>\n\n<pre><code>File.basename(\"log/archive/2016-12-21.zip\", \".zip\")\n# =&gt; \"2016-12-21\"\n</code></pre>\n\n<p>If you want the value to be a <code>Date</code>, simply use <code>Date.parse</code> to convert the string into a `Date.</p>\n\n<pre><code>require 'date'\nDate.parse(File.basename(\"log/archive/2016-12-21.zip\", \".zip\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1482311367, "last_edit_date": 1482311367, "creation_date": 1482308430, "answer_id": 41258145, "question_id": 41256931, "link": "https://stackoverflow.com/questions/41256931/extract-date-part-from-a-file-path-string/41258145#41258145", "title": "Extract date part from a file path string", "body": "<pre><code>require 'date'\n\ndef pull_dates(str)\n  str.split(/[\\/.]/).map { |s| Date.strptime(s, '%Y-%m-%d') rescue nil }.compact\nend\n\npull_dates \"log/archive/2016-12-21.zip\"\n  #=&gt; [#&lt;Date: 2016-12-21 ((2457744j,0s,0n),+0s,2299161j)&gt;]\npull_dates \"log/2016-12-21/archive.zip\"\n  #=&gt; [#&lt;Date: 2016-12-21 ((2457744j,0s,0n),+0s,2299161j)&gt;]\npull_dates \"log/2016-12-21/2016-12-22.zip\"\n  #=&gt; [#&lt;Date: 2016-12-21 ((2457744j,0s,0n),+0s,2299161j)&gt;,\n  #    #&lt;Date: 2016-12-22 ((2457745j,0s,0n),+0s,2299161j)&gt;] \npull_dates \"log/2016-12-21/2016-12-32.zip\"\n  #=&gt; [#&lt;Date: 2016-12-21 ((2457744j,0s,0n),+0s,2299161j)&gt;]\npull_dates \"log/archive/2016A-12-21.zip\"\n  #=&gt; []\npull_dates \"log/archive/2016/12/21.zip\"\n  #=&gt; []\n</code></pre>\n\n<p>If you just want the date string, rather than the date object, change the method as follows.</p>\n\n<pre><code>def pull_dates(str)\n  str.split(/[\\/.]/).\n      each_with_object([]) { |s,a|\n        a &lt;&lt; s if (Date.strptime(s, '%Y-%m-%d') rescue nil)}\nend\n\npull_dates \"log/archive/2016-12-21.zip\"\n  #=&gt; [\"2016-12-21\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 6695009, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fba7f125cbe594ce538e3a175841b7be?s=128&d=identicon&r=PG&f=1", "display_name": "Ash Kashyap", "link": "https://stackoverflow.com/users/6695009/ash-kashyap"}, "is_accepted": false, "score": 0, "last_activity_date": 1482312163, "creation_date": 1482312163, "answer_id": 41259136, "question_id": 41256931, "link": "https://stackoverflow.com/questions/41256931/extract-date-part-from-a-file-path-string/41259136#41259136", "title": "Extract date part from a file path string", "body": "<p>Please try this</p>\n\n<pre><code>\"log/archive/2016-12-21.zip\".scan(/\\d{4}-\\d{2}-\\d{2}/).pop\n=&gt; \"2016-12-21\"\n</code></pre>\n\n<p>If the date format is invalid, it will return nil.</p>\n\n<p>Example:-</p>\n\n<pre><code>\"log/archive/20-12-21.zip\".scan(/\\d{4}-\\d{2}-\\d{2}/).pop\n             ^^\n=&gt; nil\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1482314836, "creation_date": 1482314836, "answer_id": 41260137, "question_id": 41256931, "link": "https://stackoverflow.com/questions/41256931/extract-date-part-from-a-file-path-string/41260137#41260137", "title": "Extract date part from a file path string", "body": "<p>This regex should cover most cases. It allows an optional non-digit between year, month and day :</p>\n\n<pre><code>require 'date'\n\ndef extract_date(filename)\n  if filename =~ /((?:19|20)\\d{2})\\D?(\\d{2})\\D?(\\d{2})/ then\n    year, month, day = $1.to_i, $2.to_i, $3.to_i\n    # Do something with year, month, day, or just leave it like this to return an array : [2016, 12, 21]\n    # Date.new(year, month, day)\n  end\nend\n\np extract_date(\"log/archive/2016-12-21.zip\")\np extract_date(\"log/archive/2016.12.21.zip\")\np extract_date(\"log/archive/2016:12:21.zip\")\np extract_date(\"log/archive/2016_12_21.zip\")\np extract_date(\"log/archive/20161221.zip\")\np extract_date(\"log/archive/2016/12/21.zip\")\np extract_date(\"log/archive/2016/12/21\")\n#=&gt; Every example returns [2016, 12, 21]\n</code></pre>\n"}], "owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1482314836, "creation_date": 1482303688, "last_edit_date": 1482314149, "question_id": 41256931, "link": "https://stackoverflow.com/questions/41256931/extract-date-part-from-a-file-path-string", "title": "Extract date part from a file path string", "body": "<p>I have a string that looks like this: <code>log/archive/2016-12-21.zip</code>, and I need to extract the date part.</p>\n\n<p>So far I have tried these solutions:</p>\n\n<pre><code>1) [\"log/archive/2016-12-21.zip\"].map{|i|i[/\\d{4}-\\d{2}-\\d{2}/]}.first \n2) \"log/archive/2016-12-21.zip\".to_date\n3) \"log/archive/2016-12-21.zip\".split(\"/\").last.split(\".\").first\n</code></pre>\n\n<p>Is there a better way of doing this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "is_accepted": false, "score": 1, "last_activity_date": 1482301818, "creation_date": 1482301818, "answer_id": 41256476, "question_id": 41256200, "link": "https://stackoverflow.com/questions/41256200/notifying-user-of-a-new-feature-through-one-time-notification-in-ruby-on-rails/41256476#41256476", "title": "Notifying user of a new feature through one time notification in ruby on rails", "body": "<p>There are lots of ways to do it. I prefer this way:</p>\n\n<ol>\n<li>Add column to user with Array data-type</li>\n<li>When you need to show notifications, push this notification to all users</li>\n<li>When user saw it, remove it from Array</li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code># Migration\nadd_column :users, :notifications, arrray: true, default: []\n# Create notification\nUser.update_all(%Q{notifications = array_append(notifications, \"New alert\")})\n# Remove notification\ncurrent_user.notifications.pop\ncurrent_user.save\n</code></pre>\n\n<p>It could be customized, depending on what you need. For example, you can store only one notification as a string. Or you can create a table with notifications and store only ids of them in users table, if notifications are complex.</p>\n"}], "owner": {"reputation": 45, "user_id": 4605549, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/784431574968642/picture?type=large", "display_name": "Rakesh Verma", "link": "https://stackoverflow.com/users/4605549/rakesh-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482301818, "creation_date": 1482300425, "question_id": 41256200, "link": "https://stackoverflow.com/questions/41256200/notifying-user-of-a-new-feature-through-one-time-notification-in-ruby-on-rails", "title": "Notifying user of a new feature through one time notification in ruby on rails", "body": "<p>I want to inform users of a new feedback feature the very next time they log in and never after that unless they opt the option of \"Later maybe\".</p>\n\n<p>How can I achieve it?\nThanks in advance.</p>\n"}, {"tags": ["javascript", "ruby", "selenium-webdriver", "cucumber", "automated-tests"], "answers": [{"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": true, "score": 0, "last_activity_date": 1482308172, "creation_date": 1482308172, "answer_id": 41258066, "question_id": 41255970, "link": "https://stackoverflow.com/questions/41255970/error-in-javascript-while-using-in-cucumber-selenium-with-ruby/41258066#41258066", "title": "Error in JavaScript while using in Cucumber Selenium with Ruby", "body": "<p>The bit of JavaScript you are executing has the variable <code>arg1</code> hard coded in. The script will see this as a JavaScript variable - and as no such variable has been defined within the JavaScript space, you get an error.</p>\n\n<p>From the rest of the code, I assume you actually want to pass the value of the <code>arg1</code> variable defined in the Ruby space, into the JavaScript code. I'd suggest you try this:</p>\n\n<pre><code>When(/^user selects year as (\\d+)$/) do |arg1|\n  $driver.execute_script(%Q&lt;document.getElementsByName(\"param[start_year]\")[0].value=\"#{arg1}\";&gt;)\nend\n</code></pre>\n\n<p>Note that I've used the <a href=\"http://blog.brzezinka.eu/webmaster-tips/ruby/alternative-stringss-delimiter-for-ruby-on-rails\" rel=\"nofollow noreferrer\"><code>%Q</code> text delimiter</a> so that <code>#{}</code> text insertion can be combined with text including double quotes (<code>\"</code>)</p>\n"}], "owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 41258066, "answer_count": 1, "score": 0, "last_activity_date": 1482366006, "creation_date": 1482299296, "last_edit_date": 1482366006, "question_id": 41255970, "link": "https://stackoverflow.com/questions/41255970/error-in-javascript-while-using-in-cucumber-selenium-with-ruby", "title": "Error in JavaScript while using in Cucumber Selenium with Ruby", "body": "<p>I am trying to select a dropdown using the below code in Selenium ruby with cucumber framework.I have included a Javascript to select the value.</p>\n\n<pre><code>When(/^user selects year as (\\d+)$/) do |arg1|\n\n  $driver.execute_script('document.getElementsByName(\"param[start_year]\")[0].value=arg1;')\n\nend\n</code></pre>\n\n<p>But I am getting an error like this.Please help me resolve</p>\n\n<pre><code>arg1 is not defined (Selenium::WebDriver::Error::JavascriptError)\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string", "class", "constants"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1482310356, "post_id": 41255572, "comment_id": 69717454, "body": "The statement &quot;I want to make it work more like Rails would.&quot; infers that you want a solution that behaves like Rails, but does not require Rails. It would be worth explicitly stating that you want a solution that doesn&#39;t require Rails, in your question as a number of answers have been given that have missed this point."}, {"owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1482325470, "post_id": 41255572, "comment_id": 69727500, "body": "Yes and thanks for deleting the Rails tag. My bad. Some good answers though. Thanks everybody. Please take a look at the app in the link. You might enjoy it."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482336631, "post_id": 41255572, "comment_id": 69735186, "body": "Why not just use the rails implementation <a href=\"http://apidock.com/rails/String/camelize\" rel=\"nofollow noreferrer\">String#camelize</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 3, "creation_date": 1482297580, "post_id": 41255608, "comment_id": 69711622, "body": "<code>camelize</code> is a <code>String</code> method provided by rails. So, you need to add in your answer what gem needs to be required."}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 2, "creation_date": 1482297629, "post_id": 41255608, "comment_id": 69711633, "body": "@ArunKumar rails was mentioned in the tags. So I presumed it."}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 2, "creation_date": 1482297795, "post_id": 41255608, "comment_id": 69711695, "body": "@31ply If you look at his <a href=\"https://github.com/adamgamble/brain_rack/blob/master/Gemfile\" rel=\"nofollow noreferrer\">Gemfile</a>, you won&#39;t find <code>rails</code>. Looks like he added a wrong tag."}], "tags": [], "owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "is_accepted": false, "score": 0, "last_activity_date": 1482297502, "creation_date": 1482297502, "answer_id": 41255608, "question_id": 41255572, "link": "https://stackoverflow.com/questions/41255572/i-need-some-help-manipulating-a-string-in-ruby/41255608#41255608", "title": "I need some help manipulating a string in Ruby", "body": "<p>The desired result is just the camel case representation of the source string. You can try to use <code>'custom_controller'.camelize</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1482297761, "post_id": 41255663, "comment_id": 69711683, "body": "or <code>map(&amp;:capitalize)</code>"}, {"owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "edited": false, "score": 0, "creation_date": 1482328538, "post_id": 41255663, "comment_id": 69729582, "body": "I like the split method because it returns an array and if you look at the code, it originated from an array."}], "tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": false, "score": 2, "last_activity_date": 1482297819, "last_edit_date": 1482297819, "creation_date": 1482297727, "answer_id": 41255663, "question_id": 41255572, "link": "https://stackoverflow.com/questions/41255572/i-need-some-help-manipulating-a-string-in-ruby/41255663#41255663", "title": "I need some help manipulating a string in Ruby", "body": "<p>You can use plain ruby to build your own <code>camelize</code> method.</p>\n\n<pre><code>def camelize(string)\n  string.split('_').map(&amp;:capitalize).join\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 3101782, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a7f2da739317a5199362dd7b998ad967?s=128&d=identicon&r=PG", "display_name": "Disha", "link": "https://stackoverflow.com/users/3101782/disha"}, "is_accepted": false, "score": 0, "last_activity_date": 1482301386, "last_edit_date": 1482301386, "creation_date": 1482297987, "answer_id": 41255714, "question_id": 41255572, "link": "https://stackoverflow.com/questions/41255572/i-need-some-help-manipulating-a-string-in-ruby/41255714#41255714", "title": "I need some help manipulating a string in Ruby", "body": "<p>You could get it as 'CustomController' by doing following : </p>\n\n<pre><code>'custom_controller'.split('_').collect{|x| x.camelize}.join\n</code></pre>\n\n<p>If you want to use this as class you could do following :</p>\n\n<pre><code>'custom_controller'.split('_').collect{|x| x.camelize}.join.constantize\n</code></pre>\n\n<p><strong>constantize</strong> is basically used to convert any string to class.\nBut I am not sure whether that works for controller. You can read more about it <a href=\"http://apidock.com/rails/String/constantize\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Read more about <strong>camelize</strong> <a href=\"http://apidock.com/rails/String/camelize\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1482310205, "last_edit_date": 1482310205, "creation_date": 1482309833, "answer_id": 41258514, "question_id": 41255572, "link": "https://stackoverflow.com/questions/41255572/i-need-some-help-manipulating-a-string-in-ruby/41258514#41258514", "title": "I need some help manipulating a string in Ruby", "body": "<p>This would also work:</p>\n\n<pre><code>\"custom_controller\".gsub(/_*([a-z]+)/i) {$1.capitalize}\n</code></pre>\n\n<p>And is closer to the way <a href=\"https://github.com/rails/rails/blob/f2489f493b794ee83a86e746b6240031acb8994e/activesupport/lib/active_support/inflector/methods.rb#L66\" rel=\"nofollow noreferrer\">Rails handles this issue</a>. I'd suggest you look at the Rails code as it also handles some variations on the simple case you quote. For example, how would you handle name spaced controllers <code>'foo/custom_controller'</code>?</p>\n"}], "owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1482328124, "creation_date": 1482297286, "last_edit_date": 1482328124, "question_id": 41255572, "link": "https://stackoverflow.com/questions/41255572/i-need-some-help-manipulating-a-string-in-ruby", "title": "I need some help manipulating a string in Ruby", "body": "<p>I have this string 'custom_controller'.</p>\n\n<p>I need to get it to this 'CustomController'.</p>\n\n<p>It's from the required file name and the class name inside is needed.</p>\n\n<p>To cut to the chase, the code is <a href=\"https://github.com/adamgamble/brain_rack\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>It is a project that comes from the Rack tutorials on Github. <a href=\"https://github.com/rack/rack/wiki/Tutorials\" rel=\"nofollow noreferrer\">rack/rack/wiki/Tutorials</a></p>\n\n<p>But rather than just name them custom.rb and class Custom, I want it more like a Rails app without requiring Rails or any of the gems that come with Rails except maybe Rack.\nThis is not a Rails app. This is not even a Sinatra or Padrino app. It's just a home brew web framework using Rack.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "command-line", "compiler-errors", "rubygems"], "comments": [{"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1482298525, "post_id": 41255015, "comment_id": 69711937, "body": "try <code>bundle exec rails db:schema:dump</code> on your app&#39;s directory"}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1482298709, "post_id": 41255015, "comment_id": 69712010, "body": "Windows is not very good at compiling the dependencies. I was stuck at such issue long ago, and forced to switch to linux. :("}, {"owner": {"reputation": 193, "user_id": 6943257, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ace0cf8171c896b5c745d46792e786c4?s=128&d=identicon&r=PG&f=1", "display_name": "jalen201", "link": "https://stackoverflow.com/users/6943257/jalen201"}, "edited": false, "score": 1, "creation_date": 1482301954, "post_id": 41255015, "comment_id": 69713188, "body": "i figured out the issue i was using a non x64 ruby version with a x64 devkit installation"}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 6943257, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ace0cf8171c896b5c745d46792e786c4?s=128&d=identicon&r=PG&f=1", "display_name": "jalen201", "link": "https://stackoverflow.com/users/6943257/jalen201"}, "is_accepted": true, "score": 1, "last_activity_date": 1482302049, "creation_date": 1482302049, "answer_id": 41256534, "question_id": 41255015, "link": "https://stackoverflow.com/questions/41255015/could-not-find-gem-rails-when-trying-to-access-database/41256534#41256534", "title": "Could not find gem &#39;rails&#39; when trying to access database", "body": "<p>I figured out the answer. Make sure that if you download the x64 ruby version, you also download the x64 DevKit installation as well. I didnt pay attention to that and downloaded a x64 with a non x64. </p>\n"}], "owner": {"reputation": 193, "user_id": 6943257, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ace0cf8171c896b5c745d46792e786c4?s=128&d=identicon&r=PG&f=1", "display_name": "jalen201", "link": "https://stackoverflow.com/users/6943257/jalen201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 41256534, "answer_count": 1, "score": 2, "last_activity_date": 1482302049, "creation_date": 1482293900, "last_edit_date": 1482297280, "question_id": 41255015, "link": "https://stackoverflow.com/questions/41255015/could-not-find-gem-rails-when-trying-to-access-database", "title": "Could not find gem &#39;rails&#39; when trying to access database", "body": "<p>Im getting the following error message when i do </p>\n\n<p><em>rails db:schema:dump</em> or any rails command in this directory</p>\n\n<pre><code>Could not find gem 'rails (~&gt; 5.0.1) x86-mingw32' in any of the gem sources listed in your Gemfile or available on this machine.\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>i tried bundle install and received the following error message </p>\n\n<pre><code>&gt;C:\\Users\\jalen\\Documents\\Sites\\simple_cms&gt;gem install rails -v 5.0.1\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n   &gt; current directory: C:/Ruby23/lib/ruby/gems/2.3.0/gems/nio4r-1.2.1/ext/nio4r\nC:/Ruby23/bin/ruby.exe -r ./siteconf20161220-8320-1xbe7zi.rb extconf.rb\nchecking for unistd.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\n&gt;Provided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby23/bin/$(RUBY_BASE_NAME)\n&gt;C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\n&gt;You have to install development tools first.\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:587:in `try_cpp'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:1091:in `block in have_header'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:942:in `block in checking_for'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:350:in `block (2 levels) in &gt;postpone'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:350:in `block in postpone'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:346:in `postpone'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:941:in `checking_for'\n        from C:/Ruby23/lib/ruby/2.3.0/mkmf.rb:1090:in `have_header'\n        from extconf.rb:3:in `&lt;main&gt;'\n\n&gt;To see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  &gt;C:/Ruby23/lib/ruby/gems/2.3.0/extensions/x86-mingw32/2.3.0/nio4r-&gt;1.2.1/mkmf.log\n\n&gt;extconf failed, exit code 1\n\n&gt;Gem files will remain installed in C:/Ruby23/lib/ruby/gems/2.3.0/gems/nio4r-1.2.1 for inspection.\nResults logged to C:/Ruby23/lib/ruby/gems/2.3.0/extensions/x86-mingw32/2.3.0/nio4r-1.2.1/gem_make.out\n</code></pre>\n\n<p>I thought i may be DevKit that was the problem, but I've already installed DevKit on my computer, and when in another directory i can see that i have </p>\n\n<pre><code>rails -v\nRails 5.0.1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482294704, "post_id": 41254995, "comment_id": 69710712, "body": "Please show the desired result for your example."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482295549, "post_id": 41254995, "comment_id": 69710980, "body": "Aside: the Ruby convention is to use <a href=\"https://en.wikipedia.org/wiki/Snake_case\" rel=\"nofollow noreferrer\">snake case</a> for the names of local variables and methods. Here, for example, you might use <code>astring</code>, <code>a_string</code> or <code>str</code>. It&#39;s just a convention, so you don&#39;t have to do that, but 99%+ of Rubiest adhere to the convention."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1482312123, "post_id": 41254995, "comment_id": 69718579, "body": "Your desired output does not match with your description of the algorithm. Where did the apostrophe after <code>new_tag2</code> go? It&#39;s not right before or right after a comma, so why was it removed?"}], "answers": [{"comments": [{"owner": {"reputation": 1081, "user_id": 1032036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUZPV.jpg?s=128&g=1", "display_name": "Tim Tonkonogov", "link": "https://stackoverflow.com/users/1032036/tim-tonkonogov"}, "edited": false, "score": 0, "creation_date": 1482294653, "post_id": 41255087, "comment_id": 69710702, "body": "Pay attention, the last apostrophe is still there"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1081, "user_id": 1032036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUZPV.jpg?s=128&g=1", "display_name": "Tim Tonkonogov", "link": "https://stackoverflow.com/users/1032036/tim-tonkonogov"}, "edited": false, "score": 0, "creation_date": 1482294943, "post_id": 41255087, "comment_id": 69710782, "body": "@Dimitry, the asker said &quot;I want to replace the apostrophes that come right before or right after a comma.&quot; That&#39;s unambiguous and is what I&#39;ve done. The asker does say that the apostrophes enclosing &quot;new_tag2&quot; should be removed but that is inconsistent with the stated objective."}, {"owner": {"reputation": 1081, "user_id": 1032036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUZPV.jpg?s=128&g=1", "display_name": "Tim Tonkonogov", "link": "https://stackoverflow.com/users/1032036/tim-tonkonogov"}, "edited": false, "score": 0, "creation_date": 1482295062, "post_id": 41255087, "comment_id": 69710821, "body": "I believe you made it correct according to the question, but I feel like it doesn&#39;t make too much sense without that last part. Let&#39;s wait the answer for your clarification request."}, {"owner": {"reputation": 1081, "user_id": 1032036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUZPV.jpg?s=128&g=1", "display_name": "Tim Tonkonogov", "link": "https://stackoverflow.com/users/1032036/tim-tonkonogov"}, "edited": false, "score": 0, "creation_date": 1482295339, "post_id": 41255087, "comment_id": 69710913, "body": "Could you edit your question somewhere? I can&#39;t revoke it now."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482295835, "post_id": 41255087, "comment_id": 69711055, "body": "For <code>str = &quot;&#39;new_tag&#39;s&#39;&quot;</code>, <code>str.gsub(r, &#39;&#39;) #=&gt;&quot;&#39;new_tag&#39;s&#39;&quot;</code>. I believe OP would want <code>&quot;new_tag&#39;s&quot;</code> returned."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482295962, "post_id": 41255087, "comment_id": 69711089, "body": "@sagarpandya82, but-but,-but there is no comma in that string. :-) In any case, we are on thin ice if try to figure out what the asker is thinking when the question is clear, but then the asker add something that is contradictory. Best to explain the problem in a comment and request clarification."}, {"owner": {"reputation": 951, "user_id": 3977145, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/506166398/picture?type=large", "display_name": "codigomonstruo", "link": "https://stackoverflow.com/users/3977145/codigomonstruo"}, "edited": false, "score": 0, "creation_date": 1482301414, "post_id": 41255087, "comment_id": 69712976, "body": "@CarySwoveland sorry I wished to take out the last apostrophee as well. My bad"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482305713, "post_id": 41255087, "comment_id": 69715010, "body": "codigomonstruo,  you&#39;ll see that I added to my answer to deal with that."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1482308830, "last_edit_date": 1482308830, "creation_date": 1482294354, "answer_id": 41255087, "question_id": 41254995, "link": "https://stackoverflow.com/questions/41254995/how-do-i-replace-all-the-apostrophes-that-come-right-before-or-right-after-a-com/41255087#41255087", "title": "How do I replace all the apostrophes that come right before or right after a comma?", "body": "<p>This answers the question, \"I want to replace the apostrophes that come right before or right after a comma\". </p>\n\n<pre><code>r = /\n    (?&lt;=,) # match a comma in a positive lookbehind\n    \\'     # match an apostrophe\n    |      # or\n    \\'     # match an apostrophe\n    (?=,)  # match a comma in a positive lookahead\n    /x     # free-spacing regex definition mode        \n\naString = \"old_tag1,x'old_tag2'x,x'old_tag3','new_tag1','new_tag2'\"\n\naString.gsub(r, '')\n  #=&gt; =&gt; \"old_tag1,x'old_tag2'x,x'old_tag3,new_tag1,new_tag2'\"\n</code></pre>\n\n<p>If the objective is instead to remove single quotes enclosing a substring when the left quote is at the the beginning of the string or is immediately preceded by a comma and the right quote is at the end of the string or is immediately followed by comma, several approaches are possible. One is to use a single, modified regex, as @Dimitry has done. Another is to split the string on commas, process each string in the resulting array and them join the modified substrings,  separated by commas.</p>\n\n<pre><code>r = /\n    \\A     # match beginning of string\n    \\'     # match single quote\n    .*     # match zero or more characters\n    \\'     # match single quote\n    \\z     # match end of string\n    /x     # free-spacing regex definition mode\n\naString.split(',').map { |s| (s =~ r) ? s[1..-2] : s }.join(',')\n  #=&gt; \"old_tag1,x'old_tag2'x,x'old_tag3',new_tag1,new_tag2\"\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>arr = aString.split(',')\n  #=&gt; [\"old_tag1\", \"x'old_tag2'x\", \"x'old_tag3'\", \"'new_tag1'\", \"'new_tag2'\"]\n\"old_tag1\"     =~ r #=&gt; nil\n\"x'old_tag2'x\" =~ r #=&gt; nil\n\"x'old_tag3'\"  =~ r #=&gt; nil\n\"'new_tag1'\"   =~ r #=&gt; 0\n\"'new_tag2'\"   =~ r #=&gt; 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1081, "user_id": 1032036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUZPV.jpg?s=128&g=1", "display_name": "Tim Tonkonogov", "link": "https://stackoverflow.com/users/1032036/tim-tonkonogov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482296335, "post_id": 41255337, "comment_id": 69711206, "body": "I didn&#39;t %) It was in the tag body"}], "tags": [], "owner": {"reputation": 1081, "user_id": 1032036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUZPV.jpg?s=128&g=1", "display_name": "Tim Tonkonogov", "link": "https://stackoverflow.com/users/1032036/tim-tonkonogov"}, "is_accepted": false, "score": 1, "last_activity_date": 1482296939, "last_edit_date": 1495541782, "creation_date": 1482296105, "answer_id": 41255337, "question_id": 41254995, "link": "https://stackoverflow.com/questions/41254995/how-do-i-replace-all-the-apostrophes-that-come-right-before-or-right-after-a-com/41255337#41255337", "title": "How do I replace all the apostrophes that come right before or right after a comma?", "body": "<p>My guess is to use regex as well, but in a slightly other way:\n</p>\n\n<pre><code>aString = \"old_tag1,old_tag2,'new_tag1','new_tag2','new_tag3','new_tag4's'\"\naString.gsub /(?&lt;=^|,)'(.*?)'(?=,|$)/, '\\1\\2\\3'\n#=&gt; \"old_tag1,old_tag2,new_tag1,new_tag2,new_tag3,new_tag4's\"\n</code></pre>\n\n<p>The idea is to find a substring with bounding apostrophes and paste it back without it. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>regex = /\n  (?&lt;=^|,) # watch for start of the line or comma before\n  '        # find an apostrophe\n  (.*?)    # get everything between apostrophes in a non-greedy way\n  '        # find a closing apostrophe\n  (?=,|$)  # watch after for the comma or the end of the string\n/x\n</code></pre>\n\n<p>The replacement part just paste back the content of the first, second, and third groups (everything between parenthesis). </p>\n\n<p>Thanks for <a href=\"https://stackoverflow.com/users/256970/cary-swoveland\">@Cary</a> for <code>/x</code> modificator for regexes, I didn't know about it! Extremely useful for explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 86185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8ab8c7b30515df850171d8e9c7c4c4e?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/86185/zack"}, "is_accepted": false, "score": 0, "last_activity_date": 1482347291, "last_edit_date": 1592644375, "creation_date": 1482346979, "answer_id": 41270112, "question_id": 41254995, "link": "https://stackoverflow.com/questions/41254995/how-do-i-replace-all-the-apostrophes-that-come-right-before-or-right-after-a-com/41270112#41270112", "title": "How do I replace all the apostrophes that come right before or right after a comma?", "body": "<h1>Non regex replacement</h1>\n<p>Regular expressions can get really ugly.  There is a simple way to do it with just string replacement:  search for the pattern <code>,'</code> and <code>',</code> and replace with <code>,</code></p>\n<pre><code>aString.gsub(&quot;,'&quot;, &quot;,&quot;).gsub(&quot;',&quot;, &quot;,&quot;)\n=&gt; &quot;old_tag1,old_tag2,new_tag1,new_tag2'&quot;\n</code></pre>\n<p>This leaves the trailing <code>'</code>, but that is easy to remove with <code>.chomp(&quot;'&quot;)</code>.  A leading <code>'</code> can be removed with a simple regex <code>.gsub(/^'/, &quot;&quot;)</code></p>\n"}], "owner": {"reputation": 951, "user_id": 3977145, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/506166398/picture?type=large", "display_name": "codigomonstruo", "link": "https://stackoverflow.com/users/3977145/codigomonstruo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 41255087, "answer_count": 3, "score": 1, "last_activity_date": 1482347291, "creation_date": 1482293757, "last_edit_date": 1482300139, "question_id": 41254995, "link": "https://stackoverflow.com/questions/41254995/how-do-i-replace-all-the-apostrophes-that-come-right-before-or-right-after-a-com", "title": "How do I replace all the apostrophes that come right before or right after a comma?", "body": "<p>I have a string <strong>aString = \"old_tag1,old_tag2,'new_tag1','new_tag2'\"</strong> \nI want to replace the apostrophees that come right before or right after a comma. For example in my case the apostrophees enclosing new_tag1 and new_tag2 should be removed.\nThis is what I have right now</p>\n\n<pre><code>aString = aString.gsub(\"'\", \"\")\n</code></pre>\n\n<p>This is however problematic as it removes any apostrophe inside for example if I had 'my_tag's' instead of 'new_tag1'. How do I get rid of only the apostrophes that come before or after the commas  ?  </p>\n\n<p>My desired output is </p>\n\n<pre><code>aString = \"old_tag1,old_tag2,new_tag1,new_tag2\"\n</code></pre>\n"}, {"tags": ["ruby", "regex", "gsub"], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1482296500, "post_id": 41255236, "comment_id": 69711260, "body": "Ahh this is removing other characters like <code>W A R N I T G</code>. Need to find some other way to delete these characters"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1482297247, "post_id": 41255236, "comment_id": 69711509, "body": "Ok found it. Its working perfectly the thing is when am trying to string <code>...WAITING</code> using <code>.delete</code> method and its removing those characters."}], "tags": [], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1482295441, "creation_date": 1482295441, "answer_id": 41255236, "question_id": 41254981, "link": "https://stackoverflow.com/questions/41254981/ruby-hidden-characters-25l-25h-from-file/41255236#41255236", "title": "ruby hidden characters 25l 25h from file", "body": "<p>Got it fixed myself. I found that not escaping <code>?</code>.</p>\n\n<pre><code>irb(main):021:0&gt; filename=\"/tmp/output.log\"\n=&gt; \"/tmp/output.log\"\nirb(main):022:0&gt; content = File.read(filename)\n=&gt; \"\\e[?25l\\n\\n\\e[?12l\\e[?25hDone\\n\\n\"\nirb(main):023:0&gt; content.gsub!(/\\e\\[\\?(\\d+)(\\d+)l|\\e\\[\\?(\\d+)(\\d+)h/, '')\n=&gt; \"\\n\\nDone\\n\\n\"\nirb(main):024:0&gt; puts content\n\n\nDone\n\n=&gt; nil\nirb(main):025:0&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1482295441, "creation_date": 1482293631, "question_id": 41254981, "link": "https://stackoverflow.com/questions/41254981/ruby-hidden-characters-25l-25h-from-file", "title": "ruby hidden characters 25l 25h from file", "body": "<p>A file which contains line as below,</p>\n\n<pre><code>[root@test-server ~]# cat /tmp/output.log\n\n\nDone\n\n[root@test-server ~]#\n</code></pre>\n\n<p>But it has some hidden characters,</p>\n\n<pre><code>[root@test-server ~]# cat -e /tmp/output.log\n^[[?25l$\n$\n^[[?12l^[[?25hDone!$\n$\n[root@test-server ~]# \n</code></pre>\n\n<p>here are the bytes code of these characters,</p>\n\n<pre><code>[root@test-server ~]# irb\nirb(main):001:0&gt; File.open(\"/tmp/output.log\").each_byte.to_a\n=&gt; [27, 91, 63, 50, 53, 108, 10, 10, 27, 91, 63, 49, 50, 108, 27, 91, 63, 50, 53, 104, 68, 111, 110, 101, 10, 10]\nirb(main):002:0&gt;\n</code></pre>\n\n<p>Am trying to remove this using below gsub method which is not working.</p>\n\n<pre><code>filename=\"/tmp/stop_output.log\"\ncontent = File.read(filename)\ncontent.gsub!(/\\e\\[?(\\d+)(;(\\d+))?l|\\e\\[?(\\d+)(;(\\d+))?h/, '')\n</code></pre>\n\n<p>Not sure if am missing something with gsub,</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "rspec-rails"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482301508, "post_id": 41254959, "comment_id": 69713013, "body": "Check your <code>test.log</code> file; the record was not stored to the database for some reason and it\u2019s impossible to say why exactly without examining the log."}], "answers": [{"tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1482314566, "creation_date": 1482314566, "answer_id": 41260033, "question_id": 41254959, "link": "https://stackoverflow.com/questions/41254959/tests-fail-with-record-creation-in-rails-5/41260033#41260033", "title": "Tests fail with record creation in Rails 5", "body": "<p>Rails 5 differs from Rails 4 in that when you have a <code>belongs_to</code> relation, Rails 5 will <a href=\"https://github.com/rails/rails/issues/18233\" rel=\"nofollow noreferrer\">automatically validate the presence</a> of the associated object, even without you adding any validations.</p>\n\n<p>Probably your <code>Post</code> model belongs to a <code>User</code>. Because of this, you need to create a user in your test setup, or the validation will fail:</p>\n\n<pre><code>describe \"Creation\" do\n  before do\n    @user = User.create( ... )\n    @post = Post.create(date: Date.today, rationale: \"Anything\", user: @user)\n  end\n\n  it \"can be created\" do\n    expect(@post).to be_valid\n  end\n\n  it \"cannot be created without a date and rationale\" do\n    @post.date = nil\n    @post.rationale = nil\n    expect(@post).to_not be_valid\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7323859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5TcidtfKw80/AAAAAAAAAAI/AAAAAAAAAIU/keIhoY-pl6Y/photo.jpg?sz=128", "display_name": "levi smith", "link": "https://stackoverflow.com/users/7323859/levi-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482314706, "creation_date": 1482293468, "last_edit_date": 1482314706, "question_id": 41254959, "link": "https://stackoverflow.com/questions/41254959/tests-fail-with-record-creation-in-rails-5", "title": "Tests fail with record creation in Rails 5", "body": "<p>I am building an app in school and I am running into this error. As of right now the app walk through was started in rails 4.2.6, and I am running 5.0.0.1.</p>\n\n<p>The error is:</p>\n\n<pre><code>Failures:\n\n   1) Post Creation can be created\n   Failure/Error: expect(@post).to be_valid\n   expected #&lt;Post id: nil, date: \"2016-12-20\", rationale: \"Anything\", created_at: nil, updated_at: nil, user_id: nil&gt; to be valid, but got errors: User must exist\n   # ./spec/models/post_spec.rb:10:in `block (3 levels) in &lt;top (required)&gt;'\n\nFinished in 0.65569 seconds (files took 2.19 seconds to load)\n10 examples, 1 failure\n\nFailed examples:\n\n    rspec ./spec/models/post_spec.rb:9 # Post Creation can be created\n</code></pre>\n\n<p>My code is as follows. I have compared to the repo on the walk-through and it matches perfectly. What am i missing?</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Post, type: :model do\n  describe \"Creation\" do\n    before do\n      @post = Post.create(date: Date.today, rationale: \"Anything\")\n    end\n\n    it \"can be created\" do\n      expect(@post).to be_valid\n    end\n\n    it \"cannot be created without a date and rationale\" do\n      @post.date = nil\n      @post.rationale = nil\n      expect(@post).to_not be_valid\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "edited": false, "score": 0, "creation_date": 1482302210, "post_id": 41254858, "comment_id": 69713305, "body": "Your question is... unclear. Could you share more information? What is <code>gon</code>? What are you trying to achieve? If you want to perform different actions on the same path with different request-types, you can achieve it by configuring <code>routes.rb</code>"}], "owner": {"reputation": 11, "user_id": 7323829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71306e432205fecbdb3b19ec50318632?s=128&d=identicon&r=PG&f=1", "display_name": "wer", "link": "https://stackoverflow.com/users/7323829/wer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482292711, "creation_date": 1482292711, "question_id": 41254858, "link": "https://stackoverflow.com/questions/41254858/random-request-type-specified-in-gon-params-in-controller-action", "title": "Random request type specified in gon params in controller action", "body": "<p>I want to generalize my code and decide in the cotroller what request type i'll be using:</p>\n\n<pre><code>  function success() {\n    var key = gon.pathAndFilename;\n    var params = {};\n    params.filePath = key;\n\n    $.gon.requestType(gon.postRequestPath, // post, patch, get \n      params\n    ).done(function() {\n      location.reload();\n    });\n  }\n</code></pre>\n\n<p>in controller:</p>\n\n<p><code>gon.requestType = ?</code></p>\n\n<p>please help. thanks</p>\n"}, {"tags": ["ruby", "activesupport"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1482292275, "post_id": 41254747, "comment_id": 69710136, "body": "What kind of side effects are you worried about?"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 3, "creation_date": 1482294219, "post_id": 41254787, "comment_id": 69710594, "body": "if you use <code>first(n)</code> instead of <code>take(n)</code> you can do away with <code>to_a</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482336955, "post_id": 41254787, "comment_id": 69735415, "body": "second example I believe you meant <code>arr.count</code> as <code>x</code> is a <code>Fixnum</code> and does not have a <code>count</code> method."}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 3, "last_activity_date": 1482338111, "last_edit_date": 1482338111, "creation_date": 1482292108, "answer_id": 41254787, "question_id": 41254747, "link": "https://stackoverflow.com/questions/41254747/builtin-ruby-or-activesupport-function-for-select-first-n-elements-satisfying-a/41254787#41254787", "title": "Builtin Ruby or ActiveSupport function for &quot;select first n elements satisfying a predicate&quot;?", "body": "<p>You could do something along the lines of </p>\n\n<pre><code>[1, 2, 3, 4, 5].lazy.select{|x| x.odd? }.take(n).to_a\n</code></pre>\n\n<p>But if you want to avoid <code>select{ . . }.take(n)</code> you could also do: </p>\n\n<pre><code>[1, 2, 3, 4, 5].each{|x| arr &lt;&lt; x if x.odd?; break if arr.count == n}\n</code></pre>\n"}], "owner": {"reputation": 5613, "user_id": 2339708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dL2a0.jpg?s=128&g=1", "display_name": "Eli Rose", "link": "https://stackoverflow.com/users/2339708/eli-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 41254787, "answer_count": 1, "score": -1, "last_activity_date": 1482338111, "creation_date": 1482291813, "question_id": 41254747, "link": "https://stackoverflow.com/questions/41254747/builtin-ruby-or-activesupport-function-for-select-first-n-elements-satisfying-a", "title": "Builtin Ruby or ActiveSupport function for &quot;select first n elements satisfying a predicate&quot;?", "body": "<p>I'm looking for a <code>select</code> that \"short-circuits\" once it's returned a certain number of items:</p>\n\n<pre><code>&gt;&gt;&gt; [1, 2, 3, 4, 5].select_first(1) { |x| x.odd? }\n[1]\n&gt;&gt;&gt; [1, 2, 3, 4, 5].select_first(2) { |x| x.odd? }\n[1, 3]\n&gt;&gt;&gt; [1, 2, 3, 4, 5].select_first(1000) { |x| x.odd? }\n[1, 3, 5]\n</code></pre>\n\n<p>Is there a library function, either in core or in ActiveSupport, that does this? It's easy to roll my own, but I thought I would check.</p>\n\n<p>Note that I do not want <code>select { ... }.take(n)</code> because the block might have side effects.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "access-token"], "comments": [{"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1482295979, "post_id": 41254735, "comment_id": 69711091, "body": "Please post <code>routes.rb</code>."}, {"owner": {"reputation": 111, "user_id": 7101852, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b51c14d7af2b053ec5457821e97fe19?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kenny", "link": "https://stackoverflow.com/users/7101852/d-kenny"}, "reply_to_user": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1482296206, "post_id": 41254735, "comment_id": 69711166, "body": "@31piy posted already. I just followed her instruction"}, {"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "edited": false, "score": 0, "creation_date": 1482302319, "post_id": 41254735, "comment_id": 69713347, "body": "Please post output of <code>rake routes | grep knock</code>"}, {"owner": {"reputation": 111, "user_id": 7101852, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b51c14d7af2b053ec5457821e97fe19?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kenny", "link": "https://stackoverflow.com/users/7101852/d-kenny"}, "reply_to_user": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "edited": false, "score": 0, "creation_date": 1482346294, "post_id": 41254735, "comment_id": 69740713, "body": "@unkmas posted already"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7101852, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b51c14d7af2b053ec5457821e97fe19?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kenny", "link": "https://stackoverflow.com/users/7101852/d-kenny"}, "edited": false, "score": 0, "creation_date": 1482872384, "post_id": 41276052, "comment_id": 69906043, "body": "I tried, and I can generate the token_controller. But I got the same error"}, {"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "reply_to_user": {"reputation": 111, "user_id": 7101852, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b51c14d7af2b053ec5457821e97fe19?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kenny", "link": "https://stackoverflow.com/users/7101852/d-kenny"}, "edited": false, "score": 0, "creation_date": 1482898535, "post_id": 41276052, "comment_id": 69912271, "body": "@D.Kenny This is weird. Add your new routes.rb please."}, {"owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "reply_to_user": {"reputation": 111, "user_id": 7101852, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b51c14d7af2b053ec5457821e97fe19?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kenny", "link": "https://stackoverflow.com/users/7101852/d-kenny"}, "edited": false, "score": 0, "creation_date": 1483198244, "post_id": 41276052, "comment_id": 70022115, "body": "@D.Kenny now you have &#39;/user_token&#39; route, while trying to access &#39;/knock/user_token&#39;, which does not exists. Access &#39;/user_token&#39; and it should work :) Happy New Year too :)"}], "tags": [], "owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "is_accepted": false, "score": 0, "last_activity_date": 1482382870, "creation_date": 1482382870, "answer_id": 41276052, "question_id": 41254735, "link": "https://stackoverflow.com/questions/41254735/no-route-matches-post-knock-user-token/41276052#41276052", "title": "No route matches [POST] &quot;/knock/user_token&quot;", "body": "<p>Ok, I have read docs for this gem.</p>\n\n<p>There is no such route by default. When you installing this gem, you should generate token controller for your application:</p>\n\n<p><code>rails generate knock:token_controller user</code></p>\n\n<p>Output of this command:</p>\n\n<pre><code>create  app/controllers/user_token_controller.rb\nroute  post 'user_token' =&gt; 'user_token#create'\n</code></pre>\n\n<p>As you can see, token controller was created, and also route for it.</p>\n"}], "owner": {"reputation": 111, "user_id": 7101852, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b51c14d7af2b053ec5457821e97fe19?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kenny", "link": "https://stackoverflow.com/users/7101852/d-kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483144339, "creation_date": 1482291745, "last_edit_date": 1483144339, "question_id": 41254735, "link": "https://stackoverflow.com/questions/41254735/no-route-matches-post-knock-user-token", "title": "No route matches [POST] &quot;/knock/user_token&quot;", "body": "<p>I'm currently using the JWT authentication for Rails API from this link:\n<a href=\"https://github.com/nsarno/knock\" rel=\"nofollow noreferrer\">https://github.com/nsarno/knock</a>\nand I followed her instruction carefully. However, I still cannot login with the username and password I just registered. I can register with no error, and show me this message:</p>\n\n<pre><code>Started POST \"/users\" for ::1 at 2016-12-20 22:28:32 -0500\nProcessing by UsersController#create as HTML\n  Parameters: {\"user\"=&gt;{\"email\"=&gt;\"xxx@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}}\n   (0.4ms)  BEGIN\n  SQL (0.8ms)  INSERT INTO \"users\" (\"email\", \"password_digest\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"email\", \"zsy2053@gmail.com\"], [\"password_digest\", \"$2a$10$1UAPAV92l.pHhbT.L3BvfOP7ieuy9yU2cdWdwy9VsVnTHjaRECB0W\"], [\"created_at\", 2016-12-21 03:28:32 UTC], [\"updated_at\", 2016-12-21 03:28:32 UTC]]\n   (28.7ms)  COMMIT\n[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.42ms)\nCompleted 200 OK in 162ms (Views: 21.2ms | ActiveRecord: 34.3ms)\n</code></pre>\n\n<p>However, I got this error if I just login with the user name and password I registered:</p>\n\n<pre><code>Started POST \"/knock/user_token\" for ::1 at 2016-12-20 22:29:02 -0500\n\nActionController::RoutingError (No route matches [POST] \"/knock/user_token\"):\n</code></pre>\n\n<p>Here is the routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :cars\n  get '/users/current-user', to: \"current_user#show\"\n  resources :users\n  mount Knock::Engine =&gt; \"/knock\"\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>Here is the output of rake routes | grep knock</p>\n\n<pre><code>            knock        /knock                        Knock::Engine\nauth_token POST /auth_token(.:format) knock/auth_token#create\n</code></pre>\n\n<p>Here is the configuration of routers.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  post 'user_token' =&gt; 'user_token#create'\n  resources :cars\n  get '/users/current-user', to: \"current_user#show\"\n  resources :users\n  mount Knock::Engine =&gt; \"/knock\"\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 5695385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-sff0LhDONtY/AAAAAAAAAAI/AAAAAAAAAIU/aknPgRSI6DA/photo.jpg?sz=128", "display_name": "Maxwell Powell", "link": "https://stackoverflow.com/users/5695385/maxwell-powell"}, "edited": false, "score": 0, "creation_date": 1482297438, "post_id": 41254992, "comment_id": 69711571, "body": "Thanks! This seems to have been the issue."}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "reply_to_user": {"reputation": 131, "user_id": 5695385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-sff0LhDONtY/AAAAAAAAAAI/AAAAAAAAAIU/aknPgRSI6DA/photo.jpg?sz=128", "display_name": "Maxwell Powell", "link": "https://stackoverflow.com/users/5695385/maxwell-powell"}, "edited": false, "score": 0, "creation_date": 1482297462, "post_id": 41254992, "comment_id": 69711585, "body": "np, glad I could help."}], "tags": [], "owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "is_accepted": true, "score": 1, "last_activity_date": 1482417808, "last_edit_date": 1482417808, "creation_date": 1482293738, "answer_id": 41254992, "question_id": 41254686, "link": "https://stackoverflow.com/questions/41254686/searching-by-text-with-mechanize-nogokiri/41254992#41254992", "title": "Searching by text with Mechanize/Nogokiri", "body": "<p>This looks to be a problem with the DOM structure of the site, as it contains a tag named <code>style</code> which isn't being closed and looks like this:</p>\n\n<blockquote>\n<pre><code>&lt;td colspan='7'&gt;&lt;style='text-align:center;font-style:italic'&gt;The\ninstitution has been granted Candidate for Accreditation status by the\nCommission on Accreditation in Physical Therapy Education (1111 North\nFairfax Street, Alexandria, VA, 22314; phone: 703.706.3245; email: &lt;a\nhref='mailto:accreditation@apta.org'&gt;accreditation@apta.org&lt;/a&gt;).\nCandidacy is not an accreditation status nor does it assure eventual\naccreditation. Candidate for Accreditation is a pre-accreditation\nstatus of affiliation with the Commission on Accreditation in Physical\nTherapy Education that indicates the program is progressing toward\naccreditation.&lt;/td&gt;\n</code></pre>\n</blockquote>\n\n<p>as you can see, the <code>td</code> tag closes but the inner <code>style</code> never did.</p>\n\n<p>If you don't need this part of the code I would recommend removing this before trying to work with the entire <code>response</code>. I don't have experience with <code>ruby</code> but I would do something like:</p>\n\n<ul>\n<li>Get the raw body of the response.</li>\n<li>Replace the part that matches this regex <code>'(&lt;style=\\'.*)&lt;/td&gt;'</code> with empty string, or close the tag yourself.</li>\n<li>Work with this new response body.</li>\n</ul>\n\n<p>Now you would be able to work with xpath selectors.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 5695385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-sff0LhDONtY/AAAAAAAAAAI/AAAAAAAAAIU/aknPgRSI6DA/photo.jpg?sz=128", "display_name": "Maxwell Powell", "link": "https://stackoverflow.com/users/5695385/maxwell-powell"}, "is_accepted": false, "score": 1, "last_activity_date": 1482297730, "creation_date": 1482297730, "answer_id": 41255664, "question_id": 41254686, "link": "https://stackoverflow.com/questions/41254686/searching-by-text-with-mechanize-nogokiri/41255664#41255664", "title": "Searching by text with Mechanize/Nogokiri", "body": "<p>eLRuLL gives the source of the problem above. Here is an example of how I fixed the issue:</p>\n\n<pre><code>require 'mechanize'\nrequire 'nokogiri'\n\nagent = Mechanize.new\npage = agent.get('http://www.ptcas.org/ptcas/public/Listing.aspx?seqn=3200&amp;navid=10737426783')\nmangled_text = page.body\nfixed_text = mangled_text.sub(/&lt;style=.+?&lt;\\/td&gt;/, \"&lt;/td&gt;\")\npage = Nokogiri::HTML(fixed_text)\ngpa_headers = page.xpath('//h3[contains(text(), \"GPA\")]')\npp gpa_headers\n</code></pre>\n\n<p>This will return the header that I was looking for above:</p>\n\n<pre><code>[#&lt;Nokogiri::XML::Element:0x2b28a8ec0c38 name=\"h3\" attributes=[#&lt;Nokogiri::XML::Attr:0x2b28a8ec0bc0 name=\"style\" value=\"text-align:center;\"&gt;] children=[#&lt;Nokogiri::XML::Text:0x2b28a8ec0774 \"GPA REQUIREMENT\"&gt;]&gt;]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 1, "last_activity_date": 1482310013, "creation_date": 1482310013, "answer_id": 41258568, "question_id": 41254686, "link": "https://stackoverflow.com/questions/41254686/searching-by-text-with-mechanize-nogokiri/41258568#41258568", "title": "Searching by text with Mechanize/Nogokiri", "body": "<p>A more reliable solution is to work with a HTML5 parser like nokogumbo:</p>\n\n<pre><code>require 'nokogumbo'\ndoc = Nokogiri::HTML5(page.body)\ngpa_headers = doc.search('//h3[contains(text(), \"GPA\")]')\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5695385, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-sff0LhDONtY/AAAAAAAAAAI/AAAAAAAAAIU/aknPgRSI6DA/photo.jpg?sz=128", "display_name": "Maxwell Powell", "link": "https://stackoverflow.com/users/5695385/maxwell-powell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 41254992, "answer_count": 3, "score": 1, "last_activity_date": 1482417808, "creation_date": 1482291436, "question_id": 41254686, "link": "https://stackoverflow.com/questions/41254686/searching-by-text-with-mechanize-nogokiri", "title": "Searching by text with Mechanize/Nogokiri", "body": "<p>I'm trying to scrape some data on average GPA and more from a lot of pages similar to this one:</p>\n\n<p><a href=\"http://www.ptcas.org/ptcas/public/Listing.aspx?seqn=3200&amp;navid=10737426783\" rel=\"nofollow noreferrer\">http://www.ptcas.org/ptcas/public/Listing.aspx?seqn=3200&amp;navid=10737426783</a></p>\n\n<pre><code>require 'mechanize'\n\nagent = Mechanize.new\npage = agent.get('http://www.ptcas.org/ptcas/public/Listing.aspx?seqn=3200&amp;navid=10737426783')\ngpa_headers = page.xpath('//h3[contains(text(), \"GPA\")]')\npp gpa_headers\n</code></pre>\n\n<p>My issue is that <code>gpa_headers</code> is nil but there is at least one h3 element containing \"GPA\".</p>\n\n<p>What could be causing this issue? I thought it may be that since the page has dynamic elements that Mechanize had some issue with that yet I can <code>puts page.body</code> and the output includes:</p>\n\n<pre><code>... &lt;h3 style=\"text-align:center;\"&gt;GPA REQUIREMENT&lt;/h3&gt; ...\n</code></pre>\n\n<p>Which, by my understanding should be found with the xpath I used.</p>\n\n<p>If there is a better approach to this I would like to know that too.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482290775, "post_id": 41254577, "comment_id": 69709768, "body": "did you add the image to heroku before doing db:seed?"}, {"owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482297065, "post_id": 41254577, "comment_id": 69711440, "body": "I don&#39;y think so. Honestly I have no idea how to do that"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482297157, "post_id": 41254577, "comment_id": 69711478, "body": "Add it to your git and push the branch to heroku remote.. in other words how are you pushing your code to heroku?"}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1482297378, "post_id": 41254577, "comment_id": 69711542, "body": "Do a search in your project for <code>browse_soup</code>."}, {"owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "edited": false, "score": 0, "creation_date": 1482297430, "post_id": 41254577, "comment_id": 69711564, "body": "oo I&#39;m doing a git push heroku master"}], "owner": {"reputation": 311, "user_id": 5651001, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dd8cdbb3f752d6276a0ec0460e047bc5?s=128&d=identicon&r=PG&f=1", "display_name": "Harry B.", "link": "https://stackoverflow.com/users/5651001/harry-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482290582, "creation_date": 1482290582, "question_id": 41254577, "link": "https://stackoverflow.com/questions/41254577/errnoenoent-no-such-file-or-directory-rb-sysopen-app-assets-images", "title": "Errno::ENOENT: No such file or directory @ rb_sysopen - /app/assets/images/", "body": "<p>I'm trying to seed my db with a couple of images for production. Every time I try to seed the database with heroku I het this error:</p>\n\n<pre><code>Errno::ENOENT: No such file or directory @ rb_sysopen - /app/assets/images/browse_soup.jpeg\n</code></pre>\n\n<p>Even when trying to add the image in the heroku console I get the same error. Everything worked in development, but now it won't in production. I'm not sure why its saying there is no such file or directory, when I am looking right at it in my rails app. </p>\n\n<p>I'm not quite sure what code to post that will be relevant to help solve this problem, so if anyone has any suggestions or recommendations on code to post, then please let me know. Thank you!  </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1482290417, "post_id": 41254512, "comment_id": 69709692, "body": "Was the javascript rails-guide not helpful? <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/working_with_javascript_in_rails.html</a> if not - can you explain what is missing that you need?"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482291586, "post_id": 41254512, "comment_id": 69709968, "body": "Can you tell in the question what exactly you want using gmaps4rails gem?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1482304285, "post_id": 41254512, "comment_id": 69714300, "body": "@TarynEast - good point. I&#39;ll redraft this note to identify all the open ended things in the Rails Guides. I can see from Brenzy&#39;s suggestion on my linked post that he thinks its effective to remove everything and then add js files back one by one to find incompatible js. But how do I now what the compatibility rules are? Where are they defined? Once I find them, I might have half a chance of fixing something."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482304302, "post_id": 41254512, "comment_id": 69714307, "body": "@uDay I&#39;m not using the gmaps4rails gem"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482290009, "creation_date": 1482290009, "last_edit_date": 1495540798, "question_id": 41254512, "link": "https://stackoverflow.com/questions/41254512/rails-5-where-can-i-find-the-rules-for-using-javascript-with-rails", "title": "Rails 5 - where can I find the rules for using javascript with Rails?", "body": "<p>I am trying to broaden the scope of my search for help so that I can use javascript with my Rails 5 app in production, hosted on heroku.</p>\n\n<p>I've set out the full detail of my issue in <a href=\"https://stackoverflow.com/questions/41082357/rails-figuring-out-the-javascript-config\">this post</a>. I wasn't able to find help in reply to that post, but I can see from the commentary that others provided and the suggestions made that there must be a set of rules for using javascript or jQuery in a Rails 5 app, which I cannot find published anywhere. </p>\n\n<p>I have been through the rails guides, I have done every course available on code school to learn javascript and on gorails to try to learn some rails. I have 10+ text books and can't find the configuration for rails + javascript covered anywhere. I've been trying a this for 4+ years.</p>\n\n<p>So - please - if you know of a resource that sets out the rules for how to use javascript with a rails 5 app, please could you give me that reference. </p>\n\n<p>I know formulating questions in this way is against the rules of StackOverflow. I accept this post will likely be down voted. I'm asking because this is a last ditch desperate request for help. I cant go on for another year trying to learn something for which teaching is not available. I recall thinking in October 2012 that I could start a computer science degree to try to learn - but dismissing the idea on the basis that there are so many language driven guides that I stupidly thought I could use to learn. I cant get past step 1 because I can't solve the problem outlined in <a href=\"https://stackoverflow.com/questions/41082357/rails-figuring-out-the-javascript-config\">this post</a>.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482352192, "post_id": 41254299, "comment_id": 69743912, "body": "What if <code>Available_domains = [&quot;A&quot;, &quot;B&quot;, &quot;D&quot;]</code>?"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 4, "last_activity_date": 1482297575, "last_edit_date": 1482297575, "creation_date": 1482288252, "answer_id": 41254299, "question_id": 41254255, "link": "https://stackoverflow.com/questions/41254255/find-maximum-value-of-values-in-hash-where-key-value-in-array/41254299#41254299", "title": "Find maximum value of values in hash where key value in array", "body": "<p>A simple way is this:</p>\n\n<pre><code>AvailableDomains.map { |k| object[k.to_sym] }.max\n</code></pre>\n\n<p>Here's another way to do it:</p>\n\n<pre><code>object.with_indifferent_access.values_at(*AvailableDomains).max\n</code></pre>\n\n<p>If the array contained symbols, the with_indifferent_access would be unnecessary, but it's used here so that the Array's strings can match the hash's symbol keys. </p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1482352290, "post_id": 41254321, "comment_id": 69743976, "body": "I suggest you only give the &quot;In one line&quot; answer."}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": false, "score": 1, "last_activity_date": 1482288443, "creation_date": 1482288443, "answer_id": 41254321, "question_id": 41254255, "link": "https://stackoverflow.com/questions/41254255/find-maximum-value-of-values-in-hash-where-key-value-in-array/41254321#41254321", "title": "Find maximum value of values in hash where key value in array", "body": "<p>One possible way is to filter the object to just the keys that are in the array, then select the max from that: </p>\n\n<pre><code>options = object.select{ |key, value| Available_domains.include?(key.to_s)}\noptions.max_by{|key, value| value}\n</code></pre>\n\n<p>In one line: </p>\n\n<pre><code>object.select{ |key, value| Available_domains.include?(key.to_s)}.max_by{|key, value| value}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1482352559, "last_edit_date": 1482352559, "creation_date": 1482352154, "answer_id": 41271391, "question_id": 41254255, "link": "https://stackoverflow.com/questions/41254255/find-maximum-value-of-values-in-hash-where-key-value-in-array/41271391#41271391", "title": "Find maximum value of values in hash where key value in array", "body": "<pre><code>Available_domains = [\"A\", \"B\", \"D\"]\nobject = { A: 1, B: 2, C: 3 }\n\nobject.values_at(*Available_domains.map(&amp;:to_sym)).compact.max\n  #=&gt; 2\n</code></pre>\n\n<p>The steps:</p>\n\n<pre><code>a = Available_domains.map(&amp;:to_sym)\n  #=&gt; [:A, :B, :D] \nb = object.values_at(*a)\n  #=&gt; [1, 2, nil] \nc = b.compact\n  #=&gt; [1, 2] \nc.max\n  #=&gt; 2 \n</code></pre>\n\n<p>If</p>\n\n<pre><code>Available_domains = [\"D\", \"E\"]\n</code></pre>\n\n<p>then</p>\n\n<pre><code>object.values_at(*Available_domains.map(&amp;:to_sym)).compact.max.nil?\n  #=&gt; true \n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 3749989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/515934601/picture?type=large", "display_name": "joanx737", "link": "https://stackoverflow.com/users/3749989/joanx737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 41254299, "answer_count": 3, "score": 2, "last_activity_date": 1482352559, "creation_date": 1482287962, "question_id": 41254255, "link": "https://stackoverflow.com/questions/41254255/find-maximum-value-of-values-in-hash-where-key-value-in-array", "title": "Find maximum value of values in hash where key value in array", "body": "<p>I have a hash where I'm trying to find the maximum value of a key-value pair only but only if the key exists in an external array. </p>\n\n<p>E.g.</p>\n\n<pre><code>Available_domains = [\"A\", \"B\"]\n\nobject = {\nA: 1,\nB: 2,\nC: 3\n}\n</code></pre>\n\n<p>Should return 2, since I'm only computing for keys that are found in available_domains array. Wondering what the best way to do that is.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1482287916, "post_id": 41254203, "comment_id": 69709146, "body": "Did you Restart the server after bundle install ?"}, {"owner": {"reputation": 1685, "user_id": 1634595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/095d02d8209268182e9d77ba3ac2d512?s=128&d=identicon&r=PG", "display_name": "Clinton J", "link": "https://stackoverflow.com/users/1634595/clinton-j"}, "reply_to_user": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1482288020, "post_id": 41254203, "comment_id": 69709170, "body": "Yes, I did.  Several times"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1482288321, "post_id": 41254203, "comment_id": 69709244, "body": "If you inspect that page source do you see jquery getting loaded in in a script tag?"}, {"owner": {"reputation": 1685, "user_id": 1634595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/095d02d8209268182e9d77ba3ac2d512?s=128&d=identicon&r=PG", "display_name": "Clinton J", "link": "https://stackoverflow.com/users/1634595/clinton-j"}, "edited": false, "score": 0, "creation_date": 1482288475, "post_id": 41254203, "comment_id": 69709275, "body": "No, I do not see that."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1482288713, "post_id": 41254203, "comment_id": 69709324, "body": "Just to be clear it will be cached so it will look something like this: &quot;&lt;script src=&quot;/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488&zwnj;&#8203;fb6006d667e8b42e4c00&zwnj;&#8203;73393abee.js?body=1&quot; data-turbolinks-track=&quot;reload&quot;&gt;&lt;/script&gt;&quot; It *should be in a huge check of these at the top of the page."}, {"owner": {"reputation": 1685, "user_id": 1634595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/095d02d8209268182e9d77ba3ac2d512?s=128&d=identicon&r=PG", "display_name": "Clinton J", "link": "https://stackoverflow.com/users/1634595/clinton-j"}, "edited": false, "score": 0, "creation_date": 1482288873, "post_id": 41254203, "comment_id": 69709362, "body": "I got it.  It is not there."}, {"owner": {"reputation": 1685, "user_id": 1634595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/095d02d8209268182e9d77ba3ac2d512?s=128&d=identicon&r=PG", "display_name": "Clinton J", "link": "https://stackoverflow.com/users/1634595/clinton-j"}, "edited": false, "score": 0, "creation_date": 1482290860, "post_id": 41254203, "comment_id": 69709784, "body": "I made some changes.  Another layout file was overriding the application.html.erb.  Now there is a script tag with src=&quot;assets/application-abc...xyz.js&quot;, but I&#39;m still getting the same error."}], "answers": [{"comments": [{"owner": {"reputation": 1685, "user_id": 1634595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/095d02d8209268182e9d77ba3ac2d512?s=128&d=identicon&r=PG", "display_name": "Clinton J", "link": "https://stackoverflow.com/users/1634595/clinton-j"}, "edited": false, "score": 0, "creation_date": 1482334690, "post_id": 41256122, "comment_id": 69733798, "body": "I am having trouble understanding what you are trying to communicate, can you please edit your comment for clarification and/or proofreading?"}], "tags": [], "owner": {"reputation": 700, "user_id": 908957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPFXF.png?s=128&g=1", "display_name": "JohnPaul", "link": "https://stackoverflow.com/users/908957/johnpaul"}, "is_accepted": false, "score": 0, "last_activity_date": 1482379526, "last_edit_date": 1482379526, "creation_date": 1482300078, "answer_id": 41256122, "question_id": 41254203, "link": "https://stackoverflow.com/questions/41254203/jquery-not-loading-on-rails-server-is-not-defined/41256122#41256122", "title": "jquery not loading on rails server - &#39;$ is not defined&#39;", "body": "<p>javascript file load issue use below code i think helped you</p>\n\n<pre><code>&lt;%= javascript_include_tag \"application\", data-turbolinks-track'=&gt; true %&gt;\n</code></pre>\n\n<p>Switching back to</p>\n\n<pre><code>&lt;%= javascript_include_tag \"application\" %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 2510544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa68aee2e5361ae89e94479cf3dccb?s=128&d=identicon&r=PG", "display_name": "Pettrus Sherlock", "link": "https://stackoverflow.com/users/2510544/pettrus-sherlock"}, "is_accepted": true, "score": 1, "last_activity_date": 1482336905, "creation_date": 1482336905, "answer_id": 41267293, "question_id": 41254203, "link": "https://stackoverflow.com/questions/41254203/jquery-not-loading-on-rails-server-is-not-defined/41267293#41267293", "title": "jquery not loading on rails server - &#39;$ is not defined&#39;", "body": "<p>Try adding:\n&lt;%= javascript_include_tag 'application','jquery', 'data-turbolinks-track' <code>=&gt; true  %&gt;</code></p>\n\n<p>see if the jquery file is loading on your page.</p>\n\n<p>Also, the workaround you did is not hacky or bad by any means, actually for me i prefer to let <a href=\"http://gulpjs.com/\" rel=\"nofollow noreferrer\">gulp</a> take care of all my assets, the way ruby takes care of your assets is pretty slow and clunky, especially if you are trying to integrate something like angular with ui router, the same assets that i compile and mangle on gulp takes about 10s, on ruby takes more than 1 minute.</p>\n\n<p>One last thing have you heard of <a href=\"https://bower.io/\" rel=\"nofollow noreferrer\">bower</a>? It is an awesome package manager, it is pretty easy to add depencies to your application.</p>\n"}], "owner": {"reputation": 1685, "user_id": 1634595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/095d02d8209268182e9d77ba3ac2d512?s=128&d=identicon&r=PG", "display_name": "Clinton J", "link": "https://stackoverflow.com/users/1634595/clinton-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 41267293, "answer_count": 2, "score": 0, "last_activity_date": 1482379526, "creation_date": 1482287566, "last_edit_date": 1482335130, "question_id": 41254203, "link": "https://stackoverflow.com/questions/41254203/jquery-not-loading-on-rails-server-is-not-defined", "title": "jquery not loading on rails server - &#39;$ is not defined&#39;", "body": "<p>I have a rails app that is failing to load jQuery when called in some embedded JS within one of my views.  I've looked around and seen some common solutions, so I'll list what I've already done:</p>\n\n<p>jQuery is listed uncommented in my Gemfile:</p>\n\n<pre><code>gem 'jquery-rails'\n</code></pre>\n\n<p>jQuery is loaded in application.js:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>application.html.erb calls with the include tag:</p>\n\n<pre><code>&lt;%= javascript_include_tag 'application', 'data-turbolinks-track'=&gt; true %&gt;\n</code></pre>\n\n<p>I've also tried:</p>\n\n<pre><code>&lt;%= javascript_include_tag 'application' %&gt;\n</code></pre>\n\n<p>Where could this be going wrong?</p>\n\n<p>EDIT:</p>\n\n<p>I was able to get it working but it is a definite workaround and I'd like to figure out a more permanent solution.  Firstly I found that a coworker had set this server up a little differently and application.html.erb was being overridden by another layout, which did not contain the javascript_include_tag line in the head (or anywhere else in the file).  Despite adding that line of code in, the error persisted.  I saved jquery.min.js from the online API link (<a href=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\" rel=\"nofollow noreferrer\">https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js</a>) and placed it in the assets folder, then precompiled and added the following line to the head of the layout:</p>\n\n<pre><code>&lt;%= javascript_include_tag 'jquery.min', 'data-turbolinks-track'=&gt; true %&gt;\n</code></pre>\n\n<p>This finally resulted in the ajax call within my jQuery script successfully calling a script.  However, there are still two problems: first, as I said above, I'd like a more permanent and less hackish solution, and second, the success function from the ajax call is not working, despite it working correctly on my private testing server.  The code is the same between the two, so I know it is not a problem in the code, and I am almost certain it is connected to whatever the underlying problem that is messing with jQuery in general.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 0, "last_activity_date": 1482287303, "creation_date": 1482287303, "answer_id": 41254173, "question_id": 41254150, "link": "https://stackoverflow.com/questions/41254150/what-is-the-difference-between-capitalize-and-capitalizeor-map-map-et/41254173#41254173", "title": "what is the difference between .capitalize and .capitalize!(or .map &amp; .map!...etc.) and in ruby", "body": "<p>When a method has a <code>!</code> at the end in Ruby, it is commonly referred to as a bang-method.  The exclamation point indicates that the method is the dangerous version of another method. </p>\n\n<p>In this case, <code>capitalize!</code> will modify your string, while <code>capitalize</code> will return a new string object. Since you are later calling on your original objects (the strings in <code>a</code>), your code will only work with <code>capitalize!</code>.  To make the code work with <code>capitalize</code>, you would have to set that index of the array to the result of the method, e.g. <code>a[index] = x.capitalize</code></p>\n"}, {"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 0, "last_activity_date": 1482288072, "creation_date": 1482288072, "answer_id": 41254274, "question_id": 41254150, "link": "https://stackoverflow.com/questions/41254150/what-is-the-difference-between-capitalize-and-capitalizeor-map-map-et/41254274#41254274", "title": "what is the difference between .capitalize and .capitalize!(or .map &amp; .map!...etc.) and in ruby", "body": "<p>if you really want to learn I like to go to the source \nfor <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">map</a> for <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">map!</a>. the source would tell you what the difference is </p>\n\n<blockquote>\n  <p>map- Invokes the given block once for each element of self.</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>map! - Invokes the given block once for each element of self,\n  replacing the element with the value returned by the block.</p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 7323575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2eefccfa114d8356c037eff273defc?s=128&d=identicon&r=PG&f=1", "display_name": "zenny Torio", "link": "https://stackoverflow.com/users/7323575/zenny-torio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "closed_date": 1482295261, "accepted_answer_id": 41254173, "answer_count": 2, "score": 1, "last_activity_date": 1482288072, "creation_date": 1482287118, "question_id": 41254150, "link": "https://stackoverflow.com/questions/41254150/what-is-the-difference-between-capitalize-and-capitalizeor-map-map-et", "closed_reason": "Duplicate", "title": "what is the difference between .capitalize and .capitalize!(or .map &amp; .map!...etc.) and in ruby", "body": "<p>learning how to code with Ruby and was trying learn from test first.\nand I stumbled something funny.</p>\n\n<p>I was trying to capitalize every word but</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>title = 'stuart little'\r\na = title.split\r\n\r\na.each do |x|\r\nx.capitalize\r\nend\r\n\r\na.join(' ')</code></pre>\r\n</div>\r\n</div>\r\n\nThis one's result is 'stuart little'</p>\n\n<p>but if I add the ! in capitalize</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>title = 'stuart little'\r\na = title.split\r\n\r\na.each do |x|\r\nx.capitalize!\r\nend\r\n\r\na.join(' ')</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>it ends up with the result I want which is 'Stuart Little'</p>\n\n<p>just .capitalize should work shouldn't it? since I'm just capitalizing the words. and what makes .capitalize! work in this scenario?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "reply_to_user": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 0, "creation_date": 1482335444, "post_id": 41254194, "comment_id": 69734329, "body": "Thanks I just remove the.to_date from the second one"}], "tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 0, "last_activity_date": 1482335393, "last_edit_date": 1482335393, "creation_date": 1482287494, "answer_id": 41254194, "question_id": 41254055, "link": "https://stackoverflow.com/questions/41254055/how-to-day-fixed-my-date-issue/41254194#41254194", "title": "How .to_day fixed my date issue", "body": "<p>When you do </p>\n\n<p><code>50.days.ago.to_date.class</code> it returns #ActiveSupport::TimeWithZone</p>\n\n<p>but when you do </p>\n\n<p><code>50.days.ago.class</code> it returns #Date</p>\n\n<p>they feel the same but they are really different objects </p>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482335393, "creation_date": 1482286214, "question_id": 41254055, "link": "https://stackoverflow.com/questions/41254055/how-to-day-fixed-my-date-issue", "title": "How .to_day fixed my date issue", "body": "<p>We have a build that runs all the ruby files including unit_tests.\nBuild is configured at UTC time and our database inserts records based on CST timezone because config.time_zone property in <code>application.rb</code> is set to CST timezone.</p>\n\n<p>My unit tests had <code>start_date: 50.days.ago</code> and when i ran build it'll pass anytime during day before 7 PM. After 7 PM per build UTC time its next day. I mean if i start build at 7:10PM, build will show 12:10 AM and it'll fail.</p>\n\n<p>I changed <code>start_date: 50.days.ago.to_date</code> and it doesnt fail now. \nCan someone explain me why it worked using <code>to_date</code>? </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "edited": false, "score": 0, "creation_date": 1482284014, "post_id": 41253805, "comment_id": 69708231, "body": "This should do what you want: <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-combination\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html#method-i-combination</a>"}, {"owner": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "reply_to_user": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "edited": false, "score": 0, "creation_date": 1482284377, "post_id": 41253805, "comment_id": 69708307, "body": "@Rilcon42 I think that&#39;s a good method to consider, but you also have to consider that there can be repeated characters, which makes things a little bit more complicated"}, {"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "edited": false, "score": 0, "creation_date": 1482284652, "post_id": 41253805, "comment_id": 69708357, "body": "True, I didnt notice that he wants those. Maybe generate a combination then every possible permutation of that combination? God that would be memory intensive...."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "edited": false, "score": 1, "creation_date": 1482292259, "post_id": 41253805, "comment_id": 69710134, "body": "@Rilcon42 It doesn&#39;t have to be, unless you intend to store the array in-memory. The Ruby way would be to define an enumerator which emits values on demand, rather than storing them all in-memory. Ruby, in fact, already provides a function that returns this enumerator."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1482292410, "post_id": 41253805, "comment_id": 69710177, "body": "You said you want &quot;every combination...&quot;, but your example suggests you want every <i>repeated</i> combination or possibly every <i>repeated permutaton</i>. (Note the two answers posted so far interpreted the question differently.) Given <code>a = [1,2,3]</code>, and a size of 2, the combinations  (after being converted to strings) are <code>[&quot;12&quot;, &quot;13&quot;, &quot;23&quot;]</code>, the repeated combinations are <code>[&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;22&quot;, &quot;23&quot;, &quot;33&quot;]</code>, the permutations are <code>[&quot;12&quot;, &quot;13&quot;, &quot;21&quot;, &quot;23&quot;, &quot;31&quot;, &quot;32&quot;]</code> and the repeated permutations are <code>[&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;21&quot;, &quot;22&quot;, &quot;23&quot;, &quot;31&quot;, &quot;32&quot;, &quot;33&quot;]</code>. Please edit to clarify."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1482311296, "post_id": 41253805, "comment_id": 69718020, "body": "I think the OP clearly wants repeated permutations, even though he wrote combinations. Look at his code : <code>t</code> doesn&#39;t depend on <code>s</code>."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5245582, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ebj3FRx4HgU/AAAAAAAAAAI/AAAAAAAAAJY/NL6iGuaoIlA/photo.jpg?sz=128", "display_name": "Hunter Robertson", "link": "https://stackoverflow.com/users/5245582/hunter-robertson"}, "edited": false, "score": 0, "creation_date": 1483306542, "post_id": 41253887, "comment_id": 70043683, "body": "This works well, but is there a way to only compute permutations of a certain length? Ex. I already have permutations of length 1-6 but need through 8, can I only get those of length 7 and 8?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 57, "user_id": 5245582, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ebj3FRx4HgU/AAAAAAAAAAI/AAAAAAAAAJY/NL6iGuaoIlA/photo.jpg?sz=128", "display_name": "Hunter Robertson", "link": "https://stackoverflow.com/users/5245582/hunter-robertson"}, "edited": false, "score": 0, "creation_date": 1483405629, "post_id": 41253887, "comment_id": 70076197, "body": "@HunterRobertson: Instead of <code>length.times</code>, use <code>7.upto(8)</code>"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1482296735, "last_edit_date": 1482296735, "creation_date": 1482284716, "answer_id": 41253887, "question_id": 41253805, "link": "https://stackoverflow.com/questions/41253805/ruby-how-can-i-generate-an-array-of-every-combination-of-letters-and-numbers-o/41253887#41253887", "title": "ruby - How can I generate an array of every combination of letters and numbers of a given length?", "body": "<pre><code>alphanum = [*?a..?z, *?0..?9]\nlength.times.flat_map { |l|\n  alphanum.repeated_permutation(l + 1).map(&amp;:join)\n}\n</code></pre>\n\n<p>Note that <code>length &gt; 3</code> will give you a <em>lot</em> of results.</p>\n\n<p>EDIT: As meagar says, this is very memory-intensive. An Enumerator-based answer (not as pretty, but won't kill your memory):</p>\n\n<pre><code>e = Enumerator.new do |y|\n  length.times do |l|\n    alphanum.repeated_permutation(l + 1).each do |p|\n      y &lt;&lt; p.join\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1482291644, "post_id": 41253899, "comment_id": 69709985, "body": "The math doesn&#39;t seem to add up here. The size of each set should be <code>36^n</code>. It seems your solution is doing something funny and omitting some results that (at least in my reading of the question) should be included. For example, after <code>1z</code>, your solution loops to <code>22</code>, and the strings  <code>20</code> and <code>21</code> are missing. After <code>gg</code>, your solution jumps straight to <code>hh</code>, and the strings <code>h0..hg</code> are missing."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1482292035, "post_id": 41253899, "comment_id": 69710075, "body": "Sorry, <code>36^n</code> assums you only want results with a length of <code>n</code>. The correct set size should be (36^n) + (36^(n-1)) + (36^(n-2)) + ... + 36, which is still many more results than you&#39;re outputting. The correct number of terms for <code>N = 5</code> would be 62,193,780, not 749,397."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1482293440, "post_id": 41253899, "comment_id": 69710399, "body": "@meagar, you&#39;ll calculations are for permutations and repeated permutations. You&#39;ll see I&#39;m computing repeated combinations. See my comment on the question."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1482322896, "post_id": 41253899, "comment_id": 69725880, "body": "You&#39;re right, I assumed permutations are what they&#39;re after."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1482293785, "last_edit_date": 1482293785, "creation_date": 1482284762, "answer_id": 41253899, "question_id": 41253805, "link": "https://stackoverflow.com/questions/41253805/ruby-how-can-i-generate-an-array-of-every-combination-of-letters-and-numbers-o/41253899#41253899", "title": "ruby - How can I generate an array of every combination of letters and numbers of a given length?", "body": "<pre><code>def fixed_size_repeated_combos(n)\n  [*0..9, *'a'..'z'].repeated_combination(n).map(&amp;:join)\nend\n\ndef all_size_repeated_combos(n)\n  (1..n).flat_map { |i| fixed_size_repeated_combos(i) }\nend\n\nall_size_repeated_combos(2)\n  #=&gt; [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\",\n  #    \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\",\n  #    \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"00\", \"01\", \"02\", \"03\", \"04\",\n  #    \"05\", \"06\", \"07\", \"08\", \"09\", \"0a\", \"0b\", \"0c\", \"0d\", \"0e\", \"0f\",\n  #    ...\n  #    \"28\", \"29\", \"2a\", \"2b\", \"2c\", \"2d\", \"2e\", \"2f\", \"2g\", \"2h\", \"2i\",\n  #    ...\n  #    \"ww\", \"wx\", \"wy\", \"wz\", \"xx\", \"xy\", \"xz\", \"yy\", \"yz\", \"zz\"] \n\nall_size_repeated_combos(1).size #=&gt; 36 \nall_size_repeated_combos(2).size #=&gt; 702 \nall_size_repeated_combos(3).size #=&gt; 9138 \nall_size_repeated_combos(4).size #=&gt; 91389 \nall_size_repeated_combos(5).size #=&gt; 749397 \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-repeated_combination\" rel=\"nofollow noreferrer\">Array#repeated_combination</a>.</p>\n\n<p>For \"permuations\", rather than \"combinations\", find and replace \"combos\" with \"permbos\" and \"combination\" with \"permutation\".</p>\n"}], "owner": {"reputation": 57, "user_id": 5245582, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ebj3FRx4HgU/AAAAAAAAAAI/AAAAAAAAAJY/NL6iGuaoIlA/photo.jpg?sz=128", "display_name": "Hunter Robertson", "link": "https://stackoverflow.com/users/5245582/hunter-robertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "accepted_answer_id": 41253887, "answer_count": 2, "score": 2, "last_activity_date": 1482336892, "creation_date": 1482283791, "last_edit_date": 1482336892, "question_id": 41253805, "link": "https://stackoverflow.com/questions/41253805/ruby-how-can-i-generate-an-array-of-every-combination-of-letters-and-numbers-o", "title": "ruby - How can I generate an array of every combination of letters and numbers of a given length?", "body": "<p>I'm trying to create a script that generates an array that lists every repeated permutation of letters and numbers (and eventually symbols) of a certain length, supplied by the user. For example:</p>\n\n<pre><code>User input: 4\nOutput:\na\nb\n...\nzzzy\nzzzz\n</code></pre>\n\n<p>I've tried a variety of ways to accomplish this, and got the effects I was looking for with nested .each loops over an array containing a-z and 0-9.</p>\n\n<pre><code>alphanum.each do |s|\n  output &lt;&lt; s\n  alphanum.each do |t|\n    output &lt;&lt; s + t\n    alphanum.each do |r|\n      output &lt;&lt; s + t + r\n      alphanum.each do |i|\n        output &lt;&lt; s + t + r + i\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>However, this cannot be determined by an input and does not seem efficient or rubyesque to me. I tried various other combinations of loops, but none seem to work. One example:</p>\n\n<pre><code># User input\nputs \"Max length: \"\ninput = gets.chomp\nlength = input.to_i\n\n# Iterates over the array\nlength.times do\n  modded.each do |s|\n    alphanum.each do |t|\n      r = s + t\n      puts r # To test output\n      modded &lt;&lt; r\n    end\n  end\nend\n</code></pre>\n\n<p>This outputs things like <code>aaaaaaaaaaaaa1</code> and other nonsense with a length input of just 1 or 2. How can I accomplish this?</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 0, "creation_date": 1482283683, "post_id": 41253703, "comment_id": 69708148, "body": "could You check inspector panel in chrome and click on network tab to find requests that makes error? I think Your css file is not accessible public-ly to be retrieved by browser"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1482283740, "post_id": 41253703, "comment_id": 69708161, "body": "Do you get any erros in browser console or in your rails server?"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1482283814, "post_id": 41253703, "comment_id": 69708177, "body": "You have a random closing &lt;/div&gt; with no opening div under yield"}, {"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "reply_to_user": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1482283997, "post_id": 41253703, "comment_id": 69708224, "body": "@brad I was getting an error on application.html.erb file  so I had to change &#39;application&#39; to &#39;default&#39; and that fixed the error but unfortunately the css is not loading"}, {"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "reply_to_user": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 0, "creation_date": 1482284100, "post_id": 41253703, "comment_id": 69708248, "body": "@num8er I think you may be right I&#39;m getting a 404 status on the css, I think it&#39;s because I have it linking to &#39;default&#39; instead of &#39;application&#39; but I had to do this to get rails working on windows"}, {"owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 0, "creation_date": 1482284159, "post_id": 41253703, "comment_id": 69708258, "body": "@Carl I know it&#39;s stupid, but just copy that css to public folder and try to access it."}, {"owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 0, "creation_date": 1482284595, "post_id": 41253703, "comment_id": 69708348, "body": "@Carl revert it from <code>default</code> to <code>application</code> and use this code: <code>&lt;%= stylesheet_link_tag &quot;application&quot;, media: &quot;all&quot; %&gt;</code> (without <code>&#39;data-turbolinks-track&#39; =&gt; true</code>)  so, if it will work, it means that You&#39;ve error in Your css file that turbolinks cannot process or configuration of assets pipeline is wrong."}, {"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "reply_to_user": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 0, "creation_date": 1482285063, "post_id": 41253703, "comment_id": 69708461, "body": "@num8er Getting this error when I revert &#39;default&#39; to &#39;application&#39;   &quot;Showing C:/Users/carl/Desktop/leanRails/blog/app/views/layouts/appli&zwnj;&#8203;cation.html.erb where line #5 raised:&quot;"}, {"owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "edited": false, "score": 0, "creation_date": 1482285122, "post_id": 41253703, "comment_id": 69708479, "body": "so it means that it&#39;s trying to use turbolinks to watch Your css file, but because of first lines in Your css it&#39;s crashing to read first lines. please read my answer and try to check. and if it does not work, please put somewhere whole body of error."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482283527, "post_id": 41253755, "comment_id": 69708114, "body": "Hey, I added the opening body tag but still not working"}, {"owner": {"reputation": 471, "user_id": 3510489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c92874711894acba72c18012316a23a?s=128&d=identicon&r=PG", "display_name": "Duyet Nguyen", "link": "https://stackoverflow.com/users/3510489/duyet-nguyen"}, "reply_to_user": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482283875, "post_id": 41253755, "comment_id": 69708199, "body": "Ah, you are wrong at <code>&lt;%= stylesheet_link_tag    &#39;default&#39;</code>. I update my answer"}, {"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482284681, "post_id": 41253755, "comment_id": 69708361, "body": "I had to change to default becasue of an error, see <a href=\"http://stackoverflow.com/questions/28421547/rails-execjsprogramerror-in-pageshome\" title=\"rails execjsprogramerror in pageshome\">stackoverflow.com/questions/28421547/&hellip;</a>"}, {"owner": {"reputation": 471, "user_id": 3510489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c92874711894acba72c18012316a23a?s=128&d=identicon&r=PG", "display_name": "Duyet Nguyen", "link": "https://stackoverflow.com/users/3510489/duyet-nguyen"}, "reply_to_user": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482285014, "post_id": 41253755, "comment_id": 69708442, "body": "About the error above. I see many ways to resolved it without change <code>application</code> to <code>default</code>. Like <a href=\"http://stackoverflow.com/questions/28882182/rails-coffeescript-typeerror-object-doesnt-support-this-property-or-method\">this</a>. But I suggest you should develop rails on linux or mac or <a href=\"https://c9.io/\" rel=\"nofollow noreferrer\">c9io</a>"}, {"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482285528, "post_id": 41253755, "comment_id": 69708561, "body": "Yeah rails seems to have a lot of error on windows, I think I might use linux"}], "tags": [], "owner": {"reputation": 471, "user_id": 3510489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c92874711894acba72c18012316a23a?s=128&d=identicon&r=PG", "display_name": "Duyet Nguyen", "link": "https://stackoverflow.com/users/3510489/duyet-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1482283995, "last_edit_date": 1482283995, "creation_date": 1482283323, "answer_id": 41253755, "question_id": 41253703, "link": "https://stackoverflow.com/questions/41253703/css-not-loading-on-rails/41253755#41253755", "title": "css not loading on rails", "body": "<p>Your application.html.erb miss tag body. There is only close <code>&lt;/body&gt;</code> without open</p>\n\n<p>You are wrong at <code>stylesheet_link_tag    'default'</code> and <code>javascript_include_tag 'default'</code>. Change <code>default</code> to <code>application</code></p>\n\n<p>Sample:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Sample&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Btw, on your <code>body</code>, you have a close <code>div</code> without open</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482285365, "post_id": 41253910, "comment_id": 69708524, "body": "Unfortunely when I try this I get an ExecJS::ProgramError in Posts#index error"}, {"owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "reply_to_user": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "edited": false, "score": 0, "creation_date": 1482285420, "post_id": 41253910, "comment_id": 69708536, "body": "@Carl <code>ExecJS::ProgramError</code> ? can You screenshot or put somewhere full body of error?"}], "tags": [], "owner": {"reputation": 15778, "user_id": 3706693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c23cb4348804fbc993d70df4cab71fc?s=128&d=identicon&r=PG", "display_name": "num8er", "link": "https://stackoverflow.com/users/3706693/num8er"}, "is_accepted": false, "score": 0, "last_activity_date": 1482284849, "creation_date": 1482284849, "answer_id": 41253910, "question_id": 41253703, "link": "https://stackoverflow.com/questions/41253703/css-not-loading-on-rails/41253910#41253910", "title": "css not loading on rails", "body": "<p>I guess the problem with css that cannot be processed by turbolinks and makes rails crash.</p>\n\n<p>Replace: </p>\n\n<pre><code>*= require_tree .\n*= require_self\n</code></pre>\n\n<p>to: </p>\n\n<pre><code>/* ...\n*= require_self\n*= require_tree .\n*/\n</code></pre>\n\n<p>and revert:</p>\n\n<pre><code>&lt;%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5644421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa9d74096e8794847ef63d4bac24647?s=128&d=identicon&r=PG&f=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5644421/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482285598, "creation_date": 1482282859, "last_edit_date": 1482285598, "question_id": 41253703, "link": "https://stackoverflow.com/questions/41253703/css-not-loading-on-rails", "title": "css not loading on rails", "body": "<p>Hi guys new to rails and I'm playing around with it but I cannot get the CSS to load. I'm on windows</p>\n\n<p>This is my application.css file</p>\n\n<pre><code>*= require_tree .\n*= require_self\n\n\nbody {\n  background-color: blue;\n}\n</code></pre>\n\n<p>application.html.erb file</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Blog&lt;/title&gt;\n    &lt;%= stylesheet_link_tag    'default', media: 'all', 'data-turbolinks-track' =&gt;      true %&gt;\n    &lt;%= javascript_include_tag 'default', 'data-turbolinks-track' =&gt; true %&gt;\n    &lt;%= csrf_meta_tags %&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;%= yield %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1482297339, "last_edit_date": 1495541326, "creation_date": 1482288938, "answer_id": 41254384, "question_id": 41253430, "link": "https://stackoverflow.com/questions/41253430/how-to-write-efficient-active-record-queries/41254384#41254384", "title": "How to Write Efficient Active Record Queries", "body": "<p>Your hunches are correct. It's a good practice to chain ActiveRecord queries. </p>\n\n<p>Say your BlogPost table has a million rows. </p>\n\n<p>To then say <code>BlogPost.all</code> would be slow, but to say <code>BlogPost.all.limit(1)</code> would be fast. </p>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/Base/all/class\" rel=\"nofollow noreferrer\">all</a> and <a href=\"http://guides.rubyonrails.org/active_record_querying.html#limit-and-offset\" rel=\"nofollow noreferrer\">limit</a> are both part of ActiveRecord. The return values respond to Array methods but are not arrays. There are some exceptions to this. <a href=\"https://stackoverflow.com/questions/11161663/find-vs-find-by-vs-where\">find_by / find</a> return model instances, for example, but you can put them as the last query method in a chain. <a href=\"https://stackoverflow.com/questions/12176102/what-is-the-difference-between-pluck-and-collect-in-rails\">pluck</a> return a plain ruby array. </p>\n\n<p><code>BlogPost.all[1]</code> would be just as slow as <code>BlogPost.all</code>, because <a href=\"http://ruby-doc.org/core-1.9.3/Array.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">[ ]</a> is an array method, not ActiveRecord.</p>\n\n<p>When you chain together ActiveRecord methods, the query or queries are not executed until you convert the method to a array or attempt to read some of the data.</p>\n\n<p>So <code>query = BlogPost.all.order(id: :desc).reorder(id: :asc).limit(1)</code> has not actually loaded any data from the database. Also read into <a href=\"http://blog.arkency.com/2013/12/rails4-preloading/\" rel=\"nofollow noreferrer\">preloading data</a>)which can address slow <a href=\"https://www.sitepoint.com/silver-bullet-n1-problem/\" rel=\"nofollow noreferrer\">N+1</a> queries.  </p>\n\n<p>If you then said <code>query.to_a</code>, <code>query.reduce</code>, etc., then <a href=\"https://github.com/rails/arel\" rel=\"nofollow noreferrer\">Arel</a> (what ActiveRecord is built on), finalizes the query and executes it. </p>\n\n<p>You can call <code>&lt;query&gt;.to_sql</code> to see the underlying query:</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\nend\n\nFoo.all.to_sql\n#=&gt; \"SELECT \\\"foos\\\".* FROM \\\"foos\\\"\"\nFoo.all.limit(1).to_sql\n#=&gt; \"SELECT  \\\"foos\\\".* FROM \\\"foos\\\" LIMIT 1\"\n</code></pre>\n"}], "owner": {"reputation": 2035, "user_id": 3052484, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pNGYL.jpg?s=128&g=1", "display_name": "Christian Juth", "link": "https://stackoverflow.com/users/3052484/christian-juth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 41254384, "answer_count": 1, "score": 0, "last_activity_date": 1482297339, "creation_date": 1482280656, "last_edit_date": 1482295153, "question_id": 41253430, "link": "https://stackoverflow.com/questions/41253430/how-to-write-efficient-active-record-queries", "title": "How to Write Efficient Active Record Queries", "body": "<p>I am relatively new to ActiveRecord, which I use alongside Sinatra. Currently, I am building small scale websites. I have not run into any issues with queries taking too long, but I want to know how to optimize searches best, so my site is scalable. </p>\n\n<p>This is something I have been wondering for awhile. Does ActiveRecord treat a query that is broken down into multiple functions different from one that is just one function?</p>\n\n<pre><code># Single\nBlogPost.last(5)\n\n# Broken Down\nBlogPost.all.limit(5)\n</code></pre>\n\n<p>This is more of a conceptual question: how does ActiveRecord run searches? Do more functions added make searches less efficient? When you have a query that is broken down into multiple functions <code>BlogPost.where(publish: true)</code> - let's say the <code>where(publish: true)</code> returns fifty results and the <code>limit</code> limits it to five. Does it first find all fifty <code>publish: true</code> and then cut off everything after five, or is it smart enough to stop the search after it finds the first five? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rubygems"], "comments": [{"owner": {"reputation": 339, "user_id": 3666372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca62a5c4f74a0c91a79f10e613c1c9b3?s=128&d=identicon&r=PG&f=1", "display_name": "anyarms", "link": "https://stackoverflow.com/users/3666372/anyarms"}, "edited": false, "score": 1, "creation_date": 1482283872, "post_id": 41253411, "comment_id": 69708196, "body": "Just checking: you ran <code>bundle install</code> on your development server and everything looked OK?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5494880"}, "reply_to_user": {"reputation": 339, "user_id": 3666372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca62a5c4f74a0c91a79f10e613c1c9b3?s=128&d=identicon&r=PG&f=1", "display_name": "anyarms", "link": "https://stackoverflow.com/users/3666372/anyarms"}, "edited": false, "score": 0, "creation_date": 1482341314, "post_id": 41253411, "comment_id": 69737901, "body": "Yep, I did that and had no issues."}], "owner": {"user_type": "does_not_exist", "display_name": "user5494880"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482280488, "creation_date": 1482280488, "question_id": 41253411, "link": "https://stackoverflow.com/questions/41253411/unable-to-autoload-constant-devisecassessionscontroller", "title": "Unable to autoload constant Devise::CasSessionsController", "body": "<p>I have a rails project that works locally but when I put it on my development server I get the following error:</p>\n\n<pre><code>Unable to autoload constant Devise::CasSessionsController, expected /usr/local/rvm/gems/ruby-2.3.1/gems/devise_cas_authenticatable-1.9.2/app/controllers/devise/cas_sessions_controller.rb to define it\n</code></pre>\n\n<p>additionally it says:</p>\n\n<p>Extracted source (around line #512):   </p>\n\n<pre><code>else\n      require_or_load(expanded, qualified_name)\n      raise LoadError, \"Unable to autoload constant #{qualified_name}, expected #{file_path} to define it\" unless from_mod.const_defined?(const_name, false)\n      return from_mod.const_get(const_name)\nend\nelsif mod = autoload_module!(from_mod, const_name, qualified_name, path_suffix)\n</code></pre>\n\n<p>Line 512 is:</p>\n\n<pre><code>  raise LoadError, \"Unable to autoload constant #{qualified_name}, expected #{file_path} to define it\" unless from_mod.const_defined?(const_name, false)\n</code></pre>\n\n<p>No idea what to do. This happens when trying to sign in.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "edited": false, "score": 0, "creation_date": 1482423084, "post_id": 41253717, "comment_id": 69776750, "body": "Nice, thanks Andre. But how can I manage it in my view. My view is a form for new teacher and I need to add rooms and lesson_hours in the same form. By now I have only lesson_hours."}], "tags": [], "owner": {"reputation": 66, "user_id": 5568034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33dc883a286d47a21cc163c9d362b1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Torres", "link": "https://stackoverflow.com/users/5568034/andre-torres"}, "is_accepted": true, "score": 2, "last_activity_date": 1482282972, "creation_date": 1482282972, "answer_id": 41253717, "question_id": 41253392, "link": "https://stackoverflow.com/questions/41253392/two-has-many-relationship-through-same-model/41253717#41253717", "title": "Two has_many relationship through same model", "body": "<p>When you need to add two has_many you need to specify the foreign_key and class_name so rails can do the joins. </p>\n\n<p>Example:</p>\n\n<pre><code>class TwoHasMany &lt; ApplicationRecord\n  has_many :scheduled_teachers, foreign_key: :teacher_id, class_name: 'Schedule'\n  has_many :teachers, through: :scheduled_teachers\n\n  has_many :scheduled_lessons, foreign_key: :lesson_hour_id, class_name: 'Schedule'\n  has_many :lesson_hours, through: :scheduled_lessons\nend\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 41253717, "answer_count": 1, "score": 0, "last_activity_date": 1482282972, "creation_date": 1482280344, "question_id": 41253392, "link": "https://stackoverflow.com/questions/41253392/two-has-many-relationship-through-same-model", "title": "Two has_many relationship through same model", "body": "<p>I'm facing a problem that I'm not figuring out how to solve it.</p>\n\n<p>I have three models</p>\n\n<ul>\n<li>Teacher </li>\n<li>Rooms</li>\n<li>Hours</li>\n</ul>\n\n<p>I need to associate them through the same model. By now I have a 4th model called schedules which I have two foreign keys. teacher_id and hour_id, which is working perfectly, but I also need to associate rooms through this model.</p>\n\n<p>Here is my code:</p>\n\n<p><strong>teacher.rb</strong></p>\n\n<pre><code>class Teacher &lt; ApplicationRecord\n  scope :active, -&gt; {where(deleted_at: nil)}\n  has_many :schedules, dependent: :destroy\n  has_many :lesson_hours, through: :schedules\n  has_many :teacher_courses, dependent: :destroy\n  has_many :courses, through: :teacher_courses\n  has_many :registrations\n\n  def check_associations\n    errors.add(:base, \"H\u00e1 matr\u00edculas cadastradas com esse professor. Por favor ajuste antes de deletar.\") if self.registrations.active.count &gt; 0\n    return errors.blank?\n  end\n\n  def delete!\n    if check_associations\n      self.deleted_at = Time.current\n      save!\n      return true\n    else\n      return false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>room.rb</strong></p>\n\n<pre><code>class Room &lt; ApplicationRecord\n  scope :active, -&gt; {where(deleted_at: nil)}\n  has_many :room_courses, dependent: :destroy\n  has_many :courses, through: :room_courses\n  has_many :registrations\n\n  def check_associations\n    errors.add(:base, \"H\u00e1 matr\u00edculas cadastradas com essa sala. Por favor ajuste antes de deletar.\") if self.registrations.active.count &gt; 0\n    return errors.blank?\n  end\n\n  def delete!\n    if check_associations\n      self.deleted_at = Time.current\n      save!\n      return true\n    else\n      return false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>lesson_hour.rb</strong></p>\n\n<pre><code>class LessonHour &lt; ApplicationRecord\n  scope :active, -&gt; {where(deleted_at: nil)}\n  has_many :schedules, dependent: :destroy\n  has_many :teachers, through: :schedules\n  has_many :registrations\n\n  def check_associations\n    errors.add(:base, \"H\u00e1 matr\u00edculas cadastradas nesse hor\u00e1rio. Por favor ajuste antes de deletar.\") if self.registrations.active.count &gt; 0\n    return errors.blank?\n  end\n\n  def delete!\n    if check_associations\n      self.deleted_at = Time.current\n      save!\n      return true\n    else\n      return false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>schedule.rb</strong></p>\n\n<pre><code>class Schedule &lt; ApplicationRecord\n  belongs_to :teacher\n  belongs_to :lesson_hour\nend\n</code></pre>\n\n<p>All these associations are being constructed through a form in TeachersController</p>\n\n<p><strong>teachers_controller.rb</strong></p>\n\n<pre><code>def set_lesson_days_and_hours\n    @lesson_days = LessonHour.select(:weekday)\n                             .group(:weekday)\n                             .order(:weekday)\n                             .to_a\n    @lesson_hours = {}\n    @lesson_days.each do |ld|\n      @lesson_hours[ld.weekday] = LessonHour.active\n                                            .select(:id, :start_time)\n                                            .order(:start_time)\n                                            .where(weekday: ld.weekday)\n    end\n  end\n\n  def teacher_params\n    params\n      .require(:teacher)\n      .permit(:name, :address, :address_number, :address_complement,\n              :address_cep, :address_neighborhood, :city, :state, :birthdate,\n              :email, :cpf, :rg, :phone, :mobile, :started_date, :bank, :agency,\n              :account_number, :gender, lesson_hour_ids: [], course_ids: [])\n  end\n</code></pre>\n\n<p>And the form to link lesson_hour to teacher is the following:</p>\n\n<pre><code>&lt;div class=\"row teacher-schedule\"&gt;\n    &lt;h4&gt;Disponibilidade&lt;/h4&gt;\n\n    &lt;% @lesson_days.each do |ld| %&gt;\n    &lt;div class=\"col-md-2 one-per-line teacher-schedule\"&gt;\n      &lt;span&gt;&lt;strong&gt;&lt;%= t(:\"date.day_names\")[ld.weekday] %&gt;&lt;/strong&gt;&lt;/span&gt;\n      &lt;%= f.collection_check_boxes(:lesson_hour_ids, @lesson_hours[ld.weekday], :id, :start_time) do |check_box| %&gt;\n      &lt;%= check_box.label class:\"label-checkbox\" do %&gt;\n      &lt;%= check_box.check_box + check_box.text.strftime(\"%H:%M\") %&gt;\n      &lt;% end %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>So, my question is, how can I include room association in schedule model?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1482278784, "post_id": 41253138, "comment_id": 69706925, "body": "Your question is about passing parameters between actions in Rails, not about symbols in Ruby (which is straightforward). How do you think about clarifying the title and intent? It would help getting the best help..."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1482278899, "post_id": 41253138, "comment_id": 69706957, "body": "The <code>redirect_to</code> syntax may be the issue. You may need the <code>:action</code> key? As in: <code>redirect_to :action =&gt; :m2, :id =&gt; 5</code>."}, {"owner": {"reputation": 441, "user_id": 7323296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbt6x.png?s=128&g=1", "display_name": "Tibberzz", "link": "https://stackoverflow.com/users/7323296/tibberzz"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1482279634, "post_id": 41253138, "comment_id": 69707163, "body": "Thanks, that was it, it worked! Also, thanks for helping clarify my question!"}], "owner": {"reputation": 441, "user_id": 7323296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbt6x.png?s=128&g=1", "display_name": "Tibberzz", "link": "https://stackoverflow.com/users/7323296/tibberzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1482279252, "answer_count": 0, "score": 1, "last_activity_date": 1482278358, "creation_date": 1482278358, "question_id": 41253138, "link": "https://stackoverflow.com/questions/41253138/pass-a-symbol-between-methods-in-ruby", "closed_reason": "Duplicate", "title": "Pass a Symbol Between Methods in Ruby", "body": "<p>I'm trying to use the value of a symbol in another method that I'm redirecting to. It seems as if I can't access :customer_id from method_2. I'd like to be able to access the value of :customer_id that is set in method_1 from method_2.</p>\n\n<pre><code>def method_1\n  user = User.find_by(:uid =&gt; params[:userid]) # this works\n  redirect_to :m2, :customer_id =&gt; user.cust_id\nend\n\ndef method_2\n  @cid = params[:customer_id]\n\n  # these don't print the value of customer_id\n  Rails.logger.info(\"Customer ID: #{@cid}\")\n  Rails.logger.info(\"Customer ID: #{params[:customer_id]}\")\nend\n\n# this is the line I have in routes.rb\nget 'demo/method_2' =&gt; 'demo#method_2', :as =&gt; :m2\n</code></pre>\n"}, {"tags": ["ruby", "string", "hash", "gsub"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482278542, "post_id": 41253133, "comment_id": 69706862, "body": "<code>each_key</code> returns the hash. What does <code>@@parsed_items</code> return after applying your code?"}, {"owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482278922, "post_id": 41253133, "comment_id": 69706969, "body": "{          &quot;VoLTE QCI1 Setup Failure%&quot; =&gt; &quot;.239&quot;,          &quot;VoLTE QCI1 Setup Failures&quot; =&gt; &quot;15&quot;,          &quot;VoLTE QCI1 Setup Attempts&quot; =&gt; &quot;6274&quot;,                &quot;QCI5 Setup Failure%&quot; =&gt; &quot;.065&quot;,      }"}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1482279563, "post_id": 41253282, "comment_id": 69707145, "body": "Or <code>@@parsed_items.map { ... }.to_h</code>."}, {"owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "edited": false, "score": 0, "creation_date": 1482279979, "post_id": 41253282, "comment_id": 69707255, "body": "Thanks. I re-Key&#39;d my hash like @tadman suggested and it worked. Interesting!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1482282987, "post_id": 41253282, "comment_id": 69708007, "body": "@muistooshort That works in Ruby 2.0+, it&#39;s true. I really should use that by default."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1482279422, "creation_date": 1482279422, "answer_id": 41253282, "question_id": 41253133, "link": "https://stackoverflow.com/questions/41253133/replace-space-with-underscore-in-keys-for-a-hash/41253282#41253282", "title": "replace space with underscore in Keys for a Hash", "body": "<p>If you want to re-key your whole hash, you might have to rebuild it:</p>\n\n<pre><code>@@parsed_items = Hash[\n @@parsed_items.map do |key, value|\n   [ key.gsub(/\\s/,'_'), value ]\n end\n]\n</code></pre>\n\n<p>The <code>each_key</code> method ignores whatever your block returns, it just throws it out, so no alterations are made to the hash itself.</p>\n\n<p>You could also write a helper method to de-underscore arbitrary hashes that does this as well.</p>\n\n<p>Note that using <code>@@</code> class-level variables is often a sign of mixed concerns. Instance methods should not be poking around in class data, it's supposed to be considered private. If you do need access to it, expose class-level methods that give you a clean interface.</p>\n"}], "owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 41253282, "answer_count": 1, "score": 0, "last_activity_date": 1482279422, "creation_date": 1482278329, "question_id": 41253133, "link": "https://stackoverflow.com/questions/41253133/replace-space-with-underscore-in-keys-for-a-hash", "title": "replace space with underscore in Keys for a Hash", "body": "<p>I have a hash in which Keys have some spaces like shown below. I want to replace the space with underscores. I don't know why but the program below isn't working. </p>\n\n<p>Keys:\n\"VoLTE QCI1 Setup Failure%\"\n\"VoLTE QCI1 Setup Failures\"\n\"VoLTE QCI1 Setup Attempts\"</p>\n\n<pre><code>@@parsed_items.each_key {|key|\nkey.gsub(/\\s/,'_')\nap key\n    }\n</code></pre>\n\n<p><strong>Expected Output:</strong>\n\"VoLTE_QCI1_Setup_Failure%\"\n\"VoLTE_QCI1_Setup_Failures\"\n\"VoLTE_QCI1_Setup_Attempts\"</p>\n\n<p><strong>Current Output:</strong> \n\"VoLTE QCI1 Setup Failure%\"\n\"VoLTE QCI1 Setup Failures\"\n\"VoLTE QCI1 Setup Attempts\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "edited": false, "score": 0, "creation_date": 1482276949, "post_id": 41252724, "comment_id": 69706433, "body": "I have; still the same result."}, {"owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "edited": false, "score": 0, "creation_date": 1482277012, "post_id": 41252724, "comment_id": 69706452, "body": "I have; still the same result. I think there&#39;s problem with the <code>@post = Post.find(params[:post_id] || params[:id])</code>"}, {"owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "edited": false, "score": 0, "creation_date": 1482277027, "post_id": 41252724, "comment_id": 69706456, "body": "but i don&#39;t knwo enough on how to fix it"}], "tags": [], "owner": {"reputation": 56, "user_id": 7320797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06z01.jpg?s=128&g=1", "display_name": "Matija Munjakovic", "link": "https://stackoverflow.com/users/7320797/matija-munjakovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1482275770, "creation_date": 1482275770, "answer_id": 41252724, "question_id": 41252631, "link": "https://stackoverflow.com/questions/41252631/rails-favorite-posts-couldnt-find-post-with-an-id/41252724#41252724", "title": "Rails Favorite_posts: &quot;Couldn&#39;t find Post with an ID&quot;", "body": "<p>Have you tried passing @post.id instead of @post to your url,</p>\n\n<pre><code>favorite_posts_path(id: @post.id)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "is_accepted": true, "score": 0, "last_activity_date": 1482357041, "creation_date": 1482357041, "answer_id": 41272481, "question_id": 41252631, "link": "https://stackoverflow.com/questions/41252631/rails-favorite-posts-couldnt-find-post-with-an-id/41272481#41272481", "title": "Rails Favorite_posts: &quot;Couldn&#39;t find Post with an ID&quot;", "body": "<p>FIXED: I had refactored out this form from a _post partial item, and it worked fine when I  put it back in. I think the back end was only set up for that one controller, and I  don't care enough to refactor it out properly</p>\n"}], "owner": {"reputation": 27, "user_id": 6829618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/179c93901521b645de0cbacab8047f18?s=128&d=identicon&r=PG&f=1", "display_name": "ETSchmidt", "link": "https://stackoverflow.com/users/6829618/etschmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 41272481, "answer_count": 2, "score": 0, "last_activity_date": 1482357041, "creation_date": 1482275234, "last_edit_date": 1482277139, "question_id": 41252631, "link": "https://stackoverflow.com/questions/41252631/rails-favorite-posts-couldnt-find-post-with-an-id", "title": "Rails Favorite_posts: &quot;Couldn&#39;t find Post with an ID&quot;", "body": "<p>BLUF: Trying to make a Favorite_posts feature; I can verify that it works by manually setting the ActiveRecord in the Rails console, </p>\n\n<p>But the links I made give the error: <strong>\"Couldn't find Post without an ID\"</strong></p>\n\n<p>The Form:</p>\n\n<pre><code>&lt;% if logged_in? %&gt;\n  &lt;% unless current_user.favorite_posts.exists?(id: @post.id) %&gt;\n    &lt;%= link_to favorite_posts_path(post_id: @post), method: :post do %&gt;\n      &lt;span class=\"glyphicon glyphicon-star-empty\"&gt;&lt;/span&gt;\n    &lt;% end %&gt;\n  &lt;% else %&gt;\n    &lt;%= link_to favorite_post_path(@post), method: :delete do %&gt;\n      &lt;span class=\"glyphicon glyphicon-star\"&gt;&lt;/span&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The Controller:</p>\n\n<pre><code>class FavoritePostsController &lt; ApplicationController\n    before_action :logged_in_user, :set_post\n\n  def create\n    Favorite.create(favorited: @post, user: current_user)\n    respond_to do |format|\n      format.html\n      format.js\n    end\n  end\n\n  def destroy\n    Favorite.where(favorited_id: @post.id, user_id: current_user.id).first.destroy\n    respond_to do |format|\n      format.html { redirect_to @user }\n      format.js\n    end\n  end\n\n  private\n\n  def set_post\n      @post = Post.find(params[:post_id] || params[:id])\n  end\n\nend\n</code></pre>\n\n<p>The Models:</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n\n  belongs_to :user\n\nclass Favorite &lt; ApplicationRecord\n  belongs_to :favorited, polymorphic: true\n  belongs_to :user\nend\n\nclass User &lt; ApplicationRecord\n\n    extend FriendlyId\n    friendly_id :name\n\n    has_many :posts, dependent: :destroy\n    has_many :favorites\n    has_many :favorite_posts, through: :favorites, source: :favorited, source_type: 'Post'\n</code></pre>\n\n<p>The Routes:</p>\n\n<pre><code>  resources :users do\n    collection do\n      match 'search' =&gt; 'users#index_gyms', via: [:get, :post], as: :search\n    end\n\n    member do\n      get :following, :followers\n      get :favorite_posts\n    end\n  end\n\n  resources :favorite_posts,      only: [:create, :destroy]\n</code></pre>\n"}, {"tags": ["ruby", "jpeg", "dicom", "rmagick", "libjpeg"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1482271606, "post_id": 41251628, "comment_id": 69704622, "body": "Is your image valid? Did you try it with other tools? Does <code>file export1.dcm</code> correctly identify it as the right type?"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1482274124, "creation_date": 1482274124, "answer_id": 41252438, "question_id": 41251628, "link": "https://stackoverflow.com/questions/41251628/warn-dicom-decompressing-pixel-values-has-failed/41252438#41252438", "title": "WARN -- DICOM: Decompressing pixel values has failed", "body": "<p>The image inside your DICOM file is compressed. It is a lossless JPEG (that's what <code>1.2.840.10008.1.2.4.70</code> stands for). See <a href=\"http://www.dicomlibrary.com/dicom/transfer-syntax/\" rel=\"nofollow noreferrer\">here</a> for more information.</p>\n\n<p>The header is here and can be read by the dicom gem, but the image needs to be converted first.</p>\n\n<p>You can use <a href=\"http://support.dcmtk.org/docs/dcmdjpeg.html\" rel=\"nofollow noreferrer\"><code>dcmdjpeg</code></a> first on <code>export1.dcm</code> : </p>\n\n<pre><code>dcmdjpeg export1.dcm export1_uncompressed.dcm\n</code></pre>\n\n<p>and run your script with <code>export1_uncompressed.dcm</code>.</p>\n"}], "owner": {"reputation": 106, "user_id": 6942360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0cb487351140e18e2d0c7075b973d2?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan", "link": "https://stackoverflow.com/users/6942360/ethan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1482274124, "creation_date": 1482269765, "question_id": 41251628, "link": "https://stackoverflow.com/questions/41251628/warn-dicom-decompressing-pixel-values-has-failed", "title": "WARN -- DICOM: Decompressing pixel values has failed", "body": "<p>This is my code in Ruby: </p>\n\n<pre><code>require 'RMagick'\nrequire 'dicom'\ninclude Magick\ninclude DICOM\n\ndcm = DObject.read(\"export1.dcm\")\ndcm_image = dcm.image;\n\ndcm_image.normalize.write(\"export1.jpg\")\nexit\n</code></pre>\n\n<p>When I run this,</p>\n\n<p>dcm_image = dcm.image gives me an warning/error:</p>\n\n<pre><code>WARN -- DICOM: Decompressing pixel values has failed (unsupported transfer syntax: '1.2.840.10008.1.2.4.70' - JPEG Lossless, Non-Hierarchical, First-Order Prediction (Process 14 [Selection Value 1]): Default Transfer Syntax for Lossless JPEG Image Compression)\n</code></pre>\n\n<p>I find that it is reading the DICOM just fine. I can extract patient information. But I can't figure out how to pull the DICOM image out and make it a jpg.</p>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "css"], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "is_accepted": false, "score": 0, "last_activity_date": 1482270973, "last_edit_date": 1495541822, "creation_date": 1482270973, "answer_id": 41251890, "question_id": 41251556, "link": "https://stackoverflow.com/questions/41251556/how-do-i-delete-the-white-background-of-a-table-foundation-rails/41251890#41251890", "title": "How do I delete the white background of a table? Foundation Rails", "body": "<p>It seems ok to me. Perhaps there is some other rules that are overriding your <code>.tabla</code> css. You may try to add an <code>!important</code> and see if that fixes it:</p>\n\n<pre><code>.tabla {\n  width:80%;\n  height: 80%;\n  background-color: transparent !important;\n}\n</code></pre>\n\n<p>Otherwise, the color may come with the <code>td</code> or <code>tr</code> instead from the <code>table</code>. In that case, add the following rule:</p>\n\n<pre><code>.tabla tr, .tabla td {\n  background-color: transparent;\n}\n</code></pre>\n\n<p>Note that using <code>!important</code> is usually a <a href=\"https://stackoverflow.com/questions/3706819/what-are-the-implications-of-using-important-in-css\">bad practice</a>. Try to search and clean your css code instead of using that clause.</p>\n\n<p>Also, the <code>border</code> attribute of tables is <a href=\"http://www.w3schools.com/tags/att_table_border.asp\" rel=\"nofollow noreferrer\">deprecated now</a>. You should use <code>border</code> <a href=\"http://www.w3schools.com/css/css_border.asp\" rel=\"nofollow noreferrer\">css property</a> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 287, "user_id": 6273112, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1049654298413829/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/6273112/david"}, "edited": false, "score": 0, "creation_date": 1482271617, "post_id": 41251953, "comment_id": 69704629, "body": "yes, the code it works, but is necessary add !important"}], "tags": [], "owner": {"reputation": 39, "user_id": 6261021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j3ONF.jpg?s=128&g=1", "display_name": "Kasper Hesthaven", "link": "https://stackoverflow.com/users/6261021/kasper-hesthaven"}, "is_accepted": true, "score": 0, "last_activity_date": 1482271328, "creation_date": 1482271328, "answer_id": 41251953, "question_id": 41251556, "link": "https://stackoverflow.com/questions/41251556/how-do-i-delete-the-white-background-of-a-table-foundation-rails/41251953#41251953", "title": "How do I delete the white background of a table? Foundation Rails", "body": "<p>By default Foundation sets the background color using the selectors: <code>table thead, table tbody, table tfoot</code> and <code>table tbody tr:nth-child(even)</code> for every other row.</p>\n\n<p><a href=\"https://github.com/zurb/foundation-rails/blob/master/vendor/assets/scss/components/_table.scss\" rel=\"nofollow noreferrer\">https://github.com/zurb/foundation-rails/blob/master/vendor/assets/scss/components/_table.scss</a></p>\n\n<hr>\n\n<p>The following CSS should set all rows to have a transparent background color:</p>\n\n<pre><code>table tbody tr:nth-child(even), table tbody {\n    background-color:transparent;\n}\n</code></pre>\n"}], "owner": {"reputation": 287, "user_id": 6273112, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1049654298413829/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/6273112/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 41251953, "answer_count": 2, "score": 0, "last_activity_date": 1482271328, "creation_date": 1482269400, "question_id": 41251556, "link": "https://stackoverflow.com/questions/41251556/how-do-i-delete-the-white-background-of-a-table-foundation-rails", "title": "How do I delete the white background of a table? Foundation Rails", "body": "<p>My problem is that I added foundation rails to my project that is created in ruby \u200b\u200bon rails and I wanted to create a small table, but this table when I create creates a white background, what I want to do is make my table transparent without Background of no color.</p>\n\n<p>I tried to put a class and assigning properties but it does not work, also add the style directly, delete the cookies just in case but still does not change color, only resize.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jIlLX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jIlLX.png\" alt=\"enter image description here\"></a></p>\n\n<p>file .css</p>\n\n<pre><code>.tabla {\n    width:80%;\n    height: 80%;\n    background-color:transparent;\n}\n</code></pre>\n\n<p>file .html.erb</p>\n\n<pre><code>&lt;table border=\"2\"  class=\"tabla\"&gt;\n  &lt;tr&gt;\n    &lt;td&gt;Film Affinity&lt;/td&gt;\n    &lt;td&gt;&lt;%= image_tag \"film_affinity.png\",:class=&gt;\"imagenPie\"%&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;IMDB&lt;/td&gt;\n    &lt;td&gt;&lt;%= image_tag \"imdb.png\",:class=&gt;\"imagenPie\"%&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n    &lt;tr&gt;\n    &lt;td&gt;Sensa Cine&lt;/td&gt;\n    &lt;td&gt;&lt;%= image_tag \"sensacine.png\",:class=&gt;\"imagenPie\"%&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri", "github-pages", "middleman", "padrino"], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 4694817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56bqT.jpg?s=128&g=1", "display_name": "Alyss", "link": "https://stackoverflow.com/users/4694817/alyss"}, "edited": false, "score": 0, "creation_date": 1482552753, "post_id": 41307157, "comment_id": 69823782, "body": "It looks like I may have to play around with that to define it for middleman based on the error I&#39;m getting. Thanks for giving me something to try! I&#39;ll keep playing with this  <code>NameError: undefined local variable or method `full_content&#39; for #&lt;#&lt;Class:0x007fdd621f2650&gt;:0x007fdd61e97190&gt; \tlayouts&#47;apitwocolumn.erb:92:in `block in singleton class&#39; \tlayouts&#47;apitwocolumn.erb:-7:in `instance_eval&#39; \tlayouts&#47;apitwocolumn.erb:-7:in `singleton class&#39; \tlayouts&#47;apitwocolumn.erb:-9:in `__tilt_70294461913540&#39;</code>"}, {"owner": {"reputation": 1838, "user_id": 4694817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56bqT.jpg?s=128&g=1", "display_name": "Alyss", "link": "https://stackoverflow.com/users/4694817/alyss"}, "edited": false, "score": 0, "creation_date": 1488230075, "post_id": 41307157, "comment_id": 72130971, "body": "This was actually really close the end solution! I wish I had worked on the code a little longer."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1482651050, "last_edit_date": 1482651050, "creation_date": 1482522747, "answer_id": 41307157, "question_id": 41250690, "link": "https://stackoverflow.com/questions/41250690/using-nokogiri-to-generate-static-header-list-in-slate-middleman/41307157#41307157", "title": "Using Nokogiri to generate static header list in Slate/Middleman", "body": "<p>Not familiar with that framework but looks like <code>toc_data(page_content)</code> only looks at the main content but not at the <code>current_page.data.includes</code> partials.</p>\n\n<p>So guess you need to pass the partial to your <code>toc_data</code> function as well. </p>\n\n<p>Maybe this works? </p>\n\n<pre><code>&lt;%\n  full_content = page_content\n  current_page.data.includes &amp;&amp; current_page.data.includes.each do |include|  \n    full_content += partial(\"includes/#{include}\")\n  end \n  toc_data(full_content).each do |h1| \n%&gt;\n  ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 4694817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56bqT.jpg?s=128&g=1", "display_name": "Alyss", "link": "https://stackoverflow.com/users/4694817/alyss"}, "is_accepted": true, "score": 0, "last_activity_date": 1488229974, "creation_date": 1488229974, "answer_id": 42495881, "question_id": 41250690, "link": "https://stackoverflow.com/questions/41250690/using-nokogiri-to-generate-static-header-list-in-slate-middleman/42495881#42495881", "title": "Using Nokogiri to generate static header list in Slate/Middleman", "body": "<p>In order to concatenate the current page data with partials with the page_content, use the code below. This also changes what all is needed to yield a complete page. </p>\n\n<pre><code>&lt;%\n  if current_page.data.includes\n    current_page.data.includes.each do |include|\n      page_content += partial(\"includes/#{include}\")\n    end\n  end\n%&gt;\n...\n&lt;%= page_content %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1838, "user_id": 4694817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56bqT.jpg?s=128&g=1", "display_name": "Alyss", "link": "https://stackoverflow.com/users/4694817/alyss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 42495881, "answer_count": 2, "score": 5, "last_activity_date": 1488229974, "creation_date": 1482265437, "last_edit_date": 1482620988, "question_id": 41250690, "link": "https://stackoverflow.com/questions/41250690/using-nokogiri-to-generate-static-header-list-in-slate-middleman", "title": "Using Nokogiri to generate static header list in Slate/Middleman", "body": "<p>I'm inexperienced with middleman and ruby, but I've been trying to get <a href=\"https://github.com/lord/slate\" rel=\"nofollow noreferrer\">Slate</a> working so it generates a side navigation/list of header during build time instead of client side using javascript. The problem I am running into is getting the code to include the headers from partials. </p>\n\n<p>An example of the directory structure:</p>\n\n<pre><code>Source\n+--config.rb\n+--includes\n  +--file.md\n  +--otherfile.md\n+--index.html\n+--layouts\n  +--layout.erb\n</code></pre>\n\n<p><a href=\"https://gist.github.com/bc-AlyssNoland/1ca7dfd0040755ddbe2ad0b009e68044\" rel=\"nofollow noreferrer\">Gist of layout and config.rb</a></p>\n\n<p>Config.rb snippet for this: </p>\n\n<pre><code>require 'nokogiri'\n\nhelpers do   \ndef toc_data(page_content)\n    html_doc = Nokogiri::HTML::DocumentFragment.parse(page_content)\n\n    # get a flat list of headers\n    headers = []\n    html_doc.css('h1, h2, h3').each do |header|\n      headers.push({\n        id: header.attribute('id').to_s,\n        content: header.content,\n        level: header.name[1].to_i,\n        children: []\n      })\n    end\n\n    [3,2].each do |header_level|\n      header_to_nest = nil\n      headers = headers.reject do |header|\n        if header[:level] == header_level\n          header_to_nest[:children].push header if header_to_nest\n          true\n        else\n          header_to_nest = header if header[:level] == (header_level - 1)\n          false\n        end\n      end\n    end\n    headers   \n  end\nend\n</code></pre>\n\n<p>Layout snippet for this: </p>\n\n<pre><code>&lt;ul id=\"toc\" class=\"toc\"&gt;\n    &lt;% toc_data(page_content).each do |h1| %&gt;\n      &lt;li&gt;\n        &lt;a href=\"#&lt;%= h1[:id] %&gt;\" class=\"toc-h1\"&gt;&lt;%= h1[:content] %&gt;&lt;/a&gt;\n          &lt;ul class=\"toc-section\"&gt;\n            &lt;% h1[:children].each do |h2| %&gt;\n              &lt;li&gt;\n                &lt;a href=\"#&lt;%= h2[:id] %&gt;\" class=\"toc-h2\"&gt;&lt;%= h2[:content] %&gt;&lt;/a&gt;\n                &lt;ul class=\"toc-submenu\"&gt;\n                  &lt;% h2[:children].each do |h3| %&gt;\n                    &lt;li&gt;\n                      &lt;a href=\"#&lt;%= h3[:id] %&gt;\" class=\"toc-h3\"&gt;&lt;%= h3[:content] %&gt;&lt;/a&gt;\n                    &lt;/li&gt;\n                  &lt;% end %&gt;\n                &lt;/ul&gt;\n              &lt;/li&gt;\n            &lt;% end %&gt;\n          &lt;/ul&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n...\n    &lt;div class=\"page-wrapper\"&gt;\n  &lt;div class=\"content\"&gt;\n    &lt;%= page_content %&gt;\n    &lt;% current_page.data.includes &amp;&amp; current_page.data.includes.each do |include| %&gt;\n      &lt;%= partial \"includes/#{include}\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Currently, only headers from the index.html file are getting populated and nothing from the included partials. I believe I may need the existing helper to occur post build <a href=\"https://middlemanapp.com/advanced/sitemap/\" rel=\"nofollow noreferrer\">similar to what is described in the Middleman docs for sitemaps</a> using a <code>ready</code> helper. I believe I have to make another change to the config code so that it captures additional content outside of the <code>page_content</code>, but I'm  not sure what that is due to lack of familiarity. Any pointers would be appreciated. </p>\n\n<p>Edit: After looking into the middleman basics docs, there appear to be two helpers from the Padrino framework that I could make use of: <code>capture_html</code> and <code>concat_content</code>. I'm trying to find where the helper <code>page_content</code> is defined to get extra context for the specific changes I'm making. </p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-dynamodb", "aws-sdk-ruby"], "answers": [{"comments": [{"owner": {"reputation": 3618, "user_id": 310626, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/742f369b38c42839d1f23eb079447d8b?s=128&d=identicon&r=PG", "display_name": "duduamar", "link": "https://stackoverflow.com/users/310626/duduamar"}, "edited": false, "score": 0, "creation_date": 1487356238, "post_id": 41269202, "comment_id": 71764857, "body": "You assume I know the table name, while I would like to delete all records from all tables. I will post the script I eventually used."}], "tags": [], "owner": {"reputation": 29341, "user_id": 6337748, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/7Si7m.jpg?s=128&g=1", "display_name": "notionquest", "link": "https://stackoverflow.com/users/6337748/notionquest"}, "is_accepted": false, "score": 1, "last_activity_date": 1482343708, "creation_date": 1482343708, "answer_id": 41269202, "question_id": 41250670, "link": "https://stackoverflow.com/questions/41250670/delete-all-items-in-dynamodb-table-using-ruby/41269202#41269202", "title": "Delete all items in DynamoDB table using Ruby", "body": "<p>Here is the code to scan and delete all the items from DynamoDB table though I am not sure why can't you delete the table and recreate if you would like to delete all the items from a table.</p>\n\n<p>Please note that this is <strong>not a recommended approach</strong> unless you have some very specific use case. This would cost you as the code reads the item from table and then delete the item. </p>\n\n<p><strong>Code:-</strong></p>\n\n<p>You may need to change the table name and key value in the below code. In the below code, the table name used is <code>files</code> and its key value is <code>fileName</code>.</p>\n\n<p>If you have both partition key and sort key, then you need to set both the values. The <code>files</code> table has only partition key.</p>\n\n<pre><code>#! /usr/bin/ruby\n\nrequire \"aws-sdk-core\"\n\n# Configure SDK\n\n# use credentials file at .aws/credentials\nAws.config[:credentials] = Aws::SharedCredentials.new\nAws.config[:region] = \"us-west-2\"\n\n# point to DynamoDB Local, comment out this line to use real DynamoDB\nAws.config[:dynamodb] = { endpoint: \"http://localhost:8000\" }\n\ndynamodb = Aws::DynamoDB::Client.new\n\ntableName = \"files\"\n\nscanParams = {\n  table_name: tableName\n}\n\nputs \"Scanning files table.\"\n\nbegin\n  loop do\n    result = dynamodb.scan(scanParams)\n\n    result.items.each{|files|\n      puts \"Item :\" + \"#{files}\"\n      puts \"Going to delete item :\" + \"#{files[\"fileName\"]}\"\n\n      deleteParams = {\n        table_name: tableName,\n        key: {\n          fileName: files[\"fileName\"]\n\n        }\n      }\n      begin\n        deleteResult = dynamodb.delete_item(deleteParams)\n        puts \"Deleted item.\" + files[\"fileName\"]            \n\n      rescue  Aws::DynamoDB::Errors::ServiceError =&gt; error\n        puts \"Unable to delete item:\"\n        puts \"#{error.message}\"\n      end\n\n    }\n\n\n    break if result.last_evaluated_key.nil?\n    puts \"Scanning for more...\"\n    scanParams[:exclusive_start_key] = result.last_evaluated_key\n\n  end\n\nrescue  Aws::DynamoDB::Errors::ServiceError =&gt; error\n  puts \"Unable to scan:\"\n  puts \"#{error.message}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3618, "user_id": 310626, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/742f369b38c42839d1f23eb079447d8b?s=128&d=identicon&r=PG", "display_name": "duduamar", "link": "https://stackoverflow.com/users/310626/duduamar"}, "is_accepted": true, "score": 1, "last_activity_date": 1487356314, "creation_date": 1487356314, "answer_id": 42305088, "question_id": 41250670, "link": "https://stackoverflow.com/questions/41250670/delete-all-items-in-dynamodb-table-using-ruby/42305088#42305088", "title": "Delete all items in DynamoDB table using Ruby", "body": "<p>I eventually wrote this script which delete all records from all tables (not very useful for most cases, but for mine it was exactly what I needed, as I was using it in a dedicated testing account):</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'aws-sdk'\n\ndynamoDB = Aws::DynamoDB::Resource.new(region: 'us-west-2')\n\ndynamoDB.tables.each do |table|\n  puts \"Table #{table.name}\"\n  scan_output = table.scan({\n    select: \"ALL_ATTRIBUTES\"\n    })\n\n  scan_output.items.each do |item|\n    item_key = Hash.new\n    table.key_schema.each do |k|\n      item_key[k.attribute_name] = item[k.attribute_name]\n    end\n    table.delete_item({\n      key: item_key\n    })\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3618, "user_id": 310626, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/742f369b38c42839d1f23eb079447d8b?s=128&d=identicon&r=PG", "display_name": "duduamar", "link": "https://stackoverflow.com/users/310626/duduamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10567, "favorite_count": 0, "accepted_answer_id": 42305088, "answer_count": 2, "score": 3, "last_activity_date": 1487356314, "creation_date": 1482265379, "last_edit_date": 1482341558, "question_id": 41250670, "link": "https://stackoverflow.com/questions/41250670/delete-all-items-in-dynamodb-table-using-ruby", "title": "Delete all items in DynamoDB table using Ruby", "body": "<p>I'm trying to write a simple ruby script that delete all items in a DynamoDB table, but I'm having trouble understand which argument to pass to \"delete_items\", this is what I have so far:</p>\n\n<pre><code>dynamoDB = Aws::DynamoDB::Resource.new(region: 'us-west-2')\n\ndynamoDB.tables.each do |table|\n  puts \"Table #{table.name}\"\n  scan_output = table.scan({\n    select: \"ALL_ATTRIBUTES\"\n    })\n\n  scan_output.items.each do |item|\n    keys = item.keys\n    table.delete_item({\n      key: ???\n    })\n  end\nend \n</code></pre>\n\n<p>I tried passing the item, or item.keys - both did not work.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "net-http"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 2, "creation_date": 1482265881, "post_id": 41250647, "comment_id": 69701882, "body": "JSON strings are supposed to be wrapped by double-quotes - are you sure the API is expecting JSON, as opposed to a comma-separated list of IDs?"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1482266323, "post_id": 41250647, "comment_id": 69702111, "body": "positive, see here <a href=\"http://developer.logmein.com/api/hostactions/#system-inventory\" rel=\"nofollow noreferrer\">developer.logmein.com/api/hostactions/#system-inventory</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1482266363, "post_id": 41250647, "comment_id": 69702127, "body": "Then remove the <code>join</code> from line 1 and you are good to go"}], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "is_accepted": false, "score": 2, "last_activity_date": 1482265723, "creation_date": 1482265723, "answer_id": 41250760, "question_id": 41250647, "link": "https://stackoverflow.com/questions/41250647/rails-to-json-remove-quote/41250760#41250760", "title": "rails to_json remove quote", "body": "<p>You can use <code>JSON.parse(create_servicetag_report_request.body[:hostIds])</code> to parse it.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482266258, "post_id": 41250803, "comment_id": 69702066, "body": "<code>host_ids</code> is a string because the OP explicitly made it one. using <code>join &#39;, &#39;</code>"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482266394, "post_id": 41250803, "comment_id": 69702136, "body": "Right, and this is why it is displaying as such. If OP wants valid json, a list of ids can only be a comma separated string or an array/array of hashes"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1482266452, "post_id": 41250803, "comment_id": 69702170, "body": "He just added the link to their API Doc it says: &quot;hostIds&quot;: [&lt;id1&gt;, &lt;id2&gt;, ...], so it should be an Array not a String."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482266474, "post_id": 41250803, "comment_id": 69702183, "body": "Yeah I commented on it. I was more or less mentioning your phrasing of <i>&quot;It looks like hostIds is a string.&quot;</i>"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1482266567, "post_id": 41250803, "comment_id": 69702230, "body": "It looks exactly like it :)"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "edited": false, "score": 0, "creation_date": 1482266747, "post_id": 41250803, "comment_id": 69702309, "body": "thanks guys, that makes sense. going to test it as a array in a few minutes and ill post back"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 3, "last_activity_date": 1482347536, "last_edit_date": 1482347536, "creation_date": 1482265922, "answer_id": 41250803, "question_id": 41250647, "link": "https://stackoverflow.com/questions/41250647/rails-to-json-remove-quote/41250803#41250803", "title": "rails to_json remove quote", "body": "<p>The reason <code>to_json</code> adds the <code>\\\"</code> (escaped quotations) is because it is converting hostIds as a string. In your rails console try this to see the difference.</p>\n\n<pre><code>{\"hostids\":[0,1,2,3]}.to_json\n=&gt; \"{\\\"hostids\\\":[0,1,2,3]}\"\n\n{\"hostids\":\"[0,1,2,3]\"}.to_json\n=&gt; \"{\\\"hostids\\\":\\\"[0,1,2,3]\\\"}\"\n</code></pre>\n\n<p>This can be seen another way by trying:  <code>puts [1,2,3,4]</code> vs <code>puts \"[1,2,3,4]\"</code></p>\n\n<p>Ultimately I would refer to the LMI Central API to figure out exactly how multiple hostIds can be sent.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1482267176, "creation_date": 1482267176, "answer_id": 41251067, "question_id": 41250647, "link": "https://stackoverflow.com/questions/41250647/rails-to-json-remove-quote/41251067#41251067", "title": "rails to_json remove quote", "body": "<p>Just remove the <code>join</code> part from this line:</p>\n\n<pre><code>host_ids = LmiHost.all.collect { |lmi| lmi.host_id }.join ', '\n</code></pre>\n\n<p><code>join</code> joins your array of ids into a comma separated string. This doesn't seems to be what you want.</p>\n\n<p>Btw. you can shorten <code>.collect { |lmi| lmi.host_id }</code> to <code>map(&amp;:host_id)</code>:</p>\n\n<pre><code>create_servicetag_report_request.body = {\n  hostIds: LmiHost.all.map(&amp;:host_id), \n  fields:  'ServiceTag'\n}.to_json\n</code></pre>\n"}], "owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1339, "favorite_count": 0, "accepted_answer_id": 41250803, "answer_count": 3, "score": -1, "last_activity_date": 1482347536, "creation_date": 1482265264, "question_id": 41250647, "link": "https://stackoverflow.com/questions/41250647/rails-to-json-remove-quote", "title": "rails to_json remove quote", "body": "<p>I am working the the LogMeIn Central API and in the body of my request I need to send some Json. I have this:</p>\n\n<pre><code>  host_ids = LmiHost.all.collect {|lmi| lmi.host_id}.join ', '\n  create_servicetag_report_request.body = {hostIds: host_ids, fields: 'ServiceTag'}.to_json\n</code></pre>\n\n<p>This turns the body into </p>\n\n<blockquote>\n  <p>{\\\"hostIds\\\":\\\"5888, 6225, 214752\\\",\\\"fields\\\":\\\"ServiceTag\\\"}</p>\n</blockquote>\n\n<p>how can i remove the</p>\n\n<blockquote>\n  <p>\\\"</p>\n</blockquote>\n\n<p>from this section:</p>\n\n<blockquote>\n  <p>\\\"5888, 6225, 214752\\\"</p>\n</blockquote>\n\n<p>it is not suppose to have quotes around it.</p>\n\n<p>I am using Ruby on Rails</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid", "embedded-documents"], "answers": [{"tags": [], "owner": {"reputation": 1586, "user_id": 6516149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgUtp.jpg?s=128&g=1", "display_name": "Martin Calvert", "link": "https://stackoverflow.com/users/6516149/martin-calvert"}, "is_accepted": false, "score": 0, "last_activity_date": 1482860996, "creation_date": 1482860996, "answer_id": 41349804, "question_id": 41249936, "link": "https://stackoverflow.com/questions/41249936/mongoid-no-persistence-on-embedded-documents/41349804#41349804", "title": "Mongoid, no persistence on embedded documents", "body": "<p>It has been awhile since I ran into an issue that sounds very similar. I am wondering if the objects are not getting marked as dirty/changed. They way I always got around this was.</p>\n\n<pre><code>class Boxer\n  embeds_many :Certificats, as: :Certificat\nend\n\nb = Boxer.new\nb.certificats_will_change!\nb.certificats = Certifcat.new\nb.save!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6260165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc6817210dcb5f2d878926039363819?s=128&d=identicon&r=PG&f=1", "display_name": "L.Eymael", "link": "https://stackoverflow.com/users/6260165/l-eymael"}, "is_accepted": false, "score": 0, "last_activity_date": 1484661267, "creation_date": 1484661267, "answer_id": 41698954, "question_id": 41249936, "link": "https://stackoverflow.com/questions/41249936/mongoid-no-persistence-on-embedded-documents/41698954#41698954", "title": "Mongoid, no persistence on embedded documents", "body": "<p>I've found the mistake i made by myself. For those who might wondering, here is the point: \nIn the Certificate class, a <code>embedded_in Boxer</code> was needed ... </p>\n"}], "owner": {"reputation": 11, "user_id": 6260165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc6817210dcb5f2d878926039363819?s=128&d=identicon&r=PG&f=1", "display_name": "L.Eymael", "link": "https://stackoverflow.com/users/6260165/l-eymael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1484661267, "creation_date": 1482262352, "last_edit_date": 1482262661, "question_id": 41249936, "link": "https://stackoverflow.com/questions/41249936/mongoid-no-persistence-on-embedded-documents", "title": "Mongoid, no persistence on embedded documents", "body": "<p>I'm very annoyed with mogoid and embedded documents. I can't find the proper way to create,  edit, or destroy them. I've tried all methods i've found around the web, but none of them seems to work. </p>\n\n<p>I've also tried many tests on the rails console, but, still no result...\nAll the test that i've done, stays unpersistent in the DB.</p>\n\n<p>Here is the main class : </p>\n\n<pre><code>class Boxer\n  include Mongoid::Document\n  include Mongoid::Paperclip\n\n  store_in collection: \"Boxers\"\n\n  field :NumeroLof\n  field :Couleur\n  field :DateNaissance\n  .... many fields ...\n  field :Contacts\n  field :PublicationEtalon\n\n  has_mongoid_attached_file :Image\n  validates_attachment_content_type :Image, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\n\n  embeds_many :Certificats, as: :Certificat\n  accepts_nested_attributes_for :Certificats, allow_destroy: true\nend\n</code></pre>\n\n<p>A boxer object should look like something like this :</p>\n\n<pre><code>{\n\"_id\" : ObjectId(\"584676a482ed3c1bc77484b3\"),\n\"NumeroLof\" : 1316Ae024,\n\"Name\" : \"SHEBA\",\n\"Affixe\" : \"DU JABELIN\",\n\"DateNaissance\" : ISODate(\"2001-05-24T00:00:00.000Z\"),\n\"Sexe\" : \"F\",\n\"Couleur\" : \"B\",\n\"Identification\" : \"2AXZ279\",\n\"Certificats\" : [ \n    {\n        \"Exposition\" : \"EYRAGUES NE\",\n        \"Date\" : ISODate(\"2011-06-26T00:00:00.000Z\"),\n        \"Juge\" : \"P. Asensi\",\n        \"Observation\" : \"\",\n        \"Denomination\" : \"M-VET\",\n        \"_id\" : ObjectId(\"58467f1082ed3c1bc77557b3\")\n    }, \n    {\n        \"Exposition\" : \"PRADINES RE\",\n        \"Date\" : ISODate(\"2011-08-14T00:00:00.000Z\"),\n        \"Juge\" : \"R. Pras\",\n        \"Observation\" : \"\",\n        \"Denomination\" : \"M-VET\",\n        \"_id\" : ObjectId(\"58467f1082ed3c1bc77557bd\")\n    }\n]\n</code></pre>\n\n<p>}</p>\n\n<p>And finally, here is my CertificatsController: </p>\n\n<pre><code>class CertificatsController &lt; ApplicationController\n      before_action :load_boxer\n      before_action :load_certificat, only: [:show, :edit, :update, :destroy]\n\n      # GET /boxer/:id/certificates/\n      def index\n        @certificats = @boxer.Certificats\n      end\n\n      # GET /boxer/:id/certificates/:id/\n      def show\n      end\n\n      # GET /boxer/:id/certificates/new\n      def new\n        @certificat = @boxer.Certificat.new\n      end\n\n      # POST /boxer/:id/certificates/\n      def create\n        @certificat = Certificat.build(certificat_params)\n        if @certificat.save\n          @boxer.Certificats.new(@certificat)\n          @boxer.reload\n          redirect_to boxer_certificats_path(@boxer), notice: \"Nouveau certificat cr\u00e9\u00e9 avec succ\u00e8s\" and return\n        end\n        render 'new'\n      end\n\n      def edit\n      end\n\n      def update\n        if @certificat.update_attributes(certificat_params)\n          @boxer.reload\n          redirect_to boxer_certificats_path(@boxer), notice: \"le certificat a \u00e9t\u00e9 mis \u00e0 jour!\" and return\n        end\n\n        render 'edit'\n      end\n\n      def destroy\n        @certificat.destroy\n        @boxer.reload\n        redirect_to boxer_certificats_path, notice: \"le certificat a \u00e9t\u00e9 supprim\u00e9!\" and return\n      end\n\n      private\n      def certificat_params\n        params.require(:certificat).permit(:Denomination, :Date, :Exposition, :Juge,\n        :Observation)\n      end\n\n      def load_boxer\n        @boxer = Boxer.find(params[:boxer_id])\n      rescue Mongoid::Errors::DocumentNotFound\n        not_found\n      end\n\n      def load_certificat\n        @certificat = @boxer.Certificats.find(params[:id])\n      end\n\n    end\n</code></pre>\n\n<p>Actually, I've got no problem for index and show methods, but all CRUD operations fail, there is no persistence of my queries.</p>\n\n<p>Thanks in advance for your replies.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 0, "creation_date": 1482263901, "post_id": 41250120, "comment_id": 69700850, "body": "Thanks Pedro, I really appreciate that.  Works fantastic with multiple validation methods in the model. =)"}], "tags": [], "owner": {"reputation": 226, "user_id": 2174362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbb093a2e327bea76fcf66294e12590?s=128&d=identicon&r=PG", "display_name": "Pedro Moreira Mamede", "link": "https://stackoverflow.com/users/2174362/pedro-moreira-mamede"}, "is_accepted": true, "score": 3, "last_activity_date": 1482263607, "last_edit_date": 1482263607, "creation_date": 1482263127, "answer_id": 41250120, "question_id": 41249879, "link": "https://stackoverflow.com/questions/41249879/failed-validation-in-model-ruby-rails-passing-to-controller/41250120#41250120", "title": "Failed validation in model Ruby Rails passing to controller", "body": "<pre><code>def rescueuploads(exception)\n  @error = exception\n  @error.class\n  @error.message #this is your message error raised from your model\n  redirect_to ti_projects_path, notice: @error.message\nend\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 41250120, "answer_count": 1, "score": 1, "last_activity_date": 1482263607, "creation_date": 1482262157, "question_id": 41249879, "link": "https://stackoverflow.com/questions/41249879/failed-validation-in-model-ruby-rails-passing-to-controller", "title": "Failed validation in model Ruby Rails passing to controller", "body": "<p>So I'm doing a CSV import for TiProject model and I have a validation set up in the model such that it's looking to see if TiProject.protype exists in a list of Projecttype.protype.  It works and if it fails to validate it crashes, great.  Now, I also have a rescue in place so I can let people know, hey, your stuff didn't upload.  I'd like to call out specifically what validation it failed.  I just don't know how to access that errors.add(:base, \"xyz\") in the code below and get it to show up in the notice.</p>\n\n<p>ti_project.rb</p>\n\n<pre><code>class TiProject &lt; ActiveRecord::Base\nvalidate :validate_protype\n\ndef validate_protype\n  if Projecttype.find_by_protype(protype) == nil\n  errors.add(:base, \"Project type doesn't exist\")\n end\nend\n\ndef self.import(file)\n CSV.foreach(file.path, headers: true) do |row|\n   TiProject.create! row.to_hash\n end\nend \nother stuffs.....\n</code></pre>\n\n<p>ti_project_controller.rb</p>\n\n<pre><code>class TiProjectsController &lt; ApplicationController\n  rescue_from ActiveRecord::RecordInvalid, :with =&gt; :rescueuploads\n\ndef index\n @tiprojects =TiProject.all\n\nend\n\n\ndef import\n  TiProject.import(params[:file])\n  TiProject.checkforpidtc\n  redirect_to ti_projects_path, notice: \"Projects uploaded successfully\"\nend\n\n\ndef rescueuploads\n  redirect_to ti_projects_path, notice: \"Project upload ERROR\"\nend\nother stuffs....\n</code></pre>\n"}, {"tags": ["ruby", "activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 3, "creation_date": 1482264273, "post_id": 41249776, "comment_id": 69701051, "body": "You have to call <code>reload</code> to refresh the im-memory state"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482264947, "post_id": 41249776, "comment_id": 69701390, "body": "Which means you have to know to call <code>reload</code> on the parent object even if the child object has been passed to some completely different piece of code to be <code>destroyed</code>? If you can do that, you might as well just explicitly set the field to <code>nil</code>, and anyway there must be a better way."}, {"owner": {"reputation": 115, "user_id": 615047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1efca9cc7bf599c6394b1791907d29?s=128&d=identicon&r=PG", "display_name": "Tony Daly", "link": "https://stackoverflow.com/users/615047/tony-daly"}, "edited": false, "score": 0, "creation_date": 1538402197, "post_id": 41249776, "comment_id": 92120141, "body": "Hey @DavidMoles, I&#39;m having the same issue even on the latest rails. Is this the intended behaviour? Seems bizarre."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 115, "user_id": 615047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1efca9cc7bf599c6394b1791907d29?s=128&d=identicon&r=PG", "display_name": "Tony Daly", "link": "https://stackoverflow.com/users/615047/tony-daly"}, "edited": false, "score": 0, "creation_date": 1538413944, "post_id": 41249776, "comment_id": 92126328, "body": "@TonyDaly seems to be? I never bothered to dig into the code to find out. \ud83e\udd37"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1576597468, "post_id": 41249776, "comment_id": 104947489, "body": "It is default behavior, but I would disagree with setting it to nil if you want callbacks triggered. Calling destroy triggers any callbacks defined on the model."}], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1482265208, "creation_date": 1482261814, "last_edit_date": 1482265208, "question_id": 41249776, "link": "https://stackoverflow.com/questions/41249776/has-one-association-doesnt-return-nil-after-calling-destroy-on-associated-objec", "title": "has_one association doesn&#39;t return nil after calling destroy on associated object", "body": "<p>Naively, if my model <code>Foo</code> has</p>\n\n<pre><code>has_one associated_object\n</code></pre>\n\n<p>I would expect</p>\n\n<pre><code>some_foo.associated_object.destroy\nsome_foo.associated_object\n</code></pre>\n\n<p>to return <code>nil</code>. However, it still returns the associated object (with the <code>destroyed</code> flag set).</p>\n\n<p>In the database, the <code>associated_object</code> table row has been removed, so if I load a second <code>Foo</code> model object for the same record, I get the <code>nil</code> I'm looking for:</p>\n\n<pre><code>Foo.find(some_foo.id).associated_object\n# =&gt; nil\n</code></pre>\n\n<p>Is there a way I can declare the ActiveRecord <code>has_one</code> relation such that I'll get <code>nil</code> for in-memory <code>Foo</code> model, without having to check the <code>destroyed</code> flag on the associated object?</p>\n\n<hr>\n\n<p><strong>ETA:</strong> In case it wasn't clear, I'm not looking for an <em>additional</em> call to make, <em>after</em> I call <code>destroy</code>. I'm looking for how to make a <code>has_one</code> relationship behave as conveniently and transparently as <code>has_many</code>:</p>\n\n<pre><code>some_foo.many_objects.each(&amp;:destroy)\n# ... other code, not knowing about the earlier 'destroy' call(s)\nsome_foo.many_objects.empty?\n# =&gt; true\n</code></pre>\n"}, {"tags": ["ruby", "websocket", "eventmachine"], "comments": [{"owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "edited": false, "score": 1, "creation_date": 1482261733, "post_id": 41249537, "comment_id": 69699707, "body": "Worth a read -&gt; <a href=\"http://blog.honeybadger.io/building-a-simple-websockets-server-from-scratch-in-ruby/\" rel=\"nofollow noreferrer\">blog.honeybadger.io/&hellip;</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482276985, "post_id": 41249537, "comment_id": 69706441, "body": "You can pass <code>msg</code> to some other function as an argument. But having <code>conn.stream</code> &quot;return&quot; a value is pointless, since nothing is checking for that return value."}], "owner": {"reputation": 1589, "user_id": 1123717, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fb3d5703694d21ac6573b31d3f3014f0?s=128&d=identicon&r=PG", "display_name": "aarkerio", "link": "https://stackoverflow.com/users/1123717/aarkerio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482260859, "creation_date": 1482260859, "question_id": 41249537, "link": "https://stackoverflow.com/questions/41249537/how-to-use-a-ruby-websocket-client", "title": "How to use a ruby Websocket client", "body": "<p>I'm trying to do my first app with a server-client Websocket on Ruby. I see a lot of codes like this one:</p>\n\n<pre><code>require 'eventmachine'\nrequire 'em-websocket-client'\n\nEM.run do\n  conn = EventMachine::WebSocketClient.connect(\"ws://0.0.0.0:9110/message\")\n\n  conn.callback do\n    data = {data: 'data'}\n    conn.send_msg data.to_json\n  end\n\n  conn.errback do |e|\n    puts \"Got error: #{e}\"\n  end\n\n  conn.stream do |msg|\n    puts \"&lt;#{msg}&gt;\"\n    conn.close_connection\n end\n\n  conn.disconnect do\n    puts \"success\"\n    EM::stop_event_loop\n  end\nend\n</code></pre>\n\n<p>But I don't know how to use that code. Should I put all that inside a method in a class and replace \"puts msg\" with \"return msg\"? Or should I run the EM.run block as a daemon and \"listen\" the \"puts\"? I can't find examples about how to take the \"msg\" variable (the response from the server) out of the EM.run block.</p>\n\n<p>Thanks for taking the time to read my question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 5289988, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0f4a26200840e02e3c32593390687c80?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Matheus", "link": "https://stackoverflow.com/users/5289988/kelvin-matheus"}, "edited": false, "score": 0, "creation_date": 1482266930, "post_id": 41249712, "comment_id": 69702403, "body": "Hey, @Dimitry_N, I will check this trait. I did not use it because I have always used nested factories and it always works until before this moment.  I do not know traits, so I will try to use it. Thanks for the help."}], "tags": [], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1482261553, "creation_date": 1482261553, "answer_id": 41249712, "question_id": 41249300, "link": "https://stackoverflow.com/questions/41249300/error-with-complex-factory-with-factory-girl-rails-on-rails-5/41249712#41249712", "title": "Error with complex Factory with Factory Girl Rails on Rails 5", "body": "<blockquote>\n  <p>This problem does no occur when I use the FactoryGirl.create inside of\n  the factory ':log_transacao_carga'.</p>\n</blockquote>\n\n<p><code>log_transacao_carga</code> works because you are passing the class name to it (<code>LogTransacao</code>).</p>\n\n<p>Any particular reason you are doing nested factories vs. <code>trait</code>? You can use FactoryGirl's <code>trait</code> like so:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :conta do\n    nome { Faker::Name.name }\n    saldo { 0 }\n    status { 1 }\n\n    trait :conta_pessoa_fisica do\n      pessoa_type { 'PessoaFisica' }\n      pessoa_id { FactoryGirl.create(:pessoa_fisica).id }\n    end\n   end\n end\n</code></pre>\n\n<p>and then call it with <code>build(:conta, :conta_pessoa_fisica</code>). This way it reads my better and you are able to inherit parent factory attributes and add-on / edit the ones you need in a specific context. </p>\n\n<p>Check out FactoryGirl docs:\n<a href=\"http://www.rubydoc.info/github/thoughtbot/factory_girl/FactoryGirl/Syntax/Methods\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/thoughtbot/factory_girl/FactoryGirl/Syntax/Methods</a></p>\n\n<p>Here is a good intro video from the creators of FactoryGirl: <a href=\"https://thoughtbot.com/upcase/videos/factory-girl\" rel=\"nofollow noreferrer\">https://thoughtbot.com/upcase/videos/factory-girl</a></p>\n"}], "owner": {"reputation": 137, "user_id": 5289988, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0f4a26200840e02e3c32593390687c80?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Matheus", "link": "https://stackoverflow.com/users/5289988/kelvin-matheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482261553, "creation_date": 1482259947, "last_edit_date": 1482260354, "question_id": 41249300, "link": "https://stackoverflow.com/questions/41249300/error-with-complex-factory-with-factory-girl-rails-on-rails-5", "title": "Error with complex Factory with Factory Girl Rails on Rails 5", "body": "<p>I'm using the FactoryGirl gem to create a the following factory:</p>\n\n<pre><code>FactoryGirl.define do\n  conta_origem = FactoryGirl.create(:conta_pessoa_fisica)\n  conta_destino = ''\n  tipos = LogTransacao.tipos.keys\n  params = { conta_origem: conta_origem, conta_destino: conta_destino, tipo: tipos[0] }\n  codigo_transacional = LogTransacaoHelper::Gerador.codigo_alphanumerico(params)\n\n  factory :log_transacao_carga, class: LogTransacao do\n    codigo_transacional { codigo_transacional }\n    tipo { tipos[0] }\n    estornado { false }\n    valor  { 0 }\n    conta_origem_id { conta_origem.id }\n    conta_origem_valor_antes_transacao { conta_origem.saldo }\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>conta.rb\nFactoryGirl.define do\n  factory :conta do\n    nome { Faker::Name.name }\n    saldo { 0 }\n    status { 1 }\n\n    factory :conta_pessoa_fisica do\n      pessoa_type { 'PessoaFisica' }\n      pessoa_id { FactoryGirl.create(:pessoa_fisica).id }\n    end\n   end\n end\n</code></pre>\n\n<p>So, I'm getting the following error:</p>\n\n<pre><code>find': Factory not registered: pessoa_fisica\n</code></pre>\n\n<p>This problem does no occur when I use the FactoryGirl.create inside of the factory ':log_transacao_carga'. </p>\n\n<p>conta_origem_id { FactoryGirl.create(:conta_pessoa_fisica).id }</p>\n\n<p>However, if I do this, I cannot use the same factory to populate the \nconta_origem_valor_antes_transacao. So, I need to create this factory before the log_transacao_carga factory.</p>\n\n<p>Could someone help me, please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "delayed-job", "rails-activejob"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 2, "creation_date": 1482258770, "post_id": 41248798, "comment_id": 69698131, "body": "Sidekiq has batch jobs so you can wrap multiple jobs in a batch and then when that batch completes, do something."}, {"owner": {"reputation": 1528, "user_id": 2539811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e536ce6889f771db3121a6a706218601?s=128&d=identicon&r=PG", "display_name": "Vincil Bishop", "link": "https://stackoverflow.com/users/2539811/vincil-bishop"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1482259490, "post_id": 41248798, "comment_id": 69698507, "body": "Thanks @Anthony, to comment on my own question...I&#39;ve also found this that kind of sort of does what I am looking for also: <a href=\"https://github.com/cdale77/active_job_status#job-batches\" rel=\"nofollow noreferrer\">github.com/cdale77/active_job_status#job-batches</a> Looks like I was just lacking the batch keyword in my search."}], "owner": {"reputation": 1528, "user_id": 2539811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e536ce6889f771db3121a6a706218601?s=128&d=identicon&r=PG", "display_name": "Vincil Bishop", "link": "https://stackoverflow.com/users/2539811/vincil-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1482257719, "creation_date": 1482257719, "question_id": 41248798, "link": "https://stackoverflow.com/questions/41248798/in-rails-is-there-a-way-to-group-a-series-of-active-jobs-executing-in-parallel-a", "title": "In Rails is there a way to group a series of active jobs executing in parallel and be notified when they all complete?", "body": "<p>In Rails is there a way to group a series of ActiveJobs executing in parallel on different instances of the same queue, and be notified when they all complete?</p>\n\n<p>I'm trying to break up a large process into smaller processes, running on different machines at the same time.</p>\n\n<p>Something like GCD Dispatch Groups: <a href=\"https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW25\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/content/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW25</a></p>\n\n<p>I'm currently running Rails 5.0.0 and Ruby 2.3.1. </p>\n\n<p>I'm currently using DelayedJob, but can switch to a different backing queue if one supported this feature.</p>\n\n<p>When I say different instances of the same queue, I'm specifically referring to multiple worker instances on Heroku. </p>\n\n<p>This seems like a common piece of functionality that someone else would have needed. I've tried searching the web for answers, but I think the combination of words makes irrelevant results come up.</p>\n\n<p>Please let me know if there is more information that I can provide, and thanks in advance for your expertise.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1482259249, "post_id": 41248760, "comment_id": 69698362, "body": "When the class_eval block is called, it is calling the class method. This article helps: <a href=\"http://engineering.appfolio.com/appfolio-engineering/2013/06/17/ruby-mixins-activesupportconcern\" rel=\"nofollow noreferrer\">engineering.appfolio.com/appfolio-engineering/2013/06/17/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "is_accepted": true, "score": 1, "last_activity_date": 1482259590, "creation_date": 1482259590, "answer_id": 41249220, "question_id": 41248760, "link": "https://stackoverflow.com/questions/41248760/rails-scope-defined-in-a-class-eval-block-or-instance-eval-block/41249220#41249220", "title": "Rails scope defined in a class_eval block or instance_eval block?", "body": "<p><code>class_eval</code> is more powerful than <code>instance_eval</code>.</p>\n\n<p>With class eval, you can evaluate code in the <em>context</em> of the class, allowing you to define and call class methods, instance methods, and more:</p>\n\n<pre><code>Greeter = Class.new\n\nGreeter.class_eval do\n  def self.friendly?\n    true\n  end\n\n  def say_hi\n   \"Howdy!\"\n  end\nend\n\ndonato = Greeter.new\ndonato.say_hi # =&gt; \"Howdy!\"\nGreeter.friendly? # =&gt; true\n</code></pre>\n\n<p><code>instance_eval</code> instead evaluates code with the target instance as the receiver, so you'd have to be a bit more crafty if you're trying to define instance methods:</p>\n\n<pre><code>Greeter = Class.new\n\nGreeter.instance_eval do\n  def friendly?\n    true\n  end\n\n  define_method(:say_hi) { \"Howdy!\" }\nend\n\ndonato = Greeter.new\ndonato.say_hi # =&gt; \"Howdy!\"\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 41249220, "answer_count": 1, "score": 2, "last_activity_date": 1482259590, "creation_date": 1482257570, "question_id": 41248760, "link": "https://stackoverflow.com/questions/41248760/rails-scope-defined-in-a-class-eval-block-or-instance-eval-block", "title": "Rails scope defined in a class_eval block or instance_eval block?", "body": "<p>I am a little confused by <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\">this</a> example on ActiveSupport::Concern from the documentation:</p>\n\n<pre><code>module M\n  def self.included(base)\n    base.extend ClassMethods\n    base.class_eval do\n      scope :disabled, -&gt; { where(disabled: true) }\n    end\n  end\n\n  module ClassMethods\n    ...\n  end\nend\n</code></pre>\n\n<p><code>self.included</code> in a Module is called when you include or extend the Module in a Class. <code>base</code> refers to the object, whether it is a class object or object instance. <code>extend</code> on <code>base</code> will include the methods in Module as singleton methods on <code>base</code>. <code>include</code> will add the methods to the class object's instances.</p>\n\n<p>However, class_eval also is used to add instance methods to a class object's instances. Yet, <code>scope</code> is a class method:</p>\n\n<blockquote>\n  <p>Adds a class method for retrieving and querying objects.</p>\n</blockquote>\n\n<p>Since <code>scope</code> is a class method, why is the example using <code>class_eval</code> rather than <code>instance_eval</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "ruby-on-rails-5", "wicked-pdf"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4566774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/52aef73f5327f3862074493086358ec4?s=128&d=identicon&r=PG&f=1", "display_name": "ValeMarz", "link": "https://stackoverflow.com/users/4566774/valemarz"}, "edited": false, "score": 0, "creation_date": 1482420439, "post_id": 41249940, "comment_id": 69774914, "body": "Hi @whodini9! Thank you, but it still not working. I&#39;ve installed gem &#39;wicked_pdf&#39;, gem &#39;wkhtmltopdf-binary&#39; with &quot;exe_path: &#39;C:\\RailsInstaller\\Ruby2.2.0\\bin\\wkhtmltopdf&#39;&quot; instead of &quot;exe_path: &#39;C:\\Program Files\\wkhtmltopdf\\bin\\wkhtmltopdf.exe&#39;&quot;. This is runtime error: wkhtmltopdf is not executable"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 101, "user_id": 4566774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/52aef73f5327f3862074493086358ec4?s=128&d=identicon&r=PG&f=1", "display_name": "ValeMarz", "link": "https://stackoverflow.com/users/4566774/valemarz"}, "edited": false, "score": 0, "creation_date": 1482425112, "post_id": 41249940, "comment_id": 69778139, "body": "Can you try using the 2nd option: exe_path: Gem.bin_path(&#39;wkhtmltopdf-binary&#39;, &#39;wkhtmltopdf&#39;). Also in general its safer to use File.join(&quot;C:\\&quot;,&quot;Program Files&quot;,&quot;#{foo}&quot;,bar)"}, {"owner": {"reputation": 101, "user_id": 4566774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/52aef73f5327f3862074493086358ec4?s=128&d=identicon&r=PG&f=1", "display_name": "ValeMarz", "link": "https://stackoverflow.com/users/4566774/valemarz"}, "edited": false, "score": 0, "creation_date": 1482525285, "post_id": 41249940, "comment_id": 69818049, "body": "still &quot;wkhtmltopdf is not executable&quot;"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1482264598, "last_edit_date": 1482264598, "creation_date": 1482262365, "answer_id": 41249940, "question_id": 41248627, "link": "https://stackoverflow.com/questions/41248627/how-to-use-wicked-pdf-gem-in-rails/41249940#41249940", "title": "how to use wicked_pdf gem in rails?", "body": "<p>The github <a href=\"https://github.com/mileszs/wicked_pdf#installation\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>Because <code>wicked_pdf</code> is a wrapper for <code>wkhtmltopdf</code>, you'll need to\n  install that, too.</p>\n  \n  <p>The simplest way to install all of the binaries (Linux, OSX, Windows)\n  is through the gem wkhtmltopdf-binary. To install that, add a second\n  gem</p>\n  \n  <p><code>gem 'wkhtmltopdf-binary'</code></p>\n</blockquote>\n\n<p>So it seems that you will have to also include this binary in your app. Bundling the install should solve this. You may need to create some OS mapping inside your app to set <code>WickedPdf.config</code> (ex /usr/bin/local/wkhtmltopdf vs C:\\Program Files\\wkhtmltopdf\\bin\\wkhtmltopdf.exe)</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 7974208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3GJNTwk_es/AAAAAAAAAAI/AAAAAAAAARg/J0AdlD1l2RY/photo.jpg?sz=128", "display_name": "Abdul Wahed", "link": "https://stackoverflow.com/users/7974208/abdul-wahed"}, "is_accepted": false, "score": 1, "last_activity_date": 1502303331, "creation_date": 1502303331, "answer_id": 45598163, "question_id": 41248627, "link": "https://stackoverflow.com/questions/41248627/how-to-use-wicked-pdf-gem-in-rails/45598163#45598163", "title": "how to use wicked_pdf gem in rails?", "body": "<pre><code>exe_path: 'C://Program Files/wkhtmltopdf/bin/wkhtmltopdf.exe'\n</code></pre>\n\n<p>This worked for me</p>\n"}], "owner": {"reputation": 101, "user_id": 4566774, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/52aef73f5327f3862074493086358ec4?s=128&d=identicon&r=PG&f=1", "display_name": "ValeMarz", "link": "https://stackoverflow.com/users/4566774/valemarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1502303331, "creation_date": 1482257081, "last_edit_date": 1482258173, "question_id": 41248627, "link": "https://stackoverflow.com/questions/41248627/how-to-use-wicked-pdf-gem-in-rails", "title": "how to use wicked_pdf gem in rails?", "body": "<p>I'm using wicked_pdf gem in a rails app and everything works fine. The problem is that I have installed wicked_pdf.exe because wicked_pdf gem doesn't work correctly.\nIt returns this error: Bad wkhtmltopdf's path for wicked_pdf ( Or similar).\nThis is my wicked_pdf  config: </p>\n\n<pre><code>    WickedPdf.config = {\n  # Path to the wkhtmltopdf executable: This usually isn't needed if using\n  # one of the wkhtmltopdf-binary family of gems.\n  exe_path: 'C:\\Program Files\\wkhtmltopdf\\bin\\wkhtmltopdf.exe',\n  #   or\n  #exe_path: Gem.bin_path('wkhtmltopdf-binary', 'wkhtmltopdf')\n\n  # Layout file to be used for all PDFs\n  # (but can be overridden in `render :pdf` calls)\n  # layout: 'pdf.html',\n}\n</code></pre>\n\n<p>How can i use the gem in proper way? I need to send my app to another pc and I don't want to install the exe in every pc.\nI don't want to use exe, i want to use only gem.</p>\n"}, {"tags": ["arrays", "ruby", "glob", "ruby-1.9.3"], "comments": [{"owner": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 0, "creation_date": 1482258521, "post_id": 41248488, "comment_id": 69697986, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/29733611/dir-glob-with-sort-issue\">Dir.glob with sort issue</a>"}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1482257982, "post_id": 41248772, "comment_id": 69697701, "body": "@sagarpandya82 Apparently <a href=\"http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">it does</a> but I&#39;d think that&#39;s a distraction unless the OP is confusing <code>sort</code> (with a two argument block) and <code>sort_by</code> (with a one argument block)."}, {"owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1482258347, "post_id": 41248772, "comment_id": 69697901, "body": "Aha.  So sort&#39;s {} means something different than .each&#39;s {}, or .glob&#39;s {}.  Still, why the asymmetry: why doesn&#39;t .glob also need a .each?  (Is that even a meaningful question?)"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1482260026, "post_id": 41248772, "comment_id": 69698800, "body": "Every method that takes a block has its own requirements for that block: how many arguments it gets, what it should return, ... <code>Dir.glob</code> returns an <code>Array</code>, you&#39;re probably looking at this in <code>irb</code> so you&#39;re seeing the result of <code>Dir.glob(...).inspect</code> as <code>inspect</code> is what <code>irb</code> uses to display the result of the last command."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 1, "creation_date": 1482265142, "post_id": 41248772, "comment_id": 69701484, "body": "@CamilleGoudeseune every method can accept a block. What it does with that block, or whether it acknowledges it at all, is determined by the method itself."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 5, "last_activity_date": 1552583199, "last_edit_date": 1552583199, "creation_date": 1482257618, "answer_id": 41248772, "question_id": 41248488, "link": "https://stackoverflow.com/questions/41248488/why-does-dir-glob-txt-sort-also-need-each/41248772#41248772", "title": "Why does Dir.glob(&quot;*.txt&quot;).sort also need .each?", "body": "<p>The second one fails because <code>sort {|f| p f}</code> really doesn't make sense. The block you use with <code>sort</code> is supposed to <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-sort\" rel=\"nofollow noreferrer\">\"return -1, 0, or +1\"</a> and take two arguments (the elements to be compared) but your block takes one argument and returns that argument because <code>p str</code> returns <code>str</code>.</p>\n\n<p>The third one is fine because <code>sort</code>'s default comparator block is equivalent to saying:</p>\n\n<pre><code>sort { |a, b| a &lt;=&gt; b }\n</code></pre>\n\n<p>so <code>.sort.each</code> makes perfect sense.</p>\n\n<p>If you use the sort of block that <code>sort</code> expects in the second example:</p>\n\n<pre><code>Dir.glob(\"*.txt\").sort {|a, b| a &lt;=&gt; b }\n</code></pre>\n\n<p>then things will work better. Or you could just leave out the block if you want to sorting things in ascending lexical order:</p>\n\n<pre><code>Dir.glob('*.txt').sort\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 1, "creation_date": 1482262094, "post_id": 41248969, "comment_id": 69699886, "body": "So it&#39;s mere coincidence that <code>Dir.glob.each</code> and <code>Dir.glob</code> accept the same kind of block.  That&#39;s &quot;why&quot; <code>Dir.glob {}</code> works, with or without the <code>.each</code>.  Thanks!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "edited": false, "score": 0, "creation_date": 1482265394, "post_id": 41248969, "comment_id": 69701613, "body": "@CamilleGoudeseune <code>.each</code> has a return value of the object passed in so all it is doing is returning the response received from <code>glob</code>. The only time this is not true is if you use mutating methods inside <code>each</code>"}], "tags": [], "owner": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "is_accepted": true, "score": 4, "last_activity_date": 1482258420, "creation_date": 1482258420, "answer_id": 41248969, "question_id": 41248488, "link": "https://stackoverflow.com/questions/41248488/why-does-dir-glob-txt-sort-also-need-each/41248969#41248969", "title": "Why does Dir.glob(&quot;*.txt&quot;).sort also need .each?", "body": "<p>The other answer is correct, but I think there is a deeper explanation. When you have a block after a method call, like <code>Dir.glob(\"*.txt\") {|f| p f}</code>, the block is an (optional) argument to the method. In the definition of <code>Dir.glob</code>, there is a <code>yield</code> statement that runs the block.</p>\n\n<p>When you chain the methods, like in <code>Dir.glob(\"*.txt\").sort {|f| p f}</code>, the block becomes an argument to the <code>sort</code> method instead of the <code>glob</code> method. <code>sort</code> can also take a block to define a comparison, but this block doesn't make sense in that context.</p>\n\n<p>Chaining <code>each</code> to get <code>Dir.glob(\"*.txt\").sort.each {|f| p f}</code> makes the block an argument to the <code>each</code> method, which uses it like <code>glob</code> does (running the block for each argument). </p>\n"}], "owner": {"reputation": 2484, "user_id": 2097284, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Md1tZ.jpg?s=128&g=1", "display_name": "Camille Goudeseune", "link": "https://stackoverflow.com/users/2097284/camille-goudeseune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 41248969, "answer_count": 2, "score": 8, "last_activity_date": 1552583199, "creation_date": 1482256565, "last_edit_date": 1495541332, "question_id": 41248488, "link": "https://stackoverflow.com/questions/41248488/why-does-dir-glob-txt-sort-also-need-each", "title": "Why does Dir.glob(&quot;*.txt&quot;).sort also need .each?", "body": "<p><code>Dir.glob(\"*.txt\")           {|f| p f}</code> prints filenames.</p>\n\n<p><code>Dir.glob(\"*.txt\").sort      {|f| p f}</code> fails with an ArgumentError.</p>\n\n<p><code>Dir.glob(\"*.txt\").sort.each {|f| p f}</code> prints filenames in alphabetical order.</p>\n\n<p>Why does the second one fail?  Better yet, <em>why does the first one work, with or without the <code>.each</code>?</em></p>\n\n<ul>\n<li><code>Dir.glob</code> and <code>Dir.glob.sort</code> are both Arrays.</li>\n<li><code>Dir.glob.methods == Dir.glob.sort.methods</code>.</li>\n</ul>\n\n<p>(Inspired by <a href=\"https://stackoverflow.com/questions/4814340/alphabetize-results-of-dir-glob\">Alphabetize results of Dir.glob</a>.  Not a duplicate of <a href=\"https://stackoverflow.com/questions/29733611\">Dir.glob with sort issue</a> because the \"third one\" already answers that one's question.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "fonts", "font-awesome"], "comments": [{"owner": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "edited": false, "score": 0, "creation_date": 1482257136, "post_id": 41248361, "comment_id": 69697291, "body": "It seems one of your style sheets is requesting a font file and not finding it. In this case Fontawesome which is usually used for fonticons. Did you check your stylesheets for font imports that might not resolve? some gems also have issues too, such as <a href=\"https://github.com/FortAwesome/font-awesome-sass/issues/48\" rel=\"nofollow noreferrer\">github.com/FortAwesome/font-awesome-sass/issues/48</a>"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "edited": false, "score": 0, "creation_date": 1482257516, "post_id": 41248361, "comment_id": 69697492, "body": "@mlabarca but I don&#39;t quite get it. it work well for some time on production and then it&#39;s broke. but still it&#39;s ok son local host."}, {"owner": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "edited": false, "score": 0, "creation_date": 1482258165, "post_id": 41248361, "comment_id": 69697794, "body": "This &#39;working on development but not on production&#39; thing with assets is usually due to precompilation. Since assets are only precompiled on production, in development the link to your asset might be &#39;fontawesome-webfont-1.woff2&#39;  but after precompilation this changes, and hence the issues start. Do you use any kind of gems to manage the fontawesome font import?"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "edited": false, "score": 0, "creation_date": 1482259062, "post_id": 41248361, "comment_id": 69698269, "body": "@mlabarca the only one is gem &#39;rails-assets-font-awesome&#39;"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482262999, "post_id": 41248361, "comment_id": 69700353, "body": "Try deleting the assets and do &#39;rake assets:precompile&#39; and see if you get the errors"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482265678, "post_id": 41248361, "comment_id": 69701761, "body": "not sure where you are hosting your production environment but this could also be the issue where some hosting platforms do not allow local file storage and some times things get cleaned up when you were not expecting it. You should be able to check if it exists"}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 1697148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6727e46da8f7e7666bb764d1d8d0ae8a?s=128&d=identicon&r=PG", "display_name": "Vasiliy  Shakhunov", "link": "https://stackoverflow.com/users/1697148/vasiliy-shakhunov"}, "is_accepted": false, "score": 0, "last_activity_date": 1517835943, "creation_date": 1517835943, "answer_id": 48623291, "question_id": 41248361, "link": "https://stackoverflow.com/questions/41248361/rails-no-route-matches-get-assets-font-awesome/48623291#48623291", "title": "Rails No route matches [GET] &quot;/assets/font-awesome&quot;", "body": "<p>Found solution for using font-awesome added to rails project with npm or yarn. Just set $fa-font-path varibale before import 'font-awesome' that pointing to simple asset from <code>node_modules</code> folder.</p>\n\n<pre><code>$fa-font-path: \"font-awesome/fonts\" !default;\n\n@import 'font-awesome/scss/font-awesome';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5444158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f18150fa86cafdc96297b8ae21a7f4a2?s=128&d=identicon&r=PG&f=1", "display_name": "s0r1n", "link": "https://stackoverflow.com/users/5444158/s0r1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1530882394, "creation_date": 1530882394, "answer_id": 51211103, "question_id": 41248361, "link": "https://stackoverflow.com/questions/41248361/rails-no-route-matches-get-assets-font-awesome/51211103#51211103", "title": "Rails No route matches [GET] &quot;/assets/font-awesome&quot;", "body": "<p>I had a similar error in Rails 5 and I solved it by adding <code>config.assets.debug = true</code> in the corresponding environment.</p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1431, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1530882394, "creation_date": 1482256124, "question_id": 41248361, "link": "https://stackoverflow.com/questions/41248361/rails-no-route-matches-get-assets-font-awesome", "title": "Rails No route matches [GET] &quot;/assets/font-awesome&quot;", "body": "<p>I have a project and in production server it rise exception. (It's all ok on local host).</p>\n\n<pre><code>I, [2016-12-20T11:59:24.437623 #2835]  INFO -- : Started GET \"/assets/font-awesome/fonts/fontawesome-webfont-52453754952f43a7e1f68a01422139fb.woff2?v=4.3.0\" for 127.0.0.1 at 201$\nF, [2016-12-20T11:59:24.439527 #2835] FATAL -- :\nActionController::RoutingError (No route matches [GET] \"/assets/font-awesome/fonts/fontawesome-webfont-52453754952f43a7e1f68a01422139fb.woff2\")\n</code></pre>\n\n<p>I don't understand why on local host it's ok, but in production it gives error, and how to fix it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1482255192, "post_id": 41248044, "comment_id": 69696261, "body": "if you have a uniqueness error on the session then I would guess you have a validation on the session that shouldn&#39;t exist? User data should be unique, not necessarily the session"}, {"owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "reply_to_user": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1482255337, "post_id": 41248044, "comment_id": 69696329, "body": "where would i have added a validation to the session or could it be something already in devise. sorry im a bit of a noob at rails"}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1482255415, "post_id": 41248044, "comment_id": 69696387, "body": "in your models somewhere? session model?"}, {"owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "reply_to_user": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1482255510, "post_id": 41248044, "comment_id": 69696449, "body": "I dont have a session model so would it be located within devise somewhere then? maybe one of the modules on the user?"}], "owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482255419, "creation_date": 1482254840, "last_edit_date": 1482255419, "question_id": 41248044, "link": "https://stackoverflow.com/questions/41248044/problems-signing-in-as-a-devise-user-in-rails-app", "title": "Problems signing in as a devise user in rails app", "body": "<p>I am trying to sign a user in through devise but I keep getting the following error: <code>ActiveRecord::RecordNotUnique</code> in <code>Users::SessionsController#create</code>. I really can't figure this out, can anyone help please?</p>\n\n<p>Here is the controller:</p>\n\n<pre><code>class Users::SessionsController &lt; Devise::SessionsController\n  include ApplicationHelper\n\n  def create\n    self.resource = warden.authenticate!(auth_options)\n    set_flash_message!(:notice, :signed_in)\n    sign_in(resource_name, resource)\n    yield resource if block_given?\n    respond_with resource, location: after_sign_in_path_for(resource)\n  end\n\n  def sign_in_form\n  end\n\nend\n</code></pre>\n\n<p>Here is the form I am submitting:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n    &lt;span id=\"close-button\" class=\"glyphicon glyphicon-remove pull-right\"&gt;&lt;/span&gt;\n\n    &lt;h2&gt;Log in&lt;/h2&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email,  { :class =&gt; \"form-control\", autofocus: true } %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :password %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, :class =&gt; \"form-control\", autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;% if devise_mapping.rememberable? -%&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.check_box :remember_me %&gt;\n      &lt;%= f.label :remember_me %&gt;\n    &lt;/div&gt;\n  &lt;% end -%&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Log in\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It is probably something really simple I just dont understand the device well enough to see what it is. Let me know if you need any more information. </p>\n"}, {"tags": ["ruby", "types"], "answers": [{"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 2, "last_activity_date": 1482254260, "creation_date": 1482254260, "answer_id": 41247880, "question_id": 41247663, "link": "https://stackoverflow.com/questions/41247663/number-in-array-not-typed-as-integer/41247880#41247880", "title": "Number in array not typed as integer?", "body": "<p>Your problem may be due to that fact that you iteration goes one past the end of your input array. </p>\n\n<p>0..arr.length will process indexes of 0, 1, 2, 3, 4 for your test example. The last element of that array has an index of 3.</p>\n\n<p>I believe you want 0...arr.length to make this make more sense.</p>\n\n<p>Note the ... in the second example vs .. in yours.</p>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1482254889, "post_id": 41247942, "comment_id": 69696091, "body": "I can&#39;t agree with the first sentence. The issue has nothing to do with <code>for</code> or its incorrect usage, it&#39;s a simple off-by-one error. There&#39;s nothing <i>wrong</i> with using <code>for</code>, or the way he&#39;s using <code>for</code>, it just happens to be discourage in favor of <code>.each</code> <i>by convention</i>. He would have encountered the same problem if he used <code>(0..arr.length).each do |i|</code> instead of using <code>for</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1482254967, "post_id": 41247942, "comment_id": 69696139, "body": "@meagar What I mean is using <code>for</code> in the classic sense <i>invites</i> off-by-one errors. I don&#39;t know how many bits of C or C++ code I&#39;ve seen with issues precisely like this. <code>each</code> is almost foolproof, it only iterates over what&#39;s present in the array, and <code>each_with_index</code> is likewise safe."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1482255068, "post_id": 41247942, "comment_id": 69696191, "body": "<code>for</code> can also be foolproof, and it absolutely does not invite off-by-one errors when used correctly, the same as <code>.each</code>. If he&#39;d used <code>for i in arr</code> things would have been fine. I agree completely that <code>.each</code> is by far the more idiomatic way of iterating over an enumerable, but I still disagree with blaming <code>for</code> for the problems here."}, {"owner": {"reputation": 2870, "user_id": 4769440, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Cpp5N.png?s=128&g=1", "display_name": "Daniel Lizik", "link": "https://stackoverflow.com/users/4769440/daniel-lizik"}, "edited": false, "score": 0, "creation_date": 1482255071, "post_id": 41247942, "comment_id": 69696194, "body": "I marked this as the answer since I appreciate the more idiomatic examples. I also agree that <code>each</code> seems less prone to error."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2870, "user_id": 4769440, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Cpp5N.png?s=128&g=1", "display_name": "Daniel Lizik", "link": "https://stackoverflow.com/users/4769440/daniel-lizik"}, "edited": false, "score": 1, "creation_date": 1482255166, "post_id": 41247942, "comment_id": 69696244, "body": "@Daniel_L The real power of Ruby is in the <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> module as there&#39;s a method for nearly every occasion in there. It&#39;s worth having a look through there to see what&#39;s available as some of those methods can save you a ton of time. Hope that helps."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1482254499, "creation_date": 1482254499, "answer_id": 41247942, "question_id": 41247663, "link": "https://stackoverflow.com/questions/41247663/number-in-array-not-typed-as-integer/41247942#41247942", "title": "Number in array not typed as integer?", "body": "<p>You're getting into trouble here primarily because you're using <code>for</code>, and you're using it incorrectly. As odd as it might seem, <code>for</code> is hardly ever used in Ruby. Instead <code>each</code> and other Enumerable variants are encouraged.</p>\n\n<p>Here's a more Ruby idiomatic version of your code:</p>\n\n<pre><code>def test(arr)\n  cache = [ ]\n\n  arr.each_with_index do |e, i|\n    cache[i] = true\n  end\n\n  cache\nend\n</code></pre>\n\n<p>You can even refactor this further if you're doing a simple transform where the index isn't relevant:</p>\n\n<pre><code>def test(arr)\n  arr.map do |e|\n    true\n  end\nend\n</code></pre>\n\n<p>If you inspected what value <code>i</code> was assuming during each iteration of your loop you'd see it creeps past the end of your array, and so ends up returning <code>nil</code> from an out-of-bounds call. <code>.to_i</code> converts this back to <code>0</code> which paves over the problem but doesn't fix it.</p>\n\n<p>If you want to use ranges like that use <code>0...arr.length</code> where the <code>...</code> operator goes up to <em>but does not include</em> the ending bound.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482267360, "post_id": 41248007, "comment_id": 69702651, "body": "This is a more accurate implementation of the OP code, than the actual accepted answer"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1482255054, "last_edit_date": 1482255054, "creation_date": 1482254712, "answer_id": 41248007, "question_id": 41247663, "link": "https://stackoverflow.com/questions/41247663/number-in-array-not-typed-as-integer/41248007#41248007", "title": "Number in array not typed as integer?", "body": "<p>You are accessing an element that doesn't exist: the first index is 0, the last index is <code>length-1</code>, ergo <code>arr[arr.length]</code> doesn't exist and returns <code>nil</code>, which means that <code>cache[arr[arr.length]]</code> is <code>cache[nil]</code>, and since <code>cache</code> is an array and arrays are indexed by integers, it tries to convert <code>nil</code> to an integer using <code>to_int</code> but fails.</p>\n\n<p>The immediate fix is to not iterate till <code>arr.length</code>, either by constructing the inclusive range till <code>arr.length-1</code> or using an exclusive range.</p>\n\n<p>But the <em>real</em> answer is that anytime you are writing a loop, you are doing something wrong and there is a method in the <code>Enumerable</code> API that you should rather be using instead. Unfortunately, it is not quite clear from your code what it is even supposed to be doing, right now it simply returns the range and has no side-effects, so it is pretty much doing nothing.</p>\n\n<p>Is this what you are looking for?</p>\n\n<pre><code>def test(arr)\n  arr.each_with_object([]) do |el, acc| acc[el] = true end\nend\n\ntest([1, 5, 8, 11])\n#=&gt; [nil, true, nil, nil, nil, true, nil, nil, true, nil, nil, true]\n</code></pre>\n"}], "owner": {"reputation": 2870, "user_id": 4769440, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Cpp5N.png?s=128&g=1", "display_name": "Daniel Lizik", "link": "https://stackoverflow.com/users/4769440/daniel-lizik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 41247942, "answer_count": 3, "score": 2, "last_activity_date": 1482255054, "creation_date": 1482253547, "last_edit_date": 1495540418, "question_id": 41247663, "link": "https://stackoverflow.com/questions/41247663/number-in-array-not-typed-as-integer", "title": "Number in array not typed as integer?", "body": "<p>Given the following:</p>\n\n<pre><code>def test(arr)\n  cache = []\n  for i in 0..arr.length\n    if !cache[arr[i]] # no implicit conversion from nil to integer\n      cache[arr[i]] = true\n    end\n    if !cache[arr[i]].to_i # no implicit conversion from nil to integer\n      cache[arr[i]] = true\n    end\n    if !cache[arr[i].to_i] # works fine\n      cache[arr[i]] = true\n    end\n  end\nend\n\nputs test([1, 5, 8, 11])\n</code></pre>\n\n<p>Why does <code>cache[arr[i]]</code> require the <code>to_i</code> conversion? From <a href=\"https://stackoverflow.com/a/6120326/4769440\">this answer</a> </p>\n\n<blockquote>\n  <p>your error is coming from the C code inside the Ruby interpreter. A core class, implemented in C, is being handed a nil when it expects an Integer. It may have a #to_i but it doesn't have a #to_int and so the result is the TypeError.</p>\n</blockquote>\n\n<p>I don't see how converting <code>arr[i].to_i</code> solves the error, since <code>arr[i]</code> is already an integer?</p>\n"}, {"tags": ["ruby", "switch-statement", "minitest"], "comments": [{"owner": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "edited": false, "score": 0, "creation_date": 1482251852, "post_id": 41247090, "comment_id": 69694222, "body": "Yes, to test every path through this code, you will need to write a test for each <code>when</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1482261037, "post_id": 41247090, "comment_id": 69699346, "body": "This is a really contrived example. Most of the time you&#39;ll need to make a number of exercise cases where a series of events are performed. Sometimes these get so complicated that you&#39;ll want to specify the input and expected output in a series of case files stored as JSON or YAML for simplicity. Make sure you not only execute all possible paths, but a representative sample of invalid paths as well, like empty strings, <code>nil</code> values, or invalid input like <code>$</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482252913, "post_id": 41247171, "comment_id": 69694917, "body": "<code>user_answer</code> refers to the method created by <code>attr_reader :user_answer</code>. It returns <code>@user_answer</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1482260953, "post_id": 41247171, "comment_id": 69699288, "body": "Although you&#39;re on the right track here none of this will work because <code>puts</code> returns <code>nil</code>. The original code is not easily tested, but could be adapted to be more friendly."}, {"owner": {"reputation": 492, "user_id": 8773858, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-neWH_DwCy6U/AAAAAAAAAAI/AAAAAAAABWs/EJIBPUBRFr0/photo.jpg?sz=128", "display_name": "Quintessa Anderson", "link": "https://stackoverflow.com/users/8773858/quintessa-anderson"}, "edited": false, "score": 0, "creation_date": 1563233939, "post_id": 41247171, "comment_id": 100623797, "body": "This is super useful!! Although the first method didn&#39;t work, the second way did after the refactor you commended!"}], "tags": [], "owner": {"reputation": 789, "user_id": 1562945, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fad9bc7656bdec001337af28820a2140?s=128&d=identicon&r=PG", "display_name": "phortx", "link": "https://stackoverflow.com/users/1562945/phortx"}, "is_accepted": false, "score": 3, "last_activity_date": 1482305250, "last_edit_date": 1482305250, "creation_date": 1482251991, "answer_id": 41247171, "question_id": 41247090, "link": "https://stackoverflow.com/questions/41247090/writing-a-test-for-a-case-statement-in-ruby/41247171#41247171", "title": "Writing a test for a case statement in Ruby", "body": "<p>You have to test each case branch. Via RSpec it would work that way:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>describe Game do\n  subject { Game }\n\n  describe '#input' do\n     expect_any_instance_of(Game).to receive(:puts).with('information')\n     Game.new('i').input\n\n     expect_any_instance_of(Game).to receive(:puts).with('quitter')\n     Game.new('q').input\n\n     expect_any_instance_of(Game).to receive(:puts).with('player play')\n     Game.new('p').input\n    end\nend\n</code></pre>\n\n<p>However due the fact that <code>puts</code> is ugly to test, you should refactor your code to something like that:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'pry'\nrequire_relative 'messages'\n\nclass Game\n  attr_reader :user_answer\n\n  def initialize(user_answer = gets.chomp.downcase)\n    @user_answer = user_answer\n  end\n\n  def input\n    case user_answer\n    when \"i\"\n     \"information\"\n    when \"q\"\n      \"quitter\"\n    when \"p\"\n      \"player play\"\n    end\n  end\n\n  def print_input\n    puts input\n  end\nend\n</code></pre>\n\n<p>Then you can test with RSpec via:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>describe Game do\n  subject { Game }\n\n  describe '#print_input' do\n    expect_any_instance_of(Game).to receive(:puts).with('quitter')\n    Game.new('q').print_input\n  end\n\n  describe '#input' do\n     expect(Game.new('i').input).to eq('information')\n     expect(Game.new('q').input).to eq('quitter')\n     expect(Game.new('i').input).to eq('player play')\n     expect(Game.new('x').input).to eq(nil)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1482269243, "post_id": 41248391, "comment_id": 69703563, "body": "<code>assert_output</code> is the most functional way to test this concept since we cannot rely on the the return value (which will always be nil)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 4, "last_activity_date": 1482258458, "last_edit_date": 1495540946, "creation_date": 1482256230, "answer_id": 41248391, "question_id": 41247090, "link": "https://stackoverflow.com/questions/41247090/writing-a-test-for-a-case-statement-in-ruby/41248391#41248391", "title": "Writing a test for a case statement in Ruby", "body": "<p><a href=\"https://stackoverflow.com/a/26855137/5101493\">This answer</a> will help you. Nonetheless I'll post one way of applying it to your situation. As suggested by @phortx when initializing a game, override the default user-input with the relevant string. Then by using <code>assert_output</code> we can do something like:</p>\n\n<pre><code>#test_game.rb\nrequire './game.rb'         #name and path of your game script\nrequire 'minitest/autorun'  #needed to run tests\n\nclass GameTest &lt; MiniTest::Test\n\n  def setup\n    @game_i = Game.new(\"i\")  #overrides default user-input\n    @game_q = Game.new(\"q\")\n    @game_p = Game.new(\"p\")\n  end\n\n  def test_case_i\n    assert_output(/information\\n/) {@game_i.input}\n  end\n\n  def test_case_q\n    assert_output(/quitter\\n/) {@game_q.input}\n  end\n\n  def test_case_p\n    assert_output(/player play\\n/) {@game_p.input}\n  end\nend\n</code></pre>\n\n<p>Running the tests...</p>\n\n<pre><code>$ ruby test_game.rb\n#Run options: --seed 55321\n\n## Running:\n\n#...\n\n#Finished in 0.002367s, 1267.6099 runs/s, 2535.2197 assertions/s.\n\n#3 runs, 6 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5231062, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/wxAd0.jpg?s=128&g=1", "display_name": "Beth Knight", "link": "https://stackoverflow.com/users/5231062/beth-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 41248391, "answer_count": 2, "score": 1, "last_activity_date": 1482305250, "creation_date": 1482251725, "last_edit_date": 1482260759, "question_id": 41247090, "link": "https://stackoverflow.com/questions/41247090/writing-a-test-for-a-case-statement-in-ruby", "title": "Writing a test for a case statement in Ruby", "body": "<p>I'm trying to write a test for a case statement using minitest. Would I need to write separate tests for each \"when\"? I included my code below. Right now it just puts statements, but eventually it's going to redirect users to different methods. Thanks!</p>\n\n<pre><code>require 'pry'\nrequire_relative 'messages'\n\nclass Game\n  attr_reader :user_answer\n\n  def initialize(user_answer = gets.chomp.downcase)\n    @user_answer = user_answer\n  end\n\n  def input\n    case user_answer\n    when \"i\"\n      puts \"information\"\n    when \"q\"\n      puts \"quitter\"\n    when \"p\"\n      puts \"player play\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "dom", "capybara"], "comments": [{"owner": {"reputation": 46893, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1482252037, "post_id": 41246715, "comment_id": 69694329, "body": "Seems that your <code>form</code> located inside an <code>iframe</code>, that&#39;s why <code>webdriver</code> cannot <code>find</code> it. If it really so, you should switch to that <code>iframe</code> before handling your <code>input</code> field...also, check correctness of your <code>XPath</code>: I guess <code>&#39;*\\\\[contains(@value,&quot;Important Label&quot;)]&#39;)</code> should be <code>&#39;&#47;&#47;*[contains(@value,&quot;Important Label&quot;)]&#39;)</code>"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 46893, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1482252466, "post_id": 41246715, "comment_id": 69694601, "body": "Thanks, typed that bit from memory so it was <code>&#47;&#47;</code> also there are in fact 2 iframes, and both are accounted for."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1482252739, "post_id": 41246715, "comment_id": 69694791, "body": "Technically you probably want <code>.&#47;&#47;*</code> most of the time, otherwise it defeats the use of <code>within</code> and find scoping -  see <a href=\"https://github.com/teamcapybara/capybara#beware-the-xpath--trap\" rel=\"nofollow noreferrer\">github.com/teamcapybara/capybara#beware-the-xpath--trap</a>"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482254833, "post_id": 41247317, "comment_id": 69696049, "body": "received an error <code>invalid keys :with, should be one of :count, :minimum, :maximum, :between,</code> <code>:text, :id, :class, :visible, :exact, :match, :wait, :filter_set (ArgumentError)</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482254891, "post_id": 41247317, "comment_id": 69696094, "body": "@TangibleDream  What exactly was the code you tried to use? and what version of Capybara.  That list of options doesn&#39;t match the <code>field</code> selector so I&#39;m guessing you didn&#39;t actually use what I showed."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482255056, "post_id": 41247317, "comment_id": 69696182, "body": "<code>find(:xpath, [xpath], with: title) </code> <code>capybara (2.10.2)</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 1, "creation_date": 1482255099, "post_id": 41247317, "comment_id": 69696211, "body": "@TangibleDream As I stated, the <code>with</code> option is available on the <code>field</code> selector -- hence the <code>:field</code> as the first option to find."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482267771, "post_id": 41247317, "comment_id": 69702880, "body": "@TangibleDream Did this work for you when using the <code>field</code> selector?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482356474, "post_id": 41247317, "comment_id": 69746129, "body": "As per usual, the problem didn&#39;t reappear to get caught.  However, your command doesn&#39;t break it either.  So I&#39;m calling it the correct answer.  If I catch it working, I&#39;ll add comment, likewise if it breaks."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1482252457, "creation_date": 1482252457, "answer_id": 41247317, "question_id": 41246715, "link": "https://stackoverflow.com/questions/41246715/how-do-i-detect-data-that-only-appears-in-dom/41247317#41247317", "title": "How do I detect data that only appears in dom?", "body": "<p>Filling in the fields value changes the value property not the value attribute.  The HTML shows the attribute (value when page loaded), not the property (current value). To match on the property you can use the <code>with</code> option of the field selector - <a href=\"https://github.com/teamcapybara/capybara/blob/master/lib/capybara/selector.rb#L67\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara/blob/master/lib/capybara/selector.rb#L67</a></p>\n\n<pre><code>find(:field, with: 'Important Label')\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 41247317, "answer_count": 1, "score": 0, "last_activity_date": 1482252457, "creation_date": 1482250493, "last_edit_date": 1482252325, "question_id": 41246715, "link": "https://stackoverflow.com/questions/41246715/how-do-i-detect-data-that-only-appears-in-dom", "title": "How do I detect data that only appears in dom?", "body": "<p>So I am looking at a form field that occasional fails to fill in with data</p>\n\n<pre><code>.set('Important Label')       #occasionally ignored\n.send_keys('Important Label') #occasionally ignored\n</code></pre>\n\n<p>Here is how the element looks in html, with or without the field filled</p>\n\n<pre><code>&lt;input data-bind=\"textinput: form.name, errorInput: form.hasNameError\"\nplaceholder=\"Name\" class=\"form-control name-blah-form\" type=\"text\"&gt;\n</code></pre>\n\n<p>The only place I can see the data is in the DOM view by Mozilla Firebug</p>\n\n<p><a href=\"https://i.stack.imgur.com/JeYxV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JeYxV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Various finds I have attempted come up with <code>ElementNotFound</code></p>\n\n<pre><code>find(:xpath, '*//[contains(@value,\"Important Label\")]') #ElementNotFound\nfind(:xpath, '*//[contains(value,\"Important Label\")]')  #ElementNotFound \nfind(:xpath, '*//[contains(text(),\"Important Label\")]') #ElementNotFound\nfind(:xpath, '*//[@value=\"Important Label\"]')           #ElementNotFound\nfind(:xpath, '*//[value=\"Important Label\"]')            #ElementNotFound\n</code></pre>\n\n<p>This type of form field comes up in a number of places.  Detecting what is in the field would be a great help.</p>\n\n<p>Any Ideas?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "sql-delete"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1482250661, "post_id": 41246713, "comment_id": 69693495, "body": "You&#39;re looping over all the posts to create delete links inside the loop to display the posts"}], "answers": [{"tags": [], "owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "is_accepted": false, "score": 0, "last_activity_date": 1482250640, "creation_date": 1482250640, "answer_id": 41246769, "question_id": 41246713, "link": "https://stackoverflow.com/questions/41246713/duplicate-delete-links/41246769#41246769", "title": "Duplicate delete links", "body": "<p>As I see, you have 2 loops for @post,\n1. <code>for @p in @posts</code> \n2. <code>@post.each do |post|</code>\nAnd each loop is inside of for loop</p>\n"}, {"tags": [], "owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "is_accepted": true, "score": 0, "last_activity_date": 1482250794, "creation_date": 1482250794, "answer_id": 41246804, "question_id": 41246713, "link": "https://stackoverflow.com/questions/41246713/duplicate-delete-links/41246804#41246804", "title": "Duplicate delete links", "body": "<p>The problem is in <code>profile.html.erb</code>:</p>\n\n<pre><code>&lt;% if user_signed_in? %&gt;\n  &lt;% @posts.each do |post| %&gt;\n    &lt;%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Remove the <code>@posts.each</code> loop, and replace it with:</p>\n\n<pre><code>&lt;%= link_to 'Delete', @p, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7311390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a051b6cbc96fee8e339e642f2d1c6d2?s=128&d=identicon&r=PG&f=1", "display_name": "naridi", "link": "https://stackoverflow.com/users/7311390/naridi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 41246804, "answer_count": 2, "score": 0, "last_activity_date": 1482251413, "creation_date": 1482250492, "last_edit_date": 1482251413, "question_id": 41246713, "link": "https://stackoverflow.com/questions/41246713/duplicate-delete-links", "title": "Duplicate delete links", "body": "<p>On a user's profile page, a user can create posts. I've recently added a delete link for users to delete their posts. The problem however, each individual post is showing all delete links for all posts. </p>\n\n<p><a href=\"https://i.stack.imgur.com/N4c3e.png\" rel=\"nofollow noreferrer\">Example: So if Jimmy has 3 posts, each post will have 3 delete links</a></p>\n\n<p>The delete links work fine, I just need the right one to be displayed to it's individual post.</p>\n\n<p>Here's my code:</p>\n\n<p><strong>posts_controller.rb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class PostsController &lt; ApplicationController\r\n    \r\n    def index\r\n    @posts = Post.allow\r\n    end\r\n  \r\n    def new \r\n        @post = Post.new\r\n    end\r\n    \r\n    def create\r\n        @post = Post.new(post_params)\r\n        @post.user_id = current_user.id # assign the post to the user who created it.\r\n        respond_to do |f|\r\n            if (@post.save) \r\n                f.html { redirect_to \"\", notice: \"Post created!\" }\r\n            else\r\n                f.html { redirect_to \"\", notice: \"Error: Post Not Saved.\" }\r\n            end\r\n        end\r\n    end\r\n    \r\n    def destroy # users can delete their own posts\r\n    @post = Post.find(params[:id])\r\n    if current_user == @post.user\r\n        @post.destroy\r\n    end\r\n    redirect_to root_path\r\n    end\r\n    \r\n    private\r\n    def post_params # allows certain data to be passed via form.\r\n        params.require(:post).permit(:user_id, :content)\r\n        \r\n    end\r\n    \r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>profile.html.erb</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"row\"&gt;\r\n    &lt;div class=\"col-xs-12\"&gt;\r\n        &lt;div class=\"jumbotron\"&gt;\r\n            &lt;%= @username %&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;!-- row 2 --&gt;\r\n&lt;div class=\"row\"&gt;\r\n    &lt;div class=\"col-xs-3\"&gt;\r\n        &lt;div class=\"panel panel-default\"&gt;\r\n            &lt;div class=\"panel-body\"&gt;\r\n                avatar\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=\"col-xs-6\"&gt;\r\n        &lt;%= render '/components/post_form' %&gt;&lt;br&gt;\r\n        &lt;% for @p in @posts %&gt;\r\n        &lt;div class=\"panel panel-default post-panel\"&gt;\r\n          &lt;div class=\"panel-body row\"&gt;\r\n            &lt;div class=\"col-sm-1\"&gt;\r\n              &lt;img src=\"/avatar.png\" class=\"post-avatar\" height=\"50px\" width=\"50px\"&gt;&lt;/img&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=\"col-sm-11\"&gt;\r\n              &lt;p class=\"post-title\"&gt;&lt;span class=\"post-owner\"&gt;&lt;a href=\"/user/&lt;%= User.find(@p.user_id).username %&gt;\"&gt;&lt;%= User.find(@p.user_id).name %&gt;&lt;/a&gt;&lt;/span&gt; &lt;span class=\"post-creation\"&gt;- &lt;%= @p.created_at.to_formatted_s(:short) %&gt;&lt;/span&gt;&lt;/p&gt;\r\n              &lt;p class=\"post-content\"&gt;&lt;%= @p.content %&gt;&lt;/p&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=\"col-sm-12\"&gt;\r\n              &lt;p class=\"post-links\"&gt;\r\n                &lt;span class=\"glyphicon glyphicon-comment g-links\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n                &lt;span class=\"glyphicon glyphicon-retweet g-links\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n                &lt;span class=\"glyphicon glyphicon-heart g-links\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n                &lt;span class=\"glyphicon glyphicon-option-horizontal g-links\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n                &lt;% if user_signed_in? %&gt;\r\n                &lt;% @posts.each do |post| %&gt;\r\n\r\n                &lt;%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\r\n\r\n                &lt;% end %&gt;\r\n                &lt;% end %&gt;\r\n            &lt;/p&gt;\r\n            &lt;/div&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n        &lt;% end %&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=\"col-xs-3\"&gt;\r\n        &lt;div class=\"panel panel-default\"&gt;\r\n            &lt;div class=\"panel-body\"&gt;\r\n                &lt;p&gt;who to follow&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=\"panel panel-default\"&gt;\r\n            &lt;div class=\"panel-body\"&gt;\r\n                &lt;p&gt;trends&lt;/p&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>What should I do in order to fix this problem? Thanks in advance!</p>\n"}, {"tags": ["ruby", "testing", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "is_accepted": true, "score": 0, "last_activity_date": 1483013119, "creation_date": 1483013119, "answer_id": 41379401, "question_id": 41246672, "link": "https://stackoverflow.com/questions/41246672/how-to-get-the-reason-error-of-tc-failure-on-fly-using-ruby-rspec/41379401#41379401", "title": "How to get the reason (error) of TC failure on fly using Ruby + Rspec", "body": "<p>I found out the answer:</p>\n\n<pre><code>RSpec.configure do |config|\n      config.after(:each) do |result|\n        if result.exception\n          res = result.metadata[:example_group][:full_description].to_s + result.metadata[:description].to_s\n          @driver.save_screenshot \"../Reports/#{res}.png\"\n        end\n      end\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 41379401, "answer_count": 1, "score": 0, "last_activity_date": 1483013119, "creation_date": 1482250349, "question_id": 41246672, "link": "https://stackoverflow.com/questions/41246672/how-to-get-the-reason-error-of-tc-failure-on-fly-using-ruby-rspec", "title": "How to get the reason (error) of TC failure on fly using Ruby + Rspec", "body": "<p>I am trying to do some specific logic in \"after (:each)\" declarations for failed TCs.\nHow to catch the fact and the reason of TC failure using Ruby and Rspec methods?\nI tried something like:</p>\n\n<pre><code>  after(:each) do\n    if RSpec::Expectations::ExpectationNotMetError\n      e = RSpec::Expectations::ExpectationNotMetError\n      puts \"Error is: \" + e.to_s\n      @driver.save_screenshot \"../Reports/#{e}.png\"\n    end\n  end\n</code></pre>\n\n<p>But it doesn't work.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord", "generate-series"], "answers": [{"tags": [], "owner": {"reputation": 26908, "user_id": 1192728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/481baa815383ed3970e726842195f73f?s=128&d=identicon&r=PG", "display_name": "hqt", "link": "https://stackoverflow.com/users/1192728/hqt"}, "is_accepted": true, "score": 7, "last_activity_date": 1582696962, "last_edit_date": 1582696962, "creation_date": 1482413889, "answer_id": 41284479, "question_id": 41246379, "link": "https://stackoverflow.com/questions/41246379/rails-activerecord-arels-unsupported-argument-type-string-construct-an-arel-n/41284479#41284479", "title": "Rails ActiveRecord Arels: Unsupported argument type: String. Construct an Arel node instead", "body": "<p>Your last parameter should be an <code>Arel::Nodes</code>. So you should wrap <code>1 day</code> into an <code>Arel::Nodes:SqlLiteral</code>. Here is updated code:</p>\n\n<pre><code>def generate_series\n      Arel::Nodes::NamedFunction.new('GENERATE_SERIES', \n             [start_date, end_date, Arel::Nodes::SqlLiteral.new('\\'1 day\\'')]\n      )\nend\n</code></pre>\n\n<p>Noted that you must also wrap <code>1 day</code> inside (single) quotes, i.e: <code>'1 day'</code>. Because if you don't do this, the generated query will be:</p>\n\n<pre><code>GENERATE_SERIES(start, stop, 1 day) \n</code></pre>\n\n<p>But true query should be:</p>\n\n<pre><code>GENERATE_SERIES(start, stop, '1 day') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8357, "user_id": 47185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/47f28e60db02c75ca0fae638bb3e8304?s=128&d=identicon&r=PG", "display_name": "Tyler Rick", "link": "https://stackoverflow.com/users/47185/tyler-rick"}, "is_accepted": false, "score": 9, "last_activity_date": 1515456434, "creation_date": 1515456434, "answer_id": 48159784, "question_id": 41246379, "link": "https://stackoverflow.com/questions/41246379/rails-activerecord-arels-unsupported-argument-type-string-construct-an-arel-n/48159784#48159784", "title": "Rails ActiveRecord Arels: Unsupported argument type: String. Construct an Arel node instead", "body": "<p>You can use <code>Arel::Nodes.build_quoted</code> to quote literals:</p>\n\n<pre><code>def generate_series\n      Arel::Nodes::NamedFunction.new('GENERATE_SERIES', \n             [start_date, end_date, Arel::Nodes.build_quoted('1 day')]\n      )\nend\n</code></pre>\n\n<p>The advantage of this is that you don't have to remember to include and manually escape quotes like you do with <code>Arel::Nodes::SqlLiteral</code>.</p>\n"}], "owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8588, "favorite_count": 2, "accepted_answer_id": 41284479, "answer_count": 2, "score": 4, "last_activity_date": 1582696962, "creation_date": 1482249446, "last_edit_date": 1482262278, "question_id": 41246379, "link": "https://stackoverflow.com/questions/41246379/rails-activerecord-arels-unsupported-argument-type-string-construct-an-arel-n", "title": "Rails ActiveRecord Arels: Unsupported argument type: String. Construct an Arel node instead", "body": "<p>I'm using <code>Arels</code> for creating query. In this query, I use <code>generate_series</code> function. Here is my code: </p>\n\n<pre><code>    def generate_series\n      Arel::Nodes::NamedFunction.new('GENERATE_SERIES', [start_date, end_day, '1 day'])\n    end\n\ndef start_date\n      Arel::Nodes::SqlLiteral.new(&lt;&lt;-SQL\n         CASE WHEN DATE_PART('hour', NOW() AT TIME ZONE 'ICT') &lt; #{Time.now - 3days} THEN (CURRENT_DATE - INTERVAL '14 days') ELSE (CURRENT_DATE - INTERVAL '13 days') END\n      SQL\n      )\n    end\n\n    def end_date\n      Arel::Nodes::SqlLiteral.new(&lt;&lt;-SQL\n         CASE WHEN DATE_PART('hour', NOW() AT TIME ZONE 'ICT') &lt; #{Time.now} THEN (CURRENT_DATE - INTERVAL '1 day') ELSE CURRENT_DATE END\n      SQL\n      )\n    end\n</code></pre>\n\n<p>When I try to test by <code>generate_series.to_sql</code>. I meet exception:</p>\n\n<blockquote>\n  <p>Arel::Visitors::UnsupportedVisitError: Unsupported argument type:\n  String. Construct an Arel node instead.</p>\n</blockquote>\n\n<p>I try to shorter my code for testing:</p>\n\n<pre><code>def generate_series\n      Arel::Nodes::NamedFunction.new('GENERATE_SERIES', ['19/11/2012', '20/11/2012', '1 day'])\n end\n</code></pre>\n\n<p>The problem is same. Please tell me how can I fix this problem.</p>\n"}, {"tags": ["ruby", "localhost", "cucumber", "selenium-chromedriver", "portable-applications"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3932430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b5028cbd50cb4cf358aa8cf32b7da2f?s=128&d=identicon&r=PG", "display_name": "Mark Duivesteijn", "link": "https://stackoverflow.com/users/3932430/mark-duivesteijn"}, "is_accepted": false, "score": 0, "last_activity_date": 1482828847, "creation_date": 1482828847, "answer_id": 41341945, "question_id": 41246210, "link": "https://stackoverflow.com/questions/41246210/how-to-configure-env-rb-to-start-portable-chrome-instead-of-local-installation/41341945#41341945", "title": "How to configure env.rb to start portable chrome (instead of local installation) with Ruby, Selenium and LapisLazuli", "body": "<p>I think the following is answering the question. I've added require selenium-webdriver and that Chrome.path to the env.rb and this seems to work.</p>\n\n<pre><code>require 'lapis_lazuli'\nrequire 'lapis_lazuli/cucumber'\nrequire 'selenium-webdriver'\n\nSelenium::WebDriver::Chrome.path = 'C:\\chrome_portable_v53\\chrome.exe'\nLapisLazuli::WorldModule::Config.config_file = \"config/config.yml\"\n\nWorld(LapisLazuli)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3932430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b5028cbd50cb4cf358aa8cf32b7da2f?s=128&d=identicon&r=PG", "display_name": "Mark Duivesteijn", "link": "https://stackoverflow.com/users/3932430/mark-duivesteijn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482828847, "creation_date": 1482248899, "last_edit_date": 1495542825, "question_id": 41246210, "link": "https://stackoverflow.com/questions/41246210/how-to-configure-env-rb-to-start-portable-chrome-instead-of-local-installation", "title": "How to configure env.rb to start portable chrome (instead of local installation) with Ruby, Selenium and LapisLazuli", "body": "<p><strong>Question</strong>:</p>\n\n<p>For my Test Automation Suite I would like to know how to configure/setup my portable Chrome to run instead of the local installed Chrome.  </p>\n\n<p><strong>Reason</strong>: </p>\n\n<p>There is an issue with the application I'm trying to test and Chrome Version 55. Issue: Certain buttons are since this version not clickable and I want to bypass this for the time being by using an older Chrome version.  </p>\n\n<p>I use Ruby version 2.3.0p0 (2015-12-25 revision 53290)<br>\nAnd LapisLazuli as described on www.testautomation.info<br>\nThe setup itself is working. The answer might be simple, but I did not manage to get this running in this combination.<br>\nI found information about selenium/Java, but I have no idea how to get that to work with my setup.\n<a href=\"https://stackoverflow.com/questions/32817962/selenium-not-starting-portable-chrome-but-local-installation\">Selenium not starting portable chrome but local installation</a><br>\nI also found this website: <a href=\"https://leanpub.com/watirbook/read\" rel=\"nofollow noreferrer\">https://leanpub.com/watirbook/read</a>\nAnd here they mentioned the following:</p>\n\n<p><code>3 &gt; require \"selenium-webdriver\"\n4 =&gt; true\n5 \n6 &gt; Selenium::WebDriver::Chrome.path =\n7 'C:\\chrome\\chrome.exe'\n8 =&gt; \"C:\\\\chrome\\\\chrome.exe\"</code></p>\n\n<p>So I tried that in irb and this worked </p>\n\n<p><code>require 'lapis_lazuli'\n include LapisLazuli\n Selenium::WebDriver::Chrome.path = 'C:\\chrome_portable_v53\\chrome.exe'\n browser :chrome</code>    </p>\n\n<p>The portable chrome version was started. Now I only need to know how to place this in my env.rb file (I assume), which looks currently like this:</p>\n\n<p><code>require 'lapis_lazuli'\n require 'lapis_lazuli/cucumber'\n LapisLazuli::WorldModule::Config.config_file = \"config/config.yml\"\n World(LapisLazuli)</code>    </p>\n"}, {"tags": ["ruby", "shell", "command-line"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1482247851, "post_id": 41245796, "comment_id": 69691654, "body": "You mean a library like <code>ncourses</code>, which allows you to control the display to the level of printing in a certain (row,column) position?"}, {"owner": {"reputation": 268, "user_id": 2474531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/47L40.jpg?s=128&g=1", "display_name": "thrgamon", "link": "https://stackoverflow.com/users/2474531/thrgamon"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1482248081, "post_id": 41245796, "comment_id": 69691798, "body": "Thanks @ed-de-almeida, do you mean instead of &#39;ngrok&#39; or that I should look at ncourses? If the former, I just meant that when you use the tool it has a persistent display. Is this the library you are referring to <a href=\"https://en.wikipedia.org/wiki/Ncurses\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Ncurses</a>?"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1482248140, "post_id": 41245796, "comment_id": 69691842, "body": "Yes its called <code>ncurses</code> (or the preceding <code>curses</code>)."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1482248534, "post_id": 41245796, "comment_id": 69692114, "body": "Yes, I thought about a more sophisitcated approach, printing to a permanent screen with ncourses. But you may surely consider other options. The most easy, of course, is clearing the screen and printing the board all over again, for each new position filled. I did this once in a go-moku game I was programming and it worked well."}, {"owner": {"reputation": 268, "user_id": 2474531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/47L40.jpg?s=128&g=1", "display_name": "thrgamon", "link": "https://stackoverflow.com/users/2474531/thrgamon"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1482249401, "post_id": 41245796, "comment_id": 69692663, "body": "Brilliant, thanks guys. I&#39;m checking out the <a href=\"https://github.com/eclubb/ncurses-ruby\" rel=\"nofollow noreferrer\">ncurses ruby gem</a> and also <a href=\"https://github.com/gavinlaking/vedeu\" rel=\"nofollow noreferrer\">vedeu</a> which looks good! Interesting suggestion on clearing the screen @eddealmeida, much simpler! I will look at that as well."}], "answers": [{"tags": [], "owner": {"reputation": 268, "user_id": 2474531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/47L40.jpg?s=128&g=1", "display_name": "thrgamon", "link": "https://stackoverflow.com/users/2474531/thrgamon"}, "is_accepted": false, "score": 1, "last_activity_date": 1482249641, "creation_date": 1482249641, "answer_id": 41246453, "question_id": 41245796, "link": "https://stackoverflow.com/questions/41245796/persistent-command-line-display/41246453#41246453", "title": "Persistent Command Line Display", "body": "<p>So the question is marked as answered I thought I would write up the advice given to me in the comments. </p>\n\n<p>It looks like the <a href=\"https://github.com/eclubb/ncurses-ruby\" rel=\"nofollow noreferrer\">ncurses ruby gem</a> and <a href=\"https://github.com/gavinlaking/vedeu\" rel=\"nofollow noreferrer\">vedeu</a> offer the functionality that I need. Another alternative would be to clear the scren and reprint the output.</p>\n"}, {"comments": [{"owner": {"reputation": 268, "user_id": 2474531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/47L40.jpg?s=128&g=1", "display_name": "thrgamon", "link": "https://stackoverflow.com/users/2474531/thrgamon"}, "edited": false, "score": 0, "creation_date": 1482252067, "post_id": 41247112, "comment_id": 69694352, "body": "Perfect, thanks! You&#39;ve also just suggested a much more efficient way of printing the lines than I had been doing so doubly useful!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1482252735, "last_edit_date": 1482252735, "creation_date": 1482251799, "answer_id": 41247112, "question_id": 41245796, "link": "https://stackoverflow.com/questions/41245796/persistent-command-line-display/41247112#41247112", "title": "Persistent Command Line Display", "body": "<p>Depending on your needs, erasing the screen and creating the grid again could be good enough :</p>\n\n<pre><code>def show_grid\n  line = '+---+---+---+---+---+---+---+---+---+'\n  puts line\n  9.times do\n    row = (1..9).map { rand(9) + 1 }\n    puts '| ' + row.join(' | ') + ' |'\n    puts line\n  end\nend\n\ndef clear_screen\n  system('clear') || system('cls')\nend\n\nloop do\n  clear_screen\n  show_grid\n  sleep 1\nend\n</code></pre>\n\n<p>It outputs </p>\n\n<pre><code>+---+---+---+---+---+---+---+---+---+\n| 1 | 2 | 7 | 3 | 4 | 9 | 8 | 6 | 5 |\n+---+---+---+---+---+---+---+---+---+\n| 1 | 8 | 1 | 7 | 6 | 2 | 2 | 1 | 3 |\n+---+---+---+---+---+---+---+---+---+\n| 2 | 2 | 1 | 2 | 2 | 8 | 2 | 3 | 6 |\n+---+---+---+---+---+---+---+---+---+\n| 5 | 3 | 6 | 1 | 5 | 3 | 2 | 7 | 9 |\n+---+---+---+---+---+---+---+---+---+\n| 9 | 7 | 7 | 4 | 7 | 2 | 2 | 9 | 1 |\n+---+---+---+---+---+---+---+---+---+\n| 5 | 9 | 1 | 9 | 3 | 7 | 8 | 3 | 1 |\n+---+---+---+---+---+---+---+---+---+\n| 8 | 5 | 4 | 7 | 3 | 2 | 2 | 5 | 3 |\n+---+---+---+---+---+---+---+---+---+\n| 4 | 7 | 1 | 1 | 4 | 8 | 4 | 1 | 1 |\n+---+---+---+---+---+---+---+---+---+\n| 1 | 1 | 8 | 4 | 2 | 4 | 8 | 3 | 8 |\n+---+---+---+---+---+---+---+---+---+\n</code></pre>\n\n<p>then </p>\n\n<pre><code>+---+---+---+---+---+---+---+---+---+\n| 6 | 4 | 4 | 3 | 5 | 5 | 8 | 9 | 1 |\n+---+---+---+---+---+---+---+---+---+\n| 7 | 7 | 7 | 3 | 3 | 2 | 8 | 7 | 6 |\n+---+---+---+---+---+---+---+---+---+\n| 6 | 2 | 2 | 1 | 4 | 7 | 1 | 1 | 9 |\n+---+---+---+---+---+---+---+---+---+\n| 3 | 8 | 7 | 7 | 7 | 9 | 7 | 4 | 4 |\n+---+---+---+---+---+---+---+---+---+\n| 4 | 1 | 2 | 8 | 6 | 7 | 1 | 9 | 3 |\n+---+---+---+---+---+---+---+---+---+\n| 6 | 7 | 7 | 5 | 1 | 7 | 6 | 7 | 4 |\n+---+---+---+---+---+---+---+---+---+\n| 8 | 2 | 3 | 5 | 3 | 5 | 4 | 7 | 2 |\n+---+---+---+---+---+---+---+---+---+\n| 5 | 9 | 3 | 2 | 4 | 2 | 9 | 6 | 3 |\n+---+---+---+---+---+---+---+---+---+\n| 1 | 7 | 8 | 9 | 4 | 3 | 4 | 1 | 5 |\n+---+---+---+---+---+---+---+---+---+\n</code></pre>\n\n<p>then...</p>\n\n<p>It should work on Windows/Linux/MacOs.</p>\n\n<p>For anything more complex, you'll need an ncurses gem.</p>\n"}], "owner": {"reputation": 268, "user_id": 2474531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/47L40.jpg?s=128&g=1", "display_name": "thrgamon", "link": "https://stackoverflow.com/users/2474531/thrgamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41247112, "answer_count": 2, "score": 3, "last_activity_date": 1482252735, "creation_date": 1482247581, "question_id": 41245796, "link": "https://stackoverflow.com/questions/41245796/persistent-command-line-display", "title": "Persistent Command Line Display", "body": "<p>I am writing a little Sudoku solving app in Ruby that just outputs to the terminal. For example: </p>\n\n<pre><code> ruboku $ ruby grid.rb\n+---+---+---+---+---+---+---+---+---+\n| 2 | 8 | 5 |   | 3 | 1 | 7 | 6 | 9 |\n+---+---+---+---+---+---+---+---+---+\n| 5 |   | 4 | 8 | 7 | 2 | 1 | 9 | 3 |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n|   |   |   |   |   |   |   |   |   |\n+---+---+---+---+---+---+---+---+---+\n</code></pre>\n\n<p>Is there a way to keep this as a persistent display such that when there is new information to show it doesn't print a new line, but updates the grid that is already displaying?  </p>\n\n<p>I've seen some tools such as ngrok who do this. </p>\n\n<p>Thanks for your time, </p>\n\n<p>Tom</p>\n"}, {"tags": ["ruby", "bash", "shell"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1482246622, "creation_date": 1482246622, "answer_id": 41245478, "question_id": 41245413, "link": "https://stackoverflow.com/questions/41245413/run-from-command-line-ruby-method-with-return-value/41245478#41245478", "title": "Run from command line ruby method with return value", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-exit\" rel=\"nofollow noreferrer\"><code>Kernel#exit</code></a>:</p>\n\n<pre><code>ruby -e 'require \"file.rb\"; exit MyClass.my_method?' \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1482246726, "creation_date": 1482246726, "answer_id": 41245505, "question_id": 41245413, "link": "https://stackoverflow.com/questions/41245413/run-from-command-line-ruby-method-with-return-value/41245505#41245505", "title": "Run from command line ruby method with return value", "body": "<p>This is a highly unusual way to call Ruby code, but if you do need to do it:</p>\n\n<pre><code>ruby -r ./file.rb -e 'exit(MyClass.my_method? ? 0 : -1)'\n</code></pre>\n\n<p>That converts a boolean response to something explicitly passed through to <code>exit</code> where you can collect it as an exit code. You can map your result to some kind of error code if necessary. I've just used -1 as an example here.</p>\n"}], "owner": {"reputation": 75, "user_id": 4521192, "user_type": "registered", "profile_image": "https://graph.facebook.com/710394772/picture?type=large", "display_name": "Santi Aguilera", "link": "https://stackoverflow.com/users/4521192/santi-aguilera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 41245478, "answer_count": 2, "score": 0, "last_activity_date": 1482246774, "creation_date": 1482246429, "last_edit_date": 1482246774, "question_id": 41245413, "link": "https://stackoverflow.com/questions/41245413/run-from-command-line-ruby-method-with-return-value", "title": "Run from command line ruby method with return value", "body": "<p>I have a ruby code like this:</p>\n\n<pre><code>module MyClass\n    def self.my_method?\n        return false\n    end\nend\n</code></pre>\n\n<p>From command line I have to call that method and get the return value. But if I do</p>\n\n<pre><code>ruby -e \"require './PATH/TO/THE/FILE/file.rb'; MyClass.my_method?\"\n</code></pre>\n\n<p>I always get $? or exit code = 0.</p>\n\n<p>How can I call ruby methods GETTING its return value ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482249270, "post_id": 41245385, "comment_id": 69692582, "body": "I guess development dependencies could be in the Gemfile, but anything the gem depends on will need to be in the gemspec. It&#39;s better to not lock gem dependencies to versions, which is what happens in Gemfile.lock"}, {"owner": {"reputation": 454, "user_id": 714287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a3b01a9655886ab2a1c8d0c8968565?s=128&d=identicon&r=PG", "display_name": "Costa Shapiro", "link": "https://stackoverflow.com/users/714287/costa-shapiro"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1482338761, "post_id": 41245385, "comment_id": 69736497, "body": "@maxple the question is about <code>add_development_dependency</code> and doesn&#39;t mention <code>Gemfile.lock</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1482341936, "post_id": 41245385, "comment_id": 69738226, "body": "You&#39;re talking about using the Gemfile. Which produces a Gemfile.lock. Anyway, gems require a gemspec."}], "answers": [{"tags": [], "owner": {"reputation": 72617, "user_id": 8279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d4758ccc3cc586f01e740733f3fd8b7e?s=128&d=identicon&r=PG", "display_name": "Marc-Andr&#233; Lafortune", "link": "https://stackoverflow.com/users/8279/marc-andr%c3%a9-lafortune"}, "is_accepted": true, "score": 2, "last_activity_date": 1593926627, "creation_date": 1593926627, "answer_id": 62737144, "question_id": 41245385, "link": "https://stackoverflow.com/questions/41245385/what-are-the-practical-advantages-of-using-add-development-dependency-in-gems/62737144#62737144", "title": "What are the practical advantages of using `add_development_dependency` in .gemspec?", "body": "<p>It's not clear there is any.</p>\n<p>In theory, <code>RubyGems</code> has the information necessary to run tests with <code>add_development_dependency</code> and <code>test_files</code> (see <a href=\"https://stackoverflow.com/questions/18871541/what-is-the-purpose-of-test-files-configuration-in-a-gemspec\">this question</a>).</p>\n<p>Some believe that this should be outside the scope of <code>RubyGems</code> (see <a href=\"https://github.com/rubygems/rubygems/issues/1104\" rel=\"nofollow noreferrer\">this huge thread</a>).</p>\n<p>In practice, there is currently no real advantage, and the fact that <code>RubyGems</code> still installs test files by default is a drawback, as might be the lack of flexibility that <code>Gemfile</code> offers.</p>\n"}], "owner": {"reputation": 454, "user_id": 714287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a3b01a9655886ab2a1c8d0c8968565?s=128&d=identicon&r=PG", "display_name": "Costa Shapiro", "link": "https://stackoverflow.com/users/714287/costa-shapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 62737144, "answer_count": 1, "score": 1, "last_activity_date": 1593926627, "creation_date": 1482246348, "question_id": 41245385, "link": "https://stackoverflow.com/questions/41245385/what-are-the-practical-advantages-of-using-add-development-dependency-in-gems", "title": "What are the practical advantages of using `add_development_dependency` in .gemspec?", "body": "<p>..vs just listing gems used for the gem development in Gemfile (while everyone uses bundler anyway)..</p>\n\n<p>..except for giving your fingers extra work?</p>\n"}, {"tags": ["ruby-on-rails", "sql-server", "ruby", "rails-activerecord", "tiny-tds"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1482245796, "post_id": 41245034, "comment_id": 69690165, "body": "No effort shown, no clear description of an error given, no reference to the original content is provided, and the question itself receives a <code>+1</code> immediately. I flagged it for the moderator\u2019s attention."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1482245996, "post_id": 41245034, "comment_id": 69690320, "body": "show full error log please. and also line where its complaining in the log."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1482247420, "post_id": 41245034, "comment_id": 69691358, "body": "Given this is a database question the answer is almost always <b>escape your data properly</b>. There&#39;s a high probability you&#39;re not using prepared statements with placeholder values and that&#39;s the source of all your problems."}, {"owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482250443, "post_id": 41245034, "comment_id": 69693366, "body": "@mudasobwa, from your comment it seems you thought I was gaming SO? It was not but I could see how that was suspicious.  I&#39;ve tried to update the question with relevant information please let me know if I need to include more, sorry for the lack of it earlier on."}, {"owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "edited": false, "score": 0, "creation_date": 1482250559, "post_id": 41245034, "comment_id": 69693433, "body": "I&#39;m currently looking into the idea that the string size is beyond 4000 characters and that&#39;s why its throwing the error."}, {"owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "edited": false, "score": 0, "creation_date": 1482252511, "post_id": 41245034, "comment_id": 69694635, "body": "I&#39;ve noticed that what is causing the issue is some <code>hidden characters</code>, I&#39;m currently attempting to clean/remove the screen and then I&#39;ll update my post!"}], "answers": [{"tags": [], "owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "is_accepted": true, "score": 1, "last_activity_date": 1482255163, "creation_date": 1482255163, "answer_id": 41248119, "question_id": 41245034, "link": "https://stackoverflow.com/questions/41245034/how-to-handle-unclosed-quotation-mark-after-the-character-string-in-ruby/41248119#41248119", "title": "How to handle &#39;Unclosed quotation mark after the character string&#39; in Ruby?", "body": "<p>The way I was able to correct this issue, was converting my string I was trying to save from <code>ISO-8859-1</code> to <code>UTF-8</code> by doing the following code: <code>my_string.encode!('UTF-8')</code>. This removed the invalid characters that were causing and issue.</p>\n"}], "owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 41248119, "answer_count": 1, "score": 0, "last_activity_date": 1482255163, "creation_date": 1482245292, "last_edit_date": 1482250351, "question_id": 41245034, "link": "https://stackoverflow.com/questions/41245034/how-to-handle-unclosed-quotation-mark-after-the-character-string-in-ruby", "title": "How to handle &#39;Unclosed quotation mark after the character string&#39; in Ruby?", "body": "<p>I'm getting an error when trying to grab html from a webpage and saving it to my active record object.  The message I'm getting is, <code>Unclosed quotation mark after the character string</code>. Is there a function in Ruby or a way to go about checking and then correcting instances where this happens prior to saving the record to the database?  The full error from TinyTDS is below...</p>\n\n<pre><code>ActiveRecord::StatementInvalid: TinyTds::Error: Unclosed quotation mark after the character string '\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>My apologies, didn't realize I hadn't added enough information.  I'll happily add any requests.  Let me start with the log, and also to the part about \"escaping my data\" correctly -- It's HTML from an outside source that's throwing the error.  So to that point I guess perhaps I go back to my initial question which was how do I go about locating where the unclosed quotation mark is, and then correcting it?</p>\n\n<p><strong>Error Log</strong></p>\n\n<pre><code>  SQL (27.8ms)  BEGIN TRANSACTION\n  SQL (2.8ms)  EXEC sp_executesql N'UPDATE [school_player_scrapes] SET [biography_text] = @0, [headshot_url] = @1, [updated_at] = @2 WHERE [school_player_scrapes].[id] = @3; SELECT @@ROWCOUNT AS AffectedRows', N'@0 nvarchar(max), @1 nvarchar(4000), @2 datetime, @3 int', @0 = '&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;td class=\"sm PlayerBioArticleContent\" colspan=\"2\"&gt;\n                &lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Butte College:\ufffd&lt;/span&gt;&lt;/strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Attended Butte CC in 2015.&lt;/span&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;High School:\ufffd&lt;/span&gt;&lt;/strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Attended North Little Rock High Scchool . . . Ranked a two-star recruit by Scout.com and 247 Sports . . . Recruited by schools such as Auburn, Georgia Tech and Minnesota among others.\ufffd&lt;/span&gt;&lt;/p&gt;\n            &lt;/td&gt;&lt;/body&gt;&lt;/html&gt;\n', @1 = N'http://image.cdnllnwnl.xosnetwork.com/pics33/200/IQ/IQQZSKTMHZNYBCD.20160807033143.jpg', @2 = '12-15-2016 08:24:50.657', @3 = 7444  [[\"biography_text\", \"&lt;!DOCTYPE html PUBLIC \\\"-//W3C//DTD HTML 4.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/REC-html40/loose.dtd\\\"&gt;\\n&lt;html&gt;&lt;body&gt;&lt;td class=\\\"sm PlayerBioArticleContent\\\" colspan=\\\"2\\\"&gt;\\n\\t\\t\\t\\t&lt;p&gt;&lt;strong&gt;&lt;span style=\\\"font-family: arial, helvetica, sans-serif; font-size: small;\\\"&gt;Butte College:\\xA0&lt;/span&gt;&lt;/strong&gt;&lt;span style=\\\"font-family: arial, helvetica, sans-serif; font-size: small;\\\"&gt;Attended Butte CC in 2015.&lt;/span&gt;&lt;/p&gt;\\r\\n&lt;p&gt;&lt;strong&gt;&lt;span style=\\\"font-family: arial, helvetica, sans-serif; font-size: small;\\\"&gt;High School:\\xA0&lt;/span&gt;&lt;/strong&gt;&lt;span style=\\\"font-family: arial, helvetica, sans-serif; font-size: small;\\\"&gt;Attended North Little Rock High Scchool . . . Ranked a two-star recruit by Scout.com and 247 Sports . . . Recruited by schools such as Auburn, Georgia Tech and Minnesota among others.\\xA0&lt;/span&gt;&lt;/p&gt;\\n\\t\\t\\t&lt;/td&gt;&lt;/body&gt;&lt;/html&gt;\\n\"], [\"headshot_url\", \"http://image.cdnllnwnl.xosnetwork.com/pics33/200/IQ/IQQZSKTMHZNYBCD.20160807033143.jpg\"], [\"updated_at\", Thu, 15 Dec 2016 08:24:50 EST -05:00], [\"id\", 7444]]\nTinyTds::Error: Unclosed quotation mark after the character string '&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;td class=\"sm PlayerBioArticleContent\" colspan=\"2\"&gt;\n                &lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Butte College:'.: EXEC sp_executesql N'UPDATE [school_player_scrapes] SET [biography_text] = @0, [headshot_url] = @1, [updated_at] = @2 WHERE [school_player_scrapes].[id] = @3; SELECT @@ROWCOUNT AS AffectedRows', N'@0 nvarchar(max), @1 nvarchar(4000), @2 datetime, @3 int', @0 = '&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;td class=\"sm PlayerBioArticleContent\" colspan=\"2\"&gt;\n                &lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Butte College:\ufffd&lt;/span&gt;&lt;/strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Attended Butte CC in 2015.&lt;/span&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;High School:\ufffd&lt;/span&gt;&lt;/strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Attended North Little Rock High Scchool . . . Ranked a two-star recruit by Scout.com and 247 Sports . . . Recruited by schools such as Auburn, Georgia Tech and Minnesota among others.\ufffd&lt;/span&gt;&lt;/p&gt;\n            &lt;/td&gt;&lt;/body&gt;&lt;/html&gt;\n', @1 = N'http://image.cdnllnwnl.xosnetwork.com/pics33/200/IQ/IQQZSKTMHZNYBCD.20160807033143.jpg', @2 = '12-15-2016 08:24:50.657', @3 = 7444\n  SQL (0.8ms)  IF @@TRANCOUNT &gt; 0 ROLLBACK TRANSACTION\nPerformed ScrapeSchoolRosterJob from Sidekiq(high_priority) in 2787.93ms\nActiveRecord::StatementInvalid: TinyTds::Error: Unclosed quotation mark after the character string '&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;td class=\"sm PlayerBioArticleContent\" colspan=\"2\"&gt;\n                &lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Butte College:'.: EXEC sp_executesql N'UPDATE [school_player_scrapes] SET [biography_text] = @0, [headshot_url] = @1, [updated_at] = @2 WHERE [school_player_scrapes].[id] = @3; SELECT @@ROWCOUNT AS AffectedRows', N'@0 nvarchar(max), @1 nvarchar(4000), @2 datetime, @3 int', @0 = '&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;&lt;td class=\"sm PlayerBioArticleContent\" colspan=\"2\"&gt;\n                &lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Butte College:\ufffd&lt;/span&gt;&lt;/strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Attended Butte CC in 2015.&lt;/span&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;High School:\ufffd&lt;/span&gt;&lt;/strong&gt;&lt;span style=\"font-family: arial, helvetica, sans-serif; font-size: small;\"&gt;Attended North Little Rock High Scchool . . . Ranked a two-star recruit by Scout.com and 247 Sports . . . Recruited by schools such as Auburn, Georgia Tech and Minnesota among others.\ufffd&lt;/span&gt;&lt;/p&gt;\n            &lt;/td&gt;&lt;/body&gt;&lt;/html&gt;\n', @1 = N'http://image.cdnllnwnl.xosnetwork.com/pics33/200/IQ/IQQZSKTMHZNYBCD.20160807033143.jpg', @2 = '12-15-2016 08:24:50.657', @3 = 7444\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:336:in `each'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:336:in `handle_to_names_and_values_dblib'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:325:in `handle_to_names_and_values'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:300:in `_raw_select'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:295:in `block in raw_select'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract_adapter.rb:466:in `block in log'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract_adapter.rb:460:in `log'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:295:in `raw_select'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:244:in `sp_executesql'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `exec_update'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-sqlserver-adapter-4.2.3/lib/active_record/connection_adapters/sqlserver/database_statements.rb:39:in `exec_update'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/database_statements.rb:114:in `update'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `update'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activerecord-4.2.0/lib/active_record/relation.rb:88:in `_update_record'\n... 57 levels...\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:337:in `call'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:337:in `block in simple'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `call'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `_run_callbacks'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:734:in `_run_perform_callbacks'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activejob-4.2.0/lib/active_job/execution.rb:31:in `perform_now'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/activejob-4.2.0/lib/active_job/execution.rb:16:in `perform_now'\n    from (irb):2\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in `start'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in `start'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/deploy/bane/shared/bundle/ruby/2.2.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1482245149, "post_id": 41244945, "comment_id": 69689672, "body": "<code>sub(&#47;JVM_MEM_ARGS_64BIT=&quot;-Xms\\d+m -Xmx\\d+m&quot;&#47;, ...)</code>"}, {"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482245734, "post_id": 41244945, "comment_id": 69690116, "body": "Sorry, can you give me a code snippet that I could try?  I am not yet familiar with the ruby coding though.  Thanks"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482245944, "post_id": 41244945, "comment_id": 69690270, "body": "I thought I gave it: <code>a.sub(&#47;JVM_MEM_ARGS_64BIT=&quot;-Xms\\d+m -Xmx\\d+m&quot;&#47;, &#39;JVM_MEM_ARGS_64BIT=&quot;-Xms512m -Xmx1024m&quot;&#39;)</code>."}, {"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482246709, "post_id": 41244945, "comment_id": 69690842, "body": "@mudasobwa Ohh I get it now...need to brush up on Ruby Regex...can you put your answer below instead of just a comment mate so that I could at least choose it as the correct answer.  Thanks again mate."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1482246963, "creation_date": 1482246963, "answer_id": 41245593, "question_id": 41244945, "link": "https://stackoverflow.com/questions/41244945/ruby-replace-only-part-of-the-matching-string/41245593#41245593", "title": "Ruby replace only part of the Matching String", "body": "<p><a href=\"https://ruby-doc.org/core/String.html#method-i-sub\" rel=\"nofollow noreferrer\"><code>String#sub</code></a> accepts a regular expression as a first param:</p>\n\n<pre><code>replacement = 'JVM_MEM_ARGS_64BIT=\"-Xms512m -Xmx1024m\"'\na.sub(/JVM_MEM_ARGS_64BIT=\"-Xms\\d+m -Xmx\\d+m\"/, replacement)\n</code></pre>\n"}], "owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 41245593, "answer_count": 1, "score": 0, "last_activity_date": 1482246963, "creation_date": 1482245033, "question_id": 41244945, "link": "https://stackoverflow.com/questions/41244945/ruby-replace-only-part-of-the-matching-string", "title": "Ruby replace only part of the Matching String", "body": "<p>How do I replace only part of the String in a Ruby code?</p>\n\n<p>Supposed I have a text file that contains multiple occurrences of the keyword \"JVM_MEM_ARGS_64BIT\"</p>\n\n<pre><code>JVM_MEM_ARGS_64BIT=\"-Xms512m -Xmx512m\"\n</code></pre>\n\n<p>and I only want to replace the first occurrence, I can use the #sub instead of gsub</p>\n\n<pre><code>a.sub('JVM_MEM_ARGS_64BIT=\"-Xms512m -Xmx512m\"', 'JVM_MEM_ARGS_64BIT=\"-Xms512m -Xmx1024m\"')\n</code></pre>\n\n<p>however not all files contains</p>\n\n<pre><code>JVM_MEM_ARGS_64BIT=\"-Xms512m -Xmx512m\"\n</code></pre>\n\n<p>some could be</p>\n\n<pre><code>JVM_MEM_ARGS_64BIT=\"-Xms256m -Xmx512m\"\n</code></pre>\n\n<p>I am not sure how to do this in a ruby code?  I can search for the keyword \"JVM_MEM_ARGS_64BIT\" only but how do I delete the existing value assignment and replace it with JVM_MEM_ARGS_64BIT=\"-Xms512m -Xmx1024m</p>\n\n<p>Newbie Ruby developer.</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1482247181, "post_id": 41244539, "comment_id": 69691181, "body": "You can avoid <code>eval</code> entirely here if you convert that to <code>define_method</code> with the relevant <code>send</code> or <code>call</code> calls."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482247133, "post_id": 41244885, "comment_id": 69691141, "body": "Why would you <code>refine Module</code> instead of prepending <code>Module.new { def around_aspect ... end }</code> directly to the <code>Test.singleton_class</code>?!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1482247246, "post_id": 41244885, "comment_id": 69691228, "body": "Not sure the <code>proc.()</code> calling notation is very conventional here. Also keep in mind that the return value of this wrapped function is now broken, the result of the call to <code>super</code> needs to be captured and returned."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1482247649, "post_id": 41244885, "comment_id": 69691513, "body": "@tadman: that matches the OP&#39;s behavior. An around advice is supposed to be able to change the return value. However, in the OP&#39;s code, there is no way for the after block to inspect the return value, so there&#39;s not much it can do."}, {"owner": {"reputation": 1164, "user_id": 1491639, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03dd48d2070f11eb8613a48f36d43bc2?s=128&d=identicon&r=PG", "display_name": "Abdul Rahman", "link": "https://stackoverflow.com/users/1491639/abdul-rahman"}, "edited": false, "score": 0, "creation_date": 1482407083, "post_id": 41244885, "comment_id": 69766366, "body": "@J&#246;rgWMittag you are right, the calls to before and after are getting evaluated at define time rather than call time in my code but I don&#39;t know why. I am evaluating the expressions #{before_proc.call} in my method definition and since I am using class_eval that method is being part of the current class so shouldn&#39;t it be executed when i call the method on an instance of the class. Not sure what is going on"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1164, "user_id": 1491639, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03dd48d2070f11eb8613a48f36d43bc2?s=128&d=identicon&r=PG", "display_name": "Abdul Rahman", "link": "https://stackoverflow.com/users/1491639/abdul-rahman"}, "edited": false, "score": 1, "creation_date": 1482407681, "post_id": 41244885, "comment_id": 69766767, "body": "@AbdulRahman: You are interpolating the expression <code>#{before_proc.call}</code> into the string of code. String interpolation happens when the string is parsed. And it only happens once. The result of that interpolation is simply <code>nil</code> which gets converted using <code>to_s</code> (string interpolation always uses <code>to_s</code> when the object being interpolated is not already a string). <code>nil.to_s</code> is simply the empty string, so there is no trace left of the advice in the generated code, and the only thing observable is the side effect (<code>puts</code>) at the time you interpolate the string."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1482247524, "last_edit_date": 1482247524, "creation_date": 1482244888, "answer_id": 41244885, "question_id": 41244539, "link": "https://stackoverflow.com/questions/41244539/weirdness-with-around-aspect-in-ruby/41244885#41244885", "title": "Weirdness with around aspect in ruby", "body": "<blockquote>\n  <p>The problem is that when i do <code>Test.new.test</code> I expect it to print\n  before, test and after\" in order. But right now it prints \"before,after and test\"</p>\n</blockquote>\n\n<p>No, it doesn't. When calling <code>Test.new.test</code> it only prints <code>test</code>. <code>before</code> and <code>after</code> are printed when defining the wrapped method, i.e. when calling <code>around_advice</code>.</p>\n\n<p>Try to put a <code>puts</code> in between the call to <code>around_advice</code> and the call to <code>Test.new.test</code> (and try to call <code>test</code> several times) to observe this:</p>\n\n<pre><code>puts '______________________'\n\nTest.new.test\nTest.new.test\n\n# before\n# after\n# ______________________\n# test\n# test\n</code></pre>\n\n<p>You are calling the lambdas only once, when defining the method:</p>\n\n<pre><code>  code = %Q[\n    def #{method_name} *args, &amp;block\n      #{before_proc.call}\n#     ^^^^^^^^^^^^^^^^^^^\n      old_#{method_name} *args, &amp;block\n      #{after_proc.call}\n#     ^^^^^^^^^^^^^^^^^^\n    end\n  ]\n</code></pre>\n\n<p>You need to call them every time when calling the method:</p>\n\n<pre><code>  code = %Q[\n    def #{method_name} *args, &amp;block\n      before_proc.call\n      old_#{method_name} *args, &amp;block\n      after_proc.call\n    end\n  ]\n</code></pre>\n\n<p>However, it would be much easier to just use <code>Module#prepend</code>, after all, that's what it's there for:</p>\n\n<pre><code>module Aspects\n  refine Module do\n    def around_aspect(method_name, before_proc, after_proc)\n      prepend(Module.new do\n        define_method(method_name) do |*args, &amp;block|\n          before_proc.()\n          super(*args, &amp;block)\n          after_proc.()\n        end\n      end)\n    end\n  end\nend\n\nclass Test\n  using Aspects\n\n  def test\n    puts 'test'\n  end\n\n  before = -&gt; {puts 'before'}\n  after = -&gt; {puts 'after'}\n  around_aspect :test, before, after\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1164, "user_id": 1491639, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03dd48d2070f11eb8613a48f36d43bc2?s=128&d=identicon&r=PG", "display_name": "Abdul Rahman", "link": "https://stackoverflow.com/users/1491639/abdul-rahman"}, "is_accepted": false, "score": 0, "last_activity_date": 1482410113, "creation_date": 1482410113, "answer_id": 41283335, "question_id": 41244539, "link": "https://stackoverflow.com/questions/41244539/weirdness-with-around-aspect-in-ruby/41283335#41283335", "title": "Weirdness with around aspect in ruby", "body": "<p>Just putting my code up here. This is how i ended up achieving what i was trying to do, module.prepend as suggested above is another way</p>\n\n<pre><code>module Utils\n  module Aspects\n\n    def self.included(base)\n      base.extend(self)\n    end\n\n    def around_aspect(method_name, before_proc, after_proc)\n\n      new_method_name = Random.new_seed.to_s\n\n      alias_method :\"#{new_method_name}\", :\"#{method_name}\"\n\n      define_method \"#{method_name}\" do |*args, &amp;block|\n        before_proc.call\n        send(:\"#{new_method_name}\", *args, &amp;block)\n        after_proc.call\n      end\n    end\n\n    def before_aspect method_name, before_proc\n      around_aspect method_name, before_proc, -&gt;(){}\n    end\n\n    def after_aspect method_name, after_proc\n      around_aspect method_name, -&gt;(){}, after_proc\n    end\n  end\nend\n\n\nclass Test\n  include Utils::Aspects\n\n  def test\n\n    puts 'test'\n  end\n\n  before = -&gt;(){puts 'before'}\n  after = -&gt;(){puts 'after'}\n\n  before_aspect :test, before\n  after_aspect :test, after\nend\n\n\nTest.new.test \n</code></pre>\n"}], "owner": {"reputation": 1164, "user_id": 1491639, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03dd48d2070f11eb8613a48f36d43bc2?s=128&d=identicon&r=PG", "display_name": "Abdul Rahman", "link": "https://stackoverflow.com/users/1491639/abdul-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 41244885, "answer_count": 2, "score": 0, "last_activity_date": 1482410113, "creation_date": 1482243863, "question_id": 41244539, "link": "https://stackoverflow.com/questions/41244539/weirdness-with-around-aspect-in-ruby", "title": "Weirdness with around aspect in ruby", "body": "<p>I am new to ruby </p>\n\n<p>Trying to write an around aspect. My code is as follows</p>\n\n<p>My code looks as follows</p>\n\n<pre><code>module Utils\n  module Aspects\n\n    def self.included(base)\n      base.extend(self)\n    end\n\n    def around_aspect(method_name, before_proc, after_proc)\n\n      code = %Q[\n        def #{method_name} *args, &amp;block\n          #{before_proc.call}\n          old_#{method_name} *args, &amp;block\n          #{after_proc.call}\n        end\n      ]\n\n      class_eval %Q[\n        alias_method :old_#{method_name}, :#{method_name}\n      ]\n\n      class_eval code\n    end\n\n    # def before_aspect method_name, before_proc\n    #   around_aspect method_name, before_proc, -&gt;(){}\n    # end\n    #\n    # def after_aspect method_name, after_proc\n    #   around_aspect method_name, -&gt;(){}, after_proc\n    # end\n  end\nend\n\n\nclass Test\n  include Utils::Aspects\n\n  def test\n    puts 'test'\n  end\n\n  before = -&gt;(){puts 'before'}\n  after = -&gt;(){puts 'after'}\n  around_aspect :test,before,after\nend\n\nTest.new.test\n</code></pre>\n\n<p>The problem is that when i do <code>Test.new.test</code> I expect it to print\nbefore, test and after\" in order. But right now it prints \"before,after and test\"</p>\n"}, {"tags": ["ruby", "string", "string-comparison", "boolean-logic"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1482244271, "post_id": 41244466, "comment_id": 69689083, "body": "See <a href=\"http://ruby-doc.org/core-2.3.2/String.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\"><code>String#&lt;=&gt;</code></a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1482244440, "post_id": 41244466, "comment_id": 69689176, "body": "This is just standard lexicographical ordering."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 1842528, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5ba964a2ab1b555c6a82c6e9b1348a4e?s=128&d=identicon&r=PG&f=1", "display_name": "derei", "link": "https://stackoverflow.com/users/1842528/derei"}, "edited": false, "score": 0, "creation_date": 1482253195, "post_id": 41246412, "comment_id": 69695105, "body": "Thank you very much. This answer was clear and explanatory."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1482249535, "creation_date": 1482249535, "answer_id": 41246412, "question_id": 41244466, "link": "https://stackoverflow.com/questions/41244466/ruby-logical-string-comparison-eg-a-b/41246412#41246412", "title": "Ruby Logical String comparison (eg. &quot;a&quot; &gt; &quot;b&quot;)", "body": "<p>Strings are ordered as in a wordbook.</p>\n\n<p><code>string1 &gt; string2</code> is true if <code>string1</code> appears later in the book than <code>string2</code>.</p>\n\n<p>\"a\" is on page 1, \"b\" is on page 30, so <code>\"a\"&gt;\"b\"</code> is false.</p>\n\n<p>It's the same reason that if you have a folder full of files with numbers in filenames, <code>10.txt</code> and <code>11.txt</code> appear between <code>1.txt</code> and <code>2.txt</code></p>\n\n<p>It's called <a href=\"https://en.wikipedia.org/wiki/Lexicographical_order\" rel=\"nofollow noreferrer\">lexicographical ordering</a>, and it ignores the second letters if the first letters are different.</p>\n"}], "owner": {"reputation": 193, "user_id": 1842528, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5ba964a2ab1b555c6a82c6e9b1348a4e?s=128&d=identicon&r=PG&f=1", "display_name": "derei", "link": "https://stackoverflow.com/users/1842528/derei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 41246412, "answer_count": 1, "score": -2, "last_activity_date": 1482249535, "creation_date": 1482243618, "question_id": 41244466, "link": "https://stackoverflow.com/questions/41244466/ruby-logical-string-comparison-eg-a-b", "title": "Ruby Logical String comparison (eg. &quot;a&quot; &gt; &quot;b&quot;)", "body": "<p>Hy,</p>\n\n<p>I am trying to understand how Ruby handles strings when comes to logical comparison.</p>\n\n<p>I tried:</p>\n\n<pre><code>\"a\" &gt; \"b\" #--&gt; false\n\"ab\" &gt; \"b\" #--&gt; false\n\"z\" &gt; \"az\" #--&gt; true\n# i even tried\n\"z\" &gt; \"abcdefghijklmnopqrstuvwxyz\" #--&gt; true\n</code></pre>\n\n<p>Is like Ruby gives weight to characters from a(the weakest) to z(the strongest) and it doesn't even check furter from the first character only.</p>\n\n<p>I would appreciate a explanation for this phenomenon. Thank you very much.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1482244702, "post_id": 41244259, "comment_id": 69689337, "body": "You should be able to access that data if you are getting the id if the proper associations are set up.  could you post the view and models code for meal order and restaurant?  you probably do not need the schema.rb code as well as the form, logs or seeds."}, {"owner": {"reputation": 3, "user_id": 7038040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e7ddfc098a0b19cd6f512aaf040aeb?s=128&d=identicon&r=PG&f=1", "display_name": "hydroxyzinum", "link": "https://stackoverflow.com/users/7038040/hydroxyzinum"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1482245846, "post_id": 41244259, "comment_id": 69690202, "body": "@RockwellRice thanks, I updated my answer"}, {"owner": {"reputation": 3, "user_id": 7038040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e7ddfc098a0b19cd6f512aaf040aeb?s=128&d=identicon&r=PG&f=1", "display_name": "hydroxyzinum", "link": "https://stackoverflow.com/users/7038040/hydroxyzinum"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1482248457, "post_id": 41244259, "comment_id": 69692059, "body": "@RockwellRice I did like you said and now I get an error SQLite3::SQLException: no such column: meals.order_id: SELECT &quot;meals&quot;.* FROM &quot;meals&quot; WHERE &quot;meals&quot;.&quot;order_id&quot; = ? LIMIT ?"}], "answers": [{"tags": [], "owner": {"reputation": 1084, "user_id": 6322400, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-1zNdW9rozxM/AAAAAAAAAAI/AAAAAAAAAFg/bTzBuoKyflk/photo.jpg?sz=128", "display_name": "Julian Honma", "link": "https://stackoverflow.com/users/6322400/julian-honma"}, "is_accepted": false, "score": 0, "last_activity_date": 1482247134, "creation_date": 1482247134, "answer_id": 41245651, "question_id": 41244259, "link": "https://stackoverflow.com/questions/41244259/how-to-save-record-in-db-as-text-not-as-id/41245651#41245651", "title": "How to save record in DB as text not as id", "body": "<p>I generally use f.association for select fields.\nIf the problem is in your form, in the select field (on the home page) then try:</p>\n\n<pre><code>&lt;%= f.label :restaurant, \"Restaurant\" %&gt;\n       &lt;%= f.association :restaurants, collection: Restaurant.order(:name), {prompt: \"Select a restaurant\"}, {class: \"form-control\"} %&gt;\n\n       &lt;%= f.label :meal, \"Choose your meal\" %&gt;\n       &lt;%= f.association :meals, collection: Restaurant.order(:name).meals, {prompt: \"Select a meal\"},\n                                              {class: \"form-control\"} %&gt;\n</code></pre>\n\n<p>That or using the .pluck method to say that you specifically want to show the name:</p>\n\n<pre><code>Restaurant.order(:name).pluck(:name)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7038040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e7ddfc098a0b19cd6f512aaf040aeb?s=128&d=identicon&r=PG&f=1", "display_name": "hydroxyzinum", "link": "https://stackoverflow.com/users/7038040/hydroxyzinum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1482247427, "creation_date": 1482242900, "last_edit_date": 1482245812, "question_id": 41244259, "link": "https://stackoverflow.com/questions/41244259/how-to-save-record-in-db-as-text-not-as-id", "title": "How to save record in DB as text not as id", "body": "<p>I'm doing meal ordering system, I'm new in Rails and I'm wondering how can I save record (ordered meal from restaurant) in the DB as text. For example I have a list of restaurants and meals in my <em>db/seed.rb</em> and when I order a meal from the restaurant in my order view intead of see ordered meal (name of the meal and name of the restaurant) I see id of restaurant and id of meal. I know it's probobly easy to fix, but I have no idea go to do this.</p>\n\n<pre><code>db/seed.rb\n\n Restaurant.create(name: \"PizzaHut\")\n Restaurant.create(name: \"Salad Story\")\n Restaurant.create(name: \"KFC\")\n\n Meal.create(name: \"PizzaHut Special - 32cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"PizzaHut Special - 42cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Pepperoni - 32cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Pepperoni - 42cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Hawaii - 32cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Hawaii - 42cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Diablo - 32cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Diablo - 42cm\", restaurant_id: Restaurant.find_by(name: \"PizzaHut\").id)\n Meal.create(name: \"Longer + Small Drink (Coca-Cola, Fanta, Sprite)\", restaurant_id: Restaurant.find_by(name: \"KFC\").id)\n Meal.create(name: \"Longer + Large Drink (Coca-Cola, Fanta, Sprite)\", restaurant_id: Restaurant.find_by(name: \"KFC\").id)\n Meal.create(name: \"Greek Salad - Medium\", restaurant_id: Restaurant.find_by(name: \"Salad Story\").id)\n Meal.create(name: \"Greek Salad - Large\", restaurant_id: Restaurant.find_by(name: \"Salad Story\").id)\n Meal.create(name: \"Salad Story Special - Medium\", restaurant_id: Restaurant.find_by(name: \"Salad Story\").id)\n Meal.create(name: \"Salad Story Special - Large\", restaurant_id: Restaurant.find_by(name: \"Salad Story\").id)\n</code></pre>\n\n<p><code>staticpages/home.html.erb</code></p>\n\n<pre><code> &lt;h1 class=\"jumbotron-font\"&gt;Order your meal&lt;/h1&gt;\n     &lt;div class=\"row\"&gt;\n       &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n         &lt;%= form_for(:orders, url: new_order_path) do |f| %&gt;\n\n           &lt;%= f.label :restaurant, \"Restaurant\" %&gt;\n           &lt;%= f.collection_select :restaurant_id, Restaurant.order(:name), :id,\n          :name, {prompt: \"Select a restaurant\"}, {class: \"form-control\"} %&gt;\n\n           &lt;%= f.label :meal, \"Choose your meal\" %&gt;\n           &lt;%= f.grouped_collection_select :meal_id, Restaurant.order(:name),\n            :meals, :name, :id, :name, {prompt: \"Select a meal\"},\n                                                  {class: \"form-control\"} %&gt;\n\n           &lt;%= f.label :suggestions, \"Suggestions\" %&gt;\n           &lt;%= f.text_area :suggestions, rows: \"4\", placeholder: \"e.g. I'd like to change sweetcorn for olives...\" %&gt;\n\n           &lt;%= f.submit \"Place your order\", class: \"btn btn-primary\" %&gt;\n         &lt;% end %&gt;\n       &lt;/div&gt;\n     &lt;/div&gt;\n</code></pre>\n\n<p>And <code>db/schema.rb</code></p>\n\n<pre><code> ActiveRecord::Schema.define(version: 20161220125950) do\n\n   create_table \"meals\", force: :cascade do |t|\n     t.string   \"name\"\n     t.integer  \"restaurant_id\"\n     t.datetime \"created_at\",    null: false\n     t.datetime \"updated_at\",    null: false\n     t.index [\"restaurant_id\"], name: \"index_meals_on_restaurant_id\"\n   end\n\n   create_table \"orders\", force: :cascade do |t|\n     t.string   \"restaurant\"\n     t.string   \"meal\"\n     t.text     \"suggestions\"\n     t.integer  \"user_id\"\n     t.datetime \"created_at\",      null: false\n     t.datetime \"updated_at\",      null: false\n     t.string   \"restaurant_id\"\n     t.string   \"meal_id\"\n     t.index [\"user_id\", \"created_at\"], name: \"index_orders_on_user_id_and_created_at\"\n     t.index [\"user_id\"], name: \"index_orders_on_user_id\"\n   end\n\n   create_table \"restaurants\", force: :cascade do |t|\n     t.string   \"name\"\n     t.datetime \"created_at\",      null: false\n     t.datetime \"updated_at\",      null: false\n   end\n\n   create_table \"users\", force: :cascade do |t|\n     t.string   \"provider\"\n     t.string   \"uid\"\n     t.string   \"name\"\n     t.datetime \"created_at\", null: false\n     t.datetime \"updated_at\", null: false\n   end\n\n end\n</code></pre>\n\n<p>My logs:</p>\n\n<pre><code> Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"TVdB/YJ8W2fQD0XslA7KwlY2WHPPTSsI6Tx18CE1v6vF9zJLjM5nFd6lO/gSrPwsy/fCnra54TeAtxrwGyIGoQ==\", \"orders\"=&gt;{\"restaurant_id\"=&gt;\"1\", \"meal_id\"=&gt;\"11\", \"suggestions\"=&gt;\"\"}, \"commit\"=&gt;\"Place your order\"}\n   User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n    (0.1ms)  begin transaction\n   CACHE (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n   Restaurant Load (0.1ms)  SELECT  \"restaurants\".* FROM \"restaurants\" WHERE \"restaurants\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n   SQL (91.1ms)  INSERT INTO \"orders\" (\"suggestions\", \"user_id\", \"created_at\", \"updated_at\", \"restaurant_id\", \"meal_id\") VALUES (?, ?, ?, ?, ?, ?)  [[\"suggestions\", \"\"], [\"user_id\", 1], [\"created_at\", 2016-12-20 14:05:13 UTC], [\"updated_at\", 2016-12-20 14:05:13 UTC], [\"restaurant_id\", \"1\"], [\"meal_id\", \"11\"]]\n    (241.2ms)  commit transaction\n</code></pre>\n\n<p><strong>* UPDATE *</strong></p>\n\n<pre><code> class Order &lt; ApplicationRecord\n   belongs_to :user\n   belongs_to :restaurant\n end\n\n class User &lt; ApplicationRecord\n   has_many :orders\n   has_many :restaurants, through: :orders\n end\n\n class Meal &lt; ApplicationRecord\n   belongs_to :restaurant\n end\n\n class Restaurant &lt; ApplicationRecord\n   has_many :orders\n   has_many :meals\n   has_many :users, through: :orders\n end\n</code></pre>\n\n<p>From view I have just <code>order/index.html.erb</code></p>\n\n<pre><code> &lt;% @orders.each do |order| %&gt;\n   &lt;div class=\"row\"&gt;\n     &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n       &lt;%= order.restaurant_name %&gt;\n       &lt;%= order.meal_name %&gt;\n       &lt;%= order.suggestions %&gt;\n     &lt;/div&gt;\n   &lt;/div&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>It's simple application, just for practice, so I want to do single page application without actually confirming the order by restaurant. I want to be able to make the order and then see in history list of all orders.</p>\n"}, {"tags": ["ruby", "jruby", "jxbrowser"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1482243398, "post_id": 41244212, "comment_id": 69688479, "body": "Why don&#39;t you make Chromium as a dependency instead of shipping the gem with it?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1482243425, "post_id": 41244212, "comment_id": 69688504, "body": "Just because Chromium is a dependency does not mean you need to include it in your gem. Many gems have binary dependencies that they do not ship with"}, {"owner": {"reputation": 147, "user_id": 2429102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/41d4ee7d85eee6a9f8f9d29d3114ad85?s=128&d=identicon&r=PG", "display_name": "Rodrigo Botafogo", "link": "https://stackoverflow.com/users/2429102/rodrigo-botafogo"}, "edited": false, "score": 0, "creation_date": 1482269098, "post_id": 41244212, "comment_id": 69703505, "body": "Maybe a bit hidden in the question, but my gem depends on jxBrowser which is an embedded java browser that is based on Chromium. jxBrowser is free for non-commercial use, but requires a license.  So, I don&#180;t think there is a way to ask my users to downoload jxBrowser from TeamDev directly (the developers), as they would not have the license."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 2429102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/41d4ee7d85eee6a9f8f9d29d3114ad85?s=128&d=identicon&r=PG", "display_name": "Rodrigo Botafogo", "link": "https://stackoverflow.com/users/2429102/rodrigo-botafogo"}, "edited": false, "score": 0, "creation_date": 1482333336, "post_id": 41244574, "comment_id": 69732859, "body": "You say: &quot;bit a lengthier process for gem install&quot;.  How can this be done from gem install?  It is a library and not a standalone application."}, {"owner": {"reputation": 147, "user_id": 2429102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/41d4ee7d85eee6a9f8f9d29d3114ad85?s=128&d=identicon&r=PG", "display_name": "Rodrigo Botafogo", "link": "https://stackoverflow.com/users/2429102/rodrigo-botafogo"}, "edited": false, "score": 0, "creation_date": 1482333775, "post_id": 41244574, "comment_id": 69733144, "body": "Users of the library might not have bundler in their system, so I just want them to do a normal &#39;gem install....&#39; and this would also grab the correct jxBrowser for their system (windows, linux, mac)."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 147, "user_id": 2429102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/41d4ee7d85eee6a9f8f9d29d3114ad85?s=128&d=identicon&r=PG", "display_name": "Rodrigo Botafogo", "link": "https://stackoverflow.com/users/2429102/rodrigo-botafogo"}, "edited": false, "score": 0, "creation_date": 1482428122, "post_id": 41244574, "comment_id": 69779941, "body": "@RodrigoBotafogo: Like in answers in the second link provided, it might requiring checking out the gems source, building and installing it."}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": true, "score": 2, "last_activity_date": 1482428323, "last_edit_date": 1495541321, "creation_date": 1482243967, "answer_id": 41244574, "question_id": 41244212, "link": "https://stackoverflow.com/questions/41244212/how-to-release-large-ruby-gem/41244574#41244574", "title": "How to release large Ruby Gem?", "body": "<p>You can ask your users to install the gem from git (bundler: <a href=\"http://bundler.io/git.html\" rel=\"nofollow noreferrer\">http://bundler.io/git.html</a>, <a href=\"https://stackoverflow.com/questions/2823492/install-gem-from-github-branch\">Install Gem from Github Branch?</a>).</p>\n\n<p>This will result in a line like</p>\n\n<pre><code>gem 'hard_drive_expander', github: 'rodrigo/hard_drive_expander'\n</code></pre>\n\n<p>in a Gemfile (or a bit a lengthier process for <code>gem install</code> - do you intend 'library' kind of usage or standalone installations). Note that depending on your scenario you could have an installer gem that depends on the \"github-hosted\" gem, or downloads and builds/installs it (both seem like dirty solutions to me though, its not what I expect or commonly see).</p>\n\n<p>Although github does place quotas on your repositories, you will probably not hit them (<a href=\"https://help.github.com/articles/what-is-my-disk-quota/\" rel=\"nofollow noreferrer\">https://help.github.com/articles/what-is-my-disk-quota/</a>).</p>\n\n<p>Another option is to host it yourself (<a href=\"http://guides.rubygems.org/run-your-own-gem-server/\" rel=\"nofollow noreferrer\">http://guides.rubygems.org/run-your-own-gem-server/</a>).</p>\n\n<p>Sorry for the \"linky\" answer.</p>\n\n<p>However, @icguida and @engineersmnky s comments to your question are very worth considering: Do you really need to <strong>include</strong> chromium?</p>\n\n<p><strong>Update</strong></p>\n\n<p>There is a gem that will hook into <code>gem</code> to allow for usage like this: <code>gem specific_install https://github.com/githubsvnclone/rdoc.git</code>. The gem is called specific_install: <a href=\"https://github.com/rdp/specific_install\" rel=\"nofollow noreferrer\">https://github.com/rdp/specific_install</a> .</p>\n"}], "owner": {"reputation": 147, "user_id": 2429102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/41d4ee7d85eee6a9f8f9d29d3114ad85?s=128&d=identicon&r=PG", "display_name": "Rodrigo Botafogo", "link": "https://stackoverflow.com/users/2429102/rodrigo-botafogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41244574, "answer_count": 1, "score": 0, "last_activity_date": 1482428323, "creation_date": 1482242778, "question_id": 41244212, "link": "https://stackoverflow.com/questions/41244212/how-to-release-large-ruby-gem", "title": "How to release large Ruby Gem?", "body": "<p>I\u00b4m finishing a Ruby Gem that depends on Chromium (jxBrowser).  Chromium is quite large and has versions for linux, mac and windows.  Releasing this gem to RubyGem is not possible, as the gem size is larger than supported by RubyGem.  So, are there any recommendations on where/how to release this?  I\u00b4d love to keep it in RubyGem as my other gens were released there.  Should I release an installer in RubyGem and put the files in GitHub?  What\u00b4s the best way?</p>\n\n<p>Thanks for any hints and suggestions....</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482246367, "post_id": 41244036, "comment_id": 69690594, "body": "Please explain the error better, because this should work. Are you getting an error or is it just rendering without layout?"}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482300575, "post_id": 41244036, "comment_id": 69712674, "body": "@Fallenhero, it is just rendering without layout. I dont under stand why. My layout present in layouts folder in view. i have google about this but didnt found any answer. so please help me why this (render :layout =&gt; &quot;application&quot;) is not working. is i have to do some settings?"}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482302668, "post_id": 41244036, "comment_id": 69713504, "body": "@Fallenhero, actually i want to add particular css with with particular layout. i used content_for in view page and yield its name in layout. i dont understand its not picking css from link present in layout or it is not picking layout either"}, {"owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 0, "creation_date": 1482320635, "post_id": 41244036, "comment_id": 69724406, "body": "Have you try render &#39;layout/application&#39; ?"}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "reply_to_user": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "edited": false, "score": 0, "creation_date": 1482322434, "post_id": 41244036, "comment_id": 69725567, "body": "@AntoninMrchd, actually it is working, but the thing is that i am not able to add css file with this layout. Is i have to do settings in menifest file? because i had tried &lt;%= stylesheet_link_tag &#39;index11.css&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt; in layout but didnot work"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482300380, "post_id": 41244088, "comment_id": 69712596, "body": ",render layout: &quot;layout_name&quot;, it is not working , i dont know why. i have goodled it but didnt found any ans. There is also mentioned to render with &quot;render layout: &quot;layout_name&quot; &quot; but unfortunately it is not working"}, {"owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "reply_to_user": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482300528, "post_id": 41244088, "comment_id": 69712659, "body": "Remove layout false from top"}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482302571, "post_id": 41244088, "comment_id": 69713450, "body": "@ Atul shukla, actually i want to add particular css with with particular layout. i used content_for in view page and yield its name in layout. i dont understand either its not picking css from link present in layout or it is not picking layout either"}, {"owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "reply_to_user": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482303034, "post_id": 41244088, "comment_id": 69713684, "body": "first you can do that use debugger an specific layout to  confirm that layout is rendering or not ? . If it rendering then you can check your css."}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482319708, "post_id": 41244088, "comment_id": 69723861, "body": "@ Atul shukla, actually im not able to add css, i have found it through debugging. Sorry i am new to ruby and rails"}, {"owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "reply_to_user": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482319900, "post_id": 41244088, "comment_id": 69723973, "body": "Great ! now you have to include your css in stylesheet/layout.css put all you require css in this file and include it on layout.erb file. same for js too."}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482322249, "post_id": 41244088, "comment_id": 69725416, "body": "is manifest file is compulsory it run css? or i have to just include css link in layout like &quot;&lt;%= stylesheet_link_tag &#39;index11.css&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;&quot; like this? i just want to have a separate layout for a view and only few css file will relate to this layout only?"}, {"owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "reply_to_user": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482322356, "post_id": 41244088, "comment_id": 69725495, "body": "you can do &quot;&lt;%= stylesheet_link_tag &#39;index11.css&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;&quot; this also."}, {"owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "reply_to_user": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482322829, "post_id": 41244088, "comment_id": 69725831, "body": "Is index11.css&#39;  present on stylesheet?. if yes, then try to include this &lt;%= stylesheet_link_tag &#39;index11.css&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt; in layout_name.erb. restart your server and check it again"}, {"owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "edited": false, "score": 0, "creation_date": 1482323280, "post_id": 41244088, "comment_id": 69726096, "body": "@ Atul, yes i had tried in same way but its not working"}], "tags": [], "owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "is_accepted": false, "score": 0, "last_activity_date": 1482320074, "last_edit_date": 1482320074, "creation_date": 1482242346, "answer_id": 41244088, "question_id": 41244036, "link": "https://stackoverflow.com/questions/41244036/i-am-not-able-to-load-layout-while-rendering-in-rails/41244088#41244088", "title": "I am not able to load layout while rendering in rails", "body": "<p>You can try this for multiple action:</p>\n\n<pre><code>layout 'layout_name', only: [:help , :contact_us]\n</code></pre>\n\n<p>You can try this for single action:</p>\n\n<pre><code>render layout: \"layout_name\"\n</code></pre>\n\n<p>You can add a stylesheet tag to the layout by doing something like this:</p>\n\n<p>layout_name.erb</p>\n\n<pre><code>&lt;%= stylesheet_link_tag 'layout_name' %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 6423640, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10206671885452124/picture?type=large", "display_name": "Antonin Mrchd", "link": "https://stackoverflow.com/users/6423640/antonin-mrchd"}, "is_accepted": false, "score": 0, "last_activity_date": 1482320824, "creation_date": 1482320824, "answer_id": 41262103, "question_id": 41244036, "link": "https://stackoverflow.com/questions/41244036/i-am-not-able-to-load-layout-while-rendering-in-rails/41262103#41262103", "title": "I am not able to load layout while rendering in rails", "body": "<p>Maybe you should try :</p>\n\n<pre><code>render 'layouts/application' \n</code></pre>\n\n<p>or </p>\n\n<pre><code>:layouts =&gt; \"application\"\n</code></pre>\n\n<p>because there is an \"s\" to layouts folder\nHope it help</p>\n"}, {"tags": [], "owner": {"reputation": 884, "user_id": 1675491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeqdU.jpg?s=128&g=1", "display_name": "Sandeep Kapil", "link": "https://stackoverflow.com/users/1675491/sandeep-kapil"}, "is_accepted": false, "score": 0, "last_activity_date": 1482325082, "creation_date": 1482325082, "answer_id": 41263342, "question_id": 41244036, "link": "https://stackoverflow.com/questions/41244036/i-am-not-able-to-load-layout-while-rendering-in-rails/41263342#41263342", "title": "I am not able to load layout while rendering in rails", "body": "<p>Try this :</p>\n\n<pre><code>class PageController &lt; ApplicationController \n  layout false\n  layout 'application', only: [:index1]\n  def index1\n\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3938609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7d38f503454ab5615baf84ce86edf?s=128&d=identicon&r=PG&f=1", "display_name": "lovish Goyal", "link": "https://stackoverflow.com/users/3938609/lovish-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1482325082, "creation_date": 1482242190, "last_edit_date": 1482242832, "question_id": 41244036, "link": "https://stackoverflow.com/questions/41244036/i-am-not-able-to-load-layout-while-rendering-in-rails", "title": "I am not able to load layout while rendering in rails", "body": "<p>can anybody help me out , why i am not able to load particular layout for particular action with</p>\n\n<pre><code>render :layout =&gt; \"application\" \n</code></pre>\n\n<p><strong>application.html.erb</strong> present in layouts folder.\nis i have to do some settings for layout?</p>\n\n<p>my code is :-</p>\n\n<pre><code>class PageController &lt; ApplicationController \n  layout false\n  def index1\n    render :layout =&gt; \"application\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1140, "user_id": 402339, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/76aa4ba4350207baecde8e0452c30e98?s=128&d=identicon&r=PG", "display_name": "gerl", "link": "https://stackoverflow.com/users/402339/gerl"}, "edited": false, "score": 0, "creation_date": 1482242075, "post_id": 41243962, "comment_id": 69687540, "body": "what have you done"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3929168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098074813238ef72047ae505e385af42?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Martin", "link": "https://stackoverflow.com/users/3929168/manuel-martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1482242813, "creation_date": 1482242813, "answer_id": 41244227, "question_id": 41243962, "link": "https://stackoverflow.com/questions/41243962/error-when-launching-rails-server/41244227#41244227", "title": "error when launching rails server", "body": "<pre><code>$ gem list\n\n\n$ gem install rails\n</code></pre>\n\n<p>Run the command again. It will download and install missing dependencies, including railties.</p>\n"}], "owner": {"reputation": 21, "user_id": 6188561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ka1m0.jpg?s=128&g=1", "display_name": "Dri John", "link": "https://stackoverflow.com/users/6188561/dri-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482489531, "creation_date": 1482241970, "last_edit_date": 1482489531, "question_id": 41243962, "link": "https://stackoverflow.com/questions/41243962/error-when-launching-rails-server", "title": "error when launching rails server", "body": "<p>I have this error when i try to execute \"rails server\" on debian8:</p>\n\n<blockquote>\n  <p>/usr/local/bin/rails:23:in 'load': cannot load such file --\n  /usr/share/rubygems-integration/all/gems/railties-4.1.8/bin/rails\n  (LoadError)   from /usr/local/bin/rails:23:in ''</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1482242062, "post_id": 41243869, "comment_id": 69687527, "body": "Show us what have you tried so far."}, {"owner": {"reputation": 915, "user_id": 2845312, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/nbUXW.png?s=128&g=1", "display_name": "d_luffy_de", "link": "https://stackoverflow.com/users/2845312/d-luffy-de"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482242382, "post_id": 41243869, "comment_id": 69687769, "body": "I am very new to ruby, I tried using Hashdiff diff = HashDiff.diff(hash1, hash2).should . But did not get the result as I expected."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1482243129, "post_id": 41243869, "comment_id": 69688314, "body": "What does &quot;did not get the result as I expected&quot; mean? What result did you expect? Why did you expect that result? What result did you get? Why is the result you got not the result you expect? How did you get that result? Please, provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, along with all error messages and warnings you get, the expected and actual results, the expected and actual behaviors, and a clear problem statement including examples, and specifications of all corner cases, special cases, edge cases, and all rules for how to get the expectecd results."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1482273204, "post_id": 41244120, "comment_id": 69705249, "body": "What about <code>{a: :equal}</code> and <code>{}</code> ? ;)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1550283077, "last_edit_date": 1550283077, "creation_date": 1482242440, "answer_id": 41244120, "question_id": 41243869, "link": "https://stackoverflow.com/questions/41243869/changes-between-two-hashes-in-ruby/41244120#41244120", "title": "Changes between two hashes in ruby", "body": "<p><a href=\"https://ruby-doc.org/core/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a> with a block would do:</p>\n\n<pre><code>hash1.merge(hash2) { |k, v1, v2| v1 == v2 ? :equal : [v1, v2] }\n     .reject { |_, v| v == :equal }\n     .keys\n#\u21d2 [\"B\", \"F\", \"E\"]\n</code></pre>\n\n<p><strong>Note:</strong> This will work even for a hash containing a value of <code>:equal</code> (to address the comment below), because the merge result would contain a value of <code>[:equal, nil]</code>, not simply the value <code>:equal</code>. However, to simplify the whole thing and avoid confusion, in Ruby 2.4+ you could use Hash#compact like this:</p>\n\n<pre><code>hash1.merge(hash2) { |_k, v1, v2| v1 == v2 ? nil : :different }\n     .compact.keys\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482252511, "post_id": 41246796, "comment_id": 69694636, "body": "Fails on <code>{a: 42}</code> and <code>{b: nil}</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482254808, "post_id": 41246796, "comment_id": 69696034, "body": "I&#39;d argue that it&#39;s a personal opinion it it&#39;s a fail or not. Both hashes agree on the value for key <code>:b</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482272713, "post_id": 41246796, "comment_id": 69705061, "body": "@mudasobwa : Do you have a concrete example where keys with <code>nil</code> value are needed? I feel like a set might be more appropriate."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1482299714, "post_id": 41246796, "comment_id": 69712386, "body": "I could think of any data, received from 3rd party and operated with <code>hash.fetch(key, :novalue)</code>, but this is definitely a contrived example."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 7, "last_activity_date": 1482254734, "last_edit_date": 1482254734, "creation_date": 1482250743, "answer_id": 41246796, "question_id": 41243869, "link": "https://stackoverflow.com/questions/41243869/changes-between-two-hashes-in-ruby/41246796#41246796", "title": "Changes between two hashes in ruby", "body": "<p>This solution might be a bit easier to understand :</p>\n\n<pre><code>(hash1.keys | hash2.keys).select{ |key| hash1[key] != hash2[key] }\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.3/Array.html#method-i-7C\" rel=\"noreferrer\"><code>Array#|</code></a> returns the set union of 2 arrays.\nIt's equivalent to :</p>\n\n<p><code>(hash1.key + hash2.keys).uniq</code></p>\n\n<p>NOTE: If you want to consider that <code>{}</code> and <code>{b: nil}</code> differ on <code>:b</code> even though they return the same value for <code>:b</code> key :</p>\n\n<pre><code>(hash1.keys | hash2.keys).reject do |key|\n  hash1.has_key?(key) &amp;&amp;\n  hash2.has_key?(key) &amp;&amp;\n  hash1[key] == hash2[key]\nend\n</code></pre>\n"}], "owner": {"reputation": 915, "user_id": 2845312, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/nbUXW.png?s=128&g=1", "display_name": "d_luffy_de", "link": "https://stackoverflow.com/users/2845312/d-luffy-de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3037, "favorite_count": 0, "accepted_answer_id": 41244120, "answer_count": 2, "score": 5, "last_activity_date": 1550283077, "creation_date": 1482241678, "last_edit_date": 1482242051, "question_id": 41243869, "link": "https://stackoverflow.com/questions/41243869/changes-between-two-hashes-in-ruby", "title": "Changes between two hashes in ruby", "body": "<p>I have two hashes with the below format</p>\n\n<pre><code>mydetails[x['Id']] = x['Amount']\n</code></pre>\n\n<p>this would contain data like</p>\n\n<pre><code>hash1 = {\"A\"=&gt;\"0\", \"B\"=&gt;\"1\",\"C\"=&gt;\"0\", \"F\"=&gt;\"1\"}\nhash2 = {\"A\"=&gt;\"0\", \"B\"=&gt;\"3\",\"C\"=&gt;\"0\", \"E\"=&gt;\"1\"}\n</code></pre>\n\n<p>I am expecting an output something like:</p>\n\n<blockquote>\n  <p>Differences in hash: \"B, F, E\"</p>\n</blockquote>\n\n<p>Any help is very much appreciated.</p>\n"}]