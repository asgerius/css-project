[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1377, "user_id": 3734125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4c82fc440ab08376bc41a5e229c86e26?s=128&d=identicon&r=PG", "display_name": "ARTLoe", "link": "https://stackoverflow.com/users/3734125/artloe"}, "edited": false, "score": 0, "creation_date": 1427971491, "post_id": 29403394, "comment_id": 46995043, "body": "thanks @Tiago but it doesn&#39;t seem to work. when a user creates an advert it is not assigning the user to the advert. the Advert still has a user_id in the console stated as &#39;nil&#39;"}], "tags": [], "owner": {"reputation": 3359, "user_id": 618467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/624972b91564b142ec8481dde0b92898?s=128&d=identicon&r=PG", "display_name": "Tiago Farias", "link": "https://stackoverflow.com/users/618467/tiago-farias"}, "is_accepted": false, "score": 0, "last_activity_date": 1427936522, "creation_date": 1427936522, "answer_id": 29403394, "question_id": 29402766, "link": "https://stackoverflow.com/questions/29402766/active-records-userr-id-rails-4/29403394#29403394", "title": "Active Records - Userr_id - rails 4", "body": "<p>Once you have the user object accessible, basically you can just do:</p>\n\n<pre><code>def create\n  @advert = Advert.create(advert_params)\n  user.adverts &lt;&lt; @advert\n  respond_with(@advert)\nend\n</code></pre>\n\n<p>When you use the <code>has_many</code> method, the model receives some methods \"for free\". The <code>&lt;&lt;()</code> method is just one of them. You can find out many things about associations and these methods automatically generated <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1377, "user_id": 3734125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4c82fc440ab08376bc41a5e229c86e26?s=128&d=identicon&r=PG", "display_name": "ARTLoe", "link": "https://stackoverflow.com/users/3734125/artloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427936522, "creation_date": 1427931797, "question_id": 29402766, "link": "https://stackoverflow.com/questions/29402766/active-records-userr-id-rails-4", "title": "Active Records - Userr_id - rails 4", "body": "<p>i am new to rails so any help would be much appreciated. I have the models users and adverts. User has_many adverts and Advert belongs to a user. </p>\n\n<blockquote>\n  <p>Question: when a user creates an advert i want the created advert to be automatically linked to the current user that created the advert. I am unsure how to go about this</p>\n</blockquote>\n\n<p>i know how to assign advert to a user in the console</p>\n\n<pre><code>advert = Advert.first\nadvert.userr_id = 3\nadvert.save\n</code></pre>\n\n<p>but i am unsure how to implement this in my controller. Any directional advise would be much appreciated</p>\n\n<p>schema</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150330233948) do\n\n  create_table \"adverts\", force: true do |t|\n    t.string   \"title\"\n    t.text     \"content\"\n    t.integer  \"category_jobtype_id\"\n    t.integer  \"category_positiontype_id\"\n    t.integer  \"salarystart\"\n    t.integer  \"salaryend\"\n    t.integer  \"category_country_id\"\n    t.string   \"city\"\n    t.string   \"town\"\n    t.string   \"postcode\"\n    t.integer  \"category_editorialapproval_id\"\n    t.integer  \"category_applicationrequest_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.integer  \"userr_id\"\n  end\n\n  create_table \"userrs\", force: true do |t|\n    t.string   \"email\",                    default: \"\", null: false\n    t.string   \"encrypted_password\",       default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",            default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"firstname\"\n    t.string   \"lastname\"\n    t.string   \"companyname\"\n    t.integer  \"category_businesstype_id\"\n  end\n\n  add_index \"userrs\", [\"email\"], name: \"index_userrs_on_email\", unique: true\n  add_index \"userrs\", [\"reset_password_token\"], name: \"index_userrs_on_reset_password_token\", unique: true\n\nend\n</code></pre>\n\n<p>models</p>\n\n<pre><code>class Advert &lt; ActiveRecord::Base\n  belongs_to :user\nend\n\nclass Userr &lt; ActiveRecord::Base\n  has_many :adverts\nend\n</code></pre>\n\n<p>controller: Advert</p>\n\n<pre><code>class AdvertsController &lt; ApplicationController\n  respond_to :html, :xml, :json\n  before_action :set_advert, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @adverts = Advert.all\n    respond_with(@adverts)\n  end\n\n  def show\n    respond_with(@advert)\n  end\n\n  def new\n    @advert = Advert.new\n    respond_with(@advert)\n  end\n\n  def edit\n  end\n\n  def create\n    @advert = Advert.new(advert_params)\n    @advert.save\n    respond_with(@advert)\n  end\n\n  def update\n    @advert.update(advert_params)\n    respond_with(@advert)\n  end\n\n  def destroy\n    @advert.destroy\n    respond_with(@advert)\n  end\n\n  private\n    def set_advert\n      @advert = Advert.find(params[:id])\n    end\n\n    def advert_params\n      params.require(:advert).permit(:title, :content, :category_jobtype_id, :category_positiontype_id, :salarystart, :salaryend, :category_country_id, :city, :town, :postcode, :category_editorialapproval_id, :category_applicationrequest_id)\n    end\nend\n</code></pre>\n\n<p>controller: Userr</p>\n\n<p>any help will be much appreciated. A book recommendation or a tutorial will be helpful....many thanks</p>\n"}, {"tags": ["ruby", "windows", "cygwin", "jekyll"], "answers": [{"tags": [], "owner": {"reputation": 80955, "user_id": 1002260, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5ec9c21c8d54825b04def7a41998d18d?s=128&d=identicon&r=PG", "display_name": "Steven Penny", "link": "https://stackoverflow.com/users/1002260/steven-penny"}, "is_accepted": true, "score": 4, "last_activity_date": 1427940378, "creation_date": 1427940378, "answer_id": 29403864, "question_id": 29402682, "link": "https://stackoverflow.com/questions/29402682/how-to-resolve-cannot-find-lcrypt-in-cygwin/29403864#29403864", "title": "How to resolve cannot find -lcrypt in Cygwin?", "body": "<p>Install package libcrypt-devel</p>\n\n<p><a href=\"http://github.com/svnpenn/a/blob/9ce35bc6de/misc/install-jekyll.sh#L2\" rel=\"nofollow\">Example</a></p>\n"}], "owner": {"reputation": 470, "user_id": 1389863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rrnEM.jpg?s=128&g=1", "display_name": "TimAlonso", "link": "https://stackoverflow.com/users/1389863/timalonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2227, "favorite_count": 0, "accepted_answer_id": 29403864, "answer_count": 1, "score": 1, "last_activity_date": 1594031197, "creation_date": 1427931284, "last_edit_date": 1427969158, "question_id": 29402682, "link": "https://stackoverflow.com/questions/29402682/how-to-resolve-cannot-find-lcrypt-in-cygwin", "title": "How to resolve cannot find -lcrypt in Cygwin?", "body": "<p>I'm trying to install Jekyll using Cygwin. I navigate to my project directory and run:</p>\n\n<pre><code>gem install jekyll\n</code></pre>\n\n<p>There were several errors but nothing that I couldn't solve by installing the appropriate package but there's an error that I'm currently stuck with:</p>\n\n<pre><code>Building native extensions.  This could take a while...\n  ERROR:  Error installing jekyll:\n      ERROR: Failed to build gem native extension.\n\n    /usr/bin/ruby.exe -r ./siteconf20150401-7872-17w9ed4.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\nrm -f\nrm -f stemmer.so  *.o  *.bak mkmf.log .*.time\n\nmake \"DESTDIR=\"\ngcc -I. -I/usr/include/ruby-2.0.0 -I/usr/include/ruby-2.0.0/ruby/backward -I/usr/include/ruby-2.0.0 -I.    -ggdb -O2 -pipe -Wimplicit-function-declaration    -o porter.o -c porter.c\ngcc -I. -I/usr/include/ruby-2.0.0 -I/usr/include/ruby-2.0.0/ruby/backward -I/usr/include/ruby-2.0.0 -I.    -ggdb -O2 -pipe -Wimplicit-function-declaration    -o porter_wrap.o -c porter_wrap.c\nrm -f stemmer.so\ngcc -shared -o stemmer.so porter.o porter_wrap.o -L. -L/usr/lib -L. -fstack-protector -Wl,--export-all-symbols -Wl,--enable-auto-image-base,--enable-auto-import    -lruby200  -lpthread -lrt -ldl -lcrypt\n/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lcrypt\ncollect2: error: ld returned 1 exit status\nMakefile:232: recipe for target 'stemmer.so' failed\nmake: *** [stemmer.so] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/&lt;user&gt;/.gem/ruby/gems/fast-stemmer-1.0.2 for inspection.\nResults logged to /home/&lt;user&gt;/.gem/ruby/extensions/x86_64-cygwin/fast-stemmer-1.0.2/gem_make.out\n</code></pre>\n\n<p>Am I missing something?</p>\n\n<p>I was following these tutorials:</p>\n\n<ul>\n<li><a href=\"http://nathanielstory.com/2013/12/28/jekyll-on-windows-with-cygwin.html\" rel=\"nofollow\">http://nathanielstory.com/2013/12/28/jekyll-on-windows-with-cygwin.html</a></li>\n<li><a href=\"http://matt.scharley.me/2012/03/10/windows-cygwin-and-jekyll.html\" rel=\"nofollow\">http://matt.scharley.me/2012/03/10/windows-cygwin-and-jekyll.html</a></li>\n</ul>\n"}, {"tags": ["ruby", "require"], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 0, "last_activity_date": 1427974292, "last_edit_date": 1427974292, "creation_date": 1427961877, "answer_id": 29407942, "question_id": 29402537, "link": "https://stackoverflow.com/questions/29402537/ruby-using-a-spec-helper-file-to-call-require-relative/29407942#29407942", "title": "Ruby, using a spec helper file to call &quot;require_relative&quot;", "body": "<p>I have solved by creating my own directory structure.\nYou can follow the same and this may help you.</p>\n\n<p>1) <code>problem/spec/t_spec.rb</code></p>\n\n<pre><code>require './spec_helper'\n</code></pre>\n\n<p>2) <code>problem/spec_helper.rb</code></p>\n\n<pre><code>require './t_file_helper'\nspec_file_basename = TFile.basename.split('/').last\nputs \"===spec_file_basename===#{spec_file_basename}=====\"\n</code></pre>\n\n<p>3) <code>problem/t_file_helper.rb</code></p>\n\n<pre><code>class TFile \n  def self.basename\n    eval('$0')\n  end\nend  \n</code></pre>\n\n<p>After executing <code>ruby spec/t_spec.rb</code> </p>\n\n<ul>\n<li>output : <code>===spec_file_basename===t_spec.rb=====</code></li>\n</ul>\n\n<p>So now you can execute your code as same in your spec_helper.rb. Because now we have <code>spec_file_basename</code>. </p>\n"}], "owner": {"reputation": 128, "user_id": 2908123, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/15cfb77ac1a6e7c520eb9c4a718c7d54?s=128&d=identicon&r=PG", "display_name": "Rafael Espinoza", "link": "https://stackoverflow.com/users/2908123/rafael-espinoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427974292, "creation_date": 1427930478, "last_edit_date": 1427930833, "question_id": 29402537, "link": "https://stackoverflow.com/questions/29402537/ruby-using-a-spec-helper-file-to-call-require-relative", "title": "Ruby, using a spec helper file to call &quot;require_relative&quot;", "body": "<p>I have a set of toy problems with this directory structure:  </p>\n\n<ul>\n<li>lib\n<ul>\n<li>001-problem.rb</li>\n<li>002-another_problem.rb</li>\n<li>003-more_problems.rb</li>\n<li>etc....</li>\n</ul></li>\n<li>spec\n<ul>\n<li>001-problem_spec.rb</li>\n<li>002-another_problem_spec.rb</li>\n<li>003-more_problems_spec.rb</li>\n<li>etc....</li>\n</ul></li>\n</ul>\n\n<p>The spec files &amp; lib files are named to match each other.</p>\n\n<p>Inside of a spec file, let's say, it's from 001-problem_spec.rb, I can do the usual: <code>require_relative '../lib/001-problem_spec.rb'</code></p>\n\n<p>But that gets kind of old as I am planning to create dozens of files. I want to make a template. So then I tried this, at the top of each file:</p>\n\n<pre><code>spec_file_basename = File.basename(__FILE__)\ncut_here = spec_file_basename.index('_spec')\nlib_file_basename = spec_file_basename[0...cut_here]\nfile = \"../lib/#{lib_file_basename}.rb\"\nrequire_relative file\n</code></pre>\n\n<p>But that is rather long &amp; repetitive. I'd like to put something like this codeblock into a spec_helper file so that each one of my spec files can reference it like so:<br>\n<code>require 'spec_helper'</code>. Obviously, just pasting in the previous codeblock into a spec_helper file won't work because <code>__FILE__</code> will return the name of my <em>helper</em> file (ie: spec_helper.rb), not my spec file (ie: 001-problem_spec.rb). </p>\n\n<p>Is there a way to get the name of the file that is calling <code>require 'spec_helper'</code> and then use that file name inside of my spec_helper file so the spec_helper can require the correct lib file for the spec file?</p>\n"}, {"tags": ["ruby", "sorting", "hash", "key-value", "alphabetical"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1427930202, "post_id": 29402422, "comment_id": 46980396, "body": "I would be careful expecting keys to be in a given order using Hashes.  Unless you are sure your using ActiveSupport::OrderedHash or some other library that ensures key ordering.  Hashes are supposed to be key-based lookups.  There isn&#39;t supposed to be an order.  If you need the order, leave it as an array."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1427931494, "post_id": 29402422, "comment_id": 46980815, "body": "<code>pets_ages.sort_by { |k, v| [v, k] }</code> or <code>pets_ages.sort_by(&amp;:reverse)</code> should work"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1427931879, "post_id": 29402422, "comment_id": 46980918, "body": "@PhilipHallstrom In Ruby, Hashes are explicitly ordered as of 1.9+."}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1427934075, "post_id": 29402422, "comment_id": 46981503, "body": "Well that&#39;s good to know. Thx!"}], "answers": [{"tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": false, "score": 1, "last_activity_date": 1427931376, "last_edit_date": 1427931376, "creation_date": 1427930636, "answer_id": 29402566, "question_id": 29402422, "link": "https://stackoverflow.com/questions/29402422/how-to-preserve-alphabetical-order-of-keys-when-sorting-a-hash-by-the-value/29402566#29402566", "title": "How to preserve alphabetical order of keys when sorting a hash by the value", "body": "<p>As Philip pointed out, hashes were not meant to preserve order, though I think in the latest Ruby they might. But let's say they don't. Here's an array based solution that could then be re-hashed:</p>\n\n<p><strong>Edit</strong> here it is in a one-liner:</p>\n\n<pre><code> new_pets_ages = Hash[pets_ages.sort.sort_by {|a| a[1]}]\n</code></pre>\n\n<p>previous answer:</p>\n\n<pre><code>pets_ages = {\"Eric\" =&gt; 6, \"Harry\" =&gt; 3, \"Georgie\" =&gt; 12, \"Bogart\" =&gt; 4, \"Poly\" =&gt; 4,\n    \"Annie\" =&gt; 1, \"Dot\" =&gt; 3}\n\narr = pets_ages.sort\n\n# [[\"Annie\", 1], [\"Bogart\", 4], [\"Dot\", 3], [\"Eric\", 6], [\"Georgie\", 12],\n#    [\"Harry\", 3], [\"Poly\", 4]]\n\nnew_arr = arr.sort_by {|a| a[1]}\n\n#[[\"Annie\", 1], [\"Dot\", 3], [\"Harry\", 3], [\"Bogart\", 4], [\"Poly\", 4], [\"Eric\", 6],\n#    [\"Georgie\", 12]]\n</code></pre>\n\n<p>And finally to get a hash back:</p>\n\n<pre><code>h = Hash[new_arr]\n\n#{\"Annie\"=&gt;1, \"Dot\"=&gt;3, \"Harry\"=&gt;3, \"Bogart\"=&gt;4, \"Poly\"=&gt;4, \"Eric\"=&gt;6, \n#   \"Georgie\"=&gt;12}\n</code></pre>\n\n<p>So when we sort a hash, it gives us an array of arrays with the items sorted by the original keys. Then we sort that array of arrays by the second value of each, and since it's a lazy sort, it only shifts them if need be. Then we can send it back to a hash. I'm sure there's a trick way to do a two-pass sort in one line but this seems pretty simple.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427936682, "post_id": 29402847, "comment_id": 46982098, "body": "You could write the last one as <code>pets_ages.sort_by(&amp;:reverse).to_h</code>."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 5, "last_activity_date": 1427933447, "last_edit_date": 1427933447, "creation_date": 1427932331, "answer_id": 29402847, "question_id": 29402422, "link": "https://stackoverflow.com/questions/29402422/how-to-preserve-alphabetical-order-of-keys-when-sorting-a-hash-by-the-value/29402847#29402847", "title": "How to preserve alphabetical order of keys when sorting a hash by the value", "body": "<p>In many languages, Hashes/Dicts aren't ordered, because of how the are implemented under the covers. Ruby 1.9+ is nice enough to guarantee ordering.</p>\n\n<p>You can do this in a single pass - Ruby allows you to sort by arbitrary criteria.</p>\n\n<pre><code># Given\npets_ages = {\"Eric\" =&gt; 6, \"Harry\" =&gt; 3, \"Georgie\" =&gt; 12, \"Bogart\" =&gt; 4, \"Poly\" =&gt; 4, \"Annie\" =&gt; 1, \"Dot\" =&gt; 3}\n\n# Sort pets by the critera of \"If names are equal, sort by name, else, sort by age\"\npets_ages.sort {|(n1, a1), (n2, a2)| a1 == a2 ? n1 &lt;=&gt; n2 : a1 &lt;=&gt; a2 }.to_h\n\n# =&gt; {\"Annie\"=&gt;1, \"Dot\"=&gt;3, \"Harry\"=&gt;3, \"Bogart\"=&gt;4, \"Poly\"=&gt;4, \"Eric\"=&gt;6, \"Georgie\"=&gt;12}\n</code></pre>\n\n<p>Hash#sort will return an array of <code>[k, v]</code> pairs, but those <code>k, v</code> pairs can be sorted by any criteria you want in a single pass. Once we have the sorted pairs, we turn it back into a Hash with <code>Array#to_h</code> (Ruby 2.1+), or you can use <code>Hash[sorted_result]</code> in earlier versions, as Beartech points out.</p>\n\n<p>You could get as complex as you want in the sort block; if you're familiar with Javascript sorting, Ruby actually works the same here. The <code>&lt;=&gt;</code> method returns -1, 0, or 1 depending on how the objects compare to each other. #sort just expects one of those return values, which tells it how the two given values relate to each other. You don't even have to use <code>&lt;=&gt;</code> at all if you don't want to - something like this is equivalent to the more compact form:</p>\n\n<pre><code>pets_ages.sort do |a, b|\n  if a[1] == b[1]\n    if a[0] &gt; b[0]\n      1\n    elsif a[0] &lt; b[0]\n      -1\n    else\n      0\n    end\n  else\n    if a[1] &gt; b[1]\n      1\n    elsif a[1] &lt; b[1]\n      -1\n    end\n  end\nend\n</code></pre>\n\n<p>As you can see, as long as you always return something in the set (-1 0 1), your sort function can do whatever you want, so you can compose them however you'd like. However, such verbose forms are practically never necessary in Ruby, because of the super handy &lt;=> operator!</p>\n\n<p>As Stefan points out, though, you have a BIG shortcut here: Array#&lt;=> is nice enough to <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-3C-3D-3E\" rel=\"noreferrer\">compare each entry between the compared arrays</a>. This means that we can do something like:</p>\n\n<pre><code>pets_ages.sort {|a, b| a.reverse &lt;=&gt; b.reverse }.to_h\n</code></pre>\n\n<p>This takes each [k, v] pair, reverses it into [v, k], and uses Array#&lt;=> to compare it. Since you need to perform this same operation on each [k, v] pair compared, you can shortcut it even further with #sort_by</p>\n\n<pre><code>pets_ages.sort_by {|k, v| [v, k] }.to_h\n</code></pre>\n\n<p>What this does is for each hash entry, it passes the key and value to the block, and the return result of the block is what is used to compare this [k, v] pair to other entries. Since comparing [v, k] to another [v, k] pair will give us the result we want, we just return an array consisting of [v, k], which sort_by collects and sorts the original [k, v] pairs by.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 2688642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484912f0ca4646f28648676c0eb6477b?s=128&d=identicon&r=PG", "display_name": "Azan Abrar", "link": "https://stackoverflow.com/users/2688642/azan-abrar"}, "is_accepted": false, "score": 0, "last_activity_date": 1427953094, "creation_date": 1427953094, "answer_id": 29405701, "question_id": 29402422, "link": "https://stackoverflow.com/questions/29402422/how-to-preserve-alphabetical-order-of-keys-when-sorting-a-hash-by-the-value/29405701#29405701", "title": "How to preserve alphabetical order of keys when sorting a hash by the value", "body": "<p>As you already know few methods of ruby for sorting that you have used. So I would not explain it you in detail rather keep it very simple one liner for you. Here is your answer:</p>\n\n<pre><code>pets_ages.sort.sort_by{|pets| pets[1]}.to_h\n</code></pre>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 91, "user_id": 4740291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-Ort8vBGTR5g/AAAAAAAAAAI/AAAAAAAAAEg/utI9bmJMXsM/photo.jpg?sz=128", "display_name": "Kyle Snow Schwartz", "link": "https://stackoverflow.com/users/4740291/kyle-snow-schwartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1489, "favorite_count": 0, "accepted_answer_id": 29402847, "answer_count": 3, "score": 2, "last_activity_date": 1427953094, "creation_date": 1427929872, "question_id": 29402422, "link": "https://stackoverflow.com/questions/29402422/how-to-preserve-alphabetical-order-of-keys-when-sorting-a-hash-by-the-value", "title": "How to preserve alphabetical order of keys when sorting a hash by the value", "body": "<p>beginner here. My first question. Go easy on me.</p>\n\n<p>Given the following hash:</p>\n\n<pre><code>pets_ages = {\"Eric\" =&gt; 6, \"Harry\" =&gt; 3, \"Georgie\" =&gt; 12, \"Bogart\" =&gt; 4, \"Poly\" =&gt; 4,\n        \"Annie\" =&gt; 1, \"Dot\" =&gt; 3}\n</code></pre>\n\n<p>and running the following method:</p>\n\n<pre><code>pets_ages.sort {|x, y| x[1] &lt;=&gt; y[1]}.to_h\n</code></pre>\n\n<p>the following is returned:</p>\n\n<pre><code>{\n      \"Annie\" =&gt; 1,\n        \"Dot\" =&gt; 3,\n      \"Harry\" =&gt; 3,\n       \"Poly\" =&gt; 4,\n     \"Bogart\" =&gt; 4,\n       \"Eric\" =&gt; 6,\n    \"Georgie\" =&gt; 12\n}\n</code></pre>\n\n<p>You will notice the hash is nicely sorted by the value, as intended. What I'd like to change is the ordering of the keys, so that they remain alphabetical in the case of a tie. Notice \"Dot\" and \"Harry\" are correct in that regard, but for some reason \"Poly\" and \"Bogart\" are not. My theory is that it is automatically sorting the keys by length in the case of a tie, and not alphabetically. How can I change that?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3359, "user_id": 618467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/624972b91564b142ec8481dde0b92898?s=128&d=identicon&r=PG", "display_name": "Tiago Farias", "link": "https://stackoverflow.com/users/618467/tiago-farias"}, "edited": false, "score": 1, "creation_date": 1427938287, "post_id": 29402265, "comment_id": 46982462, "body": "It does look like a routing problem. In your ajax call, try using the path &#39;oferts/update_categories&#39; instead."}, {"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "reply_to_user": {"reputation": 3359, "user_id": 618467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/624972b91564b142ec8481dde0b92898?s=128&d=identicon&r=PG", "display_name": "Tiago Farias", "link": "https://stackoverflow.com/users/618467/tiago-farias"}, "edited": false, "score": 0, "creation_date": 1427940955, "post_id": 29402265, "comment_id": 46983058, "body": "I did and it says &#39;oferts/oferts/update_categories&#39; is not defined =( what else can I do T_T"}, {"owner": {"reputation": 3359, "user_id": 618467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/624972b91564b142ec8481dde0b92898?s=128&d=identicon&r=PG", "display_name": "Tiago Farias", "link": "https://stackoverflow.com/users/618467/tiago-farias"}, "edited": false, "score": 0, "creation_date": 1427941074, "post_id": 29402265, "comment_id": 46983085, "body": "Would you post your routes file?"}], "answers": [{"comments": [{"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1427941838, "post_id": 29404035, "comment_id": 46983232, "body": "THANK YOU SO MUCH, you turned on a light in my brain, yea I had the  before_filter :authenticate_user! and  load_and_authorize_resource of cancancan, I just added except: array my update_categories action. Thank you again, The rail&#39;s error was not very descriptive..."}, {"owner": {"reputation": 3427, "user_id": 3604993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1cZQr.png?s=128&g=1", "display_name": "Zoker", "link": "https://stackoverflow.com/users/3604993/zoker"}, "reply_to_user": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 1, "creation_date": 1427945234, "post_id": 29404035, "comment_id": 46983991, "body": "@SsouLlesS Happy to help you fixed this problem. And this is my first best anwser on SO , thank you all the same."}], "tags": [], "owner": {"reputation": 3427, "user_id": 3604993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1cZQr.png?s=128&g=1", "display_name": "Zoker", "link": "https://stackoverflow.com/users/3604993/zoker"}, "is_accepted": true, "score": 2, "last_activity_date": 1427945405, "last_edit_date": 1427945405, "creation_date": 1427941551, "answer_id": 29404035, "question_id": 29402265, "link": "https://stackoverflow.com/questions/29402265/rails-4-ajax-call-to-controller-action-returning-404-not-found/29404035#29404035", "title": "Rails 4: ajax call to controller action returning 404 not found", "body": "<p>I have once got this problem</p>\n\n<p>finally, I find that the problem is in the filter</p>\n\n<p>Could you have any filer in your controller and would you like post it for help?</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 2688642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484912f0ca4646f28648676c0eb6477b?s=128&d=identicon&r=PG", "display_name": "Azan Abrar", "link": "https://stackoverflow.com/users/2688642/azan-abrar"}, "is_accepted": false, "score": 0, "last_activity_date": 1427953320, "creation_date": 1427953320, "answer_id": 29405750, "question_id": 29402265, "link": "https://stackoverflow.com/questions/29402265/rails-4-ajax-call-to-controller-action-returning-404-not-found/29405750#29405750", "title": "Rails 4: ajax call to controller action returning 404 not found", "body": "<p>The issue exists in not allowing such ajax methods in controller to pass even without any validation or authentication. You need to take a look in your controller either <strong>oferts_controller.rb or application_controller.rb</strong>. There must be some <strong>before_filter</strong> that is instead redirecting it to 404.</p>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 0, "accepted_answer_id": 29404035, "answer_count": 2, "score": 0, "last_activity_date": 1427953320, "creation_date": 1427928983, "question_id": 29402265, "link": "https://stackoverflow.com/questions/29402265/rails-4-ajax-call-to-controller-action-returning-404-not-found", "title": "Rails 4: ajax call to controller action returning 404 not found", "body": "<p>Ok Im like 1 hour trying to figure this out...</p>\n\n<p>I have this action in my oferts_controller.rb</p>\n\n<pre><code>    def update_categories\n     @categories = Category.children_of(Category.find(params[:categories]))\n     respond_to do |format|\n      format.js\n     end\n    end\n</code></pre>\n\n<p>This is what I have in routes.rb</p>\n\n<pre><code>get 'oferts/update_categories', as: 'update_categories'\n</code></pre>\n\n<p>This is what I have in my ajax call</p>\n\n<pre><code>$ -&gt;\n  $(document).on 'change', '#categories_parents_select', (evt) -&gt;\n    $.ajax 'update_categories',\n      type: 'GET'\n      dataType: 'script'\n      data: {\n        categories: $(\"#categories_parents_select option:selected\").val()\n      }\n      error: (jqXHR, textStatus, errorThrown) -&gt;\n        console.log(\"AJAX Error: #{textStatus}\")\n      success: (data, textStatus, jqXHR) -&gt;\n        console.log(\"Dynamic country select OK!\")\n</code></pre>\n\n<p>it is suposed that the update_categories action responds as a JavaScript, which is in app/views/oferts/update_categories.js.coffee</p>\n\n<pre><code>$(\"#categories_select\").empty()\n  .append(\"&lt;%= escape_javascript(render(:partial =&gt; @categories)) %&gt;\")\n</code></pre>\n\n<p>well after I try to execute the ajax I get this in the logs</p>\n\n<pre><code>Started GET \"/oferts/update_categories?categories=3&amp;_=1427927753744\" for 127.0.0.1 at 2015-04-01 17:36:01 -0500\nProcessing by OfertsController#update_categories as JS\n  Parameters: {\"categories\"=&gt;\"3\", \"_\"=&gt;\"1427927753744\"}\n  Rendered public/404.html (0.6ms)\nCompleted 404 Not Found in 38ms (Views: 36.8ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>Well if you see it is not even entering to the controller action, I tried adding <code>puts</code> inside the update_categories <code>def</code> in the controller but those are not printed in the logs. is this routing problem?</p>\n\n<p>Thanks for you help.</p>\n"}, {"tags": ["java", "ruby", "arrays", "loops", "iteration"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 2, "creation_date": 1427929093, "post_id": 29402220, "comment_id": 46980034, "body": "Java also has iterators, so this shouldn&#39;t cause your head to explode unless your understanding of Java is not as solid as you seem to think."}, {"owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1427929342, "post_id": 29402220, "comment_id": 46980120, "body": "It just seems Ruby does a lot for you where in Java you have to do everything for yourself. I&#39;m not use to it."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1427930050, "post_id": 29402220, "comment_id": 46980342, "body": "That&#39;s a good thing.  Learn to love it."}, {"owner": {"reputation": 2755, "user_id": 1604312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVThG.gif?s=128&g=1", "display_name": "Rael Gugelmin Cunha", "link": "https://stackoverflow.com/users/1604312/rael-gugelmin-cunha"}, "edited": false, "score": 0, "creation_date": 1427930329, "post_id": 29402220, "comment_id": 46980454, "body": "<code>each</code> is a method for collections. It receives, as parameter, a <code>block</code>. All content between <code>do</code> and <code>end</code> is a block. As described in <code>each</code> documentation, Ruby will apply the given block code to each collection item. Inside this block, you can give a name to current item (in the sample code called just <code>item</code>). Java 8 appears to have a similar approach using <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">Lambdas</a>."}, {"owner": {"reputation": 19518, "user_id": 968969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0802303aaa5f03f4cec652171dffcbc7?s=128&d=identicon&r=PG", "display_name": "Tony Hopkinson", "link": "https://stackoverflow.com/users/968969/tony-hopkinson"}, "edited": false, "score": 0, "creation_date": 1427930425, "post_id": 29402220, "comment_id": 46980494, "body": "um you are confusing a for loop with a foreach loop"}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1427934940, "post_id": 29402220, "comment_id": 46981710, "body": "Groovy has equivalents of Ruby&#39;s iterators, ranges, and other loop constructs."}], "answers": [{"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 2, "last_activity_date": 1427930501, "last_edit_date": 1427930501, "creation_date": 1427929747, "answer_id": 29402399, "question_id": 29402220, "link": "https://stackoverflow.com/questions/29402220/explain-ruby-loops-compared-to-java/29402399#29402399", "title": "Explain Ruby loops compared to Java", "body": "<p>The Ruby code fragment you provided is essentially the same as this Java fragment:</p>\n\n<pre><code>  int[] odds = {1, 3, 5, 7, 9};\n\n  for(int item : odds) {\n     item *= 2;\n     System.out.println(item);\n  }\n</code></pre>\n\n<p>Both Ruby and Java provide iterators for collections.  They also both provide other looping or iterating constructs if you want them.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "edited": false, "score": 0, "creation_date": 1427931040, "post_id": 29402553, "comment_id": 46980692, "body": "So with the each_with_index I&#39;m guessing you can filter x so you could increment by whatever you wanted."}, {"owner": {"reputation": 2033, "user_id": 174514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziJ7S.jpg?s=128&g=1", "display_name": "aks", "link": "https://stackoverflow.com/users/174514/aks"}, "reply_to_user": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "edited": false, "score": 0, "creation_date": 1427931777, "post_id": 29402553, "comment_id": 46980891, "body": "Yes, if you wish to iterate over sub-parts of the array, it&#39;s probably best to filter it and then run an <code>each</code> over the items that are desired.  For example: <code>somearray.grep(&#47;somepattern&#47;).each{|item| process(item)}</code>.    But, you could just as easily filter on values of <code>x</code> with <code>each_with_index</code>, as you suggested"}], "tags": [], "owner": {"reputation": 2033, "user_id": 174514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziJ7S.jpg?s=128&g=1", "display_name": "aks", "link": "https://stackoverflow.com/users/174514/aks"}, "is_accepted": true, "score": 2, "last_activity_date": 1427930565, "creation_date": 1427930565, "answer_id": 29402553, "question_id": 29402220, "link": "https://stackoverflow.com/questions/29402220/explain-ruby-loops-compared-to-java/29402553#29402553", "title": "Explain Ruby loops compared to Java", "body": "<p><code>each</code> is an <em>iterator</em> method which works with a code <em>block</em>: it iterates over the items in an array (or dictionary), in the order given within the array, and passes the iterating values, one at a time.</p>\n\n<p><code>item</code> is set to each value from the object on which the <code>each</code> method was called.</p>\n\n<p>The general syntax is:</p>\n\n<pre><code>ARRAY.each do |var| CODE-USING-var end\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ARRAY.each {|var| CODE-USING-var }\n</code></pre>\n\n<p>both syntaxes have equivalent meaning.  There is a convention to use <code>do</code> - <code>end</code> pairs on larger blocks of code, but it's just a convention.</p>\n\n<p>There is a related method called <code>each_with_index</code>, which produces two values on each iteration: the item value, and the index (starting with 0) of that item within the object.</p>\n\n<p>Example:\n<code><pre>#!/usr/bin/env ruby\n#\nwords = %w( now is the time for all good men )\ndef show_words list\n  puts \"---\"\n  list.each_with_index do\n    |word,x|\n    puts \"word #{x} = #{word}\"\n  end\nend\nshow_words words\nshow_words words.reverse\nshow_words words.sort\n</pre></code></p>\n\n<p>Here is the invocation:</p>\n\n<pre><code>./t2.rb\n---\nword 0 = now\nword 1 = is\nword 2 = the\nword 3 = time\nword 4 = for\nword 5 = all\nword 6 = good\nword 7 = men\n---\nword 0 = men\nword 1 = good\nword 2 = all\nword 3 = for\nword 4 = time\nword 5 = the\nword 6 = is\nword 7 = now\n---\nword 0 = all\nword 1 = for\nword 2 = good\nword 3 = is\nword 4 = men\nword 5 = now\nword 6 = the\nword 7 = time\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1427959964, "creation_date": 1427959964, "answer_id": 29407420, "question_id": 29402220, "link": "https://stackoverflow.com/questions/29402220/explain-ruby-loops-compared-to-java/29407420#29407420", "title": "Explain Ruby loops compared to Java", "body": "<p>What you have there is not a loop. It is simply a method of the <code>Array</code> class which <code>yield</code>s each item in turn to a block.</p>\n\n<p>Note that this is no different from Java, it is, in fact, <em>exactly</em> equivalent to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-\" rel=\"nofollow\"><code>java.lang.Iterable.forEach</code></a>:</p>\n\n<pre><code>List&lt;Integer&gt; odds = Arrays.asList(1, 3, 5, 7, 9 );\n\nodds.forEach(item -&gt; {\n  item *= 2;\n  System.out.println(item);\n});\n</code></pre>\n\n<p>The implementation of <code>Array#each</code> in Ruby looks a little bit like this:</p>\n\n<pre><code>class Array\n  def each\n    howmany = size\n    i = -1\n\n    while i+=1 &lt; howmany\n      yield self[i]\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 29402553, "answer_count": 3, "score": 0, "last_activity_date": 1427959964, "creation_date": 1427928703, "question_id": 29402220, "link": "https://stackoverflow.com/questions/29402220/explain-ruby-loops-compared-to-java", "title": "Explain Ruby loops compared to Java", "body": "<p>In Java you have to specify what value you are going to increase and by how much. In Ruby is seems you can set each value of say an array to some random variable and it auto increments. This bugs me so much because even though I understand what is going on I can't wrap my head around how you would get finer control. What if I wanted to increment by 2 or decrement? This is an example from codecademy.</p>\n\n<pre><code>odds = [1,3,5,7,9]\n\n# Add your code below!\nodds.each do |item|\n    item *= 2\n    print item\nend\n</code></pre>\n\n<p>I understand it's iterating over each element in the array but where does item come from? Do you just pull it out of the sky and ruby initializes it to the particular element you are iterating over? Also how do you specify how you want to increment? What if I only want every other element in the array?</p>\n"}, {"tags": ["ruby", "string", "sqlite", "equality"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4740917, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6816688e9b9ea9f918e1d08080b3bcee?s=128&d=identicon&r=PG", "display_name": "Austin Paxton", "link": "https://stackoverflow.com/users/4740917/austin-paxton"}, "is_accepted": false, "score": 0, "last_activity_date": 1427949328, "creation_date": 1427949328, "answer_id": 29405043, "question_id": 29401551, "link": "https://stackoverflow.com/questions/29401551/ruby-sqlite3-bind-params/29405043#29405043", "title": "Ruby SQLite3 bind_params", "body": "<p>Have you tried using the <code>stmt.bind_params( 15, \"hello\" )</code> style syntax as well? </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7422703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbeb2c26f6a4ac7872d1cd191058dc75?s=128&d=identicon&r=PG&f=1", "display_name": "dieter", "link": "https://stackoverflow.com/users/7422703/dieter"}, "is_accepted": false, "score": 0, "last_activity_date": 1484513652, "creation_date": 1484513652, "answer_id": 41666212, "question_id": 29401551, "link": "https://stackoverflow.com/questions/29401551/ruby-sqlite3-bind-params/41666212#41666212", "title": "Ruby SQLite3 bind_params", "body": "<p>I have had a similar problem. It turned out that the string I was using had a different encoding than the encoding that was required. </p>\n\n<p>Check what <code>input[1].encoding</code> and <code>\"test\".encoding</code> yield! If they are different, use the <code>force_encoding</code>-method.</p>\n"}], "owner": {"reputation": 41, "user_id": 4740136, "user_type": "registered", "profile_image": "https://graph.facebook.com/1708121358/picture?type=large", "display_name": "Jeffrey Brown", "link": "https://stackoverflow.com/users/4740136/jeffrey-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1484513652, "creation_date": 1427925383, "last_edit_date": 1427929696, "question_id": 29401551, "link": "https://stackoverflow.com/questions/29401551/ruby-sqlite3-bind-params", "title": "Ruby SQLite3 bind_params", "body": "<p>I'm having an issue with Ruby SQLite.  This is my code,</p>\n\n<pre><code>require 'socket'\nrequire 'sqlite3'\n\nserver = TCPServer.open(1337)\nDB = SQLite3::Database.new \"./Tavern.db\"\nloop {\n    Thread.start(server.accept) do |client|\n        input = client.gets\n        input = input.gsub '\\n', ''\n        input = input.split(' ')\n        case input[0]\n        when 'register'\n            stmt = DB.prepare \"INSERT INTO Managers (name, job, location, busy)\n            VALUES (?, ?, ?, 0)\"\n            stmt.bind_params input[1], input[2], client.addr[3]\n            stmt.execute\n        when 'request_job'\n            stmt = DB.prepare \"SELECT * FROM Tasks WHERE job = ? AND assigned = 0\"\n            stmt.bind_params input[1]\n            results = stmt.execute\n            puts results.next\n        end\n    end\n}\n</code></pre>\n\n<p>Where <code>input[1] = \"test\"</code></p>\n\n<p>If <code>stmt.bind_params input[1]</code> is changed to <code>stmt.bind_params \"test\"</code>, the sql query works, if it is left as is, it doesn't.  I've checked to make absolutely sure that \"test\" and input[1] are equal with == and by using .bytes on both of them and manually comparing.  </p>\n\n<p>Any ideas on why this might be the case?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "edited": false, "score": 0, "creation_date": 1427983853, "post_id": 29401756, "comment_id": 47002513, "body": "I&#39;m not sure how to use this to accomplish anything like I currently have. The child classes have already been implemented, so going from fully written child classes to instances of some Node class would require a LOT more work than you&#39;re showing here. That&#39;s why I asked for ways to modify the Base classes, NOT for ways to completely rewrite everything. I think it&#39;s reasonable to go from inheritance to mixins maybe (since that&#39;s a trivial change in the child classes), but this is entirely different."}, {"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "reply_to_user": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "edited": false, "score": 0, "creation_date": 1428070930, "post_id": 29401756, "comment_id": 47037300, "body": "Fair enough. I&#39;ll try to add another answer to try and help with the existing implementation."}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 0, "last_activity_date": 1427926257, "creation_date": 1427926257, "answer_id": 29401756, "question_id": 29401287, "link": "https://stackoverflow.com/questions/29401287/how-do-i-separate-existing-class-variables-in-ruby/29401756#29401756", "title": "How do I separate existing class variables in Ruby?", "body": "<p>I think you'd be better served using composition instead of inheritance. What this means is setting up objects that communicate with each other explicitly rather than using parent child class relationships. Relying on inheritance often leads to state management issues as you're experiencing here, whereas composition can give you finer control on how state is managed between objects.</p>\n\n<p>For instance:</p>\n\n<pre><code>Class Node\n  attr_accessor :parent, :name\n\n  def initialize(parent, name)\n    @parent = parent\n    @name = name\n  end\n\n  def show\n    \"base: #{parent.name} child: #{name}\"    \n  end\nend\n\nparent = Node.new(nil, 'core')\nchild1 = Node.new(parent, 'child1')\nchild2 = Node.new(parent, 'child2')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "edited": false, "score": 0, "creation_date": 1428078924, "post_id": 29434113, "comment_id": 47041154, "body": "I appreciate the effort you put into this solution. It&#39;s crazy that this kind of contortion is required to do this. Let me see if I understand: you&#39;re converting my class variables to functions that reference a class-name-mangled version of the class variable (falling back to looking up in the inheritance hierarchy)."}, {"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "reply_to_user": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "edited": false, "score": 0, "creation_date": 1428079218, "post_id": 29434113, "comment_id": 47041270, "body": "Yeah, we&#39;re setting unique class variables on each class and then falling back to the parent if no class variable is set on the current class. Maybe there&#39;s a better way, but it gets a bit gnarly when dealing with class variables on parent/child classes."}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": true, "score": 1, "last_activity_date": 1428071399, "creation_date": 1428071399, "answer_id": 29434113, "question_id": 29401287, "link": "https://stackoverflow.com/questions/29401287/how-do-i-separate-existing-class-variables-in-ruby/29434113#29434113", "title": "How do I separate existing class variables in Ruby?", "body": "<p>Here's a second shot at this based on feedback from my first answer. This abstracts class variable hierarchy behavior. I hope it helps in some way.</p>\n\n<pre><code>module BaseBehavior\n  def self.included(base)\n    base.send(:extend, ClassMethods)\n  end\n\n  module ClassMethods\n    def set_all(val)\n      self.send :class_variable_set, class_var_name, val\n    end\n\n    def class_var_name\n      \"@@#{self.name}_base_var\"\n    end\n\n    def class_var\n      if class_variable_defined? class_var_name\n        self.send :class_variable_get, class_var_name\n      else\n        superclass.class_var\n      end\n    end\n\n   def show\n      \"base: #{class_var}; me: #{@per_child}\"\n    end\n  end\nend\n\nclass Base\n  include BaseBehavior\n  set_all 'core'\n\n  @per_child = ''\n\n  def self.set(val)\n    @per_child = val\n  end\nend\n\nclass Base1 &lt; Base\n  include BaseBehavior\n  set_all 'first base'\nend\n\nclass Base2 &lt; Base\n  include BaseBehavior\n  set_all 'second base'\nend\n\nclass Child1 &lt; Base1; set \"first child\"; end\nclass Child2 &lt; Base1; set \"second child\"; end\nclass Child3 &lt; Base2; set \"third child\"; end\nclass Child4 &lt; Base2; set \"fourth child\"; end\n\nputs \"[Child1] #{Child1.show}\"\nputs \"[Child2] #{Child2.show}\"\nputs \"[Child3] #{Child3.show}\"\nputs \"[Child4] #{Child4.show}\"\n</code></pre>\n"}], "owner": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 29434113, "answer_count": 2, "score": 0, "last_activity_date": 1428071399, "creation_date": 1427924163, "question_id": 29401287, "link": "https://stackoverflow.com/questions/29401287/how-do-i-separate-existing-class-variables-in-ruby", "title": "How do I separate existing class variables in Ruby?", "body": "<p>I have an existing class hierarchy that makes use of both class variables and class instance variables. The fact that class variables are shared among all child classes was desirable because I have some common data, but now I need to split that shared data among other branches of the inheritance hierarchy.</p>\n\n<p>This is roughly how it looks and works now:</p>\n\n<pre><code>class Base\n   @@common = ''\n   @per_child = ''\n   def self.show\n      \"base: #{@@common}; me: #{@per_child}\"\n   end\n   def self.set(val)\n     @per_child = val\n   end\n   def self.set_all(val)\n     @@common = val\n   end\nend\n\nclass Child1 &lt; Base; set \"first child\"; end\nclass Child2 &lt; Base; set \"second child\"; end\n\nBase.set_all('core')\nputs \"[Child1] #{Child1.show}\"\nputs \"[Child2] #{Child2.show}\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[Child1] base: core; me: first child\n[Child2] base: core; me: second child\n</code></pre>\n\n<p>This is exactly what I wanted until now. Now, I'm trying to duplicate the behavior of the <code>Base</code> class without duplicating the code. Something like the following:</p>\n\n<pre><code># Same \"Base\" class as above\nclass Base1 &lt; Base; end\nclass Base2 &lt; Base; end\n\nclass Child1 &lt; Base1; set \"first child\"; end\nclass Child2 &lt; Base1; set \"second child\"; end\nclass Child3 &lt; Base2; set \"third child\"; end\nclass Child4 &lt; Base2; set \"fourth child\"; end\n\nBase1.set_all('first base')\nBase2.set_all('second base')\n\nputs \"[Child1] #{Child1.show}\"\nputs \"[Child2] #{Child2.show}\"\nputs \"[Child3] #{Child3.show}\"\nputs \"[Child4] #{Child4.show}\"\n</code></pre>\n\n<p>Obviously the output of the above is:</p>\n\n<pre><code>[Child1] base: second base; me: first child\n[Child2] base: second base; me: second child\n[Child3] base: second base; me: third child\n[Child4] base: second base; me: fourth child\n</code></pre>\n\n<p>But I want to modify the definition of <code>Base1</code> and <code>Base2</code> (and <code>Base</code> if needed) such that the output is:</p>\n\n<pre><code>[Child1] base: first base; me: first child\n[Child2] base: first base; me: second child\n[Child3] base: second base; me: third child\n[Child4] base: second base; me: fourth child\n</code></pre>\n\n<p>I understand why it's behaving the way it is, but I'm not sure how to get the behavior I'm looking for, with <code>@@common</code> now a class variable of the <code>Base1</code> and <code>Base2</code> classes without having to define it in more places than <code>Base</code>.</p>\n"}, {"tags": ["ruby", "monkeypatching"], "comments": [{"owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "edited": false, "score": 0, "creation_date": 1427924544, "post_id": 29401159, "comment_id": 46978340, "body": "Have fun with Project Euler. ;)"}], "answers": [{"comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1427924740, "post_id": 29401174, "comment_id": 46978413, "body": "What if the most common ancestor is not a class? (ex. <code>Array.ancestors &amp; Range.ancestors</code> -&gt; <code>Enumerable</code>)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 1, "creation_date": 1427925189, "post_id": 29401174, "comment_id": 46978600, "body": "@Caridorc you can use  <code>Array.ancestors.grep(Class)</code> to select classes"}], "tags": [], "owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "is_accepted": true, "score": 5, "last_activity_date": 1427933474, "last_edit_date": 1592644375, "creation_date": 1427923748, "answer_id": 29401174, "question_id": 29401159, "link": "https://stackoverflow.com/questions/29401159/monkey-patching-fixnum-and-bignum-without-duplication/29401174#29401174", "title": "Monkey patching Fixnum and Bignum without duplication", "body": "<p>Both classes inherit from <a href=\"http://ruby-doc.org/core-2.2.0/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a>. Monkeypatch that if you want to affect both. From the docs:</p>\n<blockquote>\n<h2>Integer</h2>\n<p>This class is the basis for the two concrete classes that hold whole numbers, <code>Bignum</code> and <code>Fixnum</code>.</p>\n</blockquote>\n<pre><code>2.0.0-p353 :001 &gt; class Integer; def worked?; true; end; end\n#=&gt; nil \n2.0.0-p353 :002 &gt; 42.worked?\n#=&gt; true \n2.0.0-p353 :003 &gt; 42.class\n#=&gt; Fixnum \n2.0.0-p353 :004 &gt; big = 2**90\n#=&gt; 1237940039285380274899124224 \n2.0.0-p353 :005 &gt; big.worked?\n#=&gt; true \n2.0.0-p353 :006 &gt; big.class\n#=&gt; Bignum \n</code></pre>\n<p>You can find the common classes and modules of both using set intersection:</p>\n<pre><code>Fixnum.ancestors &amp; Bignum.ancestors\n#=&gt; [Integer, Numeric, Comparable, Object, Kernel, BasicObject] \n</code></pre>\n<hr />\n<p>For the case when two classes (or more) do not share an appropriate common module or class, you can alternatively do either this:</p>\n<pre><code>module MyExtension\n  def palindrome?\n    ...\n  end\nend\n\nclass NumbaOne\n  include MyExtension\nend\n\nclass NumbaTwo\n  include MyExtension\nend\n</code></pre>\n<p>Or, if you don't want to modify the entire class, but just certain instances:</p>\n<pre><code>a1 = NumbaOne.new\na2 = NumbaOne.new\nb1 = NumbaTwo.new\n\n[a1,a2,b1].each{ |o| o.extend MyExtension }\n</code></pre>\n"}], "owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 1, "accepted_answer_id": 29401174, "answer_count": 1, "score": 2, "last_activity_date": 1427933474, "creation_date": 1427923692, "last_edit_date": 1427924620, "question_id": 29401159, "link": "https://stackoverflow.com/questions/29401159/monkey-patching-fixnum-and-bignum-without-duplication", "title": "Monkey patching Fixnum and Bignum without duplication", "body": "<p>I have added two small helpers for working with numbers but I found that I had to copy paste my method to make it work with both <code>Bignum</code> and <code>Fixnum</code>. How can I write a method for both the number classes without such copy-paste?</p>\n\n<pre><code>class Bignum\n    def digits\n        self.to_s.split('').map(&amp;:to_i)\n    end\n\n    def palindrome?\n        self.to_s == self.to_s.reverse\n    end\nend\n\nclass Fixnum\n    def digits\n        self.to_s.split('').map(&amp;:to_i)\n    end\n\n    def palindrome?\n        self.to_s == self.to_s.reverse\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sqlite", "auto-increment"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1427923314, "post_id": 29401057, "comment_id": 46977836, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/692856/set-start-value-for-autoincrement-in-sqlite\">Set start value for AUTOINCREMENT in SQLite</a>"}, {"owner": {"reputation": 103, "user_id": 4708669, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/86e927af287dc805419ce303842a7191?s=128&d=identicon&r=PG&f=1", "display_name": "davefogo", "link": "https://stackoverflow.com/users/4708669/davefogo"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1427928683, "post_id": 29401057, "comment_id": 46979904, "body": "This answer does not answer my question. I was looking for a solution using raw sql."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1427934185, "post_id": 29401057, "comment_id": 46981539, "body": "Why do you want to do that? Please describe what you try to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4708669, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/86e927af287dc805419ce303842a7191?s=128&d=identicon&r=PG&f=1", "display_name": "davefogo", "link": "https://stackoverflow.com/users/4708669/davefogo"}, "edited": false, "score": 0, "creation_date": 1427937058, "post_id": 29403092, "comment_id": 46982205, "body": "Thanks this makes sense!"}, {"owner": {"reputation": 103, "user_id": 4708669, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/86e927af287dc805419ce303842a7191?s=128&d=identicon&r=PG&f=1", "display_name": "davefogo", "link": "https://stackoverflow.com/users/4708669/davefogo"}, "edited": false, "score": 0, "creation_date": 1427991523, "post_id": 29403092, "comment_id": 47007474, "body": "I was wondering where to place this method? Would it be in the controller? Inside the other methods (index, show etc?)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 103, "user_id": 4708669, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/86e927af287dc805419ce303842a7191?s=128&d=identicon&r=PG&f=1", "display_name": "davefogo", "link": "https://stackoverflow.com/users/4708669/davefogo"}, "edited": false, "score": 0, "creation_date": 1428008529, "post_id": 29403092, "comment_id": 47016291, "body": "No, it belongs into the model."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1427934094, "creation_date": 1427934094, "answer_id": 29403092, "question_id": 29401057, "link": "https://stackoverflow.com/questions/29401057/how-can-i-make-an-int-field-in-rails-that-starts-to-auto-increment-at-10001/29403092#29403092", "title": "How can I make an INT field in rails that starts to auto_increment at 10001?", "body": "<p>If you had two auto increment columns on one table both value would always be in sync (with an offset given by the start value). Therefore it doesn't make much sense to have two independent auto increment columns on one table. It would just be a waste of diskspace. </p>\n\n<p>That said: Some database engines support combined auto increment columns (auto increment columns that depend on other columns), but afaik no engine support two independent columns.</p>\n\n<p>A simple work around would be something like this:</p>\n\n<pre><code>def secondary_id\n  id + 10_000\nend\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 4708669, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/86e927af287dc805419ce303842a7191?s=128&d=identicon&r=PG&f=1", "display_name": "davefogo", "link": "https://stackoverflow.com/users/4708669/davefogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 29403092, "answer_count": 1, "score": 0, "last_activity_date": 1427934094, "creation_date": 1427923204, "last_edit_date": 1427930676, "question_id": 29401057, "link": "https://stackoverflow.com/questions/29401057/how-can-i-make-an-int-field-in-rails-that-starts-to-auto-increment-at-10001", "title": "How can I make an INT field in rails that starts to auto_increment at 10001?", "body": "<p>How can I create a field (non-primary id) in a rails table that auto_increments like an id but that starts from the number 10,000? My app is using sqlite3 and rails 4.</p>\n\n<p>Thank you</p>\n\n<p>The suggested solution does not address my question. I was looking for a raw SQL answer.</p>\n"}, {"tags": ["ruby", "linux", "excel", "dashing", "roo-gem"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4719035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214e963f717d797a14d8b4a9bb5d9a2?s=128&d=identicon&r=PG&f=1", "display_name": "rleigh", "link": "https://stackoverflow.com/users/4719035/rleigh"}, "is_accepted": false, "score": 0, "last_activity_date": 1428004918, "last_edit_date": 1495535367, "creation_date": 1428003828, "answer_id": 29421179, "question_id": 29400811, "link": "https://stackoverflow.com/questions/29400811/use-with-excel-data-to-display-on-dashing-dashboard/29421179#29421179", "title": "Use with Excel data to display on Dashing Dashboard?", "body": "<p>Okay, so I was able to get this working and to display my data on a Dashing Dashboard widget by doing the following:</p>\n\n<p><strong>First:</strong> I uploaded my <strong>spreadsheet.xls</strong> to the root directory of my dashboard.</p>\n\n<p><strong>Second:</strong> I replaced the <strong>/jobs/sample.rb</strong> code with:</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'roo'\n\n\nSCHEDULER.every '2s' do\nfile_path = \"#{Dir.pwd}/spreadsheet.xls\"\n\ndef fetch_spreadsheet_data(path)\n  s = Roo::Excel.new(path)\n  send_event('valuation',   { current: s.cell('B',49) })\n\nend\n\nmodule Handler\n  def file_modified\n    fetch_spreadsheet_data(path)\n  end\nend\n\nfetch_spreadsheet_data(file_path)\n\nend\n</code></pre>\n\n<p><strong>Third:</strong> Make sure the <strong>/widgets/number</strong> is in your dashboard \"this is part of the sample install\".</p>\n\n<p><strong>Fourth:</strong> Add the following code to your <strong>/dashboards/sample.erb</strong> file \"this is part of the sample install as well\".</p>\n\n<pre><code>&lt;li data-row=\"1\" data-col=\"1\" data-sizex=\"1\" data-sizey=\"1\"&gt;\n      &lt;div data-id=\"valuation\" data-view=\"Number\" data-title=\"Current Valuation\" data-prefix=\"$\"&gt;&lt;/div&gt;\n    &lt;/li&gt;\n</code></pre>\n\n<p>I used <a href=\"http://www.rubydoc.info/gems/roo/frames\" rel=\"nofollow noreferrer\">this source</a> to help me better understand how Roo works. I tested my widget by changing my values and re-uploading the spreadsheet.xls to server and seen instant changes on my dashboard.</p>\n\n<p>Hope this helps someone and I'm still looking for help to automate this process by scraping the data. Reference <a href=\"https://stackoverflow.com/questions/29292643/scraping-a-site-that-requires-login-username-and-password-on-two-separate-pages\">this if you can help</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9795271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CyNU6.jpg?s=128&g=1", "display_name": "Christophe Lauer", "link": "https://stackoverflow.com/users/9795271/christophe-lauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1526399457, "creation_date": 1526399457, "answer_id": 50354437, "question_id": 29400811, "link": "https://stackoverflow.com/questions/29400811/use-with-excel-data-to-display-on-dashing-dashboard/50354437#50354437", "title": "Use with Excel data to display on Dashing Dashboard?", "body": "<p>Thanks for sharing this code sample. I did not manage to make it work in my environment (Raspberry/Raspbian) but after some efforts I managed to come up something that works -- at least for me ;)</p>\n\n<p>I had never worked with Ruby before this week, so this code may be a bit crappy. Please accept apologizes.</p>\n\n<p>-- Christophe</p>\n\n<pre><code>require 'roo'\nrequire 'rubygems'\nrequire 'rb-inotify'\n\n# Implement INotify::Notifier.watch as described here:\n# https://www.go4expert.com/articles/track-file-changes-ruby-inotify-t30264/\n\nfile_path = \"#{Dir.pwd}/datasheet.csv\"\n\ndef fetch_spreadsheet_data(path)\n  s = Roo::CSV.new(path)\n  send_event('csvdata',   { value: s.cell(1, 1) })\nend\n\nSCHEDULER.every '5s' do\n\nnotifier = INotify::Notifier.new\n\nnotifier.watch(file_path, :modify) do |event|\n    event.flags.each do |flag|\n        ## convert to string\n        flag = flag.to_s\n\n        puts case flag\n            when 'modify' then fetch_spreadsheet_data(file_path)\n        end\n    end\nend\n\n## loop, wait for events from inotify\nnotifier.process\n\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4719035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214e963f717d797a14d8b4a9bb5d9a2?s=128&d=identicon&r=PG&f=1", "display_name": "rleigh", "link": "https://stackoverflow.com/users/4719035/rleigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1879, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526399457, "creation_date": 1427922279, "last_edit_date": 1495542391, "question_id": 29400811, "link": "https://stackoverflow.com/questions/29400811/use-with-excel-data-to-display-on-dashing-dashboard", "title": "Use with Excel data to display on Dashing Dashboard?", "body": "<p>I'm trying to get an example of the following code from <a href=\"https://github.com/Shopify/dashing/issues/78\" rel=\"nofollow noreferrer\">github</a> that looks to be a dead topic for my Linux/Ubuntu install. I have been trying to scrape data from my company intranet using \"mechanize\" see <a href=\"https://stackoverflow.com/questions/29292643/scraping-a-site-that-requires-login-username-and-password-on-two-separate-pages\">stack question for details</a>. Since I'm not smart enough to figure a way around my login issue I thought I would try and feed data from an excel sheet as a work around until I can figure out the mechanize route. Once again I'm not smart enough to get the provided code to work on Linux because I'm getting the following error:</p>\n\n<p><strong>`kqueue=': kqueue is not supported on this platform (EventMachine::Unsupported)</strong></p>\n\n<p>If I'm understanding correctly from the information provided in the original source, the problem is that <code>kqueue</code> isn't supported in Linux. The OP states that <code>inotify</code> is an alternative but I've had no luck finding a similar example using it to display Excel in a widget.</p>\n\n<p>Here is the code that is shown on GitHub and would like help converting it to work on Linux:</p>\n\n<pre><code>require 'roo'\n\nEM.kqueue = EM.kqueue?\nfile_path = \"#{Dir.pwd}/spreadsheet.xls\"\n\ndef fetch_spreadsheet_data(path)\n  s = Roo::Excel.new(path)\n  send_event('valuation',   { current: s.cell(1, 2) })\nend\n\nmodule Handler\n  def file_modified\n    fetch_spreadsheet_data(path)\n  end\nend\n\nfetch_spreadsheet_data(file_path)\n\nEM.next_tick do\n  EM.watch_file(file_path, Handler)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3937, "user_id": 1234765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07b5487c337b6cf2a392ccbd41ef1696?s=128&d=identicon&r=PG", "display_name": "Almaron", "link": "https://stackoverflow.com/users/1234765/almaron"}, "edited": false, "score": 0, "creation_date": 1427921464, "post_id": 29400505, "comment_id": 46976948, "body": "I believe this should help you out.  <a href=\"http://stackoverflow.com/questions/4244611/pass-variables-to-ruby-script-via-command-line\" title=\"pass variables to ruby script via command line\">stackoverflow.com/questions/4244611/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 279927, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bed3a2e462368eb830f167eda3e0983c?s=128&d=identicon&r=PG", "display_name": "Mason", "link": "https://stackoverflow.com/users/279927/mason"}, "is_accepted": true, "score": 0, "last_activity_date": 1427921543, "creation_date": 1427921543, "answer_id": 29400582, "question_id": 29400505, "link": "https://stackoverflow.com/questions/29400505/how-to-pass-url-in-ruby-command-line/29400582#29400582", "title": "How to pass URL in ruby command line?", "body": "<p>The <code>ARGV</code> constant holds an array which contains all of the arguments passed in on the command line. So in your script, you could get the url passed in via <code>ARGV[0]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 1508133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde875f0535dee3a8224c59bf84f9f2d?s=128&d=identicon&r=PG", "display_name": "Junior Joanis", "link": "https://stackoverflow.com/users/1508133/junior-joanis"}, "is_accepted": false, "score": 0, "last_activity_date": 1427921566, "creation_date": 1427921566, "answer_id": 29400592, "question_id": 29400505, "link": "https://stackoverflow.com/questions/29400505/how-to-pass-url-in-ruby-command-line/29400592#29400592", "title": "How to pass URL in ruby command line?", "body": "<p>ARGV is an array which contains all the arguments passed into your script via the command line.</p>\n\n<pre><code>ARGV.each do|arg|\n  puts \"Argument: #{arg}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3427, "user_id": 3604993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1cZQr.png?s=128&g=1", "display_name": "Zoker", "link": "https://stackoverflow.com/users/3604993/zoker"}, "is_accepted": false, "score": 0, "last_activity_date": 1427941841, "creation_date": 1427941841, "answer_id": 29404077, "question_id": 29400505, "link": "https://stackoverflow.com/questions/29400505/how-to-pass-url-in-ruby-command-line/29404077#29404077", "title": "How to pass URL in ruby command line?", "body": "<p>Just use <code>ARGV</code> constant , you can puts <code>ARGV.to_s</code> in log to see what`s in it , to helps you understand how to use it .</p>\n"}], "owner": {"reputation": 13, "user_id": 4739941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176542f895cb13c6d3a103a514a66f22?s=128&d=identicon&r=PG&f=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/4739941/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 29400582, "answer_count": 3, "score": 1, "last_activity_date": 1427998576, "creation_date": 1427921265, "last_edit_date": 1427998576, "question_id": 29400505, "link": "https://stackoverflow.com/questions/29400505/how-to-pass-url-in-ruby-command-line", "title": "How to pass URL in ruby command line?", "body": "<p>I have written a ruby program in which it takes the input as url and it displays the components in it.\nI passed the URL inside the ruby file but now I want to pass it through ruby command line like ruby filename.rb url.\nHow to pass an argument inside the code.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-3", "rubymine"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1427921298, "post_id": 29400400, "comment_id": 46976848, "body": "If you want it all, you need to generate scaffold, not controller..."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4739894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34c1a996ef42bb0ea934012c00d252c?s=128&d=identicon&r=PG&f=1", "display_name": "AngieT", "link": "https://stackoverflow.com/users/4739894/angiet"}, "edited": false, "score": 0, "creation_date": 1427923568, "post_id": 29401010, "comment_id": 46977952, "body": "Thanks! I have problems with the console, but I&#39;m working on fixing that, and I will try this as soon as I can. BTW the tutorial is really good, thank you :)"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 11, "user_id": 4739894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34c1a996ef42bb0ea934012c00d252c?s=128&d=identicon&r=PG&f=1", "display_name": "AngieT", "link": "https://stackoverflow.com/users/4739894/angiet"}, "edited": false, "score": 0, "creation_date": 1427923751, "post_id": 29401010, "comment_id": 46978033, "body": "Its written by <a href=\"http://david.heinemeierhansson.com/\" rel=\"nofollow noreferrer\">DHH</a> himself! :) later please don&#39;t forget to rate my answer if it helped."}], "tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": false, "score": 3, "last_activity_date": 1427923051, "creation_date": 1427923051, "answer_id": 29401010, "question_id": 29400400, "link": "https://stackoverflow.com/questions/29400400/ruby-on-rails-html-erb-file-not-created/29401010#29401010", "title": "Ruby on Rails .html.erb file not created", "body": "<p>First of all, if you are beginning with Rails I would recommend not to go against the conventions that the framework already puts up for you.</p>\n\n<p>Secondly, if you want the pages which just have no DB connectivity and just for static UI, you can do something like this:</p>\n\n<p><code>$ rails generate controller Pages home contact somepage</code>\nwhich will create a <code>pages</code> folder inside <code>/app/views/</code> of your project with .erb templates for the home, contact, somepage </p>\n\n<p>More info: <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow\">http://guides.rubyonrails.org/layouts_and_rendering.html</a></p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 11, "user_id": 4739894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34c1a996ef42bb0ea934012c00d252c?s=128&d=identicon&r=PG&f=1", "display_name": "AngieT", "link": "https://stackoverflow.com/users/4739894/angiet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1427923051, "creation_date": 1427920920, "question_id": 29400400, "link": "https://stackoverflow.com/questions/29400400/ruby-on-rails-html-erb-file-not-created", "title": "Ruby on Rails .html.erb file not created", "body": "<p>I recently began working with Ruby on Rails.</p>\n\n<p>I'm familiar with the MVC concept and using RubyMine as editor. But I'm probably missing something, because when I generated controller via Run Rails Generator, I added Destination Folder to the controller (because I wanted to create special folder for the UI pages, that won't be in the DB and are only used for the front-end). The problem is, that there is no .html.erb file created in the assets/views, just the folder from the Destination folder.</p>\n\n<p>Good to mention, that database entities are created via scaffolding and are already in the folders: controllers and views.</p>\n\n<p>Also, I will use this opportunity, to ask for good tips for generating that HTML and CSS front-end pages directly in Rails, because I've mostly worked on back-end in this technology.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["ruby", "exception"], "answers": [{"tags": [], "owner": {"reputation": 3565, "user_id": 2363935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/273081c71f1516ee881f74fd63b07502?s=128&d=identicon&r=PG", "display_name": "kross", "link": "https://stackoverflow.com/users/2363935/kross"}, "is_accepted": false, "score": 0, "last_activity_date": 1428026977, "creation_date": 1428026977, "answer_id": 29425271, "question_id": 29399897, "link": "https://stackoverflow.com/questions/29399897/backtrace-in-nested-exceptions/29425271#29425271", "title": "Backtrace in nested exceptions", "body": "<p>I'm looking for a Java equivalent of nested exceptions as well.  So far, it appears that <a href=\"https://github.com/skorks/nesty\" rel=\"nofollow\">Nesty</a> is the way to go.  <a href=\"https://bugs.ruby-lang.org/issues/8257\" rel=\"nofollow\">I see that Charles Nutter requested #cause</a> to be added to the MRI, and something was, but it doesn't display.  </p>\n\n<pre><code>class HappyError &lt; StandardError\n  include Nesty::NestedError\nend\n\n\nbegin\n  raise 'foo'\nrescue =&gt; e\n  raise HappyError.new\nend\n</code></pre>\n\n<p>Looks simple enough (note this implicitly nests the cause which is accessible via $!)</p>\n"}], "owner": {"reputation": 14512, "user_id": 253098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/400nc.png?s=128&g=1", "display_name": "SystematicFrank", "link": "https://stackoverflow.com/users/253098/systematicfrank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1428026977, "creation_date": 1427919168, "question_id": 29399897, "link": "https://stackoverflow.com/questions/29399897/backtrace-in-nested-exceptions", "title": "Backtrace in nested exceptions", "body": "<p>I am trying to improve the backtrace of a nested exception. Currently I have this:</p>\n\n<pre><code>def upsert(doc)\n  get(doc.id) ? update(doc) : insert(doc)\nrescue =&gt; ex\n  raise RepositoryError, \"#{ex.class}: #{ex.message}\"\nend\n</code></pre>\n\n<p>In my <strong>upsert</strong> method I want to wrap any exception into a generic one. This solution works but has an annoying side effect: the backtrace of the real problem is lost (the rescued exception)</p>\n\n<p>I might further fix the problem replacing the backtrace with the one from the inner exception:</p>\n\n<pre><code>  raise RepositoryError, \"#{ex.class}: #{ex.message}\", ex.backtrace\n</code></pre>\n\n<p>This shows the backtrace with the real problem, but excludes the line raising <strong>RepositoryError</strong>. I might use <code>__FILE__:__LINE__</code> to extend <code>ex.backtrace</code> but the insertion is not trivial because I must find the right position inside the backtrace.</p>\n\n<p>Since this seems such a basic-common need: Is there an easier way to achieve everything I am trying to do?</p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 5, "creation_date": 1427919625, "post_id": 29399741, "comment_id": 46975930, "body": "Restructure your code so this problem doesn&#39;t occur - if you reduce your code to a minimal example that exhibits the problem then someone can give a concrete answer"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1427920828, "post_id": 29399741, "comment_id": 46976558, "body": "You should only be getting an error if both files contain code which is run at load time (like in a class body or at the top level). The simplest solution is to wrap the references in methods, which you only call once both files are loaded."}], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427919453, "creation_date": 1427918574, "question_id": 29399741, "link": "https://stackoverflow.com/questions/29399741/is-there-a-way-to-load-files-simultaneously-in-ruby", "title": "Is there a way to load files simultaneously in Ruby?", "body": "<p>I have a problem with regard to loading some files in Ruby. They are set up like so:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 file1.rb\n\u251c\u2500\u2500 file2.rb\n\u2514\u2500\u2500 load_files.rb\n</code></pre>\n\n<p><code>file1.rb</code></p>\n\n<pre><code>class File1\n  # contains a reference to the File2 class\nend\n</code></pre>\n\n<p><code>file2.rb</code></p>\n\n<pre><code>class File2\n  # contains a reference to the File1 class\nend\n</code></pre>\n\n<p><code>load_files.rb</code></p>\n\n<pre><code>require './file1'\nrequire './file2'\n</code></pre>\n\n<p>The problem here is that both classes make references to each other, but <code>File1</code> gets loaded before <code>File2</code> so it crashes because <code>File2</code> is not yet defined. The same problem will occur if you reverse the order of the loading of the files, so that's out of the question. The only way that I can see to resolve this issue is to load <code>file1.rb</code> and <code>file2.rb</code> simultaneously, but  I don't know if this is possible. Does anyone see a way to resolve this by either loading the files simultaneously or by some other means?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "command-line", "rubymine-7"], "answers": [{"tags": [], "owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "is_accepted": true, "score": 2, "last_activity_date": 1427918724, "creation_date": 1427918724, "answer_id": 29399792, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal/29399792#29399792", "title": "Opening ruby app from Rubymine terminal", "body": "<p>The standard way to do it on bash/OSX from the JetBrains <a href=\"https://www.jetbrains.com/ruby/help/working-with-rubymine-features-from-command-line.html#d264576e249\" rel=\"nofollow\">site</a>:</p>\n\n<p><code>$&lt;RubyMine&gt; &lt;path1&gt; --line&lt;number&gt; &lt;path2&gt;</code></p>\n\n<p>That's the launcher, the path to the project, the line you want the file to open to and the path to the file in order. An example would be: <code>/Applications/RubyMine.app/Contents/MacOS/rubymine ~/RubyMineProjects/untitled45 --line 1 ~/RubyMineProjects/untitled45/sample.sass</code> These can be pretty long commands, but you can create a symlink to shorten the launcher at least.</p>\n\n<p>Keep in mind that launching from the command line launches with the ruby version you have set there as well as any other command line configs. If you want to keep configurations from the editor you should open the project the conventional way.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 3734466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5412dfee03b4cb060d6344b67ae0c195?s=128&d=identicon&r=PG&f=1", "display_name": "user3734466", "link": "https://stackoverflow.com/users/3734466/user3734466"}, "is_accepted": false, "score": 13, "last_activity_date": 1455642929, "creation_date": 1455642929, "answer_id": 35438920, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal/35438920#35438920", "title": "Opening ruby app from Rubymine terminal", "body": "<p>RubyMine has a special menu item for that. In ver. 8, 'Tools' > 'Create command-line launcher ...' Previous versions should keep the item somewhere around.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6440779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f42792faafd76ea636a2d9cea42ed19?s=128&d=identicon&r=PG&f=1", "display_name": "chocolate sar", "link": "https://stackoverflow.com/users/6440779/chocolate-sar"}, "is_accepted": false, "score": 0, "last_activity_date": 1500911250, "last_edit_date": 1500911250, "creation_date": 1500909698, "answer_id": 45284369, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal/45284369#45284369", "title": "Opening ruby app from Rubymine terminal", "body": "<p>For RubyMine 2017.1.5, just type <kbd>Alt</kbd> + <kbd>F12</kbd> for local terminal</p>\n"}, {"tags": [], "owner": {"reputation": 10477, "user_id": 907245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/GKgNi.jpg?s=128&g=1", "display_name": "Kashiftufail", "link": "https://stackoverflow.com/users/907245/kashiftufail"}, "is_accepted": false, "score": 0, "last_activity_date": 1539915462, "creation_date": 1539915462, "answer_id": 52884983, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal/52884983#52884983", "title": "Opening ruby app from Rubymine terminal", "body": "<p>Just go to folder where Rubymine is download.Then go to Rubymine bin folder. And run command from console. In my case</p>\n\n<pre><code>   kashif@kashif-HP-ProBook-4520s:~/Downloads/RubyMine-2017.1.6/bin$ ./rubymine.sh \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7231325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe77fb01d64cb52fa1b30066040fb73?s=128&d=identicon&r=PG&f=1", "display_name": "JennaR", "link": "https://stackoverflow.com/users/7231325/jennar"}, "is_accepted": false, "score": 4, "last_activity_date": 1540807777, "creation_date": 1540807777, "answer_id": 53043165, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal/53043165#53043165", "title": "Opening ruby app from Rubymine terminal", "body": "<p>Once you've created command-line launcher (Tools > Create Command-Line Launcher), you can use the command <code>mine</code> via the command line..</p>\n\n<p>e.g. If you have navigated to a folder via the command line, that you then want to open with Rubymine, you can run <code>mine .</code></p>\n"}, {"tags": [], "owner": {"reputation": 1560, "user_id": 9285378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qXZT.png?s=128&g=1", "display_name": "Rigi", "link": "https://stackoverflow.com/users/9285378/rigi"}, "is_accepted": false, "score": 0, "last_activity_date": 1588161257, "last_edit_date": 1588161257, "creation_date": 1588156619, "answer_id": 61499799, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal/61499799#61499799", "title": "Opening ruby app from Rubymine terminal", "body": "<p>Previous answers didn't help me (using RubyMine 2020.1)</p>\n\n<p>Instructions for Mac (different OSs also described on <a href=\"https://www.jetbrains.com/help/ruby/working-with-the-ide-features-from-command-line.html\" rel=\"nofollow noreferrer\">rubymine docs</a>):</p>\n\n<ol>\n<li>Create a script:</li>\n</ol>\n\n<blockquote>\n  <p>You can create a shell script with this command in a directory from your PATH environment variable. For example, create the file <code>/usr/local/bin/rubymine</code> with the following contents:</p>\n</blockquote>\n\n<pre><code>#!/bin/sh\n\nopen -na \"RubyMine.app\" --args \"$@\"\n</code></pre>\n\n<ol start=\"2\">\n<li>Tada! Assuming that script is executable (in case not - run <code>chmod +x /usr/local/bin/rubymine</code>) Now you are able to navigate to proper directory and run <code>rubymine .</code> to run RubyMine for that directory</li>\n</ol>\n\n<p>If you want to play around with different args passed while starting RubyMine, check <a href=\"https://www.jetbrains.com/help/ruby/working-with-the-ide-features-from-command-line.html\" rel=\"nofollow noreferrer\">rubymine docs</a>.</p>\n"}], "owner": {"reputation": 576, "user_id": 2275540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0c949cbafe28092f362d1f887cd59260?s=128&d=identicon&r=PG", "display_name": "stringRay2014", "link": "https://stackoverflow.com/users/2275540/stringray2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4511, "favorite_count": 0, "accepted_answer_id": 29399792, "answer_count": 6, "score": 3, "last_activity_date": 1588161257, "creation_date": 1427917372, "question_id": 29399420, "link": "https://stackoverflow.com/questions/29399420/opening-ruby-app-from-rubymine-terminal", "title": "Opening ruby app from Rubymine terminal", "body": "<p>I just got Rubymine and getting used to ruby on rails  on mac ,\nIm wondering if there is any command to open a ruby app on Rubymine 7 , from terminal </p>\n\n<p>would there be a command like </p>\n\n<blockquote>\n  <p>$ Rubymine /Path/to/RubyApp</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427916911, "post_id": 29399099, "comment_id": 46974440, "body": "not sure I understand the question, are u asking about <code>password</code> or callbacks ?"}, {"owner": {"reputation": 609, "user_id": 3891844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf945cc749dae8c0d8e397df058acdde?s=128&d=identicon&r=PG", "display_name": "Nondv", "link": "https://stackoverflow.com/users/3891844/nondv"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427962331, "post_id": 29399099, "comment_id": 46990052, "body": "Both:) I&#39;m sorry for my english."}], "answers": [{"tags": [], "owner": {"reputation": 609, "user_id": 3891844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf945cc749dae8c0d8e397df058acdde?s=128&d=identicon&r=PG", "display_name": "Nondv", "link": "https://stackoverflow.com/users/3891844/nondv"}, "is_accepted": true, "score": 0, "last_activity_date": 1427965009, "creation_date": 1427965009, "answer_id": 29408876, "question_id": 29399099, "link": "https://stackoverflow.com/questions/29399099/getters-in-rors-model/29408876#29408876", "title": "Getters in RoR&#39;s model", "body": "<p>I think that when I write </p>\n\n<blockquote>\n  <p>password = 'test_pass'</p>\n</blockquote>\n\n<p>I don't use the setter (like <em>any_instance.password = 'test_pass'</em>), but I create a local variable <em>password</em> which does not make any sense to class instance.</p>\n\n<p>I have to use <em>self</em>:</p>\n\n<pre><code>    if password_changed?\n        puts password # trololo\n        self.password = 'test_pass'\n        puts password # test_pass\n    end\n</code></pre>\n\n<p>So I have to read more about Ruby:)</p>\n"}], "owner": {"reputation": 609, "user_id": 3891844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf945cc749dae8c0d8e397df058acdde?s=128&d=identicon&r=PG", "display_name": "Nondv", "link": "https://stackoverflow.com/users/3891844/nondv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 29408876, "answer_count": 1, "score": -2, "last_activity_date": 1427965009, "creation_date": 1427916145, "question_id": 29399099, "link": "https://stackoverflow.com/questions/29399099/getters-in-rors-model", "title": "Getters in RoR&#39;s model", "body": "<p>I'm trying to learn Ruby and RoR.\nI'm confused by Ruby's magic:)</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    require 'digest/sha1'\n    validates :login, :password, :email, { presence: true }\n    validates :login, :email, { uniqueness: true }\n\n    before_save :hash_password\n\n    private def hash_password\n        if password_chanched?\n            puts @password.class.name\n            puts password\n            password = 'test_pass'\n            puts password\n\n            # @password = Digest::SHA1.hexdigest(password)      it works\n        end\n    end\nend\n</code></pre>\n\n<p>console:</p>\n\n<pre><code>&gt;&gt; t = User.new login: 'Test', email: 'abc@def.ghi', password: 'trololo'\n#&lt;User id: nil, login: \"Test\", password: \"trololo\", email: \"abc@def.ghi\", created_at: nil, updated_at: nil&gt;\n\n&gt;&gt; t.save\nNilClass\ntrololo\ntest_pass\ntrue\n\n&gt;&gt; t.password\n\"trololo\"\n</code></pre>\n\n<p>So my question is:</p>\n\n<p>What does <em>password</em> returns? And what have I to modify in callbacks?</p>\n\n<p>Actually, this before_validation callback works just fine:</p>\n\n<pre><code>def downcase_login_and_email\n    login.downcase!\n    email.downcase!\nend\n</code></pre>\n"}, {"tags": ["ruby", "file-io"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427915924, "post_id": 29398885, "comment_id": 46973898, "body": "Try this <code>Dir.glob(&quot;**&#47;*?.*&quot;)..</code>. This should skip hidden files."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1427916375, "post_id": 29398885, "comment_id": 46974121, "body": "@Stefan Ok.. I misunderstood then,"}], "answers": [{"tags": [], "owner": {"reputation": 15585, "user_id": 14877, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/23f288aa92a6e2c6f8664fa23d200429?s=128&d=identicon&r=PG", "display_name": "Chuck Callebs", "link": "https://stackoverflow.com/users/14877/chuck-callebs"}, "is_accepted": true, "score": 2, "last_activity_date": 1427915760, "creation_date": 1427915760, "answer_id": 29398989, "question_id": 29398885, "link": "https://stackoverflow.com/questions/29398885/ruby-ignore-periods-in-directories-when-searching-all-directories-for-files/29398989#29398989", "title": "Ruby: Ignore periods in directories when searching all directories for files?", "body": "<p>For a quick fix, you can add:</p>\n\n<p><code>next if File.directory?(file)</code></p>\n\n<p>at the beginning of your block.</p>\n"}], "owner": {"reputation": 195, "user_id": 1298928, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/60f7486464bf9418b6bfbdc3f0b3f439?s=128&d=identicon&r=PG", "display_name": "emvee", "link": "https://stackoverflow.com/users/1298928/emvee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 29398989, "answer_count": 1, "score": 0, "last_activity_date": 1427915760, "creation_date": 1427915456, "question_id": 29398885, "link": "https://stackoverflow.com/questions/29398885/ruby-ignore-periods-in-directories-when-searching-all-directories-for-files", "title": "Ruby: Ignore periods in directories when searching all directories for files?", "body": "<p>I created a find script to search for text in files in all directories from which the script is ran.</p>\n\n<pre><code>print \"Enter text to search: \"\ninput = gets.chomp\n\nsearch = Regexp.escape(input)\n\nDir.glob(\"**/*.*\").each do |file|\n        data = File.read(file)\n        if data.match(search)\n        puts \"Text Found: \" + __dir__ + \"/\" + file\n end\n end\n</code></pre>\n\n<p>It works but I get this error as the directory I am searching in contains directory names with periods..</p>\n\n<pre><code>find.rb:7:in `read': Is a directory @ rb_sysopen - cramws/cram_ws.egg-info (Errno::EISDIR)\n    from find.rb:7:in `block in &lt;main&gt;'\n    from find.rb:6:in `each'\n    from find.rb:6:in `&lt;main&gt;'\n</code></pre>\n\n<p>How can I ingore these?</p>\n"}, {"tags": ["ruby", "sublimetext2"], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1501841447, "post_id": 29399381, "comment_id": 77968751, "body": "Thanks a lot for clarifying. I had the same issue. Hopefully this can be fixed one day."}], "tags": [], "owner": {"reputation": 89490, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 3, "last_activity_date": 1427917242, "creation_date": 1427917242, "answer_id": 29399381, "question_id": 29398732, "link": "https://stackoverflow.com/questions/29398732/sublime-color-syntax-for-ruby-variables-vs-keywords/29399381#29399381", "title": "Sublime color syntax for Ruby variables vs keywords", "body": "<p>No, there is not a way to do this with the default Ruby syntax that ships with Sublime. <code>list</code>, <code>each</code>, <code>print</code>, and <code>x</code> are all scoped as <code>source.ruby</code>, meaning they don't have a specific scope that can be targeted by a color scheme. On the other hand, <code>end</code> is scoped <code>keyword.control.ruby</code>, and <code>do</code> is <code>keyword.control.start-block.ruby</code> (in addition to the base <code>source.ruby</code> scope that applies to all elements), so if you have a rule in your color scheme for <code>keyword</code> or <code>keyword.control</code>, they can be colored differently. <code>|x|</code> is <code>punctuation.separator.variable.ruby</code> for the pipes <code>|</code>, and <code>variable.other.block.ruby</code> for <code>x</code>, so those can be adjusted per your preferences.</p>\n\n<p>Essentially, an item can only be colored if it has a distinct scope, and your color scheme contains a rule for that scope (or a more generalized version of it, but not a more specific version of it). Ruby is especially challenging as compared to Python, for example, as while Python methods always have parentheses at the end (<code>string_var.replace()</code>, for example) and regexes can be written to highlight anything between the dot <code>.</code> and the parens as a function call, Ruby does not follow this paradigm, so the syntax highlighting definition (found in the various <code>.tmLanguage</code> files) cannot distinguish between a method call and a simple attribute, and so cannot highlight them differentially. This is why <code>list.each</code> in your program is only <code>source.ruby</code>, and <code>each</code> is not highlighted as a function.</p>\n"}], "owner": {"reputation": 22080, "user_id": 1081043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ce01465deb2032903f0c1b86bc3f431e?s=128&d=identicon&r=PG", "display_name": "wisbucky", "link": "https://stackoverflow.com/users/1081043/wisbucky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 3, "accepted_answer_id": 29399381, "answer_count": 1, "score": 2, "last_activity_date": 1427917242, "creation_date": 1427914903, "question_id": 29398732, "link": "https://stackoverflow.com/questions/29398732/sublime-color-syntax-for-ruby-variables-vs-keywords", "title": "Sublime color syntax for Ruby variables vs keywords", "body": "<p>Is there a way for Sublime Text 2 to display different colors for Ruby \"variables\" vs \"keywords\"? The image below is an example of Ruby code with the default Monokai color scheme. I was hoping I could having the variables (list, x) be a different color than the keywords (each, print).</p>\n\n<p>Currently, they're all tied to <code>&lt;key&gt;foreground&lt;/key&gt;</code>. I did try changing the <code>variable</code> color, but that only changed for the <code>|x|</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/hFYAG.png\" alt=\"Example of Ruby color syntax\"></p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1427919556, "post_id": 29398533, "comment_id": 46975889, "body": "In ParticipantsController#Create, it does not appear you are saving the event object you&#39;ve updated since there is no<code>event.save</code>  Might need to see the HTML you are triggering for this action since you have two separate controller actions that seem to be unrelated.  Does event.participants get made in the Event controller action?  If so then you&#39;ll need to include those params in <code>event_params</code> as well."}, {"owner": {"reputation": 1257, "user_id": 3708505, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/719900264/picture?type=large", "display_name": "Nate Beers", "link": "https://stackoverflow.com/users/3708505/nate-beers"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1427924799, "post_id": 29398533, "comment_id": 46978441, "body": "I think Im just over complicating it and confusing myself with the namespacing. Event.participants never actually gets created. An event is created first of all with a host. Then there is a button for other people to be able to join that event at a later time."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1427925295, "post_id": 29398533, "comment_id": 46978650, "body": "I recommend adding the pry gem to development, and opening a <code>binding.pry</code> session inside the code triggered for the join action (which I assume is EventParticipantsController#Create) to test if your syntax is working, particularly this flow: <code>event = Event.find(params[:event_id])</code>,        <code>participant = current_user</code>, and <code>event.participants &lt;&lt; current_user</code>  That syntax looks right, but I&#39;m nearly positive that the <code>&lt;&lt;</code> syntax in rails does not actually cause the changes to your objects to persist unless you call <code>event.save</code> after."}, {"owner": {"reputation": 1257, "user_id": 3708505, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/719900264/picture?type=large", "display_name": "Nate Beers", "link": "https://stackoverflow.com/users/3708505/nate-beers"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1427932452, "post_id": 29398533, "comment_id": 46981062, "body": "You may be right. I will give that a try tomorrow as I unfortunately do not have my comp with me."}], "owner": {"reputation": 1257, "user_id": 3708505, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/719900264/picture?type=large", "display_name": "Nate Beers", "link": "https://stackoverflow.com/users/3708505/nate-beers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427914295, "creation_date": 1427914295, "question_id": 29398533, "link": "https://stackoverflow.com/questions/29398533/rails-4-cant-get-users-to-correctly-join-an-event-as-a-participant", "title": "Rails 4 - Can&#39;t get users to correctly join an event as a participant", "body": "<p>I think it's in my controller logic somewhere, just cannot figure it out. When I click join event, I cannot get the participant_id to go into the event so I can use event.participants in my view. I can create the event just fine and get the host to work fine, it's just the participants.</p>\n\n<p>I will show my relationships, which I believe are OK.</p>\n\n<p>User.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n    devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable\n\n    has_many :events_participants, foreign_key: :participant_id\n    has_many :events, through: :events_participants\n    has_many :hosted_events, class_name: \"Event\", foreign_key: :host_id\n    has_one :workplace\n\n    validates :email, format: { with: /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i, on: :create }\nend\n</code></pre>\n\n<p>Event.rb</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  has_many :events_participants\n  has_many :participants, through: :events_participants\n  belongs_to :host, class_name: \"User\"\n\n  validates :spots, presence: true, allow_blank: false\n  validates :title, presence: true, allow_blank: false\n  default_scope -&gt; {order(time: :asc)}\nend\n</code></pre>\n\n<p>events_participant.rb</p>\n\n<pre><code>class EventsParticipant &lt; ActiveRecord::Base\n  belongs_to :event\n  belongs_to :participant, class_name: \"User\"\nend\n</code></pre>\n\n<p>Here are my controllers: </p>\n\n<p>events_controller.rb</p>\n\n<pre><code>class EventsController &lt; InheritedResources::Base\n  before_action :authenticate_user!, only: [:create,:update]\n  before_action :find_event, only: [:show,:update,:edit,:destroy]\n\n  def create\n      @event = Event.new(event_params.merge(host_id: current_user.id))\n      @event.save\n      redirect_to root_path\n  end\n\n  def index\n      @events = Event.all\n  end\n\n  def update\n      @event.update_attributes(event_params)\n      redirect_to @event\n  end\n\n  def destroy\n      @event.destroy\n      redirect_to root_path\n  end\n\nprivate\n\n  def find_event\n      @event = Event.find(params[:id])\n  end\n\n  def event_params\n    params.require(:event).permit(:time, :title, :spots, :host_id)\n  end\nend\n</code></pre>\n\n<p>participants_controller.rb</p>\n\n<pre><code>class ParticipantsController &lt; ApplicationController\n    def create\n      event = Event.find(params[:event_id])\n      participant = current_user\n      event.participants &lt;&lt; current_user\n      redirect_to event\n    end\n\n    def destroy\n      EventsParticipant.where(event_id: params[:event_id], participant_id: params[:id])[0].destroy()\n      redirect_to Event.find(params[:event_id])\n  end\nend\n</code></pre>\n\n<p>This is what is showing up in the terminal when i click \"join event\"</p>\n\n<pre><code> SQL (0.2ms)  INSERT INTO \"events_participants\" (\"event_id\", \"participant_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"event_id\", 12], [\"participant_id\", 2], [\"created_at\", \"2015-04-01 18:45:34.458668\"], [\"updated_at\", \"2015-04-01 18:45:34.458668\"]]\n</code></pre>\n\n<p>(14.0ms)  COMMIT</p>\n\n<p>So, I can see it is inserting a participant_id that is equal to the current_user's ID into EventParticipants table, but I cannot figure out how to put that all together.</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428003390, "post_id": 29398460, "comment_id": 47013805, "body": "Welcome to Stack Overflow. We need you to provide a minimal XML sample for input, what you want to retrieve from that XML, and an example of the code you wrote to solve this problem. As is, it looks like you are only fishing for answers, not a solution to a problem."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3192136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DFnBt.jpg?s=128&g=1", "display_name": "fmorales", "link": "https://stackoverflow.com/users/3192136/fmorales"}, "edited": false, "score": 0, "creation_date": 1427924178, "post_id": 29400352, "comment_id": 46978208, "body": "I am looking for values that might have data and has the full pair of tags.      If there is no data, it will have the trailing slash version, and just be one tag."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "reply_to_user": {"reputation": 147, "user_id": 3192136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DFnBt.jpg?s=128&g=1", "display_name": "fmorales", "link": "https://stackoverflow.com/users/3192136/fmorales"}, "edited": false, "score": 0, "creation_date": 1427925301, "post_id": 29400352, "comment_id": 46978656, "body": "@fmorales as far as the parser is concerned, <code>&lt;value&gt;&lt;&#47;value&gt;</code> is the same as <code>&lt;value&#47;&gt;</code>, you can\u2019t tell the difference between them. If you are looking for elements that <i>aren\u2019t</i> empty you can use <code>!=</code> instead: <code>&#47;&#47;value[. != &#39;&#39;]</code>."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1427920752, "creation_date": 1427920752, "answer_id": 29400352, "question_id": 29398460, "link": "https://stackoverflow.com/questions/29398460/xml-searching-for-tags-that-may-have-data-or-not/29400352#29400352", "title": "XML searching for tags that may have data, or not", "body": "<p>Are you looking for how to select empty elements? This XPath should work:</p>\n\n<pre><code>//value[. = '']\n</code></pre>\n\n<p>This will match <code>&lt;value&gt;&lt;/value&gt;</code> or <code>&lt;value/&gt;</code> (which are equivalent), but won\u2019t match <code>&lt;value&gt;foo&lt;/value&gt;</code> or <code>&lt;value&gt; &lt;/value&gt;</code> (the last one contains a space).</p>\n"}], "owner": {"reputation": 147, "user_id": 3192136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DFnBt.jpg?s=128&g=1", "display_name": "fmorales", "link": "https://stackoverflow.com/users/3192136/fmorales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 29400352, "answer_count": 1, "score": 0, "last_activity_date": 1427920752, "creation_date": 1427913982, "last_edit_date": 1427914152, "question_id": 29398460, "link": "https://stackoverflow.com/questions/29398460/xml-searching-for-tags-that-may-have-data-or-not", "title": "XML searching for tags that may have data, or not", "body": "<p>I am trying to search for:</p>\n\n<pre><code>&lt;value&gt;&lt;/value&gt; \n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;value/&gt;\n</code></pre>\n\n<p>I need to be able to pass if either one exists, and not fail of one type of the value is missing. Is there a way to do this? </p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "watir-webdriver", "page-object-gem"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1427919462, "post_id": 29398365, "comment_id": 46975839, "body": "It is a bit unclear where you are having difficulties. Why can you not create multiple page objects and use them like normal?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4724469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11080a886fb03bd2c9f67e5413b410c6?s=128&d=identicon&r=PG&f=1", "display_name": "Allvitende", "link": "https://stackoverflow.com/users/4724469/allvitende"}, "edited": false, "score": 0, "creation_date": 1427924073, "post_id": 29400316, "comment_id": 46978164, "body": "Yes I think this will work! Thanks! I think I was over thinking the issue"}, {"owner": {"reputation": 107, "user_id": 4143303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mTt5.jpg?s=128&g=1", "display_name": "Megan B", "link": "https://stackoverflow.com/users/4143303/megan-b"}, "reply_to_user": {"reputation": 25, "user_id": 4724469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11080a886fb03bd2c9f67e5413b410c6?s=128&d=identicon&r=PG&f=1", "display_name": "Allvitende", "link": "https://stackoverflow.com/users/4724469/allvitende"}, "edited": false, "score": 0, "creation_date": 1427924786, "post_id": 29400316, "comment_id": 46978435, "body": "NP.. Keeping it simple is always the best way to go."}], "tags": [], "owner": {"reputation": 107, "user_id": 4143303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mTt5.jpg?s=128&g=1", "display_name": "Megan B", "link": "https://stackoverflow.com/users/4143303/megan-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1427920652, "creation_date": 1427920652, "answer_id": 29400316, "question_id": 29398365, "link": "https://stackoverflow.com/questions/29398365/how-to-use-page-object-style-automation-test-inside-a-web-application-that-doesn/29400316#29400316", "title": "How to use page-object style automation test inside a web application that doesn&#39;t change pages", "body": "<p>Your question is a bit confusing, are you looking for this:</p>\n\n<pre><code>Given(/^I am in the content editor$/) do\n    page = Sitecore.new\n    page.goto(page_url)\nend\n\nWhen(/^I navigate to some folder$/) do\n    page.MethodC\n    page.MethodD\nend\n\nThen(/^I should see something present$/) do\n    page.MethodE\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4724469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11080a886fb03bd2c9f67e5413b410c6?s=128&d=identicon&r=PG&f=1", "display_name": "Allvitende", "link": "https://stackoverflow.com/users/4724469/allvitende"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 29400316, "answer_count": 1, "score": 0, "last_activity_date": 1427920652, "creation_date": 1427913688, "question_id": 29398365, "link": "https://stackoverflow.com/questions/29398365/how-to-use-page-object-style-automation-test-inside-a-web-application-that-doesn", "title": "How to use page-object style automation test inside a web application that doesn&#39;t change pages", "body": "<p>I'm currently using Ruby, Watir-webdriver, and Cucumber to create an automated testing framework. I really like the way the page-object style structures code but my application doesn't actually change pages very often (I'm trying to automate Sitecore Content Editor/Page Editor). I'm assuming there is a way to separate large portions of the page into it's own class and then define methods inside that class. However, how would I call this class using the page-object gem and cucumber if I need to do a lot on the same page?</p>\n\n<p>So far the only way I know how to do this is like this.</p>\n\n<pre><code>class Sitecore\n    include PageObject\n    page_url \"http://website.com/\"\n    include PageObject::PageFactory\n\n    # methods for a large portion A\n    # methods for a large portion B\n    ...\n    # methods for a large portion Z\nend\n</code></pre>\n\n<p>Then have a corresponding Cucumber test like this.</p>\n\n<pre><code>Given(/^I am in the content editor$/) do\n    visit Sitecore do |page|\n        page.MethodA\n        page.MethodB\n    end\nend\n\nWhen(/^I navigate to some folder$/) do\n        on Sitecore do |page|\n            page.MethodC\n            page.MethodD\n        end\n    end\n\nThen(/^I should see something present$/) do\n        on Sitecore do |page|\n            page.MethodE\n        end\n    end\n</code></pre>\n\n<p>These are all using the same class so it's easy. I just use the visit and on keywords. But if I were to change this into multiple classes how do I call these without actually changing the page I am on?</p>\n"}, {"tags": ["ruby", "rubygems", "import-from-excel"], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 568801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717f836f35abbccabd7c66cbdc2362f9?s=128&d=identicon&r=PG", "display_name": "stoodfarback", "link": "https://stackoverflow.com/users/568801/stoodfarback"}, "is_accepted": false, "score": 1, "last_activity_date": 1427958371, "creation_date": 1427958371, "answer_id": 29406984, "question_id": 29398292, "link": "https://stackoverflow.com/questions/29398292/how-to-extract-hyperlink-address-from-excel-cell-using-spreadsheet-gem-in-ruby/29406984#29406984", "title": "How to extract hyperlink address from excel cell using spreadsheet gem in ruby?", "body": "<p>Here is something that will probably work to print out both the text and the links:</p>\n\n<pre><code>book = Spreadsheet.open('C:\\Downloads\\CallStreetData.xls')\nsheet = book.worksheet(0)\n\nsheet.rows.each do |row|\n  row_text = row.join(\",\")\n  row_links = row.to_a.map do |cell|\n    cell.respond_to?(:href) ? cell.href : \"\"\n  end.join(\",\")\n\n  puts(row_text)\n  puts(row_links)\nend\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 3599430, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/506d5b795b150f6f83e67d79b100b66a?s=128&d=identicon&r=PG&f=1", "display_name": "Shiv", "link": "https://stackoverflow.com/users/3599430/shiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503298104, "creation_date": 1427913420, "last_edit_date": 1503298104, "question_id": 29398292, "link": "https://stackoverflow.com/questions/29398292/how-to-extract-hyperlink-address-from-excel-cell-using-spreadsheet-gem-in-ruby", "title": "How to extract hyperlink address from excel cell using spreadsheet gem in ruby?", "body": "<p>I have tried retrieving data from Excel sheet cells. I could retrieve the general text from each cell. but I couldn't get hyperlink  address from the cell. I used <strong><em>spreadsheet</em></strong> gem with Ruby.\nI have used below code to read excel sheet.</p>\n\n<pre><code>book = Spreadsheet.open('C:\\Downloads\\CallStreetData.xls')\nsheet1 = book.worksheet(0)\nrowArray = Array.new\nsheet1.each do |row|\n\n  puts row.join(',')\n  rowArray.push(row.join(',').href)\nend\nputs rowArray\n</code></pre>\n\n<p>I need a solution with Ruby and <strong><em>Spreadsheet</em></strong> gem</p>\n"}, {"tags": ["ruby", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4530434, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0862ab799c133af77dfef9b4b2a87f08?s=128&d=identicon&r=PG&f=1", "display_name": "sarkon", "link": "https://stackoverflow.com/users/4530434/sarkon"}, "edited": false, "score": 0, "creation_date": 1427925453, "post_id": 29400107, "comment_id": 46978721, "body": "Thanks. Yes, I&#39;m getting a nil class error     <code>NoMethodError - undefined method &#39;goto&#39; for nil:NilClass:</code>  when trying to control a from another_file.rb The error refers, let&#39;s say, to the method goto_mypage in webdriver.rb. I can&#39;t put  <code>a = Crawler.new</code> in the second file because the majority of the work that a is doing is defined in the webdriver.rb file. It has to sit and observe changes in a webpage. Very occasionally -- depending on whether the code in another_file.rb is called on -- I need a to check out a different page and the return to the original page it is monitoring."}], "tags": [], "owner": {"reputation": 107, "user_id": 4143303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mTt5.jpg?s=128&g=1", "display_name": "Megan B", "link": "https://stackoverflow.com/users/4143303/megan-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1427920020, "creation_date": 1427920020, "answer_id": 29400107, "question_id": 29398081, "link": "https://stackoverflow.com/questions/29398081/control-instance-of-watir-webdriver-from-another-file/29400107#29400107", "title": "Control Instance of Watir-Webdriver from another file", "body": "<p>You may get more help if you include actual results. Are you getting a nil class error? </p>\n\n<p>Is there a reason you cannot have <code>a = Crawler.new</code> in another_file.rb and then just refer to it in there?</p>\n"}], "owner": {"reputation": 187, "user_id": 4530434, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0862ab799c133af77dfef9b4b2a87f08?s=128&d=identicon&r=PG&f=1", "display_name": "sarkon", "link": "https://stackoverflow.com/users/4530434/sarkon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428016556, "creation_date": 1427912745, "last_edit_date": 1428016556, "question_id": 29398081, "link": "https://stackoverflow.com/questions/29398081/control-instance-of-watir-webdriver-from-another-file", "title": "Control Instance of Watir-Webdriver from another file", "body": "<p>How would I control an instance of Watir-Webdriver from another file? For example,\nin a file webdriver.rb I have </p>\n\n<pre><code>require 'watir-webdriver'\nclass Crawler\n    attr_accessor :browser\n    def initialize\n      self.browser = Watir::Browser.new\n    end\n\n    def goto_mypage\n      browser.goto(\"http://www.mypage.com\")\n    end\n\n    def kill\n      browser.close\n    end\n  end\n\na = Crawler.new\n</code></pre>\n\n<p>Now how would I access a from the file \"another_file.rb\" with content like</p>\n\n<pre><code>a.goto(\"htttp://www.another_page.com\")\na.goto_mypage \n</code></pre>\n\n<p>I've tried making requiring './webdriver.rb' in another_file.rb. And making the class Crawler part of a module and including that. Getting access to the methods across files is not a problem -- getting access to the webdriver instance is.</p>\n\n<p>I've tried setting an instance variable @a = a in webdriver.rb and then accessing @a from another_file.rb.</p>\n\n<p>I thought this would be simple, but it has me flummoxed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations", "public-activity"], "comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427916684, "post_id": 29397953, "comment_id": 46974315, "body": "so recipient is like <code>current_user</code>?"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427916754, "post_id": 29397953, "comment_id": 46974357, "body": "anyways the line should be <code>author.books.create(name: &#39;Jaws&#39;)</code> so that the new books will contain the author&#39;s id"}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918391, "post_id": 29397953, "comment_id": 46975266, "body": "Yeah the recipient would be <code>current_user</code>.  When I ran that command though the owner id was still nil."}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918519, "post_id": 29397953, "comment_id": 46975334, "body": "if it&#39;s the same link then for some reason author is an instance of book."}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918610, "post_id": 29397953, "comment_id": 46975385, "body": "Sorry. I accidentally removed the association in the book model. But with that the owner_id was still nil."}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918689, "post_id": 29397953, "comment_id": 46975427, "body": "what does <code>Book.last</code> show ?"}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918770, "post_id": 29397953, "comment_id": 46975466, "body": "Scratch that last comment. <code>owner_id</code> now shows the author! I&#39;m assuming that <code>current_user</code> should be used for recipient? I&#39;m using the gem, devise btw."}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918887, "post_id": 29397953, "comment_id": 46975537, "body": "if that&#39;s the logic then yes, it would be something like this <code>author.books.create(name: &#39;Jaws&#39;, reader: current_user)</code>, donno if this matches your logic or not"}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1427918908, "post_id": 29397953, "comment_id": 46975551, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/74291/discussion-between-carl-edwards-and-mohammad-abushady\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "is_accepted": true, "score": 1, "last_activity_date": 1427920721, "creation_date": 1427920721, "answer_id": 29400340, "question_id": 29397953, "link": "https://stackoverflow.com/questions/29397953/using-one-to-many-associations-for-the-public-activity-rails-gem/29400340#29400340", "title": "Using One-to-Many Associations for the Public Activity Rails gem", "body": "<p>To save the author you better use the relation while creating the new book</p>\n\n<pre><code>author.books.create(name: \"Jaws\")\n</code></pre>\n\n<p>Then if you want to save the reader, you'll need to add it in the args hash</p>\n\n<pre><code>author.books.create(name: \"Jaws\", reader: some_user)\n</code></pre>\n\n<p><strong>Note:</strong><br>\nThe reason why this prefills the object is that when you call new on an active record relation object, all the conditions inside the condition are used to create the new object, for example</p>\n\n<pre><code>Book.where(author: some_author).new\n</code></pre>\n\n<p>This will generate an instance of book and the <code>author_id</code> will be the id of the <code>some_author</code> from the where query.</p>\n\n<p>So when we did an <code>author.books</code> this created a query</p>\n\n<pre><code>Book.where(author_id: author.id)\n</code></pre>\n\n<p>And by calling new, the new book will have the id of the author.</p>\n\n<p><strong>PS:</strong>\nThis also works on multiple args in the <code>where</code></p>\n\n<pre><code>Model.where(key1: value1, key2: value2, key3: value3).new\n</code></pre>\n\n<p>will create a new instance where the attributes <code>key1</code>, <code>key2</code>, <code>key3</code> are already filled.</p>\n"}], "owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 29400340, "answer_count": 1, "score": 0, "last_activity_date": 1427921962, "creation_date": 1427912314, "last_edit_date": 1427921962, "question_id": 29397953, "link": "https://stackoverflow.com/questions/29397953/using-one-to-many-associations-for-the-public-activity-rails-gem", "title": "Using One-to-Many Associations for the Public Activity Rails gem", "body": "<p>I just started using the <a href=\"https://github.com/pokonski/public_activity\" rel=\"nofollow\">PublicActivity</a> gem and wanted to display the activities of authors throughout the site. In the app an <strong>author</strong> has many <strong>books</strong>. When an author releases a new book I'd like there to be a notification to appear in the feed's of <strong>users</strong>. Trying my best to translate what's shown in the code <a href=\"https://github.com/pokonski/public_activity#set-owner-and-recipient-based-on-associations\" rel=\"nofollow\">example</a> here's what I've come up with so far:</p>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class Reader &lt; ActiveRecord::Base\nend\n\nclass Author &lt; ActiveRecord::Base\n    has_many :books\nend\n\nclass Book &lt; ActiveRecord::Base\n  include PublicActivity::Model\n  tracked owner: :author, recipient: :reader\n\n  belongs_to :author, :class_name =&gt; \"Author\"\n  belongs_to :reader, :class_name =&gt; \"User\"\nend\n</code></pre>\n\n<p><strong>Activities Controller</strong></p>\n\n<pre><code>class ActivitiesController &lt; ApplicationController\n  def index\n    @activities = PublicActivity::Activity.all\n  end\nend\n</code></pre>\n\n<p><strong>Activities Index View</strong></p>\n\n<pre><code>&lt;% @activities.each do |activity| %&gt;\n    &lt;%= activity.inspect %&gt; # Using inspect for now to debug\n&lt;% end %&gt;\n</code></pre>\n\n<p>For now in the console I'm creating and appending books to an author (<code>author</code> being the instance variable) as so:</p>\n\n<pre><code>author.books &lt;&lt; Book.create(name: \"Jaws\")\n</code></pre>\n\n<p>Activities are being recorded but the <code>owner_id</code> and <code>recipient_id</code> are nil when in reality the owner should be the author and the recipient should be the user.</p>\n\n<pre><code>#&lt;PublicActivity::Activity id: 1, trackable_id: 1, trackable_type: \"Book\", owner_id: nil, owner_type: nil, key: \"book.create\", parameters: {}, recipient_id: nil, recipient_type: nil, created_at: \"2015-04-01 17:36:18\", updated_at: \"2015-04-01 17:36:18\"&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8280, "user_id": 397816, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1856ab3b3c0ad1927c9c6cd9ef5a2184?s=128&d=identicon&r=PG&f=1", "display_name": "cristian", "link": "https://stackoverflow.com/users/397816/cristian"}, "edited": false, "score": 3, "creation_date": 1427911009, "post_id": 29397535, "comment_id": 46971197, "body": "You can do <code>callables.each(&amp;:call)</code> The &amp; calls <code>to_proc</code> on the object, and passes it as a block to the method."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1427911493, "post_id": 29397586, "comment_id": 46971452, "body": "It&#39;s worth noting that <code>each(&amp;:call)</code> is a special case and is passed in as a block argument. Basically the <code>&amp;</code> calls <code>to_proc</code> on <code>:call</code>, turning it into a procedure."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2855, "user_id": 139230, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/42af6795742ef33f61bdc26ccede28a9?s=128&d=identicon&r=PG", "display_name": "Wei Ma", "link": "https://stackoverflow.com/users/139230/wei-ma"}, "edited": false, "score": 1, "creation_date": 1427914094, "post_id": 29397586, "comment_id": 46972876, "body": "@WeiMa Don&#39;t get hung up on the internals. <code>each(&amp;:call)</code> is the same as <code>each(&amp;:call.to_proc)</code> or <code>each { |x| x.call }</code>. There&#39;s no need to call <code>to_proc</code> manually. Remember Ruby is highly object-oriented, so method calls are almost always made on the object, not with the object as an argument. For example, it&#39;s <code>&quot;string&quot;.upcase</code>, not <code>upcase(&quot;string&quot;)</code>"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 3, "last_activity_date": 1427910999, "creation_date": 1427910999, "answer_id": 29397586, "question_id": 29397535, "link": "https://stackoverflow.com/questions/29397535/ruby-called-a-collection-of-blocks/29397586#29397586", "title": "Ruby called a collection of blocks", "body": "<p>You should try :</p>\n\n<pre><code>callables.each &amp;:call\n</code></pre>\n\n<p><code>Array#each</code> don't accept any arguments. That's why, when you write <code>callables.each :call</code>, <code>:call</code> the symbol is passing to the method <code>each</code> as an argument. But when you prefixed <code>:call</code> with <code>&amp;</code>, <code>each</code> knows that you are giving it a <em>block</em> as an argument, so it will work.</p>\n"}], "owner": {"reputation": 2855, "user_id": 139230, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/42af6795742ef33f61bdc26ccede28a9?s=128&d=identicon&r=PG", "display_name": "Wei Ma", "link": "https://stackoverflow.com/users/139230/wei-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 29397586, "answer_count": 1, "score": 1, "last_activity_date": 1427910999, "creation_date": 1427910832, "question_id": 29397535, "link": "https://stackoverflow.com/questions/29397535/ruby-called-a-collection-of-blocks", "title": "Ruby called a collection of blocks", "body": "<p>Assume I have built an array of callable objects by doing</p>\n\n<pre><code>callables = []\ncallables &lt;&lt; block1\ncallables &lt;&lt; block2\ncallables &lt;&lt; block3\ncallables &lt;&lt; block4\n</code></pre>\n\n<p>Later I want to call these blocks. I understand I can do</p>\n\n<pre><code>callables.each { |block| block.call }\n</code></pre>\n\n<p>but I am wondering if I could make it even simpler by calling something like</p>\n\n<pre><code>callables.each :call\n</code></pre>\n\n<p>I have tried the code above but got ArgumentError. Does ruby support this kind of syntax? </p>\n"}, {"tags": ["ruby", "ubuntu", "rvm"], "comments": [{"owner": {"reputation": 1911, "user_id": 1155375, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7bc15bde3fa804c4150c1ac7b4bbb303?s=128&d=identicon&r=PG", "display_name": "chrisp", "link": "https://stackoverflow.com/users/1155375/chrisp"}, "edited": false, "score": 0, "creation_date": 1427918058, "post_id": 29396205, "comment_id": 46975079, "body": "This is not an answer to my own question, but I discovered (being new to rvm) something called gemsets. There&#39;s an @global gemset that seems to be the one that needed the cleaning."}], "owner": {"reputation": 1911, "user_id": 1155375, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7bc15bde3fa804c4150c1ac7b4bbb303?s=128&d=identicon&r=PG", "display_name": "chrisp", "link": "https://stackoverflow.com/users/1155375/chrisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427906198, "creation_date": 1427906198, "question_id": 29396205, "link": "https://stackoverflow.com/questions/29396205/how-do-i-make-sure-that-gems-get-installed-in-the-correct-location", "title": "How do I make sure that gems get installed in the correct location?", "body": "<h2>Setup</h2>\n\n<ul>\n<li>Fresh Ubuntu 14.04.2 LTS install (in HyperV with a snapshot to first reboot)</li>\n<li>sudo apt-get update</li>\n<li>official rvm install\n<ul>\n<li>both single and multi-user</li>\n</ul></li>\n<li>rvm install [ruby]\n<ul>\n<li>2.1 and 2.2 separately (on fresh installs)</li>\n</ul></li>\n<li>GEM_HOME: /home/me/.rvm/gems/ruby-2.2.1 (for 2.2 install)</li>\n</ul>\n\n<p>pre <code>gem update</code> gem location example:</p>\n\n<pre><code>/home/me/.rvm/rubies/ruby-2.2.1/lib/ruby/gems/2.2.0/gems/bundler-1.8.4\n</code></pre>\n\n<p>post <code>gem update</code> gem location example:</p>\n\n<pre><code>/home/me/.rvm/gems/ruby-2.2.1/gems/bundler-1.9.2\n</code></pre>\n\n<p>After the first <code>gem update --system</code> and <code>gem update</code> an attempt to <code>gem clean</code> <em>always</em> ends with errors that updated gems' previous versions are not installed in GEM_HOME.</p>\n\n<p>Everything else that I've tested with the rvm/ruby setup is functioning (single or multiuser installs).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 795, "user_id": 1343961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cfdf749836ffbb6a2ea195402ada9ee?s=128&d=identicon&r=PG", "display_name": "archit gupta", "link": "https://stackoverflow.com/users/1343961/archit-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1427905191, "creation_date": 1427905191, "answer_id": 29395865, "question_id": 29395790, "link": "https://stackoverflow.com/questions/29395790/converting-json-hash-into-url-to-be-used-in-rails-view/29395865#29395865", "title": "Converting JSON hash into URL to be used in rails view", "body": "<p>Why you are converting your response to json and then parsing it again. U can get the value of url like </p>\n\n<pre><code>@url = response[\"url\"]\n</code></pre>\n"}], "owner": {"reputation": 1033, "user_id": 1598939, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/BXew2.jpg?s=128&g=1", "display_name": "Questifer", "link": "https://stackoverflow.com/users/1598939/questifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 29395865, "answer_count": 1, "score": 0, "last_activity_date": 1427905191, "creation_date": 1427904949, "question_id": 29395790, "link": "https://stackoverflow.com/questions/29395790/converting-json-hash-into-url-to-be-used-in-rails-view", "title": "Converting JSON hash into URL to be used in rails view", "body": "<p>I am using an API that has a URL in the response (a JSON hash). I'm trying to take the response, parse the URL and use the URL in a link_to helper in my rails view. My current JSON parsing isn't doing the trick. </p>\n\n<pre><code># The Response\n{\"url\":\"https://demo.foobar.net/t=54e85a9f-008b-481c-986d-69881208713e\"}\n\n# Controller Action to Parse\n@url = JSON.parse(response.to_json)\n\n# Rails View\n&lt;%= link_to \"Sign Document\", @url %&gt;\n\n# Rendered HTML\n&lt;a href=\"/?url=https%3A%2F%2Fhttps://demo.foobar.net/t=54e85a9f-008b-481c-986d-69881208713e\"&gt;Click Here!&lt;/a&gt;\n</code></pre>\n\n<p>I need to parse the JSON hash to ensure the output of my rails link_to helper is:</p>\n\n<pre><code> &lt;a href=\"https://demo.foobar.net/t=54e85a9f-008b-481c-986d69881208713e\"&gt;Click Here!&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "braintree", "activemerchant"], "answers": [{"comments": [{"owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "edited": false, "score": 0, "creation_date": 1427907500, "post_id": 29396565, "comment_id": 46969372, "body": "Thanks a lot. This has saved me a lot of time pulling my hair out to only end in disappointment. Will just use the Braintree SDK instead."}], "tags": [], "owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "is_accepted": true, "score": 1, "last_activity_date": 1427907420, "creation_date": 1427907420, "answer_id": 29396565, "question_id": 29395722, "link": "https://stackoverflow.com/questions/29395722/activemerchant-get-braintree-clienttoken/29396565#29396565", "title": "ActiveMerchant Get Braintree ClientToken", "body": "<p><sub>I work at Braintree. If you have more questions, I suggest you <a href=\"https://support.braintreepayments.com/\" rel=\"nofollow\">email our support team</a>.</sub></p>\n\n<p>ActiveMerchant currently isn't compatible with v.zero. To use the Drop-In UI or any other v.zero features, you'll need to use the Braintree ruby client library directly. See the <a href=\"https://developers.braintreepayments.com/javascript+ruby/start/overview\" rel=\"nofollow\">Braintree \"Getting Started\" Guide</a> for instructions.</p>\n"}], "owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 29396565, "answer_count": 1, "score": 3, "last_activity_date": 1427907420, "creation_date": 1427904745, "question_id": 29395722, "link": "https://stackoverflow.com/questions/29395722/activemerchant-get-braintree-clienttoken", "title": "ActiveMerchant Get Braintree ClientToken", "body": "<p>I am trying to use ActiveMerchant with Braintree Dropin UI and I am unable to find the correct methods to create the client token to pass to the JavaScript SDK. My current setup is:</p>\n\n<pre><code># config/environments/development.rb\n# ActiveMerchant configuration.\nActiveMerchant::Billing::Base.mode = :test\nconfig.gateway = ActiveMerchant::Billing::BraintreeGateway.new(\n  merchant_id: '',\n  public_key: '',\n  private_key: ''\n)\n</code></pre>\n\n<p>And I have a controller that needs to send back a client token as part of an API request:</p>\n\n<pre><code># app/controllers/v1/orders_controller.rb\ndef token\n  @client_token = ...GENERATE CLIENT TOKEN...\n  respond_with @client_token\nend\n</code></pre>\n\n<p>I just don't know how to generate this token through the ActiveMerchant API.</p>\n"}, {"tags": ["ruby", "json", "postgresql", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 26092, "user_id": 824377, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e600bd229c588891a7616f303e30efd9?s=128&d=identicon&r=PG", "display_name": "AJcodez", "link": "https://stackoverflow.com/users/824377/ajcodez"}, "is_accepted": true, "score": 1, "last_activity_date": 1427907149, "creation_date": 1427907149, "answer_id": 29396461, "question_id": 29395351, "link": "https://stackoverflow.com/questions/29395351/ruby-sequel-access-json-field/29396461#29396461", "title": "ruby sequel access json field", "body": "<p>Needed <code>#literal</code> method.</p>\n\n<pre><code>$db.run(\"select id, data -&gt; #{ $db.literal('amount') } as amount from plans\")\n</code></pre>\n"}], "owner": {"reputation": 26092, "user_id": 824377, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e600bd229c588891a7616f303e30efd9?s=128&d=identicon&r=PG", "display_name": "AJcodez", "link": "https://stackoverflow.com/users/824377/ajcodez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 29396461, "answer_count": 1, "score": 0, "last_activity_date": 1427907149, "creation_date": 1427903545, "question_id": 29395351, "link": "https://stackoverflow.com/questions/29395351/ruby-sequel-access-json-field", "title": "ruby sequel access json field", "body": "<p>I have the following schema:</p>\n\n<pre><code> Column  |            Type             |       Modifiers        \n---------+-----------------------------+------------------------\n id      | text                        | not null\n data    | json                        | not null\n created | timestamp without time zone | not null default now()\n</code></pre>\n\n<p>If i open up psql i can run the query.</p>\n\n<pre><code>select id, data-&gt;'amount' as amount from plans;\n</code></pre>\n\n<p>But ruby <code>sequel</code> gem ruins it.</p>\n\n<pre><code>puts $db.run(\"select id, data-&gt;'amount' as amount from plans\")\n</code></pre>\n\n<p>What's wrong?</p>\n"}, {"tags": ["ios", "ruby", "appium"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4738968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc19a71b3587486a6e60629b9ea19f7?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/4738968/angel"}, "is_accepted": false, "score": 0, "last_activity_date": 1428072609, "creation_date": 1428072609, "answer_id": 29434458, "question_id": 29395345, "link": "https://stackoverflow.com/questions/29395345/appium-ios-kill-app-without-the-plist-being-removed/29434458#29434458", "title": "Appium iOS kill app without the plist being removed", "body": "<p>I found the answer. </p>\n\n<p>It's somewhat of an all-around involved sort of answer. </p>\n\n<ol>\n<li>Tag the scenario that needs killing and relaunching without resetting with something, say @needPlist</li>\n<li>In the hooks.rb, in the Before for @needPlist, call the Appium::Driver.new with the noReset flag set to true. Call a $driver.restart (Make sure that in the After for the same tag, you call the Appium::Driver.new with the noReset flag set to false, and restart the driver again) </li>\n<li>In the step definition, you can now call $driver.close_app and $driver.launch_app without losing your plist</li>\n</ol>\n\n<p>That should do the trick, I think.</p>\n"}], "owner": {"reputation": 11, "user_id": 4738968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc19a71b3587486a6e60629b9ea19f7?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/4738968/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428072609, "creation_date": 1427903531, "question_id": 29395345, "link": "https://stackoverflow.com/questions/29395345/appium-ios-kill-app-without-the-plist-being-removed", "title": "Appium iOS kill app without the plist being removed", "body": "<p>I am trying to run the following steps:\n1. Launch app the first time, see terms and agreement\n2. Agree to terms and agreement\n3. Kill app and relaunch\n4. You should not see terms and agreement</p>\n\n<p>Right now, appium is running on without the --no-reset flag, since I do need the app to be reset between scenarios, but the following re-launched the app with the plist deleted (it's like remove the app and relaunch again)</p>\n\n<pre><code>sleep(3)\npf_name = $driver.caps['platformName']\npf_ver = $driver.caps['platformVersion']\ndev_name = $driver.caps['deviceName']\nauto_accept_alert = $driver.caps['autoAcceptAlerts']\napp_path = $driver.caps['app']\nAppium::Driver.new({ caps: { platformName: pf_name, platformVersion: pf_ver, deviceName: dev_name, autoAcceptAlerts: auto_accept_alert, app: app_path, noReset: true} })\n$driver.restart\n$driver.close_app\n$driver.launch_app\n</code></pre>\n\n<p>I also tried $driver.close_app and $driver.launch_app, but they did the same thing (remove the plist as well as killing the app). </p>\n\n<p>Is there any way I can just kill the app without removing plist?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1427901469, "post_id": 29394501, "comment_id": 46965671, "body": "have you looked at <a href=\"https://github.com/DatabaseCleaner/database_cleaner\" rel=\"nofollow noreferrer\"><code>database_cleaner</code></a>. This should od exactly what you are asking."}, {"owner": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1427902912, "post_id": 29394501, "comment_id": 46966563, "body": "I was hoping to use Rspec to accomplish this, is that not possible?"}, {"owner": {"reputation": 1189, "user_id": 2969823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VmwT.jpg?s=128&g=1", "display_name": "Chambeur", "link": "https://stackoverflow.com/users/2969823/chambeur"}, "edited": false, "score": 0, "creation_date": 1427904443, "post_id": 29394501, "comment_id": 46967532, "body": "What kind of objects are persisted ? Are they the ones that come from inside the test or outside (for example in a <code>before(:each)</code> block) ?"}, {"owner": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "edited": false, "score": 0, "creation_date": 1427905716, "post_id": 29394501, "comment_id": 46968359, "body": "I am currently not using any before or after blocks.  They are FactoryGirl objects."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 4, "creation_date": 1427909744, "post_id": 29394501, "comment_id": 46970496, "body": "if you are running with <code>transactional_fixutres = true</code> there should not be anything persisting between specs."}], "owner": {"reputation": 715, "user_id": 2063643, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1d58fbc57d067a19ec4eaf5268e58f23?s=128&d=identicon&r=PG", "display_name": "Busch", "link": "https://stackoverflow.com/users/2063643/busch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1427901169, "creation_date": 1427901169, "question_id": 29394501, "link": "https://stackoverflow.com/questions/29394501/rspec-how-to-delete-test-database-between-each-spec-file", "title": "Rspec how to delete test database between each _spec file", "body": "<p>I have tests that each use FactoryGirl to build an object.  However, these objects are persisting across each _spec file and I can't get the database to clean.  What is the best way to accomplish this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring", "code-climate"], "comments": [{"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427900837, "post_id": 29394341, "comment_id": 46965256, "body": "make a controller and inherit from it.."}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427901048, "post_id": 29394341, "comment_id": 46965399, "body": "for just one line params .require i need to create a controller?"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427901277, "post_id": 29394341, "comment_id": 46965536, "body": "will you try please, it should work,"}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427940064, "post_id": 29394341, "comment_id": 46982850, "body": "Can you help me with coding? Do i need to to write a method in mainController and then call it inside the params?"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427949811, "post_id": 29394341, "comment_id": 46985037, "body": "check this.. <a href=\"https://github.com/argentum47/stekoverflu/blob/votes_and_ui/app/controllers/votes_controller.rb\" rel=\"nofollow noreferrer\">github.com/argentum47/stekoverflu/blob/votes_and_ui/app/&hellip;</a> <a href=\"https://github.com/argentum47/stekoverflu/blob/votes_and_ui/app/controllers/answers_votes_controller.rb\" rel=\"nofollow noreferrer\">github.com/argentum47/stekoverflu/blob/votes_and_ui/app/&hellip;</a> . only that, you will have the <code>def admin_params; params...</code> in one controller and then you can say <code>Admin.create(admins_param)</code> in either of your controller. make sure you don&#39;t call a private method by any object explicitly, even self.admin_params would be an error.."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1428167305, "post_id": 29394341, "comment_id": 47064483, "body": "When pasting code into SO, please try to make it so that horizontal scrolling isn&#39;t needed.  I just can&#39;t read code that is one long line... by the time I scroll to the end, I forget what was at the beginning."}], "owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427904688, "creation_date": 1427900725, "last_edit_date": 1427904688, "question_id": 29394341, "link": "https://stackoverflow.com/questions/29394341/rails-duplication-code-user-attributes", "title": "rails duplication code user_attributes", "body": "<p>I have a master admin who can create two different admins [property, content_contributor].\nIn the master admin's require params I have this</p>\n\n<pre><code> class MasterAdmins::ContentContributorsController &lt; MasterAdmins::MainController\n....\nparams.require(:content_contributor).permit(:user_id, user_attributes: [:id, :activation_token, :email, :encrypted_password, :authentication_token, :sign_in_count]\n</code></pre>\n\n<p>and in master admins property I have this</p>\n\n<pre><code> class MasterAdmins::PropertyAdminsController &lt; MasterAdmins::MainController\n .....\n params.require(:property_admin).permit(user_attributes: [:id, :activation_token, :email, :encrypted_password, :authentication_token, :sign_in_count]\n</code></pre>\n\n<p>I am getting duplicate found in code climate. How can I avoid the user attribute duplication?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1427900326, "creation_date": 1427900326, "answer_id": 29394191, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails/29394191#29394191", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>You can do this in application controller, add this code, I am assuming that you are using <code>devise</code></p>\n\n<pre><code>layout :layout_by_resource\n\ndef layout_by_resource\n  user_signed_in? ? \"my_custom_layout\" : \"application\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3381, "user_id": 369083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4964bad1252f34c95f18c0862edb5c23?s=128&d=identicon&r=PG", "display_name": "lisowski.r", "link": "https://stackoverflow.com/users/369083/lisowski-r"}, "is_accepted": true, "score": 8, "last_activity_date": 1427900336, "creation_date": 1427900336, "answer_id": 29394195, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails/29394195#29394195", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>Create new layout eg <code>app/views/layouts/dunno.html.erb</code>. Use in controller</p>\n\n<pre><code>class DashboardController &lt; ApplicationController\n  layout 'dunno'\nend\n</code></pre>\n\n<p>or per action</p>\n\n<pre><code>class DashboardController &lt; ApplicationController\n  def index\n    render layout: 'dunno'\n  end\nend\n</code></pre>\n\n<p>see <a href=\"http://apidock.com/rails/ActionView/Layouts/ClassMethods/layout\" rel=\"noreferrer\">docs</a> for details</p>\n"}, {"tags": [], "owner": {"reputation": 5880, "user_id": 166233, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b88b1c85a798a2aee3a35f5cd805d0e2?s=128&d=identicon&r=PG", "display_name": "Steve Wilhelm", "link": "https://stackoverflow.com/users/166233/steve-wilhelm"}, "is_accepted": false, "score": 0, "last_activity_date": 1427900537, "creation_date": 1427900537, "answer_id": 29394272, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails/29394272#29394272", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>Details about layouts can be found <a href=\"http://api.rubyonrails.org/classes/ActionView/Layouts.html\" rel=\"nofollow\">here</a>.</p>\n\n<blockquote>\n  <p>Using a different layout in the action render call</p>\n  \n  <p>If most of your actions use the same layout, it makes perfect sense to\n  define a controller-wide layout as described above. Sometimes you'll\n  have exceptions where one action wants to use a different layout than\n  the rest of the controller. You can do this by passing a :layout\n  option to the render call. For example:</p>\n</blockquote>\n\n<pre><code>class WeblogController &lt; ActionController::Base\n  layout \"weblog_standard\"\n\n  def help\n    render action: \"help\", layout: \"help\"\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>This will override the controller-wide \u201cweblog_standard\u201d layout, and will render the help\n  action with the \u201chelp\u201d layout instead.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1358, "user_id": 2385217, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bd10572a2009c613bef5244ee24c5a8f?s=128&d=identicon&r=PG&f=1", "display_name": "sansarp", "link": "https://stackoverflow.com/users/2385217/sansarp"}, "is_accepted": false, "score": 1, "last_activity_date": 1427900624, "creation_date": 1427900624, "answer_id": 29394311, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails/29394311#29394311", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>In your application_controller.rb file do this, hope it helps.</p>\n\n<pre><code> layout :set_layout\n def set_layout\n    if current_user\n      'dashboard_layout'\n    else\n      'default_layout'\n    end\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 589, "user_id": 4292583, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-BPd6aWrEDl8/AAAAAAAAAAI/AAAAAAAAAKQ/RCLR9DpcR-E/photo.jpg?sz=128", "display_name": "Tien Nguyen", "link": "https://stackoverflow.com/users/4292583/tien-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1427901787, "creation_date": 1427901787, "answer_id": 29394748, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails/29394748#29394748", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>If you are using <em>devise</em> gem, and your goal is to use another layout within <em>devise</em> controllers, have a look at their <a href=\"https://github.com/plataformatec/devise/wiki/How-To%3a-Create-custom-layouts\" rel=\"nofollow\">docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 0, "last_activity_date": 1427901996, "creation_date": 1427901996, "answer_id": 29394825, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails/29394825#29394825", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>i wanted two different layouts before signin and after signin,so i have implemented using below code where <code>application_controller</code> changes the layout if user is signed_in else uses different layout....\n<strong>if you are using devise ,dont forget to add layouts in views/layouts</strong></p>\n\n<p><strong>in application_controller.rb</strong></p>\n\n<pre><code>layout :layout_by_resource\n    def layout_by_resource\n     unless user_signed_in?\n      Rails.logger.info \"===========Setting layout as views/layouts/auth.html.erb\"\n       'auth'\n     else\n      Rails.logger.info \"===========Setting layout as views/layouts/blue.html.erb\"\n       'basic'\n     end\n   end\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4674771, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LefJpF88kGA/AAAAAAAAAAI/AAAAAAAAABM/qy4y9mr0SYM/photo.jpg?sz=128", "display_name": "shalini sharma", "link": "https://stackoverflow.com/users/4674771/shalini-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3288, "favorite_count": 0, "accepted_answer_id": 29394195, "answer_count": 6, "score": 5, "last_activity_date": 1427901996, "creation_date": 1427900069, "question_id": 29394092, "link": "https://stackoverflow.com/questions/29394092/how-to-use-different-layout-for-different-pages-in-ruby-on-rails", "title": "how to use different layout for different pages in ruby on rails?", "body": "<p>i know application.html.erb is the default for every page .i want to use a different layout when user login .i mean the dashboard after login should be of different layout rather than the default one(application.html.erb).</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 589, "user_id": 4292583, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-BPd6aWrEDl8/AAAAAAAAAAI/AAAAAAAAAKQ/RCLR9DpcR-E/photo.jpg?sz=128", "display_name": "Tien Nguyen", "link": "https://stackoverflow.com/users/4292583/tien-nguyen"}, "edited": false, "score": 0, "creation_date": 1427900325, "post_id": 29393897, "comment_id": 46964883, "body": "To clarify, you want to avoid <a href=\"http://paste.ofcode.org/iVC7dWzFyFtzz8V5keAGAk\" rel=\"nofollow noreferrer\">paste.ofcode.org/iVC7dWzFyFtzz8V5keAGAk</a>?"}, {"owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "edited": false, "score": 0, "creation_date": 1427900666, "post_id": 29393897, "comment_id": 46965128, "body": "Is this a text or select input field that you are trying to create? In other words, do you need to display all the values in a dropdown, or just fill out a text field with the one value?"}, {"owner": {"reputation": 673, "user_id": 3704250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/1ZYH3.png?s=128&g=1", "display_name": "mikeymurph77", "link": "https://stackoverflow.com/users/3704250/mikeymurph77"}, "reply_to_user": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "edited": false, "score": 0, "creation_date": 1427900777, "post_id": 29393897, "comment_id": 46965206, "body": "@JakeShorty I think this is going to be my biggest problem... the form has text_fields, selects and radios.... I guess for this question though... I&#39;m more so just curious how you could do it with a text_field and then worry about the radio and select fields later."}], "answers": [{"tags": [], "owner": {"reputation": 3381, "user_id": 369083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4964bad1252f34c95f18c0862edb5c23?s=128&d=identicon&r=PG", "display_name": "lisowski.r", "link": "https://stackoverflow.com/users/369083/lisowski-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1427900628, "creation_date": 1427900628, "answer_id": 29394313, "question_id": 29393897, "link": "https://stackoverflow.com/questions/29393897/use-a-hash-to-map-to-element-ids-with-jquery/29394313#29394313", "title": "Use a hash to map to element id&#39;s with jQuery", "body": "<p>do it without <code>'</code> char <code>var form_saved_answers = &lt;%= @saved_answers.to_json %&gt;;</code>\nnow you can do <code>form_saved_answers['123456']</code> if key is not a number you can <code>form_saved_answers.some_key</code></p>\n"}, {"tags": [], "owner": {"reputation": 795, "user_id": 1343961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cfdf749836ffbb6a2ea195402ada9ee?s=128&d=identicon&r=PG", "display_name": "archit gupta", "link": "https://stackoverflow.com/users/1343961/archit-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1427901339, "creation_date": 1427901339, "answer_id": 29394577, "question_id": 29393897, "link": "https://stackoverflow.com/questions/29393897/use-a-hash-to-map-to-element-ids-with-jquery/29394577#29394577", "title": "Use a hash to map to element id&#39;s with jQuery", "body": "<p>Try this in js file..</p>\n\n<pre><code>var parsed_json = JSON.parse(form_saved_answers);\nvar val_of_key = parsed_json[key]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "is_accepted": false, "score": 0, "last_activity_date": 1427901362, "creation_date": 1427901362, "answer_id": 29394585, "question_id": 29393897, "link": "https://stackoverflow.com/questions/29393897/use-a-hash-to-map-to-element-ids-with-jquery/29394585#29394585", "title": "Use a hash to map to element id&#39;s with jQuery", "body": "<p>Once you have the hash parsed into JSON, you can key into the JSON object and pass that as the <code>value</code> attribute to a form input. As lisukorin said, if you set <code>form_saved_answers</code> to the result of the ERB <em>without</em> the quotes, you can then use that JSON like so in an input:</p>\n\n<p><code>myInput = '&lt;input type=\"text\" value=\"' + form_saved_answers[12345] +'\"&gt;'</code></p>\n\n<p>That would give you a basic version of the HTML element with the value you want, to be manipulated as you need with jQuery.</p>\n"}], "owner": {"reputation": 673, "user_id": 3704250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/1ZYH3.png?s=128&g=1", "display_name": "mikeymurph77", "link": "https://stackoverflow.com/users/3704250/mikeymurph77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1427901362, "creation_date": 1427899624, "last_edit_date": 1427900569, "question_id": 29393897, "link": "https://stackoverflow.com/questions/29393897/use-a-hash-to-map-to-element-ids-with-jquery", "title": "Use a hash to map to element id&#39;s with jQuery", "body": "<p>I have a form where I want to put previously submitted data into the correct form inputs. I have a hash where the keys are an id selector of the form input and the value is the the value for that specific form input.</p>\n\n<p>This is what my hash looks like:</p>\n\n<pre><code>@saved_answers = {\"123456\"=&gt;\"Tom\", \"2345678\"=&gt;\"Brady\", \"789456\"=&gt;\"Football\"}\n</code></pre>\n\n<p>I am passing this hash to be used in jQuery with </p>\n\n<pre><code># found in the view's script\nvar form_saved_answers = '&lt;%= @saved_answers.to_json %&gt;'; \n</code></pre>\n\n<p>Now when I am in the javascript file, I want to find an input id with the key and place the value in the input field.</p>\n\n<p>This is where I am stuck, I've thought about making each key/value pair an array and run an each function... but there has to be a more direct approach... </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1427899001, "post_id": 29393434, "comment_id": 46963871, "body": "You seem to have typo&#39;d <code>http=&quot;</code> as <code>http=\\&quot;</code>. Is that correct, or do you want to find <code>\\&quot;</code>?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1427899306, "post_id": 29393434, "comment_id": 46964131, "body": "It&#39;s not a typo as such, it&#39;s how the &quot; shows up when you inspect the string.  But this might be confusing, i&#39;ll amend the question, thanks."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1427899434, "post_id": 29393434, "comment_id": 46964227, "body": "disagree with the downvote btw, this relates to a fairly unintuitive aspect of regular expressions."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1427898796, "last_edit_date": 1427898796, "creation_date": 1427898476, "answer_id": 29393466, "question_id": 29393434, "link": "https://stackoverflow.com/questions/29393434/ruby-regex-syntax-for-not-matching-one-of-the-following/29393466#29393466", "title": "Ruby regex syntax for &quot;not matching one of the following&quot;", "body": "<p>Use <a href=\"http://www.regular-expressions.info/alternation.html\" rel=\"nofollow\">alternative list</a> with pipe <code>|</code> symbol to combine the look-ahead conditions:</p>\n\n<pre><code>(?!http\\:\\/\\/|\\[)\n</code></pre>\n\n<p>So, to match the hrefs, you can use the following regex:</p>\n\n<pre><code>href=\\\"((?!http\\:\\/\\/|\\[)[^\\\"]+?)\\\"\n</code></pre>\n\n<p>See <a href=\"http://rubular.com/r/bYflEUrnuN\" rel=\"nofollow\">demo on Rubular.com</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1427899168, "post_id": 29393517, "comment_id": 46964007, "body": "thanks - would you mind explaining what the <code>(?:(?!\\1).)*\\1</code>  at the end is for? The first one seems to work as is."}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1427899268, "post_id": 29393517, "comment_id": 46964101, "body": "but the first one matches <code>href=&quot;</code> substring only. If you want to match the whole href part then use the second one."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1427899491, "post_id": 29393517, "comment_id": 46964273, "body": "ah, i see:  i just need to find instances of where it occurs, but the second one would be useful if i actually wanted to test what the href was set to, for example, so thanks for both."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 1, "last_activity_date": 1427899556, "last_edit_date": 1427899556, "creation_date": 1427898573, "answer_id": 29393517, "question_id": 29393434, "link": "https://stackoverflow.com/questions/29393434/ruby-regex-syntax-for-not-matching-one-of-the-following/29393517#29393517", "title": "Ruby regex syntax for &quot;not matching one of the following&quot;", "body": "<p>Combine the both by using the alternation operator.</p>\n\n<pre><code>href=['\"](?!http\\:\\/\\/|\\[)\n</code></pre>\n\n<p>For more specific, it would be.</p>\n\n<pre><code>href=(['\"])(?!http\\:\\/\\/|\\[)(?:(?!\\1).)*\\1\n</code></pre>\n\n<p>This would handle both single quoted or double quoted string in the <code>href</code> part. And this won't match the strings like <code>href='foo.com\"</code> or <code>href=\"foo.com'</code> (<em>unmatched quotes</em>)</p>\n\n<p><code>(['\"])</code> would capture double quote or single quote. <code>(?!http\\:\\/\\/|\\[)</code> and the matched quote won't be followed by <code>http://</code> or <code>[</code>, if yes, then it moves on to the next pattern. <code>(?:(?!\\1).)*</code> matches any character but not of the captured character, zero or more times. <code>\\1</code> followed by the captured character. </p>\n\n<p><a href=\"http://rubular.com/r/Nxd3jORu5g\" rel=\"nofollow\">DEMO</a></p>\n"}], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 29393517, "answer_count": 2, "score": 0, "last_activity_date": 1427924294, "creation_date": 1427898422, "last_edit_date": 1427899369, "question_id": 29393434, "link": "https://stackoverflow.com/questions/29393434/ruby-regex-syntax-for-not-matching-one-of-the-following", "title": "Ruby regex syntax for &quot;not matching one of the following&quot;", "body": "<p>Nice simple regex syntax question for you.</p>\n\n<p>I have a block of text and i want to find instances of <code>href=\"</code> or <code>href='</code> which are NOT followed by either <code>[</code> or <code>http://</code></p>\n\n<p>I can get \"not followed by <code>[</code>\" with</p>\n\n<p><code>record.body =~ /href=['\"](?!\\[)/</code></p>\n\n<p>and i can get \"not followed by <code>http://</code>\" with </p>\n\n<p><code>record.body =~ /href=['\"](?!http\\:\\/\\/)/</code></p>\n\n<p>But i can't quite work out how to combine the two.  </p>\n\n<p>Just to be clear:  i want to find bad strings like this</p>\n\n<pre><code>`href=\"www.foo.com\"`\n</code></pre>\n\n<p>but i'm ok with (ie don't want to find) strings like this</p>\n\n<pre><code>`href=\"http://www.foo.com\"`\n`href=\"[registration_url]\"`\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "server-sent-events", "grape"], "comments": [{"owner": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "edited": false, "score": 0, "creation_date": 1427907655, "post_id": 29393077, "comment_id": 46969460, "body": "I just answered, but if you are following an example specifically for SSE in the Grape API it would be useful to post a link to that documentation. (In particular I&#39;m wondering what exactly <code>:keep_open</code> does.)"}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 1915247, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IcXRo.jpg?s=128&g=1", "display_name": "Manny42", "link": "https://stackoverflow.com/users/1915247/manny42"}, "edited": false, "score": 0, "creation_date": 1427962073, "post_id": 29396618, "comment_id": 46989931, "body": "I deleted the loop and the thread just to make sure that I get the data. It works (see above), but the connections is not kept alive."}, {"owner": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "reply_to_user": {"reputation": 527, "user_id": 1915247, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IcXRo.jpg?s=128&g=1", "display_name": "Manny42", "link": "https://stackoverflow.com/users/1915247/manny42"}, "edited": false, "score": 0, "creation_date": 1427969881, "post_id": 29396618, "comment_id": 46994153, "body": "You need the infinite loop: as soon as your process ends the SSE connection will close."}], "tags": [], "owner": {"reputation": 24189, "user_id": 841830, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/thtU5.jpg?s=128&g=1", "display_name": "Darren Cook", "link": "https://stackoverflow.com/users/841830/darren-cook"}, "is_accepted": false, "score": 0, "last_activity_date": 1427969985, "last_edit_date": 1427969985, "creation_date": 1427907610, "answer_id": 29396618, "question_id": 29393077, "link": "https://stackoverflow.com/questions/29393077/server-sent-events-with-ruby-grape/29396618#29396618", "title": "Server-Sent Events with Ruby Grape", "body": "<p>The JS code looks correct. My guess is that you should not start a new thread for your infinite loop. What will be happening is that the main thread will carry on executing, reach the end of its block, and close the http request. Your detached thread is then left writing to a non-existent <code>out</code> stream.</p>\n\n<p><strong>UPDATE in response to your EDIT:</strong> POST is not supported in SSE. Data can only be passed to an SSE process by using GET data or cookies.</p>\n"}], "owner": {"reputation": 527, "user_id": 1915247, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IcXRo.jpg?s=128&g=1", "display_name": "Manny42", "link": "https://stackoverflow.com/users/1915247/manny42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427969985, "creation_date": 1427897503, "last_edit_date": 1427962000, "question_id": 29393077, "link": "https://stackoverflow.com/questions/29393077/server-sent-events-with-ruby-grape", "title": "Server-Sent Events with Ruby Grape", "body": "<p>I am trying to create Server-Sent events on my <a href=\"https://github.com/intridea/grape\" rel=\"nofollow\">Ruby Grape API</a>.\nThe problem is that the connection seems to be closed really fast all the time, as I get <code>Connection closed</code> event all the time on test webpage.</p>\n\n<p>The client connects to the server as I can see the method being called, but I would like to know why is the connection not constant and why I don't receive the data I send using the Thread.</p>\n\n<p>Here is my Ruby code:</p>\n\n<pre><code>$connections = []\n\nclass EventsAPI &lt; Sinantra::Base\n\n  def connections\n    $connections\n  end\n\n  get \"/\" do\n    content_type \"text/event-stream\"\n    stream(:keep_open) { |out|\n      puts \"New connection\"\n      out &lt;&lt; \"data: {}\\n\\n\"\n      connections &lt;&lt; out\n    }\n  end\n\n  post \"/\" do\n    data = \"data\\n\\n\"\n    connections.each { |out| out &lt;&lt; data }\n    puts \"sent\\n\"\n  end\n\nend\n</code></pre>\n\n<p>Here is my Javascript:</p>\n\n<pre><code>  var source = new EventSource('http://localhost:9292/events');\n\n  source.onmessage = function(e) {\n      console.log(\"New message: \", e.data);\n      showMessage(e.data);\n  };\n\n  source.onopen = function(e) {\n      // Connection was opened.\n  };\n\n  source.onerror = function(e) {\n      console.log(\"Source Error\", e)\n      if (e.eventPhase == EventSource.CLOSED) {\n          console.log(\"Connection was closed\");\n          // Connection was closed.\n      }\n  };\n\n  var showMessage = function(msg) {\n      var out = document.getElementById('stream');\n      var d = document.createElement('div')\n      var b = document.createElement('strong')\n      var now = new Date;\n      b.innerHTML = msg;\n      d.innerHTML = now.getHours() + \":\" + now.getMinutes() + \":\" +now.getSeconds() + \"  \";\n      d.appendChild(b);\n      out.appendChild(d);\n  };\n</code></pre>\n\n<p>EDIT: I got it working with the GET method (I changed the Grape::API to Sinatra::Base as Grape does not implement stream). I now receive data, but the connection is not kept alive and when I use the post method the data never reaches the browser.</p>\n\n<p>Thank you in advance for your answers.</p>\n"}, {"tags": ["javascript", "ruby", "coffeescript", "sinatra"], "comments": [{"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 0, "creation_date": 1427897522, "post_id": 29393008, "comment_id": 46962808, "body": "render js: &#39;&lt;script type=&quot;text/javacript&quot; &gt;alert(&quot;q&quot;);&lt;/script&gt;&#39; try pls"}, {"owner": {"reputation": 3072, "user_id": 2878172, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6c20c0911f026de5b15b6187fd50caf4?s=128&d=identicon&r=PG&f=1", "display_name": "Kernael", "link": "https://stackoverflow.com/users/2878172/kernael"}, "reply_to_user": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 0, "creation_date": 1427897881, "post_id": 29393008, "comment_id": 46963058, "body": "&quot;wrong number of arguments (1 for 2..4)&quot;, also just &#39;&lt;script&gt;alert(&quot;hello&quot;)&lt;/script&gt;&#39; is working, but I&#39;m really trying to load a script from a file here"}], "answers": [{"tags": [], "owner": {"reputation": 3072, "user_id": 2878172, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6c20c0911f026de5b15b6187fd50caf4?s=128&d=identicon&r=PG&f=1", "display_name": "Kernael", "link": "https://stackoverflow.com/users/2878172/kernael"}, "is_accepted": true, "score": 1, "last_activity_date": 1427901547, "creation_date": 1427901547, "answer_id": 29394656, "question_id": 29393008, "link": "https://stackoverflow.com/questions/29393008/execute-javascript-in-sinatra/29394656#29394656", "title": "Execute Javascript in Sinatra", "body": "<p>Figured it out, the path in src must be so :</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"javascripts/index.js\"&gt;&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 3072, "user_id": 2878172, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6c20c0911f026de5b15b6187fd50caf4?s=128&d=identicon&r=PG&f=1", "display_name": "Kernael", "link": "https://stackoverflow.com/users/2878172/kernael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "accepted_answer_id": 29394656, "answer_count": 1, "score": 0, "last_activity_date": 1427901547, "creation_date": 1427897303, "last_edit_date": 1427898056, "question_id": 29393008, "link": "https://stackoverflow.com/questions/29393008/execute-javascript-in-sinatra", "title": "Execute Javascript in Sinatra", "body": "<p>I searched a lot but I can't seem to find a clear answer about how to execute javascript code via Sinatra, it symply renders the code as html for me. Here is what I tried so far :</p>\n\n<pre><code>require 'sinatra'\n\nset :public_folder, 'public'\n\nclass Dashboard &lt; Sinatra::Base\n  get '/' do\n    send_file File.join(settings.public_folder, 'javascripts/index.js') # renders code as html\n    '&lt;script type=\"text/javascript\" src=\"index.js\"&gt;&lt;/script&gt;' # nothing\n    '&lt;script&gt;alert(\"Hello, world !\")&lt;/script&gt;' # works correctly\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "filepath"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1427897097, "post_id": 29392784, "comment_id": 46962515, "body": "<code>Rails.root</code> returns the actual path of your app&#39;s folder (on Ubuntu, something like <code>&#47;home&#47;user_name&#47;your_rails_app</code>)."}, {"owner": {"reputation": 37, "user_id": 4302241, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Pt4F-fj1uvE/AAAAAAAAAAI/AAAAAAAAAL8/psYITXfafRc/photo.jpg?sz=128", "display_name": "Nucleus F", "link": "https://stackoverflow.com/users/4302241/nucleus-f"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1427897708, "post_id": 29392784, "comment_id": 46962930, "body": "Yes, I know. I tried both methods and they don&#39;t work."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 1, "creation_date": 1427897806, "post_id": 29392784, "comment_id": 46963004, "body": "Have you tried putting your videos in <code>&#47;public&#47;...</code>? You shouldn&#39;t put large files like videos in the asset pipeline."}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1427900050, "post_id": 29392784, "comment_id": 46964674, "body": "Agree with Beartech, put it in a video directory in public, so <a href=\"http://www.siteurl/public/video/\" rel=\"nofollow noreferrer\">siteurl/public/video</a>"}, {"owner": {"reputation": 589, "user_id": 4292583, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-BPd6aWrEDl8/AAAAAAAAAAI/AAAAAAAAAKQ/RCLR9DpcR-E/photo.jpg?sz=128", "display_name": "Tien Nguyen", "link": "https://stackoverflow.com/users/4292583/tien-nguyen"}, "edited": false, "score": 0, "creation_date": 1427901071, "post_id": 29392784, "comment_id": 46965415, "body": "Do not use <i>ROOT_URL</i> in your views, especially as href or src for some resource. All your requests go through Rails routes or directly (in production) to the file that is (usually) in your public dir. So the request path and the absolute path of file at hard drive is not same"}, {"owner": {"reputation": 37, "user_id": 4302241, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Pt4F-fj1uvE/AAAAAAAAAAI/AAAAAAAAAL8/psYITXfafRc/photo.jpg?sz=128", "display_name": "Nucleus F", "link": "https://stackoverflow.com/users/4302241/nucleus-f"}, "edited": false, "score": 0, "creation_date": 1427902910, "post_id": 29392784, "comment_id": 46966559, "body": "&quot;path&quot;: &quot;<a href=\"http://localhost:3000/public/video/\" rel=\"nofollow noreferrer\">localhost:3000/public/video</a>&quot; still doesn&#39;t work for me"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427906070, "post_id": 29392784, "comment_id": 46968571, "body": "don&#39;t add localhost, try with public/videos"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4302241, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Pt4F-fj1uvE/AAAAAAAAAAI/AAAAAAAAAL8/psYITXfafRc/photo.jpg?sz=128", "display_name": "Nucleus F", "link": "https://stackoverflow.com/users/4302241/nucleus-f"}, "edited": false, "score": 0, "creation_date": 1427902527, "post_id": 29394136, "comment_id": 46966355, "body": "I need write path to folder with my videos in js file which locates in assets and I don&#39;t know what is correct path.   video_tag - for views, not js"}], "tags": [], "owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "is_accepted": false, "score": 0, "last_activity_date": 1427900168, "creation_date": 1427900168, "answer_id": 29394136, "question_id": 29392784, "link": "https://stackoverflow.com/questions/29392784/what-is-correct-path-in-js-file-in-rails/29394136#29394136", "title": "What is correct path in .js file in Rails?", "body": "<p>I am not sure, if you really want than i assets, try putting that video in <code>app/assets/videos</code> and then in the <code>config/application.rb</code> do </p>\n\n<pre><code>config.assets.paths &lt;&lt; \"#{Rails.root}/app/assets/videos\"\nconfig.assets.enabled = true\n</code></pre>\n\n<p>else put it in <code>public/videos</code> then, your <code>video_tag \"video.mp4\"</code> should automatically loaf from there</p>\n"}], "owner": {"reputation": 37, "user_id": 4302241, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Pt4F-fj1uvE/AAAAAAAAAAI/AAAAAAAAAL8/psYITXfafRc/photo.jpg?sz=128", "display_name": "Nucleus F", "link": "https://stackoverflow.com/users/4302241/nucleus-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1002, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427903703, "creation_date": 1427896737, "last_edit_date": 1427903703, "question_id": 29392784, "link": "https://stackoverflow.com/questions/29392784/what-is-correct-path-in-js-file-in-rails", "title": "What is correct path in .js file in Rails?", "body": "<p>I have a js script which plays a video on my home page and I can't get the correct path to the video folder in this script. It only works in an html static project. </p>\n\n<p><em>assets/javascript/common.js</em></p>\n\n<pre><code>var videobackground = new $.backgroundVideo($('#background-video'), {\n\n  \"path\": \"/video/\"\n\n});\n</code></pre>\n\n<p><em>assets/javascript/video/</em> - my videos in this folder</p>\n\n<hr>\n\n<hr>\n\n<p>I tried sending the <code>root_path</code> variable in my application file, but it doesn't work either.</p>\n\n<p><em>application.html.haml</em></p>\n\n<pre><code>:javascript\n\n  var ROOT_URL = '#{Rails.root}';\n</code></pre>\n\n<hr>\n\n<p><em>application.html.haml</em></p>\n\n<pre><code>var videobackground = new $.backgroundVideo($('#background-video'), {\n\n  \"path\": ROOT_URL + \"/app/assets/javascripts/video/\"\n\n});\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1427895688, "post_id": 29392314, "comment_id": 46961553, "body": "what are you going to do with the values after you save them? Does your DB have options for an array type (such as postgresql?)."}], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": false, "score": 1, "last_activity_date": 1427895881, "creation_date": 1427895881, "answer_id": 29392448, "question_id": 29392314, "link": "https://stackoverflow.com/questions/29392314/how-save-multiselect-values-to-database/29392448#29392448", "title": "How save multiselect values to database", "body": "<p>You can use rails serialize on the column:</p>\n\n<pre><code>serialize :order, Hash\n</code></pre>\n\n<p>Or for JSON (depending what you want to do with it):</p>\n\n<pre><code>serialize :order, JSON\n</code></pre>\n\n<p>However, the columns needs to be of type 'text' not 'string' for serialize to work, so be sure to create a migration to change the column type.</p>\n\n<pre><code>rails g migration change_order_type_in_table_name\n\nclass ChangeOrderTypeInTableName &lt; ActiveRecord::Migration\n  def up\n    change_column :my_table, :order, :text\n  end\n\n  def down\n    change_column :my_table, :order, :string\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 1, "last_activity_date": 1427902397, "creation_date": 1427902397, "answer_id": 29394960, "question_id": 29392314, "link": "https://stackoverflow.com/questions/29392314/how-save-multiselect-values-to-database/29394960#29394960", "title": "How save multiselect values to database", "body": "<p>You can pass a class to <a href=\"http://apidock.com/rails/ActiveRecord/Base/serialize/class\" rel=\"nofollow\">serialize</a>:</p>\n\n<pre><code>  class User &lt; ActiveRecord::Base\n      serialize :order, Array\n    end\n    The above ensures that order as an Array:\n\n    User.new\n    #=&gt; #&lt;User id: nil, order: [], created_at: nil, updated_at: nil&gt;\n    Note that you might have to convert existing fields if the types don't match.\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 1365980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rbYkY.jpg?s=128&g=1", "display_name": "dziorkowsky", "link": "https://stackoverflow.com/users/1365980/dziorkowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1367, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427902397, "creation_date": 1427895535, "question_id": 29392314, "link": "https://stackoverflow.com/questions/29392314/how-save-multiselect-values-to-database", "title": "How save multiselect values to database", "body": "<p>How can I add values to string field in database from multiple select.</p>\n\n<p>I have field in database:</p>\n\n<pre><code>t.string   \"types\"\n</code></pre>\n\n<p>and view:</p>\n\n<pre><code>&lt;%= f.select :order, [[\"One\", 1], [\"Two\", 2], [\"Three\", 3]], {}, { :class =&gt; 'form-control', :multiple =&gt; true } %&gt;\n</code></pre>\n\n<p>Maybe serialize or json is goot idea? Is it possible save and simple way read this?</p>\n"}, {"tags": ["ruby", "unit-testing", "logging", "minitest", "log4r"], "answers": [{"comments": [{"owner": {"reputation": 4161, "user_id": 1450420, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cbf9e8aa5e2fb2f81bd8d8e9ea94ef50?s=128&d=identicon&r=PG", "display_name": "Derek Hill", "link": "https://stackoverflow.com/users/1450420/derek-hill"}, "edited": false, "score": 0, "creation_date": 1479045481, "post_id": 29394432, "comment_id": 68384641, "body": "Small typo here.  Should be <code>output = r.gets</code>"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 2, "last_activity_date": 1544347054, "last_edit_date": 1544347054, "creation_date": 1427900998, "answer_id": 29394432, "question_id": 29392292, "link": "https://stackoverflow.com/questions/29392292/how-can-i-test-logger-messages-with-minitest/29394432#29394432", "title": "How can I test logger-messages with MiniTest?", "body": "<p>You can set up a pipe, pass the writer from the pipe to the logger, and then use the reader from the pipe to test your assertions.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-c-pipe\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.1.0/IO.html#method-c-pipe</a></p>\n\n<p>Something like:</p>\n\n<pre><code>require 'logger'\nr, w = IO.pipe\nlog = Logger.new(w)\nlog.info \"testing info log message\"\noutput = r.gets\nputs \"Test passed: #{!!(/testing/ =~ output)}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 2, "last_activity_date": 1469085488, "last_edit_date": 1469085488, "creation_date": 1429219896, "answer_id": 29686353, "question_id": 29392292, "link": "https://stackoverflow.com/questions/29392292/how-can-i-test-logger-messages-with-minitest/29686353#29686353", "title": "How can I test logger-messages with MiniTest?", "body": "<p>In meantime I  created a <a href=\"https://rubygems.org/gems/minitest-logger\" rel=\"nofollow\">minitest-logger-Gem</a></p>\n\n<p>A code example how to use it:</p>\n\n<pre><code>require 'log4r'\nrequire 'minitest-logger'\n\nclass Test_log4r &lt; MiniTest::Test\n  def setup \n    @log = Log4r::Logger.new('log')\n    @log.level = Log4r::INFO\n  end    \n  def test_output_1 \n    assert_log(\" INFO log: Hello World\\n\"){ @log.info(\"Hello World\") }\n  end\n  def test_output_regex\n    assert_log(/Hello World/){ @log.info(\"Hello World\") }\n  end  \n\n  def test_silent\n    assert_silent_log(){\n      @log.debug(\"Hello World\")\n      #~ @log.info(\"Hello World\")     #uncomment this to see a failure\n    }\n    refute_silent_log(){\n      @log.warn(\"Hello World\")     #comment this to see a failure\n    }\n  end\n\nend\n</code></pre>\n\n<p>During the test a temporary outputter is added to the logger <code>@log</code>. After the test the outputter is removed again.</p>\n\n<p>The gem supports <a href=\"https://rubygems.org/gems/log4r\" rel=\"nofollow\">log4r</a> and <a href=\"https://rubygems.org/gems/logger\" rel=\"nofollow\">logger</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14105904, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiAEo2rS9WfRHld3ufaf2oAsvVlBN479gsRM8zO=k-s128", "display_name": "dev-Bilal", "link": "https://stackoverflow.com/users/14105904/dev-bilal"}, "is_accepted": false, "score": 0, "last_activity_date": 1601800563, "creation_date": 1601800563, "answer_id": 64192631, "question_id": 29392292, "link": "https://stackoverflow.com/questions/29392292/how-can-i-test-logger-messages-with-minitest/64192631#64192631", "title": "How can I test logger-messages with MiniTest?", "body": "<p>@Puhlze answer is good. Just for non-blocking, check before hand if there is input available:</p>\n<pre><code>if IO.select([r], [], [], 0.01).nil?\n</code></pre>\n"}], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2380, "favorite_count": 0, "accepted_answer_id": 29686353, "answer_count": 3, "score": 5, "last_activity_date": 1601800563, "creation_date": 1427895469, "question_id": 29392292, "link": "https://stackoverflow.com/questions/29392292/how-can-i-test-logger-messages-with-minitest", "title": "How can I test logger-messages with MiniTest?", "body": "<p>I have an application and I want to test if I get correct \nmessages from my logger.</p>\n\n<p>A short example (you may switch between log4r and logger):</p>\n\n<pre><code>gem 'minitest'\nrequire 'minitest/autorun'\nrequire 'log4r'\n#~ require 'logger'\nclass Testlog &lt; MiniTest::Test\n  def setup\n    if defined? Log4r\n      @log = Log4r::Logger.new('log')\n      @log.outputters &lt;&lt; Log4r::StdoutOutputter.new('stdout', :level =&gt; Log4r::INFO)\n    else\n      @log = Logger.new(STDOUT)\n      @log.level = Logger::INFO\n    end\n  end\n\n  def test_silent\n    assert_silent{ @log.debug(\"hello world\") }\n    assert_output(nil,nil){ @log.debug(\"Hello World\") }\n  end\n  def test_output\n    #~ refute_silent{ @log.INFO(\"Hello\") }#-&gt; NoMethodError: undefined method `refute_silent'        \n    assert_output(\"INFO log: Hello World\\n\",''){ @log.info(\"Hello World\") }\n  end\n\nend\n</code></pre>\n\n<p>But I get:</p>\n\n<pre><code>  1) Failure:\nTestlog#test_output [minitest_log4r.rb:27]:\nIn stdout.\nExpected: \"INFO log: Hello World\\n\"\n  Actual: \"\"\n</code></pre>\n\n<p>On my output screen I see the message.\nI have similar results with <code>Log4r::StderrOutputter</code> and <code>Log4r::Outputter.stdout</code>.</p>\n\n<p>So it seems it is send to the output screen, but it is not catched by minitest in STDOUT or STDERR.</p>\n\n<p>Before I start to write a minitest-log4r-Gem:</p>\n\n<p><strong>Is there a possibility to test logger-output in minitest?</strong></p>\n\n<hr>\n\n<p>If not:\nAny recommendations how to implement a minitest-log4r-Gem?</p>\n\n<p>Examples what I could imagine:</p>\n\n<ul>\n<li>define new outputter for minitest (Log4r::MinitestOutputter)</li>\n<li>Mock the logger.</li>\n<li>new assertions (add the new outputter as parameter?):\n<ul>\n<li><code>assert_message('INFO log: Hello World'){ @log.info(\"Hello World\") }</code></li>\n<li><code>assert_messages(:info =&gt; 1, :debug =&gt; 2){ @log.info(\"Hello World\") }</code> to count messages.</li>\n<li><code>assert_info_messages('Hello World'){ @log.info(\"Hello World\") }</code></li>\n<li><code>assert_debug_messages('Hello World'){ @log.info(\"Hello World\") }</code></li>\n</ul></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "sidekiq"], "owner": {"reputation": 5875, "user_id": 277370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/95a76c24c89bdbe5bd913597b619e1f1?s=128&d=identicon&r=PG", "display_name": "allaire", "link": "https://stackoverflow.com/users/277370/allaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1427894837, "creation_date": 1427894837, "question_id": 29392091, "link": "https://stackoverflow.com/questions/29392091/devise-customfailure-and-mount-in-routes-bad-redirect", "title": "Devise CustomFailure and mount in routes, bad redirect", "body": "<p>I'm using a <code>CustomFailure</code> class like shown in the doc (<a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated\" rel=\"nofollow\">here</a>) to redirect to our sign in page when someone is unauthenticated:</p>\n\n<pre><code>class CustomFailure &lt; Devise::FailureApp\n  include Localization\n\n  def redirect_url\n    url_for(controller: \"/public/sessions\", action: :new, locale: locale_to_params(I18n.locale))\n  end\n\n  # You need to override respond to eliminate recall\n  def respond\n    if http_auth?\n      http_auth\n    else\n      redirect\n    end\n  end\nend\n</code></pre>\n\n<p>So this normally redirects to <code>http://www.acmecorp.com/en/signin</code>, but with the Sidekiq panel in <code>routes.rb</code>:</p>\n\n<pre><code>  authenticate :user, lambda { |u| u.super_admin? } do\n    require \"sidekiq/web\"\n    mount Sidekiq::Web =&gt; \"/sidekiq\"\n  end\n</code></pre>\n\n<p>I get redirected to <code>http://www.acmecorp.com/sidekiq/en/signin</code> instead of <code>http://www.acmecorp.com/en/signin</code>. Any reason why the redirect does not get rid of the <code>/sidekiq</code> part?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "is_accepted": true, "score": 1, "last_activity_date": 1427895602, "last_edit_date": 1427895602, "creation_date": 1427895165, "answer_id": 29392199, "question_id": 29391715, "link": "https://stackoverflow.com/questions/29391715/how-do-i-convert-a-hashs-values-into-lambdas-recursively/29392199#29392199", "title": "How do I convert a hash&#39;s values into lambdas recursively?", "body": "<pre><code>def hash_values_to_lambda(old_hash)\n  {}.tap do |new_hash|\n    old_hash.each do |key, value|\n      new_hash[key] =\n        if value.is_a?(Hash)\n          hash_values_to_lambda(value)\n        else\n          lambda { value } # or -&gt; { value } with new syntax\n        end\n    end\n  end\nend\n</code></pre>\n\n<p>If you want, you can go with <code>each_with_object</code> instead of <code>tap</code>:</p>\n\n<pre><code>old_hash.each_with_object({}) do |(key, value), new_hash|\n  # everything else remains the same\nend\n</code></pre>\n"}], "owner": {"reputation": 1463, "user_id": 2448104, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QEF9u.jpg?s=128&g=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2448104/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 29392199, "answer_count": 1, "score": -1, "last_activity_date": 1427895602, "creation_date": 1427893761, "question_id": 29391715, "link": "https://stackoverflow.com/questions/29391715/how-do-i-convert-a-hashs-values-into-lambdas-recursively", "title": "How do I convert a hash&#39;s values into lambdas recursively?", "body": "<p>I have a Hash that looks like this:</p>\n\n<pre><code>     {\n       :a =&gt; \"700\",\n       :b =&gt; \"600\",\n       :c =&gt; \"500\",\n       :d =&gt; \"400\",\n       :e =&gt; \"300\",\n       :f =&gt; {\n         :g =&gt; \"200\",\n         :h =&gt; [\n           \"test\"\n         ]\n       }\n    }\n</code></pre>\n\n<p>my goal is to iterate over this hash and return a copy that have all the values wrapped in a lambda, similar to this: <a href=\"https://github.com/thoughtbot/paperclip/blob/dca87ec5d8038b2d436a75ad6119c8eb67b73e70/spec/paperclip/style_spec.rb#L44\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip/blob/dca87ec5d8038b2d436a75ad6119c8eb67b73e70/spec/paperclip/style_spec.rb#L44</a></p>\n\n<p>I went with <code>each_with_object({})</code> but best I can do is to wrap only the first level, so I tried to check when I meet another Hash in the cycle (<code>:f</code> in this case, only it's key's values should be a lambda unless they are a hash as well) and treat it, but it's becoming quite troublesome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 1527, "user_id": 656669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/646b709a8c1dd04c4ed44693fa8839a2?s=128&d=identicon&r=PG", "display_name": "Fedcomp", "link": "https://stackoverflow.com/users/656669/fedcomp"}, "edited": false, "score": 3, "creation_date": 1467361516, "post_id": 29392429, "comment_id": 63711101, "body": "You DO test your own custom configuration. You write something using active admin dsl and each time it&#39;s different, so you test exactly that. Especially when you have custom logic in controller."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1527, "user_id": 656669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/646b709a8c1dd04c4ed44693fa8839a2?s=128&d=identicon&r=PG", "display_name": "Fedcomp", "link": "https://stackoverflow.com/users/656669/fedcomp"}, "edited": false, "score": 1, "creation_date": 1467361737, "post_id": 29392429, "comment_id": 63711236, "body": "@Fedcomp I think you&#39;ll benefit from thinking about what I wrote. I&#39;ll go again: <b>You DO NOT test gems PERIOD :)</b> You test your logic (hopefully), but it has nothing to do with gems. Testing gems classes means messing with gem&#39;s internals - it is sooo bad idea to do."}, {"owner": {"reputation": 1527, "user_id": 656669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/646b709a8c1dd04c4ed44693fa8839a2?s=128&d=identicon&r=PG", "display_name": "Fedcomp", "link": "https://stackoverflow.com/users/656669/fedcomp"}, "edited": false, "score": 0, "creation_date": 1467369648, "post_id": 29392429, "comment_id": 63716281, "body": "Testing your OWN logic (which is basically any use of dsl) means YOUR functionality won&#39;t break. &quot;period&quot;"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1527, "user_id": 656669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/646b709a8c1dd04c4ed44693fa8839a2?s=128&d=identicon&r=PG", "display_name": "Fedcomp", "link": "https://stackoverflow.com/users/656669/fedcomp"}, "edited": false, "score": 0, "creation_date": 1467369782, "post_id": 29392429, "comment_id": 63716363, "body": "@Fedcomp can you show me, where our opinions differ? I write tests and deem it to be good, how does your last comment applies to downvote and where did you see I said <code>don&#39;t test</code>?"}, {"owner": {"reputation": 1527, "user_id": 656669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/646b709a8c1dd04c4ed44693fa8839a2?s=128&d=identicon&r=PG", "display_name": "Fedcomp", "link": "https://stackoverflow.com/users/656669/fedcomp"}, "edited": false, "score": 2, "creation_date": 1467370664, "post_id": 29392429, "comment_id": 63716891, "body": "You clearly saw first post and saw it has some dsl. And then you suggest to not test it. I suggest to test any use of special dsl where it may break. If i define &quot;i want csv with users to be exported&quot; then i have to put test to be sure that functionality is actually activated."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1527, "user_id": 656669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/646b709a8c1dd04c4ed44693fa8839a2?s=128&d=identicon&r=PG", "display_name": "Fedcomp", "link": "https://stackoverflow.com/users/656669/fedcomp"}, "edited": false, "score": 0, "creation_date": 1467370868, "post_id": 29392429, "comment_id": 63717022, "body": "@Fedcomp but man, testing functionality and testing active_admin gem - different things. active_admin already shipped with bunch of tests that cover everything. Of course, you <b>should</b> test your csv export. But test <b>should not</b> rely on whether you&#39;ve user this or that gem for it, but rather on whether csv export <b>works</b>. And if we agree on that, it has nothing to do with testing gem itself"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 0, "last_activity_date": 1427895840, "creation_date": 1427895840, "answer_id": 29392429, "question_id": 29391515, "link": "https://stackoverflow.com/questions/29391515/what-is-the-best-way-to-test-activeadmin-classes/29392429#29392429", "title": "What is the best way to test activeadmin classes?", "body": "<p>General idea behind testing gem's functionality - <strong>you don't test it</strong>.</p>\n\n<p>Gems are (usually) already tested.</p>\n"}, {"tags": [], "owner": {"reputation": 3554, "user_id": 3233810, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1135890448/picture?type=large", "display_name": "daino3", "link": "https://stackoverflow.com/users/3233810/daino3"}, "is_accepted": false, "score": 0, "last_activity_date": 1457654359, "creation_date": 1457654359, "answer_id": 35929720, "question_id": 29391515, "link": "https://stackoverflow.com/questions/29391515/what-is-the-best-way-to-test-activeadmin-classes/35929720#35929720", "title": "What is the best way to test activeadmin classes?", "body": "<p>I agree with Andrey, but needed to do this for work. Here's how I tested the csv portion.</p>\n\n<pre><code>  @csv_doc = StringIO.new      \n\n  allow_any_instance_of(ActiveAdmin::ResourceController).to receive(:stream_resource) do |aa_controller|\n    receiver = []\n    # it's ok to mock this because it's literally their code: https://github.com/activeadmin/activeadmin/blob/master/lib/active_admin/resource_controller/streaming.rb#L38\n    aa_controller.class.active_admin_config.csv_builder.build(aa_controller, receiver)\n    receiver.each do |fees_as_csv|\n      @csv_doc &lt;&lt; fees_as_csv\n    end\n  end\n\n\n  @csv_doc.rewind\n  csv_string = @csv_doc.readlines.join\n  csv = CSV.parse(csv_string, headers: true).map(&amp;:to_hash)\n\n  expect(csv[0][\"FIGURING THIS OUT\"]).to eq \"SUCKED\"\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 593, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1457654359, "creation_date": 1427893204, "question_id": 29391515, "link": "https://stackoverflow.com/questions/29391515/what-is-the-best-way-to-test-activeadmin-classes", "title": "What is the best way to test activeadmin classes?", "body": "<p>I have simple activeadmin class that looks like this:</p>\n\n<pre><code>ActiveAdmin.register Post do\n  actions :index\n\n  index do\n    index_columns\n  end\n\n  csv do\n    index_columns\n  end\n\n  def index_columns\n    column \"Id\" do |sp|\n      sp.id\n    end\n  end\nend\n</code></pre>\n\n<p>How will be the best to test this code? Write some integrations specs with capybara or maybe there is some other way? </p>\n"}, {"tags": ["ruby", "linux", "bash", "proxy"], "answers": [{"comments": [{"owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "edited": false, "score": 0, "creation_date": 1427894542, "post_id": 29391460, "comment_id": 46960876, "body": "This works but I really want to be able to intercept <code>sudo gem install</code> and auto-insert the proxy if i&#39;m in proxy mode."}, {"owner": {"reputation": 921, "user_id": 2560292, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/83139ef13fb985cc99b0274c6fe65952?s=128&d=identicon&r=PG", "display_name": "Shan-x", "link": "https://stackoverflow.com/users/2560292/shan-x"}, "reply_to_user": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "edited": false, "score": 0, "creation_date": 1427895587, "post_id": 29391460, "comment_id": 46961491, "body": "I have edited my answer. Maybe now it&#39;s what you want."}, {"owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "edited": false, "score": 0, "creation_date": 1428505429, "post_id": 29391460, "comment_id": 47191849, "body": "I wrapped this in: if [[ -z &quot;$http_proxy&quot; ]]; then and it all worked great"}], "tags": [], "owner": {"reputation": 921, "user_id": 2560292, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/83139ef13fb985cc99b0274c6fe65952?s=128&d=identicon&r=PG", "display_name": "Shan-x", "link": "https://stackoverflow.com/users/2560292/shan-x"}, "is_accepted": true, "score": 3, "last_activity_date": 1427896047, "last_edit_date": 1427896047, "creation_date": 1427893051, "answer_id": 29391460, "question_id": 29391158, "link": "https://stackoverflow.com/questions/29391158/alias-to-sudo-gem-proxy-proxy-or-bash-function/29391460#29391460", "title": "Alias to sudo gem --proxy &lt;PROXY&gt; or bash function?", "body": "<p>You could make an alias. In <code>~/.bash_aliases</code> :</p>\n\n<pre><code>alias sudo=\"sudo \"\nalias gemproxy=\"gem install --http-proxy=&lt;PROXY&gt;\"\n</code></pre>\n\n<p>The <code>sudo</code> alias (with a space) is important if you want to use the alias <code>gemproxy</code> with <code>sudo</code>.</p>\n\n<p>EDIT : to intercept <code>gem install</code>, you can add this in your <code>.bash_aliases</code> :</p>\n\n<pre><code>gem() {\n    if [[ $@ == install* ]]; then\n        arg=${@#\"install \"}\n        command gem install --http-proxy=PROXY $arg\n    fi\n}\n</code></pre>\n\n<p>But with this, you will always export the proxy even if you're not behind it. You can add a verification to see if the environment variable <code>http_proxy</code> is set.</p>\n"}], "owner": {"reputation": 24982, "user_id": 2069812, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3b9968835eb719e5d78a04ba7a2bafbd?s=128&d=identicon&r=PG", "display_name": "Jeef", "link": "https://stackoverflow.com/users/2069812/jeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 29391460, "answer_count": 1, "score": 0, "last_activity_date": 1427896047, "creation_date": 1427892183, "last_edit_date": 1427894615, "question_id": 29391158, "link": "https://stackoverflow.com/questions/29391158/alias-to-sudo-gem-proxy-proxy-or-bash-function", "title": "Alias to sudo gem --proxy &lt;PROXY&gt; or bash function?", "body": "<p>I have a script that I run when behind a proxy called proxy.sh which auto-sets various proxy settings such as:  </p>\n\n<ul>\n<li><code>http_proxy=&lt;PROXY&gt;</code></li>\n<li><code>https_proxy=&lt;PROXY&gt;</code></li>\n</ul>\n\n<p>Once I run this script I would love if it could auto-intercept the ruby <code>gem</code> command and add the proxy information as well:  </p>\n\n<p><code>sudo gem install .....</code>  => <code>sudo gem install --http-proxy=&lt;PROXY&gt; ....</code></p>\n\n<p>At first I wanted to write an alias but I understand I need to actually make a function?  Is that correct?</p>\n\n<p>How would I handle this?</p>\n\n<p>If i run <code>proxy.sh</code> typing:  <code>sudo gem install TEST</code> would automatically run <code>sudo gem install --http-proxy=&lt;PROXY&gt; TEST</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427892068, "post_id": 29390194, "comment_id": 46959251, "body": "Can you post the code for <code>ResellerWorker</code>?  Also, please note that Redis isn&#39;t a great place to hold the contents of a file of indeterminate size..."}, {"owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "reply_to_user": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427893306, "post_id": 29390194, "comment_id": 46960072, "body": "@PinnyM What is ResellerWorker? . There is no file or code like that in app. Please let me know, what you need. If you&#39;re asking me about the reseller model code, I updated that. Please check my updated question."}, {"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427893906, "post_id": 29390194, "comment_id": 46960458, "body": "You have a line in the <code>mail_reseller</code> method that looks like this: <code>Resque.enqueue(ResellerWorker, _to, _from,  _subject, _content, _filename, _file)</code>"}, {"owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "reply_to_user": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427894163, "post_id": 29390194, "comment_id": 46960650, "body": "@PinnyM. Sorry to say, I do not have that line either similar code."}, {"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427898054, "post_id": 29390194, "comment_id": 46963198, "body": "Do a text search on this page for ResellerWorker :)  It&#39;s there in your controller action."}, {"owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "reply_to_user": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427902132, "post_id": 29390194, "comment_id": 46966115, "body": "@PinnyM . I was blind!. I apologize for my mistake. Its a new code base I just started exploring it. I updated the ResellerWorker code which is in reseller_worker.rb file. Please check my updated question."}, {"owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "reply_to_user": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427962611, "post_id": 29390194, "comment_id": 46990179, "body": "@PinnyM Can you please help me on this!"}, {"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1427981515, "post_id": 29390194, "comment_id": 47001057, "body": "The line <code>attachments[_filename] = _file if (_filename &amp;&amp; _file)</code> assigns a single file attachment.  You&#39;ll need to pass multiple files as an array, and assign each one of them exactly this way.  However, you aren&#39;t well set up for passing these files since you&#39;re injecting them into the redis queue.  Consider storing them in a temp directory and passing an array of file paths to the queue instead."}, {"owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "reply_to_user": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1428299163, "post_id": 29390194, "comment_id": 47094624, "body": "@PinnyM Thanks for the clue. Can you please paste some sample implementation or code. My attachments are temporarily stored in <b>files</b> directory."}, {"owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "reply_to_user": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 0, "creation_date": 1428396361, "post_id": 29390194, "comment_id": 47134077, "body": "@PinnyM Can you please walk me through some sample code.I&#39;ll accept the answer and close this thread."}], "owner": {"reputation": 25, "user_id": 4738085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kUu8xu__-Zg/AAAAAAAAAAI/AAAAAAAAABs/snzx4ex6Oik/photo.jpg?sz=128", "display_name": "dev777", "link": "https://stackoverflow.com/users/4738085/dev777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 933, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427907626, "creation_date": 1427889483, "last_edit_date": 1427907626, "question_id": 29390194, "link": "https://stackoverflow.com/questions/29390194/how-to-implement-multiple-attachments-using-ruby-on-rails-action-mailer", "title": "How to implement multiple attachments using Ruby on Rails Action mailer", "body": "<p>I am making a feature to allow user to attach multiple attachments while sending the email. I have added <em>multiple:true</em> and multipart:true  but am not been able to attach multiple attachments. Please help me how can I do that.\nAlso, please mention, how can I display the uploaded file names , 1 after another.\nNote: I am using paperclip</p>\n\n<p>My code:</p>\n\n<p>Form.html.erb</p>\n\n<pre><code>&lt;%= form_tag mass_mail_reseller_path, :multipart =&gt; true, class: \"new-mail-form form-horizontal\" do%&gt;\n        &lt;div class=\"row form-group\"&gt;\n\n        &lt;div class=\"row form-group\"&gt;\n          &lt;%= label_tag \"attachment\", 'Attachment:', class: \"col-sm-1 control-label\"%&gt;\n          &lt;div class=\"col-sm-10\"&gt;\n            &lt;%= file_field_tag \"attachment\",  multiple: true %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>my_controller.rb#action</p>\n\n<pre><code>def mail_reseller\n    _from = params[:from]\n    _to = get_resellers_mail_Ids(params[:to])\n    _subject = params[:subject]\n    _content = params[:body]\n    if params[:attachment]\n      _filename = params[:attachment].original_filename\n      _file = params[:attachment].read\n    end\n    Resque.enqueue(ResellerWorker, _to, _from,  _subject, _content, _filename, _file)\n    flash[:notice] = \"Mail has been sent.\"\n    redirect_to reseller_admin_path(:project_id =&gt; 'lead_tracking_reseller')\n    # directory = \"#{Rails.root}/files\"\n    # path = File.join(directory, _filename)\n    # File.open(path, \"wb\") { |f| f.write(params[:attachment].read) }\n  end\n</code></pre>\n\n<p>mailers/my_mailer.rb</p>\n\n<pre><code>def mass_mail_resellers _to, _from, _subject, _content, _filename, _file\n    attachments[_filename] = _file if (_filename &amp;&amp; _file)\n    @mail_body = _content\n    mail from: _from,\n         to: _to,\n         bcc: 'jam@company.com',\n         subject: _subject\n  end\n\nmodel/resller.rb\nclass Reseller &lt; User\n  has_many :settlements\n  belongs_to :account_manager, class_name: 'User', foreign_key: 'account_manager_id'\n  belongs_to :author, class_name: 'User', foreign_key: 'author_id'\n  has_and_belongs_to_many :plans\n  has_many :attachments\nend\n</code></pre>\n\n<h1>ResellerWorker code.</h1>\n\n<p>reseller_worker.rb</p>\n\n<pre><code>class ResellerWorker\n  @queue = :reseller_mail_queue\n  include Redmine::I18n\n\n  def self.perform(_to, _from, _subject, _content, _filename, _file)\n    _to.each do |_reseller|\n      ResellerMailer.mass_mail_resellers(_reseller, _from, _subject, _content, _filename, _file).deliver\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 0, "creation_date": 1427890079, "post_id": 29389869, "comment_id": 46957927, "body": "What exactly did not work?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "edited": false, "score": 0, "creation_date": 1427890623, "post_id": 29390445, "comment_id": 46958295, "body": "When I added the parenthese after emp_first_name it gave me this error   SyntaxError: expected expression, got &#39;===&#39; @Legendary"}, {"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "reply_to_user": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "edited": false, "score": 0, "creation_date": 1427890712, "post_id": 29390445, "comment_id": 46958368, "body": "Can u show ur console.log(data); right after ajax.success"}, {"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "reply_to_user": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "edited": false, "score": 0, "creation_date": 1427890781, "post_id": 29390445, "comment_id": 46958413, "body": "$.getJSON(url, function(data) {        console.log(data);   and show to us from js console"}], "tags": [], "owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "is_accepted": false, "score": 0, "last_activity_date": 1427891270, "last_edit_date": 1427891270, "creation_date": 1427890216, "answer_id": 29390445, "question_id": 29389869, "link": "https://stackoverflow.com/questions/29389869/displaying-a-pop-up-message-in-javascript-for-my-rails-application/29390445#29390445", "title": "Displaying a pop up message in javascript for my rails application", "body": "<p>controller:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n\n  def populate_form\n\n    @visual = Visual.find_by_id(params[:emp_id])\n\n\n    unless @visual.present?\n\n      render json: {user: @user, status: :unprocessable_entity, error: 404}\n\n    else\n\n\n      @emp_first_name = @visual.first_name\n\n      @emp_last_name = @visual.last_name\n\n        render :json =&gt; {\n\n           :emp_first_name =&gt; @emp_first_name,\n           :emp_last_name =&gt; @emp_last_name\n\n        }\n  end\nend\n</code></pre>\n\n<p>js:</p>\n\n<pre><code>$(document).ready(function(){\n   $('#emp_id').change(function() {\n     var url = \"/user/populate_form?emp_id=\"+$(this).val();\n     $.getJSON(url, function(data) {\n       if( !( data.emp_first_name === undefined ))       $('#emp_first_name').val(data.emp_first_name);\n       if( !( data.emp_last_name.length === undefined )) $('#emp_last_name').val(data.emp_last_name);\n       if( (data.error * 1) == 404) {\n         alert(\"Fail employee ID wasn't found please try again with a valid employee ID.\");\n       } else  {\n         alert(\"Your employee ID has been found please fill in the email and password fields then click submit to register.\");\n       }\n     });\n   }\n   );\n });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 0, "creation_date": 1427890707, "post_id": 29390473, "comment_id": 46958363, "body": "@Legendary...its not typo..he need to catch the response if error comes...so i have edited my answer.have a look .."}, {"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 0, "creation_date": 1427890756, "post_id": 29390473, "comment_id": 46958397, "body": "Ok for now, just i dont understand, why u want change code, when u see syntax error? @Milind"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 0, "creation_date": 1427891035, "post_id": 29390473, "comment_id": 46958569, "body": "@Legendary.. you cannot use flash in json response..it needs to send a json response instead of flash..that we need to use it in js code..."}, {"owner": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "edited": false, "score": 0, "creation_date": 1427891076, "post_id": 29390473, "comment_id": 46958588, "body": "@Milind you answer works for if it finds a valid id but still no luck if the id doesnt exist. My js is watching the emp_first_name text box but, it seems to not work when no data is returned for the emp_first_name, but when an emp_id matches and fills in the emp_first_name I get the your employee id has been found-----....My question is how can I get it to tell me that no id was found"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1427891213, "post_id": 29390473, "comment_id": 46958694, "body": "@Legendary..see in the controller...he is not sending a proper json response ...so how can the js catch the error ...he needs to use ajax callback to catch both success and error..which i have used..."}, {"owner": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "edited": false, "score": 0, "creation_date": 1427891223, "post_id": 29390473, "comment_id": 46958702, "body": "@Milind I tried your updated answer and got this NoMethodError (undefined method <code>errors&#39; for nil:NilClass):   app&#47;controllers&#47;user_controller.rb:26:in </code>block (2 levels) in populate_form&#39;   app/controllers/user_controller.rb:24:in `populate_form"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1427891783, "post_id": 29390473, "comment_id": 46959064, "body": "@Snowman88..i have changed controller code..pls check and verify"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "edited": false, "score": 0, "creation_date": 1427891991, "post_id": 29390473, "comment_id": 46959207, "body": "@Snowman88.. i will appreciate if you pls accept  my answer by checking the left check sigh"}, {"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "edited": false, "score": 1, "creation_date": 1427892477, "post_id": 29390473, "comment_id": 46959502, "body": "@Milind - &lt;offtop&gt; &quot;my life for rating&quot;  &lt;/offtop&gt;"}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": true, "score": 1, "last_activity_date": 1427891754, "last_edit_date": 1427891754, "creation_date": 1427890279, "answer_id": 29390473, "question_id": 29389869, "link": "https://stackoverflow.com/questions/29389869/displaying-a-pop-up-message-in-javascript-for-my-rails-application/29390473#29390473", "title": "Displaying a pop up message in javascript for my rails application", "body": "<p>.You can use different <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow\">ajax callbacks</a> to check if json response is a failure and then show the error message.you can use a blank placeholder for showing alert messages..such as:-</p>\n\n<p><strong>use this in the controller to show json error</strong></p>\n\n<pre><code>class UserController &lt; ApplicationController\n\n  def populate_form\n\n    @visual = Visual.find_by_id(params[:emp_id])\n\n\n    if @visual.present?\n        respond_to do |format|\n            @emp_first_name = @visual.first_name\n            @emp_last_name = @visual.last_name\n             render :json =&gt; {\n\n                 :emp_first_name =&gt; @emp_first_name,\n                 :emp_last_name =&gt; @emp_last_name\n                              }\n    else       \n            format.js { render :json =&gt; \"id not present\", :status =&gt; 400 }\n            format.html { render :json =&gt; \"id not present\" , :status =&gt; 400 }\n\n         end    \n     end\n   end\n</code></pre>\n\n<p><strong>view file</strong>,with placeholder</p>\n\n<pre><code>&lt;div id=\"show_alert\" style=\"display:none;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><strong>js code</strong>,to show alert</p>\n\n<pre><code> $('#emp_id').change(function() {\n       var url = \"/user/populate_form?emp_id=\"+$(this).val();\n       $.getJSON(url, function(data) {\n         if(!(data.emp_first_name === undefined))\n         $('#emp_first_name').val(data.emp_first_name);\n         if(!(data.emp_last_name === undefined))\n         $('#emp_last_name').val(data.emp_last_name);\n          }).done(function (response) {\n                  if (response.success == 'success') {               \n                      //alert('success');    \n                        $(\"#show_alert\").html(\"&lt;span class='text-success marginl10' &gt;&lt;b&gt;Your employee ID has been found please fill in the email and password fields then click submit to register..&lt;/b&gt;&lt;/span&gt;\")\n                  } else {\n                      //alert('fail');\n                      $(\"#show_alert\").html(\"&lt;span class='text-danger     marginl10' &gt;&lt;b&gt;Fail employee ID wasn't found please try again with a valid employee ID.&lt;/b&gt;&lt;/span&gt;\").show();\n                  }\n       });\n     }\n   );\n });\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 1, "accepted_answer_id": 29390473, "answer_count": 2, "score": 1, "last_activity_date": 1443868434, "creation_date": 1427888555, "last_edit_date": 1443868434, "question_id": 29389869, "link": "https://stackoverflow.com/questions/29389869/displaying-a-pop-up-message-in-javascript-for-my-rails-application", "title": "Displaying a pop up message in javascript for my rails application", "body": "<p>Question is in my rails application I have a method in my user controller that does an auto populate. This fills in a form for a new user when they are signing up .when they fill in my emp_id text box it looks at my employee table  which is where I am pulling this data from if an ID matches an what the emp_id they typed it will auto populate thier emp_first_name and emp_last_name. I am able to have a pop up message when the data returns has data but, Im stuck on how to make it show a message if no data exist for that perticular emp_id...</p>\n\n<p>This is my controller </p>\n\n<pre><code>class UserController &lt; ApplicationController\n\n  def populate_form\n\n    @visual = Visual.find_by_id(params[:emp_id])\n\n\n    if @visual.nil?\n\n      respond_to do |format|\n        format.json { render json: @user, status: :unprocessable_entity, flash[:error] =&gt; \"Error No ID found.\" }   \n        #This didn't work no message displays..\n      end\n\n    else\n\n\n      @emp_first_name = @visual.first_name\n\n      @emp_last_name = @visual.last_name\n\n        render :json =&gt; {\n\n           :emp_first_name =&gt; @emp_first_name,\n           :emp_last_name =&gt; @emp_last_name\n\n        }\n     end\n   end\n</code></pre>\n\n<p>This is my view..</p>\n\n<pre><code>&lt;div class='row form-group'&gt;\n  &lt;div class='col-xs-8 col-xs-offset-2 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4 col-lg-2 col-lg-offset-5 text-right'&gt;\n    &lt;%= f.text_field :emp_id, tabindex: 1, id: 'emp_id', autofocus: true, placeholder: t( 'login_label' ), class: 'form-control' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class='row form-group'&gt;\n  &lt;div class='col-xs-8 col-xs-offset-2 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4 col-lg-2 col-lg-offset-5 text-right'&gt;\n    &lt;%= f.text_field :emp_first_name, tabindex: 1, id: 'emp_first_name', autofocus: true, placeholder: t( 'emp_first' ), class: 'form-control' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class='row form-group'&gt;\n  &lt;div class='col-xs-8 col-xs-offset-2 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4 col-lg-2 col-lg-offset-5 text-right'&gt;\n    &lt;%= f.text_field :emp_last_name, tabindex: 1, id: 'emp_last_name', autofocus: true, placeholder: t( 'emp_last' ), class: 'form-control' %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Here is my app.js </p>\n\n<pre><code> $(document).ready(function(){\n   $('#emp_id').change(function() {\n     var url = \"/user/populate_form?emp_id=\"+$(this).val();\n     $.getJSON(url, function(data) {\n       if(!(data.emp_first_name === undefined))\n         $('#emp_first_name').val(data.emp_first_name);\n       if(!(data.emp_last_name === undefined))\n         $('#emp_last_name').val(data.emp_last_name);\n       if('#emp_first_name' === null) {\n         alert('Fail employee ID wasn't found please try again with a valid employee ID.');\n       } else  {\n         alert('Your employee ID has been found please fill in the email and password fields then click submit to register.');\n       }\n     });}\n   );\n });\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 1, "creation_date": 1427889117, "post_id": 29389752, "comment_id": 46957353, "body": "You have string keys <code>&quot;ivpn&quot; &quot;idirect&quot;</code> in your hash declaration, but symbols in the <code>any?</code>  blocks <code>:ivpn</code> and <code>:idirect</code>. Be consistent.  Is <code>rows</code> supposed to be one Hash or an Array of Hashes?"}, {"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1427889232, "post_id": 29389752, "comment_id": 46957417, "body": "As a Hash, <code>any?</code> is likely casting each key/value pair in <code>r</code> to an array <code>[key, value]</code> and that array <code>r</code> cannot have <code>:ivpn</code> the symbol as a key (numeric only)"}, {"owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1427889454, "post_id": 29389752, "comment_id": 46957544, "body": "is there an alternative method to #any?"}, {"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1427889623, "post_id": 29389752, "comment_id": 46957642, "body": "Probably, but I don&#39;t fully understand what the structure of <code>rows</code> is, or what values you are trying to extract from it into <code>representation</code>. Can you post a sample from <code>rows.inspect</code>?"}, {"owner": {"reputation": 3809, "user_id": 518500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/853a5fb8148dc8e1678c983f0a4cbaf5?s=128&d=identicon&r=PG", "display_name": "codingbunny", "link": "https://stackoverflow.com/users/518500/codingbunny"}, "edited": false, "score": 0, "creation_date": 1427889930, "post_id": 29389752, "comment_id": 46957828, "body": "can&#39;t you use the select method on your hash to select all keys you need/want from the source?"}, {"owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1427890424, "post_id": 29389752, "comment_id": 46958161, "body": "@MichaelBerkowski rows.inspect results in =&gt; &quot;{:ivpn =&gt;\\&quot;\\&quot;, :idirect =&gt; \\&quot;x\\&quot;}&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "edited": false, "score": 0, "creation_date": 1427890719, "post_id": 29390466, "comment_id": 46958377, "body": "syntax error, unexpected &#39;}&#39;, expecting keyword_end; syntax error, unexpected &#39;|&#39;, expecting &#39;}&#39;"}], "tags": [], "owner": {"reputation": 601, "user_id": 4218660, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f66990dc14a1b7bbaaa5a988b277d7b5?s=128&d=identicon&r=PG&f=1", "display_name": "djadam", "link": "https://stackoverflow.com/users/4218660/djadam"}, "is_accepted": false, "score": 0, "last_activity_date": 1427916756, "last_edit_date": 1427916756, "creation_date": 1427890268, "answer_id": 29390466, "question_id": 29389752, "link": "https://stackoverflow.com/questions/29389752/ruby-rails-typeerror-cant-convert-symbol-into-integer/29390466#29390466", "title": "ruby / rails: TypeError: can&#39;t convert Symbol into Integer", "body": "<p>try this: </p>\n\n<pre><code>representation.update_attributes! ivpn: rows.any?[{|r| r[:ivpn].present?}], idirect: rows.any? [{|r| r[:idirect].present?}]\n</code></pre>\n"}], "owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427916756, "creation_date": 1427888251, "last_edit_date": 1427889356, "question_id": 29389752, "link": "https://stackoverflow.com/questions/29389752/ruby-rails-typeerror-cant-convert-symbol-into-integer", "title": "ruby / rails: TypeError: can&#39;t convert Symbol into Integer", "body": "<p>I'm trying to update my Representation attributes ivpn &amp; idirect (from a csv file via rake task but i just print here only the meat of the program) and getting the TypeError:</p>\n\n<pre><code># in Rails Console:\nrepresentation = Representation.where(id: 977)\n# =&gt; Representation_id: 977, ivnp: false, idirect: false\n\nrows = Hash.[:ivpn =&gt; \"\", :idirect =&gt; \"x\"] # originally rows are coming from csv-file\n\nrepresentation.update_attributes! ivpn: rows.any?{|r| r[:ivpn].present?}, idirect: rows.any? {|r| r[:idirect].present?}\n\nTypeError: can't convert Symbol into Integer\n        from (irb):42:in `[]'\n        from (irb):42:in `block in irb_binding'\n        from (irb):42:in `each'\n        from (irb):42:in `any?'\n</code></pre>\n\n<p>What I'm missing here?</p>\n"}, {"tags": ["c", "ruby", "ffi"], "answers": [{"tags": [], "owner": {"reputation": 679, "user_id": 3624381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f32f44e789d6de3a61c8385f0476b36b?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3624381/sandy"}, "is_accepted": false, "score": 9, "last_activity_date": 1437522151, "creation_date": 1437522151, "answer_id": 31551509, "question_id": 29389334, "link": "https://stackoverflow.com/questions/29389334/how-do-i-handle-ruby-arrays-in-ruby-ffi-gem/31551509#31551509", "title": "How do I handle ruby arrays in ruby ffi gem?", "body": "<p>Let's say that this is the library you wish to use in your ruby script, call it <code>my_c_lib.c</code>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\ndouble *my_function(double array[], int size)\n{\n  int i = 0;\n  double *new_array = malloc(sizeof(double) * size);\n  for (i = 0; i &lt; size; i++) {\n    new_array[i] = array[i] * 2;\n  }\n\n  return new_array;\n}\n</code></pre>\n\n<p>You can compile it like so:</p>\n\n<pre><code>$ gcc -Wall -c my_c_lib.c -o my_c_lib.o\n$ gcc -shared -o my_c_lib.so my_c_lib.o\n</code></pre>\n\n<p>Now, it's ready to use in in your ruby code (<code>my_c_lib.rb</code>):</p>\n\n<pre><code>require 'ffi'\n\nmodule MyModule\n  extend FFI::Library\n\n  # Assuming the library files are in the same directory as this script\n  ffi_lib \"./my_c_lib.so\"\n\n  attach_function :my_function, [:pointer, :int], :pointer\nend\n\narray = [4, 6, 4]\nsize = array.size\noffset = 0\n\n# Create the pointer to the array\npointer = FFI::MemoryPointer.new :double, size\n\n# Fill the memory location with your data\npointer.put_array_of_double offset, array\n\n# Call the function ... it returns an FFI::Pointer\nresult_pointer = MyModule.my_function(pointer, size)\n\n# Get the array and put it in `result_array` for use\nresult_array = result_pointer.read_array_of_double(size)\n\n# Print it out!\np result_array\n</code></pre>\n\n<p>And here is the result of running the script:</p>\n\n<pre><code>$ ruby my_c_lib.rb\n[8.0, 12.0, 8.0]\n</code></pre>\n\n<p>A note on memory management...from the docs <a href=\"https://github.com/ffi/ffi/wiki/Pointers\" rel=\"noreferrer\">https://github.com/ffi/ffi/wiki/Pointers</a>:</p>\n\n<blockquote>\n  <p>The FFI::MemoryPointer class allocates native memory with automatic garbage collection as a sweetener. When a MemoryPointer goes out of scope, the memory is freed up as part of the garbage collection process.</p>\n</blockquote>\n\n<p>So you shouldn't have to call <code>pointer.free</code> directly. Also, just to check whether you had to manually free <code>result_pointer</code>, I called <code>result_pointer.free</code> after printing extracting the array and got this warning</p>\n\n<pre><code>warning: calling free on non allocated pointer #&lt;FFI::Pointer address=0x007fd32b611ec0&gt;\n</code></pre>\n\n<p>So it looks like you don't have to manually free <code>result_pointer</code> either.</p>\n"}], "owner": {"reputation": 135, "user_id": 1278765, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/246bc405b6b1751040e1c469dc72dff9?s=128&d=identicon&r=PG", "display_name": "Lekeasong", "link": "https://stackoverflow.com/users/1278765/lekeasong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1604, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1437522151, "creation_date": 1427886923, "question_id": 29389334, "link": "https://stackoverflow.com/questions/29389334/how-do-i-handle-ruby-arrays-in-ruby-ffi-gem", "title": "How do I handle ruby arrays in ruby ffi gem?", "body": "<p>I want to use the ruby ffi gem to call a c function which has an array as an input variable and the output is an array. That is, the c function looks like:</p>\n\n<pre><code>double *my_function(double array[], int size)\n</code></pre>\n\n<p>I have created the ruby binding as:</p>\n\n<pre><code>module MyModule\n  extend FFI::Library\n  ffi_lib 'c'\n  ffi_lib 'my_c_lib'\n  attach_function :my_function, [:pointer, int], :pointer\n</code></pre>\n\n<p>I will like to make a call in ruby code like:</p>\n\n<pre><code>result_array = MyModule.my_function([4, 6, 4], 3)\n</code></pre>\n\n<p>How do I go about this?</p>\n"}, {"tags": ["ruby", "mongoid"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427886265, "post_id": 29389105, "comment_id": 46955599, "body": "Can you show the query to think something else...?"}], "answers": [{"comments": [{"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 1, "creation_date": 1429566076, "post_id": 29391503, "comment_id": 47650125, "body": "I&#39;m hitting the same limitation too. In your example, you could use <code>Model::instantiate</code> instead of <code>new</code> to avoid having to deal with the <code>new_record</code> flag, e.g.: <code>places_hash.map { |attrs| Offer.instantiate(attrs) }</code>."}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "reply_to_user": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "edited": false, "score": 0, "creation_date": 1429598247, "post_id": 29391503, "comment_id": 47660794, "body": "Hi @kardeiz, thanks for your hint! What do you mean by limitation? Doesn&#39;t that work for you?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1561585467, "post_id": 29391503, "comment_id": 100117511, "body": "The OP wanted to return a Mongoid::Criteria so he could continue chaining queries like how ActiveRecord::Relations works. The problem is aggregation returns an array. Consequently, there is no way to chain more scopes onto it. In your example, you use map which is very costly, imagine a million records."}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": false, "score": 1, "last_activity_date": 1427893181, "creation_date": 1427893181, "answer_id": 29391503, "question_id": 29389105, "link": "https://stackoverflow.com/questions/29389105/ruby-mongoid-aggregation-return-object/29391503#29391503", "title": "Ruby mongoid aggregation return object", "body": "<p>I've been struggling with this on my own too. I'm afraid you have to build your \"models\" on your own. Let's take an example from my code:</p>\n\n<pre><code>class Searcher\n  # ...\n\n  def results(page: 1, per_page: 50)\n    pipeline = []\n\n    pipeline &lt;&lt; \n      \"$match\" =&gt; {\n        title: /#{@params['query']}/i\n      }\n    }\n\n    geoNear = {\n      \"near\"               =&gt; coordinates,\n      \"distanceField\"      =&gt; \"distance\",\n      \"distanceMultiplier\" =&gt; 3959,\n      \"num\"                =&gt; 500,\n      \"spherical\"          =&gt; true,\n    }\n\n    pipeline &lt;&lt; {\n      \"$geoNear\" =&gt; geoNear\n    }\n\n    count = aggregate(pipeline).count\n\n    pipeline &lt;&lt; { \"$skip\" =&gt; ((page.to_i - 1) * per_page) }\n    pipeline &lt;&lt; { \"$limit\" =&gt; per_page }\n\n    places_hash = aggregate(pipeline)\n\n    places = places_hash.map { |attrs| Offer.new(attrs) { |o| o.new_record = false } }\n\n    # ...\n\n    places\n  end\n\n  def aggregate(pipeline)\n    Offer.collection.aggregate(pipeline)\n  end\nend\n</code></pre>\n\n<p>I've omitted a lot of code from original project, just to present the way what I've been doing.</p>\n\n<p>The most important thing here was the line:</p>\n\n<pre><code>places_hash.map { |attrs| Offer.new(attrs) { |o| o.new_record = false } }\n</code></pre>\n\n<p>Where both I'm creating an array of <code>Offers</code>, but additionally, manually I'm setting their <code>new_record</code> attribute to <code>false</code>, so they behave like any other documents get by simple <code>Offer.where(...)</code>.</p>\n\n<p>It's not beautiful, but it worked for me, and I could take the best of whole Aggregation Framework!</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1011, "user_id": 1331342, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/8446480fc53a59b72c634b9d3cdb8c6f?s=128&d=identicon&r=PG", "display_name": "neeraj", "link": "https://stackoverflow.com/users/1331342/neeraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1427893181, "creation_date": 1427886182, "question_id": 29389105, "link": "https://stackoverflow.com/questions/29389105/ruby-mongoid-aggregation-return-object", "title": "Ruby mongoid aggregation return object", "body": "<p>I am doing an mongodb aggregation using mongoid, using <code>ModleName.collection.aggregate(pipeline)</code> . The value returned is an array and not a <code>Mongoid::Criteria</code>, so if a do a <code>first</code> on the array, I get the first element which is of the type <code>BSON::Document</code> instead of <code>ModelName</code>. As a result, I am unable to use it as a model.</p>\n\n<p>Is there a method to return a criteria instead of an array from the aggregation, or convert a bson document to a model instance?</p>\n\n<p>Using mongoid (4.0.0)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "spree"], "comments": [{"owner": {"reputation": 1509, "user_id": 4731705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HB0F.png?s=128&g=1", "display_name": "Oleg K.", "link": "https://stackoverflow.com/users/4731705/oleg-k"}, "edited": false, "score": 0, "creation_date": 1427887720, "post_id": 29389037, "comment_id": 46956482, "body": "What if you try <code>before_action</code> instead of <code>after_filter</code>? What&#39;s the version of Spree and the url requested via AJAX?"}], "answers": [{"tags": [], "owner": {"reputation": 482, "user_id": 4731823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c9696de4327c7e166fc59636877e9c?s=128&d=identicon&r=PG", "display_name": "CharlieC", "link": "https://stackoverflow.com/users/4731823/charliec"}, "is_accepted": true, "score": 1, "last_activity_date": 1436764986, "creation_date": 1436764986, "answer_id": 31375871, "question_id": 29389037, "link": "https://stackoverflow.com/questions/29389037/unable-to-set-access-control-allow-origin-for-spree-api/31375871#31375871", "title": "Unable to set &#39;Access-Control-Allow-Origin&#39; for Spree API", "body": "<p>You don't need anything in your application controller, rather you need a gem:</p>\n\n<p>Add <code>gem 'rack-cors', :require =&gt; 'rack/cors'</code> to your Gemfile, then <code>bundle install</code></p>\n\n<p>In <code>config/application.rb</code> configure rack-cors to accept requests from any origin. It belongs anywhere inside the Application class.</p>\n\n<pre><code>config.middleware.insert_before 0, \"Rack::Cors\" do\n  allow do\n    origins '*'\n    resource '*', :headers =&gt; :any, :methods =&gt; [:get, :post, :options]\n  end\nend\n</code></pre>\n\n<p><code>origins '*'</code> indicates you are allowing requests from any domain.  If you want to restrict to a specific domain (i.e. internally open an api, but keep it closed to external users), change <code>'*'</code> to the specific domain name.</p>\n\n<p>see <a href=\"https://github.com/cyu/rack-cors\" rel=\"nofollow\">https://github.com/cyu/rack-cors</a> for more details</p>\n"}], "owner": {"reputation": 453, "user_id": 2296797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dbe68433e0b0f885ee8616118b6ba035?s=128&d=identicon&r=PG", "display_name": "Vernon", "link": "https://stackoverflow.com/users/2296797/vernon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 31375871, "answer_count": 1, "score": 1, "last_activity_date": 1436764986, "creation_date": 1427885906, "question_id": 29389037, "link": "https://stackoverflow.com/questions/29389037/unable-to-set-access-control-allow-origin-for-spree-api", "title": "Unable to set &#39;Access-Control-Allow-Origin&#39; for Spree API", "body": "<p>Every time I'm trying to set the 'Access-Control-Allow-Origin' header for the Spree Commerce API, no header is being passed for Ajax calls.</p>\n\n<p>I'm currently extending the base_controller.rb:</p>\n\n<p>File: app/controllers/spree/api/base_controller_decorator.rb</p>\n\n<pre><code>after_filter :set_access_control_headers\n\ndef set_access_control_headers\n  headers['Access-Control-Allow-Origin'] = '*'\n  headers['Access-Control-Request-Method'] = '*'\nend\n</code></pre>\n\n<p>The header is added to the requests every time I view a JSON directly from the browser. However, no header is visible when making AJAX calls...</p>\n\n<p>Can anybody explain me how to do this? Is there a workaround for this issue?</p>\n"}, {"tags": ["ruby", "xml", "xml-parsing", "jruby", "assert"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427881167, "post_id": 29387207, "comment_id": 46952827, "body": "I didn&#39;t get your question ?"}, {"owner": {"reputation": 9, "user_id": 4734706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sH4At.jpg?s=128&g=1", "display_name": "Zaf", "link": "https://stackoverflow.com/users/4734706/zaf"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427886887, "post_id": 29387207, "comment_id": 46955959, "body": "how can I verify all [@names] present under &lt;recipe&gt;?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427887776, "post_id": 29387207, "comment_id": 46956511, "body": "<code>&#47;&#47;recipes&#47;recipe[@name]</code> will give all <code>recipe</code> which has @name present"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4734706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sH4At.jpg?s=128&g=1", "display_name": "Zaf", "link": "https://stackoverflow.com/users/4734706/zaf"}, "edited": false, "score": 0, "creation_date": 1427889377, "post_id": 29389580, "comment_id": 46957503, "body": "Thank You so much Martin."}], "tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": true, "score": 0, "last_activity_date": 1427887761, "creation_date": 1427887761, "answer_id": 29389580, "question_id": 29387207, "link": "https://stackoverflow.com/questions/29387207/how-can-i-parse-xml-using-ruby-for-a-duplicate-tag/29389580#29389580", "title": "How can I parse XML using ruby for a duplicate tag?", "body": "<p>Using Nokogiri:</p>\n\n<pre><code>require 'nokogiri'\n\nf = File.open(\"test.xml\")\ndoc = Nokogiri::XML(f)\n\ntags = []\n\ndoc.xpath(\"//recipe/@name\").each do |elem| # get all name of all recipes\n  tags &lt;&lt; elem.value\nend\n\np tags # show all tags\np tags == tags.uniq # are all tags unique?\n\nf.close\n</code></pre>\n\n<p>This output (using your sample):</p>\n\n<pre><code>[\"MPEG4w480f20h360AAC\", \"MP3\", \"j24\", \"j64\", \"j128\", \"j88\", \"j150\", \"hqPivot\"]\ntrue\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4734706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sH4At.jpg?s=128&g=1", "display_name": "Zaf", "link": "https://stackoverflow.com/users/4734706/zaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 29389580, "answer_count": 1, "score": 0, "last_activity_date": 1427887761, "creation_date": 1427880475, "last_edit_date": 1427880792, "question_id": 29387207, "link": "https://stackoverflow.com/questions/29387207/how-can-i-parse-xml-using-ruby-for-a-duplicate-tag", "title": "How can I parse XML using ruby for a duplicate tag?", "body": "<pre><code>   &lt;recipes&gt;\n  &lt;recipe name=\"MPEG4w480f20h360AAC\" mimeType=\"video/mp4\" width=\"480\" height=\"360\" /&gt;\n  &lt;recipe name=\"MP3\" mimeType=\"audio/mpeg\" /&gt;\n  &lt;recipe name=\"j24\" mimeType=\"image/jpeg\" width=\"24\" height=\"24\" /&gt;\n  &lt;recipe name=\"j64\" mimeType=\"image/jpeg\" width=\"64\" height=\"64\" /&gt;\n  &lt;recipe name=\"j128\" mimeType=\"image/jpeg\" width=\"128\" height=\"128\" /&gt;\n  &lt;recipe name=\"j88\" mimeType=\"image/jpeg\" height=\"88\" /&gt;\n  &lt;recipe name=\"j150\" mimeType=\"image/jpeg\" height=\"150\" /&gt;\n  &lt;recipe name=\"hqPivot\" mimeType=\"image/jpeg\" width=\"600\" /&gt;\n   &lt;/recipes&gt;\n</code></pre>\n\n<p>I am writing Ruby script to verify that the XML Structure. </p>\n\n<pre><code>assert(!XPath.match(xml, \"recipes/recipe[@name]\").empty?, \"Structure of xml incorrect\")\n</code></pre>\n\n<p>How can I verify all  one by one?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "utf-8", "ascii"], "comments": [{"owner": {"reputation": 311, "user_id": 4490275, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4hntABYQw7Y/AAAAAAAAAAI/AAAAAAAAAIk/AdWiJc0EO_E/photo.jpg?sz=128", "display_name": "thienkhoi tran", "link": "https://stackoverflow.com/users/4490275/thienkhoi-tran"}, "edited": false, "score": 0, "creation_date": 1427881038, "post_id": 29387177, "comment_id": 46952761, "body": "You can use notepad++ follow this topic <a href=\"http://stackoverflow.com/questions/7256049/notepad-converting-ansi-encoded-file-to-utf-8\" title=\"notepad converting ansi encoded file to utf 8\">stackoverflow.com/questions/7256049/&hellip;</a>"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1427883184, "post_id": 29387177, "comment_id": 46953911, "body": "if they are actually plain ascii (and not the horribly named ascii-8bit name that ruby gives to binary files) then there is no converting to do - ascii is a strict subset of utf-8. If not then more details would be helpful"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1427883286, "post_id": 29387177, "comment_id": 46953976, "body": "if I check it with linux i got this: <code>.&#47;app&#47;views&#47;super_admin&#47;log.html.erb  --  text&#47;plain; charset=us-ascii</code> ... I have some problems with my application: <code>incompatible character encodings: UTF-8 and ASCII-8BIT</code> and I thought it comes from the wrong encoding of the files?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1427890796, "post_id": 29387177, "comment_id": 46958420, "body": "You&#39;re going to have to narrow things down a little. For example the template could be fine but maybe you have a <code>&lt;%=</code> tag that is trying to insert binary data into it."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1427890902, "post_id": 29387177, "comment_id": 46958483, "body": "Also knowing what ruby / rails versions you are using would be useful"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1427891433, "post_id": 29387177, "comment_id": 46958847, "body": "I&#39;m running ruby 1.9 and rails 3.2.12 and i want to use this: <code>&lt;%= select_date() %&gt;</code>"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1427905348, "post_id": 29387177, "comment_id": 46968107, "body": "I&#39;ve installed ruby 2.0.0 -&gt; same problem"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1427974033, "post_id": 29387177, "comment_id": 46996498, "body": "have you more informations about: <code>maybe you have a &lt;%= tag that is trying to insert binary data into it</code>"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1427880403, "creation_date": 1427880403, "question_id": 29387177, "link": "https://stackoverflow.com/questions/29387177/how-to-convert-files-to-utf-8", "title": "How to convert files to UTF-8?", "body": "<p>I have a ruby on Rails application that has problems with utf-8 and us-ascii ... </p>\n\n<p>some of my files are utf-8 and other ascii ... </p>\n\n<p>is there a smart way to convert all ascii files in utf-8 files?</p>\n"}, {"tags": ["ruby", "postgresql", "chef-infra", "vagrant-windows"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1427893245, "post_id": 29387168, "comment_id": 46960018, "body": "Downvoted as 1) You don&#39;t tell wich version of chef you&#39;re using. 2) you&#39;re not saying if you&#39;re including the windows cookbook in your runlist 3) You don&#39;t even show wich exception you got (are you&#39;re hoping someone with divinatinon skills can guess it and give you THE answer ?). 4) I highly suspect your answer is <a href=\"https://docs.chef.io/resource_windows_package.html#attributes\" rel=\"nofollow noreferrer\">here</a> or in reading <a href=\"https://github.com/opscode-cookbooks/windows#windows_package\" rel=\"nofollow noreferrer\">this</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1428397403, "post_id": 29475720, "comment_id": 47134696, "body": "You should add a guard or the resource will try to run at each chef run. I edited your answer to format the code too."}], "tags": [], "owner": {"reputation": 11, "user_id": 2953364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f609be9d10c9f2668bf31d2d0c1481?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/2953364/mitesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1428397324, "last_edit_date": 1428397324, "creation_date": 1428339359, "answer_id": 29475720, "question_id": 29387168, "link": "https://stackoverflow.com/questions/29387168/ruby-chef-script-exe-file-format-installer-installation/29475720#29475720", "title": "Ruby chef script .exe file format installer installation", "body": "<p>You can use Batch resource -</p>\n\n<pre><code>batch \"Install Setup.exe \" do\n      code \"c:/temp/yourexe.exe\"\n      action :run      \nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3575890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be64e6d21c7349ff80743870effc47d2?s=128&d=identicon&r=PG", "display_name": "nalynsarte", "link": "https://stackoverflow.com/users/3575890/nalynsarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428397324, "creation_date": 1427880391, "question_id": 29387168, "link": "https://stackoverflow.com/questions/29387168/ruby-chef-script-exe-file-format-installer-installation", "title": "Ruby chef script .exe file format installer installation", "body": "<p>I am creating a ruby chef script (cookbooks recipe) to install Postgresql on my provisioned virtual machine on windows. I have the following scripts:</p>\n\n<pre>\npostgresql_location = \"#{Chef::Config['file_cache_path']}/#{node['postgresql']['filename']}\"\n\nwindows_package 'POSTGRESQL' do\n    action :install\n    source postgresql_location\n    installer_type :custom\nend\n</pre>\n\n<p>If I have an installer in .msi format, the installation will work fine. However, if the installer is in .exe format, an exception is thrown. </p>\n\n<p>Is there any missing script or statement that I need to add for it to work? Is there any libraries or built in recipes that I need to be included in my recipe?</p>\n\n<p>Appreciate any help.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby", "csv", "duplicates"], "comments": [{"owner": {"reputation": 23, "user_id": 4737421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405af890239ec648a6bb046029a5793f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya", "link": "https://stackoverflow.com/users/4737421/ramya"}, "edited": false, "score": 0, "creation_date": 1427880110, "post_id": 29387016, "comment_id": 46952280, "body": "The csv file is as below: Sno Scenario  Result  Description 1     Sce_1      Pass    Pass 2     Sce_2      Pass    Pass 1     Sce_1      Fail      Failed"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427898986, "post_id": 29387016, "comment_id": 46963854, "body": "You should use <code>uniq</code> rather than <code>uniq!</code>, as the latter returns <code>nil</code> if no change is made."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1427932588, "creation_date": 1427932588, "answer_id": 29402888, "question_id": 29387016, "link": "https://stackoverflow.com/questions/29387016/removing-duplicates-from-a-csv-file-using-ruby/29402888#29402888", "title": "Removing duplicates from a csv file using ruby", "body": "<p>For purposes of illustration, I've added a fourth row to your table:</p>\n\n<pre><code>require 'csv'\n\narr = CSV.read(\"x.csv\")\n  #=&gt; [[\"Sno\", \"Scenario\", \"Result\", \"Description\"],\n  #    [\"1\", \"Sce_1\", \"Pass\", \"Pass\"],\n  #    [\"2\", \"Sce_2\", \"Pass\", \"Pass\"],\n  #    [\"1\", \"Sec_1\", \"Fail\", \"Pass\"],\n  #    [\"3\", \"Sec_3\", \"Fail\", \"Pass\"]]\n</code></pre>\n\n<p>You can remove the unwanted elements as follows:</p>\n\n<pre><code>arr[1..-1].group_by(&amp;:first).map { |_,a|\n  (a.size &gt; 1) ? a.reject { |e| e[2]==\"Fail\" } : a }\n  #=&gt; [[[\"1\", \"Sce_1\", \"Pass\", \"Pass\"]],\n  #    [[\"2\", \"Sce_2\", \"Pass\", \"Pass\"]],\n  #    [[\"3\", \"Sec_3\", \"Fail\", \"Pass\"]]]\n</code></pre>\n\n<p>The steps:</p>\n\n<pre><code>h = arr[1..-1].group_by(&amp;:first)\n  #=&gt; {\"1\"=&gt;[[\"1\", \"Sce_1\", \"Pass\", \"Pass\"],\n  #          [\"1\", \"Sec_1\", \"Fail\", \"Pass\"]],\n  #    \"2\"=&gt;[[\"2\", \"Sce_2\", \"Pass\", \"Pass\"]],\n  #    \"3\"=&gt;[[\"3\", \"Sec_3\", \"Fail\", \"Pass\"]]}\n\nh.map { |_,a| (a.size &gt; 1) ? a.reject { |e| e[2]==\"Fail\" } : a }\n  #=&gt; [[[\"1\", \"Sce_1\", \"Pass\", \"Pass\"]],\n  #    [[\"2\", \"Sce_2\", \"Pass\", \"Pass\"]],\n  #    [[\"3\", \"Sec_3\", \"Fail\", \"Pass\"]]]\n</code></pre>\n\n<p>If, for a given <code>Sno/Scenario</code> there is at most one <code>\"Pass\"</code> row, you can use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow\">Enumerable#flat_map</a> instead:</p>\n\n<pre><code>a = h.flat_map { |_,a| (a.size &gt; 1) ? a.reject { |e| e[2]==\"Fail\" } : a }\n  #=&gt; [[\"1\", \"Sce_1\", \"Pass\", \"Pass\"],\n  #    [\"2\", \"Sce_2\", \"Pass\", \"Pass\"],\n  #    [\"3\", \"Sec_3\", \"Fail\", \"Pass\"]]\n</code></pre>\n\n<p>If you wish to add back the header row:</p>\n\n<pre><code>a.unshift(arr.first)\n  #=&gt; [[\"Sno\", \"Scenario\", \"Result\", \"Description\"],\n  #    [\"1\", \"Sce_1\", \"Pass\", \"Pass\"],\n  #    [\"2\", \"Sce_2\", \"Pass\", \"Pass\"],\n  #    [\"3\", \"Sec_3\", \"Fail\", \"Pass\"]]\n</code></pre>\n\n<p>If you want to exclude all \"Fail\" rows, even if there is no correponding \"Pass\" row (as for <code>Sno == \"3\"</code>), you can do this:</p>\n\n<pre><code>h.flat_map { |_,a| a.reject { |e| e[2]==\"Fail\" } }\n  #=&gt; [[\"1\", \"Sce_1\", \"Pass\", \"Pass\"],\n  #    [\"2\", \"Sce_2\", \"Pass\", \"Pass\"]] \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4737421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405af890239ec648a6bb046029a5793f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya", "link": "https://stackoverflow.com/users/4737421/ramya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 1, "accepted_answer_id": 29402888, "answer_count": 1, "score": 1, "last_activity_date": 1427932588, "creation_date": 1427879873, "last_edit_date": 1427883011, "question_id": 29387016, "link": "https://stackoverflow.com/questions/29387016/removing-duplicates-from-a-csv-file-using-ruby", "title": "Removing duplicates from a csv file using ruby", "body": "<p>I have a csv file with the following data</p>\n\n<pre><code>Sno Scenario    Result  Description\n1   Sce_1   Pass    Pass\n2   Sce_2   Pass    Pass\n1   Sce_1   Fail    Failed\n</code></pre>\n\n<p>In this scenario I have 2 same serial numbers. I would like to see only the row which has result <code>Pass</code> and remove the rest of the duplicate rows.</p>\n\n<p>I have tried the following but still am not able to get it!</p>\n\n<pre><code>CSV.open('New.csv', 'w') do |csv|\n   CSV.read('Merged_files.csv').uniq!{|x| x[1]}.each do |row|\n       csv &lt;&lt; row\n   end\nend\n</code></pre>\n\n<p>Can anyone help me in getting the logic!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "iframe", "twitter"], "comments": [{"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427881546, "post_id": 29386991, "comment_id": 46953020, "body": "where did you put that link? application.html.erb ?, is it inside some if condition ? and your iframe got replaced with an anchor tag,, waa.. ::P"}, {"owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427882178, "post_id": 29386991, "comment_id": 46953387, "body": "@argentum47  &lt;% if current_user %&gt;     &lt;%= render partial: &#39;shared/invite&#39; %&gt;   &lt;% end %&gt; This is the code/condition inside the application.html.erb"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427882375, "post_id": 29386991, "comment_id": 46953482, "body": "so possibly the current_user isn&#39;t present in the next page you visit.. and I don&#39;t know how you have implemented current_user"}, {"owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427882632, "post_id": 29386991, "comment_id": 46953615, "body": "firstly current_user is present as I checked it. secondly the entire partial should not be called if the condition does not fulfill"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427883006, "post_id": 29386991, "comment_id": 46953821, "body": "I see an iframe and an anchor tag, are they seperate templates? which one gets removed?"}, {"owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427883115, "post_id": 29386991, "comment_id": 46953876, "body": "the iframe gets removed that brings up the error"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427883269, "post_id": 29386991, "comment_id": 46953965, "body": "code seems fine, check if you have turbollinks on. I can&#39;t help more than this, because I have never used it myslef. try using some tested stuff.. <a href=\"https://github.com/iffyuva/social-buttons\" rel=\"nofollow noreferrer\">github.com/iffyuva/social-buttons</a>"}, {"owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427890604, "post_id": 29386991, "comment_id": 46958280, "body": "@argentum47 thanks for that turbolink hint . It resolved the issue."}], "answers": [{"comments": [{"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427893914, "post_id": 29390591, "comment_id": 46960463, "body": "I assume you know the do&#39;s or don&#39;ts of turbolinks. if not I feel its better to remove that forever.. :P or selectively apply it..."}], "tags": [], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "is_accepted": true, "score": 1, "last_activity_date": 1427890568, "creation_date": 1427890568, "answer_id": 29390591, "question_id": 29386991, "link": "https://stackoverflow.com/questions/29386991/tweet-button-disappears-on-navigating-through-link-rails-4-twitter/29390591#29390591", "title": "Tweet button disappears on navigating through link rails 4 twitter", "body": "<p>It was basically a turbolink issue. My javascript was not loaded.\nThose links on which I did want javascript to work I just added this line of code after link_to tag </p>\n\n<pre><code>data: {no_turbolink: true}\n</code></pre>\n"}], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 29390591, "answer_count": 1, "score": 1, "last_activity_date": 1581313632, "creation_date": 1427879799, "last_edit_date": 1581313632, "question_id": 29386991, "link": "https://stackoverflow.com/questions/29386991/tweet-button-disappears-on-navigating-through-link-rails-4-twitter", "title": "Tweet button disappears on navigating through link rails 4 twitter", "body": "<p>I have added a tweet button in my app that appears when I land on a page initially or refresh the page but doesn't display the button when I navigate through a link. It only displays the text written within a tag. I can see the difference in the two cases through inspect element.</p>\n\n<pre><code>&lt;a href=\"https://twitter.com/share\" class=\"twitter-share-button\" data-url=\"http://example.com\" data-via=\"sometext\" data-size=\"large\"&gt;Tweet&lt;/a&gt;\n&lt;script&gt;!function (d, s, id) {\n  var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';\n    if (!d.getElementById(id)) {\n    js = d.createElement(s);\n    js.id = id;\n    js.src = p + '://platform.twitter.com/widgets.js';\n    fjs.parentNode.insertBefore(js, fjs);\n  }\n}(document, 'script', 'twitter-wjs');&lt;/script&gt;\n</code></pre>\n\n<p>I have copied the above code from this link <a href=\"https://dev.twitter.com/web/tweet-button\" rel=\"nofollow\">https://dev.twitter.com/web/tweet-button</a></p>\n\n<p>The difference in the two cases:</p>\n\n<p>Case 1: When the button appears:</p>\n\n<pre><code>&lt;iframe id=\"twitter-widget-0\" scrolling=\"no\" frameborder=\"0\" allowtransparency=\"true\" src=\"http://platform.twitter.com/widgets/tweet_button.7d9dd43d4f18b1bb51cc9d8f0997995e.en.html#_=1427878870272&amp;amp;count=horizontal&amp;amp;dnt=false&amp;amp;id=twitter-widget-0&amp;amp;lang=en&amp;amp;original_referer=http%3A%2F%2Flocalhost%3A3000%2Fusers%2Fedit&amp;amp;size=l&amp;amp;text=Draft%20Picks&amp;amp;url=http%3A%2F%2Fexample.com&amp;amp;via=sometext\" class=\"twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal\" title=\"Twitter Tweet Button\" data-twttr-rendered=\"true\" style=\"width: 140px; height: 28px;\"&gt;&lt;/iframe&gt;\n&lt;script&gt;!function (d, s, id) {\n  var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';\n    if (!d.getElementById(id)) {\n    js = d.createElement(s);\n    js.id = id;\n    js.src = p + '://platform.twitter.com/widgets.js';\n    fjs.parentNode.insertBefore(js, fjs);\n  }\n}(document, 'script', 'twitter-wjs');&lt;/script&gt;\n</code></pre>\n\n<p>Case 2: When the button disappears</p>\n\n<pre><code>&lt;a href=\"https://twitter.com/share\" class=\"twitter-share-button\" data-url=\"http://example.com\" data-via=\"sometext\" data-size=\"large\"&gt;Tweet&lt;/a&gt;\n&lt;script&gt;!function (d, s, id) {\n  var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';\n  if (!d.getElementById(id)) {\n    js = d.createElement(s);\n    js.id = id;\n    js.src = p + '://platform.twitter.com/widgets.js';\n    fjs.parentNode.insertBefore(js, fjs);\n  }\n}(document, 'script', 'twitter-wjs');&lt;/script&gt;\n</code></pre>\n\n<p>I will be really thankful if someone figure out how is iframe displayed or removed over here or a proper solution to this. A very many thanks in advance!!</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1427885249, "post_id": 29386889, "comment_id": 46955003, "body": "First, where you initialize <code>@url</code>, second - what is consist in the <code>@cont</code> ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428170954, "post_id": 29386889, "comment_id": 47065570, "body": "&quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1428343193, "post_id": 29450062, "comment_id": 47114300, "body": "VTC? Dunno what that is. Virtual Trouble Coaxing?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1428343343, "post_id": 29450062, "comment_id": 47114385, "body": "I voted to close initially, and then the question bugged me enough I had to say something. I still think the question is off-topic because it&#39;s not runnable and doesn&#39;t have sufficient info for us to help the OP&#39;s question, but at least the OP has a better shot at writing something that is maintainable."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1428343454, "post_id": 29450062, "comment_id": 47114445, "body": "Fair enough :)  It showed up in the review queue, which how I saw it.  Great answer, by the way."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1428343540, "post_id": 29450062, "comment_id": 47114483, "body": "Thanks. I go nuts when I see code jumping in and out of what should be two chunks of logic. Makes my head hurt."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1428172585, "creation_date": 1428172585, "answer_id": 29450062, "question_id": 29386889, "link": "https://stackoverflow.com/questions/29386889/foreach-loop-in-xml-generator-not-breaking/29450062#29450062", "title": "Foreach loop in XML generator not breaking", "body": "<p>In general I think how you're going about trying to generate the XML is confused. Don't convolute your code any more than necessary; Instead of starting to generate some XML then aborting it inside the block because you can't find the page you want, grab the pages you want first, <em>then</em> start processing.</p>\n\n<p>I'd move the <code>begin</code>/<code>rescue</code> block outside the XML generation. Its existence inside the XML generation block results in poor logic and questionable practices of using <code>next</code> and <code>break</code>. Instead I'd recommend something like this untested code:</p>\n\n<pre><code>@main = []\n@cont.each do |pr|\n  begin\n    @main &lt;&lt; Nokogiri::HTML(\n      open(@url + pr['href'])\n    )\n  rescue\n    puts 'rescue'\n    next\n  end\nend\n\nbuilder = Nokogiri::XML::Builder.new do |xml|\n  xml.root {\n    xml.products {\n      @main.each do |m|\n        xml.product {\n          xml.id_ m.at('id').text\n          xml.name m.at('name').text\n        }\n      end\n    }\n  }\nend\nputs builder.to_xml\n</code></pre>\n\n<p>Which makes it easy to see that the code is keying off being able to retrieve a page.</p>\n\n<p>This code is untested because we have no idea what your input values are or what your output should look like. Having valid input, expected output and a working example of your code that demonstrates the problem is essential if you want help debugging a problem with your code.</p>\n\n<p>The use of <code>@url + pr['href']</code> isn't generally a good idea. Instead use the URI class to build up the URL for you. URI handles encoding and ensures the URI is valid.</p>\n"}], "owner": {"reputation": 87, "user_id": 3434212, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5c1046d0fb7c3ab55d59c82b9796823c?s=128&d=identicon&r=PG&f=1", "display_name": "user3434212", "link": "https://stackoverflow.com/users/3434212/user3434212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428172585, "creation_date": 1427879489, "last_edit_date": 1428106917, "question_id": 29386889, "link": "https://stackoverflow.com/questions/29386889/foreach-loop-in-xml-generator-not-breaking", "title": "Foreach loop in XML generator not breaking", "body": "<p>I am trying to generate XML, but the loop isn't breaking. Here is a part of the code: </p>\n\n<pre><code>@key = 0\n@cont.each do |pr|\n  xml.product {\n    @key += 1\n    puts @key.to_s\n    begin\n      @main = Nokogiri::HTML(open(@url+pr['href'], \"User-Agent\" =&gt; \"Ruby/#{RUBY_VERSION}\",\"From\" =&gt; \"foo@bar.invalid\", \"Referer\" =&gt; \"http://www.ruby-lang.org/\"))\n    rescue\n      puts \"rescue\"\n      next\n    end\n    puts pr['href']\n    puts @key.to_s\n    break  //this break doesn't work\n    #something else\n  }\nend\n</code></pre>\n\n<p>Most interesting is that in the final generated XML file, <code>break</code> worked. The file contains only one product, but on the console <code>@key</code> was printed fully, which means the <code>foreach</code> loop doesn't break.</p>\n\n<p>Could it be a Nokogiri XML-specific error, because of open brackets in the head of the loop?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 2, "creation_date": 1427878356, "post_id": 29386508, "comment_id": 46951225, "body": "First do <code>@sentences_to_extract = @saved_videos.flat_map(&amp;:sentences)</code>, and then <code>@sentences_to_extract.uniq { |a| a.first[:keyword] }</code> is what you want.."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427878382, "post_id": 29386508, "comment_id": 46951239, "body": "<code>Array#uniq</code> exist, but not <code>uniq_by</code>.. <b>Note:</b> <code>[Sentence.id: 1, keyword: &#39;hello&#39;]</code> is basically <code>[{Sentence.id: 1, keyword: &#39;hello&#39;}]</code>"}, {"owner": {"reputation": 806, "user_id": 2057928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d54eb9311d61feb3e8ba4b597ea71?s=128&d=identicon&r=PG", "display_name": "RPinel", "link": "https://stackoverflow.com/users/2057928/rpinel"}, "edited": false, "score": 0, "creation_date": 1427892118, "post_id": 29386508, "comment_id": 46959282, "body": "What&#39;s your Rails or ActiveRecord version? Do you just need the <code>keyword</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 590, "user_id": 1902428, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Kxrgr.png?s=128&g=1", "display_name": "Jonathan_W", "link": "https://stackoverflow.com/users/1902428/jonathan-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1427911312, "last_edit_date": 1427911312, "creation_date": 1427911070, "answer_id": 29397609, "question_id": 29386508, "link": "https://stackoverflow.com/questions/29386508/rails-using-uniq-by-method-with-nested-records/29397609#29397609", "title": "Rails using uniq_by method with nested records", "body": "<p>With thanks to @ArupRakshit this is solved: I need to <em>flatten</em> the mapped arrays by one level, achieved in a one liner with <a href=\"http://martinfowler.com/articles/collection-pipeline/flat-map.html\" rel=\"nofollow\"><em>flat_map</em></a>.</p>\n\n<p>Working code:</p>\n\n<pre><code>Video.all\n     .is_saved.flat_map(&amp;:sentences)\n     .uniq { |s| s.keyword.downcase }\n</code></pre>\n"}], "owner": {"reputation": 590, "user_id": 1902428, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Kxrgr.png?s=128&g=1", "display_name": "Jonathan_W", "link": "https://stackoverflow.com/users/1902428/jonathan-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 686, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427911312, "creation_date": 1427878222, "question_id": 29386508, "link": "https://stackoverflow.com/questions/29386508/rails-using-uniq-by-method-with-nested-records", "title": "Rails using uniq_by method with nested records", "body": "<p>I have a CollectionProxy of nested records:</p>\n\n<pre><code>@saved_videos = Video.all.is_saved\n@sentences_to_extract = @saved_videos.map(&amp;:sentences)\n</code></pre>\n\n<p>Each video has many sentences, and each sentence has one keyword, eg </p>\n\n<pre><code>[\n  [Video.id: 1, \n    sentences:\n      [Sentence.id: 1, keyword: 'hello'],\n      [Sentence.id: 2, keyword: 'friend']\n    ],\n  [Video.id: 2, \n    sentences:\n      [Sentence.id: 3, keyword: 'hello'],\n      [Sentence.id: 4, keyword: 'mum']\n    ]\n]\n</code></pre>\n\n<p>When I try:</p>\n\n<pre><code>@sentences_to_extract.uniq_by(&amp;:keyword)\n</code></pre>\n\n<p>it returns </p>\n\n<pre><code>undefined method `uniq_by' for #&lt;Array:0x000001031f7968&gt; \n</code></pre>\n\n<p>What is the best way to return a single collection of sentences with unique keywords, or in more general terms, to get a selection of nested records by a particular unique attribute?</p>\n"}, {"tags": ["ruby", "class", "attributes"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1427878135, "post_id": 29386471, "comment_id": 46951082, "body": "do you know <code>attr_reader</code> method in Ruby ? Use it like <code>attr_reader :x, :y, ..</code>"}, {"owner": {"reputation": 307, "user_id": 3339744, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f3575d3945f08493cead822d0c2b143?s=128&d=identicon&r=PG&f=1", "display_name": "shikhar.ja", "link": "https://stackoverflow.com/users/3339744/shikhar-ja"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427878320, "post_id": 29386471, "comment_id": 46951201, "body": "There are 20+ attributes, how do I make them all public, without typing all of them?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1427887052, "post_id": 29386471, "comment_id": 46956054, "body": "So, you want Ruby to read your mind? I don&#39;t get it. How is Ruby supposed to know what the names of those attributes are if you don&#39;t tell it?"}, {"owner": {"reputation": 307, "user_id": 3339744, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f3575d3945f08493cead822d0c2b143?s=128&d=identicon&r=PG&f=1", "display_name": "shikhar.ja", "link": "https://stackoverflow.com/users/3339744/shikhar-ja"}, "edited": false, "score": 0, "creation_date": 1427890375, "post_id": 29386471, "comment_id": 46958121, "body": "Would you write all those attributes yourself? Or prefer a clever way to automate this task. I&#39;d go with automating this task. One answer posted below did the job but the author has removed it so I mark it any more. It had a clever approach, that is what I was looking for."}], "answers": [{"tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": true, "score": 1, "last_activity_date": 1486309937, "last_edit_date": 1495542813, "creation_date": 1427900723, "answer_id": 29394340, "question_id": 29386471, "link": "https://stackoverflow.com/questions/29386471/how-do-you-make-all-attributes-public-in-ruby-class/29394340#29394340", "title": "How do you make all attributes public in ruby class", "body": "<p>You can do this using <code>method_missing</code>.  <code>method_missing</code> is called whenever someone tries to call a method that your class doesn't know how to respond to.</p>\n\n<pre><code>class Foo\n\n  def initialize\n    @a = 1\n    @b = 2\n    @c = 3\n  end\n\n  def respond_to_missing?(name)\n    super || has_attribute?(name)\n  end\n\n  def method_missing(name, *args)\n    if has_attribute?(name)\n      instance_variable_get(\"@#{name}\")\n    else   \n      super\n    end\n  end\n\n  private\n\n  def has_attribute?(name)\n    instance_variable_defined?(\"@#{name}\")\n  end\n\nend\n</code></pre>\n\n<p>Here's what it looks like when you use it</p>\n\n<pre><code>foo = Foo.new\np foo.a    # =&gt; 1\np foo.b    # =&gt; 2\np foo.c    # =&gt; 3\np foo.d    # =&gt; method_missing error\n</code></pre>\n\n<p><em>Note</em>: For Ruby earlier than 1.9.2: <a href=\"https://stackoverflow.com/a/20731357/238886\">Override <code>respond_to?</code> instead of <code>respond_to_missing?</code></a></p>\n"}], "owner": {"reputation": 307, "user_id": 3339744, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f3575d3945f08493cead822d0c2b143?s=128&d=identicon&r=PG&f=1", "display_name": "shikhar.ja", "link": "https://stackoverflow.com/users/3339744/shikhar-ja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 29394340, "answer_count": 1, "score": -1, "last_activity_date": 1486309937, "creation_date": 1427878082, "last_edit_date": 1427878473, "question_id": 29386471, "link": "https://stackoverflow.com/questions/29386471/how-do-you-make-all-attributes-public-in-ruby-class", "title": "How do you make all attributes public in ruby class", "body": "<p>I have a class with 20+ attributes, I want each of them to be publicly readable or if not that then public.</p>\n\n<p>I cannot seem to find any data relevant to this. Can anyone help me here please? </p>\n\n<p><strong>I want to make all of them public without having to type all 20+ attributes with attr_reader.</strong></p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "twitter-bootstrap", "bootstrap-modal"], "answers": [{"comments": [{"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427874611, "post_id": 29385377, "comment_id": 46949224, "body": "I added it but . It is not displaying properly. Do I need to add the id in modal body as well?"}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "reply_to_user": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427874735, "post_id": 29385377, "comment_id": 46949282, "body": "Yes, remove the id from this portion : <code>&lt;div id=&quot;user_form&quot; &gt;   &lt;!--[form:user]--&gt;</code>. Id should always be unique for every dom element, do not use one id twice."}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427874971, "post_id": 29385377, "comment_id": 46949388, "body": "You&#39;re talking about which file ? my _form.html(which contains my edit form) or my modal file(which contains modal code)  When I remove the &#39;**&lt;div id=&quot;user_form&quot;&gt; ** then it does nothing. Not responding."}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427876073, "post_id": 29385377, "comment_id": 46949956, "body": "Thanks for the updated answer. Unfortunately, it it throwing different errors on the form. When I reload my admin.html page I am getting the similar error for each form field. <code>undefined local variable or method </code>f&#39; for   #&lt;#&lt;Class:0x00000017b400e8&gt;` ERROR LINE: <code>&lt;p&gt;&lt;%= f.text_field :login, :required =&gt; true, :size =&gt; 25  %&gt;&lt;&#47;p&gt;</code> <code>undefined local variable or method </code>f&#39; for    [firstname]`"}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427876528, "post_id": 29385377, "comment_id": 46950193, "body": "Can you help me with this. I think the form is being loaded may be  thats way it throwing error. How can I fix this?"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427877536, "post_id": 29385377, "comment_id": 46950712, "body": "render partial: &#39;form&#39; should be <code>render &#39;form&#39;, f: f</code>"}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "reply_to_user": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427878413, "post_id": 29385377, "comment_id": 46951255, "body": "@Prabhakar, where is your <code>form_for</code> tag? Please paste the complete form here."}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427881877, "post_id": 29385377, "comment_id": 46953191, "body": "@argentum47 the error is same with f: f. <code>&lt;%= render :partial =&gt; &#39;form&#39;, :locals =&gt; { :f =&gt; f } %&gt;</code>"}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427881984, "post_id": 29385377, "comment_id": 46953272, "body": "@SharvyAhmed it has no form_for tag in mycode. I pasted the full form only."}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "reply_to_user": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427882089, "post_id": 29385377, "comment_id": 46953336, "body": "@Prabhakar, you missed the form helper tag, you need to add form helper tag in your form partial."}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427882481, "post_id": 29385377, "comment_id": 46953538, "body": "ops, I didn&#39;t notice... where is your form_for ? :D you should be careful... in your _form.html.erb"}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1427884549, "post_id": 29385377, "comment_id": 46954622, "body": "@SharvyAhmed, I am using STI(Single table inheritance).  The _form partails being rendered from some other partial. I have form_for there.  I have it in my new.html.erb <code>&lt;%= labelled_form_for @reseller do |f| %&gt;     &lt;%= render :partial =&gt; &#39;form&#39;, :locals =&gt; { :f =&gt; f } %&gt;</code>"}], "tags": [], "owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1427875512, "last_edit_date": 1427875512, "creation_date": 1427874136, "answer_id": 29385377, "question_id": 29385215, "link": "https://stackoverflow.com/questions/29385215/bootstrap-modal-edit-form-in-ruby-on-rails/29385377#29385377", "title": "Bootstrap modal edit form in Ruby on Rails", "body": "<p>Your link tag was missing <code>data-target</code> attribute:</p>\n\n<pre><code>&lt;%= link_to \"&amp;nbsp;&amp;nbsp;&lt;i class='fa fa-pencil'&gt;&lt;/i&gt;\".html_safe, edit_reseller_path(reseller.id) ,title: \"Edit Profile\", \"data-toggle\" =&gt; \"modal\",  \"data-dismiss=\" =&gt; \"modal\", \"data-target\" =&gt; \"#user_form\"%&gt;\n</code></pre>\n\n<p><strong>Rails 4</strong>:</p>\n\n<pre><code>&lt;%= link_to \"&amp;nbsp;&amp;nbsp;&lt;i class='fa fa-pencil'&gt;&lt;/i&gt;\".html_safe, edit_reseller_path(reseller.id), title: \"Edit Profile\", data: { toggle: 'modal', dismiss: 'modal', target: '#user_form'} %&gt;\n</code></pre>\n\n<p>admin.html.erb</p>\n\n<pre><code>&lt;div id=\"user_form\" class=\"modal fade \" tabindex=\"-1\" role=\"dialog\" style=\"display: none;\"&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-body \"&gt;\n        &lt;%= render partial: 'form' %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer\"&gt;\n        &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;close&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;span style=\"float: right\"&gt;\n  &lt;%= link_to \"&amp;nbsp;&amp;nbsp;&lt;i class='fa fa-pencil'&gt;&lt;/i&gt;\".html_safe, edit_reseller_path(reseller.id), title: \"Edit Profile\", data: { toggle: 'modal', dismiss: 'modal', target: '#user_form'} %&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;div id=\"some_id\" &gt;\n  &lt;div class=\"splitcontentleft\"&gt;\n    &lt;fieldset class=\"box tabular\"&gt;\n      &lt;legend&gt;&lt;%=l(:label_information_plural)%&gt;&lt;/legend&gt;\n      &lt;p&gt;&lt;%= f.text_field :login, :required =&gt; true, :size =&gt; 25  %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;label for='reseller[firstname]'&gt;Name&lt;span class=\"required\"&gt; *&lt;/span&gt;&lt;/label&gt;\n        &lt;%= f.text_field :firstname, :required =&gt; true, :no_label =&gt; true %&gt;\n      &lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_field :mail, :required =&gt; true %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_field :contact_number%&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.select :language, lang_options_for_select %&gt;&lt;/p&gt;\n    &lt;/fieldset&gt;\n  &lt;/div&gt;\n  &lt;div class=\"splitcontentright\"&gt;\n    &lt;%= image_tag @reseller.avatar.url(:medium) unless @reseller.avatar.url(:medium) == \"/avatars/medium/missing.png\"%&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div style=\"clear:left;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><em>Friendly advice: try not to use inline style.</em></p>\n"}], "owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1697, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1427875512, "creation_date": 1427873552, "last_edit_date": 1427875187, "question_id": 29385215, "link": "https://stackoverflow.com/questions/29385215/bootstrap-modal-edit-form-in-ruby-on-rails", "title": "Bootstrap modal edit form in Ruby on Rails", "body": "<p>I have a _form and I have to display it using bootstrap modal on the same page.</p>\n\n<p>I've the admin.html code(where I have my modal code).</p>\n\n<p><em>admin.html.erb</em></p>\n\n<pre><code>&lt;div id=\"user_form\" class=\"modal fade \" tabindex=\"-1\" role=\"dialog\" style=\"display: none;\"&gt;\n    &lt;div class=\"modal-dialog\"&gt;\n      &lt;div class=\"modal-content\"&gt;\n        &lt;div class=\"modal-body \"&gt;\n\n          &lt;!--  I want to display the _form.html.erb here to edit the details  in the modal\n           when the user clicks on link_to (which goes to the edit_reseller_path(reseller.id) path )--&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;close&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt; \n    &lt;/div&gt;\n    &lt;span style=\"float: right\"&gt;\n      &lt;%= link_to \"&amp;nbsp;&amp;nbsp;&lt;i class='fa fa-pencil'&gt;&lt;/i&gt;\".html_safe, edit_reseller_path(reseller.id) ,title: \"Edit Profile\", \"data-toggle\" =&gt; \"modal\",  \"data-dismiss=\" =&gt; \"modal\" \"data-target\" =&gt; \"#user_form\" %&gt;\n    &lt;/span&gt;\n</code></pre>\n\n<p>And the form which I have to edit with bootstrap modal is this.</p>\n\n<p><em>_form.html.erb</em></p>\n\n<pre><code>&lt;div id=\"user_form\" &gt;\n  &lt;!--[form:user]--&gt;\n  &lt;div class=\"splitcontentleft\"&gt;\n    &lt;fieldset class=\"box tabular\"&gt;\n      &lt;legend&gt;&lt;%=l(:label_information_plural)%&gt;&lt;/legend&gt;\n      &lt;p&gt;&lt;%= f.text_field :login, :required =&gt; true, :size =&gt; 25  %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;label for='reseller[firstname]'&gt;Name&lt;span class=\"required\"&gt; *&lt;/span&gt;&lt;/label&gt;\n        &lt;%= f.text_field :firstname, :required =&gt; true, :no_label =&gt; true %&gt;\n      &lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_field :mail, :required =&gt; true %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_field :contact_number%&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.select :language, lang_options_for_select %&gt;&lt;/p&gt;\n\n      &lt;!-- Some logic code goes here --&gt;\n  &lt;/div&gt;\n  &lt;div class=\"splitcontentright\"&gt;\n    &lt;%= image_tag @reseller.avatar.url(:medium) unless @reseller.avatar.url(:medium) == \"/avatars/medium/missing.png\"%&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div style=\"clear:left;\"&gt;&lt;/div&gt;\n&lt;!--[eoform:user]--&gt;\n</code></pre>\n\n<p>Currently, when I click on link_to pencil icon it is redirecting to the new page to edit. But I want to edit that on the same page using modal. How can I do that? Please help me. I tried by keeping track of the form id in modals and form but not working.</p>\n"}, {"tags": ["ruby", "arrays", "list", "automation", "watir"], "comments": [{"owner": {"reputation": 17, "user_id": 4732692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/badbdb6d89f1bcbf86dd4f62ed5b8b38?s=128&d=identicon&r=PG&f=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/4732692/ahsan"}, "edited": false, "score": 0, "creation_date": 1427870855, "post_id": 29384478, "comment_id": 46947336, "body": "HTML:&lt;div class=&quot;ngCellText col1 colt1&quot; ng-class=&quot;col.colIndex()&quot;&gt;&lt;span ng-cell-text=&quot;&quot; class=&quot;ng-binding&quot;&gt;Our Equipment&lt;/span&gt;&lt;/div&gt;"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1427872047, "post_id": 29384478, "comment_id": 46947880, "body": "add error message please"}, {"owner": {"reputation": 17, "user_id": 4732692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/badbdb6d89f1bcbf86dd4f62ed5b8b38?s=128&d=identicon&r=PG&f=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/4732692/ahsan"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1427872129, "post_id": 29384478, "comment_id": 46947926, "body": "Hi Alex,  I just figured it out, now i got to put a for loop and hopefully walla!  but just incase you want to know the message was:     #&lt;Watir::Option:0x00000002fdefd8&gt;    Then job should be no longer editable # features/step_definitions/LockedJobs rb:130  the code i used to fix it is: \tactivityList = Array.new \tbrowser.span(:xpath,&#39;//*[@id=&quot;npTime&quot;]/div[3]/div/div[2]/di&zwnj;&#8203;v/div/div[2]/div[2]/&zwnj;&#8203;div/div/div/span&#39;).w&zwnj;&#8203;hen_present.click \tactivityList = @browser.select_list(:index,0).select_value(&quot;0&quot;)     puts activityList"}], "owner": {"reputation": 17, "user_id": 4732692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/badbdb6d89f1bcbf86dd4f62ed5b8b38?s=128&d=identicon&r=PG&f=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/4732692/ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1427892439, "creation_date": 1427870743, "last_edit_date": 1427892439, "question_id": 29384478, "link": "https://stackoverflow.com/questions/29384478/watir-webdriver-putting-a-list-into-an-array", "title": "Watir-Webdriver - Putting a list into an array", "body": "<p>I am trying to compare 2 dropdown lists for automation but I keep getting an error.</p>\n\n<p>The HTML code:</p>\n\n<pre><code>&lt;div class=\"ngCellText col1 colt1\" ng-class=\"col.colIndex()\"&gt;&lt;span ng-cell-text=\"\" class=\"ng-binding\"&gt;Our Equipment&lt;/span&gt;&lt;/div&gt;\n</code></pre>\n\n<p>My Watir code:</p>\n\n<pre><code>@activityList = Array.new\n@activityList = @browser.select_list(:xpath,'//*[@id=\"aBreakDown\"]/div[3]/div[3]/div/div[2]/div/div/div[4]/div[2]/div/div/div/span').option\nputs @activityList\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1427873255, "post_id": 29384403, "comment_id": 46948514, "body": "In regards to the problem itself, what Heroku stack and web server are you running? There have been mentions about possible memory issues with <code>cedar-14</code> running <code>unicorn</code>. See: <a href=\"http://stackoverflow.com/questions/29208169/switching-to-heroku-cedar-14-leads-to-continous-increase-in-memory-consumption\" title=\"switching to heroku cedar 14 leads to continous increase in memory consumption\">stackoverflow.com/questions/29208169/&hellip;</a>"}, {"owner": {"reputation": 3205, "user_id": 370858, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1700551a025974d665ce034f1b1aec4f?s=128&d=identicon&r=PG", "display_name": "Stussa", "link": "https://stackoverflow.com/users/370858/stussa"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1427906891, "post_id": 29384403, "comment_id": 46969058, "body": "@Drenmi Running <code>cedar-14</code> with <code>passenger</code> and <code>ruby 2.2.1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3205, "user_id": 370858, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1700551a025974d665ce034f1b1aec4f?s=128&d=identicon&r=PG", "display_name": "Stussa", "link": "https://stackoverflow.com/users/370858/stussa"}, "edited": false, "score": 1, "creation_date": 1427873301, "post_id": 29384447, "comment_id": 46948538, "body": "Thanks for the response. I&#39;ve got the <code>?pp=profile-gc</code> report up now, but I&#39;m not sure how to read it.  Which metric indicates how many objects were leaked?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 3205, "user_id": 370858, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1700551a025974d665ce034f1b1aec4f?s=128&d=identicon&r=PG", "display_name": "Stussa", "link": "https://stackoverflow.com/users/370858/stussa"}, "edited": false, "score": 0, "creation_date": 1427873359, "post_id": 29384447, "comment_id": 46948574, "body": "Well if the number of live objects for a class keeps rising then you&#39;re probably leaking instances of that class"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 0, "last_activity_date": 1427870635, "creation_date": 1427870635, "answer_id": 29384447, "question_id": 29384403, "link": "https://stackoverflow.com/questions/29384403/profile-memory-between-requests-in-rails-to-find-leaks/29384447#29384447", "title": "Profile Memory Between Requests in Rails to Find Leaks", "body": "<p>The rack-mini-profiler gem allows you to get a count of objects in memory by class (and allocated by the current request). It also dumps some of the most frequent objects such as strings - I've found it very helpful for diagnosing memory leaks.</p>\n"}], "owner": {"reputation": 3205, "user_id": 370858, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1700551a025974d665ce034f1b1aec4f?s=128&d=identicon&r=PG", "display_name": "Stussa", "link": "https://stackoverflow.com/users/370858/stussa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "accepted_answer_id": 29384447, "answer_count": 1, "score": 3, "last_activity_date": 1427870635, "creation_date": 1427870464, "question_id": 29384403, "link": "https://stackoverflow.com/questions/29384403/profile-memory-between-requests-in-rails-to-find-leaks", "title": "Profile Memory Between Requests in Rails to Find Leaks", "body": "<p>I've got a <strong>Rails 4.2.1</strong> app that has a memory leak. I'm hosting on Heroku and when in production my memory continues to grow until the server starts paging. I'm trying to source out the leak - and wanted to know if there is a way I can debug the memory allocations still active after a request / response. If I can get that, I can <code>curl</code> my pages a few times to warm any globals then <code>siege</code> to see what memory is leaking. Any way to do  this?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1427866811, "post_id": 29383372, "comment_id": 46945856, "body": "If this is a JavaScript question, then write so from the beginning. Why did you make it look like a Ruby question?"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 1879551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7d4977879c3910ad547d29ff47b1c92?s=128&d=identicon&r=PG", "display_name": "zilla", "link": "https://stackoverflow.com/users/1879551/zilla"}, "edited": false, "score": 0, "creation_date": 1427866785, "post_id": 29383398, "comment_id": 46945852, "body": "This worked well in Ruby, but I&#39;m struggling with the JS version... Can you take a look at the code above?"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 3, "last_activity_date": 1427868106, "last_edit_date": 1427868106, "creation_date": 1427865858, "answer_id": 29383398, "question_id": 29383372, "link": "https://stackoverflow.com/questions/29383372/rolling-regexp-in-ruby/29383398#29383398", "title": "Rolling Regexp in Ruby", "body": "<p>Use a <code>lookahead</code> instead of <code>capturing</code> string.</p>\n\n<pre><code>(?=aba)\n</code></pre>\n\n<p>Try this.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/sJ9gM7/35\" rel=\"nofollow\">https://regex101.com/r/sJ9gM7/35</a></p>\n\n<pre><code>var re = /(?=aba)/g;\nvar str = 'ababa';\nvar subst = '';\n\nvar result = str.replace(re, subst);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1509, "user_id": 4731705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HB0F.png?s=128&g=1", "display_name": "Oleg K.", "link": "https://stackoverflow.com/users/4731705/oleg-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1427872167, "creation_date": 1427872167, "answer_id": 29384881, "question_id": 29383372, "link": "https://stackoverflow.com/questions/29383372/rolling-regexp-in-ruby/29384881#29384881", "title": "Rolling Regexp in Ruby", "body": "<p>Try this for JavaScript:</p>\n\n<pre><code>str = 'ababa',\nre = /a(?=ba)/g\nwhile ((match = re.exec(str)) !== null) {\n   console.log(match)\n}\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 1879551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7d4977879c3910ad547d29ff47b1c92?s=128&d=identicon&r=PG", "display_name": "zilla", "link": "https://stackoverflow.com/users/1879551/zilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1427872167, "creation_date": 1427865752, "last_edit_date": 1427866764, "question_id": 29383372, "link": "https://stackoverflow.com/questions/29383372/rolling-regexp-in-ruby", "title": "Rolling Regexp in Ruby", "body": "<p>If I have a string \"ababa\" how can I find all indices where the string \"aba\" exists? In this instance, I would want it to return 0 and 2 because I have (aba)ba and ab(aba).</p>\n\n<p>EDIT: The lookahead kind of works (or it did in Ruby)... I'm now having trouble reimplementing in Javascript. This is throwing an infinite loop:</p>\n\n<pre><code>str = 'ababa',\nre = /(?=aba)/g\nwhile ((match = re.exec(str)) !== null) {\n  console.log(match)\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427864905, "post_id": 29383203, "comment_id": 46945285, "body": "how can one method return 3 values at the same time."}, {"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "reply_to_user": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1427931522, "post_id": 29383203, "comment_id": 46980822, "body": "RSpec supports this syntax - if the method is called 3 times it will return each of those 3 responses in that order. Allows you to stub different return values each times it&#39;s called."}], "answers": [{"comments": [{"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "edited": false, "score": 0, "creation_date": 1427874617, "post_id": 29383326, "comment_id": 46949228, "body": "Thanks. That solution is definitely a good workaround, although in the context of RSpec I&#39;d still like to be able to know how I can raise arbitary errors as needed. I&#39;m not sure every situation where one needs to raise an error can be worked around in such a clean manner :)"}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "reply_to_user": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "edited": false, "score": 0, "creation_date": 1427874864, "post_id": 29383326, "comment_id": 46949335, "body": "whynot just try and_raise(StandardError.new or &quot;foobar&quot;)"}], "tags": [], "owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "is_accepted": false, "score": 0, "last_activity_date": 1427875150, "last_edit_date": 1427875150, "creation_date": 1427865454, "answer_id": 29383326, "question_id": 29383203, "link": "https://stackoverflow.com/questions/29383203/rspec-3-raising-an-error-on-purpose-to-test-it-is-rescued/29383326#29383326", "title": "RSpec 3 - raising an error on purpose to test it is rescued", "body": "<p>I can't exactly answer the question, but rather than doing a begin resuce thing,you can follow this approach,</p>\n\n<ul>\n<li>Make the update_user return true or false.</li>\n<li>Keep an array of users that falied to update.</li>\n<li>return an object like </li>\n</ul>\n\n<p><code>response: { status: \"failure\", message: \"falied to update #{pluralize(failed_users_array.count, 'user')}\", failures: failed_users_array.join(\", \") }</code> for failures and</p>\n\n<p><code>response: { status: \"success\", message: \"#{pluralize(users.count, 'user')} updated successfully\" }</code> for all success.</p>\n\n<p>now you can easily test,</p>\n\n<ul>\n<li>have two cases, one where you can test failures and when you can test all success.</li>\n</ul>\n\n<p>Just stub the response object.</p>\n\n<p>For raising errors, you have to do <code>.and_raise(\"some tezt or StandardError.new\")</code> , thats in the <a href=\"https://relishapp.com/rspec/rspec-mocks/v/2-14/docs/method-stubs\" rel=\"nofollow\">docs</a>.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427875150, "creation_date": 1427864705, "question_id": 29383203, "link": "https://stackoverflow.com/questions/29383203/rspec-3-raising-an-error-on-purpose-to-test-it-is-rescued", "title": "RSpec 3 - raising an error on purpose to test it is rescued", "body": "<p>Consider a simple method -</p>\n\n<pre><code>def my_method(users)\n  eligible_users = []\n\n  users.each do |u|\n    # Go to the next user unless they are eligible\n    next unless is_eligible?(u)\n\n    begin\n      update_user(u)\n      eligible_users &lt;&lt; u\n    rescue\n      puts \"Error occured\"\n      # Prints some other stuff about error\n      next\n    end\n  end\nend\n</code></pre>\n\n<p>A key feature of this method is that it loops through users but continues to the next user even if a given user throws an error.</p>\n\n<p>If I were writing spec tests for this, I'd love to pass an array of 3 users and purposely have it error out on the first user. I can then check that the 2nd and 3rd were still correctly processed.</p>\n\n<p>How would I go about raising an error on purpose for only <em>one</em> of the result sets?</p>\n\n<p>I was thinking I could stub <code>is_eligible?</code> and return an error for one of the result and <code>true</code> for the remainder -</p>\n\n<pre><code>allow_any_instance_of(MyClass).to receive(:is_eligible?).and_return(\n  raise StandardError.new,\n  true,\n  true\n)\n</code></pre>\n\n<p>As expected, that doesn't work. Any other approaches?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1427868326, "post_id": 29382960, "comment_id": 46946344, "body": "Where is update_post being called?"}, {"owner": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1427868756, "post_id": 29382960, "comment_id": 46946471, "body": "@Antarr Byrd: after_save  :update_post in models/vote.rb, I have also added it in my question, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "edited": false, "score": 0, "creation_date": 1427870457, "post_id": 29384193, "comment_id": 46947157, "body": "Thanks for your answer! The created_at is in db/schema.rb:      {create_table &quot;posts&quot;, force: :cascade do |t|     t.string   &quot;title&quot;     t.text     &quot;body&quot;     t.datetime &quot;created_at&quot;}     Not sure if I missed anything."}, {"owner": {"reputation": 5880, "user_id": 166233, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b88b1c85a798a2aee3a35f5cd805d0e2?s=128&d=identicon&r=PG", "display_name": "Steve Wilhelm", "link": "https://stackoverflow.com/users/166233/steve-wilhelm"}, "reply_to_user": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "edited": false, "score": 0, "creation_date": 1427871019, "post_id": 29384193, "comment_id": 46947394, "body": "Rails sets the created_at when the object is successfully saved to the database. Do you have any validators defined that might cause the post save to fail?"}, {"owner": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "edited": false, "score": 0, "creation_date": 1427915054, "post_id": 29384193, "comment_id": 46973445, "body": "I just added the validators in my question but it doesn&#39;t seem it has issue with &quot;created_at&quot; to me."}, {"owner": {"reputation": 5880, "user_id": 166233, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b88b1c85a798a2aee3a35f5cd805d0e2?s=128&d=identicon&r=PG", "display_name": "Steve Wilhelm", "link": "https://stackoverflow.com/users/166233/steve-wilhelm"}, "reply_to_user": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "edited": false, "score": 0, "creation_date": 1427917768, "post_id": 29384193, "comment_id": 46974904, "body": "Add <i>puts &quot;update_rank:created_at = #{created_at}&quot;</i> as the first line of <i>update_rank</i> and push the changes to Heroku. In the Heroku log file, <i>heroku logs -t</i> check to see what value created_at is set to."}, {"owner": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "edited": false, "score": 0, "creation_date": 1427944604, "post_id": 29384193, "comment_id": 46983846, "body": "You are right~~~Thank you so much! The issue has been fixed by deleting all the &quot;null: false&quot; after each &quot;created_at&quot; under <i>db:schema.rb</i>, and make sure the new posts meet all the validation under <i>post.rb</i>, the new posts are all passed on Heroku now."}], "tags": [], "owner": {"reputation": 5880, "user_id": 166233, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b88b1c85a798a2aee3a35f5cd805d0e2?s=128&d=identicon&r=PG", "display_name": "Steve Wilhelm", "link": "https://stackoverflow.com/users/166233/steve-wilhelm"}, "is_accepted": true, "score": 1, "last_activity_date": 1427948336, "last_edit_date": 1427948336, "creation_date": 1427869653, "answer_id": 29384193, "question_id": 29382960, "link": "https://stackoverflow.com/questions/29382960/app-works-fine-on-localhost-but-has-nomethoderror-undefined-method-for-nil/29384193#29384193", "title": "App works fine on Localhost, but has NoMethodError (undefined method `-&#39; for nil:NilClass) on Heroku", "body": "<p>The only use of \"-\" in the code provided is in first line of <em>Post#update_rank</em></p>\n\n<p>Note, when I run the following in irb</p>\n\n<pre><code>irb&gt; (nil - Time.new(1970,1,1)) / (60  * 60 * 24) \n</code></pre>\n\n<p>I get the following error.</p>\n\n<pre><code>NoMethodError: undefined method `-' for nil:NilClass\n</code></pre>\n\n<p>Remember everything in Ruby a class. Many classes implement the operator methods. The DateTime class does, but the NilClass does not.</p>\n\n<p>I suspect your created_at is not yet set and at this point is a nil value.</p>\n"}], "owner": {"reputation": 87, "user_id": 4314067, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-bDsqcQdnPXM/AAAAAAAAAAI/AAAAAAAAACU/Pu9wIWa5CRg/photo.jpg?sz=128", "display_name": "Florence Liang", "link": "https://stackoverflow.com/users/4314067/florence-liang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 29384193, "answer_count": 1, "score": 0, "last_activity_date": 1427948336, "creation_date": 1427863095, "last_edit_date": 1427914933, "question_id": 29382960, "link": "https://stackoverflow.com/questions/29382960/app-works-fine-on-localhost-but-has-nomethoderror-undefined-method-for-nil", "title": "App works fine on Localhost, but has NoMethodError (undefined method `-&#39; for nil:NilClass) on Heroku", "body": "<p>I am new to Ruby and now experiencing an error after deploying my app to Heroku.</p>\n\n<p>I test my app on localhost and everything works fine; however, when I try to save a new post, I have \"undefined method `-' for nil:NilClass\" on Heroku. I have searched for solutions on StackOverflow but so far I haven't found anything.</p>\n\n<p>Error I got from heroku logs:</p>\n\n<pre><code>2015-04-01T03:37:23.412066+00:00 app[web.1]: NoMethodError (undefined method `-' for nil:NilClass):\n2015-04-01T03:37:23.412076+00:00 app[web.1]:   app/controllers/topics/posts_controller.rb:22:in `create'\n2015-04-01T03:37:23.412074+00:00 app[web.1]:   app/models/post.rb:37:in `save_with_initial_vote'\n2015-04-01T03:37:23.407819+00:00 app[web.1]:    (1.0ms)  ROLLBACK\n2015-04-01T03:37:23.412070+00:00 app[web.1]:   app/models/vote.rb:20:in `update_post'\n2015-04-01T03:37:23.412078+00:00 app[web.1]: \n2015-04-01T03:37:23.412063+00:00 app[web.1]: \n2015-04-01T03:37:23.412068+00:00 app[web.1]:   app/models/post.rb:30:in `update_rank'\n2015-04-01T03:37:23.412072+00:00 app[web.1]:   app/models/post.rb:39:in `block in save_with_initial_vote'\n</code></pre>\n\n<p>From the logs, it looks like the problem is from update_rank method in post.rb.</p>\n\n<p>From my app/models/post.rb:</p>\n\n<pre><code>  class Post &lt; ActiveRecord::Base\n  has_many :comments, dependent: :destroy\n  has_many :votes, dependent: :destroy\n  has_many :favorites, dependent: :destroy\n  belongs_to :user\n  belongs_to :topic\n\n  default_scope { order('rank DESC') }\n  scope :visible_to, -&gt;(user) { user ? all : joins(:topic).where('topics.public' =&gt; true) }\n\n  validates :title, length: { minimum: 5 }, presence: true\n  validates :body, length: { minimum: 20 }, presence: true\n  validates :topic, presence: true\n  validates :user, presence: true\n\n    def update_rank\n        age_in_days = (created_at - Time.new(1970,1,1)) / (60 * 60 * 24)\n        new_rank = points + age_in_days\n\n        update_attribute(:rank, new_rank)\n      end\n\n      def save_with_initial_vote\n        ActiveRecord::Base.transaction do\n          post = Post.create\n          user.votes.create(value: 1, post: self)\n        end\n      end\n</code></pre>\n\n<p>From app/controllers/topics/posts_controller.rb:</p>\n\n<pre><code>  def create\n    @topic = Topic.find(params[:topic_id])\n    @post = current_user.posts.build(post_params)\n    @post.topic = @topic\n        authorize @post\n\n    if @post.save_with_initial_vote\n      flash[:notice] = \"Post was saved.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"There was an error saving the post. Please try again.\"\n      render :new\n    end\n  end\n</code></pre>\n\n<p>models/vote.rb:</p>\n\n<pre><code>after_save :update_post\n\n  def up_vote?\n    value == 1\n  end\n\n  def down_vote?\n    value == -1\n  end\n\n  def update_post\n    post.update_rank\n  end\n</code></pre>\n\n<p>I have run \"heroku rn db:migrate\" and \"heroku restart\" but the error still exists. My rails version is 4.2.0 and my Ruby version is 2.0.0.</p>\n\n<p>Does anyone know what is the cause and how to make it work on Heroku?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "answers": [{"tags": [], "owner": {"reputation": 709, "user_id": 4723648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-heavuJdqf08/AAAAAAAAAAI/AAAAAAAAAWQ/OzQG8UtK6tA/photo.jpg?sz=128", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/4723648/andrey-turkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1427869608, "creation_date": 1427869608, "answer_id": 29384181, "question_id": 29382788, "link": "https://stackoverflow.com/questions/29382788/been-stuck-on-a-test-error-on-ruby-on-rails-tutorial-error-userscontrollertest/29384181#29384181", "title": "Been stuck on a test error on Ruby on Rails tutorial- Error: UsersControllerTest#test_should_redirect_update_when_logged_in_as_wrong_user:", "body": "<p>And where does user_id come from here?</p>\n\n<pre><code>def log_in_as(user, options = {})\n  ... \n  if integration_test?\n    ...\n  else\n    session[:user_id] = user_id\n  end\nend\n</code></pre>\n\n<p>Seems it should be: </p>\n\n<pre><code>session[:user_id] = user.id\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4736547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b5dae6d092ba053fd5933e5479787d4?s=128&d=identicon&r=PG&f=1", "display_name": "greg", "link": "https://stackoverflow.com/users/4736547/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 29384181, "answer_count": 1, "score": 0, "last_activity_date": 1427869608, "creation_date": 1427861948, "question_id": 29382788, "link": "https://stackoverflow.com/questions/29382788/been-stuck-on-a-test-error-on-ruby-on-rails-tutorial-error-userscontrollertest", "title": "Been stuck on a test error on Ruby on Rails tutorial- Error: UsersControllerTest#test_should_redirect_update_when_logged_in_as_wrong_user:", "body": "<p>I've been stuck on this one for a while and keep getting 2 errors when I rake test. Referencing Listing 9.23 testing point. Any help would be much appreciated.</p>\n\n<p>Test Error:</p>\n\n<pre><code>    1) Error:\nUsersControllerTest#test_should_redirect_update_when_logged_in_as_wrong_user:\nNameError: undefined local variable or method `user_id' for #&lt;UsersControllerTest:0x007fbff6be3120&gt;\n    test/test_helper.rb:24:in `log_in_as'\n    test/controllers/users_controller_test.rb:35:in `block in &lt;class:UsersControllerTest&gt;'\n\n\n  2) Error:\nUsersControllerTest#test_should_redirect_edit_when_logged_in_as_wrong_user:\nNameError: undefined local variable or method `user_id' for #&lt;UsersControllerTest:0x007fbff6c01850&gt;\n    test/test_helper.rb:24:in `log_in_as'\n    test/controllers/users_controller_test.rb:28:in `block in &lt;class:UsersControllerTest&gt;'\n\n29 runs, 66 assertions, 0 failures, 2 errors, 0 skips\n</code></pre>\n\n<p>User_Controller_Test file:</p>\n\n<pre><code>require 'test_helper'\n\nclass UsersControllerTest &lt; ActionController::TestCase\n\n  def setup\n    @user = users(:michael)\n    @other_user = users(:archer)\n  end\n\n  test \"should get new\" do\n    get :new\n    assert_response :success\n  end\n\n  test \"should redirect edit when not logged in\" do\n    get :edit, id: @user\n    assert_not flash.empty?\n    assert_redirected_to login_url\n  end\n\n  test \"should redirect update when not logged in\" do\n    patch :update, id: @user, user: { name: @user.name, email: @user.email }\n    assert_not flash.empty?\n    assert_redirected_to login_url\n  end\n\ntest \"should redirect edit when logged in as wrong user\" do\n    log_in_as(@other_user)\n    get :edit, id: @user\n    assert flash.empty?\n    assert_redirected_to root_url\n  end\n</code></pre>\n\n<p>Test_Helper.rb:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\ndef is_logged_in?\n    !session[:user_id].nil?\nend\n\n#logs in a test user\ndef log_in_as(user, options = {})\n    password = options[:password]       || 'password'\n    remember_me = options[:remember_me] || '1'\n    if integration_test?\n        post login_path, session: { email: user.email,\n                                    password: password,\n                                    remember_me: remember_me}\n\nelse\n\nsession[:user_id] = user_id\n end\nend\n\nprivate\n#returns true inside an int. test\ndef integration_test?\n    defined?(post_via_redirect)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "answers": [{"tags": [], "owner": {"reputation": 1174, "user_id": 4640187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de6253fee5faa9d5f4bc3cdd162d0a20?s=128&d=identicon&r=PG", "display_name": "mgrim", "link": "https://stackoverflow.com/users/4640187/mgrim"}, "is_accepted": true, "score": 1, "last_activity_date": 1427867692, "last_edit_date": 1495539868, "creation_date": 1427867692, "answer_id": 29383757, "question_id": 29382721, "link": "https://stackoverflow.com/questions/29382721/with-ruby-how-to-import-a-csv-file-that-has-a-row-that-is-missing-a-value-in-th/29383757#29383757", "title": "With Ruby, how to import a CSV file that has a row that is missing a value in the last column, and thus ends with a comma?", "body": "<p>Your line endings are probably not <code>\\r\\n</code> then.</p>\n\n<p>You can try using <code>:row_sep =&gt; :auto</code> (it'll look for different EOLs).</p>\n\n<p>If your CSV file is not supposed to contain fields with multiple lines I'll advice you to clean the whole thing by e.g. <code>file.gsub(/\\r\\r?\\n?/, \"\\n\")</code>, and use a simple <code>\"\\n\"</code> for row_sep.</p>\n\n<p>See <a href=\"https://stackoverflow.com/a/18969935/4640187\">https://stackoverflow.com/a/18969935/4640187</a></p>\n"}], "owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 29383757, "answer_count": 1, "score": 0, "last_activity_date": 1427867692, "creation_date": 1427861529, "question_id": 29382721, "link": "https://stackoverflow.com/questions/29382721/with-ruby-how-to-import-a-csv-file-that-has-a-row-that-is-missing-a-value-in-th", "title": "With Ruby, how to import a CSV file that has a row that is missing a value in the last column, and thus ends with a comma?", "body": "<p>I'm using Ruby to import a CSV file, and things seem to be working okay, except for the fact that one of the rows ends in a comma, due to the last column having a missing value.</p>\n\n<p>I'm using ruby's native CSV library, with a call:</p>\n\n<pre><code>   CSV.open(file, :col_sep =&gt; \",\")\n</code></pre>\n\n<p>and getting a CSV::MalformedCSVError: Unquoted fields do not allow \\r or \\n (line 10),</p>\n\n<p>and if I add a :row_sep call, </p>\n\n<pre><code>CSV.open(file, :col_sep =&gt; \",\" , :row_sep =&gt; \"\\r\\n\")\n</code></pre>\n\n<p>, and getting a CSV::MalformedCSVError: Unquoted fields do not allow \\r or \\n (line 1).</p>\n"}, {"tags": ["ruby", "csv", "time", "average"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427861751, "post_id": 29382530, "comment_id": 46944532, "body": "So you want to average values corresponding to &gt; 00:54:08.00 but &lt; 00:54:09.000? Why does it look like you are averaging by squaring your values before adding them and dividing by the number of operands? Shouldn&#39;t it be <code>(14 + 13 + 20)&#47;3</code>? What code do you have so far?"}, {"owner": {"reputation": 3647, "user_id": 3206440, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9d136c2fa437c777757f77a7ebdb56b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3206440", "link": "https://stackoverflow.com/users/3206440/user3206440"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427863283, "post_id": 29382530, "comment_id": 46944857, "body": "The objective is to get the per second average for values in the input table.  Ideally, all values from <code>00:54:07.501</code> to <code>00:54:08.499</code> , falls in the per second bucket for <code>00:54:08.000</code>. It is not just the average - but an operation is done on the individual values before averaging. I used <code>square</code> to just illustrate this aspect."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1427863922, "last_edit_date": 1427863922, "creation_date": 1427862076, "answer_id": 29382807, "question_id": 29382530, "link": "https://stackoverflow.com/questions/29382530/ruby-averaging-values-to-a-second/29382807#29382807", "title": "ruby - averaging values to a second", "body": "<p>This is one way to do it, assuming the array is sorted by time, as it is in the example.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def avg_of_squares(a)\n  a.chunk { |t,v| t[0,8] }.map { |t,v|\n    [t[0,8], v.reduce(0) { |tot,(_,x)| tot + x*x }/(v.size.to_f)] }\nend\n</code></pre>\n\n<p>If <code>a</code> were not sorted, first sort it on the first element:</p>\n\n<pre><code>a.sort_by(&amp;:first)\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>a = [[\"00:54:08.349\", 14],\n     [\"00:54:08.349\", 13],\n     [\"00:54:08.449\", 20],\n     [\"00:54:09.349\", 15],\n     [\"00:54:09.628\", 21],\n     [\"00:54:10.679\", 13],\n     [\"00:54:10.839\", 12]]\n\navg_of_squares(a)\n  #=&gt; [[\"00:54:08\", 255.0], [\"00:54:09\", 333.0], [\"00:54:10\", 156.5]] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The steps:</p>\n\n<pre><code>e = a.chunk { |t,v| t[0,8] }\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x007fbaac08a2f0&gt;:each&gt; \n</code></pre>\n\n<p>Convert the enumerator to an array to see it's contents:</p>\n\n<pre><code>e.to_a\n  #=&gt; [[\"00:54:08\", [[\"00:54:08.349\", 14], [\"00:54:08.349\", 13],\n  #                  [\"00:54:08.449\", 20]]],\n  #    [\"00:54:09\", [[\"00:54:09.349\", 15], [\"00:54:09.628\", 21]]],\n  #    [\"00:54:10\", [[\"00:54:10.679\", 13], [\"00:54:10.839\", 12]]]]\n\nf = e.map\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator: #\n  #    &lt;Enumerator::Generator:0x007fbaac08a2f0&gt;:each&gt;:map&gt; \nf.to_a\n  # (same as for e)\n</code></pre>\n\n<p>You can think of <code>f</code> as a \"compound enumerator\". Pass the first element of <code>f</code> into the block and assign the block variables:</p>\n\n<pre><code>t,v = f.next\n  #=&gt; [\"00:54:08\", [[\"00:54:08.349\", 14], [\"00:54:08.349\", 13],\n  #   [\"00:54:08.449\", 20]]] \nt \n  #=&gt; \"00:54:08\" \nv\n  #=&gt; [[\"00:54:08.349\", 14], [\"00:54:08.349\", 13], [\"00:54:08.449\", 20]]\ng = v.reduce(0) { |tot,(_,x)|tot + x*x }/(v.size.to_f)\n  #=&gt; 255.0\n</code></pre>\n\n<p>so the first element of <code>f</code> is mapped to:</p>\n\n<pre><code>[\"00:54:08\", 255.0]\n</code></pre>\n\n<p>The other calculations are performed similarly.</p>\n"}], "owner": {"reputation": 3647, "user_id": 3206440, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9d136c2fa437c777757f77a7ebdb56b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3206440", "link": "https://stackoverflow.com/users/3206440/user3206440"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427863922, "creation_date": 1427860117, "question_id": 29382530, "link": "https://stackoverflow.com/questions/29382530/ruby-averaging-values-to-a-second", "title": "ruby - averaging values to a second", "body": "<p>Got a table that contains values against time in milliseconds resolution. Is there a quick way to average all the values (after an operation) occurring in a second ?</p>\n\n<p><strong>input table</strong></p>\n\n<p>time , value</p>\n\n<p>00:54:08.349 , 14</p>\n\n<p>00:54:08.349 , 13</p>\n\n<p>00:54:08.449 , 20</p>\n\n<p>00:54:09.349 , 15</p>\n\n<p>00:54:09.628 , 21</p>\n\n<p>00:54:10.679 , 13</p>\n\n<p>00:54:10.839 , 12</p>\n\n<p><strong>output table</strong></p>\n\n<p>time,value</p>\n\n<p>00:54:08.000 ,255 (14^2 + 13^2 + 20^2)/3</p>\n\n<p>00:54:09.000,333 (15^2 +21^2)/2</p>\n\n<p>00:54:10.000, 156.5 (13^2 + 12^2)/2`</p>\n\n<p>I'm reading the input file from a csv as a <code>CSV::table</code>, so each row can be read as <code>row[i] = csv[i]</code> and <code>row[i]['time']</code> and <code>row[i]['value']</code> are available -  would be helpful to get ideas on how to manipulate it to get an average.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1427860465, "post_id": 29382515, "comment_id": 46944242, "body": "What isn&#39;t clear about <a href=\"http://ruby-doc.org/core-2.2.1/Module.html#method-i-attr_reader\" rel=\"nofollow noreferrer\">&quot;Creates instance variables and corresponding methods that return the value of each instance variable.&quot;</a>? That&#39;s straight out of the <code>attr_reader</code> documentation."}, {"owner": {"reputation": 125, "user_id": 3936113, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/625999d8662bedffe6b890dd6a2fde90?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3936113/alex"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1427860996, "post_id": 29382515, "comment_id": 46944370, "body": "That&#39;s cool, I didn&#39;t even know that website."}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 2, "last_activity_date": 1427864487, "last_edit_date": 1427864487, "creation_date": 1427860392, "answer_id": 29382556, "question_id": 29382515, "link": "https://stackoverflow.com/questions/29382515/ruby-symbol-and-attribute/29382556#29382556", "title": "Ruby symbol and attribute", "body": "<p>You need to understand what <code>attr_reader</code> does. When you do:</p>\n\n<pre><code>attr_reader :variable1, :variable2\n</code></pre>\n\n<p>It gets translated into:</p>\n\n<pre><code>def variable1\n  @variable1\nend\ndef variable2\n  @variable2\nend\n</code></pre>\n\n<p>As you can see <code>variable1</code> is but the instance variable <code>@variable1</code> whose value you are setting within your <code>initialize</code> method.</p>\n\n<p>So yes, Ruby does associate the attribute with the instance variable with the same name.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1427871867, "creation_date": 1427871867, "answer_id": 29384797, "question_id": 29382515, "link": "https://stackoverflow.com/questions/29382515/ruby-symbol-and-attribute/29384797#29384797", "title": "Ruby symbol and attribute", "body": "<p>No, there is no association going on.</p>\n\n<p>And <code>attr_reader</code>, <code>attr_writer</code>, <code>attr_accessor</code> aren't keywords, they are methods just like any other method. In fact, you can easily write them yourself:</p>\n\n<pre><code>class Module\n  def attr_reader(*attrs)\n    attrs.each do |attr|\n      define_method(attr) { instance_variable_get(:\"@#{attr}\") }\n    end\n  end\n\n  def attr_writer(*attrs)\n    attrs.each do |attr|\n      define_method(:\"#{attr}=\") do |val| instance_variable_set(:\"@#{attr}\", val) end\n    end\n  end\n\n  def attr_accessor(*attrs)\n    attr_reader *attrs\n    attr_writer *attrs\n  end\nend\n</code></pre>\n\n<p>All that those methods do, is generate some other methods whose name is based on the symbol you pass into them. That's it.</p>\n"}], "owner": {"reputation": 125, "user_id": 3936113, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/625999d8662bedffe6b890dd6a2fde90?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3936113/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 29382556, "answer_count": 2, "score": -3, "last_activity_date": 1427871867, "creation_date": 1427860041, "last_edit_date": 1427867022, "question_id": 29382515, "link": "https://stackoverflow.com/questions/29382515/ruby-symbol-and-attribute", "title": "Ruby symbol and attribute", "body": "<p>When I'm creating attributes, I can use symbols like this:</p>\n\n<pre><code>class SomeClass\n  attr_reader :variable1, :variable2\nend \n</code></pre>\n\n<p>When I'm using the keyword <code>attr_reader</code> (or <code>attr_writer</code>) and use the same name as some instance variable, does Ruby automatically associate the attribute (or say, property) with the instance variable with the same name?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "ruby-on-rails-4", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4281107, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2F3OUz5_-OM/AAAAAAAAAAI/AAAAAAAAA1o/SoVtZFJFnYo/photo.jpg?sz=128", "display_name": "Ga&#235;l Roustan", "link": "https://stackoverflow.com/users/4281107/ga%c3%abl-roustan"}, "is_accepted": false, "score": -1, "last_activity_date": 1469170785, "last_edit_date": 1469170785, "creation_date": 1469098802, "answer_id": 38502459, "question_id": 29382497, "link": "https://stackoverflow.com/questions/29382497/assert-select-xml-with-namespace-and-prefix/38502459#38502459", "title": "assert_select XML with namespace and prefix", "body": "<p>Did you try, according to the <a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html\" rel=\"nofollow\">Nokogiri CSS selector</a>, to replace <code>:</code> by <code>|</code>.</p>\n\n<p>I did not test but it would be <code>assert_select 'atom|link'</code>.</p>\n"}], "owner": {"reputation": 806, "user_id": 2057928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d54eb9311d61feb3e8ba4b597ea71?s=128&d=identicon&r=PG", "display_name": "RPinel", "link": "https://stackoverflow.com/users/2057928/rpinel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1469170785, "creation_date": 1427859892, "last_edit_date": 1430437479, "question_id": 29382497, "link": "https://stackoverflow.com/questions/29382497/assert-select-xml-with-namespace-and-prefix", "title": "assert_select XML with namespace and prefix", "body": "<p>Having a XML like the following, how could I <code>assert_select</code> the tag <code>atom:link</code>?</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;rss version=\"2.0\" xmlns:atom=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;channel&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n    &lt;link&gt;http://example.com&lt;/link&gt;\n    &lt;description&gt;Description&lt;/description&gt;\n    &lt;atom:link href=\"http://example.com/feed\" rel=\"self\" type=\"application/rss+xml\"/&gt;\n  &lt;/channel&gt;\n&lt;/rss&gt;\n</code></pre>\n\n<p><code>assert_select 'title'</code> works fine.<br>\n<code>assert_select 'atom:link'</code> outputs <code>Expected at least 1 element matching \"atom:link\", found 0..</code>.</p>\n\n<p>I am using Rails <code>4.2.0</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "version", "bundle", "rbenv"], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 4014693, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "avinash pandey", "link": "https://stackoverflow.com/users/4014693/avinash-pandey"}, "is_accepted": false, "score": 0, "last_activity_date": 1427855702, "last_edit_date": 1495541718, "creation_date": 1427855702, "answer_id": 29381926, "question_id": 29381773, "link": "https://stackoverflow.com/questions/29381773/ruby-version-issues-with-rbenv/29381926#29381926", "title": "Ruby version issues with Rbenv", "body": "<p>Try to use rbenv local <code>[version number]</code>.Refer to <a href=\"https://stackoverflow.com/questions/10940736/rbenv-not-changing-ruby-version\">this</a> for more understanding.</p>\n"}, {"tags": [], "owner": {"reputation": 821, "user_id": 3213438, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8c983750107f2b913d8f512f78618dd7?s=128&d=identicon&r=PG&f=1", "display_name": "Ana Isabel", "link": "https://stackoverflow.com/users/3213438/ana-isabel"}, "is_accepted": false, "score": 0, "last_activity_date": 1445815325, "creation_date": 1445815325, "answer_id": 33336251, "question_id": 29381773, "link": "https://stackoverflow.com/questions/29381773/ruby-version-issues-with-rbenv/33336251#33336251", "title": "Ruby version issues with Rbenv", "body": "<p>I had a similar problem but with ruby -v 2.2.0 and Mac OSX El Capitan.  What finally worked for me was:</p>\n\n<ol>\n<li>gem install bundler (apparently it was no longer installed)</li>\n<li>rbenv rehash</li>\n<li>bundle install </li>\n</ol>\n\n<p>I was able to find the answer on the github for rbenv. \n<a href=\"https://github.com/sstephenson/rbenv/issues/697http://\" rel=\"nofollow\">https://github.com/sstephenson/rbenv/issues/697</a></p>\n"}, {"tags": [], "owner": {"reputation": 1508, "user_id": 4346603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1be3f8e84ecb90d3a477f12c55b635?s=128&d=identicon&r=PG", "display_name": "leobelizquierdo", "link": "https://stackoverflow.com/users/4346603/leobelizquierdo"}, "is_accepted": false, "score": 0, "last_activity_date": 1453315912, "creation_date": 1453315912, "answer_id": 34908124, "question_id": 29381773, "link": "https://stackoverflow.com/questions/29381773/ruby-version-issues-with-rbenv/34908124#34908124", "title": "Ruby version issues with Rbenv", "body": "<p>Assuming you have Ruby -v 2.2.0 installed (<code>rbenv install 2.2.0</code> otherwise), change your ruby version with <code>rbenv</code>:</p>\n\n<pre><code>rbenv global 2.2.0\n</code></pre>\n\n<p>after install rails you must do this: <code>rbenv rehash</code>, in order to tell <code>rbenv</code> to see <code>rails</code> as executable.</p>\n\n<p>follow this tutorial to set up Ruby and Ruby on Rails in your machine: <a href=\"https://gorails.com/setup/osx/10.10-yosemite\" rel=\"nofollow\">https://gorails.com/setup/osx/10.10-yosemite</a></p>\n\n<p>Note: In my case. after install <code>rbenv</code> the command <code>rbenv global 2.2.0</code> doesn't affect my current ruby version (<code>ruby -v</code> still be the previous one). I fix this issue reinstalling <code>rbenv</code> and run this command:</p>\n\n<pre><code># Add rbenv to bash so that it loads every time you open a terminal\necho 'if which rbenv &gt; /dev/null; then eval \"$(rbenv init -)\"; fi' &gt;&gt; ~/.bash_profile\nsource ~/.bash_profile\n</code></pre>\n\n<p>immediately afterwards, as explained above in the tutorial. </p>\n"}], "owner": {"reputation": 247, "user_id": 822027, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/f4f08614fe3d0f82338f9d093ef77227?s=128&d=identicon&r=PG", "display_name": "Ricardo Masao Shigeoka", "link": "https://stackoverflow.com/users/822027/ricardo-masao-shigeoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1453315912, "creation_date": 1427854615, "question_id": 29381773, "link": "https://stackoverflow.com/questions/29381773/ruby-version-issues-with-rbenv", "title": "Ruby version issues with Rbenv", "body": "<p>I am setting up my new machine (Mac Yosemite) and when I run the command \"bundle\" I get the following error:</p>\n\n<blockquote>\n  <p>Your Ruby version is 2.2.1, but your Gemfile specified 2.2.0</p>\n</blockquote>\n\n<p>I'm trying to change the version w Rbenv but I think it's not working.</p>\n\n<pre><code>ruby -v\n// Ruby 2.2.1p85\n\nrbenv version\n// 2.2.0\n</code></pre>\n\n<p>Can anyone help me? Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 269, "user_id": 1664133, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2bbfcbbf6917892384de8b7a8c64b79f?s=128&d=identicon&r=PG", "display_name": "Theo Felippe", "link": "https://stackoverflow.com/users/1664133/theo-felippe"}, "is_accepted": false, "score": 0, "last_activity_date": 1427894619, "last_edit_date": 1495535056, "creation_date": 1427894619, "answer_id": 29392019, "question_id": 29381597, "link": "https://stackoverflow.com/questions/29381597/devise-signs-in-an-user-even-though-it-in-theory-never-reached-the-sign-in-met/29392019#29392019", "title": "Devise signs in an user even though it (in theory) never reached the sign_in method call", "body": "<p>Although not the same question, the top answer in this question applies here and fixed the issue for me.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15864554/check-if-user-is-active-before-allowing-user-to-sign-in-with-devise-rails\">Check if user is active before allowing user to sign in with devise (rails)</a></p>\n"}], "owner": {"reputation": 269, "user_id": 1664133, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2bbfcbbf6917892384de8b7a8c64b79f?s=128&d=identicon&r=PG", "display_name": "Theo Felippe", "link": "https://stackoverflow.com/users/1664133/theo-felippe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427894619, "creation_date": 1427853497, "question_id": 29381597, "link": "https://stackoverflow.com/questions/29381597/devise-signs-in-an-user-even-though-it-in-theory-never-reached-the-sign-in-met", "title": "Devise signs in an user even though it (in theory) never reached the sign_in method call", "body": "<p>I have an attribute (approved) on the user that i wish for devise to consider before allowing sign in.</p>\n\n<p>I've overriden the session controller and its currently as follows:</p>\n\n<pre><code>class SessionsController &lt; Devise::SessionsController\n  skip_after_filter :verify_authorized\n\n  def create\n\n    user = User.find_by_email(params[:user].try(:[], :email))\n\n    unless user.approved?\n      flash[:alert] = \"Login fail. Account currently pending approval.\"\n      redirect_to :back and return\n    end\n\n    resource = warden.authenticate!(auth_options)\n    set_flash_message(:notice, :signed_in) if is_navigational_format?\n    sign_in(resource_name, resource)\n    respond_with resource, :location =&gt; after_sign_in_path_for(resource)\n  end\n\n  def failure\n    head 403\n  end\nend\n</code></pre>\n\n<p>Looking at the logic i see that there is a \"redirect_to :back\" happening, but then it seems devise takes over, logs in the user regardless of that and redirects to root (which is what i've setup to redirect to upon login)</p>\n\n<p>I've never worked with devise before and this is driving me mad. I should return before reaching the 'sign_in' part but something is happening that it still signs in the user regardless of my unless block.</p>\n\n<p>How could i go about intercepting that login if user.approved == false ?</p>\n\n<p>thanks in advance!</p>\n"}, {"tags": ["ruby", "datetime"], "comments": [{"owner": {"reputation": 4289, "user_id": 4273446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebndh.jpg?s=128&g=1", "display_name": "Dyrandz Famador", "link": "https://stackoverflow.com/users/4273446/dyrandz-famador"}, "edited": false, "score": 2, "creation_date": 1427853617, "post_id": 29381595, "comment_id": 46942722, "body": "did you already know the answer before posting it? &#39;coz you answer your own question in less than a minute"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4289, "user_id": 4273446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebndh.jpg?s=128&g=1", "display_name": "Dyrandz Famador", "link": "https://stackoverflow.com/users/4273446/dyrandz-famador"}, "edited": false, "score": 1, "creation_date": 1427864664, "post_id": 29381595, "comment_id": 46945210, "body": "@DyrandzFamador, of course he did, but that&#39;s done fairly often. I don&#39;t see a problem."}, {"owner": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "edited": false, "score": 1, "creation_date": 1427912769, "post_id": 29381595, "comment_id": 46972145, "body": "Yeah, I had been working off a couple other ideas, mostly <a href=\"http://stackoverflow.com/questions/22058630/javascript-function-to-convert-decimal-years-value-into-years-months-and-days\" title=\"javascript function to convert decimal years value into years months and days\">stackoverflow.com/questions/22058630/&hellip;</a>, but I didn&#39;t see a place that had code for accurately getting the correct day. Just posting here so the next person could use it and you all could make fun of my code."}, {"owner": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "reply_to_user": {"reputation": 4289, "user_id": 4273446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebndh.jpg?s=128&g=1", "display_name": "Dyrandz Famador", "link": "https://stackoverflow.com/users/4273446/dyrandz-famador"}, "edited": false, "score": 0, "creation_date": 1427915675, "post_id": 29381595, "comment_id": 46973773, "body": "@DyrandzFamador there is an option when you ask a question to &quot;Answer your own question \u2013 share your knowledge, Q&amp;A-style&quot;. I just used that, even while I knew it wasn&#39;t the most efficient solution (and I was proven very correct in that)"}, {"owner": {"reputation": 4289, "user_id": 4273446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebndh.jpg?s=128&g=1", "display_name": "Dyrandz Famador", "link": "https://stackoverflow.com/users/4273446/dyrandz-famador"}, "edited": false, "score": 0, "creation_date": 1427936887, "post_id": 29381595, "comment_id": 46982161, "body": "@AlienLifeForm, yeah there&#39;s no problem with that.  Jon skeet also doing that for sharing his knowledge. :) actually, i see no problem, i only ask that question just to confirm if you already know the answer. :)"}], "answers": [{"tags": [], "owner": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "is_accepted": false, "score": 0, "last_activity_date": 1427912874, "last_edit_date": 1427912874, "creation_date": 1427853480, "answer_id": 29381596, "question_id": 29381595, "link": "https://stackoverflow.com/questions/29381595/how-can-i-convert-a-decimal-year-value-into-a-date-in-ruby/29381596#29381596", "title": "How can I convert a decimal year value into a Date in Ruby?", "body": "<p>Here's what I came up with.</p>\n\n<pre><code># @param decimalDate [String] the date in decimal form, but can be a String or a Float\n# @return [DateTime] the converted date\ndef decimal_year_to_datetime(decimalDate)\n  decimalDate = decimalDate.to_f\n  year = decimalDate.to_i # Get just the integer part for the year\n  daysPerYear = leap?(year) ? 366 : 365 # Set days per year based on leap year or not\n  decimalYear = decimalDate - year # A decimal representing portion of the year left\n  dayOfYear = (decimalYear * daysPerYear).ceil # day of Year: 1 to 355 (or 366)\n  md = getMonthAndDayFromDayOfYear(dayOfYear, year)\n\n  DateTime.new(year,md[:month],md[:day])\nend\n\n# @param dayOfYear [Integer] the date in decimal form\n# @return [Object] month and day in an object\ndef getMonthAndDayFromDayOfYear(dayOfYear, year)\n  daysInMonthArray = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n  daysInMonthArray[2] = 29 if leap?(year)\n\n  daysLeft = dayOfYear\n  month = 0\n  daysInMonthArray.each do |daysInThisMonth|\n    if daysLeft &gt; daysInThisMonth\n      month += 1 \n      daysLeft -= daysInThisMonth\n    else\n      break\n    end\n  end\n  return { month: month, day: daysLeft }\nend\n\n# @param year [Integer]\n# @return [Boolean] is this year a leap year?\ndef leap?(year)\n  return year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "edited": false, "score": 0, "creation_date": 1427913984, "post_id": 29382022, "comment_id": 46972828, "body": "That is so much easier than what I did (below). Embarrassing and thank you."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "edited": false, "score": 1, "creation_date": 1427914585, "post_id": 29382022, "comment_id": 46973159, "body": "No need to be embarrassed, as we all need to start somewhere. I can see from your choice of camel-case variable names (the Ruby convention is snake-case for <code>both_variables_and_methods</code>) that you are fairly new to Ruby. It probably also means you have some un-learnin&#39; to do."}, {"owner": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "edited": false, "score": 0, "creation_date": 1427920389, "post_id": 29382022, "comment_id": 46976327, "body": "Thanks @CarySwoveland, maybe you can also improve upon my Javascript version here: <a href=\"http://stackoverflow.com/questions/29400171/how-do-i-convert-a-decimal-year-value-into-a-date-in-javascript/29400172\" title=\"how do i convert a decimal year value into a date in javascript\">stackoverflow.com/questions/29400171/&hellip;</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "edited": false, "score": 0, "creation_date": 1427921363, "post_id": 29382022, "comment_id": 46976887, "body": "&quot;Javascript&quot;? Never heard of it. Something to do with coffee?. My present repertoire is just Ruby without Rails."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1427865035, "last_edit_date": 1427865035, "creation_date": 1427856347, "answer_id": 29382022, "question_id": 29381595, "link": "https://stackoverflow.com/questions/29381595/how-can-i-convert-a-decimal-year-value-into-a-date-in-ruby/29382022#29382022", "title": "How can I convert a decimal year value into a Date in Ruby?", "body": "<p>You can obtain a formatted date as follows:</p>\n\n<pre><code>require 'date'\n\nd = 2015.0596924\nyear = Date.new(d)\n  #=&gt; #&lt;Date: 2015-01-01 ((2457024j,0s,0n),+0s,2299161j)&gt; \ndate = (year + (year.leap? ? 366 : 365) * (d % 1))\n  #=&gt; #&lt;Date: 2015-01-22 ((2457045j,68059s,526396957n),+0s,2299161j)&gt; \ndate.strftime(\"%B %d, %Y\") \n  #=&gt; \"January 22, 2015\"\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 1604601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07b15bee790ed0fa6921414f60f530c4?s=128&d=identicon&r=PG", "display_name": "Alien Life Form", "link": "https://stackoverflow.com/users/1604601/alien-life-form"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 29382022, "answer_count": 2, "score": 1, "last_activity_date": 1427920131, "creation_date": 1427853480, "last_edit_date": 1427920131, "question_id": 29381595, "link": "https://stackoverflow.com/questions/29381595/how-can-i-convert-a-decimal-year-value-into-a-date-in-ruby", "title": "How can I convert a decimal year value into a Date in Ruby?", "body": "<p>Input:</p>\n\n<blockquote>\n  <p>2015.0596924</p>\n</blockquote>\n\n<p>Desired output:</p>\n\n<blockquote>\n  <p>January 22, 2015 </p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "spring", "controller", "gemfile"], "comments": [{"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1427853567, "post_id": 29381568, "comment_id": 46942712, "body": "Run <code>bundle exec rails generate controller plans</code>; that will fix the issue. See <a href=\"http://stackoverflow.com/questions/6588674/what-does-bundle-exec-rake-mean\" title=\"what does bundle exec rake mean\">stackoverflow.com/questions/6588674/&hellip;</a> for the explanation."}, {"owner": {"reputation": 115, "user_id": 4736253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a37592a3a9d411cbd7120bfac405e36?s=128&d=identicon&r=PG&f=1", "display_name": "TheRailsRouter", "link": "https://stackoverflow.com/users/4736253/therailsrouter"}, "reply_to_user": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1427853907, "post_id": 29381568, "comment_id": 46942791, "body": "Already tried that:  &#39;bundle exec rails generate controller plans /Users/RentaroSatomi/.rbenv/versions/2.1.5/lib/ruby/gems/2.1&zwnj;&#8203;.0/gems/bundler-1.8.&zwnj;&#8203;0/lib/bundler/runtim&zwnj;&#8203;e.rb:34:in block in setup: You have already activated spring 1.3.3, but your Gemfile requires spring 1.3.1. Prepending bundle exec to your command may solve this. (Gem::LoadError)&#39;"}, {"owner": {"reputation": 598, "user_id": 1019579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a3iQz.jpg?s=128&g=1", "display_name": "bsvin33t", "link": "https://stackoverflow.com/users/1019579/bsvin33t"}, "edited": false, "score": 0, "creation_date": 1427854786, "post_id": 29381568, "comment_id": 46943009, "body": "First, stop spring using <code>bin&#47;spring stop</code> ; then remove spring <code>bin&#47;spring binstub --remove --all</code> ; Finally, do <code>bundle install</code> and <code>bundle exec spring binstub --all</code>. After this, run your generators."}], "answers": [{"tags": [], "owner": {"reputation": 3359, "user_id": 618467, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/624972b91564b142ec8481dde0b92898?s=128&d=identicon&r=PG", "display_name": "Tiago Farias", "link": "https://stackoverflow.com/users/618467/tiago-farias"}, "is_accepted": false, "score": 1, "last_activity_date": 1427854440, "creation_date": 1427854440, "answer_id": 29381743, "question_id": 29381568, "link": "https://stackoverflow.com/questions/29381568/trouble-starting-rails-application/29381743#29381743", "title": "Trouble starting rails application", "body": "<p>Try updating your Spring gem only. In your console:</p>\n\n<pre><code>bundle update spring\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4736253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4a37592a3a9d411cbd7120bfac405e36?s=128&d=identicon&r=PG&f=1", "display_name": "TheRailsRouter", "link": "https://stackoverflow.com/users/4736253/therailsrouter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1427854440, "creation_date": 1427853215, "last_edit_date": 1495542605, "question_id": 29381568, "link": "https://stackoverflow.com/questions/29381568/trouble-starting-rails-application", "title": "Trouble starting rails application", "body": "<p>I am very new to ruby on rails and I'm having this problem with creating a new controller for my \"plans\" resource:</p>\n\n<pre><code>rails generate controller plans\n/Users/RentaroSatomi/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.8.0/lib/bundler/runtime.rb:34:in \n'block in setup': You have already activated spring 1.3.3, \nbut your Gemfile requires spring 1.3.1. \nPrepending 'bundle exec' to your command may solve this. (Gem::LoadError)\n</code></pre>\n\n<p>The error says something about having a wrong spring version, but I really don't know how to fix this.</p>\n\n<p>*EDIT: Solved: <a href=\"https://stackoverflow.com/questions/28975233/gemloaderror-when-running-rails-console\">This post solved my problem</a></p>\n"}, {"tags": ["mysql", "ruby", "search", "nlp"], "answers": [{"tags": [], "owner": {"reputation": 4895, "user_id": 2518644, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/45bb1f11796208e1ca968c1c4ae22240?s=128&d=identicon&r=PG", "display_name": "user123", "link": "https://stackoverflow.com/users/2518644/user123"}, "is_accepted": false, "score": 1, "last_activity_date": 1427867785, "creation_date": 1427867785, "answer_id": 29383778, "question_id": 29381184, "link": "https://stackoverflow.com/questions/29381184/does-mysql-have-a-text-search-that-seems-to-work-like-googles/29383778#29383778", "title": "Does MySQL have a text search that seems to work like Google&#39;s?", "body": "<p>Google does searching by performing indexing on large n-gram data using solr(lucene). <a href=\"http://www.solrtutorial.com/basic-solr-concepts.html\" rel=\"nofollow\">see</a></p>\n\n<p>Using mysql with ruby you can do it but surely on large data it will not be that much fast and effective. But for small data, you would be happy to see result. </p>\n\n<p>A <code>database index</code> is a data structure that improves the speed of data retrieval operations on a database table at the cost of additional writes and storage space to maintain the index data structure. see <a href=\"http://en.wikipedia.org/wiki/Database_index\" rel=\"nofollow\">indexing</a></p>\n\n<p>There are various data structure techniques used for this indexing purpose. Those you can also apply on mysql with ruby. To get basic idea check this <a href=\"https://tomafro.net/2009/08/using-indexes-in-rails-index-your-associations\" rel=\"nofollow\">tutorial</a></p>\n\n<p>So if you have large data set, thta performing some indexing technique on that data, now when your search on that indexed data for your query <code>time travel robot</code> that it will automatically show you most related result.</p>\n"}], "owner": {"reputation": 153, "user_id": 4585639, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e0e3cab28479dbc48e63846f393ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Novice coder", "link": "https://stackoverflow.com/users/4585639/novice-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1427867785, "creation_date": 1427850260, "question_id": 29381184, "link": "https://stackoverflow.com/questions/29381184/does-mysql-have-a-text-search-that-seems-to-work-like-googles", "title": "Does MySQL have a text search that seems to work like Google&#39;s?", "body": "<p>I'm making a website where the backend uses MySQL and the Ruby gem Sinatra.</p>\n\n<p>My MySQL table has a <code>LONGTEXT</code> column with a <code>FULLTEXT</code> index.</p>\n\n<p>I've written a MySQL query that's basically this:</p>\n\n<pre><code>SELECT Plot \nFROM myTable\nWHERE MATCH(Plot) AGAINST('time travel robot')\n</code></pre>\n\n<p>The first result:</p>\n\n<p><code>Man on the Moon is a biographical movie on the late comedian Andy Kaufman. Kaufman, along with his role on Taxi (1978), was famous for being the self-declared Intergender Wrestling Champion of the world. After beating women time and time again, Jerry Lawler (who plays himself in the movie), a professional wrestler, got tired of seeing all of this and decided to challenge Kaufman to a match. In most of the matches the two had, Lawler prevailed with the piledriver, which is a move by spiking an opponent head-first into the mat. One of the most famous moments in this feud was in the early 80s when Kaufman threw coffee on Lawler on Late Night with David Letterman (1982), got into fisticuffs with Lawler, and proceeded to sue NBC.</code></p>\n\n<p>Even though I like this movie, it has nothing to do with time traveling or robots. </p>\n\n<p>I don't know Google's search algorithm, but I would like to know if MySQL has a search function that ranks results based on how close together the inputted words are. </p>\n\n<p>In my case, I'd like the most relevant results to have the words \"time,\" \"travel\" and \"robot\" as close together as possible. </p>\n\n<p>And it would be nice if my dream function could also get variations on the words, like \"travelling\" or \"robots.\"</p>\n\n<p>How much of this is possible with MySQL? Or with Ruby?</p>\n\n<p>Or should I go with something completely different?</p>\n"}, {"tags": ["ruby", "rake"], "answers": [{"comments": [{"owner": {"reputation": 888, "user_id": 1711374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8086a1c7be896ef8135736e71837e6fd?s=128&d=identicon&r=PG", "display_name": "Zane", "link": "https://stackoverflow.com/users/1711374/zane"}, "edited": false, "score": 0, "creation_date": 1475359632, "post_id": 29382509, "comment_id": 66915096, "body": "Interesting - if symbol vs. strings doesn&#39;t matter in dependencies, how does rake figure out if the dependency is a task or a file?"}], "tags": [], "owner": {"reputation": 455, "user_id": 613510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58479f76374a3ba3c69b9804163f39f4?s=128&d=identicon&r=PG", "display_name": "drbrain", "link": "https://stackoverflow.com/users/613510/drbrain"}, "is_accepted": true, "score": 3, "last_activity_date": 1427859988, "creation_date": 1427859988, "answer_id": 29382509, "question_id": 29381002, "link": "https://stackoverflow.com/questions/29381002/how-to-make-rake-task-dependent-on-file-and-another-task/29382509#29382509", "title": "How to make rake task dependent on file and another task", "body": "<p>What you've got works for me.  I can't diagnose further without output.</p>\n\n<p>Rakefile:</p>\n\n<pre><code>task :dependencies do\n  puts \"installing dependencies\"\nend\n\ntask build: ['dependencies', 'output.pdf']\n\nfile 'output.pdf' =&gt; ['dependencies', 'output.md'] do\n  File.write 'output.pdf', ''\nend\n</code></pre>\n\n<p>Running build:</p>\n\n<pre><code>$ ls\nRakefile    output.md\n$ rake -t build\n** Invoke build (first_time)\n** Invoke dependencies (first_time)\n** Execute dependencies\ninstalling dependencies\n** Invoke output.pdf (first_time)\n** Invoke dependencies \n** Invoke output.md (first_time, not_needed)\n** Execute output.pdf\n** Execute build\n$ ls\nRakefile    output.md   output.pdf\n</code></pre>\n\n<p>Running output.pdf:</p>\n\n<pre><code>$ rm output.pdf\n$ rake -t output.pdf\n** Invoke output.pdf (first_time)\n** Invoke dependencies (first_time)\n** Execute dependencies\ninstalling dependencies\n** Invoke output.md (first_time, not_needed)\n** Execute output.pdf\n$ ls\nRakefile    output.md   output.pdf\n</code></pre>\n\n<p>PS: Rake doesn't care about symbols vs strings in task or dependency names.</p>\n"}], "owner": {"reputation": 9296, "user_id": 2062384, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/mhRiG.jpg?s=128&g=1", "display_name": "Freedom_Ben", "link": "https://stackoverflow.com/users/2062384/freedom-ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1330, "favorite_count": 0, "accepted_answer_id": 29382509, "answer_count": 1, "score": 2, "last_activity_date": 1427859988, "creation_date": 1427849038, "question_id": 29381002, "link": "https://stackoverflow.com/questions/29381002/how-to-make-rake-task-dependent-on-file-and-another-task", "title": "How to make rake task dependent on file and another task", "body": "<p>I have two rake tasks that need to be dependent on a file, as well as another rake task.  Here is what I've tried:</p>\n\n<pre><code>task :dependencies do\n  # Install some pacman packages if necessary\nend\n\n# the :build task should be dependent on output.pdf and the dependencies task\ntask :build =&gt; [:dependencies, 'output.pdf']\n\n# the file task should also be dependent on dependencies (in case it's run directly)\nfile 'output.pdf' =&gt; [:dependencies, 'output.md'] do\n</code></pre>\n\n<p>How can I tell a file task to depend on another rake task <em>as well as</em> its input file?  Also, how can I tell a regular task to be dependent on a file task and a regular task?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "associations"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 4736170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aebd7bce8703ba5bf2d964bd06a5ee5?s=128&d=identicon&r=PG", "display_name": "Ben Chadfield", "link": "https://stackoverflow.com/users/4736170/ben-chadfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1427851057, "creation_date": 1427851057, "answer_id": 29381286, "question_id": 29380994, "link": "https://stackoverflow.com/questions/29380994/rails-scope-using-has-many-association/29381286#29381286", "title": "Rails scope using has_many association", "body": "<p>It looks like all you need to do is return the unique parents where either the parent restriction or the kid restriction is 1. </p>\n\n<p>I recommend using the rails console <code>rails c</code> to test and refine scopes. </p>\n\n<pre><code>scope :valid, -&gt; {\n  joins(:restrictions, kids: :restrictions).where(\"parents.restrictions = 1 OR kids.restrictions = 1).uniq\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 3676145, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8a4ec3cecd4ccf36df9373a11a998261?s=128&d=identicon&r=PG&f=1", "display_name": "marrock", "link": "https://stackoverflow.com/users/3676145/marrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427852950, "creation_date": 1427848976, "last_edit_date": 1427852950, "question_id": 29380994, "link": "https://stackoverflow.com/questions/29380994/rails-scope-using-has-many-association", "title": "Rails scope using has_many association", "body": "<p>I have three models defined as below:</p>\n\n<pre><code>class Parent &lt; ActiveRecord::Base\n  has_many :kids\n  has_many :restrictions\n\n  def has_valid_restriction?\n    self.restrictions.where(:type =&gt; 1).size &gt; 0\n  end\nend\n\nclass Kid &lt; ActiveRecord::Base\n  belongs_to :parent\n  has_many :restrictions\n\n  scope :valid, -&gt; {\n    includes(:restrictions).where(\"restriction.type = 1\")\n  }\nend\n\nclass Restriction &lt; ActiveRecord::Base\n  belongs_to :restricted_object #this can be kid or parent\nend\n</code></pre>\n\n<p>Kid has a scope called 'valid' which chooses the Kids having a restriction with type 1. I want to add a similar scope to Parent which chooses Parents which either have a restriction of type one or a valid Kid (i.e. a Kid with restriction of type 1).</p>\n\n<p>How can I create such a scope?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "login"], "comments": [{"owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "edited": false, "score": 0, "creation_date": 1465412035, "post_id": 29380865, "comment_id": 62895217, "body": "Is this problem solved? I am facing same problem."}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 279927, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bed3a2e462368eb830f167eda3e0983c?s=128&d=identicon&r=PG", "display_name": "Mason", "link": "https://stackoverflow.com/users/279927/mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1427861737, "creation_date": 1427861737, "answer_id": 29382750, "question_id": 29380865, "link": "https://stackoverflow.com/questions/29380865/how-can-i-fix-ruby-on-rails-app-on-heroku-which-cant-login-and-redirect-to-home/29382750#29382750", "title": "How can i fix Ruby on rails app on heroku which can&#39;t Login and redirect to homepage", "body": "<p>The question is pretty vague, so this is going to be more of a story about how to proceed and directions to take, rather than a straight answer, which there isn't enough information for.</p>\n\n<p>First off, you shouldn't be debugging on Heroku - i.e. in Production - unless you specifically need to, and if it needs to be debugged on Heroku, you should set up a staging environment separate from your production environment, at least once you have users. You need to set this app up to run on your local system, where it will be much easier and faster to debug, and won't disrupt any users of the app.</p>\n\n<p>On local, you can run the app with <code>rails server</code>, and it will run in debug mode, which reloads the whole app on every request, so that you don't even have to restart the server to see your changes. You can also use a Ruby debugger, such as <a href=\"https://www.jetbrains.com/ruby/\" rel=\"nofollow\">RubyMine</a> or <a href=\"https://github.com/pry/pry\" rel=\"nofollow\">pry</a>, to step through your code. It will also log much more detailed information to the standard output that you can use to help figure out what's going on.</p>\n\n<p>Next up, on a quick inspection, it appears that app is using the <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\">devise</a> gem to manage logins. This is generally an excellent choice. When you use the Devise login and other related actions, it generally puts any text result in the <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Flash.html\" rel=\"nofollow\">flash</a>. You will see this if you have a place set up in your view to display the flash. If you don't, then you should, and if you don't know what that is, then read up on it.</p>\n\n<p>Next up, how did you create the user that you're trying to log in as? You should take a look at your database to see if your user actually exists. Check the models to see which model is configured as the user, and what devise modules it is using. Depending on how things are configured, devise may not allow you to login unless you have clicked a confirmation link that it might have tried to email to you when you created the account - if you don't have email configured properly, or if you created the user in the database manually, you might not even notice that this is a problem without a lot of hard debugging.</p>\n"}], "owner": {"reputation": 459, "user_id": 478855, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a81fc444dffc6aefab013993d1bf118d?s=128&d=identicon&r=PG", "display_name": "Oudin", "link": "https://stackoverflow.com/users/478855/oudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427870697, "creation_date": 1427848114, "last_edit_date": 1427870697, "question_id": 29380865, "link": "https://stackoverflow.com/questions/29380865/how-can-i-fix-ruby-on-rails-app-on-heroku-which-cant-login-and-redirect-to-home", "title": "How can i fix Ruby on rails app on heroku which can&#39;t Login and redirect to homepage", "body": "<p>I recently installed <a href=\"https://github.com/catarse/\" rel=\"nofollow\">Catarse</a> a Ruby on rails based app on <a href=\"https://heroku.com\" rel=\"nofollow\">Heroku</a> which can be accessed here <a href=\"https://pure-depths-2749.herokuapp.com/en/\" rel=\"nofollow\">App Link</a></p>\n\n<p>I'm new to Heroku and ruby so any help I can get would be great. The problem I'm experiencing is after deploying the app I can't login. The username/email and password is entered then the login button is click I'm then redirected to the home page without any warning or error.</p>\n\n<p>How can I determine why I'm not able to login into the app on heroku and redirected to the homepage? </p>\n\n<p>The user was created with the following:</p>\n\n<pre><code>$ admin = User.new({\n    name: 'my-admin-name',\n    email: 'my-admin@email.com',\n    password: 'my-admin-password',\n    password_confirmation: 'my-admin-password'\n})\n\n$ admin.save\n</code></pre>\n\n<p>If I attempt to register using the same email on the registration page I will be prompted with \"Email has already been taken\" therefore the account exist. I just can't login</p>\n\n<p>Here are my logs:</p>\n\n<pre><code>    \\pure-depths-2749&gt;heroku logs\n2015-03-31T23:36:41.425513+00:00 app[web.1]: Warning. Error encountered while sa\nving cache bdca0af185630201ca4675edc62168d03c57e893/_webflow.scssc: can't dump a\nnonymous class #&lt;Class:0x007f9435a6e2a0&gt;\n2015-03-31T23:36:41.425538+00:00 app[web.1]:\n2015-03-31T23:36:43.945059+00:00 heroku[web.1]: Process running mem=514M(100.5%)\n\n2015-03-31T23:36:43.945059+00:00 heroku[web.1]: Error R14 (Memory quota exceeded\n)\n2015-03-31T23:36:46.482422+00:00 app[web.1]: Warning. Error encountered while sa\nving cache bdca0af185630201ca4675edc62168d03c57e893/_main.scssc: can't dump anon\nymous class #&lt;Class:0x007f9435a6e2a0&gt;\n2015-03-31T23:36:46.482428+00:00 app[web.1]:\n2015-03-31T23:36:46.976023+00:00 app[web.1]: Warning. Error encountered while sa\nving cache bdca0af185630201ca4675edc62168d03c57e893/_extra.sassc: can't dump ano\nnymous class #&lt;Class:0x007f9435a6e2a0&gt;\n2015-03-31T23:36:46.976029+00:00 app[web.1]:\n2015-03-31T23:36:47.213762+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_new_zendesk.html.slim (77.0ms)\n2015-03-31T23:36:47.266743+00:00 app[web.1]:   Rendered layouts/_facebook_sdk.ht\nml.slim (51.5ms)\n2015-03-31T23:36:47.365160+00:00 app[web.1]:   Rendered layouts/_crazzy_egg.html\n.slim (43.9ms)\n2015-03-31T23:36:47.475772+00:00 app[web.1]:   Rendered layouts/_mixpanel.html.s\nlim (29.5ms)\n2015-03-31T23:36:47.300936+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_webfont.html.slim (33.1ms)\n2015-03-31T23:36:47.476412+00:00 app[web.1]: Completed 404 Not Found in 19361ms\n(Views: 19167.3ms | ActiveRecord: 80.2ms)\n2015-03-31T23:36:47.415963+00:00 app[web.1]:   Rendered layouts/_analytics.html.\nslim (49.3ms)\n2015-03-31T23:36:47.491336+00:00 heroku[router]: sock=client at=error code=H18 d\nesc=\"Request Interrupted\" method=GET path=\"/en/password\" host=pure-depths-2749.h\nerokuapp.com request_id=3f99b7bd-3e6d-4c9b-a543-50a6869dfed7 fwd=\"140.216.561.79\n\" dyno=web.1 connect=1ms service=20034ms status=503 bytes=887\n2015-03-31T23:36:57.341447+00:00 heroku[router]: at=error code=H12 desc=\"Request\n timeout\" method=GET path=\"/en/projects\" host=pure-depths-2749.herokuapp.com req\nuest_id=6d0ffcd9-851d-4735-b22e-893fe4df0d9f fwd=\"140.216.561.79\" dyno=web.1 con\nnect=0ms service=30004ms status=503 bytes=0\n2015-03-31T23:36:59.165824+00:00 app[web.1]: E, [2015-03-31T23:36:59.115504 #3]\nERROR -- : worker=0 PID:7 timeout (31s &gt; 30s), killing\n2015-03-31T23:36:59.435932+00:00 app[web.1]: E, [2015-03-31T23:36:59.435793 #3]\nERROR -- : reaped #&lt;Process::Status: pid 7 SIGKILL (signal 9)&gt; worker=0\n2015-03-31T23:37:04.077839+00:00 app[web.1]: I, [2015-03-31T23:37:04.077503 #26]\n  INFO -- : worker=0 ready\n2015-03-31T23:37:10.765051+00:00 app[web.1]: Started GET \"/en/\" for 190.213.201.\n61 at 2015-03-31 23:37:10 +0000\n2015-03-31T23:37:18.274014+00:00 app[web.1]: Processing by ProjectsController#in\ndex as HTML\n2015-03-31T23:37:18.274112+00:00 app[web.1]:   Parameters: {\"locale\"=&gt;\"en\"}\n2015-03-31T23:37:19.356565+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_header.html.slim (53.2ms)\n2015-03-31T23:37:19.356618+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_header_big.html.slim (382.3ms)\n2015-03-31T23:37:19.402549+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/_card.html.slim (0.0ms)\n2015-03-31T23:37:19.419278+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/_card.html.slim (0.0ms)\n2015-03-31T23:37:19.556334+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_about.html.slim (40.6ms)\n2015-03-31T23:37:19.408945+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/_card.html.slim (0.0ms)\n2015-03-31T23:37:19.623912+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_newsletter.html.slim (23.8ms)\n2015-03-31T23:37:19.599052+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_navigate.html.slim (41.8ms)\n2015-03-31T23:37:19.514571+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_welcome.html.slim (35.4ms)\n2015-03-31T23:37:19.698225+00:00 heroku[router]: at=info method=GET path=\"/en/\"\nhost=pure-depths-2749.herokuapp.com request_id=3e6d7f2f-bfcd-4738-bf54-415c48fbc\n0c4 fwd=\"140.216.561.79\" dyno=web.1 connect=1ms service=9693ms status=200 bytes=\n5293\n2015-03-31T23:37:19.666087+00:00 app[web.1]:   Rendered layouts/_facebook_like.h\ntml.slim (40.8ms)\n2015-03-31T23:37:19.683414+00:00 app[web.1]:   Rendered layouts/_mixpanel.html.s\nlim (0.1ms)\n2015-03-31T23:37:19.682594+00:00 app[web.1]:   Rendered layouts/_crazzy_egg.html\n.slim (0.0ms)\n2015-03-31T23:37:19.681929+00:00 app[web.1]:   Rendered layouts/_facebook_sdk.ht\nml.slim (0.1ms)\n2015-03-31T23:37:19.679554+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_new_zendesk.html.slim (0.2ms)\n2015-03-31T23:37:19.667086+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_big.html.slim (223.6ms)\n2015-03-31T23:37:19.683079+00:00 app[web.1]:   Rendered layouts/_analytics.html.\nslim (0.2ms)\n2015-03-31T23:37:19.696467+00:00 app[web.1]: Completed 200 OK in 1410ms (Views:\n1212.2ms | ActiveRecord: 27.8ms)\n2015-03-31T23:37:19.667163+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/index.html.slim within layouts/catarse_bootstrap (1165.5ms)\n2015-03-31T23:37:19.682164+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_webfont.html.slim (0.0ms)\n2015-03-31T23:37:26.892033+00:00 app[web.1]: Started GET \"/assets/catarse_bootst\nrap/catarse-968ad7d0e8e4d26f16c27dc5a9825688.css\" for 140.216.561.79 at 2015-03-\n31 23:37:26 +0000\n2015-03-31T23:37:28.706465+00:00 app[web.1]: ** [NewRelic][03/31/15 23:37:28 +00\n00 web.1 (26)] INFO : Reporting to: https://rpm.newrelic.com/accounts/942472/app\nlications/7592593\n2015-03-31T23:37:33.275407+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/catarse_bootstrap/catarse-968ad7d0e8e4d26f16c27dc5a9825688.css\" host=pure-dept\nhs-2749.herokuapp.com request_id=b135f98f-45bd-4043-a82d-5349064802ca fwd=\"190.2\n13.201.61\" dyno=web.1 connect=0ms service=12594ms status=200 bytes=19713\n2015-03-31T23:37:33.726262+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/logo-footer-00a039e0442e9aa77f91154e110532f8.png\" host=pure-depths-2749.heroku\napp.com request_id=76dca22c-e129-4e62-8db2-ac50ffc1518a fwd=\"140.216.561.79\" dyn\no=web.1 connect=0ms service=5ms status=200 bytes=3717\n2015-03-31T23:37:33.719247+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/catarse_bootstrap/lupa-4c40ac88a951042d4320c89588a4d766.png\" host=pure-depths-\n2749.herokuapp.com request_id=0aa4c9b8-9231-4235-8526-645873e96e43 fwd=\"190.213.\n201.61\" dyno=web.1 connect=1ms service=5ms status=200 bytes=1472\n2015-03-31T23:37:33.724483+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/catarse_bootstrap/loader-5d70369784c2cebed69affb92554cd6b.gif\" host=pure-depth\ns-2749.herokuapp.com request_id=81c7bd5c-b50c-48d6-a600-0ab2e8ec071c fwd=\"140.216.561.79\" dyno=web.1 connect=1ms service=4ms status=200 bytes=51305\n2015-03-31T23:37:33.702919+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/catarse_bootstrap/icon-newsletter-3dbf29691958df54e9bf012f6e81553c.png\" host=p\nure-depths-2749.herokuapp.com request_id=2a536b61-e5a4-4b24-8fb1-b658d5870bf6 fw\nd=\"140.216.561.79\" dyno=web.1 connect=0ms service=2ms status=200 bytes=439\n2015-03-31T23:37:33.706281+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/icon-blog-cbf858f1a5578442d48b02dd95e74516.png\" host=pure-depths-2749.herokuap\np.com request_id=d058758d-fbbb-40bf-9059-4f24f2df738e fwd=\"140.216.561.79\" dyno=\nweb.1 connect=0ms service=9ms status=200 bytes=3843\n2015-03-31T23:37:34.035187+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/catarse_bootstrap/logo_big-0513a67968a6c77bf3e5373c8e413ae3.png\" host=pure-dep\nths-2749.herokuapp.com request_id=1a069451-f22a-4653-aff3-1ec402a30620 fwd=\"190.\n213.201.61\" dyno=web.1 connect=1ms service=338ms status=200 bytes=7300\n2015-03-31T23:37:35.190677+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/hero-home.jpg\" host=pure-depths-2749.herokuapp.com request_id=c5fda42f-97f2-4e\na2-8c48-60c2cc637a7c fwd=\"140.216.561.79\" dyno=web.1 connect=2ms service=16ms st\natus=200 bytes=93182\n2015-03-31T23:37:35.190597+00:00 app[web.1]: Started GET \"/assets/hero-home.jpg\"\n for 140.216.561.79 at 2015-03-31 23:37:35 +0000\n2015-04-01T00:07:32.238093+00:00 app[web.1]: Started GET \"/en/login\" for 190.213\n.201.61 at 2015-04-01 00:07:32 +0000\n2015-04-01T00:07:32.248833+00:00 app[web.1]:   Parameters: {\"locale\"=&gt;\"en\"}\n2015-04-01T00:07:32.248531+00:00 app[web.1]: Processing by Devise::SessionsContr\noller#new as HTML\n2015-04-01T00:07:32.677907+00:00 heroku[router]: at=info method=GET path=\"/en/lo\ngin\" host=pure-depths-2749.herokuapp.com request_id=e83580da-ee52-4b25-a231-3cff\n86251995 fwd=\"140.216.561.79\" dyno=web.1 connect=2ms service=456ms status=200 by\ntes=3406\n2015-04-01T00:07:32.609568+00:00 app[web.1]:   Rendered catarse_bootstrap/devise\n/shared/_header.html.slim (5.2ms)\n2015-04-01T00:07:32.631029+00:00 app[web.1]:   Rendered catarse_bootstrap/devise\n/sessions/new.html.slim within layouts/catarse_bootstrap (266.0ms)\n2015-04-01T00:07:32.666289+00:00 app[web.1]:   Rendered layouts/_facebook_sdk.ht\nml.slim (4.4ms)\n2015-04-01T00:07:32.673751+00:00 app[web.1]:   Rendered layouts/_crazzy_egg.html\n.slim (2.7ms)\n2015-04-01T00:07:32.683620+00:00 app[web.1]:   Rendered layouts/_mixpanel.html.s\nlim (3.9ms)\n2015-04-01T00:07:32.660363+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_new_zendesk.html.slim (5.3ms)\n2015-04-01T00:07:32.618198+00:00 app[web.1]:   Rendered catarse_bootstrap/devise\n/shared/_alert.html.slim (5.9ms)\n2015-04-01T00:07:32.669821+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_webfont.html.slim (2.6ms)\n2015-04-01T00:07:32.684292+00:00 app[web.1]: Completed 200 OK in 435ms (Views: 3\n27.4ms | ActiveRecord: 14.9ms)\n2015-04-01T00:07:32.678578+00:00 app[web.1]:   Rendered layouts/_analytics.html.\nslim (3.7ms)\n2015-04-01T00:07:33.380677+00:00 heroku[router]: at=info method=GET path=\"/asset\ns/catarse_bootstrap/logo_icon_catarse-85692282dc7620548f2847e5e7e6e5cb.png\" host\n=pure-depths-2749.herokuapp.com request_id=de81be15-415b-4a9e-8aff-4b91d4297276\nfwd=\"140.216.561.79\" dyno=web.1 connect=2ms service=3ms status=200 bytes=1568\n2015-04-01T00:07:39.951866+00:00 app[web.1]: Started POST \"/en/login\" for 140.216.561.79 at 2015-04-01 00:07:39 +0000\n2015-04-01T00:07:39.954445+00:00 app[web.1]: Processing by Devise::SessionsContr\noller#create as HTML\n2015-04-01T00:07:39.954483+00:00 app[web.1]:   Parameters: {\"utf8\"=&gt;\"\u221a\", \"authen\nticity_token\"=&gt;\"/rUsP9B9eYA1KuLG4XDl9tih99ux+B4zSPkeT4MhK/0=\", \"user\"=&gt;{\"email\"=\n&gt;\"useremail@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"1\"}, \"commit\n\"=&gt;\"Log me in\", \"locale\"=&gt;\"en\"}\n2015-04-01T00:07:39.955196+00:00 app[web.1]: Can't verify CSRF token authenticit\ny\n2015-04-01T00:07:40.609247+00:00 app[web.1]: Redirected to https://pure-depths-2\n749.herokuapp.com/en\n2015-04-01T00:07:40.598647+00:00 heroku[router]: at=info method=POST path=\"/en/l\nogin\" host=pure-depths-2749.herokuapp.com request_id=6659a072-2de9-4fdb-a78a-038\na07477473 fwd=\"140.216.561.79\" dyno=web.1 connect=1ms service=666ms status=302 b\nytes=528\n2015-04-01T00:07:40.609403+00:00 app[web.1]: Completed 302 Found in 655ms (Activ\neRecord: 19.9ms)\n2015-04-01T00:07:41.144458+00:00 app[web.1]: Started GET \"/en\" for 190.213.201.6\n1 at 2015-04-01 00:07:41 +0000\n2015-04-01T00:07:41.854964+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/_card.html.slim (0.0ms)\n2015-04-01T00:07:41.629591+00:00 app[web.1]: Processing by ProjectsController#in\ndex as HTML\n2015-04-01T00:07:41.865902+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/_card.html.slim (0.0ms)\n2015-04-01T00:07:41.629618+00:00 app[web.1]:   Parameters: {\"locale\"=&gt;\"en\"}\n2015-04-01T00:07:41.824286+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_header.html.slim (41.7ms)\n2015-04-01T00:07:41.824389+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_header_big.html.slim (70.6ms)\n2015-04-01T00:07:41.860880+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/_card.html.slim (0.0ms)\n2015-04-01T00:07:43.471706+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_navigate.html.slim (1.3ms)\n2015-04-01T00:07:43.529342+00:00 app[web.1]:   Rendered layouts/_crazzy_egg.html\n.slim (0.0ms)\n2015-04-01T00:07:43.512371+00:00 app[web.1]:   Rendered layouts/_facebook_like.h\ntml.slim (0.2ms)\n2015-04-01T00:07:43.446464+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_welcome.html.slim (29.7ms)\n2015-04-01T00:07:43.528566+00:00 app[web.1]:   Rendered layouts/_facebook_sdk.ht\nml.slim (0.3ms)\n2015-04-01T00:07:43.513779+00:00 app[web.1]:   Rendered catarse_bootstrap/projec\nts/index.html.slim within layouts/catarse_bootstrap (1762.5ms)\n2015-04-01T00:07:43.544384+00:00 app[web.1]:   Rendered layouts/_mixpanel.html.s\nlim (1.1ms)\n2015-04-01T00:07:43.527946+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_new_zendesk.html.slim (1.1ms)\n2015-04-01T00:07:43.470271+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_about.html.slim (23.3ms)\n2015-04-01T00:07:43.510538+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_newsletter.html.slim (28.8ms)\n2015-04-01T00:07:43.513489+00:00 app[web.1]:   Rendered catarse_bootstrap/shared\n/_footer_big.html.slim (96.9ms)\n2015-04-01T00:07:43.528854+00:00 app[web.1]:   Rendered catarse_bootstrap/layout\ns/_webfont.html.slim (0.0ms)\n2015-04-01T00:07:43.542880+00:00 app[web.1]:   Rendered layouts/_analytics.html.\nslim (1.1ms)\n2015-04-01T00:07:43.544992+00:00 app[web.1]: Completed 200 OK in 1915ms (Views:\n1787.5ms | ActiveRecord: 12.2ms)\n2015-04-01T00:07:43.587039+00:00 heroku[router]: at=info method=GET path=\"/en\" h\nost=pure-depths-2749.herokuapp.com request_id=5b147858-38f1-4bbe-8b5e-2523b2f899\na0 fwd=\"140.216.561.79\" dyno=web.1 connect=2ms service=2611ms status=200 bytes=5\n295\n2015-04-01T00:07:52.789200+00:00 heroku[web.1]: Error R14 (Memory quota exceeded\n)\n2015-04-01T00:07:52.789160+00:00 heroku[web.1]: Process running mem=536M(104.8%)\n</code></pre>\n"}, {"tags": ["ruby", "node.js", "ipc"], "answers": [{"tags": [], "owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "is_accepted": false, "score": 0, "last_activity_date": 1561048501, "creation_date": 1561048501, "answer_id": 56690418, "question_id": 29380745, "link": "https://stackoverflow.com/questions/29380745/efficient-ruby-and-node-js-communication-ipc/56690418#56690418", "title": "Efficient Ruby and Node.js communication/IPC", "body": "<p>spawn on demand is slow, Its more efficient if you keep ruby instance running always. whenever you need just invoice the remote methods of that instance. message queue like <a href=\"https://www.rabbitmq.com/\" rel=\"nofollow noreferrer\">RabbitMQ</a> or a lightweight http servers(<a href=\"http://sinatrarb.com/\" rel=\"nofollow noreferrer\">sinatra</a>) are good solutions.</p>\n"}], "owner": {"reputation": 2670, "user_id": 1067353, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/42fb205a2f8893b6d004e30b5080f61f?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1067353/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1561048501, "creation_date": 1427847324, "question_id": 29380745, "link": "https://stackoverflow.com/questions/29380745/efficient-ruby-and-node-js-communication-ipc", "title": "Efficient Ruby and Node.js communication/IPC", "body": "<p>I have a main Node.js API application that needs to generate a PDF file, the only mature PDF generator is Prawn PDF, which is written in Ruby.</p>\n\n<p>I basically need to spawn a Ruby process from Node.js, pass it an arbitrary JSON payload, then listen for contents returned by the Ruby process, and then download it in the browser.</p>\n\n<ol>\n<li><p>What would be the most efficient method for Node.js to spawn/start a Ruby process?</p></li>\n<li><p>How should Node.js pass information efficiently to the Ruby process? currently I am using a JSON payload, however, Ruby have to parse this, and I don't believe this is the fastest in terms of performance. Is there something more efficient that I can use to pass information between the two processes? </p></li>\n</ol>\n"}, {"tags": ["ruby", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 800, "user_id": 3045022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce69de3ea9c63374bee496668981e622?s=128&d=identicon&r=PG", "display_name": "koukouviou", "link": "https://stackoverflow.com/users/3045022/koukouviou"}, "is_accepted": false, "score": 1, "last_activity_date": 1427846453, "last_edit_date": 1427846453, "creation_date": 1427846312, "answer_id": 29380576, "question_id": 29380422, "link": "https://stackoverflow.com/questions/29380422/printing-multiple-arrays-in-one-line/29380576#29380576", "title": "Printing multiple arrays in one line", "body": "<p>In your code you have three nested loops which is the reason for getting the output you are getting. You only need to have one loop for printing the <em>i-th</em> element of <strong>each</strong> of your arrays like this:</p>\n\n<pre><code>chapter_num = ['Chapter 1', 'Chapter 2', 'Chapter 3']\nchapter_title = ['Numbers', 'Letters', 'Variables']\nchapter_page = ['page 1', 'page 72', 'page 118']\n\n#Prints chapter number\n(0..chapter_num.length-1).each do |i|\n  puts \"#{chapter_num[i].ljust 0} #{chapter_title[i].center 14} #{chapter_page[i].rjust 40}\"\nend\n</code></pre>\n\n<p>which prints out:</p>\n\n<pre><code>Chapter 1    Numbers                                       page 1\nChapter 2    Letters                                      page 72\nChapter 3   Variables                                    page 118\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 2, "last_activity_date": 1427850167, "last_edit_date": 1427850167, "creation_date": 1427849515, "answer_id": 29381082, "question_id": 29380422, "link": "https://stackoverflow.com/questions/29380422/printing-multiple-arrays-in-one-line/29381082#29381082", "title": "Printing multiple arrays in one line", "body": "<p>You could use the <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-zip\" rel=\"nofollow\"><code>Array::zip</code></a> method here:</p>\n\n<pre><code>chapter_num = ['Chapter 1', 'Chapter 2', 'Chapter 3']\nchapter_title = ['Numbers', 'Letters', 'Variables']\nchapter_page = ['page 1', 'page 72', 'page 118']\n\narr = chapter_num.zip(chapter_title, chapter_page)\narr.each { |el| puts \"#{el[0].ljust 0} #{el[1].center 14} #{el[2].rjust 40}\" }\n\n#=&gt; Chapter 1    Numbers                                       page 1\n#=&gt; Chapter 2    Letters                                      page 72\n#=&gt; Chapter 3   Variables                                    page 118\n</code></pre>\n\n<p>And--since <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-zip\" rel=\"nofollow\"><code>Array::zip</code></a> takes an optional block--you could do it in one line:</p>\n\n<pre><code>chapter_num.zip(chapter_title, chapter_page).each { |el| puts \"#{el[0].ljust 0} #{el[1].center 14} #{el[2].rjust 40}\" }\n</code></pre>\n"}], "owner": {"reputation": 866, "user_id": 308419, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xqVYZ.jpg?s=128&g=1", "display_name": "hfranco", "link": "https://stackoverflow.com/users/308419/hfranco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 29381082, "answer_count": 2, "score": 0, "last_activity_date": 1427918896, "creation_date": 1427845364, "last_edit_date": 1427918896, "question_id": 29380422, "link": "https://stackoverflow.com/questions/29380422/printing-multiple-arrays-in-one-line", "title": "Printing multiple arrays in one line", "body": "<p>I'm trying to print several arrays on one line. The first line is ok but the loop breaks down after that. I've tried going over it serveral times but no cigar. Here's the code:</p>\n\n<pre><code>chapter_num = ['Chapter 1', 'Chapter 2', 'Chapter 3']\nchapter_title = ['Numbers', 'Letters', 'Variables']\nchapter_page = ['page 1', 'page 72', 'page 118']\n\n#Prints chapter number\nchapter_num.each do |num|\n    print (num.ljust 0)\n\n    #Prints title\n    chapter_title.each do |title|\n            print (title.center 14)\n\n            #Prints page number\n            chapter_page.each do |page|\n                    puts (page.rjust 40)\n            end\n    end\nend\n</code></pre>\n\n<p>When I run the above code it looks like this:</p>\n\n<pre><code>Chapter 1   Numbers                                      page 1\n                             page 72\n                            page 118\n   Letters                                      page 1\n                             page 72\n                            page 118\n  Variables                                     page 1\n                             page 72\n                            page 118\nChapter 2   Numbers                                      page 1\n                             page 72\n                            page 118\n   Letters                                      page 1\n                             page 72\n                            page 118\n  Variables                                     page 1\n                             page 72\n                            page 118\nChapter 3   Numbers                                      page 1\n                             page 72\n                            page 118\n  Letters                                      page 1\n                             page 72\n                            page 118\nVariables                                     page 1\n                             page 72\n                            page 118\n</code></pre>\n\n<p>It's suppose to look like this:</p>\n\n<pre><code>Chapter 1   Numbers                                      page 1\nChapter 2   Letters                                     page 72\nChapter 3  Variables                                   page 118\n</code></pre>\n"}, {"tags": ["ruby", "braintree"], "comments": [{"owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1427905825, "post_id": 29380124, "comment_id": 46968428, "body": "I work at Braintree. Is this happening in the production or sandbox environment? In Sandbox, we don&#39;t act on the risk decision, so this is expected behavior if you aren&#39;t using the <a href=\"https://developers.braintreepayments.com/javascript+ruby/reference/general/testing#fraud-information\" rel=\"nofollow noreferrer\">fraud rejection card number</a>. This shouldn&#39;t happen in production."}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "reply_to_user": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1427923475, "post_id": 29380124, "comment_id": 46977907, "body": "This is in the sandbox. So the transaction will be rejected in production if risk data returns &quot;Decline&quot;?"}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "reply_to_user": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1427927786, "post_id": 29380124, "comment_id": 46979606, "body": "Will the transaction be rejected or approved (in production) if risk data returns &quot;Review&quot;?"}, {"owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1427985072, "post_id": 29380124, "comment_id": 47003293, "body": "In production, &quot;Decline&quot; RiskData will cause transactions to be rejected; &quot;Review&quot; RiskData will not. It&#39;s unlikely you&#39;ll ever see a status of &quot;Review&quot; in production unless you obtain your own merchant ID with Kount directly and set your own rules to trigger this response."}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "reply_to_user": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1428016958, "post_id": 29380124, "comment_id": 47019507, "body": "@agf Great, thanks for the info! You can answer the question to make it easier to find for others who are wondering."}, {"owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1428514496, "post_id": 29380124, "comment_id": 47197692, "body": "I&#39;ve reposted the content from from my comments as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "is_accepted": true, "score": 3, "last_activity_date": 1428514476, "creation_date": 1428514476, "answer_id": 29521513, "question_id": 29380124, "link": "https://stackoverflow.com/questions/29380124/braintree-transaction-is-successful-even-though-fraud-returns-decline/29521513#29521513", "title": "Braintree - Transaction is successful even though fraud returns &quot;Decline&quot;", "body": "<p><sub>I work at Braintree. If you have more questions, please <a href=\"https://support.braintreepayments.com/\" rel=\"nofollow\">reach out to our support team</a>.</sub></p>\n\n<p>In Sandbox, Braintree doesn't act on the risk decision, so this is expected behavior if you aren't using the <a href=\"https://developers.braintreepayments.com/javascript+ruby/reference/general/testing#fraud-information\" rel=\"nofollow\">fraud rejection card number</a>. </p>\n\n<p>In production, \"Decline\" RiskData will cause transactions to be rejected; \"Review\" RiskData will not. It's unlikely you'll ever see a status of \"Review\" in production unless you obtain your own merchant ID with Kount directly and set your own rules to trigger this response.</p>\n"}], "owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 29521513, "answer_count": 1, "score": 1, "last_activity_date": 1428514476, "creation_date": 1427843409, "last_edit_date": 1427846988, "question_id": 29380124, "link": "https://stackoverflow.com/questions/29380124/braintree-transaction-is-successful-even-though-fraud-returns-decline", "title": "Braintree - Transaction is successful even though fraud returns &quot;Decline&quot;", "body": "<p>I submit a transaction with a valid card but I make it trigger a \"Decline\" from RiskData by making a lot of transactions with that card quickly. The problem is that it still makes the transaction successful and submits it for settlement even when RiskData returns \"Decline\".</p>\n\n<p>Here is what Braintree has <a href=\"https://developers.braintreepayments.com/javascript+php/guides/fraud-tools\" rel=\"nofollow\">regarding a \"Decline\" RiskData</a>: </p>\n\n<blockquote>\n  <p>'Decline' - The transaction was declined due to fraud risk.</p>\n</blockquote>\n\n<p>Is this how it's supposed to function? Should I change the configuration to make it reject a transaction for \"Decline\"?</p>\n\n<p>Here is some reference:</p>\n\n<pre><code>#&lt;Braintree::SuccessfulResult transaction:#&lt;Braintree::Transaction id: \"xxxxx\"...&gt;\n#&lt;RiskData id: \"xxxxxxxxx\", decision: \"Decline\"&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1427846590, "post_id": 29380099, "comment_id": 46940958, "body": "This sort of question could have been answered by opening IRB and trying the lines. Please make IRB your first stop in figuring out how something works. You&#39;ll find you&#39;ll learn faster and better because you&#39;ll be able to experiment."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 2801360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8b45fe789e1a4db5aa70ac892c9de2c?s=128&d=identicon&r=PG&f=1", "display_name": "Hyunsoo Choi", "link": "https://stackoverflow.com/users/2801360/hyunsoo-choi"}, "edited": false, "score": 0, "creation_date": 1427843618, "post_id": 29380132, "comment_id": 46940089, "body": "So I guess I was pretty close. Thank you for your answer. Everything is clear now!"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 0, "last_activity_date": 1427846609, "last_edit_date": 1427846609, "creation_date": 1427843459, "answer_id": 29380132, "question_id": 29380099, "link": "https://stackoverflow.com/questions/29380099/what-does-file-newtemp-out-w-line-represent/29380132#29380132", "title": "What does file.new(&quot;temp.out&quot;, &quot;w&quot;) line represent?", "body": "<p>By default, <code>puts()</code> will send its output to what's called <em>stdout</em>, which is connected to your screen.  <code>File.new()</code> creates a new file which is assigned to the variable <code>fh</code>.  Because you created the file in <em>write mode</em>, you can use <code>fh</code> to write stuff to the file.  <code>fh.puts()</code> sends output to the file assigned to the variable <code>fh</code>.  In other words, a bare <code>puts()</code> statement sends output to your screen, but when you precede <code>puts()</code> with a file, the output goes to the file.</p>\n\n<p>You can also write those statements like this:</p>\n\n<pre><code>File.open(\"temp.out\", \"w\") do |f|\n  f.puts fahrenheit\nend\n</code></pre>\n\n<p>The neat thing about writing it like that is: when the <code>end</code> statement executes, Ruby will automatically close the file for you. </p>\n"}], "owner": {"reputation": 59, "user_id": 2801360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8b45fe789e1a4db5aa70ac892c9de2c?s=128&d=identicon&r=PG&f=1", "display_name": "Hyunsoo Choi", "link": "https://stackoverflow.com/users/2801360/hyunsoo-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 29380132, "answer_count": 1, "score": 1, "last_activity_date": 1427846609, "creation_date": 1427843249, "question_id": 29380099, "link": "https://stackoverflow.com/questions/29380099/what-does-file-newtemp-out-w-line-represent", "title": "What does file.new(&quot;temp.out&quot;, &quot;w&quot;) line represent?", "body": "<p>I'm learning the Ruby language and I'm having a lot of fun.\nI am currently working on the Temperature converter with file output exercise.</p>\n\n<p>The solution is provided below</p>\n\n<pre><code>print \"Hello. Please enter a Celsius value: \"\ncelsius = gets.to_i\nfahrenheit = (celsius * 9 / 5) + 32\nputs \"saving result to output file 'temp.out'\"\n</code></pre>\n\n<blockquote>\n  <p>fh = File.new(\"temp.out\", \"w\")</p>\n</blockquote>\n\n<pre><code>fh.puts fahrenheit\nfh.close\n</code></pre>\n\n<p>The highlighted part confuses me. <br />\nWe are calling <code>File.new</code> to create a file named <code>\"temp.out\"</code> and <code>\"w\"</code> write whatever inputs until we <code>fh.close</code>. Am I correct?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "node.js", "ruby-on-rails-4", "forever"], "comments": [{"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 0, "creation_date": 1427943946, "post_id": 29379943, "comment_id": 46983674, "body": "Are you looking for something to run processes in the background? You&#39;re probably looking for <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow noreferrer\">Sidekiq</a> or <a href=\"https://github.com/resque/resque\" rel=\"nofollow noreferrer\">Resque</a>. Both have great railscasts to get you started. <a href=\"http://railscasts.com/episodes/366-sidekiq?view=asciicast\" rel=\"nofollow noreferrer\">Sidekiq</a>. <a href=\"http://railscasts.com/episodes/271-resque\" rel=\"nofollow noreferrer\">Resque</a>."}], "answers": [{"tags": [], "owner": {"reputation": 61668, "user_id": 78182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/IHsGu.png?s=128&g=1", "display_name": "Stefan Kendall", "link": "https://stackoverflow.com/users/78182/stefan-kendall"}, "is_accepted": true, "score": 0, "last_activity_date": 1429811565, "creation_date": 1429811565, "answer_id": 29830899, "question_id": 29379943, "link": "https://stackoverflow.com/questions/29379943/npm-forever-equivalent-in-rails/29830899#29830899", "title": "npm forever equivalent in rails?", "body": "<p>Setup <a href=\"https://www.phusionpassenger.com/\" rel=\"nofollow\">passenger</a> and your rails app will run so long as apache is running.</p>\n"}], "owner": {"reputation": 61668, "user_id": 78182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/IHsGu.png?s=128&g=1", "display_name": "Stefan Kendall", "link": "https://stackoverflow.com/users/78182/stefan-kendall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 1, "accepted_answer_id": 29830899, "answer_count": 1, "score": 1, "last_activity_date": 1429811565, "creation_date": 1427842355, "question_id": 29379943, "link": "https://stackoverflow.com/questions/29379943/npm-forever-equivalent-in-rails", "title": "npm forever equivalent in rails?", "body": "<p>With node, I can use <code>forever</code> to keep a process running forever. What's the most popular equivalent in rails?</p>\n\n<p>I'm trying to avoid any overly complex or expensive setup right now so I'm really looking for a simple, cheap solution.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance", "ruby-on-rails-4", "heroku"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 1, "creation_date": 1428088083, "post_id": 29379682, "comment_id": 47045145, "body": "Have you set WEB_CONCURRENCY as an environment variable?"}, {"owner": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1428100466, "post_id": 29379682, "comment_id": 47049649, "body": "@DavidAldridge Looks like I have not set it. Kindly checkout the updated info."}, {"owner": {"reputation": 1573, "user_id": 1716509, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d615c9a0edef754228265dd35539245e?s=128&d=identicon&r=PG", "display_name": "Kristoffer", "link": "https://stackoverflow.com/users/1716509/kristoffer"}, "edited": false, "score": 0, "creation_date": 1428570707, "post_id": 29379682, "comment_id": 47221522, "body": "Regarding H18, check out <a href=\"http://stackoverflow.com/questions/12704777/how-should-i-interpret-heroku-h18-errors\" title=\"how should i interpret heroku h18 errors\">stackoverflow.com/questions/12704777/&hellip;</a>. They may be due to bad clients, such as mobile phones."}], "answers": [{"tags": [], "owner": {"reputation": 3508, "user_id": 561019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6fe758442b4e85798eea859dd671c90?s=128&d=identicon&r=PG", "display_name": "Nick Urban", "link": "https://stackoverflow.com/users/561019/nick-urban"}, "is_accepted": false, "score": 1, "last_activity_date": 1428557665, "last_edit_date": 1428557665, "creation_date": 1428362498, "answer_id": 29481254, "question_id": 29379682, "link": "https://stackoverflow.com/questions/29379682/rails-4-how-do-i-optimize-my-heroku-production-environment/29481254#29481254", "title": "Rails 4 - How do I optimize my Heroku production environment?", "body": "<p>The default unicorn configuration probably assumes that you are running on 1x dynos.</p>\n\n<p>Since you are using 2x dynos (as you should), you can increase the number of threads per dyno. Try setting WEB_CONCURRENCY to 5 and check the memory usage. </p>\n\n<p>You should also profile your application using a service like NewRelic to see which method calls are slow. </p>\n\n<p>By default, adding Heroku workers will not increase the speed of your application or eliminate errors. However, if you have slow operations in your application which could be run asynchronously (that are not required to generate the response -- for example, sending email), then you could use ActiveJob to queue them up for background processing, and you could use a Heroku Worker to perform the work.</p>\n"}, {"tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": false, "score": 2, "last_activity_date": 1428384594, "creation_date": 1428384594, "answer_id": 29484420, "question_id": 29379682, "link": "https://stackoverflow.com/questions/29379682/rails-4-how-do-i-optimize-my-heroku-production-environment/29484420#29484420", "title": "Rails 4 - How do I optimize my Heroku production environment?", "body": "<p>The question is not actually basic, this stuff is tricky.  It's not entirely clear to me why you'd be getting H12 (request timeout) and especially H18 (request interrupted) errors due to a <em>small</em> increase in traffic.  It would be worth trying to figure out what's going on -- for the H12's, looking at logs (or setting up logging with new relic), to figure out how long individual requests are taking to process. If an individual request not under load is taking more than a few seconds (which is already kind of long), you're probably going to want to work on figuring out why and speeding that up -- by modifying your actual app code to avoid these slow responses.  The H18's are even more mysterious to me. </p>\n\n<p>But if individual requests are reasonably speedy, and your problem really is just not enough processing power to handle your traffic (which I wouldn't neccesarily assume from what you've told us) -- then there are things you can do to make the most of the processing power you have available. Or you can also increase the number of dynos, definitely. If that's really the issue. </p>\n\n<p>To maximize usage of the resources you've got, I would use puma rather than unicorn -- <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server\" rel=\"nofollow\">puma is currently the heroku-recommended app server for Rails</a>.  </p>\n\n<p>puma, as the heroku docs explain, allows you to both run multiple Rails processes, as well as have each process process requests concurrently using multiple threads. Although multiple threaded request handling requires your app to be thread-safe -- Rails itself is, but your app code, or possibly gems you are using, may not be. Thread-safety in Rails is basically just about avoiding shared global state (class or module variables; globals), except read-only state set up on program boot (or global state that is properly synchronized for multi-threaded access).  </p>\n\n<p>Contrary to some other answers, I'm pretty sure Unicorn doesn't use multi-threading at all, it only uses multiple processes. Puma can run multiple processes which also each use multiple threads. </p>\n\n<p>For most typical Rails apps that spend non-trivial time waiting on I/O (typically the database), multi-threaded request handling is definitely the way to maximize throughput and minimize latency, within given hardware limits. Even with MRI ruby and it's \"global interpreter lock.\" For even better performance, deploy on JRuby or rubinius, which don't have a GIL. </p>\n\n<p>Either way, it's just a question of figuring out how many puma processes, with how many maximum threads each you can fit in your dyno without running out of memory. The heroku docs suggest that you can typically run 2-4 puma processes in a 1x dyno.  You could probably have each one with a maximum thread configuration of 2 or even 10 threads. </p>\n\n<p>The <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#workers\" rel=\"nofollow\">heroku puma docs</a> are pretty good, and should serve to give you an overview of the considerations. </p>\n\n<p>But this is all assuming, as your question did, that your issue with H12 and H18 errors from heroku is really that you need more processing power to handle your request traffic. I'm not certain that's really it, but it might be. </p>\n"}], "owner": {"reputation": 1529, "user_id": 4244691, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/APclN.jpg?s=128&g=1", "display_name": "LovingRails", "link": "https://stackoverflow.com/users/4244691/lovingrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1428557665, "creation_date": 1427840937, "last_edit_date": 1428100029, "question_id": 29379682, "link": "https://stackoverflow.com/questions/29379682/rails-4-how-do-i-optimize-my-heroku-production-environment", "title": "Rails 4 - How do I optimize my Heroku production environment?", "body": "<p>How can I increase my rails app performance and use the allocated heroku resources to the max? For instance, half of the memory remains unused.</p>\n\n<p>Should I have increase the worker process and reduce the timeout limit?\nH12 an H18 errors have increased after a small raise in traffic to the website.</p>\n\n<p>And when should I buy a Heroku worker? Will it reduce the H18 and H12 errors?</p>\n\n<p>Please share your insights to fine tune things to improve the performance and reduce the errors.</p>\n\n<p>I have started learning rails very recently. Sorry if the question is very basic.</p>\n\n<p><img src=\"https://i.stack.imgur.com/5BumH.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>config/unicorn.rb</strong>  </p>\n\n<pre><code># config/unicorn.rb\nworker_processes Integer(ENV[\"WEB_CONCURRENCY\"] || 3)\ntimeout 65\npreload_app true\n\nbefore_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'\n    Process.kill 'QUIT', Process.pid\n  end\n\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.connection.disconnect!\nend\n\nafter_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'\n  end\n\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\nruby   '2.1.4'\n.\n.\n.\ngroup :production do\n  gem 'pg', '0.17.1'\n  gem 'rails_12factor', '0.0.2'\n  gem 'unicorn'\nend\n</code></pre>\n\n<p>Some additional information.\n<img src=\"https://i.stack.imgur.com/Byn9P.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby", "string-substitution"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1427848511, "post_id": 29379374, "comment_id": 46941461, "body": "The Ruby convention is to use &quot;snake-case&quot; (lower case letters, digits and underscores) for names of variables and methods, so you&#39;d commonly see your method <code>readFile</code> written <code>read_file</code>. You don&#39;t have to do that, but 99% of the Ruby code you&#39;ll see follows that convention."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1427851376, "post_id": 29379374, "comment_id": 46942209, "body": "I suggest you post this over on codereview.stackexchange.com, you will get good advice on how to make it more clear, concise, and rubylike."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1427851497, "post_id": 29379374, "comment_id": 46942239, "body": "@MarkThomas <a href=\"https://codereview.stackexchange.com\">Code Review</a> expects posted code to be working as intended.  Everything else (including this, it seems) is considered off-topic."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1427851762, "post_id": 29379374, "comment_id": 46942313, "body": "What I meant was now that it is answered (and presumably working), there is an opportunity to improve it further."}, {"owner": {"reputation": 399, "user_id": 4457982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f46b0a7d1146b6c39820aad74799a234?s=128&d=identicon&r=PG&f=1", "display_name": "h3xc0ntr0l", "link": "https://stackoverflow.com/users/4457982/h3xc0ntr0l"}, "edited": false, "score": 0, "creation_date": 1427902924, "post_id": 29379374, "comment_id": 46966569, "body": "Thank you both, I actually didn&#39;t know that ruby convention existed (perhaps me naming the method that way is a leftover from my C days), and will certainly take your advice!"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 4457982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f46b0a7d1146b6c39820aad74799a234?s=128&d=identicon&r=PG&f=1", "display_name": "h3xc0ntr0l", "link": "https://stackoverflow.com/users/4457982/h3xc0ntr0l"}, "edited": false, "score": 0, "creation_date": 1427840247, "post_id": 29379419, "comment_id": 46939038, "body": "Hi; Thanks for that! I kinda figured that it had something to do with the way I was writing the string (as in, i realized that I was escaping my escape, writing &#39;\\&#39;, followed by a &#39;n&#39;, causing a \\n newline to be parsed). My question is actually more how to write a \\n to a file (or stdout, it doesn&#39;t matter, but I figured it&#39;d be the same either way) without it causing a newline to be parsed."}], "tags": [], "owner": {"reputation": 1724, "user_id": 112356, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04efe1ea20e62de5d5045265e4c30bbe?s=128&d=identicon&r=PG", "display_name": "Morgan", "link": "https://stackoverflow.com/users/112356/morgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1427842400, "last_edit_date": 1427842400, "creation_date": 1427839569, "answer_id": 29379419, "question_id": 29379374, "link": "https://stackoverflow.com/questions/29379374/how-to-actually-write-a-newline-to-a-string/29379419#29379419", "title": "How to actually write a newline to a string", "body": "<p>It depends on which platform you're using. Unix uses <code>\\n</code> as line ending characters, whereas windows uses <code>\\r\\n</code>. It looks like you're replacing all new line characters though with <code>\\\\n</code> which escapes the new line character which I would not expect to work on either platform.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 4457982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f46b0a7d1146b6c39820aad74799a234?s=128&d=identicon&r=PG&f=1", "display_name": "h3xc0ntr0l", "link": "https://stackoverflow.com/users/4457982/h3xc0ntr0l"}, "edited": false, "score": 0, "creation_date": 1427840397, "post_id": 29379554, "comment_id": 46939094, "body": "Worked like a charm. Thanks!"}], "tags": [], "owner": {"reputation": 1509, "user_id": 4731705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HB0F.png?s=128&g=1", "display_name": "Oleg K.", "link": "https://stackoverflow.com/users/4731705/oleg-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1427842374, "last_edit_date": 1427842374, "creation_date": 1427840189, "answer_id": 29379554, "question_id": 29379374, "link": "https://stackoverflow.com/questions/29379374/how-to-actually-write-a-newline-to-a-string/29379554#29379554", "title": "How to actually write a newline to a string", "body": "<p>Just remove <code>fixnewlines</code> and change <code>readFile</code>:</p>\n\n<pre><code>def readFile(path)\n  File.read(path).gsub(\"\\n\", '\\n')\nend\n</code></pre>\n\n<p>Hope it helps. On Windows use <code>\\r\\n</code> instead of <code>\\n</code>. There's no need to escape slashes inside single brackets.</p>\n"}], "owner": {"reputation": 399, "user_id": 4457982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f46b0a7d1146b6c39820aad74799a234?s=128&d=identicon&r=PG&f=1", "display_name": "h3xc0ntr0l", "link": "https://stackoverflow.com/users/4457982/h3xc0ntr0l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 29379554, "answer_count": 2, "score": 0, "last_activity_date": 1427842400, "creation_date": 1427839345, "question_id": 29379374, "link": "https://stackoverflow.com/questions/29379374/how-to-actually-write-a-newline-to-a-string", "title": "How to actually write a newline to a string", "body": "<p>How can I make this</p>\n\n<pre><code>content[i].gsub(\"\\n\", \"\\\\n\")\n</code></pre>\n\n<p>write (something like) this to a file</p>\n\n<pre><code>str = \"some text\\n\"\n</code></pre>\n\n<p>I'm writing a piece of code to take a file and build a single string out of it that can be inserted back into the source code your working with, if that helps at all</p>\n\n<p>If I'm mistaken and my error is actually somewhere else in the code, here is:</p>\n\n<pre><code>#!/bin/usr/ruby\n#reads a file and parses into a single string declaration in language of choice\n#another little snippet to make my job easier when writing lots of code\n#programmed by michael ward\n# h3xc0ntr0l@gmail.com | gists.github.com/michaelfward\n\n\n# ***************************************\n#              example scrips\n#  with writefiles \n#   | writefiles [file with paths] [file to write*]\n#   | makestring [file to write* (actually is read, but same as above)] [lang] \n#****************************************\n\n\ndef readFile(path)\n  fd = File.open(path, \"r\")\n  content = []\n  fd.each_line {|x| content.push(x)}\n  content = fixnewlines(content)\n  str = content.join()\n  str\nend\n\ndef fixnewlines(content)\n  content.each_index do |i|\n    content[i].gsub(\"\\n\", \"\\\\n\")\n  end\nend\n\ndef usage\n  puts \"makestring [file to read] [language output]\"\n  exit\nend\n\nlangs = {\"rb\"=&gt;\"str =\", \"js\" =&gt; \"var str =\", \"c\"=&gt; \"char str[] =\"}\n\nusage unless ARGV.length == 2\nlang = ARGV[1]\npath = ARGV[0]\nstr = readFile(path)\nif langs[lang] == nil\n  if lang == \"c++\" || lang == \"cpp\" || lang == \"c#\"\n    puts \"#{lang[c]}#{str}\"\n  else\n    puts \"unrecognized language found. supported languages are\"\n    langs.each_key {|k| puts \"   #{k}\"}\n    exit\n  end\nelse\n  puts \"#{langs[lang]} #{str}\"\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1427842700, "post_id": 29379377, "comment_id": 46939814, "body": "I updated the question.  Is that how I use includes?  Could I even do an includes earlier with the artist lookup?"}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1427843570, "post_id": 29379377, "comment_id": 46940079, "body": "@Ashbury You&#39;re on the right track for sure. Check out your Rails log to see the difference in the SQL queries, if you&#39;d like to see exactly what is going on."}], "tags": [], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "is_accepted": true, "score": 3, "last_activity_date": 1471644712, "last_edit_date": 1471644712, "creation_date": 1427839353, "answer_id": 29379377, "question_id": 29379326, "link": "https://stackoverflow.com/questions/29379326/rendering-many-partials-in-rails-500-is-slow/29379377#29379377", "title": "Rendering many partials in rails (500+) is slow", "body": "<p>Is the load coming from the SQL queries? Try pre-loading in your controller.</p>\n\n<pre><code>@songs = Song.all.includes(:artist,:title)\n</code></pre>\n\n<p>Then something like </p>\n\n<pre><code>@songs.each do |song|\n  # render logic here for each song\nend\n</code></pre>\n\n<p>In the includes you would put any related associations, which are not loaded automatically.</p>\n\n<p>This should make each partial rendering much faster, if SQL queries were your problem.</p>\n\n<p><strong>Further instructions to include from the first look up:</strong> </p>\n\n<pre><code>@artist = Artist.find(params[:id]).includes(:songs =&gt; [:members])\n@songs = @artist.songs.order('published_at DESC')\n</code></pre>\n\n<p>I believe this will do the trick for you. However what you had earlier would still be OK. Not sure if the brackets around \":members\" are required, but essentially you are saying, include Artist's songs, and for each song include it's members.</p>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 2321151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5160e89befa523f9fca0963398553b56?s=128&d=identicon&r=PG", "display_name": "pcm", "link": "https://stackoverflow.com/users/2321151/pcm"}, "is_accepted": false, "score": 1, "last_activity_date": 1427839372, "creation_date": 1427839372, "answer_id": 29379381, "question_id": 29379326, "link": "https://stackoverflow.com/questions/29379326/rendering-many-partials-in-rails-500-is-slow/29379381#29379381", "title": "Rendering many partials in rails (500+) is slow", "body": "<p>It sounds like you are possibly doing a database lookup for each song. Try to load all the song data in a single query. It may also help to post your view code if indeed the rendering is the bottleneck.</p>\n"}, {"tags": [], "owner": {"reputation": 748, "user_id": 3041946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223e166ce464a1537230c1600c03e71c?s=128&d=identicon&r=PG&f=1", "display_name": "Cremz", "link": "https://stackoverflow.com/users/3041946/cremz"}, "is_accepted": false, "score": 1, "last_activity_date": 1557998393, "creation_date": 1557998393, "answer_id": 56165083, "question_id": 29379326, "link": "https://stackoverflow.com/questions/29379326/rendering-many-partials-in-rails-500-is-slow/56165083#56165083", "title": "Rendering many partials in rails (500+) is slow", "body": "<p>I know it's been ages, but I thought an improvement to the current answers might help others as well</p>\n\n<pre><code>  .panel.panel-default\n    =render partial: 'song_listing', collection: @artist.songs, as: :song\n</code></pre>\n\n<p>This is much faster in terms of rendering. not as fast as inline rendering, but much better than doing a render for each item.</p>\n"}], "owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1820, "favorite_count": 0, "accepted_answer_id": 29379377, "answer_count": 3, "score": 3, "last_activity_date": 1557998393, "creation_date": 1427839121, "last_edit_date": 1427842487, "question_id": 29379326, "link": "https://stackoverflow.com/questions/29379326/rendering-many-partials-in-rails-500-is-slow", "title": "Rendering many partials in rails (500+) is slow", "body": "<p>I made a partial of a for a song model with <code>artist</code>, <code>title</code>, <code>duration</code>, <code>release</code> etc.</p>\n\n<p>I want to show all the artists songs on one page, sometimes they have a ton.  The query takes 0.08 seconds, but I also see this:</p>\n\n<pre><code>Rendered artist/_song_listing.html.haml (18.2ms)\nRendered artist/_song_listing.html.haml (8.5ms)\nRendered artist/_song_listing.html.haml (7.5ms)\nRendered artist/_song_listing.html.haml (9.6ms)\nRendered artist/_song_listing.html.haml (18.6ms)\nRendered artist/_song_listing.html.haml (12.6ms)\nRendered artist/_song_listing.html.haml (7.8ms)\nRendered artist/_song_listing.html.haml (19.5ms)\n</code></pre>\n\n<p>(etc etc)</p>\n\n<p>Ultimately this takes 14 seconds, which is way too long.</p>\n\n<p>Is it wrong to use partials in this way?  Is there any way to make this faster?</p>\n\n<p>Edit:</p>\n\n<p>ArtistController:</p>\n\n<pre><code>  def show\n\n    @artist = Artist.find(params[:id])\n    @songs = @artist.songs.order('published_at DESC').includes(:members)\n</code></pre>\n\n<p>show.html.haml:</p>\n\n<pre><code>  .panel.panel-default\n    - @artist.songs.each do |song|\n      =render 'song_listing', song: song\n</code></pre>\n\n<p>Exerpt from <code>_song_listing</code> (~500 times):</p>\n\n<pre><code>.row\n  .col-xs-12\n    .summary\n      -if song.summary.present?\n        =\"#{song.summary.sanitize.strip.gsub(\"\\u00A0\",\" \")}\"\n      -else\n        %i\n          No Summary\n\n.row\n  .col-xs-10\n    %ul.list-inline\n      - song.members.each do |member|\n        %li\n          %span\n            %img{src:\"#{member.image_url}\", width: '20px', height: '20px', class: 'img-circle'}\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "glib", "cairo", "poppler"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 576557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46e952a61c99d9eae4f21037a088fd?s=128&d=identicon&r=PG", "display_name": "user576557", "link": "https://stackoverflow.com/users/576557/user576557"}, "is_accepted": false, "score": 0, "last_activity_date": 1428079325, "creation_date": 1428079325, "answer_id": 29436226, "question_id": 29378710, "link": "https://stackoverflow.com/questions/29378710/glib2-failing-to-compile-for-gem-install-dependency-with-cairo-and-poppler/29436226#29436226", "title": "glib2 failing to compile for gem install dependency with cairo and poppler", "body": "<p>It sounds like you hit this bug <a href=\"https://github.com/ruby-gnome2/ruby-gnome2/issues/361\" rel=\"nofollow\">https://github.com/ruby-gnome2/ruby-gnome2/issues/361</a></p>\n"}], "owner": {"reputation": 591, "user_id": 1840741, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4a0d659f5bb932844b223b218eab6df?s=128&d=identicon&r=PG", "display_name": "bjm88", "link": "https://stackoverflow.com/users/1840741/bjm88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1301, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1428079325, "creation_date": 1427836450, "question_id": 29378710, "link": "https://stackoverflow.com/questions/29378710/glib2-failing-to-compile-for-gem-install-dependency-with-cairo-and-poppler", "title": "glib2 failing to compile for gem install dependency with cairo and poppler", "body": "<p>We are using Cairo and Poppler c libraries for come QR code stuff, and on unix/linux/ubuntu all is fine in production and test systems.  Developers on Mac OS X constantly have issue with these gems, like when we upgrade Mac OS x from 10.9 to 10.10, or upgrade ruby from 1.9 to 2.1.</p>\n\n<p>Our engineers are currently stuck on the latest issue with Ruby 2.1 Rail 3.2.21 and Mac OS x 10.10.  We have RVM, HomeBrew, MacPorts all setup.  I suspect issue with different gcc versions apple offers vs what mac ports installs...we have tried toggling symlinks, but are not really sure....</p>\n\n<p>Any ideas/thoughts welcome, thank you!</p>\n\n<pre><code>Ben$ gem install glib2 -v '2.1.0'\nBuilding native extensions.  This could take a while...\nERROR:  Error installing glib2:\n    ERROR: Failed to build gem native extension.\n\n    /Users/Ben/.rvm/rubies/ruby-2.1.5/bin/ruby -r ./siteconf20150331-23534-17ib06g.rb extconf.rb\nchecking for -Wall option to compiler... yes\nchecking for -Waggregate-return option to compiler... yes\nchecking for -Wcast-align option to compiler... yes\nchecking for -Wextra option to compiler... yes\nchecking for -Wformat=2 option to compiler... yes\nchecking for -Winit-self option to compiler... yes\nchecking for -Wlarger-than-65500 option to compiler... yes\nchecking for -Wmissing-declarations option to compiler... yes\nchecking for -Wmissing-format-attribute option to compiler... yes\nchecking for -Wmissing-include-dirs option to compiler... yes\nchecking for -Wmissing-noreturn option to compiler... yes\nchecking for -Wmissing-prototypes option to compiler... yes\nchecking for -Wnested-externs option to compiler... yes\nchecking for -Wold-style-definition option to compiler... yes\nchecking for -Wpacked option to compiler... yes\nchecking for -Wp,-D_FORTIFY_SOURCE=2 option to compiler... yes\nchecking for -Wpointer-arith option to compiler... yes\nchecking for -Wswitch-default option to compiler... yes\nchecking for -Wswitch-enum option to compiler... yes\nchecking for -Wundef option to compiler... yes\nchecking for -Wunsafe-loop-optimizations option to compiler... yes\nchecking for -Wwrite-strings option to compiler... yes\nchecking for rb_define_alloc_func() in ruby.h... yes\nchecking for rb_block_proc() in ruby.h... yes\nchecking for new allocation framework... yes\nchecking for attribute assignment... no\nchecking for Win32 OS... no\nchecking for gobject-2.0 version (&gt;= 2.12.0)... yes\nchecking for gthread-2.0... yes\nchecking for unistd.h... yes\nchecking for io.h... no\nchecking for g_spawn_close_pid() in glib.h... yes\nchecking for g_thread_init() in glib.h... yes\nchecking for g_main_depth() in glib.h... yes\nchecking for g_listenv() in glib.h... yes\nchecking for rb_check_array_type() in ruby.h... yes\nchecking for rb_check_hash_type() in ruby.h... yes\nchecking for rb_exec_recursive() in ruby.h... yes\nchecking for rb_errinfo() in ruby.h... yes\nchecking for rb_sourcefile() in ruby.h... yes\nchecking for rb_sourceline() in ruby.h... yes\nchecking for ruby_set_current_source() in ruby.h... no\nchecking for rb_thread_blocking_region() in ruby.h... yes\nchecking for ruby_native_thread_p() in ruby.h... yes\nchecking for rb_thread_call_with_gvl() in ruby.h... yes\nchecking for rb_str_new_cstr() in ruby.h... yes\nchecking for rb_gc_register_mark_object() in ruby.h... yes\nchecking for rb_exc_new_str() in ruby.h... yes\nchecking for curr_thread in ruby.h,node.h... no\nchecking for rb_curr_thread in ruby.h,node.h... no\ncreating ruby-glib2.pc\ncreating glib-enum-types.c\ncreating glib-enum-types.h\ncreating Makefile\n\n    make \"DESTDIR=\" clean\n\n    make \"DESTDIR=\"\n    compiling glib-enum-types.c\n    warning: unknown warning option '-Wunsafe-loop-optimizations'; did you mean '-Wunavailable-declarations'? [-Wunknown-warning-option]\n    glib-enum-types.c:1181:9: error: use of undeclared identifier 'G_WIN32_OS_ANY'\n          { G_WIN32_OS_ANY, \"G_WIN32_OS_ANY\", \"any\" },\n            ^\n    glib-enum-types.c:1182:9: error: use of undeclared identifier 'G_WIN32_OS_WORKSTATION'\n          { G_WIN32_OS_WORKSTATION, \"G_WIN32_OS_WORKSTATION\", \"workstation\" },\n            ^\n    glib-enum-types.c:1183:9: error: use of undeclared identifier 'G_WIN32_OS_SERVER'\n          { G_WIN32_OS_SERVER, \"G_WIN32_OS_SERVER\", \"server\" },\n            ^\n    1 warning and 3 errors generated.\n    make: *** [glib-enum-types.o] Error 1\n\n    make failed, exit code 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "heroku", "bootstrap-datetimepicker"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427838077, "post_id": 29378592, "comment_id": 46938211, "body": "Did you precompile assets for production?"}, {"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427838472, "post_id": 29378592, "comment_id": 46938387, "body": "Yes, I precompiled assets before deploying. I just re-precompiled and re-deployed, and it still looks the same."}, {"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427839052, "post_id": 29378592, "comment_id": 46938601, "body": "@Beartech just added some detail if that helps at all, thanks again"}], "answers": [{"tags": [], "owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "is_accepted": false, "score": 0, "last_activity_date": 1427839299, "last_edit_date": 1495542602, "creation_date": 1427839299, "answer_id": 29379363, "question_id": 29378592, "link": "https://stackoverflow.com/questions/29378592/bootstrap-date-picker-image-assets-not-displaying-when-deployed-on-heroku/29379363#29379363", "title": "Bootstrap date-picker image assets not displaying when deployed (on Heroku)", "body": "<p>Found the answer here <a href=\"https://stackoverflow.com/questions/20588786/glyphicon-works-locally-but-not-on-heroku\">Glyphicon works locally but not on Heroku</a> and here <a href=\"https://holarails.wordpress.com/2014/04/03/problem-twitter-bootstrap-glyphicons-not-show-in-heroku/\" rel=\"nofollow noreferrer\">https://holarails.wordpress.com/2014/04/03/problem-twitter-bootstrap-glyphicons-not-show-in-heroku/</a>.</p>\n\n<p>If anyone has a better solution (as it looks like using this can affect performance), I'd appreciate it!</p>\n"}], "owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435649902, "creation_date": 1427836052, "last_edit_date": 1435649902, "question_id": 29378592, "link": "https://stackoverflow.com/questions/29378592/bootstrap-date-picker-image-assets-not-displaying-when-deployed-on-heroku", "title": "Bootstrap date-picker image assets not displaying when deployed (on Heroku)", "body": "<p>I am using <code>gem 'bootstrap3-datetimepicker-rails', '~&gt; 3.1.3'</code> to include a date/time-picker in my web app, and it works in development, but when I deploy to Heroku the assets (icons) that the gem uses for up/down arrows and other icons are displaying as empty squares, as seen in this screenshot:</p>\n\n<p><img src=\"https://i.stack.imgur.com/NBUbE.png\" alt=\"enter image description here\"></p>\n\n<p>Any idea why these are displaying properly?</p>\n\n<p>This is how it should look:</p>\n\n<p><img src=\"https://i.stack.imgur.com/B5NQe.png\" alt=\"enter image description here\"></p>\n\n<p>I am using Rails 4, Ruby 2, and I am deployed on Heroku, thanks!</p>\n\n<p><strong>UPDATE:</strong> After looking at the Heroku logs, I see this error:</p>\n\n<p><code>ActionController::RoutingError (No route matches [GET] \"/assets/bootstrap/glyphicons-halflings-regular.tttf\")</code></p>\n\n<p>In my app, I have <code>\"/assets/bootstrap/glyphicons-halflings-regular-0469longseriesoflettersandnumbers.tttf\")</code>, which is why it's not finding it. What do these letters/numbers mean? Can I safely remove them from the names of the files in Sublime Text? Thanks again</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "vagrant", "virtualbox"], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 4352712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h58Q5.png?s=128&g=1", "display_name": "aonemd", "link": "https://stackoverflow.com/users/4352712/aonemd"}, "is_accepted": false, "score": 0, "last_activity_date": 1427841642, "creation_date": 1427841642, "answer_id": 29379825, "question_id": 29378437, "link": "https://stackoverflow.com/questions/29378437/installing-ruby-sudo-make-command-not-found-vagrant-virtualbox/29379825#29379825", "title": "Installing ruby sudo make command not found (Vagrant, Virtualbox)", "body": "<p>Maybe you don't have <strong>make</strong> installed on Ubuntu. You can install the package <strong>build-essential</strong> which will install <strong>make</strong> and other building tools. </p>\n\n<p><code>\nsudo apt-get install build-essential\n</code></p>\n\n<p>also, <a href=\"https://gorails.com/setup/ubuntu/14.10\" rel=\"nofollow\">here's a good reference</a> on installing Ruby, Ruby on Rails, and other tools on Ubuntu.</p>\n"}], "owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 699, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427841642, "creation_date": 1427835486, "question_id": 29378437, "link": "https://stackoverflow.com/questions/29378437/installing-ruby-sudo-make-command-not-found-vagrant-virtualbox", "title": "Installing ruby sudo make command not found (Vagrant, Virtualbox)", "body": "<p>I am trying to get a development environment up and running.  I installed virtualbox and then used vagrant with the hashicorp/precise32 box.  I access the VM through ssh and am trying to install the latest version of ruby.</p>\n\n<p>I pasted </p>\n\n<pre><code>wget -O ruby-install-0.5.0.tar.gz https://github.com/postmodern/ruby-install/archive/v0.5.0.tar.gz\ntar -xzvf ruby-install-0.5.0.tar.gz\ncd ruby-install-0.5.0/\nsudo make install\n</code></pre>\n\n<p>into the command line from <a href=\"https://github.com/postmodern/ruby-install#readme\" rel=\"nofollow\">https://github.com/postmodern/ruby-install#readme</a></p>\n\n<p>The prompt shows sudo make install and when I hit enter I get a message that says \"sudo: make: command not found.\"</p>\n\n<p>What am I doing wrong?</p>\n\n<p>I know there are boxes with ruby already setup but I wanted to go through the process myself so learn a bit along the way.</p>\n\n<p>A separate issue I came across was that this box has an outdated version of ubuntu.  When I try to upgrade it warns me not to do it over SSH.  Is there a better way?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 1, "last_activity_date": 1427837249, "last_edit_date": 1427837249, "creation_date": 1427836804, "answer_id": 29378787, "question_id": 29378402, "link": "https://stackoverflow.com/questions/29378402/confusion-between-the-rspec-before-after-hooks/29378787#29378787", "title": "Confusion between the RSpec before/after hooks", "body": "<p>Per the <a href=\"https://relishapp.com/rspec/rspec-core/docs/hooks/before-and-after-hooks\" rel=\"nofollow\">documentation</a>, <code>:context</code> and <code>:example</code> are aliased as <code>:all</code> and <code>:each</code> in rspec3.</p>\n\n<blockquote>\n  <p>Note: the :example and :context scopes are also available as :each and\n  :all, respectively. Use whichever you prefer.</p>\n</blockquote>\n\n<p>The <code>before :suite</code> scope is executed first and then the <code>:context</code> and <code>:example</code> scopes:</p>\n\n<pre><code>before :suite\nbefore :context\nbefore :example\nafter  :example\nafter  :context\nafter  :suite\n</code></pre>\n\n<p>Beyond that, I'd recommend reading the documentation, which includes working examples of specific testing scenarios.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 29378787, "answer_count": 1, "score": 1, "last_activity_date": 1427837249, "creation_date": 1427835351, "question_id": 29378402, "link": "https://stackoverflow.com/questions/29378402/confusion-between-the-rspec-before-after-hooks", "title": "Confusion between the RSpec before/after hooks", "body": "<p>I've been working with RSpec 3 for a few days and I realized I don't fully understand the before/after hooks that are provided. </p>\n\n<p>My confusion is in 2 areas -</p>\n\n<ol>\n<li>The various hook parameters available - <code>:suite</code>, <code>:context</code>, <code>:example</code>, <code>:all</code>, <code>:each</code> (am I missing any?). The first 3 appear to be new, as I've only ever seen the last two. Are the last two now deprecated and replace by the others? </li>\n<li>The scope that each of the above covers -\n<ul>\n<li>I'm guessing <code>before(:context)</code> and <code>before(:example)</code> run once before each <code>context</code> block and individual example. </li>\n<li>Does <code>before(:suite)</code> run once before ALL examples in a give <code>_spec</code> file? </li>\n<li>Does each <code>before(:xxx)</code> block apply to only the contexts and examples at its own nesting level and below? </li>\n</ul></li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1509, "user_id": 4731705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HB0F.png?s=128&g=1", "display_name": "Oleg K.", "link": "https://stackoverflow.com/users/4731705/oleg-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1427837032, "creation_date": 1427837032, "answer_id": 29378836, "question_id": 29378239, "link": "https://stackoverflow.com/questions/29378239/ruby-dynamically-construct-an-hash-from-another/29378836#29378836", "title": "Ruby: dynamically construct an hash from another", "body": "<p>Try using simple recursion:</p>\n\n<pre><code>require 'yaml'\nrequire 'awesome_print'\n\ndef travel(data)\n  if data['wtf_kind'] == 'string'\n    'random' #this should trigger the console session\n  else \n    r = Hash.new\n    data.each do |k, v|\n      r[k] = travel(data[k])\n    end\n    r\n  end\nend\n\n@data = YAML.load_file('example.yml')\nap travel(@data)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n\"global\" =&gt; {\n    \"redmine\" =&gt; {\n        \"site\" =&gt; \"random\",\n        \"user\" =&gt; \"random\",\n    \"password\" =&gt; \"random\"\n    }\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 1136762, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9533d6e60fef000480e7a2c70a50f914?s=128&d=identicon&r=PG", "display_name": "sekipaolo", "link": "https://stackoverflow.com/users/1136762/sekipaolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 29378836, "answer_count": 1, "score": 0, "last_activity_date": 1427840206, "creation_date": 1427834767, "last_edit_date": 1427840206, "question_id": 29378239, "link": "https://stackoverflow.com/questions/29378239/ruby-dynamically-construct-an-hash-from-another", "title": "Ruby: dynamically construct an hash from another", "body": "<p>Given a yaml file with sample values I need to iterate over it and construct another one editing some values throught interactive console steps. This is the code I was trying.</p>\n\n<pre><code>require 'yaml'\nrequire 'awesome_print'\n\ndef set_globals\n  @defaults = YAML.load_file('config.example.yml')\n  @globals = {}    \n  @defaults.each do |k, v|\n    set_value k, v, []\n  end\nend\n\ndef set_value k, v, chain\n  if v['wtf_kind'] &amp;&amp; v['wtf_kind'] == 'string'\n    set_key chain.push(k), 'random' #this should trigger the console session\n  else\n    set_value v.first.first, v.first.last, chain.push(k)\n  end\nend\n\ndef set_key chain, v\n  c = 0\n  last = {}\n  while c &lt;= chain.size\n    if c == chain.size\n      @globals.store(chain[c], v)\n    else \n      @globals.store(chain[c], {})\n    end\n    c += 1\n  end\nend\n\nset_globals\n\nap @globals\n</code></pre>\n\n<p>config.example.yaml</p>\n\n<pre><code>global:\n  redmine:\n    site: \n      wtf_kind: string\n      question: Redmine server url\n      default: http://redmineaddress.com\n\n    user: \n      wtf_kind: string\n      question: Redmine username\n      default: spitzname\n\n    password: \n      wtf_kind: string\n      question: Redmine password\n      default: changeme\n</code></pre>\n\n<p>what I get is: </p>\n\n<pre><code>{\n     \"global\" =&gt; {},\n    \"redmine\" =&gt; {},\n       \"site\" =&gt; {},\n          nil =&gt; \"random\"\n}\n</code></pre>\n\n<p>while I expect to get:</p>\n\n<pre><code>{\n  \"global\" =&gt; {\n    \"redmine\" =&gt; {\n       \"site\" =&gt; \"random\"\n     }\n   }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 219, "user_id": 2605153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/aRLer.jpg?s=128&g=1", "display_name": "Moh", "link": "https://stackoverflow.com/users/2605153/moh"}, "edited": false, "score": 0, "creation_date": 1446672697, "post_id": 29378196, "comment_id": 54846406, "body": "Did you solve it, Kevin? I am running into the same problem too."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 5546878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369cd7101ef422446725a2c5525657b4?s=128&d=identicon&r=PG&f=1", "display_name": "CraigM", "link": "https://stackoverflow.com/users/5546878/craigm"}, "is_accepted": false, "score": 2, "last_activity_date": 1447165589, "creation_date": 1447165589, "answer_id": 33632267, "question_id": 29378196, "link": "https://stackoverflow.com/questions/29378196/cannot-build-gem-for-ruby-on-rails/33632267#33632267", "title": "Cannot Build gem for Ruby on Rails", "body": "<p>Had the same problem attempting to build a gem.  Turns out I was using an out of date version of rubygems (2.2.5) with ruby 2.2.3. <a href=\"https://rubygems.org/pages/download\" rel=\"nofollow\">Upgrading rubygems</a> solved it for me. Rvm has a command for this:</p>\n\n<p><code>$ rvm rubygems latest</code> </p>\n"}], "owner": {"reputation": 53, "user_id": 4080169, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-oGEgRCCCBHU/AAAAAAAAAAI/AAAAAAAAACA/CfGoMAyLabs/photo.jpg?sz=128", "display_name": "Kevin Gleeson", "link": "https://stackoverflow.com/users/4080169/kevin-gleeson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504952840, "creation_date": 1427834572, "last_edit_date": 1592644375, "question_id": 29378196, "link": "https://stackoverflow.com/questions/29378196/cannot-build-gem-for-ruby-on-rails", "title": "Cannot Build gem for Ruby on Rails", "body": "<p>I cannot build a Ruby gem for some reason. I'm new to Ruby so not really sure what exactly is happening.</p>\n<h3>This is the output:</h3>\n<pre><code>$ bundle exec rake release\n\nrake aborted!\n/Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/psych/deprecated.rb:19:in `block in quick_emit': stack level too deep (SystemStackError)\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:2286:in `block (2 levels) in to_yaml'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/psych/coder.rb:36:in `map'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:2285:in `block in to_yaml'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/psych/deprecated.rb:19:in `call'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/psych/deprecated.rb:19:in `block in quick_emit'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:2286:in `block (2 levels) in to_yaml'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/psych/coder.rb:36:in `map'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:2285:in `block in to_yaml'\n     ... 9618 levels...\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/command_manager.rb:170:in `process_args'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/command_manager.rb:130:in `run'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/gem_runner.rb:60:in `run'\n    from /Users/kev/.rvm/rubies/ruby-2.2.0/bin/gem:21:in `&lt;main&gt;'\n/Users/kev/.rvm/gems/ruby-2.2.0/gems/bundler-1.9.2/lib/bundler/gem_helper.rb:155:in `sh'\n/Users/kev/.rvm/gems/ruby-2.2.0/gems/bundler-1.9.2/lib/bundler/gem_helper.rb:70:in `build_gem'\n/Users/kev/.rvm/gems/ruby-2.2.0/gems/bundler-1.9.2/lib/bundler/gem_helper.rb:39:in `block in install'\n/Users/kev/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `eval'\n/Users/kev/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; release =&gt; build\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "form-helpers"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 2, "creation_date": 1427833714, "post_id": 29377862, "comment_id": 46936078, "body": "Association between user and post ?"}, {"owner": {"reputation": 25, "user_id": 3818022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c1659c63da099f73c5cf35b0f8ebb1?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/3818022/bobby"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1427833929, "post_id": 29377862, "comment_id": 46936179, "body": "Post belongs_to User"}, {"owner": {"reputation": 8280, "user_id": 397816, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1856ab3b3c0ad1927c9c6cd9ef5a2184?s=128&d=identicon&r=PG&f=1", "display_name": "cristian", "link": "https://stackoverflow.com/users/397816/cristian"}, "edited": false, "score": 0, "creation_date": 1427833979, "post_id": 29377862, "comment_id": 46936203, "body": "&lt;%= p.text_field :post_name, :value =&gt; @post.user.name  %&gt;"}, {"owner": {"reputation": 25, "user_id": 3818022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c1659c63da099f73c5cf35b0f8ebb1?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/3818022/bobby"}, "edited": false, "score": 0, "creation_date": 1427835123, "post_id": 29377862, "comment_id": 46936779, "body": "Got it work thanks for everyone&#39;s help.  I passed the user id as a param when redirecting to the new_post_path and in the form I had the value be @user.name.  I also changed the controller to be fingind be user_id and not id, which I had before."}], "owner": {"reputation": 25, "user_id": 3818022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c1659c63da099f73c5cf35b0f8ebb1?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/3818022/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1427833418, "creation_date": 1427833418, "question_id": 29377862, "link": "https://stackoverflow.com/questions/29377862/passing-params-from-one-model-to-another", "title": "Passing params from one model to another", "body": "<p>I'm trying to pass params from one model to another when creating that other model.  </p>\n\n<p>For example, when you are listing out all users each user has this link to create a new post:</p>\n\n<pre><code>&lt;%= link_to \"create\", new_post_path %&gt;\n</code></pre>\n\n<p>When that link is clicked and you are redirected to the new_post_path I want to be able to display the name from the user as the value in the name input field.</p>\n\n<pre><code>&lt;%= form_for @post method: \"post\" do |p| %&gt;\n  &lt;%= p.label :post_name %&gt;\n  &lt;%= p.text_field :post_name, :value =&gt; #USER NAME HERE#  %&gt;\n  &lt;%= p.submit \"Create\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Ideas???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "byebug"], "comments": [{"owner": {"reputation": 3188, "user_id": 793309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31c1b21ab0ab74862e43fd636ecf2df9?s=128&d=identicon&r=PG", "display_name": "antinome", "link": "https://stackoverflow.com/users/793309/antinome"}, "edited": false, "score": 1, "creation_date": 1427852437, "post_id": 29376647, "comment_id": 46942488, "body": "I have the same problem, for what it&#39;s worth, but have not yet had a chance to come up with a minimal test case to file a bug report."}, {"owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "reply_to_user": {"reputation": 3188, "user_id": 793309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31c1b21ab0ab74862e43fd636ecf2df9?s=128&d=identicon&r=PG", "display_name": "antinome", "link": "https://stackoverflow.com/users/793309/antinome"}, "edited": false, "score": 1, "creation_date": 1427854154, "post_id": 29376647, "comment_id": 46942864, "body": "It&#39;s very strange. Are you using Ubuntu 14.04 by any chance ? I installed it a few days ago and didn&#39;t have this problem before."}, {"owner": {"reputation": 14629, "user_id": 21115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d5e190845525aa75c8da275c072c23be?s=128&d=identicon&r=PG", "display_name": "davetapley", "link": "https://stackoverflow.com/users/21115/davetapley"}, "edited": false, "score": 0, "creation_date": 1427911111, "post_id": 29376647, "comment_id": 46971253, "body": "Yep 14.04 here also."}], "answers": [{"comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 3, "creation_date": 1429066498, "post_id": 29397716, "comment_id": 47423330, "body": "For the record, it is in a release now - so you can <code>bundle update byebug</code> and get version 4.0.5 with the fix."}], "tags": [], "owner": {"reputation": 14629, "user_id": 21115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d5e190845525aa75c8da275c072c23be?s=128&d=identicon&r=PG", "display_name": "davetapley", "link": "https://stackoverflow.com/users/21115/davetapley"}, "is_accepted": true, "score": 6, "last_activity_date": 1427911485, "creation_date": 1427911485, "answer_id": 29397716, "question_id": 29376647, "link": "https://stackoverflow.com/questions/29376647/byebug-debugger-working-only-once-rails-4/29397716#29397716", "title": "ByeBug Debugger working only once [Rails 4]", "body": "<p>This has been <a href=\"https://github.com/deivid-rodriguez/byebug/issues/131\" rel=\"noreferrer\">reported and fixed</a>, but isn't in a release yet.</p>\n\n<p>To work around for now you update your <code>Gemfile</code> with:</p>\n\n<pre><code>gem 'byebug', github: 'deivid-rodriguez/byebug', branch: 'master'\n</code></pre>\n\n<p>Then <code>bundle update byebug</code> and restart your Rails server.</p>\n"}], "owner": {"reputation": 1628, "user_id": 3550480, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fs1BC.jpg?s=128&g=1", "display_name": "FranGoitia", "link": "https://stackoverflow.com/users/3550480/frangoitia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 1, "accepted_answer_id": 29397716, "answer_count": 1, "score": 7, "last_activity_date": 1427911485, "creation_date": 1427829283, "last_edit_date": 1427833103, "question_id": 29376647, "link": "https://stackoverflow.com/questions/29376647/byebug-debugger-working-only-once-rails-4", "title": "ByeBug Debugger working only once [Rails 4]", "body": "<p>I'm having the problem that byebug class are ignored after the first one. It's very strange.\nI start the server. Whenever there is a byebug statement, if it is the first one since the server has started, it will work. If not, it will say this message: <code>*** Byebug already started. Ignoring</code>byebug<code>call.</code> and  the only way for the debugger to work would be to restart the server (and it will only work once).</p>\n\n<p>Any help would be really appreciated.</p>\n\n<p>BTW, this happens with every project. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "time"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1427829501, "post_id": 29376582, "comment_id": 46933855, "body": "Checkout <a href=\"http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime\" rel=\"nofollow noreferrer\"><code>Time#strftime</code></a> using this you can format the string anyway you see fit."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427833629, "post_id": 29376582, "comment_id": 46936044, "body": "You should add an ActiceSupport or Rails tag.  That probably would prompt additional answers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427834727, "post_id": 29376582, "comment_id": 46936561, "body": "With no Rails or ActiveSupport tag, the implicit assumption is that you want a pure-Ruby solution.  Your example, however, suggests to those who know Rails that you are open to a solution that uses ActiveSupport methods. That&#39;s why you need an ActiveSupport or Rails tag. Also, readers who only look at questions with ActiveSupport or Rails tags may skip yours."}], "answers": [{"tags": [], "owner": {"reputation": 1121, "user_id": 3563504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iXEHR.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/3563504/klaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1427831221, "creation_date": 1427831221, "answer_id": 29377238, "question_id": 29376582, "link": "https://stackoverflow.com/questions/29376582/losing-information-while-converting-time-atts-in-time-zonetime-zone-to-strin/29377238#29377238", "title": "Losing information while converting Time.at(ts).in_time_zone(time_zone) to string", "body": "<p>As engineersmnky said, strftime is your friend:</p>\n\n<pre><code>time_string = time_string.to_time.strftime(\"%a, %d %b %Y %H:%M:%S PDT %z\")\n</code></pre>\n\n<p>But I'm not really sure about the zone %z!</p>\n"}, {"tags": [], "owner": {"reputation": 1507, "user_id": 1401154, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/87126923787dc1535b078e4e0428d336?s=128&d=identicon&r=PG", "display_name": "Karan Verma", "link": "https://stackoverflow.com/users/1401154/karan-verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1427849993, "last_edit_date": 1427849993, "creation_date": 1427831882, "answer_id": 29377458, "question_id": 29376582, "link": "https://stackoverflow.com/questions/29376582/losing-information-while-converting-time-atts-in-time-zonetime-zone-to-strin/29377458#29377458", "title": "Losing information while converting Time.at(ts).in_time_zone(time_zone) to string", "body": "<p>This works:</p>\n\n<pre><code>Time.now.in_time_zone(time_zone).strftime(\"%a, %d %b %Y %H:%M:%S %Z\")\n\"Tue, 31 Mar 2015 12:59:25 PDT\" \n</code></pre>\n"}], "owner": {"reputation": 1507, "user_id": 1401154, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/87126923787dc1535b078e4e0428d336?s=128&d=identicon&r=PG", "display_name": "Karan Verma", "link": "https://stackoverflow.com/users/1401154/karan-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427849993, "creation_date": 1427829063, "last_edit_date": 1427849929, "question_id": 29376582, "link": "https://stackoverflow.com/questions/29376582/losing-information-while-converting-time-atts-in-time-zonetime-zone-to-strin", "title": "Losing information while converting Time.at(ts).in_time_zone(time_zone) to string", "body": "<p>While converting a time in a certain time zone to string, I am loosing some information I need. </p>\n\n<p>Example:</p>\n\n<pre><code>ts = Time.now.to_i\ntime_zone = \"America/Los_Angeles\"\ntime = Time.now.in_time_zone(time_zone)\ntime_string = time.to_s\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>time \n#=&gt; Tue, 31 Mar 2015 12:05:03 PDT -07:00\ntime_string \n#=&gt; \"2015-03-31 12:05:03 -0700\"\n</code></pre>\n\n<p>How can I get time string to be equal to <code>Tue, 31 Mar 2015 12:05:03 PDT -07:00</code>? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "erb"], "answers": [{"tags": [], "owner": {"reputation": 1509, "user_id": 4731705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1HB0F.png?s=128&g=1", "display_name": "Oleg K.", "link": "https://stackoverflow.com/users/4731705/oleg-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1427831191, "creation_date": 1427831191, "answer_id": 29377227, "question_id": 29376336, "link": "https://stackoverflow.com/questions/29376336/porting-form-for-erb-tag-from-rails2-to-rails4/29377227#29377227", "title": "Porting form_for erb tag from Rails2 to Rails4", "body": "<p>Try putting Rails 4 code into a block. Define <em>rails4_stuff</em> somewhere in a helper:</p>\n\n<pre><code># application_helper.rb\n\ndef rails4_stuff\n yield if Rails::VERSION::STRING &lt; \"4\"\nend\n</code></pre>\n\n<p>And then in ERB:</p>\n\n<pre><code>&lt;% rails4_stuff do %&gt;\n &lt;% form_for(...) do |f| %&gt;\n &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 2907906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nL9pV.jpg?s=128&g=1", "display_name": "thescouser89", "link": "https://stackoverflow.com/users/2907906/thescouser89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 29377227, "answer_count": 1, "score": 0, "last_activity_date": 1427831191, "creation_date": 1427828159, "question_id": 29376336, "link": "https://stackoverflow.com/questions/29376336/porting-form-for-erb-tag-from-rails2-to-rails4", "title": "Porting form_for erb tag from Rails2 to Rails4", "body": "<p>I'm trying to port a Rails2 app to a Rails4 app(!). I am not keeping a separate branch for the port, but instead delimiting Rails4 specific API with an 'if' clause.</p>\n\n<pre><code>if Rails::VERSION::STRING &lt; \"4\"\n    # rails2 specific api call\nelse\n    # rails4 specific api call\nend\n</code></pre>\n\n<p>So far, this works really well for controllers and models. However, I'm having an issue with <code>erb</code> for Rails2.</p>\n\n<pre><code>&lt;% if Rails::VERSION::STRING &lt; \"4\" %&gt;\n    &lt;% form_for(...) do |f| %&gt;\n    &lt;% end %&gt;\n&lt;% else %&gt;\n    &lt;%= form_for(...) do |f| %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It fails since in Rails2, <code>erb</code> also evaluates the <code>else</code> clause and fails to render <code>&lt;%= form_for(...) do |f| %&gt;</code> because in Rails 2, the object returned by <code>form_for</code> has no <code>.to_s</code> method.</p>\n\n<p>Do you guys know any tips to work around this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "xcode", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 2520645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0299ad8d05b939c6bad2a2ddb56953e?s=128&d=identicon&r=PG", "display_name": "Malissa", "link": "https://stackoverflow.com/users/2520645/malissa"}, "is_accepted": false, "score": 1, "last_activity_date": 1427999749, "creation_date": 1427999749, "answer_id": 29420061, "question_id": 29375840, "link": "https://stackoverflow.com/questions/29375840/json-gem-install-fail-xcode-already-installed-and-up-to-date/29420061#29420061", "title": "Json gem install fail. Xcode already installed and up to date", "body": "<p>This just happened to me today on osx yosemite for the json 1.7.3 gem and I have no idea why.  I tried pretty much everything recommended for this problem - setting Archflags, updating command line tools, etc.  I believe the project I wanted to run was just too old (gem install json without the version worked just fine) and I gave up on it.  I frankly have no idea why bundle install was trying to load json 1.7.3 anyways.   </p>\n\n<p>Try using gemsets to keep all of your app dependencies separate from one another. Sometimes that fixes the problem.  </p>\n\n<pre><code>rvm gemset create [some name]\nrvm gemset use [some name]\nbundle install\n</code></pre>\n\n<p>I hope this helps!  I know it's not really an answer but stackoverflow won't let me comment until I have more reputation points.  I'll be following your question to see if anyone can give you an answer.</p>\n"}, {"tags": [], "owner": {"reputation": 679, "user_id": 498753, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e5af87c28b1e80b8a460f48ba528901?s=128&d=identicon&r=PG", "display_name": "Kris Robison", "link": "https://stackoverflow.com/users/498753/kris-robison"}, "is_accepted": false, "score": 1, "last_activity_date": 1429757961, "creation_date": 1429757961, "answer_id": 29812829, "question_id": 29375840, "link": "https://stackoverflow.com/questions/29375840/json-gem-install-fail-xcode-already-installed-and-up-to-date/29812829#29812829", "title": "Json gem install fail. Xcode already installed and up to date", "body": "<p>It appears that json-1.8.2 installs cleanly under ruby 2.2.2. I was running into the same issue previously.</p>\n"}, {"tags": [], "owner": {"reputation": 4159, "user_id": 1511546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5eeffe824d6a73bfd2274876f1a5c34b?s=128&d=identicon&r=PG", "display_name": "Dane Balia", "link": "https://stackoverflow.com/users/1511546/dane-balia"}, "is_accepted": false, "score": 0, "last_activity_date": 1430995634, "creation_date": 1430995634, "answer_id": 30098860, "question_id": 29375840, "link": "https://stackoverflow.com/questions/29375840/json-gem-install-fail-xcode-already-installed-and-up-to-date/30098860#30098860", "title": "Json gem install fail. Xcode already installed and up to date", "body": "<p>I had the very same issue and it was because my code (repo) was using an older version of Ruby.</p>\n\n<p>When I cd'd to the directory, I got this message:</p>\n\n<pre><code>furian:Hetzner danebalia$ cd X_installer/\nruby-1.9.3-p194 is not installed.\nTo install do: 'rvm install ruby-1.9.3-p194'\n</code></pre>\n\n<p>Upon installation of the missing version of Ruby, the error went away.</p>\n"}, {"tags": [], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "is_accepted": false, "score": 1, "last_activity_date": 1432915509, "last_edit_date": 1495539994, "creation_date": 1432915509, "answer_id": 30534148, "question_id": 29375840, "link": "https://stackoverflow.com/questions/29375840/json-gem-install-fail-xcode-already-installed-and-up-to-date/30534148#30534148", "title": "Json gem install fail. Xcode already installed and up to date", "body": "<p>Thats because that json version isn't compatible; try modifying the <code>Gemfile</code> to latest gem. See <a href=\"https://stackoverflow.com/a/29578293/2602869\">this answer</a>.</p>\n"}], "owner": {"reputation": 385, "user_id": 2202746, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4986163c7f32cf09c60f4d9d0779fa3?s=128&d=identicon&r=PG", "display_name": "DynastySS", "link": "https://stackoverflow.com/users/2202746/dynastyss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1432915509, "creation_date": 1427826540, "question_id": 29375840, "link": "https://stackoverflow.com/questions/29375840/json-gem-install-fail-xcode-already-installed-and-up-to-date", "title": "Json gem install fail. Xcode already installed and up to date", "body": "<p>I am getting the following errors when trying to run the bundler. </p>\n\n<pre><code>bundle install\nFetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/..\nUsing rake 10.0.4\nUsing i18n 0.6.1\nUsing multi_json 1.7.3\nUsing activesupport 3.2.13\nUsing builder 3.0.4\nUsing activemodel 3.2.13\nUsing erubis 2.7.0\nUsing journey 1.0.4\nUsing rack 1.4.5\nUsing rack-cache 1.2\nUsing rack-test 0.6.2\nUsing hike 1.2.2\nUsing tilt 1.4.1\nUsing sprockets 2.2.2\nUsing actionpack 3.2.13\nUsing mime-types 1.23\nUsing polyglot 0.3.3\nUsing treetop 1.4.12\nUsing mail 2.5.4\nUsing actionmailer 3.2.13\nUsing arel 3.0.2\nUsing tzinfo 0.3.37\nUsing activerecord 3.2.13\nUsing activeresource 3.2.13\nUsing coffee-script-source 1.6.2\nUsing execjs 1.4.0\nUsing coffee-script 2.2.0\nUsing rack-ssl 1.3.3\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /Users/camerons/.rvm/rubies/ruby-2.2.0/bin/ruby -r ./siteconf20150331-784-1yax4yj.rb extconf.rb \ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:47: error: too few arguments provided to function-like macro invocation\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n                                              ^\n/Users/camerons/.rvm/rubies/ruby-2.2.0/include/ruby-2.2.0/ruby/intern.h:793:9: note: macro 'rb_str_new' defined here\n#define rb_str_new(str, len) __extension__ (    \\\n        ^\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:11: warning: incompatible pointer to integer conversion initializing 'VALUE' (aka 'unsigned long') with an expression of type 'VALUE (const char *, long)' [-Wint-conversion]\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n          ^        ~~~~~~~~~~\n1 warning and 1 error generated.\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/camerons/.rvm/gems/ruby-2.2.0/gems/json-1.8.0 for inspection.\nResults logged to /Users/camerons/.rvm/gems/ruby-2.2.0/extensions/x86_64-darwin-14/2.2.0/json-1.8.0/gem_make.out\nAn error occurred while installing json (1.8.0), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.0'` succeeds before bundling.\n</code></pre>\n\n<p>I try running the gem install json 1.8.0 and get this error.</p>\n\n<pre><code>gem install json -v '1.8.0'\nBuilding native extensions.  This could take a while...\nERROR:  Error installing json:\n    ERROR: Failed to build gem native extension.\n\n    /Users/camerons/.rvm/rubies/ruby-2.2.0/bin/ruby -r ./siteconf20150331-884-1wle120.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:47: error: too few arguments provided to function-like macro invocation\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n                                              ^\n/Users/camerons/.rvm/rubies/ruby-2.2.0/include/ruby-2.2.0/ruby/intern.h:793:9: note: macro 'rb_str_new' defined here\n#define rb_str_new(str, len) __extension__ (    \\\n        ^\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:11: warning: incompatible pointer to integer conversion initializing 'VALUE' (aka 'unsigned long') with an expression of type 'VALUE (const char *, long)' [-Wint-conversion]\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n          ^        ~~~~~~~~~~\n1 warning and 1 error generated.\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/camerons/.rvm/gems/ruby-2.2.0/gems/json-1.8.0 for inspection.\nResults logged to /Users/camerons/.rvm/gems/ruby-2.2.0/extensions/x86_64-darwin-14/2.2.0/json-1.8.0/gem_make.out\n</code></pre>\n\n<p>I know it isn't xcode because it says it is already installed and I just ran the latest software update on it.</p>\n\n<p>Any advice would be greatly appreciated! </p>\n"}, {"tags": ["ruby", "arrays", "string", "sorting", "integer"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1427826254, "post_id": 29375643, "comment_id": 46931949, "body": "what should be the ideal value of <code>vaules</code>?"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1427826629, "post_id": 29375643, "comment_id": 46932186, "body": "from your first line of code posted in your question, what do you want to achieve?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1427826679, "post_id": 29375643, "comment_id": 46932217, "body": "you should store the cards like <code>Jack, Queen, King, Ace</code> as integers and then convert them to names as need be e.g. <code>FACE_CARDS = {11 =&gt; &quot;Jack&quot;, 12 =&gt; &quot;Queen&quot;, 13 =&gt; &quot;King&quot;, 14 =&gt; &quot;Ace&quot;}</code> then <code>def name;FACE_CARDS[value] || value;end</code> would work fine. e.g. <code>10</code> would return <code>10</code> where as <code>11</code> would return <code>&quot;Jack&quot;</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1427829068, "post_id": 29375643, "comment_id": 46933604, "body": "@shivam means that you should edit your question to add something like, &quot;My desired result is to return the array, <code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</code>&quot;, assuming that&#39;s what you want. I agree. It&#39;s not too late to do that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427829488, "post_id": 29375643, "comment_id": 46933846, "body": "I would remove the links. They don&#39;t add anything and are a distraction. Also, a small point, instead of &quot;turn strings in my array into an integer&quot;, you should say &quot;turn strings in my array into integers&quot; or, better, &quot;turn each string in my array into an integer&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 4500090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000045786087/picture?type=large", "display_name": "Dillon Cortez", "link": "https://stackoverflow.com/users/4500090/dillon-cortez"}, "edited": false, "score": 0, "creation_date": 1427826976, "post_id": 29375889, "comment_id": 46932397, "body": "Awesome! thank you! Do you have any references for documentation on regexp that I can read?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 176, "user_id": 4500090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000045786087/picture?type=large", "display_name": "Dillon Cortez", "link": "https://stackoverflow.com/users/4500090/dillon-cortez"}, "edited": false, "score": 0, "creation_date": 1427827654, "post_id": 29375889, "comment_id": 46932794, "body": "I added a link to my answer. The official docs give a quick crash course on them but regexps are basically an entire language of their own."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427828838, "post_id": 29375889, "comment_id": 46933478, "body": "Good answer. Putting it all together, <code>values.map { |e| (e.is_a? String) ? e[&#47;\\d+&#47;].to_i : e }.sort #=&gt; [1,2,...,14]</code>."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1427831381, "post_id": 29375889, "comment_id": 46934921, "body": "Hackier, but shorter, <code>e.to_s[&#47;\\d+&#47;].to_i</code>"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427833166, "post_id": 29375889, "comment_id": 46935845, "body": "I agree with the excellent use of regexp, but I still think the users problems are more based in their choice of data structure. If they aren&#39;t parsing someone else&#39;s data (which they might, maybe running through a bunch of hands that were recorded from earlier games that were scraped into a text file) then they should start with suitable data structure. If they are in fact writing some sort of card game, a regexp is just treating the symptom rather than the problem."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1427838436, "post_id": 29375889, "comment_id": 46938369, "body": "@Beartech I agree entirely but also sometimes you need to roll with what you have rather than completely restructure. Big lessons like data structures and maintainable design can be hard to learn when you&#39;re stuck on fundamentals like how <code>each</code> and <code>to_i</code> work."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1427827081, "last_edit_date": 1427827081, "creation_date": 1427826665, "answer_id": 29375889, "question_id": 29375643, "link": "https://stackoverflow.com/questions/29375643/ruby-turn-string-into-integer/29375889#29375889", "title": "Ruby Turn string into integer", "body": "<p>There are a couple misunderstandings here.</p>\n\n<h2>each</h2>\n\n<p><code>each</code> iterates through an array, passing each element to a block, and then returns the array itself. So <code>each</code> does not make any changes to the array (unless you specifically tell it to). Since your block just calls <code>to_i</code>, the end result is <code>numbers == hand</code>:</p>\n\n<pre><code>ary = [\"Jack(11)\", \"Queen(12)\", \"King(13)\", \"Ace(14)\"]\ntmp = ary.each { |card| card.to_i }\np tmp\n# [\"Jack(11)\", \"Queen(12)\", \"King(13)\", \"Ace(14)\"]\n</code></pre>\n\n<p>So you end up sorting an array containing numbers and strings, which is what your error is complaining about. You want to use <a href=\"http://ruby-doc.org/core-2.2.1/Array.html#method-i-map\" rel=\"nofollow\"><code>map</code></a>, which returns a new array using the results of the block.</p>\n\n<h2>to_i</h2>\n\n<p><code>to_i</code> does very simple conversion from string to integer: if the string starts with some digits (ignoring whitespace), it makes a number out of those digits. If the string doesn't start with digits, it returns 0:</p>\n\n<pre><code>\" 1 2\".to_i       # 1\n\"99bottles\".to_i  # 99\n\"match3\".to_i     # 0\n</code></pre>\n\n<p>Since your numbers are in the middle of the strings, you need something more advanced, like a <a href=\"http://ruby-doc.org/core-2.2.1/Regexp.html\" rel=\"nofollow\">regexp</a>, to extract them:</p>\n\n<pre><code>\"Jack(11)\"[/\\d+/].to_i # 11\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427828232, "post_id": 29376077, "comment_id": 46933130, "body": "I like your answer format here, but I&#39;d like it better if you formatted so that the reader doesn&#39;t have to scroll horizontally.  Aside: why do I want to call you &#39;Beartooth&#39;?"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1427829727, "post_id": 29376077, "comment_id": 46933977, "body": "I hate having to scroll too. What is the preferred method to post code that wraps but can still be copied and pasted? I&#39;ll admit Beartooth is probably a cooler name, LOL! Maybe I should switch."}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": false, "score": 0, "last_activity_date": 1427833762, "last_edit_date": 1427833762, "creation_date": 1427827293, "answer_id": 29376077, "question_id": 29375643, "link": "https://stackoverflow.com/questions/29375643/ruby-turn-string-into-integer/29376077#29376077", "title": "Ruby Turn string into integer", "body": "<p><strong>edit</strong> I've wrapped these long lines to make this post easy to read, must copy and paste into <code>irb</code> will suck. Sorry.   </p>\n\n<pre><code> values = (\"1\"..\"10\").to_a + [\"Jack(11)\", \"Queen(12)\", \"King(13)\",  \"Ace(14)\"]\n</code></pre>\n\n<p>returns: </p>\n\n<pre><code>[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"Jack(11)\", \n\n\"Queen(12)\", \"King(13)\", \"Ace(14)\"]\n</code></pre>\n\n<p>But values.sort will give:</p>\n\n<pre><code>[\"1\", \"10\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"Ace(14)\",\n \"Jack(11)\", \"King(13)\", \"Queen(12)\"]\n</code></pre>\n\n<p>So you can do:</p>\n\n<pre><code>values = (\"01\"..\"10\").to_a + [\"Jack(11)\", \"Queen(12)\", \"King(13)\", \"Ace(14)\"]\n</code></pre>\n\n<p>which will return:</p>\n\n<pre><code>[\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \n\n\"Jack(11)\", \"Queen(12)\", \"King(13)\", \"Ace(14)\"]\n</code></pre>\n\n<p>but still values.sort gives:</p>\n\n<pre><code>[\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"Ace(14)\",\n\n\"Jack(11)\", \"King(13)\", \"Queen(12)\"]\n</code></pre>\n\n<p>So finally you could do:</p>\n\n<pre><code>values = (\"01\"..\"10\").to_a + [\"(11)Jack\", \"(12)Queen\", \"(13)King\", \"(14)Ace\"]\n</code></pre>\n\n<p>wich gives:</p>\n\n<pre><code>[\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \n\n \"(11)Jack\", \"(12)Queen\", \"(13)King\", \"(14)Ace\"]\n</code></pre>\n\n<p>so you try values.sort and get...</p>\n\n<pre><code>[\"(11)Jack\", \"(12)Queen\", \"(13)King\", \"(14)Ace\", \"01\", \"02\", \"03\", \n\n\"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\"]\n</code></pre>\n\n<p>Darn it! Still not working. What does all this tell you? The array you are trying to use is the <strong>wrong</strong> data structure. Use a Hash and stop trying to sort anything:</p>\n\n<pre><code>values = {one: 1, two: 2, three: 3, four: 4, five: 5, six: 6, seven: 7,\n\n eight: 8, nine: 9, ten: 10, jack: 11, queen: 12, king: 13, ace: 14}\n\ndef straight(hand)\n  numbers = hand.values.sort\nend \n\nstraight(values)\n\n  #returns =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]\n</code></pre>\n\n<p>Look at all of the methods in the Hash and Enumerable classes. These will give you a huge arsenal of dealing with your hash of card values. Many of these methods will do something that you have already, or probably will do with a larger chunk of code.</p>\n\n<p>As I think about this, I would create a Hash as my dictionary, using strings instead of the written number as I show above:</p>\n\n<pre><code>Values = {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt; 3, \"4\" =&gt; 4, \"5\" =&gt; 5, \"6\" =&gt; 6,\n \"7\" =&gt; 7, \"8\" =&gt; 8, \"9\" =&gt; 9, \"10\" =&gt; 10, \"Jack\" =&gt; 11, \"Queen\" =&gt; 12,\n \"King\" =&gt; 13, \"Ace\" =&gt; 14} \n\n#note we are using a Constant now with \"Values\". We want to access this anywhere and for it to not change.\n</code></pre>\n\n<p>Then you can use the strings where you are displaying cards, but when you want to lookup a hand's value you can convert it to a numeric array:</p>\n\n<pre><code>hand = [\"2\", \"4\", \"10\", \"Ace\", \"King\"]\ndef hand_value(hand)\n  hand.map { |card| Values[card]}\nend\n    # =&gt; [2, 4, 10, 14, 13]\n</code></pre>\n\n<p>now you can manipulate the value of the hand any way you want. You can check to see if they are consecutive, sum them up, etc.</p>\n\n<p>To look up a value:</p>\n\n<pre><code>Values[\"King\"] #=&gt; 13\n</code></pre>\n\n<p>to do the reverse and look up a key:</p>\n\n<pre><code>Values.key(13) #=&gt; \"King\"\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 4500090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000045786087/picture?type=large", "display_name": "Dillon Cortez", "link": "https://stackoverflow.com/users/4500090/dillon-cortez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1427833762, "creation_date": 1427825908, "question_id": 29375643, "link": "https://stackoverflow.com/questions/29375643/ruby-turn-string-into-integer", "title": "Ruby Turn string into integer", "body": "<p>I'm trying to turn strings in my array</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>values = (1..10).to_a + [\"Jack(11)\", \"Queen(12)\", \"King(13)\", \"Ace(14)\"]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>into an integer, then sort the array with </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def straight(hand)\r\n  numbers = hand.each { |card| card.to_i }\r\n  numbers.sort\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and I keep getting the error</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>[\"Jack(11)\", 9, 10, \"Queen(12)\", \"Ace(14)\"]\r\n5carddraw.rb:58:in `sort': comparison of String with 10 failed (ArgumentError)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>can anyone tell me how I can make this work?</p>\n"}, {"tags": ["ruby", "list", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 0, "last_activity_date": 1427825833, "creation_date": 1427825833, "answer_id": 29375620, "question_id": 29375580, "link": "https://stackoverflow.com/questions/29375580/gets-chomp-find-a-string-in-a-list/29375620#29375620", "title": "gets.chomp find a string in a list", "body": "<p>To find if an element is present in an Array, you can use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-include-3F\" rel=\"nofollow\">include?</a>. Here:</p>\n\n<pre><code>if mult_of_three.include?(number)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>number = gets.chomp\n36\n# =&gt; \"36\" \n\nmult_of_three.include?(number)\n# =&gt; true \n\nnumber = gets.chomp\n98\n# =&gt; \"98\"\n\nmult_of_three.include?(number)\n# =&gt; false \n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4541810, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5NAmv.jpg?s=128&g=1", "display_name": "eSs", "link": "https://stackoverflow.com/users/4541810/ess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 29375620, "answer_count": 1, "score": -1, "last_activity_date": 1427825833, "creation_date": 1427825674, "last_edit_date": 1427825767, "question_id": 29375580, "link": "https://stackoverflow.com/questions/29375580/gets-chomp-find-a-string-in-a-list", "title": "gets.chomp find a string in a list", "body": "<p>Is it possible to find a string in a list for a <code>gets.chomp</code> for <code>if</code>, <code>elsif</code>?</p>\n\n<pre><code>def number_problem()\n\n  puts \"Please enter a number 1-100 for a phrase or word back!\"\n  number = gets.chomp\n\n  mult_of_three = [\"3\", \"6\", \"9\", \"12\", \"15\", \"18\", \"21\", \"24\", \"27\", \"30\", \"33\", \"36\", \"39\", \"42\", \"45\", \"48\", \"51\", \"54\", \"57\", \"60\", \"63\", \"66\", \"69\", \"72\", \"75\", \"78\", \"81\", \"84\", \"87\", \"90\", \"93\", \"96\", \"99\"]\n  mult_of_five = [\"5\", \"10\", \"15\", \"20\", \"25\", \"30\", \"35\", \"40\", \"45\", \"50\", \"55\", \"60\", \"65\", \"70\", \"75\", \"80\", \"85\", \"90\", \"95\", \"100\"]\n  mult_of_both = [\"15\", \"30\", \"45\", \"60\", \"75\", \"90\"]\n\n  if number == mult_of_three\n    puts \"Bit\"\n</code></pre>\n"}, {"tags": ["javascript", "mysql", "ruby-on-rails", "ruby", "ajax"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 4, "last_activity_date": 1427825771, "creation_date": 1427825771, "answer_id": 29375599, "question_id": 29375540, "link": "https://stackoverflow.com/questions/29375540/using-ajax-post-from-javascript-to-rails-4-controller-with-strong-parameter/29375599#29375599", "title": "Using AJAX POST from javascript to Rails 4 controller with Strong parameter", "body": "<p>You are not sending a song parameter at all.  It looks like you need to update the data line in the <code>jQuery.ajax</code> call to include the song parameter like so:</p>\n\n<pre><code>data: {song: {song_id: song_id, title: title}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2928, "user_id": 769971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JWve2.jpg?s=128&g=1", "display_name": "wholevinski", "link": "https://stackoverflow.com/users/769971/wholevinski"}, "is_accepted": false, "score": 1, "last_activity_date": 1427826238, "creation_date": 1427826238, "answer_id": 29375756, "question_id": 29375540, "link": "https://stackoverflow.com/questions/29375540/using-ajax-post-from-javascript-to-rails-4-controller-with-strong-parameter/29375756#29375756", "title": "Using AJAX POST from javascript to Rails 4 controller with Strong parameter", "body": "<p>This:</p>\n\n<pre><code>params.require(:song).permit(params[:song_id], params[:title])\n</code></pre>\n\n<p>is saying \"require the 'song' parameter, and allow 'song_id' and 'title' through. If you don't pass a song parameter, you'll get a bad request.</p>\n\n<p>You can either:</p>\n\n<ol>\n<li>Change that line of code to remove the require on 'song'</li>\n</ol>\n\n<p>or</p>\n\n<ol start=\"2\">\n<li>Like @infused says, change your ajax call to send a song JSON object.</li>\n</ol>\n"}], "owner": {"reputation": 344, "user_id": 3027437, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/04681374be02806ded977cab85c54a8b?s=128&d=identicon&r=PG&f=1", "display_name": "boated_tw", "link": "https://stackoverflow.com/users/3027437/boated-tw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1848, "favorite_count": 0, "accepted_answer_id": 29375599, "answer_count": 2, "score": 2, "last_activity_date": 1427826238, "creation_date": 1427825534, "question_id": 29375540, "link": "https://stackoverflow.com/questions/29375540/using-ajax-post-from-javascript-to-rails-4-controller-with-strong-parameter", "title": "Using AJAX POST from javascript to Rails 4 controller with Strong parameter", "body": "<p>I'm newbie with Rails</p>\n\n<p>My purpose is insert <code>song_id</code> and <code>title</code> which received from Javascript via AJAX POST into Database (MySQL)</p>\n\n<p><br>\nIn my javascript file </p>\n\n<pre><code>var song_id = \"23f4\";\nvar title = \"test\";\n\n$( document ).ready( function() {\njQuery.ajax({\n      url: 'create',\n      data: \"song_id=\" + song_id + \"&amp;title=\" + title,\n      type: \"POST\",\n      success: function(data) {\n        alert(\"Successful\");\n      },\n      failure: function() {\n        alert(\"Unsuccessful\");\n      }\n    }); \n} );\n</code></pre>\n\n<p><br>\nIn my editor_controller.rb</p>\n\n<pre><code>class EditorController &lt; ApplicationController\n\n  def new\n    @song = Song.new\n  end\n\n  def create\n    logger.debug(\"#{params[:song_id]}\")\n    logger.debug(\"#{params[:title]}\")\n    @song = Song.new(song_params)\n\n    if @song.save\n      redirect_to root_path\n    else\n      flash[:notice_song_failed] = true\n      redirect_to root_path\n    end \n  end\n\n  private   \n  def song_params\n    params.require(:song).permit(:song_id, :title)\n  end\n</code></pre>\n\n<p><br>\nThe problem is when I running the Rails app with this code, the Console notices me that </p>\n\n<blockquote>\n  <p>ActionController::ParameterMissing at /editor/create</p>\n  \n  <p>param is missing or the value is empty: song</p>\n</blockquote>\n\n<p><br>\nI'm trying to use </p>\n\n<pre><code>private \ndef song_params\n  params.require(:song).permit(params[:song_id], params[:title])\nend\n</code></pre>\n\n<p>but it doesn't work and notices me the same, moreover in the terminal log told me below</p>\n\n<blockquote>\n  <p>Started POST \"/editor/create\" for ::1 at 2015-04-01 01:07:23 +0700</p>\n  \n  <p>Processing by EditorController#create as <em>/</em></p>\n  \n  <p>Parameters: {\"song_id\"=>\"23f4\", \"title\"=>\"test\"}</p>\n  \n  <p>23f4</p>\n  \n  <p>test</p>\n  \n  <p>Completed 400 Bad Request in 1ms</p>\n</blockquote>\n\n<p><br>\nDo I missed something in my code, Thanks for Advance.</p>\n"}]