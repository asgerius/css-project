[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11149, "user_id": 706628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NICFY.jpg?s=128&g=1", "display_name": "Barry Fruitman", "link": "https://stackoverflow.com/users/706628/barry-fruitman"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 2, "creation_date": 1494459877, "post_id": 43904155, "comment_id": 74842542, "body": "@coreyward Way to close this question without even comparing it to the other answer. My input is not an array of key-value pairs but whatever."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1494460172, "post_id": 43904155, "comment_id": 74842599, "body": "Your question doesn&#39;t make sense. Where are <code>:foo1</code>, <code>:foo2</code> and <code>:foo3</code> supposed to come from? Is the code supposed to create a symbol for each element in the input array? Your question needs to state where they originate or why."}, {"owner": {"reputation": 11149, "user_id": 706628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NICFY.jpg?s=128&g=1", "display_name": "Barry Fruitman", "link": "https://stackoverflow.com/users/706628/barry-fruitman"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1494460578, "post_id": 43904155, "comment_id": 74842672, "body": "@theTinMan I&#39;d say that&#39;s obvious from the question."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 2, "creation_date": 1494515479, "post_id": 43904155, "comment_id": 74871975, "body": "@BarryFruitman Hi Barry, I did consider that, but ultimately ruled that the community would not benefit from addressing this question again (there are over a dozen similar) simply to assist you in understanding. You&#39;re welcome to ask again, but first please use search, address how your needs are different, and share <i>what you have tried already</i>."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494462704, "post_id": 43904202, "comment_id": 74843094, "body": "Could also be: <code>%w[ bar1 bar2 bar3 ].map { |v| [ v.sub(&#47;bar&#47;, &#39;foo&#39;).to_sym, v ] }.to_h</code>"}], "tags": [], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "is_accepted": true, "score": 2, "last_activity_date": 1494459431, "last_edit_date": 1494459431, "creation_date": 1494459094, "answer_id": 43904202, "question_id": 43904155, "link": "https://stackoverflow.com/questions/43904155/how-to-map-an-array-to-a-hash/43904202#43904202", "title": "How to map an array to a hash", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-zip\" rel=\"nofollow noreferrer\">#zip</a>.</p>\n\n<blockquote>\n  <p>foo.zip(bar).to_h</p>\n</blockquote>\n\n<pre><code>irb(main):003:0&gt; [:foo1, :foo2, :foo3].zip(['bar1', 'bar2', 'bar3']).to_h\n=&gt; {:foo1=&gt;\"bar1\", :foo2=&gt;\"bar2\", :foo3=&gt;\"bar3\"}\n</code></pre>\n\n<hr>\n\n<pre><code>irb(main):004:0&gt; b=['bar1', 'bar2', 'bar3']\n=&gt; [\"bar1\", \"bar2\", \"bar3\"]\nirb(main):005:0&gt; f=[:foo1, :foo2, :foo3]\n=&gt; [:foo1, :foo2, :foo3]\nirb(main):006:0&gt; f.zip(b).to_h\n=&gt; {:foo1=&gt;\"bar1\", :foo2=&gt;\"bar2\", :foo3=&gt;\"bar3\"}\nirb(main):007:0&gt; f.zip(b[0..2]).to_h\n=&gt; {:foo1=&gt;\"bar1\", :foo2=&gt;\"bar2\", :foo3=&gt;\"bar3\"}\nirb(main):009:0&gt; f.zip(b[0..1]).to_h\n=&gt; {:foo1=&gt;\"bar1\", :foo2=&gt;\"bar2\", :foo3=&gt;nil}\nirb(main):010:0&gt; f.zip(b[0..0]).to_h\n=&gt; {:foo1=&gt;\"bar1\", :foo2=&gt;nil, :foo3=&gt;nil}\nirb(main):011:0&gt; f.zip([]).to_h\n=&gt; {:foo1=&gt;nil, :foo2=&gt;nil, :foo3=&gt;nil}\n</code></pre>\n"}], "owner": {"reputation": 11149, "user_id": 706628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/NICFY.jpg?s=128&g=1", "display_name": "Barry Fruitman", "link": "https://stackoverflow.com/users/706628/barry-fruitman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "closed_date": 1494459482, "accepted_answer_id": 43904202, "answer_count": 1, "score": -2, "last_activity_date": 1494460242, "creation_date": 1494458727, "last_edit_date": 1494460242, "question_id": 43904155, "link": "https://stackoverflow.com/questions/43904155/how-to-map-an-array-to-a-hash", "closed_reason": "Duplicate", "title": "How to map an array to a hash", "body": "<p>I want to map an arbitrary Ruby Array to a Hash.</p>\n\n<p>Input:</p>\n\n<pre><code>['bar1', 'bar2', 'bar3']\n</code></pre>\n\n<p>(The array will have between zero and three elements.)</p>\n\n<p>Output:</p>\n\n<pre><code>{ foo1: 'bar1', foo2: 'bar2', foo3: 'bar3' }\n</code></pre>\n\n<p>I'm looking for the most elegant solution.</p>\n"}, {"tags": ["ruby", "regex", "linux"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 2, "creation_date": 1494456201, "post_id": 43903686, "comment_id": 74841619, "body": "Isn&#39;t the return value of system() the exit status of the program ? So maybe  test == 0 ? true : false;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1494456633, "post_id": 43903686, "comment_id": 74841739, "body": "I think if you use <i>bacticks</i> instead of <i>system()</i> you&#39;d get the stdout of the command."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1494456890, "post_id": 43903686, "comment_id": 74841816, "body": "&quot;system returns true if the command gives zero exit status, false for non zero exit status. Returns nil if command execution fails.&quot; <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.4.1/Kernel.html#method-i-system</a>. Backticks, <code>%x(...)</code>, or one of the <code>popen</code> or <code>Open3</code> commands would be more like what you want."}], "owner": {"reputation": 553, "user_id": 1887028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1b9a173ce55ae23c65bd22ecb088a66?s=128&d=identicon&r=PG&f=1", "display_name": "Kryten", "link": "https://stackoverflow.com/users/1887028/kryten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494518693, "creation_date": 1494455363, "last_edit_date": 1494518693, "question_id": 43903686, "link": "https://stackoverflow.com/questions/43903686/ruby-pattern-matching-when-making-a-system-call-in-linux", "title": "Ruby pattern matching when making a system call in linux", "body": "<p>Got stuck with a bit of code. I've researched a way to return true if my system call result matches a phrase set in a variable. I've tried a few things like converting the system call to string. Also, here's what I've tried so far:</p>\n\n<pre><code>def pattern_test\n  test = system('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"')\n  word = /String I Want To Match/i\n  puts test === word ? \"True\" : \"False\"\nend\npattern_test\n\ndef pattern_test2\n  test2 = system('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"')\n  word2 = \"String I Want To Match\"\n  puts test2 =~ word2 ? \"True2\" : \"False2\"\nend\npattern_test2\n\ndef pattern_test3\n  test3 = system('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"')\n  word3 = \"String I Want To Match\"\n  puts test3 =~ word3 ? \"True3\" : \"False3\"\nend\npattern_test3\n\ndef pattern_test4\n  test4 = system('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"').to_s\n  word4 = \"String I Want To Match\"\n  puts test4 === word4 ? \"True4\" : \"False4\"\nend\npattern_test4\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>String I Want To Match\nFalse\nString I Want To Match\nFalse2\nString I Want To Match\nFalse3\nString I Want To Match\nFalse4\n</code></pre>\n\n<p>My expected result would be a return of true since test and word match. </p>\n\n<p><strong>Update</strong></p>\n\n<p>I tried a few suggestions but they don't work either. Here are some more methods I've tried:\ndef pattern_test</p>\n\n<pre><code>test = `rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"`\n  word = /String I Want To Match/i\n  puts test === word ? \"True\" : \"False\"\nend\npattern_test\n\ndef pattern_test2\n  test2 = %x(rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\")\n  word2 = 'String I Want To Match'\n  puts test2 === word2 ? \"True\" : \"False\"\nend\npattern_test2\n\ndef pattern_test3\n  test3 = IO.popen('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"')\n  word3 = \"String I Want To Match\"\n  puts test3 === word3 ? \"True\" : \"False\"\nend\npattern_test3\n\ndef pattern_test4\n  test4 = system('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"')\n  word4 = 'String I Want To Match'\n  puts test4 === word4 ? \"True\" : \"False\"\nend\npattern_test4\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>False\nFalse\nFalse\nString I Want To Match\nFalse\n</code></pre>\n\n<p><strong>Update2</strong></p>\n\n<p>I forgot to test one more thing per comments. This works but I'm not sure it's the best way to proceed:</p>\n\n<pre><code>def pattern_test\n  test = system('rpm -q --queryformat \"%{SUMMARY}\\n\" some-package | grep -o \"String I Want To Match\"')\n  puts test4 == true ? \"True\" : \"False\"\nend\npattern_test\n</code></pre>\n"}, {"tags": ["ruby", "rake"], "comments": [{"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "edited": false, "score": 0, "creation_date": 1494472222, "post_id": 43903069, "comment_id": 74845223, "body": "Looks like the approach here achieves overriding the desc and behavior: <a href=\"http://metaskills.net/2010/05/26/the-alias-method-chain-of-rake-override-rake-task/\" rel=\"nofollow noreferrer\">metaskills.net/2010/05/26/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "edited": false, "score": 0, "creation_date": 1494456518, "post_id": 43903397, "comment_id": 74841705, "body": "By &quot;after the fact&quot; I mean &quot;further down in the code&quot;. So, it can&#39;t be directly above the <code>task</code> method."}, {"owner": {"reputation": 90, "user_id": 5472341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5dbe2071e88de9580a9e7c97b46880?s=128&d=identicon&r=PG&f=1", "display_name": "James.Oliver", "link": "https://stackoverflow.com/users/5472341/james-oliver"}, "reply_to_user": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "edited": false, "score": 0, "creation_date": 1494456953, "post_id": 43903397, "comment_id": 74841835, "body": "Oh, I misunderstood. No. The desc method is linked to the next task method.  Putting the desc method after the task results in the desc being assigned to the next task, or not at all if it&#39;s at the end of the rakefile. Having two desc methods results in the latter one over-riding the first. Out of curiosity, why can&#39;t you put it before the task method? There might be some sort of hack, but that&#39;s beyond my scope."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494457215, "post_id": 43903397, "comment_id": 74841905, "body": "Your &quot;after the fact&quot; comment needs to be in your question as if it&#39;d always been there. Add it so everyone else understands what you&#39;re talking about. (Don&#39;t use &quot;edit&quot; or &quot;update&quot; tags as we can tell what changed.) You should explain why you don&#39;t want it above the task where it&#39;s supposed to go."}], "tags": [], "owner": {"reputation": 90, "user_id": 5472341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5dbe2071e88de9580a9e7c97b46880?s=128&d=identicon&r=PG&f=1", "display_name": "James.Oliver", "link": "https://stackoverflow.com/users/5472341/james-oliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1494453634, "creation_date": 1494453634, "answer_id": 43903397, "question_id": 43903069, "link": "https://stackoverflow.com/questions/43903069/how-can-i-add-a-description-to-a-rake-task-after-it-has-been-defined/43903397#43903397", "title": "How can I add a description to a rake task after it has been defined?", "body": "<p>Yes you can add a desc after the fact as long as it's directly above the \"task\" method. </p>\n\n<p>The link to the Github repo is broken, but if you look <a href=\"http://www.rubydoc.info/github/YorickPeterse/ruby-lint/RubyLint%2FRakeTask:description\" rel=\"nofollow noreferrer\">at the source here</a>, you can see that desc is just appending a string when \n<code>rake -T</code> is called. </p>\n"}], "owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1494471739, "creation_date": 1494451887, "last_edit_date": 1494471739, "question_id": 43903069, "link": "https://stackoverflow.com/questions/43903069/how-can-i-add-a-description-to-a-rake-task-after-it-has-been-defined", "title": "How can I add a description to a rake task after it has been defined?", "body": "<p>A typical rake task definition looks like this:</p>\n\n<pre><code>desc \"Set the environment value for the database\"\ntask \"environment:set\" =&gt; [:environment, :load_config] do\n  ActiveRecord::InternalMetadata.create_table\n  ActiveRecord::InternalMetadata[:environment] = ActiveRecord::Migrator.current_environment\nend\n</code></pre>\n\n<p>But what if it doesn't have the <code>desc</code>, and I want to add it later on in the runtime, after the file with the task definitions has executed. Something like <code>desc \"this is the documentation\", task: :taskname</code>. Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 575, "user_id": 1576860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANQqj.jpg?s=128&g=1", "display_name": "chrisxrobertson", "link": "https://stackoverflow.com/users/1576860/chrisxrobertson"}, "is_accepted": false, "score": 1, "last_activity_date": 1509898459, "last_edit_date": 1509898459, "creation_date": 1494455254, "answer_id": 43903664, "question_id": 43902823, "link": "https://stackoverflow.com/questions/43902823/rails-how-create-a-fallback-helper/43903664#43903664", "title": "Rails how create a fallback helper?", "body": "<p>I think it is an issue with how you're organising and referencing your assets. From <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">the Rails docs</a>:</p>\n\n<blockquote>\n  <p>In regular views you can access images in the app/assets/images\n  directory like this:</p>\n  \n  <p><code>&lt;%= image_tag \"rails.png\" %&gt;</code></p>\n</blockquote>\n\n<p>And if you want to use the custom <code>fallback</code> folder:</p>\n\n<blockquote>\n  <p>Images can also be organized into subdirectories if required, and then\n  can be accessed by specifying the directory's name in the tag:</p>\n  \n  <p><code>&lt;%= image_tag \"icons/rails.png\" %&gt;</code></p>\n</blockquote>\n\n<p>So, move your <code>fallback</code> folder into <code>assets/images</code> and reference it with:</p>\n\n<p><code>&lt;%= image_tag \"fallback/small_foto.png\" %&gt;</code></p>\n"}], "owner": {"reputation": 21, "user_id": 7823659, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ba8fc72506870c8f2c045263f4d148e?s=128&d=identicon&r=PG&f=1", "display_name": "bookaka", "link": "https://stackoverflow.com/users/7823659/bookaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509898459, "creation_date": 1494450675, "last_edit_date": 1494451991, "question_id": 43902823, "link": "https://stackoverflow.com/questions/43902823/rails-how-create-a-fallback-helper", "title": "Rails how create a fallback helper?", "body": "<p>I'm trying to create a fallback helper for a object but on the page just shows the image broken link and the assets url. so, know how?</p>\n\n<pre><code>def display_image(pdata)  \n    unless pdata.nil? \n      image_tag(pdata.image) \n    else\n      image_tag(\"/assets/fallback/small_foto.png\")\n     end    \nend\n</code></pre>\n"}, {"tags": ["ruby", "email", "ssl", "jruby", "jruby-openssl"], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1494446721, "creation_date": 1494445704, "last_edit_date": 1494446721, "question_id": 43901532, "link": "https://stackoverflow.com/questions/43901532/how-to-set-mail-modules-ssl-tls-version-manually", "title": "How to set Mail module&#39;s SSL/TLS version manually", "body": "<p>I am working on fixing a SSL-related bug with the Ruby Mail module in JRuby. This Github issue explains (and provides a monkey patch to) this <a href=\"https://github.com/jruby/jruby/issues/3360#issuecomment-224403617\" rel=\"nofollow noreferrer\">bug</a>.</p>\n\n<p>The gist of the bug is that sometime after JRuby-1.7.19, a change was introduced that changes the Net::SMTP behavior with respect with MRI. In order to fix this issue, we must use the following TLS version <code>TLSv1_2_client</code> for <code>OpenSSL::SSL::SSLContext</code> in order to send mail through SSL/TLS. </p>\n\n<p>The person that opened an issue suggested the following monkey patch for the Mail module:</p>\n\n<pre><code>require 'net/smtp'\n\nclass &lt;&lt; Net::SMTP\n  remove_method :default_ssl_context # if defined?(Net::SMTP.default_ssl_context)\nend\n\nmodule Net\n  class SMTP\n    def SMTP.default_ssl_context\n      OpenSSL::SSL::SSLContext.new('TLSv1_2_client')\n    end\n  end\nend\n</code></pre>\n\n<p>I tried this, and it does fix the <code>Algorithm NONE</code> problem I had by monkey patching SSLContext to use <code>TLSv1_2_client</code>, but I am not liking this solution at all because it's:</p>\n\n<ol>\n<li>a monkey patch.</li>\n<li>it's applying a giant bandaid over the core issue, which is an incorrect TLS version being supplied. </li>\n</ol>\n\n<p>The solution I came up with for my app is that I simply have a dropdown populated by values in <code>OpenSSL::SSL::SSLCOntext::METHODS</code>. The output to <code>METHODS</code> is:</p>\n\n<pre><code>0&gt; OpenSSL::SSL::SSLContext::METHODS\n=&gt; [:TLSv1, :TLSv1_server, :TLSv1_client, :SSLv3, :SSLv3_server, :SSLv3_client, :SSLv23, :SSLv23_server, :SSLv23_client, :TLS, :TLSv1_1_server, :TLSv1_1_client, :TLSv1_1, :TLSv1_2, :TLSv1_2_server, :TLSv1_2_client]\n</code></pre>\n\n<p>Right now I intend to fork the Ruby Mail module, and modify the <code>smtp.rb</code> <a href=\"https://github.com/mikel/mail/blob/120f0b48c32fdab0fe659ff5c2fc15d96a2309ad/lib/mail/network/delivery_methods/smtp.rb#L135\" rel=\"nofollow noreferrer\">file</a> to allow myself to manually set the SSL version.</p>\n\n<p>I am okay with having to fork the Ruby Mail module and make the changes myself.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>OpenSSL::SSL::SSLContext::DEFAULT_PARAMS[:ssl_version] = :TLSv1_2_client\n</code></pre>\n\n<p>which did indeed set the default SSL version, but did not fix my issue. </p>\n\n<p>How can I manually set the SSL version without relying on a monkey patch like the above example? </p>\n"}, {"tags": ["ruby", "jekyll", "liquid", "jekyll-extensions"], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 3547541, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0a2bac33e61b59dccd0f9622be13a767?s=128&d=identicon&r=PG&f=1", "display_name": "mdlincoln", "link": "https://stackoverflow.com/users/3547541/mdlincoln"}, "edited": false, "score": 0, "creation_date": 1494517480, "post_id": 43909411, "comment_id": 74873483, "body": "Ah yes, a generator would make more sense as it could iterate over all the pages before finally raising an exception."}, {"owner": {"reputation": 304, "user_id": 3547541, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0a2bac33e61b59dccd0f9622be13a767?s=128&d=identicon&r=PG&f=1", "display_name": "mdlincoln", "link": "https://stackoverflow.com/users/3547541/mdlincoln"}, "edited": false, "score": 0, "creation_date": 1494517632, "post_id": 43909411, "comment_id": 74873584, "body": "The one benefit we&#39;re finding to the template / liquid filter solution, though, is that the logic can be defined via liquid markup. This site is edited by a number of contributors, and while they understand the liquid markup well enough to maintain and change its logic as needed, they&#39;d be less confident going in and changing rules within an extension written in ruby."}], "tags": [], "owner": {"reputation": 6654, "user_id": 690771, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3d3e8ce8b1c1dfdd10d21460386a2c05?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/690771/christian"}, "is_accepted": true, "score": 2, "last_activity_date": 1494488718, "creation_date": 1494488718, "answer_id": 43909411, "question_id": 43901429, "link": "https://stackoverflow.com/questions/43901429/raise-exceptions-during-a-jekyll-build-if-specified-yaml-fields-are-missing/43909411#43909411", "title": "Raise exceptions during a Jekyll build if specified YAML fields are missing?", "body": "<p>You could (ab)use a Generator to check all files before building. Here is how you could do it:</p>\n\n<pre><code>module MyModule\n\n  class WarningGenerator &lt; Jekyll::Generator\n    def generate(site)\n\n      errors = Array.new\n\n      site.posts.docs.each do |p|\n        unless p.data['my_property'].any? {\n           errors = \"On #{p.title}: My Property is missing\"\n\n        }\n      end\n\n      errors.each do |error|\n        puts error\n      end\n\n      raise \"There were errors\"\n    end\n  end\nend\n</code></pre>\n\n<p>Attention, this code is not tested :)</p>\n\n<p>It would walk through all your pages, checks for a specific property, adds a message to an array if it's not found and raises an error afterwards.</p>\n"}], "owner": {"reputation": 304, "user_id": 3547541, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0a2bac33e61b59dccd0f9622be13a767?s=128&d=identicon&r=PG&f=1", "display_name": "mdlincoln", "link": "https://stackoverflow.com/users/3547541/mdlincoln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 1, "accepted_answer_id": 43909411, "answer_count": 1, "score": 1, "last_activity_date": 1494488718, "creation_date": 1494445327, "question_id": 43901429, "link": "https://stackoverflow.com/questions/43901429/raise-exceptions-during-a-jekyll-build-if-specified-yaml-fields-are-missing", "title": "Raise exceptions during a Jekyll build if specified YAML fields are missing?", "body": "<p>I would like to build logic in to a Jekyll site so that pages of a certain <code>layout</code> will have their YAML validated, with the build erroring if specific fields are missing, or have the wrong type of value, etc.</p>\n\n<p>One workaround is through writing a kludgy plugin for a Liquid filter that simply takes an error message and raises an exception:</p>\n\n<pre><code>module Jekyll\n  module ExceptionFilter\n    def raise_error(msg)\n        bad_file = @context.registers[:page]['path']\n        err_msg = \"On #{bad_file}: #{msg}\"\n      raise err_msg\n    end\n  end\nend\n\nLiquid::Template.register_filter(Jekyll::ExceptionFilter)\n</code></pre>\n\n<p>Then, within a template, for example, I can include this:</p>\n\n<pre><code>{% unless page.necessary_field %}\n    {{ \"You're missing necessary_field\" | raise_error }}\n{% endunless %}\n</code></pre>\n\n<p>This sort of gets the job done. </p>\n\n<p>One problem I have is that the build process halts immediately on finding one error. I would love to be able to continue the build across all the .md files in the repo, and collect a list of the errors across all pages to display at the end. <a href=\"http://jekyllrb.com/docs/configuration/#liquid-options\" rel=\"nofollow noreferrer\">Based on the Jekyll docs</a>, I thought that <code>liquid: error_mode: warn</code> in <code>_config.yml</code> would do this, but it does not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 4, "creation_date": 1494443190, "post_id": 43900709, "comment_id": 74835509, "body": "Rule one when working with HTML or XML, is to use a parser, not regular expressions. While there are trivial cases where it&#39;s possible, doing so is fragile and likely to break if the markup changes. See <a href=\"http://stackoverflow.com/q/1732348/128421\">stackoverflow.com/q/1732348/128421</a>."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 4, "last_activity_date": 1494457845, "last_edit_date": 1494457845, "creation_date": 1494444124, "answer_id": 43901095, "question_id": 43900709, "link": "https://stackoverflow.com/questions/43900709/how-to-remove-all-the-br-from-the-first-paragraph-and-last-using-regex/43901095#43901095", "title": "How to remove all the &lt;br&gt; from the first paragraph and last using regex", "body": "<p>Don't use regular expressions. Instead use a parser:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML::DocumentFragment.parse(&lt;&lt;EOT)\n&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;apple&lt;/p&gt;\n&lt;p&gt;bananas&lt;/p&gt;\n&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n&lt;p&gt;tomatoes&lt;/p&gt;\n&lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\nEOT\n\np_tags = doc.search('p')\n[:first, :last].each { |s| p_tags.send(s).search('br').remove }\ndoc.to_html\n</code></pre>\n\n<p>Which would result in the fragment looking like:</p>\n\n<pre><code># =&gt; \"&lt;p&gt;apple&lt;/p&gt;\\n\" +\n#    \"&lt;p&gt;bananas&lt;/p&gt;\\n\" +\n#    \"&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\\n\" +\n#    \"&lt;p&gt;tomatoes&lt;/p&gt;\\n\" +\n#    \"&lt;p&gt;berry&lt;/p&gt;\\n\"\n</code></pre>\n\n<p>Parsers are much more able to cope with changing HTML so if you're going to do any HTML changes or scraping it pays off to learn how to use them.</p>\n\n<p>An alternate way to do what you want without a parser or a complicated regex is:</p>\n\n<pre><code>str = &lt;&lt;EOT\n&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;apple&lt;/p&gt;\n&lt;p&gt;bananas&lt;/p&gt;\n&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n&lt;p&gt;tomatoes&lt;/p&gt;\n&lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\nEOT\n\nstr_lines = str.lines\n[0, -1].each { |i| str_lines[i].gsub!(/&lt;br&gt;/, '') }\nputs str_lines.join\n</code></pre>\n\n<p>Which results in the same thing.</p>\n\n<p>The strength of the first method is that it won't care if the <code>&lt;br&gt;</code> mysteriously change to <code>&lt;br/&gt;</code> as in HTML5, or <code>&lt;br &gt;</code>.</p>\n\n<p>Finally, if you doubly insist on using a longer, more complicated, pattern, at least simplify it:</p>\n\n<pre><code>puts str.sub(/\\A&lt;p&gt;(?:&lt;br&gt;)+/, '&lt;p&gt;').sub(/(?:&lt;br&gt;)+&lt;\\/p&gt;\\Z/, '&lt;/p&gt;')\n</code></pre>\n\n<p>which results in the same thing again.</p>\n\n<p>Regular expressions are great for some tasks, but they're not good for markup. If you <em>insist</em> on using a regular expression, then simplify the problem as in the later solutions because it reduces the complexity of the pattern, which improves readability and eases maintenance.</p>\n"}, {"tags": [], "owner": {"reputation": 19060, "user_id": 4003419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lIeUm.png?s=128&g=1", "display_name": "LukStorms", "link": "https://stackoverflow.com/users/4003419/lukstorms"}, "is_accepted": false, "score": 2, "last_activity_date": 1494491493, "last_edit_date": 1494491493, "creation_date": 1494444612, "answer_id": 43901228, "question_id": 43900709, "link": "https://stackoverflow.com/questions/43900709/how-to-remove-all-the-br-from-the-first-paragraph-and-last-using-regex/43901228#43901228", "title": "How to remove all the &lt;br&gt; from the first paragraph and last using regex", "body": "<pre><code>st = st.gsub(/(?&lt;=\\A&lt;p&gt;)(&lt;br\\/?&gt;)+|(&lt;br\\/?&gt;)+(?=[&lt;]\\/p&gt;\\Z)/, '')\n</code></pre>\n\n<p>There's 2 parts seperated by a pipe (OR):  </p>\n\n<p>1)  <code>(?&lt;=\\A&lt;p&gt;)(&lt;br\\/?&gt;)+</code> matches 1 or more <code>&lt;br&gt;</code> that are after the start of the string (<code>\\A</code>) and a <code>&lt;p&gt;</code> tag  </p>\n\n<p>2)  <code>(&lt;br\\/?&gt;)+(?=[&lt;]\\/p&gt;\\Z)</code> matches matches 1 or more <code>&lt;br&gt;</code> that are before a <code>&lt;/p&gt;</code> closing tag at the end of the string (<code>\\Z</code>)</p>\n\n<p>And gsub because we want to replace all occurrences in the string, not just the first.<br>\nThe g in <strong>g</strong>sub stands for <strong>g</strong>lobal.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1494459460, "post_id": 43903883, "comment_id": 74842470, "body": "I noticed that this is very similar to the second part of @theTinMan&#39;s (earlier) answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1494469425, "last_edit_date": 1494469425, "creation_date": 1494456686, "answer_id": 43903883, "question_id": 43900709, "link": "https://stackoverflow.com/questions/43900709/how-to-remove-all-the-br-from-the-first-paragraph-and-last-using-regex/43903883#43903883", "title": "How to remove all the &lt;br&gt; from the first paragraph and last using regex", "body": "<p>I suggest something simple that's easy to understand, test and maintain.</p>\n\n<pre><code>str =&lt;&lt;-_\n&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;apple&lt;/p&gt;\n&lt;p&gt;bananas&lt;/p&gt;\n&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n&lt;p&gt;tomatoes&lt;/p&gt;\n&lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n_\n  #=&gt; \"&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;apple&lt;/p&gt;\\n&lt;p&gt;bananas&lt;/p&gt;\\n&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\\n&lt;p&gt;tomatoes&lt;/p&gt;\\n&lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\\n\"\n\nfirst, *mid, last = str.lines    \nfirst.gsub('&lt;br&gt;', '') &lt;&lt; mid.join &lt;&lt; last.gsub('&lt;br&gt;', '')\n  #=&gt; \"&lt;p&gt;apple&lt;/p&gt;\\n&lt;p&gt;bananas&lt;/p&gt;\\n&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\\n&lt;p&gt;tomatoes&lt;/p&gt;\\n&lt;p&gt;berry&lt;/p&gt;\\n\" \nputs s\n&lt;p&gt;apple&lt;/p&gt;\n&lt;p&gt;bananas&lt;/p&gt;\n&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n&lt;p&gt;tomatoes&lt;/p&gt;\n&lt;p&gt;berry&lt;/p&gt;\n</code></pre>\n\n<p>Note that</p>\n\n<pre><code>first\n  #=&gt; \"&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;apple&lt;/p&gt;\\n\" \nmid\n  #=&gt; [\"&lt;p&gt;bananas&lt;/p&gt;\\n\",\n  #    \"&lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\\n\",\n  #    \"&lt;p&gt;tomatoes&lt;/p&gt;\\n\"]\nlast\n  #=&gt; \"&lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\\n\" \n</code></pre>\n"}], "owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 43901095, "answer_count": 3, "score": 1, "last_activity_date": 1494491493, "creation_date": 1494442749, "last_edit_date": 1494451043, "question_id": 43900709, "link": "https://stackoverflow.com/questions/43900709/how-to-remove-all-the-br-from-the-first-paragraph-and-last-using-regex", "title": "How to remove all the &lt;br&gt; from the first paragraph and last using regex", "body": "<p>I am trying to get rid of all the extra <code>&lt;br&gt;</code> in the first paragraph and last paragraph.</p>\n\n<p>For example:</p>\n\n<pre><code>st = \"&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;apple&lt;/p&gt;\n     &lt;p&gt;bananas&lt;/p&gt;\n     &lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n     &lt;p&gt;tomatoes&lt;/p&gt;\n     &lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\"\n</code></pre>\n\n<p>I'm hoping to end up with this:</p>\n\n<pre><code>        \"&lt;p&gt;apple&lt;/p&gt;\n         &lt;p&gt;bananas&lt;/p&gt;\n         &lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n         &lt;p&gt;tomatoes&lt;/p&gt;\n         &lt;p&gt;berry&lt;/p&gt;\"\n</code></pre>\n\n<p>My goal is to leave the <code>&lt;br&gt;</code> middle paragraphs (ex. orange paragraph) alone and remove all the first paragraph <code>&lt;br&gt;</code> and all the end the last paragraph.</p>\n\n<p>I've tried doing this regex:</p>\n\n<pre><code>st.sub(/^((&lt;p&gt;)|&lt;br( \\/)?&gt;)*|(&lt;p&gt;|&lt;br( \\/)?&gt;|&lt; \\/p&gt;)*$/, '')\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>=&gt;  \"&lt;p&gt;apple&lt;/p&gt;\n     &lt;p&gt;bananas&lt;/p&gt;\n     &lt;p&gt;orange&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n     &lt;p&gt;tomatoes&lt;/p&gt;\n     &lt;p&gt;berry&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\"\n</code></pre>\n\n<p>I am unable to delete the last paragraph repeating <code>&lt;br&gt;</code>.</p>\n"}, {"tags": ["javascript", "ruby", "ajax", "mongodb", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 2843365, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a32b32813fdbab3ca235719e16883c6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2843365", "link": "https://stackoverflow.com/users/2843365/user2843365"}, "edited": false, "score": 0, "creation_date": 1494446479, "post_id": 43901085, "comment_id": 74837358, "body": "Thanks - you are correct. I&#39;ve updated the Ruby to POST. But I keep getting a 404 error on Sinatra when I submit the form."}, {"owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "reply_to_user": {"reputation": 315, "user_id": 2843365, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a32b32813fdbab3ca235719e16883c6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2843365", "link": "https://stackoverflow.com/users/2843365/user2843365"}, "edited": false, "score": 0, "creation_date": 1494448089, "post_id": 43901085, "comment_id": 74838148, "body": "Hmm, I see. Did you make sure that your URL is correct? You can try assigning the full path of your Sinatra endpoint to <code>actionurl</code> variable, like this: <code>http:&#47;&#47;localhost:3000&#47;api&#47;v1&#47;myTest</code>. You may also want to check if your endpoint is working using e.g. Postman or curl."}, {"owner": {"reputation": 315, "user_id": 2843365, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a32b32813fdbab3ca235719e16883c6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2843365", "link": "https://stackoverflow.com/users/2843365/user2843365"}, "edited": false, "score": 0, "creation_date": 1494449179, "post_id": 43901085, "comment_id": 74838694, "body": "I did try to use the full URL, but it didn&#39;t work. I&#39;ll have to research curl as I don&#39;t know how to do that. Thanks for the tip!"}, {"owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "reply_to_user": {"reputation": 315, "user_id": 2843365, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a32b32813fdbab3ca235719e16883c6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2843365", "link": "https://stackoverflow.com/users/2843365/user2843365"}, "edited": false, "score": 0, "creation_date": 1494449525, "post_id": 43901085, "comment_id": 74838878, "body": "Curl may seem a bit esoteric; I&#39;d go for Postman which has a nice gui and will enable you to fire sample requests right away"}], "tags": [], "owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "is_accepted": false, "score": 1, "last_activity_date": 1494444075, "creation_date": 1494444075, "answer_id": 43901085, "question_id": 43899296, "link": "https://stackoverflow.com/questions/43899296/html-form-to-mongodb-via-ruby/43901085#43901085", "title": "HTML form to MongoDB via Ruby", "body": "<p>First of all, in jour javascript code you're not sending any form data, i.e. first &amp; last name (see <a href=\"http://api.jquery.com/jquery.ajax/#jQuery-ajax-settings\" rel=\"nofollow noreferrer\">jQuery $ajax docs</a>).  Second of all, you're trying to send a POST request, while your Sinatra app defines a GET endpoint. Once you make sure your Sinatra app receives correct data sent from the HTML form you can easily create new record in MongoDB using <a href=\"https://github.com/mongodb/mongo-ruby-driver\" rel=\"nofollow noreferrer\">mongo-ruby-driver</a></p>\n"}, {"tags": [], "owner": {"reputation": 315, "user_id": 2843365, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a32b32813fdbab3ca235719e16883c6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2843365", "link": "https://stackoverflow.com/users/2843365/user2843365"}, "is_accepted": false, "score": 0, "last_activity_date": 1494449753, "creation_date": 1494449753, "answer_id": 43902591, "question_id": 43899296, "link": "https://stackoverflow.com/questions/43899296/html-form-to-mongodb-via-ruby/43902591#43902591", "title": "HTML form to MongoDB via Ruby", "body": "<p>The problem was in the route, I guess. in the form action = \"/myTest\" it really should have been \"api/v1/myTest\". As soon as I changed it, it began to work.</p>\n\n<p>Thanks everyone for taking the time to help me out. Appreciate it!</p>\n"}], "owner": {"reputation": 315, "user_id": 2843365, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a32b32813fdbab3ca235719e16883c6c?s=128&d=identicon&r=PG&f=1", "display_name": "user2843365", "link": "https://stackoverflow.com/users/2843365/user2843365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494449753, "creation_date": 1494437759, "last_edit_date": 1494447105, "question_id": 43899296, "link": "https://stackoverflow.com/questions/43899296/html-form-to-mongodb-via-ruby", "title": "HTML form to MongoDB via Ruby", "body": "<p>I am trying to learn a new skill, just as a hobby, and while I've learned a lot, there are still things that I get confused on - and this is one of them. </p>\n\n<p>I have a MongoDB set up with a DB = phone and a collection = records which stores, as you may have guessed, phone directories. I created a JSON file and imported everything and all went well. </p>\n\n<p>Then I created a Ruby / Sinatra app to display the data in a table. That all works great as well.</p>\n\n<p>Now I want to use an HTML form to submit a new user to the database. My basic form for testing is as follows and is located in the Sinatra public directory as myTest.html</p>\n\n<pre><code>&lt;form id=\"form\"&gt;\n    First name:&lt;br&gt;\n    &lt;input type=\"text\" name=\"fname\" value=\"Mickey\"&gt;\n    &lt;br&gt; Last name:&lt;br&gt;\n    &lt;input type=\"text\" name=\"lname\" value=\"Mouse\"&gt;\n    &lt;br&gt;&lt;br&gt;\n    &lt;input type=\"submit\" value=\"Submit\" id=\"commit\"&gt;\n  &lt;/form&gt;\n  &lt;script&gt;\n</code></pre>\n\n<p>(I have left out the action=\" \", since I was trying to do this via AJAX, but it didn't work) This was my AJAX attempt:</p>\n\n<pre><code>&lt;script&gt;\n    $(function() {\n      $.ajax({\n        url: 'http://localhost:4567/api/v1/myTest',\n        type: 'post',\n        dataType: 'json',\n        jsonp: 'json', // mongod is expecting the parameter name to be called \"jsonp\"\n        success: function(data) {\n          //console.log('success', data);\n          console.log(\"Success\");\n        },\n        error: function(XMLHttpRequest, textStatus, errorThrown) {\n          console.log('error', errorThrown);\n\n        }\n      });\n    });\n</code></pre>\n\n<p>In my Ruby file, phone.rb, I have this:</p>\n\n<pre><code>get '/myTest' do\nresult = Record.collection.insert_one({ :fname =&gt;\"Justin\"})\nend\n</code></pre>\n\n<p>I have verified that this will work.</p>\n\n<p>Where I am stuck is connecting the two (or do I even need to ?) When I click the submit button on the form, I get a URL encoded string like this:</p>\n\n<pre><code>localhost:4567/myTest.html?fname=Justin&amp;lname=Smith\n</code></pre>\n\n<p>How do I take the URL data from teh form, and insert it into Mongo as a new document?</p>\n\n<p>I have spent two days looking for an answer, but almost all the information on the web comes back as Rails, which I'm not using. I want to learn to do everything in Ruby first. When I look at the problem from teh Javascript side, virtually all references point to Node.js, which I am not using.</p>\n\n<p>Any help would be appreciated, or at least a nod in the right direction.\nThanks</p>\n\n<p><strong>UPDATE</strong>\nI obviously make a mistake in my Ruby - it should be POST. So I made a new Ruby block, and when I access it directly from the browser and enter localhost/api/v1/myTest?fname=Mickey&amp;lname=Mouse, it enters the info into the database</p>\n\n<pre><code>post '/myTest' do\nfname = params[:fname]\n  lname = params[:lname]\n  Record.collection.insert_one({'fname' =&gt; fname, 'lname' =&gt; lname})\nend\n</code></pre>\n\n<p>On the form, I've tried to add the following:</p>\n\n<pre><code>&lt;form id=\"form\" method=\"POST\" action=\"/myTest\"&gt;\n    First name:&lt;br&gt;\n    &lt;input type=\"text\" name=\"fname\"&gt;\n    &lt;br&gt; Last name:&lt;br&gt;\n    &lt;input type=\"text\" name=\"lname\"&gt;\n    &lt;br&gt;&lt;br&gt;\n    &lt;input type=\"submit\" value=\"Submit\" id=\"commit\"&gt;\n  &lt;/form&gt;\n&lt;script&gt;\n    $(function() {\n      //hang on event of form with id=myform\n      $(\"#form\").submit(function(e) {\n\n        //prevent Default functionality\n        e.preventDefault();\n\n        //get the action-url of the form\n        var actionurl = '/myTest';\n\n\n        $.ajax({\n          url: actionurl,\n          type: 'post',\n          dataType: 'application/json',\n          data: $(\"#form\").serialize(),\n          success: function(data) {\n            console.log('success')\n          }\n        });\n\n      });\n\n    });\n  &lt;/script&gt;\n</code></pre>\n\n<p>I am not able to hit the Ruby /myTest. I keep getting a \"Sinatra Doesn't Know this Ditty\" 404. COuld it be that I am not using Sinatra to create the HTML in the Views folder as erb? My pages are in the Public folder and are written independently of Sinatra.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1494437266, "post_id": 43898602, "comment_id": 74832020, "body": "Run <code>rake routes</code> and you might get a hint :)"}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1494437735, "post_id": 43898602, "comment_id": 74832305, "body": "That&#39;s what the problem is. Rake routes doesn&#39;t show anything at all for comments, only the blogs. I&#39;ll update my question."}, {"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1494438030, "post_id": 43898602, "comment_id": 74832491, "body": "It also doesn&#39;t look like you are ending <code>resources :comments</code>"}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1494439041, "post_id": 43898602, "comment_id": 74833084, "body": "I get an <code>unexpected keyword_end</code> error when I try to do that."}, {"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 1, "creation_date": 1494439289, "post_id": 43898602, "comment_id": 74833227, "body": "Sorry, it should be <code>resources :comments do</code> .... and then end"}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1494440553, "post_id": 43898602, "comment_id": 74833930, "body": "I get the error if I try to add end to the comments resource. Rails is only allowing me the end for the member do functions and the top-level resource."}], "answers": [{"comments": [{"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "edited": false, "score": 0, "creation_date": 1494449321, "post_id": 43902169, "comment_id": 74838776, "body": "That was the entire issue. I thought it was a nesting issue, and yeah, I was trying to nest the comments. I just forgot the do, now it works."}], "tags": [], "owner": {"reputation": 106, "user_id": 3693977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpnzu.jpg?s=128&g=1", "display_name": "ximes", "link": "https://stackoverflow.com/users/3693977/ximes"}, "is_accepted": true, "score": 1, "last_activity_date": 1494448084, "creation_date": 1494448084, "answer_id": 43902169, "question_id": 43898602, "link": "https://stackoverflow.com/questions/43898602/nested-routes-with-polymorphic-association/43902169#43902169", "title": "Nested routes with polymorphic association", "body": "<p>Are you looking for nesting the <em>:comments</em> resource inside <em>:blogs</em>? Otherwise your routes should look like:</p>\n\n<pre><code>resources :blogs do\n  member do\n    put 'like', to: 'blogs#upvote'\n    put 'dislike', to: 'blogs#downvote'\n  end\nend\nresources :comments do\n  member do\n    put 'like', to: 'comments#upvote'\n    put 'dislike', to: 'comments#downvote'\n  end\nend\n</code></pre>\n\n<p>(note you had a missing <em>do</em> at beginning of the :comments block which resulted in a weird block ending/nesting)</p>\n"}], "owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 43902169, "answer_count": 1, "score": 0, "last_activity_date": 1494448084, "creation_date": 1494435380, "last_edit_date": 1494438020, "question_id": 43898602, "link": "https://stackoverflow.com/questions/43898602/nested-routes-with-polymorphic-association", "title": "Nested routes with polymorphic association", "body": "<p>I'm trying to implement the act_as_votable gem in my rails application. I got it to work on the blogs model, but the comments model is where I'm stuck. I get <code>undefined method</code>like_comment_path'` when I try to run it, and it's because there are no routes being generated like there are for the blog. </p>\n\n<p>Here is the routes file:</p>\n\n<pre><code>  resources :blogs do\n    member do\n      put 'like', to: 'blogs#upvote'\n      put 'dislike', to: 'blogs#downvote'\n    end\n    resources :comments\n      member do\n        put 'like', to: 'comments#upvote'\n        put 'dislike', to: 'comments#downvote'\n      end\n  end\n</code></pre>\n\n<p>On the blog index, I am able to call the blog like path just fine. </p>\n\n<pre><code>  &lt;div class=\"btn-group\"&gt;\n    &lt;%= link_to like_blog_path(blog), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n      &lt;span class=\"glyphicon glyphicon-chevron-up\"&gt;&lt;/span&gt;\n      Upvote\n      &lt;%= blog.get_upvotes.size %&gt;\n    &lt;% end %&gt;\n    &lt;%= link_to dislike_blog_path(blog), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n      &lt;span class=\"glyphicon glyphicon-chevron-down\"&gt;&lt;/span&gt;\n      Downvote\n      &lt;%= blog.get_downvotes.size %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>I run into trouble, though, with the comment part. </p>\n\n<pre><code>  &lt;div class=\"btn-group\"&gt;\n    &lt;%= link_to like_comment_path(@commentable, comment), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n      &lt;span class=\"glyphicon glyphicon-chevron-up\"&gt;&lt;/span&gt;\n      Upvote\n      &lt;%= comment.get_upvotes.size %&gt;\n    &lt;% end %&gt;\n    &lt;%= link_to dislike_comment_path(@commentable, comment), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n      &lt;span class=\"glyphicon glyphicon-chevron-down\"&gt;&lt;/span&gt;\n      Downvote\n      &lt;%= comment.get_downvotes.size %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>When I run rake routes, nothing for the comments comes up. </p>\n\n<pre><code>    Prefix Verb   URI Pattern                                 Controller#Action\n                    root GET    /                                           glips#index\n              pages_home GET    /pages/home(.:format)                       pages#home\n             pages_about GET    /pages/about(.:format)                      pages#about\n           pages_contact GET    /pages/contact(.:format)                    pages#contact\n                     tag GET    /tags/:tag(.:format)                        glips#index\n        new_user_session GET    /login(.:format)                            devise/sessions#new\n            user_session POST   /login(.:format)                            devise/sessions#create\n    destroy_user_session DELETE /logout(.:format)                           devise/sessions#destroy\n       new_user_password GET    /password/new(.:format)                     devise/passwords#new\n      edit_user_password GET    /password/edit(.:format)                    devise/passwords#edit\n           user_password PATCH  /password(.:format)                         devise/passwords#update\n                         PUT    /password(.:format)                         devise/passwords#update\n                         POST   /password(.:format)                         devise/passwords#create\ncancel_user_registration GET    /cancel(.:format)                           devise/registrations#cancel\n   new_user_registration GET    /register(.:format)                         devise/registrations#new\n  edit_user_registration GET    /edit(.:format)                             devise/registrations#edit\n       user_registration PATCH  /                                           devise/registrations#update\n                         PUT    /                                           devise/registrations#update\n                         DELETE /                                           devise/registrations#destroy\n                         POST   /                                           devise/registrations#create\n               like_blog PUT    /blogs/:id/like(.:format)                   blogs#upvote\n            dislike_blog PUT    /blogs/:id/dislike(.:format)                blogs#downvote\n           blog_comments GET    /blogs/:blog_id/comments(.:format)          comments#index\n                         POST   /blogs/:blog_id/comments(.:format)          comments#create\n        new_blog_comment GET    /blogs/:blog_id/comments/new(.:format)      comments#new\n       edit_blog_comment GET    /blogs/:blog_id/comments/:id/edit(.:format) comments#edit\n            blog_comment GET    /blogs/:blog_id/comments/:id(.:format)      comments#show\n                         PATCH  /blogs/:blog_id/comments/:id(.:format)      comments#update\n                         PUT    /blogs/:blog_id/comments/:id(.:format)      comments#update\n                         DELETE /blogs/:blog_id/comments/:id(.:format)      comments#destroy\n                         PUT    /blogs/:id/like(.:format)                   comments#upvote\n                         PUT    /blogs/:id/dislike(.:format)                comments#downvote\n                   blogs GET    /blogs(.:format)                            blogs#index\n                         POST   /blogs(.:format)                            blogs#create\n                new_blog GET    /blogs/new(.:format)                        blogs#new\n               edit_blog GET    /blogs/:id/edit(.:format)                   blogs#edit\n                    blog GET    /blogs/:id(.:format)                        blogs#show\n                         PATCH  /blogs/:id(.:format)                        blogs#update\n                         PUT    /blogs/:id(.:format)                        blogs#update\n                         DELETE /blogs/:id(.:format)                        blogs#destroy\n                   users GET    /users(.:format)                            users#index\n                         GET    /users/:id(.:format)                        users#show\n                    user GET    /users/:id(.:format)                        users#show\n</code></pre>\n\n<p>I cannot figure out how to make the comment path work with the routes. What am I doing wrong?</p>\n"}, {"tags": ["ruby", "login", "sinatra-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 0, "creation_date": 1494436568, "post_id": 43898837, "comment_id": 74831643, "body": "Thanks a lot for your suggestion but then, don&#39;t I need another password column in the database too? If yes, what should be the name of that column in the migration file?  Because has_secured_password requires password column to be named as pssword_digest and rake db: migration won&#39;t let me have two columns with the same name."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 0, "creation_date": 1494436777, "post_id": 43898837, "comment_id": 74831747, "body": "@HimaChhag nope, you don&#39;t need any more columns! ActiveRecord will check <code>:password_confirmation</code> against <code>:password</code> to see if they match, but it doesn&#39;t actually save <code>:password_confirmation</code> anywhere."}, {"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 0, "creation_date": 1494438026, "post_id": 43898837, "comment_id": 74832489, "body": "Thanks a lot for your suggestion. This works better than before. checks passwords and gives error accordingly but still giving the same issue. It creates a new user in signup, assign session[:user_id] to user.id but doesn&#39;t let anyone login! Any other suggestion, please?"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 0, "creation_date": 1494439334, "post_id": 43898837, "comment_id": 74833251, "body": "@HimaChhag can you post the code for the controller that handles <code>&quot;#{user.username}&#47;tips&quot;</code>? if so, add this line immediately above it: <code>set :session_secret, &quot;328a79283uf1f2fu8932fu903uf9822f23f232&quot;</code>"}, {"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 0, "creation_date": 1494444557, "post_id": 43898837, "comment_id": 74836332, "body": "Thanks a lot for the suggestion. Tried it. Didn&#39;t help. I have also updated my question with tip_controller. Thanks a lot again."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 0, "creation_date": 1494444881, "post_id": 43898837, "comment_id": 74836499, "body": "@HimaChhag i posted a new answer with a different solution. check it out and let me know!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1494436246, "creation_date": 1494436246, "answer_id": 43898837, "question_id": 43898452, "link": "https://stackoverflow.com/questions/43898452/how-to-tell-sinatra-to-allow-user-connection-after-signup-or-login/43898837#43898837", "title": "How to tell Sinatra to allow user connection after signup or login", "body": "<p>When using <code>has_secure_password</code>, password confirmation is handled by ActiveRecord. You just need to pass both the password <em>and</em> the confirmation into the user when you create it:</p>\n\n<pre><code>user = User.create(username: params[:username], password: params[:password], password_confirmation: params[:confirm_password], email: params[:email])\n</code></pre>\n\n<p>If the passwords don't, ActiveRecord will return an invalid user which hasn't been saved to the db. Which brings me to my next point- <code>User.create</code> doesn't throw any errors. If you want errors thrown, use <code>User.create!</code>. Otherwise, you should be validating your user before redirecting:</p>\n\n<pre><code>user = User.create(username: params[:username], password: params[:password], password_confirmation: params[:confirm_password], email: params[:email])\nreturn erb 'users/password_error' unless user.valid?\nsession[:user_id] = user.id\nredirect to '/tips'\n</code></pre>\n\n<p>You can also check specific errors like so:</p>\n\n<pre><code>unless user.valid?\n  return erb 'users/password_error' if user.errors[:password].any?\n  return erb 'users/username_error' if user.errors[:username].any?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "edited": false, "score": 1, "creation_date": 1494445537, "post_id": 43901290, "comment_id": 74836843, "body": "You were so right. I checked that code so many times but didn&#39;t realize it. It is working perfectly fine now. Thanks a lot."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 3, "last_activity_date": 1494444852, "creation_date": 1494444852, "answer_id": 43901290, "question_id": 43898452, "link": "https://stackoverflow.com/questions/43898452/how-to-tell-sinatra-to-allow-user-connection-after-signup-or-login/43901290#43901290", "title": "How to tell Sinatra to allow user connection after signup or login", "body": "<p>Your <code>logged_in</code> function is using <code>:id</code> instead of <code>:user_id</code>:</p>\n\n<pre><code>def logged_in?\n  !!current_user\nend\n\ndef current_user\n  @current_user ||= User.find(session[:id]) if session[:id]\nend\n</code></pre>\n\n<p>Try changing it to this:</p>\n\n<pre><code>def logged_in?\n  !!current_user\nend\n\ndef current_user\n  @current_user ||= User.find(session[:user_id]) if session[:user_id]\nend\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 7705189, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/06587ae42507bc7c5e34e15e829bb9b6?s=128&d=identicon&r=PG", "display_name": "Hima Chhag", "link": "https://stackoverflow.com/users/7705189/hima-chhag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "accepted_answer_id": 43901290, "answer_count": 2, "score": 0, "last_activity_date": 1494444852, "creation_date": 1494434917, "last_edit_date": 1494444439, "question_id": 43898452, "link": "https://stackoverflow.com/questions/43898452/how-to-tell-sinatra-to-allow-user-connection-after-signup-or-login", "title": "How to tell Sinatra to allow user connection after signup or login", "body": "<p>I built a small Sinatra application that was working, but I added a <code>confirm_password</code> in the signup form and made changes in <code>user_controller</code> and  broke something. Now, it is not letting the user login even after entering a valid username and password. It again takes them to login/signup page.</p>\n\n<p>I tried debugging with <code>binding.pry</code>, so I know that it is assigning <code>session[:user_id]</code> to <code>user.id</code>, but I'm not sure why it keeps asking for user credentials.</p>\n\n<p>This is my migration for the user:</p>\n\n<pre><code>class CreateUsers &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :users do |t|\n      t.string :username\n      t.string :password_digest\n      t.string :email\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>This is my user model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  has_secure_password\n\n  has_many :tips\n  has_many :languages, through: :tips\n\n  validates_presence_of  :username, :email, :password_digest\n  validates_uniqueness_of :username, presence: {message: \"That username is already taken, please use another username.\"}\n  validates_uniqueness_of :email, presence: {message: \"That email is already associated to another account. Please use another email.\"}\n\n  include Slugifiable::InstanceMethods\n  extend Slugifiable::ClassMethods\n\nend\n</code></pre>\n\n<p>This is my user_Controller:</p>\n\n<pre><code>class UserController &lt; ApplicationController\n\n  get '/signup' do\n    if !logged_in?\n      erb :'users/signup'\n    else\n      redirect to '/tips'\n    end\n  end\n\n  post '/signup' do\n    # binding.pry\n    if params[:username] == \"\" || params[:password] == \"\" || params[:email] == \"\" || params[:confirm_password] == \"\"\n      redirect to '/signup'\n      # binding.pry\n    elsif params[:password] != params[:confirm_password]\n      erb :'users/password_error'\n    else\n      user = User.create(username: params[:username], password: params[:password], email: params[:email])\n      session[:user_id] = user.id\n      redirect to '/tips'\n    end\n  end\n\n  get '/login' do\n    if !logged_in?\n      erb :'users/login'\n    else\n      redirect to '/tips'\n    end\n  end\n\n  post '/login' do\n    # binding.pry\n    user = User.find_by(username: params[:username])\n    if user &amp;&amp; user.authenticate(params[:password])\n      session[:user_id] = user.id\n      redirect to \"#{user.username}/tips\"\n    else\n      redirect to '/signup'\n    end\n  end\n\n  get '/logout' do\n    if logged_in?\n      session.clear\n      # binding.pry\n      redirect to '/login'\n    else\n      redirect to '/'\n    end\n  end\n\n  get '/users/:slug' do\n    if logged_in? &amp;&amp; current_user.slug == params[:slug]\n      @user = User.find_by_slug(params[:slug])\n      erb :'/users/show'\n    else\n      redirect to '/tips'\n    end\n  end\n\nend\n</code></pre>\n\n<p>I don't think my signup form is creating any issue, but for debugging purposes, here is my signup.erb form:</p>\n\n<pre><code>&lt;h2 style=\"color: #66FFFF\"&gt;Sign Up for the Coding Tips &lt;/h2&gt;&lt;/br&gt; &lt;/br&gt;\n &lt;form action=\"/signup\" method=\"POST\"&gt;\n   &lt;p&gt; Username:          &lt;input type=\"text\" name=\"username\" &gt;&lt;/p&gt;\n   &lt;p&gt; Email:             &lt;input type=\"email\" name=\"email\"&gt;&lt;/p&gt;\n   &lt;p&gt; Password:          &lt;input type=\"password\" name=\"password\"&gt;&lt;/p&gt;\n   &lt;p&gt; Confirm password:  &lt;input type=\"password\" name=\"confirm_password\"&gt;&lt;/p&gt;&lt;/br&gt;&lt;/br&gt;\n   &lt;input type=\"submit\" value=\"Sign Up\"&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>I am sure I am using a valid username and password. I tried creating a couple of new usernames, it also saves them to the database, but it doesn't let anyone login.</p>\n\n<p>These are my helper methods:</p>\n\n<pre><code>def logged_in?\n      !!current_user\n    end\n\n    def current_user\n      @current_user ||= User.find(session[:id]) if session[:id]\n    end\n</code></pre>\n\n<p>Here is my tip_comtroller</p>\n\n<pre><code>class TipController &lt; ApplicationController\n\n    use Rack::Flash\n\n    get '/:slug/tips' do\n      @user = User.find_with_slug(params[:slug])\n      if logged_in? &amp;&amp; session[:user_id] == @user.id\n          erb :'/users/tips'\n      else\n          redirect to \"/login\"\n      end\n    end\n\n    get '/tips' do\n      erb :'/tips/tips'\n    end\n\n    get '/tips/new' do\n      if logged_in?\n          erb :'/tips/new'\n      else\n          redirect \"/login\"\n      end\n    end\n\n    post '/tips' do\n      @tip = current_user.tips.create(content: params[:content])\n      if @tip\n          if params[:language][:name].nil? || params[:language][:name].empty?\n            @tip.language_id = params[:tip][:language_id]\n          else\n            new_language = Language.create(name: params[:language][:name])\n            @tip.language_id = new_language.id\n          end\n          @tip.save\n          @user = @tip.user\n          redirect to \"/tips/#{@tip.id}\"\n      else\n          redirect \"/tips/new\"\n      end\n    end\n\n    get '/tips/:id' do\n      @id = params[:id]\n      if logged_in?\n        @tip = Tip.find_by_id(params[:id])\n        if !@tip.nil?\n          erb :'/tips/show'\n        else\n          erb :'/tips/show_error'\n        end\n      else\n          redirect \"/login\"\n      end\n    end\n\n    get '/tips/:id/edit' do\n      if logged_in?\n          @tip = Tip.find_by_id(params[:id])\n          if @tip.user.username == current_user.username\n              erb :'/tips/edit'\n          else\n              erb :'/tips/edit_error'\n          end\n      else\n          redirect \"/login\"\n      end\n    end\n\n    patch '/tips/:id' do\n      @tip = current_user.tips.find_by(params[:id])\n      if  @tip\n          @tip.update(:content =&gt; params[:content])\n          if params[:language][:name].nil? || params[:language][:name].empty?\n            @tip.language_id = params[:tip][:language_id]\n          else\n            new_language = Language.create(name: params[:language][:name])\n            @tip.language_id = new_language.id\n          end\n          @user = @tip.user\n          @tip.save\n          # binding.pry\n          redirect \"/tips/#{@tip.id}\"\n      else\n          redirect \"/tips/#{@tip.id}/edit\"\n      end\n    end\n\n    get '/tips/:id/delete' do\n      @tip = Tip.find_by_id(params[:id])\n      if logged_in?\n          if current_user == @tip.user\n              @tip.destroy\n              redirect '/tips'\n          else\n              erb :'tips/delete_error'\n          end\n      else\n          redirect \"/login\"\n      end\n    end\n\n    get '/tips/:id/cancel' do\n      redirect \"/tips/#{@tip.id}\"\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "docker"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1494432537, "post_id": 43897673, "comment_id": 74829219, "body": "If you want that to be accessible outside the container you need an <code>EXPOSE</code>; see the reference <a href=\"https://docs.docker.com/engine/reference/builder/#usage\" rel=\"nofollow noreferrer\">docs.docker.com/engine/reference/builder/#usage</a>"}, {"owner": {"reputation": 944, "user_id": 1358735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ef8fc0c389dd2a189c7bc3d10001a328?s=128&d=identicon&r=PG", "display_name": "JulioHM", "link": "https://stackoverflow.com/users/1358735/juliohm"}, "edited": false, "score": 1, "creation_date": 1494445930, "post_id": 43897673, "comment_id": 74837077, "body": "What&#39;s the URL you are trying to acess in the browser?"}, {"owner": {"reputation": 360, "user_id": 3809480, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/994af2548db4151c47a51230385fc3ca?s=128&d=identicon&r=PG&f=1", "display_name": "Evya2005", "link": "https://stackoverflow.com/users/3809480/evya2005"}, "reply_to_user": {"reputation": 944, "user_id": 1358735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ef8fc0c389dd2a189c7bc3d10001a328?s=128&d=identicon&r=PG", "display_name": "JulioHM", "link": "https://stackoverflow.com/users/1358735/juliohm"}, "edited": false, "score": 0, "creation_date": 1494484546, "post_id": 43897673, "comment_id": 74849425, "body": "@JulioHM i edited the question. i&#39;m trying to access this URL: &#39;<a href=\"http://172.17.0.2:3000/\" rel=\"nofollow noreferrer\">172.17.0.2:3000</a>&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 734, "user_id": 4859404, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bea8b9406aea69d4539d7cafc497159c?s=128&d=identicon&r=PG&f=1", "display_name": "humblebee", "link": "https://stackoverflow.com/users/4859404/humblebee"}, "reply_to_user": {"reputation": 360, "user_id": 3809480, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/994af2548db4151c47a51230385fc3ca?s=128&d=identicon&r=PG&f=1", "display_name": "Evya2005", "link": "https://stackoverflow.com/users/3809480/evya2005"}, "edited": false, "score": 0, "creation_date": 1494484519, "post_id": 43899476, "comment_id": 74849404, "body": "As per your update it seems port 32768 is exposed. Try 172.17.0.2:32768"}], "tags": [], "owner": {"reputation": 734, "user_id": 4859404, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bea8b9406aea69d4539d7cafc497159c?s=128&d=identicon&r=PG&f=1", "display_name": "humblebee", "link": "https://stackoverflow.com/users/4859404/humblebee"}, "is_accepted": false, "score": 3, "last_activity_date": 1494450907, "last_edit_date": 1494450907, "creation_date": 1494438460, "answer_id": 43899476, "question_id": 43897673, "link": "https://stackoverflow.com/questions/43897673/docker-container-running-but-cant-view-in-browser/43899476#43899476", "title": "Docker container running but can&#39;t view in browser", "body": "<p>Add this line in your dockerfile:</p>\n\n<pre><code>EXPOSE 3000\n</code></pre>\n\n<p>Also, if you want this app to be accessible from your host, run with the <code>-p</code> flag.</p>\n\n<p>See \"<a href=\"https://docs.docker.com/engine/reference/run/#general-form\" rel=\"nofollow noreferrer\">General form</a>\" for the <code>run</code> documentation.</p>\n"}, {"tags": [], "owner": {"reputation": 360, "user_id": 3809480, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/994af2548db4151c47a51230385fc3ca?s=128&d=identicon&r=PG&f=1", "display_name": "Evya2005", "link": "https://stackoverflow.com/users/3809480/evya2005"}, "is_accepted": true, "score": 3, "last_activity_date": 1494502164, "creation_date": 1494502164, "answer_id": 43914152, "question_id": 43897673, "link": "https://stackoverflow.com/questions/43897673/docker-container-running-but-cant-view-in-browser/43914152#43914152", "title": "Docker container running but can&#39;t view in browser", "body": "<p>I found my problem.\nthe solution was to run the docker as <strong>production</strong> and not as <strong>development</strong>.</p>\n\n<p>in <strong>Dockerfile</strong>, instead of:</p>\n\n<pre><code>CMD [\"bundle\",  \"exec\", \"rails\", \"server\"]\n</code></pre>\n\n<p>I changed to:</p>\n\n<pre><code>CMD [\"bundle\",  \"exec\", \"rails\", \"server\", \"-e\", \"production\"]\n</code></pre>\n\n<p>and that <strong>solved</strong> my problem</p>\n"}], "owner": {"reputation": 360, "user_id": 3809480, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/994af2548db4151c47a51230385fc3ca?s=128&d=identicon&r=PG&f=1", "display_name": "Evya2005", "link": "https://stackoverflow.com/users/3809480/evya2005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10092, "favorite_count": 1, "accepted_answer_id": 43914152, "answer_count": 2, "score": 4, "last_activity_date": 1553601990, "creation_date": 1494432401, "last_edit_date": 1553601990, "question_id": 43897673, "link": "https://stackoverflow.com/questions/43897673/docker-container-running-but-cant-view-in-browser", "title": "Docker container running but can&#39;t view in browser", "body": "<p>I'm new with <strong>Docker</strong> and i'm trying to run <strong>ruby</strong> app inside a docker.\nSo i created a ruby app that work and run fine, I also created a image and a docker that when i run and build them it's running just fine.\nAfter I running the docker it's shown like it's running without problems, i get an IP from <code>docker inspect</code> and the port shown at <code>docker ps -a</code>  as 3000. </p>\n\n<p>when i open the IP:port at the browser I can't see nothing. </p>\n\n<p><strong>here is my docker file:</strong></p>\n\n<pre><code>&gt; FROM ruby:latest \n&gt; \n&gt; # Set the working directory to /app WORKDIR /app\n&gt; \n&gt; # Copy the current directory contents into the container at /app ADD . /app\n&gt; \n&gt; RUN echo 'debconf debconf/frontend select Noninteractive' |\n&gt; debconf-set-selections RUN apt-get update \\\n&gt;     &amp;&amp; DEBIAN_FRONTEND=Noninteractive   apt-get install -y \\\n&gt;         sqlite3 \\\n&gt;         thin \\\n&gt;         nodejs \\\n&gt;         apt-utils \\\n&gt;     &amp;&amp; bundle install \n&gt; # --no-install-recommends apt-utils sudo\n&gt; \n&gt; \n&gt; #RUN sudo -H cp config/initializers/rack_attack.rb config/initializers/rack_attack.rb\n&gt; \n&gt; # Install any needed packages specified in requirements.txt\n&gt; # RUN pip install -r requirements.txt \n&gt; EXPOSE 3000\n&gt; \n&gt; CMD [\"bundle\",  \"exec\", \"rails\", \"server\"]\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tried also with '<strong>Expose 3000</strong>' and also run with '-p' flag.<br>\nWhen i run 'docker ps -a' the <strong>ports</strong> are: '<strong>0.0.0.0:32768->3000/tcp</strong>'.<br>\nFor 'docker inspect' i get the <strong>IP</strong>: '172.17.0.2'</p>\n\n<p>but when i go to '<a href=\"http://172.17.0.2:3000/\" rel=\"nofollow noreferrer\">http://172.17.0.2:3000/</a>' in the browser i see nothing.</p>\n\n<p><strong>NEW EDIT</strong></p>\n\n<blockquote>\n  <p>I discover that the docker is running as tcp6 (IPv6), how can i\n  configure it to be tcp? .</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rspec"], "comments": [{"owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "edited": false, "score": 0, "creation_date": 1494434495, "post_id": 43896904, "comment_id": 74830408, "body": "Can you post your <code>database.yml</code> and Gemfile? What database are you using? Did you try <code>rake db:reset</code>, <code>rake db:test:prepare</code>?"}, {"owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "reply_to_user": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "edited": false, "score": 0, "creation_date": 1494444521, "post_id": 43896904, "comment_id": 74836307, "body": "Thanks for the response! I updated the question with part of the <code>database.yml</code>. But note that my development database works fine and that I&#39;m able to run <code>rails db:setup</code> under the test environment. I also tried running <code>db:test:prepare</code> which ran fine, but I&#39;m still getting the error when running rspec."}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "reply_to_user": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "edited": false, "score": 0, "creation_date": 1494521134, "post_id": 43896904, "comment_id": 74875773, "body": "As @xlts asked, can you also post your Gemfile?"}, {"owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "edited": false, "score": 0, "creation_date": 1494522797, "post_id": 43896904, "comment_id": 74876709, "body": "Oh my dad, I hadn&#39;t seen the comment about the Gemfile. Just added now. I&#39;ve tried commenting/re-bundling a few times without success, but I definitely could have missed something."}], "owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1494522735, "creation_date": 1494430194, "last_edit_date": 1494522735, "question_id": 43896904, "link": "https://stackoverflow.com/questions/43896904/error-when-running-in-test-environment-activerecordconnectionnotestablished", "title": "Error when running in test environment ActiveRecord::ConnectionNotEstablished", "body": "<p>I have tried setting up both rspec and minitest testing, but in both instances I'm getting the following error: <code>ActiveRecord::ConnectionNotEstablished: No connection pool with id primary found.</code></p>\n\n<p>I am able to run <code>rails db:setup RAILS_ENV=test</code> without any problems, but running <code>rails db:migrate RAILS_ENV=test</code> doesn't work. It throws the same error (above) that I get when running <code>rspec .</code></p>\n\n<p>Also something that may help, when I run <code>rails db:create RAILS_ENV=test</code> I get <code>Database 'mail_test' already exists</code>. So the database is definitely there, <code>mail_test</code> is the db name defined in my <code>.env</code></p>\n\n<p>I've tried everything, my searches are full of purple links, so any help or suggestions are very welcome!</p>\n\n<p>Edit: Here's the <code>test</code> section of my database.yml</p>\n\n<p><code>development:\n  adapter: postgresql\n  encoding: unicode\n  database: mail_dev\n  pool: 5\n  username: cbris\n  password:\ntest:\n  adapter: postgresql\n  encoding: unicode\n  database: mail_test\n  pool: 5\n  username: cbris\n  password:</code></p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.3.4'\n\ngem 'rails', '5.0'\ngem 'puma'\ngem 'pg'\n\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'slim-rails'\ngem 'bootstrap-sass'\ngem 'packery-rails'\ngem 'font-awesome-sass'\ngem 'jquery-rails'\ngem 'turbolinks'\n\ngem 'paperclip'\ngem 'aws-sdk'\ngem 'aws-sdk-rails'\n\ngem 'devise'\n\ngem 'redis'\ngem 'sidekiq'\ngem 'sidekiq-cron'\n\ngem 'validate_url'\ngem 'kaminari'\n\ngem 'httparty'\ngem 'smarter_csv'\ngem 'chartkick'\ngem 'meta_request'\ngem 'tinymce-rails'\n\n# Documentation\ngem 'rdoc'\ngem 'sdoc'\n\ngem 'spring'\ngem 'scout_apm'\ngem 'annotate'\ngem 'faker'\n\ngroup :development, :test do\n  # Testing framework\n  gem 'rspec-rails'\n  gem 'dotenv-rails'\nend\n\ngroup :development do\n  gem 'byebug'\n  gem 'better_errors'\n  gem 'binding_of_caller'\nend\n\ngroup :test do\n  # Clean db after testing\n  gem 'database_cleaner'\n  gem 'capybara'\nend\n\ngroup :production do\n  gem 'rails_12factor'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rabbitmq", "bunny"], "answers": [{"comments": [{"owner": {"reputation": 6328, "user_id": 515774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HEi63.jpg?s=128&g=1", "display_name": "Muthukumar", "link": "https://stackoverflow.com/users/515774/muthukumar"}, "edited": false, "score": 0, "creation_date": 1494443472, "post_id": 43900621, "comment_id": 74835662, "body": "Nailed it. Thanks. I was looking exactly for this."}], "tags": [], "owner": {"reputation": 2126, "user_id": 3864737, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Lozpu.jpg?s=128&g=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/3864737/olivier"}, "is_accepted": true, "score": 1, "last_activity_date": 1494442459, "creation_date": 1494442459, "answer_id": 43900621, "question_id": 43896389, "link": "https://stackoverflow.com/questions/43896389/rabbitmq-subscription-limit-the-number-of-messages-to-pre-fetch/43900621#43900621", "title": "RabbitMQ subscription limit the number of messages to pre fetch", "body": "<p>Based on the information you made available, I'm assuming you're using <a href=\"http://rubybunny.info/articles/queues.html\" rel=\"nofollow noreferrer\">rubybunny</a>. If this assumption is incorrect (there are other ruby clients available for rabbitmq) let me know and/or check the documentation related to your client.</p>\n\n<p>Back to rubybunny, link provided points to necessary information, quoting it:</p>\n\n<blockquote>\n  <p>For cases when multiple consumers share a queue, it is useful to be\n  able to specify how many messages each consumer can be sent at once\n  before sending the next acknowledgement.</p>\n  \n  <p>In AMQP 0.9.1 parlance this is known as QoS or message prefetching. \n  Prefetching is configured on a per-channel basis. \n  To configure prefetching use the Bunny::Channel#prefetch method like so:</p>\n</blockquote>\n\n<pre><code>ch1 = connection1.create_channel\nch1.prefetch(10)\n</code></pre>\n"}], "owner": {"reputation": 6328, "user_id": 515774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HEi63.jpg?s=128&g=1", "display_name": "Muthukumar", "link": "https://stackoverflow.com/users/515774/muthukumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 43900621, "answer_count": 1, "score": 0, "last_activity_date": 1494442459, "creation_date": 1494428915, "question_id": 43896389, "link": "https://stackoverflow.com/questions/43896389/rabbitmq-subscription-limit-the-number-of-messages-to-pre-fetch", "title": "RabbitMQ subscription limit the number of messages to pre fetch", "body": "<p>I am using <code>rabbitmq</code> to communicate between <code>microservices</code> written in ruby on rails. Each service subscribes to a <code>topic</code>. All services are <code>scaled</code> and run as multiple instances based on need.</p>\n\n<p>During subscription <code>bunny</code> moves <em><code>all the messages</code></em> from the queue into <code>unacked</code> state. This makes other scaled instances to be just idle, since there is no message in <code>ready</code> state.</p>\n\n<p>Is there a way to limit the number of messages a subscription can fetch, so that other instances can take the remaining messages from the queue.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1494428709, "post_id": 43896194, "comment_id": 74826610, "body": "If you know how to read each line in Ruby, then it&#39;s a simple matter of applying the appropriate String class method for matching patterns. Have you looked at the methods in the <a href=\"https://ruby-doc.org/core-2.3.0/String.html\" rel=\"nofollow noreferrer\">Ruby String class documentation</a>?"}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1494428842, "post_id": 43896194, "comment_id": 74826731, "body": "@lurker: Nope, I&#39;m very new to Ruby and already missed my deadline."}, {"owner": {"reputation": 4446, "user_id": 6079412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5e6c2756113d7289e80bed137251db?s=128&d=identicon&r=PG&f=1", "display_name": "larz", "link": "https://stackoverflow.com/users/6079412/larz"}, "edited": false, "score": 3, "creation_date": 1494428924, "post_id": 43896194, "comment_id": 74826794, "body": "As many other people will state, this is not a homework service.  At least show us what you&#39;ve tried and where you are stuck; don&#39;t expect someone to churn out code for you"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1494429171, "post_id": 43896194, "comment_id": 74826989, "body": "@voltas it doesn&#39;t take long to read the documentation, and as has been mentioned, this site is <i>not</i> for the purpose of doing your work for you quickly to get a late assignment done."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495657089, "post_id": 43896194, "comment_id": 75351580, "body": "Your question isn&#39;t a good fit for Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need to see your attempt at solving the problem as evidence of effort. &quot;<a href=\"https://meta.stackoverflow.com/questions/334822\">How do I ask and answer homework questions?</a>&quot; is important too. And, just to point it out, SO is the top site on the internet for answering programming questions. If this is homework, you can be sure your instructor is aware of it and knows how to search to see if your solution matches code we supply."}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1494429215, "post_id": 43896478, "comment_id": 74827028, "body": "I want an inline edit  , im not allowed to create a new file. is it possible"}, {"owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1494429404, "post_id": 43896478, "comment_id": 74827166, "body": "The output of that line, what I called <code>new_file_text</code>, will be the entire file string with that regex_string removed. So you can simply rewrite to the file."}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1494429529, "post_id": 43896478, "comment_id": 74827253, "body": "Thanks Chris , will try that . Thanks for your time."}], "tags": [], "owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "is_accepted": false, "score": 1, "last_activity_date": 1495656944, "last_edit_date": 1495656944, "creation_date": 1494429097, "answer_id": 43896478, "question_id": 43896194, "link": "https://stackoverflow.com/questions/43896194/how-to-read-a-files-content-and-search-for-a-string-in-multiple-files/43896478#43896478", "title": "How to read a file&#39;s content and search for a string in multiple files", "body": "<p>I would suggest using <code>gsub</code> here. It will run a regex search on the string and replace it with the second parameter. So if you only have to replace any single string, I believe you can simply run <code>gsub</code> on that string (including the newline) and replace it with an empty string:</p>\n\n<pre><code>new_file_text = text.gsub(/regex_string\\n/, \"\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1494433327, "post_id": 43897571, "comment_id": 74829669, "body": "Thanks much, will try."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1494432051, "creation_date": 1494432051, "answer_id": 43897571, "question_id": 43896194, "link": "https://stackoverflow.com/questions/43896194/how-to-read-a-files-content-and-search-for-a-string-in-multiple-files/43897571#43897571", "title": "How to read a file&#39;s content and search for a string in multiple files", "body": "<p>You can create an array with all the words or strings you want to find and then delete/replace:</p>\n\n<pre><code>strings_to_delete = ['aaa', 'domain\\1esrt', 'delete_me']\n</code></pre>\n\n<p>Then to read the file and use <code>map</code> to create an array with all the lines who doesn't match with none of the elements in the array created before:</p>\n\n<pre><code># read the file 'text.txt'\nlines = File.open('text.txt', 'r').map do|line|\n  # unless the line matches with some value on the strings_to_delete array\n  line unless strings_to_delete.any? do |word| \n    word == line.strip \n  end\n  # then remove the nil elements\nend.reject(&amp;:nil?)\n</code></pre>\n\n<p>And then open the file again but this time to write on it, all the lines which didn't match with the values in the <code>strings_to_delete</code> array:</p>\n\n<pre><code>File.open('text.txt', 'w') do |line|\n  lines.each do |element|\n    line.write element\n  end\nend\n</code></pre>\n\n<p>The <code>txt</code> file looks like:</p>\n\n<pre><code>aaa\ndomain\\1esrt\ndomain\\2345p\nyrtfj\ntkpdp\n....\n....\ndelete_me\n</code></pre>\n\n<p>I don't know how it'll work with a bigger file, anyways, I hope it helps.</p>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1495657218, "creation_date": 1494428385, "last_edit_date": 1495657218, "question_id": 43896194, "link": "https://stackoverflow.com/questions/43896194/how-to-read-a-files-content-and-search-for-a-string-in-multiple-files", "title": "How to read a file&#39;s content and search for a string in multiple files", "body": "<p>I have a text file that has around 100 plus entries like out.txt:</p>\n\n<pre><code>domain\\1esrt\ndomain\\2345p\nyrtfj\ntkpdp\n....\n....\n</code></pre>\n\n<p>I have to read out.txt, line-by-line and check whether the strings like \"domain\\1esrt\" are present in any of the files under a different directory. If present delete only that string occurrence and save the file.</p>\n\n<p>I know how to read a file line-by-line and also know how to grep for a string in multiple files in a directory but I'm not sure how to join those two to achieve my above requirement.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1494427939, "post_id": 43895863, "comment_id": 74825978, "body": "What version of ruby? It works for me."}], "owner": {"reputation": 2659, "user_id": 6011193, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f5bbeb4df4522c60223f1de868b7ab37?s=128&d=identicon&r=PG&f=1", "display_name": "chikadance", "link": "https://stackoverflow.com/users/6011193/chikadance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1494427875, "answer_count": 0, "score": 1, "last_activity_date": 1494428032, "creation_date": 1494427591, "last_edit_date": 1494428032, "question_id": 43895863, "link": "https://stackoverflow.com/questions/43895863/how-to-understand-ruby-gsub-return", "closed_reason": "Duplicate", "title": "How to understand ruby gsub &quot;\\\\\\\\&quot; return &quot;\\&quot;", "body": "<p>Here is my code:</p>\n\n<pre><code>\"/home/roroco\".gsub(%r{/}, \"\\\\\") # =&gt; \"\\home\\roroco\"\n\"/home/roroco\".gsub(%r{/}, \"\\\\\\\\\") # =&gt; \"\\home\\roroco\"\n</code></pre>\n\n<p>I think the later one should be <code>\\\\home\\\\roroco</code>, why is it <code>\\home\\roroco</code>?</p>\n\n<p>this is my ruby version:</p>\n\n<pre><code>roroco@roroco ~/Downloads $ ruby -version\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1494433119, "post_id": 43895711, "comment_id": 74829560, "body": "this is 3 requests to database - very inefficient."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1494433329, "post_id": 43895711, "comment_id": 74829672, "body": "I know, but i suppose it is one time operation, for clearing out stale data..if it needs to be included in the code then definitely not recommended... @Andrey Deineko"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1494433384, "post_id": 43895711, "comment_id": 74829702, "body": "Nothing justifies 3 calls to DB when single one is possible instead. Especially, when it is much more easy/shorter/clearer to make it."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1494433703, "post_id": 43895711, "comment_id": 74829910, "body": "Yes bro..thanx for better solution..I got upvotes for the only reason it was an early reply i guess..other solutions are definitely better if they work for the asker.."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 2, "last_activity_date": 1494427248, "creation_date": 1494427248, "answer_id": 43895711, "question_id": 43895416, "link": "https://stackoverflow.com/questions/43895416/get-records-based-on-other-table/43895711#43895711", "title": "Get records based on other table", "body": "<p>Hhhmm..you can do something like,</p>\n\n<pre><code>unassociated_ids = A.pluck(:id) - B.pluck(:a_id).uniq\nA.where(id: unassociated_ids)\n</code></pre>\n\n<p>Hope it helps..</p>\n"}, {"comments": [{"owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494434574, "post_id": 43896155, "comment_id": 74830455, "body": "Right. I wonder if I have another restriction like a specific field value. For example b.user_name=&quot;Bryan&quot;."}, {"owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494435725, "post_id": 43896155, "comment_id": 74831127, "body": "Running this on rails console throws PG::UndefinedColumn exception"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494442472, "post_id": 43896155, "comment_id": 74835079, "body": "@learner because you can not use it in the form this answer showed it literally. You should either use Chris Brisson&#39;s answer: <code>A.where(b_id: nil)</code> or <code>A.where(b: nil)</code> or what I showed :)"}], "tags": [], "owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "is_accepted": false, "score": 3, "last_activity_date": 1494428272, "creation_date": 1494428272, "answer_id": 43896155, "question_id": 43895416, "link": "https://stackoverflow.com/questions/43895416/get-records-based-on-other-table/43896155#43896155", "title": "Get records based on other table", "body": "<p>You can retrieve A records with a B record associated with:</p>\n\n<pre><code>A.joins(:B)\n</code></pre>\n\n<p>if you need all A records which don't have an association with B you can execute:</p>\n\n<pre><code>A.where(B: nil)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494505759, "post_id": 43896240, "comment_id": 74863967, "body": "What about A.joins(:B).where(:B =&gt; nil) ?"}, {"owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "reply_to_user": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494509938, "post_id": 43896240, "comment_id": 74867294, "body": "Joins grabs the <code>A</code> records that have a <code>B</code> associated and joins the two (rails does an <code>INNER JOIN</code>), so <code>B</code> will never be nil. But <code>joins</code> can be very useful when you want to grab associations without grabbing those with <code>nil</code>!"}, {"owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494510689, "post_id": 43896240, "comment_id": 74867924, "body": "using your approach the query running on terminal is finished after few seconds."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494539521, "post_id": 43896240, "comment_id": 74885545, "body": "@learner <code>A.joins(:b)</code>  already means that there will only be <code>A</code> records with at least one associated <code>B</code> record"}], "tags": [], "owner": {"reputation": 200, "user_id": 4450542, "user_type": "registered", "profile_image": "https://graph.facebook.com/745269493/picture?type=large", "display_name": "Chris Brisson", "link": "https://stackoverflow.com/users/4450542/chris-brisson"}, "is_accepted": true, "score": 2, "last_activity_date": 1494514549, "last_edit_date": 1494514549, "creation_date": 1494428494, "answer_id": 43896240, "question_id": 43895416, "link": "https://stackoverflow.com/questions/43895416/get-records-based-on-other-table/43896240#43896240", "title": "Get records based on other table", "body": "<p>In Rails, the <code>belongs_to</code> association will mean that table <code>a</code> has a field called <code>b_id</code>. This means that the <code>A</code> table has direct access to it's association to <code>B</code>.</p>\n\n<p>To get the <code>A</code> records without any <code>B</code> attached, run <code>A.where(b_id: nil)</code>, this will return an array of all <code>A</code> records without a <code>B</code></p>\n\n<p>Edit: As coorasse stated, you can also just run <code>A.where(b: nil)</code>, which Rails will interpret as <code>A.where(b_id: nil)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494433743, "post_id": 43897949, "comment_id": 74829939, "body": "What is bs? Honestly I don&#39;t know"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494434074, "post_id": 43897949, "comment_id": 74830170, "body": "@learner into the <code>include</code> you put the association name (<code>:b</code> in your case), into where clause you always put the real database table name no matter how the model is called."}, {"owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "edited": false, "score": 0, "creation_date": 1494434230, "post_id": 43897949, "comment_id": 74830250, "body": "Good to know. Ruby is hard by the way."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 4, "last_activity_date": 1494433216, "creation_date": 1494433216, "answer_id": 43897949, "question_id": 43895416, "link": "https://stackoverflow.com/questions/43895416/get-records-based-on-other-table/43897949#43897949", "title": "Get records based on other table", "body": "<p>Yet another option is to use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-includes\" rel=\"nofollow noreferrer\"><code>includes</code></a>:</p>\n\n<pre><code>A.includes(:b).where(bs: { id: nil })\n</code></pre>\n\n<p>It will make a single query to database.</p>\n"}], "owner": {"reputation": 1212, "user_id": 1341809, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afdd238a7321a4dbdbf70cd063d7ef61?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/1341809/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1989, "favorite_count": 0, "accepted_answer_id": 43896240, "answer_count": 4, "score": 2, "last_activity_date": 1495048632, "creation_date": 1494426552, "last_edit_date": 1495048632, "question_id": 43895416, "link": "https://stackoverflow.com/questions/43895416/get-records-based-on-other-table", "title": "Get records based on other table", "body": "<p>I'm very new to Ruby and have no idea to do this. I need to create a select based on 2 tables: A and B. Both are ActiveRecord.</p>\n\n<pre><code>class A &lt; ActiveRecord::Base\n  belongs_to :b\nend\n\nclass B &lt; ActiveRecord::Base\n  has_one :a\nend\n</code></pre>\n\n<p>There are <code>A</code> records with no <code>B</code> records associated. I would like to get those records with this problem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2367, "user_id": 85076, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6slRi.jpg?s=128&g=1", "display_name": "Pierre-Adrien", "link": "https://stackoverflow.com/users/85076/pierre-adrien"}, "edited": false, "score": 0, "creation_date": 1502205237, "post_id": 43895066, "comment_id": 78103562, "body": "Did you find an answer to this? We&#39;re having the exact same problem over here, and still looking for the solution."}], "answers": [{"comments": [{"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 2, "creation_date": 1494425920, "post_id": 43895153, "comment_id": 74824327, "body": "This returns syntax error: <code>syntax error, unexpected &#39;\\n&#39;, expecting =&gt;</code>"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1494426009, "post_id": 43895153, "comment_id": 74824398, "body": "new line? where did it come from?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1494426131, "post_id": 43895153, "comment_id": 74824470, "body": "it should be <code>where(&#39;groups.active = ?&#39;, true)</code>"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1494426230, "post_id": 43895153, "comment_id": 74824548, "body": "ohh, thanx @AndreyDeineko, try this and let us know"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494426355, "post_id": 43895153, "comment_id": 74824633, "body": "still &#39;\\n&#39; u mean? strange.. are you sure it is on this line, I doubt it is somewhere else in your code.."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1494481777, "post_id": 43895153, "comment_id": 74848065, "body": "<code>has_many :groups, through: :survey_group_lists, -&gt; { where(groups: { active: true } ) }</code>"}, {"owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "edited": false, "score": 5, "creation_date": 1503455354, "post_id": 43895153, "comment_id": 78617071, "body": "The way to get this to work is to put the scope as the second argument. So change the answer to: has_many :groups, -&gt; { where(&#39;groups.active&#39; =&gt; true) }, through: :survey_group_lists"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1504693706, "post_id": 43895153, "comment_id": 79106233, "body": "@MateuszUrba\u0144ski does the solution provided above works for you? If yes, I&#39;ll update the answer.. :)"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1516384637, "post_id": 43895153, "comment_id": 83679689, "body": "@KevinSylvestre it works, I have used it multiple times..any error you receive?"}, {"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1516516941, "post_id": 43895153, "comment_id": 83715449, "body": "@Md.FarhanMemon unfortunately doesn&#39;t work for <code>preload</code> or <code>include</code> (not sure if you saw that in my original comment). It&#39;ll warn <code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table</code>. It is fine for accessing otherwise."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1516617081, "post_id": 43895153, "comment_id": 83745499, "body": "@KevinSylvestre if that&#39;s the case, can you confirm whether the asscoiation is working or not? like for above case <code>Model.last.groups</code>?"}, {"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1516854051, "post_id": 43895153, "comment_id": 83862529, "body": "Yup - that&#39;s fine. Like I mentioned, it is doesn&#39;t work for both preload and include."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 2, "last_activity_date": 1516384540, "last_edit_date": 1516384540, "creation_date": 1494425849, "answer_id": 43895153, "question_id": 43895066, "link": "https://stackoverflow.com/questions/43895066/rails-has-many-through-with-where-condition/43895153#43895153", "title": "Rails has_many through with where condition", "body": "<p>try this:</p>\n\n<pre><code>has_many :groups, through: :survey_group_lists, -&gt; { where(groups: {active: true}) }\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9063404"}, "is_accepted": false, "score": 1, "last_activity_date": 1512584464, "creation_date": 1512584464, "answer_id": 47680998, "question_id": 43895066, "link": "https://stackoverflow.com/questions/43895066/rails-has-many-through-with-where-condition/47680998#47680998", "title": "Rails has_many through with where condition", "body": "<p>It should be:</p>\n\n<pre><code>has_many :groups, through: :survey_group_lists, -&gt; { where(groups: { active: true } ) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 8292965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/549a85b04cb25ad0b4da474fd9c8001b?s=128&d=identicon&r=PG&f=1", "display_name": "hobbydev", "link": "https://stackoverflow.com/users/8292965/hobbydev"}, "is_accepted": false, "score": 7, "last_activity_date": 1602766140, "last_edit_date": 1602766140, "creation_date": 1544741168, "answer_id": 53771145, "question_id": 43895066, "link": "https://stackoverflow.com/questions/43895066/rails-has-many-through-with-where-condition/53771145#53771145", "title": "Rails has_many through with where condition", "body": "<pre><code>has_many :groups, -&gt; {where('groups.active' =&gt; true)}, through: :survey_group_lists\n</code></pre>\n<p>This is correct.</p>\n<p>Note that <strong>the lambda has to be the second argument</strong>, otherwise you will see <code>syntax error, unexpected '\\n', expecting =&gt; </code>.</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4169, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1602766140, "creation_date": 1494425631, "last_edit_date": 1494426040, "question_id": 43895066, "link": "https://stackoverflow.com/questions/43895066/rails-has-many-through-with-where-condition", "title": "Rails has_many through with where condition", "body": "<p>I have the following associations in my Survey model:</p>\n\n<pre><code>has_many :survey_group_lists, -&gt; { order 'sequence ASC, group_id ASC' }\nhas_many :groups, through: :survey_group_lists\n</code></pre>\n\n<p>I want to add where cluase to :groups association so it will return only active groups. I've tried something like this:</p>\n\n<pre><code>has_many :groups, -&gt; { where(active: true) }, through: :survey_group_lists\n</code></pre>\n\n<p>but it returns me an error: </p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"slide_groups\"\n</code></pre>\n\n<p>What I'm doing wrong?</p>\n\n<p>Edit: I'm using Rails 5.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494425380, "post_id": 43894856, "comment_id": 74823879, "body": "<code>params.to_yaml</code>?"}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494425753, "post_id": 43894856, "comment_id": 74824182, "body": "@iceman does this actually generate a file? I need those params in a file that I can push to git later on."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494425824, "post_id": 43894856, "comment_id": 74824251, "body": "No, not to a file, but that&#39;s very easy with ruby"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494458263, "post_id": 43894856, "comment_id": 74842163, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Show us your attempt to solve this."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494484738, "post_id": 43896055, "comment_id": 74849558, "body": "Thanks for the answer. Everything works, except that the yaml file is blank. Any idea why that could be?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494504507, "post_id": 43896055, "comment_id": 74863067, "body": "@JustusP Can you confirm that your <code>form</code> parameters are complete? To do that check your logs, you should see something like this: <code>Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;vQLzPwYZ13iE...&quot;, &quot;answers&quot;=&gt;{&quot;ans1&quot;=&gt;&quot;answer1&quot;, &quot;ans2&quot;=&gt;&quot;answer2&quot;, &quot;ans3&quot;=&gt;&quot;answer3&quot;}, &quot;commit&quot;=&gt;&quot;submit&quot;}</code>."}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494506917, "post_id": 43896055, "comment_id": 74864867, "body": "yes <code>Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;YYA6nJoQc08TKVZL....&quot;, &quot;answer&quot;=&gt;{&quot;ans1&quot;=&gt;&quot;Test1&quot;, &quot;ans2&quot;=&gt;&quot;Test2&quot;, &quot;ans3&quot;=&gt;&quot;Test3&quot;}, &quot;commit&quot;=&gt;&quot;submit&quot;}</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494507180, "post_id": 43896055, "comment_id": 74865059, "body": "@JustusP Ok, no problem there; can you share your controller action with the updated code (where you are opening the file and reading <code>params</code>)?"}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494507598, "post_id": 43896055, "comment_id": 74865364, "body": "<code>class FormController &lt; ApplicationController     def parse_input       # params[:ans].each do |value|       #   render :template =&gt; &quot;layouts&#47;application.html.erb&quot;, :locals =&gt; {value =&gt; value.upcase}       # end       File.open(Rails.root.join(&#39;lib&#39;, &#39;git&#39;, &#39;quota.yaml&#39;), &#39;a&#39;) do |file|         file &lt;&lt; params[:answers].as_json.to_yaml       end     end end </code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494508073, "post_id": 43896055, "comment_id": 74865754, "body": "Ohh, i see your key is <code>answer</code> not <code>answers</code> (i see that typo in my answer as well; so either change to <code>answer</code> in your controller: <code>file &lt;&lt; params[:answer].as_json.to_yaml</code> or change to <code>:answers</code> in each input, like this: <code>&lt;%= text_field(:answers, :ans1) %&gt;</code>. I&#39;ve updated the answer (with the second option, that is, changing each input to <code>:answers</code>)."}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494509037, "post_id": 43896055, "comment_id": 74866587, "body": "Ohhh! Thanks so much :)"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1494510497, "post_id": 43896055, "comment_id": 74867767, "body": "@JustusP Glad to help! If the answer works you can accept it (clicking the tick) :)"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1494508088, "last_edit_date": 1494508088, "creation_date": 1494428039, "answer_id": 43896055, "question_id": 43894856, "link": "https://stackoverflow.com/questions/43894856/how-do-i-parse-values-from-a-controller-back-to-yaml/43896055#43896055", "title": "How do I parse values from a controller back to yaml?", "body": "<h3>Use Ruby <a href=\"https://ruby-doc.org/core-2.4.0/File.html\" rel=\"nofollow noreferrer\">File</a>.</h3>\n\n<p>Add <code>File.open()</code> in your controller <code>parse_input</code> action<sup>1</sup>:</p>\n\n<pre><code>File.open(Rails.root.join('data', 'answers.yaml'), 'a') do |file|\n  file &lt;&lt; params.to_yaml\nend\n</code></pre>\n\n<p>This code will create an <code>answers.yaml</code> file in <code>/data</code> directory<sup>2</sup> (check <code>open</code> options <a href=\"http://ruby-doc.org/core-2.4.1/IO.html#method-c-new-label-IO+Open+Mode\" rel=\"nofollow noreferrer\">here</a>) and append all your <code>params</code> to it (in <strong>yaml</strong> format).</p>\n\n<p>Consider that <code>params.to_yaml</code> will include <strong>all</strong> parameters in <code>params</code>, so your file will look something similar to this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>--- !ruby/object:ActionController::Parameters\nparameters: !ruby/hash:ActiveSupport::HashWithIndifferentAccess\n  utf8: \"\u2713\"\n  authenticity_token: fdUblOU+QL/daIdRoa94IbOjm0RWL/ugABsEYsdfem/Pt+N5hCSMQpfMVWanfqCHoX4WDPfTEUuVsNSJsnuvyQ==\n  ans: !ruby/hash:ActiveSupport::HashWithIndifferentAccess\n    field: answer1\n  ans1: !ruby/hash:ActiveSupport::HashWithIndifferentAccess\n    field: answer2\n  ans2: !ruby/hash:ActiveSupport::HashWithIndifferentAccess\n    field: answer3\n  commit: submit\n  controller: form\n  action: parse_input\npermitted: false\n</code></pre>\n\n<p>So you may want to filter <code>params</code> before creating the file, and you can accomplish that by, first, changing how you name your <code>input</code> tags:</p>\n\n<pre><code>&lt;%=form_tag(\"/parse_input\", method: \"post\") do %&gt;\n  &lt;%= text_field(:answers, :ans1) %&gt;\n  &lt;%= text_field(:answers, :ans2) %&gt;\n  &lt;%= text_field(:answers, :ans3) %&gt;\n  &lt;%= submit_tag(\"submit\") %&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>This will generate a form which <code>input</code> names will be grouped in <code>answers</code>, for example, the first input <code>name</code> will be <code>answers[ans1]</code>.</p>\n\n<p>Now you can access only the <code>answers</code> parameters with <code>params[:answers]</code> (this will filter out anything out of that group, e.g. <code>commit</code>, <code>controller</code>, <code>action</code>, etc.); but we still need more filtering, since <code>params[:answers].to_yaml</code> will output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>--- !ruby/object:ActionController::Parameters\nparameters: !ruby/hash:ActiveSupport::HashWithIndifferentAccess\n  ans1: answer1\n  ans2: answer2\n  ans3: answer3\npermitted: false \n</code></pre>\n\n<p>So, as second step, call <code>as_json</code> before calling <code>to_yaml</code>; this will convert the <code>ActionController::Parameters</code> object to <code>json</code> format, removing the extra parameters (i.e. <code>parameters</code>, <code>permitted</code>), so</p>\n\n<pre><code>File.open(Rails.root.join('data', 'answers.yaml'), 'a') do |file|\n  file &lt;&lt; params[:answers].as_json.to_yaml\nend\n</code></pre>\n\n<p>will create the following <code>answers.yaml</code> file;</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>---\nans1: answer1\nans2: answer2\nans3: answer3\n</code></pre>\n\n<p><strong>Notes</strong></p>\n\n<p><sup>1</sup> It could be better if you create a private method within your controller, and call that method in your action.</p>\n\n<p><sup>2</sup> The directory you choose (<code>data</code> in the example) should be created first.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1494458593, "creation_date": 1494458593, "answer_id": 43904150, "question_id": 43894856, "link": "https://stackoverflow.com/questions/43894856/how-do-i-parse-values-from-a-controller-back-to-yaml/43904150#43904150", "title": "How do I parse values from a controller back to yaml?", "body": "<p>For simplicity, assume <code>params</code> contains:</p>\n\n<pre><code>params = {\n  ans: 'foo'\n}\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>require 'yaml'\n\nFile.write('foo.yaml', params.to_yaml)\n</code></pre>\n\n<p>After running the file would contain:</p>\n\n<pre><code>---\n:ans: foo\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 43896055, "answer_count": 2, "score": 1, "last_activity_date": 1494508088, "creation_date": 1494425104, "last_edit_date": 1494458241, "question_id": 43894856, "link": "https://stackoverflow.com/questions/43894856/how-do-i-parse-values-from-a-controller-back-to-yaml", "title": "How do I parse values from a controller back to yaml?", "body": "<p>I have a form in my application.html.erb:</p>\n\n<pre><code> &lt;%=form_tag(\"/parse_input\", method: \"post\") do %&gt;\n        &lt;%= text_field(:ans, :field) %&gt;\n        &lt;%= text_field(:ans1, :field) %&gt;\n        &lt;%= text_field(:ans2, :field) %&gt;\n        &lt;%= submit_tag(\"submit\") %&gt;\n    &lt;%end%&gt;\n\n    &lt;%= @ans.to_s %&gt;\n</code></pre>\n\n<p>which is parsed in form_controller.rb:</p>\n\n<pre><code>class FormController &lt; ApplicationController\n  def parse_input\n    params[:ans].each do |value|\n      render :template =&gt; \"layouts/application.html.erb\", :locals =&gt; {value =&gt; value.upcase}\n    end\n  end\nend\n</code></pre>\n\n<p>I want to write the form values to a YAML file. I set up a dummy function in my application.html.erb that successfully generates a YAML from a hash. How do I generate a YAML with the form values?</p>\n"}, {"tags": ["ruby", "string", "binary", "unpack"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1494424696, "post_id": 43894503, "comment_id": 74823316, "body": "There is a pack method but I&#39;m not sure what argument you need to feed it to reverse the unpacking.."}], "answers": [{"comments": [{"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "edited": false, "score": 0, "creation_date": 1494426208, "post_id": 43894946, "comment_id": 74824531, "body": "As I just checked, there is also <code>encode</code> method that will in fact change the string."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "edited": false, "score": 1, "creation_date": 1494426883, "post_id": 43894946, "comment_id": 74825022, "body": "@FranMartinez are you trying to fix a broken string? I&#39;ve added an example."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1494426767, "last_edit_date": 1494426767, "creation_date": 1494425376, "answer_id": 43894946, "question_id": 43894503, "link": "https://stackoverflow.com/questions/43894503/undo-string-to-binary-in-ruby/43894946#43894946", "title": "Undo string to binary in ruby", "body": "<p>The conversion is equivalent to:</p>\n\n<pre><code>s = \"Anatom\u00c3\u00ada Seg\u00c3\u00ban Grey\"\n#=&gt; \"Anatom\u00c3\u00ada Seg\u00c3\u00ban Grey\"\n\ns.force_encoding('BINARY')\n#=&gt; \"Anatom\\xC3\\x83\\xC2\\xADa Seg\\xC3\\x83\\xC2\\xBAn Grey\"\n</code></pre>\n\n<p>It can be \"reversed\" via: (you might have to adjust the <code>'UTF-8'</code> part)</p>\n\n<pre><code>s.force_encoding('UTF-8')\n#=&gt; \"Anatom\u00c3\u00ada Seg\u00c3\u00ban Grey\"\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-force_encoding\" rel=\"nofollow noreferrer\"><code>force_encoding</code></a> doesn't change the string, it just defines how the bytes are interpreted.</p>\n\n<p>To fix the string, you probably have to call <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-encode\" rel=\"nofollow noreferrer\"><code>encode</code></a> in addition:</p>\n\n<pre><code>\"Anatom\u00c3\u00ada Seg\u00c3\u00ban Grey\".encode('ISO-8859-1').force_encoding('UTF-8')\n#=&gt; \"Anatom\u00eda Seg\u00fan Grey\"\n</code></pre>\n"}], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 43894946, "answer_count": 1, "score": 1, "last_activity_date": 1494426767, "creation_date": 1494424323, "question_id": 43894503, "link": "https://stackoverflow.com/questions/43894503/undo-string-to-binary-in-ruby", "title": "Undo string to binary in ruby", "body": "<p>I have a code to transform from string to binary:</p>\n\n<pre><code>&gt; s = \"Anatom\u00c3\u00ada Seg\u00c3\u00ban Grey\"\n=&gt; \"Anatom\u00c3\u00ada Seg\u00c3\u00ban Grey\"\n\n&gt; s.unpack(\"a*\").first\n=&gt; \"Anatom\\xC3\\x83\\xC2\\xADa Seg\\xC3\\x83\\xC2\\xBAn Grey\"\n</code></pre>\n\n<p>How can I get the original string (undo the <code>unpack</code>)?</p>\n"}, {"tags": ["ruby", "lita"], "answers": [{"comments": [{"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "edited": false, "score": 1, "creation_date": 1580757201, "post_id": 60042324, "comment_id": 106194718, "body": "Thanks @jvdmr =)"}], "tags": [], "owner": {"reputation": 636, "user_id": 4819705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87cd137a2bb2e5a70fc24711a6949ae?s=128&d=identicon&r=PG", "display_name": "jvdmr", "link": "https://stackoverflow.com/users/4819705/jvdmr"}, "is_accepted": true, "score": 0, "last_activity_date": 1580743828, "creation_date": 1580743828, "answer_id": 60042324, "question_id": 43894440, "link": "https://stackoverflow.com/questions/43894440/how-can-i-set-config-on-lita-handler-for-tests/60042324#60042324", "title": "How can I set config on Lita Handler for tests?", "body": "<p>Apparently you can do this through the <code>registry</code> object:</p>\n\n<pre><code>describe Lita::Handlers::MyHandler, lita_handler: true do\n  before do\n    registry.config.handlers.my_handler.base_url = 'base url here'\n    registry.config.handlers.my_handler.details_path = 'some path'\n    ...\n  end\n\n  ... actual testing ...\n\nend\n</code></pre>\n\n<p>I couldn't find this information anywhere in docs either. I finally figured it out by looking at tests of other plugins, so I figured I'd document it here.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 60042324, "answer_count": 1, "score": 2, "last_activity_date": 1580743828, "creation_date": 1494424156, "question_id": 43894440, "link": "https://stackoverflow.com/questions/43894440/how-can-i-set-config-on-lita-handler-for-tests", "title": "How can I set config on Lita Handler for tests?", "body": "<p>My handler have 4 configs input</p>\n\n<pre><code>  config :base_url\n  config :details_path\n  config :create_path\n  config :token\n</code></pre>\n\n<p>I set to them in my lita_config file, but to test my handler, I need set values to him on my specs as well. How can I do this?</p>\n"}, {"tags": ["ruby", "macos", "fastlane"], "answers": [{"tags": [], "owner": {"reputation": 10562, "user_id": 445598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4ab0af72c2e38ff2315851a2a0d82bb4?s=128&d=identicon&r=PG", "display_name": "KrauseFx", "link": "https://stackoverflow.com/users/445598/krausefx"}, "is_accepted": true, "score": 2, "last_activity_date": 1494493593, "creation_date": 1494493593, "answer_id": 43911077, "question_id": 43894094, "link": "https://stackoverflow.com/questions/43894094/call-fastlane-function-from-ruby-file/43911077#43911077", "title": "Call fastlane function from Ruby file", "body": "<p>You can do that, however make sure you're not using private API.</p>\n\n<pre><code>require 'fastlane'\nFastlane::Runner.new.execute(\"beta\")\n</code></pre>\n"}], "owner": {"reputation": 1026, "user_id": 1183362, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/62a4e16806c8fd879f159e8777f0ca28?s=128&d=identicon&r=PG", "display_name": "Welton122", "link": "https://stackoverflow.com/users/1183362/welton122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 43911077, "answer_count": 1, "score": 2, "last_activity_date": 1573081156, "creation_date": 1494423351, "last_edit_date": 1573081156, "question_id": 43894094, "link": "https://stackoverflow.com/questions/43894094/call-fastlane-function-from-ruby-file", "title": "Call fastlane function from Ruby file", "body": "<p>This is quite a simple question. I need to call a fastlane lane from an external Ruby file. Is this possible? If so, how do I do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "unicorn", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 6995153, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb2926eafac27376d8d0abd4da4160ed?s=128&d=identicon&r=PG&f=1", "display_name": "RoR Developer", "link": "https://stackoverflow.com/users/6995153/ror-developer"}, "edited": false, "score": 0, "creation_date": 1494427320, "post_id": 43894557, "comment_id": 74825438, "body": "after deployment, I did few changes in my code and again I deploy with &quot;cap production deploy&quot; command. (the server already is running) but that time I&#39;m getting error because port already use to unicorn. I want to restart my unicorn while I run cap production deploy."}, {"owner": {"reputation": 477, "user_id": 898716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSIAn.jpg?s=128&g=1", "display_name": "Allam Matsubara", "link": "https://stackoverflow.com/users/898716/allam-matsubara"}, "reply_to_user": {"reputation": 131, "user_id": 6995153, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb2926eafac27376d8d0abd4da4160ed?s=128&d=identicon&r=PG&f=1", "display_name": "RoR Developer", "link": "https://stackoverflow.com/users/6995153/ror-developer"}, "edited": false, "score": 0, "creation_date": 1494428437, "post_id": 43894557, "comment_id": 74826396, "body": "There are several options on how you can restart your unicorn after you cap deploy. You can search google to see that, but does any of these <a href=\"http://stackoverflow.com/questions/19896800/starting-or-restarting-unicorn-with-capistrano-3-x\">answers</a> help you?"}], "tags": [], "owner": {"reputation": 477, "user_id": 898716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSIAn.jpg?s=128&g=1", "display_name": "Allam Matsubara", "link": "https://stackoverflow.com/users/898716/allam-matsubara"}, "is_accepted": true, "score": 2, "last_activity_date": 1494424447, "creation_date": 1494424447, "answer_id": 43894557, "question_id": 43893924, "link": "https://stackoverflow.com/questions/43893924/unicorn-restart-master-failed-to-start-check-stderr-log-for-details/43894557#43894557", "title": "Unicorn Restart - master failed to start, check stderr log for details", "body": "<p>The problem is that you have another service listening in port 8080, that's what your log says. If you're using linux you can check which service it is using <code>lsof -i:8080</code>. This will tell you who is using that port. If you can kill the service, just do it, if you can't, just change the port on your config files.</p>\n"}, {"tags": [], "owner": {"reputation": 814, "user_id": 2197413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6403eff8babdfd0b83b8008974206f97?s=128&d=identicon&r=PG", "display_name": "bryanus", "link": "https://stackoverflow.com/users/2197413/bryanus"}, "is_accepted": false, "score": 0, "last_activity_date": 1540413954, "creation_date": 1540413954, "answer_id": 52977674, "question_id": 43893924, "link": "https://stackoverflow.com/questions/43893924/unicorn-restart-master-failed-to-start-check-stderr-log-for-details/52977674#52977674", "title": "Unicorn Restart - master failed to start, check stderr log for details", "body": "<p>To kill a process that's already running, you can check for them with</p>\n\n<pre><code>ps aux | grep unicorn\n</code></pre>\n\n<p>Which will list something like</p>\n\n<pre><code>deployer  3807  2.8  9.3 369964 94996 ?        Sl   12:51   0:03 unicorn master -D -c /home/deployer/apps/cb_app/current/config/unicorn.rb -E staging\n\ndeployer  3816  0.0  8.5 369964 87040 ?        Sl   12:51   0:00 unicorn worker[0] -D -c /home/deployer/apps/cb_app/current/config/unicorn.rb -E staging\n\ndeployer  3818  0.0  8.5 369964 87200 ?        Sl   12:51   0:00 unicorn worker[1] -D -c /home/deployer/apps/cb_app/current/config/unicorn.rb -E staging\n</code></pre>\n\n<p>You can then kill them with</p>\n\n<pre><code>kill 3807\n</code></pre>\n\n<p>Now try your deploy again and see if the master starts.</p>\n"}, {"tags": [], "owner": {"reputation": 793, "user_id": 2173368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890e7be2505e4da37a8f31c796be977e?s=128&d=identicon&r=PG&f=1", "display_name": "Giggs", "link": "https://stackoverflow.com/users/2173368/giggs"}, "is_accepted": false, "score": 0, "last_activity_date": 1554304075, "creation_date": 1554304075, "answer_id": 55498459, "question_id": 43893924, "link": "https://stackoverflow.com/questions/43893924/unicorn-restart-master-failed-to-start-check-stderr-log-for-details/55498459#55498459", "title": "Unicorn Restart - master failed to start, check stderr log for details", "body": "<p>Sometimes it's just about permissions, as unicorn restarts it needs to write in logs. Check the folder permissions for /log and make it writeable for all.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 10797847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p4QTC.jpg?s=128&g=1", "display_name": "Jagdish0886", "link": "https://stackoverflow.com/users/10797847/jagdish0886"}, "is_accepted": false, "score": 0, "last_activity_date": 1565834924, "creation_date": 1565834924, "answer_id": 57504083, "question_id": 43893924, "link": "https://stackoverflow.com/questions/43893924/unicorn-restart-master-failed-to-start-check-stderr-log-for-details/57504083#57504083", "title": "Unicorn Restart - master failed to start, check stderr log for details", "body": "<p>I faced the same issue and yes, its about the permissions, earlier when the docker GitLab container (or server) was down, I did make some changes to the permissions of logs and data files (which are volumes) on local machine. As the permissions were changed the GitLab container was not able to write anything while boot up, hence giving this error. As I have reverted the changes i did. It is working fine for me.</p>\n"}], "owner": {"reputation": 131, "user_id": 6995153, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb2926eafac27376d8d0abd4da4160ed?s=128&d=identicon&r=PG&f=1", "display_name": "RoR Developer", "link": "https://stackoverflow.com/users/6995153/ror-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3093, "favorite_count": 1, "accepted_answer_id": 43894557, "answer_count": 4, "score": 1, "last_activity_date": 1565834924, "creation_date": 1494422923, "question_id": 43893924, "link": "https://stackoverflow.com/questions/43893924/unicorn-restart-master-failed-to-start-check-stderr-log-for-details", "title": "Unicorn Restart - master failed to start, check stderr log for details", "body": "<p>Geting error while deployment with capistrano</p>\n\n<pre><code>DEBUG [aaaad896] Command: cd /home/dev/PROJECT-NAME/current &amp;&amp; ( export RAILS_ENV=\"production\" ; ~/.rvm/bin/rvm default do bundle exec unicorn -c /home/dev/PROJECT-NAME/current/config/unicorn.rb -E deployment -D  )\nDEBUG [aaaad896]    master failed to start, check stderr log for details\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as dev@XX.XXX.XXX.XX: bundle exit status: 1\nbundle stdout: Nothing written\nbundle stderr: master failed to start, check stderr log for details\n</code></pre>\n\n<p><strong>Other Log.</strong></p>\n\n<pre><code>Errno::EADDRINUSE: Address already in use - bind(2) for 0.0.0.0:8080\n  /home/dev/PROEJCT-NAME/shared/bundle/ruby/2.3.0/gems/unicorn-5.1.0/lib/unicorn/socket_helper.rb:149:in `bind'\n</code></pre>\n\n<p><strong>unicorn.rb File</strong> :  <a href=\"https://gist.github.com/dipaktc/d45ab80a1a40e2dd163da7a622c7f273\" rel=\"nofollow noreferrer\">unicorn.rb</a></p>\n\n<p><strong>deploy.rb File</strong> <a href=\"https://gist.github.com/dipaktc/459e5acd7e9716bba7f8bd55ad642cb5\" rel=\"nofollow noreferrer\">deploy.rb</a></p>\n\n<p><strong>default (nginx/site-enables/default) File</strong> : <a href=\"https://gist.github.com/dipaktc/674d51b8821f9aaf042776d1235ec02b\" rel=\"nofollow noreferrer\">default</a></p>\n\n<p>While restarting unicorn everytime I'm getting this error in capistrano. So how can I fix this ?</p>\n"}, {"tags": ["ruby", "methods", "parameter-passing"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1494419997, "post_id": 43892769, "comment_id": 74819455, "body": "&quot;Too ugly.&quot; - it is the way to go."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1494420257, "post_id": 43892769, "comment_id": 74819656, "body": "<code>meth(123, 456, arg1: 234, arg2: (543 if cond))</code> is a valid ruby, but I think your last try is better."}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1494444742, "post_id": 43892769, "comment_id": 74836422, "body": "@AndreyDeineko et al: I appreciate the sentiment. This question is not about general programming paradigms, but a very specific, and I believe very clear issue. I am aware of &quot;Kathinka&#39;s Law&quot;, but it&#39;s really not necessary to convince me of the invalidity of the question, concerning its priority. You never know what good idea might crop up!"}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1494444789, "post_id": 43892769, "comment_id": 74836451, "body": "@Ilya, it&#39;s valid ruby but does not fit the question. For whatever crooked reason, I absoltely need <code>:arg2</code> not to be in the hash (not even with a <code>nil</code> value as your offer would produce). Thanks though!"}], "answers": [{"comments": [{"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "edited": false, "score": 0, "creation_date": 1494424527, "post_id": 43893993, "comment_id": 74823177, "body": "My answer <i>is</i> about simplicity and readibility. I am asking whether there is a simple and readable solution for what I am wanting to do. I am pretty deep into Ruby and cannot think of anything; treat this question like a &quot;last call for help&quot;. ;) The solution you gave does not do what I need btw, it ends up with <code>arg2: nil</code>. I need the key <code>arg2</code> to not occur in the parameter hash."}], "tags": [], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "is_accepted": false, "score": 2, "last_activity_date": 1494423095, "creation_date": 1494423095, "answer_id": 43893993, "question_id": 43892769, "link": "https://stackoverflow.com/questions/43892769/optional-key-value-in-method-call/43893993#43893993", "title": "Optional key/value in method call", "body": "<p>I think you should go with an <code>ugly</code> solution. You should prioritise simplicity and readability over code smartness.</p>\n\n<p>To answer your original question, you could do something like this:</p>\n\n<pre><code>args = { arg1: 234, arg2: (543 if cond) }\nmeth(123, 456, args)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "is_accepted": false, "score": 0, "last_activity_date": 1494444412, "creation_date": 1494444412, "answer_id": 43901182, "question_id": 43892769, "link": "https://stackoverflow.com/questions/43892769/optional-key-value-in-method-call/43901182#43901182", "title": "Optional key/value in method call", "body": "<p>I would make the third argument a method call that executes the necessary conditional.</p>\n\n<pre><code>meth(123, 457, check_cond(234, 543, object-that-contains-conditionals-data));\n</code></pre>\n\n<p>This is much clearer, and is prettier than other choices.</p>\n"}], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494444412, "creation_date": 1494419899, "last_edit_date": 1494425077, "question_id": 43892769, "link": "https://stackoverflow.com/questions/43892769/optional-key-value-in-method-call", "title": "Optional key/value in method call", "body": "<p><em>This question strictly is about <strong>elegantly</strong> calling a method with variable amounts of \"hashified\" arguments.</em></p>\n\n<h1>Background</h1>\n\n<p>I have this method:</p>\n\n<pre><code>def meth(a, b, c={})\n...\nend\n</code></pre>\n\n<p>I usually call it like this:</p>\n\n<pre><code>meth(123, 456, arg1: 234, arg2: 543)\n</code></pre>\n\n<p>The method definition should not be changed in any way, form or fashion.</p>\n\n<h1>Problem</h1>\n\n<p>Now I wish to skip the <code>args: 543</code> if a certain condition is false.</p>\n\n<p>Pseudocode, not valid Ruby:</p>\n\n<pre><code>meth(123, 456, arg1: 234, cond ? (arg2: 543) : () )\n</code></pre>\n\n<p>Is there a very elegant, short and easy to understand syntax for this <em>without changing or monkeypatching the method definition</em>? </p>\n\n<h1>What I tried</h1>\n\n<p>The obvious solution would be something like...</p>\n\n<pre><code>args = { arg1: 234 }\nargs[:arg2] = 543 if cond\nmeth(123, 456, args)\n</code></pre>\n\n<p>Too ugly.</p>\n\n<pre><code>meth(123, 456, {arg1: 234}.merge(cond ? {arg2: 543} : {})) \n</code></pre>\n\n<p>That's ok'ish, but... well... not 100% readable at a first glace when the actual code gets slightly longer.</p>\n\n<p>I tried playing around with the <code>*</code> and <code>**</code> operator but did not find a solution that looked any better.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium-webdriver", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1494477679, "post_id": 43892382, "comment_id": 74846576, "body": "Are you trying to get the <a href=\"http://www.rubydoc.info/gems/watir/Watir/Browser#html-instance_method\" rel=\"nofollow noreferrer\"><code>Browser::html</code></a> or maybe the <a href=\"http://www.rubydoc.info/gems/watir/Watir/Browser#text-instance_method\" rel=\"nofollow noreferrer\"><code>Browser::text</code></a>?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494485947, "post_id": 43892382, "comment_id": 74850295, "body": "@Lakshmi you can get the screen html as a string when you write <code>b.html</code>."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494486210, "post_id": 43892382, "comment_id": 74850468, "body": "@Lakshmi screenshot method is available for browser object not for the element object, you are calling screenshot method for element object."}, {"owner": {"reputation": 105, "user_id": 1540497, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/017bc366b0afbe9fa92c409a469ca1d6?s=128&d=identicon&r=PG", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/1540497/lakshmi"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494488138, "post_id": 43892382, "comment_id": 74851762, "body": "@RAJ we can do it. Refer : <a href=\"https://github.com/ansoni/watir-extensions-element-screenshot\" rel=\"nofollow noreferrer\">github.com/ansoni/watir-extensions-element-screenshot</a>"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494488263, "post_id": 43892382, "comment_id": 74851860, "body": "@Lakshmi Did you look at the answer below? Or not? I have updated the answer. You can do that but you need to <code>require &#39;watir&#47;extensions&#47;element&#47;screenshot&#39;</code> but I have given the answer which doesn&#39;t require this. Can you please look at the answer given below?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494489138, "post_id": 43892382, "comment_id": 74852390, "body": "@Lakshmi Okay, that gem which you mentioned is to take the screenshot of the particular element, but that too works perfectly for me. What problem you have there? I have written this code for me <code>b.div(id: &#39;loginBox&#39;).screenshot(&#39;D:&#47;Fixed&#47;preview.png&#39;)</code> It perfectly works, before you write, just install this gem <code>watir-extensions-element-screenshot</code> and require this line `require &#39;watir/extensions/element/screenshot&#39;"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494489179, "post_id": 43892382, "comment_id": 74852415, "body": "@Lakshmi You don&#39;t have to use watir-webdriver now, it&#39;s upgraded to WATIR, simply install <code>gem install watir</code>, it will allow you to code via Ruby selenium binding. New watir is wrapper around Ruby selenium-binding."}], "answers": [{"tags": [], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "is_accepted": false, "score": 2, "last_activity_date": 1494486968, "creation_date": 1494486968, "answer_id": 43908867, "question_id": 43892382, "link": "https://stackoverflow.com/questions/43892382/how-to-get-form-values-in-browser-to-watir-webdriver/43908867#43908867", "title": "How to get form values in browser to watir webdriver", "body": "<p>I found few problems in your code</p>\n\n<p><code>screenshot</code> method is not available for element object, it's available for browser object and also you need to call the method save to save the file in the destination folder. So write the following code, it would work.</p>\n\n<p>Code to get the html of the page</p>\n\n<pre><code>b.html\n</code></pre>\n\n<p>Code to take the screenshot </p>\n\n<pre><code>b.screenshot.save(\"/home/user/Documents/preview.png\")\n</code></pre>\n\n<p>Now this will save the image in the destination folder. </p>\n"}], "owner": {"reputation": 105, "user_id": 1540497, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/017bc366b0afbe9fa92c409a469ca1d6?s=128&d=identicon&r=PG", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/1540497/lakshmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1494486968, "creation_date": 1494418888, "last_edit_date": 1494481214, "question_id": 43892382, "link": "https://stackoverflow.com/questions/43892382/how-to-get-form-values-in-browser-to-watir-webdriver", "title": "How to get form values in browser to watir webdriver", "body": "<p>I have installed my application and it is running on following URL</p>\n\n<p><a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a></p>\n\n<p>Above URL will the load form with some fields, Then I will the fill the data in the required field and then submit form. My div element will displayed at the bottom of the page. Picture will be displayed inside the iframe with in the div element.</p>\n\n<p>User will the above URL and then submit form. After submitting the form, Picture should be downloaded into their local machine.</p>\n\n<p>Right I am calling the following line after form submission, how can I get the existing page into the browser object and download screenshot?</p>\n\n<pre><code>browser = Watir::Browser.new\nb.div(:id =&gt; \"phone_shell\").screenshot(\"/home/user/Documents/preview.png\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "client", "ip-address", "ipv6"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1494419638, "post_id": 43891971, "comment_id": 74819171, "body": "IPv6 is the way to go - why do you want to change this? There&#39;s a good reason why the net is moving from IPv4 to IPv6... Also, the <code>remote_ip</code> is (or should be) a best guess scenario. In real world communication, it&#39;s likely that your application will be behind a proxy layer (i.e. nginx, etc&#39;) and the remote IP address will be guessed according to the HTTP headers."}, {"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1494420289, "post_id": 43891971, "comment_id": 74819693, "body": "@Myst in my environment, IPv6 is not used and can cause connectivity problems with the users while connected to our VPN."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1494421699, "post_id": 43891971, "comment_id": 74820916, "body": "it sounds like the IPv4 support might be the issue to resolve... people connecting from home will probably be using IPv6 with their ISP. If not today, than pretty soon. It seems to me that using the IPv4 for anything other than logging might propagate the issue... especially if it&#39;s used to confirm VPN access, which would introduce security concerns regarding HTTP header forgery."}, {"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1494423869, "post_id": 43891971, "comment_id": 74822669, "body": "@Myst the VPN has its own network adapter in which it uses IPv4. For any non-work related app, whatever the OS has as default (IPv6) will take precedence. We aren&#39;t truly disabling IPv6. We are just using IPv4 precedence through the apps and vpn themselves. If someone were to complain to us that they are experiencing network connectivity issues (which has happened before), then unchecking IPv6 in the network adapters will fix that."}], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1494418693, "post_id": 43892067, "comment_id": 74818437, "body": "And how would I disable IPv6? I&#39;ve already unchecked the box in the network adapter properties for all my network adapters."}, {"owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "reply_to_user": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1494419362, "post_id": 43892067, "comment_id": 74818943, "body": "It&#39;s kind of involved in Windows, <a href=\"http://www.techunboxed.com/2012/08/how-to-disable-ipv6-in-windows-8.html\" rel=\"nofollow noreferrer\">techunboxed.com/2012/08/how-to-disable-ipv6-in-windows-8.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "reply_to_user": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1494419461, "post_id": 43892067, "comment_id": 74819034, "body": "Also, you really shouldn&#39;t have to disable it, it&#39;s kind of a lot of work to go through to see 127.0.0.1  What I describe should work (i.e. just deploy the application somewhere other than localhost)."}], "tags": [], "owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "is_accepted": false, "score": 1, "last_activity_date": 1494418419, "last_edit_date": 1494418419, "creation_date": 1494418069, "answer_id": 43892067, "question_id": 43891971, "link": "https://stackoverflow.com/questions/43891971/get-client-ip-address-in-rails-and-output-to-view/43892067#43892067", "title": "Get Client IP Address in Rails and Output to View", "body": "<p>Are you certain that <code>::1</code> is not sufficient?  That is the local host; if you publish the site to anywhere requiring layer 3 transport it should render the appropriate IPv4 or IPv6 address respectively.</p>\n\n<p>In short, if you disable your local IPv6 stack 127.0.0.1 would render.</p>\n"}, {"tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 2, "last_activity_date": 1494420083, "creation_date": 1494420083, "answer_id": 43892842, "question_id": 43891971, "link": "https://stackoverflow.com/questions/43891971/get-client-ip-address-in-rails-and-output-to-view/43892842#43892842", "title": "Get Client IP Address in Rails and Output to View", "body": "<p>You can use either </p>\n\n<ol>\n<li><code>request.ip</code> that returns the ip, whether it is a local proxy ip\naddress (localhost address) or not.</li>\n<li><code>request.remote_ip</code> is smarter and gets the ip address of the client\noutside of local proxies and this is the best that is an interpretation of all the available IP address information and it will make a best-guess.</li>\n</ol>\n\n<blockquote>\n  <p>(<code>request.remote_ip</code>)Determines originating IP address. REMOTE_ADDR is the standard but\n  will fail if the user is behind a proxy. HTTP_CLIENT_IP and/or\n  HTTP_X_FORWARDED_FOR are set by proxies so check for these if\n  REMOTE_ADDR is a proxy. HTTP_X_FORWARDED_FOR may be a comma- delimited\n  list in the case of multiple chained proxies; the last address which\n  is not trusted is the originating IP.</p>\n</blockquote>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3187, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1494420083, "creation_date": 1494417828, "last_edit_date": 1494418033, "question_id": 43891971, "link": "https://stackoverflow.com/questions/43891971/get-client-ip-address-in-rails-and-output-to-view", "title": "Get Client IP Address in Rails and Output to View", "body": "<p>In Ruby on Rails, how can I get the IP Address of a client? I want that when a user visits a certain page, Rails gets their ip address and displays it on the screen.</p>\n\n<p>In my controller I've tried:</p>\n\n<pre><code>request.remote_ip\n</code></pre>\n\n<p>but it is returning <code>::1</code> which to my knowledge is IPv6. I would like to get the IPv4 address of the client. How can I achieve this? I would only need to do this once per client since I'm only checking the ip address of the first device that they use to visit my page.</p>\n"}, {"tags": ["ruby", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1494420044, "post_id": 43891661, "comment_id": 74819484, "body": "<code>DateTime.new(n.year, n.month)</code> and <code>DateTime.new(n.year, n.month, -1)</code>"}, {"owner": {"reputation": 1522, "user_id": 2437278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cfd904b564cf00dc792cea62901c8660?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2437278/casey"}, "edited": false, "score": 0, "creation_date": 1510597362, "post_id": 43891661, "comment_id": 81492857, "body": "A comment from 2017: I am not sure if this has been updated recently or if this has always been the case, but it is not necessary to add <code>.to_date</code> in order to use the <code>end&#47;beginning_of_month</code> methods. You can call them straight on a DateTime object. It would save a step and a conversion to not add <code>.to_date</code>"}, {"owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "reply_to_user": {"reputation": 1522, "user_id": 2437278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cfd904b564cf00dc792cea62901c8660?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2437278/casey"}, "edited": false, "score": 0, "creation_date": 1511571245, "post_id": 43891661, "comment_id": 81918181, "body": "@Casey But then you are left with a <code>DateTime</code> object, not a <code>Date</code>, so it will be printed with hours and minutes."}, {"owner": {"reputation": 1522, "user_id": 2437278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cfd904b564cf00dc792cea62901c8660?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2437278/casey"}, "edited": false, "score": 0, "creation_date": 1511624350, "post_id": 43891661, "comment_id": 81930192, "body": "You&#39;re right, @user000001, if one of the requirements was to not show the time, then mine would not pass. I didn&#39;t see that as a requirement."}], "tags": [], "owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "is_accepted": true, "score": 8, "last_activity_date": 1494416959, "creation_date": 1494416959, "answer_id": 43891661, "question_id": 43891545, "link": "https://stackoverflow.com/questions/43891545/retrieve-first-and-last-day-of-the-month-with-ruby-datetime/43891661#43891661", "title": "Retrieve first and last day of the month with Ruby (DateTime)", "body": "<p>Use the <code>beginning_of_month</code> and <code>end_of_month</code> methods</p>\n\n<pre><code>irb(main):004:0&gt; n = DateTime.now\n=&gt; Wed, 10 May 2017 14:48:01 +0300\nirb(main):005:0&gt; n.to_date.beginning_of_month\n=&gt; Mon, 01 May 2017\nirb(main):006:0&gt; n.to_date.end_of_month\n=&gt; Wed, 31 May 2017\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 9, "last_activity_date": 1494420115, "creation_date": 1494420115, "answer_id": 43892850, "question_id": 43891545, "link": "https://stackoverflow.com/questions/43891545/retrieve-first-and-last-day-of-the-month-with-ruby-datetime/43892850#43892850", "title": "Retrieve first and last day of the month with Ruby (DateTime)", "body": "<p>Given a year and a month:</p>\n\n<pre><code>year = 2017\nmonth = 5\n</code></pre>\n\n<p>You can pass these to <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/Date.html#method-c-new\" rel=\"noreferrer\"><code>Date.new</code></a> along with a day value of <code>1</code> and <code>-1</code> to get the first and last day respectively:</p>\n\n<pre><code>require 'date'\nDate.new(year, month, 1)  #=&gt; #&lt;Date: 2017-05-01 ...&gt;\nDate.new(year, month, -1) #=&gt; #&lt;Date: 2017-05-31 ...&gt;\n</code></pre>\n"}], "owner": {"reputation": 2062, "user_id": 4896126, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aUY9T.png?s=128&g=1", "display_name": "Marcos R. Guevara", "link": "https://stackoverflow.com/users/4896126/marcos-r-guevara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3382, "favorite_count": 1, "accepted_answer_id": 43891661, "answer_count": 2, "score": 3, "last_activity_date": 1494420115, "creation_date": 1494416670, "question_id": 43891545, "link": "https://stackoverflow.com/questions/43891545/retrieve-first-and-last-day-of-the-month-with-ruby-datetime", "title": "Retrieve first and last day of the month with Ruby (DateTime)", "body": "<h2>How can i retrieve Retrieve first and last day of the month with Ruby (DateTime)?</h2>\n\n<p><em>I want to create invoices that start the first day and finishes the last day of the month.</em></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "transactions"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494418806, "post_id": 43891101, "comment_id": 74818508, "body": "I think the transaction <i>will</i> revert if there is a timeout exception raised, no?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494418918, "post_id": 43891101, "comment_id": 74818599, "body": "But if I&#39;m mistaken, then you can manually <code>raise ActiveRecord::Rollback</code>"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494420124, "post_id": 43891101, "comment_id": 74819553, "body": "You meant, when we catch this timeout we have raise rollback exception?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494421611, "post_id": 43891101, "comment_id": 74820830, "body": "Maybe... But like I say, I think this will be happening already! (If not, can you provide a complete example?)"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 1, "creation_date": 1548366468, "post_id": 43891101, "comment_id": 95526763, "body": "if you are referring to th H12 heroku error, than this wont work AFAIK. the error will be raised from outside of your transaction, so no rollback will be issued. you will need to have your own timeout handling within the transaction block. having said this, it&#39;s a really bad idea to keep any transaction open for that long. so rather invest your time into building something that is recoverabel"}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1548380702, "post_id": 43891101, "comment_id": 95530529, "body": "How is your controller action able to live long enough for a <code>Rack::Timeout</code>? As @phoet suggest you should look to move long running transactions out of your controller. Instead look to create the smallest object required to process the job and give the user a way of tracking it. Creating a job which can be performed asynchronously is a lot more reliable and a better user experience."}, {"owner": {"reputation": 864, "user_id": 1423901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mLA3B.jpg?s=128&g=1", "display_name": "Redithion", "link": "https://stackoverflow.com/users/1423901/redithion"}, "edited": false, "score": 0, "creation_date": 1548424711, "post_id": 43891101, "comment_id": 95547282, "body": "Not what the OP asked, but the only problem I see here is that timeout occurs <i>after</i> the transaction block (so the record is created correctly) and <i>before</i> the response is sent (so it will throw a timeout error but the record was indeed created)."}], "answers": [{"tags": [], "owner": {"reputation": 21992, "user_id": 712765, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oLlVJ.jpg?s=128&g=1", "display_name": "Old Pro", "link": "https://stackoverflow.com/users/712765/old-pro"}, "is_accepted": false, "score": 3, "last_activity_date": 1548444698, "last_edit_date": 1548444698, "creation_date": 1548397386, "answer_id": 54359948, "question_id": 43891101, "link": "https://stackoverflow.com/questions/43891101/timeout-with-transaction-block-rails/54359948#54359948", "title": "TimeOut with transaction block rails", "body": "<p>When a Rack timeout happens, any transaction in process will be rolled back, but transactions that have already been committed will, of course remain committed. You should not have to worry about it. </p>\n\n<p>Once you start a database transaction, it will eventually either be <em>committed</em> or <em>rolled back</em>. Those are the only two possibilities for ending a transaction. When you commit the transaction, you are saying that you want those changes to be saved regardless of what happens next. If you do not commit the transaction, the database will automatically rollback the transaction once it gets into any state where the transaction cannot move forward, such as a broken network connection. </p>\n\n<p><code>ActiveRecord</code> automatically commits the transaction when the <code>ActiveRecord::Base.transaction do</code> block exits normally. Abnormal exits may cause <code>ActiveRecord</code> to issue a <code>ROLLBACK</code> command to the database, which is efficient and good practice and returns the connection to a ready state, but it is not strictly necessary, because unless the transaction is explicitly committed, the database will eventually automatically roll it back. </p>\n"}, {"comments": [{"owner": {"reputation": 21992, "user_id": 712765, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oLlVJ.jpg?s=128&g=1", "display_name": "Old Pro", "link": "https://stackoverflow.com/users/712765/old-pro"}, "edited": false, "score": 0, "creation_date": 1548893022, "post_id": 54409397, "comment_id": 95711247, "body": "Of course, there is nothing to guarantee the <code>rollback</code> will succeed at that point, or even that the connection to the database is still open. At some point you just have to rely on the database to automatically roll back an uncommitted transaction."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1548705631, "last_edit_date": 1548705631, "creation_date": 1548705578, "answer_id": 54409397, "question_id": 43891101, "link": "https://stackoverflow.com/questions/43891101/timeout-with-transaction-block-rails/54409397#54409397", "title": "TimeOut with transaction block rails", "body": "<p>If you look at <a href=\"https://github.com/rails/rails/blob/470e6bdac97249ca3406c635f611aa8f7df8b222/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb#L266\" rel=\"nofollow noreferrer\">ActiveRecord::ConnectionAdapters::TransactionManager#within_new_transaction</a> on line 270 and 283 Rails is rescuing <code>Exception</code>.  <a href=\"https://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby\">Rescuing Exception</a> will catch anything and everything including <code>kill</code> commands and should generally be avoided.  It is used in this case to ensure that no matter what is raised (including <code>Rack::Timeout</code>) the transaction will rollback.</p>\n"}, {"tags": [], "owner": {"reputation": 1193, "user_id": 935015, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/J0Q55.jpg?s=128&g=1", "display_name": "Sergii Mostovyi", "link": "https://stackoverflow.com/users/935015/sergii-mostovyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1600779923, "last_edit_date": 1600779923, "creation_date": 1553520262, "answer_id": 55338842, "question_id": 43891101, "link": "https://stackoverflow.com/questions/43891101/timeout-with-transaction-block-rails/55338842#55338842", "title": "TimeOut with transaction block rails", "body": "<p>You need to explicitly specify an error class, then it will be rescued and ActiveRecord will rollback the transaction.</p>\n<p>e.g. <code>Timeout.timeout(1, Timeout::Error) do</code></p>\n<p><a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/timeout/rdoc/Timeout.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.4.0/libdoc/timeout/rdoc/Timeout.html</a></p>\n<blockquote>\n<p>The exception thrown to terminate the given block cannot be rescued\ninside the block unless klass is given explicitly.</p>\n</blockquote>\n<p>Without it ActiveRecord thinks that there is no error and makes a COMMIT.</p>\n<p>It seems it was a default behavior until ruby 2.1</p>\n"}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "answer_count": 3, "score": 9, "last_activity_date": 1600779923, "creation_date": 1494415560, "last_edit_date": 1548355669, "question_id": 43891101, "link": "https://stackoverflow.com/questions/43891101/timeout-with-transaction-block-rails", "title": "TimeOut with transaction block rails", "body": "<p>As my understanding, if we have any code inside this transaction and when it happens any error with (save!, ...) in that block the entire code will revert, here the problem is if any timeout (<strong>rack timeout = 12</strong>) happens in this block.</p>\n\n<pre><code>def create\n  ActiveRecord::Base.transaction do\n   // timeout happens\n  end\nend\n</code></pre>\n\n<p>How can we rollback a code with a transaction when a <code>Rack::Timeout</code> occurs?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1494420642, "post_id": 43891963, "comment_id": 74819985, "body": "I see. I was hoping there might be something built-in to Ruby though. But, thanks! :) I&#39;ll use your code and extend/define it as some-method (though will be only native to my app)"}, {"owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "edited": false, "score": 0, "creation_date": 1494421428, "post_id": 43891963, "comment_id": 74820673, "body": "I think instead of user <code>.()</code> (that internally call method named <code>call</code> and it is completely ruby thing) we should call it explicitly like <code>.call</code> to execute proc that make code more verbose."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1494417803, "creation_date": 1494417803, "answer_id": 43891963, "question_id": 43891007, "link": "https://stackoverflow.com/questions/43891007/how-to-define-a-kind-of-block-that-is-used-specifically-for-variable-scoping/43891963#43891963", "title": "How to define a kind-of-block that is used specifically for variable scoping", "body": "<p>You could use a <code>Proc</code> (or lambda), in the same way that encapsulation is implemented in, say, ECMAScript or Scheme:</p>\n\n<pre><code>vegetable = 'bean'\n\n-&gt; fruit = 'apple' {\n  puts vegetable\n  puts fruit\n}.()\n# bean\n# apple\n\nputs vegetable\n# bean\n\nputs fruit\n# NameError: undefined local variable or method `fruit'\n</code></pre>\n\n<p>However, in general, it is considered to be more idiomatic to not write so complex code that you cannot keep track of your local variables anymore.</p>\n"}, {"tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 0, "last_activity_date": 1520514622, "last_edit_date": 1520514622, "creation_date": 1495719408, "answer_id": 44182011, "question_id": 43891007, "link": "https://stackoverflow.com/questions/43891007/how-to-define-a-kind-of-block-that-is-used-specifically-for-variable-scoping/44182011#44182011", "title": "How to define a kind-of-block that is used specifically for variable scoping", "body": "<p>I've just written this small gem: <a href=\"https://github.com/jrpolidario/var_block\" rel=\"nofollow noreferrer\">var_block</a> Hope it helps! :)</p>\n\n<h2>Update:</h2>\n\n<p>You may also be interested in ruby's <code>tap</code> method:</p>\n\n<h3>Example</h3>\n\n<pre><code>vars = { fruit: 'apple' }\n\n{ fruit: 'apple', vegetable: 'bean' }.tap do |vars|\n  puts vars[:fruit]\n  puts vars[:vegetable]\nend\n# =&gt; 'apple'\n# =&gt; 'bean'\n\nputs vars[:fruit]\n# =&gt; apple\nputs vars[:vegetable]\n# =&gt; nil\n</code></pre>\n\n<p>However in my particular case, it is limited to be used only like below:</p>\n\n<pre><code>( -&gt; { is_admin? } ).tap do |condition|\n  validates :email, presence: true, if: condition\n  validates :address, presence: true, if: condition\nend\n</code></pre>\n\n<p>but you cannot use it like below (won't work):</p>\n\n<pre><code>( -&gt; { is_admin? } ).tap do |condition|\n  validates :email, presence: true, if: -&gt; condition\n  validates :address, presence: true, if: -&gt; condition\nend\n</code></pre>\n\n<h2>Updated:</h2>\n\n<p>However, this actually works:</p>\n\n<pre><code>( -&gt; (this) { this.is_admin? } ).tap do |condition|\n  validates :email, presence: true, if: -&gt; { condition.(self) }\n  validates :address, presence: true, if: -&gt; { condition.(self) }\nend\n</code></pre>\n\n<p>... although for nested multiple conditions, you'll have to write each of them inside the <code>if:</code> block. Therefore, this is now only where my gem may be of some use.</p>\n"}], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 43891963, "answer_count": 2, "score": 2, "last_activity_date": 1520514622, "creation_date": 1494415319, "last_edit_date": 1495667412, "question_id": 43891007, "link": "https://stackoverflow.com/questions/43891007/how-to-define-a-kind-of-block-that-is-used-specifically-for-variable-scoping", "title": "How to define a kind-of-block that is used specifically for variable scoping", "body": "<h1>Update:</h1>\n\n<p>I've just written this small gem: <a href=\"https://github.com/jrpolidario/var_block\" rel=\"nofollow noreferrer\">var_block</a> Hope it helps! :)</p>\n\n<h2>Question:</h2>\n\n<ul>\n<li><p>Is there a way to do something like below?</p>\n\n<pre><code>vegetable = 'bean'\n\n# is there a ruby way equivalent to this \"with\" that I just wrote?\nwith( fruit: -&gt; {'apple'} ) do\n  puts vegetable\n  puts fruit\nend\n# =&gt; 'bean'\n# =&gt; 'fruit'\n\nputs vegetable\n# =&gt; 'bean'\nputs fruit\n# =&gt; NameError: undefined local variable or method `fruit'\n</code></pre></li>\n<li><p>I am looking for a way for a variable to be only defined inside this \"kind-of-block\" (in this example: <code>fruit</code> variable), but at the same time is executed in the context outside of that block (like as if you just copy all code inside that block, and paste it outside of that block)</p></li>\n</ul>\n\n<h2>Usage:</h2>\n\n<ul>\n<li><p>Hopefully, I could simplify \"nested-logic\" codes from my Rails app into something like (<strong>note</strong>: this is simplified use-case):</p>\n\n<pre><code># app/models/user.rb\nhas_many :apples\nvalidates :name, presence: true\n\nwith(has_an_apple: -&gt; { apples.present? ) do\n  validate :should_have_a_cart, if: { has_an_apple }\n\n  with(has_a_ripe_apple: -&gt; { apples.ripe.present? ) do\n    validate :should_have_energy_to_harvest_apples, if: -&gt; { has_an_apple &amp;&amp; has_a_ripe_apple }\n  end\n\n  with(has_a_rotten_apple: -&gt; { apples.rotten.present? ) do\n    validate :should_have_energy_to_dispose_of_rotten_apples, if: -&gt; { has_an_apple &amp;&amp; has_a_rotten_apple }\n  end\nend\n</code></pre></li>\n</ul>\n\n<h2>Remarks:</h2>\n\n<ul>\n<li>I vaguely remember that long time ago, I have read something like this exists in ruby, but I couldn't really remember it now, even after countless search on the internet.</li>\n<li>Arguably, it might have been cleaner to not use this \"blocks\", and just write all my <code>validates</code> above having the same indentations, and looks cleaner, but I want to group \"stuff\" up now that I noticed I have now lots of validations having repetitive <code>if</code> conditions, and that it's easier for me to now understand it in this way as I can immediately see the \"indents\" and the \"blocks\" to allow me to focus one particular scenario after another.</li>\n</ul>\n\n<h2>Attempts:</h2>\n\n<pre><code># begin ... end does not seem to work as the variable can still be accessed outside it\nbegin\n  fruit = 'apple'\n  puts fruit\nend\n# =&gt; 'apple'\n\nputs fruit\n# =&gt; 'apple'\n</code></pre>\n"}, {"tags": ["ruby", "parslet"], "comments": [{"owner": {"reputation": 19268, "user_id": 23963, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d9a5280831aec1b4b614eb1e5bf40baf?s=128&d=identicon&r=PG", "display_name": "Nigel Thorne", "link": "https://stackoverflow.com/users/23963/nigel-thorne"}, "edited": false, "score": 0, "creation_date": 1494460496, "post_id": 43890856, "comment_id": 74842660, "body": "I think I need more information on what your overall goal is. I can forsee many problems with generating a parser based on user input."}], "answers": [{"comments": [{"owner": {"reputation": 4017, "user_id": 3131537, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/mOOLT.jpg?s=128&g=1", "display_name": "Darshan Patel", "link": "https://stackoverflow.com/users/3131537/darshan-patel"}, "edited": false, "score": 0, "creation_date": 1494476294, "post_id": 43892095, "comment_id": 74846207, "body": "I used this alternative but I am interested to solve this issue using parslet API to match whole word."}, {"owner": {"reputation": 19268, "user_id": 23963, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d9a5280831aec1b4b614eb1e5bf40baf?s=128&d=identicon&r=PG", "display_name": "Nigel Thorne", "link": "https://stackoverflow.com/users/23963/nigel-thorne"}, "edited": false, "score": 0, "creation_date": 1494478808, "post_id": 43892095, "comment_id": 74846935, "body": "Parslet consumes input from a stream. If a token is fully matched, then that part of the stream is consumed. If &quot;name&quot; matches fully then the grammar will try to match the rest of the input against the rest of the grammar. so... you need to find a way to say &quot;name&quot; shouldn&#39;t match. One way is to put name_id first... so it preferentially matches. The other is to know what token follows name and explicitly match that."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1494418147, "creation_date": 1494418147, "answer_id": 43892095, "question_id": 43890856, "link": "https://stackoverflow.com/questions/43890856/parslet-not-parsing-whole-string/43892095#43892095", "title": "Parslet Not parsing whole string", "body": "<p>Rule <code>:data</code> is being built and then checked in the order the items were provided. To enforce longer matchers occur before the shorter ones, one might simply sort them:</p>\n\n<pre><code>data = %w|name name_id|\n\ndata = data.sort { |a, b| b &lt;=&gt; a }\n\nrule(:data) { data.map(&amp;method(:str)).reduce(:|) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19268, "user_id": 23963, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d9a5280831aec1b4b614eb1e5bf40baf?s=128&d=identicon&r=PG", "display_name": "Nigel Thorne", "link": "https://stackoverflow.com/users/23963/nigel-thorne"}, "is_accepted": false, "score": 1, "last_activity_date": 1494479725, "creation_date": 1494479725, "answer_id": 43907048, "question_id": 43890856, "link": "https://stackoverflow.com/questions/43890856/parslet-not-parsing-whole-string/43907048#43907048", "title": "Parslet Not parsing whole string", "body": "<p>As mudasobwa says... name will match, so it doesn't get a chance to try name_id. \nYou either need to change the order so name_id is tried first, or you need to make name fail to match. How you do this depends on your grammar.</p>\n\n<pre><code>require 'parslet'\nrequire 'parslet/convenience'\n\nclass Lines &lt; Parslet::Parser\n    rule(:open_tag) {str('[')}\n    rule(:close_tag) {str(']')}\n    rule(:data) { str('name]') | str('name_id]')  } # &lt;-- you can't let a matcher match unless it really is a match, so here it works because name] fails for name_id\n\n    rule(:text) { open_tag &gt;&gt; data  }\n    root :text\nend\n\nbegin\n    p Lines.new.parse(\"[name_id]\")   \nrescue Parslet::ParseFailed =&gt; failure\n    Lines.new.parse_with_debug(\"[name_id]\")\nend\n</code></pre>\n\n<p>I think I would instead let the parser break the text up for me, then inspect the structure afterwards.. e.g.</p>\n\n<pre><code>require 'parslet'\nrequire 'parslet/convenience'\n\nclass Lines &lt; Parslet::Parser\n    rule(:open_tag) {str('[')}\n    rule(:close_tag) {str(']')}\n    rule(:data) { (close_tag.absnt? &gt;&gt; any).repeat(1).as(:data)  }\n    rule(:text) { open_tag &gt;&gt; data &gt;&gt; close_tag }\n    root :text\nend\n\nbegin\n    p Lines.new.parse(\"[name_id]\")   # =&gt;  {:data=&gt;\"name_id\"@1}\nrescue Parslet::ParseFailed =&gt; failure\n    Lines.new.parse_with_debug(\"[name_id]\")\nend\n</code></pre>\n\n<p>Parslet is intended to work in two phases.. the first converts your doc to a tree. The second converts your tree to a data representation that you want. </p>\n\n<p>In this case the first parse pulls out the structure. The seconds pass could check that \"name_id\" is valid. etc. </p>\n"}], "owner": {"reputation": 4017, "user_id": 3131537, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/mOOLT.jpg?s=128&g=1", "display_name": "Darshan Patel", "link": "https://stackoverflow.com/users/3131537/darshan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1494479725, "creation_date": 1494414864, "question_id": 43890856, "link": "https://stackoverflow.com/questions/43890856/parslet-not-parsing-whole-string", "title": "Parslet Not parsing whole string", "body": "<p>For the following Parslet Parser</p>\n\n<pre><code>require 'parslet'\nrequire 'parslet/convenience'\n\nclass Lines &lt; Parslet::Parser\n        rule(:open_tag) {str('[')}\n    rule(:close_tag) {str(']')}\n    rule(:data) {str('name') | str('name_id') }\n    rule(:text) { open_tag &gt;&gt; data &gt;&gt; close_tag }\n    root :text\nend\n\nbegin\n    p Lines.new.parse(\"[name_id]\")    &lt;---- It throws error\nrescue Parslet::ParseFailed =&gt; failure\n    Lines.new.parse_with_debug(\"[name_id]\")\nend\n</code></pre>\n\n<p>It gives following error</p>\n\n<pre><code>Failed to match sequence (OPEN_TAG NAME CLOSE_TAG) at line 1 char 6.\n`- Expected \"]\", but got \"_\" at line 1 char 6.\n</code></pre>\n\n<p>If I change <code>data rule</code> from </p>\n\n<pre><code>rule(:data) {str('name') | str('name_id') }\n</code></pre>\n\n<p>to </p>\n\n<pre><code>rule(:data) {str('name_id') | str('name') }\n</code></pre>\n\n<p>then it works as expected.</p>\n\n<p>But, I am generating rules dynamically based on user input. So this solution wont work for me.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494414837, "post_id": 43890688, "comment_id": 74815494, "body": "local variable is not accessible outside class, what are you trying to do?"}], "answers": [{"tags": [], "owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "is_accepted": false, "score": 2, "last_activity_date": 1494414867, "creation_date": 1494414867, "answer_id": 43890858, "question_id": 43890688, "link": "https://stackoverflow.com/questions/43890688/uninitialized-constant-person-instance-nameerror/43890858#43890858", "title": "Uninitialized constant Person_instance (NameError)", "body": "<p>Use it in the following way</p>\n\n<pre><code>class Person\n  attr_accessor :name, :age, :gender\nend\nperson_instance = Person.new\nperson_instance.name = \"Konstantin\"\nperson_instance.age = 19\nperson_instance.gender = \"male\"\nputs person_instance.age\n</code></pre>\n\n<p>You basically need to declare your instance, once your class is declared.</p>\n"}], "owner": {"reputation": 1, "user_id": 1738097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGMAP.jpg?s=128&g=1", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/1738097/konstantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1494442140, "creation_date": 1494414404, "last_edit_date": 1494442140, "question_id": 43890688, "link": "https://stackoverflow.com/questions/43890688/uninitialized-constant-person-instance-nameerror", "title": "Uninitialized constant Person_instance (NameError)", "body": "<p>My Ruby Code...</p>\n\n<pre><code>class Person\n    attr_accessor :name, :age, :gender\n    person_instance = Person.new\n    person_instance.name = \"Konstantin\"\n    person_instance.age = 19\n    person_instance.gender = \"male\"\nend\nputs person_instance.age\n</code></pre>\n\n<p>My Error In Ruby...</p>\n\n<pre><code>C:/Users/Balu/RubymineProjects/learning/test:10:in '&lt;top (required)&gt;': uninitialized constant Person_instance (NameError)\nfrom -e:1:in 'load'\nfrom -e:1:in '&lt;main&gt;'\n</code></pre>\n\n<p>Process finished with <code>exit code 1</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1494540857, "post_id": 43890400, "comment_id": 74886024, "body": "Really, really shallow nitpick: Rails is all about convention over configuration, and it really packs a punch when you stick to its naming conventions (<a href=\"https://gist.github.com/alexpchin/f5d2be2ef3735889d315\" rel=\"nofollow noreferrer\">gist.github.com/alexpchin/f5d2be2ef3735889d315</a>). You&#39;ll definitely avoid future, otherwise-avoidable headaches if you follow it. :)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 0, "creation_date": 1494414028, "post_id": 43890425, "comment_id": 74814892, "body": "No it is not. It is a single instance...   @eventInstance = Event.where(eventcode: session[:key]) gave me a single record"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 1, "creation_date": 1494414124, "post_id": 43890425, "comment_id": 74814964, "body": "@diedaaf it gives you a <i>collection</i> <b><i>with</i></b> a single record. you want to make it <code>Event.where(eventcode: session[:key]).first</code> to get single <i>record</i>."}, {"owner": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 0, "creation_date": 1494414562, "post_id": 43890425, "comment_id": 74815309, "body": "Event.where(evencode: session[:key] gave me a single record cause there is only 1 event with that key"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 1, "creation_date": 1494414604, "post_id": 43890425, "comment_id": 74815339, "body": "@diedaaf do you read what I write? <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where\" rel=\"nofollow noreferrer\"><code>where</code></a> <b><i>returns</i></b> you a collection. Just do what I suggest and make sure it is what you need. I linked documentation, please read it through if you feel like it."}, {"owner": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 2, "creation_date": 1494414878, "post_id": 43890425, "comment_id": 74815523, "body": "I stand corrected. the .first is the way to do it. That differs from Grails ;-) Thanks!!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 0, "creation_date": 1494414925, "post_id": 43890425, "comment_id": 74815564, "body": "@diedaaf I never coded anything in Grails thus didn&#39;t know :)"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494415027, "post_id": 43890425, "comment_id": 74815638, "body": "You can also use <code>Event.find_by(eventcode: ...)</code>, that returns a single instance."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "edited": false, "score": 0, "creation_date": 1494421665, "post_id": 43890425, "comment_id": 74820885, "body": "@diedaaf yep, above shown <code>find_by</code> is one of the options to go with if you need single object with single query to DB. Make sure to accept the answer if it solves your problem and you do not expect new answers."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1494413703, "creation_date": 1494413703, "answer_id": 43890425, "question_id": 43890400, "link": "https://stackoverflow.com/questions/43890400/retrieve-name-from-model-model-name/43890425#43890425", "title": "Retrieve &#39;name&#39; from model.model.name", "body": "<p>The error means your <code>@eventInstance</code> is in fact a collection, not a single instance.</p>\n\n<p>You will want to first set <code>@eventInstance</code> to be a single instance of <code>Event</code> model. Then your code will work:</p>\n\n<pre><code>@eventInstance = Event.first\n@orgName       = @eventInstance.organizer.name\n</code></pre>\n\n<p>P.S. Ruby convention is to call variables using snake case, not camel case:</p>\n\n<pre><code>@event_instance = Event.first\n@org_name       = @event_instance.organizer.name\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 43890425, "answer_count": 1, "score": 0, "last_activity_date": 1494414294, "creation_date": 1494413643, "last_edit_date": 1494414294, "question_id": 43890400, "link": "https://stackoverflow.com/questions/43890400/retrieve-name-from-model-model-name", "title": "Retrieve &#39;name&#39; from model.model.name", "body": "<p>I want to get the name value from the model <code>Organiser</code> through model <code>Event</code>.</p>\n\n<p>My class <code>Organiser</code>:</p>\n\n<pre><code>class Organiser &lt; ActiveRecord::Base\n  belongs_to :customer\n  has_many :events\nend\n</code></pre>\n\n<p>My model <code>Event</code>:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  belongs_to :customer\n  belongs_to :location\n  belongs_to :organiser\n  has_many :subscribers\nend\n</code></pre>\n\n<p>In Grails, that is a straightforward call:</p>\n\n<pre><code>def eventInstance = Event.find....\n\ndef organiserInstance = eventInstance.organiser\n</code></pre>\n\n<p><code>organiserInstance.name</code> gave me the name from the organiser.</p>\n\n<p>How is this done in Ruby on Rails? I tried:</p>\n\n<pre><code>@orgName = @eventInstance.organiser.name\n</code></pre>\n\n<p>but then I get an error:</p>\n\n<pre><code>undefined method `organiser' for #&lt;Event::ActiveRecord_Relation:0x007f86152ef098&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "screenshot", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1494507737, "post_id": 43890281, "comment_id": 74865472, "body": "It would be useful if you can provide a page that reproduces the issue."}], "owner": {"reputation": 105, "user_id": 1540497, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/017bc366b0afbe9fa92c409a469ca1d6?s=128&d=identicon&r=PG", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/1540497/lakshmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1494478159, "creation_date": 1494413326, "last_edit_date": 1494478159, "question_id": 43890281, "link": "https://stackoverflow.com/questions/43890281/chunkypngoutofbounds-original-image-height-is-too-small", "title": "ChunkyPNG::OutOfBounds (Original image height is too small!)", "body": "<p>I am using git@github.com:ansoni/watir-extensions-element-screenshot.git\nto take screenshot.</p>\n\n<p>I am using a div id fetch screenshot, but the image inside is large when I am viewing (scrollbar appears to scroll the page to view the div completely).</p>\n\n<p>I could view and download if the image size is small.</p>\n\n<p>I am getting the following error when trying to capture screenshots of elements when the image is large (as it goes out of browser view):</p>\n\n<pre><code>ChunkyPNG::OutOfBounds (Original image height is too small!):\n</code></pre>\n\n<p>How to view and download the full image without scrolling? </p>\n\n<p>My Sample Code:</p>\n\n<pre><code>b = Watir::Browser.new\n    b.window.resize_to(1900, 1080)\n    b.goto 'http://localhost:3000'\n    b.div(:id =&gt; \"phone_shell\").screenshot(\"preview.png\")\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1494412919, "post_id": 43890058, "comment_id": 74814051, "body": "The two lines of code you posted sort two different permutations of the elements of the same array. They <b>must</b> produce the same outcome (sort the values according to your sorting rules)."}, {"owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1494413289, "post_id": 43890058, "comment_id": 74814331, "body": "@axiac  could you please explain how the sort block is going to evaluate. I think it depends on the input array"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1494414032, "post_id": 43890058, "comment_id": 74814895, "body": "If they give different results, what is the purpose of sorting?"}, {"owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1494414131, "post_id": 43890058, "comment_id": 74814968, "body": "@sawa I&#39;m looking for explanation. I just accepted Stefan answer. Please have a look at once"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1494414491, "post_id": 43890058, "comment_id": 74815253, "body": "@pramod of course it depends of the input array but the purpose of <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-sort\" rel=\"nofollow noreferrer\"><code>Array#sort()</code></a> is to return an array that contains the same values as the input array in a specified order. As long as you use the same sorting rules (<code>b &lt;=&gt; a</code> in this case), <code>#sort()</code> must always return the same result, no matter the order of values in the input array. That&#39;s the only reason <code>Array#sort()</code> exists."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1494418535, "post_id": 43890058, "comment_id": 74818314, "body": "@axiac: Actually, <code>Enumerable#sort</code> and <code>Enumerable#sort_by</code> are not stable, so it is in fact <i>not</i> guaranteed that the result is always the same. It is in fact not even guaranteed to be the same for <i>the same</i> input."}], "answers": [{"comments": [{"owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "edited": false, "score": 0, "creation_date": 1494413098, "post_id": 43890081, "comment_id": 74814173, "body": "It make sense to me, could you please explain how the block is going to evaluate. I think it depends on the input array."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "edited": false, "score": 0, "creation_date": 1494413263, "post_id": 43890081, "comment_id": 74814314, "body": "@pramod <a href=\"http://stackoverflow.com/questions/2637419/how-does-arraysort-work-when-a-block-is-passed\">please see this thread</a> on the <code>sort</code> with block explanation. It does not depend on the &quot;input array&quot; :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1494412768, "creation_date": 1494412768, "answer_id": 43890081, "question_id": 43890058, "link": "https://stackoverflow.com/questions/43890058/sort-starting-with-different-order/43890081#43890081", "title": "Sort starting with different order", "body": "<p>Because you are sorting an array, and changing the array's elements order does not change the sorting result.</p>\n\n<p>This is the whole point of sorting after all - to get <em>sorted</em> result despite the initial arrays ordering.</p>\n\n<p>To change the result, you will want to change the sorting rule, not the array.</p>\n"}, {"tags": [], "owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "is_accepted": false, "score": 1, "last_activity_date": 1494412819, "creation_date": 1494412819, "answer_id": 43890093, "question_id": 43890058, "link": "https://stackoverflow.com/questions/43890058/sort-starting-with-different-order/43890093#43890093", "title": "Sort starting with different order", "body": "<p>The output is the same regardless of the input order because you sorting the array.</p>\n\n<p>If you want to sort with the opposite order write</p>\n\n<pre><code>[3,5].sort{|a,b| a &lt;=&gt; b}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1494415131, "last_edit_date": 1494415131, "creation_date": 1494413712, "answer_id": 43890428, "question_id": 43890058, "link": "https://stackoverflow.com/questions/43890058/sort-starting-with-different-order/43890428#43890428", "title": "Sort starting with different order", "body": "<p>The first line:</p>\n\n<pre><code>[3, 5].sort { |a, b| b &lt;=&gt; a }\n</code></pre>\n\n<p>Invokes the block with <code>a = 3</code> and <code>b = 5</code>. It returns the result of <code>5 &lt;=&gt; 3</code> which is <code>1</code>. An integer greater than <code>0</code> tells <code>sort</code> that <code>a</code> follows <code>b</code>. The result is therefore <code>[5, 3]</code>.</p>\n\n<hr>\n\n<p>The second line:</p>\n\n<pre><code>[5, 3].sort { |a, b| b &lt;=&gt; a }\n</code></pre>\n\n<p>Invokes the block with <code>a = 5</code> and <code>b = 3</code>. It returns the result of <code>3 &lt;=&gt; 5</code> which is <code>-1</code>. An integer less than <code>0</code> tells <code>sort</code> that <code>b</code> follows <code>a</code>. The result is therefore (again) <code>[5, 3]</code>.</p>\n"}], "owner": {"reputation": 2110, "user_id": 2553566, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/7e99b34b142858776bdd6354815907f5?s=128&d=identicon&r=PG&f=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/2553566/pramod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 43890428, "answer_count": 3, "score": -3, "last_activity_date": 1494415131, "creation_date": 1494412693, "last_edit_date": 1494414875, "question_id": 43890058, "link": "https://stackoverflow.com/questions/43890058/sort-starting-with-different-order", "title": "Sort starting with different order", "body": "<p>In the following, the results are the same:</p>\n\n<pre><code>[3, 5].sort{|a, b| b &lt;=&gt; a}\n[5, 3].sort{|a, b| b &lt;=&gt; a}\n</code></pre>\n\n<p>I would like to know what happened internally and how it depends on input array.</p>\n"}, {"tags": ["ruby", "rspec", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": false, "score": 0, "last_activity_date": 1494432973, "creation_date": 1494432973, "answer_id": 43897869, "question_id": 43889853, "link": "https://stackoverflow.com/questions/43889853/how-can-i-match-the-array-of-strings-from-a-page-to-the-table-text-in-cucumber-c/43897869#43897869", "title": "How can I match the array of strings from a page to the table text in cucumber/capybara", "body": "<p>You need to convert a string to an array.</p>\n\n<p>Try something like this, although I'm not sure what are those escape sequences:</p>\n\n<pre><code>value = table.lines.map{ |l| l.match(/\\|(.*)\\|/)[1].strip }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 2, "last_activity_date": 1494434724, "creation_date": 1494434724, "answer_id": 43898387, "question_id": 43889853, "link": "https://stackoverflow.com/questions/43889853/how-can-i-match-the-array-of-strings-from-a-page-to-the-table-text-in-cucumber-c/43898387#43898387", "title": "How can I match the array of strings from a page to the table text in cucumber/capybara", "body": "<p>When passing tables to a cucumber step the table is passed as a cucumber datatable.  This can be converted to an array by calling <code>raw</code> on it.</p>\n\n<pre><code>Then(/^the following drawers should be present on the page$/) do |table|\n  stats = page.all(:css,'.radionav__panel-item').map(&amp;:text)\n  expect(table.raw.flatten).to contain_exactly(stats)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "is_accepted": true, "score": 0, "last_activity_date": 1494506154, "creation_date": 1494506154, "answer_id": 43915593, "question_id": 43889853, "link": "https://stackoverflow.com/questions/43889853/how-can-i-match-the-array-of-strings-from-a-page-to-the-table-text-in-cucumber-c/43915593#43915593", "title": "How can I match the array of strings from a page to the table text in cucumber/capybara", "body": "<p>This code works for me :</p>\n\n<pre><code> Then(/^the following drawers should be present on the page$/) do |table|\n  stats = page.all(:css,'.radionav__panel-item').map(&amp;:text)\n  data = table.hashes\n  begin\n    data.each do|row|\n      row.each do |key, value|\n        if stats.include? value\n        else\n          puts \"element not found\"\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 43915593, "answer_count": 3, "score": 0, "last_activity_date": 1494506154, "creation_date": 1494412084, "question_id": 43889853, "link": "https://stackoverflow.com/questions/43889853/how-can-i-match-the-array-of-strings-from-a-page-to-the-table-text-in-cucumber-c", "title": "How can I match the array of strings from a page to the table text in cucumber/capybara", "body": "<p>I write this scenario in cucumber : </p>\n\n<pre><code>Then the following drawers should be present on the page\n      |Stations  |\n      |Categories|\n      |Schedules |\n      |My Radio  |\n</code></pre>\n\n<p>below are my step definitions : </p>\n\n<pre><code>Then(/^the following drawers should be present on the page$/) do |table|\n\n  value = Array.new\n  value = \"#{table}\"\n  stats = page.all(:css,'.radionav__panel-item').map(&amp;:text)\n expect(value).to contain_exactly(stats)\nend\n</code></pre>\n\n<p>when i print <code>stats</code> i got this result : <code>[\"Stations\", \"Categories\", \"Schedules\", \"My Radio\"]</code></p>\n\n<p>and for <code>value</code> got : </p>\n\n<pre><code>|Stations  |\n|Categories|\n|Schedules |\n|My Radio  |\n</code></pre>\n\n<p>when i try to match both then i got error saying </p>\n\n<pre><code>    Then the following drawers should be present on the page # features/step_def\ninitions/radio_nav_steps.rb:14\n      stats : [\"Stations\", \"Categories\", \"Schedules\", \"My Radio\"]\n      | Stations   |\n      | Categories |\n      | Schedules  |\n      | My Radio   |\n      expected a collection that can be converted to an array with `#to_ary` or\n`#to_a`, but got \"\\n  | \\e[32m    Stations  \\e[0m\\e[0m |\\e[0m\\n  | \\e[32m    Cat\negories\\e[0m\\e[0m |\\e[0m\\n  | \\e[32m    Schedules \\e[0m\\e[0m |\\e[0m\\n  | \\e[32m\n   My Radio  \\e[0m\\e[0m |\\e[0m\\n\" (RSpec::Expectations::ExpectationNotMetError)\n      ./features/step_definitions/radio_nav_steps.rb:22:in `/^the following draw\ners should be present on the page$/'\n      features/radio_nav.feature:34:in `Then the following drawers should be pre\nsent on the page'\n\nFailing Scenarios:\ncucumber features/radio_nav.feature:33 # Scenario: As a user I should see all th\ne drawers\n</code></pre>\n\n<p>I just want to match the table element text of cucumber feature file to the text which i got from the page. </p>\n"}, {"tags": ["android", "ruby", "cucumber", "calabash"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6150307, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NIgRURG2mPA/AAAAAAAAAAI/AAAAAAAAN1k/xVm_Vn5LXfA/photo.jpg?sz=128", "display_name": "Daniele Cebin", "link": "https://stackoverflow.com/users/6150307/daniele-cebin"}, "is_accepted": false, "score": 0, "last_activity_date": 1496852874, "creation_date": 1496852874, "answer_id": 44418171, "question_id": 43889091, "link": "https://stackoverflow.com/questions/43889091/select-date-in-datapicker-with-calabach/44418171#44418171", "title": "Select date in datapicker with calabach", "body": "<p>According to calabash-android GitHub repository, you can use these calabash canned-steps:</p>\n\n<p><a href=\"https://github.com/calabash/calabash-android/blob/master/ruby-gem/lib/calabash-android/steps/date_picker_steps.rb\" rel=\"nofollow noreferrer\">https://github.com/calabash/calabash-android/blob/master/ruby-gem/lib/calabash-android/steps/date_picker_steps.rb</a></p>\n"}], "owner": {"reputation": 876, "user_id": 3061430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/be6ff1dc8bad5be251c3ebf5e5ef5a49?s=128&d=identicon&r=PG&f=1", "display_name": "khouloud mejdoub", "link": "https://stackoverflow.com/users/3061430/khouloud-mejdoub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496852874, "creation_date": 1494410118, "question_id": 43889091, "link": "https://stackoverflow.com/questions/43889091/select-date-in-datapicker-with-calabach", "title": "Select date in datapicker with calabach", "body": "<p>In Calabash Automation testing on Android. I need to select a date from a date picker. Please guide me with a ruby step definition.</p>\n\n<p>I want something like</p>\n\n<p>Then I scroll datepicker to date \"20-05-2017\" </p>\n"}, {"tags": ["ruby", "macos", "rubygems", "jekyll"], "comments": [{"owner": {"reputation": 342, "user_id": 9100310, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb6k0CraWhM/AAAAAAAAAAI/AAAAAAAAABs/4jAXxxQ98fg/photo.jpg?sz=128", "display_name": "Dr. Freddy Dimethyltryptamine", "link": "https://stackoverflow.com/users/9100310/dr-freddy-dimethyltryptamine"}, "edited": false, "score": 0, "creation_date": 1611070940, "post_id": 43889073, "comment_id": 116329032, "body": "Updating container gems solved it for me <code>docker-compose run --rm web bundle; \\ \tdocker-compose run --rm worker bundle;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 2090546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a8c63c51550381748735910968d819?s=128&d=identicon&r=PG", "display_name": "bemed", "link": "https://stackoverflow.com/users/2090546/bemed"}, "is_accepted": true, "score": 5, "last_activity_date": 1494419156, "creation_date": 1494419156, "answer_id": 43892485, "question_id": 43889073, "link": "https://stackoverflow.com/questions/43889073/could-not-find-public-suffix-2-0-4-in-any-of-the-sources/43892485#43892485", "title": "Could not find public_suffix-2.0.4 in any of the sources", "body": "<p>Right so what solve my problem was trashing the homebrew installation of ruby, removing its symlinks, then installing rvm and installing ruby through rvm.</p>\n\n<p>Took me 3 hours to find this solution.</p>\n\n<p>\u00af\\_(\u30c4)_/\u00af</p>\n"}, {"tags": [], "owner": {"reputation": 833, "user_id": 5059959, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-_n4NRE7R4P8/AAAAAAAAAAI/AAAAAAAAACI/YYZLMb8wcos/photo.jpg?sz=128", "display_name": "Sanyasirao Mopada", "link": "https://stackoverflow.com/users/5059959/sanyasirao-mopada"}, "is_accepted": false, "score": 3, "last_activity_date": 1596464138, "creation_date": 1596464138, "answer_id": 63231107, "question_id": 43889073, "link": "https://stackoverflow.com/questions/43889073/could-not-find-public-suffix-2-0-4-in-any-of-the-sources/63231107#63231107", "title": "Could not find public_suffix-2.0.4 in any of the sources", "body": "<p>Running bundle update &amp;&amp; bundle install worked for me</p>\n"}], "owner": {"reputation": 163, "user_id": 2090546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a8c63c51550381748735910968d819?s=128&d=identicon&r=PG", "display_name": "bemed", "link": "https://stackoverflow.com/users/2090546/bemed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3570, "favorite_count": 0, "accepted_answer_id": 43892485, "answer_count": 2, "score": 3, "last_activity_date": 1596464138, "creation_date": 1494410083, "question_id": 43889073, "link": "https://stackoverflow.com/questions/43889073/could-not-find-public-suffix-2-0-4-in-any-of-the-sources", "title": "Could not find public_suffix-2.0.4 in any of the sources", "body": "<p>It started when I tried to add the Google Tag Manager Gem to my local installation of Jekyll.</p>\n\n<blockquote>\n  <p>A little background here, I'm using homebrew and rbenv.<br>\n  My ruby version is 2.4.1 or at least I think it is.</p>\n</blockquote>\n\n<p>The gem didn't install and after that Jekyll started giving me this message:</p>\n\n<pre><code>Could not find public_suffix-2.0.4 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>After running 'bundle install' I get this error:</p>\n\n<pre><code>Rubygems 2.0.14.1 is not threadsafe, so your gems will be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.\nUsing public_suffix 2.0.4\nUsing colorator 1.1.0\nUsing ffi 1.9.14\nUsing forwardable-extended 2.6.0\nUsing sass 3.4.22\nUsing rb-fsevent 0.9.8\nUsing kramdown 1.12.0\nUsing liquid 3.0.6\nUsing mercenary 0.3.6\nUsing rouge 1.11.1\nUsing safe_yaml 1.0.4\nUsing bundler 1.14.6\nUsing addressable 2.5.0\nUsing rb-inotify 0.9.7\nUsing pathutil 0.14.0\nUsing jekyll-sass-converter 1.4.0\nUsing listen 3.0.8\nUsing jekyll-watch 1.5.0\nUsing jekyll 3.3.0\nUsing jekyll-feed 0.8.0\nBundle complete! 2 Gemfile dependencies, 20 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n</code></pre>\n\n<p>So I tried to update Rubygems. Silly me.</p>\n\n<p>This message showed on Terminal:</p>\n\n<blockquote>\n  <p>/usr/local/Cellar/ruby/2.4.1_1/lib/ruby/2.4.0/yaml.rb:5:in <code>&lt;top (required)&gt;':\n  It seems your ruby installation is missing psych (for YAML output).\n  To eliminate this warning, please install libyaml and reinstall your ruby.\n  /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in</code>require': dlopen(/usr/local/lib/ruby/gems/2.4.0/gems/psych-2.2.4/lib/psych.bundle, 9): Library not loaded: /usr/local/opt/ruby/lib/libruby.2.4.0.dylib (LoadError)\n    Referenced from: /usr/local/lib/ruby/gems/2.4.0/gems/psych-2.2.4/lib/psych.bundle\n    Reason: image not found - /usr/local/lib/ruby/gems/2.4.0/gems/psych-2.2.4/lib/psych.bundle\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in <code>require'\n      from /usr/local/lib/ruby/gems/2.4.0/gems/psych-2.2.4/lib/psych.rb:8:in</code>'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in <code>require'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in</code>require'\n      from /usr/local/Cellar/ruby/2.4.1_1/lib/ruby/2.4.0/yaml.rb:6:in <code>&lt;top (required)&gt;'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in</code>require'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in <code>require'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems.rb:701:in</code>load_yaml'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/config_file.rb:340:in <code>load_file'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/config_file.rb:202:in</code>initialize'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/gem_runner.rb:75:in <code>new'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/gem_runner.rb:75:in</code>do_configuration'\n      from /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/gem_runner.rb:40:in <code>run'\n      from /usr/local/bin/gem:21:in</code>'</p>\n</blockquote>\n\n<p>Did I mentioned I'm using homebrew and rbenv? Ok.</p>\n\n<p>This morning I reinstalled Ruby (using Homebrew) and told rbenv to use that version.</p>\n\n<p>So I think that my paths might be the problem but I doubt because this is the content of my paths file:</p>\n\n<pre><code>/Users/bgomes/.nvm/versions/node/v6.10.2/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin\n</code></pre>\n\n<p>This is the content of .bash_profile:</p>\n\n<pre><code>[[ -s \"$HOME/.profile\" ]] &amp;&amp; source \"$HOME/.profile\" # Load the default .profile\ntest -e \"${HOME}/.iterm2_shell_integration.bash\" &amp;&amp; source \"${HOME}/.iterm2_shell_integration.bash\"\nexport export NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\nsource ~/.nvm/nvm.sh\n</code></pre>\n\n<p>And this is the content of .bashrc:</p>\n\n<pre><code>export NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\nsource ~/.nvm/nvm.sh\n</code></pre>\n\n<p>I'm out if ideas here and definitively could use your help.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["html", "ruby", "rspec", "capybara", "internal-link"], "comments": [{"owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1494409858, "post_id": 43888722, "comment_id": 74811951, "body": "Can&#39;t replicate this with capybara 2.4.3 and rspec 3.5.0. <code>find(&#39;.bar a&#39;)[:href] #=&gt; &quot;#foo&quot;</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1494410648, "post_id": 43888722, "comment_id": 74812490, "body": "@omnikron That is sort of surprising. I am using capybara 2.12.0 and rspec 3.5.0."}, {"owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1494410905, "post_id": 43888722, "comment_id": 74812689, "body": "I don&#39;t suppose you&#39;re using any kind of path helper to generate the anchor tag...? Worth double-checking the html in that case maybe. Otherwise I am stumped."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494428507, "post_id": 43888722, "comment_id": 74826454, "body": "What driver are you using?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1494433385, "post_id": 43888722, "comment_id": 74829703, "body": "@omnikron 2.4.3 is massively out of date"}, {"owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494435159, "post_id": 43888722, "comment_id": 74830788, "body": "Thanks for the heads up @ThomasWalpole. Is an upgrade going to be easy and make my tests faster?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 1, "creation_date": 1494435341, "post_id": 43888722, "comment_id": 74830900, "body": "@omnikron 2.4.3 is over 2 years old, so while theoretically it should be an easy upgrade (semver, etc) a lot has been added.  Not sure it will make your tests faster but it will make some types of expectations/behaviors cleaner to write and fixes a bunch of issues/differences between drivers, etc."}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1494433352, "creation_date": 1494433352, "answer_id": 43897986, "question_id": 43888722, "link": "https://stackoverflow.com/questions/43888722/how-can-i-get-verbatim-href-attribute/43897986#43897986", "title": "How can I get verbatim href attribute", "body": "<p>Capybara returns the property <code>href</code> (as opposed to the attribute) in JS capable drivers, which is normalized.  To get access to the attribute value you will need to use evaluate_script</p>\n\n<pre><code>link = find(\".bar a\")\nevaluate_script(\"arguments[0].getAttribute('href')\", link)\n</code></pre>\n\n<p>If, on the other hand, you just want to verify the link has that specific href attribute you can do that with the :link selector</p>\n\n<pre><code>expect(page).to have_link('Go to foo', href: '#foo')\n</code></pre>\n\n<p>or to find the link by the href attribute </p>\n\n<pre><code>link = find(:link, href: '#foo')\n</code></pre>\n\n<p>etc...</p>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 43897986, "answer_count": 1, "score": 1, "last_activity_date": 1494433352, "creation_date": 1494409091, "question_id": 43888722, "link": "https://stackoverflow.com/questions/43888722/how-can-i-get-verbatim-href-attribute", "title": "How can I get verbatim href attribute", "body": "<p>I have a page-internal link in an html page:</p>\n\n<pre><code>&lt;div class=\"bar\"&gt;\n  &lt;a href=\"#foo\"&gt;Go to foo&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I selected this anchor element using Capybara matcher. When I try to access the <code>href</code> attribute, the value is expanded to full URL:</p>\n\n<pre><code>find(\".bar a\")[:href] # =&gt; \"http://path/to/page#foo\"\n</code></pre>\n\n<p>How can get only the internal link, i.e., the verbatim href value?</p>\n\n<pre><code>find(\".bar a\")... # =&gt; \"#foo\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4740184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e8ad15606ff8941234daae6c1e5d728?s=128&d=identicon&r=PG&f=1", "display_name": "BigL", "link": "https://stackoverflow.com/users/4740184/bigl"}, "edited": false, "score": 0, "creation_date": 1494410689, "post_id": 43888753, "comment_id": 74812514, "body": "thanks for the solution! Is it better practice to call <code>@last_10_days = Post.last_x_days(10).count</code> in the controller and then in the view just call <code>@last_10_days</code> ? Or is better to just call <code>@last_10_days = Post.last_x_days(10).count</code> in the view? Or does it not matter?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 89, "user_id": 4740184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e8ad15606ff8941234daae6c1e5d728?s=128&d=identicon&r=PG&f=1", "display_name": "BigL", "link": "https://stackoverflow.com/users/4740184/bigl"}, "edited": false, "score": 0, "creation_date": 1494411236, "post_id": 43888753, "comment_id": 74812918, "body": "Does not really matter, you can just call <code>Post.last_x_days(10).count</code> in the view directly, don&#39;t really need <code>@last_10_days</code> unless you&#39;re using it in multiple places in the view."}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": true, "score": 4, "last_activity_date": 1494410067, "last_edit_date": 1494410067, "creation_date": 1494409178, "answer_id": 43888753, "question_id": 43888671, "link": "https://stackoverflow.com/questions/43888671/ror-creating-a-method-with-a-parameter/43888753#43888753", "title": "ROR: Creating a method with a parameter", "body": "<p>Your best bet would be to create a scope on the <code>Post</code> model.</p>\n\n<pre><code>class Post ...\n\n  scope :last_x_days, -&gt; (x) { where(created_at: x.days.ago..Time.zone.now) }\nend\n</code></pre>\n\n<p>Then you can call that anywhere really, in your view or controller like this.</p>\n\n<pre><code>@last_10_days = Post.last_x_days(10).count\n</code></pre>\n\n<hr>\n\n<p><em>EDIT:</em></p>\n\n<p>You could do this also, but scopes are meant to be chain-able, so this is discouraged, though not wrong.</p>\n\n<pre><code>scope :last_x_days_count, -&gt; (x) { where(created_at: x.days.ago..Time.zone.now).count }\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4740184, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e8ad15606ff8941234daae6c1e5d728?s=128&d=identicon&r=PG&f=1", "display_name": "BigL", "link": "https://stackoverflow.com/users/4740184/bigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43888753, "answer_count": 1, "score": 1, "last_activity_date": 1494410067, "creation_date": 1494408933, "question_id": 43888671, "link": "https://stackoverflow.com/questions/43888671/ror-creating-a-method-with-a-parameter", "title": "ROR: Creating a method with a parameter", "body": "<p>I have an admins dashboard which displays posts created in the last 24 hours, 7 days, 28 days etc.</p>\n\n<pre><code>def index\n  @1DayPosts = Post.where(created_at: 1.days.ago..DateTime.now).count \n  @7DaysPosts = Post.where(created_at: 7.days.ago..DateTime.now).count \n  @28DaysPosts = Post.where(created_at: 28.days.ago..DateTime.now).count \nend\n</code></pre>\n\n<p>How could I make this into one line? Something like the below:</p>\n\n<pre><code>def index\n  @calculatePosts(a) = Post.where(created_at: a.days.ago..DateTime.now).count \nend\n</code></pre>\n\n<p>Then in the view I could do:</p>\n\n<pre><code>=@calculatePosts(1)\n</code></pre>\n\n<p>Or would I need to create a new method?</p>\n\n<pre><code>def calculatePosts(a)\n    @calculatePost = Post.where(created_at: a.days.ago..DateTime.now).count\nend\n</code></pre>\n\n<p>How would I then call this in the index view?</p>\n"}, {"tags": ["ruby", "selenium-chromedriver", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1494533713, "post_id": 43888253, "comment_id": 74882803, "body": "you can chat with the cucumber google group as to why, but &#39;universal steps&#39; such as &quot;Then(/^I click on button with text &quot;([^&quot;]*)&quot; in div identifier &quot;([^&quot;]*)&quot;$/) do |arg1, arg2|&quot; are a cucumber smell.  The step is mired in specific implementation and does not well express what&#39;s going on.  strongly suggest getting and reading &#39;the cucumber book&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 61, "user_id": 7986766, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-QMomkZEuTWg/AAAAAAAAAAI/AAAAAAAABWQ/aYrGGl46FE8/photo.jpg?sz=128", "display_name": "Vinoth Pandian", "link": "https://stackoverflow.com/users/7986766/vinoth-pandian"}, "edited": false, "score": 0, "creation_date": 1494408787, "post_id": 43888458, "comment_id": 74811238, "body": "Welcome @VinothPandian"}], "tags": [], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "is_accepted": true, "score": 2, "last_activity_date": 1494408330, "creation_date": 1494408330, "answer_id": 43888458, "question_id": 43888253, "link": "https://stackoverflow.com/questions/43888253/ruby-watir-webdriver-how-to-identify-and-click-on-the-element-in-div-tag/43888458#43888458", "title": "Ruby Watir Webdriver - How to identify and click on the element in div tag?", "body": "<p>It's inside the link, div is the parent of that link, </p>\n\n<p>So write this code</p>\n\n<pre><code>b.element(link: 'Sign Up with Email').click\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>b.link(text: 'Sign Up with Email').click\n</code></pre>\n\n<p>It would work.</p>\n"}], "owner": {"reputation": 61, "user_id": 7986766, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-QMomkZEuTWg/AAAAAAAAAAI/AAAAAAAABWQ/aYrGGl46FE8/photo.jpg?sz=128", "display_name": "Vinoth Pandian", "link": "https://stackoverflow.com/users/7986766/vinoth-pandian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 43888458, "answer_count": 1, "score": 2, "last_activity_date": 1494408330, "creation_date": 1494407824, "last_edit_date": 1494408177, "question_id": 43888253, "link": "https://stackoverflow.com/questions/43888253/ruby-watir-webdriver-how-to-identify-and-click-on-the-element-in-div-tag", "title": "Ruby Watir Webdriver - How to identify and click on the element in div tag?", "body": "<p>**I tried to identity div element from a web page and click on it using watir **</p>\n\n<p><strong>PAGE:</strong></p>\n\n<pre><code>&lt;div class=\"account-buttons\"&gt;\n        &lt;a href=\"/account/register\" class=\"signup1 action-button\"&gt;Sign Up with Email&lt;/a&gt;\n        &lt;a href=\"/account/login\" class=\"login1 action-button\"&gt;Have an account? Log In&lt;/a&gt;\n          &lt;/div&gt;\n</code></pre>\n\n<p><strong>Watir CODE:</strong></p>\n\n<pre><code>Then(/^I signup with email$/) do\n  browser.button(text: \"Sign Up with Email\").wait_until_present.click\nend\n\nThen(/^I click on button with text \"([^\"]*)\" in div identifier \"([^\"]*)\"$/) do |arg1, arg2|\n  browser.buttons(:text, arg1).divs(:class, arg2).click\nend\n</code></pre>\n\n<p><strong>Exception:</strong></p>\n\n<pre><code>timed out after 30 seconds, waiting for true condition on #&lt;Watir::Button: located: false; {:text=&gt;\"Sign Up with Email\", :tag_name=&gt;\"button\"}&gt; (Watir::Wait::TimeoutError)\n      ./Features/Step_definitions/ChefD.rb:73:in `/^I signup with email$/'\n      features/Sanity_scenarios.feature:8:in `Then I signup with email'\n</code></pre>\n\n<p>Please help me how to handle this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "edited": false, "score": 0, "creation_date": 1494406862, "post_id": 43887856, "comment_id": 74809821, "body": "Wouldn&#39;t you need to permit :user_id as well ?"}], "answers": [{"tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": false, "score": 0, "last_activity_date": 1494407169, "creation_date": 1494407169, "answer_id": 43888019, "question_id": 43887856, "link": "https://stackoverflow.com/questions/43887856/unpermitted-parameter-user-id-error-in-rails/43888019#43888019", "title": "Unpermitted parameter: user_id error in rails", "body": "<p>If you add column in your model, you should add it to your permitted params. So add <code>:user_id</code> in your permitted params in <code>posts_controller</code>:</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:tittle, :body, :user_id)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 3, "last_activity_date": 1494407249, "creation_date": 1494407249, "answer_id": 43888046, "question_id": 43887856, "link": "https://stackoverflow.com/questions/43887856/unpermitted-parameter-user-id-error-in-rails/43888046#43888046", "title": "Unpermitted parameter: user_id error in rails", "body": "<p>as the error says, permit the <code>user_id</code> as follows</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:tittle, :body, :user_id)\nend\n</code></pre>\n\n<p>Or, better approach is you generate a new post for the logged_in user as in post create:</p>\n\n<pre><code>def create\n  @post = current_user.posts.new(post_params)\n  # ...other logic\nend\n</code></pre>\n\n<p>This way, you don't need to allow <code>user_id</code> also, it will ensure that the params are not tampered with..</p>\n"}], "owner": {"reputation": 325, "user_id": 5226912, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/100003747510881/picture?type=large", "display_name": "Ahmed Reza Siddique", "link": "https://stackoverflow.com/users/5226912/ahmed-reza-siddique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2895, "favorite_count": 0, "accepted_answer_id": 43888046, "answer_count": 2, "score": 1, "last_activity_date": 1494407249, "creation_date": 1494406701, "question_id": 43887856, "link": "https://stackoverflow.com/questions/43887856/unpermitted-parameter-user-id-error-in-rails", "title": "Unpermitted parameter: user_id error in rails", "body": "<p>am using devise for authentication in a rails app everything is working fine, but i have a post model and after signing up when i try to create a new post it shows up an error:</p>\n\n<pre><code>1 error prohibited this post from being saved:\nUser must exist\n</code></pre>\n\n<p>I looked into the terminal and got this:</p>\n\n<pre><code>Unpermitted parameter: user_id\n   (0.0ms)  begin transaction\n   (0.0ms)  rollback transaction\n</code></pre>\n\n<p>i tried adding a user controller\n<strong>users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_action :set_user\n  before_action :check_ownership, only: [:edit, :update]\n  respond_to :html, :js\n\n# GET /users\n      # GET /users.json\n      def index\n        @users = User.all\n      end\n\n      # GET /users/1\n      # GET /users/1.json\n      def show\n      end\n\n      # GET /users/new\n      def new\n        @user = User.new\n      end\n\n      # GET /users/1/edit\n      def edit\n      end\n\n      # POST /users\n      # POST /users.json\n      def create\n        @user = User.new(user_params)\n\n        respond_to do |format|\n          if @user.save\n            format.html { redirect_to @user, notice: 'User was successfully created.' }\n            format.json { render action: 'show', status: :created, location: @user }\n          else\n            format.html { render action: 'new' }\n            format.json { render json: @user.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n\n      # PATCH/PUT /users/1\n      # PATCH/PUT /users/1.json\n      def update\n        respond_to do |format|\n          if @user.update(user_params)\n            format.html { redirect_to @user, notice: 'User was successfully updated.' }\n            format.json { head :no_content }\n          else\n            format.html { render action: 'edit' }\n            format.json { render json: @user.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n\n      # DELETE /users/1\n      # DELETE /users/1.json\n      def destroy\n        @user.destroy\n        respond_to do |format|\n          format.html { redirect_to users_url }\n          format.json { head :no_content }\n        end\n      end\n\n      private\n        # Use callbacks to share common setup or constraints between actions.\n        def set_user\n          @user = User.find(params[:id])\n        end\n\n        # Never trust parameters from the scary internet, only allow the white list through.\n        def user_params\n          params.require(:user).permit(:name, :email)\n        end\n    end\n</code></pre>\n\n<p><strong>my posts_controler.rb</strong></p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :authenticate_user!, :except =&gt; [:show, :index]\n  before_action :set_post, only: [:show, :edit, :update, :destroy]\n\n  # GET /posts\n  # GET /posts.json\n  def index\n    @posts = Post.all\n  end\n\n  # GET /posts/1\n  # GET /posts/1.json\n  def show\n  end\n\n  # GET /posts/new\n  def new\n    @post = Post.new\n  end\n\n  # GET /posts/1/edit\n  def edit\n  end\n\n  # POST /posts\n  # POST /posts.json\n  def create\n    @post = Post.new(post_params)\n\n    respond_to do |format|\n      if @post.save\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\n        format.json { render :show, status: :created, location: @post }\n      else\n        format.html { render :new }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /posts/1\n  # PATCH/PUT /posts/1.json\n  def update\n    respond_to do |format|\n      if @post.update(post_params)\n        format.html { redirect_to @post, notice: 'Post was successfully updated.' }\n        format.json { render :show, status: :ok, location: @post }\n      else\n        format.html { render :edit }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /posts/1\n  # DELETE /posts/1.json\n  def destroy\n    @post.destroy\n    respond_to do |format|\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_post\n      @post = Post.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def post_params\n      params.require(:post).permit(:tittle, :body)\n    end\nend\n</code></pre>\n\n<p><strong>My user model</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n         has_many :posts\nend\n</code></pre>\n\n<p><strong>My post model</strong></p>\n\n<pre><code>class Post &lt; ApplicationRecord\n    belongs_to :user\nend\n</code></pre>\n\n<p>i have also added user_id to user through this migration:</p>\n\n<pre><code>class AddUseridToPost &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :posts, :user_id, :integer\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494406377, "post_id": 43887606, "comment_id": 74809491, "body": "rewrite this <code>&#39;subscribers&#47;#signup&#39;</code> to <code>&#39;subscribers#signup&#39;</code>"}, {"owner": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494406393, "post_id": 43887606, "comment_id": 74809507, "body": "Arghhh the slash... Thanks!"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494406681, "post_id": 43887606, "comment_id": 74809685, "body": "putting as an answer for future reference.."}], "answers": [{"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 0, "last_activity_date": 1494406654, "creation_date": 1494406654, "answer_id": 43887837, "question_id": 43887606, "link": "https://stackoverflow.com/questions/43887606/routingerror-uninitialized-constant-subscribers/43887837#43887837", "title": "RoutingError uninitialized constant Subscribers", "body": "<p><code>/</code> stands for namespace or folder and <code>#</code> is used for action in the routes. you just need to remove <code>/</code> as <code>signup</code> is an action under <code>SubscribersController</code>:</p>\n\n<pre><code>get 'signup' =&gt; 'subscribers#signup'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 0, "last_activity_date": 1494408137, "creation_date": 1494408137, "answer_id": 43888378, "question_id": 43887606, "link": "https://stackoverflow.com/questions/43887606/routingerror-uninitialized-constant-subscribers/43888378#43888378", "title": "RoutingError uninitialized constant Subscribers", "body": "<p>Since your have <code>resources :subscribers</code> so best way to declare route for non <code>CRUD</code> operation like </p>\n\n<pre><code>resources :subscribers do\n  member { post :foo } # if is member (operation on single obj) with http post\n  collection { get :bar } # for collection with http get\nend\n</code></pre>\n\n<p>So the best solution for your problem is </p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :events\n\n  resources :subscribers do\n      collection { get :signup }\n    end\n\n  root to: 'events#index'\nend\n</code></pre>\n\n<p>For more information see <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html</a></p>\n"}], "owner": {"reputation": 53, "user_id": 1257256, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6eb0abb5cda31943d2876216900a456d?s=128&d=identicon&r=PG", "display_name": "diedaaf", "link": "https://stackoverflow.com/users/1257256/diedaaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43887837, "answer_count": 2, "score": 0, "last_activity_date": 1494408137, "creation_date": 1494406054, "question_id": 43887606, "link": "https://stackoverflow.com/questions/43887606/routingerror-uninitialized-constant-subscribers", "title": "RoutingError uninitialized constant Subscribers", "body": "<p>Somehow i get this routing error. I don't see the solution</p>\n\n<p>My controller:</p>\n\n<pre><code>class SubscribersController &lt; ApplicationController\n  def signup\n    blabla...\n  end\n  etc.....\nend\n</code></pre>\n\n<p>My routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get 'signup' =&gt; 'subscribers/#signup'\n  resources :events\n  resources :subscribers\n\n  root to: 'events#index'\n\nend\n</code></pre>\n\n<p>so if i go to <a href=\"http://0.0.0.0:3000/signup\" rel=\"nofollow noreferrer\">http://0.0.0.0:3000/signup</a>\nI get the error: RoutingError uninitialized constant Subscribers</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many", "accepts-nested-attributes"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494405595, "post_id": 43887278, "comment_id": 74809009, "body": "what activerecord object does this return? <code>abc.update(abc_params)</code>, use byebug and see.."}, {"owner": {"reputation": 118, "user_id": 4976062, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-cdxwTkIdcqs/AAAAAAAAAAI/AAAAAAAAAbU/vfny9fOCbtU/photo.jpg?sz=128", "display_name": "ananta lamichhane", "link": "https://stackoverflow.com/users/4976062/ananta-lamichhane"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494405885, "post_id": 43887278, "comment_id": 74809181, "body": "it returns true or false"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1494415731, "post_id": 43887278, "comment_id": 74816201, "body": "Just a tip - use <code>foo</code>, <code>bar</code> as placeholders. <code>def</code> is a keyword in Ruby and makes this example very confusing."}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 5118698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf91ac08a1c8ad089cfd9324b542a16c?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Krishnan", "link": "https://stackoverflow.com/users/5118698/naveen-krishnan"}, "edited": false, "score": 0, "creation_date": 1495780420, "post_id": 43893166, "comment_id": 75403531, "body": "@ananta could you plese confirm on this?. or did you get any other better solution?"}], "tags": [], "owner": {"reputation": 26, "user_id": 5118698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf91ac08a1c8ad089cfd9324b542a16c?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Krishnan", "link": "https://stackoverflow.com/users/5118698/naveen-krishnan"}, "is_accepted": false, "score": 0, "last_activity_date": 1494420986, "creation_date": 1494420986, "answer_id": 43893166, "question_id": 43887278, "link": "https://stackoverflow.com/questions/43887278/how-can-we-get-only-newly-added-object-after-update-using-accepts-nested-attribu/43893166#43893166", "title": "how can we get only newly added object after update using accepts_nested_attributes_for assocation in rails", "body": "<p>One solution is (not a direct one)..</p>\n\n<pre><code>def update\n  abc = Abc.find(params[:id])\n  number_of_defs = abc.defs.length\n  if abc.update(abc_params)\n    number_newly_added_defs = abc.defs.length - number_of_defs\n    newly_added_defs = abc.defs.last(number_newly_added_defs)\n  end\nend\n</code></pre>\n\n<p>you will get the desired output.</p>\n"}], "owner": {"reputation": 118, "user_id": 4976062, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-cdxwTkIdcqs/AAAAAAAAAAI/AAAAAAAAAbU/vfny9fOCbtU/photo.jpg?sz=128", "display_name": "ananta lamichhane", "link": "https://stackoverflow.com/users/4976062/ananta-lamichhane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1494420986, "creation_date": 1494405005, "question_id": 43887278, "link": "https://stackoverflow.com/questions/43887278/how-can-we-get-only-newly-added-object-after-update-using-accepts-nested-attribu", "title": "how can we get only newly added object after update using accepts_nested_attributes_for assocation in rails", "body": "<p>My association looks like this :</p>\n\n<pre><code>class Abc &lt; ApplicationRecord\n  has_many :def\n  accepts_nested_attributes_for :def, allow_destroy: true\nend\n\nclass AbcController &lt; ApplicationController\n\n  def update\n    abc = Abc.find(params[:id])\n     if abc.update(abc_params)\n       # TODO Here update is sucessful but  how to get all newly added def in database with their id?\n     end\n  end\n\n\n  private\n  def abc_params\n    params.require(:abc).permit(def_attributes: [:name, :title,:wordcount, :id])\n  end\nend\n</code></pre>\n\n<p>We know accepts_nested attributes creates a new   nested object in the database so how can I get all the newly added(not already existing) <strong>def</strong> object with their database id in AbcController update function ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "turbolinks"], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 7349789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/GNoMU.jpg?s=128&g=1", "display_name": "Meyer", "link": "https://stackoverflow.com/users/7349789/meyer"}, "edited": false, "score": 0, "creation_date": 1494443334, "post_id": 43889836, "comment_id": 74835594, "body": "Hey! Thanks for taking the time to answer :)  I have turned on persist logging, and tried adding the jquery-turbolinks gem, to no avail.... Any other ideas? (and disabling turbolinks does solve the issue, but I do not want to remove turbolinks unless I have no other choice...)"}, {"owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "reply_to_user": {"reputation": 114, "user_id": 7349789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/GNoMU.jpg?s=128&g=1", "display_name": "Meyer", "link": "https://stackoverflow.com/users/7349789/meyer"}, "edited": false, "score": 0, "creation_date": 1494462202, "post_id": 43889836, "comment_id": 74842999, "body": "Are you loading jquery.turbolinks between jquery and jquery_ujs?  If I remember correctly the ordering is important (as specified in the documentation)"}, {"owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "reply_to_user": {"reputation": 114, "user_id": 7349789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/GNoMU.jpg?s=128&g=1", "display_name": "Meyer", "link": "https://stackoverflow.com/users/7349789/meyer"}, "edited": false, "score": 0, "creation_date": 1494498564, "post_id": 43889836, "comment_id": 74858919, "body": "Also have you implemented any of the events i.e. <code>turbolinks:load</code> to make sure Turbolinks is actually working properly?  You should be able to just dump some random text to the console using console.log, ref: <a href=\"https://github.com/turbolinks/turbolinks#full-list-of-events\" rel=\"nofollow noreferrer\">github.com/turbolinks/turbolinks#full-list-of-events</a>"}, {"owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "reply_to_user": {"reputation": 114, "user_id": 7349789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/GNoMU.jpg?s=128&g=1", "display_name": "Meyer", "link": "https://stackoverflow.com/users/7349789/meyer"}, "edited": false, "score": 0, "creation_date": 1494500452, "post_id": 43889836, "comment_id": 74860213, "body": "Did you check the ordering of the loading of jquery.turbolinks?  It has to be loaded between jquery and jquery_ujs, if I remember correctly.  The documentation specifies this.   <a href=\"https://github.com/kossnocorp/jquery.turbolinks\" rel=\"nofollow noreferrer\">github.com/kossnocorp/jquery.turbolinks</a>.  Also, have you tried upgrading all of your Gems (in a separate working copy) as a test?"}], "tags": [], "owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "is_accepted": false, "score": 0, "last_activity_date": 1494412042, "creation_date": 1494412042, "answer_id": 43889836, "question_id": 43887149, "link": "https://stackoverflow.com/questions/43887149/rails-form-not-working-with-turbolinks/43889836#43889836", "title": "Rails form not working with turbolinks", "body": "<p>Have you turned on persist logging in your JS debugger/console (so you can see the console across page loads)? It seems to me like you hare having some sort of JS error that is breaking the execution stack. Specifically, I would look into <a href=\"https://github.com/kossnocorp/jquery.turbolinks\" rel=\"nofollow noreferrer\">jquery.turbolinks</a> (It looks like you don't have it installed).</p>\n\n<p>Also, are you 100% confident Turbolinks is causing the issue?  It is fairly easy to disable this specific gem to further isolate the issue.</p>\n"}], "owner": {"reputation": 114, "user_id": 7349789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/GNoMU.jpg?s=128&g=1", "display_name": "Meyer", "link": "https://stackoverflow.com/users/7349789/meyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2064, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1494412042, "creation_date": 1494404640, "last_edit_date": 1495540022, "question_id": 43887149, "link": "https://stackoverflow.com/questions/43887149/rails-form-not-working-with-turbolinks", "title": "Rails form not working with turbolinks", "body": "<p>This question seems to be the same as mine: <a href=\"https://stackoverflow.com/questions/22281918/rails-turbolinks-break-submit-remote-form?rq=1\">Rails turbolinks break submit remote form\n</a> ( <a href=\"https://stackoverflow.com/questions/38231797/form-with-remote-true-not-working-with-turbolinks\">This question is also similar</a>, <a href=\"https://github.com/turbolinks/turbolinks-classic/issues/298\" rel=\"nofollow noreferrer\">As is this github issue</a> )</p>\n\n<p>However the answers posted there did not solve my issue... </p>\n\n<h3>The issue I am having:</h3>\n\n<p>On the users show page there is a simple form to submit new to-do items. The form is setup to use AJAX. The form submit works correctly on initial page load or page refresh. <strong>However, it does not work at all</strong> (clicking the submit button does nothing, not in rails or with AJAX) <strong>after you navigate anywhere within the app.</strong> Meaning, once you have navigated out of the show view and back without refreshing the page, clicking the submit button on the form does nothing. </p>\n\n<p>The above quoted issues all seem to suggest that it is an issue with turbolinks, however the answers posted there either did not work, or I could not understand them well enough to fix my issue... </p>\n\n<p>Any help would be <em>amazing!!!</em></p>\n\n<p>Here is code that may be helpful:</p>\n\n<p><code>_form.html.erb (rendered in the show view)</code></p>\n\n<pre><code>&lt;%= form_for [task], remote: true do |f| %&gt;\n    &lt;tr class=\"new-task\"&gt;\n        &lt;td class=\"form-group\"&gt;\n            &lt;%= f.text_field :name, class: 'form-control', placeholder: \"Add new task...\" %&gt;\n        &lt;/td&gt;\n        &lt;td class=\"form-group\"&gt;\n            &lt;%= f.date_field :expires_at, max: Time.now + 7.days, min: Time.now + 1.day %&gt;\n        &lt;/td&gt;\n        &lt;td class=\"form-group\"&gt;\n            &lt;%= f.submit \"Save\", class: 'btn btn-success' %&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><code>create method in TasksController</code></p>\n\n<pre><code>def create\n    expires_at_format unless params[:task][:expires_at].blank? # adds the current time to a user created date\n\n    @task = current_user.tasks.new(task_params)\n\n    if @task.save\n        flash.now[:notice] = \"\\\"#{@task.name}\\\" added to To-Do list!\"\n    else\n        if @task.errors.any?\n            flash.now[:alert] = \"Task not saved. #{@task.errors.full_messages.join '. ' }.\"  \n        else\n            flash.now[:alert] = \"Something went wrong! Your task was not saved... \"\n        end\n    end\n\n    respond_to do |format|\n        format.html { redirect_to root_path }\n        format.js\n    end\nend\n</code></pre>\n\n<p><code>create.js.erb (AJAX to handle displaying new tasks)</code></p>\n\n<pre><code>&lt;% if @task.valid? %&gt;\n    $('.task').children('.expires_at').each(function(){ \n        if ($(this).text() &lt;= \"&lt;%= @task.expires_at.to_s %&gt;\") {\n            $(this).parent().before(\"&lt;%= escape_javascript(render(@task)) %&gt;\");\n            return false;\n        } \n    }); \n    $('#task_name').val(\"\");\n    $('th#task-count').html(\"You have &lt;%= pluralize(current_user.tasks.unexpired.count, \"Task\").split.insert(1, \"active\").join ' ' %&gt;\");\n    $(\".flash\").html(\"&lt;div class='alert alert-success'&gt;&lt;button type='button' class='close' data-dismiss='alert'&gt;&amp;times;&lt;/button&gt;&lt;%= flash.now[:notice] %&gt;&lt;/div&gt;\");\n&lt;% else %&gt;\n    $('#task_name').val(\"\");\n    $('.flash').html(\"&lt;div class='alert alert-warning'&gt;&lt;button type='button' class='close' data-dismiss='alert'&gt;&amp;times;&lt;/button&gt;&lt;%= flash.now[:alert] %&gt;&lt;/div&gt;\");\n&lt;% end %&gt;\n</code></pre>\n\n<p><code>from application.js</code></p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require bootstrap\n//= require toggleExpired\n//= require_tree .\n</code></pre>\n\n<p>'from gemfile`</p>\n\n<pre><code>gem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\n</code></pre>\n"}, {"tags": ["ruby", "intellij-idea", "rspec"], "comments": [{"owner": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "edited": false, "score": 0, "creation_date": 1494430840, "post_id": 43886590, "comment_id": 74828180, "body": "The shell ruby version can be changed manually (via <code>rvm use</code>) since there&#39;s no synchronisation with the SDK set in IDE. In addition, could you please attach screenshots from File | Project Structure | module in question."}, {"owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "reply_to_user": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "edited": false, "score": 0, "creation_date": 1494430999, "post_id": 43886590, "comment_id": 74828294, "body": "by doing rvm use i get:     Using /home/user/.rvm/gems/ruby-2.2.4, how does it help? shouldn&#39;t I attach the SDK part of project structure? why is the module relevant?"}, {"owner": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "edited": false, "score": 0, "creation_date": 1494508513, "post_id": 43886590, "comment_id": 74866133, "body": "<code>rvm use</code> + necessary ruby version will change the SDK in shell. I asked about modules since you can several modules (of different types) added to the same project and each of them might have its own SDK configured."}, {"owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "reply_to_user": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "edited": false, "score": 0, "creation_date": 1494742572, "post_id": 43886590, "comment_id": 74952455, "body": "I&#39;ve used rvm use 2.2.4, but still the error persist."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1494844322, "post_id": 43886590, "comment_id": 74983687, "body": "As someone using Visual Studio before, I can say that I love using guard + rspec in terminal. It doesn&#39;t require any action of me to start/stop/view tests, they just keep running in it&#39;s window on other monitor."}, {"owner": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "edited": false, "score": 0, "creation_date": 1494953586, "post_id": 43886590, "comment_id": 75042825, "body": "It&#39;s still not clear what project structure (modules) you have, is there a Ruby module with Rspec tests? If you want you can write also to rubymine-support@jetbrains.com"}], "answers": [{"comments": [{"owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "edited": false, "score": 0, "creation_date": 1496212204, "post_id": 44069643, "comment_id": 75561577, "body": "yep, I used different shell to run bundle install, not noticing that it points  to the default ruby, not the 2.2.4, thanks!"}], "tags": [], "owner": {"reputation": 535, "user_id": 5240585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5CqxC.png?s=128&g=1", "display_name": "basiszwo", "link": "https://stackoverflow.com/users/5240585/basiszwo"}, "is_accepted": true, "score": 4, "last_activity_date": 1495222880, "last_edit_date": 1495222880, "creation_date": 1495195462, "answer_id": 44069643, "question_id": 43886590, "link": "https://stackoverflow.com/questions/43886590/runnin-rspec-from-intellij/44069643#44069643", "title": "Runnin rspec from IntelliJ", "body": "<p>You are pointing out that you are in ruby 2.2.6 when using the console. IntelliJ is complaining about missing the nokogiri gem. </p>\n\n<p>I can imagine that probably your last <code>bundle install</code> did not use ruby 2.2.4 (as used by IntelliJ) but ruby 2.2.6 to install the gems. </p>\n\n<p>I recommend the following steps to narrow this down:</p>\n\n<ul>\n<li>verify and ensure that you are using ruby 2.2.4 on the shell (this is very important!)</li>\n<li>run <code>bundle install</code> to ensure all gems of your project are installed for ruby 2.2.4</li>\n<li>run your specs in the shell</li>\n</ul>\n\n<p>If this succeeds then try running specs with IntelliJ. \nThis should work in case the steps described above went fine.</p>\n\n<p>A personal note (not knowing if it's already the case):\nIn my projects I always have a <code>.ruby-version</code> file in the root of my project to ensure the correct ruby version for the current project. You may even go a step further and add a <code>.ruby-gemset</code> file. </p>\n\n<p>More information can be found in the <a href=\"https://rvm.io/workflow/projects#project-file-ruby-version\" rel=\"nofollow noreferrer\">rvm docs</a></p>\n"}], "owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 44069643, "answer_count": 1, "score": 7, "last_activity_date": 1495222880, "creation_date": 1494402947, "last_edit_date": 1494431217, "question_id": 43886590, "link": "https://stackoverflow.com/questions/43886590/runnin-rspec-from-intellij", "title": "Runnin rspec from IntelliJ", "body": "<p>I'm usally running my specs from inside IntelliJ. I've deleted my gems and reinstalled them using bundle install (due to another error) and now I'm getting an error when trying to run the specs.</p>\n\n<p>I've noticed that running the specs from intelliJ it uses:</p>\n\n<pre><code>    from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n</code></pre>\n\n<p>which isn't the case when running from the shell (I placed a print inside the kernel_require script check it). </p>\n\n<p>Also I've see that the ruby version from intelliJ is:</p>\n\n<pre><code>\"ruby 2.2.4: 230\"\n</code></pre>\n\n<p>and from shell:</p>\n\n<pre><code>ruby -e 'print \"ruby #{ RUBY_VERSION }p#{ RUBY_PATCHLEVEL }\"'\nruby 2.2.6p396%    \n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>    /home/user/.rvm/rubies/ruby-2.2.4/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/user/.rvm/gems/ruby-2.2.4/bin/rspec /home/user/workspace/auto-test/spec/pools/pool_cg_view_spec.rb --require teamcity/spec/runner/formatter/teamcity/formatter --format Spec::Runner::Formatter::TeamcityFormatter\n    Testing started at 10:21 ...\n    /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': incompatible library version - /home/user/.rvm/gems/ruby-2.2.4/gems/nokogiri-1.6.8/lib/nokogiri/nokogiri.so (LoadError)\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/nokogiri-1.6.8/lib/nokogiri.rb:32:in `rescue in &lt;top (required)&gt;'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/nokogiri-1.6.8/lib/nokogiri.rb:28:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara.rb:3:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/dsl.rb:2:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/rspec.rb:2:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `rescue in require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n        from /home/user/workspace/auto-test/spec/support/capybara.rb:3:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/workspace/auto-test/spec/spec_helper.rb:6:in `block in &lt;top (required)&gt;'\n        from /home/user/workspace/auto-test/spec/spec_helper.rb:6:in `each'\n        from /home/user/workspace/auto-test/spec/spec_helper.rb:6:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration.rb:1295:in `block in requires='\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration.rb:1295:in `each'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration.rb:1295:in `requires='\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration_options.rb:109:in `block in process_options_into'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration_options.rb:108:in `each'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration_options.rb:108:in `process_options_into'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/configuration_options.rb:21:in `configure'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/runner.rb:101:in `setup'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/runner.rb:88:in `run'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/runner.rb:73:in `run'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/lib/rspec/core/runner.rb:41:in `invoke'\n        from /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-core-3.4.1/exe/rspec:4:in `&lt;top (required)&gt;'\n        from /home/user/.rvm/gems/ruby-2.2.4/bin/rspec:23:in `load'\n        from /home/user/.rvm/gems/ruby-2.2.4/bin/rspec:23:in `&lt;top (required)&gt;'\n        from -e:1:in `load'\n        from -e:1:in `&lt;main&gt;'\n\n    Process finished with exit code 1\n</code></pre>\n\n<p>If I try to run the specs from shell it will work, no errors, so I guess the problem is related to the configuration of the run but not sure what.</p>\n\n<p>The run configuration which worked until now:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZZdb7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZZdb7.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried to remove the nokogiri gem and reinstall it, but still the same.</p>\n\n<p>Any ideas? </p>\n\n<p>project structure:\n<a href=\"https://i.stack.imgur.com/BYG09.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BYG09.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "argument-error"], "answers": [{"tags": [], "owner": {"reputation": 213, "user_id": 7990291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6eZG-Wss61k/AAAAAAAAAAI/AAAAAAAADJw/r94_VBKfs7A/photo.jpg?sz=128", "display_name": "Josh HUmphrey", "link": "https://stackoverflow.com/users/7990291/josh-humphrey"}, "is_accepted": false, "score": 3, "last_activity_date": 1494404673, "creation_date": 1494404673, "answer_id": 43887164, "question_id": 43886586, "link": "https://stackoverflow.com/questions/43886586/minitest-plugin-rb9-getting-wrong-number-of-arguments/43887164#43887164", "title": "minitest_plugin.rb:9 getting wrong number of arguments", "body": "<p>It turns out that in my test/test_helper.rb I needed a line of code that was missing. I added this before \"class ActiveSupport::TestCase\".</p>\n\n<pre><code>    Minitest::Reporters.use!\n</code></pre>\n\n<p>This gave me a passing result for my test with no strange argument error. Hope this helps someone for the future!</p>\n"}, {"tags": [], "owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "is_accepted": true, "score": 20, "last_activity_date": 1495462922, "last_edit_date": 1495462922, "creation_date": 1494410113, "answer_id": 43889088, "question_id": 43886586, "link": "https://stackoverflow.com/questions/43886586/minitest-plugin-rb9-getting-wrong-number-of-arguments/43889088#43889088", "title": "minitest_plugin.rb:9 getting wrong number of arguments", "body": "<p>This is actually a bug in rails, revealed by minitest update to 5.10.2 as said <a href=\"https://github.com/seattlerb/minitest/issues/689\" rel=\"noreferrer\">here</a> and it has already been fixed <a href=\"https://github.com/rails/rails/pull/29022\" rel=\"noreferrer\">here</a>.</p>\n\n<p>As the pull request is only 10 hours old (at the time of writing), it has not yet been released, although it's already merged.</p>\n\n<p>In the mean time, you can specify in your Gemfile:</p>\n\n<pre><code>gem 'minitest', '~&gt; 5.10', '!= 5.10.2'\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Don't forget to <code>bundle update minitest</code></p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 3043438, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1238748458/picture?type=large", "display_name": "tschoppi", "link": "https://stackoverflow.com/users/3043438/tschoppi"}, "edited": false, "score": 0, "creation_date": 1495206630, "post_id": 43907498, "comment_id": 75170956, "body": "If you changed only the minitest gem in the Gemfile, try updating it with <code>bundle update --source minitest</code>"}, {"owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "edited": false, "score": 0, "creation_date": 1495462868, "post_id": 43907498, "comment_id": 75249929, "body": "OP: simply read the message bundler gives you, it tell you to use <code>bundle update</code> to change the locked version..."}], "tags": [], "owner": {"reputation": 13, "user_id": 7714277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B3YRX.jpg?s=128&g=1", "display_name": "olegdeleon", "link": "https://stackoverflow.com/users/7714277/olegdeleon"}, "is_accepted": false, "score": 0, "last_activity_date": 1494481874, "creation_date": 1494481874, "answer_id": 43907498, "question_id": 43886586, "link": "https://stackoverflow.com/questions/43886586/minitest-plugin-rb9-getting-wrong-number-of-arguments/43907498#43907498", "title": "minitest_plugin.rb:9 getting wrong number of arguments", "body": "<p>I also encountered this error. I tried using the top voted solution, but rails told me that bundle has locked minitest to 5.10.2. Instead, I just did a <code>gem update minitest</code> and my tests ran without the weird error.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 7649777, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e668f60d81fa33b5db1ead038b6eb883?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/7649777/jim"}, "is_accepted": false, "score": 5, "last_activity_date": 1495217734, "creation_date": 1495217734, "answer_id": 44076520, "question_id": 43886586, "link": "https://stackoverflow.com/questions/43886586/minitest-plugin-rb9-getting-wrong-number-of-arguments/44076520#44076520", "title": "minitest_plugin.rb:9 getting wrong number of arguments", "body": "<p>Hey I'm doing this exact tutorial and followed the top solution and it fixed my issue, specifically (for us total noobs) I did this to my Gemfile</p>\n\n<pre><code>group :test do\n  gem 'rails-controller-testing', '0.1.1'\n  gem 'minitest-reporters',       '1.1.9'\n  gem 'guard',                    '2.13.0'\n  gem 'guard-minitest',           '2.4.4'\n  gem 'minitest', '~&gt; 5.10', '!= 5.10.2' # add this here to fix error\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 11338495, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IZ-f-jKBAE8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re7KY1_btp2G3rBbgseUlzZBQcc4w/mo/photo.jpg?sz=128", "display_name": "abhishek", "link": "https://stackoverflow.com/users/11338495/abhishek"}, "is_accepted": false, "score": 2, "last_activity_date": 1557139746, "creation_date": 1557139746, "answer_id": 56003662, "question_id": 43886586, "link": "https://stackoverflow.com/questions/43886586/minitest-plugin-rb9-getting-wrong-number-of-arguments/56003662#56003662", "title": "minitest_plugin.rb:9 getting wrong number of arguments", "body": "<p>Problem is in minitest 5.10.2. Downgrading to 5.10.1 fixes it.</p>\n\n<p>Add this line in test group in Gemfile</p>\n\n<pre><code>gem 'minitest', '5.10.1'\n</code></pre>\n\n<p>Then run following commands</p>\n\n<pre><code>bundle update minitest\nrails test\n</code></pre>\n\n<p>The issue is resolved</p>\n"}], "owner": {"reputation": 213, "user_id": 7990291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6eZG-Wss61k/AAAAAAAAAAI/AAAAAAAADJw/r94_VBKfs7A/photo.jpg?sz=128", "display_name": "Josh HUmphrey", "link": "https://stackoverflow.com/users/7990291/josh-humphrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2241, "favorite_count": 2, "accepted_answer_id": 43889088, "answer_count": 5, "score": 10, "last_activity_date": 1557139746, "creation_date": 1494402934, "last_edit_date": 1494403868, "question_id": 43886586, "link": "https://stackoverflow.com/questions/43886586/minitest-plugin-rb9-getting-wrong-number-of-arguments", "title": "minitest_plugin.rb:9 getting wrong number of arguments", "body": "<pre><code>~/Sites/sample_app$ rails test\nRunning via Spring preloader in process 24338\nRun options: --seed 58780\n\nRunning:\n\n..\n\nFinished in 0.292172s, 6.8453 runs/s, 6.8453 assertions/s.\n/var/lib/gems/2.3.0/gems/railties-5.1.0/lib/rails/test_unit/minitest_plugin.rb:9:in `aggregated_results': wrong number of arguments (given 1, expected 0) (ArgumentError)\n</code></pre>\n\n<p>I don't understand why I am getting this error. I Can't seem to find anyone with this specific error. I'm following the tutorial <a href=\"https://www.railstutorial.org/book/static_pages\" rel=\"noreferrer\">https://www.railstutorial.org/book/static_pages</a>. This error follows the rails test command. Running Ubuntu and rails 5.1 if that helps. I'm not passing any arguments so I don't understand why I am getting this error. </p>\n\n<p>My test file looks like : </p>\n\n<pre><code>    require 'test_helper'\n\n    class StaticPagesControllerTest &lt; ActionDispatch::IntegrationTest\n\n    test \"should get home\" do\n      get static_pages_home_url\n      assert_response :success\n    end\n\n    test \"should get help\" do\n      get static_pages_help_url\n      assert_response :success\n    end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1494402842, "post_id": 43886421, "comment_id": 74807309, "body": "Are you sure the script has the permission to create dirs?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1494403167, "post_id": 43886421, "comment_id": 74807504, "body": "on windows, this should not be problem -))"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1494403749, "post_id": 43886421, "comment_id": 74807833, "body": "@marmeladze Windows provides more sophisticate access rights than Unix-based systems. It uses ACLs and inheritable rights. That <i>could</i> be a problem in general but, most probably, it is not the problem here."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1494404077, "post_id": 43886723, "comment_id": 74808046, "body": "It&#39;s always a good idea to do things like <code>p line</code> when confused as to what&#39;s going wrong. That would&#39;ve shown <code>&quot;Australia\\n&quot;</code> here."}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1494405290, "post_id": 43886723, "comment_id": 74808838, "body": "@axiac : Thanks for pointing out the error. +1 for the chomp!"}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 5, "last_activity_date": 1494403800, "last_edit_date": 1494403800, "creation_date": 1494403343, "answer_id": 43886723, "question_id": 43886421, "link": "https://stackoverflow.com/questions/43886421/ruby-unable-to-create-directories/43886723#43886723", "title": "Ruby unable to create directories", "body": "<p>The error is in the line:</p>\n\n<pre><code>line.chomp\n</code></pre>\n\n<p>It strips the newline from the tail of <code>line</code> and returns a value that is ignored. It doesn't change the value of <code>line</code>. It still ends with <code>\"\\n\"</code> and this is a character that is not allowed in file names on Windows. The code runs fine on Linux and creates directories whose names end in <code>\"\\n\"</code>.</p>\n\n<p>The solution is also simple. Use <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-chomp-21\" rel=\"nofollow noreferrer\"><code>#chomp!</code></a> instead:</p>\n\n<pre><code>#require 'fileutils'\n\nvalue=File.open('D:\\\\exercise\\\\list.txt').read\nvalue.gsub!(/\\r\\n?/, \"\\n\")\nvalue.each_line do |line|\n    line.chomp!\n    print \"FOlder names:#{line}\"\n    Dir.mkdir(\"D:\\\\exercise\\\\#{line}\")\nend\n</code></pre>\n\n<p><em>(It might still produce errors, however, because of empty lines in the input).</em></p>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1494405184, "post_id": 43886977, "comment_id": 74808779, "body": "Thanks for the alternative solution , much appreciated."}], "tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 4, "last_activity_date": 1494404095, "creation_date": 1494404095, "answer_id": 43886977, "question_id": 43886421, "link": "https://stackoverflow.com/questions/43886421/ruby-unable-to-create-directories/43886977#43886977", "title": "Ruby unable to create directories", "body": "<p>Have you checked that the line doesn't contain extra characters? Where <code>line.chomp!</code> will solve your problem but <code>line.strip!</code> is probably the more robust variant, esp if you have windows line-endings of \\r\\n.</p>\n\n<p>Difference between <code>chomp</code> and <code>strip</code></p>\n\n<blockquote>\n  <p>String#chomp operates on the end of strings, while String#strip\n  operates on the start and end of strings. String#chomp takes an\n  optional 'record separator' argument, while String#strip takes no\n  arguments. If String#chomp is given no arguments it will remove\n  carriage returns characters from the end of the string being operated\n  on (\\r, \\n or \\r\\n). If String#chomp is passed a string as an\n  argument, that string is removed from the end of the string being\n  operated on. String#strip will remove leading and trailing null and\n  whitespace characters from the string being operated on. </p>\n</blockquote>\n\n<p><code>\"Cadel Evans\".chomp(' Evans') # =&gt; \"Cadel\"</code> </p>\n\n<p><code>\"Cadel Evans\\r\\n\".chomp # =&gt; \"Cadel Evans\"</code></p>\n\n<p><code>\"\\tRobbie McEwen\\r\\n\".strip # =&gt; \"Robbie McEwen\"</code></p>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 43886723, "answer_count": 2, "score": 1, "last_activity_date": 1494404095, "creation_date": 1494402429, "question_id": 43886421, "link": "https://stackoverflow.com/questions/43886421/ruby-unable-to-create-directories", "title": "Ruby unable to create directories", "body": "<p>I'm trying to read a file having string values, line by line and create respective folder/directory for every string value.</p>\n\n<pre><code>#require 'fileutils'\n\nvalue=File.open('D:\\\\exercise\\\\list.txt').read\nvalue.gsub!(/\\r\\n?/, \"\\n\")\nvalue.each_line do |line|\n    line.chomp\n    print \"FOlder names:#{line}\"\n    Dir.mkdir(\"D:\\\\exercise\\\\#{line}\")\nend\n</code></pre>\n\n<p>and I'm getting the below error:</p>\n\n<pre><code>read_folders_svn.rb:8:in `mkdir': Invalid argument - Australia (Errno::EINVAL)\n        from read_folders_svn.rb:8:in `block in &lt;main&gt;'\n</code></pre>\n\n<p>list.txt file's content below</p>\n\n<pre><code>Australia\nUSA\nEUrope\nAfrica\nANtartica\n</code></pre>\n\n<p>I tried printing the values and its working fine, while creating the respective directories facing the above issue and even tried using fileutils (fileutils.mkdir) option but still the same issue. </p>\n\n<p>Any suggestions please. Thanks</p>\n"}, {"tags": ["ruby", "encryption", "openssl", "3des"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1494415298, "post_id": 43885843, "comment_id": 74815874, "body": "3DES has a key length of 24 bytes however there is a two-key variant with a 16-byte key commonly referred to as two-key 3DES where the first 8-bytes of the key are repeated for the last 8-bytes, this mode is deprecated. If you want to use a 8-byte key just use DES which should not be used, it is superseded by AES. DES encryption should <b>not</b>  be used in new work."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1494438340, "post_id": 43885843, "comment_id": 74832690, "body": "Triple DES with an 8 byte key could be equivalent to DES if EDE (encrypt-decrypt-encrypt) is used or it could be a valid Triple DES key if EEE (encrypt-encrypt-encrypt) is used. Which is it?"}], "answers": [{"comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1494418430, "post_id": 43886912, "comment_id": 74818235, "body": "The answer would be more clear if &quot;fixed length cipher&quot; were changed to fixed length key, 168-bit (24-bytes). See the question comment for more information."}, {"owner": {"reputation": 349, "user_id": 2477886, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c29f3ba1a160925f0d91a1da23ee4603?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/2477886/yang"}, "edited": false, "score": 0, "creation_date": 1494560427, "post_id": 43886912, "comment_id": 74890728, "body": "Where can I get <code>EVP_CIPHER_CTX_set_key_length </code>&#39;s value? I can&#39;t find it in anywhere..."}], "tags": [], "owner": {"reputation": 6510, "user_id": 2196561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac22ef3edb7836c3af11f5511f7942f8?s=128&d=identicon&r=PG", "display_name": "Ebbe M. Pedersen", "link": "https://stackoverflow.com/users/2196561/ebbe-m-pedersen"}, "is_accepted": true, "score": 3, "last_activity_date": 1583503816, "last_edit_date": 1583503816, "creation_date": 1494403870, "answer_id": 43886912, "question_id": 43885843, "link": "https://stackoverflow.com/questions/43885843/can-i-set-key-length-for-openssl-3des/43886912#43886912", "title": "Can I set key length for OpenSSL 3des?", "body": "<p>From the OpenSSL ruby documentation:</p>\n\n<blockquote>\n  <p>key_length = integer \u2192 integer </p>\n  \n  <p>Sets the key length of the cipher. If\n  the cipher is a fixed length cipher then attempting to set the key\n  length to any value other than the fixed value is an error.</p>\n  \n  <p>Under normal circumstances you do not need to call this method (and\n  probably shouldn\u2019t).</p>\n  \n  <p>See EVP_CIPHER_CTX_set_key_length for further information.</p>\n</blockquote>\n\n<p>And as <strong>Triple Des</strong> <em>is</em> a cipher with fixed key length (168-bit ~ 24-bytes), you get an error.</p>\n"}], "owner": {"reputation": 349, "user_id": 2477886, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c29f3ba1a160925f0d91a1da23ee4603?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/2477886/yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 43886912, "answer_count": 1, "score": 1, "last_activity_date": 1583503816, "creation_date": 1494400599, "question_id": 43885843, "link": "https://stackoverflow.com/questions/43885843/can-i-set-key-length-for-openssl-3des", "title": "Can I set key length for OpenSSL 3des?", "body": "<p>I want do these</p>\n\n<pre><code>  require \"openssl\"\n  decipher = OpenSSL::Cipher::Cipher.new('des3')\n  decipher.decrypt\n  decipher.key = \"11111111\"\n</code></pre>\n\n<p>But it throws <code>OpenSSL::Cipher::CipherError: key length too short</code></p>\n\n<p>I have tried to set the key length by <code>des.key_len = 8</code>, it throws <code>OpenSSL::Cipher::CipherError: invalid key length</code> error.</p>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494404679, "post_id": 43885320, "comment_id": 74808434, "body": "Ruby&#39;s syntax is flexible, but it has limits. You&#39;ve pushed it too far here."}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 3, "last_activity_date": 1494399185, "creation_date": 1494399185, "answer_id": 43885420, "question_id": 43885320, "link": "https://stackoverflow.com/questions/43885320/syntax-to-pass-block-to-ruby-method/43885420#43885420", "title": "Syntax to pass block to &#39;[]&#39; ruby method", "body": "<p><code>[]</code> is a shortcut, and it may not be designed to accept blocks.</p>\n\n<p>Either use a traditional method (which in this case is only 1 char longer):</p>\n\n<pre><code>module Bam\n  def self.get(a)\n    yield a\n  end\nend\n\nBam.get('boom') do |a|\n  puts a\nend\n</code></pre>\n\n<p>or the explicit method syntax <code>Bam.[]('boom')</code>.</p>\n\n<p>I assume yours is only an example, as the original method definition doesn't make a lot of sense.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1494419587, "creation_date": 1494419587, "answer_id": 43892638, "question_id": 43885320, "link": "https://stackoverflow.com/questions/43885320/syntax-to-pass-block-to-ruby-method/43892638#43892638", "title": "Syntax to pass block to &#39;[]&#39; ruby method", "body": "<p>The closest thing I can think of is Ruby's <code>&amp;</code> operator to <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/calling_methods_rdoc.html#label-Proc+to+Block+Conversion\" rel=\"nofollow noreferrer\">convert a proc to a block</a>:</p>\n\n<pre><code>block = proc { |a| puts a }\nBam['boom', &amp;block]\n</code></pre>\n\n<p>Or without a variable:</p>\n\n<pre><code>Bam['boom', &amp;proc { |a| puts a }]\n</code></pre>\n"}], "owner": {"reputation": 1329, "user_id": 1033197, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e0ed765699d27f1302adff76bc18b0e?s=128&d=identicon&r=PG", "display_name": "Khoa Nguyen", "link": "https://stackoverflow.com/users/1033197/khoa-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494419587, "creation_date": 1494398852, "last_edit_date": 1494402947, "question_id": 43885320, "link": "https://stackoverflow.com/questions/43885320/syntax-to-pass-block-to-ruby-method", "title": "Syntax to pass block to &#39;[]&#39; ruby method", "body": "<p>Given a module <code>Bam</code>, and assuming that method <code>Bam.[]</code> is defined, the <code>[]</code> method can be called with a block in non-syntax sugar form like:</p>\n\n<pre><code>Bam.[]('boom') do |a|\n  puts a\nend\n</code></pre>\n\n<p>How can I call the <code>[]</code> method with a block in syntax sugar form <code>Bam['boom']</code>?</p>\n\n<p>I tried the following:</p>\n\n<pre><code>Bam['boom'] do |a|\n  puts a\nend\n\nBam['boom'] {|a|\n  puts a\n}\n</code></pre>\n\n<p>They raise a syntax error.</p>\n\n<p>I'm not looking for naming alternatives to <code>[]</code>. Ruby provides nice syntactic sugar, so I prefer <code>[]</code> over other names.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "filefield"], "answers": [{"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1494396426, "creation_date": 1494396426, "answer_id": 43884712, "question_id": 43884402, "link": "https://stackoverflow.com/questions/43884402/in-rails-the-file-field-helper-is-not-allowing-multiple-selections-to-appear-in/43884712#43884712", "title": "In Rails the file_field helper is not allowing multiple selections to appear in params hash returned to controller", "body": "<p>It needs an array, try the following:</p>\n\n<pre><code>&lt;%= f.file_field :pdf, multiple: true, accept: 'application/pdf', name: 'pdf[]' %&gt;\n</code></pre>\n\n<p>Notice the square brackets <code>[]</code></p>\n"}], "owner": {"reputation": 19, "user_id": 6337901, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2f06d079e0497d43e91d74684236d3a4?s=128&d=identicon&r=PG&f=1", "display_name": "user6337901", "link": "https://stackoverflow.com/users/6337901/user6337901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494396426, "creation_date": 1494395117, "question_id": 43884402, "link": "https://stackoverflow.com/questions/43884402/in-rails-the-file-field-helper-is-not-allowing-multiple-selections-to-appear-in", "title": "In Rails the file_field helper is not allowing multiple selections to appear in params hash returned to controller", "body": "<p>I have a multiple select dialog that is only returning one file to the controller in the params hash when multiple files are selected.  </p>\n\n<p>Rails 5.0.1</p>\n\n<pre><code>&lt;%= form_for(@out_transfer) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.file_field :pdf, multiple: true, accept: 'application/pdf', name: 'pdf' %&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit(\"Send PDF's\", class: 'btn btn-primary') %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n  def create\n    params['pdf'].original_filename\n  end\n</code></pre>\n\n<p>The params only shows the last file selected.  Please take a look.  Thanks.</p>\n"}, {"tags": ["ruby", "centos"], "comments": [{"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "edited": false, "score": 0, "creation_date": 1494395148, "post_id": 43883868, "comment_id": 74803278, "body": "If there is a Gemfile, you would normaly call <code>gem install bundler; bundle install</code> to setup the environment."}, {"owner": {"reputation": 53, "user_id": 1024569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c844e60a335b402753c562beb430a405?s=128&d=identicon&r=PG", "display_name": "Andrew S", "link": "https://stackoverflow.com/users/1024569/andrew-s"}, "reply_to_user": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "edited": false, "score": 0, "creation_date": 1494442356, "post_id": 43883868, "comment_id": 74835003, "body": "I cannot locate any gem file(s) relating to mysql on the el6 system or the el7 system.  Actually, I see no references in any of the scripts to the calling of &quot;gem&quot;.  I only have the Rakefile and database.yml plus the ruby migrate scripts.  I feel like one of the rpms, activerecord maybe, is doing something magic and uses it&#39;s own mysql adapter."}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "edited": false, "score": 0, "creation_date": 1494481272, "post_id": 43883868, "comment_id": 74847866, "body": "The Gemfile would be in the root of the script and ist called <code>Gemfile</code>."}, {"owner": {"reputation": 53, "user_id": 1024569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c844e60a335b402753c562beb430a405?s=128&d=identicon&r=PG", "display_name": "Andrew S", "link": "https://stackoverflow.com/users/1024569/andrew-s"}, "reply_to_user": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "edited": false, "score": 0, "creation_date": 1494520285, "post_id": 43883868, "comment_id": 74875277, "body": "there was none."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 1024569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c844e60a335b402753c562beb430a405?s=128&d=identicon&r=PG", "display_name": "Andrew S", "link": "https://stackoverflow.com/users/1024569/andrew-s"}, "edited": false, "score": 0, "creation_date": 1494442748, "post_id": 43884812, "comment_id": 74835245, "body": "I don&#39;t think I have a gem file  If there&#39;s one, I can&#39;t locate it."}, {"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "reply_to_user": {"reputation": 53, "user_id": 1024569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c844e60a335b402753c562beb430a405?s=128&d=identicon&r=PG", "display_name": "Andrew S", "link": "https://stackoverflow.com/users/1024569/andrew-s"}, "edited": false, "score": 1, "creation_date": 1494464289, "post_id": 43884812, "comment_id": 74843443, "body": "if you are not using a Gemfile, you can try <code>gem install mysql2</code> instead and see if that helps."}], "tags": [], "owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "is_accepted": false, "score": 0, "last_activity_date": 1494396853, "creation_date": 1494396853, "answer_id": 43884812, "question_id": 43883868, "link": "https://stackoverflow.com/questions/43883868/rubygem-mysql-error-gem-is-not-loaded-after-centos-upgrade/43884812#43884812", "title": "&quot;rubygem mysql error: gem is not loaded&quot; after CentOS upgrade", "body": "<p>Try use the <code>mysql2</code> gem instead:</p>\n\n<p>In your Gemfile:</p>\n\n<pre><code>gem 'mysql2'\n</code></pre>\n\n<p>and database.yml:</p>\n\n<pre><code>adapter: mysql2\n</code></pre>\n\n<p>Hope that would help.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 1024569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c844e60a335b402753c562beb430a405?s=128&d=identicon&r=PG", "display_name": "Andrew S", "link": "https://stackoverflow.com/users/1024569/andrew-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1494520711, "creation_date": 1494520711, "answer_id": 43921201, "question_id": 43883868, "link": "https://stackoverflow.com/questions/43883868/rubygem-mysql-error-gem-is-not-loaded-after-centos-upgrade/43921201#43921201", "title": "&quot;rubygem mysql error: gem is not loaded&quot; after CentOS upgrade", "body": "<p>So I'm not sure why there was never a gemfile in the original script.  As mentioned in my OP, a basic solution was to run gem install mysql, but that was weird because previously  it wasn't necessary.</p>\n\n<p>What I think was happening:\nUnder EL6, the ruby-mysql rpm was putting the mysql.so in the proper location and basically issuing a gem install command.  The EL7 version I have was not calling the proper setup macros in the rpm.</p>\n\n<p>What I did to fix this:\ni used gem2rpm (such a great rpm/package) to generate the rubygem-mysql spec file.</p>\n\n<p><a href=\"https://github.com/fedora-ruby/gem2rpm\" rel=\"nofollow noreferrer\">https://github.com/fedora-ruby/gem2rpm</a></p>\n\n<p>gem2rpm --fetch mysql (to get the gem)\ngem2rpm -T > rubygem-mysql.spec.template\ngem2rpm -t rubygem-.spec.template mysql-2.9.1.gem > rubygem-mysql.spec</p>\n\n<p>You have to modify the spec file a bit after it's generated, then use that to spec template to properly build the spec file for your needs.  </p>\n\n<p>Then just use rpmbuild to actually make the rpm/srpm.</p>\n\n<p>gem list now shows mysql in there and the setup script works.</p>\n"}], "owner": {"reputation": 53, "user_id": 1024569, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c844e60a335b402753c562beb430a405?s=128&d=identicon&r=PG", "display_name": "Andrew S", "link": "https://stackoverflow.com/users/1024569/andrew-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 43921201, "answer_count": 2, "score": 0, "last_activity_date": 1494520711, "creation_date": 1494392222, "last_edit_date": 1494503545, "question_id": 43883868, "link": "https://stackoverflow.com/questions/43883868/rubygem-mysql-error-gem-is-not-loaded-after-centos-upgrade", "title": "&quot;rubygem mysql error: gem is not loaded&quot; after CentOS upgrade", "body": "<p>I am upgrading a system from EL 6 to EL 7.  We have an application that uses ruby to setup a MySQL database. I know very, very little about ruby and gems, so I'm struggling getting this going.  Under EL 6, the setup process works properly.  Under CentOS 7, I get the following error when processing the rakefile:</p>\n\n<blockquote>\n  <p>Specified 'mysql' for database adapter, but the gem is not loaded. Add\n  <code>gem 'mysql'</code> to your Gemfile</p>\n</blockquote>\n\n<p>Under 6, I don't see any MySQL gem files installed using <code>gem list</code>, but the setup process works fine and generates our database properly.</p>\n\n<p>Under 7, I can manually run:  <code>gem install mysql --with-mysql-config=/usr/lib64/mysql/mysql_config</code>.\nThen, the setup script works.</p>\n\n<p>I am installing most of the required gems/ruby applications via <code>rpm</code>.  </p>\n\n<p>I have:</p>\n\n<pre><code>ruby-2.0.0.648-29.el7.x86_64\nrubygem-rake-0.9.6-29.el7.noarch\nrubygem-activesupport-4.2.5.2-2.fc24.noarch\nrubygems-2.0.14.1-29.el7.noarch\nrubygem-activemodel-4.2.5.2-1.fc24.noarch\nrubygem-activerecord-4.2.5.2-1.fc24.noarch\nruby-mysql-2.8.2-1.el7.x86_64\n</code></pre>\n\n<p>ruby-mysql creates <code>/usr/local/lib64/ruby/site_ruby/mysql.so</code>.</p>\n\n<p>Is the <code>mysql.so</code> library what provides the MySQL adapter or is there something else that effectively provides the mysql gem?  It's confusing that I don't have to do anything in EL 6 but have to install it specifically in EL 7.</p>\n\n<p>Is this a pathing issue or a major change in source?  I'm obviously pulling in the activesupport and activerecord rpms from Fedora, so I suppose there could be a conflict there, but it's very hard to tell.</p>\n\n<p>My <code>database.yml</code> file looks like this:</p>\n\n<pre><code>adapter: mysql\nencoding: utf8\ndatabase: mydatabase\nusername: root\npassword:\nhost: 127.0.0.1\nport: 3306\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "exec", "bundle", "redmine"], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 1, "creation_date": 1494393174, "post_id": 43883541, "comment_id": 74802539, "body": "My goodness that was it. I guess because I don&#39;t have too much experience in Rails but I would think that I would get an error about &quot;bundle exec&quot;. If I had an error saying something about rake that would have pointed me in the right direction. Thanks."}, {"owner": {"reputation": 400, "user_id": 4886040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmDBT.jpg?s=128&g=1", "display_name": "limco", "link": "https://stackoverflow.com/users/4886040/limco"}, "reply_to_user": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1494407942, "post_id": 43883541, "comment_id": 74810602, "body": "If you&#39;ve got previous experience in PHP, <a href=\"http://stackoverflow.com/questions/30462969/php-composer-compared-with-ruby-gems-and-bundler\">this post</a> helped me put into perspective how tools in Rails like Bundler and RubyGems compared and contrasted to their PHP counterparts some time ago. Pretty good read if you&#39;re just starting out in Rails. Glad to have helped."}], "tags": [], "owner": {"reputation": 400, "user_id": 4886040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmDBT.jpg?s=128&g=1", "display_name": "limco", "link": "https://stackoverflow.com/users/4886040/limco"}, "is_accepted": true, "score": 1, "last_activity_date": 1494390200, "creation_date": 1494390200, "answer_id": 43883541, "question_id": 43883489, "link": "https://stackoverflow.com/questions/43883489/bundle-exec-not-working-in-windows/43883541#43883541", "title": "bundle exec not working in Windows", "body": "<p>Do you have rake rubygem installed? Try to run this in CMD:</p>\n\n<pre><code>gem install rake\n</code></pre>\n\n<p>Then run the command again:</p>\n\n<pre><code>bundle exec rake generate_secret_token\n</code></pre>\n\n<p>I'm looking at this: <a href=\"https://github.com/rbenv/rbenv/issues/495\" rel=\"nofollow noreferrer\">source</a></p>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 43883541, "answer_count": 1, "score": 1, "last_activity_date": 1494390200, "creation_date": 1494389871, "question_id": 43883489, "link": "https://stackoverflow.com/questions/43883489/bundle-exec-not-working-in-windows", "title": "bundle exec not working in Windows", "body": "<p>I am following the <a href=\"http://www.redmine.org/projects/redmine/wiki/RedmineInstall/%22Redmine%20Install%20Tutorial%22\" rel=\"nofollow noreferrer\">Redmine Install Tutorial</a></p>\n\n<p>on step 5 it says </p>\n\n<blockquote>\n  <p>Step 5 - Session store secret generation\n  This step generates a random key used by Rails to encode cookies storing session data thus preventing their tampering.\n  Generating a new secret token invalidates all existing sessions after restart.</p>\n</blockquote>\n\n<pre><code>bundle exec rake generate_secret_token\n</code></pre>\n\n<p>I'm on Windows 10. When I try to do bundle exec in CMD, I get cannot find the path specified. For whatever reason I cannot find any reference to this problem (perhaps I'm not searching for the right terms). I can't imagine I'm the first to experience this but in any case, how can I resolve it? I can check ruby version, gem version, and rails version just fine. I've been able to do steps 1-4 fine so I don't get why I can't run bundle exec. I suppose this is implied but I can't do step 6 either.</p>\n"}, {"tags": ["ruby", "linked-list", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1494390359, "post_id": 43883370, "comment_id": 74801634, "body": "all that will fix the undefined method error? I&#39;m running minitest and jsut focusing on this one step right now. my next step i think is to <code>assert_nil list.head.next_node</code> since I am try to get it to give <code>nil</code> as a return. Also, when called in a <code>pry</code> session I get the <code>nil</code> result I am looking for. I just can&#39;t impliment it in the code here to clear the error."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 1, "creation_date": 1494390428, "post_id": 43883370, "comment_id": 74801654, "body": "&quot;All that&quot; was trying to fix your understanding: you cannot evaluate <code>list.head.next_node</code> if <code>list.head</code> is <code>nil</code>. (<code>list.head&amp;.next_node</code> you can, and will evaluate to <code>nil</code> in those circumstances.)"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1494425890, "post_id": 43883370, "comment_id": 74824306, "body": "OK I think my understanding clicked overnight @Amadan. I probably should have slept on it before commenting. I apologize, :P. You&#39;re telling me that the way my code is written when run <i>not</i> in a test will result in an infinite loop?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1494439373, "post_id": 43883370, "comment_id": 74833270, "body": "No, it was a hypothetical, if you added the code I wrote. As it is, that line is merely harmlessly useless."}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1494455234, "post_id": 43883370, "comment_id": 74841289, "body": "That did explain though, thank you :D My test was what was messing me up. I wasn&#39;t appending anything to it in the test file which meant that it was nil and wasn&#39;t able to be read. :D"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1494389347, "last_edit_date": 1494389347, "creation_date": 1494388837, "answer_id": 43883370, "question_id": 43883275, "link": "https://stackoverflow.com/questions/43883275/linked-list-class-initialization-error/43883370#43883370", "title": "Linked list class initialization error", "body": "<p><code>LinkedList.new</code> will invoke your <code>initialize</code>; no <code>head</code> parameter was transmitted, so the default of <code>nil</code> will be assigned. <code>@head = head</code> will store <code>nil</code> in the <code>@head</code> attribute.</p>\n\n<p>Later, your <code>list.head</code> uses the (not at all unnecessary) accessor, and returns the <code>nil</code> that was stored there earlier. Then <code>.next_node</code> is sent to <code>nil</code>, but <code>NilClass</code> does not define such a method. In order for <code>list.head.next_node</code> to invoke your <code>next_node</code> method, <code>@head</code> would need to be a <code>LinkedList</code> object, not <code>nil</code>.</p>\n\n<p>If you wish to protect yourself against that, you could use:</p>\n\n<pre><code>list.head.next_node if list.head\n</code></pre>\n\n<p>or use the safe-navigation operator <code>&amp;.</code> introduced by Ruby 2.3, that will check whether the left side is <code>nil</code> and return <code>nil</code> if so (and invoke the method if not):</p>\n\n<pre><code>list.head&amp;.next_node\n</code></pre>\n\n<p>EDIT: There is also a subtle bug that is harmless in your code but might do something entirely unexpected in some other circumstance.</p>\n\n<pre><code>@next_node = next_node\n</code></pre>\n\n<p>Since you haven't defined <code>next_node</code> variable in the <code>initialize</code> method, Ruby will conclude that you wish to invoke the accessor. This accessor will return <code>@next_node</code>, so you end up doing <code>@next_node = @next_node</code>. Luckily, <code>@next_node</code> already starts as <code>nil</code>, so the assignment, although entirely unnecessary, at least doesn't fail.</p>\n\n<p>However, if you defined your accessor yourself, say like this:</p>\n\n<pre><code>def next_node\n  @next_node ||= LinkedList.new\nend\n</code></pre>\n\n<p>(return <code>@next_node</code>; if it is <code>nil</code>, then first make a new empty <code>LinkedList</code>, set it as <code>@next_node</code> and return that), then you're in real trouble, because if you now say <code>LinkedList.new</code>, you will try to assign to <code>@next_node</code> a <code>LinkedList.new</code>, which will try to assign to its <code>@next_node</code> a <code>LinkedList.new</code>, which will try to assign to its <code>@next_node</code> a <code>LinkedList.new</code>, which will...<kbd>Ctrl-C</kbd></p>\n"}], "owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43883370, "answer_count": 1, "score": 0, "last_activity_date": 1494390056, "creation_date": 1494387981, "last_edit_date": 1494390056, "question_id": 43883275, "link": "https://stackoverflow.com/questions/43883275/linked-list-class-initialization-error", "title": "Linked list class initialization error", "body": "<p>I have <code>require</code> for a class that has the method defined. I even have it in an <code>attr_accessor</code> which I'm pretty sure if complete excess. But no matter where or how I put it, I can't get rid of this error <code>NoMethodError: undefined method \"next_node\" for nil:NilClass</code>. I'm running <code>minitest</code> to use TDD and am super hung up on this point.</p>\n\n<p><em>EDIT</em> I am trying to return a <code>nil</code> value when I test <code>list.head.next_node</code> </p>\n\n<pre><code>require './lib/node'\nclass LinkedList\n  attr_accessor :head,\n                :next_node\n\n  def initialize(head = nil)\n    @head = head\n    @next_node = next_node\n  end\n\n  def append(sound)\n    #@next_node = nil\n    @head = Node.new(sound)\n    sound\n  end\n\nend\n</code></pre>\n\n<p>here is my test method</p>\n\n<pre><code>def test_does_head_move_value_to_next_node\n    list = LinkedList.new\n    list.head.next_node\n    # assert_nil list.head.next_node\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1494392801, "post_id": 43883199, "comment_id": 74802409, "body": "Here&#39;s a link to a quick <a href=\"https://www.thoughtco.com/using-the-command-line-2908368\" rel=\"nofollow noreferrer\">introduction</a>"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1494389275, "post_id": 43883222, "comment_id": 74801335, "body": "Yep! <code>$</code> is often used in examples to convey that the command is meant to be typed in at the command line, as compared to <code>irb</code> or what have you."}], "tags": [], "owner": {"reputation": 1565, "user_id": 6830898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecEgQ.jpg?s=128&g=1", "display_name": "fylie", "link": "https://stackoverflow.com/users/6830898/fylie"}, "is_accepted": false, "score": 5, "last_activity_date": 1494387616, "creation_date": 1494387616, "answer_id": 43883222, "question_id": 43883199, "link": "https://stackoverflow.com/questions/43883199/can-ruby-koans-be-run-on-a-mac/43883222#43883222", "title": "Can Ruby Koans be run on a mac?", "body": "<p>Try entering <code>ruby path_to_enlightenment.rb</code> instead. With no <code>$</code>.</p>\n"}], "owner": {"reputation": 581, "user_id": 7842926, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ca7e21d187a548017fe1a7b475bb8e3b?s=128&d=identicon&r=PG&f=1", "display_name": "CJ Jean", "link": "https://stackoverflow.com/users/7842926/cj-jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1494392482, "creation_date": 1494387432, "last_edit_date": 1494392482, "question_id": 43883199, "link": "https://stackoverflow.com/questions/43883199/can-ruby-koans-be-run-on-a-mac", "title": "Can Ruby Koans be run on a mac?", "body": "<p>I have ruby koans installed on a mac but when I enter </p>\n\n<p><code>$ ruby path_to_enlightenment.rb</code></p>\n\n<p>to start it, I get:</p>\n\n<p><code>bash: $: command not found</code></p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7989311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d139b72d35d5be93517afb857e932850?s=128&d=identicon&r=PG&f=1", "display_name": "newt tompkins", "link": "https://stackoverflow.com/users/7989311/newt-tompkins"}, "edited": false, "score": 0, "creation_date": 1494443440, "post_id": 43883361, "comment_id": 74835654, "body": "That worked perfectly! Thanks. I was honestly pretty close to stumbling upon that code, but it didn&#39;t fully come to pass. I believe the closest I got was name_path(@data[&#39;name&#39;]), which threw the same error."}, {"owner": {"reputation": 1147, "user_id": 4770578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37eff09260d44b9cb8fab960d4ec2c32?s=128&d=identicon&r=PG&f=1", "display_name": "Carson Crane", "link": "https://stackoverflow.com/users/4770578/carson-crane"}, "reply_to_user": {"reputation": 13, "user_id": 7989311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d139b72d35d5be93517afb857e932850?s=128&d=identicon&r=PG&f=1", "display_name": "newt tompkins", "link": "https://stackoverflow.com/users/7989311/newt-tompkins"}, "edited": false, "score": 0, "creation_date": 1494531499, "post_id": 43883361, "comment_id": 74881508, "body": "Makes sense - I find the magic methods for path generation in Rails rather confusing. It took me a bunch of getting burned to get used to them."}], "tags": [], "owner": {"reputation": 1147, "user_id": 4770578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37eff09260d44b9cb8fab960d4ec2c32?s=128&d=identicon&r=PG&f=1", "display_name": "Carson Crane", "link": "https://stackoverflow.com/users/4770578/carson-crane"}, "is_accepted": true, "score": 2, "last_activity_date": 1494389043, "last_edit_date": 1494389043, "creation_date": 1494388730, "answer_id": 43883361, "question_id": 43883183, "link": "https://stackoverflow.com/questions/43883183/ruby-on-rails-show-method-for-a-parsed-json-result/43883361#43883361", "title": "Ruby on Rails - Show method for a parsed JSON result", "body": "<p>In this view:</p>\n\n<pre><code>&lt;% @response.each do |data| %&gt;\n  &lt;ul&gt;\n    &lt;li&gt;\n      &lt;%= link_to data['name'].upcase, name_path(@name) %&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You're using <code>@name</code> but you never actually assign a value to it in your <code>index</code> controller method. As a result - it gets passed to the <code>name_path</code> function with a value of <code>nil</code>. That throws an error because your route definition requires a <code>name</code>.</p>\n\n<p>I think you want something like <code>name_path(data['name'])</code> or something along those lines.</p>\n"}], "owner": {"reputation": 13, "user_id": 7989311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d139b72d35d5be93517afb857e932850?s=128&d=identicon&r=PG&f=1", "display_name": "newt tompkins", "link": "https://stackoverflow.com/users/7989311/newt-tompkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 43883361, "answer_count": 1, "score": 0, "last_activity_date": 1494389043, "creation_date": 1494387349, "question_id": 43883183, "link": "https://stackoverflow.com/questions/43883183/ruby-on-rails-show-method-for-a-parsed-json-result", "title": "Ruby on Rails - Show method for a parsed JSON result", "body": "<p>I am building a seemingly simple website for a visitor to get a status update on a selected data piece. The data comes from an external API. The gist of it is this: the visitor sees a list of the data names, clicks one, and is redirected to a partial with status update, either True or False.</p>\n\n<p>My index method works very well, and iterates through the data names perfectly. I believe my routing (using the friendly_id gem) should work fine. However, I cannot figure out how to properly set up the show method.</p>\n\n<p>Here is my code thus far:</p>\n\n<p>Controller:</p>\n\n<pre><code>class DataController &lt; ApplicationController\n  include HTTParty\n  attr_accessor :name, :status\n\n  def index\n    @response = HTTParty.get(\"api_url\").parsed_response\n     respond_to do |format|\n      format.json { render :json =&gt; JSON.parse(@result, :include =&gt; { :data =&gt; { :only =&gt; [:name, :status]}}) }\n      format.html { render \"index.html.erb\" }\n     end\n   end\n\n\n  def show\n    @response = HTTParty.get('api_url').parsed_response\n    respond_to do |format|\n      format.json { render :json =&gt; JSON.parse(@result, :include =&gt; { :data =&gt; { :only =&gt; [:name, :status]}}) }\n      format.html { render \"show.html.erb\" }\n    end\n    @name = @response.find(params[:name])\n  end\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;% @response.each do |data| %&gt;\n  &lt;ul&gt;\n    &lt;li&gt;\n      &lt;%= link_to data['name'].upcase, name_path(@name) %&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'data#index'\n  get '/:name' =&gt; 'data#show', as: \"name\"\nend\n</code></pre>\n\n<p>All of this together brings up the following error:</p>\n\n<pre><code>ActionController::UrlGenerationError in Data#index\nShowing /app/views/layouts/_header.html.erb where line #11 raised:\n\nNo route matches {:action=&gt;\"show\", :controller=&gt;\"data\", :name=&gt;nil} missing required keys: [:name]\n</code></pre>\n\n<p>What I am trying to accomplish is to be able to route each iterated link as 'root/{data name}', pulling {data name} from the JSON result as a parameter, and then rendering a show page with the status update information. Clearly, I have no idea how to actually capture the \"name\" key from the parsed JSON result as a param for the show method. I have tried creating a data_params method to contain it, but it did not work. I have tried implicitly calling the param on the find method in show (as above), to no avail. I have even tried calling a new api scrape in a params method and trying to parse the results into that, and nothing. </p>\n\n<p>I'm guessing it is either some very simple mistake I'm not seeing (is my link_to actually pointing the right direction? are my api calls and JSON parsing done correctly [yes, I know I should create a separate method or helper for the api call, but that hasn't been working out for me so far--I  keep breaking the app]? is this link actually supposed to call from the index method still?), or else something a bit more out of my depth.</p>\n\n<p>Any ideas on where to go from here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494384515, "post_id": 43882543, "comment_id": 74800273, "body": "Are you logged in?"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "reply_to_user": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494387461, "post_id": 43882543, "comment_id": 74800926, "body": "Not yet sir and also I didnt confirm it yet.."}, {"owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494391114, "post_id": 43882543, "comment_id": 74801861, "body": "Could you put your route.rb in your question please?"}, {"owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494398717, "post_id": 43882543, "comment_id": 74804824, "body": "&quot;I searched regarding to this problem, I saw that they&#39;re recommending create a confirmation_controller. I already created that file but don&#39;t know how can I apply that&quot;. Where did you see that?"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "reply_to_user": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494417972, "post_id": 43882543, "comment_id": 74817894, "body": "How can I apply those controllers? registrations_controller, confirmations_controller and passwords_controller?"}], "owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494396722, "creation_date": 1494382297, "last_edit_date": 1494396722, "question_id": 43882543, "link": "https://stackoverflow.com/questions/43882543/how-can-i-disable-first-the-message-in-devise-ruby", "title": "How can I disable first the message in devise ruby", "body": "<p>I am currently doing a project and using a devise gem.. Everytime I load the root(localhost:3000) it always display the \"You have to confirm your email address before continuing.\". The thing I want is it will only display the message after sign-up..</p>\n\n<p>I tried to put if devise_mapping.registerable? &amp;&amp; controller_name == 'registrations' inside of if (alert), can be found at devise/session/new.html.. I used this because I've saw inside of registrations there's signed_up_but_unconfirmed: (can be found at devise.en.yml)</p>\n\n<p>Yes it's working, it wont display the message when I load the localhost:3000 but after I sign-up the message wont display. I searched regarding to this problem, I saw that they're recommending create a confirmation_controller. I already created that file but don't know how can I apply that..</p>\n\n<p>Question: How can I disable first the \"You have to confirm your email address before continuing.\", it will only dispaly after sign-up</p>\n\n<p><strong>Devise/session/new</strong></p>\n\n<pre><code>&lt;% if devise_mapping.registerable? &amp;&amp; controller_name == 'registrations'  \n             if (alert)%&gt;\n        &lt;div class=\"alert alert-danger\"&gt;\n          &lt;h5 class=\"text-center\"&gt;&lt;%= notice %&gt;&lt;/h5&gt;\n        &lt;/div&gt;\n\n        &lt;% end %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n  # devise_for :users, controller =&gt; { :confirmations_controller =&gt; \"confirmations/after_confirmation_path_for\"}\n  root to: \"home#index\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "slack-api"], "comments": [{"owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494381959, "post_id": 43882433, "comment_id": 74799705, "body": "Do you have the link of where you took this snippet from?"}, {"owner": {"reputation": 511, "user_id": 1070870, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ead540e1d79203382272f27f707a491c?s=128&d=identicon&r=PG", "display_name": "humdinger", "link": "https://stackoverflow.com/users/1070870/humdinger"}, "reply_to_user": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494382035, "post_id": 43882433, "comment_id": 74799724, "body": "Yup, this page <a href=\"https://api.slack.com/tutorials/working-with-files\" rel=\"nofollow noreferrer\">api.slack.com/tutorials/working-with-files</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "is_accepted": false, "score": 1, "last_activity_date": 1494382718, "creation_date": 1494382718, "answer_id": 43882591, "question_id": 43882433, "link": "https://stackoverflow.com/questions/43882433/download-file-from-slack-in-ruby/43882591#43882591", "title": "Download file from Slack in Ruby", "body": "<p>So, here is the fetch_image method</p>\n\n<pre><code>def fetch_image(url)\n  res = RestClient.get(url, { \"Authorization\" =&gt; \"Bearer #{@team.access_token}\" })\n\n  if res.code == 200\n    return res.body\n  else\n    raise 'Download failed'\n  end\nend\n</code></pre>\n\n<p>Which is needed in your controller/model.</p>\n\n<p>This is a rough example, I admit, but basically, the file download is the first part of this script. You want to use this part:</p>\n\n<pre><code>filename = file.timestamp\n\nif file.filetype == \"jpg\"\n  File.open(\"./tmp/#{filename}\", 'wb') do |f|\n    f &lt;&lt; fetch_image(file.url_private)\n  end\nend\n</code></pre>\n\n<p>You can then do something with f which is the file you downloaded. You can also use</p>\n\n<pre><code>file_path = open(file.url_private).path\n</code></pre>\n\n<p>to download the file.</p>\n\n<p>In the provided example, they seem to use a model called FaceDetection and upload the file <code>file</code> to preform other tasks.</p>\n\n<p>I hope this makes sense and helps.</p>\n"}, {"tags": [], "owner": {"reputation": 387, "user_id": 5329783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-9TcBa3JeLjg/AAAAAAAAAAI/AAAAAAAAAIk/w-SncFiZtrA/photo.jpg?sz=128", "display_name": "Kamesh Joshi", "link": "https://stackoverflow.com/users/5329783/kamesh-joshi"}, "is_accepted": true, "score": 3, "last_activity_date": 1494382841, "creation_date": 1494382841, "answer_id": 43882606, "question_id": 43882433, "link": "https://stackoverflow.com/questions/43882433/download-file-from-slack-in-ruby/43882606#43882606", "title": "Download file from Slack in Ruby", "body": "<p>If you are talking about this block </p>\n\n<pre><code>File.open(\"./tmp/#{filename}\", 'wb') do |f|\n  f &lt;&lt; fetch_image(file.url_private)\nend\n</code></pre>\n\n<p>then it is writing the file in binary mode(that's what <code>wb</code> is doing there) , then it is writing the content to file and then closing the file , same can be achieved with </p>\n\n<pre><code>to_write_file = File.open(\"./tmp/#{filename}\", 'wb')\nto_write_file &lt;&lt; fetch_image(file.url_private)\nto_write_file.close\n</code></pre>\n\n<p>but the first method is good way of defining it. </p>\n"}], "owner": {"reputation": 511, "user_id": 1070870, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ead540e1d79203382272f27f707a491c?s=128&d=identicon&r=PG", "display_name": "humdinger", "link": "https://stackoverflow.com/users/1070870/humdinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 43882606, "answer_count": 2, "score": 0, "last_activity_date": 1494382841, "creation_date": 1494381426, "question_id": 43882433, "link": "https://stackoverflow.com/questions/43882433/download-file-from-slack-in-ruby", "title": "Download file from Slack in Ruby", "body": "<p>I'm trying to work with the Slack API in Ruby. They have this snippet as an example on their site</p>\n\n<pre><code>def fetch_and_compose_image(file, channel)\n\n  filename = file.timestamp\n\n  if file.filetype == \"jpg\"\n    File.open(\"./tmp/#{filename}\", 'wb') do |f|\n      f &lt;&lt; fetch_image(file.url_private)\n    end\n\n    fd = FaceDetection.new\n\n    if fd.process_image\n      file_id = upload(file, channel)\n      add_reactions(file_id, fd)\n    end\n  end\nend\n</code></pre>\n\n<p>What I don't understand is, how are they adding the fetched image to 'f', and then somehow uploading the file with the variable 'file'. Where does 'f' come into play?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "edited": false, "score": 0, "creation_date": 1494393445, "post_id": 43883928, "comment_id": 74802639, "body": "I don&#39;t want a single table inheritance, because the fruit models differ considerably in their attributes (I guess the example used wasn&#39;t as ideal as it could have been to support this though)"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "edited": false, "score": 2, "creation_date": 1494393955, "post_id": 43883928, "comment_id": 74802852, "body": "In this case take a look at polymorphic association. Use a intermitate model between basket and fruits and this  uses  <code>belongs_to :fruit, polymorphic: true</code>."}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1494392682, "creation_date": 1494392682, "answer_id": 43883928, "question_id": 43882029, "link": "https://stackoverflow.com/questions/43882029/return-children-of-known-but-different-classes-from-the-parent/43883928#43883928", "title": "Return Children (of known, but different classes) from the Parent", "body": "<p>It sounds like you need single table inheritance (STI).</p>\n\n<pre><code>class Fruit &lt; ActiveRecord::Base\n   belongs_to :basket\nend\nclass Apple &lt; Fruit; end\nclass Pear &lt; Fruit; end\nclass Orange &lt; Fruit; end\nclass Basket &lt; ApplicationRecord\n   has_many :apples\n   has_many :pears\n   has_many :oranges\n   has_many :fruits\nend \n</code></pre>\n\n<p>For this you need a table <code>fruits</code> with a column <code>type</code> instead of 4 separate tables. </p>\n"}], "owner": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494392682, "creation_date": 1494378268, "last_edit_date": 1494378592, "question_id": 43882029, "link": "https://stackoverflow.com/questions/43882029/return-children-of-known-but-different-classes-from-the-parent", "title": "Return Children (of known, but different classes) from the Parent", "body": "<p><strong>Background</strong></p>\n\n<p>I'm looking to be able to go from a parent class, and show me all of the children that it has, but the children may be of a set of <em><strong>specified and known, but different classes</strong></em>.</p>\n\n<p>Here's an example of the setup:</p>\n\n<pre><code>class Basket &lt; ApplicationRecord\n  has_many :apples\n  has_many :pears\n  has_many :oranges\nend\n\nclass Apple\n  belongs_to :basket\nend\n\nclass Pear\n  belongs_to :basket\nend\n\nclass Orange\n  belongs_to :basket\nend\n</code></pre>\n\n<p>I know that I can do this - one by one for each specific fruit - which is already supported in Rails, through Active Record.</p>\n\n<p><code>Basket.pears #=&gt; [ Pear:0x007fd6ec615fd8, Pear:0x343d6e343495fd8 ]</code></p>\n\n<p><strong>Actual Question</strong></p>\n\n<p><strong>But I want to be able to go from the parent Class (ie <code>Basket</code> in this example), and show me all the children in one go (ie <code>Apples</code>, <code>Pears</code>, <code>Oranges</code>)\nWe could call the grouping of these children as <code>fruits</code>...so something like this:</strong></p>\n\n<p><code>Basket.fruits #=&gt; [ Pear:0x007fd6ec615fd8, Pear:0x343d6e343495fd8, Apple:0x343d6e343495fd8, Orange:0x343d6e343495fd8  ]</code></p>\n\n<p><strong>Also I want it to return an <code>ActiveRecord_Relation</code> so I can do things like:</strong></p>\n\n<p><code>Basket.fruits.where(fruit_seasonality: 'Fall') #=&gt; [ Orange:0x007fd6ec615fd8 ]</code></p>\n\n<p>(assuming that all of the children classes in <code>fruits</code>, have an attribute called <code>fruit_seasonality</code> on them)</p>\n\n<p><strong>What I've tried:</strong></p>\n\n<pre><code>class Basket &lt; ApplicationRecord\n  has_many :apples\n  has_many :pears\n  has_many :oranges\n\n  def fruits\n     apples + oranges + pears\n  end\nend\n</code></pre>\n\n<p>Which is cool, then I can do <code>Basket.fruits</code>, but this just returns an <code>Array</code> which doesn't help for the queries, like <code>Basket.fruits.where</code> etc.</p>\n"}, {"tags": ["ruby", "testing", "ruby-mocha"], "answers": [{"tags": [], "owner": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "is_accepted": true, "score": 4, "last_activity_date": 1514903007, "last_edit_date": 1514903007, "creation_date": 1494408152, "answer_id": 43888388, "question_id": 43881911, "link": "https://stackoverflow.com/questions/43881911/ruby-mocha-expect-the-first-argument-to-be-a-symbol/43888388#43888388", "title": "Ruby Mocha expect the first argument to be a symbol", "body": "<p>Have you tried this :</p>\n\n<pre><code>Foo.expects(:bar).with(:some_key, anything)\n</code></pre>\n\n<p>If you need to be more specific you can also use a block :</p>\n\n<pre><code>Foo.expects(:bar).with do |first_arg, second_arg|\n  first_arg == :some_key\nend\n</code></pre>\n"}], "owner": {"reputation": 32534, "user_id": 63810, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8bf1c9d4005ec592ac518840559db996?s=128&d=identicon&r=PG", "display_name": "Rimian", "link": "https://stackoverflow.com/users/63810/rimian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 43888388, "answer_count": 1, "score": 1, "last_activity_date": 1610403558, "creation_date": 1494377189, "last_edit_date": 1610403558, "question_id": 43881911, "link": "https://stackoverflow.com/questions/43881911/ruby-mocha-expect-the-first-argument-to-be-a-symbol", "title": "Ruby Mocha expect the first argument to be a symbol", "body": "<p>I'm trying to assert a method call happens where the first argument is a symbol like so:</p>\n\n<p><code>Foo.bar(:some_key, {})</code></p>\n\n<p>I don't really care what the second argument is at this stage.</p>\n\n<p>I've tried:</p>\n\n<p><code>Foo.expects(:bar).with(includes(:some_key))</code></p>\n\n<p>and other variations found in the documentation <a href=\"http://gofreerange.com/mocha/docs/Mocha/ParameterMatchers.html\" rel=\"nofollow noreferrer\">here</a>. The test passes when I expect the method call with any arguments.</p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["ruby", "selenium", "rspec", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1494377029, "post_id": 43881770, "comment_id": 74798615, "body": "Is there a stacktrace or does it silently fail?  Can you post the (minimal amount of) HTML to consistently reproduce the issue?"}, {"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1494377402, "post_id": 43881770, "comment_id": 74798698, "body": "It&#39;s not actually failing. I have added <code>postcode_search.send_keys :semicolon</code> and thats to give me the postcode plus ; so I know its running but it wont perform the :return function its just sits there."}, {"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1494378700, "post_id": 43881770, "comment_id": 74798982, "body": "<a href=\"https://github.com/shafiqahmedmalik2010/we_are_friday\" rel=\"nofollow noreferrer\">Please have a look at code on Github</a>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494379787, "post_id": 43881770, "comment_id": 74799217, "body": "Since send_keys is apparently working it&#39;s probably how you&#39;re checking for the :return key, or the event being generated by it.   Is that in JS ? is it just supposed to be submitting a form, etc?  You need to asks questions with enough details for people to be able to answer them."}, {"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "edited": false, "score": 0, "creation_date": 1494380578, "post_id": 43881770, "comment_id": 74799381, "body": "I am running the automated test using selenium directly in the browser and able to see the test in real time. It suppose to enter my postcode and then press enter to get a list of local gym to my post code. Its typing the post but not pressing the return key to bring up the list of gyms. Then I  am checking if an element is being displayed and it comeback back false. This is because the results are not being displayed. Apologies in advance if that does not make sense."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1494387204, "post_id": 43881770, "comment_id": 74800861, "body": "You haven&#39;t explained how you&#39;re detecting the enter key being pressed to trigger the list"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1494393669, "post_id": 43881770, "comment_id": 74802744, "body": "Just a wild guess, but how about using <code>:enter</code>? <a href=\"http://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys#KEYS-constant\" rel=\"nofollow noreferrer\">Selenium::WebDriver::Keys</a>"}, {"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1494401744, "post_id": 43881770, "comment_id": 74806644, "body": "@maxple Already tried that aswell with no luck."}], "owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494376915, "creation_date": 1494375867, "last_edit_date": 1494376915, "question_id": 43881770, "link": "https://stackoverflow.com/questions/43881770/unable-use-keyboard-keys-in-automation-script", "title": "unable use keyboard keys in automation script", "body": "<p>I am trying to press return after I have added a postcode. However, the method adds the postcode but does not run the second line.</p>\n\n<pre><code>def search_postcode postcode\n  postcode_search.set postcode\n  postcode_search.send_keys :return\nend\n</code></pre>\n\n<p>Does anybody have any suggestions? I am currently using the capybara, selenium-webdriver and rspec gems.</p>\n"}, {"tags": ["ruby", "class", "oop"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1494375961, "post_id": 43881650, "comment_id": 74798370, "body": "Can you clarify which <i>specific</i> part of the documentation of those methods you are having trouble with? That way, the Ruby developers can improve that part to help future readers."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1494376419, "creation_date": 1494376419, "answer_id": 43881824, "question_id": 43881650, "link": "https://stackoverflow.com/questions/43881650/what-is-the-difference-between-object-class-and-object-class-inspect-in-ruby/43881824#43881824", "title": "What is the difference between Object.class and Object.class.inspect in Ruby?", "body": "<blockquote>\n  <p>It seems like both of these methods return the same result (a human readable representation of the object and it's type).</p>\n</blockquote>\n\n<p>No, they don't.</p>\n\n<blockquote>\n  <p>What is the differences between the methods?</p>\n</blockquote>\n\n<p><a href=\"http://ruby-doc.org/core/Object.html#method-i-class\" rel=\"nofollow noreferrer\"><code>Object#class</code></a> returns the class of the receiver.</p>\n\n<p><a href=\"http://ruby-doc.org/core/Module.html#method-i-inspect\" rel=\"nofollow noreferrer\"><code>Module#inspect</code></a> is an alias of <a href=\"http://ruby-doc.org/core/Module.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>Module#to_s</code></a> and returns a human-readable string representation of the module. In particular, it returns the <a href=\"http://ruby-doc.org/core/Module.html#method-i-name\" rel=\"nofollow noreferrer\"><code>Module#name</code></a> if it has one, and a unique representation otherwise. For singleton classes, it includes information about the object the singleton class is the singleton class of.</p>\n\n<p>So, the two methods don't return the same result. In fact, they don't even return a result of the same class: <code>Object#class</code> returns an instance of the <a href=\"http://ruby-doc.org/core/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a> class, <code>Module#inspect</code> returns an instance of the <a href=\"http://ruby-doc.org/core/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> class.</p>\n"}, {"tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": false, "score": 0, "last_activity_date": 1494377683, "last_edit_date": 1592644375, "creation_date": 1494377107, "answer_id": 43881902, "question_id": 43881650, "link": "https://stackoverflow.com/questions/43881650/what-is-the-difference-between-object-class-and-object-class-inspect-in-ruby/43881902#43881902", "title": "What is the difference between Object.class and Object.class.inspect in Ruby?", "body": "<p>Since <code>puts</code> needs a string, it calls the class's <code>to_s</code> method. I believe Class inherits the <a href=\"https://ruby-doc.org/core/Module.html#method-i-to_s\" rel=\"nofollow noreferrer\">method from Module</a>:</p>\n<blockquote>\n<p>Returns a string representing this module or class. For basic classes and modules, this is the name. For singletons, we show information on the thing we\u2019re attached to as well.</p>\n<p><em>Also aliased as: <a href=\"https://ruby-doc.org/core/Module.html#method-i-inspect\" rel=\"nofollow noreferrer\">inspect</a></em></p>\n</blockquote>\n<p>Perhaps you intended to look at the object's methods?</p>\n<pre><code>class Foo\n  def initialize\n    @t = 'Junk'\n  end\nend\n\nf = Foo.new\nputs f.class    # =&gt;  Foo\nputs f.to_s     # =&gt;  #&lt;Foo:0x007fce2503bbf0&gt;\nputs f.inspect  # =&gt;  #&lt;Foo:0x007fce2503bbf0 @t=&quot;Junk&quot;&gt;\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1494377683, "creation_date": 1494374748, "question_id": 43881650, "link": "https://stackoverflow.com/questions/43881650/what-is-the-difference-between-object-class-and-object-class-inspect-in-ruby", "title": "What is the difference between Object.class and Object.class.inspect in Ruby?", "body": "<p>It seems like both of these methods return the same result (a human readable representation of the object and it's type). What is the differences between the methods?</p>\n\n<pre><code>class Foo\n\nend\n\nf = Foo.new\nputs f.class          &lt;==  puts Foo\nputs f.class.inspect  &lt;==  puts Foo\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "is_accepted": true, "score": 1, "last_activity_date": 1494375643, "creation_date": 1494375643, "answer_id": 43881750, "question_id": 43881481, "link": "https://stackoverflow.com/questions/43881481/strange-ssl-error-on-ruby-console/43881750#43881750", "title": "strange ssl error on ruby console", "body": "<p>This might be because the request tries to verify the ssl key you are sending/receiving.</p>\n\n<p>You can avoid the error by adding</p>\n\n<pre><code>verify: false\n</code></pre>\n\n<p>to your call.</p>\n\n<p>More details <a href=\"https://github.com/jnunemaker/httparty/blob/master/docs/README.md#working-with-ssl\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1129, "user_id": 6822886, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-PW9V0rm6uOw/AAAAAAAAAAI/AAAAAAAAAD4/Jxv9HFVgbcQ/photo.jpg?sz=128", "display_name": "Capn Jack", "link": "https://stackoverflow.com/users/6822886/capn-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 43881750, "answer_count": 1, "score": 0, "last_activity_date": 1494375643, "creation_date": 1494373606, "last_edit_date": 1494374252, "question_id": 43881481, "link": "https://stackoverflow.com/questions/43881481/strange-ssl-error-on-ruby-console", "title": "strange ssl error on ruby console", "body": "<p>Just getting started on Ruby and I can't get past the error posted below. Here's my code:</p>\n\n<pre><code>require 'HTTParty'\nrequire 'Nokogiri'\nrequire 'JSON'\nrequire 'Pry'\nrequire 'csv'\n\npage = HTTParty.get('https://newyork.craigslist.org/search/pet?s=0')\n\nPry.start(binding)\n</code></pre>\n\n<p>error in console:</p>\n\n<blockquote>\n  <p>C:/Ruby23/lib/ruby/2.3.0/net/http.rb:933:in <code>connect_nonblock':\n  SSL_connect returned=1 errno=0 state=error: certificate verify failed\n  (OpenSSL::SSL::SSLError)\n          from C:/Ruby23/lib/ruby/2.3.0/net/http.rb:933:in</code>connect'\n          from C:/Ruby23/lib/ruby/2.3.0/net/http.rb:863:in <code>do_start'\n          from C:/Ruby23/lib/ruby/2.3.0/net/http.rb:852:in</code>start'\n          from C:/Ruby23/lib/ruby/2.3.0/net/http.rb:1398:in <code>request'\n          from C:/Ruby23/lib/ruby/gems/2.3.0/gems/httparty-0.14.0/lib/httparty/request.rb:118:in\n  </code>perform'\n          from C:/Ruby23/lib/ruby/gems/2.3.0/gems/httparty-0.14.0/lib/HTTParty.rb:560:in\n  <code>perform_request'\n          from C:/Ruby23/lib/ruby/gems/2.3.0/gems/httparty-0.14.0/lib/HTTParty.rb:486:in\n  </code>get'\n          from C:/Ruby23/lib/ruby/gems/2.3.0/gems/httparty-0.14.0/lib/HTTParty.rb:598:in\n  <code>get'\n          from web_scraper.rb:7:in</code>'</p>\n</blockquote>\n\n<p>I've been online and replaced GlobalSignRootCA.pem and tried rerunning but no luck. Also tried uninstalling and reinstalling ruby and gems. </p>\n"}, {"tags": ["ruby", "rspec", "automation", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494371203, "post_id": 43881048, "comment_id": 74797279, "body": "No one is going to go read through your whole project on Github, your question needs to be self-contained."}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1494370799, "creation_date": 1494370799, "answer_id": 43881114, "question_id": 43881048, "link": "https://stackoverflow.com/questions/43881048/undefined-method-have-for-object0x007f997fabf778-nomethoderror/43881114#43881114", "title": "undefined method `have&#39; for #&lt;Object:0x007f997fabf778&gt; (NoMethodError)", "body": "<p>Capybara doesn't provide a <code>have</code> matcher, it provides a bunch of <code>have_&lt;something&gt;</code> matchers.  Assuming <code>@gymhomepage.find_your_local_gym.first_gym_location</code> returns a CSS selector then you would use</p>\n\n<pre><code>expect(@gymhomepage.find_your_local_gym).to have_css(@gymhomepage.find_your_local_gym.first_gym_location)\n</code></pre>\n\n<p>If instead <code>@gymhomepage.find_your_local_gym.first_gym_location</code> is a method that finds the element already scoped you just need to do</p>\n\n<pre><code>expect(@gymhomepage.find_your_local_gym.first_gym_location).to be\n</code></pre>\n\n<p>since it would already be guaranteed to be scoped into the <code>find_your_local_gym</code> element by calling it on it (Assuming you haven't fallen into the XPath trap - <a href=\"https://github.com/teamcapybara/capybara#beware-the-xpath--trap\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara#beware-the-xpath--trap</a>)</p>\n"}], "owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 43881114, "answer_count": 1, "score": 0, "last_activity_date": 1494370799, "creation_date": 1494370344, "question_id": 43881048, "link": "https://stackoverflow.com/questions/43881048/undefined-method-have-for-object0x007f997fabf778-nomethoderror", "title": "undefined method `have&#39; for #&lt;Object:0x007f997fabf778&gt; (NoMethodError)", "body": "<p>I am getting a undefined method error message for the 'have' method.</p>\n\n<p><code>expect(@gymhomepage.find_your_local_gym).to \n have(@gymhomepage.find_your_local_gym.first_gym_location)</code></p>\n\n<p>I am trying to assert if first_gym_location css is located within the find_your_local_gym section.</p>\n\n<p><a href=\"https://github.com/shafiqahmedmalik2010/we_are_friday\" rel=\"nofollow noreferrer\">Please see my framework on Github</a></p>\n\n<p>Does anybody have any suggestions?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1494369235, "post_id": 43880676, "comment_id": 74796689, "body": "try putting <code>playercount = nil</code> right before the loop. Otherwise when you define the variable inside the loop, the reference will be local to the loop only."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494369368, "post_id": 43880676, "comment_id": 74796728, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; including the linked pages. Your code doesn&#39;t run to demonstrate the problem, and, to help you we&#39;ll have to modify it. You need to help us help you by stripping the code to the bare minimum. <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> helps explain it."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1494369490, "post_id": 43880676, "comment_id": 74796759, "body": "See <a href=\"http://stackoverflow.com/questions/11495098/difference-between-various-variables-scopes-in-ruby\">difference-between-various-variables-scopes-in-ruby</a> as well"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494372665, "post_id": 43880676, "comment_id": 74797632, "body": "This sort of copy-paste style of coding isn&#39;t sustainable. Try and organize your data into arrays, hashes, or other data structures that aren&#39;t arbitrarily bounded. It will dramatically minimize how much code you produce and vastly decrease needless repetition."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494372734, "post_id": 43881097, "comment_id": 74797647, "body": "Good idea of using an array, but the heavy-handed approach of using a global is really out of line and not recommended, this is a very bad habit to get into. This could be encapsulated inside a simple class without that sort of mess, a simple instance variable like <code>@players</code> is then used and is neat, tidy, and self-explanatory."}, {"owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1494374796, "post_id": 43881097, "comment_id": 74798124, "body": "@tadman: Good point. I&#39;ve added another paragraph explaining that suggestion. That look better?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494382033, "post_id": 43881097, "comment_id": 74799723, "body": "Yeah, getting there. I took a stab at refactoring this but it quickly got out of hand, so I abandoned that effort. A proper <code>Player</code> and <code>Party</code> class really does help simplify this code, though."}], "tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": true, "score": 2, "last_activity_date": 1506532440, "last_edit_date": 1506532440, "creation_date": 1494370688, "answer_id": 43881097, "question_id": 43880676, "link": "https://stackoverflow.com/questions/43880676/undefined-method-variable/43881097#43881097", "title": "Undefined method: variable?", "body": "<p><code>playercount</code> is defined within the loop. Since it doesn't have a prefix, it's a local variable. In this case, it's only visible within the loop itself. It isn't visible to the method you defined at the top of the file. </p>\n\n<p>Almost certainly you don't want to define 8 (or more!) methods with virtually the same code. One solution is to take the party count as a method parameter:</p>\n\n<pre><code>def party(n)\n</code></pre>\n\n<p>Then you can define <code>partysetup</code> to call <code>party</code> thusly:</p>\n\n<pre><code>def partysetup(playercount)\n  # Setup stuff\n  party(playercount)\nend\n</code></pre>\n\n<p>There are several ways to write <code>party</code> to work for <code>n</code> players. It might not be the best solution, but I immediately thought of a recursive algorithm:</p>\n\n<pre><code>$players = [] \ndef party(n)\n  return if n == 0\n  party(n-1)\n\n  player = {}\n  puts \"What's player #{n}'s name?\"\n  player[:name] = gets.chomp\n  puts \"What's their AC?\"\n  player[:ac] = gets.chomp.to_i\n  puts \"Got it. What's their max HP?\"\n  player[:maxhp] = gets.chomp.to_i\n  $players[n] = player\nend\n</code></pre>\n\n<p>Notice I used a dollar sign (<code>$</code>) as a prefix in the <code>$players</code> array. That means it's a global variable which is available to all parts of the program. Generally you want to avoid global variables, but it can be pretty convenient to have access to things like the player data everywhere in your code.</p>\n\n<p>But Ruby offers options between global and local scope. An even better solution would be to create a class to manage your game and store the player data in an instance variable (<code>@players</code>). This gives you a lot more flexibility (maybe run multiple games at once?) and gets you into the habit of managing scope.</p>\n"}], "owner": {"reputation": 25, "user_id": 7983202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mi_ENSFheN4/AAAAAAAAAAI/AAAAAAAAB8U/4BSIEq0ZOCA/photo.jpg?sz=128", "display_name": "candistars", "link": "https://stackoverflow.com/users/7983202/candistars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 43881097, "answer_count": 1, "score": 1, "last_activity_date": 1506532440, "creation_date": 1494367954, "last_edit_date": 1494368117, "question_id": 43880676, "link": "https://stackoverflow.com/questions/43880676/undefined-method-variable", "title": "Undefined method: variable?", "body": "<p>I'm making myself and a few of my friends a combat assistant for Dungeons and Dragons, since most of the keeping track is pretty repetitive so I thought I could Ruby something up. It was going well but now I've hit a roadblock.</p>\n\n<p>This is my code</p>\n\n<pre><code>def party8\n  party7\n  puts \"Last one! What's your eighth player's name?\"\n  player8name = gets.chomp\n  puts \"What's their AC?\"\n  player8ac = gets.chomp.to_i\n  puts \"Got it. What's their max HP?\"\n  player8maxhp = gets.chomp.to_i\nend\n\ndef partysetup\n  puts \"hi\"\n  if 8 == playercount\n    party8\n  else\n    party1\n    end\n\nend\n\n#intro----------------------------------------------------------------------\n\n\nputs \"-Hello. I am l1fecount, the DM's combat assistant.\"\nputs \"-Before we begin, would you like to see in-depth information about me?\"\ninfoq = gets.chomp\ninfoq.downcase!\n\nif infoq == \"yes\"\n    puts \"-Very well, I'm glad to explain. I am l1fecount, a program designed to keep track of up to 5 types of mobs, with up to 10 \n    of each. I can also keep track of up to 8 players. I keep track of turn order, current HP vs max HP, CR, and armor \n    class. I am still very young, so please be patient with me. ^^; \"\nelse \n    puts \"-Right then.\"\n\nend\n\nputs \"-So, let's begin.\"\n\n#intro end----------------------------------------------------------------\n\n\n#party---------------------------------------------------------------------\n\nloop do\n  puts \"How many players today?\"  \n  playercount = gets.chomp.to_i\n    if 0 &gt;= playercount\n      puts \"You can't have no players in a party. That's not D&amp;D, that's you having no friends.\"\n      redo\n   elsif 8 &lt; playercount\n     puts \"Hey now, that's a huge party. I can only handle eight players at once.\"\n     redo\n    elsif 8 &gt;= playercount\n      break     \n   else \n     puts \"A number between 1 and 8, please.\"\n     redo\n   end\nend\n\npartysetup\n</code></pre>\n\n<p>`</p>\n\n<p>(party1-7 exists, but is identical to party 8, so I didn't include it for brevity's sake.)</p>\n\n<p>It runs just fine until I try to run partysetup. I added a puts statement so I could see if the method was being called, and it is, but I keep getting this:</p>\n\n<pre><code>    -Hello. I am l1fecount, the DM's combat assistant.\n-Before we begin, would you like to see in-depth information about me?\nno\n-Right then.\n-So, let's begin.\nHow many players today?\n8\nhi\nError: undefined method `playercount' for main:Object\n</code></pre>\n\n<p>I've tried looking for simple spelling errors, converting playercount to a string or a symbol, but nothing has fixed this issue. Help please?</p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "edited": false, "score": 0, "creation_date": 1494401438, "post_id": 43880806, "comment_id": 74806429, "body": "That was my original code but I cannot use the helper function in the same helper itself. It cannot find the function."}, {"owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "reply_to_user": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "edited": false, "score": 0, "creation_date": 1494402813, "post_id": 43880806, "comment_id": 74807293, "body": "I&#39;m not sure if I understood correctly, but you can easily add another function to <code>AgencyRightsHelper</code> and call it from <code>find_agency</code>. Can you show me your full Sinatra App class code?"}], "tags": [], "owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "is_accepted": false, "score": 0, "last_activity_date": 1494368747, "last_edit_date": 1495540496, "creation_date": 1494368747, "answer_id": 43880806, "question_id": 43880671, "link": "https://stackoverflow.com/questions/43880671/params-is-not-visible-in-some-sinatra-helper-functions/43880806#43880806", "title": "params is not visible in some sinatra helper functions", "body": "<p><code>find_agency</code> is a class method meaning it doesn't have access to attributes and methods of a specific instance, so you won't be able to access <code>params</code> of a given instance of a Sinatra Application class (see <a href=\"https://stackoverflow.com/questions/963378/ruby-rails-context-of-self-in-modules-and-libraries\">(Ruby,Rails) Context of SELF in modules and libraries...?</a>). Instead you could create a module like this:</p>\n\n<pre><code>module AgencyRightsHelper\n  def find_agency\n    @agency = Agency.find(params[:agency_id]) if params[:agency_id].present?\n  end\nend\n</code></pre>\n\n<p>You can then use this method e.g. in a <code>before</code> block in your Sinatra Application class.</p>\n"}], "owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494368747, "creation_date": 1494367918, "question_id": 43880671, "link": "https://stackoverflow.com/questions/43880671/params-is-not-visible-in-some-sinatra-helper-functions", "title": "params is not visible in some sinatra helper functions", "body": "<p>I have a problem with params visibility the function <code>find_agency</code>:</p>\n\n<p>Code: </p>\n\n<p>require 'sinatra/base'</p>\n\n<pre><code>module Sinatra\n  module AgencyRightsHelper\n    def self.find_agency\n      @agency = nil\n      if !params[:agency_id].nil? then\n        @agency = Agency.find(params[:agency_id]) and return\n      end\n    end\n\ndef before_get_agency rights_params\n  AgencyRightsHelper::find_agency\nend\n  end\n  helpers AgencyRightsHelper\nend\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>2017-05-10 00:01:26 - NoMethodError - undefined method `params' for Sinatra::AgencyRightsHelper:Module:\n    /Users/dali/perso/spacieux-be/app/helpers/agency_rights_helper.rb:18:in `before_get_agency'\n    /Users/dali/perso/spacieux-be/app/helpers/rights_helper.rb:61:in `before_action'\n</code></pre>\n\n<p>params is visible in other helpers function where no self is used but I feel obliged to use it the re-use a function in the helper itself.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdftk"], "owner": {"reputation": 11, "user_id": 7988597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe981180f2e57f9e7e01d435a18664bd?s=128&d=identicon&r=PG&f=1", "display_name": "Frustrated User", "link": "https://stackoverflow.com/users/7988597/frustrated-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1494367298, "creation_date": 1494367298, "question_id": 43880576, "link": "https://stackoverflow.com/questions/43880576/form-fielding-japanese-with-pdftk", "title": "Form-Fielding Japanese with PDFtk", "body": "<p>Good day everyone,</p>\n\n<p>I have an already existing application that form fields PDFs based on user input. It uses PDFtk and works great for English text, however we are now trying to make it work for Japanese text and I am having an issue where text does not display unless you click inside of a field. It appears to be displaying in a different font that the English text, but I don't know if that is the reason it isn't working.</p>\n\n<p>Does anyone know how to make the PDF recognize the characters that are present in the field and display them using PDFtk?</p>\n\n<p>If anyone needs more specifics or clarification I would be happy to provide more context.</p>\n\n<p>Best,</p>\n"}, {"tags": ["ruby", "linux"], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 1887028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1b9a173ce55ae23c65bd22ecb088a66?s=128&d=identicon&r=PG&f=1", "display_name": "Kryten", "link": "https://stackoverflow.com/users/1887028/kryten"}, "edited": false, "score": 0, "creation_date": 1494369597, "post_id": 43880666, "comment_id": 74796802, "body": "WOW! Not only did you provide an excellen solution you also helped me out by explaining it. Thanks so much!"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 553, "user_id": 1887028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1b9a173ce55ae23c65bd22ecb088a66?s=128&d=identicon&r=PG&f=1", "display_name": "Kryten", "link": "https://stackoverflow.com/users/1887028/kryten"}, "edited": false, "score": 0, "creation_date": 1494370556, "post_id": 43880666, "comment_id": 74797097, "body": "@pullsumo Glad to help. Happy coding!"}, {"owner": {"reputation": 553, "user_id": 1887028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1b9a173ce55ae23c65bd22ecb088a66?s=128&d=identicon&r=PG&f=1", "display_name": "Kryten", "link": "https://stackoverflow.com/users/1887028/kryten"}, "edited": false, "score": 0, "creation_date": 1494371023, "post_id": 43880666, "comment_id": 74797235, "body": "One last thing if you could. When I try to write the failure results to a file only the last item in the MOUNT_POINTS array is written to the file and the output is numeric for successes. I have <code>puts mounts.include?(v) ? &quot;#{k} exists&quot; : File.open(&quot;failures&quot;, &#39;w&#39;) { |file| file.write(&quot;#{k} doesn&#39;t exist\\n&quot;) }</code> and the output is <code>rootfs exists sysfs exists 24 24</code>"}, {"owner": {"reputation": 553, "user_id": 1887028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1b9a173ce55ae23c65bd22ecb088a66?s=128&d=identicon&r=PG&f=1", "display_name": "Kryten", "link": "https://stackoverflow.com/users/1887028/kryten"}, "edited": false, "score": 0, "creation_date": 1494432662, "post_id": 43880666, "comment_id": 74829282, "body": "I bow down before your awesomeness!"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1494377138, "last_edit_date": 1494377138, "creation_date": 1494367898, "answer_id": 43880666, "question_id": 43880545, "link": "https://stackoverflow.com/questions/43880545/checking-an-array-for-mount-points-in-ruby/43880666#43880666", "title": "Checking an array for mount points in ruby", "body": "<p>What about this:</p>\n\n<pre><code>MOUNT_POINTS = {\n  rootfs: \"rootfs / rootfs rw 0 0\\n\",\n  sysfs:  \"sysfs /sys sysfs rw,seclabel,nosuid,nodev,noexec,relatime 0 0\\n\"\n}\n\nmounts = []\nFile.foreach('/proc/mounts') { |line| mounts &lt;&lt; line }\n\nMOUNT_POINTS.each do |k, v|\n  puts mounts.include?(v) ? \"#{k} exists\" : \"#{k} doesn't exist\"\nend\n</code></pre>\n\n<p>Now you only need to add all your <em>mount points</em> to the <code>MOUNT_POINTS</code> hash and all of them will be iterated giving the desired output.</p>\n\n<p>This line</p>\n\n<pre><code>puts mounts.include?(v) ? \"#{k} exists\" : \"#{k} doesn't exist\"\n</code></pre>\n\n<p>evaluates <code>mounts.include?(v)</code> and <code>puts</code> a message concatenating <code>k</code> (where <code>k</code> is the <em>key</em> and <code>v</code> is the <em>value</em> of the current iteration in <code>MOUNT_POINTS</code> hash).</p>\n\n<p>So, for example, in the first iteration (in the current <code>MOUNT_POINTS</code> hash) that line will become:</p>\n\n<pre><code>puts mounts.include?(\"rootfs / rootfs rw 0 0\\n\") ? \"rootfs exists\" : \"rootfs doesn't exist\"\n</code></pre>\n\n<p>which uses the <em>ternary operator</em>, and its equivalent to</p>\n\n<pre><code>if mounts.include?(\"rootfs / rootfs rw 0 0\\n\")\n puts \"rootfs exists\"\nelse\n puts \"rootfs doesn't exist\"\nend\n</code></pre>\n\n<hr>\n\n<p>As a side note, you may notice that i also changed</p>\n\n<pre><code>File.foreach('/proc/mounts') do |line|\n  mounts.push line\nend\n</code></pre>\n\n<p>to</p>\n\n<pre><code>File.foreach('/proc/mounts') { |line| mounts &lt;&lt; line }\n</code></pre>\n\n<p>Both do exactly the same, you can use either one of them, its just a matter of style.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong> (per comments)</p>\n\n<p>To write into a file you could first open the file and then run the <code>MOUNT_POINTS</code> iteration, but be aware that using <code>w</code> option (as in your comment) will truncate the file every time you open it; if you just want to append more lines to the same file, then use <code>a</code> option (you can read about all <code>open</code> options <a href=\"http://ruby-doc.org/core-2.4.1/IO.html#method-c-new-label-IO+Open+Mode\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>So, you can use the <code>MOUNT_POINTS</code> iteration as a block for <code>File.open</code>:</p>\n\n<pre><code>File.open(\"failures\", 'a') do |file|\n  MOUNT_POINTS.each do |k, v|\n    mounts.include?(v) ? puts(\"#{k} exists\") : file &lt;&lt; \"#{k} doesn't exist\\n\"\n  end\nend\n</code></pre>\n\n<p>This code will first open the <code>failures</code> file, then iterate through <code>MOUNT_POINTS</code> and when <code>mounts.include?(v)</code> is <code>true</code> it will print <code>\"#{k} exists\"</code> on <em>console</em>, and if its <code>false</code> it will append (notice i used <code>a</code> option) <code>\"#{k} doesn't exist\\n\"</code> to the file; when the iteration ends, the file will then be closed.</p>\n\n<p>Now, what was wrong with your code? </p>\n\n<p>The line</p>\n\n<pre><code>puts mounts.include?(v) ? \"#{k} exists\" : File.open(\"failures\", 'w') { |file| file.write(\"#{k} doesn't exist\\n\") }\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>if mounts.include?(v)\n  puts \"#{k} exists\"\nelse\n  puts File.open(\"failures\", 'w') { |file| file.write(\"#{k} doesn't exist\\n\") }\nend\n</code></pre>\n\n<p>which reads as: \"<em>if current mount point exists in <code>mounts</code> then print in console</em> <strong>mount point name exists</strong> <em>, otherwise open a file, replace all its contents with</em> <strong>mount point name doesn't exist</strong> <em>, close the file and print in console whatever that method (i.e. <code>File.open()</code>) returns.\"</em></p>\n\n<p>In case you are wondering, \"<em>Whats going on with <code>puts</code>?</em>\" Remember that <code>puts</code> its just another method, so when using a ternary like</p>\n\n<pre><code>puts condition? ? \"it is true!\" : \"it is false..\"\n</code></pre>\n\n<p>You are just calling <code>puts</code> method and assigning a parameter depending con the evaluation of <code>condition?</code>, thus <code>puts \"it is true!\"</code>(or <code>puts(\"it is true!\")</code>) is executed when <code>condition</code> evaluates to <code>true</code>.</p>\n\n<p>Ok, i get it, so <em>what do <code>File.open()</code> <strong>is</strong> returning?</em> It returns the value of the block, in this case, the length written, hence the <code>24</code>.</p>\n\n<p>Now, after all this, you might ask? \"<em>So i could just change <code>w</code> to <code>a</code> in my code (so every time the file opens it doesn't get wiped out) and it will work?</em>\". And the answer would be <strong>yes</strong>, you could do that and it will work:</p>\n\n<pre><code>puts mounts.include?(v) ? \"#{k} exists\" : File.open(\"failures\", 'a') { |file| file.write(\"#{k} doesn't exist\\n\") }\n</code></pre>\n\n<p>So its fair to ask, <em>why all this trouble if you could get away with a simple tweak?</em> Well, three reasons come to mind:</p>\n\n<ol>\n<li>Its less efficient to open and close your file in each iteration.</li>\n<li>Printing numbers in console doesn't add any value (and may clutter it).</li>\n<li>It is harder to read.</li>\n</ol>\n\n<p>At the end choose whatever you (and your team) fill more comfortable with, and stick with it.</p>\n\n<p>Happy coding!</p>\n"}], "owner": {"reputation": 553, "user_id": 1887028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1b9a173ce55ae23c65bd22ecb088a66?s=128&d=identicon&r=PG&f=1", "display_name": "Kryten", "link": "https://stackoverflow.com/users/1887028/kryten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 43880666, "answer_count": 1, "score": 0, "last_activity_date": 1494377138, "creation_date": 1494367132, "question_id": 43880545, "link": "https://stackoverflow.com/questions/43880545/checking-an-array-for-mount-points-in-ruby", "title": "Checking an array for mount points in ruby", "body": "<p>Warning: Ruby noob</p>\n\n<p>I'm trying to gather a list of file system mounts and cross check that with what I'd expect to see in the list. So, if sysfs is mounted with the correct options then good, if not then bad. </p>\n\n<p>Current script is ugly but works. Is there a better way to do this? I have a dozen more mount points to check but don't want to have to include 60 lines of code to do that. </p>\n\n<p>What I have so far:</p>\n\n<pre><code>mounts = []\nFile.foreach('/proc/mounts') do |line|\n  mounts.push line\nend\n\nif mounts.include?(\"rootfs / rootfs rw 0 0\\n\")\n  puts 'rootfs exists'\nelse\n  puts \"rootfs doesn't exist\"\nend\n\n\nif mounts.include?(\"sysfs /sys sysfs rw,seclabel,nosuid,nodev,noexec,relatime 0 0\\n\")\n  puts 'sysfs exists'\nelse\n  puts \"sysfs doesn't exist\"\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "edited": false, "score": 0, "creation_date": 1494367482, "post_id": 43880498, "comment_id": 74796162, "body": "Are there any significant performance differences between regex vs unless?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "edited": false, "score": 0, "creation_date": 1494367679, "post_id": 43880498, "comment_id": 74796232, "body": "@freehunter my solution filters titles if they have bad words inside. The other solution filters the title only if it is a bad word."}, {"owner": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "edited": false, "score": 0, "creation_date": 1494369450, "post_id": 43880498, "comment_id": 74796751, "body": "Your regex is working perfectly for me. I&#39;m marking this as the answer, thanks for your help!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "edited": false, "score": 0, "creation_date": 1494403965, "post_id": 43880498, "comment_id": 74807979, "body": "@freehunter: Updated for a bit more robustness."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1494403932, "last_edit_date": 1494403932, "creation_date": 1494366871, "answer_id": 43880498, "question_id": 43880463, "link": "https://stackoverflow.com/questions/43880463/stringinclude-for-multiple-patterns/43880498#43880498", "title": "&#39;String#include?&#39; for multiple patterns", "body": "<p>You could use a regex:</p>\n\n<pre><code>/bad_word|naughty_word|another_bad_word/i\n</code></pre>\n\n<p>As an example:</p>\n\n<pre><code>\"Here's a bad_word\" =~ /bad_word|naughty_word/i\n# 9\n\"Here's a naughty_word\" =~ /bad_word|naughty_word/i\n# 9\n\"Here's a perfectly fine title\" =~ /bad_word|naughty_word/i\n# nil\n</code></pre>\n\n<p>One potential problem is that you'll get false positives:</p>\n\n<pre><code>\"He has skills\" =~ /bad_word|naughty_word|kill/i\n# 8\n</code></pre>\n\n<p>You could try to solve it with word boundaries:</p>\n\n<pre><code>\"He has skills\" =~ /\\b(bad_word|naughty_word|kill)\\b/i\n# nil\n</code></pre>\n\n<p>But then you'll get false negatives:</p>\n\n<pre><code>\"A kills B\" =~ /\\b(bad_word|naughty_word|kill)\\b/i\n# nil\n</code></pre>\n\n<p>You could try to solve it with :</p>\n\n<pre><code>\"A kills B\" =~ /\\b(bad_word|naughty_word|kill[a-z]{,2})\\b/i\n# 2\n\"He has skills\" =~ /\\b(bad_word|naughty_word|kill[a-z]{,2})\\b/i\n# nil\n</code></pre>\n\n<p>Still, the logic is so fuzzy with word detection that you cannot find a perfect solution to your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "edited": false, "score": 0, "creation_date": 1494367662, "post_id": 43880549, "comment_id": 74796226, "body": "Unless gives me the same results as &quot;if [&quot;bad_word&quot;].include? entry.title&quot;, it doesn&#39;t show any errors, but it doesn&#39;t print anything either."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1494367788, "post_id": 43880549, "comment_id": 74796272, "body": "You only check if the title is a bad word. Not if it includes a bad word."}, {"owner": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "edited": false, "score": 0, "creation_date": 1494368874, "post_id": 43880549, "comment_id": 74796589, "body": "To give a more concrete example, a headline might read &quot;16 year old killed in car crash&quot;. Pretty depressing, I want to filter that out. So anything that includes &quot;kill&quot; should be suppressed. &quot;Local man murdered during mugging&quot; is another example, anything that includes &quot;murder&quot; should be suppressed."}, {"owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1494369134, "post_id": 43880549, "comment_id": 74796666, "body": "I see, I must have misunderstood the question. In this case you can use a regexp as suggested by @EricDuminil which is probably the cleanest solution. You can also go for something like <code>[&quot;bad_word1&quot;, &quot;bad_word2&quot;].any? { |word| word.include?(entry.title) }</code>. As for the problem of not being able to print, try returning the <code>entry.title</code> itself instead of using <code>puts entry.title</code>, as <code>puts</code> always returns <code>nil</code>."}], "tags": [], "owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "is_accepted": false, "score": 0, "last_activity_date": 1494367606, "last_edit_date": 1494367606, "creation_date": 1494367161, "answer_id": 43880549, "question_id": 43880463, "link": "https://stackoverflow.com/questions/43880463/stringinclude-for-multiple-patterns/43880549#43880549", "title": "&#39;String#include?&#39; for multiple patterns", "body": "<p>Or you can simply print the title <em>unless</em> it is a bad word, just like in this snippet:</p>\n\n<pre><code>&lt;% unless [\"bad_word1\", \"bad_word2\"].include? entry.title %&gt;\n  # print the title\n&lt;% else %&gt;\n  # do sth else\n&lt;% end %&gt;\n</code></pre>\n\n<p>Perhaps even more straightforward (the <code>unless</code>-<code>else</code> logic may be confusing):</p>\n\n<pre><code>&lt;% if [\"bad_word1\", \"bad_word2\"].exclude? entry.title %&gt;\n  # print the title\n&lt;% else %&gt;\n  # do sth else\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 1367776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c780b0ae9a5fb7e278376b21cc2fe728?s=128&d=identicon&r=PG", "display_name": "freehunter", "link": "https://stackoverflow.com/users/1367776/freehunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43880498, "answer_count": 2, "score": -1, "last_activity_date": 1494403932, "creation_date": 1494366704, "last_edit_date": 1494395423, "question_id": 43880463, "link": "https://stackoverflow.com/questions/43880463/stringinclude-for-multiple-patterns", "title": "&#39;String#include?&#39; for multiple patterns", "body": "<p>From a text, how can I exclude certain keywords listed in an array?</p>\n\n<p>Here's my loop:</p>\n\n<pre><code>@entries.each do |entry|\nentry.title.include? (\"bad_word\")\n  (do nothing)\nelse\n  puts entry.title\n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>if [\"bad_word\"].include? entry.title\n</code></pre>\n\n<p>The first bit of code works as long as I only specify a single word. <code>\"bad_word\" || \"naughty_word\"</code> only picks up the first. The second bit of code seems to filter nothing.</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1494372900, "post_id": 43880460, "comment_id": 74797684, "body": "<a href=\"http://www.rubydoc.info/gems/watir-webdriver/0.6.11/Watir/Browser#goto-instance_method\" rel=\"nofollow noreferrer\"><code>goto</code></a> doesn&#39;t return <code>self</code>, so I don&#39;t see how you chain to it.  A method like <a href=\"http://www.rubydoc.info/gems/watir/Watir/Waitable#wait_until-instance_method\" rel=\"nofollow noreferrer\"><code>wait_until</code></a> can be chained (e.g. <code>wait_until_present.click</code>) because it does return <code>self</code>."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494407628, "post_id": 43880460, "comment_id": 74810349, "body": "Goto doesn&#39;t return the self, Goto return the uri, uri is the string So you can&#39;t call the method <code>textarea</code> there."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1494430901, "post_id": 43880460, "comment_id": 74828218, "body": "I would discourage this just on the basis of good coding practices regarding clean readable code.   There is no advantage (that I can see anyway) in doing that in a single line, and it makes it substantially more difficult to follow what the code does."}, {"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "reply_to_user": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1494433854, "post_id": 43880460, "comment_id": 74830012, "body": "@ChuckvanderLinden The line is relatively short and easy to follow. Since this would be a technique that I would use as a one-off in several scripts, one line makes it easier to copy around and to ignore in the context of the rest of the script."}], "answers": [{"comments": [{"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1494422099, "post_id": 43889546, "comment_id": 74821261, "body": "Though this is an ingenious solution, then we\u2019re just moving the extra lines somewhere else, which somewhat defeats the purpose. Will still upvote since it\u2019s technically correct."}], "tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 1, "last_activity_date": 1494411285, "creation_date": 1494411285, "answer_id": 43889546, "question_id": 43880460, "link": "https://stackoverflow.com/questions/43880460/chain-watir-commands/43889546#43889546", "title": "Chain Watir commands", "body": "<p>Though <code>goto</code> method does not support chaining you can make your custom method for <code>Watir::Browser</code> like following </p>\n\n<pre><code>class Watir::Browser\n  def chain_goto(url)\n    goto(url)\n    self\n  end\nend\n</code></pre>\n\n<p>Then you can use that like\n    <code>Watir::Browser.new(:firefox).chain_goto('http://www.useragentstring.com/').textarea.text</code>. </p>\n\n<p>So the complete code will be like</p>\n\n<pre><code>require 'watir'\n\nclass Watir::Browser\n  def chain_goto(url)\n    goto(url)\n    self\n  end\nend\n\nb = Watir::Browser.new(:firefox).chain_goto('http://www.useragentstring.com/'.textarea.text\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1494421997, "post_id": 43893017, "comment_id": 74821169, "body": "This is beautiful. Thank you. I\u2019ll accept the answer, though it seems like I won\u2019t be able to use it, since I also need to <code>.close</code> the browser. I can nest calls to <code>tap</code> and it works, but then <code>.close</code> will return <code>true</code>, not the <code>agent</code>. Still worth it to learn about <code>tap</code>."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 1, "creation_date": 1494428409, "post_id": 43893017, "comment_id": 74826375, "body": "Just out of curiosity what is the reason for wanting a single-line? If you just want to see a single line in your file, you could just take your original multiple line answer and put them on a single line separated by semi-colons."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1494431083, "post_id": 43893017, "comment_id": 74828346, "body": "Extraordinary Justin Ko !"}, {"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1494433988, "post_id": 43893017, "comment_id": 74830104, "body": "@JustinKo See <a href=\"https://stackoverflow.com/questions/43880460/chain-watir-commands?noredirect=1#comment74830012_43880460\">other comment</a>. I was also interested in this for learning purposes. In that regard it was a huge success, since I learned something new about ruby itself, not just watir."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 3, "last_activity_date": 1494420574, "creation_date": 1494420574, "answer_id": 43893017, "question_id": 43880460, "link": "https://stackoverflow.com/questions/43880460/chain-watir-commands/43893017#43893017", "title": "Chain Watir commands", "body": "<p>You can make anything chain-able by using the <code>tap</code> method. As described by the <a href=\"https://ruby-doc.org/core-2.4.1/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Ruby Docs</a>:</p>\n\n<blockquote>\n  <p>Yields self to the block, and then returns self. The primary purpose\n  of this method is to \u201ctap into\u201d a method chain, in order to perform\n  operations on intermediate results within the chain.</p>\n</blockquote>\n\n<p>That means that you can use <code>tap</code> to call <code>goto</code> and still have the <code>Watir::Browser</code> instance for calling <code>textarea</code>:</p>\n\n<pre><code>agent = Watir::Browser.new(:chrome).tap{ |b| b.goto('http://www.useragentstring.com/') }.textarea.text\n</code></pre>\n"}], "owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 43893017, "answer_count": 2, "score": 0, "last_activity_date": 1494420574, "creation_date": 1494366695, "question_id": 43880460, "link": "https://stackoverflow.com/questions/43880460/chain-watir-commands", "title": "Chain Watir commands", "body": "<p>As an example, I\u2019d like to get my browser\u2019s user agent as output from <a href=\"http://www.useragentstring.com/\" rel=\"nofollow noreferrer\">http://www.useragentstring.com/</a> and store it in a variable. Currently, I can do it in multiple lines</p>\n\n<pre><code>require 'watir'\nb = Watir::Browser.new(:chrome)\nb.goto('http://www.useragentstring.com/')\nagent = b.textarea.text\nb.close\n</code></pre>\n\n<p>Ideally, I\u2019d like to do it in a single line. Something like</p>\n\n<pre><code>require 'watir'\nagent = Watir::Browser.new(:chrome).goto('http://www.useragentstring.com/').textarea.text\n</code></pre>\n\n<p>But that fails with</p>\n\n<pre><code>NoMethodError: undefined method `textarea' for \"http://www.useragentstring.com/\":String`\n</code></pre>\n\n<p>So while the <code>goto</code> part works, the rest doesn\u2019t. Since <code>watir</code> lets us do things like <code>wait_until_present.click</code>, I\u2019m hoping there\u2019s some way to chain these methods as well. Is this even possible?</p>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 1, "creation_date": 1494365919, "post_id": 43880192, "comment_id": 74795584, "body": "Did it occur to you to use the length requirement to ask a question?"}, {"owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "reply_to_user": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1494368605, "post_id": 43880192, "comment_id": 74796509, "body": "@JoshLee The question is right there in the title. Did you not see it?"}, {"owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "edited": false, "score": 0, "creation_date": 1494368692, "post_id": 43880192, "comment_id": 74796535, "body": "There&#39;s nothing <i>to</i> search. Google does not accept <code>||=</code> as a search term."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494368697, "post_id": 43880192, "comment_id": 74796539, "body": "Titles aren&#39;t questions, instead they introduce the subject. Your question is poorly asked and shows very little effort. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages would be good reading."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1494368895, "post_id": 43880192, "comment_id": 74796599, "body": "Google does if you put it in quotes. <a href=\"https://www.google.com/search?q=site:stackoverflow.com+ruby+%2B+%22%7C%7C=%22+block\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}, {"owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "edited": false, "score": 0, "creation_date": 1494369142, "post_id": 43880192, "comment_id": 74796668, "body": "The search returns nothing relevant, so apparently nobody has documented this usage."}], "answers": [{"comments": [{"owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "edited": false, "score": 0, "creation_date": 1494368880, "post_id": 43880402, "comment_id": 74796592, "body": "But what about the block? I found some code that puts a block after the assignment (as shown in my example), which makes absolutely no sense and isn&#39;t documented in any place that I know of. AFAIK, it should be a syntax error. In fact, the question you linked to has no answers that discuss putting a block after the <code>||=</code> assignment."}, {"owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "reply_to_user": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "edited": false, "score": 0, "creation_date": 1494369437, "post_id": 43880402, "comment_id": 74796743, "body": "The block is simply a &quot;special type of argument&quot; passed to a method (in your example the method is <code>some_other_var</code>); you don&#39;t pass a block to a variable. The method with a passed block will be evaluated and its return value will be assigned to <code>some_var</code>."}, {"owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "edited": false, "score": 0, "creation_date": 1494369681, "post_id": 43880402, "comment_id": 74796823, "body": "Damn Ruby and its confusing syntax! I failed to remember that <code>some_other_var</code> can actually be a method call. Thanks."}], "tags": [], "owner": {"reputation": 136, "user_id": 7965058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e558fe9c780c902253394084fab108?s=128&d=identicon&r=PG&f=1", "display_name": "xlts", "link": "https://stackoverflow.com/users/7965058/xlts"}, "is_accepted": true, "score": 1, "last_activity_date": 1494366452, "last_edit_date": 1495540496, "creation_date": 1494366452, "answer_id": 43880402, "question_id": 43880192, "link": "https://stackoverflow.com/questions/43880192/what-does-it-even-mean-to-put-a-block-after-an-assignment/43880402#43880402", "title": "What does it even mean to put a block after an assignment?", "body": "<p>Such code will be evaluated just like any other with a <code>||=</code> operator. If <code>some_var</code> is <code>nil</code> or <code>false</code> the function will run and return value will be assigned to <code>some_var</code>; otherwise the value of <code>some_var</code> will be returned. See <a href=\"https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby\">What does ||= (or-equals) mean in Ruby?</a> for reference.</p>\n"}], "owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43880402, "answer_count": 1, "score": -3, "last_activity_date": 1494366452, "creation_date": 1494365523, "question_id": 43880192, "link": "https://stackoverflow.com/questions/43880192/what-does-it-even-mean-to-put-a-block-after-an-assignment", "title": "What does it even mean to put a block after an assignment?", "body": "<p>The following code snippet fully describes the problem, but I have to type all these extra words in to get SO to let me post it.</p>\n\n<pre><code>some_var ||= some_other_var do\n   # Does this run every time, or only sometimes?\n   stuff\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1494362711, "post_id": 43879481, "comment_id": 74794087, "body": "What&#39;s your planned use case for something like this?  You can overload operators in Ruby so you <i>could</i> do this if you wanted to, but it&#39;s unclear from this description why it&#39;d make sense.  Nominally, invocation of methods is done so with tacit knowledge; this feels like it&#39;s masking that.  It feels different than the syntactic sugar for mathematical operators."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 3, "creation_date": 1494362782, "post_id": 43879481, "comment_id": 74794128, "body": "@Sebasti&#225;nPalma: very common in builder-like objects. Line after line of <code>query = query.where(...)</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494362818, "post_id": 43879481, "comment_id": 74794149, "body": "Thanks! @SergioTulentsev."}], "answers": [{"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1494363666, "post_id": 43879589, "comment_id": 74794556, "body": "I&#39;d word this more like &quot;only certain &#39;compound operators&#39; are allowable by Ruby syntax&quot; since there&#39;s no reason <code>+=</code> couldn&#39;t have been used this way. The reason <code>.=</code> wouldn&#39;t work is because <code>.</code> isn&#39;t a function, no? Or am I over-simplifying a bit too much?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1494363784, "post_id": 43879589, "comment_id": 74794615, "body": "@DaveNewton Not only because it&#39;s not a function/method/message. The operator must also be recognized by the parser. This means no dynamic stuff (maybe this wasn&#39;t even a  requirement? Am I over-generalizing the problem here? :) )"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1494364172, "post_id": 43879589, "comment_id": 74794798, "body": "Probably ;) But yes, I borked regarding &quot;because it isn&#39;t a function&quot; which obviously isn&#39;t the only reason :/"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 6, "last_activity_date": 1494363845, "last_edit_date": 1494363845, "creation_date": 1494362877, "answer_id": 43879589, "question_id": 43879481, "link": "https://stackoverflow.com/questions/43879481/does-ruby-have-something-similar-to-like/43879589#43879589", "title": "Does Ruby have something similar to .=, like +=?", "body": "<p>Nope, ruby does not have anything like this. Only certain \"compound operators\" are allowed by Ruby syntax and this operator is not among them.</p>\n\n<p>However, there might be workarounds under specific circumstances (not this one, though). If, say, you had an array, then instead of</p>\n\n<pre><code>ary = ary.select { ... } if foo\nary = ary.select { ... } if bar\nary = ary.compact\n</code></pre>\n\n<p>you'd be able to do</p>\n\n<pre><code>ary.select! { ... } if foo\nary.select! { ... } if bar\nary.compact!\n</code></pre>\n\n<p>(<em>this can have unintended consequences, yes, because in-place mutation is dangerous in general. But in some cases it is desirable. Don't do it to shorten your code.</em>)</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494363996, "post_id": 43879842, "comment_id": 74794713, "body": "I strongly advocate for trailing dot convention of multiline chaining. The other way is just wrong! (REPL-friendliness is hard to overestimate)"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494364218, "post_id": 43879842, "comment_id": 74794820, "body": "@SergioTulentsev Except that the period at the end throws off my Smalltalk brain."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1494364751, "post_id": 43879842, "comment_id": 74795052, "body": "Also, when adding a new chain on a new line, the code diff reads nicer with a leading dot."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494364897, "post_id": 43879842, "comment_id": 74795117, "body": "Yes-yes, leading dot <i>looks</i> a bit nicer, but you never know when you will want to paste it into a console. Utility trumps aesthetics here (IMHO, obviously)"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1494365416, "post_id": 43879842, "comment_id": 74795362, "body": "@SergioTulentsev <i>q.e.d</i> regarding the style considerations :)"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 6, "last_activity_date": 1494366659, "last_edit_date": 1494366659, "creation_date": 1494363836, "answer_id": 43879842, "question_id": 43879481, "link": "https://stackoverflow.com/questions/43879481/does-ruby-have-something-similar-to-like/43879842#43879842", "title": "Does Ruby have something similar to .=, like +=?", "body": "<p>Ruby is able to detect line continuations automatically:</p>\n\n<pre><code>query = Model\n  .where(name: 'John')\n  .select(:first_name)\n</code></pre>\n\n<p>This is equivalent to this (with the dots at the end):</p>\n\n<pre><code>query = Model.\n  where(name: 'John').\n  select(:first_name)\n</code></pre>\n\n<p>Note that due to the way lines are evaluated in IRB, only the second syntax (with the dots at the end of the line) works as intended there. With the first example, IRB would evaluate the line as soon as it sees the newline. In a Ruby script, both options work quite well.</p>\n\n<p>There apply different style considerations here, with people having different opinions on which one is best.</p>\n\n<p>Generally, this approach requires that the combined line is syntactically equivalent to a single line. You can't use inline conditions that way. This would thus be invalid syntax:</p>\n\n<pre><code>query = Model\n  .where(name: 'John') if some_condition\n  .select(:first_name)\n</code></pre>\n\n<p>If you require these conditions, it is just fine to assign intermediate results to a local variable as shown by Sergio Tulentsev in his answer. You'll often see this and it is not a code smell at all.</p>\n"}], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 2, "accepted_answer_id": 43879589, "answer_count": 2, "score": 4, "last_activity_date": 1494366659, "creation_date": 1494362491, "question_id": 43879481, "link": "https://stackoverflow.com/questions/43879481/does-ruby-have-something-similar-to-like", "title": "Does Ruby have something similar to .=, like +=?", "body": "<p>Since one can do:</p>\n\n<pre><code>a += 1\n</code></pre>\n\n<p>I was thinking whether one can also do something similar to:</p>\n\n<pre><code>a .= 1\n</code></pre>\n\n<p>The use case would be, for example, with ActiveRecord:</p>\n\n<pre><code>query = Model\nquery .= where(name: 'John') # instead of query = query.where(name: 'John')\n</code></pre>\n\n<p>Is this possible somehow?</p>\n"}, {"tags": ["ruby", "regex", "lookahead", "negative-lookahead"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1494361022, "post_id": 43878890, "comment_id": 74793149, "body": "I think you want a <i>negative lookbehind</i> e.g. <code>(?&lt;!bad)</code>. See the <a href=\"http://stackoverflow.com/documentation/regex/639/lookahead-and-lookbehind#t=201705092018125034562&amp;a=syntax\">SO docs</a>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1494361426, "post_id": 43878890, "comment_id": 74793400, "body": "Can there be arbitrary number of spaces between <code>bad</code> and <code>apple</code>? A lookbehind in Ruby is fixed-width, and <a href=\"https://regex101.com/r/gU28vv/2\" rel=\"nofollow noreferrer\"><code>&#47;(^|(?&lt;!\\bbad)\\s)#{Regexp.escape(word)}(?!\\S)&#47;i</code></a> may not work properly in all cases. Actually, the fact that you are using whitespace as word boundary hints at the fact you can do without a regex here."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1494364115, "post_id": 43878890, "comment_id": 74794767, "body": "You might still use a lookahead, but the expression will look even uglier: <a href=\"https://regex101.com/r/gU28vv/3\" rel=\"nofollow noreferrer\"><code>(^\\s*|\\s(?!bad\\s)\\S+\\s+)apple(?!\\S)</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1494362364, "post_id": 43879206, "comment_id": 74793884, "body": "@WiktorStribi\u017cew: I am aware of that Sir. But since OP didn&#39;t mentioned multiple spaces I am assuming it&#39;s only one."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1494363169, "post_id": 43879206, "comment_id": 74794313, "body": "Wiktor is right, though.  I wanted to simplify my example, so I only put one space, but when I try multiple spaces -- /(?&lt;!bad\\s+)#{Regexp.escape(word)}(\\s|$)/i , I get an &quot;invalid pattern in look-behind&quot; error."}, {"owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1494363566, "post_id": 43879206, "comment_id": 74794515, "body": "@Dave: Yes, that&#39;s because fixed width lookbehind is not supported. Please update your post with multiple space requirements."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1494363870, "post_id": 43879206, "comment_id": 74794650, "body": "@engineersmnky: Of course one can pre-process the string. That is still not a universal solution (what if there can be punctuation or symbols between the two words?), but is an potential workaround for the current scenario."}], "tags": [], "owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "is_accepted": false, "score": 1, "last_activity_date": 1494361423, "creation_date": 1494361423, "answer_id": 43879206, "question_id": 43878890, "link": "https://stackoverflow.com/questions/43878890/unable-to-get-my-ruby-negative-look-ahead-regex-to-work-properly/43879206#43879206", "title": "Unable to get my Ruby negative look ahead regex to work properly", "body": "<p>Consider using negative lookbehind like this <code>(?&lt;!bad\\s)apple</code> will look for <em>apple</em> only when it's not preceded by <code>bad</code>. Note the space after <code>bad</code>.</p>\n\n<p><strong><a href=\"https://regex101.com/r/Iq0X6J/1/\" rel=\"nofollow noreferrer\">Regex101 Demo</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1494361436, "creation_date": 1494361436, "answer_id": 43879207, "question_id": 43878890, "link": "https://stackoverflow.com/questions/43878890/unable-to-get-my-ruby-negative-look-ahead-regex-to-work-properly/43879207#43879207", "title": "Unable to get my Ruby negative look ahead regex to work properly", "body": "<p>I tryied it and it's a look-behind like @sagarpandy82 said</p>\n\n<pre><code>word_regex = /(?&lt;!bad)(^|\\s)#{Regexp.escape(\"apple\")}(\\s|$)/i\na = \"good apple\".match(word_regex)\nb = \"bad apple\".match(word_regex)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1494366488, "creation_date": 1494366488, "answer_id": 43880414, "question_id": 43878890, "link": "https://stackoverflow.com/questions/43878890/unable-to-get-my-ruby-negative-look-ahead-regex-to-work-properly/43880414#43880414", "title": "Unable to get my Ruby negative look ahead regex to work properly", "body": "<p>But, wait, negative lookaheads can be variable length!</p>\n\n<pre><code>R = /\n    \\b                 # match word break\n    #{'apples'.reverse} # match 'elppa'\n    \\b                 # match word break\n    (?!                # begin a negative lookahead\n      \\s+              # match one or more whitespaces\n      #{'bad'.reverse} # match 'dab'\n      \\b               # match word break\n    )                  # close negative lookaheaad\n    /ix                # case-indifferent and free-spacing regex definition modes\n#=&gt; /\n    \\b                 # match word break\n    elppa              # match 'selppa'\n    \\b                 # match word break\n    (?!                # begin a negative lookahead\n      \\s+              # match one or more whitespaces\n      dab              # match 'dab'\n      \\b               # match word break\n    )                  # close negative lookaheaad\n    /x\n\ndef avoid_bad_apples(str)\n  str.reverse.match? R\nend\n\navoid_bad_apples(\"good apples\")           #=&gt; true\navoid_bad_apples(\"Simbad apples\")         #=&gt; true\navoid_bad_apples(\"bad pears\")             #=&gt; false\navoid_bad_apples(\"bad apples\")            #=&gt; false\navoid_bad_apples(\"bad    apples\")         #=&gt; false\navoid_bad_apples(\"good applesauce\")       #=&gt; false\navoid_bad_apples(\"Very bad apples. BAD!\") #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 43880414, "answer_count": 3, "score": 0, "last_activity_date": 1494366488, "creation_date": 1494360103, "last_edit_date": 1494363868, "question_id": 43878890, "link": "https://stackoverflow.com/questions/43878890/unable-to-get-my-ruby-negative-look-ahead-regex-to-work-properly", "title": "Unable to get my Ruby negative look ahead regex to work properly", "body": "<p>I'm using Ruby 2.4.  I want to search for a word in a string, but only if another word doesn't come before it.  I thought I could use this negative look-ahead, as shown below, but I'm still getting a match on the phrase \"bad apple\" when I don't want to complete the match if the word \"bad\" is before \"apple\".  It is NOT a given that there only be one space between the word \"bad\" and the word \"apple.\"</p>\n\n<pre><code>2.4.0 :014 &gt; word_regex = /(?!.*bad)(^|\\s)#{Regexp.escape(word)}(\\s|$)/i\n =&gt; /(?!.*bad)(^|\\s)apple(\\s|$)/i\n2.4.0 :015 &gt; \"good apple\".match(word_regex)\n =&gt; #&lt;MatchData \" apple\" 1:\" \" 2:\"\"&gt;\n2.4.0 :016 &gt; \"bad apple\".match(word_regex)\n =&gt; #&lt;MatchData \" apple\" 1:\" \" 2:\"\"&gt;\n</code></pre>\n\n<p>What else am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "capistrano", "capistrano3"], "comments": [{"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1494362471, "post_id": 43878840, "comment_id": 74793953, "body": "Do you have bundler installed on the machine you are deploying to?"}, {"owner": {"reputation": 620, "user_id": 2243320, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e0accc0a9f0b38c1aed5c668875b4868?s=128&d=identicon&r=PG", "display_name": "Nicoara Talpes", "link": "https://stackoverflow.com/users/2243320/nicoara-talpes"}, "reply_to_user": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1494423935, "post_id": 43878840, "comment_id": 74822732, "body": "yes, running &quot;bundler -v&quot; shows Bundler version 1.14.6 on both machines."}, {"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "edited": false, "score": 1, "creation_date": 1494555101, "post_id": 43878840, "comment_id": 74889497, "body": "Could you post your capfile and deploy.rb? Anonymized appropriately."}, {"owner": {"reputation": 620, "user_id": 2243320, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e0accc0a9f0b38c1aed5c668875b4868?s=128&d=identicon&r=PG", "display_name": "Nicoara Talpes", "link": "https://stackoverflow.com/users/2243320/nicoara-talpes"}, "reply_to_user": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "edited": false, "score": 0, "creation_date": 1494877383, "post_id": 43878840, "comment_id": 75004478, "body": "@will_in_wi added the corresponding files"}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 2243320, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e0accc0a9f0b38c1aed5c668875b4868?s=128&d=identicon&r=PG", "display_name": "Nicoara Talpes", "link": "https://stackoverflow.com/users/2243320/nicoara-talpes"}, "edited": false, "score": 0, "creation_date": 1494424811, "post_id": 43879625, "comment_id": 74823410, "body": "i am not sure how to point to that newer version. on both machines:  ruby -v shows: ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux] and  rbenv -v shows: rbenv 1.1.0-2-g4f8925a. going locally on ~./rbenv/versions/ shows just 2.4.0 . where did i set RBENV_VERSION=&quot;2.3.1&quot; ? thanks"}, {"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "edited": false, "score": 1, "creation_date": 1494894988, "post_id": 43879625, "comment_id": 75010492, "body": "In your Capfile, you have the line set :rbenv_ruby, &#39;2.3.1&#39;. change that to the version you want."}, {"owner": {"reputation": 620, "user_id": 2243320, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e0accc0a9f0b38c1aed5c668875b4868?s=128&d=identicon&r=PG", "display_name": "Nicoara Talpes", "link": "https://stackoverflow.com/users/2243320/nicoara-talpes"}, "reply_to_user": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "edited": false, "score": 0, "creation_date": 1494957676, "post_id": 43879625, "comment_id": 75045145, "body": "@will_in_wi this fixed it, but right afterwards there was a new bug. <a href=\"https://stackoverflow.com/questions/44008509/rake-exit-status-139\" title=\"rake exit status 139\">stackoverflow.com/questions/44008509/rake-exit-status-139</a>. do you know an easier way to connect a database to a rails app than this tutorial? thanks"}], "tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": true, "score": 2, "last_activity_date": 1494363000, "creation_date": 1494363000, "answer_id": 43879625, "question_id": 43878840, "link": "https://stackoverflow.com/questions/43878840/cap-deploy-rbenv-bundle-command-not-found/43879625#43879625", "title": "cap deploy + rbenv: bundle: command not found", "body": "<p>It looks like <code>rbenv</code> is set to run Ruby 2.3.1. Several places in the log you have <code>RBENV_VERSION=\"2.3.1\"</code>. According to <a href=\"https://github.com/rbenv/rbenv#installing-ruby-gems\" rel=\"nofollow noreferrer\">the rbenv documentation</a>, you can find out how that was set with <code>rbenv version</code>. If you want to test Ruby 2.4.0, you'll need to point to that version. Alternatively, if you really mean to run on 2.3.1, you'll need to install bundler. </p>\n"}], "owner": {"reputation": 620, "user_id": 2243320, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e0accc0a9f0b38c1aed5c668875b4868?s=128&d=identicon&r=PG", "display_name": "Nicoara Talpes", "link": "https://stackoverflow.com/users/2243320/nicoara-talpes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1359, "favorite_count": 0, "accepted_answer_id": 43879625, "answer_count": 1, "score": 1, "last_activity_date": 1494611322, "creation_date": 1494359833, "last_edit_date": 1494611322, "question_id": 43878840, "link": "https://stackoverflow.com/questions/43878840/cap-deploy-rbenv-bundle-command-not-found", "title": "cap deploy + rbenv: bundle: command not found", "body": "<p>I am following <a href=\"https://gorails.com/deploy/ubuntu/16.04\" rel=\"nofollow noreferrer\">https://gorails.com/deploy/ubuntu/16.04</a></p>\n\n<p>I am running : \"bundle exec cap production deploy\"\nand getting the following error:</p>\n\n<pre><code>    \u2714 10 deploy@107.170.84.18 0.289s\n00:21 bundler:install\n      01 $HOME/.rbenv/bin/rbenv exec bundle install --path /home/deploy/deploy_test1/shared/bundle --without development test --deployment --q\u2026\n      01 rbenv: bundle: command not found\n      01\n      01 The `bundle' command exists in these Ruby versions:\n      01   2.4.0\n      01\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as deploy@107.170.84.18: bundle exit status: 127\nbundle stdout: Nothing written\nbundle stderr: rbenv: bundle: command not found\n\nThe `bundle' command exists in these Ruby versions:\n  2.4.0\n\nSSHKit::Command::Failed: bundle exit status: 127\nbundle stdout: Nothing written\nbundle stderr: rbenv: bundle: command not found\n\nThe `bundle' command exists in these Ruby versions:\n  2.4.0\n\nTasks: TOP =&gt; deploy:updated =&gt; bundler:install\n(See full trace by running task with --trace)\nThe deploy has failed with an error: Exception while executing as deploy@107.170.84.18: bundle exit status: 127\nbundle stdout: Nothing written\nbundle stderr: rbenv: bundle: command not found\n\nThe `bundle' command exists in these Ruby versions:\n  2.4.0\n\n\n** DEPLOY FAILED\n** Refer to log/capistrano.log for details. Here are the last 20 lines:\n\n\n DEBUG [3de26178] Command: ( export RBENV_ROOT=\"$HOME/.rbenv\" RBENV_VERSION=\"2.3.1\" ; /usr/bin/env ln -s /home/deploy/deploy_test1/shared/public/assets /home/deploy/deploy_test1/releases/20170509194018/public/assets )\n\n  INFO [3de26178] Finished in 0.289 seconds with exit status 0 (successful).\n\n DEBUG [25920183] Running if test ! -d /home/deploy/deploy_test1/releases/20170509194018; then echo \"Directory does not exist '/home/deploy/deploy_test1/releases/20170509194018'\" 1&gt;&amp;2; false; fi as deploy@107.170.84.18\n\n DEBUG [25920183] Command: if test ! -d /home/deploy/deploy_test1/releases/20170509194018; then echo \"Directory does not exist '/home/deploy/deploy_test1/releases/20170509194018'\" 1&gt;&amp;2; false; fi\n\n DEBUG [25920183] Finished in 0.291 seconds with exit status 0 (successful).\n\n DEBUG [7b4c3ff7] Running $HOME/.rbenv/bin/rbenv exec bundle check --path /home/deploy/deploy_test1/shared/bundle as deploy@107.170.84.18\n\n DEBUG [7b4c3ff7] Command: cd /home/deploy/deploy_test1/releases/20170509194018 &amp;&amp; ( export RBENV_ROOT=\"$HOME/.rbenv\" RBENV_VERSION=\"2.3.1\" ; $HOME/.rbenv/bin/rbenv exec bundle check --path /home/deploy/deploy_test1/shared/bundle )\n\n DEBUG [7b4c3ff7]   rbenv: bundle: command not found\n\n DEBUG [7b4c3ff7]   \n\nThe `bundle' command exists in these Ruby versions:\n\n DEBUG [7b4c3ff7]     2.4.0\n\n DEBUG [7b4c3ff7]   \n\n DEBUG [7b4c3ff7] Finished in 0.399 seconds with exit status 127 (failed).\n\n  INFO [3bbf2dfd] Running $HOME/.rbenv/bin/rbenv exec bundle install --path /home/deploy/deploy_test1/shared/bundle --without development test --deployment --quiet as deploy@107.170.84.18\n\n DEBUG [3bbf2dfd] Command: cd /home/deploy/deploy_test1/releases/20170509194018 &amp;&amp; ( export RBENV_ROOT=\"$HOME/.rbenv\" RBENV_VERSION=\"2.3.1\" ; $HOME/.rbenv/bin/rbenv exec bundle install --path /home/deploy/deploy_test1/shared/bundle --without development test --deployment --quiet )\n\n DEBUG [3bbf2dfd]   rbenv: bundle: command not found\n\n DEBUG [3bbf2dfd]   \n\nThe `bundle' command exists in these Ruby versions:\n\n DEBUG [3bbf2dfd]     2.4.0\n\n DEBUG [3bbf2dfd]\n</code></pre>\n\n<p>\"gem list\" shows : bundler (1.14.6) on both machines, as well as ruby 2.4.0 on both my production machine as well as the server. \nHow to proceed?</p>\n\n<p>I am posting my Capfile:</p>\n\n<pre><code># Load DSL and set up stages\nrequire \"capistrano/setup\"\n\n# Include default deployment tasks\nrequire \"capistrano/deploy\"\n\n# Load the SCM plugin appropriate to your project:\n#\n# require \"capistrano/scm/hg\"\n# install_plugin Capistrano::SCM::Hg\n# or\n# require \"capistrano/scm/svn\"\n# install_plugin Capistrano::SCM::Svn\n# or\nrequire \"capistrano/scm/git\"\ninstall_plugin Capistrano::SCM::Git\n\n# If you are using rbenv add these lines:\nrequire 'capistrano/rbenv'\nset :rbenv_type, :user\nset :rbenv_ruby, '2.3.1'\n\nrequire 'capistrano/bundler'\nrequire 'capistrano/rails'\nrequire 'capistrano/passenger'\n\n# Load custom tasks from `lib/capistrano/tasks` if you have any defined\nDir.glob(\"lib/capistrano/tasks/*.rake\").each { |r| import r }\n</code></pre>\n\n<p>my deploy.rb:</p>\n\n<pre><code># config valid only for current version of Capistrano\nlock \"3.8.1\"\n\nset :application, \"deploy_test1\"\nset :repo_url, \"git@bitbucket.org:confidentialname/deploy_test1.git\"\n\nset :deploy_to, '/home/deploy/deploy_test1'\n\n#append :linked_files, \"config/database.yml\", \"config/secrets.yml\"\nappend :linked_dirs, \"log\", \"tmp/pids\", \"tmp/cache\", \"tmp/sockets\", \"vendor/bundle\", \"public/system\", \"public/uploads\"\n</code></pre>\n"}, {"tags": ["ruby", "environment-variables", "zsh"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1494358822, "post_id": 43878291, "comment_id": 74791948, "body": "does it work if you <code>require &#39;dotenv&#47;load&#39;</code> ?"}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1494359224, "post_id": 43878291, "comment_id": 74792194, "body": "I&#39;m not using the <code>dotenv</code> gem (just the oh-my-zsh plugin) as I was under the impression that the shell plugin would export the vars automatically."}, {"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1494359334, "post_id": 43878291, "comment_id": 74792264, "body": "It should. Have you tried running <code>export FOO=test</code> and then irb: <code>ENV[&#39;FOO&#39;]</code> ? That works here in iTerm2 on Mac OS."}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1494359462, "post_id": 43878291, "comment_id": 74792346, "body": "If I manually export, then yea, that works. I was looking at <a href=\"http://stackoverflow.com/questions/5657060/whats-the-difference-between-env-and-set-on-mac-os-x-or-linux#5657113\">this SO post</a> and I think the issue is that the vars are only shell-local, which <code>env</code> cannot see. But I&#39;m not sure how to fix that."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1494359649, "post_id": 43878291, "comment_id": 74792463, "body": "Is there a particular reason you don&#39;t want to use the gem? If the <code>.env</code> is in the working directory, it will work. Seems strange to rely on zsh functionality within your ruby program. You can easily exclude your <code>.env</code> file from a repo"}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1494360273, "post_id": 43878291, "comment_id": 74792771, "body": "Already have a .env in our repo (w/o values of course). Not averse to adding the gem, just wanted to rule out needing a new dep simply because I didn&#39;t understand how the export actually works."}], "answers": [{"comments": [{"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1494615844, "post_id": 43927519, "comment_id": 74922404, "body": "Yup. Adding <code>export</code> to my <code>.env</code> file resolved the issue."}], "tags": [], "owner": {"reputation": 12785, "user_id": 2992551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc782179e9110bc7dc82b666c87f48b?s=128&d=identicon&r=PG", "display_name": "Adaephon", "link": "https://stackoverflow.com/users/2992551/adaephon"}, "is_accepted": true, "score": 2, "last_activity_date": 1494548369, "creation_date": 1494548369, "answer_id": 43927519, "question_id": 43878291, "link": "https://stackoverflow.com/questions/43878291/accessing-environment-vars-from-ruby-using-a-env-dotenv-file-in-zsh/43927519#43927519", "title": "Accessing environment vars from Ruby using a .env (dotenv) file in zsh", "body": "<p>Contrary to what is stated in the <a href=\"https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/dotenv\" rel=\"nofollow noreferrer\">documentation of <code>dotenv</code></a>, you actually need to use the <code>export</code> keyword within the <code>.env</code> file in order to make the parameters available to the environment, e.g.</p>\n\n<pre><code>export FOO=foo\n</code></pre>\n\n<p>The only exception would be, if the parameter was already an environment variable. For example if it had been exported in <code>~/.zshrc</code> or if it was already part of the environment <code>zsh</code> got when it started (e.g. <code>PATH</code> or <code>HOME</code>).</p>\n\n<hr>\n\n<p>All <code>dotenv</code> does is automatically sourcing any <code>.env</code> file when changing into a directory. There is no additional \"magic\". That means <code>.env</code> needs to be a valid <code>zsh</code> script and its content is run in the context of the current shell session (essentially as if you typed it manually). </p>\n\n<p>It also means that the usual rules apply. That is, just settings parameters makes them available to the current shell context only. In order to make them available as environment variables they need to be exported (either before, during or after being set). So unless a parameter has already been exported before, <code>export</code> is not really \"optional\" in <code>.env</code>. </p>\n"}], "owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "accepted_answer_id": 43927519, "answer_count": 1, "score": 1, "last_activity_date": 1494548369, "creation_date": 1494357883, "question_id": 43878291, "link": "https://stackoverflow.com/questions/43878291/accessing-environment-vars-from-ruby-using-a-env-dotenv-file-in-zsh", "title": "Accessing environment vars from Ruby using a .env (dotenv) file in zsh", "body": "<p>I'm using the oh-my-zsh <a href=\"https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/dotenv\" rel=\"nofollow noreferrer\">dotenv plugin</a>, which loads <code>.env</code> file, if it exists, whenever I <code>cd</code> into a project directory.</p>\n\n<p>I know it works because I can see my custom environment vars set when I run the <code>set</code> cmd.</p>\n\n<p>I can can also echo my custom environment variable from command line:</p>\n\n<pre><code>$ echo $FOO\n'foo'\n</code></pre>\n\n<p>However, I <em>cannot</em> access this environment variable via the <code>env</code> command or Ruby:</p>\n\n<pre><code>$ irb\n2.4.1 :001 &gt; ENV['FOO']\nnil\n</code></pre>\n\n<p>How can I  make sure environment variables loaded from my <code>.env</code> are accessible from Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 1894643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d32c1f5e0fbc4351d1b8f28345576bed?s=128&d=identicon&r=PG", "display_name": "betogrun", "link": "https://stackoverflow.com/users/1894643/betogrun"}, "edited": false, "score": 0, "creation_date": 1494428629, "post_id": 43882436, "comment_id": 74826554, "body": "The problem is that it is happening in Heroku and as far as I know it is not possible to clean heroku&#39;s tmp folder."}, {"owner": {"reputation": 547, "user_id": 6792180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mpzfa.jpg?s=128&g=1", "display_name": "Andres23Ramirez", "link": "https://stackoverflow.com/users/6792180/andres23ramirez"}, "reply_to_user": {"reputation": 83, "user_id": 1894643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d32c1f5e0fbc4351d1b8f28345576bed?s=128&d=identicon&r=PG", "display_name": "betogrun", "link": "https://stackoverflow.com/users/1894643/betogrun"}, "edited": false, "score": 0, "creation_date": 1494436278, "post_id": 43882436, "comment_id": 74831452, "body": "If you are right, what I say you can try is to delete the temporary files in local, run the Bundle Install again and then deploy back to heroku, it may be that as you had some gems with this data are stored in these temporary files"}, {"owner": {"reputation": 83, "user_id": 1894643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d32c1f5e0fbc4351d1b8f28345576bed?s=128&d=identicon&r=PG", "display_name": "betogrun", "link": "https://stackoverflow.com/users/1894643/betogrun"}, "edited": false, "score": 1, "creation_date": 1494438497, "post_id": 43882436, "comment_id": 74832774, "body": "I clean the tmp using <code>rake tmp:clear</code> and deploy the code again, but the issue remains. It seems that heroku is not able to find that lib."}], "tags": [], "owner": {"reputation": 547, "user_id": 6792180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mpzfa.jpg?s=128&g=1", "display_name": "Andres23Ramirez", "link": "https://stackoverflow.com/users/6792180/andres23ramirez"}, "is_accepted": false, "score": 0, "last_activity_date": 1494381452, "creation_date": 1494381452, "answer_id": 43882436, "question_id": 43878285, "link": "https://stackoverflow.com/questions/43878285/issue-when-deploying-to-heroku/43882436#43882436", "title": "Issue when deploying to heroku", "body": "<p>Something very similar happened to me, and everything was due to the temporary files of the project, I see that you have a similar error:</p>\n\n<pre><code>LoadError: libdmtx.so.0: can not open shared object file: /tmp/build_07af0b8150c4d2d6b3e8cd1198b88169/vendor/bundle/ruby/2.2.0/extensions/x86_64-linux/2.2.0-static/Rdmtx-0.2 .2 / Rdmtx.so ! /tmp/build_07af0b8150c4d2d6b3e8cd1198b88169/vendor/bundle/ruby/2.2.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `require '\n</code></pre>\n\n<p>What I did was erase them and ran the Bundle again and go, try</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 1894643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d32c1f5e0fbc4351d1b8f28345576bed?s=128&d=identicon&r=PG", "display_name": "betogrun", "link": "https://stackoverflow.com/users/1894643/betogrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1494457365, "creation_date": 1494457365, "answer_id": 43903972, "question_id": 43878285, "link": "https://stackoverflow.com/questions/43878285/issue-when-deploying-to-heroku/43903972#43903972", "title": "Issue when deploying to heroku", "body": "<p>It was necessary to add this buildpack: <a href=\"https://github.com/heroku/heroku-buildpack-apt\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-apt</a>.</p>\n"}], "owner": {"reputation": 83, "user_id": 1894643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d32c1f5e0fbc4351d1b8f28345576bed?s=128&d=identicon&r=PG", "display_name": "betogrun", "link": "https://stackoverflow.com/users/1894643/betogrun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494457365, "creation_date": 1494357866, "last_edit_date": 1495540484, "question_id": 43878285, "link": "https://stackoverflow.com/questions/43878285/issue-when-deploying-to-heroku", "title": "Issue when deploying to heroku", "body": "<p>Have someone faced an issue like this when deploying a project on Heroku?</p>\n\n<pre><code>Bundle complete! 40 Gemfile dependencies, 103 gems now installed.\n       Gems in the groups development and test were not installed.\n       Bundled gems are installed into ./vendor/bundle.\n       Bundle completed (3.58s)\n       Cleaning up the bundler cache.\n       Warning: the running version of Bundler (1.13.7) is older than the version that created the lockfile (1.14.6). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n       Removing bundler (1.11.2)\n-----&gt; Installing node-v6.10.0-linux-x64\n-----&gt; Detecting rake tasks\nsh: 2: Syntax error: Unterminated quoted string\nsh: 2: Syntax error: Unterminated quoted string\n !\n !     Could not detect rake tasks\n !     ensure you can run `$ bundle exec rake -P` against your app\n !     and using the production group of your Gemfile.\n !     rake aborted!\n !     LoadError: libdmtx.so.0: cannot open shared object file: No such file or directory - /tmp/build_07af0b8150c4d2d6b3e8cd1198b88169/vendor/bundle/ruby/2.2.0/extensions/x86_64-linux/2.2.0-static/Rdmtx-0.2.2/Rdmtx.so\n !     /tmp/build_07af0b8150c4d2d6b3e8cd1198b88169/vendor/bundle/ruby/2.2.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `require'\n</code></pre>\n\n<p>I'm able to use the application locally and I can run  <code>$ bundle exec rake -P against</code> my app as well.</p>\n\n<p>PS: Just before this deploy I was having issues with libdmtx as I posted here: <a href=\"https://stackoverflow.com/questions/43860050/issues-with-gem-rdmtx/43862962#43862962\">Issues with gem Rdmtx</a></p>\n"}, {"tags": ["ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 1, "creation_date": 1494384956, "post_id": 43878159, "comment_id": 74800360, "body": "Hello, I have a couple of questions: Why do you flatten the path array? and Could you actually provide an example params?"}, {"owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "reply_to_user": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "edited": false, "score": 0, "creation_date": 1494441563, "post_id": 43878159, "comment_id": 74834505, "body": "@Jeremie I <code>flatten</code> the <code>params</code> because the <code>path</code> is already an array and I want to append <code>k</code> to the <code>path</code>; example: <code>{&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;1ggs+n156aMGeur52NvBenFZLT1BGy8FuIqcy&zwnj;&#8203;y4st1HZoCG0KlPgZCGyc&zwnj;&#8203;LJrGCvK4ErwfsWFphnfL&zwnj;&#8203;VZWYuGijQ==&quot;, &quot;admin_stuff_brand&quot;=&gt;{&quot;name&quot;=&gt;&quot;skam &quot;, &quot;comment&quot;=&gt;&quot;sakmsakms&quot;}, &quot;commit&quot;=&gt;&quot;create&quot;}</code> Please not that if the params was a simple <code>hash</code> it wasn&#39;t any problem, I stuck because the I cannot modify the <code>Parameter</code> object."}], "answers": [{"tags": [], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "is_accepted": false, "score": 0, "last_activity_date": 1494488938, "creation_date": 1494488938, "answer_id": 43909477, "question_id": 43878159, "link": "https://stackoverflow.com/questions/43878159/how-to-apply-a-function-to-each-values-of-params/43909477#43909477", "title": "how to apply a function to each values of `params`", "body": "<p>Silly me!! Instead of trying to access <code>params</code> in <code>params[[path, k].flatten].to_ar2en_i</code> all I needed to do is just to access <code>h[k].to_ar2en_i</code> and since the <code>h</code> is passed by reference in Ruby, it will do the job.</p>\n\n<pre><code>def param_convert_ar2en_i h = nil, l = [], depth: 0\n  h ||= params\n  h.each_pair do |k, v|\n    if v.respond_to? :key?\n      param_convert_ar2en_i v, [l, k].flatten, depth: depth + 1\n    else\n      if h[k].respond_to? :each\n        h[k].each { |i| i.to_ar2en_i if i.respond_to? :to_ar2en_i }\n      else\n        h[k].to_ar2en_i if h[k].respond_to? :to_ar2en_i \n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494682981, "creation_date": 1494357435, "last_edit_date": 1494682981, "question_id": 43878159, "link": "https://stackoverflow.com/questions/43878159/how-to-apply-a-function-to-each-values-of-params", "title": "how to apply a function to each values of `params`", "body": "<p>I am trying to pre-process the <code>params</code> with <code>to_ar2en_i</code> function in <code>ApplicationController</code> before any action processes the <code>params</code>, I have the following in my <code>application_controller.rb</code>:</p>\n\n<pre><code># translates every params' entity from arabic to english \nbefore_action :param_convert_ar2en_i\n\nprivate\n\ndef param_convert_ar2en_i h = nil, path = []\n  h ||= params\n  h.each_pair do |k, v|\n    if v.respond_to?(:key?)\n      param_convert_ar2en_i v, [path, k].flatten\n    else\n      # something like: \n      params[[path, k].flatten].to_ar2en_i \n    end\n  end\nend\n</code></pre>\n\n<p>The problem is I don't know how to apply <code>to_ar2en_i</code> to a nested <code>params</code> with the path of <code>[[path, k].flatten]</code>.</p>\n\n<p>Can anybody kindly help me on this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494358099, "post_id": 43878082, "comment_id": 74791565, "body": "Well yes, where&#39;s your <code>ApplicationRecord</code> class? Moreover, did you think about how you are going to provide connection information for it? And maybe you also need migrations in that gem? There&#39;s a lot of moving parts in &quot;using activerecord from a gem&quot;."}, {"owner": {"reputation": 163, "user_id": 2347724, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e2a963595df816da93c9aad07fb32502?s=128&d=identicon&r=PG", "display_name": "jonatasdaniel", "link": "https://stackoverflow.com/users/2347724/jonatasdaniel"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494359786, "post_id": 43878082, "comment_id": 74792541, "body": "ApplicationRecord is on active_record gem. I already have a migration that is copied to app directory. Connection information will come from app connection settings. Am I right?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494360418, "post_id": 43878082, "comment_id": 74792853, "body": "&quot;ApplicationRecord is on active_record gem&quot; - is it, though? If it was, then it&#39;d be found. Hint: look for it in your rails app."}, {"owner": {"reputation": 163, "user_id": 2347724, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e2a963595df816da93c9aad07fb32502?s=128&d=identicon&r=PG", "display_name": "jonatasdaniel", "link": "https://stackoverflow.com/users/2347724/jonatasdaniel"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494361254, "post_id": 43878082, "comment_id": 74793285, "body": "It should be, because I&#39;m requiring &#39;active_record&#39; on top of my class."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494361704, "post_id": 43878082, "comment_id": 74793546, "body": "No, that class is not a part of active_record gem. You normally see it in rails apps, where it is a direct descendant of <code>ActiveRecord::Base</code> class."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1084, "user_id": 765297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcfaf2a6732b6ae657d0dd6675655d97?s=128&d=identicon&r=PG", "display_name": "zarazan", "link": "https://stackoverflow.com/users/765297/zarazan"}, "edited": false, "score": 0, "creation_date": 1494364492, "post_id": 43878082, "comment_id": 74794941, "body": "@zarazan: nope, it isn&#39;t. Did you read the post? It isn&#39;t a part of any gem. It&#39;s generated as part of a new rails app, when you run <code>rails new</code>."}, {"owner": {"reputation": 163, "user_id": 2347724, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e2a963595df816da93c9aad07fb32502?s=128&d=identicon&r=PG", "display_name": "jonatasdaniel", "link": "https://stackoverflow.com/users/2347724/jonatasdaniel"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494364898, "post_id": 43878082, "comment_id": 74795118, "body": "That works @SergioTulentsev. Thanks :)"}, {"owner": {"reputation": 163, "user_id": 2347724, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e2a963595df816da93c9aad07fb32502?s=128&d=identicon&r=PG", "display_name": "jonatasdaniel", "link": "https://stackoverflow.com/users/2347724/jonatasdaniel"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494364928, "post_id": 43878082, "comment_id": 74795133, "body": "And how can I test my gem with RSpec using a Rails app?"}], "answers": [{"tags": [], "owner": {"reputation": 1084, "user_id": 765297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcfaf2a6732b6ae657d0dd6675655d97?s=128&d=identicon&r=PG", "display_name": "zarazan", "link": "https://stackoverflow.com/users/765297/zarazan"}, "is_accepted": false, "score": 0, "last_activity_date": 1494364775, "last_edit_date": 1494364775, "creation_date": 1494364051, "answer_id": 43879890, "question_id": 43878082, "link": "https://stackoverflow.com/questions/43878082/how-can-i-use-activerecord-inside-my-custom-gem/43879890#43879890", "title": "How can I use ActiveRecord inside my custom gem?", "body": "<p>Looks like ApplicationRecord isn't in the ActiveRecord gem as I originally thought. I would just use the base active record class as your super class.</p>\n\n<pre><code>require 'active_record'\nmodule MyGem\n  class MyModel &lt; ActiveRecord::Base\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 2347724, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e2a963595df816da93c9aad07fb32502?s=128&d=identicon&r=PG", "display_name": "jonatasdaniel", "link": "https://stackoverflow.com/users/2347724/jonatasdaniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1494364775, "creation_date": 1494357125, "last_edit_date": 1494357947, "question_id": 43878082, "link": "https://stackoverflow.com/questions/43878082/how-can-i-use-activerecord-inside-my-custom-gem", "title": "How can I use ActiveRecord inside my custom gem?", "body": "<p>I'm building my custom gem and I want to expose an activerecord model. How can I do this?</p>\n\n<p>What I have now is:</p>\n\n<pre><code>require 'active_record'\nmodule MyGem\n  class MyModel &lt; ApplicationRecord\n  end\nend\n</code></pre>\n\n<p>and in my gemspec file:</p>\n\n<pre><code>spec.add_dependency 'activerecord', '&gt;= 5.0.0'\n</code></pre>\n\n<p>and when I try do up my application that have this gem, I got:</p>\n\n<pre><code>`&lt;module:MyGem&gt;': uninitialized constant MyGem::ApplicationRecord\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rubygems", "bcrypt"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1494357984, "post_id": 43878071, "comment_id": 74791497, "body": "This solved it for me: <a href=\"https://github.com/codahale/bcrypt-ruby/issues/142\" rel=\"nofollow noreferrer\">github.com/codahale/bcrypt-ruby/issues/142</a>"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1494738278, "post_id": 43878071, "comment_id": 74951789, "body": "Try without bcrypt gem"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8009049, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F-HjhGUP9m0/AAAAAAAAAAI/AAAAAAAAAEA/vMlxcb48lxc/photo.jpg?sz=128", "display_name": "Gilbert Garc&#237;a", "link": "https://stackoverflow.com/users/8009049/gilbert-garc%c3%ada"}, "is_accepted": false, "score": 0, "last_activity_date": 1494736459, "creation_date": 1494736459, "answer_id": 43960404, "question_id": 43878071, "link": "https://stackoverflow.com/questions/43878071/cannot-load-such-file-bcrypt-ext-with-devise/43960404#43960404", "title": "cannot load such file -- bcrypt_ext with devise", "body": "<p>try gem 'devise', github: 'plataformatec/devise'</p>\n\n<p>bundle update\nbundle install</p>\n"}], "owner": {"reputation": 325, "user_id": 5226912, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/100003747510881/picture?type=large", "display_name": "Ahmed Reza Siddique", "link": "https://stackoverflow.com/users/5226912/ahmed-reza-siddique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494736459, "creation_date": 1494357082, "question_id": 43878071, "link": "https://stackoverflow.com/questions/43878071/cannot-load-such-file-bcrypt-ext-with-devise", "title": "cannot load such file -- bcrypt_ext with devise", "body": "<p>I have added authentication in my rails app using devise, everything worked fine, but when i was trying to signup i got this error:</p>\n\n<pre><code>LoadError in Devise::RegistrationsController#create\ncannot load such file -- bcrypt_ext\n</code></pre>\n\n<p>I looked into my gemfile and found that the bcrypt gem is missing so i installed it but this doesn't solved my problem</p>\n\n<p>While searching i read somewhere that i have to restart the server after installing the bcrypt gem i tried that and now when i try to start the server i get this error:</p>\n\n<pre><code>C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require': cannot load such file -- bcrypt_ext (LoadError)\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `block in require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:259:in `load_dependency'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x86-mingw32/lib/bcrypt.rb:16:in `rescue in &lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x86-mingw32/lib/bcrypt.rb:12:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `each'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `block in require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `each'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/bundler-1.13.7/lib/bundler.rb:106:in `require'\n    from C:/Sites/pro/config/application.rb:7:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:88:in `require'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:88:in `block in server'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:85:in `tap'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:85:in `server'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from C:/RailsInstaller/Ruby2.3.0/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p><strong>my gemfile</strong></p>\n\n<pre><code>    source 'http://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\n\n# Rails Server &amp; Database Gems\ngem 'rails', '~&gt; 5.0.2'\ngem 'sqlite3'\ngem 'puma', '~&gt; 3.0'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'jquery-rails'\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\n\n# Twitter Bootstrap\ngem 'bootstrap-sass', '~&gt; 3.3', '&gt;= 3.3.7'\ngem 'autoprefixer-rails'\ngem 'font-awesome-rails'\n\n# Authentication\ngem 'devise'\ngem 'bcrypt', '~&gt; 3.1.11'\n\ngroup :development, :test do\n  # Call 'yebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "encryption", "encryption-symmetric"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1494356918, "post_id": 43878011, "comment_id": 74790920, "body": "Would Caesar cipher be good enough for your needs? :)"}, {"owner": {"reputation": 1094, "user_id": 7828418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa0e87431d2c5737500ed8d38a2b00fc?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Becker", "link": "https://stackoverflow.com/users/7828418/kyle-becker"}, "edited": false, "score": 0, "creation_date": 1494357121, "post_id": 43878011, "comment_id": 74791015, "body": "So what are you asking? You&#39;re going to need to choose an encryption algorithm, and then write that (or find a written version) in your chosen language."}, {"owner": {"reputation": 31, "user_id": 7564645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbed4618c86a19d056fa743206b8ae8?s=128&d=identicon&r=PG&f=1", "display_name": "ShaneNal", "link": "https://stackoverflow.com/users/7564645/shanenal"}, "edited": false, "score": 0, "creation_date": 1494357126, "post_id": 43878011, "comment_id": 74791021, "body": "You don&#39;t need a library that works with both ruby and javascript. You just need to pick an encryption standard such as RSA or Triple Des. Then you can get an appropriate library for both."}, {"owner": {"reputation": 31, "user_id": 7564645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbed4618c86a19d056fa743206b8ae8?s=128&d=identicon&r=PG&f=1", "display_name": "ShaneNal", "link": "https://stackoverflow.com/users/7564645/shanenal"}, "edited": false, "score": 0, "creation_date": 1494357178, "post_id": 43878011, "comment_id": 74791059, "body": "It should also be noted that this question is not appropriate for Stack Overflow. Questions intended to resolve a specific programming problem that have only one correct answer are for Stack Overflow. A &quot;specific programming problem&quot; can be defined as a problem that exists in code and that can be resolved with correct code (or cannot be resolved at all). These questions are normally language-specific."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 31, "user_id": 7564645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbed4618c86a19d056fa743206b8ae8?s=128&d=identicon&r=PG&f=1", "display_name": "ShaneNal", "link": "https://stackoverflow.com/users/7564645/shanenal"}, "edited": false, "score": 0, "creation_date": 1494357255, "post_id": 43878011, "comment_id": 74791102, "body": "@ShaneNal my question is what algorithm can I use that is simple? There are literally hundreds, and all the ones I googled are more advanced than what I need."}, {"owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 1, "creation_date": 1494357262, "post_id": 43878011, "comment_id": 74791107, "body": "Just use the classic HMAC. Ruby: <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/openssl/rdoc/OpenSSL/HMAC.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.1.0/libdoc/openssl/rdoc/OpenSSL/HMAC.h&zwnj;&#8203;tml</a> and JavaScript: <a href=\"https://caligatio.github.io/jsSHA/\" rel=\"nofollow noreferrer\">caligatio.github.io/jsSHA</a>"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 0, "creation_date": 1494357286, "post_id": 43878011, "comment_id": 74791126, "body": "@medik perfect answer thanks so much"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 0, "creation_date": 1494357384, "post_id": 43878011, "comment_id": 74791166, "body": "@medik: huh? HMAC is a hash, isn&#39;t it?"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1494357446, "post_id": 43878011, "comment_id": 74791203, "body": "I think he means the HMAC module, which does what I need:"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494357482, "post_id": 43878011, "comment_id": 74791217, "body": "@Tallboy: I thought you need to be able to decrypt stuff."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1494357535, "post_id": 43878011, "comment_id": 74791245, "body": "Hm I do, the decryption will be done on the ruby side. I&#39;m looking through the module now to see how thats possible"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494357557, "post_id": 43878011, "comment_id": 74791251, "body": "@Tallboy: yeah well, with hmac (and other hashing functions) that&#39;s impossible"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494357588, "post_id": 43878011, "comment_id": 74791265, "body": "@SergioTulentsev can I just use XOR or something?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1494357600, "post_id": 43878011, "comment_id": 74791273, "body": "@Tallboy: totally. If encryption strengh is not a concern (which you stated it isn&#39;t)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494359294, "post_id": 43878011, "comment_id": 74792239, "body": "Just ROT13 if you don&#39;t care about security. If you <i>do</i> care, OpenSSL can be a bit cantankerous to work with, but it has support for public and private keys."}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1494363094, "post_id": 43878011, "comment_id": 74794282, "body": "if security&#39;s not a concern what&#39;s the point of encrypting it at all?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1494357447, "post_id": 43878140, "comment_id": 74791204, "body": "Would you be so kind and show how to &quot;decrypt&quot; something that went through HMAC?"}, {"owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1494357867, "post_id": 43878140, "comment_id": 74791406, "body": "If this is not a security issue, Tallboy could just compare the results of encryption. If this does not make sense, cipher might be what the author is looking for."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1494358025, "post_id": 43878140, "comment_id": 74791520, "body": "I need to decrypt the value back out, providing the original string key"}, {"owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 0, "creation_date": 1494358175, "post_id": 43878140, "comment_id": 74791605, "body": "In such a case I recommend some simple cipher, it&#39;s really easy and fun to implement."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1494359246, "post_id": 43878140, "comment_id": 74792213, "body": "This is a hash, not an encryption method."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1494359384, "post_id": 43878140, "comment_id": 74792291, "body": "I&#39;d like to save space as well, if possible. I dont want it to be 1:1 (again, if possible)"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1494359487, "post_id": 43878140, "comment_id": 74792364, "body": "I was under the impression sometimes an encrypted message could sometimes be less than the original message, I guess I am mistaken"}], "tags": [], "owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "is_accepted": false, "score": -3, "last_activity_date": 1494357357, "creation_date": 1494357357, "answer_id": 43878140, "question_id": 43878011, "link": "https://stackoverflow.com/questions/43878011/simplest-way-to-encrypt-string-with-another-string-key/43878140#43878140", "title": "Simplest way to &quot;encrypt&quot; string with another string key?", "body": "<p>Just use the classic HMAC. <a href=\"http://ruby-doc.org/stdlib-2.1.0/libdoc/openssl/rdoc/OpenSSL/HMAC.h%E2%80%8C%E2%80%8Btml\" rel=\"nofollow noreferrer\">Ruby</a> and <a href=\"http://caligatio.github.io/jsSHA\" rel=\"nofollow noreferrer\">JavaScript</a>.</p>\n\n<p>(Edited from an accepted comment.)</p>\n"}, {"comments": [{"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1494437766, "post_id": 43879808, "comment_id": 74832322, "body": "I got that much but I couldn&#39;t figure out how to convert it to hex, or with normal characters."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1494363673, "creation_date": 1494363673, "answer_id": 43879808, "question_id": 43878011, "link": "https://stackoverflow.com/questions/43878011/simplest-way-to-encrypt-string-with-another-string-key/43879808#43879808", "title": "Simplest way to &quot;encrypt&quot; string with another string key?", "body": "<p>Here's a basic <a href=\"https://en.wikipedia.org/wiki/XOR_cipher\" rel=\"nofollow noreferrer\">XOR cipher</a> in Ruby:</p>\n\n<pre><code>key = 'private_key'\n\ndef xor_cypher(text, key)\n  text.each_byte.zip(key.each_byte.cycle).map { |a, b| (a ^ b).chr }.join\nend\n\np xor_cypher('This is my secret message', key)\n# \"$\\x1A\\x00\\x05A\\x1D\\x16\\x7F\\x06\\x1CY\\x03\\x17\\n\\x04\\x04\\x00E2\\x0E\\x16\\n\\x11\\x15\\f\"\np xor_cypher(\"$\\x1A\\x00\\x05A\\x1D\\x16\\x7F\\x06\\x1CY\\x03\\x17\\n\\x04\\x04\\x00E2\\x0E\\x16\\n\\x11\\x15\\f\", key)\n# \"This is my secret message\"\n</code></pre>\n\n<p>It shouldn't be too hard to write the same in JS.</p>\n\n<p>It would be a good idea to use a long, random binary key (not just usual alpha characters) and binary data as well.</p>\n\n<p>If not, you might compress the data first and encrypt it later.</p>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 43879808, "answer_count": 2, "score": 1, "last_activity_date": 1494363673, "creation_date": 1494356864, "question_id": 43878011, "link": "https://stackoverflow.com/questions/43878011/simplest-way-to-encrypt-string-with-another-string-key", "title": "Simplest way to &quot;encrypt&quot; string with another string key?", "body": "<p>I want to encrypt an input and get an encrypted output, by supplying my own key.</p>\n\n<p>The key points here (which differentiate me from post SO posts and things i've googled so far)</p>\n\n<ol>\n<li>I need to encrypt/decrypt between ruby and javascript, so ideally a library which belongs to both</li>\n<li><strong>SIMPLICITY OVER SECURITY.</strong> This is the main differentiator... I've tried looking at openSSL tutorials and they're quite advanced. I literally just need to encrypt a string, this doesn't have anything to do with security or sensitive info, as obviously in that case you would use proper encryption. For this I just need to obscure something that isn't very important.</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 1477502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/sdapX.jpg?s=128&g=1", "display_name": "dps", "link": "https://stackoverflow.com/users/1477502/dps"}, "edited": false, "score": 0, "creation_date": 1494424786, "post_id": 43879583, "comment_id": 74823393, "body": "I agree with this answer.  For performance reasons I&#39;ve sometimes historically moved AJAX stuff into a rake task, and indexed the data locally so that it can be retrieved faster.  This might not be applicable for your use case, however."}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 1, "last_activity_date": 1494384931, "last_edit_date": 1494384931, "creation_date": 1494362851, "answer_id": 43879583, "question_id": 43877534, "link": "https://stackoverflow.com/questions/43877534/render-layout-on-page-load/43879583#43879583", "title": "Render layout on page load", "body": "<p>You're on the right track with AJAX. Rails allows you to easily render pages and create endpoints for your AJAX requests. It doesn't really make sense for Rails to provide more than this because how these capabilities are used will be specific to your application.</p>\n\n<p>As you suggest, you'll want to render a light weight HTML page in rails, and then include some JavaScript to make an AJAX call to load and render the heavier weight data. Best of luck.</p>\n"}], "owner": {"reputation": 1, "user_id": 7213031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a70f9edbbc253fd9c7bad82ca382708?s=128&d=identicon&r=PG&f=1", "display_name": "LCPGM", "link": "https://stackoverflow.com/users/7213031/lcpgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494424262, "creation_date": 1494355196, "last_edit_date": 1494424262, "question_id": 43877534, "link": "https://stackoverflow.com/questions/43877534/render-layout-on-page-load", "title": "Render layout on page load", "body": "<p>I have a lot of data to load and display from API. Right now I'm doing everything on one controller and page is loading very slow. I want to render layout of this site, and a gif showing that data is loading, and after load hide gif and show data. Is there any simple Ruby on Rails function to do this, or should I use a AJAX? Thank you for help!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494354362, "post_id": 43877264, "comment_id": 74789333, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked pages. Your question isn&#39;t a good fit for Stack Overflow. We want to see evidence of your effort. Did you search for solutions? Where? Why didn&#39;t the results help? Did you write code? If not, why? If so, what is the minimum code necessary to demonstrate the problem you&#39;re asking about? Without those it looks like you want us to write a solution for you, which is off-topic. If this is homework read &quot;<a href=\"https://meta.stackoverflow.com/questions/334822\">How do I ask and answer homework questions?</a>&quot;"}, {"owner": {"reputation": 25, "user_id": 7987497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30333f8c4d357c685fc87c3af0975b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Thinh nguyen", "link": "https://stackoverflow.com/users/7987497/thinh-nguyen"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494355214, "post_id": 43877264, "comment_id": 74789875, "body": "Thanks for your advice. I&#39;ve been working on it for a while but  only be able to added two numbers instead of three or more consecutive numbers. Thanks for your help"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494354382, "post_id": 43877299, "comment_id": 74789347, "body": "<a href=\"https://meta.stackoverflow.com/questions/256328/vote-to-close-unclear-questions-immediately-after-commenting\" title=\"vote to close unclear questions immediately after commenting\">meta.stackoverflow.com/questions/256328/&hellip;</a> and <a href=\"https://meta.stackoverflow.com/questions/260263/how-long-should-we-wait-for-a-poster-to-clarify-a-question-before-closing\" title=\"how long should we wait for a poster to clarify a question before closing\">meta.stackoverflow.com/questions/260263/&hellip;</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494354651, "post_id": 43877299, "comment_id": 74789497, "body": "Also consider explaining why code works instead of just tossing it out. Remember, SO is a reference book so we need to help others to learn. <a href=\"https://meta.stackoverflow.com/a/291533/128421\">Teach, don&#39;t merely answer</a>"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494355070, "post_id": 43877299, "comment_id": 74789781, "body": "I updated my answer. Tried, at least. My english is probably not good enough to teach, unfortunately."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494358403, "post_id": 43877299, "comment_id": 74791720, "body": "Nicely done. We can fix the wording. <code>flat_map(&amp;:sum)</code> would be more concise. <code>chunk_while(&amp;:equal?).flat_map(&amp;:sum)</code> would be even better."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1494359307, "last_edit_date": 1494359307, "creation_date": 1494354340, "answer_id": 43877299, "question_id": 43877264, "link": "https://stackoverflow.com/questions/43877264/program-that-add-all-equal-numbers-but-consecutive-in-an-array/43877299#43877299", "title": "Program that add all equal numbers but consecutive in an array", "body": "<p>Try this one</p>\n\n<pre><code>[1, 2, 2, 2, 5, 2, 6].chunk_while(&amp;:equal?).flat_map(&amp;:sum)\n=&gt; [1, 6, 5, 2, 6]\n</code></pre>\n\n<p><code>chunk_while</code> permits you to group consecutive elements based on a condition. After that, you have n groups(n arrays, maybe some of them of just one element). Now you want to <code>map</code> every single array in something different (the sum of its elements). Last detail: <code>flat_map</code>, not <code>map</code>, because we want an array, not an array of arrays.</p>\n"}], "owner": {"reputation": 25, "user_id": 7987497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30333f8c4d357c685fc87c3af0975b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Thinh nguyen", "link": "https://stackoverflow.com/users/7987497/thinh-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1494359307, "creation_date": 1494354223, "question_id": 43877264, "link": "https://stackoverflow.com/questions/43877264/program-that-add-all-equal-numbers-but-consecutive-in-an-array", "title": "Program that add all equal numbers but consecutive in an array", "body": "<p>I am learning Ruby and a newbie at that. Can some one help me on this problem:\nto add all the numbers that equal in value and position consecutively in an array. Example\nI have an array = [1, 2, 2, 2, 5, 2, 6], and i would like it to return array = \n[1, 6, 5, 2, 6] using Ruby language. Thanks in advance for your help.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": false, "score": 1, "last_activity_date": 1521568662, "last_edit_date": 1521568662, "creation_date": 1497979403, "answer_id": 44659439, "question_id": 43877146, "link": "https://stackoverflow.com/questions/43877146/is-there-an-equivalent-of-shell-scriptings-xtrace-option-for-ruby/44659439#44659439", "title": "Is there an equivalent of shell scripting&#39;s xtrace option for Ruby?", "body": "<p>I was able to build a module that more or less does what I'm looking for:</p>\n\n<pre><code>require 'pry'\n\n=begin\n  We are always one line behind because the value of assignment comes\n  _after_ the trace is called. Without this, every assignment would look\n  like:\n\n      x = 1 #=&gt; {:x=&gt;nil}\n\n   It would be nice if the trace happened after assignment, but what can \n  you do?  \n=end \n\nmodule Xtrace\n  # Only run the trace on the main file, not on require'd files.\n  # Possible room for expansion later.\n  @files = {$0 =&gt; Pry::Code.from_file($0)}\n\n  def Xtrace.print_trace\n    if @prev_line then\n      if @files[@path] then\n        line = @files[@path].around(@prev_line, 0).chomp\n\n        # When calling a method, don't make it look like it's being defined.\n        line.gsub!(/^\\s*def\\s*\\b/, '') if @event == :call\n\n        values = []\n        @bind.local_variables.each do |v|\n          values &lt;&lt; {v =&gt; @bind.local_variable_get(v)} if line =~ /\\b#{v}\\b/\n        end\n        STDERR.printf \"%5s: %s\", @prev_line, line\n        STDERR.printf \" #=&gt; %s\", values.join(', ') unless values.empty?\n        STDERR.printf \"\\n\"\n      end\n    end\n  end\n\n  @xtrace = TracePoint.trace(:line, :call) do |tp|\n    tp.disable \n    @bind=tp.binding\n    Xtrace.print_trace\n\n    # Other than the binding, everything we need to print comes from the\n    # previous trace call.\n    @prev_line = tp.lineno\n    @event=tp.event\n    @path=tp.path\n    tp.enable\n  end    \n\n  # Need to print the trace one last time after the last line of code. \n  at_exit do\n    # It doesn't matter what we do in this last line. Any statement works.\n    # Also, it's a bit inconvenient that the disable command is itself traced.\n    @xtrace.disable\n  end\nend\n</code></pre>\n\n<p>If you put it in a file named xtrace.rb and put in in your library load path, you can begin tracing by adding <code>require 'xtrace'</code>. It prints the line number of each line and method call executed, the actual code and the values of any local variable in the line. For a simple factorial function, the output might look like:</p>\n\n<pre><code>    3: def factorial(n)\n    8: puts factorial(3)\n    3: factorial(n) #=&gt; {:n=&gt;3}\n    4:   return 1 if n &lt;= 1 #=&gt; {:n=&gt;3}\n    5:   return n*factorial(n-1) #=&gt; {:n=&gt;2}\n    3: factorial(n) #=&gt; {:n=&gt;2}\n    4:   return 1 if n &lt;= 1 #=&gt; {:n=&gt;2}\n    5:   return n*factorial(n-1) #=&gt; {:n=&gt;1}\n    3: factorial(n) #=&gt; {:n=&gt;1}\n    4:   return 1 if n &lt;= 1\n6\n</code></pre>\n\n<p>For the moment, it only looks at local variables. It also only traces the executed file and not any loaded files. There's no way to enable or disable traces just yet. The trace begins when you require the module and ends when the execution does. Trace output goes to STDERR and the format is hardcoded.</p>\n\n<p>If you use this module, <strong>watch out that you don't leak sensitive information such as passwords, API keys or PII</strong>. </p>\n"}], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1521568662, "creation_date": 1494353861, "last_edit_date": 1521568066, "question_id": 43877146, "link": "https://stackoverflow.com/questions/43877146/is-there-an-equivalent-of-shell-scriptings-xtrace-option-for-ruby", "title": "Is there an equivalent of shell scripting&#39;s xtrace option for Ruby?", "body": "<p>When debugging shell scripts, I find it helpful to run with <a href=\"https://www.freebsd.org/cgi/man.cgi?query=ksh\" rel=\"nofollow noreferrer\"><code>xtrace</code> on</a>:</p>\n\n<pre><code>-x    xtrace        Print commands  and  parameter\n                    assignments when they are exe-\n                    cuted, preceded by  the  value\n                    of PS4.\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>$ set -x\n$ s='Say again?'\n+ s='Say again?'\n\n# Other commands that might mess with the value of $s\n\n$ echo $s\n+ echo Say 'again?'\nSay again?\n</code></pre>\n\n<p>I know that Ruby has interactive debuggers such as <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">pry</a> and <a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">byebug</a>, but I'm looking for something that will be easy to turn on for logging automated scripts. </p>\n\n<p>I did find an <a href=\"https://rubygems.org/gems/xtrace/versions/1.0.1\" rel=\"nofollow noreferrer\">xtrace gem</a>, but it has something to do with a PHP format. </p>\n\n<p>I also see there is a <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/tracer/rdoc/Tracer.html\" rel=\"nofollow noreferrer\">Tracer class</a> and a <a href=\"http://ruby-doc.org/core-2.4.1/TracePoint.html\" rel=\"nofollow noreferrer\">TracePoint class</a> which do seem to provide a way to print statements as they are executed. But I haven't found any way to print the value of variables (rather than just the variable name):</p>\n\n<pre><code>$ ruby -r tracer trace.rb \n#0:/usr/local/Cellar/ruby/2.4.1_1/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:Kernel:&lt;:       return gem_original_require(path)\n#0:trace.rb:1::-: s='Say again?'\n#0:trace.rb:2::-: puts s\nSay again?\n</code></pre>\n\n<p>I'd like to have the penultimate line read:</p>\n\n<pre><code>#0:trace.rb:2::-: puts 'Say again?'\n</code></pre>\n\n<p>Is this possible? Or is there a better way with Ruby?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1494357655, "post_id": 43876712, "comment_id": 74791300, "body": "I expect you thought enclosing some hashes in <code>**</code> would be helpful to readers, but I just found it confusing. It&#39;s perfect clear what you want to do without &quot;hey, look here&quot;. More generally, when giving examples all inputs should be valid Ruby objects (no <code>**</code>, no <code>etc.</code>, no <code>...</code>). Among other things that allows readers to simply cut-and-paste your code without the need for subsequent editing. It&#39;s commendable that you assigned a variable to the array (<code>array = [...)</code> so readers can refer to <code>array</code> without having to define it. Many askers leave inputs nameless, which is a minor pain."}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "edited": false, "score": 0, "creation_date": 1494354356, "post_id": 43876971, "comment_id": 74789331, "body": "My pleasure Sir ;)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1494358199, "post_id": 43876971, "comment_id": 74791618, "body": "Good answer. It would be prettier if you would reformat to avoid the need for horizontal scrolling."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1494353223, "creation_date": 1494353223, "answer_id": 43876971, "question_id": 43876712, "link": "https://stackoverflow.com/questions/43876712/sum-values-in-array-of-hash-if-they-have-the-same-value/43876971#43876971", "title": "Sum values in array of hash if they have the same value", "body": "<p>This seems work</p>\n\n<pre><code>array.group_by { |item| [item[:loading], item[:avg]] }.values.flat_map { |items| items.first.merge(total: items.sum { |h| h[:total] }) }\n=&gt; [{:loading=&gt;10, :avg=&gt;15, :total=&gt;25}, {:loading=&gt;20, :avg=&gt;20, :total=&gt;120}, {:loading=&gt;30, :avg=&gt;25, :total=&gt;55}, {:loading=&gt;10, :avg=&gt;20, :total=&gt;46}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1494354331, "last_edit_date": 1494354331, "creation_date": 1494353666, "answer_id": 43877090, "question_id": 43876712, "link": "https://stackoverflow.com/questions/43876712/sum-values-in-array-of-hash-if-they-have-the-same-value/43877090#43877090", "title": "Sum values in array of hash if they have the same value", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>Enumerable#group_by</code></a> and <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html#method-i-merge-21\" rel=\"nofollow noreferrer\"><code>Hash#merge!</code></a> to handle this as </p>\n\n<pre><code>array.group_by {|h| [h[:loading],h[:avg]]}.values.map do |a|\n  a.inject do |memo,h| \n    memo.merge!(h) do |_k,old_value,new_value| \n      old_value + new_value\n    end\n  end\nend\n#=&gt; [{:loading=&gt;10, :avg=&gt;15, :total=&gt;25}, \n#    {:loading=&gt;40, :avg=&gt;40, :total=&gt;120}, \n#    {:loading=&gt;30, :avg=&gt;25, :total=&gt;55}, \n#    {:loading=&gt;10, :avg=&gt;20, :total=&gt;46}]\n</code></pre>\n\n<p>Quick Breakdown</p>\n\n<ul>\n<li><code>array.group_by</code> group the elements by the loading and avg values this will return a hash of {grouped_values => [objects]}</li>\n<li><code>values</code> [objects] from the above groupings (because we don't specifically care about the keys)</li>\n<li><code>map</code> into a new Array</li>\n<li><code>inject</code> will pass the first element as memo and will yield the second element on the first iteration. After that memo will be the return value from inject and the next element will be yielded to the block until there are no elements left.</li>\n<li><code>merge!</code> with block syntax allows you to handle duplicate keys. In this case you want to add the values. </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1494356321, "post_id": 43877195, "comment_id": 74790553, "body": "Ouch. :P I made up my mind and chose readability. <i>&quot; Of course, people do go both ways. That&#39;s the trouble. I can&#39;t make up my mind.&quot;</i>"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1494355242, "last_edit_date": 1494355242, "creation_date": 1494354043, "answer_id": 43877195, "question_id": 43876712, "link": "https://stackoverflow.com/questions/43876712/sum-values-in-array-of-hash-if-they-have-the-same-value/43877195#43877195", "title": "Sum values in array of hash if they have the same value", "body": "<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-update\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>) that employs a block to determine the values of keys that are present in both hashes being merged.<sup>1</sup> See the doc for the definitions of the block variables <code>_k</code>, <code>o</code> an <code>n</code>. The first variable (<code>_k</code>) begins with an underscore (often written simply <code>_</code>) to signify that that block variable is not used in the block calculation. (Note that @engineersmnky dd the same.)</p>\n\n<pre><code>arr = [\n  {loading: 10, avg: 15, total: 25 },\n  {loading: 20, avg: 20, total: 40 },\n  {loading: 30, avg: 25, total: 55 },\n  {loading: 20, avg: 20, total: 80 },\n  {loading: 10, avg: 20, total: 46 }\n]\n\narr.each_with_object({}) { |g,h| h.update(g.values_at(:loading, :avg)=&gt;g) { |_k,o,n|\n  o.merge(total: o[:total]+n[:total]) } }.values\n  #=&gt; [{:loading=&gt;10, :avg=&gt;15, :total=&gt;25},\n  #    {:loading=&gt;20, :avg=&gt;20, :total=&gt;120},\n  #    {:loading=&gt;30, :avg=&gt;25, :total=&gt;55},\n  #    {:loading=&gt;10, :avg=&gt;20, :total=&gt;46}]\n</code></pre>\n\n<p>Before <code>.values</code> is applied at the end, we will have constructed the following hash:</p>\n\n<pre><code>arr.each_with_object({}) { |g,h| h.update(g.values_at(:loading, :avg)=&gt;g) { |_k,o,n|\n  o.merge(total: o[:total]+n[:total]) } }\n  #=&gt; {[10, 15]=&gt;{:loading=&gt;10, :avg=&gt;15, :total=&gt;25},\n  #    [20, 20]=&gt;{:loading=&gt;20, :avg=&gt;20, :total=&gt;120},\n  #    [30, 25]=&gt;{:loading=&gt;30, :avg=&gt;25, :total=&gt;55},\n  #    [10, 20]=&gt;{:loading=&gt;10, :avg=&gt;20, :total=&gt;46}}\n</code></pre>\n\n<p>Had @Ursus (whose answer preceded mine) taken this approach I would have used <code>group_by</code>. The two approaches seems to always be interchangeable. I don't think one is better; it's just a matter of personal preference. It seems that @engineersmnky couldn't make up his mind, so he used a bit of both.  </p>\n\n<p><sup>1. I feel like I've written this sentence (verbatim) hundreds of times. \u00af\\_(\u30c4)_/\u00af</sup></p>\n"}], "owner": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1648, "favorite_count": 1, "accepted_answer_id": 43876971, "answer_count": 3, "score": 3, "last_activity_date": 1497402185, "creation_date": 1494352362, "last_edit_date": 1497402185, "question_id": 43876712, "link": "https://stackoverflow.com/questions/43876712/sum-values-in-array-of-hash-if-they-have-the-same-value", "title": "Sum values in array of hash if they have the same value", "body": "<p>I saw this piece of code in this post, because I'm trying to sum values in an array of hashes based on some criteria.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43087297/rails-sum-values-in-an-array-of-hashes\">Rails sum values in an array of hashes</a></p>\n\n<pre><code>array = [\n  {loading: 10, avg: 15, total: 25 },\n  {loading: 20, avg: 20, total: 40 },\n  {loading: 30, avg: 25, total: 55 }\n]\n\nsum = Hash.new(0)\n\narray.each_with_object(sum) do |hash, sum|\n  hash.each { |key, value| sum[key] += value }\nend\n # =&gt; {:loading=&gt;60, :avg=&gt;60, :total=&gt;120}\n</code></pre>\n\n<p>What I'm trying to do and I don't know how, is to sum total key if loading and avg appear with the same values more than once in this array. For instance.</p>\n\n<pre><code> array = [\n      {loading: 10, avg: 15, total: 25 },\n      {loading: 20, avg: 20, total: 40 }, #\u00a0See here\n      {loading: 30, avg: 25, total: 55 },\n      {loading: 20, avg: 20, total: 80 }, #\u00a0See here\n      {loading: 10, avg: 20, total: 46 }\n    ]\n</code></pre>\n\n<p>The result would be:</p>\n\n<pre><code>[\n  {loading: 10, avg: 15, total: 25 },\n  {loading: 20, avg: 20, total: 120 }, #\u00a0Results in this\n  {loading: 30, avg: 25, total: 55 },\n  {loading: 10, avg: 20, total: 46 }\n]\n</code></pre>\n\n<p>I tried to modify this line </p>\n\n<pre><code>hash.each { |key, value| sum[key] += value }\n</code></pre>\n\n<p>Adding a conditional that checks if the value is repeated but I didn't succeed. </p>\n\n<p>Any help, ideas or anything will be welcome.</p>\n"}, {"tags": ["ruby", "string", "double-quotes"], "answers": [{"comments": [{"owner": {"reputation": 2230, "user_id": 5437911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dfff6f7cbd403b86ed24dbf8f5ad4be2?s=128&d=identicon&r=PG&f=1", "display_name": "AmazingDayToday", "link": "https://stackoverflow.com/users/5437911/amazingdaytoday"}, "edited": false, "score": 0, "creation_date": 1494353679, "post_id": 43877029, "comment_id": 74788923, "body": "Nope, they&#39;re shown at Google Alerts list as <code>&quot;&amp;quot;sam&amp;quot;&quot;</code> and <code>%22sam%22</code>"}, {"owner": {"reputation": 505, "user_id": 63516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0885ba9442ca4515dd4b235319278b8b?s=128&d=identicon&r=PG", "display_name": "tmarkiewicz", "link": "https://stackoverflow.com/users/63516/tmarkiewicz"}, "reply_to_user": {"reputation": 2230, "user_id": 5437911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dfff6f7cbd403b86ed24dbf8f5ad4be2?s=128&d=identicon&r=PG&f=1", "display_name": "AmazingDayToday", "link": "https://stackoverflow.com/users/5437911/amazingdaytoday"}, "edited": false, "score": 0, "creation_date": 1494353759, "post_id": 43877029, "comment_id": 74788965, "body": "I wonder if this just may be a limitation of Google Alerts then, i.e. not allowing any special characters."}, {"owner": {"reputation": 2230, "user_id": 5437911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dfff6f7cbd403b86ed24dbf8f5ad4be2?s=128&d=identicon&r=PG&f=1", "display_name": "AmazingDayToday", "link": "https://stackoverflow.com/users/5437911/amazingdaytoday"}, "edited": false, "score": 0, "creation_date": 1494353922, "post_id": 43877029, "comment_id": 74789058, "body": "That&#39;s the thing, it is possible to send keys manually by typing <code>&quot;sam&quot;</code>, and it will show <code>&quot;sam&quot;</code>. I still incline to that it is possible to send the key the way I want..."}], "tags": [], "owner": {"reputation": 505, "user_id": 63516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0885ba9442ca4515dd4b235319278b8b?s=128&d=identicon&r=PG", "display_name": "tmarkiewicz", "link": "https://stackoverflow.com/users/63516/tmarkiewicz"}, "is_accepted": false, "score": 0, "last_activity_date": 1494353444, "last_edit_date": 1495541879, "creation_date": 1494353444, "answer_id": 43877029, "question_id": 43876686, "link": "https://stackoverflow.com/questions/43876686/ruby-send-string-with-double-quotes-to-google-alerts/43877029#43877029", "title": "Ruby: Send string with double quotes to Google Alerts", "body": "<p>I would try the following two options (neither throws an error) and see which produces the best output for Google Alerts.</p>\n\n<p>First, try URL encoding (<a href=\"https://www.w3schools.com/tags/ref_urlencode.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/tags/ref_urlencode.asp</a>) the quotation marks by replacing the inside quotes with <code>%22</code> as follows:</p>\n\n<pre><code>\"%22sam%22\"\n</code></pre>\n\n<p>Another option would be HTML encoding (<a href=\"https://stackoverflow.com/questions/1664208/encode-quotes-in-html-body\">Encode quotes in HTML body?</a>) by replacing the inside quotes with <code>&amp;quot;</code></p>\n\n<pre><code>\"&amp;quot;sam&amp;quot;\"\n</code></pre>\n"}], "owner": {"reputation": 2230, "user_id": 5437911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dfff6f7cbd403b86ed24dbf8f5ad4be2?s=128&d=identicon&r=PG&f=1", "display_name": "AmazingDayToday", "link": "https://stackoverflow.com/users/5437911/amazingdaytoday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494353444, "creation_date": 1494352263, "question_id": 43876686, "link": "https://stackoverflow.com/questions/43876686/ruby-send-string-with-double-quotes-to-google-alerts", "title": "Ruby: Send string with double quotes to Google Alerts", "body": "<p>Here's my piece of code in Ruby:</p>\n\n<pre><code>require 'galerts'\n\nmanager = Galerts::Manager.new('blah@gmail.com', 'password')\n\nnew_alert = manager.create(\"sam\", {\n\n:frequency =&gt; Galerts::RT,\n  :domain =&gt; 'com',\n  :language =&gt; Galerts::LANGUAGE,\n  :sources =&gt; [Galerts::NEWS],\n  :how_many =&gt; Galerts::BEST_RESULTS,\n  :region =&gt; Galerts::ANYWHERE,\n  :delivery =&gt; Galerts::EMAIL\n  }\n)\n</code></pre>\n\n<p>As you see from the code, this code sends a string to Google Alers in a form of <code>sam</code> and it is actually working good. Now, the issue is that I want to send it as <code>\"sam\"</code>, not <code>sam</code>. Would you have suggestions?</p>\n\n<p>I tried:\n<code>\"\"\"sam\"\"\"</code>, <code>\"\"sam\"\"</code>, <code>%q(sam)</code>, <code>\"\\\"sam\\\"\"</code>, etc. Nothing works by now.</p>\n"}, {"tags": ["ruby", "curl", "rspec", "capybara", "webmock"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494352521, "post_id": 43876530, "comment_id": 74788288, "body": "Thats a failure of selenium to communicate with the browser (I assume firefox 47 since you&#39;re still on selenium-webdriver 2.53.4?) for control. Are you running that connection through your proxy? All of your gems are really old versions, do you need to stay on those versions?"}, {"owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494356215, "post_id": 43876530, "comment_id": 74790484, "body": "Using Chrome, I will update them tomorrow, post the Gemfile.lock before and after, and the results, thanks :)"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494356312, "post_id": 43876530, "comment_id": 74790548, "body": "If you&#39;re using Chrome, definitely update your gems and make sure you update chromedriver as well"}, {"owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494357899, "post_id": 43876530, "comment_id": 74791439, "body": "using Chrome: Version 49.0.2623.87 (64-bit)"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494358035, "post_id": 43876530, "comment_id": 74791529, "body": "That&#39;s over a year old too - so unless you have a good reason for staying on that you should probably just update everything.  If you need to stay on Chrome 49 use the latest chromedriver that works with that version"}, {"owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1494407183, "post_id": 43876530, "comment_id": 74810040, "body": "updated chromedriver + chrome, seems to solve it :)"}], "owner": {"reputation": 1807, "user_id": 2627775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60c89745b197ac5aa4b4b94042db1e2f?s=128&d=identicon&r=PG", "display_name": "Captain_Meow_Meow", "link": "https://stackoverflow.com/users/2627775/captain-meow-meow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494357556, "creation_date": 1494351696, "last_edit_date": 1494357556, "question_id": 43876530, "link": "https://stackoverflow.com/questions/43876530/how-to-solve-the-the-curls-couldnt-connect-to-server", "title": "How to solve the the Curl&#39;s &quot;Couldn&#39;t connect to server&quot;", "body": "<p>I'm using Rspec with Capybara with WebMock for my tests (also I'm using Charles proxy), Getting the following error, never in a specific test.</p>\n\n<p>I've had this happen once in a while, using rspec-retry mostly to deal with it, but now I've noticed it take allot of time on each encounter with this error.</p>\n\n<p>Any ideas? </p>\n\n<pre><code>    Curl::Err::ConnectionFailedError: Couldn't connect to server\n    /home/user/.rvm/gems/ruby-2.2.4/gems/curb-0.8.8/lib/curl/easy.rb:72:in `perform'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/curb-0.8.8/lib/curl/easy.rb:294:in `http'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/curb-0.8.8/lib/curl/easy.rb:294:in `http_get'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/selenium-webdriver-2.53.4/lib/selenium/webdriver/remote/http/curb.rb:63:in `request'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/selenium-webdriver-2.53.4/lib/selenium/webdriver/remote/http/common.rb:59:in `call'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/selenium-webdriver-2.53.4/lib/selenium/webdriver/remote/bridge.rb:649:in `raw_execute'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/selenium-webdriver-2.53.4/lib/selenium/webdriver/remote/bridge.rb:627:in `execute'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/selenium-webdriver-2.53.4/lib/selenium/webdriver/remote/bridge.rb:576:in `isElementDisplayed'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/selenium-webdriver-2.53.4/lib/selenium/webdriver/common/element.rb:190:in `displayed?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/selenium/node.rb:126:in `visible?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/element.rb:252:in `block in visible?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/base.rb:81:in `synchronize'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/element.rb:252:in `visible?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/queries/selector_query.rb:49:in `matches_filters?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/result.rb:28:in `block in initialize'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/result.rb:28:in `select'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/result.rb:28:in `initialize'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/queries/selector_query.rb:120:in `new'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/queries/selector_query.rb:120:in `block in resolve_for'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/base.rb:81:in `synchronize'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/queries/selector_query.rb:108:in `resolve_for'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/matchers.rb:125:in `block in assert_selector'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/base.rb:85:in `synchronize'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/matchers.rb:124:in `assert_selector'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/matchers.rb:40:in `has_selector?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/node/matchers.rb:271:in `has_css?'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/capybara-2.7.1/lib/capybara/session.rb:699:in `block (2 levels) in &lt;class:Session&gt;'\n    ./spec/charts/charts_dialog_spec.rb:203:in `block in simple_chart_breakdown_initial'\n    ./spec/charts/charts_dialog_spec.rb:201:in `times'\n    ./spec/charts/charts_dialog_spec.rb:201:in `simple_chart_breakdown_initial'\n    ./spec/charts/charts_dialog_spec.rb:1113:in `block (7 levels) in &lt;top (required)&gt;'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:98:in `block in run'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:88:in `loop'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:88:in `run'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-retry-0.4.5/lib/rspec_ext/rspec_ext.rb:12:in `run_with_retry'\n    /home/user/.rvm/gems/ruby-2.2.4/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:22:in `block (2 levels) in setup'\n    -e:1:in `load'\n    -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>origianl Gemfile.lock:</p>\n\n<pre><code>    GEM\n    remote: https://rubygems.org/\n    specs:\n    activesupport (4.2.5)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    addressable (2.4.0)\n    archive-zip (0.7.0)\n      io-like (~&gt; 0.3.0)\n    backports (3.6.8)\n    binding_of_caller (0.7.2)\n      debug_inspector (&gt;= 0.0.1)\n    builder (3.2.2)\n    capybara (2.7.1)\n      addressable\n      mime-types (&gt;= 1.16)\n      nokogiri (&gt;= 1.3.3)\n      rack (&gt;= 1.0.0)\n      rack-test (&gt;= 0.5.4)\n      xpath (~&gt; 2.0)\n    childprocess (0.5.9)\n      ffi (~&gt; 1.0, &gt;= 1.0.11)\n    chromedriver-helper (1.0.0)\n      archive-zip (~&gt; 0.7.0)\n      nokogiri (~&gt; 1.6)\n    ci_reporter (2.0.0)\n      builder (&gt;= 2.1.2)\n    ci_reporter_rspec (1.0.0)\n      ci_reporter (~&gt; 2.0)\n      rspec (&gt;= 2.14, &lt; 4)\n    coderay (1.1.0)\n    crack (0.4.3)\n      safe_yaml (~&gt; 1.0.0)\n    curb (0.8.8)\n    debug_inspector (0.0.2)\n    diff-lcs (1.2.5)\n    factory_girl (4.5.0)\n      activesupport (&gt;= 3.0.0)\n    ffi (1.9.14)\n    ffi (1.9.14-x64-mingw32)\n    hashdiff (0.2.3)\n    i18n (0.7.0)\n    interception (0.5)\n    io-like (0.3.0)\n    json (1.8.3)\n    method_source (0.8.2)\n    mime-types (3.1)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2016.0521)\n    mini_portile2 (2.1.0)\n    minitest (5.8.3)\n    multi_json (1.12.1)\n    nokogiri (1.6.8)\n      mini_portile2 (~&gt; 2.1.0)\n      pkg-config (~&gt; 1.1.7)\n    nokogiri (1.6.8-x64-mingw32)\n      mini_portile2 (~&gt; 2.1.0)\n      pkg-config (~&gt; 1.1.7)\n    parallel (1.6.1)\n    parallel_tests (2.2.1)\n      parallel\n    pkg-config (1.1.7)\n    pry (0.10.3)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.8.1)\n      slop (~&gt; 3.4)\n    pry-rescue (1.4.2)\n      interception (&gt;= 0.5)\n      pry\n    pry-stack_explorer (0.4.9.2)\n      binding_of_caller (&gt;= 0.7)\n      pry (&gt;= 0.9.11)\n    puma (2.15.3)\n    rack (1.6.4)\n    rack-protection (1.5.3)\n      rack\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rake (10.4.2)\n    rspec (3.4.0)\n      rspec-core (~&gt; 3.4.0)\n      rspec-expectations (~&gt; 3.4.0)\n      rspec-mocks (~&gt; 3.4.0)\n    rspec-core (3.4.1)\n      rspec-support (~&gt; 3.4.0)\n    rspec-expectations (3.4.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.4.0)\n    rspec-mocks (3.4.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.4.0)\n    rspec-retry (0.4.5)\n      rspec-core\n    rspec-support (3.4.1)\n    rubyzip (1.2.0)\n    safe_yaml (1.0.4)\n    selenium-webdriver (2.53.4)\n      childprocess (~&gt; 0.5)\n      rubyzip (~&gt; 1.0)\n      websocket (~&gt; 1.0)\n    sinatra (1.4.7)\n      rack (~&gt; 1.5)\n      rack-protection (~&gt; 1.4)\n      tilt (&gt;= 1.3, &lt; 3)\n    sinatra-contrib (1.4.7)\n      backports (&gt;= 2.0)\n      multi_json\n      rack-protection\n      rack-test\n      sinatra (~&gt; 1.4.0)\n      tilt (&gt;= 1.3, &lt; 3)\n    slop (3.6.0)\n    thread_safe (0.3.5)\n    tilt (2.0.5)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    webmock (1.22.3)\n      addressable (&gt;= 2.3.6)\n      crack (&gt;= 0.3.2)\n      hashdiff\n    websocket (1.2.3)\n    xpath (2.0.0)\n      nokogiri (~&gt; 1.3)\n\n    PLATFORMS\n    ruby\n    x64-mingw32\n\n    DEPENDENCIES\n    capybara\n    chromedriver-helper\n    ci_reporter_rspec\n    curb\n    factory_girl\n    parallel_tests\n    pry-rescue\n    pry-stack_explorer\n    puma\n    rake\n    rspec\n    rspec-retry\n    selenium-webdriver\n    sinatra\n    sinatra-contrib\n    webmock\n\n    BUNDLED WITH\n    1.11.2\n</code></pre>\n\n<p>diff of new Gemfile, still \"Couldn't connect to server\" error:</p>\n\n<pre><code>    capybara (2.14.0)\n    rspec (&gt;= 2.2.0, &lt; 4)\n    selenium-webdriver (3.4.0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1494351018, "post_id": 43876255, "comment_id": 74787498, "body": "you&#39;re right, it looks like just a error message, but that&#39;s weird why&#39;s my rspec alaways fail by the truth, anyway, finally my rspec can work, thanks for your explain."}], "tags": [], "owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "is_accepted": true, "score": 3, "last_activity_date": 1494350822, "creation_date": 1494350822, "answer_id": 43876255, "question_id": 43876121, "link": "https://stackoverflow.com/questions/43876121/whats-the-weird-file-name-rb-with-rspec/43876255#43876255", "title": "What&#39;s the weird file name .rb. with rspec?", "body": "<p>There's probably an error inside your <code>mixpanel_tracking_spec.rb</code></p>\n\n<p>Rspec adds a dot in the end of sentence. It's not looking for a file named <code>mixpanel_tracking_spec.rb.</code> </p>\n\n<p>Check this snipplet: </p>\n\n<pre><code>reporter.notify_non_example_exception(ex, \"An error occurred while loading #{relative_file}.\")\n</code></pre>\n\n<p>Rspec relevant source: <a href=\"https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/configuration.rb#L1925\" rel=\"nofollow noreferrer\">https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/configuration.rb#L1925</a></p>\n"}], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 43876255, "answer_count": 1, "score": -1, "last_activity_date": 1494350822, "creation_date": 1494350329, "question_id": 43876121, "link": "https://stackoverflow.com/questions/43876121/whats-the-weird-file-name-rb-with-rspec", "title": "What&#39;s the weird file name .rb. with rspec?", "body": "<p>Today I run rspec in rails, and there're weird thing happened, I find rspec always show the error bellow, even thought I'm very sure I have corresponded the file name, struggle about three hours, finally I find rspec show the error message <code>An error occurred while loading ./spec/controllers/concerns/mixpanel_tracking_spec.rb.</code>, please looks carefully, the end of filename more one <code>.</code>, that's weird so that I type <code>ls</code> look my file name right now, It show correct file name <code>mixpanel_tracking_spec.rb</code> with no <code>.</code>, finally I recreate a new rspec file and the rspec work, and I also try use touch to create <code>touch mixpanel_tracking_spec.rb.</code> and type <code>ls</code> then it show <code>mixpanel_tracking_spec.rb.</code> with point <code>.</code></p>\n\n<p>So there is a question, what happend for there? How can create a file name with end point <code>mixpanel_tracking_spec.rb.</code> but use <code>ls</code> show <code>mixpanel_tracking_spec.rb</code>, by my experiment, it looks like impossible, and what's the meaning of the file name <code>.rb.</code>, does it has any association with ruby?</p>\n\n<h1>rspec error</h1>\n\n<p><code>NameError:\n  uninitialized constant MixpanelTracking</code></p>\n"}, {"tags": ["arrays", "ruby", "class", "instance-variables"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1494350728, "post_id": 43876056, "comment_id": 74787331, "body": "Do the <code>Supermarket</code> and <code>Delivery</code> classes have any methods? Poking around at someone&#39;s instance variables is generally a bad idea and somewhat rude."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1494350739, "post_id": 43876056, "comment_id": 74787335, "body": "Why do you have an array of disjoint types? Does <code>Supermarket</code> also have a <code>type</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 0, "last_activity_date": 1494350340, "creation_date": 1494350340, "answer_id": 43876125, "question_id": 43876056, "link": "https://stackoverflow.com/questions/43876056/accessing-instance-variables-inside-an-array/43876125#43876125", "title": "Accessing instance variables inside an array", "body": "<pre><code>array_of_array.inject(0) do |sum, array|\n  sum + array.count { |el| el.class == Delivery &amp;&amp; el.instance_variable_get(:@type) == :standard }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1494442659, "last_edit_date": 1494442659, "creation_date": 1494353912, "answer_id": 43877157, "question_id": 43876056, "link": "https://stackoverflow.com/questions/43876056/accessing-instance-variables-inside-an-array/43877157#43877157", "title": "Accessing instance variables inside an array", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-select\" rel=\"nofollow noreferrer\">select()</a> to filter the elements of an array.</p>\n\n<p>Reconstructing your data:</p>\n\n<pre><code>require 'ostruct'\nrequire 'pp'\n\nsupermarket_data = [\n  ['Easybuy', 1],\n  ['Walmart', 2],\n  ['Forragers', 3],\n]\n\nsupermarkets = supermarket_data.map do |(name, id)|\n  supermarket = OpenStruct.new\n  supermarket.name = name\n  supermarket.id = id\n  supermarket\nend\n\ndelivery_data = [\n  ['standard', 5.0],\n  ['standard', 5.0],\n  ['express', 10.0],\n]\n\ndeliveries = delivery_data.map do |(type, price)| \n  delivery = OpenStruct.new\n  delivery.type = type\n  delivery.price = price\n  delivery\nend\n\ncombined = supermarkets.zip deliveries\npp combined\n</code></pre>\n\n<hr>\n\n<pre><code>[[#&lt;OpenStruct name=\"Easybuy\", id=1&gt;,\n  #&lt;OpenStruct type=\"standard\", price=5.0&gt;],\n [#&lt;OpenStruct name=\"Walmart\", id=2&gt;,\n  #&lt;OpenStruct type=\"standard\", price=5.0&gt;],\n [#&lt;OpenStruct name=\"Forragers\", id=3&gt;,\n  #&lt;OpenStruct type=\"express\", price=10.0&gt;]]\n</code></pre>\n\n<hr>\n\n<p>Filtering the array with <code>select()</code>:</p>\n\n<pre><code>standard_deliveries = combined.select do |(supermarket, delivery)| \n  delivery.type == 'standard'\nend\n\npp standard_deliveries  # pretty print\np standard_deliveries.count\n</code></pre>\n\n<hr>\n\n<pre><code> [[#&lt;OpenStruct name=\"Easybuy\", id=1&gt;,\n  #&lt;OpenStruct type=\"standard\", price=5.0&gt;],\n [#&lt;OpenStruct name=\"Walmart\", id=2&gt;,\n  #&lt;OpenStruct type=\"standard\", price=5.0&gt;]]\n\n2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7373511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be918a71ce081686e7a1e7ef876ed6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Ashton", "link": "https://stackoverflow.com/users/7373511/john-ashton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494442659, "creation_date": 1494350078, "last_edit_date": 1494352727, "question_id": 43876056, "link": "https://stackoverflow.com/questions/43876056/accessing-instance-variables-inside-an-array", "title": "Accessing instance variables inside an array", "body": "<p>I am trying to access a specific value inside an array.  The array contains specific class instance variables and is as follows:</p>\n\n<pre><code>    [[#&lt;Supermarket:0x007f8e989daef8 @id=1, @name=\"Easybuy\"&gt;,  \n    #&lt;Delivery:0x007f8e989f98a8 @type=:standard, @price=5.0&gt;],   \n[#&lt;Supermarket:0x007f8e99039f88 @id=2, @name=\"Walmart\"&gt;,  \n    #&lt;Delivery:0x007f8e989f98a8 @type=:standard, @price=5.0&gt;],   \n[#&lt;Supermarket:0x007f8e9901a390 @id=3, @name=\"Forragers\"&gt;,  \n    #&lt;Delivery:0x007f8e989eae20 @type=:express, @price=10.0&gt;]]\n</code></pre>\n\n<p>I want to iterate over each array inside the array and find out how many Delivery's within the array have @type:standard.  Is this possible? Thank you in advance</p>\n"}, {"tags": ["ruby", "powershell"], "comments": [{"owner": {"reputation": 353, "user_id": 3361364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2e6Yy.jpg?s=128&g=1", "display_name": "innuendomaximus", "link": "https://stackoverflow.com/users/3361364/innuendomaximus"}, "edited": false, "score": 0, "creation_date": 1494350169, "post_id": 43875694, "comment_id": 74787005, "body": "What error do you get?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494355303, "post_id": 43875694, "comment_id": 74789924, "body": "See &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and Jon Skeet&#39;s &quot;<a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">Writing the perfect question</a>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7986255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ae07a7a63aa1f64c29700a52a823e3?s=128&d=identicon&r=PG&f=1", "display_name": "charan k", "link": "https://stackoverflow.com/users/7986255/charan-k"}, "edited": false, "score": 0, "creation_date": 1494359788, "post_id": 43876305, "comment_id": 74792542, "body": "I tried it but giving me error: SyntaxError  c:/local-mode-cache/cache/cookbooks/tsd_atlasapi/recipes/def&zwnj;&#8203;ault.rb:435: syntax error, unexpected tCONSTANT, expecting &#39;)&#39; ...ce &#39;(?&lt;=&lt;add key=&quot;EdmundsApi&quot; value=&quot;)[^&quot;]*&#39;, $a | Set-Co...       ^ c:/local-mode-cache/cache/cookbooks/tsd_atlasapi/recipes/def&zwnj;&#8203;ault.rb:435: syntax error, unexpected &#39;)&#39;, expecting &#39;}&#39; ...dd key=&quot;EdmundsApi&quot; value=&quot;)[^&quot;]*&#39;, $a | Set-Content C:\\i...                             ^"}, {"owner": {"reputation": 353, "user_id": 3361364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2e6Yy.jpg?s=128&g=1", "display_name": "innuendomaximus", "link": "https://stackoverflow.com/users/3361364/innuendomaximus"}, "edited": false, "score": 0, "creation_date": 1494396230, "post_id": 43876305, "comment_id": 74803663, "body": "You need to check your quotes"}], "tags": [], "owner": {"reputation": 353, "user_id": 3361364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2e6Yy.jpg?s=128&g=1", "display_name": "innuendomaximus", "link": "https://stackoverflow.com/users/3361364/innuendomaximus"}, "is_accepted": false, "score": 0, "last_activity_date": 1494355378, "last_edit_date": 1495540022, "creation_date": 1494350973, "answer_id": 43876305, "question_id": 43875694, "link": "https://stackoverflow.com/questions/43875694/writing-encoded-content-to-ps1-file/43876305#43876305", "title": "writing encoded content to .ps1 file", "body": "<p>The syntax is either:</p>\n\n<pre><code>File.open(\"test.ps1\", w) {|f| f.write(\"$a = type c://edmundsapi-final ;(Get-Content C:\\inetpub\\sites\\tsd_atlasapi\\AppSettings.config) -replace '(?&lt;=&lt;add key=\"Edmunds\" value=\")[^\"]*', $a | Set-Content C:\\inetpub\\sites\\tsd_atlasapi\\AppSettings.config \") } \n</code></pre>\n\n<p>or </p>\n\n<pre><code>out_file = File.new(\"test.ps1\", \"w\") \nout_file.puts(\"$a = type c://edmundsapi-final ;(Get-Content C:\\inetpub\\sites\\tsd_atlasapi\\AppSettings.config) -replace '(?&lt;=&lt;add key=\"Edmunds\" value=\")[^\"]*', $a | Set-Content C:\\inetpub\\sites\\tsd_atlasapi\\AppSettings.config \")\n\nout_file.close\n</code></pre>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/7911669/create-file-in-ruby\">How to create a file in Ruby</a>\" for a possible duplicate.</p>\n"}], "owner": {"reputation": 11, "user_id": 7986255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33ae07a7a63aa1f64c29700a52a823e3?s=128&d=identicon&r=PG&f=1", "display_name": "charan k", "link": "https://stackoverflow.com/users/7986255/charan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1494355378, "creation_date": 1494348899, "last_edit_date": 1494349091, "question_id": 43875694, "link": "https://stackoverflow.com/questions/43875694/writing-encoded-content-to-ps1-file", "title": "writing encoded content to .ps1 file", "body": "<p>I am trying to create a file .ps1 and writing  the content using ruby.But i'm getting error.Below is the code </p>\n\n<pre><code>output = File.open( \"test.ps1\", \"w\" )\n  output &lt;&lt; \"$a = type c://edmundsapi-final ;(Get-Content C:\\inetpub\\sites\\tsd_atlasapi\\AppSettings.config) -replace '(?&lt;=&lt;add key=\"Edmunds\" value=\")[^\"]*', $a | Set-Content C:\\inetpub\\sites\\tsd_atlasapi\\AppSettings.config \"\n output.close\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1494348601, "post_id": 43875401, "comment_id": 74786119, "body": "What exactly is your issue?"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1494349255, "post_id": 43875401, "comment_id": 74786469, "body": "@max i&#39;ve never done something like this before is there anything that i should do to upload pictures into my seed file so that they can appear right next to the name of the city. Like can I do <code>Homecity.create!(Hometown:&quot;Austin&quot;, Cityavatar: &quot;&#47;images&#47;:style&#47;Austin.png&quot;)</code>"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494350047, "post_id": 43875401, "comment_id": 74786911, "body": "@Iceman i think that&#39;s a great starting point, i&#39;m going to try to plug away at an idea that just hit me that I think might work without relying on urls."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494350125, "post_id": 43875401, "comment_id": 74786973, "body": "Ok, I&#39;ve used this method myself, works well."}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494355250, "post_id": 43875401, "comment_id": 74789902, "body": "@Iceman tried it and gave it my best shot, but for somereason my liberty statue photo does not appear next to my New York City even though I thought I followed all the right steps in paperclip."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494361813, "post_id": 43875401, "comment_id": 74793608, "body": "Well, whether the image appears there has nothing to do with paperclip per se. Displaying an image in a dropdown is not my specialty, but you will need some html, css or js magic I presume."}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1494362866, "post_id": 43875401, "comment_id": 74794171, "body": "got it i&#39;ll keep on cracking on it and share what I find. Thanks @Iceman"}], "owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "closed_date": 1494401628, "answer_count": 0, "score": 1, "last_activity_date": 1494355145, "creation_date": 1494347912, "last_edit_date": 1494355145, "question_id": 43875401, "link": "https://stackoverflow.com/questions/43875401/displaying-an-image-from-rails-seeds-rb", "closed_reason": "Duplicate", "title": "Displaying an Image from Rails Seeds.rb", "body": "<p>I'm trying to show a User's home town from a drop down menu. The list of city names are in my seeds.rb file and work great. But, I would like to have a picture right next to City Name (A photo of Statue of Liberty for NYC, Golden Gate Bridge for San Fran, etc.) I'm using paperclip and have never done something like this on my seed file before.</p>\n\n<p><strong>What I'm hoping to do</strong>\n<a href=\"https://i.stack.imgur.com/8veHY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8veHY.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>What I have right now</strong>\n<a href=\"https://i.stack.imgur.com/9Sl0I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Sl0I.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Error</strong>\nWhen adding avatar using paperclip and restarting server i get this error -> I believe its due to my views and seeds.rb --> \nundefined method `avatar' for #</p>\n\n<p><strong>User.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\nbelongs_to :homecity, optional: true    \nbelongs_to :university, optional: true\nhas_attached_file :avatar, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }, default_url: \"/images/:style/missing.png\"\nvalidates_attachment_content_type :avatar, content_type: /\\Aimage\\/.*\\z/\nend\n</code></pre>\n\n<p><strong>Homecity.rb</strong></p>\n\n<pre><code>class Homecity &lt; ApplicationRecord\nhas_many :users\nhas_attached_file :avatar, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }, default_url: \"/images/:style/liberty.png\"\nvalidates_attachment_content_type :avatar, content_type: /\\Aimage\\/.*\\z/\nend\n</code></pre>\n\n<p><strong>homecities_controller.rb</strong></p>\n\n<pre><code>class HomecitiesController &lt; ApplicationController\nbefore_action :authenticate_user!, only: [:new, :create]\ndef create\n@homecity = Homecity.new(homecity_params)\nif @homecity.save\n  render json: @homecity\nelse\n  render json: {errors: @homecity.errors.full_messages}\nend\nend\nprivate\ndef homecity_params\nparams.require(:homecity).permit(:Hometown, :avatar)\nend\nend\n</code></pre>\n\n<p><strong>Seeds.rb</strong></p>\n\n<pre><code>Homecity.destroy_all\nbigapple = Homecity.create!(Hometown:\"New York City\", avatar)\ntechhub = Homecity.create!(Hometown:\"San Francisco\", avatar)\nlonghorns = Homecity.create!(Hometown:\"Austin\", avatar)\nangels = Homecity.create!(Hometown:\"Los Angeles\", avatar)\n</code></pre>\n\n<p><strong>Edit.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n&lt;%= f.label :homecity, \"Home Town\" %&gt;&lt;br&gt;\n&lt;%= f.select :homecity_id, Homecity.all.pluck(:Hometown, :id), Homecity.avatar, {}, { class: \"selectize1\" } %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>edit.js</strong></p>\n\n<pre><code>$(document).on(\"turbolinks:load\", function() {\nvar selectizeCallback = null;\n$(\".homecity-modal\").on(\"hide.bs.modal\", function(e) {\nif (selectizeCallback != null) {\n  selectizeCallback();\n  selecitzeCallback = null;\n}\n\n$(\"#new_homecity\").trigger(\"reset\");\n$.rails.enableFormElements($(\"#new_homecity\"));\n});\n$(\"#new_homecity\").on(\"submit\", function(e) {\ne.preventDefault();\n$.ajax({\n  method: \"POST\",\n  url: $(this).attr(\"action\"),\n  data: $(this).serialize(),\n  success: function(response) {\n    selectizeCallback({value: response.id, text: response.Hometown});\n    selectizeCallback = null;\n\n    $(\".homecity-modal\").modal('toggle');\n  }\n});\n});\n$(\".selectize1\").selectize({\n maxOptions: 3,\ncreate: function(input, callback) {\n  selectizeCallback = callback;\n\n\n  $(\".homecity-modal\").modal();\n  $(\"#homecity_Hometown\").val(input);\n}\n});\n});\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "api", "activerecord"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1494356547, "post_id": 43875249, "comment_id": 74790695, "body": "Is the array static or is it dynamic? If it&#39;s dynamic, you probably want to store it in a database with a date stamp or some mechanism of determine which record you want. Consider the scenario where your app crashed and restarted. Would you need to recreate that list or would you want it to be stored somewhere?"}, {"owner": {"reputation": 13, "user_id": 7829891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a4888e6f19198ceaa4e793436c34dd5?s=128&d=identicon&r=PG&f=1", "display_name": "Sburns", "link": "https://stackoverflow.com/users/7829891/sburns"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494357579, "post_id": 43875249, "comment_id": 74791263, "body": "Stumbled across this issue shortly after the fix, I set up the shuffle in the seed file instead, so the array is now static."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7829891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a4888e6f19198ceaa4e793436c34dd5?s=128&d=identicon&r=PG&f=1", "display_name": "Sburns", "link": "https://stackoverflow.com/users/7829891/sburns"}, "edited": false, "score": 0, "creation_date": 1494348894, "post_id": 43875378, "comment_id": 74786268, "body": "I think this is exactly what I was looking for, thank you!"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 1, "last_activity_date": 1494348301, "last_edit_date": 1494348301, "creation_date": 1494347835, "answer_id": 43875378, "question_id": 43875249, "link": "https://stackoverflow.com/questions/43875249/pull-from-an-array-every-3-days-time-iteration/43875378#43875378", "title": "Pull from an array every 3 days.. time iteration", "body": "<p>You can use  <code>.cycle</code>, <code>.step</code> and <code>.next</code> all from <a href=\"https://ruby-doc.org/core-2.2.0/Enumerator.html\" rel=\"nofollow noreferrer\">Enumerator</a></p>\n\n<pre><code>require 'date'\nstart_time = DateTime.new(2017,5,9,00,00)\nend_time = DateTime.new(2018,5,9,00,00)\n\n# create an enumerator\ntheme = [\"Superhero\", \"Star-Wars\", \"Pokemon\", \"Other-Animals\", \"Hats\", \"Sports\"].cycle\n\n# iterate using step over 3 days\nstart_time.step(end_time, 3) do |date|\n    puts \"#{date} - #{theme.next}\"\n    # Do something like this:\n    render json: theme if DateTime.now.beginning_of_day &lt;= date + 2\nend\n# =&gt; 2017-05-09T00:00:00+00:00 - Superhero\n# =&gt; 2017-05-12T00:00:00+00:00 - Star-Wars\n# =&gt; 2017-05-15T00:00:00+00:00 - Pokemon\n# =&gt; 2017-05-18T00:00:00+00:00 - Other-Animals\n# =&gt; 2017-05-21T00:00:00+00:00 - Hats\n# =&gt; 2017-05-24T00:00:00+00:00 - Sports\n# =&gt; 2017-05-27T00:00:00+00:00 - Superhero\n#...\n</code></pre>\n\n<p>Also <code>DateTime.now.beginning_of_day</code> depends on ActiveSupport but you can easily implement something similar,  <code>Date.today.to_datetime</code> etc</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7829891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a4888e6f19198ceaa4e793436c34dd5?s=128&d=identicon&r=PG&f=1", "display_name": "Sburns", "link": "https://stackoverflow.com/users/7829891/sburns"}, "edited": false, "score": 0, "creation_date": 1494349666, "post_id": 43875421, "comment_id": 74786694, "body": "I had the whatever gem working, but I&#39;m trying to push this to heroku, which doesn&#39;t accept the whatever gem, and I had bad luck with the alternative scheduler gem. Thank you! Great solution without heroku"}, {"owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "reply_to_user": {"reputation": 13, "user_id": 7829891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a4888e6f19198ceaa4e793436c34dd5?s=128&d=identicon&r=PG&f=1", "display_name": "Sburns", "link": "https://stackoverflow.com/users/7829891/sburns"}, "edited": false, "score": 1, "creation_date": 1494350085, "post_id": 43875421, "comment_id": 74786945, "body": "I think you can create a rake task and use <a href=\"https://devcenter.heroku.com/articles/scheduler#scheduling-jobs\" rel=\"nofollow noreferrer\">Heroku Scheduler</a>."}], "tags": [], "owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "is_accepted": false, "score": 0, "last_activity_date": 1494347971, "creation_date": 1494347971, "answer_id": 43875421, "question_id": 43875249, "link": "https://stackoverflow.com/questions/43875249/pull-from-an-array-every-3-days-time-iteration/43875421#43875421", "title": "Pull from an array every 3 days.. time iteration", "body": "<p>Use <code>cronjob</code> for this kind of operations. <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">whenever</a> is a great gem that creates and updates <code>crontab</code> with Ruby DSL. For example you can write your task as simple as:</p>\n\n<pre><code>every 3.days do\n  # some code to be execute\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7829891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a4888e6f19198ceaa4e793436c34dd5?s=128&d=identicon&r=PG&f=1", "display_name": "Sburns", "link": "https://stackoverflow.com/users/7829891/sburns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 43875378, "answer_count": 2, "score": 0, "last_activity_date": 1494348301, "creation_date": 1494347361, "question_id": 43875249, "link": "https://stackoverflow.com/questions/43875249/pull-from-an-array-every-3-days-time-iteration", "title": "Pull from an array every 3 days.. time iteration", "body": "<p>I'm setting up a rails API, that I want to <code>pop</code> from an array every 3 days (72 hours). I'm a little lost how to iterate through dates to correctly select from my array.  Here's what I'm currently working with.</p>\n\n<pre><code>def index\n  theme = [\"Superhero\", \"Star-Wars\", \"Pokemon\", \"Other-Animals\", \"Hats\", \"Sports\"]\n  current_theme = theme.shuffle.pop\n  start_time = DateTime.new(2017,5,9,00,00)\n  end_time = DateTime.new(2018,5,9,00,00)\n\n  start_time.upto(end_time) do |t|\n    cycle = t*3\n    while t = cycle do \n      render json: current_theme\n      // bad loop \n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1494346801, "post_id": 43874787, "comment_id": 74785015, "body": "What is the logic you want to implement? What&#39;s your data? Is it a big string or an array of strings?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494347108, "post_id": 43874787, "comment_id": 74785227, "body": "@scphantm I have tried to re-word your title/question to make it more understandable. Please review my changes, and re-edit if necessary. In future, please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> for a summary on what makes a good question."}], "answers": [{"comments": [{"owner": {"reputation": 3421, "user_id": 425715, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/xGKdY.png?s=128&g=1", "display_name": "scphantm", "link": "https://stackoverflow.com/users/425715/scphantm"}, "edited": false, "score": 0, "creation_date": 1494346846, "post_id": 43874996, "comment_id": 74785043, "body": "Damn, i was close.  Thank you so much.  In another 20 years i may figure out regex."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 3421, "user_id": 425715, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/xGKdY.png?s=128&g=1", "display_name": "scphantm", "link": "https://stackoverflow.com/users/425715/scphantm"}, "edited": false, "score": 0, "creation_date": 1494347008, "post_id": 43874996, "comment_id": 74785154, "body": "@scphantm: If you have not done that yet, do all lessons at <a href=\"http://regexone.com/\" rel=\"nofollow noreferrer\">regexone.com</a>, read through <a href=\"http://www.regular-expressions.info\" rel=\"nofollow noreferrer\">regular-expressions.info</a>, <a href=\"http://stackoverflow.com/tags/regex/info\">regex SO tag description</a> (with many other links to great online resources), and the community SO post called <a href=\"http://stackoverflow.com/questions/22937618/reference-what-does-this-regex-mean\">What does the regex mean</a>. A <a href=\"http://rexegg.com\" rel=\"nofollow noreferrer\">rexegg.com</a> is also a great site, you may learn a lot about how lookarounds work there."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 3421, "user_id": 425715, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/xGKdY.png?s=128&g=1", "display_name": "scphantm", "link": "https://stackoverflow.com/users/425715/scphantm"}, "edited": false, "score": 0, "creation_date": 1494483832, "post_id": 43874996, "comment_id": 74849024, "body": "@scphantm: If the answer turned out helpful to you, please consider also upvoting."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1494346595, "creation_date": 1494346595, "answer_id": 43874996, "question_id": 43874787, "link": "https://stackoverflow.com/questions/43874787/matching-all-filenames-with-given-extensions-except-a-specific-filename/43874996#43874996", "title": "Matching all filenames with given extensions, except a specific filename", "body": "<p>Your regex is \"malfunctioning\" because you use a lookahead as an alternative branch, and it is thus not restricting the pattern any longer.</p>\n\n<p>You seem to want to match strings that end with <code>.jar</code> or <code>.exe</code> and that do not end with <code>/gradle-wrapper.jar</code>. Use</p>\n\n<pre><code>^(?!.*/gradle-wrapper\\.jar$).*\\.(?:jar|exe)$\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/DcJLrz/1\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p><strong>Details</strong>:</p>\n\n<ul>\n<li><code>^</code> - start of a string</li>\n<li><code>(?!.*/gradle-wrapper\\.jar$)</code> - fail the match if after any 0+ chars (<code>.*</code>) there is <code>/gradle-wrapper.jar</code> substring immediately followed with the end of string (<code>$</code>)</li>\n<li><code>.*\\.</code> - match any 0+ chars (well, other than line break chars) up to the last <code>.</code> </li>\n<li><code>(?:jar|exe)</code> - either <code>jar</code> or <code>exe</code></li>\n<li><code>$</code> - end of string.</li>\n</ul>\n"}], "owner": {"reputation": 3421, "user_id": 425715, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/xGKdY.png?s=128&g=1", "display_name": "scphantm", "link": "https://stackoverflow.com/users/425715/scphantm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 43874996, "answer_count": 1, "score": 1, "last_activity_date": 1494346951, "creation_date": 1494345967, "last_edit_date": 1494346951, "question_id": 43874787, "link": "https://stackoverflow.com/questions/43874787/matching-all-filenames-with-given-extensions-except-a-specific-filename", "title": "Matching all filenames with given extensions, except a specific filename", "body": "<p>I have the following regex:</p>\n\n<pre><code>^((?!.*/gradle-wrapper\\.jar$)|(.*\\.jar$)|(.*\\.exe$))\n</code></pre>\n\n<p>and the following data:</p>\n\n<pre><code>rupe-engine/src/main/groovy/com/rupe/engine/JongoAutoConfiguration.java\n\ngradle/wrapper/gradle-wrapper.jar\n\ngradle/wrapper/gradle-bundle.exe\n\ngradle/wrapexe/gradle.git\n\ntestit.jar\n</code></pre>\n\n<p>Expected result:</p>\n\n<p>Match <code>gradle/wrapper/gradle-bundle.exe</code> and <code>testit.jar</code>.</p>\n\n<p>Actual result:</p>\n\n<p>Also matching <code>gradle/wrapper/gradle-wrapper.jar</code>, despite me trying to \"black-list\" this filename.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "calendar", "google-calendar-api"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1494356798, "post_id": 43873854, "comment_id": 74790845, "body": "In order to use the Google API any user has to go through an oauth flow."}], "owner": {"reputation": 580, "user_id": 6545696, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/20ccef418b14f7c1760c129883fe04f0?s=128&d=identicon&r=PG&f=1", "display_name": "rebbailey", "link": "https://stackoverflow.com/users/6545696/rebbailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1494343438, "creation_date": 1494343438, "question_id": 43873854, "link": "https://stackoverflow.com/questions/43873854/rails-allow-user-to-retrieve-my-google-calendar-events", "title": "Rails: Allow user to retrieve my Google Calendar events", "body": "<p>I am ultimately trying to allow a User to schedule an appointment inside of my Google Calendar from a Rails application I built. First, I will need to retrieve a list of already taken Google Calendar events. I only know how to allow the User to access their Google Calendar events through Oauth2.0, but is there a way to allow every user to have access to mine?</p>\n\n<p>I am not asking for any code, as much as I am asking for direction and clarification regarding this issue, thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "decorator", "activemodel", "virtual-attribute"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1494343731, "post_id": 43873727, "comment_id": 74782983, "body": "I don&#39;t understand , you want to send <code>#&lt;Foo id: &quot;abc123&quot;,bar_name: &quot;baz&quot;&gt;</code> to clients or you want <code>Foo</code> objects to be printed like that in console(e.g. <code>puts fooobj # =&gt; #&lt;Foo id: &quot;...&quot;,bar_name: &quot;baz&quot;&gt;</code> ) ?"}, {"owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "reply_to_user": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1494344062, "post_id": 43873727, "comment_id": 74783227, "body": "Let&#39;s say that I&#39;m not sending anything to a client. I just want the result of the method to be shown in the console without explicitly calling the method."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1494345611, "post_id": 43873727, "comment_id": 74784267, "body": "Do you want this in the <code>as_json</code> response? If so you can just redefine <code>as_json</code> in the model itself. If you want this in the object representation you can redefine <code>inspect</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "edited": false, "score": 0, "creation_date": 1494343984, "post_id": 43873963, "comment_id": 74783176, "body": "Thanks, but that and <code>attr_reader</code> don&#39;t seem to automatically include the virtual attribute when the object is retrieved. I&#39;m purely asking if I can get that console output without making an explicit call to the method."}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "reply_to_user": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "edited": false, "score": 1, "creation_date": 1494344510, "post_id": 43873963, "comment_id": 74783546, "body": "It&#39;s not possible to include the virtual attribute without a call to the method. There&#39;s also <code>model.instance_methods</code>, but that&#39;s just a slightly less explicit call. Short of monkey-patching Rails&#39; built-in <code>attr_accessor</code>, I&#39;m afraid you&#39;re going to have to make that method call."}], "tags": [], "owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "is_accepted": false, "score": 0, "last_activity_date": 1494343732, "creation_date": 1494343732, "answer_id": 43873963, "question_id": 43873727, "link": "https://stackoverflow.com/questions/43873727/is-is-possible-to-return-virtual-attributes-automatically-in-rails-models/43873963#43873963", "title": "Is is possible to return virtual attributes automatically in Rails models?", "body": "<p>You could use <code>attr_accessor</code> - per the <a href=\"https://apidock.com/ruby/Module/attr_accessor\" rel=\"nofollow noreferrer\">Rails docs</a>:</p>\n\n<blockquote>\n  <p>Defines a named attribute for this module, where the name is symbol.id2name, creating an instance variable (@name) and a corresponding access method to read it. Also creates a method called name= to set the attribute.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "edited": false, "score": 0, "creation_date": 1494345928, "post_id": 43874753, "comment_id": 74784485, "body": "Yes, that actually solves my real case that I mentioned at the end of my question. Someone actually posted that solution earlier and then deleted it. \ud83d\ude15 But I did still want to know whether or not it was possible to do prior to rendering in a single call. @mmichael seems to have confirmed that it is not."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "edited": false, "score": 1, "creation_date": 1494345982, "post_id": 43874753, "comment_id": 74784513, "body": "What do you mean &quot;prior to rendering&quot; if you want it in the object notation you would have to redefine <code>inspect</code>"}, {"owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "edited": false, "score": 0, "creation_date": 1494346376, "post_id": 43874753, "comment_id": 74784755, "body": "I guess I&#39;ve learned that whether I&#39;m in the console, a view, or receiving json, the inclusion of the virtual attribute is purely a presentational concern. Otherwise, there is no point in &quot;automatically&quot; including it in the return value when I can just make the method call. So the correct answer is something like, &quot;yes, it&#39;s possible, but not worth doing when all that I need is to override the <code>as_json</code>&quot;. Thank you."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1494346455, "last_edit_date": 1494346455, "creation_date": 1494345871, "answer_id": 43874753, "question_id": 43873727, "link": "https://stackoverflow.com/questions/43873727/is-is-possible-to-return-virtual-attributes-automatically-in-rails-models/43874753#43874753", "title": "Is is possible to return virtual attributes automatically in Rails models?", "body": "<p>Not 100% sure I understand if your concern is related to <code>as_json</code> but if so this will work </p>\n\n<pre><code>class Foo\n  has_one :bar\n\n  def bar_name\n    bar.name\n  end\n  def as_json(options={})\n    super(options.merge!(methods: :bar_name))\n  end\nend\n</code></pre>\n\n<p>Now a call to <code>@foo.as_json</code> will by default include the <code>bar_name</code> like your explicit example does.</p>\n\n<p>Ugly would not recommend but you could change the inspection of foo e.g. <code>#&lt;Foo id: \"abc123\", bar_name: \"baz\"&gt;</code> as follows</p>\n\n<pre><code>class Foo\n  def inspect\n    base_string = \"#&lt;#{self.class.name}:#{self.object_id} \"\n    fields = self.attributes.map {|k,v| \"#{k}: #{v.inspect}\"}\n    fields &lt;&lt; \"bar_name: #{self.bar_name.inspect}\"\n    base_string &lt;&lt; fields.join(\", \") &lt;&lt; \"&gt;\"\n  end\nend\n</code></pre>\n\n<p>Then the \"inspection notation\" would show that information although I am still unclear if this is your intention and if so why you would want this.</p>\n"}], "owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 43874753, "answer_count": 2, "score": 2, "last_activity_date": 1494346455, "creation_date": 1494343091, "question_id": 43873727, "link": "https://stackoverflow.com/questions/43873727/is-is-possible-to-return-virtual-attributes-automatically-in-rails-models", "title": "Is is possible to return virtual attributes automatically in Rails models?", "body": "<p>Given:</p>\n\n<pre><code>class Foo\n  has_one :bar\n\n  def bar_name\n    bar.name\n  end\nend\n\nclass Bar\n  belongs_to :foo\nend\n</code></pre>\n\n<p>In the console or in a view, I can <code>@foo.bar_name</code> to get <code>'baz'</code>.</p>\n\n<p>I'm aware that I can <code>@foo.as_json(methods: :bar_name)</code> to get <code>{\"id\"=&gt;\"abc123\", \"bar_name\"=&gt;\"baz\"}</code>.</p>\n\n<p>I could also denormalize the attribute and make it non-virtual, but I would rather not do that in this case.</p>\n\n<p>Is it possible to automatically return the model with the virtual attribute included?</p>\n\n<p><code>#&lt;Foo id: \"abc123\", bar_name: \"baz\"&gt;</code></p>\n\n<p>I want to do this because I am constructing a large object with nested collections of models, and the <code>as_json</code> call is abstracted away from me.</p>\n"}, {"tags": ["ruby", "installation", "rubygems"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1494342303, "post_id": 43873021, "comment_id": 74781951, "body": "Most common reason: your $PATH is still wrong. Basic commands for troubleshooting: <code>which ruby</code>, and <code>echo $PATH</code>. If you need more help then please post the results of those commands here too."}, {"owner": {"reputation": 15, "user_id": 7731881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1e1976d70cee3fdbf035bbf406cf6d30?s=128&d=identicon&r=PG&f=1", "display_name": "zak", "link": "https://stackoverflow.com/users/7731881/zak"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1494342865, "post_id": 43873021, "comment_id": 74782364, "body": "<code>which ruby</code> gives me /usr/local/bin/ruby"}, {"owner": {"reputation": 15, "user_id": 7731881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1e1976d70cee3fdbf035bbf406cf6d30?s=128&d=identicon&r=PG&f=1", "display_name": "zak", "link": "https://stackoverflow.com/users/7731881/zak"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1494342906, "post_id": 43873021, "comment_id": 74782397, "body": "<code>echo $PATH</code> gives me /usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1494343437, "post_id": 43873021, "comment_id": 74782786, "body": "What $PATH statement did you remove?  you may need to launch a new shell/terminal window to reflect the change.  Editing the .bash_profile won&#39;t magically change your existing window."}, {"owner": {"reputation": 15, "user_id": 7731881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1e1976d70cee3fdbf035bbf406cf6d30?s=128&d=identicon&r=PG&f=1", "display_name": "zak", "link": "https://stackoverflow.com/users/7731881/zak"}, "edited": false, "score": 0, "creation_date": 1494343691, "post_id": 43873021, "comment_id": 74782964, "body": "Joe, I did, I even restarted my laptop and used the source .bash_profile. The $PATH statement I used in the first place was to get the latest version to work correctly, see here:<a href=\"http://stackoverflow.com/questions/12287882/installing-ruby-with-homebrew\">link</a>"}, {"owner": {"reputation": 15, "user_id": 7731881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1e1976d70cee3fdbf035bbf406cf6d30?s=128&d=identicon&r=PG&f=1", "display_name": "zak", "link": "https://stackoverflow.com/users/7731881/zak"}, "edited": false, "score": 0, "creation_date": 1494351070, "post_id": 43873021, "comment_id": 74787531, "body": "I&#39;ve solved it anyways, had to use <code>brew unlink ruby</code> Thanks anyways."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1494354636, "post_id": 43873021, "comment_id": 74789485, "body": "You can answer &amp; accept your own question, that way it doesn&#39;t appear unsolved."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 7731881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1e1976d70cee3fdbf035bbf406cf6d30?s=128&d=identicon&r=PG&f=1", "display_name": "zak", "link": "https://stackoverflow.com/users/7731881/zak"}, "is_accepted": false, "score": 0, "last_activity_date": 1494361631, "creation_date": 1494361631, "answer_id": 43879252, "question_id": 43873021, "link": "https://stackoverflow.com/questions/43873021/reverting-back-to-ruby-2-0-0-without-rvm/43879252#43879252", "title": "Reverting back to Ruby 2.0.0 without RVM", "body": "<p>Just unlinked homebrew from Ruby by using <code>brew unlink ruby</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7731881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1e1976d70cee3fdbf035bbf406cf6d30?s=128&d=identicon&r=PG&f=1", "display_name": "zak", "link": "https://stackoverflow.com/users/7731881/zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1494361631, "creation_date": 1494341308, "last_edit_date": 1494351516, "question_id": 43873021, "link": "https://stackoverflow.com/questions/43873021/reverting-back-to-ruby-2-0-0-without-rvm", "title": "Reverting back to Ruby 2.0.0 without RVM", "body": "<p>I recently installed the latest version of Ruby which is 2.4.1 to run a script that required a gem called prawn. Now, I installed ruby using Homebrew and did the export path within ~/.bash_profile, however, removing the $PATH statement is not allowing me to revert back to 2.0.0 (system default) any idea, how, or why.</p>\n\n<p>What I did try doing was uninstalling ruby with homebrew, (the latest version) however, that just removed ruby all together; using ruby -v would say there was no ruby actually installed despite the fact that 2.0.0 is still there.</p>\n\n<p><code>ruby -v</code> returns ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]</p>\n\n<p><code>which ruby</code> returns <code>/usr/local/bin/ruby</code></p>\n\n<p><code>whereis ruby</code> returns <code>/usr/bin/ruby</code></p>\n\n<p><code>echo $PATH</code> returns <code>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></p>\n\n<p>SOLVED. Used <code>brew unlink ruby</code></p>\n"}, {"tags": ["python", "ruby", "yaml", "pyyaml"], "answers": [{"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 1, "creation_date": 1494776248, "post_id": 43873157, "comment_id": 74961433, "body": "<code>ruamel.yaml</code> wlll load sexagecimals if your YAML document starts with <code>%YAML 1.1</code> or specify that version as a parameter to <code>safe_load</code>, so  the package did not get rid of them. Sexagesimals are not in 1.2 and that is what <code>ruamel.yaml</code> defaults to, it also supports other 1.2 features such as <code>0o</code> for octals. (Disclaimer: I am &quot;they&quot; you are referring to)."}, {"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1494779396, "post_id": 43873157, "comment_id": 74962536, "body": "@Anthon: I meant that in YAML 1.2 there are no sexagecimals, not in package ofc"}], "tags": [], "owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "is_accepted": true, "score": 5, "last_activity_date": 1494779407, "last_edit_date": 1494779407, "creation_date": 1494341643, "answer_id": 43873157, "question_id": 43872999, "link": "https://stackoverflow.com/questions/43872999/pyyaml-converts-mac-address-to-number/43873157#43873157", "title": "pyyaml converts mac address to number", "body": "<p><a href=\"https://github.com/yaml/pyyaml\" rel=\"nofollow noreferrer\"><code>pyyaml</code></a> works with YAML version 1.1 which supports <a href=\"http://yaml.org/type/int.html\" rel=\"nofollow noreferrer\">sexagecimal numbers</a>, so positive integers lower than 60 separated with colons are considered as single number and you get its decimal presentation. If you want your MAC-addresses to be recognized as strings just add quotes like</p>\n\n<pre><code>&gt;&gt;&gt;yaml.safe_load('abc: \"11:00:00:00:00:00\"')\n{'abc': '11:00:00:00:00:00'}\n</code></pre>\n\n<p>Also there is <a href=\"https://yaml.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">ruamel.yaml</a> which seems to support YAML version 1.2, where they've got rid of sexagecimals:</p>\n\n<pre><code>&gt;&gt;&gt;import ruamel.yaml\n&gt;&gt;&gt;ruamel.yaml.safe_load('abc: 11:00:00:00:00')\n{'abc': '11:00:00:00:00'}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5701, "user_id": 1943282, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6fabea4388046ce94b8a5d71546a7d76?s=128&d=identicon&r=PG&f=1", "display_name": "Ansuman Bebarta", "link": "https://stackoverflow.com/users/1943282/ansuman-bebarta"}, "edited": false, "score": 0, "creation_date": 1494353220, "post_id": 43873228, "comment_id": 74788659, "body": "yes i checked with safe_load as well and got same result as load"}], "tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": false, "score": 1, "last_activity_date": 1494363186, "last_edit_date": 1494363186, "creation_date": 1494341824, "answer_id": 43873228, "question_id": 43872999, "link": "https://stackoverflow.com/questions/43872999/pyyaml-converts-mac-address-to-number/43873228#43873228", "title": "pyyaml converts mac address to number", "body": "<p><code>11:00:00:00:00:00</code>\u00a0\u00a0\u00a0 <em>(<code>11 * 60 * 60 * 60 * 60 * 60 =  8553600000</code>)</em><br>\n<code>99:00:00:00:00:00</code>\u00a0\u00a0\u00a0 <em>(<code>99 * 60 * 60 * 60 * 60 * 60 = 76982400000</code>)</em><br>\nare considered to be <em>numbers</em> because they both begin with a <em>decimal number</em> and all other parts are decimal numbers from <code>0</code> to <code>59</code>.</p>\n\n<p><code>ff:00:00:00:00:00</code> is a <em>string</em> as it contains a <em>non-digit</em> (alphabetic) symbol.</p>\n\n<p><code>52:00:00:60:00:00</code> is a <em>string</em> as it contains a number <em>out of range of <code>0</code> to <code>59</code></em> which is <em>not in the 1st position</em>.</p>\n\n<p>To be more specific:</p>\n\n<p>If the <em>first part</em> is an (arbitrary) decimal number and <em>all other parts</em> are numbers from <code>0</code> to <code>59</code>, it is supposed that <em>individual parts</em> (excluding the first) are digits in the positional numeral system of base <code>60</code>, so that it represents an <em>integer</em>.</p>\n\n<p>In all other cases it is supposed to be a <em>string</em>.</p>\n"}], "owner": {"reputation": 5701, "user_id": 1943282, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6fabea4388046ce94b8a5d71546a7d76?s=128&d=identicon&r=PG&f=1", "display_name": "Ansuman Bebarta", "link": "https://stackoverflow.com/users/1943282/ansuman-bebarta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 43873157, "answer_count": 2, "score": 2, "last_activity_date": 1494779407, "creation_date": 1494341240, "last_edit_date": 1494342055, "question_id": 43872999, "link": "https://stackoverflow.com/questions/43872999/pyyaml-converts-mac-address-to-number", "title": "pyyaml converts mac address to number", "body": "<p>I got this weird issue while loading a yaml file with a mac address where the address got converted to number.</p>\n\n<pre><code>&gt;&gt;&gt; yaml.safe_load('abc: 11:00:00:00:00:00')\n{'abc': 8553600000}\n&gt;&gt;&gt; yaml.safe_load('abc: 99:00:00:00:00:00')\n{'abc': 76982400000}\n</code></pre>\n\n<p>But then I tried with following and I get answer as expected.</p>\n\n<pre><code>&gt;&gt;&gt; yaml.safe_load('abc: ff:00:00:00:00:00')\n{'abc': 'ff:00:00:00:00:00'}\n</code></pre>\n\n<p>I know solution for this which is to have the mac addresses inside quotes but I want to know reason for this behaviour.</p>\n\n<p>Interestingly, I tried same data with ruby and got similar results. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Adding new test data where it works with only numbers</p>\n\n<pre><code>&gt;&gt;&gt; yaml.load('abc: 52:00:00:60:00:00')\n{'abc': '52:00:00:60:00:00'}\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 0, "last_activity_date": 1494343115, "last_edit_date": 1494343115, "creation_date": 1494341758, "answer_id": 43873203, "question_id": 43872680, "link": "https://stackoverflow.com/questions/43872680/is-there-a-rails-way-to-titleize-and-humanize-strings-before-storing-into-databa/43873203#43873203", "title": "Is there a rails way to titleize and humanize strings before storing into database", "body": "<p>You can use model callbacks to transform the data before saving it to the DB: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html</a> - you probably want <code>before_save</code>.</p>\n\n<p>Also, if you want to ensure the record is never nil, add a validation as well.</p>\n\n<p>Example:</p>\n\n<pre><code>class Example &lt; ActiveRecord::Base\n  validates :name, presence: true\n  before_save :fixname\n\n  # Force titleize on :name attribute\n  def fixname\n    self.name = self.name.titleize\n  end\nend\n</code></pre>\n\n<p>Now your model will have a method called <code>fixname</code> that you can call anywhere on your model instance as well as having it called before saving it to the DB.</p>\n"}, {"comments": [{"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 2, "creation_date": 1494341962, "post_id": 43873239, "comment_id": 74781698, "body": "The controller is probably not the best place for manipulating the model instance before saving it to the DB."}], "tags": [], "owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "is_accepted": false, "score": 0, "last_activity_date": 1494343060, "last_edit_date": 1494343060, "creation_date": 1494341843, "answer_id": 43873239, "question_id": 43872680, "link": "https://stackoverflow.com/questions/43872680/is-there-a-rails-way-to-titleize-and-humanize-strings-before-storing-into-databa/43873239#43873239", "title": "Is there a rails way to titleize and humanize strings before storing into database", "body": "<p>If <code>humanize</code> and <code>titlerize</code> return an exception if value is nil, create an if statement, and you can make this process in one service or in one function model using <code>before_save</code> or <code>before_create</code> callbacks:</p>\n\n<pre><code>value.titleize unless value.nil?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1494343223, "last_edit_date": 1494343223, "creation_date": 1494342256, "answer_id": 43873404, "question_id": 43872680, "link": "https://stackoverflow.com/questions/43872680/is-there-a-rails-way-to-titleize-and-humanize-strings-before-storing-into-databa/43873404#43873404", "title": "Is there a rails way to titleize and humanize strings before storing into database", "body": "<p>You can create a method in your model which will take the attributes of this, and will transform as you want and/or you need, you can \"fire\" this every time you save a record using it as a <code>before_save</code> callback:</p>\n\n<p>For instance, having a model <code>User</code> which attributes <code>name</code> and <code>lastname</code> I'm using the <code>name</code> and using <code>titleize</code> on it:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  before_save :titlelize_names\n\n  def titlelize_names\n    self.name = self.name.titleize\n  end\nend\n</code></pre>\n\n<p>The params will contain the attributes as the user has typed them, but they will be saved according to what the model says:</p>\n\n<pre><code>Processing by UsersController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"...\", \"user\"=&gt;{\"name\"=&gt;\"name\", \"lastname\"=&gt;\"lastname\"}, \"commit\"=&gt;\"Create User\"}\n(0.1ms)  begin transaction\nSQL (0.8ms)  INSERT INTO \"users\" (\"name\", \"lastname\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"name\", \"Name\"], [\"lastname\", \"lastname\"]...]\n</code></pre>\n\n<p>Is the only one interaction you need to do before save the record, the view is untouched and the controller just receive it and makes what model says.</p>\n\n<p>If by any change it occurs some problem at the moment of saving the record you can use <code>throw(:abort)</code> and \"to force to halt\" the callback chain.</p>\n\n<pre><code>def titlelize_names\n  self.name = self.name.titleize\n  throw(:abort)\nend\n</code></pre>\n\n<p>In addition and depending on which method you're using with the <code>before_save</code> callback, you can add custom errors which will be available to use within your controllers, as for instance, an error identified by the key <code>:titleize_names</code> could be then handled in the controller.</p>\n\n<pre><code>def titlelize_names\n  errors.add(:titleize_names, 'An error has ocurred with the name attribute.')\n  self.name = self.name.titleize\n  throw(:abort)\nend\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6685930, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/a3wWy.jpg?s=128&g=1", "display_name": "Mahmoud Moustafa", "link": "https://stackoverflow.com/users/6685930/mahmoud-moustafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 0, "accepted_answer_id": 43873404, "answer_count": 3, "score": 0, "last_activity_date": 1494343223, "creation_date": 1494340413, "question_id": 43872680, "link": "https://stackoverflow.com/questions/43872680/is-there-a-rails-way-to-titleize-and-humanize-strings-before-storing-into-databa", "title": "Is there a rails way to titleize and humanize strings before storing into database", "body": "<p>The problem about <code>humanize</code> (and probably <code>titleize</code> too i'm not sure) is that it breaks the view if the string is <code>nil</code>.\nand then you'll have to <code>.try(:humanize)</code> instead, which is a big headache if you realized that you made that mistake way too late and you have to recheck every line of code at your views.\nWhat i'm looking for is a way i could <code>humanize</code> and <code>titleize</code> strings before storing them into the database. That way, even if i'm looking straight into my database i will see the strings <code>humanize</code>d and <code>titleize</code>d.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "percentage", "ruby-hash"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1494346033, "post_id": 43872582, "comment_id": 74784545, "body": "Use <a href=\"http://ruby-doc.org/core-2.4.1/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>Hash#transform_values</code></a> to do this."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494359297, "post_id": 43872582, "comment_id": 74792242, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked pages and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. Your question isn&#39;t asked well. Did you search? If not why? If so, where and why didn&#39;t it help? Did you write code? If not, why? If so, what is the minimum code necessary to demonstrate the problem you&#39;re asking about?"}, {"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494407524, "post_id": 43872582, "comment_id": 74810284, "body": "@theTinMan thank you. Yes I searched and didn&#39;t find what I was looking for tha&#39;ts why I asked. I think my question is clear enough with the example I gave. I got the answer I needed in just few minutes after asking. I don&#39;t know why the negative vote is for though ..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494450481, "post_id": 43872582, "comment_id": 74839351, "body": "Hover over the arrows to see what they mean. If you searched you should say where and explain why it didn&#39;t help. That helps us avoid duplicating your effort to help you and helps others find additional sources. Getting the answer in a few minutes means you should wait to see if a better answer appears. It takes about 24 hours for all the community to see a question and formulate answers. Remember, SO isn&#39;t here to solve your problem only, it&#39;s here to document solutions for everyone in the future too, so complete questions are important."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1494341076, "post_id": 43872652, "comment_id": 74781016, "body": "@AndreyDeineko thank you very much! I added <code>round(2)</code> to get only 2 numbers after the coma. Could you please explain more the <code>{ |(k, v), hash| hash[k] = </code> so I could understand better .. Thanks"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 1, "creation_date": 1494341388, "post_id": 43872652, "comment_id": 74781239, "body": "@media I edited the answer with the link to documentation. Basically you iterate over each key-value pair (<code>k</code>,<code>v</code>) and you are creating a new object on the fly <code>({})</code> - hash. So prior the first iteration hash is empty (it&#39;s initial value we gave). On the first iteration we set the <code>hash[&quot;str1&quot;]</code> to be equal to the calculated percentage based on the <code>v</code> (<code>2</code>). On the next iteration we set the <code>hash[&quot;str2&quot;]</code> to eq next calculation and so on. So in the end we have new hash object."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1494346899, "post_id": 43872652, "comment_id": 74785080, "body": "<code>&#39;%.2f%&#39; % (v * 100.0 &#47; sum)</code> might be more readable if you&#39;re used to sprintf."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1494346995, "post_id": 43872652, "comment_id": 74785144, "body": "@EricDuminil I was 100% sure sooner or later someone will mention that :) I used to interpolation - <code>&#39;%.2f%&#39;</code> reminds me of Java which I don&#39;t love much. But indeed it might look cleaner to those who used to it"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1494739971, "post_id": 43872652, "comment_id": 74952073, "body": "In real life you&#39;d need to deal with the case where <code>sum</code> equals zero."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 6, "last_activity_date": 1494341189, "last_edit_date": 1494341189, "creation_date": 1494340337, "answer_id": 43872652, "question_id": 43872582, "link": "https://stackoverflow.com/questions/43872582/ruby-calculate-the-percentage-of-elements-in-hash/43872652#43872652", "title": "Ruby calculate the percentage of elements in hash", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#<code>each_with_object</code></a>:</p>\n\n<pre><code>sum = a.values.inject(0, :+) # or simply a.values.sum if you're on Ruby 2.4+\n#=&gt; 12\na.each_with_object({}) { |(k, v), hash| hash[k] = v * 100.0 / sum }\n#=&gt; {\"str1\"=&gt;16.666666666666668, \"str2\"=&gt;25.0, \"str3\"=&gt;58.333333333333336}\n</code></pre>\n\n<p>To have it with <code>%</code>:</p>\n\n<pre><code>a.each_with_object({}) { |(k, v), hash| hash[k] = \"#{(v * 100.0 / sum).round(2)}%\" }\n#=&gt; {\"str1\"=&gt;\"16.67%\", \"str2\"=&gt;\"25.0%\", \"str3\"=&gt;\"58.33%\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "is_accepted": false, "score": 0, "last_activity_date": 1494349277, "creation_date": 1494349277, "answer_id": 43875821, "question_id": 43872582, "link": "https://stackoverflow.com/questions/43872582/ruby-calculate-the-percentage-of-elements-in-hash/43875821#43875821", "title": "Ruby calculate the percentage of elements in hash", "body": "<p>Thanks to @AndreyDeineko for his quick answer!\nI tried to do it with an <code>each</code> method only (instead of <code>each_with_object</code>, so here is the answer.</p>\n\n<pre><code>sum = hash.values.sum\nresult = {}\nhash.each { |k,v| result[k] = (v*100.00/sum).round(2)}\n</code></pre>\n\n<p>To have it with <code>%</code>:</p>\n\n<pre><code>hash.each { |k,v| result[k] = (v*100.00/sum).round(2).to_s + \"%\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1494353417, "post_id": 43876677, "comment_id": 74788780, "body": "Thank you so much Mark, but my answer was pretty identical to Andrey&#39;s answer and I used the amazing <code>transform_values</code> method that is too new to put that in an answer without an alternative :)"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1494358306, "post_id": 43876677, "comment_id": 74791675, "body": "Well I think over time it will become more and more useful. Some of my answers which required a certain version of Ruby may not have been too useful at the time, but eventually <a href=\"http://stackoverflow.com/questions/4339553/sort-hash-by-key-return-hash-in-ruby/22315036#22315036\">became among my highest scoring answers</a>."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 4, "last_activity_date": 1494358780, "last_edit_date": 1494358780, "creation_date": 1494352220, "answer_id": 43876677, "question_id": 43872582, "link": "https://stackoverflow.com/questions/43872582/ruby-calculate-the-percentage-of-elements-in-hash/43876677#43876677", "title": "Ruby calculate the percentage of elements in hash", "body": "<p>The best answer IMHO was unfortunately deleted:</p>\n\n<pre><code>total = hash.values.sum\nhash.transform_values { |v| (v * 100.0 / total).round(2) }\n</code></pre>\n\n<p>The hash method <code>transform_values</code> is relatively unknown and this case is exactly what it is for. (Ruby 2.4+ or Rails 4.2+)</p>\n\n<p>@Ursus, if you undelete yours I'll delete this. Keep in mind that answers here are not just for OP but anyone else who has the same question in the future.</p>\n"}], "owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 0, "accepted_answer_id": 43872652, "answer_count": 3, "score": 0, "last_activity_date": 1494682453, "creation_date": 1494340177, "last_edit_date": 1494682453, "question_id": 43872582, "link": "https://stackoverflow.com/questions/43872582/ruby-calculate-the-percentage-of-elements-in-hash", "title": "Ruby calculate the percentage of elements in hash", "body": "<p>I have a hash :</p>\n\n<pre><code>hash = {\"str1\"=&gt;2, \"str2\"=&gt;3, \"str3\"=&gt;7}\n</code></pre>\n\n<p>I want to calculate the percentage of each element in the hash so I can get one like this :</p>\n\n<pre><code>{\"str1\"=&gt;16.66% , \"str2\"=&gt;25.00%, \"str3\"=&gt;58.33%}\n</code></pre>\n\n<p>Any idea about that? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1494339767, "post_id": 43872378, "comment_id": 74780025, "body": "Where does <code>590 </code> come from?"}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 2, "creation_date": 1494339773, "post_id": 43872378, "comment_id": 74780029, "body": "Can you update this question with the full string representation of the data you are working with and use code formatting to help us read it?"}, {"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494340177, "post_id": 43872378, "comment_id": 74780318, "body": "Sorry, I edited my post. The 590 is in the string."}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 1, "creation_date": 1494340399, "post_id": 43872378, "comment_id": 74780492, "body": "NP - thanks for the clarification, what do you have so far? Can you post that as well?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494357729, "post_id": 43872378, "comment_id": 74791341, "body": "We&#39;d like to see what you tried. Without evidence of effort it looks like you want us to solve it for you, which is not what SO is for. Which docs did you read and why didn&#39;t they help? Did you write code? If not, why? If so, where is the minimum code demonstrating the problem?"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1494359099, "post_id": 43872378, "comment_id": 74792115, "body": "You&#39;re working with a horrible quasi-XML format. Do you have any control over it?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494342069, "post_id": 43872863, "comment_id": 74781787, "body": "thanks for your answer. it works perfect. but how can I get only the number? I get [&quot;590&quot;]. And how can I get only the first one?"}, {"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494342100, "post_id": 43872863, "comment_id": 74781815, "body": "I get [&quot;590&quot;] [&quot;590&quot;] [&quot;590&quot;] [&quot;590&quot;] [&quot;590&quot;] . I want only one 590."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1494340897, "creation_date": 1494340897, "answer_id": 43872863, "question_id": 43872378, "link": "https://stackoverflow.com/questions/43872378/how-i-get-the-substring/43872863#43872863", "title": "How I get the substring?", "body": "<p>You can make use of <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><strong><code>scan</code></strong></a></p>\n\n<pre><code>array = [{\"ProductId\"=&gt;198, \"AttributesXml\"=&gt;\"&lt;Attributes&gt;\n  &lt;ProductAttribute  \n  ID=\\\"590\\\"&gt;&lt;ProductAttributeValue&gt;&lt;Value&gt;1691&lt;/Value&gt;\n  &lt;/ProductAttributeValue&gt;&lt;/ProductAttribute&gt;&lt;/Attributes&gt;\",   \n  \"StockQuantity\"=&gt;1, \"AllowOutOfStockOrders\"=&gt;false,\"\"Sku\"=&gt;nil, \n  \"ManufacturerPartNumber\"=&gt;nil, \"Gtin\"=&gt;nil, \"OverriddenPrice\"=&gt;nil, \n  \"NotifyAdminForQuantityBelow\"=&gt;1, \"Id\"=&gt;1756},.. ]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>array.each do |hash| \n  hash[\"AttributesXml\"].scan(/ProductAttribute\\s+ID=\\\"(\\d+)\\\"/).flatten\n  #=&gt; [\"590\"]\n  # This will return matched values\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494344317, "post_id": 43872970, "comment_id": 74783403, "body": "Thank you for your answer. I get these error: &quot;no implicit conversion of String into Integer&quot; at this point: &quot;doc = Nokogiri::XML(test[&#39;AttributesXml&#39;])&quot;"}, {"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494344332, "post_id": 43872970, "comment_id": 74783423, "body": "what can I do? Can you help me please?"}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "reply_to_user": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494344351, "post_id": 43872970, "comment_id": 74783436, "body": "Its because you must be in an array. put this in a <code>each</code> loop. Updated answer and put the test data into an array. The general idea is that you should be able to use more common ruby operators to fix up the results the way you need after we&#39;ve shown you how to extract the data out of the XML string."}, {"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "edited": false, "score": 0, "creation_date": 1494344517, "post_id": 43872970, "comment_id": 74783551, "body": "I dont understand you. Can you give me an example please?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1494459915, "post_id": 43872970, "comment_id": 74842550, "body": "Be careful using <code>doc.xpath(&quot;&#47;&#47;ProductAttribute&quot;).attribute(&#39;ID&#39;)</code>. <code>xpath</code> returns a NodeSet so <code>attribute</code> would return an array if multiple <code>ProductAttribute</code> nodes were found."}], "tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": false, "score": 3, "last_activity_date": 1494344493, "last_edit_date": 1494344493, "creation_date": 1494341173, "answer_id": 43872970, "question_id": 43872378, "link": "https://stackoverflow.com/questions/43872378/how-i-get-the-substring/43872970#43872970", "title": "How I get the substring?", "body": "<p>The tag has rails, if you are in rails then you can leverage nokogiri gem to handle parsing the AttributesXml section:</p>\n\n<pre><code>require 'nokogiri'\n\narray = [{\"ProductId\"=&gt;198, \"AttributesXml\"=&gt;\"&lt;Attributes&gt;&lt;ProductAttribute\n ID=\\\"590\\\"&gt;&lt;ProductAttributeValue&gt;&lt;Value&gt;1691&lt;/Value&gt;\n &lt;/ProductAttributeValue&gt;&lt;/ProductAttribute&gt;&lt;/Attributes&gt;\",\n \"StockQuantity\"=&gt;1, \"AllowOutOfStockOrders\"=&gt;false,\"Sku\"=&gt;nil,\n \"ManufacturerPartNumber\"=&gt;nil, \"Gtin\"=&gt;nil, \"OverriddenPrice\"=&gt;nil,\n \"NotifyAdminForQuantityBelow\"=&gt;1, \"Id\"=&gt;1756}]\n\narray.each do |item|\n  doc = Nokogiri::XML(item['AttributesXml'])\n  puts doc.xpath(\"//ProductAttribute\").attribute('ID')\nend\n=&gt; 590\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1494358184, "creation_date": 1494358184, "answer_id": 43878382, "question_id": 43872378, "link": "https://stackoverflow.com/questions/43872378/how-i-get-the-substring/43878382#43878382", "title": "How I get the substring?", "body": "<p>I'd use:</p>\n\n<pre><code>require 'nokogiri'\n\nfoo = [\n  {\n    \"ProductId\"=&gt;198, \n    \"AttributesXml\"=&gt;\"&lt;Attributes&gt;&lt;ProductAttribute ID=\\\"590\\\"&gt;&lt;ProductAttributeValue&gt;&lt;Value&gt;1691&lt;/Value&gt;&lt;/ProductAttributeValue&gt;&lt;/ProductAttribute&gt;&lt;/Attributes&gt;\",   \n    \"StockQuantity\"=&gt;1, \n    \"AllowOutOfStockOrders\"=&gt;false,\n    \"Sku\"=&gt;nil, \n    \"ManufacturerPartNumber\"=&gt;nil, \n    \"Gtin\"=&gt;nil, \n    \"OverriddenPrice\"=&gt;nil, \n    \"NotifyAdminForQuantityBelow\"=&gt;1, \"Id\"=&gt;1756\n  },\n]\n\nfoo.map { |hash|\n  Nokogiri::XML(hash['AttributesXml']).at('ProductAttribute')['ID']\n}\n# =&gt; [\"590\"]\n</code></pre>\n\n<p>It'll return the ID from all <code>&lt;ProductAttribute&gt;</code> nodes in all the hashes in the array.</p>\n"}], "owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1494358184, "creation_date": 1494339643, "last_edit_date": 1494357294, "question_id": 43872378, "link": "https://stackoverflow.com/questions/43872378/how-i-get-the-substring", "title": "How I get the substring?", "body": "<p>how can I get the substring of the string: </p>\n\n<pre><code>[{\n  \"ProductId\"=&gt;198, \n  \"AttributesXml\"=&gt;\"&lt;Attributes&gt;&lt;ProductAttribute ID=\\\"590\\\"&gt;&lt;ProductAttributeValue&gt;&lt;Value&gt;1691&lt;/Value&gt;&lt;/ProductAttributeValue&gt;&lt;/ProductAttribute&gt;&lt;/Attributes&gt;\",   \n  \"StockQuantity\"=&gt;1, \n  \"AllowOutOfStockOrders\"=&gt;false,\n  \"Sku\"=&gt;nil, \n  \"ManufacturerPartNumber\"=&gt;nil, \n  \"Gtin\"=&gt;nil, \n  \"OverriddenPrice\"=&gt;nil, \n  \"NotifyAdminForQuantityBelow\"=&gt;1, \"Id\"=&gt;1756\n  },\n</code></pre>\n\n<p>I want only the value of <code>\"ProductAtrribute ID\": 590</code>. Only the number.\nI have checked out the ruby docs, but I cannot find a solution.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "bootstrap-datetimepicker", "eonasdan-datetimepicker"], "comments": [{"owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1494336148, "post_id": 43870745, "comment_id": 74777185, "body": "Did you tried option <code>format</code> in datetimepicker ? also you can get specific format by using method <code>strftime</code>"}, {"owner": {"reputation": 78, "user_id": 7169120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/feaffe241f0f5488d545ab38ba122e27?s=128&d=identicon&r=PG&f=1", "display_name": "codeNinjaBro", "link": "https://stackoverflow.com/users/7169120/codeninjabro"}, "reply_to_user": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1494336471, "post_id": 43870745, "comment_id": 74777429, "body": "yea the datetimepicker has a format I updated it with the above sorry forgot to add. But it still doesnt update the input value to the param because I need to use that data to render a sql query"}, {"owner": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1494336519, "post_id": 43870745, "comment_id": 74777475, "body": "can you also please add link of plugin that you have used ?"}, {"owner": {"reputation": 78, "user_id": 7169120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/feaffe241f0f5488d545ab38ba122e27?s=128&d=identicon&r=PG&f=1", "display_name": "codeNinjaBro", "link": "https://stackoverflow.com/users/7169120/codeninjabro"}, "reply_to_user": {"reputation": 5930, "user_id": 663660, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vMsSv.jpg?s=128&g=1", "display_name": "Anand Soni", "link": "https://stackoverflow.com/users/663660/anand-soni"}, "edited": false, "score": 0, "creation_date": 1494336571, "post_id": 43870745, "comment_id": 74777524, "body": "Here it is: <a href=\"https://eonasdan.github.io/bootstrap-datetimepicker/\" rel=\"nofollow noreferrer\">eonasdan.github.io/bootstrap-datetimepicker</a>"}, {"owner": {"reputation": 935, "user_id": 5039866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oH8jw.jpg?s=128&g=1", "display_name": "Nirajan Pokharel", "link": "https://stackoverflow.com/users/5039866/nirajan-pokharel"}, "edited": false, "score": 0, "creation_date": 1494336995, "post_id": 43870745, "comment_id": 74777870, "body": "potentially duplicate of  <a href=\"http://stackoverflow.com/questions/23096517/jquery-datepicker-with-rails-4?noredirect=1&amp;lq=1\" title=\"jquery datepicker with rails 4\">stackoverflow.com/questions/23096517/&hellip;</a>"}, {"owner": {"reputation": 78, "user_id": 7169120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/feaffe241f0f5488d545ab38ba122e27?s=128&d=identicon&r=PG&f=1", "display_name": "codeNinjaBro", "link": "https://stackoverflow.com/users/7169120/codeninjabro"}, "edited": false, "score": 0, "creation_date": 1494337716, "post_id": 43870745, "comment_id": 74778430, "body": "Not the same as mine works fine with datepicker updating the value but not datetimepicker."}, {"owner": {"reputation": 78, "user_id": 7169120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/feaffe241f0f5488d545ab38ba122e27?s=128&d=identicon&r=PG&f=1", "display_name": "codeNinjaBro", "link": "https://stackoverflow.com/users/7169120/codeninjabro"}, "edited": false, "score": 0, "creation_date": 1494466172, "post_id": 43870745, "comment_id": 74843853, "body": "still need help with this problem.."}], "owner": {"reputation": 78, "user_id": 7169120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/feaffe241f0f5488d545ab38ba122e27?s=128&d=identicon&r=PG&f=1", "display_name": "codeNinjaBro", "link": "https://stackoverflow.com/users/7169120/codeninjabro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1494367578, "creation_date": 1494335319, "last_edit_date": 1494367578, "question_id": 43870745, "link": "https://stackoverflow.com/questions/43870745/datetimepicker-not-updating-values-on-ruby-side", "title": "DateTimePicker not updating values on ruby side", "body": "<p>I am having an issue where the regular datepicker updates the value on the rails side in this format <code>'2017-09-12 22:49:27'</code>, but I am trying to use datetimepicker and its not updating the value, it updates the text field with the format: <code>M/DD/YYYY</code> but not the actual value in the param as I need that in <code>'2017-09-12 22:49:27'</code> format but its staying the same value which is currently <code>MM/DD/YYYY</code> as what's loaded up for the text field and I am getting an <code>undefined</code> value when I try to see the current value:</p>\n\n<pre><code>var selectedDate = $(\"#from\").find(\".active\").data(\"day\");\n</code></pre>\n\n<p>Here is the ruby code</p>\n\n<pre><code>= text_field_tag :from_js, l((params[:from].to_datetime or @item.created_at), format: :american_no_time), class: 'form-control input-sm datetimepicker', id:  'from'\n= hidden_field_tag :from, l((params[:from].to_datetime or @item.created_at), format: :american_no_time)\n\n= text_field_tag :to_js, l((params[:to].to_datetime or Time.zone.now.to_datetime), format: :american_no_time), class: 'form-control input-sm datetimepicker', id: 'to'\n= hidden_field_tag :to, l((params[:to].to_datetime or Time.zone.now.to_datetime), format: :american_no_time)\n</code></pre>\n\n<p>and here is the current javascript:</p>\n\n<pre><code>var maxDate = new Date();\nvar minDate = $(\"#from\").val();\n$(function () {\n  $('#from').datetimepicker({\n    format: \"M/D/YYYY\",\n    minDate: minDate,\n    maxDate: maxDate,\n    pickTime: false\n  });\n\n  $('#to').datetimepicker({\n    format: \"M/D/YYYY\",\n    minDate: minDate,\n    maxDate: maxDate,\n    pickTime: false\n  });\n}); \n</code></pre>\n\n<p>Any ideas or suggestions would be appreciated</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494336528, "post_id": 43870697, "comment_id": 74777481, "body": "can you share your csv?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1506532478, "last_edit_date": 1506532478, "creation_date": 1494339210, "answer_id": 43872216, "question_id": 43870697, "link": "https://stackoverflow.com/questions/43870697/creating-a-hash-during-a-loop-with-strange-behavior/43872216#43872216", "title": "Creating a hash during a loop with strange behavior", "body": "<p>I don't fully understand your question, because you have not provided a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. (What is <code>csv_each_for</code>? What is <code>file_to</code>? What is your input CSV? If providing all of this information is unnecessary, then can you provide a <em>minimal</em> example?)</p>\n\n<p>However, I believe the crux of your problem is in this line:</p>\n\n<pre><code>result = Hash.new([])\n</code></pre>\n\n<p>Instead, you should use:</p>\n\n<pre><code>result = Hash.new { |hash, key| hash[key] = [] }\n</code></pre>\n\n<p>This is because, as mentioned in <a href=\"https://ruby-doc.org/core/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">the ruby docs</a>, you need to create a <strong>new</strong> default object each time.</p>\n\n<p>This is a <a href=\"https://makandracards.com/david-alejandro/44508-gotcha-on-default-value-for-array-and-shovel-method\" rel=\"nofollow noreferrer\">common gotcha</a>. It was because of this mistake that you were seeing the bizarre behaviour, where <code>result == {}</code> but <code>result[something] == [{:horario=&gt;\"09:00 - 9:50\", ...}]</code>.</p>\n"}], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 43872216, "answer_count": 1, "score": 0, "last_activity_date": 1506532478, "creation_date": 1494335188, "question_id": 43870697, "link": "https://stackoverflow.com/questions/43870697/creating-a-hash-during-a-loop-with-strange-behavior", "title": "Creating a hash during a loop with strange behavior", "body": "<p>this is my code, I try creating a hash with header as key and arrays of hashs with values, but result don't keep data after loop, in contrast result[key] works normaly.</p>\n\n<pre><code>  def programacao\n    result = Hash.new([])\n    header = nil\n    csv_each_for(file_to('programacao/9')).each do |row|\n      next if row[0].nil?\n\n      if row[0].start_with?('#')\n        header = row[0]\n        next\n      end\n      # puts \"HEADER #{header} / ROW: #{row[0]}\"\n      result[header] &lt;&lt; ({\n                            horario: row[0],\n                            evento: row[1],\n                            tema: row[2],\n                            palestante: row[3],\n                            instituicao: row[4],\n                            local: row[5]\n      })\n      binding.pry\n    end\n    result\n  end\n</code></pre>\n\n<p><strong>FIRST ITERATION:</strong></p>\n\n<pre><code>[1] pry(#&lt;Programacao&gt;)&gt; result\n=&gt; {}\n</code></pre>\n\n<p>but result[reader]</p>\n\n<pre><code>[3] pry(#&lt;Programacao&gt;)&gt; result[header]\n=&gt; [{:horario=&gt;\"09:00 - 9:50\",\n  :evento=&gt;\"Palestra\",\n  :tema=&gt;\"Reforma da Previd\u00eancia\",\n  :palestante=&gt;\"Dr. \u00c1lvaro Mattos Cunha Neto\",\n  :instituicao=&gt;\"Advogado - Presidente da Comiss\u00e3o de Direito Previdenci\u00e1rio\",\n  :local=&gt;\"OAB\"}]\n</code></pre>\n\n<p><strong>SECOND ITERATION:</strong></p>\n\n<pre><code>[1] pry(#&lt;Programacao&gt;)&gt; result\n=&gt; {}\n</code></pre>\n\n<p>Header steel works normaly</p>\n\n<pre><code>[2] pry(#&lt;Programacao&gt;)&gt; result[header]\n=&gt; [{:horario=&gt;\"09:00 - 9:50\",\n  :evento=&gt;\"Palestra\",\n  :tema=&gt;\"Reforma da Previd\u00eancia\",\n  :palestante=&gt;\"Dr. \u00c1lvaro Mattos Cunha Neto\",\n  :instituicao=&gt;\"Advogado - Presidente da Comiss\u00e3o de Direito Previdenci\u00e1rio\",\n  :local=&gt;\"OAB\"},\n {:horario=&gt;\"9:00 -10:00\", :evento=&gt;\"Solenidade de abertura do Estande\", :tema=&gt;nil, :palestante=&gt;\"Dire\u00e7\u00e3o/Coordena\u00e7\u00f5es\", :instituicao=&gt;nil, :local=&gt;\"Faculdade Cat\u00f3lica do Tocantins\"}]\n</code></pre>\n\n<p>Where is my mistake?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1494335461, "post_id": 43870715, "comment_id": 74776637, "body": "Thank you for the explanation."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 4, "last_activity_date": 1494335226, "creation_date": 1494335226, "answer_id": 43870715, "question_id": 43870669, "link": "https://stackoverflow.com/questions/43870669/ruby-syntax-rails-models/43870715#43870715", "title": "ruby syntax (rails models)", "body": "<p>Both calling a method:</p>\n\n<ul>\n<li><p>first one calls a method <code>:price</code>.</p></li>\n<li><p>second one calls a method <code>:[]</code>, passing <code>:price</code> as an argument.</p></li>\n</ul>\n\n<p>You can check that by running</p>\n\n<pre><code>self.method(:[])\n#=&gt; #&lt;Method: User(ActiveRecord::AttributeMethods)#[]&gt;\n</code></pre>\n\n<p>Basically anytime you want to know, where method comes from, you can use <a href=\"https://ruby-doc.org/core-2.4.1/Object.html#method-i-method\" rel=\"nofollow noreferrer\">Object#<code>method</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1494335562, "post_id": 43870805, "comment_id": 74776725, "body": "So if I create my own method with the same name as an attribute, my method gets called not the rails default?"}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1494335650, "post_id": 43870805, "comment_id": 74776797, "body": "Here&#39;s a post that details how you might want to accomplish that: <a href=\"http://stackoverflow.com/questions/373731/override-activerecord-attribute-methods\" title=\"override activerecord attribute methods\">stackoverflow.com/questions/373731/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": true, "score": 0, "last_activity_date": 1494335449, "creation_date": 1494335449, "answer_id": 43870805, "question_id": 43870669, "link": "https://stackoverflow.com/questions/43870669/ruby-syntax-rails-models/43870805#43870805", "title": "ruby syntax (rails models)", "body": "<p>Rails creates those model attributes as accessors which dynamically creates the methods for getting/setting the value. Its fun to use in your own classes as well, have a look here: <a href=\"http://ruby-doc.org/core/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core/Module.html#method-i-attr_accessor</a></p>\n"}], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1494340978, "accepted_answer_id": 43870805, "answer_count": 2, "score": 1, "last_activity_date": 1494335449, "creation_date": 1494335137, "question_id": 43870669, "link": "https://stackoverflow.com/questions/43870669/ruby-syntax-rails-models", "closed_reason": "Duplicate", "title": "ruby syntax (rails models)", "body": "<p>Could someone explain the difference between these two:</p>\n\n<p>Say I have a model Product</p>\n\n<p>inside that model I have:</p>\n\n<pre><code>self.price\nself[:price]\n</code></pre>\n\n<p>I'm assuming one calls an attribute (the products price), while the other calls a method named 'price'?</p>\n\n<p>If that's true, which is which?</p>\n"}]