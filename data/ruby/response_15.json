[{"tags": ["ruby-on-rails", "ruby", "nokogiri", "libxml2"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 579197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d41538ebdba40bf9a6b9cbb2284bca?s=128&d=identicon&r=PG", "display_name": "James Hendrickson", "link": "https://stackoverflow.com/users/579197/james-hendrickson"}, "is_accepted": false, "score": 0, "last_activity_date": 1434348051, "last_edit_date": 1495541158, "creation_date": 1434348051, "answer_id": 30838287, "question_id": 29810903, "link": "https://stackoverflow.com/questions/29810903/installing-nokogiri-1-6-6-2-with-babun-gives-error-libxml2-version-2-6-21-or-la/30838287#30838287", "title": "Installing nokogiri 1.6.6.2 with Babun gives error &#39;libxml2 version 2.6.21 or later is required!&#39;", "body": "<p>If you are using 64 bit ruby NokoGiri on windows has problems with that. Try \n gem install nokogiri --prerelease</p>\n\n<p>More can be read about this here <a href=\"https://stackoverflow.com/questions/17014854/libxml2-missing-for-nokogiri-gem-on-windows-8-x64-with-ruby-1-9-3\">libxml2 missing for nokogiri gem on Windows 8 x64 with Ruby 1.9.3</a></p>\n"}], "owner": {"reputation": 31, "user_id": 4821785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd2af84497da055fb1b748477665f8?s=128&d=identicon&r=PG&f=1", "display_name": "Hite", "link": "https://stackoverflow.com/users/4821785/hite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1434348051, "creation_date": 1429745942, "question_id": 29810903, "link": "https://stackoverflow.com/questions/29810903/installing-nokogiri-1-6-6-2-with-babun-gives-error-libxml2-version-2-6-21-or-la", "title": "Installing nokogiri 1.6.6.2 with Babun gives error &#39;libxml2 version 2.6.21 or later is required!&#39;", "body": "<p>I'm trying to get Ruby on Rails (Ruby 2.0.0p598, Rails 4.2.0) working on Babun. I've been following this tutorial: </p>\n\n<p><a href=\"http://xjlin0.github.io/tech/2015/04/14/babun-the-new-cygwin-for-ruby-rails-sinatra-and-nodejs/\" rel=\"nofollow\">http://xjlin0.github.io/tech/2015/04/14/babun-the-new-cygwin-for-ruby-rails-sinatra-and-nodejs/</a></p>\n\n<p>Where installing Nokogiri is supposed to be as simple as </p>\n\n<pre><code>gem install nokogiri -- --use-system-libraries\n</code></pre>\n\n<p>But it always gives me the same error, as indicated in the title.</p>\n\n<p>I know I already have this installed. I installed <code>libxml2-dev</code> as well with Babun's package manager using </p>\n\n<pre><code>pact install libxml2-devel\n</code></pre>\n\n<p>I've tried manually downloading another libxml2 package and pointing it that way like</p>\n\n<pre><code>gem install nokogiri -- --use-system-libraries --with-xml2-config=C:/Ruby/\n</code></pre>\n\n<p>(I put the folder in C:\\Ruby). Still, nothing works, and it thinks there's no libxml2 when I definitely have it.</p>\n\n<p>Thoughts? </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "html-select"], "comments": [{"owner": {"reputation": 162, "user_id": 5625947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6624a0395d868b2f9a308f8346f0139?s=128&d=identicon&r=PG&f=1", "display_name": "Yewness", "link": "https://stackoverflow.com/users/5625947/yewness"}, "edited": false, "score": 0, "creation_date": 1473683430, "post_id": 29810344, "comment_id": 66227780, "body": "You could refer to the link below to display the selected value next to the dropdown. <a href=\"http://stackoverflow.com/a/10520467/5625947\">stackoverflow.com/a/10520467/5625947</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1429743550, "post_id": 29810445, "comment_id": 47748845, "body": "Also checkout <a href=\"http://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false\" title=\"event preventdefault vs return false\">stackoverflow.com/questions/1357118/&hellip;</a> for preventing submit so you can do stuff first."}, {"owner": {"reputation": 283, "user_id": 4821692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7wz2rWiekxM/AAAAAAAAAAI/AAAAAAAAAOE/xXemuE6CBBI/photo.jpg?sz=128", "display_name": "James Ding", "link": "https://stackoverflow.com/users/4821692/james-ding"}, "edited": false, "score": 0, "creation_date": 1429744001, "post_id": 29810445, "comment_id": 47749002, "body": "Thanks! What if I would like to show info on the page which is a column in a table ?"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "reply_to_user": {"reputation": 283, "user_id": 4821692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7wz2rWiekxM/AAAAAAAAAAI/AAAAAAAAAOE/xXemuE6CBBI/photo.jpg?sz=128", "display_name": "James Ding", "link": "https://stackoverflow.com/users/4821692/james-ding"}, "edited": false, "score": 0, "creation_date": 1429744249, "post_id": 29810445, "comment_id": 47749098, "body": "That do you mean show info? If you wanted to updated something on the page with the text selected in the text box you would need to use javascript/jquery to find the element and change the text. Something like <code>$(&quot;p#my-paragraph&quot;).text($(this).val())</code>"}, {"owner": {"reputation": 283, "user_id": 4821692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7wz2rWiekxM/AAAAAAAAAAI/AAAAAAAAAOE/xXemuE6CBBI/photo.jpg?sz=128", "display_name": "James Ding", "link": "https://stackoverflow.com/users/4821692/james-ding"}, "edited": false, "score": 0, "creation_date": 1429745543, "post_id": 29810445, "comment_id": 47749556, "body": "I have a hash table, the key is in the dropdown list, once user makes some choice, I would like to display the value of that key in the hash table. can u provide some details?"}], "tags": [], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "is_accepted": true, "score": 1, "last_activity_date": 1429743485, "creation_date": 1429743485, "answer_id": 29810445, "question_id": 29810344, "link": "https://stackoverflow.com/questions/29810344/ruby-on-rails-select-tag-how-to-display-based-on-selected-value/29810445#29810445", "title": "Ruby on rails: select_tag how to display based on selected value", "body": "<p>It depends what you want to do but you could use javascript.</p>\n\n<p>Check out the <a href=\"http://jsfiddle.net/eqffs/67/\" rel=\"nofollow\">fiddle</a></p>\n\n<pre><code>&lt;select id=\"my_select\"&gt;\n    &lt;option value=\"value 1\"&gt;Option 1&lt;/option&gt;\n    &lt;option value=\"value 2\"&gt;Option 2&lt;/option&gt;\n    &lt;option value=\"value 3\"&gt;Option 3&lt;/option&gt;\n    &lt;option value=\"value 4\"&gt;Option 4&lt;/option&gt;\n&lt;/select&gt;\n\n\n$(function(){\n    $('#my_select').on('change', function(){\n        alert('do soemthing ' + $(this).val());\n    });\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4631, "user_id": 256785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd104d3cf9f4a8277e53f83bb8dbc2e1?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/256785/eugene"}, "is_accepted": false, "score": 0, "last_activity_date": 1429743513, "creation_date": 1429743513, "answer_id": 29810453, "question_id": 29810344, "link": "https://stackoverflow.com/questions/29810344/ruby-on-rails-select-tag-how-to-display-based-on-selected-value/29810453#29810453", "title": "Ruby on rails: select_tag how to display based on selected value", "body": "<p>You will need to use javascript/coffeescript for this.  A sample of this might be something like this:</p>\n\n<pre><code>$(document).ready -&gt;\n  $(\"#id_of_select_that_the_select_tag_generates\").change -&gt;\n    # do something\n</code></pre>\n\n<p>Put the above in <code>app/assets/javascripts/some_file_name.js.coffee</code></p>\n"}], "owner": {"reputation": 283, "user_id": 4821692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7wz2rWiekxM/AAAAAAAAAAI/AAAAAAAAAOE/xXemuE6CBBI/photo.jpg?sz=128", "display_name": "James Ding", "link": "https://stackoverflow.com/users/4821692/james-ding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2010, "favorite_count": 0, "accepted_answer_id": 29810445, "answer_count": 2, "score": 1, "last_activity_date": 1473683430, "creation_date": 1429742961, "last_edit_date": 1429746806, "question_id": 29810344, "link": "https://stackoverflow.com/questions/29810344/ruby-on-rails-select-tag-how-to-display-based-on-selected-value", "title": "Ruby on rails: select_tag how to display based on selected value", "body": "<p>Now my case might be a bit weird. I have a select_tag, user has to select one value from the list I gave. I know how to retrieve the value they selected once they click on the submit. But now I would also like to display some info for the selected value <strong>BEFORE</strong> they click on submit, just when they select any value in the drop down list. </p>\n\n<p>So is there any way to get the value after user selects but before user submits ?</p>\n\n<p>E.g:</p>\n\n<pre><code>select_tag(\"a\", options_for_select(my_option_list))\n</code></pre>\n\n<p>the <code>param[:a]</code> will have the value just after user submits this. How can I get the value before they submit?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 463, "user_id": 2183258, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cd7a080074ed6cb93e0f8edf2d2ee1b7?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/2183258/chloe"}, "edited": false, "score": 0, "creation_date": 1429743699, "post_id": 29810314, "comment_id": 47748902, "body": "Do you want to prevent the code from running and just view it or do you mind if it run? Or are you looking for the html that that code produced?"}, {"owner": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "reply_to_user": {"reputation": 463, "user_id": 2183258, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cd7a080074ed6cb93e0f8edf2d2ee1b7?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/2183258/chloe"}, "edited": false, "score": 0, "creation_date": 1429743807, "post_id": 29810314, "comment_id": 47748939, "body": "@FelesMortis yes I am looking for the html that the code produced, I want to affect that code to a variable, see my question and let me know if it&#39;s clear :)"}, {"owner": {"reputation": 463, "user_id": 2183258, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cd7a080074ed6cb93e0f8edf2d2ee1b7?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/2183258/chloe"}, "edited": false, "score": 0, "creation_date": 1429744199, "post_id": 29810314, "comment_id": 47749071, "body": "There&#39;s two ways html can get generated(for the most part). It can be via document.write which writes html(or other data) to the place were the script is, in which case you can look there using javascript (or ruby/rails if you&#39;re more comfortable with that. The other way is by modifying the html of other elements on the page. Adding/Removing/Changing. This is harder to find, but I&#39;d recommend taking getting the html of the page <code>$(&#39;html&#39;).html()</code> then running the script, then getting the html again and scanning for differences."}, {"owner": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "reply_to_user": {"reputation": 463, "user_id": 2183258, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cd7a080074ed6cb93e0f8edf2d2ee1b7?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/2183258/chloe"}, "edited": false, "score": 0, "creation_date": 1429744663, "post_id": 29810314, "comment_id": 47749232, "body": "@FelesMortis yes this approach is already suggested by tadman and it works, but I want to do that directly in the server side using Rails (without hitting the browser!)"}, {"owner": {"reputation": 1465, "user_id": 892754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82c1b4e0c8d5da1d6b2756d0bfe0b03?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/892754/derek"}, "edited": false, "score": 0, "creation_date": 1429766901, "post_id": 29810314, "comment_id": 47756269, "body": "If you want to do it on the server, I think you need to a server-side browser, something like <a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\">phantomjs.org</a>. It used in ruby testing frameworks such as   <a href=\"https://github.com/teampoltergeist/poltergeist\" rel=\"nofollow noreferrer\">github.com/teampoltergeist/poltergeist</a>."}, {"owner": {"reputation": 463, "user_id": 2183258, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cd7a080074ed6cb93e0f8edf2d2ee1b7?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/2183258/chloe"}, "edited": false, "score": 0, "creation_date": 1429804796, "post_id": 29810314, "comment_id": 47783700, "body": "@medBo That mostly depends on what the script needs. It probably needs info from your browser/the rest of the page. Then you&#39;ll want to use Derek&#39;s solution. Otherwise you can get a javascript compiler to run it and capture the output. You&#39;ll have to look at the script to be sure, but I&#39;m reasonably certain that you&#39;ll need the server-side browser."}], "answers": [{"tags": [], "owner": {"reputation": 574441, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": false, "score": 0, "last_activity_date": 1429743061, "creation_date": 1429743061, "answer_id": 29810370, "question_id": 29810314, "link": "https://stackoverflow.com/questions/29810314/is-it-possible-to-get-the-html-produced-by-a-script/29810370#29810370", "title": "Is it possible to get the html produced by a script", "body": "<p>Load the page into a browser and then do View/Source in the browser.  This will let you view the generated web page and you can find what URL was put into the <code>&lt;script&gt;</code> tag.</p>\n"}, {"comments": [{"owner": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "edited": false, "score": 0, "creation_date": 1429743871, "post_id": 29810461, "comment_id": 47748966, "body": "can I do this using ruby ? I updated my question to be more clear, thanks"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "edited": false, "score": 0, "creation_date": 1429801399, "post_id": 29810461, "comment_id": 47780982, "body": "Technically yes, but practically no. It involves running <a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\">PhantomJS</a> inside Ruby as <a href=\"https://github.com/colszowka/phantomjs-gem\" rel=\"nofollow noreferrer\">a gem</a> and a whole lot of hoping and praying that your headless browser will behave the same way as a real client. Ruby itself has no way of understanding JavaScript or emulating the browser environment that it runs in."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1429743549, "creation_date": 1429743549, "answer_id": 29810461, "question_id": 29810314, "link": "https://stackoverflow.com/questions/29810314/is-it-possible-to-get-the-html-produced-by-a-script/29810461#29810461", "title": "Is it possible to get the html produced by a script", "body": "<p>If you're using jQuery in the browser and that code shows up in a well defined location, for example a <code>&lt;div&gt;</code> with a specific <code>id</code> then you can just grab it using your browser's JavaScript console:</p>\n\n<pre><code>$('#the_id').html()\n</code></pre>\n\n<p>That will show the raw HTML of that element presuming it dumps its content in an element with the ID <code>the_id</code>. You can use whatever CSS selector works.</p>\n\n<p>Where that HTML goes in your document is impossible to tell from your example. A <code>&lt;script&gt;</code> can add any elements it wants anywhere in your document. You'll have to look around to see where it goes.</p>\n"}], "owner": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29810461, "answer_count": 2, "score": 0, "last_activity_date": 1429744891, "creation_date": 1429742813, "last_edit_date": 1429744891, "question_id": 29810314, "link": "https://stackoverflow.com/questions/29810314/is-it-possible-to-get-the-html-produced-by-a-script", "title": "Is it possible to get the html produced by a script", "body": "<p>I have a URL from a third party site which should be the source of a script tag, something like this:</p>\n\n<pre><code>&lt;script src=\"&lt;%= @url %&gt;\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>The above code shows a webform.</p>\n\n<p>I would like to get the html code resulted by that code and store into a variable, something like this :</p>\n\n<pre><code>html_code = get_html('&lt;script src=\"&lt;%= @url %&gt;\"&gt;&lt;/script&gt;')\n</code></pre>\n\n<p>Is that possible using Ruby/Rails (maybe using nokogiri) ?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 185, "user_id": 1572597, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2c4c1070f61c2fac8986c21349be9b39?s=128&d=identicon&r=PG", "display_name": "user1572597", "link": "https://stackoverflow.com/users/1572597/user1572597"}, "edited": false, "score": 0, "creation_date": 1429743059, "post_id": 29810290, "comment_id": 47748671, "body": "What does your controller for index and show look like?  I&#39;m also a bit confused as to what you mean with both post and user...Are you using Devise?  Need a little more information to think about a solution."}, {"owner": {"reputation": 89, "user_id": 4228154, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-NEi44yrrL6Y/AAAAAAAAAAI/AAAAAAAC0_Q/ctN2y7mHgx4/photo.jpg?sz=128", "display_name": "Justin Doshay", "link": "https://stackoverflow.com/users/4228154/justin-doshay"}, "reply_to_user": {"reputation": 185, "user_id": 1572597, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2c4c1070f61c2fac8986c21349be9b39?s=128&d=identicon&r=PG", "display_name": "user1572597", "link": "https://stackoverflow.com/users/1572597/user1572597"}, "edited": false, "score": 0, "creation_date": 1429743453, "post_id": 29810290, "comment_id": 47748808, "body": "i am using devise, i have it set when a user/venue signs up they are able to post a gig.  everything displays but the user_id."}, {"owner": {"reputation": 185, "user_id": 1572597, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2c4c1070f61c2fac8986c21349be9b39?s=128&d=identicon&r=PG", "display_name": "user1572597", "link": "https://stackoverflow.com/users/1572597/user1572597"}, "edited": false, "score": 0, "creation_date": 1429744053, "post_id": 29810290, "comment_id": 47749027, "body": "I still am not terribly clear on this question...however, there isn&#39;t anything in the show method...such as <code>@gig = Gig.find(:id =&gt; params[:id]) </code> and what are you looking to find users or venues...  Either way you would need something along the lines of <code>@venues = Venue.all</code> in the controller method for wherever you would be calling that in the *.html.erb"}, {"owner": {"reputation": 89, "user_id": 4228154, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-NEi44yrrL6Y/AAAAAAAAAAI/AAAAAAAC0_Q/ctN2y7mHgx4/photo.jpg?sz=128", "display_name": "Justin Doshay", "link": "https://stackoverflow.com/users/4228154/justin-doshay"}, "reply_to_user": {"reputation": 185, "user_id": 1572597, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2c4c1070f61c2fac8986c21349be9b39?s=128&d=identicon&r=PG", "display_name": "user1572597", "link": "https://stackoverflow.com/users/1572597/user1572597"}, "edited": false, "score": 0, "creation_date": 1429744322, "post_id": 29810290, "comment_id": 47749123, "body": "hmm, not understanding.  can i share my git repo to give you a better idea?"}, {"owner": {"reputation": 89, "user_id": 4228154, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-NEi44yrrL6Y/AAAAAAAAAAI/AAAAAAAC0_Q/ctN2y7mHgx4/photo.jpg?sz=128", "display_name": "Justin Doshay", "link": "https://stackoverflow.com/users/4228154/justin-doshay"}, "reply_to_user": {"reputation": 185, "user_id": 1572597, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2c4c1070f61c2fac8986c21349be9b39?s=128&d=identicon&r=PG", "display_name": "user1572597", "link": "https://stackoverflow.com/users/1572597/user1572597"}, "edited": false, "score": 0, "creation_date": 1429745302, "post_id": 29810290, "comment_id": 47749473, "body": "ok, i changed everything to   &lt;%= @gig.user_id%&gt; but now it just shows the id number instead of the username.  getting closer"}, {"owner": {"reputation": 10701, "user_id": 998328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/86d1bcb6609046f3535ca20691c48aa9?s=128&d=identicon&r=PG", "display_name": "Carrie Kendall", "link": "https://stackoverflow.com/users/998328/carrie-kendall"}, "edited": false, "score": 0, "creation_date": 1429889484, "post_id": 29810290, "comment_id": 47829065, "body": "I added the code you linked to into your question. You should consider removing irrelevant code because right now, this post is just a wall of code and will most likely not help others."}, {"owner": {"reputation": 89, "user_id": 4228154, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-NEi44yrrL6Y/AAAAAAAAAAI/AAAAAAAC0_Q/ctN2y7mHgx4/photo.jpg?sz=128", "display_name": "Justin Doshay", "link": "https://stackoverflow.com/users/4228154/justin-doshay"}, "edited": false, "score": 0, "creation_date": 1429890084, "post_id": 29810290, "comment_id": 47829503, "body": "I&#39;ll revise accordingly in a bit."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 4228154, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-NEi44yrrL6Y/AAAAAAAAAAI/AAAAAAAC0_Q/ctN2y7mHgx4/photo.jpg?sz=128", "display_name": "Justin Doshay", "link": "https://stackoverflow.com/users/4228154/justin-doshay"}, "is_accepted": true, "score": 0, "last_activity_date": 1429811029, "creation_date": 1429811029, "answer_id": 29830744, "question_id": 29810290, "link": "https://stackoverflow.com/questions/29810290/rails-application-displaying-blank-space-in-usersvenue-place/29830744#29830744", "title": "rails application displaying blank space in users(venue) place", "body": "<p>Solved it:</p>\n\n<p>After running irb, I noticed that venues was null in the db. Therefore, I realized that I had to as venues in devise by creating new forms. </p>\n"}], "owner": {"reputation": 89, "user_id": 4228154, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-NEi44yrrL6Y/AAAAAAAAAAI/AAAAAAAC0_Q/ctN2y7mHgx4/photo.jpg?sz=128", "display_name": "Justin Doshay", "link": "https://stackoverflow.com/users/4228154/justin-doshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 29830744, "answer_count": 1, "score": -2, "last_activity_date": 1429889412, "creation_date": 1429742731, "last_edit_date": 1429889412, "question_id": 29810290, "link": "https://stackoverflow.com/questions/29810290/rails-application-displaying-blank-space-in-usersvenue-place", "title": "rails application displaying blank space in users(venue) place", "body": "<p>I am able to post an event but when I select the user to post as, the dropdown menu shows empty spaces where the user (venue name) should be.  I have tried everything that I can think of.  Any ideas would be greatly appreciated.</p>\n\n<p>I am on rails 4.  I am using devise as well.</p>\n\n<p>here are my files:</p>\n\n<p><strong>show.html.erb</strong>:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;b&gt;Name:&lt;/b&gt;\n  &lt;%= @gig.user.venue_name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Event:&lt;/strong&gt;\n  &lt;%= @gig.event %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Date:&lt;/strong&gt;\n  &lt;%= @gig.date %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Doors:&lt;/strong&gt;\n  &lt;%= @gig.doors %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Showtime:&lt;/strong&gt;\n  &lt;%= @gig.showtime %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Age:&lt;/strong&gt;\n  &lt;%= @gig.age %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Price:&lt;/strong&gt;\n  &lt;%= @gig.price %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Description:&lt;/strong&gt;\n  &lt;%= @gig.description %&gt;\n&lt;/p&gt;\n\n&lt;%= link_to 'Edit', edit_gig_path(@gig) %&gt; |\n&lt;%= link_to 'Back', gigs_path %&gt;\n</code></pre>\n\n<p><strong>index.html.erb</strong>:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n&lt;div class=\"page-header\"&gt;\n  &lt;h1&gt;All Gigs&lt;/h1&gt;\n&lt;/div&gt;\n\n&lt;% @gigs.each do |gig| %&gt;\n&lt;div class=\"gig\"&gt;\n    &lt;strong&gt;&lt;%= gig.user.venue_name %&gt;&lt;/strong&gt;\n    &lt;p&gt;&lt;%= gig.event %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= gig.date %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= gig.doors %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= gig.showtime %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= gig.age %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= gig.price %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= gig.description %&gt;&lt;/p&gt;\n    &lt;div class=\"meta\"&gt;\n      &lt;%= link_to time_ago_in_words(gig.created_at) + \" ago\", gig %&gt;\n      &lt;span class=\"admin\"&gt;\n        | &lt;%= link_to 'Edit', edit_gig_path(gig) %&gt; |\n        &lt;%= link_to 'Delete', gig, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>gig.rb</strong>:</p>\n\n<pre><code>class Gig &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>user.rb</strong>:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\nhas_many :gigs\n\nend\n</code></pre>\n\n<p><strong>_form.html.erb</strong>:</p>\n\n<pre><code>&lt;%= simple_form_for(@gig, html: {class: \"form-horizontal\"}) do |f| %&gt;\n  &lt;% if @gig.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@gig.errors.count, \"error\") %&gt; prohibited this gig from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @gig.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.input :user_id, collection: User.all, label_method: :venue_name %&gt;\n  &lt;%= f.input :event %&gt;\n  &lt;%= f.input :date %&gt;\n  &lt;%= f.input :doors %&gt;\n  &lt;%= f.input :showtime %&gt;\n  &lt;%= f.input :age %&gt;\n  &lt;%= f.input :price %&gt;\n  &lt;%= f.input :description %&gt;\n  &lt;div class=\"form-actions\"&gt;\n    &lt;%= f.button :submit %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>db migrate add user id to gig</p>\n\n<pre><code>class AddUserIdToGigs &lt; ActiveRecord::Migration\n  def change\n    add_column :gigs, :user_id, :integer\n    add_index :gigs, :user_id\n    remove_column :gigs, :name\n  end\nend\n</code></pre>\n\n<p><strong>gigs_controller.rb</strong></p>\n\n<pre><code>class GigsController &lt; ApplicationController\n  before_action :set_gig, only: [:show, :edit, :update, :destroy]\n\n  # GET /gigs\n  # GET /gigs.json\n  def index\n    @gigs = Gig.all\n  end\n\n  # GET /gigs/1\n  # GET /gigs/1.json\n  def show\n  end\n\n  # GET /gigs/new\n  def new\n    @gig = Gig.new\n  end\n\n  # GET /gigs/1/edit\n  def edit\n  end\n\n  # POST /gigs\n  # POST /gigs.json\n  def create\n    @gig = Gig.new(gig_params)\n\n    respond_to do |format|\n      if @gig.save\n        format.html { redirect_to @gig, notice: 'Gig was successfully created.' }\n        format.json { render :show, status: :created, location: @gig }\n      else\n        format.html { render :new }\n        format.json { render json: @gig.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /gigs/1\n  # PATCH/PUT /gigs/1.json\n  def update\n    respond_to do |format|\n      if @gig.update(gig_params)\n        format.html { redirect_to @gig, notice: 'Gig was successfully updated.' }\n        format.json { render :show, status: :ok, location: @gig }\n      else\n        format.html { render :edit }\n        format.json { render json: @gig.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /gigs/1\n  # DELETE /gigs/1.json\n  def destroy\n    @gig.destroy\n    respond_to do |format|\n      format.html { redirect_to gigs_url, notice: 'Gig was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_gig\n      @gig = Gig.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def gig_params\n      params.require(:gig).permit(:name, :event, :date, :doors, :showtime, :age, :price, :description, :user_id)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1429742720, "post_id": 29810275, "comment_id": 47748568, "body": "Are you reading the instructions? Doesn&#39;t look like it. Someone took time to write this explanation that tells you exactly how to fix it,."}], "answers": [{"tags": [], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "is_accepted": true, "score": 2, "last_activity_date": 1429742990, "creation_date": 1429742990, "answer_id": 29810353, "question_id": 29810275, "link": "https://stackoverflow.com/questions/29810275/cannot-upgrade-rails-from-4-0-0-to-4-2-0/29810353#29810353", "title": "Cannot upgrade Rails from 4.0.0 to 4.2.0", "body": "<p>Try installing xcode like the error message says</p>\n\n<p><code>xcode-select --install</code></p>\n"}], "owner": {"reputation": 181, "user_id": 4642327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e23f192792e2ab87cce6d0ad9fccc2b?s=128&d=identicon&r=PG&f=1", "display_name": "firefly", "link": "https://stackoverflow.com/users/4642327/firefly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 29810353, "answer_count": 1, "score": -2, "last_activity_date": 1429742990, "creation_date": 1429742679, "last_edit_date": 1429742792, "question_id": 29810275, "link": "https://stackoverflow.com/questions/29810275/cannot-upgrade-rails-from-4-0-0-to-4-2-0", "title": "Cannot upgrade Rails from 4.0.0 to 4.2.0", "body": "<p>I'm trying to upgrade ruby on rails on my Mac, but somehow <code>ERROR: Failed to build gem native extension.</code> always pops up.</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing rails:\n    ERROR: Failed to build gem native extension.\n\n    /usr/local/opt/ruby/bin/ruby -r ./siteconf20150422-3384-60m3u9.rb extconf.rb\nchecking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\n-----\nThe file \"/usr/include/iconv.h\" is missing in your build environment,\nwhich means you haven't installed Xcode Command Line Tools properly.\n\nTo install Command Line Tools, try running `xcode-select --install` on\nterminal and follow the instructions.  If it fails, open Xcode.app,\nselect from the menu \"Xcode\" - \"Open Developer Tool\" - \"More Developer\nTools\" to open the developer site, download the installer for your OS\nversion and run it.\n-----\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/local/Cellar/ruby/2.2.2/bin/$(RUBY_BASE_NAME)\n    --help\n    --clean\n    --use-system-libraries\n    --enable-static\n    --disable-static\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --enable-cross-build\n    --disable-cross-build\n\nextconf failed, exit code 1\n\nGem files will remain installed in /usr/local/lib/ruby/gems/2.2.0/gems/nokogiri-1.6.6.2 for inspection.\nResults logged to /usr/local/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0/nokogiri-1.6.6.2/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1429742108, "creation_date": 1429742108, "answer_id": 29810151, "question_id": 29810105, "link": "https://stackoverflow.com/questions/29810105/rails-given-a-string-check-if-an-array-of-strings-contains-a-substring-of-st/29810151#29810151", "title": "Rails: Given a String, check if an Array (of strings) contains a substring of String", "body": "<p>There's really nothing wrong with using a regular expression here if that's your intent. It's generally more efficient to use one of those than to go through the trouble of comparing arrays.</p>\n\n<p>It's worth noting you don't have to do that much work to get this:</p>\n\n<pre><code>re = Regexp.union(array)\n</code></pre>\n\n<p>That should handle automatically escaping those strings and compiling them into a singular regular expression. Test with strings containing <code>*</code> and <code>?</code> to be sure.</p>\n\n<p>One note to add on style is that the <code>=~</code> operator is a hold-over from Perl. It's preferable to use <code>string.match(re)</code> to make it clear what's going on there.</p>\n"}, {"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1429742290, "creation_date": 1429742290, "answer_id": 29810189, "question_id": 29810105, "link": "https://stackoverflow.com/questions/29810105/rails-given-a-string-check-if-an-array-of-strings-contains-a-substring-of-st/29810189#29810189", "title": "Rails: Given a String, check if an Array (of strings) contains a substring of String", "body": "<p>How big is the array? It may be worth comparing the speed using a regex vs checking each element.  If the array is sorted shortest to longest that would help when checking one by one as you're more likely to find a match first.</p>\n\n<p>In any event, this is one way:</p>\n\n<pre><code>array_o_strings.any?{|e| string.index(e) }\n</code></pre>\n"}], "owner": {"reputation": 811, "user_id": 2760406, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8c8ba0bfa80963047f72f43f8e0b7182?s=128&d=identicon&r=PG&f=1", "display_name": "gr8scott06", "link": "https://stackoverflow.com/users/2760406/gr8scott06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1429742290, "creation_date": 1429741822, "last_edit_date": 1429741941, "question_id": 29810105, "link": "https://stackoverflow.com/questions/29810105/rails-given-a-string-check-if-an-array-of-strings-contains-a-substring-of-st", "title": "Rails: Given a String, check if an Array (of strings) contains a substring of String", "body": "<p>Is there a more Railsy way to do this (without explicit regex, perhaps?):</p>\n\n<pre><code>array_o_strings = [\"some strings\", \"I'd like\", \"to parse\"]\nstring = \"like to parse\"\nre = Regexp.union(array_o_strings.map { |i| Regexp.new(i) })\nstring =~ re\n</code></pre>\n\n<p>Just pining for magical Rails methods.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "loops", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 107, "user_id": 4747743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/419c74e6fa4d11cae55eefe8d991d244?s=128&d=identicon&r=PG&f=1", "display_name": "rocki", "link": "https://stackoverflow.com/users/4747743/rocki"}, "edited": false, "score": 0, "creation_date": 1429741152, "post_id": 29809770, "comment_id": 47747923, "body": "Why I&#39;m getting this down vote is there anything wrong in my question or it is just a new style"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 1565219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/876c9e4ae6c7e93eccbeebfe84ab316b?s=128&d=identicon&r=PG", "display_name": "Mark Chandler", "link": "https://stackoverflow.com/users/1565219/mark-chandler"}, "is_accepted": true, "score": 3, "last_activity_date": 1429741693, "creation_date": 1429741693, "answer_id": 29810079, "question_id": 29809770, "link": "https://stackoverflow.com/questions/29809770/getting-data-in-each-loop-rails/29810079#29810079", "title": "Getting data in each loop rails", "body": "<p>Your problem is that you are creating many modal divs, all with the id of \"pdfModal\", and every button on your page is targeting the SAME id. In CSS, an ID is supposed to be used only once per page. So, to fix your problem, I'd suggest adding an index to your each loop, naming each modal according to the index, and then having the button point to that specific modal.</p>\n\n<p><code>&lt;% @job.job_applications.each_with_index do |job_application, index| %&gt;</code></p>\n\n<p><code>&lt;button class=\"btn btn-primary btn-lg\" data-toggle=\"modal\" data-target=\"#pdfModal-&lt;%= index %&gt;\"&gt;</code></p>\n\n<p><code>&lt;div class=\"modal fade\" id=\"pdfModal-&lt;%= index %&gt;\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"&gt;</code></p>\n"}], "owner": {"reputation": 107, "user_id": 4747743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/419c74e6fa4d11cae55eefe8d991d244?s=128&d=identicon&r=PG&f=1", "display_name": "rocki", "link": "https://stackoverflow.com/users/4747743/rocki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 29810079, "answer_count": 1, "score": 1, "last_activity_date": 1429741693, "creation_date": 1429740340, "question_id": 29809770, "link": "https://stackoverflow.com/questions/29809770/getting-data-in-each-loop-rails", "title": "Getting data in each loop rails", "body": "<p>In my rails application I have this each loop</p>\n\n<pre><code>&lt;ul&gt;\n&lt;% @job.job_applications.each do |job_application| %&gt;\n  &lt;li&gt;\n    &lt;%= raw (simple_format(job_application.cover_letter)) %&gt;\n\n&lt;!-- Button trigger modal --&gt;\n&lt;button class=\"btn btn-primary btn-lg\" data-toggle=\"modal\" data-target=\"#pdfModal\"&gt;\n  view cv\n&lt;/button&gt;\n\n&lt;!-- Modal --&gt;\n&lt;div class=\"modal fade\" id=\"pdfModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"&gt;\n  &lt;div class=\"modal-dialog\" style = \"height:500px; width:1000px;\"&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n        &lt;h4 class=\"modal-title\" id=\"myModalLabel\"&gt;Modal title&lt;/h4&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-body\" style = \"height:500px; width:1000px;\"&gt;\n        &lt;iframe src=\"&lt;%= job_application.resume.url %&gt;\" frameborder=\"0\" style = \"height:100%; width:100%;\"&gt;&lt;/iframe&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;/li&gt;\n&lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>So what I'm trying to do is to get the cover_letter and open the resume in modal for every job_application but the problem is for resume because whatever the resume that I open it will show the first application resume in modal So I am wondering why I'm getting this is there any error in my code because something like thsi <code>&lt;%= link_to \"Applicant cv\", job_application.resume.url %&gt;</code> work just fine but I want to open resume in modal</p>\n"}, {"tags": ["ruby", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "is_accepted": true, "score": 1, "last_activity_date": 1429740358, "creation_date": 1429740358, "answer_id": 29809776, "question_id": 29809744, "link": "https://stackoverflow.com/questions/29809744/how-do-i-get-it-so-the-array-keeps-building-not-so-it-is-replaced-each-time/29809776#29809776", "title": "How do i get it so the array keeps building not so it is replaced each time?", "body": "<p>You need to move <code>allLetters = []</code> outside of your loop</p>\n\n<pre><code>def checkLetter(word)\n\nx = 0\nallLetters = [] # look here\nwhile x &lt; 5 do\n    puts \"Enter a letter\"\n    letter = gets.chomp.to_s\n    if word.include?(letter) == true\n        puts \"The letter is in it\"\n\n        allLetters &lt;&lt; letter\n\n    end\n\n    if word.include?(letter) == false\n        puts \"Try again\"\n        #add body part\n    end\n\n    x = x + 1\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4184575, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2363026730e97fc8c9572a45b8fe8619?s=128&d=identicon&r=PG&f=1", "display_name": "jackpot", "link": "https://stackoverflow.com/users/4184575/jackpot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 29809776, "answer_count": 1, "score": 0, "last_activity_date": 1429742692, "creation_date": 1429740233, "last_edit_date": 1429742692, "question_id": 29809744, "link": "https://stackoverflow.com/questions/29809744/how-do-i-get-it-so-the-array-keeps-building-not-so-it-is-replaced-each-time", "title": "How do i get it so the array keeps building not so it is replaced each time?", "body": "<p>so here is what i want to do.</p>\n\n<p>I am trying to accomplish so the letter variable gets added to the array each time it runs. The issue is, the variable letter keeps getting re written overtime the loop runs again. So if i type \u201cg\u201d so the variable letter is \u201cg\u201d, it'll put that variable in the array then run it again and repeat there process. So after the loop run 5 times, i want the array to be [l,g,e,f,g]. But instead it gets replaced everytime so instead of array being [l,g,e,f,g], its just [g] cuz thats what the variable letter is currently.</p>\n\n<pre><code>def checkLetter(word)\n\nx = 0\nwhile x &lt; 5 do\n    puts \"Enter a letter\"\n    letter = gets.chomp.to_s\n    if word.include?(letter) == true\n        puts \"The letter is in it\"\n        allLetters = []\n        allLetters &lt;&lt; letter\n\n    end\n\n    if word.include?(letter) == false\n        puts \"Try again\"\n        #add body part\n    end\n\n    x = x + 1\nend\n\n\nputs allLetters.inspect\nend\n\n\nputs \"enter a word\"\nword = gets.chomp\ncheckLetter(word)\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 3299, "user_id": 1749638, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cERvr.jpg?s=128&g=1", "display_name": "coderhs", "link": "https://stackoverflow.com/users/1749638/coderhs"}, "is_accepted": true, "score": 1, "last_activity_date": 1429740349, "creation_date": 1429740349, "answer_id": 29809774, "question_id": 29809493, "link": "https://stackoverflow.com/questions/29809493/paramsfile-path-has-no-method-sinatra/29809774#29809774", "title": "params[:file].path has no method sinatra", "body": "<p>To access the filename use </p>\n\n<pre><code>filename = params[:file][:filename]\n</code></pre>\n\n<p>To access file use</p>\n\n<pre><code>file = params[:file][:tempfile]\n</code></pre>\n"}], "owner": {"reputation": 640, "user_id": 3565899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/216192e36dd32ea09bed81f758a55909?s=128&d=identicon&r=PG", "display_name": "Abdul Hamid", "link": "https://stackoverflow.com/users/3565899/abdul-hamid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 29809774, "answer_count": 1, "score": 1, "last_activity_date": 1429740349, "creation_date": 1429739247, "question_id": 29809493, "link": "https://stackoverflow.com/questions/29809493/paramsfile-path-has-no-method-sinatra", "title": "params[:file].path has no method sinatra", "body": "<p>hello im sending a request with a file to my server with a post method\nthe file arrives but i want to get the path i order to open it but when i get the file with </p>\n\n<p><code>params[:file].path</code> </p>\n\n<p>it says that the hash has no methods\nso now i know that this is a hash instead of a file, is there a way to transform this hash to the file i need?</p>\n\n<p>here is how my request looks:</p>\n\n<pre><code>{\n    \"utf8\"=&gt;\"\u2713\",\n    \"authenticity_token\"=&gt;\"vsp2/5YCM9OBFjXASnpnXNmi4oYVlbAEeUhHQzpRd4w=\",\n    `\"file\"=&gt;`{\n        : filename=&gt;\"mass_email.csv\",\n        : type=&gt;\"text/csv\",\n        : name=&gt;\"file\",\n        : tempfile=&gt;#&lt;File: /tmp/RackMultipart20150422-8224-1vm8siy.csv&gt;,\n        : head=&gt;\"Content-Disposition: form-data; name=\\\"file\\\"; filename=\\\"mass_email.csv\\\"\\r\\nContent-Type: text/csv\\r\\n\"\n    },\n    \"commit\"=&gt;\"Send Mass Email\",\n    \"from\"=&gt;{\n        \"0\"=&gt;\"\\\"balblabla\\\" &lt;email@ik.com&gt;\"\n    },\n    \"subject\"=&gt;{\n        \"0\"=&gt;\"asdasda\"\n    },\n    \"template\"=&gt;{\n        \"0\"=&gt;\"sdasdasdaojoasdijoisjdcxvb\"\n    }\n}\n</code></pre>\n\n<p>also if you know how can i change the way this request arrives with extra \\\\ everywhere that will very helpful</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 1599, "user_id": 267180, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/90a56a6e77d86ce0d54dbe9c1819bb06?s=128&d=identicon&r=PG", "display_name": "andrunix", "link": "https://stackoverflow.com/users/267180/andrunix"}, "edited": false, "score": 0, "creation_date": 1429748500, "post_id": 29809326, "comment_id": 47750552, "body": "blowmage and Mike Manfrin both gave answers that were helpful. Wish I could mark them both as the accepted answer."}], "answers": [{"tags": [], "owner": {"reputation": 8260, "user_id": 5627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8da976054ea4915eafc5d9dd096d38?s=128&d=identicon&r=PG", "display_name": "blowmage", "link": "https://stackoverflow.com/users/5627/blowmage"}, "is_accepted": true, "score": 2, "last_activity_date": 1429740446, "creation_date": 1429740446, "answer_id": 29809799, "question_id": 29809326, "link": "https://stackoverflow.com/questions/29809326/how-to-test-simple-ruby-class-in-rails-application/29809799#29809799", "title": "How to test simple Ruby class in Rails application?", "body": "<p>I would create the file <code>test/models/my_facade_test.rb</code> and test it there. This is still part of your domain, even if it doesn't inherit from ActiveRecord. Not every domain model needs to be backed by a database table.</p>\n"}, {"tags": [], "owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "is_accepted": false, "score": 2, "last_activity_date": 1429740896, "creation_date": 1429740896, "answer_id": 29809906, "question_id": 29809326, "link": "https://stackoverflow.com/questions/29809326/how-to-test-simple-ruby-class-in-rails-application/29809906#29809906", "title": "How to test simple Ruby class in Rails application?", "body": "<p>Exactly the same way you'd test an ActiveRecord model. </p>\n\n<p>Your tests would look something like:</p>\n\n<pre><code>expect(MyFacade.foo).to be_kind_of(WebService::foo)\n</code></pre>\n\n<p>etc.</p>\n"}], "owner": {"reputation": 1599, "user_id": 267180, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/90a56a6e77d86ce0d54dbe9c1819bb06?s=128&d=identicon&r=PG", "display_name": "andrunix", "link": "https://stackoverflow.com/users/267180/andrunix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 29809799, "answer_count": 2, "score": 1, "last_activity_date": 1429740896, "creation_date": 1429738609, "question_id": 29809326, "link": "https://stackoverflow.com/questions/29809326/how-to-test-simple-ruby-class-in-rails-application", "title": "How to test simple Ruby class in Rails application?", "body": "<p>I have a Rails 4 application to which I am adding a simple class as a wrapper around an external API I am calling. The class does not inherit from anything and looks something like:</p>\n\n<pre><code>class MyFacade\n  def self.foo\n    WebService::foo\n  end\n\n  def self.bar\n    WebService::bar\n  end\nend\n</code></pre>\n\n<p>I have placed the file into app/classes where it gets autoloaded. This is working fine. The question is, how and where do you write tests for a class like this with only class methods?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4833, "user_id": 509839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzm8B.jpg?s=128&g=1", "display_name": "Don Cruickshank", "link": "https://stackoverflow.com/users/509839/don-cruickshank"}, "edited": false, "score": 1, "creation_date": 1429738486, "post_id": 29809149, "comment_id": 47746673, "body": "Given that you are enumerating each adjacent pair in the array, <code>each_cons</code> is the correct tool for the job."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1429738629, "post_id": 29809149, "comment_id": 47746750, "body": "What are <code>@points</code>, <code>@range_to</code>, <code>Interpolation</code>, <code>find_between</code>?"}, {"owner": {"reputation": 1042, "user_id": 1044162, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/RBoXK.jpg?s=128&g=1", "display_name": "Aleksandr K.", "link": "https://stackoverflow.com/users/1044162/aleksandr-k"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1429739429, "post_id": 29809149, "comment_id": 47747131, "body": "@sawa, I improved my question."}], "answers": [{"comments": [{"owner": {"reputation": 1042, "user_id": 1044162, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/RBoXK.jpg?s=128&g=1", "display_name": "Aleksandr K.", "link": "https://stackoverflow.com/users/1044162/aleksandr-k"}, "edited": false, "score": 0, "creation_date": 1429786432, "post_id": 29810033, "comment_id": 47768761, "body": "Like your solution, but better to use <code>detect</code> instead <code>select{ }.first</code>."}], "tags": [], "owner": {"reputation": 74, "user_id": 1970952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c22cfafc2bcda6d1ba61b466aa8449df?s=128&d=identicon&r=PG", "display_name": "pepegasca", "link": "https://stackoverflow.com/users/1970952/pepegasca"}, "is_accepted": false, "score": 1, "last_activity_date": 1429741481, "creation_date": 1429741481, "answer_id": 29810033, "question_id": 29809149, "link": "https://stackoverflow.com/questions/29809149/selecting-two-elements-from-array/29810033#29810033", "title": "Selecting two elements from array", "body": "<p>You can use something like:</p>\n\n<pre><code>selected_points = points.each_cons(2).select{|p| p.last[:alti] &lt;= range_to}.first\nselected_points &amp;&amp; new_point = Interpolation.find_between(selected_points.first, selected_points.last, range_to)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1042, "user_id": 1044162, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/RBoXK.jpg?s=128&g=1", "display_name": "Aleksandr K.", "link": "https://stackoverflow.com/users/1044162/aleksandr-k"}, "edited": false, "score": 0, "creation_date": 1429789195, "post_id": 29815030, "comment_id": 47770812, "body": "It will cause additional conditions. In example if upper will be first element."}], "tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 0, "last_activity_date": 1429769174, "creation_date": 1429769174, "answer_id": 29815030, "question_id": 29809149, "link": "https://stackoverflow.com/questions/29809149/selecting-two-elements-from-array/29815030#29815030", "title": "Selecting two elements from array", "body": "<p>Not sure each_cons here make things clearer. Why no just do this?</p>\n\n<pre><code>upper = points.find_index{|point| point[:alti] &lt;= range }\nlower = upper - 1\nnew_point = Interpolation.find_between(points[lower], points[upper], range_to)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1042, "user_id": 1044162, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/RBoXK.jpg?s=128&g=1", "display_name": "Aleksandr K.", "link": "https://stackoverflow.com/users/1044162/aleksandr-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1429860074, "last_edit_date": 1495542115, "creation_date": 1429860074, "answer_id": 29841135, "question_id": 29809149, "link": "https://stackoverflow.com/questions/29809149/selecting-two-elements-from-array/29841135#29841135", "title": "Selecting two elements from array", "body": "<p>With <a href=\"https://stackoverflow.com/a/29810033/1044162\">Pepegasca answer</a> I came to this solution:</p>\n\n<pre><code>pair = \n  points.each_cons(2).detect do |pair| \n    range_to.between? pair.last[:alti], pair.first[:alti]\n  end\n\nreturn nil unless pair\n\nInterpolation.find_between(pair.first, pair.last, range_to)\n</code></pre>\n\n<p>I think it's simple, clear and follow ruby style guide.</p>\n\n<p><code>points.each_cons(2)</code> without block given returns <code>Enumerator</code>, then <code>detect</code> finds first by given in block condition. Then condition to check if it was successful and if yes - function <code>Interpolation.find_between</code> do its work and returns value. </p>\n"}], "owner": {"reputation": 1042, "user_id": 1044162, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/RBoXK.jpg?s=128&g=1", "display_name": "Aleksandr K.", "link": "https://stackoverflow.com/users/1044162/aleksandr-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 29841135, "answer_count": 3, "score": 1, "last_activity_date": 1429860074, "creation_date": 1429737922, "last_edit_date": 1429739406, "question_id": 29809149, "link": "https://stackoverflow.com/questions/29809149/selecting-two-elements-from-array", "title": "Selecting two elements from array", "body": "<p>In my application I need to select element from array by condition and the previous one. I'm using <code>each_cons</code> method, so my code looks like:</p>\n\n<pre><code>range_to = 2500\n\npoints = [\n  {alti: 3000, time: 1},\n  {alti: 2000, time: 2},\n  ...\n]\n\npoints.each_cons(2) do |pair|\n  if pair.last[:alti] &lt;= range_to\n    new_point = Interpolation.find_between(pair.first, pair.last, range_to) \n  end\n  break if new_point\nend\n</code></pre>\n\n<p><code>Interpolation.find_between</code> makes interpolation and returns point that lays between two in arguments, like:</p>\n\n<pre><code>{alti: 2500, time 1.5}\n</code></pre>\n\n<p>Is there any more right/elegant approach?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1429736842, "post_id": 29808721, "comment_id": 47745787, "body": "Can you maybe give The entire spec and menu class? Also the stacktrace of the error? Looks like you should be doing something like <code>@dishes &lt;&lt; {name: name, price: price}</code> in your add method, but can&#39;t really tell what your code is doing."}, {"owner": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1429736909, "post_id": 29808721, "comment_id": 47745821, "body": "Thanks the error I am getting is not a stack it is a       Menu can add dishes to it      Failure/Error: Menu.add(&quot;Icecream&quot;, 4.80)      NoMethodError:       undefined method `add&#39; for Menu:Class     I will update my question with all the code now"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1429737147, "post_id": 29808721, "comment_id": 47745957, "body": "Can you post the code for your whole menu class?"}], "answers": [{"comments": [{"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1429737096, "post_id": 29808919, "comment_id": 47745912, "body": "Note that if you did want a static method then you would use <code>def self.add(name, price)</code> but I don&#39;t think you need it from what I can see."}, {"owner": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "edited": false, "score": 0, "creation_date": 1429737495, "post_id": 29808919, "comment_id": 47746163, "body": "Thank you the def self.add has helped,actually but not solved it.  As the new dish (cream has not added to the hash) but getting there. thanks"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "reply_to_user": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "edited": false, "score": 0, "creation_date": 1429737789, "post_id": 29808919, "comment_id": 47746321, "body": "Read the answer it will help a bit more. You don&#39;t want to use self.add. You want to change your spec where you are saying <code>Menu.add</code> to <code>Menu.new.add</code>"}, {"owner": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "edited": false, "score": 0, "creation_date": 1429737881, "post_id": 29808919, "comment_id": 47746373, "body": "Thanks but both those return the error   undefined method `add&#39; for nil:NilClass"}], "tags": [], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "is_accepted": false, "score": 1, "last_activity_date": 1429770130, "last_edit_date": 1429770130, "creation_date": 1429737044, "answer_id": 29808919, "question_id": 29808721, "link": "https://stackoverflow.com/questions/29808721/writing-a-rspec-test-to-add-an-item-to-a-hash/29808919#29808919", "title": "writing a rspec test to add an item to a hash", "body": "<p>Ah I see your problem. You need to initialize your menu. <code>Add</code> is not a static method. So you need something like,</p>\n\n<pre><code>Menu.new.add(blah, blah)\n</code></pre>\n\n<p>Look at:</p>\n\n<pre><code>Menu.add(\"Icecream\", 4.80)\n</code></pre>\n\n<p>This method is wrong. It needs to be:</p>\n\n<pre><code>Menu.new.add(\"Icecream\", 4.80)\n</code></pre>\n\n<p>or you need something like:</p>\n\n<pre><code>menu = Menu.new\nmenu.add(\"Icecream\", 4.80)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "is_accepted": false, "score": 1, "last_activity_date": 1429738345, "creation_date": 1429738345, "answer_id": 29809257, "question_id": 29808721, "link": "https://stackoverflow.com/questions/29808721/writing-a-rspec-test-to-add-an-item-to-a-hash/29809257#29809257", "title": "writing a rspec test to add an item to a hash", "body": "<p>It's a bit difficult to get this working without your code, but the problem is pretty straight forward.</p>\n\n<p>Try the edited code below. Note the changes to the spec initialize the menu and add method adds to the instance variable @dishes.</p>\n\n<pre><code>require 'menu'\n\ndescribe Menu do\n   it 'displays dishes and prices' do\n    expect(Menu.new.dishes).to eq [\n      { name: 'Burger', price: 10.95 },\n      { name: 'Pizza', price: 14.00 },\n      { name: 'Salad', price: 7.60 },\n      { name: 'fries', price: 2.90 }\n    ]\n  end\n  it 'can add dishes to it' do\n   menu = Menu.new.add(\"Icecream\", 4.80)\n   expect(menu.dishes).to eq [\n    { name: 'Burger', price: 10.95 },\n    { name: 'Pizza', price: 14.00 },\n    { name: 'Salad', price: 7.60 },\n    { name: 'fries', price: 2.90 },\n    { name: 'icecream', price: 4.80 }\n  ]\n  end\nend\n\nclass Menu\n   def initialize\n     @dishes = []\n   end\n\n   def dishes\n    @dishes ||=\n    [\n      { name: 'Burger', price: 10.95  },\n      { name: 'Pizza', price: 14.00 },\n      { name: 'Salad', price: 7.60 },\n      { name: 'fries', price: 2.90 }\n    ]\n  end\n\n  def add(name, price)\n    @dishes &lt;&lt; { name: name, price: price }\n  end\nend\n</code></pre>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "is_accepted": false, "score": 1, "last_activity_date": 1429738350, "creation_date": 1429738350, "answer_id": 29809259, "question_id": 29808721, "link": "https://stackoverflow.com/questions/29808721/writing-a-rspec-test-to-add-an-item-to-a-hash/29809259#29809259", "title": "writing a rspec test to add an item to a hash", "body": "<p>It looks like you've got a couple of problems with this code. First, because the <code>add</code> method is not declared as a class method (i.e. <code>def self.add</code>) you can't call it as a class method (as you've seen, <code>Menu.add</code> says NoMethodError). Instead, you'll need to create an instance of the Menu class in your test, perhaps using <code>let</code>:</p>\n\n<pre><code>describe Menu do\n  let(:menu) { Menu.new }\n\n  it 'can add dishes to it' do\n    menu.add(\"Icecream\", 4.80)\n    # test your expectations...\n  end\nend\n</code></pre>\n\n<p>Lastly, as the <code>add</code> method is currently defined, it doesn't modify <code>@dishes</code> but rather just returns a new hash, so your expectation will fail. You'll need to make the <code>add</code> method append the values, perhaps like this:</p>\n\n<pre><code>def add(name, , price)\n  @dishes &lt;&lt; {name: name, price: price}\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "edited": false, "score": 0, "creation_date": 1429889832, "post_id": 29827021, "comment_id": 47829314, "body": "Big Kudos to you for your awesome help! I am New to ruby and was totally stuck on why my hash was not working, and had almost given up! Thank you so much for taking the time to help out!"}, {"owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "reply_to_user": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "edited": false, "score": 0, "creation_date": 1429902413, "post_id": 29827021, "comment_id": 47836977, "body": "@Stacca Never-mind,  We are a community, and it&#39;s our duty to give help when possible."}], "tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": true, "score": 1, "last_activity_date": 1429822669, "last_edit_date": 1495541183, "creation_date": 1429800546, "answer_id": 29827021, "question_id": 29808721, "link": "https://stackoverflow.com/questions/29808721/writing-a-rspec-test-to-add-an-item-to-a-hash/29827021#29827021", "title": "writing a rspec test to add an item to a hash", "body": "<p>The answer of <a href=\"https://stackoverflow.com/a/29808919/676788\">Ryan-Neal Mes</a> solves the NoMethodError, but there are many other problems in your code.</p>\n\n<ol>\n<li><p>You repeat your self, and you should make your code dry (Don't Repeat Yourself principle)</p></li>\n<li><p>while you want to add a hash to the list of dishes which is it self a list of hashes, you force the object that needs to call the add method to provide the parameters in a particular order, than the method constructs the hash, so every time you need to call it you need to return to it to see the order of parameters.</p></li>\n<li>the <code>dishes</code> method is wrong, because each time you call it, it assigns the initial array to the <code>@dishes</code> variable. In this case the <code>add_dishes</code> method will have no effect, since the added dish will be deleted the next time you call the <code>dishes</code> method. </li>\n<li>your examples are not expressive, so if a test did not pass, you cannot know from the printed messages what's the problem. OK, this is not a big deal in this small example, but in a big application, specs expressiveness is of a higher value.</li>\n</ol>\n\n<p>here the test examples</p>\n\n<pre><code>require 'menu'\n\ndescribe Menu do\n  # every time you call the function dishes in an example\n  # it will be declared and it will return this array\n  let :dishes do\n    [\n      { name: 'Burger', price: 10.95 },\n      { name: 'Pizza', price: 14.00 },\n      { name: 'Salad', price: 7.60 },\n      { name: 'fries', price: 2.90 }\n    ]\n  end\n\n  # explicit definition of the subject\n  subject { Menu.new }\n\n  # a shorter yet more expressive version of\n  # expect(subject.respond_to?(:dishes)).to be true\n  it { is_expected.to respond_to(:dishes) }\n\n  # You should always group the examples that test \n  # the same method\n  describe '#dishes' do\n    # it 'displays dishes and prices' do\n    it 'returns the list of dishes' do\n      expect(subject.dishes).to eq dishes\n    end\n  end\n\n  describe \"#add_dish\" do\n    # it 'can add dishes to it' do\n    it \"adds the given dish to the list of dishes\" do\n      new_dish = {name: 'salad', price: 4.0 }\n      expect {\n        subject.add_dish(new_dish)\n      }.to change(subject.dishes, :count).by(1)\n      expect(subject.dishes).to include new_dish\n    end\n  end\nend\n</code></pre>\n\n<p>so here is the class definition</p>\n\n<pre><code>class Menu\n  # you don't need to declare the method dishes\n  # since this is what attr_reader will do\n  attr_reader :dishes\n\n   def initialize\n     # this will set the @dishes only once\n     # but you code @dishes = [...] will return\n     # the same list every time you call it and\n     # all the dishes you add through the #add method\n     # will be deleted.\n     @dishes = [\n        { name: 'Burger', price: 10.95  },\n        { name: 'Pizza', price: 14.00 },\n        { name: 'Salad', price: 7.60 },\n        { name: 'fries', price: 2.90 }\n     ]\n   end\n\n   # dish is a hash {name: '', price: ''} \n   def add_dish(dish)\n     @dishes &lt;&lt; dish\n   end\nend\n</code></pre>\n\n<p>so now run <code>rspec --format doc --color</code> and see who expressive are the messages.</p>\n"}], "owner": {"reputation": 681, "user_id": 4654485, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-9sAH5y4VZlA/AAAAAAAAAAI/AAAAAAAABRM/zamhhVtNSNs/photo.jpg?sz=128", "display_name": "Stacca", "link": "https://stackoverflow.com/users/4654485/stacca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 1, "accepted_answer_id": 29827021, "answer_count": 4, "score": 0, "last_activity_date": 1429822669, "creation_date": 1429736446, "last_edit_date": 1429740649, "question_id": 29808721, "link": "https://stackoverflow.com/questions/29808721/writing-a-rspec-test-to-add-an-item-to-a-hash", "title": "writing a rspec test to add an item to a hash", "body": "<p>I am getting a NoMethodError\nfor my code but I have defined the add method it says it is missing.\nI am trying to add an item to a hash that already exists.\n The hash is the dishes and I am trying to use the add method. </p>\n\n<p>The test:</p>\n\n<pre><code>require 'menu'\n\ndescribe Menu do\n\n    it 'has a menu' do\n        expect(subject.respond_to?(:dishes)).to be true\n    end\n\n    it 'displays dishes and prices' do\n        expect(subject.dishes).to eq [\n            { name: 'Burger', price: 10.95 },\n            { name: 'Pizza', price: 14.00 },\n            { name: 'Salad', price: 7.60 },\n            { name: 'fries', price: 2.90 }\n        ]\n    end\n\n    it 'can add dishes to it' do\n        menu = Menu.new \n        menu.add_dish(\"Icecream\", 4.80)\n        expect(subject.dishes).to eq [\n            { name: 'Burger', price: 10.95 },\n            { name: 'Pizza', price: 14.00 },\n            { name: 'Salad', price: 7.60 },\n            { name: 'fries', price: 2.90 },\n            { name: 'icecream', price: 4.80 }\n        ]\n    end\nend\n</code></pre>\n\n<p>the methods</p>\n\n<pre><code>class Menu\n   def initialize\n     @dishes = []\n   end\n\n   def dishes\n     @dishes = [\n        { name: 'Burger', price: 10.95  },\n        { name: 'Pizza', price: 14.00 },\n        { name: 'Salad', price: 7.60 },\n        { name: 'fries', price: 2.90 }\n     ]\n   end\n\n   def add_dish(name, price)\n     @dishes &lt;&lt; { name: name, price: price }\n   end\nend\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "string", "sorting"], "comments": [{"owner": {"reputation": 1251, "user_id": 3700378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PeqNK.jpg?s=128&g=1", "display_name": "xsami", "link": "https://stackoverflow.com/users/3700378/xsami"}, "edited": false, "score": 1, "creation_date": 1429736015, "post_id": 29808574, "comment_id": 47745310, "body": "So you have to try to make your program not case sensitive."}, {"owner": {"reputation": 2663, "user_id": 1521117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TbjFj.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/1521117/chase"}, "edited": false, "score": 0, "creation_date": 1429736154, "post_id": 29808574, "comment_id": 47745406, "body": "You can overload &lt;=&gt; and write some custom sorting."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2663, "user_id": 1521117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TbjFj.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/1521117/chase"}, "edited": false, "score": 0, "creation_date": 1429736473, "post_id": 29808574, "comment_id": 47745598, "body": "@ChaseGilliam not to be a nazi but &quot;overloading&quot; is not a ruby convention or even possible. J&#246;rg W Mittag Wrote an <a href=\"http://stackoverflow.com/a/9380268/1978251\">excellent post</a> explaining this concept. Also <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-sort\" rel=\"nofollow noreferrer\"><code>Array#sort</code></a> will allow you to specify any custom sorting you want"}, {"owner": {"reputation": 2663, "user_id": 1521117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TbjFj.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/1521117/chase"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429738046, "post_id": 29808574, "comment_id": 47746444, "body": "@engineersmnky ok, you are correct. You can however def &lt;=&gt; ... end and yeah, Array#sort is a better approach."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429783527, "post_id": 29808574, "comment_id": 47766737, "body": "Reminds me of <a href=\"http://stackoverflow.com/q/28413845/477037\">stackoverflow.com/q/28413845/477037</a>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4703822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5740197f107b7b62ce423132c45cf766?s=128&d=identicon&r=PG&f=1", "display_name": "Appunu", "link": "https://stackoverflow.com/users/4703822/appunu"}, "edited": false, "score": 0, "creation_date": 1429736995, "post_id": 29808649, "comment_id": 47745862, "body": "Thats a very sneaky answer. Loved the approach though. Thanks a lot"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1429738873, "post_id": 29808649, "comment_id": 47746884, "body": "Nice one. Maybe <code>each_char</code> rather than <code>chars</code> to avoid the creation of a temporary array."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1429747479, "post_id": 29808649, "comment_id": 47750208, "body": "Had to think about this one for a while. Very clever."}], "tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 13, "last_activity_date": 1429772494, "last_edit_date": 1429772494, "creation_date": 1429736180, "answer_id": 29808649, "question_id": 29808574, "link": "https://stackoverflow.com/questions/29808574/ruby-custom-string-sort/29808649#29808649", "title": "Ruby custom string sort", "body": "<p>What about this?</p>\n\n<pre><code>p '1654AaBcDddeeFF'.each_char.sort_by(&amp;:swapcase).join #=&gt; \"1456acddeeABDFF\"\n</code></pre>\n\n<p>Edit: As @Cary Swoveland pointed out <code>.chars</code> is just a shortcut for <code>.each_char.to_a</code> and since we do not need to <code>to_a</code> here <code>.each_char</code> is a better method to use</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429740048, "post_id": 29809519, "comment_id": 47747432, "body": "Note that this removes duplicate characters."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429740311, "post_id": 29809519, "comment_id": 47747552, "body": "You could use an <code>order</code> array and <code>sort_by { |c| order.index(c) }</code>"}, {"owner": {"reputation": 83, "user_id": 4703822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5740197f107b7b62ce423132c45cf766?s=128&d=identicon&r=PG&f=1", "display_name": "Appunu", "link": "https://stackoverflow.com/users/4703822/appunu"}, "edited": false, "score": 0, "creation_date": 1429741165, "post_id": 29809519, "comment_id": 47747930, "body": "Looks nice. But is actual sorting happening here ? Like say are they sorted based on ASCII values when it comes to special characters ? To me it looks like mere grouping when it comes to symbols but am not sure, please enlighten me"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 83, "user_id": 4703822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5740197f107b7b62ce423132c45cf766?s=128&d=identicon&r=PG&f=1", "display_name": "Appunu", "link": "https://stackoverflow.com/users/4703822/appunu"}, "edited": false, "score": 1, "creation_date": 1429744193, "post_id": 29809519, "comment_id": 47749069, "body": "@Appunu, you&#39;d have to include the special characters in order_array. For example, if <code>str = &#39;\u03b2\u03943R\u03b1e&#39;</code> and we want to modify my example to put the Greek letters at the end (lower then upper case), we would need <code>order_array = [*&#39;0&#39;..&#39;9&#39;,*&#39;a&#39;..&#39;z&#39;,*&#39;A&#39;..&#39;Z&#39;,*&#39;\u03b1&#39;..&#39;\u03c9&#39;,*&#39;\u0391&#39;..&#39;\u03a9&#39;]</code>, <code>str.each_char.sort_by { |c| order_array.index(c) }.join #=&gt; &quot;3eR\u03b1\u03b2\u0394&quot;</code>. Note also <code>str.each_char.map(&amp;:swapcase).join #=&gt; &quot;\u03b2\u03943r\u03b1E&quot;</code>."}, {"owner": {"reputation": 83, "user_id": 4703822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5740197f107b7b62ce423132c45cf766?s=128&d=identicon&r=PG&f=1", "display_name": "Appunu", "link": "https://stackoverflow.com/users/4703822/appunu"}, "edited": false, "score": 0, "creation_date": 1429807712, "post_id": 29809519, "comment_id": 47785824, "body": "Eventhough I accepted the previous answer. This solution provided by @CarySwoveland is the optimal one under various situations where we need to involve special characters and symbols."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1429791970, "last_edit_date": 1429791970, "creation_date": 1429739370, "answer_id": 29809519, "question_id": 29808574, "link": "https://stackoverflow.com/questions/29808574/ruby-custom-string-sort/29809519#29809519", "title": "Ruby custom string sort", "body": "<p>Since @hirolau's already taken <code>swapcase</code>, I offered an alternative (even though I prefer his answer). Alas, @Stefan identified a flaw, but suggested a nice fix:</p>\n\n<pre><code>str = '1654AaBcDddeeFF'\n\norder_array = [*'0'..'9',*'a'..'z',*'A'..'Z']\nstr.each_char.sort_by { |c| order_array.index(c) }.join\n  #=&gt; \"1456acdeABDF\" \n</code></pre>\n\n<p>(I am a mere scribe.)</p>\n\n<p>One advantage of this approach is that you could use it for other orderings. For example, if:</p>\n\n<pre><code>str = '16?54!AaBcDdde,eFF'\n</code></pre>\n\n<p>and you also wanted to group the characters `'!?,' at the beginning, in that order, you could write:</p>\n\n<pre><code>order_array = [*'!?,'.chars,*'0'..'9',*'a'..'z',*'A'..'Z']\nstr.each_char.sort_by { |c| order_array.index(c) }.join\n  #=&gt; \"!?,1456acdeABDF\" \n</code></pre>\n\n<p>We can make this a bit more efficient by converting <code>order_array</code> to a hash. For the last example:</p>\n\n<pre><code>order_hash = Hash[order_array.each_with_index.to_a]\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>str.each_char.sort_by { |c| order_hash[c] }.join\n  # =&gt; \"!?,1456acddeeABDFF\"\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4703822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5740197f107b7b62ce423132c45cf766?s=128&d=identicon&r=PG&f=1", "display_name": "Appunu", "link": "https://stackoverflow.com/users/4703822/appunu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 1, "accepted_answer_id": 29809519, "answer_count": 2, "score": 5, "last_activity_date": 1429791970, "creation_date": 1429735930, "last_edit_date": 1429737346, "question_id": 29808574, "link": "https://stackoverflow.com/questions/29808574/ruby-custom-string-sort", "title": "Ruby custom string sort", "body": "<p>Input string:</p>\n\n<pre><code>1654AaBcDddeeFF \n</code></pre>\n\n<p>Output string:</p>\n\n<pre><code>1456acddeeABDFF\n</code></pre>\n\n<p>Code I tried:</p>\n\n<pre><code>test_array = []\n'1654AaBcDddeeFF'.each_byte do |char|\n  test_array &lt;&lt; char\nend\n\ntest_array.sort.pack('C*')\n# =&gt; 1456ABDFFacddee\n</code></pre>\n\n<p>But I would like to see the upper case characters at last.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": false, "score": 0, "last_activity_date": 1429735882, "creation_date": 1429735882, "answer_id": 29808554, "question_id": 29808509, "link": "https://stackoverflow.com/questions/29808509/why-do-i-need-to-use-self-when-assigning-values-in-my-rails-models/29808554#29808554", "title": "Why do I need to use self when assigning values in my Rails models?", "body": "<p>Whenever you want to invoke a setter method on self, you have to write self.status = \"open\". If you just write status = \"open\", the ruby parser recognizes that as a variable assignment and thinks of status as a local variable from now on. For the parser to realize, that you want to invoke a setter method, and not assign a local variable, you have to write obj.status = \"open\", so if the object is self, self.status = \"open\"</p>\n"}, {"comments": [{"owner": {"reputation": 1881, "user_id": 4204030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3bef597eddffe2c9ab5f89a0a5c0bdd?s=128&d=identicon&r=PG&f=1", "display_name": "ThomYorkkke", "link": "https://stackoverflow.com/users/4204030/thomyorkkke"}, "edited": false, "score": 0, "creation_date": 1429735955, "post_id": 29808569, "comment_id": 47745253, "body": "Oooh, okay that makes total sense. Thanks."}], "tags": [], "owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "is_accepted": true, "score": 2, "last_activity_date": 1429735977, "last_edit_date": 1429735977, "creation_date": 1429735924, "answer_id": 29808569, "question_id": 29808509, "link": "https://stackoverflow.com/questions/29808509/why-do-i-need-to-use-self-when-assigning-values-in-my-rails-models/29808569#29808569", "title": "Why do I need to use self when assigning values in my Rails models?", "body": "<p>Because if you do <code>status = 'open'</code> you are creating a new local variable called <code>status</code>. That's not about Rails. That is about how Ruby interpreter evaluate your code.</p>\n"}, {"tags": [], "owner": {"reputation": 719, "user_id": 4387561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GO9Lhd-wwzo/AAAAAAAAAAI/AAAAAAAAAH8/5vOMLeZXslc/photo.jpg?sz=128", "display_name": "Shifa Khan", "link": "https://stackoverflow.com/users/4387561/shifa-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1429736004, "last_edit_date": 1495540624, "creation_date": 1429736004, "answer_id": 29808595, "question_id": 29808509, "link": "https://stackoverflow.com/questions/29808509/why-do-i-need-to-use-self-when-assigning-values-in-my-rails-models/29808595#29808595", "title": "Why do I need to use self when assigning values in my Rails models?", "body": "<p>The accepted answer here explains it pretty well. -> <a href=\"https://stackoverflow.com/questions/10805136/when-to-use-self-in-model\">When to use self in Model?</a></p>\n\n<p>To read further in depth this is an excellent blog that puts it clearly. <a href=\"http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/\" rel=\"nofollow noreferrer\">http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/</a></p>\n"}], "owner": {"reputation": 1881, "user_id": 4204030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3bef597eddffe2c9ab5f89a0a5c0bdd?s=128&d=identicon&r=PG&f=1", "display_name": "ThomYorkkke", "link": "https://stackoverflow.com/users/4204030/thomyorkkke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1429736199, "accepted_answer_id": 29808569, "answer_count": 3, "score": -4, "last_activity_date": 1429736004, "creation_date": 1429735734, "question_id": 29808509, "link": "https://stackoverflow.com/questions/29808509/why-do-i-need-to-use-self-when-assigning-values-in-my-rails-models", "closed_reason": "Duplicate", "title": "Why do I need to use self when assigning values in my Rails models?", "body": "<p>If I have a class in Rails:</p>\n\n<pre><code>class Ticket &lt; ActiveRecord::Base\n  def update_status\n    return if status == 'sold'\n    return unless reserved_until.nil? || reserved_until.past?\n    self.status = 'open'\n  end\nend\n</code></pre>\n\n<p>where <code>status</code> and <code>reserved_until</code> are fields in the database for the <code>Ticket</code> model, why do I only have to use <code>self</code> when I am assigning a value?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1429735838, "post_id": 29808312, "comment_id": 47745170, "body": "Your best bet for scalability would probably be to have a &#39;web&#39; server, which is main rails app, and have a &#39;job&#39; or &#39;worker&#39; server that will do the task asynchronously. Just because it executes in ~2 seconds, doesn&#39;t mean it always will. If your server gets overloaded, the tasks may get queued by the OS, and executed when it has the ability to."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429735841, "post_id": 29808312, "comment_id": 47745171, "body": "This is really nebulous so we can only give opinions based on guesses, not specific answers based on facts. How many requests do you expect per minute now? How about a year from now? Will the input files get larger slowing processing time?"}, {"owner": {"reputation": 2246, "user_id": 1614888, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/703ed4c3caf08a3c21b31ace0934bb41?s=128&d=identicon&r=PG", "display_name": "hsgubert", "link": "https://stackoverflow.com/users/1614888/hsgubert"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429818881, "post_id": 29808312, "comment_id": 47792793, "body": "@the Tin Man: I don&#39;t think number of request per minute is so relevant for this question, that is why I didn&#39;t include in the first place. Mainly because I can scale horizontally by adding more application servers."}, {"owner": {"reputation": 2246, "user_id": 1614888, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/703ed4c3caf08a3c21b31ace0934bb41?s=128&d=identicon&r=PG", "display_name": "hsgubert", "link": "https://stackoverflow.com/users/1614888/hsgubert"}, "reply_to_user": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1429818980, "post_id": 29808312, "comment_id": 47792845, "body": "@JustinWood: cool, I was expecting something like that. This worker you suggest is something like a delayed_job?"}, {"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 1, "creation_date": 1429819184, "post_id": 29808312, "comment_id": 47792955, "body": "Basically. @ChaseGilliam suggests using Sidekiq, which I have used in the past with great success. It basically does the work when it has the ability to."}, {"owner": {"reputation": 2246, "user_id": 1614888, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/703ed4c3caf08a3c21b31ace0934bb41?s=128&d=identicon&r=PG", "display_name": "hsgubert", "link": "https://stackoverflow.com/users/1614888/hsgubert"}, "edited": false, "score": 0, "creation_date": 1429819272, "post_id": 29808312, "comment_id": 47793005, "body": "I&#39;ll look into that, thanks!"}, {"owner": {"reputation": 2663, "user_id": 1521117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TbjFj.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/1521117/chase"}, "reply_to_user": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1429820553, "post_id": 29808312, "comment_id": 47793769, "body": "@JustinWood do you have a good resource for using Sidekiq? I basically just tore apart the source with a coworker when we used it. I&#39;d love to add a better resource to my answer."}, {"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "reply_to_user": {"reputation": 2663, "user_id": 1521117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TbjFj.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/1521117/chase"}, "edited": false, "score": 0, "creation_date": 1429834414, "post_id": 29808312, "comment_id": 47799742, "body": "@ChaseGilliam I do not. I usually just dig into documentation when I use a new technology."}], "answers": [{"tags": [], "owner": {"reputation": 2663, "user_id": 1521117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TbjFj.jpg?s=128&g=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/1521117/chase"}, "is_accepted": true, "score": 1, "last_activity_date": 1429735996, "creation_date": 1429735996, "answer_id": 29808591, "question_id": 29808312, "link": "https://stackoverflow.com/questions/29808312/what-is-a-good-scalable-way-of-calling-command-line-tool-in-rails-app/29808591#29808591", "title": "What is a good/scalable way of calling command line tool in Rails App", "body": "<p>This sounds like a good use for <a href=\"http://sidekiq.org/\" rel=\"nofollow\">Sidekiq</a> and S3. I would consider sending the files to <a href=\"http://aws.amazon.com/sdk-for-ruby/\" rel=\"nofollow\">s3</a> then process them in a background job using Sidekiq to run the cli tool using <code>%x</code> if you want the direct output to STDOUT or <code>exec</code> if you want to return a bool for completion and redirect to results on <code>True</code>.</p>\n\n<p>Just return 200 on the request if the file is uploaded to S3 and some statement about the job being processed. This is a sort of broad strokes version of how I would handle it.</p>\n"}], "owner": {"reputation": 2246, "user_id": 1614888, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/703ed4c3caf08a3c21b31ace0934bb41?s=128&d=identicon&r=PG", "display_name": "hsgubert", "link": "https://stackoverflow.com/users/1614888/hsgubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 29808591, "answer_count": 1, "score": 1, "last_activity_date": 1429735996, "creation_date": 1429735097, "question_id": 29808312, "link": "https://stackoverflow.com/questions/29808312/what-is-a-good-scalable-way-of-calling-command-line-tool-in-rails-app", "title": "What is a good/scalable way of calling command line tool in Rails App", "body": "<p>Suppose I have a data processing binary which receive as input filenames, read data from one specified file and output to another file.</p>\n\n<p>Suppose this binary executes in around 2 seconds.</p>\n\n<p>What is a good way of using this data processing tool in a Rails App? I have some options:\n - Make the rails app write to a file, call the binary, wait for the output, read the output. \n - Make something similar but instead of waiting for the binary to execute, just respond the request and asynchronously push data later.\n - Make some sort of web service just to run the data processing tool. Data is trasfered from the application server to another server through some HTTP request (possibly multipart).</p>\n\n<p>Any other options/ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "confirmation-email", "email-confirmation"], "comments": [{"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1455442748, "post_id": 29808241, "comment_id": 58484595, "body": "did you find the solution?"}, {"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "reply_to_user": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1455570717, "post_id": 29808241, "comment_id": 58538876, "body": "Unfortunately since it took so long, I ended up putting this project on the back shelf and haven&#39;t had a chance to context switch back to it yet."}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 3712138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0efe148179242c3dbfbdf7e71f88a407?s=128&d=identicon&r=PG&f=1", "display_name": "TerryCB", "link": "https://stackoverflow.com/users/3712138/terrycb"}, "is_accepted": true, "score": 1, "last_activity_date": 1430112508, "creation_date": 1430112508, "answer_id": 29887858, "question_id": 29808241, "link": "https://stackoverflow.com/questions/29808241/rails-devise-you-need-to-sign-in-or-sign-up-before-continuing-instead-of-you/29887858#29887858", "title": "Rails Devise: &quot;You need to sign in or sign up before continuing&quot; instead of &quot;You will receive an email with instructions..&quot;", "body": "<p>You mentioned overriding <code>after_sign_up_path_for</code> in a custom registrations controller, but following the the direction in <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Change-the-redirect-path-after-destroying-a-session-i.e.-signing-out\" rel=\"nofollow\">this link</a>, you might want to try placing that in your application_controller.rb.</p>\n"}], "owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10735, "favorite_count": 2, "accepted_answer_id": 29887858, "answer_count": 1, "score": 6, "last_activity_date": 1458736758, "creation_date": 1429734853, "last_edit_date": 1495542894, "question_id": 29808241, "link": "https://stackoverflow.com/questions/29808241/rails-devise-you-need-to-sign-in-or-sign-up-before-continuing-instead-of-you", "title": "Rails Devise: &quot;You need to sign in or sign up before continuing&quot; instead of &quot;You will receive an email with instructions..&quot;", "body": "<p>I have setup Devise on Rails 4.2.0 and everything seems to be working, I used the guide at:</p>\n\n<p><a href=\"http://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/\" rel=\"nofollow noreferrer\">http://sourcey.com/rails-4-omniauth-using-devise-with-twitter-facebook-and-linkedin/</a></p>\n\n<p>My devise modules are:</p>\n\n<pre><code>devise :database_authenticatable, :registerable, :confirmable,\n       :recoverable, :rememberable, :trackable, :validatable, :omniauthable\n</code></pre>\n\n<p>The only problem is that if I try to create a new account by going to the signup page, then after entering my email and new password (twice), I am taken back to the signin page and see the 'unauthenticated' message:</p>\n\n<pre><code> You need to sign in or sign up before continuing\n</code></pre>\n\n<p>When instead I should get the 'send_instructions' message:</p>\n\n<pre><code> You will receive an email with instructions for how to confirm your email address in a few minutes.\n</code></pre>\n\n<p>I have a before_filter in my ApplicationController:</p>\n\n<pre><code>before_filter :authenticate_user!, :except =&gt; [:show]\n</code></pre>\n\n<p>Though I confess that I don't understand why this doesn't give me authenticate errors on the signin page or the 'forgot password' page.  Either way I tried adding :new_user_session to the :except, but that didn't help.</p>\n\n<p>How can I get the right flash notice for when someone is signing up?</p>\n\n<p>I have not overridden any of the devise code (other than what the sourcey doc suggests), my DeviseHelper only has a method for printing out the flash messages:</p>\n\n<pre><code>def devise_error_messages!\n    return '' if resource.errors.empty?\n\n    messages = resource.errors.full_messages.map { |msg| content_tag(:li, msg) }.join\n    messages.html_safe\nend\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>My initial search of SO didn't help (too many similar questions that weren't relevant) but now I've found this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9152276/devise-sign-in-after-sign-out-error\">devise sign_in after sign_out error</a></p>\n\n<p>So I believe the problem is that Devise is trying to take me to my root_path after I do the sign_up action.  I don't know why it would do that for a :confirmable setup, it seems it should take me back to the sign_in page.</p>\n\n<p>I tried to override this by overriding 'after_sign_up_path_for' in a cutom registrations controller using:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3546289/override-devise-registrations-controller\">Override devise registrations controller</a></p>\n\n<p>Perhaps I did it wrong, but that didn't seem to help.</p>\n\n<p>So now the question is, how do I get Devise to go back to the sign_in page after someone does a sign_up, and why isn't this the default action for a confirmable setup?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 719, "user_id": 4387561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GO9Lhd-wwzo/AAAAAAAAAAI/AAAAAAAAAH8/5vOMLeZXslc/photo.jpg?sz=128", "display_name": "Shifa Khan", "link": "https://stackoverflow.com/users/4387561/shifa-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1429734207, "creation_date": 1429734207, "answer_id": 29808052, "question_id": 29807739, "link": "https://stackoverflow.com/questions/29807739/ruby-on-rails-undefined-method-for-nilnilclass/29808052#29808052", "title": "Ruby on Rails : undefined method `-&#39; for nil:NilClass", "body": "<p>To troubleshoot your problem start by looking at the source for your error. The error says \"undefined method '-' for nil:NilClass\".\nWhat this means is that you are trying to subtract from an object that is in fact Nil. \nWhen you try to save a Vote, in vote.rb model you call update_post after save. This calls the update_rank method in the Post model. This method then subtracts a Time object from 'created_at'. The problem thus lies with created_at returning a nil value. </p>\n\n<p>You can try using <a href=\"https://github.com/pry/pry\" rel=\"nofollow\">pry</a> gem to debug your code better. You can then add 'binding.pry' anywhere in your model/controller code and step through each line to see what is the value of each variable at that instant.</p>\n"}], "owner": {"reputation": 23, "user_id": 4821186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yyeYw6VhkA4/AAAAAAAAAAI/AAAAAAAAAH0/a2rNI9ej6kI/photo.jpg?sz=128", "display_name": "StanPeev", "link": "https://stackoverflow.com/users/4821186/stanpeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1429737583, "creation_date": 1429733158, "last_edit_date": 1429737583, "question_id": 29807739, "link": "https://stackoverflow.com/questions/29807739/ruby-on-rails-undefined-method-for-nilnilclass", "title": "Ruby on Rails : undefined method `-&#39; for nil:NilClass", "body": "<p>I'm trying to add <code>save_with_initial_vote</code> method to my <code>Post</code> class. It should both save the post and create its vote inside a transaction.</p>\n\n<p>My <code>post.rb</code> looks like this: </p>\n\n<pre><code>    class Post &lt; ActiveRecord::Base\n      has_one :summary\n      has_many :comments, dependent: :destroy\n      has_many :votes, dependent: :destroy\n      belongs_to :user\n      belongs_to :topic\n      mount_uploader :image, ImageUploader\n      def up_votes\n        votes.where(value: 1).count\n      end\n      def down_votes\n        votes.where(value: -1).count\n      end\n      def points\n        votes.sum(:value)\n      end\n      def update_rank\n        age_in_days = (created_at - Time.new(1970,1,1)) / (60 * 60 * 24) # 1 day in seconds\n        new_rank = points + age_in_days\n        update_attribute(:rank, new_rank)\n      end\n      default_scope { order('rank DESC') }\n      scope :ordered_by_title, -&gt; { order('posts.title ASC') }\n      scope :ordered_by_reverse_created_at, -&gt; { order('posts.created_at DESC') }\n        validates :title, length: { minimum: 5 }, presence: true\n        validates :body, length: { minimum: 20 }, presence: true\n        validates :topic, presence: true\n        validates :user, presence: true\n        def markdown_title\n          render_as_markdown(self.title)\n        end\n        def markdown_body\n          render_as_markdown(self.body)\n        end\n        def create_vote\n          user.votes.create(value: 1, post: self)\n        end\n        def save_with_initial_vote\n          ActiveRecord::Base.transaction do\n            save\n            user.votes.create(value: 1, post: self)\n          end \n        end \n\n        private\n\n        def render_as_markdown(markdown)\n          renderer = Redcarpet::Render::HTML.new\n          extensions = {fenced_code_blocks: true}\n          redcarpet = Redcarpet::Markdown.new(renderer, extensions)\n          (redcarpet.render markdown).html_safe\n        end\n    end\n</code></pre>\n\n<p>My <code>posts_controller.rb</code> looks like this: </p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  def show\n    @topic = Topic.find(params[:topic_id])\n    authorize @topic\n    @post = Post.find(params[:id])\n    @comments = @post.comments\n  end\n  def new\n     @topic = Topic.find(params[:topic_id])\n    @post = Post.new\n    authorize @post\n  end\n  def edit\n     @topic = Topic.find(params[:topic_id])\n    @post = Post.find(params[:id])\n    authorize @post\n  end\n  def create\n    @topic = Topic.find(params[:topic_id])\n    @post = current_user.posts.build(post_params)\n    authorize @post\n    if @post.save_with_initial_vote\n      flash[:notice] = \"Post was saved.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"There was an error saving the post. Please try again.\"\n      render :new\n    end\n  end\n  def update\n     @topic = Topic.find(params[:topic_id])\n    @post = Post.find(params[:id])\n    authorize @post\n    if @post.update_attributes(post_params)\n      flash[:notice] = \"Post was updated.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"There was an error saving the post. Please try again.\"\n      render :new\n    end\n  end\n  def destroy\n    @topic = Topic.find(params[:topic_id])\n    @post = Post.find(params[:id])\n    authorize @post\n    if @post.destroy\n      flash[:notice] = \"\\\"#{@post.title}\\\" was deleted.\"\n      redirect_to @topic\n    else\n      flash[:error] = \"There was an error deleting your post. Please try again.\"\n      render :show\n    end\n  end\n\n  private\n\n  def post_params\n    params.require(:post).permit(:title, :body, :image)\n  end\nend\n</code></pre>\n\n<p>My <code>vote.rb</code> looks like this: </p>\n\n<pre><code>class Vote &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :post\n  validates :value, inclusion: {in: [-1, 1], message: \"%{value} is not a valid vote.\" }\n  after_save :update_post\n\n  private\n\n  def update_post\n    post.update_rank\n  end\nend\n</code></pre>\n\n<p>When I do, I get an error:</p>\n\n<pre><code>undefined method `-' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "parameters", "link-to"], "comments": [{"owner": {"reputation": 33340, "user_id": 605707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MxKJx.jpg?s=128&g=1", "display_name": "deefour", "link": "https://stackoverflow.com/users/605707/deefour"}, "edited": false, "score": 1, "creation_date": 1429731781, "post_id": 29807241, "comment_id": 47742714, "body": "Name your variable something other than <code>class</code> - that is a reserved word in Ruby."}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 2, "creation_date": 1429731901, "post_id": 29807241, "comment_id": 47742786, "body": "Seconded. If you start naming variables <code>class</code> and <code>type</code> you are going to enter a world of pain."}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429732287, "post_id": 29807241, "comment_id": 47743018, "body": "they&#39;re actually called different since my code is in spanish i change it when i post something"}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1429741659, "post_id": 29807241, "comment_id": 47748133, "body": "Do you know what&#39;s in the hash when it enters your controller? To see exactly which params and the associated values are coming from your form you could add a debug alert in your controller action to show you the hash. The code is flash[:info] = &quot;Hash: #{params}&quot; I&#39;ve found this very helpful."}], "answers": [{"comments": [{"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 0, "creation_date": 1429731931, "post_id": 29807355, "comment_id": 47742800, "body": "I&#39;m not even sure now where <code>@daw_inscripcion</code> comes from. Should this form actually be for <code>@sign_up</code>?"}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429732180, "post_id": 29807355, "comment_id": 47742956, "body": "yes yes sorry it&#39;s just that my code is in spanish i change it when i post something sorry"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "reply_to_user": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429732290, "post_id": 29807355, "comment_id": 47743021, "body": "De nada (you&#39;re not going to get much more spanish than that out of me I&#39;m afraid!)"}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429732435, "post_id": 29807355, "comment_id": 47743100, "body": "jajaja it&#39;s a good start though xD.... and now that i edited the question do you see a solution?"}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429741488, "post_id": 29807355, "comment_id": 47748057, "body": "could you explain why has_key? what does it do? how will it solve it? hehe just curious"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "reply_to_user": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429778221, "post_id": 29807355, "comment_id": 47762741, "body": "The <code>has_key?</code> is just an extra check to make sure that the parameters do actually have a <code>class_id</code> value in them before setting it on <code>@sign_up</code>. You might not need it but if <code>class_id</code> already had a default value, say, then it would avoid overwriting it with <code>nil</code> if there was nothing in the parameters."}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429798835, "post_id": 29807355, "comment_id": 47778752, "body": "and how would i pass another parameter called profile_id? i want it to be the current_user.id.... i added another hidden field and passed it as <code>&lt;%= f.hidden_field :daw_profile_id, :value =&gt; current_user.id %&gt;</code> value and it doesn&#39;t work is there a way to do iti like class_id, through the new action in the controller?"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "reply_to_user": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429799987, "post_id": 29807355, "comment_id": 47779694, "body": "If it is always going to be the <code>current_user.id</code> then you don&#39;t need to pass it around. You can just set it when you need to in the controller."}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "edited": false, "score": 0, "creation_date": 1429802299, "post_id": 29807355, "comment_id": 47781747, "body": "Done, hehe yeah i figured it out thanks man appreciate the help"}], "tags": [], "owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "is_accepted": true, "score": 2, "last_activity_date": 1429740517, "last_edit_date": 1429740517, "creation_date": 1429731815, "answer_id": 29807355, "question_id": 29807241, "link": "https://stackoverflow.com/questions/29807241/passing-parameters-through-link-to-method-in-ruby-on-rails-4/29807355#29807355", "title": "passing parameters through link_to method in ruby on rails 4", "body": "<p>You are just passing in <code>params[:class_id]</code> with your extra parameter on the <code>link_to</code>. Your form however is for an object with a <code>class_id</code> attribute so it is expecting your <code>@sign_up</code> object to have a <code>class_id</code> attribute.</p>\n\n<p>Basically for your <code>new</code> action you'll need to set up <code>@sign_up</code> with the <code>class_id</code> for it from the parameters:</p>\n\n<pre><code>def new\n  @sign_up = SignUp.new\n  @sign_up.class_id = params[:class_id] if params.has_key?(:class_id)\nend\n</code></pre>\n\n<p>This will set the <code>class_id</code> to the parameter passed in from the <code>link_to</code> url. </p>\n\n<p>Then your form should work okay because the <code>f.hidden_field</code> will look at the current value of <code>class_id</code> on <code>@sign_up</code> and set that as the value of the input. It doesn't matter that you haven't saved it at this point - the <code>form_for</code> will use the unsaved state to populate the inputs.</p>\n"}], "owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1154, "favorite_count": 0, "accepted_answer_id": 29807355, "answer_count": 1, "score": 1, "last_activity_date": 1429740517, "creation_date": 1429731446, "last_edit_date": 1429732140, "question_id": 29807241, "link": "https://stackoverflow.com/questions/29807241/passing-parameters-through-link-to-method-in-ruby-on-rails-4", "title": "passing parameters through link_to method in ruby on rails 4", "body": "<p>i have an index view that shows all available classes i want a link to \"sign up for class\" that redirects me to the \"sign up\" form and fill up some other values and when the sign up is created it saves the values that i filled up plus the foreign key of the class i just passed via the link to method </p>\n\n<p>classes index:</p>\n\n<pre><code>&lt;h1&gt;Listof classes&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;id&lt;/th&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Description&lt;/th&gt;\n      &lt;th&gt;Actions&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;% @classes.each do |class| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= class.id %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= class.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= class.description %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'sign up!', new_sign_up_path(:class_id =&gt; class.id), method: :post %&gt;&lt;/td&gt; \n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n   \n\n<p>sign_up controller:</p>\n\n<pre><code>class SignUpsCOntroller &lt; ApplicationController\n  before_action :set_sign_ups, only: [:show, :edit, :update, :destroy]\n\n  # GET /sign_ups/new\n  def new\n    @sign_up = SignUp.new\n  end\n\n    def set_sign_ups\n      @sign_up = SignUp.find(params[:id])\n    end\n\n    def sign_up_params\n      params.require(:sign_up).permit(:date, :status, :type, :class_id)\n    end\nend\n</code></pre>\n\n<p>and my sign ups form:</p>\n\n<pre><code>&lt;%= form_for(@sign_up) do |f| %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :date %&gt;&lt;br&gt;\n    &lt;%= f.date_select :date %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :status %&gt;&lt;br&gt;\n    &lt;%= f.check_box :status %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :type %&gt;&lt;br&gt;\n    &lt;%= f.number_field :type %&gt;\n  &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n    &lt;%= f.hidden_field :class_id %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>when i save it it doesn't save the the class_id... i've tried parsing it to integer i've tried it without the hidden field but it allways passes it as blank en saving... any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "utc"], "answers": [{"comments": [{"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429731029, "post_id": 29807112, "comment_id": 47742193, "body": "where can I get a list of all the time zones such as &#39;US/Eastern&#39;. Is there a command?"}, {"owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 1, "creation_date": 1429731717, "post_id": 29807112, "comment_id": 47742675, "body": "<code>ActiveSupport::TimeZone.zones_map.values.collect{|z| z.name }</code>"}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429732641, "post_id": 29807112, "comment_id": 47743237, "body": "I am unable to figure out how to convert the Eastern Text Date to an Eastern Time, and then get the UTC equivalent with in_time_zone method. I&#39;ve added an EDIT to the original post."}, {"owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429732704, "post_id": 29807112, "comment_id": 47743280, "body": "<code>myeasterndatetime.in_time_zone(&#39;utc&#39;)</code>"}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429732899, "post_id": 29807112, "comment_id": 47743417, "body": "That doesn&#39;t accomplish the task. That sets our 4:30 PM time as UTC, meaning our variable now contains 16:30 UTC. Our text of 4:30 PM was given to us in Eastern Time. So our variable just contains &quot;16:30 UTC&quot;. 4:30PM is &quot;20:30 UTC&quot;."}], "tags": [], "owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "is_accepted": false, "score": 3, "last_activity_date": 1429731487, "last_edit_date": 1429731487, "creation_date": 1429730982, "answer_id": 29807112, "question_id": 29807048, "link": "https://stackoverflow.com/questions/29807048/in-ruby-or-rails-what-is-the-best-way-to-convert-eastern-time-to-utc/29807112#29807112", "title": "In Ruby or Rails, what is the best way to convert Eastern Time to UTC?", "body": "<p>There was a <a href=\"http://apidock.com/rails/DateTime/in_time_zone\" rel=\"nofollow\"><code>time_in_zone</code> method in the DateTime class</a>:</p>\n\n<pre><code>now.time_in_zone('UTC')\n</code></pre>\n\n<p>It has since been <a href=\"http://apidock.com/rails/DateAndTime/Zones/in_time_zone\" rel=\"nofollow\">renamed to <code>in_time_zone</code></a>:</p>\n\n<pre><code>DateTime.now.in_time_zone('US/Pacific')\n =&gt; Wed, 22 Apr 2015 12:36:33 PDT -07:00 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "edited": false, "score": 0, "creation_date": 1429731375, "post_id": 29807179, "comment_id": 47742432, "body": "You can find further information here - <a href=\"http://apidock.com/rails/ActiveSupport/TimeWithZone/dst%3F\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveSupport/TimeWithZone/dst%3F</a>"}], "tags": [], "owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "is_accepted": false, "score": 1, "last_activity_date": 1429731216, "creation_date": 1429731216, "answer_id": 29807179, "question_id": 29807048, "link": "https://stackoverflow.com/questions/29807048/in-ruby-or-rails-what-is-the-best-way-to-convert-eastern-time-to-utc/29807179#29807179", "title": "In Ruby or Rails, what is the best way to convert Eastern Time to UTC?", "body": "<p>The objects of Time class have a method called <code>dst?</code> which basically tells you whether or not DST is applicable or not. So you can basically identify whether DST/ST is applicable and decide which to add - 4 or 5.</p>\n\n<p>e.g. <code>Time.now.dst?</code>\nIf it returns true, add 4, otherwise add 5.</p>\n"}, {"comments": [{"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429733475, "post_id": 29807793, "comment_id": 47743798, "body": "very close yes, it&#39;s just that the text being passed to me does not contain an offset. It&#39;s just a text date that is meant to be assumed ET."}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429733573, "post_id": 29807793, "comment_id": 47743848, "body": "Ok. Editing the answer to account for that"}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429734010, "post_id": 29807793, "comment_id": 47744079, "body": "unfortunately this doesn&#39;t quite do the job either, as Eastern time is not always -5 from UTC (<a href=\"http://www.nhc.noaa.gov/aboututc.shtml\" rel=\"nofollow noreferrer\">nhc.noaa.gov/aboututc.shtml</a> - last sentence in last paragraph before image). During DST it is -4, but during ST it is -5. The only way I&#39;ve been able to do it so far, is in the answer I posted to this original question, but it&#39;s not very clean. It&#39;s a couple of lines, but as you can see it handles the the DST&#39;s (Apr 20, 2015 for example) and the ST&#39;s (Nov 20, 2015 for example). Anyway I can clean it up?"}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429734099, "post_id": 29807793, "comment_id": 47744143, "body": "Yeah ... not my style of code in that answer/response (just personal pref!!!). I&#39;d just do this, <code>eastern_time = DateTime.parse(text_time).change(offset: Time.zone_offset(&#39;EST&#39;))</code> to account for DST, etc."}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429734261, "post_id": 29807793, "comment_id": 47744236, "body": "That definitely looks better but doesn&#39;t appear to be working. It&#39;s giving off a datetime with +0000  as opposed to -5000"}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429734413, "post_id": 29807793, "comment_id": 47744322, "body": "<code>eastern_time = DateTime.parse(text_time).change(offset: Time.zone_offset(&#39;EST&#39;))</code> appears to be equal to <code>eastern_time = DateTime.parse(text_time)</code>"}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429734425, "post_id": 29807793, "comment_id": 47744333, "body": "My bad! I totally spaced that it&#39;s in seconds (<code>zone_offset</code>, that is)."}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429734507, "post_id": 29807793, "comment_id": 47744392, "body": "how would I change that. I did this, but it&#39;s still giving a ate of +0000 instead of -5000. <code>DateTime.parse(time_text_2).change(offset: (Time.zone_offset(&#39;EST&#39;)&#47;60&#47;60))</code>"}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429735452, "post_id": 29807793, "comment_id": 47744943, "body": "Nice, nice. Just about there, lol. One last problem. Time.zone_offset(&#39;EST&#39;) returns the value based on TODAY&#39;s time. However, we want it based on the text we are being given. For example, &quot;Apr 2015, 4:30 PM&quot; is DST (-4), whereas &quot;Nov 2015, 4:30 PM&quot; is ST (-5). If we are given both of those dates today, and want them stored in our DB in UTC... we have a problem. TIME.zone_offset(&#39;EST&#39;) still always returns -5. We need the zone_offset from the text date passed in (Apr 20/Nov20), and not the current Time."}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429736161, "post_id": 29807793, "comment_id": 47745411, "body": "Given those constraints, I&#39;d probably just use your own answer."}], "tags": [], "owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1429734740, "last_edit_date": 1429734740, "creation_date": 1429733357, "answer_id": 29807793, "question_id": 29807048, "link": "https://stackoverflow.com/questions/29807048/in-ruby-or-rails-what-is-the-best-way-to-convert-eastern-time-to-utc/29807793#29807793", "title": "In Ruby or Rails, what is the best way to convert Eastern Time to UTC?", "body": "<p>In the edited post, your string of time needs an offset from UTC. </p>\n\n<p><strong>EDIT III:</strong> Based on the comments (just having a string set to represent Eastern Time and needing to account for DST, etc.)</p>\n\n<pre><code>text_time = \"Nov 27, 2015 4:30 PM\"\nthe_offset = Time.zone_offset('EST') / (60*60)\neastern_time = DateTime.parse(text_time).change(offset: the_offset.to_s) # Fri, 27 Nov 2015 16:30:00 -0500\neastern_time.utc # Fri, 27 Nov 2015 21:30:00 +0000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1429733766, "creation_date": 1429733766, "answer_id": 29807914, "question_id": 29807048, "link": "https://stackoverflow.com/questions/29807048/in-ruby-or-rails-what-is-the-best-way-to-convert-eastern-time-to-utc/29807914#29807914", "title": "In Ruby or Rails, what is the best way to convert Eastern Time to UTC?", "body": "<p>I got it like this with the help of the time zone suggestions.</p>\n\n<pre><code>time_text_1 = \"Apr 20, 2015 4:30PM\" #Scraped as an Eastern Time, with no offset of -5:00 from UTC included\ntime_text_2 = \"Nov 20, 2015 4:30PM\" #Scraped as an Eastern Time, with no offset of -5:00 from UTC included\n\nTime.zone = 'Eastern Time (US &amp; Canada)'\nmy_time_1 = Time.zone.parse time_text_1 # Output: Mon, 20 Apr 2015 16:30:00 EDT -04:00 \nmy_time_2 = Time.zone.parse time_text_2 # Output: Fri, 20 Nov 2015 16:30:00 EST -05:00 \n\nmy_time_1.utc # Output: 2015-04-20 20:30:00 UTC \nmy_time_2.utc # Output: 2015-11-20 21:30:00 UTC \n</code></pre>\n"}], "owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2263, "favorite_count": 0, "accepted_answer_id": 29807914, "answer_count": 4, "score": 5, "last_activity_date": 1429734740, "creation_date": 1429730717, "last_edit_date": 1429732591, "question_id": 29807048, "link": "https://stackoverflow.com/questions/29807048/in-ruby-or-rails-what-is-the-best-way-to-convert-eastern-time-to-utc", "title": "In Ruby or Rails, what is the best way to convert Eastern Time to UTC?", "body": "<p>I'm not referring to </p>\n\n<pre><code>myDateTime = DateTime.now\nmyDateTime.new_offset(Rational(0, 24))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>Time.now.utc\n</code></pre>\n\n<p>What I have is a text date is given in Eastern Time.</p>\n\n<p>I can convert that text date into a DateTime. Let's call it <code>eastern_date_time</code>.</p>\n\n<p>Now, we have a variable containing an DateTime, but nothing knows it's eastern besides us. Converting it ourselves would be quite onerous. If the date in Daylight Savings Time (DST) (March 8 to November 1st this year), we'd have to add 4 hours to our eastern_date_time var to get UTC, and if the date is in Standard Time (ST) we'd have to add 5 hours to our eastern_date_time variable.</p>\n\n<p>How can we specify that what we have is an Eastern DateTime, and then convert it to UTC... something that will determine if the date is in the DST/ST, and apply the 4 or 5 hours properly?</p>\n\n<p>I want to convert any sort of date I get into UTC, for storage in my database. </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Using `in_time_zone', I'm unable to convert my Eastern Text Time to UTC. How can I achieve that objective? For example...</p>\n\n<pre><code>text_time = \"Nov 27, 2015 4:30 PM\" #given as Eastern\nmyEasternDateTime = DateTime.parse text_time # =&gt; Fri, 27 Nov 2015 16:30:00 +0000 \n#now we need to specify that this myEasternDateTime is in fact eastern. However, it's our default UTC. If we use in_time_zone, it just converts the date at UTC to Eastern\nmyEasternDateTime.in_time_zone('Eastern Time (US &amp; Canada)') # =&gt; Fri, 27 Nov 2015 11:30:00 EST -05:00 \nmyEasternDateTime.utc # =&gt; Fri, 27 Nov 2015 16:30:00 +0000 \n</code></pre>\n\n<p>That's not what we want. We have to specify that myEasterDateTime is in fact eastern... so that when we do a <code>myEasterDateTime.utc</code> on 16:30:00 we end up getting 20:30:00.</p>\n\n<p>How can I accomplish this?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13, "user_id": 2363108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/48215c918f859eb10219eed01e49093c?s=128&d=identicon&r=PG", "display_name": "TheHappyPeanut", "link": "https://stackoverflow.com/users/2363108/thehappypeanut"}, "edited": false, "score": 0, "creation_date": 1429730561, "post_id": 29806748, "comment_id": 47741918, "body": "Error message when I try &#39;bundle install&#39;: Could not locate Gemfile or .bundle/ directory Johns-MacBook-Pro:Ruby Development johnjackson$"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2363108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/48215c918f859eb10219eed01e49093c?s=128&d=identicon&r=PG", "display_name": "TheHappyPeanut", "link": "https://stackoverflow.com/users/2363108/thehappypeanut"}, "edited": false, "score": 0, "creation_date": 1429730533, "post_id": 29806930, "comment_id": 47741899, "body": "This is the error I get when I try to type &#39;bundle install&#39;: Could not locate Gemfile or .bundle/ directory Johns-MacBook-Pro:Ruby Development johnjackson$"}, {"owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "reply_to_user": {"reputation": 13, "user_id": 2363108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/48215c918f859eb10219eed01e49093c?s=128&d=identicon&r=PG", "display_name": "TheHappyPeanut", "link": "https://stackoverflow.com/users/2363108/thehappypeanut"}, "edited": false, "score": 0, "creation_date": 1429730714, "post_id": 29806930, "comment_id": 47742011, "body": "That error happens when you run &#39;bundle install&#39; in the wrong directory (one that doesn&#39;t have a Gemfile in it"}], "tags": [], "owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "is_accepted": true, "score": -1, "last_activity_date": 1429730336, "creation_date": 1429730336, "answer_id": 29806930, "question_id": 29806748, "link": "https://stackoverflow.com/questions/29806748/attempted-to-use-the-bundle-install-command-in-terminal-for-rails-and-received/29806930#29806930", "title": "Attempted to use the &#39;bundle install&#39; command in Terminal for Rails and received an error message", "body": "<p>You need to have the MySQL server setup and running in the system. I trust you're using Mac OS and can try this:</p>\n\n<p><code>brew install mysql\nmysql.server start</code></p>\n"}], "owner": {"reputation": 13, "user_id": 2363108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/48215c918f859eb10219eed01e49093c?s=128&d=identicon&r=PG", "display_name": "TheHappyPeanut", "link": "https://stackoverflow.com/users/2363108/thehappypeanut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 29806930, "answer_count": 1, "score": 0, "last_activity_date": 1429730336, "creation_date": 1429729701, "question_id": 29806748, "link": "https://stackoverflow.com/questions/29806748/attempted-to-use-the-bundle-install-command-in-terminal-for-rails-and-received", "title": "Attempted to use the &#39;bundle install&#39; command in Terminal for Rails and received an error message", "body": "<p>I then tried updating MySQL after it listed that error and received an error message that read:</p>\n\n<pre><code>Gem files will remain installed in /Users/johnjackson/.rvm/gems/ruby-    2.2.1/gems/mysql2-0.3.18 for inspection.\nResults logged to /Users/johnjackson/.rvm/gems/ruby-    2.2.1/extensions/x86_64-darwin-14/2.2.0/mysql2-0.3.18/gem_make.out\nJohns-MacBook-Pro:Client johnjackson$ bundle install\nFetching gem metadata from https://rubygems.org/............\nFetching version metadata from https://rubygems.org/..\nResolving dependencies...\nUsing rake 10.4.2\nUsing i18n 0.7.0\nUsing json 1.8.2\nUsing minitest 5.6.0\nUsing thread_safe 0.3.5\nUsing tzinfo 1.2.2\nUsing activesupport 4.2.0\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile 0.6.2\nUsing nokogiri 1.6.6.2\nUsing rails-deprecated_sanitizer 1.0.3\nUsing rails-dom-testing 1.0.6\nUsing loofah 2.0.1\nUsing rails-html-sanitizer 1.0.2\nUsing actionview 4.2.0\nUsing rack 1.6.0\nUsing rack-test 0.6.3\nUsing actionpack 4.2.0\nUsing globalid 0.3.5\nUsing activejob 4.2.0\nUsing mime-types 2.4.3\nUsing mail 2.6.3\nUsing actionmailer 4.2.0\nUsing activemodel 4.2.0\nUsing arel 6.0.0\nUsing activerecord 4.2.0\nUsing debug_inspector 0.0.2\nUsing binding_of_caller 0.7.2\nUsing bundler 1.8.5\nUsing columnize 0.9.0\nUsing byebug 4.0.5\nUsing coffee-script-source 1.9.1.1\nUsing execjs 2.5.2\nUsing coffee-script 2.4.1\nUsing thor 0.19.1\nUsing railties 4.2.0\nUsing coffee-rails 4.1.0\nUsing multi_json 1.11.0\nUsing jbuilder 2.2.13\nUsing jquery-rails 4.0.3\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n/Users/johnjackson/.rvm/rubies/ruby-2.2.1/bin/ruby -r     ./siteconf20150422-18439-16qcm93.rb extconf.rb \nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\nchecking for mysql_query() in -lmysqlclient... no\nchecking for main() in -lm... yes\nchecking for mysql_query() in -lmysqlclient... no\nchecking for main() in -lz... yes\nchecking for mysql_query() in -lmysqlclient... no\nchecking for main() in -lsocket... no\nchecking for mysql_query() in -lmysqlclient... no\nchecking for main() in -lnsl... no\nchecking for mysql_query() in -lmysqlclient... no\nchecking for main() in -lmygcc... no\nchecking for mysql_query() in -lmysqlclient... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You     may\nneed configuration options.\n\nProvided configuration options:\n--with-opt-dir\n--with-opt-include\n--without-opt-include=${opt-dir}/include\n--with-opt-lib\n--without-opt-lib=${opt-dir}/lib\n--with-make-prog\n--without-make-prog\n--srcdir=.\n--curdir\n--ruby=/Users/johnjackson/.rvm/rubies/ruby-2.2.1/bin/$(RUBY_BASE_NAME)\n--with-mysql-dir\n--without-mysql-dir\n--with-mysql-include\n--without-mysql-include=${mysql-dir}/include\n--with-mysql-lib\n--without-mysql-lib=${mysql-dir}/lib\n--with-mysql-config\n--without-mysql-config\n--with-mysql-dir\n--without-mysql-dir\n--with-mysql-include\n--without-mysql-include=${mysql-dir}/include\n--with-mysql-lib\n--without-mysql-lib=${mysql-dir}/lib\n--with-mysqlclientlib\n--without-mysqlclientlib\n--with-mlib\n--without-mlib\n--with-mysqlclientlib\n--without-mysqlclientlib\n--with-zlib\n--without-zlib\n--with-mysqlclientlib\n--without-mysqlclientlib\n--with-socketlib\n--without-socketlib\n--with-mysqlclientlib\n--without-mysqlclientlib\n--with-nsllib\n--without-nsllib\n--with-mysqlclientlib\n--without-mysqlclientlib\n--with-mygcclib\n--without-mygcclib\n--with-mysqlclientlib\n--without-mysqlclientlib\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/johnjackson/.rvm/gems/ruby-    2.2.1/gems/mysql2-0.3.18 for inspection.\nResults logged to /Users/johnjackson/.rvm/gems/ruby-2.2.1/extensions/x86_64-darwin-14/2.2.0/mysql2-0.3.18/gem_make.out\n</code></pre>\n\n<p>I am not sure what I need to do to ensure that 'bundle install' works correctly... when I try to fix the MySQL error code, the MySQL install/update fails every time for some reason.</p>\n"}, {"tags": ["ruby", "arrays", "error-handling"], "comments": [{"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1429729833, "post_id": 29806683, "comment_id": 47741460, "body": "[1, 2, 3].length =&gt; 3 but the array index starts at 0, so to iterate through an array you would do while i &lt; array.length"}], "answers": [{"comments": [{"owner": {"reputation": 276, "user_id": 2850975, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/qavgt.jpg?s=128&g=1", "display_name": "TCannadySF", "link": "https://stackoverflow.com/users/2850975/tcannadysf"}, "edited": false, "score": 0, "creation_date": 1429732298, "post_id": 29806788, "comment_id": 47743026, "body": "Thanks for spelling it out, makes perfect sense. Lesson learned: be mindful of iterating through arrays, and be mindful that while an error is found on a specific line, that the &quot;source&quot; of the error can come from elsewhere. Regarding IRB, I&#39;m actually pretty new to it as well. I&#39;d love to try what you&#39;ve mentioned. The problem I find is that it feels tedious to type code out line-by-line in IRB, then if I make a mistake, I think I have to type it all over again? Whereas in Sublime Text I just edit the line and re-run the program. I&#39;m probably approaching it wrong though. Thanks for any tips."}, {"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "reply_to_user": {"reputation": 276, "user_id": 2850975, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/qavgt.jpg?s=128&g=1", "display_name": "TCannadySF", "link": "https://stackoverflow.com/users/2850975/tcannadysf"}, "edited": false, "score": 0, "creation_date": 1429733257, "post_id": 29806788, "comment_id": 47743652, "body": "No you&#39;re right it can be tedious if you want to plug in a lot of lines, but it can be helpful to get quick, targeted feedback on a miniature version of your problem. For example, if you created an array and stored it in a variable, tried referencing an index that&#39;s out of bounds, then tried performing an operation on that same reference - that&#39;d be 3 lines, but it&#39;d demonstrate how each step in your problem went down."}], "tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": true, "score": 1, "last_activity_date": 1429730538, "last_edit_date": 1429730538, "creation_date": 1429729829, "answer_id": 29806788, "question_id": 29806683, "link": "https://stackoverflow.com/questions/29806683/beginner-array-iteration-error-code-interpretation/29806788#29806788", "title": "Beginner array iteration &amp; error code interpretation", "body": "<p>The last index that's <code>&lt;= list_of_integers.length</code> is outside of the array, since the first index of an array is 0 and the last is <code>array.length - 1</code>.</p>\n\n<p>The reason your error says line 24 is that line 23 works fine --- it just computes that the value of <code>index</code> is less than or equal to the the length of the array. Once you try and reference the element at that index in the array, however, it's assigned nil - and you can't perform a <code>&gt;=</code> operation on nil.</p>\n\n<p>One thing that might be helpful here is firing up an irb. If you try to reference an element that's out of bounds, you'll just get nil. If you try and perform an operation (that's not listed in <code>nil.methods</code>) on that same reference, it'll throw the error you're seeing.</p>\n"}], "owner": {"reputation": 276, "user_id": 2850975, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/qavgt.jpg?s=128&g=1", "display_name": "TCannadySF", "link": "https://stackoverflow.com/users/2850975/tcannadysf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 29806788, "answer_count": 1, "score": 0, "last_activity_date": 1429730538, "creation_date": 1429729492, "question_id": 29806683, "link": "https://stackoverflow.com/questions/29806683/beginner-array-iteration-error-code-interpretation", "title": "Beginner array iteration &amp; error code interpretation", "body": "<p>I kept getting the following error. After some research I assumed this is because my array access was throwing the error due to (mistakenly) having a NIL value.</p>\n\n<pre><code>my_solution.rb:24:in `count_between': undefined method `&gt;=' for nil:NilClass       \n(NoMethodError) from my_solution.rb:35:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm new to reading error codes, so perhaps that's where I went wrong. But it got tunnel vision on line <strong>24</strong>, as the error suggested. However I couldn't fix it, so out of desperation I wound up randomly changing the (&lt;=) on line <strong>23</strong> to just (&lt;). This fixed it.</p>\n\n<ol>\n<li><p>Why did this fix it? My only guess is that originally using (&lt;=) made it iterate \"too far\" and thus somehow returned NIL?</p></li>\n<li><p>Why did the error code say it was the element on line 24 causing the issue, when it was actually the element on line 23? I'm new and am trying to be less intimated by error codes, so this was a curious experience.</p></li>\n</ol>\n\n<p>Thanks for any guidance.</p>\n\n<pre><code># count_between is a method with three arguments:\n#   1. An array of integers\n#   2. An integer lower bound\n#   3. An integer upper bound\n#\n# It returns the number of integers in the array between the lower and upper          \n# bounds,\n# including (potentially) those bounds.\n#\n# If +array+ is empty the method should return 0\n# Your Solution Below:\n\ndef count_between(list_of_integers, lower_bound, upper_bound)\nif list_of_integers.empty?\n   return 0\nelse\n   count = 0\n   index = 0\n\n   ##line 23## \n   while index &lt;= list_of_integers.length\n\n   ##line24## \n       if list_of_integers[index] &gt;= lower_bound &amp;&amp;    \n       list_of_integers[index] &lt;= upper_bound\n\n            count += 1\n            index += 1\n       else\n            index += 1\n       end\n    end \n return count\nend\nend\n\nputs count_between([1,2,3], 0, 100)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "answers": [{"tags": [], "owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "is_accepted": true, "score": 7, "last_activity_date": 1429731272, "last_edit_date": 1429731272, "creation_date": 1429730627, "answer_id": 29807015, "question_id": 29806473, "link": "https://stackoverflow.com/questions/29806473/rails-elastic-search-relationship-attributes-not-indexed/29807015#29807015", "title": "rails elastic search relationship attributes not indexed", "body": "<p>You are defining wrong serialization method. <code>Elasticsearch::Model</code> searches for method <code>as_indexed_json</code> and you are defining <code>to_indexed_json</code>. In elasticesearch-model gem you can find examples <a href=\"https://github.com/elastic/elasticsearch-rails/blob/master/elasticsearch-model/examples/activerecord_associations.rb#L82\" rel=\"noreferrer\">https://github.com/elastic/elasticsearch-rails/blob/master/elasticsearch-model/examples/activerecord_associations.rb#L82</a></p>\n\n<p>It should look something like this:</p>\n\n<pre><code>def as_indexed_json(options = {})\n  as_json methods: [:book_title, :book_type, :author_name]\nend\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "accepted_answer_id": 29807015, "answer_count": 1, "score": 3, "last_activity_date": 1429731272, "creation_date": 1429728764, "question_id": 29806473, "link": "https://stackoverflow.com/questions/29806473/rails-elastic-search-relationship-attributes-not-indexed", "title": "rails elastic search relationship attributes not indexed", "body": "<p>Basically I got 3 models(Book,Chapter,Author), and I want to include some of the books and author attributes when indexing chapter.</p>\n\n<p>here is my <strong>Chapter.rb</strong></p>\n\n<pre><code>class Chapter &lt; ActiveRecord::Base\n  belongs_to :book, :counter_cache =&gt; true\n  include Elasticsearch::Model\n\n  index_name [Rails.env, model_name.collection.gsub(/\\//, '-')].join('_')\n\n    mappings  do\n      indexes :id, type: :integer\n      indexes :title, type: :string\n      indexes :description, type: :string\n      indexes :content, type: :string\n      indexes :updated_at, type: :date # Date example\n      indexes :book_title\n      indexes :book_type\n      indexes :author_name\n      indexes :book_id\n    end\n\n  def book_title\n    book.title\n  end\n  def book_type\n    book.book_type\n  end\n  def author_name\n   \" #{book.author.firstname} #{book.author.lastname} \"\n  end\n\n  def to_indexed_json\n    to_json methods: [:book_title, :book_type, :author_name]\n  end\nend\n</code></pre>\n\n<p><strong><a href=\"http://localhost:9200/development_chapters/_mapping?pretty\" rel=\"nofollow\">http://localhost:9200/development_chapters/_mapping?pretty</a></strong> shows correct mapping</p>\n\n<pre><code>{\n  \"development_chapters\" : {\n    \"mappings\" : {\n      \"chapter\" : {\n        \"properties\" : {\n          \"author_name\" : {\n            \"type\" : \"string\"\n          },\n          \"book_title\" : {\n            \"type\" : \"string\"\n          },....\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p><strong>Then why do I not get author_name, book_title etc... in the search results</strong></p>\n\n<pre><code>&lt;Elasticsearch::Model::Response::Result:0x00000105e393a0 @result=#&lt;Hashie::Mash _id=\"415\" _index=\"development_chapters\" _score=1.0 _source=#&lt;Hashie::Mash book_id=153 content=\"[\\\"Explicabo accusantium odit .\\\"]\" created_at=\"2015-04-22T18:43:58.586Z\" description=\"You can't generate the application without quantifying the cross-platform SDD bandwidth!\" id=415 title=\"Future Communications Orchestrator\" updated_at=\"2015-04-22T18:43:58.586Z\"&gt; _type=\"chapter\"&gt;&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "feed"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1429835810, "post_id": 29806363, "comment_id": 47800164, "body": "May I ask what you are trying to do with that line?  It looks like it is working out to <code>Comment.find(id)</code>.  If so, can you simplify?  Separately, the core issue is that <code>@commentable</code> can be nil and you are not protecting against that from what I can see."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1429839624, "post_id": 29806363, "comment_id": 47801175, "body": "Hey @steveklein yea I think we can simplify to that which would give us: <code>undefined local variable or method &#39;id</code>. I got the code form this railscasts episode: <a href=\"http://railscasts.com/episodes/154-polymorphic-association-revised\" rel=\"nofollow noreferrer\">railscasts.com/episodes/154-polymorphic-association-revised</a>. He also offers another alternative: <code>def load_commentable \t  klass = [Valuation].detect { |c| params[&quot;#{c.name.underscore}_id&quot;]} \t  @commentable = klass.find(params[&quot;#{klass.name.underscore}_id&quot;]) \tend</code> which then gives <code>undefined method &#39;name&#39; for nil:NilClass</code> for the 2nd line."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1429839794, "post_id": 29806363, "comment_id": 47801219, "body": "We need to determine the name of the commentable resource and its id. We\u2019ll get these from request.path by splitting it at every slash and grabbing the second and third elements so if the path is /valuations/1 these will be the two elements used. We can use these to set <code>@commentable</code> by calling singlularize.classify.constantize to get the class of the model and calling find on that to get the instance by the id. Not sure how to work around it @steveklein"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1429843656, "post_id": 29837538, "comment_id": 47802255, "body": "I already had that but I also had it as a top level resource. I removed it as a top level resource and now I get an error message: <code>undefined method &#39;comments_path&#39; for ...</code> line: <code>&lt;%= form_for new_comment do |f| %&gt;</code> so maybe you&#39;re onto something."}, {"owner": {"reputation": 834, "user_id": 144527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a564bc440a0434fbd76354e4778b04?s=128&d=identicon&r=PG", "display_name": "Joe Martinez", "link": "https://stackoverflow.com/users/144527/joe-martinez"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1429882958, "post_id": 29837538, "comment_id": 47824110, "body": "When you pass the new_comment local variable to the partial, try it as activity.comments.build - if that doesn&#39;t generate the path using the nested resource&#39;s path helper, then you can simply pass along the path helper you wanna use as well."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1429899090, "post_id": 29837538, "comment_id": 47835040, "body": "Hey Joe Martinez just finished chat with Steve. We couldn&#39;t solve it. Might not be possible. Are you willing to chat? Thanks Joe!"}, {"owner": {"reputation": 834, "user_id": 144527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a564bc440a0434fbd76354e4778b04?s=128&d=identicon&r=PG", "display_name": "Joe Martinez", "link": "https://stackoverflow.com/users/144527/joe-martinez"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1430075212, "post_id": 29837538, "comment_id": 47888383, "body": "It&#39;s definitely possible - you just have to pass through the path helper to your comments partial. Does stack exchange have a chat function?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1430080238, "post_id": 29837538, "comment_id": 47890234, "body": "Yea maybe you can help me give this a try before I completely give up. Meet me over here if you can Joe: <a href=\"http://chat.stackoverflow.com/rooms/76301/room-for-anthonygalli-com-and-joe-martinez\">chat.stackoverflow.com/rooms/76301/&hellip;</a> Thanks for the help!"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1430329668, "post_id": 29837538, "comment_id": 48022687, "body": "Joe what time works for you? Did you change your mind about chatting? Sorry about the persistence I just really want to get this done - your my last hope :/"}, {"owner": {"reputation": 834, "user_id": 144527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a564bc440a0434fbd76354e4778b04?s=128&d=identicon&r=PG", "display_name": "Joe Martinez", "link": "https://stackoverflow.com/users/144527/joe-martinez"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1430334541, "post_id": 29837538, "comment_id": 48025742, "body": "Looks like we&#39;re never online at the same time - lol. If you post your view and your partial in a gist, I&#39;ll show you the change that I think will fix it."}, {"owner": {"reputation": 834, "user_id": 144527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a564bc440a0434fbd76354e4778b04?s=128&d=identicon&r=PG", "display_name": "Joe Martinez", "link": "https://stackoverflow.com/users/144527/joe-martinez"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1430334891, "post_id": 29837538, "comment_id": 48025935, "body": "I updated my example with how you would pass along the url helper to make this work. Make sure you use the nested routes I described in the first part of my answer as well. Good luck!"}], "tags": [], "owner": {"reputation": 834, "user_id": 144527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a564bc440a0434fbd76354e4778b04?s=128&d=identicon&r=PG", "display_name": "Joe Martinez", "link": "https://stackoverflow.com/users/144527/joe-martinez"}, "is_accepted": true, "score": 1, "last_activity_date": 1430334840, "last_edit_date": 1430334840, "creation_date": 1429841399, "answer_id": 29837538, "question_id": 29806363, "link": "https://stackoverflow.com/questions/29806363/how-to-submit-polymorphic-comments-on-feed-error/29837538#29837538", "title": "How to Submit Polymorphic Comments on Feed? [Error]", "body": "<p>The problem is, for this to work, it looks like it is setup for comments to be a <strong>nested resource</strong> of whatever you're commenting on in your routes file.</p>\n\n<p>So, if you want comments on activities, you'd have:</p>\n\n<pre><code>resources :activites do\n  resources :comments\nend\n</code></pre>\n\n<p>This way, when the #load_commentable method picks apart the request path, it'll get the commentable and id from the first two segments.</p>\n\n<p>It looks, instead, like you're trying to use comments as a top level resource.</p>\n\n<p><strong>UPDATE:</strong>\nWhen you call your partial, simply pass along the url helper that the form should use. Like this:</p>\n\n<pre><code>&lt;%= render \"comments/form\", new_comment: Comment.new(commentable_id: activity.id, commentable_type: activity.class.model_name), create_url: :activity_comments_path %&gt;\n</code></pre>\n\n<p>Then, over in the partial, simply invoke that helper and pass the result as the url option - like this:</p>\n\n<pre><code>&lt;%= form_for new_comment, url: send(create_url, new_comment.commentable)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1429843963, "post_id": 29837632, "comment_id": 47802339, "body": "I&#39;m having a hard time implementing what you mean :/ The problem lies when I hit submit so wouldn&#39;t they all be nil since it needs to save first? Are you suggesting I add a conditional to the line <code>before_action :load_commentable</code>? Never seen that so I think I&#39;m misunderstanding. sorry Steve."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1429877071, "post_id": 29837632, "comment_id": 47819770, "body": "Don&#39;t you expect <code>@commentable</code> to be valid (not <code>nil</code>) when you <code>create</code> a <code>comment</code>?  You are just using the <code>before_action</code> as a convenience - if you were to move that code at the start of each dependent action, you would never operate on a potentially <code>nil</code> object.  That is why I am not a fan of using <code>before_action</code> in this way - it is not very transparent.  At the end of <code>load_commentable</code> you can add <code>redirect_to root_path if @commentable == nil</code>.  We can set up a chat if needed."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1429891440, "post_id": 29837632, "comment_id": 47830416, "body": "Let&#39;s do it! I ran into a problem with your most recent comment. Want to meet me here: <a href=\"http://chat.stackoverflow.com/rooms/76194/room-for-anthonygalli-com-and-steve-klein\">chat.stackoverflow.com/rooms/76194/&hellip;</a>?"}], "tags": [], "owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "is_accepted": false, "score": 0, "last_activity_date": 1429841994, "creation_date": 1429841994, "answer_id": 29837632, "question_id": 29806363, "link": "https://stackoverflow.com/questions/29806363/how-to-submit-polymorphic-comments-on-feed-error/29837632#29837632", "title": "How to Submit Polymorphic Comments on Feed? [Error]", "body": "<p>In the <code>load_commentable</code> before action, you could redirect to an error page or something if <code>@commentable</code> is <code>nil</code>.  As it is, you are trying to access attributes of this <code>nil</code> object in other methods (<code>create</code> in the case of this error).</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 29837538, "answer_count": 2, "score": 2, "last_activity_date": 1430334840, "creation_date": 1429728453, "last_edit_date": 1495540312, "question_id": 29806363, "link": "https://stackoverflow.com/questions/29806363/how-to-submit-polymorphic-comments-on-feed-error", "title": "How to Submit Polymorphic Comments on Feed? [Error]", "body": "<p>If a user clicks the <strong>[+ Comment]</strong> button</p>\n\n<p><img src=\"https://i.stack.imgur.com/dBq5h.png\" alt=\"enter image description here\"></p>\n\n<p>he is confronted with this evil beast:</p>\n\n<pre><code>ActiveRecord::RecordNotFound in CommentsController#create\nCouldn't find Comment with 'id'=\nLine: @commentable = resource.singularize.classify.constantize.find(id)\n</code></pre>\n\n<p><strong>activities/index</strong></p>\n\n<pre><code>&lt;%= link_to activity.user.name, activity.user %&gt;\n&lt;%= render \"activities/#{activity.trackable_type.underscore}/#{activity.action}\", activity: activity %&gt;\n&lt;%= render \"comments/comments\", comments: activity.comments %&gt;\n&lt;%= render \"comments/form\", new_comment: Comment.new(commentable_id: activity.id, commentable_type: activity.class.model_name) %&gt;\n</code></pre>\n\n<p><strong>comments/_form</strong></p>\n\n<pre><code>&lt;%= form_for new_comment do |f| %&gt;\n  &lt;%= f.text_area :content, rows: 4, class: 'form-control', placeholder: 'Enter Comment' %&gt;\n  &lt;%= button_tag(type: 'submit', class: \"btn\") do %&gt;\n    &lt;span class=\"glyphicon glyphicon-plus\"&gt;&lt;/span&gt; Comment\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>activities_controller</strong></p>\n\n<pre><code>def index\n  @activities = Activity.order(\"created_at desc\").where(user_id: current_user.following_ids)\n  @commentable = @activity\n  @comment = Comment.new\nend\n</code></pre>\n\n<p>The error can be found here:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  before_action :load_commentable\n  before_action :set_comment, only: [:show, :edit, :update, :destroy, :like]\n  before_action :logged_in_user, only: [:create, :destroy]\n\n    def index\n        @comments = @commentable.comments\n    end\n\n    def new\n        @comment = @commentable.comments.new\n    end\n\n    def create\n        @comment = @commentable.comments.new(comment_params)\n        if @comment.save\n            redirect_to @commentable, notice: \"comment created.\"\n        else\n            render :new\n        end\n    end\n\n    def edit\n        @comment = current_user.comments.find(params[:id])\n    end\n\n    def update\n        @comment = current_user.comments.find(params[:id])\n        if @comment.update_attributes(comment_params)\n            redirect_to @commentable, notice: \"Comment was updated.\"\n        else\n            render :edit\n        end\n    end\n\n    def destroy\n        @comment = current_user.comments.find(params[:id])\n        @comment.destroy\n        redirect_to @commentable, notice: \"comment destroyed.\"\n    end\n\n  def like\n    @comment = Comment.find(params[:id])\n    @comment_like = current_user.comment_likes.build(comment: @comment)\n    if @comment_like.save\n            @comment.increment!(:likes)\n        flash[:success] = 'Thanks for liking!'\n    else\n        flash[:error] = 'Two many likes'\n      end  \n        redirect_to(:back)\n  end\n\nprivate\n  def set_comment\n    @comment = Comment.find(params[:id])\n  end\n\n    def load_commentable\n        resource, id = request.path.split('/')[1, 2]\n        @commentable = resource.singularize.classify.constantize.find(id) #Here it is!\n    end\n\n    def comment_params\n        params[:comment][:user_id] = current_user.id\n        params.require(:comment).permit(:content, :commentable, :user_id, :like)\n    end\nend\n</code></pre>\n\n<p>The error came about from the answer here: <a href=\"https://stackoverflow.com/questions/29778140/how-to-add-polymorphic-comments-to-feed/29778414#29778414\">How to Add Polymorphic Comments to Feed?</a></p>\n\n<p><strong>development.log</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Started POST \"/comments\" for ::1 at 2015-04-23 20:12:14 -0400\r\nProcessing by CommentsController#create as HTML\r\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"hU1lxg2BMqSyBo8j2SGiEB4wZ3ez5kz/E64mp6ssbwBnh+DddyTtNQxY+IYCluHHvs2wIBxrtD5hQVA5sGtXBg==\", \"comment\"=&gt;{\"content\"=&gt;\"test\"}, \"button\"=&gt;\"\"}\r\n  [1m[35mUser Load (0.2ms)[0m  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 2]]\r\n  [1m[36mHabit Load (0.1ms)[0m  [1mSELECT \"habits\".* FROM \"habits\" WHERE \"habits\".\"user_id\" = ?[0m  [[\"user_id\", 2]]\r\n  [1m[35mHabit Load (2.5ms)[0m  SELECT \"habits\".* FROM \"habits\"\r\n  [1m[36mActsAsTaggableOn::Tag Load (0.3ms)[0m  [1mSELECT \"tags\".* FROM \"tags\" WHERE (LOWER(name) = LOWER('ingrain'))[0m\r\n  [1m[35mComment Load (0.3ms)[0m  SELECT  \"comments\".* FROM \"comments\" WHERE \"comments\".\"id\" = ? LIMIT 1  [[\"id\", nil]]\r\nCompleted 404 Not Found in 16ms\r\n\r\nActiveRecord::RecordNotFound (Couldn't find Comment with 'id'=):\r\n  app/controllers/comments_controller.rb:61:in `load_commentable'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 4, "last_activity_date": 1429727672, "creation_date": 1429727672, "answer_id": 29806114, "question_id": 29806089, "link": "https://stackoverflow.com/questions/29806089/ruby-on-rails-displaying-model-attribute-on-view/29806114#29806114", "title": "Ruby on Rails: Displaying model attribute on view", "body": "<p>To output content with ERB, you need to add an <code>=</code> to the ERB block:</p>\n\n<pre><code>&lt;%= @store.name %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 0, "last_activity_date": 1429727800, "creation_date": 1429727800, "answer_id": 29806163, "question_id": 29806089, "link": "https://stackoverflow.com/questions/29806089/ruby-on-rails-displaying-model-attribute-on-view/29806163#29806163", "title": "Ruby on Rails: Displaying model attribute on view", "body": "<p>Make it like this,</p>\n\n<pre><code>&lt;li&gt;&lt;%= @store.name %&gt;&lt;/li&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1429728965, "last_edit_date": 1429728965, "creation_date": 1429728103, "answer_id": 29806250, "question_id": 29806089, "link": "https://stackoverflow.com/questions/29806089/ruby-on-rails-displaying-model-attribute-on-view/29806250#29806250", "title": "Ruby on Rails: Displaying model attribute on view", "body": "<p>Lets see which <code>ERB</code> tag does what:</p>\n\n<pre><code>&lt;%= %&gt; # Prints the attribute value.\nWelcome to &lt;%= @store.name %&gt;!\n\n\n&lt;% %&gt; # Executes the code.\n&lt;ul&gt;\n  &lt;% @stores.each do |store| %&gt;\n  &lt;li&gt;&lt;%= store.name %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n\n\n&lt;%# %&gt; # Comments out the code.\n&lt;%# This is just a comment... %&gt;\n</code></pre>\n\n<p>Rails extends ERB, so you can use this shortcut to suppress new line:</p>\n\n<pre><code>&lt;% -%&gt; # Avoids line break after expression.\n&lt;ul&gt;\n  &lt;% @stores.each do |store| -%&gt;\n  &lt;li&gt;&lt;%= store.name %&gt;&lt;/li&gt;\n&lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>For further study, see <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/erb/rdoc/ERB.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 4598078, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2c386810fed8bd184335243bd4dfefd0?s=128&d=identicon&r=PG&f=1", "display_name": "alcol92", "link": "https://stackoverflow.com/users/4598078/alcol92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1548, "favorite_count": 0, "accepted_answer_id": 29806114, "answer_count": 3, "score": 0, "last_activity_date": 1429728965, "creation_date": 1429727569, "question_id": 29806089, "link": "https://stackoverflow.com/questions/29806089/ruby-on-rails-displaying-model-attribute-on-view", "title": "Ruby on Rails: Displaying model attribute on view", "body": "<p>So I have a user model and a store model created. I am having a problem displaying the name of a store that has already been created in my database. It's a very stupid problem, with a very easy solution, but I just can't figure out what I'm doing wrong. So here is my user controller where I find the store I want to display:</p>\n\n<pre><code>def show\n   @user = User.find(params[:id])\n   @store = Store.find(1)\nend\n</code></pre>\n\n<p>And here is the view:</p>\n\n<pre><code>&lt;% provide(:title, @user.username) %&gt;\n &lt;div class=\"row\"&gt;\n  &lt;aside class=\"col-md-4\"&gt;\n   &lt;section class=\"user_info\"&gt;\n     &lt;h1&gt;\n       &lt;%= gravatar_for @user %&gt;\n       &lt;%= @user.username %&gt;\n     &lt;/h1&gt;\n   &lt;/section&gt;\n &lt;/aside&gt;\n&lt;/div&gt;\n\n&lt;li&gt;&lt;% @store.name %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>So the name of the user shows up, no issues there, but for some reason, the name of the store is not showing up. I know as a fact that there is a store with an id: 1 in the database. Any help here would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "gem", "admin"], "comments": [{"owner": {"reputation": 12051, "user_id": 656243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3afyW.png?s=128&g=1", "display_name": "Lynn Crumbling", "link": "https://stackoverflow.com/users/656243/lynn-crumbling"}, "edited": false, "score": 0, "creation_date": 1429727712, "post_id": 29806079, "comment_id": 47740097, "body": "Please edit your question and delete the sentence asking for a tutorial, or this question will likely be closed as a request for an off-site resource."}], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 361457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e8753d04f4204aafdb11b62d2839ca?s=128&d=identicon&r=PG", "display_name": "yogodoshi", "link": "https://stackoverflow.com/users/361457/yogodoshi"}, "reply_to_user": {"reputation": 367, "user_id": 4465665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2e1fd6a03443a4cb70bad2c7e86f373?s=128&d=identicon&r=PG&f=1", "display_name": "Ludvig S&#248;rensen", "link": "https://stackoverflow.com/users/4465665/ludvig-s%c3%b8rensen"}, "edited": false, "score": 0, "creation_date": 1429978819, "post_id": 29807225, "comment_id": 47860187, "body": "If it solved your problem, please select my answer as the correct to help other people with the same problem find the solution :)"}, {"owner": {"reputation": 367, "user_id": 4465665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2e1fd6a03443a4cb70bad2c7e86f373?s=128&d=identicon&r=PG&f=1", "display_name": "Ludvig S&#248;rensen", "link": "https://stackoverflow.com/users/4465665/ludvig-s%c3%b8rensen"}, "edited": false, "score": 0, "creation_date": 1430068498, "post_id": 29807225, "comment_id": 47885737, "body": "Yeah thanks, i am still kinda new to stack overflow :D"}], "tags": [], "owner": {"reputation": 114, "user_id": 361457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e8753d04f4204aafdb11b62d2839ca?s=128&d=identicon&r=PG", "display_name": "yogodoshi", "link": "https://stackoverflow.com/users/361457/yogodoshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1429731381, "creation_date": 1429731381, "answer_id": 29807225, "question_id": 29806079, "link": "https://stackoverflow.com/questions/29806079/i-dont-understand-how-the-devise-admin-model-work/29807225#29807225", "title": "i dont understand how the devise admin model work", "body": "<p>If you run <code>rake routes | grep 'admin'</code> you will see that there is no route like admin/sign_up. The admin user should be created on rails console or within the admin.</p>\n\n<p>When you install devise (with the migrations and all) it creates for you a default admin user with email: \"admin@example.com\" and password: \"password\".</p>\n\n<p>You should login with it to create your real admin user and them delete this default one.</p>\n\n<p>And here is an excellent devise tutorial: <a href=\"http://www.gotealeaf.com/blog/how-to-use-devise-in-rails-for-authentication\" rel=\"nofollow\">http://www.gotealeaf.com/blog/how-to-use-devise-in-rails-for-authentication</a> :)</p>\n"}], "owner": {"reputation": 367, "user_id": 4465665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e2e1fd6a03443a4cb70bad2c7e86f373?s=128&d=identicon&r=PG&f=1", "display_name": "Ludvig S&#248;rensen", "link": "https://stackoverflow.com/users/4465665/ludvig-s%c3%b8rensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 29807225, "answer_count": 1, "score": 0, "last_activity_date": 1429731381, "creation_date": 1429727521, "last_edit_date": 1429730164, "question_id": 29806079, "link": "https://stackoverflow.com/questions/29806079/i-dont-understand-how-the-devise-admin-model-work", "title": "i dont understand how the devise admin model work", "body": "<p>I am building a rails app, and i want users and a Admin (me), but i dont understand how the devise admin model work, because if i have have a admin model, cant anyone just go to the link (/admins/sign_up) and sign_up as a admin on my site? </p>\n\n<p>I have already tried to look around on the internet but i just cant seem to find an answer.</p>\n\n<p>If you can explain to me how i can get over this problem, i would love you :D</p>\n\n<p>Thank you\n- Peace</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "is_accepted": true, "score": 0, "last_activity_date": 1429727486, "creation_date": 1429727486, "answer_id": 29806067, "question_id": 29805877, "link": "https://stackoverflow.com/questions/29805877/cant-read-a-config-value-in-development-rb/29806067#29806067", "title": "Can&#39;t read a config value in development.rb", "body": "<p>Initializers are loaded after <code>config/environments/development.rb</code>. You can see more on Rails guides: <a href=\"http://guides.rubyonrails.org/initialization.html\" rel=\"nofollow\">http://guides.rubyonrails.org/initialization.html</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user266003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 29806067, "answer_count": 1, "score": 0, "last_activity_date": 1429727486, "creation_date": 1429726900, "question_id": 29805877, "link": "https://stackoverflow.com/questions/29805877/cant-read-a-config-value-in-development-rb", "title": "Can&#39;t read a config value in development.rb", "body": "<p>I have this:</p>\n\n<pre><code># config/setting1.yml\nvar1: 11\nvar2: 12\n\n# config/initializers/setting1.rb\nRails.configuration.setting1 = YAML.load_file(Rails.root.join('config', 'setting1.yml'))[Rails.env]\n\n# config/environments/development.rb\n//Doing something with Rails.configuration.setting1\n// Rails.configuration.setting1['var1']\n</code></pre>\n\n<p>For some reason, I get an error in <code>development.rb</code> which is  <code>undefined method setting1' for #&lt;Rails::Application::Configuration:0x0000010543f1b0&gt; (NoMethodError)</code></p>\n\n<p>Why is that? Doesn't development.rb get loaded after <code>initializers/setting1.rb</code> has been loaded?</p>\n"}, {"tags": ["ruby", "sinatra", "rake", "delayed-job"], "answers": [{"tags": [], "owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1429727148, "creation_date": 1429727148, "answer_id": 29805945, "question_id": 29805653, "link": "https://stackoverflow.com/questions/29805653/rakefile-for-delayed-job-with-sinatra/29805945#29805945", "title": "Rakefile for delayed_job with Sinatra", "body": "<p>Yes, as you guessed, you have to setup your Rakefile and a little extra to do that. You can find a gist <a href=\"https://gist.github.com/jerryjohnjacob/d308aff3738abc8355d9\" rel=\"nofollow\">here</a> on the same. Hope it solves your problem.</p>\n"}], "owner": {"reputation": 83, "user_id": 2490125, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1ac869299ea42d999bf5e480b5e5394?s=128&d=identicon&r=PG", "display_name": "Nick Moran", "link": "https://stackoverflow.com/users/2490125/nick-moran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 1, "accepted_answer_id": 29805945, "answer_count": 1, "score": 1, "last_activity_date": 1429727148, "creation_date": 1429726088, "question_id": 29805653, "link": "https://stackoverflow.com/questions/29805653/rakefile-for-delayed-job-with-sinatra", "title": "Rakefile for delayed_job with Sinatra", "body": "<p>I want to use delayed_job with my Sinatra application, but I'm having trouble getting my rake file set up correctly.  When I run rake jobs:work, I get this:</p>\n\n<pre><code>rake aborted! \nDon't know how to build task 'jobs:work' \n</code></pre>\n\n<p>I suspect I need to add a definition to my Rakefile to specify what it means to do jobs:work, but I can't find any documentation on how to do that.  It looks like delayed_job is usually used with Rails, and Rails seems to generate the appropriate rake definitions for you.</p>\n\n<p>How can I set up my Rakefile to be able to run jobs:work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4642327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e23f192792e2ab87cce6d0ad9fccc2b?s=128&d=identicon&r=PG&f=1", "display_name": "firefly", "link": "https://stackoverflow.com/users/4642327/firefly"}, "edited": false, "score": 0, "creation_date": 1429727958, "post_id": 29805769, "comment_id": 47740242, "body": "I tried create a new rails app, but it didn&#39;t solve the problem"}], "tags": [], "owner": {"reputation": 114, "user_id": 361457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e8753d04f4204aafdb11b62d2839ca?s=128&d=identicon&r=PG", "display_name": "yogodoshi", "link": "https://stackoverflow.com/users/361457/yogodoshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1429726519, "creation_date": 1429726519, "answer_id": 29805769, "question_id": 29805403, "link": "https://stackoverflow.com/questions/29805403/geminstallerextensionbuilderror-error-failed-to-build-gem-native-extension/29805769#29805769", "title": "Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension on Mac", "body": "<p>It seems that you are trying to create a new rails app on a folder that already exists and you shouldn't do it. First delete the previous installation, the \"blog\" folder, or choose another app name.</p>\n"}, {"tags": [], "owner": {"reputation": 787, "user_id": 2582475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b7b53d905d43e3d1a813e6a7dfd729?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2582475/jerry"}, "is_accepted": false, "score": 1, "last_activity_date": 1429728392, "creation_date": 1429728392, "answer_id": 29806346, "question_id": 29805403, "link": "https://stackoverflow.com/questions/29805403/geminstallerextensionbuilderror-error-failed-to-build-gem-native-extension/29806346#29806346", "title": "Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension on Mac", "body": "<p>There are two things you can try:</p>\n\n<ol>\n<li>Update bundler. Some versions of bundler, e.g. 1.5.0, might raise the above error that you ran into. Try this <code>gem install bundler -v '= 1.5.1'</code> or a version higher than 1.5.1</li>\n<li>Try reinstalling ruby through <code>rvm reinstall &lt;version&gt;</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 4642327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e23f192792e2ab87cce6d0ad9fccc2b?s=128&d=identicon&r=PG&f=1", "display_name": "firefly", "link": "https://stackoverflow.com/users/4642327/firefly"}, "is_accepted": true, "score": 0, "last_activity_date": 1429736019, "creation_date": 1429736019, "answer_id": 29808596, "question_id": 29805403, "link": "https://stackoverflow.com/questions/29805403/geminstallerextensionbuilderror-error-failed-to-build-gem-native-extension/29808596#29808596", "title": "Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension on Mac", "body": "<p>The problem was that I installed the newest version of Xcode and never open Xcode to complete the installation. \nEasy fix:</p>\n\n<ul>\n<li>Update Xcode </li>\n<li>Launch Xcode to complete installation</li>\n</ul>\n\n<p>Then, you can do <code>rails new &lt;directory&gt;</code></p>\n"}], "owner": {"reputation": 181, "user_id": 4642327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e23f192792e2ab87cce6d0ad9fccc2b?s=128&d=identicon&r=PG&f=1", "display_name": "firefly", "link": "https://stackoverflow.com/users/4642327/firefly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 0, "accepted_answer_id": 29808596, "answer_count": 3, "score": 1, "last_activity_date": 1429736019, "creation_date": 1429725271, "question_id": 29805403, "link": "https://stackoverflow.com/questions/29805403/geminstallerextensionbuilderror-error-failed-to-build-gem-native-extension", "title": "Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension on Mac", "body": "<p>Built a new rails project using <code>rails new blog</code> and got a error message:  <code>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.</code></p>\n\n<pre><code>   exist  \n   identical  README.rdoc\n   identical  Rakefile\n   identical  config.ru\n   identical  .gitignore\n   identical  Gemfile\n       exist  app\n   identical  app/assets/javascripts/application.js\n   identical  app/assets/stylesheets/application.css\n   identical  app/controllers/application_controller.rb\n   identical  app/helpers/application_helper.rb\n   identical  app/views/layouts/application.html.erb\n   identical  app/assets/images/.keep\n   identical  app/mailers/.keep\n   identical  app/models/.keep\n   identical  app/controllers/concerns/.keep\n   identical  app/models/concerns/.keep\n       exist  bin\n   identical  bin/bundle\n   identical  bin/rails\n   identical  bin/rake\n       exist  config\n   identical  config/routes.rb\n   identical  config/application.rb\n   identical  config/environment.rb\n       exist  config/environments\n   identical  config/environments/development.rb\n   identical  config/environments/production.rb\n   identical  config/environments/test.rb\n       exist  config/initializers\n   identical  config/initializers/backtrace_silencers.rb\n   identical  config/initializers/filter_parameter_logging.rb\n   identical  config/initializers/inflections.rb\n   identical  config/initializers/mime_types.rb\n    conflict  config/initializers/secret_token.rb\nOverwrite /Users/jianqiuhuang/Desktop/ruby/blog/config/initializers/secret_token.rb? (enter \"h\" for help) [Ynaqdh] y\n       force  config/initializers/secret_token.rb\n   identical  config/initializers/session_store.rb\n   identical  config/initializers/wrap_parameters.rb\n       exist  config/locales\n   identical  config/locales/en.yml\n   identical  config/boot.rb\n   identical  config/database.yml\n       exist  db\n   identical  db/seeds.rb\n       exist  lib\n       exist  lib/tasks\n   identical  lib/tasks/.keep\n       exist  lib/assets\n   identical  lib/assets/.keep\n       exist  log\n   identical  log/.keep\n       exist  public\n   identical  public/404.html\n   identical  public/422.html\n   identical  public/500.html\n   identical  public/favicon.ico\n   identical  public/robots.txt\n       exist  test/fixtures\n   identical  test/fixtures/.keep\n       exist  test/controllers\n   identical  test/controllers/.keep\n       exist  test/mailers\n   identical  test/mailers/.keep\n       exist  test/models\n   identical  test/models/.keep\n       exist  test/helpers\n   identical  test/helpers/.keep\n       exist  test/integration\n   identical  test/integration/.keep\n   identical  test/test_helper.rb\n       exist  tmp/cache\n       exist  tmp/cache/assets\n       exist  vendor/assets/javascripts\n   identical  vendor/assets/javascripts/.keep\n       exist  vendor/assets/stylesheets\n   identical  vendor/assets/stylesheets/.keep\n         run  bundle install\nFetching gem metadata from https://rubygems.org/..........\nFetching version metadata from https://rubygems.org/..\nResolving dependencies...\nUsing rake 10.4.2\nUsing i18n 0.7.0\nUsing minitest 4.7.5\nUsing multi_json 1.11.0\nUsing thread_safe 0.3.5\nUsing tzinfo 0.3.43\nUsing activesupport 4.0.0\nUsing builder 3.1.4\nUsing erubis 2.7.0\nUsing rack 1.5.2\nUsing rack-test 0.6.3\nUsing actionpack 4.0.0\nUsing mime-types 1.25.1\nUsing polyglot 0.3.5\nUsing treetop 1.4.15\nUsing mail 2.5.4\nUsing actionmailer 4.0.0\nUsing activemodel 4.0.0\nUsing activerecord-deprecated_finders 1.0.4\nUsing arel 4.0.2\nUsing activerecord 4.0.0\nUsing bundler 1.9.4\nUsing coffee-script-source 1.9.1.1\nUsing execjs 2.5.2\nUsing coffee-script 2.4.1\nUsing thor 0.19.1\nUsing railties 4.0.0\nUsing coffee-rails 4.0.1\nUsing hike 1.2.3\nUsing jbuilder 1.5.3\nUsing jquery-rails 3.1.2\n\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/include/ruby.h\n\n\nGem files will remain installed in /var/folders/b0/spcr203s5vgb3f4sd8kfllhc0000gn/T/bundler20150422-979-i48mud/json-1.8.2/gems/json-1.8.2 for inspection.\nResults logged to /var/folders/b0/spcr203s5vgb3f4sd8kfllhc0000gn/T/bundler20150422-979-i48mud/json-1.8.2/gems/json-1.8.2/ext/json/ext/generator/gem_make.out\nAn error occurred while installing json (1.8.2), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.2'` succeeds before bundling.\n</code></pre>\n\n<p>Does anyone know what the problem is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "rails-engines"], "comments": [{"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1429725255, "post_id": 29805325, "comment_id": 47738552, "body": "Engines use namespacing to isolate the engine code from the main app. You may want to try adding the responders gem to your main app too."}, {"owner": {"reputation": 92, "user_id": 1303561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79b641c47a97e81cfcc4597f92ba8afa?s=128&d=identicon&r=PG", "display_name": "the_disco", "link": "https://stackoverflow.com/users/1303561/the-disco"}, "reply_to_user": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1429729384, "post_id": 29805325, "comment_id": 47741153, "body": "That&#39;s what I did, but doesn&#39;t it defeat the purpose of an engine? What, if my engine depends no 20 gems? It would be a nightmare to deal with."}], "answers": [{"comments": [{"owner": {"reputation": 92, "user_id": 1303561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79b641c47a97e81cfcc4597f92ba8afa?s=128&d=identicon&r=PG", "display_name": "the_disco", "link": "https://stackoverflow.com/users/1303561/the-disco"}, "edited": false, "score": 0, "creation_date": 1429729773, "post_id": 29806655, "comment_id": 47741423, "body": "Thanks for the explanation, it makes sense and it works!"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 3, "last_activity_date": 1429729401, "creation_date": 1429729401, "answer_id": 29806655, "question_id": 29805325, "link": "https://stackoverflow.com/questions/29805325/gem-dependencies-in-rails-engines/29806655#29806655", "title": "Gem dependencies in Rails Engines", "body": "<p>As you observe, the gem is included in your bundle whether it is in your application's Gemfile or not. The difference is that when <code>Bundler.require</code> is called during application initialisation it only auto requires the gem's in your application's Gemfile - not indirect dependencies.</p>\n\n<p>If your gem requires the responders gem gem to be loaded then it should require it explicitly - for example at the top of my_api.rb</p>\n"}], "owner": {"reputation": 92, "user_id": 1303561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79b641c47a97e81cfcc4597f92ba8afa?s=128&d=identicon&r=PG", "display_name": "the_disco", "link": "https://stackoverflow.com/users/1303561/the-disco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 1, "accepted_answer_id": 29806655, "answer_count": 1, "score": 4, "last_activity_date": 1429729464, "creation_date": 1429725034, "last_edit_date": 1429729464, "question_id": 29805325, "link": "https://stackoverflow.com/questions/29805325/gem-dependencies-in-rails-engines", "title": "Gem dependencies in Rails Engines", "body": "<p>I have followed the <a href=\"http://edgeguides.rubyonrails.org/engines.html\" rel=\"nofollow\">Getting Started with Engines</a> in Rails documentation and I have set up an <code>api</code> engine in <code>engines</code> directory. According to the paragraph <a href=\"http://edgeguides.rubyonrails.org/engines.html#other-gem-dependencies\" rel=\"nofollow\">6.6 Other Gem Dependencies</a> one is supposed to define the gem dependencies in <code>engines/my_api/my_api.gemspec</code> file and that is pretty much what I did:</p>\n\n<pre><code>s.add_dependency \"responders\", \"2.0\"\n</code></pre>\n\n<p>After adding </p>\n\n<pre><code>`gem 'my_api', path: \"engines/my_api\"`\n</code></pre>\n\n<p>to the applications <code>Gemfile</code> and running bundler, everything looks as expected:</p>\n\n<pre><code> bundle install | grep responders\n Installing responders 2.0.0\n</code></pre>\n\n<p>In the next step I set up a root path with a corresponding controller etc. and go to <code>engines/my_api/app/controllers/my_api/application_controller.rb</code> and add following content:</p>\n\n<pre><code>module MyApi\n  class ApplicationController &lt; ActionController::Base\n    respond_to :json\n  end\nend\n</code></pre>\n\n<p>I start the rails server, go the root url and guess what? I get following message:</p>\n\n<p><strong>The controller-level respond_to' feature has been extracted to the responders gem. Add it to your Gemfile to continue using this feature: gem 'responders', '~> 2.0' Consult the Rails upgrade guide for details.</strong></p>\n\n<p>As suggested in the error message, I've added the gem to the applications <code>Gemfile</code>, run <code>bundle install</code> and everything works as expected.</p>\n\n<p>As far as I understood, engines are supposed to be self contained rails apps. From a self contained app I would at least expect to correctly resolve its dependencies. I assume that I am just doing something wrong and I hope someone will be able to help me to tackle down the problem, why do I have to explicitly specify the gem in the applications <code>Gemfile</code>?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Forgot to mention the versions:</p>\n\n<pre><code>$ gem list | grep rails\ncoffee-rails (4.1.0)\njquery-rails (4.0.3)\nrails (4.2.1)\nrails-deprecated_sanitizer (1.0.3)\nrails-dom-testing (1.0.6)\nrails-html-sanitizer (1.0.2)\nsass-rails (5.0.3)\nsprockets-rails (2.2.4)\n</code></pre>\n"}, {"tags": ["ruby", "class-instance-variables"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1429725193, "post_id": 29805292, "comment_id": 47738501, "body": "Don&#39;t make an <code>event_list=</code> class method?"}, {"owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1429725791, "post_id": 29805292, "comment_id": 47738892, "body": "this is made to ensure no writing is done to @event_list on doing the assignment"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1429726168, "post_id": 29805292, "comment_id": 47739153, "body": "Sorry, I meant <code>event_list</code>. Ultimately if you don&#39;t want people to be able to modify it you need to return a copy."}], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "edited": false, "score": 0, "creation_date": 1429725743, "post_id": 29805452, "comment_id": 47738865, "body": "I didn&#39;t understand could you please explain a bit?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "edited": false, "score": 0, "creation_date": 1429726139, "post_id": 29805452, "comment_id": 47739125, "body": "@Deepak <code>event_list</code> returns the reference. Once you have the reference you can modify it."}, {"owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "edited": false, "score": 0, "creation_date": 1429726309, "post_id": 29805452, "comment_id": 47739256, "body": "ok, but if I just use attr_reader :event_list then also I can access it and modify it."}, {"owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "edited": false, "score": 0, "creation_date": 1429726637, "post_id": 29805452, "comment_id": 47739452, "body": "Ah I misread the question. You probably want to make a copy of the data with <code>deep_clone</code> or something and return that so the original variable can&#39;t be modified"}, {"owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "edited": false, "score": 0, "creation_date": 1429726698, "post_id": 29805452, "comment_id": 47739484, "body": "Even if the reader is made private I need to access the value ourside, the method <b>registered_events</b> must return the events outside, freezing seems ok but that means I have to freeze and unfreeze frequently."}], "tags": [], "owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "is_accepted": false, "score": 0, "last_activity_date": 1429726331, "last_edit_date": 1429726331, "creation_date": 1429725416, "answer_id": 29805452, "question_id": 29805292, "link": "https://stackoverflow.com/questions/29805292/making-a-class-instance-variable-unwritable-from-outside-world/29805452#29805452", "title": "Making a class instance variable unwritable from outside world", "body": "<p>You are defining <code>def event_list</code> on your singleton which is providing access to the variable. Make that method private</p>\n\n<p>EDIT:</p>\n\n<p>When you are declaring <code>@event_list</code> it has scope in your singleton methods.</p>\n\n<pre><code>class Event\n  @event_list = {}\n\n  class &lt;&lt; self\n    def event_list\n      # scoped from above\n      @event_list\n    end\n  end\nend\n\nEvent.event_list #=&gt; {}\n</code></pre>\n\n<p>To remove access simply make the method private:</p>\n\n<pre><code>class Event\n  @event_list = {}\n\n  class &lt;&lt; self\n    private\n\n    def event_list\n      # scoped from above\n      @event_list\n    end\n  end\nend\n\nEvent.event_list #=&gt; NoMethodError: private method `event_list' called for Event:Class\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "edited": false, "score": 0, "creation_date": 1429726100, "post_id": 29805620, "comment_id": 47739102, "body": "event if I just add <i>attr_reader :event_list</i> instead of writing reader and writer methods I can modify the variable. In a class I can make an instance variable unwritable by just using attr_reader, If a class is an object then I should be able to make its instance variable unwriteable."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "edited": false, "score": 0, "creation_date": 1429726313, "post_id": 29805620, "comment_id": 47739258, "body": "@deepak see addition to my answer"}], "tags": [], "owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1429726298, "last_edit_date": 1429726298, "creation_date": 1429725972, "answer_id": 29805620, "question_id": 29805292, "link": "https://stackoverflow.com/questions/29805292/making-a-class-instance-variable-unwritable-from-outside-world/29805620#29805620", "title": "Making a class instance variable unwritable from outside world", "body": "<p>As far as I know, you can't stop outside code from modifying your instance variables in Ruby. Even if you don't use <code>attr_reader</code> and <code>attr_writer</code> it can still be accessed using <code>Object#instance_variable_set</code>. Ruby doesn't have private variables (or constants), only variables that you are politely asked not to modify.</p>\n\n<p>If you don't define <code>event_list=</code>, that is seen as an indication that <code>@event_list</code> is a private variable. This is the solution to your problem.</p>\n\n<p>Then there is the problem with mutable objects. Since almost all objects in Ruby sadly are mutable, usually if you can just get a reference to an object then you can change it.</p>\n\n<p>This can be solved with <code>Object#freeze</code> which stops an object from being modified. Unfortunately this means that not even you can modify it.</p>\n\n<p>Ruby is simply not very good for locking things down. This openness is a core part of the language that you probably need to learn to work with.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1429729304, "creation_date": 1429729304, "answer_id": 29806622, "question_id": 29805292, "link": "https://stackoverflow.com/questions/29805292/making-a-class-instance-variable-unwritable-from-outside-world/29806622#29806622", "title": "Making a class instance variable unwritable from outside world", "body": "<p>As others have said, just make the methods private:</p>\n\n<pre><code>class Event\n    @event_list = {a: 'dog'}\n    class &lt;&lt; self\n      def pub_event_list\n        @event_list\n      end  \n      def pub_event_list=(other)\n        @event_list=other\n      end  \n      private\n      def event_list\n        @event_list\n      end\n      def event_list=(value)\n        @event_list = value\n      end\n    end\nend\n\nEvent.event_list\n  #=&gt; NoMethodError: private method `event_list' called for Event:Class\n\nEvent.pub_event_list\n  #=&gt; {:a=&gt;\"dog\"} \n\nEvent.event_list= {b: 'cat'}\n  #=&gt; #NoMethodError: private method `event_list=' called for Event:Class\n\nEvent.pub_event_list= {b: 'cat'}\n  #=&gt; {:b=&gt;\"cat\"} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "is_accepted": false, "score": 0, "last_activity_date": 1429782907, "creation_date": 1429782907, "answer_id": 29819905, "question_id": 29805292, "link": "https://stackoverflow.com/questions/29805292/making-a-class-instance-variable-unwritable-from-outside-world/29819905#29819905", "title": "Making a class instance variable unwritable from outside world", "body": "<p>Here is what I done for now, I don't know if it is a good solution</p>\n\n<pre><code>class Event\n\n  @event_list = {}\n\n  attr_reader :name, :value\n\n  def initialize(name, value)\n    @name  = name\n    @value = value\n  end\n\n  def to_s\n    \"#{@value}\"\n  end\n\n  class &lt;&lt; self\n    def register_event(name, value)\n      @event_list = @event_list.merge(name =&gt; Event.new(name, value))\n    end\n\n    def registered_events\n      @event_list.freeze\n    end\n  end\nend\n</code></pre>\n\n<p>Now I can access @event_list without letting others to modify.</p>\n"}], "owner": {"reputation": 232, "user_id": 1068805, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d780d125ed2db179863b30988089c61?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1068805/deepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1429782907, "creation_date": 1429724929, "question_id": 29805292, "link": "https://stackoverflow.com/questions/29805292/making-a-class-instance-variable-unwritable-from-outside-world", "title": "Making a class instance variable unwritable from outside world", "body": "<pre><code>class Event\n\n    @event_list = {}\n\n    attr_reader :name, :value\n\n    def initialize(name, value)\n      @name  = name\n      @value = value\n    end\n\n    def to_s\n      \"#{@value}\"\n    end\n\n    class &lt;&lt; self\n\n      def event_list\n          @event_list\n      end\n\n      def event_list=(value); end\n\n      def register_event(name, value)\n          @event_list[name] = Event.new(name, value)\n      end\n\n      def registered_events\n          event_list\n      end\n    end\nend\n</code></pre>\n\n<p>In the above code snippet I can access @event_list using Event.event_list, interesting thing is I am able to modify this variable from outside</p>\n\n<pre><code>Event.event_list[:name] = \"hello\"\nEvent.event_list  # =&gt; { :name =&gt; 'hello' }\n</code></pre>\n\n<p>How can I avoid this ?, I don't want to modify @event_list from outside.</p>\n"}, {"tags": ["ruby", "regex", "git", "githooks", "git-commit"], "comments": [{"owner": {"reputation": 2855, "user_id": 2727750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b7bc04718f7ccf5be96a607bfc049d?s=128&d=identicon&r=PG&f=1", "display_name": "David Ongaro", "link": "https://stackoverflow.com/users/2727750/david-ongaro"}, "edited": false, "score": 1, "creation_date": 1429727182, "post_id": 29805204, "comment_id": 47739796, "body": "While I think it would be ok to restrict the length of the first line, I think you should at least allow a short description besides ticket IDs. Many tools are only displaying the first line, so even if you enforce a longer description you  make it more difficult in many contexts to see at a glance what a commit is about if you just restrict it to ticket IDs."}], "answers": [{"comments": [{"owner": {"reputation": 593, "user_id": 1039350, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0d2dbfbd189761da8658b08aaef07e4f?s=128&d=identicon&r=PG", "display_name": "Steven Spasbo", "link": "https://stackoverflow.com/users/1039350/steven-spasbo"}, "edited": false, "score": 0, "creation_date": 1429731989, "post_id": 29805384, "comment_id": 47742838, "body": "David Ongaro has a really good point, how could I also include a comment in the first line after one or more issue IDs?"}, {"owner": {"reputation": 4842, "user_id": 2257675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjuUd.jpg?s=128&g=1", "display_name": "Brian Stephens", "link": "https://stackoverflow.com/users/2257675/brian-stephens"}, "reply_to_user": {"reputation": 593, "user_id": 1039350, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0d2dbfbd189761da8658b08aaef07e4f?s=128&d=identicon&r=PG", "display_name": "Steven Spasbo", "link": "https://stackoverflow.com/users/1039350/steven-spasbo"}, "edited": false, "score": 0, "creation_date": 1429788391, "post_id": 29805384, "comment_id": 47770164, "body": "@Steven: What&#39;s the format of possible comments? I&#39;m not familiar with the syntax. And it&#39;s not necessarily just one line of issue IDs, right? Your regex allows for newlines between issue IDs."}], "tags": [], "owner": {"reputation": 4842, "user_id": 2257675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjuUd.jpg?s=128&g=1", "display_name": "Brian Stephens", "link": "https://stackoverflow.com/users/2257675/brian-stephens"}, "is_accepted": true, "score": 1, "last_activity_date": 1429725508, "last_edit_date": 1429725508, "creation_date": 1429725205, "answer_id": 29805384, "question_id": 29805204, "link": "https://stackoverflow.com/questions/29805204/regex-for-git-commit-message/29805384#29805384", "title": "Regex for Git commit message", "body": "<p>Your regex allows for <code>\\n</code> as one of the possible characters after the required newline, so that's why it matches when there are multiple.</p>\n\n<p>Here's a cleaned up regex:</p>\n\n<p><code>/^([a-z]{2,4}-\\d{2,5}(?=[, \\n]),? ?\\n?)+^\\n([-\\w\\s*.:',]+\\n)+/i</code></p>\n\n<p>Notes:</p>\n\n<ul>\n<li>This requires at least one <code>[-\\w\\s*.:',]</code> character before the next newline.</li>\n<li>I changed the issue IDs to have one possible comma, space, and newline, in that order (up to one of each). Can you use lookaheads? If so, I added <code>(?=[, \\n])</code> to make sure the issue ID is followed by at least one of those characters.</li>\n<li>Also notice that many of the characters don't need to be escaped in a character class.</li>\n</ul>\n"}], "owner": {"reputation": 593, "user_id": 1039350, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0d2dbfbd189761da8658b08aaef07e4f?s=128&d=identicon&r=PG", "display_name": "Steven Spasbo", "link": "https://stackoverflow.com/users/1039350/steven-spasbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3513, "favorite_count": 1, "accepted_answer_id": 29805384, "answer_count": 1, "score": 3, "last_activity_date": 1429727794, "creation_date": 1429724674, "last_edit_date": 1429727794, "question_id": 29805204, "link": "https://stackoverflow.com/questions/29805204/regex-for-git-commit-message", "title": "Regex for Git commit message", "body": "<p>I'm trying to come up with a regex for enforcing Git commit messages to match a certain format. I've been banging my head against the keyboard modifying the semi-working version I have, but I just can't get it to work exactly as I want. Here's what I have now:</p>\n\n<pre><code>/^([a-z]{2,4}-[\\d]{2,5}[, \\n]{1,2})+\\n{1}^[\\w\\n\\s\\*\\-\\.\\:\\'\\,]+/i\n</code></pre>\n\n<p>Here's the text I'm trying to enforce:</p>\n\n<pre><code>AB-1432, ABC-435, ABCD-42\n\nHere is the multiline description, following a blank \nline after the Jira issue IDs\n- Maybe bullet points, with either dashes\n* Or asterisks\n</code></pre>\n\n<p>Currently, it matches that, but it will also match if there's no blank line after the issue IDs, and if there's multiple blank lines after.</p>\n\n<p>Is there anyway to enforce that, or will I just have to live with it?</p>\n\n<p>It's also pretty ugly, I'm sure there's a more succinct way to write that out.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-engines"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429722723, "post_id": 29804216, "comment_id": 47736778, "body": "Are you sure your mailer is namespaced like that?"}, {"owner": {"reputation": 977, "user_id": 918055, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b85b19d6899f05158594b99abd54fe10?s=128&d=identicon&r=PG", "display_name": "Adrian Matteo", "link": "https://stackoverflow.com/users/918055/adrian-matteo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429744546, "post_id": 29804216, "comment_id": 47749193, "body": "Yes. It&#39;s inside the module MY_ENGINE and it&#39;s called TicketMailer. I printed the loaded paths and the mailers folder isn&#39;t there. Even if I misspelled the name of the class the folder should be loaded."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429801284, "post_id": 29804216, "comment_id": 47780885, "body": "If your module name is <i>literally</i> <code>MY_ENGINE</code> you&#39;re going to have problems. The Rails auto-loader will expand that to something like  <code>m_y_en_g_i_n_e</code> which isn&#39;t what you want at all. In the auto-loader system <code>example_name</code> becomes <code>ExampleName</code>. It&#39;s best to use a name like <code>MyEngine</code> and a path of <code>my_engine</code> to be consistent."}, {"owner": {"reputation": 977, "user_id": 918055, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b85b19d6899f05158594b99abd54fe10?s=128&d=identicon&r=PG", "display_name": "Adrian Matteo", "link": "https://stackoverflow.com/users/918055/adrian-matteo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429864999, "post_id": 29804216, "comment_id": 47811445, "body": "@tadman thank you for your interest, but is not a naming problem, my engine is not named like that, you can see how I solved the problem on my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 977, "user_id": 918055, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b85b19d6899f05158594b99abd54fe10?s=128&d=identicon&r=PG", "display_name": "Adrian Matteo", "link": "https://stackoverflow.com/users/918055/adrian-matteo"}, "is_accepted": false, "score": 0, "last_activity_date": 1429864822, "creation_date": 1429864822, "answer_id": 29842608, "question_id": 29804216, "link": "https://stackoverflow.com/questions/29804216/rails-engine-doesnt-load-mailer/29842608#29842608", "title": "Rails engine doesn&#39;t load mailer", "body": "<p>I found a solution to this problem. Apparently the mailers folder is not loaded automatically but you can add folders to the load path manually adding a line like this one to your <code>engine.rb</code>:</p>\n\n<pre><code>paths['app/mailers'] &lt;&lt; 'MY_ENGINE/app/mailers'\n</code></pre>\n\n<p>Like this:</p>\n\n<pre><code>module MY_ENGINE\n  class Engine &lt; ::Rails::Engine\n    isolate_namespace MY_ENGINE\n    paths['app/mailers'] &lt;&lt; 'MY_ENGINE/app/mailers'\n  end\nend\n</code></pre>\n\n<p>That fixed the problem.</p>\n"}], "owner": {"reputation": 977, "user_id": 918055, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b85b19d6899f05158594b99abd54fe10?s=128&d=identicon&r=PG", "display_name": "Adrian Matteo", "link": "https://stackoverflow.com/users/918055/adrian-matteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1429864822, "creation_date": 1429721878, "question_id": 29804216, "link": "https://stackoverflow.com/questions/29804216/rails-engine-doesnt-load-mailer", "title": "Rails engine doesn&#39;t load mailer", "body": "<p>I'm working on an engine inside my app and creating a mailer for this engine inside <code>engines/MY_ENGINE/app/mailers</code> but I'm getting <code>uninitialized constant MY_ENGINE::TicketMailer</code>.</p>\n\n<p>Checking the loaded paths by doing <code>puts $:</code> I see rails loads Assets, controllers, models and helpers inside the app folder but not the mailers.</p>\n\n<p>Is there a way to fix this and add a path to be loaded?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "feed"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429745058, "post_id": 29803738, "comment_id": 47749376, "body": "my suggestion about the checkbox was a guess based on not actually seeing all your code. You say it hides them but not on the feed? Which ones aren&#39;t being shown? Can you go look them up in the db and see what value they have for their &quot;private&quot; boolean? Perhaps they aren&#39;t getting set to &quot;false&quot; properly, but are either true or nil... in which case - yes, there&#39;s something wrong with the checkbox... you need a default value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429746453, "post_id": 29803738, "comment_id": 47749871, "body": "Hey thanks for meeting me over here @TarynEast! I see we keep editing each other&#39;s entries. The reason I used <code>.public_activities</code> instead of <code>.public</code> is because I get this error with it: <code>You tried to define a scope named &quot;public&quot; on the model &quot;Activity&quot;, but Active Record already defined a class method with the same name.</code> Am I wrong to switch it or do you have a better solution? I think with rails 4 they reserve that word."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429747769, "post_id": 29803738, "comment_id": 47750320, "body": "Ah right... yep that&#39;s fair. Pick another name for it - but preferably avoid &quot;smurf naming convention&quot; (where the &quot;Smurf&quot; class has a &quot;public_smurfs&quot; method) ;)"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429748020, "post_id": 29803738, "comment_id": 47750407, "body": "yeah, just thinking, you probably don&#39;t wanna mess with &quot;private&quot; also - that&#39;s a special word in ruby (for making methods visible outside of the instance)."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429749763, "post_id": 29803738, "comment_id": 47750981, "body": "Note: Rails has a lot of &quot;special&quot; names that aren&#39;t written down anywhere... that correspond to things you probably shouldn&#39;t accidentally overwrite with your own methods. i keep meaning to write a blogpost that lists all the most dangerous ones."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429750108, "post_id": 29803738, "comment_id": 47751094, "body": "Quick chat @TarynEast? <a href=\"http://chat.stackoverflow.com/rooms/75987/room-for-rubyonrailsbeginner-and-taryn-east\">chat.stackoverflow.com/rooms/75987/&hellip;</a>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429750452, "post_id": 29803738, "comment_id": 47751172, "body": "I don&#39;t really have time for that... If you have questions... feel free to ask them and I&#39;ll get to them in my gaps between working ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429753226, "post_id": 29803738, "comment_id": 47752036, "body": "haha no problem @TarynEast that&#39;s a good blog post idea if you find time away from work and helping me ;) I&#39;ve switched over the names to visible &amp; hidden. By doing so only one valuation shows now in the users profile regardless of how many are submitted as visible or hidden. I&#39;ve been trying to fix this problem for the past 40 min to get back to the original problem posed here. I&#39;m thinking that their is some sort of naming collision preventing <code>def visible_valuations valuations.find(&amp;:visible?) end</code> from listing out all the valuations in the profile <code>@valuations = @user.visible_valuations</code>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429754949, "post_id": 29803738, "comment_id": 47752571, "body": "Can you please check what the values are in the db for these items? Make certain it&#39;s not that the boolean is set to nil"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429755897, "post_id": 29803738, "comment_id": 47752826, "body": "No @TarynEast doesn&#39;t say nil: [3] pry(main)&gt; Valuation.find(2)   Valuation Load (0.1ms)  SELECT  &quot;valuations&quot;.* FROM &quot;valuations&quot; WHERE &quot;valuations&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, 2]] =&gt; #&lt;Valuation:0x007fa1fc9032b0  id: 2,  hidden: false,  user_id: 1,  name: &quot;PRIVATE&quot;&gt; [4] pry(main)&gt; Valuation.find(3)   Valuation Load (0.1ms)  SELECT  &quot;valuations&quot;.* FROM &quot;valuations&quot; WHERE &quot;valuations&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, 3]] =&gt; #&lt;Valuation:0x007fa1fd0246c0  id: 3,  hidden: false,  user_id: 1,  name: &quot;PUBLIC&quot;&gt;"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1429761568, "post_id": 29803738, "comment_id": 47754476, "body": "sorry that&#39;s impossible to read... also those a valuations, not activities... I&#39;m confused. Also looking back over previous comment.s you really don&#39;t need to do this: <code>def visible_valuations valuations.find(&amp;:visible?) end</code> - just use the &quot;visible&quot; scope. <code>a_model.thingies.visible</code> should work, if you have a scope called <code>visible</code> it will work on any collection - not just on the <code>Thingie</code> class, but also on <code>has_many</code> collections. In this case, say: <code>user.valuations.visible</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1429824492, "post_id": 29803738, "comment_id": 47796003, "body": "Thanks @TarynEast for your last comment! That helped put me back on the right track! I renamed and reworked a lot so I thought it would be better to start with a fresh question: <a href=\"http://stackoverflow.com/questions/29834607/how-to-conceal-from-feed\" title=\"how to conceal from feed\">stackoverflow.com/questions/29834607/how-to-conceal-from-fee&zwnj;&#8203;d</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "edited": false, "score": 0, "creation_date": 1440967862, "post_id": 32234624, "comment_id": 52478379, "body": "This is perfect. Thank you, Max."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1440615498, "creation_date": 1440615498, "answer_id": 32234624, "question_id": 29803738, "link": "https://stackoverflow.com/questions/29803738/how-to-use-private-submit-with-activities-feed/32234624#32234624", "title": "How to use private submit with activities feed?", "body": "<p>I would use an <a href=\"http://api.rubyonrails.org/v4.1.0/classes/ActiveRecord/Enum.html\" rel=\"nofollow\">enum</a> column instead. Enums give you tons of functionality such as scopes, interrogation and even bang methods to change the status. But most of all enums are built to extend - lets say you want to add the functionality that users can have posts that are only viewable by friends - adding an additional state to an enum is easy!</p>\n\n<p>First we add a database column. Run:</p>\n\n<pre><code>rails g migration AddVisiblityToActivities visibility:integer:index\n</code></pre>\n\n<p>Then edit the migration to add a default:</p>\n\n<pre><code>class AddVisibilityToActivities &lt; ActiveRecord::Migration\n  def change\n    t.integer :visibility, index: true, default: 0\n  end\nend\n</code></pre>\n\n<p>Run the migration with <code>rake db:migrate</code>. Then we need to add the enum mappings to the Activity model:</p>\n\n<pre><code>class Activity &lt; ActiveRecord::Base\n  belongs_to :user\n  has_many :comments, as: :commentable\n  belongs_to :trackable, polymorphic: true\n\n  # change the order if you want to default to private!\n  enum visibility: [:visible, :hidden]\n\n  default_scope { visible.order('created_at DESC') }\nend\n</code></pre>\n\n<p>Note that we also add a default scope. With that we can really simplify the query in our controller:</p>\n\n<pre><code>class ActivitiesController &lt; ApplicationController\n  def index #Added .public\n    @activities = Activity.where(user: current_user.following)\n    # note that you don't have to use ids when creating a\n    # where clause from an association. Rails does the work for you\n  end\nend\n</code></pre>\n\n<p>The easiest way to let users alter the visibility when creating/updating records is to use a select:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :visibility %&gt;\n  &lt;%= f.select :visibility, Activity.visibilities.keys.map(&amp;:titleize) %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Just remember to whitelist the <code>visibility</code> property! </p>\n\n<pre><code># app/controllers/activities_controller.rb\n\n# ...\n\ndef create\n  @activity = Activity.new(activity_params) do |a|\n    a.user = current_user\n  end\n\n  # ...\nend\n\n# ...\n\ndef activity_params\n  params.require(:activity).permit(:visibility)\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4709022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 32234624, "answer_count": 1, "score": 4, "last_activity_date": 1440615498, "creation_date": 1429720380, "last_edit_date": 1495541671, "question_id": 29803738, "link": "https://stackoverflow.com/questions/29803738/how-to-use-private-submit-with-activities-feed", "title": "How to use private submit with activities feed?", "body": "<p>How can we give the user the option to make activities private? This would give users privacy for posts they want for their eyes only.</p>\n\n<p>I was told this code isn't working because it might have something to do with <a href=\"https://stackoverflow.com/questions/29786536/how-to-make-private-activities/29786609#29786609\">\"not setting up the 'private' checkbox to work correctly\"</a>, yet the private checkbox works for <a href=\"https://stackoverflow.com/questions/29323201/how-to-use-private-submit-to-hide-from-profile?lq=1\">hiding submissions on the public profiles</a> (just not on the activities feed).</p>\n\n<pre><code>class ActivitiesController &lt; ApplicationController\n  def index #Added .public\n    @activities = Activity.visible.order(\"created_at desc\").where(user_id: current_user.following_ids)\n  end\nend\n\n\nclass Activity &lt; ActiveRecord::Base\n  belongs_to :user\n  has_many :comments, as: :commentable\n  belongs_to :trackable, polymorphic: true\n  scope :visible, -&gt;{ where(:hidden =&gt; false) }\n\n  def visible?\n    !hidden\n  end\nend\n\ncreate_table \"activities\", force: true do |t|\n  t.boolean \"hidden\", default: false\n  t.integer  \"user_id\"\n  t.string   \"action\"\n  t.integer  \"trackable_id\"\n  t.string   \"trackable_type\"\n  t.datetime \"created_at\",     null: false\n  t.datetime \"updated_at\",     null: false\nend\n</code></pre>\n\n<p>And in one of the _forms, such as <code>@valuations</code> or <code>@goals</code>, is where the user can make the distinction via his submission:</p>\n\n<pre><code> &lt;%= button_tag(type: 'submit', class: \"btn\", id: \"gold\")  do %&gt;\n   &lt;span class=\"glyphicon glyphicon-plus\"&gt;&lt;/span&gt; Public\n &lt;% end %&gt;\n\n &lt;%= button_tag(type: 'submit', class: \"btn\") do %&gt;\n   &lt;% :hidden %&gt;&lt;span class=\"glyphicon glyphicon-plus\"&gt;&lt;/span&gt; Private\n &lt;% end %&gt;\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "singleton", "cucumber", "watir-webdriver"], "comments": [{"owner": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "edited": false, "score": 0, "creation_date": 1429724714, "post_id": 29803426, "comment_id": 47738162, "body": "What is the motivation for avoiding the singleton? I personally like this approach. What problems do you have with it? Another approach could be defining <code>browser</code> outside of the scope of your <code>Before</code> and <code>at_exit</code>. It sounds like you need to have some global state or state that is passed between tests"}, {"owner": {"reputation": 121, "user_id": 3456726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2bf390d9b208dd97e00bed045fc17f?s=128&d=identicon&r=PG&f=1", "display_name": "smoll", "link": "https://stackoverflow.com/users/3456726/smoll"}, "reply_to_user": {"reputation": 1143, "user_id": 1563837, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0784ce3665c294c4547f81a212014d4b?s=128&d=identicon&r=PG", "display_name": "Josh Bodah", "link": "https://stackoverflow.com/users/1563837/josh-bodah"}, "edited": false, "score": 0, "creation_date": 1429795255, "post_id": 29803426, "comment_id": 47775730, "body": "I try to avoid the singleton out of habit because it lends itself to poor design, especially if support code gets increasingly complex, and it&#39;s not easily unit-testable. But it makes sense, intuitively, that I can&#39;t operate on instances of classes if I need to preserve some global state between tests."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 1, "creation_date": 1429907882, "post_id": 29803426, "comment_id": 47839944, "body": "obviously there can be a lot of difference between web apps, but is your fear and code justified or YAGNI?  Have you actually encountered carry-over errors due to browser state with your app?    In the last several years of testing using Watir &amp; Cucumber I&#39;ve never had this problem myself.  (although I will admit that precisely zero of my tests assume the browser is already on the needed page etc.)  The closest I come is that I check to see if the user I want is already logged in before having the current user logout and then sign-in with the required user."}, {"owner": {"reputation": 121, "user_id": 3456726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2bf390d9b208dd97e00bed045fc17f?s=128&d=identicon&r=PG&f=1", "display_name": "smoll", "link": "https://stackoverflow.com/users/3456726/smoll"}, "reply_to_user": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1430504549, "post_id": 29803426, "comment_id": 48104782, "body": "@ChuckvanderLinden the reason I originally coded it was due to a problem with a legacy app I&#39;m currently testing, in which pages hang sporadically due to a hard-to-track-down session bug (restarting the browser lets the tests continue without issue) causing subsequent, unrelated tests to fail. The only other time I can see this being useful is when we&#39;re dealing with javascript modals that, if a test fails, leaving it open, it can cause subsequent tests to fail since the modal blocks the &quot;logout&quot; link or any other navigational links from being clicked."}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 2695818, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/71321de399d47802a3bc1636d4addc64?s=128&d=identicon&r=PG&f=1", "display_name": "yudi2312", "link": "https://stackoverflow.com/users/2695818/yudi2312"}, "is_accepted": false, "score": 0, "last_activity_date": 1433165905, "creation_date": 1433165905, "answer_id": 30575073, "question_id": 29803426, "link": "https://stackoverflow.com/questions/29803426/instantiating-a-watir-browser-on-test-failure-in-cucumber-without-using-the-sing/30575073#30575073", "title": "Instantiating a watir browser on test failure in Cucumber without using the singleton pattern", "body": "<p>I don't think this approach would be useful if the application is not stable. I would suggest creating a new instance of browser and closing it at the end of scenario.</p>\n"}], "owner": {"reputation": 121, "user_id": 3456726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2bf390d9b208dd97e00bed045fc17f?s=128&d=identicon&r=PG&f=1", "display_name": "smoll", "link": "https://stackoverflow.com/users/3456726/smoll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1433165905, "creation_date": 1429719509, "question_id": 29803426, "link": "https://stackoverflow.com/questions/29803426/instantiating-a-watir-browser-on-test-failure-in-cucumber-without-using-the-sing", "title": "Instantiating a watir browser on test failure in Cucumber without using the singleton pattern", "body": "<p>I've been trying to create a <a href=\"https://github.com/smoll/cucumber-seed\" rel=\"nofollow\">\"cucumber seed\" project</a> that I can use to quickly bootstrap a browser-based Acceptance Test suite. <a href=\"http://watirmelon.com/2012/04/01/five-page-object-anti-patterns/\" rel=\"nofollow\">Alister Scott has written</a> about a common antipattern of constantly closing and reopening browser windows (which adds unnecessary delay to a test suite), which can be avoided by adding the following to the env.rb file:</p>\n\n<pre><code>browser = Watir::Browser.new\n\nBefore do\n  @browser = browser\nend\n\nat_exit do\n  browser.close\nend\n</code></pre>\n\n<p>But I'm unsure of how to incorporate this behavior, while still restarting the browser when a test fails (this ensures that a failed test does not leak browser state and cause a cascade of failures to unrelated scenarios). </p>\n\n<p>My current approach is to wrap <code>Watir::Browser</code> instantiation in a <code>Browser</code> singleton class, like so:</p>\n\n<pre><code># support/browser.rb\n\nclass Browser\n  class &lt;&lt; self\n    def instance\n      @browser\n    end\n\n    def start(name: 'chrome')\n      @name = name\n      @browser = Watir::Browser.new(name.to_sym)\n    end\n\n    def stop\n      @browser.close # if a page hangs this will fail with a selenium unknown error\n    rescue Selenium::WebDriver::Error\n      puts 'Failed to close old browser (possibly because page is hanging), starting new one!'\n    end\n\n    def restart\n      stop\n      start(name: @name)\n    end\n  end # singleton methods\nend\n</code></pre>\n\n<p>and then call it in my env.rb/hooks file like so:</p>\n\n<pre><code>Browser.start\n\nBefore do\n  @browser = Browser.instance\nend\n\nAfter do |scenario|\n  Browser.restart if scenario.failed?\nend\n\nat_exit do\n  Browser.stop\nend\n</code></pre>\n\n<p>Which works, but is there a better way to write this? Something that avoids having to use a singleton, perhaps?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "terminal", "version"], "answers": [{"comments": [{"owner": {"reputation": 2185, "user_id": 2811053, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/854bc24214e445d3c3cd2b96bab3569b?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/2811053/ankush"}, "edited": false, "score": 0, "creation_date": 1429720855, "post_id": 29803302, "comment_id": 47735523, "body": "how do I install ruby previous version?"}], "tags": [], "owner": {"reputation": 1358, "user_id": 2385217, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bd10572a2009c613bef5244ee24c5a8f?s=128&d=identicon&r=PG&f=1", "display_name": "sansarp", "link": "https://stackoverflow.com/users/2385217/sansarp"}, "is_accepted": false, "score": 16, "last_activity_date": 1429721710, "last_edit_date": 1429721710, "creation_date": 1429719148, "answer_id": 29803302, "question_id": 29803099, "link": "https://stackoverflow.com/questions/29803099/cant-run-rails-commands-your-ruby-version-is-2-2-1-but-your-gemfile-specified/29803302#29803302", "title": "Cant run rails commands. Your Ruby version is 2.2.1, but your Gemfile specified 2.1.4", "body": "<p>Run <code>ruby -v</code> then you will see that you've installed ruby 2.2.1, but the first line in your Gemfile specifies to use <code>ruby 2.1.4</code>. Change the first line in your Gemfile to specify <code>ruby 2.2.1</code> or install <code>ruby 2.1.4</code>\nIf you want to use previous version ruby 2.1.4. Then first check if it is already installed or not by using <code>rvm list</code> command. If it is there then you need to run <code>rvm use ruby-2.1.4</code> command and if it is not there use </p>\n\n<pre><code>rvm install ruby-2.1.4\n\nrvm use ruby-2.1.4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7756, "user_id": 2118666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ND705.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/2118666/stephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1458979702, "creation_date": 1458979702, "answer_id": 36233052, "question_id": 29803099, "link": "https://stackoverflow.com/questions/29803099/cant-run-rails-commands-your-ruby-version-is-2-2-1-but-your-gemfile-specified/36233052#36233052", "title": "Cant run rails commands. Your Ruby version is 2.2.1, but your Gemfile specified 2.1.4", "body": "<p>It might be using your system ruby version</p>\n\n<p>In your apache config use:</p>\n\n<p>To find your path use <code>passenger-config about ruby-command</code></p>\n\n<p><code>PassengerRuby /home/user/.rbenv/versions/2.2.1/bin/ruby</code></p>\n\n<p>Source: <a href=\"https://www.phusionpassenger.com/library/deploy/apache/deploy/ruby/\" rel=\"nofollow\">phusion passenger docs</a></p>\n"}], "owner": {"reputation": 2185, "user_id": 2811053, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/854bc24214e445d3c3cd2b96bab3569b?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/2811053/ankush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12498, "favorite_count": 3, "answer_count": 2, "score": 9, "last_activity_date": 1458979702, "creation_date": 1429718630, "question_id": 29803099, "link": "https://stackoverflow.com/questions/29803099/cant-run-rails-commands-your-ruby-version-is-2-2-1-but-your-gemfile-specified", "title": "Cant run rails commands. Your Ruby version is 2.2.1, but your Gemfile specified 2.1.4", "body": "<p>I am not able to run surver <code>rails s</code> or cant make controllers etc. What should I do ?</p>\n\n<p>Terminal showing following error:</p>\n\n<pre><code>Your Ruby version is 2.2.1, but your Gemfile specified 2.1.4\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": true, "score": 1, "last_activity_date": 1429719859, "creation_date": 1429719859, "answer_id": 29803547, "question_id": 29803065, "link": "https://stackoverflow.com/questions/29803065/i-have-a-rake-task-that-sends-out-email-notifications-how-can-i-group-them/29803547#29803547", "title": "I have a rake task that send&#39;s out email notifications how can I group them", "body": "<p>The problem here is that you need the entry object to get the information about the entry, so you'd have to re-write the logic of the view. </p>\n\n<p>Firstly, define a couple of scopes in your Entry model:</p>\n\n<pre><code>class Entry &lt; ActiveRecord::Base #I'm assuming AR here\n  scope :pending, -&gt; { where(approve_disapprove: 3) }\n  scope :for_section, -&gt;(section) { where(section: section) }\nend\n</code></pre>\n\n<p>then change your rake task to group on section and pass in a relation, rather than a single entry:</p>\n\n<pre><code>def self.check_pending \n  sections = Entry.pending.pluck(:section).uniq                     \n  sections.each do |section|\n      entries = Entry.pending.for_section(section)\n      EntryMailer.check_pending(entries).deliver\n  end\nend\n</code></pre>\n\n<p>You'll then need to modify your mailer:</p>\n\n<pre><code>class EntryMailer &lt; ActionMailer::Base\n\n  def check_pending(entries)\n    @entries = entries\n    emails = @entries.map(&amp;:emp_mail_addr).uniq.join(',') #may not need this if your email will always be the same, could just grab the first @entries.first.enp_addr\n    mail to: emails, subject: '(TEST) You have pending time off requests that require approval or disapproval'\n  end\nend\n</code></pre>\n\n<p>And finally your view will need to iterate through these:</p>\n\n<pre><code>Hello\n\n#{@entries.first.mgr_name}\n\n\n The following time off request are pending please approve or disapprove once you have made your decision.\n\n- @entries.each do |entry|\n\n  %li\n    %span.u= entry.emp_first_name #note change from @entry to entry\n    ...\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4737946, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a54cd6f85d9d2a519045c557306d7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman88", "link": "https://stackoverflow.com/users/4737946/snowman88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 29803547, "answer_count": 1, "score": 1, "last_activity_date": 1490601683, "creation_date": 1429718568, "last_edit_date": 1490601683, "question_id": 29803065, "link": "https://stackoverflow.com/questions/29803065/i-have-a-rake-task-that-sends-out-email-notifications-how-can-i-group-them", "title": "I have a rake task that send&#39;s out email notifications how can I group them", "body": "<p>I have a rake task that sends out email notifications based on my entries table:</p>\n\n<p>If approve_disapprove has a \"3\" (3 means 'pending') it will send out an email to the person who approves the entry that a entry is still pending. </p>\n\n<p>The problem with this is if there are multiple entries it will go through and find each entry with a 3 for approve_disapprove and send out an email for each one.</p>\n\n<p>So if I have 5 entries and then when my task goes through the next day and sees they are still marked as 3 it will send 5 emails to the approver. </p>\n\n<p>How can I group this so it chunks all of them together based off my other column in my entry table called section. If it chunked or grouped all of the entries with a 3 for pending and grouped them by section name it would only send one email with all 5 request in it to the manager with that section? </p>\n\n<p>Here is my entry model that has the check_pending task </p>\n\n<pre><code>def self.check_pending # What this does is goes through each entry and looks at approve_disapprove if its a 3 which is pending it will sent an alert to the employees manager. \n  check_pending = Entry.where(approve_disapprove: 3)                      \n  check_pending.each do |entry|\n      EntryMailer.check_pending(entry).deliver\n  end\nend\n</code></pre>\n\n<p>This is my entry mailer for check pending </p>\n\n<pre><code>class EntryMailer &lt; ActionMailer::Base\n\n  def check_pending(entry)\n    @entry = entry\n\n    mail to: @entry.emp_mail_addr, subject: '(TEST) You have pending time off requests that require approval or disapproval'\n  end\nend\n</code></pre>\n\n<p>and this is my check_pending mailer view </p>\n\n<pre><code>Hello\n\n#{@entry.mgr_name}\n\n\n The following time off request are pending please approve or disapprove once you have made your decision.\n\n\n %li\n  %span.u= @entry.emp_first_name\n  %span.u= @entry.emp_last_name\n %li Dept\n %li= @entry.emp_dept\n %li Leave Start\n %li= @entry.leave_start.strftime('%m/%d/%y')\n %li Leave End\n %li= @entry.leave_end.strftime('%m/%d/%y')\n %li Type Of Request\n %li= @entry.indirect_id\n</code></pre>\n\n<p>And this is the rake task </p>\n\n<pre><code> desc \"Looks at pending request if the are still marked pending sends a email to the manager for the request\"\n task :check_pending =&gt; :environment do\n   Rails.logger.info \"Check Pending: Finding all pending.\"\n   Entry.check_pending\n   Rails.logger.info \"Found Pending: Check complete.\"\n   Rails.logger.flush\n end\n</code></pre>\n\n<p>extra info </p>\n\n<p>Entry table columns </p>\n\n<pre><code>  table \"entries\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"emp_id\"\n    t.string   \"emp_no\"\n    t.string   \"emp_first_name\"\n    t.string   \"emp_last_name\"\n    t.string   \"emp_mail_addr\"\n    t.string   \"indirect_id\"\n    t.string   \"mgr_no\"\n    t.string   \"mgr_first_name\"\n    t.string   \"mgr_last_name\"\n    t.string   \"mgr_mail_addr\"\n    t.datetime \"leave_start\"\n    t.string   \"employee_type\"\n    t.integer  \"seq_no\",           \n    t.decimal  \"range_days\",        \n    t.string   \"alt_mgr_no\"\n    t.string   \"alt_mgr_name\"\n    t.string   \"alt_mgr_addr\"\n    t.string   \"emp_dept\"\n    t.datetime \"leave_end\"\n    t.string   \"approve_disapprove\"\n    t.string   \"section\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "edited": false, "score": 2, "creation_date": 1429718439, "post_id": 29802919, "comment_id": 47733845, "body": "Does it work if you do <code>[product, product.category]</code>  (for the &#39;Show&#39; url)?"}], "answers": [{"tags": [], "owner": {"reputation": 36230, "user_id": 810, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/171ef654cf757eac7bcf4668e89bd7c1?s=128&d=identicon&r=PG", "display_name": "mbillard", "link": "https://stackoverflow.com/users/810/mbillard"}, "is_accepted": false, "score": 4, "last_activity_date": 1429718496, "creation_date": 1429718496, "answer_id": 29803025, "question_id": 29802919, "link": "https://stackoverflow.com/questions/29802919/rails-route-helpers-for-nested-resources/29803025#29803025", "title": "Rails: route helpers for nested resources", "body": "<p>I'm guessing the offending line is one of these:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to 'Show', [product, product.category_id] %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;%= link_to 'Edit', [:edit, product, product.category_id] %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>The <code>product.category_id</code> is a <code>Fixnum</code> and the routing can't know that a random number is supposed to map to <code>category_id</code>.</p>\n\n<p>Use the previous URLs you had, they're more readable.</p>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 3949193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ixPGq.jpg?s=128&g=1", "display_name": "jwong", "link": "https://stackoverflow.com/users/3949193/jwong"}, "edited": false, "score": 1, "creation_date": 1429719898, "post_id": 29803158, "comment_id": 47734897, "body": "Thanks your explanation totally makes sense! The first two works perfectly, except for the last one and it should be <code>&lt;%= link_to &#39;Destroy&#39;, [product.category, product], method: :delete, data: { confirm: &#39;Are you sure?&#39; } %&gt;</code>, or it will turn to <b>delete_category_product_path</b> which doesn&#39;t exist."}, {"owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "reply_to_user": {"reputation": 318, "user_id": 3949193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ixPGq.jpg?s=128&g=1", "display_name": "jwong", "link": "https://stackoverflow.com/users/3949193/jwong"}, "edited": false, "score": 1, "creation_date": 1429731965, "post_id": 29803158, "comment_id": 47742821, "body": "Doh! Edited to reflect that!"}], "tags": [], "owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "is_accepted": true, "score": 5, "last_activity_date": 1429731942, "last_edit_date": 1429731942, "creation_date": 1429718785, "answer_id": 29803158, "question_id": 29802919, "link": "https://stackoverflow.com/questions/29802919/rails-route-helpers-for-nested-resources/29803158#29803158", "title": "Rails: route helpers for nested resources", "body": "<p>The way Rails is 'automagically' knowing which path to use is by inspecting the objects you pass for their classes, and then looking for a controller whose name matches. So you need to make sure that what you are passing to the <code>link_to</code> helper is the actual model object, and not something like <code>category_id</code> which is just a <code>fixnum</code> and therefore has no associated controller.</p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= product.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Show', [product.category, product] %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Edit', [:edit, product.category, product] %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Destroy', [product.category, product], method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 3949193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ixPGq.jpg?s=128&g=1", "display_name": "jwong", "link": "https://stackoverflow.com/users/3949193/jwong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2207, "favorite_count": 0, "accepted_answer_id": 29803158, "answer_count": 2, "score": 6, "last_activity_date": 1429731942, "creation_date": 1429718261, "question_id": 29802919, "link": "https://stackoverflow.com/questions/29802919/rails-route-helpers-for-nested-resources", "title": "Rails: route helpers for nested resources", "body": "<p>I have nested resources as below:</p>\n\n<pre><code>resources :categories do\n  resources :products\nend\n</code></pre>\n\n<p>According to the <a href=\"http://guides.rubyonrails.org/routing.html\">Rails Guides</a>, </p>\n\n<blockquote>\n  <p>You can also use url_for with a set of objects, and Rails will automatically determine which route you want:</p>\n\n<pre><code>&lt;%= link_to 'Ad details', url_for([@magazine, @ad]) %&gt;\n</code></pre>\n  \n  <p>In this case, Rails will see that @magazine is a Magazine and @ad is an Ad and will therefore use the magazine_ad_path helper. In helpers like link_to, you can specify just the object in place of the full url_for call:</p>\n\n<pre><code>&lt;%= link_to 'Ad details', [@magazine, @ad] %&gt;\n</code></pre>\n  \n  <p>For other actions, you just need to insert the action name as the first element of the array:</p>\n\n<pre><code>&lt;%= link_to 'Edit Ad', [:edit, @magazine, @ad] %&gt;\n</code></pre>\n</blockquote>\n\n<p>In my case, I have the following code which was fully functional:</p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= product.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Show', category_product_path(product, category_id: product.category_id) %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Edit', edit_category_product_path(product, category_id: product.category_id) %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Destroy', category_product_path(product, category_id: product.category_id), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>Obviously it is a little too verbose and I wanted to shorten it using the trick mentioned above from rails guides. </p>\n\n<p>But if I changed the <em>Show</em> and <em>Edit</em> link as follows:</p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= product.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Show', [product, product.category_id] %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Edit', [:edit, product, product.category_id] %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Destroy', category_product_path(product, category_id: product.category_id), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Neither of them works any more, and the pages complains the same thing:</p>\n\n<pre><code>NoMethodError in Products#index\nShowing /root/Projects/foo/app/views/products/index.html.erb where line #16 raised:\n\nundefined method `persisted?' for 3:Fixnum\n</code></pre>\n\n<p>What did I miss?</p>\n"}, {"tags": ["ruby", "arguments", "keyword", "tostring"], "comments": [{"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "edited": false, "score": 0, "creation_date": 1429718066, "post_id": 29802770, "comment_id": 47733549, "body": "Looking for <code>.to_sym</code>? <a href=\"http://ruby-doc.org/core-2.2.2/String.html#method-i-to_sym\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/String.html#method-i-to_sym</a>"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1429719185, "post_id": 29803004, "comment_id": 47734413, "body": "I&#39;m getting an error doing the work like so (string parsing already done): name = name.to_sym, dob = dob.to_sym, and calling the function as: get_customer_information(name myName, dob myDOB). Is there a difference between symbol and keyword in ruby since .to_sym gives me :name, and the keyword I generally pass in is name: &#39;value&#39;?"}, {"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "edited": false, "score": 3, "creation_date": 1429719826, "post_id": 29803004, "comment_id": 47734859, "body": "try making it <code>get_customer_information(name =&gt; myName, dob =&gt; myDOB)</code> (notice the hash rockets). <code>.to_sym</code> converts &quot;dob&quot; to :dob (looks like you&#39;re expecting dob:)."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1429720151, "post_id": 29803004, "comment_id": 47735060, "body": "Yeah, I was trying to use keyword arguments (unsure if the hash rockets also equate to keyword arguments, still new to ruby). I was able to utilize the .to_sym method while keeping the keyword arguments by use .to_sym in a hash. For example: get_customer_information({name.to_sym =&gt; myName, dob.to_sym =&gt; myDOB}). Which may be the equivalent of your suggestion. Thanks for the help!"}], "tags": [], "owner": {"reputation": 445, "user_id": 4614631, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f265ae565682c3f4c98ec4a55b2ebc72?s=128&d=identicon&r=PG&f=1", "display_name": "Sulaiman Adeeyo", "link": "https://stackoverflow.com/users/4614631/sulaiman-adeeyo"}, "is_accepted": true, "score": 1, "last_activity_date": 1429718447, "creation_date": 1429718447, "answer_id": 29803004, "question_id": 29802770, "link": "https://stackoverflow.com/questions/29802770/ruby-convert-string-to-keyword-argument/29803004#29803004", "title": "Ruby convert string to keyword argument", "body": "<p>You can use the <em>.to_sym</em> method. This is ruby function method that convert string to symbol.</p>\n\n<p>Or using rails own, <em>\"symbol name\".parameterize.underscore.to_sym</em>. This will convert the string to <em>:symbol_name</em>. This uses rails naming convention.</p>\n"}], "owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1955, "favorite_count": 0, "accepted_answer_id": 29803004, "answer_count": 1, "score": 2, "last_activity_date": 1429718447, "creation_date": 1429717877, "question_id": 29802770, "link": "https://stackoverflow.com/questions/29802770/ruby-convert-string-to-keyword-argument", "title": "Ruby convert string to keyword argument", "body": "<p>I have a function in ruby that takes keyword arguments in the following form:</p>\n\n<pre><code>def get_customer_information(name: nil, dob: nil, age: nil, state: nil)\n   ... query db based on supplied parameters\nend\n</code></pre>\n\n<p>The user can specify 1 to all of the keyword arguments. There is also a command line interface where the user can leverage this function by calling a command line call and passing in a key/value of information of the following form:</p>\n\n<pre><code>&gt;GetCustomerInformation name=myName, dob=myDOB\n</code></pre>\n\n<p>The parameters are parsed and separated into keys and values. However, I need to know which keyword argument is associated with the supplied input from the command line. Is there a way to convert a string to a keyword argument (for example, convert name to name:) so that I need not perform string comparison on each parameter to determine which keyword argument it is associated with, resulting in a call of the form:</p>\n\n<pre><code>get_customer_information(name.to_keyword myName, dob.to_keyword myDOB)\n</code></pre>\n\n<p>Or is this not possible in ruby?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "gem", "rubygems"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1430231248, "post_id": 29802504, "comment_id": 47965971, "body": "Have you done <code>bundle install</code>? Did it succeed?"}, {"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1430231248, "post_id": 29802504, "comment_id": 47965972, "body": "I do not have any mysql software installed. though i followed the guide for mysql connector"}, {"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1430231300, "post_id": 29802504, "comment_id": 47966011, "body": "during the rails new operation i saw a line bundle install, and i assumed i do not have to do that process anymore, or am i wrong?"}], "answers": [{"comments": [{"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1429747693, "post_id": 29802673, "comment_id": 47750286, "body": "How do i know my db_name, username, and password?"}, {"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1429756365, "post_id": 29802673, "comment_id": 47752958, "body": "I tried that and still got the same error as above. my password field is empty though."}], "tags": [], "owner": {"reputation": 1358, "user_id": 2385217, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bd10572a2009c613bef5244ee24c5a8f?s=128&d=identicon&r=PG&f=1", "display_name": "sansarp", "link": "https://stackoverflow.com/users/2385217/sansarp"}, "is_accepted": false, "score": 0, "last_activity_date": 1429717679, "creation_date": 1429717679, "answer_id": 29802673, "question_id": 29802504, "link": "https://stackoverflow.com/questions/29802504/installing-ruby-with-mysql2-on-windows-7-64-bit-returns-error-on-rails-s/29802673#29802673", "title": "installing ruby with mysql2 on windows 7 64 bit returns error on rails s", "body": "<p>In config/database.yml have the following setting for your development environment as:</p>\n\n<pre><code>development:\n  adapter: mysql2 \n  database: db_name \n  username: your_username\n  password: your_password\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1430307564, "post_id": 29931872, "comment_id": 48005929, "body": "do i need to install connector/python 3.4? during the check requirements part of the mysql installation it states manual and i am not sure if i should install it?"}, {"owner": {"reputation": 9544, "user_id": 1657028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bf6fc65ae284258fabddf6da6a1c94c0?s=128&d=identicon&r=PG", "display_name": "Franco Rondini", "link": "https://stackoverflow.com/users/1657028/franco-rondini"}, "reply_to_user": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1430314042, "post_id": 29931872, "comment_id": 48011113, "body": "@magicianlam : answer update: added screenshot with details about options of mySQL installation; all what I installed is listed in the answer, if particular check is required on my filesystem leave me a comment."}, {"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1430314203, "post_id": 29931872, "comment_id": 48011241, "body": "I just installed everything required for mysql, hope it works and also i followed those found in your screenshot, though can you provide further instructions for the last step, primarily steps 1 to 3. thank you"}, {"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1430316231, "post_id": 29931872, "comment_id": 48013015, "body": "i was not able to install the workbench, should I install the 64bit or the 32bit version?"}, {"owner": {"reputation": 9544, "user_id": 1657028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bf6fc65ae284258fabddf6da6a1c94c0?s=128&d=identicon&r=PG", "display_name": "Franco Rondini", "link": "https://stackoverflow.com/users/1657028/franco-rondini"}, "reply_to_user": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1430317867, "post_id": 29931872, "comment_id": 48014427, "body": "see the answer for the name of the msi file, I download it from here: <a href=\"http://dev.mysql.com/downloads/file.php?id=456518\" rel=\"nofollow noreferrer\">dev.mysql.com/downloads/file.php?id=456518</a> - [Windows (x86, 32-bit), MSI Installer  5.6.24 286.7M] and I see the &quot;C:\\Program Files\\MySQL\\MySQL Workbench 6.2 CE\\MySQLWorkbech.exe&quot; as a 64bit process on task manager."}, {"owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "edited": false, "score": 0, "creation_date": 1430318776, "post_id": 29931872, "comment_id": 48015224, "body": "It&#39;s working! Can you give me some links where I can learn to start programming in rails? the basic hello world would do. thanks again :) a lot of steps for working on a language. hope they can make a 1 time installer like xampp."}], "tags": [], "owner": {"reputation": 9544, "user_id": 1657028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bf6fc65ae284258fabddf6da6a1c94c0?s=128&d=identicon&r=PG", "display_name": "Franco Rondini", "link": "https://stackoverflow.com/users/1657028/franco-rondini"}, "is_accepted": true, "score": 3, "last_activity_date": 1430315967, "last_edit_date": 1495542187, "creation_date": 1430264788, "answer_id": 29931872, "question_id": 29802504, "link": "https://stackoverflow.com/questions/29802504/installing-ruby-with-mysql2-on-windows-7-64-bit-returns-error-on-rails-s/29931872#29931872", "title": "installing ruby with mysql2 on windows 7 64 bit returns error on rails s", "body": "<p>Basically <a href=\"https://stackoverflow.com/a/5997158/1657028\">following the instructions in here</a>\n  I just completed an installation from zero to fully functional on Windows 7 64bit.</p>\n\n<p>In your case the problem may lie in the version of the gem <strong>mysql2</strong> or in the manner in which it was installed; you could start with uninstall and re-install the <code>0.2.6</code> version <a href=\"https://stackoverflow.com/a/23954582/1657028\">@see Gediminas answer</a> and check the GemFile if you have a different version.\nThis save me from troubles with specific: </p>\n\n<blockquote>\n  <p><code>--with-mysql-dir=.... --with-mysql-lib=....  --with-mysql-include=....</code></p>\n</blockquote>\n\n<hr>\n\n<p>Anyway I will detail each steps of my checklist so you can see if there are differences to your installation</p>\n\n<ul>\n<li><p>Installed <code>mysql-installer-community-5.6.24.0.msi</code>  from <a href=\"http://dev.mysql.com/downloads/mysql/\" rel=\"nofollow noreferrer\">http://dev.mysql.com/downloads/mysql/</a>\nIn my personal checklist \nthese are my selected component:\n<img src=\"https://i.stack.imgur.com/5Mezf.png\" alt=\"MySQL-Install-OptionSelected\">\n.. my choice for connectivity options:\n<img src=\"https://i.stack.imgur.com/B4JtV.png\" alt=\"enter image description here\">\n.. and account/security option: \n<img src=\"https://i.stack.imgur.com/PPJMn.png\" alt=\"enter image description here\"></p></li>\n<li><p>Installed Ruby <code>rubyinstaller-2.1.6.exe</code>from <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads/</a> </p></li>\n</ul>\n\n<p><em>Notice: according to <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads/</a> I select the 2.1.* ( not the last one) and I downloaded the standard 32-bit version because the 64-bit versions of Ruby are relatively new on the Windows area and not all the packages have been updated to be compatible with it. To use this version you will require some knowledge about compilers and solving dependency issues, which might be too complicated if you just want to play with the language.</em>  Also reading on the same page\n: <em>Ruby 2.0.0 and above -->: mingw64-32-4.7.2</em></p>\n\n<ul>\n<li>Installed Ruby Devkit <code>DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe</code> from <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads/</a> (extracted to <code>C:\\DevKit</code>)</li>\n<li>Don't forget to setup the <strong>DevKit</strong></li>\n</ul>\n\n<blockquote>\n<pre><code>cd C:\\DevKit \nruby dk.rb init \nruby dk.rb install \ndevkitvars.bat \n</code></pre>\n</blockquote>\n\n<ul>\n<li>Don't forget to copy <code>libmysql.dll</code> in my case, after installing mysql community 5.6 i found three different dll ( in dimension) with the same name:  </li>\n</ul>\n\n<blockquote>\n<pre><code>cd \\\nfind . -name \"libmysql.dll\"\n./Program Files/MySQL/MySQL Connector.C 6.1/lib/libmysql.dll\n./Program Files/MySQL/MySQL Server 5.6/lib/libmysql.dll\n./Program Files/MySQL/MySQL Workbench 6.2 CE/libmysql.dll``\n</code></pre>\n</blockquote>\n\n<p>Definitively i choose this option:</p>\n\n<blockquote>\n<pre><code>C:&gt;cd C:\\Ruby21\\bin&gt;\nC:\\Ruby21\\bin&gt; copy \"\\Program Files\\MySQL\\MySQL Server 5.6\\lib\\libmysql.dll\" .\n        1 file(s) copied.\n</code></pre>\n</blockquote>\n\n<ul>\n<li>I had some issue installing gems therefore i decided to update rubigems, <a href=\"http://help.rubygems.org/discussions/problems/17672-gems-not-installing-due-to-timeout\" rel=\"nofollow noreferrer\">this helps me a lot.</a></li>\n</ul>\n\n<blockquote>\n<pre><code>C:\\Ruby21\\bin&gt;gem update --system\n...\n[snip]\n...\nC:\\Ruby21\\bin&gt;gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.6\n  - RUBY VERSION: 2.1.6 (2015-04-13 patchlevel 336) [i386-mingw32]\n  - INSTALLATION DIRECTORY: C:/Ruby21/lib/ruby/gems/2.1.0\n  - RUBY EXECUTABLE: C:/Ruby21/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: C:/Ruby21/bin\n  - SPEC CACHE DIRECTORY: C:/Users/rondadev/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86-mingw32\n  - GEM PATHS:\n     - C:/Ruby21/lib/ruby/gems/2.1.0\n     - C:/Users/rondadev/.gem/ruby/2.1.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - C:\\DevKit\\bin\n     - C:\\DevKit\\mingw\\bin\n     - C:\\Ruby21\\bin\n     - C:\\Windows\\system32\n     - C:\\Windows\n     - C:\\Windows\\System32\\Wbem\n     - C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\\n     - C:\\Program Files (x86)\\Windows Kits\\8.1\\Windows Performance Toolkit\\\n     - C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\\n     - C:\\Program Files (x86)\\Microsoft SDKs\\TypeScript\\1.0\\\n     - C:\\Program Files (x86)\\MySQL\\MySQL Fabric 1.5.4\n</code></pre>\n</blockquote>\n\n<p>ready to install rails and create the first application:</p>\n\n<blockquote>\n<pre><code>gem install rails\n\ngem install mysql2 -v 0.2.6\n\nrails new test_app -d mysql\n</code></pre>\n</blockquote>\n\n<p>At the end the last steps:</p>\n\n<ol>\n<li><p>connected MySQL Workbench and created a new schema named\ntest_app_development (to create a new schema you can press the 4th icon in the tool bar with a cylinder and a plus sign ..see next screenshot)</p></li>\n<li><p>fixed username and password in config/database.yml as in <a href=\"https://stackoverflow.com/a/29802673/1657028\">sansarp\nanwser</a> \n<img src=\"https://i.stack.imgur.com/fdiiB.png\" alt=\"enter image description here\"></p></li>\n<li><p>Migrated the database </p></li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/6aTKX.png\" alt=\"MySQL Workbench and database migration\">\nafter migrate your schema should look like this:\n<img src=\"https://i.stack.imgur.com/U7ipG.png\" alt=\"enter image description here\"></p>\n\n<ol start=\"4\">\n<li><p>executed rails -s </p></li>\n<li><p>successfully opened in the browser <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a></p></li>\n</ol>\n\n<p>```</p>\n\n<pre><code>C:\\Projects\\test_app&gt;rake db:migrate --trace\nDL is deprecated, please use Fiddle\n** Invoke db:migrate (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:migrate\n** Invoke db:_dump (first_time)\n** Execute db:_dump\n** Invoke db:schema:dump (first_time)\n** Invoke environment\n** Invoke db:load_config\n** Execute db:schema:dump\n\nC:\\Projects\\test_app&gt;rails s\nDL is deprecated, please use Fiddle\n=&gt; Booting WEBrick\n=&gt; Rails 4.2.1 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[2015-04-29 00:20:21] INFO  WEBrick 1.3.1\n[2015-04-29 00:20:21] INFO  ruby 2.1.6 (2015-04-13) [i386-mingw32]\n[2015-04-29 00:20:21] INFO  WEBrick::HTTPServer#start: pid=4144 port=3000\n\n\nStarted GET \"/\" for ::1 at 2015-04-29 00:20:34 +0200\nProcessing by Rails::WelcomeController#index as HTML\n  Rendered C:/Ruby21/lib/ruby/gems/2.1.0/gems/railties-4.2.1/lib/rails/templates\n/rails/welcome/index.html.erb (0.0ms)\nCompleted 200 OK in 31ms (Views: 15.6ms | ActiveRecord: 0.0ms)\n</code></pre>\n"}], "owner": {"reputation": 1276, "user_id": 694464, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef5ff2ae986f40e00c48527492016e0c?s=128&d=identicon&r=PG", "display_name": "magicianiam", "link": "https://stackoverflow.com/users/694464/magicianiam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2465, "favorite_count": 1, "accepted_answer_id": 29931872, "answer_count": 2, "score": 1, "last_activity_date": 1430315967, "creation_date": 1429717221, "last_edit_date": 1495540719, "question_id": 29802504, "link": "https://stackoverflow.com/questions/29802504/installing-ruby-with-mysql2-on-windows-7-64-bit-returns-error-on-rails-s", "title": "installing ruby with mysql2 on windows 7 64 bit returns error on rails s", "body": "<p>I tried installing ruby on windows 7 and using mysql2</p>\n\n<p>downloaded the latest installer <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">here</a> for windows 7 64 bit\ndownloaded the Devkit and followed this steps found <a href=\"https://stackoverflow.com/questions/5996834/how-to-install-ruby-on-rails-with-mysql-and-get-it-working-a-step-by-step-guide\">here</a> for devkit installation</p>\n\n<p>did this <strong>gem install rails</strong></p>\n\n<p>downloaded mysql from <a href=\"http://dev.mysql.com/downloads/connector/c/\" rel=\"nofollow noreferrer\">here</a> following the instruction found <a href=\"https://stackoverflow.com/questions/19014117/ruby-mysql2-gem-installation-on-windows-7\">here</a></p>\n\n<p>now after everything is installed i created my app using this line</p>\n\n<p><strong>rails new test_app -d mysql</strong></p>\n\n<p>after changing my directory to my new app</p>\n\n<p>i ran this line <strong>rails s</strong></p>\n\n<p>and i got this error</p>\n\n<pre><code>C:\\Ruby22-x64\\my_test_app&gt;rails s\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/mysql2-0.3.18-x64-mingw32/lib/mysql2/mysq\nl2.rb:2:in `require': cannot load such file -- mysql2/2.2/mysql2 (LoadError)\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/mysql2-0.3.18-x64-mingw32/li\nb/mysql2/mysql2.rb:2:in `&lt;top (required)&gt;'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/mysql2-0.3.18-x64-mingw32/li\nb/mysql2.rb:31:in `require'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/mysql2-0.3.18-x64-mingw32/li\nb/mysql2.rb:31:in `&lt;top (required)&gt;'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler/ru\nntime.rb:76:in `require'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler/ru\nntime.rb:76:in `block (2 levels) in require'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler/ru\nntime.rb:72:in `each'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler/ru\nntime.rb:72:in `block in require'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler/ru\nntime.rb:61:in `each'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler/ru\nntime.rb:61:in `require'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.9.4/lib/bundler.rb\n:134:in `require'\n        from C:/Ruby22-x64/my_test_app/config/application.rb:7:in `&lt;top (require\nd)&gt;'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.1/lib/rails/com\nmands/commands_tasks.rb:78:in `require'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.1/lib/rails/com\nmands/commands_tasks.rb:78:in `block in server'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.1/lib/rails/com\nmands/commands_tasks.rb:75:in `tap'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.1/lib/rails/com\nmands/commands_tasks.rb:75:in `server'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.1/lib/rails/com\nmands/commands_tasks.rb:39:in `run_command!'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/railties-4.2.1/lib/rails/com\nmands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>what is it that I am missing here? mysql2 is inside my Gemfile.</p>\n\n<p>Though I have not connected my rails to my database or configured the database.yml since I cannot find any instructions on how to do that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "simple-form"], "comments": [{"owner": {"reputation": 1540, "user_id": 1245440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a2a573a8585a0e04eecd822955e9fbe?s=128&d=identicon&r=PG", "display_name": "Pramod Shinde", "link": "https://stackoverflow.com/users/1245440/pramod-shinde"}, "edited": false, "score": 0, "creation_date": 1429717495, "post_id": 29802497, "comment_id": 47733110, "body": "Your problem statement is not clear, can you make it better by some example?"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1429717872, "post_id": 29802497, "comment_id": 47733418, "body": "Include your controller code."}, {"owner": {"reputation": 471, "user_id": 4524405, "user_type": "registered", "accept_rate": 9, "profile_image": "https://lh5.googleusercontent.com/-fjErJCkTgpE/AAAAAAAAAAI/AAAAAAAAEA0/Yuvi6mOQONs/photo.jpg?sz=128", "display_name": "Gregory Frerot", "link": "https://stackoverflow.com/users/4524405/gregory-frerot"}, "edited": false, "score": 0, "creation_date": 1429742186, "post_id": 29802497, "comment_id": 47748363, "body": "I use devise(<a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise</a>) for user controller."}], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 1, "last_activity_date": 1429718608, "creation_date": 1429718608, "answer_id": 29803084, "question_id": 29802497, "link": "https://stackoverflow.com/questions/29802497/add-custom-field-from-foreign-table-and-validate-it/29803084#29803084", "title": "Add custom field from foreign table and validate it", "body": "<p>May this will help you,</p>\n\n<p>In <code>User</code> model add one extra attribute called <code>code</code>.</p>\n\n<pre><code>attr_accessor :code\n</code></pre>\n\n<p>and validate <code>:code</code> on <code>create</code> like, agent is present with expected code. </p>\n\n<pre><code>validates :code_validation, on: :create\ndef code_validation\n  c = Agent.find_by_code(code)\n  if c.present?\n     self.agent = c\n  else\n    errors.add(:code, \"Agent not found with this code\")\n  end  \nend\n</code></pre>\n"}], "owner": {"reputation": 471, "user_id": 4524405, "user_type": "registered", "accept_rate": 9, "profile_image": "https://lh5.googleusercontent.com/-fjErJCkTgpE/AAAAAAAAAAI/AAAAAAAAEA0/Yuvi6mOQONs/photo.jpg?sz=128", "display_name": "Gregory Frerot", "link": "https://stackoverflow.com/users/4524405/gregory-frerot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429718608, "creation_date": 1429717200, "last_edit_date": 1429717795, "question_id": 29802497, "link": "https://stackoverflow.com/questions/29802497/add-custom-field-from-foreign-table-and-validate-it", "title": "Add custom field from foreign table and validate it", "body": "<p>I have two models, a user model and an agent model. A User has one/zero Agent. Each agent has a \"code\" like a promo code.</p>\n\n<p>When a user signs up, they can optionally enter a agent code. When checking the form, if the user enters a code,  I have to check it based on the table \"agents.\" </p>\n\n<p>If the code is wrong, the form is not validated and an error appears, if the code is correct I associate the user with the agent.</p>\n\n<h3>User model (<em>user.rb</em>)</h3>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    enum role: [:user, :vip, :admin]\n    after_initialize :set_default_role, :if =&gt; :new_record?\n\n    has_one :agent\n\n    def set_default_role\n        self.role ||= :user\n    end\n\n    devise :database_authenticatable,\n         :registerable,\n         :recoverable,\n         :rememberable,\n         :trackable,\n         :validatable,\n         :confirmable,\n         :lockable\nend\n</code></pre>\n\n<h3>Agent model (<em>agent.rb</em>)</h3>\n\n<pre><code>class Agent &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n\n<h3>Migration between user and agent</h3>\n\n<pre><code>class AddAgentToUsers &lt; ActiveRecord::Migration\n    def change\n        add_reference :users, :agent, index: true\n        add_foreign_key :users, :agents\n    end\nend\n</code></pre>\n\n<h3>User DB</h3>\n\n<ul>\n<li>id</li>\n<li>email</li>\n<li>password,encrypted_password,...</li>\n<li>sign_in information (time,ip,...)</li>\n<li>agent_id</li>\n</ul>\n\n<h3>Agent DB</h3>\n\n<ul>\n<li>id</li>\n<li>code</li>\n<li>name</li>\n</ul>\n\n<p>How should I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "yard"], "comments": [{"owner": {"reputation": 5380, "user_id": 415409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/496e82f5d2f93aee67c4b8f3d271a45e?s=128&d=identicon&r=PG", "display_name": "ipd", "link": "https://stackoverflow.com/users/415409/ipd"}, "edited": false, "score": 0, "creation_date": 1453416368, "post_id": 29802318, "comment_id": 57604319, "body": "Is this simply a matter of getting Yard to recognize <code>*.rake</code> files as ruby?"}, {"owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "reply_to_user": {"reputation": 5380, "user_id": 415409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/496e82f5d2f93aee67c4b8f3d271a45e?s=128&d=identicon&r=PG", "display_name": "ipd", "link": "https://stackoverflow.com/users/415409/ipd"}, "edited": false, "score": 0, "creation_date": 1453454315, "post_id": 29802318, "comment_id": 57617555, "body": "I\u2019m afraid I haven\u2019t looked at this much since asking, but I suppose essentially it is, yes. However, actually <i>specifying</i> that they are Ruby with the <code># @markup ruby</code> directive doesn\u2019t work because it <i>only</i> renders the Ruby, i.e. it no longer processes documentation comments"}, {"owner": {"reputation": 2130, "user_id": 384052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0badad420e8e5ef6285e105e81766904?s=128&d=identicon&r=PG", "display_name": "benjamin", "link": "https://stackoverflow.com/users/384052/benjamin"}, "edited": false, "score": 0, "creation_date": 1453465230, "post_id": 29802318, "comment_id": 57624348, "body": "@Leo, does specifying the rake extension on the command line help? <i>yardoc *.rake -o out/</i> ?"}, {"owner": {"reputation": 2130, "user_id": 384052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0badad420e8e5ef6285e105e81766904?s=128&d=identicon&r=PG", "display_name": "benjamin", "link": "https://stackoverflow.com/users/384052/benjamin"}, "edited": false, "score": 0, "creation_date": 1453466603, "post_id": 29802318, "comment_id": 57625224, "body": "... and maybe using the <i>AT note</i> tag?"}, {"owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "reply_to_user": {"reputation": 2130, "user_id": 384052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0badad420e8e5ef6285e105e81766904?s=128&d=identicon&r=PG", "display_name": "benjamin", "link": "https://stackoverflow.com/users/384052/benjamin"}, "edited": false, "score": 0, "creation_date": 1453737192, "post_id": 29802318, "comment_id": 57721484, "body": "@benjamin just tried these, and I\u2019m afraid they don\u2019t seem to work. It works adding <code>lib&#47;tasks&#47;*.rake</code> to the <i>files</i> section of the <code>yardoc</code> command, but then it only reads them as text (as per the question). Adding them to the body of the command doesn\u2019t seem to generate anything for those files at all, i.e. nothing is listed in the Yard class/method/file lists, and there doesn\u2019t seem to be anything in the output <code>doc&#47;</code> directory. Anywhere else I should look for output?"}, {"owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "edited": false, "score": 0, "creation_date": 1453737985, "post_id": 29802318, "comment_id": 57722024, "body": "I\u2019ve added some more details on the YARD options I\u2019m using..."}], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 4971736, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KgCyeMyLLbQ/AAAAAAAAAAI/AAAAAAAAAao/22Fcz6rz8u0/photo.jpg?sz=128", "display_name": "BenJaminSila", "link": "https://stackoverflow.com/users/4971736/benjaminsila"}, "is_accepted": false, "score": 1, "last_activity_date": 1454019731, "creation_date": 1454019731, "answer_id": 35073284, "question_id": 29802318, "link": "https://stackoverflow.com/questions/29802318/how-do-i-document-rake-tasks-with-yard/35073284#35073284", "title": "How do I document Rake tasks with YARD?", "body": "<p>From <a href=\"http://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md#Using_YARD_to_Generate_Documentation\" rel=\"nofollow\">YARD</a> documentation:</p>\n\n<p>In the <strong>Getting Started Guide with YARD</strong> section under <strong>Using YARD to Generate Documentation</strong>, check out  <em>Documenting Extra Files</em> or <em>Adding Meta-Data to Extra Files</em>. It might help.</p>\n"}], "owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 3, "answer_count": 1, "score": 31, "last_activity_date": 1454019731, "creation_date": 1429716776, "last_edit_date": 1453737935, "question_id": 29802318, "link": "https://stackoverflow.com/questions/29802318/how-do-i-document-rake-tasks-with-yard", "title": "How do I document Rake tasks with YARD?", "body": "<p>I would like to include information on the Rake tasks in our Rails app. We use <a href=\"http://yardoc.org\">YARD</a> for documentation, and at the moment pages like <code>lib/tasks/development.rake</code> show up by default as unformatted text.</p>\n\n<p>I can make them render as Ruby source code using the <code># @markup ruby</code> <a href=\"http://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md#Adding_Meta-Data_to_Extra_Files\">from the YARD documentation</a>.</p>\n\n<p>However, this just renders any comments inline, even if they include YARD directives like <code># @!method foo</code>. This means <a href=\"http://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md#Documenting_DSL_Methods\">the YARD documentation on tagging DSLs</a> doesn\u2019t seem to be applicable.</p>\n\n<p>Am I missing something?</p>\n\n<p>How can I get YARD to recognise code vs documentation in <code>.rake</code> files?</p>\n\n<p>N.B. I would be happy with a solution that ignores the actual code and just generates documentation copy, but the source for the documentation copy must be the <code>.rake</code> file itself \u2013 I do not want documentation to live in a separate <code>.markdown</code> file (or whatever) as there\u2019s too much chance of it getting out of sync.</p>\n\n<p><strong>More info - the <code>yard</code> command:</strong></p>\n\n<p>I am using a <code>.yardopts</code> file containing the following:</p>\n\n<pre><code>--asset graphs 'app/**/*.rb' 'lib/**/*.rb' - README info/*\n</code></pre>\n\n<p>To get YARD to read the Rake tasks I can add <code>'lib/tasks/*.rake'</code> <em>after</em> the hyphen (i.e. add Rake files to the YARD \u2018Files\u2019 list), but as noted above this does not process them correctly.</p>\n\n<p>As per Benjamin\u2019s suggestion below, I tried adding <code>'lib/tasks/*.rake'</code> <em>before</em> the hyphen (i.e. add Rake files to the list of regular Ruby files to be processed), but this doesn\u2019t seem to generate anything at all.</p>\n\n<p>It is possible YARD is generating something but not in the expected location / with the expected filename I suppose, I\u2019m not familiar enough with how YARD works to figure out if there is orphaned output somewhere. There is certainly nothing appropriate coming up in the search that YARD generates, and a simple <code>find doc | grep rake</code> or <code>find doc | grep basename_of_rake_file</code> doesn\u2019t show anything.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 402, "user_id": 1471134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7q3y8.jpg?s=128&g=1", "display_name": "bodyfarmer", "link": "https://stackoverflow.com/users/1471134/bodyfarmer"}, "edited": false, "score": 0, "creation_date": 1429715963, "post_id": 29801851, "comment_id": 47731946, "body": "You need to understand Rails&#39;s Unobtrusive JavaScript. <a href=\"http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429716055, "post_id": 29801851, "comment_id": 47732033, "body": "Have you tried using <a href=\"http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">Rails with AJAX</a>?"}, {"owner": {"reputation": 11, "user_id": 4820086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf622ab6be99be4d1d25698ed410857?s=128&d=identicon&r=PG&f=1", "display_name": "Startsp", "link": "https://stackoverflow.com/users/4820086/startsp"}, "edited": false, "score": 0, "creation_date": 1429716579, "post_id": 29801851, "comment_id": 47732456, "body": "I am on it now, thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 221, "user_id": 1021163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ee291fdacfed607c169a03e3852274?s=128&d=identicon&r=PG", "display_name": "Jonathan Goodman", "link": "https://stackoverflow.com/users/1021163/jonathan-goodman"}, "is_accepted": false, "score": 0, "last_activity_date": 1429723801, "creation_date": 1429723801, "answer_id": 29804917, "question_id": 29801851, "link": "https://stackoverflow.com/questions/29801851/simplest-way-to-add-message-after-validation-fails/29804917#29804917", "title": "Simplest way to add message after validation fails", "body": "<p>As the validations set in your models are server side you wont receive a flash messages until you submit the form. As suggested by others there might be a way of doing this using AJAX however you could use JavaScript to watch elements of your form and create flash messages of your own to validate on the client side.</p>\n\n<p>HTML5 introduced new input attributes such as <code>required</code> and <code>pattern</code> that you could also use to validate value set in an <code>input</code> element.</p>\n\n<p>EG <code>&lt;input type=\"text\" name=\"firstname\" required /&gt;</code></p>\n\n<p>If someone tried to submit the form without putting a value in the firstname input a little error message would show up. No hard work here, nice.</p>\n\n<p>The pattern attribute takes any regular expression as it's value so you can be as specific as you like as to what the value should be.</p>\n\n<p>EG <code>&lt;input type=\"text\" name=\"firstname\" pattern=\"^[A-Z]{1}[a-z]{1,20}$\" /&gt;</code></p>\n\n<p>This would only allow a 1-20 letter word beginning with a capital letter and display an error message on submit if not. (No server request is made).</p>\n\n<p>I like this addition to HTML 5 and is a good way of doing client side validation. Server side validation in your models is most important as any client side validation can be avoided by a visitor turning off JavaScript in their browser or editing the page source.</p>\n\n<p>You can use CSS to style the input box in different ways with these new attributes too.</p>\n\n<p>EG <code>input:required:invalid { border: 1px solid red; }</code></p>\n\n<p><a href=\"http://www.the-art-of-web.com/html/html5-form-validation/\" rel=\"nofollow\">Found this helpful resource here \u203a</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4820086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf622ab6be99be4d1d25698ed410857?s=128&d=identicon&r=PG&f=1", "display_name": "Startsp", "link": "https://stackoverflow.com/users/4820086/startsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429723801, "creation_date": 1429715547, "last_edit_date": 1429715773, "question_id": 29801851, "link": "https://stackoverflow.com/questions/29801851/simplest-way-to-add-message-after-validation-fails", "title": "Simplest way to add message after validation fails", "body": "<p>What is best and simplest way to add message(<strong>without refreshing page</strong>) when I try to save something to database and validation fails?</p>\n\n<p>Can I do it with flash message?</p>\n"}, {"tags": ["ruby", "ssl", "websocket", "faye"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1429715565, "post_id": 29801789, "comment_id": 47731645, "body": "You&#39;re asking for <code>wss</code>, so are you getting it?"}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1429763386, "post_id": 29801789, "comment_id": 47755001, "body": "No, write now i am getting : - terminate called after throwing an instance of &#39;std::runtime_error&#39;   what():  Encryption not available on this event-machine  This application has requested the Runtime to terminate it in an unusual way. Please contact the application&#39;s support team for more information."}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429764466, "post_id": 29801789, "comment_id": 47755338, "body": "I have working websocket server which allows only secure connections."}], "answers": [{"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 0, "last_activity_date": 1519413805, "last_edit_date": 1519413805, "creation_date": 1437453605, "answer_id": 31530504, "question_id": 29801789, "link": "https://stackoverflow.com/questions/29801789/secure-websocket-client-in-ruby/31530504#31530504", "title": "secure Websocket client in ruby", "body": "<p><strong>EDIT 2018</strong>:</p>\n\n<p>This answer is outdated.</p>\n\n<p>The iodine server was re-written as a C extension and neither the Websocket client nor the SSL/TLS layer have been implemented in Ruby just yet (SSL/TLS tunneling is currently the recommended way to achieve encryption).  </p>\n\n<hr>\n\n<p>You can use probably use <a href=\"https://github.com/boazsegev/iodine\" rel=\"nofollow noreferrer\">Iodine's websocket client</a> if it's a simple connection (you can add query parameters, cookies and headers to the request, if you need them)... Fair notice, I am the author of the Iodine gem.</p>\n\n<p>It should be simple:</p>\n\n<pre><code># load the Http extension which includes a websocket client and server\nrequire 'iodine/http'\n# As long as Iodine.protocol isn't a Class, Iodine will only perform tasks\nIodine.protocol = :timers\n\n# We will use this as our 'on_open' callback.\non_open_proc = Proc.new do\n     puts 'Connection opened'\n     # `#write` is defined in the WebsocketClient\n     # This Proc runs within the instance's context.\n     # It's like defining a method in a subclass.\n     write 'Hello World!'\nend\n# We will use this as our 'on_message(data)' callback.\non_message_proc = Proc.new {|data| puts data }\n# We will use this as our 'on_close' callback.\n# It's only called if the connection isn't automatically renewed.\n# In our case, unless the server shuts down, it won't be called.\non_close_proc = Proc.new { puts \"Connection wasn't renewed...\" }\n# We will use this for \"polling\" data.\non_timer_proc = Proc.new { write \"The time is #{Time.now}\" }\n\n# test client:\nIodine::Http.ws_connect 'wss://echo.websocket.org',\n       on_message: on_message_proc,\n       on_open: on_open_proc,\n       on_close: on_close_proc,\n       every: 5, send: on_timer_proc,\n       renew: 5,\n       cookies: {'my_cookie' =&gt; 'value of my cookie'} #,\n       # ssl_key: 'key_data', ssl_cert: 'cert_data'\n\n# If you are running Iodine within irb, use `exit`:\nexit \n\n# If you are running Iodine within an existing server application,\n# you will have to force it to start while your script is running:\n# Iodine.force_start!\n</code></pre>\n\n<p>The websocket echo server answers me on SSL... So I hope this will help you.</p>\n\n<p><strong>EDIT</strong> This answer was edited since Iodine inherited GRHttp's codebase and is in active development, whereas GRHttp is no longer in active development.</p>\n"}], "owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1167, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1519413805, "creation_date": 1429715379, "last_edit_date": 1430726129, "question_id": 29801789, "link": "https://stackoverflow.com/questions/29801789/secure-websocket-client-in-ruby", "title": "secure Websocket client in ruby", "body": "<p>How can I make a secure (TLS) websocket client connection using Faye-websocket in Ruby?</p>\n\n<p>I am using faye/websocket gem in my script.</p>\n\n<pre><code>    require 'faye/websocket'\n    require 'eventmachine'\n\n    EM.run {\n      ws = Faye::WebSocket::Client.new('wss://aws.com/gateway',:ssl =&gt; {\n    :private_key_file =&gt; 'path/to/ssl.key',\n    :cert_chain_file  =&gt; 'path/to/ssl.crt'\n  }, :headers =&gt; { 'Authorization' =&gt; 'Basic bXl1c2VyOm15cGFzc3dvcmQ='})\n\n      ws.on :open do |event|\n        p [:open]\n        ws.send('Hello, world!')\n      end\n\n      ws.on :message do |event|\n        p [:message, event.data]\n      end\n\n      ws.on :close do |event|\n        p [:close, event.code, event.reason]\n        ws = nil\n      end\n    }\n</code></pre>\n"}, {"tags": ["javascript", "html", "ruby", "angularjs", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 4452571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30f8e0b223d3060804a55efed11bf1f5?s=128&d=identicon&r=PG&f=1", "display_name": "mefe", "link": "https://stackoverflow.com/users/4452571/mefe"}, "edited": false, "score": 0, "creation_date": 1429715721, "post_id": 29801859, "comment_id": 47731757, "body": "My <code>if</code> condition works fine, problem is within calling function. Unfortunately, ng-click doesn&#39;t work for me."}, {"owner": {"reputation": 262, "user_id": 4205066, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kGBIb.jpg?s=128&g=1", "display_name": "Ravi Babu Karikati", "link": "https://stackoverflow.com/users/4205066/ravi-babu-karikati"}, "reply_to_user": {"reputation": 197, "user_id": 4452571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30f8e0b223d3060804a55efed11bf1f5?s=128&d=identicon&r=PG&f=1", "display_name": "mefe", "link": "https://stackoverflow.com/users/4452571/mefe"}, "edited": false, "score": 0, "creation_date": 1429718873, "post_id": 29801859, "comment_id": 47734184, "body": "U have to use ng-app,ng-controller and then only call ng-click. Then only it works.."}, {"owner": {"reputation": 197, "user_id": 4452571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30f8e0b223d3060804a55efed11bf1f5?s=128&d=identicon&r=PG&f=1", "display_name": "mefe", "link": "https://stackoverflow.com/users/4452571/mefe"}, "edited": false, "score": 0, "creation_date": 1429719170, "post_id": 29801859, "comment_id": 47734404, "body": "Whole code is in ng-app and ng-controller which has function I need to call."}], "tags": [], "owner": {"reputation": 262, "user_id": 4205066, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kGBIb.jpg?s=128&g=1", "display_name": "Ravi Babu Karikati", "link": "https://stackoverflow.com/users/4205066/ravi-babu-karikati"}, "is_accepted": false, "score": 0, "last_activity_date": 1429715571, "creation_date": 1429715571, "answer_id": 29801859, "question_id": 29801739, "link": "https://stackoverflow.com/questions/29801739/angularjs-ror-call-controllers-function-from-html/29801859#29801859", "title": "AngularJS + RoR: call controller&#39;s function from HTML", "body": "<p>You have to use ng-click directive to call this function in html</p>\n\n<pre><code>ng-click=\"onLoginClicked()\"\n</code></pre>\n\n<p>and for If condition also u can use ng-if instead of normal if in html</p>\n\n<p>ng-if =\"true\"</p>\n"}], "owner": {"reputation": 197, "user_id": 4452571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30f8e0b223d3060804a55efed11bf1f5?s=128&d=identicon&r=PG&f=1", "display_name": "mefe", "link": "https://stackoverflow.com/users/4452571/mefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429715571, "creation_date": 1429715279, "question_id": 29801739, "link": "https://stackoverflow.com/questions/29801739/angularjs-ror-call-controllers-function-from-html", "title": "AngularJS + RoR: call controller&#39;s function from HTML", "body": "<p>I need to call function from AngularJS controller in my HTML template. My HTML (Slim) code looks like that:</p>\n\n<pre><code>- if !flash.empty?\n  p true\n  | {{ onLoginClicked() }}\n</code></pre>\n\n<p>When <code>if</code> statement is true I need to call function <code>onLoginClicked()</code> while page is loading (when login error occurs), so only once per refresh.</p>\n"}, {"tags": ["ruby", "json", "parsing", "csv"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1429714758, "post_id": 29801491, "comment_id": 47731052, "body": "<a href=\"http://stackoverflow.com/q/7085595/438992\">stackoverflow.com/q/7085595/438992</a> E.g., open in append mode, not write mode."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4819962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kbuMHqqg_nY/AAAAAAAAAAI/AAAAAAAAA7M/M1Jgx5Bedwg/photo.jpg?sz=128", "display_name": "jcarapet", "link": "https://stackoverflow.com/users/4819962/jcarapet"}, "edited": false, "score": 0, "creation_date": 1429728428, "post_id": 29801572, "comment_id": 47740543, "body": "nail on the head. Fixed things perfectly."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 15, "user_id": 4819962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kbuMHqqg_nY/AAAAAAAAAAI/AAAAAAAAA7M/M1Jgx5Bedwg/photo.jpg?sz=128", "display_name": "jcarapet", "link": "https://stackoverflow.com/users/4819962/jcarapet"}, "edited": false, "score": 0, "creation_date": 1429728866, "post_id": 29801572, "comment_id": 47740824, "body": "@jcarapet Glad I could help!"}], "tags": [], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "is_accepted": true, "score": 1, "last_activity_date": 1489885334, "last_edit_date": 1489885334, "creation_date": 1429714838, "answer_id": 29801572, "question_id": 29801491, "link": "https://stackoverflow.com/questions/29801491/append-new-lines-to-a-csv-from-json-parse/29801572#29801572", "title": "Append new lines to a csv from json.parse", "body": "<p>You declared your file like this:</p>\n\n<pre><code>delim_file = CSV.open(\"delimited_test.csv\", \"w\")\n</code></pre>\n\n<p>To fix your issue, all you have to do is change <code>\"w\"</code> to <code>\"a\"</code>:</p>\n\n<pre><code>delim_file = CSV.open(\"delimited_test.csv\", \"a\")\n</code></pre>\n\n<p>See the docs for <a href=\"http://ruby-doc.org/core-2.2.2/IO.html#method-c-new\" rel=\"nofollow noreferrer\"><code>IO#new</code></a> for a description of the available file modes. In short, <code>w</code> creates an empty file at the filename, overwriting anyothers, and writes to that. <code>a</code> only creates the file if it doesn't exist, and appends otherwise. Because you have it currently at <code>w</code>, it'll overwrite it each time you run the script. With <code>a</code>, it'll append to what's already there.</p>\n"}, {"tags": [], "owner": {"reputation": 1540, "user_id": 1245440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a2a573a8585a0e04eecd822955e9fbe?s=128&d=identicon&r=PG", "display_name": "Pramod Shinde", "link": "https://stackoverflow.com/users/1245440/pramod-shinde"}, "is_accepted": false, "score": 0, "last_activity_date": 1429716781, "creation_date": 1429716781, "answer_id": 29802324, "question_id": 29801491, "link": "https://stackoverflow.com/questions/29801491/append-new-lines-to-a-csv-from-json-parse/29802324#29802324", "title": "Append new lines to a csv from json.parse", "body": "<p>You need to open file in append mode, use</p>\n\n<pre><code>delim_file = CSV.open(\"delimited_test.csv\", \"a\") \n</code></pre>\n\n<p><code>'a' Write-only, starts at end of file if file exists, otherwise creates a new file for writing.</code></p>\n\n<p><code>'a+' Read-write, starts at end of file if file exists, otherwise creates a new file for reading and writing'</code></p>\n"}], "owner": {"reputation": 15, "user_id": 4819962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kbuMHqqg_nY/AAAAAAAAAAI/AAAAAAAAA7M/M1Jgx5Bedwg/photo.jpg?sz=128", "display_name": "jcarapet", "link": "https://stackoverflow.com/users/4819962/jcarapet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 29801572, "answer_count": 2, "score": 0, "last_activity_date": 1489885334, "creation_date": 1429714625, "last_edit_date": 1495542731, "question_id": 29801491, "link": "https://stackoverflow.com/questions/29801491/append-new-lines-to-a-csv-from-json-parse", "title": "Append new lines to a csv from json.parse", "body": "<p>more sysadmin (chef) than ruby guy, so this may be a five minute fix. \nI am working on a task where i write a ruby script that pulls json data from multiple files, parses it, and writes the desired fields to a single .csv file. Basically pulling metadata about aws accounts and putting it in an accountant friendly format. </p>\n\n<p>Got a lot of help from another stackoverflow on how to solve the problem for a single file, <a href=\"https://stackoverflow.com/questions/21737040/ruby-extracting-fields-from-nested-json\">json.parse help</a>.</p>\n\n<p>My issue is that I am trying to pull the same data from multiple JSON files in an array. I can get it to loop through each file with the code below. </p>\n\n<pre><code>require 'csv'\nrequire \"json\"\n\ndelim_file = CSV.open(\"delimited_test.csv\", \"w\")\naws_account_list = %w(example example2)\naws_account_list.each do |account|\njson_file = File.read(account.to_s + \"_aws.json\")\nparsed_json = JSON.parse(json_file)\n\ndelim_file = CSV.open(\"delimited_test.csv\", \"w\")\n# This next line could be a problem if you ran this code multiple times\ndelim_file &lt;&lt; [\"EbsOptimized\", \"PrivateDnsName\", \"KeyName\",               \"AvailabilityZone\", \"OwnerId\"]\nparsed_json['Reservations'].each do |inner_json|\ninner_json['Instances'].each do |instance_json|\n   delim_file &lt;&lt; [[instance_json['EbsOptimized'].to_s,   instance_json['PrivateDnsName'], instance_json['KeyName'], instance_json['Placement']['AvailabilityZone'], inner_json['OwnerId']],[]]\n end\n delim_file.close\nend\n\nend\n</code></pre>\n\n<p>However, whenever I do it, it overwrites every time to the same single row in the .csv file. I have tried adding a \\n string to the end of the array, converting the array to a string with hashes and doing a \\n, but all that does is add a line to the same row that it overwrites. </p>\n\n<p>How would I go about writing that it reads each json file, then appending each files metadata to a new row? This looks like a simple case of writing the right loop, but I can't figure it out. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "model-view-controller", "form-submit"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4714987, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fe4dd8a6e666aecacf8bbc27699df217?s=128&d=identicon&r=PG&f=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4714987/jarvis"}, "edited": false, "score": 0, "creation_date": 1429714944, "post_id": 29801431, "comment_id": 47731176, "body": "Thank you and Yes that would used in multiple controllers.So, that create method would be in Notification controller ? and Do I need a route for that ? If possible could you give me a small snippet."}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "reply_to_user": {"reputation": 143, "user_id": 4714987, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fe4dd8a6e666aecacf8bbc27699df217?s=128&d=identicon&r=PG&f=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4714987/jarvis"}, "edited": false, "score": 0, "creation_date": 1429715736, "post_id": 29801431, "comment_id": 47731769, "body": "No there would be no second route, the form would post to Invitations create and in there you would directly create the Notification via the model method. You would never go to two controller actions from a post."}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "reply_to_user": {"reputation": 143, "user_id": 4714987, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fe4dd8a6e666aecacf8bbc27699df217?s=128&d=identicon&r=PG&f=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4714987/jarvis"}, "edited": false, "score": 0, "creation_date": 1429715827, "post_id": 29801431, "comment_id": 47731839, "body": "When I said multiple controllers, I meant if you need to create a Notification across multiple controllers - for example if you had Invitation and Rsvp models/controllers, and both of them needed a notification, you could create a shared method that can be used in those two controllers. That method would create the notification directly via the model."}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 1, "creation_date": 1429777280, "post_id": 29801431, "comment_id": 47762122, "body": "If using a concern, you&#39;ll need to include it in your controller.<code>include Notifications</code>"}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1429782581, "post_id": 29801431, "comment_id": 47766014, "body": "Whoops, you&#39;re right of course, thanks. I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": true, "score": 0, "last_activity_date": 1429782552, "last_edit_date": 1429782552, "creation_date": 1429714506, "answer_id": 29801431, "question_id": 29801311, "link": "https://stackoverflow.com/questions/29801311/call-2-post-controller-methods-on-single-form-submission-in-rails/29801431#29801431", "title": "Call 2 post controller methods on single form submission in rails", "body": "<p>You wouldn't go to the notifications create action, you would just do it in the Invitation create. The below code will use a shared concern method, explained below it:</p>\n\n<pre><code>class InvitationsController &lt; ApplicationController\n    include Notifications\n\n    #....\n\n    def create\n        invitation = Invitiation.create(invitation_params)\n        create_notification(invitation)\n    end\n\n    private\n\n    def invitation_params\n        # strong params code\n    end\nend\n</code></pre>\n\n<p>So if you had a second controller/model, e.g Rsvp:</p>\n\n<pre><code>class RsvpsController &lt; ApplicationController\n    include Notifications\n\n    #....\n\n    def create\n        rsvp = Rsvp.create(rsvp_params)\n        create_notification(rsvp)\n    end\n\n    private\n\n    def rsvp_params\n        # strong params code\n    end\nend\n</code></pre>\n\n<p>Then in controllers/concerns directory, you could create a file 'notifications.rb'</p>\n\n<pre><code>module Notifications\n  extend ActiveSupport::Concern\n\n  def create_notification(object)\n    Notification.create(object_id: object.id, object_type: object_type)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4714987, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fe4dd8a6e666aecacf8bbc27699df217?s=128&d=identicon&r=PG&f=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4714987/jarvis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 29801431, "answer_count": 1, "score": -1, "last_activity_date": 1429782552, "creation_date": 1429714236, "last_edit_date": 1429718596, "question_id": 29801311, "link": "https://stackoverflow.com/questions/29801311/call-2-post-controller-methods-on-single-form-submission-in-rails", "title": "Call 2 post controller methods on single form submission in rails", "body": "<p>I have a use case where I need to create 2 tuples ( one in Invitation and one in Notification table) on single form submission( action is directed to Invitation#create).\nHow do I call the Notification create method from Invitation create to create a new tuple in  Notification table. </p>\n\n<p>PS: No relation between Invitation and Notification.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "polymorphic-associations", "model-associations"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1429715650, "post_id": 29801236, "comment_id": 47731711, "body": "Why aren&#39;t you saving <code>@ca</code>?"}, {"owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429716142, "post_id": 29801236, "comment_id": 47732114, "body": "Sorry @tadman , you&#39;re right, it was a typo ! I corrected it, Thanks !"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429716184, "post_id": 29801236, "comment_id": 47732152, "body": "Follow-up question is then if the <code>CategoryAssociation</code> record is saved correctly or not. Remember, always look at the queries generated in <code>log&#47;development.log</code> to see if they make sense."}, {"owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429716616, "post_id": 29801236, "comment_id": 47732478, "body": "Yes, it is: I can even get Event through <code>CategoryAssociation.first.categorized</code> !"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429717201, "post_id": 29801236, "comment_id": 47732900, "body": "If both <code>@e</code> and <code>@ca</code> are saved, this should be working. What query does the <code>@e.category_associations</code> generate? I think your problem&#39;s there."}, {"owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429717705, "post_id": 29801236, "comment_id": 47733285, "body": "I can&#39;t get any SQL request: each time I request it from console, I get the empty array result without any new log line :/"}, {"owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429717724, "post_id": 29801236, "comment_id": 47733300, "body": "(Thanks for helping BTW !)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1429717839, "post_id": 29801236, "comment_id": 47733388, "body": "It&#39;s usually best to put this sort of thing into model tests so you can verify the functionality not only right now, but going forward when you&#39;re making changes. That also makes it easy to run and re-run code to ensure it&#39;s working correctly. As to why it&#39;s not generating a query, that seems odd. You&#39;re using the current version of Rails?"}, {"owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429717989, "post_id": 29801236, "comment_id": 47733492, "body": "Unfortunately I&#39;m not allowed to spend time on tests :/  (Just to waste some on not-working code...) I&#39;m using Ruby 2.0.0p594 and Rails 3.2.13"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429718346, "post_id": 29801236, "comment_id": 47733770, "body": "Tests aren&#39;t a waste of time if they get things done quicker. Even a throw-away test would save you a lot of hassle here vs. running and re-running code in the console. You probably want to patch that Rails as well, I&#39;m pretty sure 3.2.13 is dangerously vulnerable and 3.2.21 is current. A service like <a href=\"http://gemcanary.com/\" rel=\"nofollow noreferrer\">Gem Canary</a> helps a ton with this sort of maintenance. In any case, that code <i>should</i> generate a query."}, {"owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429718546, "post_id": 29801236, "comment_id": 47733938, "body": "Ho no, sorry, I used &quot;waste&quot; on not-working code and &quot;spend&quot; on tests: I&#39;m VERY convinced of tests !!"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1429718649, "post_id": 29803057, "comment_id": 47734015, "body": "Ah, of course. In the console you&#39;ll need to call <code>reload!</code> if you change your models."}], "tags": [], "owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "is_accepted": true, "score": 2, "last_activity_date": 1429718552, "creation_date": 1429718552, "answer_id": 29803057, "question_id": 29801236, "link": "https://stackoverflow.com/questions/29801236/understanding-polymorphic-associations-the-right-way/29803057#29803057", "title": "Understanding polymorphic associations the right way", "body": "<p>Thanks to tadman questions, especially the one asking me to check my ruby version, I had to quit my console and restart it.\nI didn't do anything else but my association is now both ways !</p>\n\n<p>I'm gonna try to reproduce this but for now, my problem is solved...</p>\n"}], "owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29803057, "answer_count": 1, "score": 1, "last_activity_date": 1429718552, "creation_date": 1429714066, "last_edit_date": 1429716094, "question_id": 29801236, "link": "https://stackoverflow.com/questions/29801236/understanding-polymorphic-associations-the-right-way", "title": "Understanding polymorphic associations the right way", "body": "<p>I've tried to set up a polymorphic association in an app, but when I test it out, I seem to be able to retreive my association only from one way:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  has_many :category_associations, :as =&gt; :categorized\nend\n\nclass CategoryAssociation &lt; ActiveRecord::Base\n  belongs_to :categorized, :polymorphic =&gt; true\nend\n</code></pre>\n\n<p>Now, in console, I created some CategoryAssociations (one being @ca ) and an Event ( @e ).\nI could then do</p>\n\n<pre><code>@ca.categorized = @e\n@ca.save\n</code></pre>\n\n<p>My problem is, if I load my event and try a <code>@e.category_associations</code> I get an empty array ... but when I try loading my @ca and do a <code>@ca.categorized</code>, I get my event !!</p>\n\n<p>Are polymorphic associations one way only ?\nOr what am I missing ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "module"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1429713908, "post_id": 29801033, "comment_id": 47730348, "body": "your example doesn&#39;t make sense.  You&#39;re calling Person.first yet your error is in reference to a user class"}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1429713990, "post_id": 29801033, "comment_id": 47730419, "body": "Person has a column <code>type</code>, which references to <code>User</code>. Single table inheritance"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 0, "creation_date": 1429714129, "post_id": 29801033, "comment_id": 47730552, "body": "Might be worth including your exact class definitions. Are you defining the classes with, for example <code>class Module2::Person &lt; Module2::User</code> and <code>class Module2::User</code>?"}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1429714949, "post_id": 29801033, "comment_id": 47731178, "body": "No, I&#39;m doing like <code>module Module1 class User end end</code>, so, ended up like <code>class User &lt; Module2::User</code>"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1429715573, "post_id": 29801033, "comment_id": 47731651, "body": "would help if you showed your module and class definitions within your question, rather than just the structure"}], "answers": [{"tags": [], "owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "is_accepted": true, "score": 0, "last_activity_date": 1429719891, "creation_date": 1429719891, "answer_id": 29803560, "question_id": 29801033, "link": "https://stackoverflow.com/questions/29801033/activerecord-cant-recognize-the-correct-class-when-inside-folders/29803560#29803560", "title": "activerecord can&#39;t recognize the correct class when inside folders", "body": "<p>Just solved using <a href=\"https://github.com/nthj/ignorable\" rel=\"nofollow\">Ignorable</a> gem. Didn't need the STI in this case, is a legacy database</p>\n"}], "owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 29803560, "answer_count": 1, "score": 1, "last_activity_date": 1429719891, "creation_date": 1429713616, "last_edit_date": 1429714060, "question_id": 29801033, "link": "https://stackoverflow.com/questions/29801033/activerecord-cant-recognize-the-correct-class-when-inside-folders", "title": "activerecord can&#39;t recognize the correct class when inside folders", "body": "<p>I have the current structure</p>\n\n<pre><code>Module1\n  Interactions\n  User\n\nModule2\n  Interactions\n  Person\n  User &lt; Person\n</code></pre>\n\n<p>when I load the user from module1, with <code>Module1::User.first</code>, the User is loaded correctly but when I try load the user from module2 (<code>Module2::Person.first</code>) I got <code>Unable to autoload constant User, expected module1/user.rb to define it</code>. How can I get this to work?  </p>\n\n<p>Edit: <code>Person</code> has a column <code>type</code>, with the value \"User\". STI</p>\n"}, {"tags": ["ruby", "database", "web-applications"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429713503, "post_id": 29800892, "comment_id": 47729961, "body": "Looks like you&#39;re type casting your value to an integer, which would mean <code>nil</code> is typecast to <code>0</code> when inserted."}, {"owner": {"reputation": 108, "user_id": 757696, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/aaa09ea0e5f9db046682f69a1607c4a7?s=128&d=identicon&r=PG", "display_name": "DaniG", "link": "https://stackoverflow.com/users/757696/danig"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429714537, "post_id": 29800892, "comment_id": 47730901, "body": "Can I change this behavior ?"}], "owner": {"reputation": 108, "user_id": 757696, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/aaa09ea0e5f9db046682f69a1607c4a7?s=128&d=identicon&r=PG", "display_name": "DaniG", "link": "https://stackoverflow.com/users/757696/danig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1429713291, "creation_date": 1429713291, "question_id": 29800892, "link": "https://stackoverflow.com/questions/29800892/rails-with-angular-null-value-change-to-0", "title": "Rails with angular - null value change to 0", "body": "<p>When I update some field with null value, 0 appear. DB: Postgres</p>\n\n<p>Angular put request </p>\n\n<pre><code>------WebKitFormBoundarygQGLt12slBC759GB\nContent-Disposition: form-data; name=\"product[gender]\"\nnull\n</code></pre>\n\n<p>The field:</p>\n\n<pre><code>:gender, 'integer USING CAST(gender AS integer)', {default: nil, null: true}\n</code></pre>\n\n<p>result:\n<img src=\"https://i.stack.imgur.com/Mn6jE.png\" alt=\"db postgres field\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 4551003, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/219ce5bf5c31053cc00ceb66d4e865f6?s=128&d=identicon&r=PG&f=1", "display_name": "tisokoro", "link": "https://stackoverflow.com/users/4551003/tisokoro"}, "edited": false, "score": 0, "creation_date": 1429714816, "post_id": 29801157, "comment_id": 47731103, "body": "I checked the forum and some people were also experiencing a similar issue. I got it to work now though by clicking on the button. Thanks!"}], "tags": [], "owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1429713899, "creation_date": 1429713899, "answer_id": 29801157, "question_id": 29800690, "link": "https://stackoverflow.com/questions/29800690/codeschool-apis-with-rails-asserting-response-location-is-the-same-as-the-spec/29801157#29801157", "title": "CodeSchool APIs with Rails - Asserting response location is the same as the specific URL", "body": "<p>You actually have it right ... I believe there's something screwy with their code on this particular challenge. </p>\n\n<p>I just ran through it and had to click the \"check my work\" button on the bottom of the page. Once I clicked that button, it told me I had completed it, etc. However, if I used the \"normal\" CMD+Enter, it gave me the same error as you received. </p>\n"}], "owner": {"reputation": 247, "user_id": 4551003, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/219ce5bf5c31053cc00ceb66d4e865f6?s=128&d=identicon&r=PG&f=1", "display_name": "tisokoro", "link": "https://stackoverflow.com/users/4551003/tisokoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429713899, "creation_date": 1429712778, "question_id": 29800690, "link": "https://stackoverflow.com/questions/29800690/codeschool-apis-with-rails-asserting-response-location-is-the-same-as-the-spec", "title": "CodeSchool APIs with Rails - Asserting response location is the same as the specific URL", "body": "<p>I'm doing CodeSchool Surviving APIs with Rails and I'm stuck on a challenge. The question asks \"Now, assert the Location response header is a URL that points to the newly created human resource. You will need to parse the response body, so check the test/test_helper.rb file on the secondary tab for a helper method that can help you save some time.\" The error message I get is \"Make sure that you assert the response location is the same as the humans human_url!\" Below is the code I have so far.</p>\n\n<pre><code> class CreatingHumansTest &lt; ActionDispatch::IntegrationTest\n  test 'creates human' do  \n    post '/humans', { human: { name: 'John', brain_type: 'small' } }.to_json,\n      { 'Accept' =&gt; Mime::JSON, 'Content-Type' =&gt; Mime::JSON.to_s }\n\n    assert_equal 201, response.status\n    assert_equal Mime::JSON, response.content_type\n    human = json(response.body)\n    assert_equal human_url(human[:id]), response.location\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "nokogiri", "libxml2"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1430432568, "post_id": 29800482, "comment_id": 48077194, "body": "Welcome to Stack Overflow. Have you read through the various similar questions in the &quot;Related&quot; links on the lower right of this page? What happened when you tried those things?"}], "answers": [{"tags": [], "owner": {"reputation": 1358, "user_id": 2385217, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bd10572a2009c613bef5244ee24c5a8f?s=128&d=identicon&r=PG&f=1", "display_name": "sansarp", "link": "https://stackoverflow.com/users/2385217/sansarp"}, "is_accepted": false, "score": 0, "last_activity_date": 1429712781, "creation_date": 1429712781, "answer_id": 29800692, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8/29800692#29800692", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<p>Try this one:</p>\n\n<pre><code>gem install nokogiri -- --with-xml2-include=/usr/include/libxml2/libxml --with-xml2-lib=/usr/lib64/ --with-sxlt-include=/usr/include/libxslt --with-xslt-lib=/usr/lib64/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1430432411, "last_edit_date": 1430432411, "creation_date": 1429714065, "answer_id": 29801234, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8/29801234#29801234", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<p>I know it sounds silly, but try putting Nokogiri at the top of your Gemfile. This works in some cases where other gems conflict on native extensions</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 2848368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b0c78b780f174cab9ceac93ae82da5?s=128&d=identicon&r=PG", "display_name": "Jonny", "link": "https://stackoverflow.com/users/2848368/jonny"}, "is_accepted": false, "score": 5, "last_activity_date": 1446037890, "creation_date": 1446037890, "answer_id": 33391982, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8/33391982#33391982", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<p>Try running:</p>\n\n<p><code>gem update --system</code> &amp; <code>gem pristine nokogiri</code></p>\n\n<p>Just worked for me.</p>\n"}, {"comments": [{"owner": {"reputation": 1984, "user_id": 296639, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1566633c958fd7cd2925e25390e33ff3?s=128&d=identicon&r=PG", "display_name": "Simon B.", "link": "https://stackoverflow.com/users/296639/simon-b"}, "edited": false, "score": 1, "creation_date": 1516483520, "post_id": 35481702, "comment_id": 83709292, "body": "I needed to <code>sudo apt-get install libxslt1-dev</code> before <code>NOKOGIRI_USE_SYSTEM_LIBRARIES=1 bundle install</code>"}], "tags": [], "owner": {"reputation": 61, "user_id": 437121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61956bd5060d920da7b2951c3e9373f?s=128&d=identicon&r=PG", "display_name": "rocksoccer", "link": "https://stackoverflow.com/users/437121/rocksoccer"}, "is_accepted": false, "score": 2, "last_activity_date": 1455799063, "creation_date": 1455799063, "answer_id": 35481702, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8/35481702#35481702", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<p>The following steps solve my problem</p>\n\n<pre><code>gem uninstall nokogiri # remove nokogiri\nNOKOGIRI_USE_SYSTEM_LIBRARIES=1 bundle install\n</code></pre>\n\n<p>Combine the solutions from \n<a href=\"https://simonharrer.wordpress.com/2013/05/01/fixing-nokogiri-warning-after-ubuntu-upgrade/\" rel=\"nofollow\">https://simonharrer.wordpress.com/2013/05/01/fixing-nokogiri-warning-after-ubuntu-upgrade/</a>\nand\n<a href=\"https://github.com/sparklemotion/nokogiri/wiki/What-to-do-if-libxml2-is-being-a-jerk\" rel=\"nofollow\">https://github.com/sparklemotion/nokogiri/wiki/What-to-do-if-libxml2-is-being-a-jerk</a></p>\n"}, {"tags": [], "owner": {"reputation": 4919, "user_id": 1520083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bbc1f3aedc8d2807ab2ed7977ff92c?s=128&d=identicon&r=PG", "display_name": "Sharagoz", "link": "https://stackoverflow.com/users/1520083/sharagoz"}, "is_accepted": false, "score": 0, "last_activity_date": 1506257494, "creation_date": 1506257494, "answer_id": 46390226, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8/46390226#46390226", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<p>I had an old app locked at v1.5.11 of Nokogiri and I couldnt get rid of this issue on Debian 9 until I upgraded Nokogiri to v1.6.8.1</p>\n"}, {"tags": [], "owner": {"reputation": 21195, "user_id": 272342, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a41a211aed3597a7d55f9b7ca5b32a41?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/272342/guillaume"}, "is_accepted": false, "score": 0, "last_activity_date": 1589573005, "creation_date": 1589573005, "answer_id": 61827457, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8/61827457#61827457", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<h1>Summary</h1>\n\n<p><code>gem update --system &amp; gem pristine nokogiri</code><br>\n<strong><code>gem install nokogiri</code></strong></p>\n\n<p>(building up on <a href=\"https://stackoverflow.com/a/33391982/272342\">@Jonny answer</a> \u2014 <strong>thank you</strong> <em>!</em>)</p>\n\n<h1>Details</h1>\n\n<p>I had the same error than in the title.<br>\nAfter running his command, running a ruby script failed with this error:  </p>\n\n<pre><code>/Users/username/.rvm/rubies/ruby-2.4.0/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:92:in `require': cannot load such file -- nokogiri (LoadError)\nfrom /Users/username/.rvm/rubies/ruby-2.4.0/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:92:in `require'\nfrom my_ruby_script.rb:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>I then add to run <code>gem install nokogiri</code> again, and everything went back to normal.</p>\n"}], "owner": {"reputation": 999, "user_id": 2433565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ecb625af992913f59392324fbec7964e?s=128&d=identicon&r=PG", "display_name": "Hellboy", "link": "https://stackoverflow.com/users/2433565/hellboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4379, "favorite_count": 2, "answer_count": 6, "score": 4, "last_activity_date": 1589573005, "creation_date": 1429712353, "last_edit_date": 1430436781, "question_id": 29800482, "link": "https://stackoverflow.com/questions/29800482/nokogiri-was-built-against-libxml-version-2-9-1-but-has-dynamically-loaded-2-8", "title": "Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0", "body": "<p>I want to run </p>\n\n<pre><code>bundle exec rake fixtures:populate_from_db\n</code></pre>\n\n<p>on CentOS but I get the following warning messages: </p>\n\n<pre><code>WARNING: Nokogiri was built against LibXML version 2.9.1, but has dynamically loaded 2.8.0\nrake aborted!\n</code></pre>\n\n<p><code>~/.bundle/config</code> file contains:</p>\n\n<pre><code>BUNDLE_BUILD__NOKOGIRI: \"--with-xml2-include=/opt/local/include/libxml2 --with-xml2-lib=/opt/local/lib --with-xslt-dir=/opt/local\"\n</code></pre>\n\n<p>How should I compile Nokogiri again 2.8.0 version of LibXML?</p>\n"}, {"tags": ["ruby", "amazon-ec2", "amazon-iam", "aws-sdk"], "answers": [{"tags": [], "owner": {"reputation": 656, "user_id": 2067248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8259a621b065428d8756fda25da84adc?s=128&d=identicon&r=PG", "display_name": "lokulin", "link": "https://stackoverflow.com/users/2067248/lokulin"}, "is_accepted": true, "score": 2, "last_activity_date": 1429882533, "creation_date": 1429882533, "answer_id": 29848948, "question_id": 29799897, "link": "https://stackoverflow.com/questions/29799897/ruby-aws-sdk-using-wrong-credentials/29848948#29848948", "title": "ruby AWS SDK using wrong credentials", "body": "<p>The latest Ruby SDK checks credentials in the following order:</p>\n\n<p>static_credentials -> env_credentials -> shared_credentials -> instance_profile_credentials</p>\n\n<p>So if you are using static credentials you should be ok, but if you are exporting your key and secret as ENV vars ensure there are none already set using a different name.</p>\n\n<p>The SDK looks for Env vars in this order:</p>\n\n<pre><code>AWS_ACCESS_KEY_ID -&gt; AMAZON_ACCESS_KEY_ID -&gt; AWS_ACCESS_KEY\nAWS_SECRET_ACCESS_KEY -&gt; AMAZON_SECRET_ACCESS_KEY -&gt; AWS_SECRET_KEY\nAWS_SESSION_TOKEN -&gt; AMAZON_SESSION_TOKEN\n</code></pre>\n\n<p>Make sure you are exporting both AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY by doing something along the lines of:</p>\n\n<pre><code>export AWS_ACCESS_KEY_ID=ASIAXXXXXXXXXXXXXXXX\nexport AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n</code></pre>\n\n<p>There has been multiple changes to the ordering and names of the keys over the years so if your environments are running different versions of the SDK it is unsurprising if you are having problems.  If you can't update to the latest SDK perhaps <a href=\"https://github.com/aws/aws-sdk-ruby/blob/master/aws-sdk-core/lib/aws-sdk-core/credential_provider_chain.rb\" rel=\"nofollow\">try taking a look at the SDK source</a> to see what order the version you are using evaluates in.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 29848948, "answer_count": 1, "score": 0, "last_activity_date": 1429882533, "creation_date": 1429711128, "question_id": 29799897, "link": "https://stackoverflow.com/questions/29799897/ruby-aws-sdk-using-wrong-credentials", "title": "ruby AWS SDK using wrong credentials", "body": "<p>I'm having a slight issue with the AWS SDK. </p>\n\n<p>I'm using the AWS SDK on an EC2 box to pull data I need about our services.</p>\n\n<p>I'm passing it credentials via a secret and ID key however when it tries to pull the data I want it's using the IAM role that's assigned to the box rather then the credentials.</p>\n\n<p>Thing is, this works perfectly fine in one of our environments but behaves differently in this one, what's going on?</p>\n"}, {"tags": ["ruby", "https", "proxy", "nokogiri", "open-uri"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1429711248, "post_id": 29799843, "comment_id": 47727947, "body": "check this post <a href=\"http://stackoverflow.com/questions/10043046/ruby-proxy-authentication-get-post-with-openuri-or-net-http\" title=\"ruby proxy authentication get post with openuri or net http\">stackoverflow.com/questions/10043046/&hellip;</a>"}, {"owner": {"reputation": 746, "user_id": 2414501, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/88b3f1fcfb3abd4089aecda5865a6406?s=128&d=identicon&r=PG", "display_name": "Filipe Gorges Reuwsaat", "link": "https://stackoverflow.com/users/2414501/filipe-gorges-reuwsaat"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1429713409, "post_id": 29799843, "comment_id": 47729865, "body": "I&#39;ve checked it before, but there&#39;s no authentication on the proxy I&#39;m using; There&#39;s going to be an issue with that jenkinsWebPage afterwards due to an invalid self-signed certificate on the Jenkins server, but I don&#39;t think that this is the issue that open-uri is complaining about at the moment, I&#39;m actively searching for a solution to this for weeks now :("}], "answers": [{"tags": [], "owner": {"reputation": 746, "user_id": 2414501, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/88b3f1fcfb3abd4089aecda5865a6406?s=128&d=identicon&r=PG", "display_name": "Filipe Gorges Reuwsaat", "link": "https://stackoverflow.com/users/2414501/filipe-gorges-reuwsaat"}, "is_accepted": true, "score": 0, "last_activity_date": 1430841034, "creation_date": 1430841034, "answer_id": 30057691, "question_id": 29799843, "link": "https://stackoverflow.com/questions/29799843/opening-a-non-http-proxy-uri-on-https-domain-using-openuri/30057691#30057691", "title": "Opening a non-HTTP proxy URI on https domain using OpenURI", "body": "<p>Okay, so I've found out how to get the page, but I had to switch open-uri for net/https, also, I set OpenSSL to VERIFY_NONE, since it's a self signed certificate (company server):</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'net/https'\nrequire 'openssl'\n\nclass JenkinsTest\n    # Request the Jenkins webpage\n    def request_jenkins_webpage\n        uri = URI.parse(\"https://https://yadayad.yada.yada.com:8443\")\n        http = Net::HTTP.new(uri.host, uri.port)\n        http.use_ssl = true\n        http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n        request = Net::HTTP::Get.new(uri.request_uri)\n        response = http.request(request)\n        @@page = Nokogiri::HTML(response.body)\n    end\n\n    def print_jenkins_webpage\n        puts @@page\n    end\nend\n</code></pre>\n\n<p>It looks ugly, if anybody finds out a better way to put this, please edit this post, but as of now, it's working fine.</p>\n"}], "owner": {"reputation": 746, "user_id": 2414501, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/88b3f1fcfb3abd4089aecda5865a6406?s=128&d=identicon&r=PG", "display_name": "Filipe Gorges Reuwsaat", "link": "https://stackoverflow.com/users/2414501/filipe-gorges-reuwsaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 1, "accepted_answer_id": 30057691, "answer_count": 1, "score": 1, "last_activity_date": 1430841034, "creation_date": 1429711018, "last_edit_date": 1430338616, "question_id": 29799843, "link": "https://stackoverflow.com/questions/29799843/opening-a-non-http-proxy-uri-on-https-domain-using-openuri", "title": "Opening a non-HTTP proxy URI on https domain using OpenURI", "body": "<p>I'm behind a proxy and I must get an HTTPS webpage to collect some information, but OpenURI returns an error: \"Non-HTTP proxy URI\".</p>\n\n<p>This is the issue: </p>\n\n<pre><code>&gt; yadayada@ubuntu:~/Desktop/test/lib$ ruby JenkinsTest.rb \n/home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:257:in `open_http': Non-HTTP proxy URI: https://web-proxy.yadayada:8088 (RuntimeError)\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:736:in `buffer_open'\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:211:in `block in open_loop'\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:209:in `catch'\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:209:in `open_loop'\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:150:in `open_uri'\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:716:in `open'\nfrom /home/yadayada/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/open-uri.rb:34:in `open'\nfrom JenkinsTest.rb:6:in `&lt;main&gt;'\nyadayada@ubuntu:~/Desktop/test/lib$ \n</code></pre>\n\n<p>This is the code I'm running:</p>\n\n<pre><code>  1 require 'rubygems'\n  2 require 'nokogiri'\n  3 require 'open-uri'\n  4 \n  5 # Request the Jenkins webpage\n  6 @jenkinsWebPage = Nokogiri::HTML(open(\"https://yadayad.yada.yada.com:8443\"))\n  7 \n  8 # Prints the received page\n  9 puts @jenkinsWebPage \n</code></pre>\n\n<p>The proxy has no login/password.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1429710094, "post_id": 29799317, "comment_id": 47726943, "body": "can you post your application.rb file?"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1429710264, "post_id": 29799317, "comment_id": 47727068, "body": "hope you are running this command inside the folder holding the code :)"}, {"owner": {"reputation": 231, "user_id": 3668616, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ux9hS.jpg?s=128&g=1", "display_name": "RubyMax", "link": "https://stackoverflow.com/users/3668616/rubymax"}, "reply_to_user": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1429710332, "post_id": 29799317, "comment_id": 47727135, "body": "Added the code @thaleshcv"}], "answers": [{"tags": [], "owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "is_accepted": true, "score": 9, "last_activity_date": 1429710372, "creation_date": 1429710372, "answer_id": 29799558, "question_id": 29799317, "link": "https://stackoverflow.com/questions/29799317/rails-error-uninitialized-constant/29799558#29799558", "title": "Rails Error - Uninitialized Constant", "body": "<p>You seem to have called your application 'coffee'. This means that you have a <code>module Coffee</code> declaration in your <code>config/application.rb</code> file. </p>\n\n<p>Rails uses the <a href=\"https://github.com/rails/coffee-rails\" rel=\"noreferrer\">coffee-rails</a> gem to support coffee script in a rails application and this also declares a <code>module Coffee</code>.</p>\n\n<p>You have inadvertently created a name clash with your choice of application name.</p>\n"}], "owner": {"reputation": 231, "user_id": 3668616, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ux9hS.jpg?s=128&g=1", "display_name": "RubyMax", "link": "https://stackoverflow.com/users/3668616/rubymax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1890, "favorite_count": 0, "accepted_answer_id": 29799558, "answer_count": 1, "score": 3, "last_activity_date": 1429710372, "creation_date": 1429709832, "last_edit_date": 1429710262, "question_id": 29799317, "link": "https://stackoverflow.com/questions/29799317/rails-error-uninitialized-constant", "title": "Rails Error - Uninitialized Constant", "body": "<p>Upon setting up a new rails project I have come across the following issues on the <code>rails s</code> command</p>\n\n<pre><code>john-MacBook-Pro:coffee john$ rails s\n/Users/john/Development/coffee/config/application.rb:10:in `&lt;module:Coffee&gt;': uninitialized constant Coffee::Rails::Application (NameError)\n    from /Users/john/Development/coffee/config/application.rb:9:in `&lt;top (required)&gt;'\n    from /Users/john/.rvm/gems/ruby-2.1.2/gems/railties-4.0.3/lib/rails/commands.rb:74:in `require'\n    from /Users/john/.rvm/gems/ruby-2.1.2/gems/railties-4.0.3/lib/rails/commands.rb:74:in `block in &lt;top (required)&gt;'\n    from /Users/john/.rvm/gems/ruby-2.1.2/gems/railties-4.0.3/lib/rails/commands.rb:71:in `tap'\n    from /Users/john/.rvm/gems/ruby-2.1.2/gems/railties-4.0.3/lib/rails/commands.rb:71:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>What exactly is causing this and how do I fix it?</p>\n\n<p>Thanks for looking.</p>\n\n<p>Application.rb file:</p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\n\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(:default, Rails.env)\n\nmodule Coffee\n  class Application &lt; Rails::Application\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n\n    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.\n    # Run \"rake -D time\" for a list of tasks for finding time zone names. Default is UTC.\n    # config.time_zone = 'Central Time (US &amp; Canada)'\n\n    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.\n    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]\n    # config.i18n.default_locale = :de\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 1, "last_activity_date": 1429709865, "creation_date": 1429709865, "answer_id": 29799330, "question_id": 29799195, "link": "https://stackoverflow.com/questions/29799195/extract-numbers-within-a-string-using-regex/29799330#29799330", "title": "extract numbers within a string using regex", "body": "<p>Because <code>.*</code> is greedy which matches all the characters as much as possible, so that it returns you the last digit where all the previous characters are greedily matched. By turning greedy <code>.*</code> to non-greedy <code>.*?</code>, it will do a shortest possible match which inturn give you  the last number.</p>\n\n<pre><code>doc.text_at('header.headerInfo &gt; h4 &gt; b').match(/(Tempo).*?(\\d+)/)[2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1429710788, "last_edit_date": 1429710788, "creation_date": 1429709872, "answer_id": 29799335, "question_id": 29799195, "link": "https://stackoverflow.com/questions/29799195/extract-numbers-within-a-string-using-regex/29799335#29799335", "title": "extract numbers within a string using regex", "body": "<p>You can scan directly for digits:</p>\n\n<pre><code>\"Temporada 2015\".scan(/\\d+/)\n# =&gt; [\"2015\"]\n\"Temporada 8\".scan(/\\d+/)\n# =&gt; [\"8\"]\n</code></pre>\n\n<p>If you want to include <code>Temp</code> in regex:</p>\n\n<pre><code>\"Temporada 2015\".scan(/Temp.*?(\\d+)/)\n# =&gt; [[\"2015\"]]\n</code></pre>\n\n<p>Non regex way:</p>\n\n<pre><code>\"Temporada 2015\".split.detect{|e| e.to_i.to_s == e }\n# =&gt; \"2015\"\n\"Temporada 8\".split.detect{|e| e.to_i.to_s == e }\n# =&gt; \"8\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "is_accepted": false, "score": 2, "last_activity_date": 1429709877, "creation_date": 1429709877, "answer_id": 29799339, "question_id": 29799195, "link": "https://stackoverflow.com/questions/29799195/extract-numbers-within-a-string-using-regex/29799339#29799339", "title": "extract numbers within a string using regex", "body": "<p>The <code>.*</code> is \"greedy\". It matches as many characters as it can. So it leaves just one digit for the <code>\\d+</code>.</p>\n\n<p>If your strings are known to contain no other numbers, you can just do</p>\n\n<pre><code>.scan(/\\d+/).first\n</code></pre>\n\n<p>otherwise you can just match non-digit</p>\n\n<pre><code>.match(/(Tempo)[^\\d]*(\\d+)/)[2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1429709930, "post_id": 29799340, "comment_id": 47726812, "body": "Wholly my! 4 answers displayed simultaneously! :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1429710024, "post_id": 29799340, "comment_id": 47726887, "body": "Yeah, I also had to click that box :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1429723312, "post_id": 29799340, "comment_id": 47737148, "body": "@shivam, maybe it had something to do with your avatar."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429724229, "post_id": 29799340, "comment_id": 47737807, "body": "@CarySwoveland ROFL..  I think Im too lean to be mistaken as terminator. :D"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1429710115, "last_edit_date": 1429710115, "creation_date": 1429709879, "answer_id": 29799340, "question_id": 29799195, "link": "https://stackoverflow.com/questions/29799195/extract-numbers-within-a-string-using-regex/29799340#29799340", "title": "extract numbers within a string using regex", "body": "<p>You should add a <code>?</code> to make the regex non-greedy:</p>\n\n<pre><code>doc.text_at('header.headerInfo &gt; h4 &gt; b').match(/(Tempo).*?(\\d+)/)[2];\n</code></pre>\n\n<p>Here is a <a href=\"http://www.tutorialspoint.com/execute_ruby_online.php?PID=0Bw_CjBb95KQMbTByUlQxQWI4VVU\" rel=\"nofollow\">sample program</a> for verification.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1429724823, "last_edit_date": 1429724823, "creation_date": 1429724523, "answer_id": 29805157, "question_id": 29799195, "link": "https://stackoverflow.com/questions/29799195/extract-numbers-within-a-string-using-regex/29805157#29805157", "title": "extract numbers within a string using regex", "body": "<p>I'd write it thus:</p>\n\n<pre><code>r = /\n    \\b    # match a word-break (possibly beginning of string)\n    Tempo # match these characters\n    \\D+   # match one or more characters other than digits\n    \\K    # forget everything matched so far\n    \\d+   # match one or more digits\n   /x\n\n\"Temporada 2015\"[r] #=&gt; 2015\n\"Temporada 8\"[r]    #=&gt; 8\n\"Temporary followed by something else 21 then more\"[r]\n  #=&gt; 21\n</code></pre>\n\n<p>If 'Tempo' must be at the beginning of the string, write <code>r = /Tempo....</code> or <code>r = /\\s*Tempo...</code> if it can be preceded by whitespace. I've written <code>\\D+</code> rather than <code>\\D*</code> on the assumption that there should be at least one space.</p>\n\n<p>I don't understand why <code>'Tempo'</code> is in a capture group. Have I missed something?</p>\n"}], "owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 29799340, "answer_count": 5, "score": 2, "last_activity_date": 1429724823, "creation_date": 1429709531, "question_id": 29799195, "link": "https://stackoverflow.com/questions/29799195/extract-numbers-within-a-string-using-regex", "title": "extract numbers within a string using regex", "body": "<p>I have a string as below</p>\n\n<blockquote>\n  <p>\"Temporada 2015\"</p>\n</blockquote>\n\n<p>and also I get string as </p>\n\n<blockquote>\n  <p>\"Temporada 8\"</p>\n</blockquote>\n\n<p>I need to match and extract only numbers from the string 2015 and 8.\nHow do i do it using regex. I tried like below</p>\n\n<pre><code>doc.text_at('header.headerInfo &gt; h4 &gt; b').match(/(Tempo).*(\\d+)/)[2]\n</code></pre>\n\n<p>But it returned only 5 for first one instead of 2015.\nHow do I match both and return only nos.??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-i18n"], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 2406586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4693b4eb39f13137c7687bdfee342fbe?s=128&d=identicon&r=PG", "display_name": "IT_puppet_master", "link": "https://stackoverflow.com/users/2406586/it-puppet-master"}, "edited": false, "score": 0, "creation_date": 1429710091, "post_id": 29799285, "comment_id": 47726938, "body": "Exactly what I was after! Thankyou!"}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": true, "score": 1, "last_activity_date": 1429709724, "creation_date": 1429709724, "answer_id": 29799285, "question_id": 29799137, "link": "https://stackoverflow.com/questions/29799137/i18n-to-call-different-model-attribute-depending-on-locale/29799285#29799285", "title": "I18n to call different Model Attribute depending on Locale?", "body": "<p>You can use <code>send</code> method. Try something like:</p>\n\n<pre><code>&lt;%= Product.send(\"name_#{I18n.locale.downcase}\") %&gt;\n</code></pre>\n\n<p>Just a word of explanation, the following are equal:</p>\n\n<pre><code>string = \"Hello\"\n\nstring.upcase\n# =&gt; \"HELLO\"\n\nstring.send(\"upcase\")\n# =&gt; \"HELLO\"\n</code></pre>\n\n<p>Hope that puts you in proper direction!</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 592, "user_id": 2406586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4693b4eb39f13137c7687bdfee342fbe?s=128&d=identicon&r=PG", "display_name": "IT_puppet_master", "link": "https://stackoverflow.com/users/2406586/it-puppet-master"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 29799285, "answer_count": 1, "score": 0, "last_activity_date": 1429709724, "creation_date": 1429709394, "question_id": 29799137, "link": "https://stackoverflow.com/questions/29799137/i18n-to-call-different-model-attribute-depending-on-locale", "title": "I18n to call different Model Attribute depending on Locale?", "body": "<p>So I am building an on-line shop and I want two language options, English and Spanish.</p>\n\n<p>I am using I18n as you would normally do for all my static text and headings ect.</p>\n\n<p>But, I have a products Model that can have new Products created for listing on the site. This has fields like :name_en and :name_es, :description_en and :description_es ect.</p>\n\n<p>When the admin uploads a new product they obviously need to add the English and the Spanish text.</p>\n\n<p>Because I have only 2 locales what I would like to do i think is call something like</p>\n\n<pre><code>    &lt;%= Product.name_\"#{I18n.locale.downcase}\" %&gt;\n</code></pre>\n\n<p>But obviously this does not work. How can i, or just can I, interpolate a method or Attribute?</p>\n\n<p>Have I missed something obvious here and just going about it the wrong way or is there a way to do this along the lines of my thinking?</p>\n\n<p>Any Help massively appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "amazon-ec2", "passenger"], "answers": [{"tags": [], "owner": {"reputation": 5933, "user_id": 3501228, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6ocDo.jpg?s=128&g=1", "display_name": "Noman Ur Rehman", "link": "https://stackoverflow.com/users/3501228/noman-ur-rehman"}, "is_accepted": false, "score": 2, "last_activity_date": 1431189887, "creation_date": 1431189887, "answer_id": 30142549, "question_id": 29798503, "link": "https://stackoverflow.com/questions/29798503/passenger-and-nginx-unable-to-run-rails-application-in-production-mode/30142549#30142549", "title": "Passenger and Nginx unable to run rails application in production mode", "body": "<p>I think you should add this to the <code>server</code> block of your configuration after <code>passenger_enabled on</code>:</p>\n\n<pre><code>passenger_app_env production;\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 1485075, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/hnpvW.jpg?s=128&g=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/1485075/hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431189887, "creation_date": 1429707934, "last_edit_date": 1429709321, "question_id": 29798503, "link": "https://stackoverflow.com/questions/29798503/passenger-and-nginx-unable-to-run-rails-application-in-production-mode", "title": "Passenger and Nginx unable to run rails application in production mode", "body": "<p>I have a ubuntu EC2 instance configured with rvm and psql after which I cloned my rails application on the EC2 instance via bitbucket.\nFollowing this digital ocean's <a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-passenger-and-nginx-on-ubuntu-14-04\" rel=\"nofollow\">link</a> I installed passenger and nginx on my instance and set <code>passenger_app_env development;</code> inside my server configurations.\nNow that I would like to use the application in production mode, I removed this line from the config and currently my server configs are as follows:</p>\n\n<pre><code>    server {\n       #listen 80 default_server;\n        listen   443 ssl;\n        ssl         on;\n        server_name **.**.**.**;\n        passenger_enabled on;\n        rails_env production;\n        root /home/ubuntu/my_app/public;\n        ssl_certificate /home/ubuntu/my_app/my_app.pem;\n        ssl_certificate_key /home/ubuntu/my_app/my_app.key;\n}\n\nserver {\n       listen         80;\n       server_name    **.***.**.**;\n       return         301 https://$server_name$request_uri;\n}\n</code></pre>\n\n<p>The app is still running in the development environment as when I execute <code>Rails.env.production?</code> in the console I get false result, shouldn't passenger implicitly assume that the application is in production mode now that I have removed the setting mentioning the development environment?   Any sort of help with be appreciated. Thanks a lot. Also after every change I make in the config file I also run <code>sudo nginx -s reload</code> and <code>sudo service nginx restart</code>. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "internationalization", "ruby-on-rails-3.2", "rails-routing"], "comments": [{"owner": {"reputation": 64953, "user_id": 1533054, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/E2mYN.jpg?s=128&g=1", "display_name": "Sheharyar", "link": "https://stackoverflow.com/users/1533054/sheharyar"}, "edited": false, "score": 0, "creation_date": 1430737029, "post_id": 29798006, "comment_id": 48173201, "body": "Does the same instance of your rails app serve content to all these domains or does each domain serve it&#39;s own app?"}, {"owner": {"reputation": 366, "user_id": 1708330, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X5ebv.png?s=128&g=1", "display_name": "kanna", "link": "https://stackoverflow.com/users/1708330/kanna"}, "reply_to_user": {"reputation": 64953, "user_id": 1533054, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/E2mYN.jpg?s=128&g=1", "display_name": "Sheharyar", "link": "https://stackoverflow.com/users/1533054/sheharyar"}, "edited": false, "score": 0, "creation_date": 1430739686, "post_id": 29798006, "comment_id": 48174707, "body": "It is same instance for all domains."}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1430851891, "creation_date": 1430851891, "answer_id": 30060979, "question_id": 29798006, "link": "https://stackoverflow.com/questions/29798006/redirect-to-same-page-in-new-domain-after-locale-changes-in-rails-3/30060979#30060979", "title": "Redirect To Same Page In New Domain after Locale changes in Rails 3", "body": "<p>You'll need to translate each segment of <code>request.fullpath</code> (except for the last one, which looks like a resource slug). You can do that manually using Rails' I18n:</p>\n\n<pre><code>current_path = request.fullpath.split('/')\nslug = current_path.pop\nlocale_path = current_path.map{|part| translate(part)}.join('/')\nredirect_to \"#{request.protocol}#{domain}#{locale_path}#{slug}\"\n</code></pre>\n\n<p>Or, there are gems that handle route translation:</p>\n\n<ul>\n<li><a href=\"https://github.com/francesc/rails-translate-routes\" rel=\"nofollow\">https://github.com/francesc/rails-translate-routes</a></li>\n<li><a href=\"https://github.com/enriclluelles/route_translator\" rel=\"nofollow\">https://github.com/enriclluelles/route_translator</a></li>\n</ul>\n\n<p>As far as the session, it's not natively possible to share cookies across domains. If you make your locales subdomains (eg. <code>de.xxxxx.com</code>), you can <a href=\"https://stackoverflow.com/questions/10402777/share-session-cookies-between-subdomains-in-rails\">share the cookie across all of them</a>. Lots of sites do it via the path, eg. <code>xxxxx.com/de/</code>, which removes the problem altogether.</p>\n\n<p>Supporting totally different domains requires you to transfer the session manually. You could accomplish that by something like:</p>\n\n<ul>\n<li>Generate random transfer token <code>xxx123</code> and save it server-side with the session it's attached to</li>\n<li>Redirect to <code>new.domain/path?token=xxx123</code></li>\n<li>Use the token to look up the user's session and set it in their browser</li>\n<li>Remove the token to prevent replay attacks</li>\n</ul>\n\n<p>Think carefully about the transfer process - it's easy to introduce security problems when you're doing this kind of thing. <a href=\"https://stackoverflow.com/questions/315132/how-do-i-use-cookies-across-two-different-domains\">This SO thread</a> has an approach using images loaded from the other domain.</p>\n"}], "owner": {"reputation": 366, "user_id": 1708330, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X5ebv.png?s=128&g=1", "display_name": "kanna", "link": "https://stackoverflow.com/users/1708330/kanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1536, "favorite_count": 4, "accepted_answer_id": 30060979, "answer_count": 1, "score": 15, "last_activity_date": 1430851891, "creation_date": 1429706699, "question_id": 29798006, "link": "https://stackoverflow.com/questions/29798006/redirect-to-same-page-in-new-domain-after-locale-changes-in-rails-3", "title": "Redirect To Same Page In New Domain after Locale changes in Rails 3", "body": "<p>Application using Rails 3.2.8 with below gems</p>\n\n<pre><code>gem 'friendly_id', '~&gt; 4.0'\ngem 'route_translator'\n</code></pre>\n\n<p>In /config/initializers/i18n.rb</p>\n\n<pre><code>TLD_LOCALES = {\n  \"com\"  =&gt; :en,\n  \"jobs\" =&gt; :en,\n  \"net\"  =&gt; :en,\n  \"in\"   =&gt; :en,\n  \"de\"   =&gt; :de,\n  \"ch\"   =&gt; :de,\n  \"at\"   =&gt; :de,\n  \"br\"   =&gt; :pt,\n  \"ar\"   =&gt; :es,\n  \"cl\"   =&gt; :es,\n  \"mx\"   =&gt; :es \n}\n</code></pre>\n\n<p>In /app/controllers/application_controller.rb, uses a before-filter to set the locale for each request:</p>\n\n<pre><code>before_filter :set_auto_locale\ndef set_auto_locale\n  I18n.locale = TLD_LOCALES[request.host.split('.').last]\nend\n</code></pre>\n\n<p>In routes.rb</p>\n\n<pre><code>localized do\n  match \"label_vacancies/:view_job\"=&gt;\"job_seekers#view_job\"\n  get \"label_aboutus\", :to =&gt; \"home#about_us\", :as =&gt; \"about_us\"\nend\n</code></pre>\n\n<p>While user requests to change language locale, below domains should load based on locale user requested.</p>\n\n<p>In initializers</p>\n\n<pre><code>domain_based_on_locale = {\n    :en =&gt; \"xxxxx.com\",\n    :de =&gt; \"xxxxx.de\",\n    :es =&gt; \"xxxxx.mx\",\n    :pt =&gt; \"xxxxx.com.br\"   \n}\n</code></pre>\n\n<p>In /app/controllers/application_controller.rb</p>\n\n<pre><code>def set_manual_locale\n  if params[:locale] &amp;&amp; I18n.available_locales.include?(params[:locale].to_sym)\n    cookies['locale'] = { :value =&gt; params[:locale], :expires =&gt; 1.year.from_now }\n    I18n.locale = params[:locale].to_sym\n  elsif cookies['locale'] &amp;&amp; I18n.available_locales.include?(cookies['locale'].to_sym)\n    I18n.locale = cookies['locale'].to_sym\n  end\n  if domain_based_on_locale[I18n.locale] != request.host\n    redirect_to \"#{request.protocol}#{domain_based_on_locale[I18n.locale]}#{request.fullpath}\", :status =&gt; :moved_permanently \n  else\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>In this case, user changing language in URLs like below are having issue to redirect because the same page has different URL according to language.</p>\n\n<pre><code>Aboutus:\nhttp://xxxxxxx.com/about-us  # About us route in English\nhttp://xxxxxxx.de/uber-uns      # About us route in German\nhttp://xxxxxxx.mx/quienes-somos # About us route in Spanish\n\nview Job:\nhttp://xxxxxxx.com/jobs/rp-be-company-representante-de-ventas-22042015\nhttp://xxxxxxx.de/ofertas-de-empleo/rp-be-company-representante-de-ventas-22042015\n</code></pre>\n\n<p>After manual language locale change, how to redirect to same page in new domain also. And is it possible to carry running session to new domain. Thanks for your help.</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1429706627, "creation_date": 1429706627, "answer_id": 29797979, "question_id": 29797954, "link": "https://stackoverflow.com/questions/29797954/extract-and-remove-substring-from-a-string-in-ruby/29797979#29797979", "title": "extract and remove substring from a string in ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-sub\" rel=\"nofollow\"><code>sub</code></a> to remove first occurrence of <code>/br</code> from string, else <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-gsub\" rel=\"nofollow\"><code>gsub</code></a> to remove all occurrences</p>\n\n<pre><code>\"/br/watch/123456\".sub(\"/br\",\"\")\n# =&gt; \"/watch/123456\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1429706630, "creation_date": 1429706630, "answer_id": 29797980, "question_id": 29797954, "link": "https://stackoverflow.com/questions/29797954/extract-and-remove-substring-from-a-string-in-ruby/29797980#29797980", "title": "extract and remove substring from a string in ruby", "body": "<p>Use sub. <code>sub</code> helps to do a single replacement on strings. The below code will remove the <code>/br</code> sub-string only if it's present at the start.</p>\n\n<pre><code>&gt; \"/br/watch/123456\".sub(/^\\/br/, '')\n=&gt; \"/watch/123456\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28588, "user_id": 44620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9e36aeb20f1b4a763043d3ce4942b454?s=128&d=identicon&r=PG", "display_name": "Jonas Elfstr&#246;m", "link": "https://stackoverflow.com/users/44620/jonas-elfstr%c3%b6m"}, "is_accepted": false, "score": 0, "last_activity_date": 1429707503, "creation_date": 1429707503, "answer_id": 29798327, "question_id": 29797954, "link": "https://stackoverflow.com/questions/29797954/extract-and-remove-substring-from-a-string-in-ruby/29798327#29798327", "title": "extract and remove substring from a string in ruby", "body": "<p>If it's always three characters that should be removed you can.</p>\n\n<pre><code>\"/br/watch/123456\"[3..-1]\n</code></pre>\n\n<p>or more verbose and probably slower</p>\n\n<pre><code>\"/br/watch/123456\".chars.drop(3).join\n</code></pre>\n"}], "owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1285, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1429707503, "creation_date": 1429706556, "question_id": 29797954, "link": "https://stackoverflow.com/questions/29797954/extract-and-remove-substring-from-a-string-in-ruby", "title": "extract and remove substring from a string in ruby", "body": "<p>I have a string as below</p>\n\n<pre><code>\"/br/watch/123456\"\n</code></pre>\n\n<p>I need to remove /br and extract only /watch/123456. what is the best way to achieve it in ruby. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "routes", "http-redirect"], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 4614631, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f265ae565682c3f4c98ec4a55b2ebc72?s=128&d=identicon&r=PG&f=1", "display_name": "Sulaiman Adeeyo", "link": "https://stackoverflow.com/users/4614631/sulaiman-adeeyo"}, "edited": false, "score": 0, "creation_date": 1429713298, "post_id": 29797935, "comment_id": 47729769, "body": "Thanks for this... It works as the question required. But now, I am unable to access the files through the previous URL. (Routing Error: No route matches)  Is it possible to make the previous URL works too?"}, {"owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "reply_to_user": {"reputation": 445, "user_id": 4614631, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f265ae565682c3f4c98ec4a55b2ebc72?s=128&d=identicon&r=PG&f=1", "display_name": "Sulaiman Adeeyo", "link": "https://stackoverflow.com/users/4614631/sulaiman-adeeyo"}, "edited": false, "score": 0, "creation_date": 1429718161, "post_id": 29797935, "comment_id": 47733624, "body": "@hardeshorlar It works here. Make sure you have <code>resource :controller1</code> in your <code>routes.rb</code> and you may run <code>rake routes</code> to diagnostic the current route mapping to find out more information about problem."}, {"owner": {"reputation": 445, "user_id": 4614631, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f265ae565682c3f4c98ec4a55b2ebc72?s=128&d=identicon&r=PG&f=1", "display_name": "Sulaiman Adeeyo", "link": "https://stackoverflow.com/users/4614631/sulaiman-adeeyo"}, "edited": false, "score": 0, "creation_date": 1429868103, "post_id": 29797935, "comment_id": 47813686, "body": "Hi, Arie... I&#39;ve tried that but when I put <code>resources :controller1</code> and <code>resources :controls, controller: &#39;controller1&#39;</code>, I am only able to access the files though the /controller1/ and /controls/ become unavailable.   When I removed the <code>resources :controller1</code>, the /controls/ become unavailable."}], "tags": [], "owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "is_accepted": true, "score": 1, "last_activity_date": 1429718168, "last_edit_date": 1429718168, "creation_date": 1429706498, "answer_id": 29797935, "question_id": 29797861, "link": "https://stackoverflow.com/questions/29797861/how-to-reroute-a-view-directory-and-its-content-in-rails/29797935#29797935", "title": "How to reroute a View Directory and its content in Rails", "body": "<p>Add this to your <code>routes.rb</code></p>\n\n<pre><code>resource :controls, controller: 'controller1' # add this line\nresource :controller1 # possibly this is in your routes.rb already\n</code></pre>\n\n<p>Reference: <a href=\"http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use\" rel=\"nofollow\">Specifying a Controller to Use</a></p>\n"}], "owner": {"reputation": 445, "user_id": 4614631, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f265ae565682c3f4c98ec4a55b2ebc72?s=128&d=identicon&r=PG&f=1", "display_name": "Sulaiman Adeeyo", "link": "https://stackoverflow.com/users/4614631/sulaiman-adeeyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 29797935, "answer_count": 1, "score": 0, "last_activity_date": 1429718168, "creation_date": 1429706341, "question_id": 29797861, "link": "https://stackoverflow.com/questions/29797861/how-to-reroute-a-view-directory-and-its-content-in-rails", "title": "How to reroute a View Directory and its content in Rails", "body": "<p>I am working on a Ruby on Rails project. In the project I generated a controller with a name <em>controller1</em> which automatically gives me my view files (show, index, and others). This also gives me my url (<a href=\"http://www,website.com/controller1/\">http://www,website.com/controller1/</a>).</p>\n\n<p>But now I want to change the URL path to another one (<a href=\"http://www.website.com/controls\" rel=\"nofollow\">http://www.website.com/controls</a>). Is there a way I can do this without having to write route command for each file in the controller1 view folder.</p>\n\n<p>Oh! And I will appreciate options better than the \"Moved Permanently\" redirect route command code.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1429706860, "post_id": 29797777, "comment_id": 47724215, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4279604/what-is-the-difference-between-stdin-and-stdin-in-ruby\">What is the difference between STDIN and $stdin in Ruby?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1429707013, "post_id": 29797831, "comment_id": 47724343, "body": "Its not completely true. <code>$stdin = &quot;asd&quot;</code>, <code>$stdin.object_id == STDIN.object_id # =&gt; false</code>"}, {"owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1429707063, "post_id": 29797831, "comment_id": 47724386, "body": "@shivam yes, I should say &quot;by default&quot;"}, {"owner": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "edited": false, "score": 0, "creation_date": 1429707692, "post_id": 29797831, "comment_id": 47724900, "body": "so, if I do $stdout = File.open(&quot;test.log&quot;, &quot;w&quot;)  then STDOUT allows me redirect output back to console?  Is this main reason or there is some other applications?"}, {"owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "reply_to_user": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "edited": false, "score": 0, "creation_date": 1429708246, "post_id": 29797831, "comment_id": 47725333, "body": "@NikitaLuparev Yes, it offers a way to redirect input and output which are used by <code>puts</code>, <code>gets</code> by default."}], "tags": [], "owner": {"reputation": 13091, "user_id": 483266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88664c5c8cd526ac9c0638e59db2c0f?s=128&d=identicon&r=PG", "display_name": "Arie Xiao", "link": "https://stackoverflow.com/users/483266/arie-xiao"}, "is_accepted": true, "score": 4, "last_activity_date": 1429707077, "last_edit_date": 1592644375, "creation_date": 1429706263, "answer_id": 29797831, "question_id": 29797777, "link": "https://stackoverflow.com/questions/29797777/difference-between-stdin-and-stdin/29797831#29797831", "title": "Difference between `STDIN` and `$stdin`", "body": "<p>From <a href=\"http://ruby-doc.org/core-2.2.2/doc/globals_rdoc.html\" rel=\"nofollow noreferrer\">Ruby globals</a>:</p>\n<blockquote>\n<p>STDIN</p>\n<p>The standard input. The default value for $stdin.</p>\n</blockquote>\n<p>They are the same object by default.</p>\n<pre><code>[1] pry(main)&gt; $stdin.object_id\n=&gt; 13338048\n[2] pry(main)&gt; STDIN.object_id\n=&gt; 13338048\n[3] pry(main)&gt; $stdin.object_id == STDIN.object_id\n=&gt; true\n</code></pre>\n<p>As @shivam commented, <code>$stdin</code> is a global variable and it may be assigned to something different, while <code>STDIN</code> is a constant.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1429712055, "last_edit_date": 1429712055, "creation_date": 1429708959, "answer_id": 29798937, "question_id": 29797777, "link": "https://stackoverflow.com/questions/29797777/difference-between-stdin-and-stdin/29798937#29798937", "title": "Difference between `STDIN` and `$stdin`", "body": "<p>STDIN is a constant and therefore you'll get a ruby warning if you try to replace it. Otherwise the two are just normal ruby variables in that they can point to the same object (and are by default) and if they do, doing something with one will affect the other variable, but if you assign something else to one of the variables, they will be different.</p>\n\n<p>Standard ruby methods like <code>get</code> will read from <code>$stdin</code> (not STDIN) by default. That means you can override <code>$stdin</code> (<code>$stdout</code>, <code>$stderr</code>) for standard methods and use the constant versions to see what <code>$stdin</code>, <code>$stdout</code> or <code>$stderr</code> originaly were.</p>\n\n<p>Note that overriding <code>$stdin</code>, <code>$stdout</code>, or <code>$stderr</code> won't affect the standard streams of newly spawned programs (the actual filedescriptors 0, 1, and 2 respectively). To do that you'd need to call <code>IO#reopen</code> on the stream you'd want to change, e.g. (assuming the constant version hasn't been forcibly replaced),</p>\n\n<pre><code>STDOUT.reopen(\"newfile\") #Write all output to \"newfile\" including the output of newly spawned processes (`%x{}`,`system`, `spawn`, `IO.popen`, etc.)\n</code></pre>\n\n<p>Now with reopen, you can replace the streams only to actual OS-level files/file descriptors (e.g., no <code>StringIO</code>), but if you're on UNIX, there's not much you can't do with OS-level files (you can change them to pipes which you can read elsewhere in your program, for example).</p>\n"}], "owner": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 29797831, "answer_count": 2, "score": 3, "last_activity_date": 1429712055, "creation_date": 1429706130, "last_edit_date": 1429709191, "question_id": 29797777, "link": "https://stackoverflow.com/questions/29797777/difference-between-stdin-and-stdin", "title": "Difference between `STDIN` and `$stdin`", "body": "<p>I wonder if there is any real difference between <code>STDIN</code> and <code>$stdin</code>. I do in irb:</p>\n\n<pre><code>STDIN == $stdin\n</code></pre>\n\n<p>and get back <code>true</code>. Are they just two names for the same thing? Or is there some difference?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1429706055, "post_id": 29797691, "comment_id": 47723537, "body": "You described the difference between these expressions quite precisely."}, {"owner": {"reputation": 2875, "user_id": 2277437, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9fea26c809377547872436e065a627f6?s=128&d=identicon&r=PG", "display_name": "Mikhail Janowski", "link": "https://stackoverflow.com/users/2277437/mikhail-janowski"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1429708767, "post_id": 29797691, "comment_id": 47725808, "body": "If presence uses <code>blank?</code> then surely <code>presence: true</code> means <code>foo</code> can not be nil and <code>presence: false</code> means <code>foo</code> can be nil. But when I use <code>presence: false</code> and <code>foo</code> is nil it fails."}], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 2, "last_activity_date": 1429706176, "creation_date": 1429706176, "answer_id": 29797793, "question_id": 29797691, "link": "https://stackoverflow.com/questions/29797691/difference-between-the-presence-and-allow-blank-validators-in-rails/29797793#29797793", "title": "Difference between the presence and allow_blank validators in Rails?", "body": "<p><code>allow_blank</code> only validates <code>nil</code>, <code>presence</code> validates <code>nil</code> as well as <code>empty</code></p>\n"}, {"comments": [{"owner": {"reputation": 15789, "user_id": 650475, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Feoda.png?s=128&g=1", "display_name": "Grant Birchmeier", "link": "https://stackoverflow.com/users/650475/grant-birchmeier"}, "edited": false, "score": 0, "creation_date": 1559774548, "post_id": 29801411, "comment_id": 99529307, "body": "So what <i>does</i> <code>validates :foo, presence: false</code> validate, then?"}, {"owner": {"reputation": 4999, "user_id": 4151953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d405a824f3f34d13b9e57532532f99?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Babio", "link": "https://stackoverflow.com/users/4151953/alejandro-babio"}, "reply_to_user": {"reputation": 15789, "user_id": 650475, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Feoda.png?s=128&g=1", "display_name": "Grant Birchmeier", "link": "https://stackoverflow.com/users/650475/grant-birchmeier"}, "edited": false, "score": 1, "creation_date": 1559822488, "post_id": 29801411, "comment_id": 99544576, "body": "It does Nothing. This line of <a href=\"https://github.com/rails/rails/blob/b13a5cb83ea00d6a3d71320fd276ca21049c2544/activemodel/lib/active_model/validations/validates.rb#L115\" rel=\"nofollow noreferrer\">code</a> does nothing if <code>option</code> is <code>false</code>. Because, <code>validations</code> in line 114 is <code>{precence: false}</code>. Then <code>:foo</code> is always valid. Hope it helps."}], "tags": [], "owner": {"reputation": 4999, "user_id": 4151953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d405a824f3f34d13b9e57532532f99?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Babio", "link": "https://stackoverflow.com/users/4151953/alejandro-babio"}, "is_accepted": false, "score": 4, "last_activity_date": 1458908149, "last_edit_date": 1458908149, "creation_date": 1429714460, "answer_id": 29801411, "question_id": 29797691, "link": "https://stackoverflow.com/questions/29797691/difference-between-the-presence-and-allow-blank-validators-in-rails/29801411#29801411", "title": "Difference between the presence and allow_blank validators in Rails?", "body": "<p>First case:</p>\n\n<pre><code>validates :foo, presence: false\n</code></pre>\n\n<p>it does not validate the presence of <code>:foo</code> at all. </p>\n\n<p><code>nil, '', 'anything'</code> are all valid.</p>\n\n<p>Second case: <code>:allow_blank</code> is an option, not a validator. </p>\n\n<p>It skips validation if the attribute is blank (more <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates\" rel=\"nofollow\">here</a>). </p>\n\n<p>If you want to know how it works, you can see the <a href=\"https://github.com/rails/rails/blob/2bb0abbec0e4abe843131f188129a1189b1bf714/activemodel/lib/active_model/validator.rb#L150\" rel=\"nofollow\">code here</a>. </p>\n\n<p>Before call the selected validator, it checks the attribute is not blank, if it's then skip validation. </p>\n\n<p>The only reason why it works as a validator is the way that source code is written. </p>\n\n<p>At any moment Rails' team can change the code and <code>:allow_blank</code> stop working as a validator.</p>\n"}], "owner": {"reputation": 2875, "user_id": 2277437, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9fea26c809377547872436e065a627f6?s=128&d=identicon&r=PG", "display_name": "Mikhail Janowski", "link": "https://stackoverflow.com/users/2277437/mikhail-janowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3622, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1458908149, "creation_date": 1429705902, "question_id": 29797691, "link": "https://stackoverflow.com/questions/29797691/difference-between-the-presence-and-allow-blank-validators-in-rails", "title": "Difference between the presence and allow_blank validators in Rails?", "body": "<p>I'm trying to figure out the difference between:</p>\n\n<pre><code>validates :foo, presence: false\nvalidates :foo, allow_blank: true\n</code></pre>\n\n<p>When I use presence: false validation fails but when I use allow_blank: true it does not. According to the docs <a href=\"http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_presence_of\" rel=\"noreferrer\">http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_presence_of</a> uses the blank? method. Can someone please explain the difference?</p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429705719, "post_id": 29797566, "comment_id": 47723253, "body": "Wrap them in a method and return from that. Or use throw/catch."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429705924, "post_id": 29797566, "comment_id": 47723421, "body": "Ya it&#39;s a good idea, but is there any other way to solve my problem."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429705954, "post_id": 29797566, "comment_id": 47723460, "body": "What do you mean? There are two other ways right there."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706024, "post_id": 29797566, "comment_id": 47723514, "body": "I don&#39;t want to raise any exception. I want to know any other logics to do this."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706084, "post_id": 29797566, "comment_id": 47723559, "body": "throw/catch is not exception handling. You confused them with raise/rescue."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706300, "post_id": 29797566, "comment_id": 47723740, "body": "Ya i agree my mistake. Is there a way to do this without raise and more than one break . Also i agree the answer you gave is very good. But i am looking, is there any other way to solve this problem. I mean any ruby command can do this."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706389, "post_id": 29797566, "comment_id": 47723809, "body": "Not sure what you mean. If you want the functionality (breaking out of several loops), you have it in my answer. throw/catch is such command."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1429706409, "post_id": 29797566, "comment_id": 47723823, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1352120/how-to-break-outer-cycle-in-ruby\">How to break outer cycle in Ruby?</a> ...Maybe I should have Googled for duplicates before failing at answering. Oops."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706566, "post_id": 29797566, "comment_id": 47723950, "body": "Ya you are right , it is the best solution. @SergioTulentsev"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1429706638, "post_id": 29797566, "comment_id": 47724012, "body": "Thanks for helping me @QPaysTaxes"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706666, "post_id": 29797566, "comment_id": 47724046, "body": "also thanks  @SergioTulentsev for your answer"}], "answers": [{"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429705932, "post_id": 29797629, "comment_id": 47723431, "body": "@SergioTulentsev ...Nope, I didn&#39;t. Lemme figure that out."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1429706389, "post_id": 29797629, "comment_id": 47723810, "body": "There, now my answer is functionally identical to Sergio&#39;s because he was faster at typing it up, and I was busy looking at the Edit Post screen, not the answers. Well, it&#39;s got some extra stuff, too."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429706666, "post_id": 29797629, "comment_id": 47724047, "body": "See, now you have more stuff :)"}], "tags": [], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "is_accepted": false, "score": 1, "last_activity_date": 1429706648, "last_edit_date": 1429706648, "creation_date": 1429705781, "answer_id": 29797629, "question_id": 29797566, "link": "https://stackoverflow.com/questions/29797566/is-there-a-way-to-exit-two-loops-by-single-command-in-ruby/29797629#29797629", "title": "Is there a Way To Exit Two Loops by Single Command In Ruby?", "body": "<p>Alright, so apparently boolean flags are a no-go. Oops.</p>\n\n<p>The other thing that pops to mind is catching an error, but you said you don't want to do that, or wrap it in a method and return. Honestly, there doesn't seem to be a way, but here's the simplest I could come up with:</p>\n\n<pre><code>catch (:exit) do\n    while true\n        while true\n            throw :exit if condition\n        end\n    end\nend\n</code></pre>\n\n<p>You could <em>also</em> throw an exception, but that seems dirty. Here's the code to do it, though:</p>\n\n<pre><code>begin\n    while true\n        while true\n            raise \"Exiting loops\" if condition\n        end\n    end\nrescue\n    #Code to go after the loop\nend\n</code></pre>\n\n<p>Lastly, you could wrap the whole thing in a method and return from that method:</p>\n\n<pre><code>def my_descriptive_method_name()\n    while true\n        while true\n            return if condition\n        end\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1429706221, "post_id": 29797737, "comment_id": 47723680, "body": "...Gosh darnit, you just <i>had</i> to write that up in the time I spent not reading the post, didn&#39;t you?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1429706309, "post_id": 29797737, "comment_id": 47723746, "body": "I didn&#39;t know throw/catch was distinct from exceptions until... oh, about three minutes ago. I&#39;m too used to Java."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 7, "last_activity_date": 1429707232, "last_edit_date": 1429707232, "creation_date": 1429706035, "answer_id": 29797737, "question_id": 29797566, "link": "https://stackoverflow.com/questions/29797566/is-there-a-way-to-exit-two-loops-by-single-command-in-ruby/29797737#29797737", "title": "Is there a Way To Exit Two Loops by Single Command In Ruby?", "body": "<p>You know what's better than using only one <code>break</code>? Not using any at all! :)</p>\n\n<p>Little-used <code>throw/catch</code> is good here</p>\n\n<pre><code>catch(:done) do \n  while cond1\n    while cond2\n      throw :done if condition\n    end\n  end\nend\n</code></pre>\n\n<p>For more information, see the docs on <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-throw\" rel=\"nofollow\"><code>throw</code></a> and <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-catch\" rel=\"nofollow\"><code>catch</code></a>.</p>\n"}], "owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 29797737, "answer_count": 2, "score": 3, "last_activity_date": 1465461919, "creation_date": 1429705618, "last_edit_date": 1465461919, "question_id": 29797566, "link": "https://stackoverflow.com/questions/29797566/is-there-a-way-to-exit-two-loops-by-single-command-in-ruby", "title": "Is there a Way To Exit Two Loops by Single Command In Ruby?", "body": "<p>Here is the  Sample code,</p>\n\n<pre><code>while true\n   while true\n      exit all loops when condition true\n   end\nend\n</code></pre>\n\n<p>Can someone tell me if is it possible here to exit first loop when second loop breaks, but then I want to use only one break command and no raise.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 1, "creation_date": 1429705150, "post_id": 29797222, "comment_id": 47722765, "body": "Check <a href=\"http://stackoverflow.com/questions/1388302/create-option-on-the-fly-with-jquery\">this</a> and create new options using JS"}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 3084767, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d173964ee40eeb85da3facfc51b7cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/3084767/robert"}, "edited": false, "score": 0, "creation_date": 1429708473, "post_id": 29797989, "comment_id": 47725533, "body": "how to change <code>&lt;%= f.select :category_cont, @categories, :include_blank =&gt; true %&gt;</code> to be able to use selectize?"}, {"owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "reply_to_user": {"reputation": 475, "user_id": 3084767, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d173964ee40eeb85da3facfc51b7cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/3084767/robert"}, "edited": false, "score": 0, "creation_date": 1429709445, "post_id": 29797989, "comment_id": 47726420, "body": "its applied to select tag so if your have  :html=&gt;{:class=&gt;&quot;selectize&quot;}  you can use $(&quot;.selectize&quot;).selectize({     create: true,     sortField: &#39;text&#39; });"}], "tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": true, "score": 0, "last_activity_date": 1429706656, "creation_date": 1429706656, "answer_id": 29797989, "question_id": 29797222, "link": "https://stackoverflow.com/questions/29797222/ruby-on-rails-drop-down-with-add-new-element/29797989#29797989", "title": "Ruby on Rails - drop down with add new element", "body": "<p>Check this <a href=\"http://brianreavis.github.io/selectize.js/\" rel=\"nofollow noreferrer\">Selectize.js</a>  </p>\n\n<p>Search for  \"Single Item Select\" </p>\n\n<p>Check here when you choose option not exist it suggest to add it to options</p>\n\n<p><img src=\"https://i.stack.imgur.com/rB6jL.png\" alt=\"Check here when you choose option not exist it suggest to add it to options\"></p>\n"}, {"tags": [], "owner": {"reputation": 475, "user_id": 3084767, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d173964ee40eeb85da3facfc51b7cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/3084767/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1429713871, "creation_date": 1429713871, "answer_id": 29801148, "question_id": 29797222, "link": "https://stackoverflow.com/questions/29797222/ruby-on-rails-drop-down-with-add-new-element/29801148#29801148", "title": "Ruby on Rails - drop down with add new element", "body": "<p>app/javascript/application.js:</p>\n\n<pre><code>//= require_tree .\n//= require selectize\n\n$(function() {\n  $('#category-select').selectize({\n    create: true,\n    sortField: 'text'\n  });\n});\n</code></pre>\n\n<p>application.css:</p>\n\n<pre><code>*= require selectize\n*= require selectize.default\n</code></pre>\n\n<p>my form (view):</p>\n\n<pre><code>&lt;%= f.select( \n        :category, \n        @categories, \n        {}, \n        {id: 'category-select' }\n    ) %&gt;\n</code></pre>\n\n<p>did the trick.</p>\n"}], "owner": {"reputation": 475, "user_id": 3084767, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5d173964ee40eeb85da3facfc51b7cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/3084767/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 1, "accepted_answer_id": 29797989, "answer_count": 2, "score": 0, "last_activity_date": 1429713871, "creation_date": 1429704780, "question_id": 29797222, "link": "https://stackoverflow.com/questions/29797222/ruby-on-rails-drop-down-with-add-new-element", "title": "Ruby on Rails - drop down with add new element", "body": "<p>Standard dropdown:</p>\n\n<p><code>&lt;%= f.select :category_cont, @categories, :include_blank =&gt; true %&gt;</code></p>\n\n<p>Now, I want to be able not only to pick categories from dropdown menu but also add new category on the fly. Of course I can have <code>&lt;%= f.text_area :category %&gt;</code> next to my dropdown menu but it does not seem to be very elegant.\nIs there any way to be able to chose values from the pull down menu but also to add new if required?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1429708991, "post_id": 29797282, "comment_id": 47726012, "body": "Sorry, but I didn&#39;t get your point, how user_preferences is a has_many association"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "reply_to_user": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1429709177, "post_id": 29797282, "comment_id": 47726191, "body": "Right now I&#39;m guessing <code>has_many :user_preferences</code> (plural) is also defined in your <code>User</code> class, as well as the <code>has_one :user_preferences</code> (singular). If this is not the case, post the code from your <code>User</code> model too, then I can help you better."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1429709557, "post_id": 29797282, "comment_id": 47726530, "body": "I added the User model"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "reply_to_user": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1429709868, "post_id": 29797282, "comment_id": 47726768, "body": "In Rails, has_many associations have plural names (<code>user_preferences</code>) whereas has_one associations have singular names (<code>user_preference</code>). Judging by the code you posted (<code>user.preferences.title</code>) you initially had a has_many association which you were accessing. You can find more information about associations in the <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-one-association\" rel=\"nofollow noreferrer\">Rails documentation</a>."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1429710106, "post_id": 29797282, "comment_id": 47726949, "body": "leave apart setting the value from console but through form it has to save my attribute in database, so where I am doing mistake in code"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "reply_to_user": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1429711933, "post_id": 29797282, "comment_id": 47728531, "body": "Are you still getting the <code>NoMethodError</code> error or is it just not saving the value in the database? If you&#39;re having a different problem now, please ask a new question."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "edited": false, "score": 0, "creation_date": 1429715069, "post_id": 29797282, "comment_id": 47731274, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/75945/discussion-between-cyborg-and-fivedigit\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "is_accepted": false, "score": 1, "last_activity_date": 1429704924, "creation_date": 1429704924, "answer_id": 29797282, "question_id": 29796734, "link": "https://stackoverflow.com/questions/29796734/unable-to-insert-data-in-table-using-form-to-submit-data/29797282#29797282", "title": "Unable to insert data in table using form to submit data", "body": "<p>You're accessing the wrong association on <code>user</code>:</p>\n\n<pre><code>user.user_preferences.title = \"MyTitle\"\n</code></pre>\n\n<p><code>user_preferences</code> is a <code>has_many</code> association, and returns multiple objects. The error itself also mentions this (something like <code>ActiveRecord_Associations_CollectionProxy</code>).</p>\n\n<p>Simply access the <code>has_one</code> association and it will work:</p>\n\n<pre><code>user.user_preference.title = \"MyTitle\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": false, "score": 0, "last_activity_date": 1429705317, "last_edit_date": 1429705317, "creation_date": 1429704949, "answer_id": 29797297, "question_id": 29796734, "link": "https://stackoverflow.com/questions/29796734/unable-to-insert-data-in-table-using-form-to-submit-data/29797297#29797297", "title": "Unable to insert data in table using form to submit data", "body": "<p>for the console part its not a javascript if you want to set to relation you have to use a variabel to assign, and not to use user_preference(s) note the s and its has_one relation and it should be user_preference and in your User Model it should be </p>\n\n<pre><code># User Model \nhas_one :user_preference\n\n# Console \nuser = User.first\npreferences = user.user_preference\npreferences.title = \"MyTitle\"\npreferences.save\nuser.reload.preferences.title  # should be \"MyTitle\"\n</code></pre>\n"}], "owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429709308, "creation_date": 1429703648, "last_edit_date": 1429709308, "question_id": 29796734, "link": "https://stackoverflow.com/questions/29796734/unable-to-insert-data-in-table-using-form-to-submit-data", "title": "Unable to insert data in table using form to submit data", "body": "<p>I am unable to insert data in user_preferences table where as I am getting all the attributes in params. I tried inserting value from console by following way since association between User has_one user_preference and UserPreference belongs_to User:</p>\n\n<pre><code>user = User.find(1)\nuser.user_preferences.title = \"MyTitle\"\n</code></pre>\n\n<p>I am getting undefined method \"title\"</p>\n\n<p><strong>user_preference.rb</strong></p>\n\n<pre><code>class UserPreference &lt; ActiveRecord::Base\n    belongs_to :user\n\n    def self.bgcolor_options\n      [[\"Orange\", \"#FF3300\"], [\"Green\", \"#00FF00\"], [\"Blue\", \"#0000FF\"], [\"Pink\", \"#FF0066\"], [\"Yellow\", \"#FFFF00\"], [\"White\", \"#FFFFFF\"]]\n    end\n    def self.font_options\n        [[\"Times New Roman\", \"Times New Roman\"], [\"Verdana\", \"Verdana\"],[\"Arial\", \"Arial\"],[\"sans-serif\", \"sans-serif\"]]\n    end\nend\n</code></pre>\n\n<p><strong>user_preferences_controller.rb</strong></p>\n\n<pre><code>class UserPreferencesController &lt; ApplicationController\n    def new\n        @user_preference = UserPreference.new\n    end\n\n    def create\n        @user_preference = UserPreference.new(user_pref_params)\n        @user_preference.save unless user_signed_in?\n        render 'user_preferences/new'\n    end\n    def edit\n    end\n    def update\n    end\n\n    private\n    def user_pref_params\n        params.require(:user_preference).permit(:title, :bgcolor, :font, :description)\n    end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  resources :user_preferences\n  post \"/user_preferences/new\"\n  devise_for :users\n  devise_scope :user do\n    authenticated :user do\n      root :to =&gt; 'user_preferences#new', as: :authenticated_root\n    end\n    unauthenticated :user do\n      root :to =&gt; 'devise/registrations#new', as: :unauthenticated_root\n    end\n  end\n</code></pre>\n\n<p><strong>user_preferences/new.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for @user_preference, :url =&gt; { :action =&gt; \"create\" }  do |u|%&gt;\n &lt;div style=\"background-color:#{current_user.user_preference.bgcolor.nil? ? '#FFFFFF' : current_user.user_preference.bgcolor}\"&gt;\n &lt;p&gt;\n    &lt;%= u.label :title %&gt;&lt;br&gt;\n    &lt;%= u.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= u.label :description %&gt;&lt;br&gt;\n    &lt;%= u.text_field :description %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt; &lt;%= u.label :back_ground_color %&gt;&lt;br&gt;\n    &lt;%= u.select :bgcolor, options_for_select(UserPreference.bgcolor_options) %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= u.label :font %&gt;&lt;br&gt;\n    &lt;%= u.select :font, options_for_select(UserPreference.font_options) %&gt;\n\n  &lt;/p&gt;\n\n &lt;br &gt;\n  &lt;p&gt;\n    &lt;%= u.submit %&gt;\n  &lt;/p&gt;\n  &lt;hr &gt;\n  &lt;div style=\"background: #{current_user.user_preferences.bgcolor};\"&gt;&lt;/div&gt;\n  &lt;div style=\"background-color:#{current_user.user_preferences.font.nil? ? 'Arial' : current_user.font}\"&gt;\n    This is the changes made in background\n  &lt;/div&gt;\n\n&lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150422034042) do\n\n  create_table \"user_preferences\", force: :cascade do |t|\n    t.text     \"title\"\n    t.string   \"font\"\n    t.text     \"description\"\n    t.string   \"bgcolor\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n    t.integer  \"user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n\nend\n</code></pre>\n\n<p>Adding <strong>User.rb code</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  has_one :user_preference\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "amazon-s3", "carrierwave"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1429705643, "post_id": 29796637, "comment_id": 47723200, "body": "Hartl&#39;s Rails tutorial has a section (11.4) on file storage which I found helpful.  Just make sure you set up an AWS policy for S3 or you will get 403s."}], "answers": [{"comments": [{"owner": {"reputation": 160, "user_id": 1716055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWiHl.jpg?s=128&g=1", "display_name": "sancowinx", "link": "https://stackoverflow.com/users/1716055/sancowinx"}, "edited": false, "score": 0, "creation_date": 1429785378, "post_id": 29818299, "comment_id": 47767986, "body": "Thanks for pointing out. Didn&#39;t notice there was a README page specifically for v0.10.0. Decided to follow the <a href=\"http://www.rubydoc.info/gems/carrierwave#Using_Amazon_S3\" rel=\"nofollow noreferrer\">rubydoc.info</a>. I was able to run a rails server now but has to change the rails version to <code>gem &#39;rails&#39;</code> instead of <code>gem &#39;rails&#39;, &#39;4.2.1&#39;</code>. Now I got the error <code>break from proc-closure</code> instead. But rails server can eventually run now anyway."}, {"owner": {"reputation": 13563, "user_id": 2790174, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78ecc89e845b86c885f53f24981fea44?s=128&d=identicon&r=PG&f=1", "display_name": "NoDisplayName", "link": "https://stackoverflow.com/users/2790174/nodisplayname"}, "edited": false, "score": 0, "creation_date": 1430848204, "post_id": 29818299, "comment_id": 48234645, "body": "I am not sure but if you&#39;re using the documentation for 0.10.0 version, you probably don&#39;t wanna put &#39;gem &quot;fog&quot;, &quot;~&gt; 1.3.1&#39;  to your Gemfile because this version seems to be very old, so just use &#39;gem &quot;fog&quot;&#39;"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 3, "last_activity_date": 1429779027, "creation_date": 1429779027, "answer_id": 29818299, "question_id": 29796637, "link": "https://stackoverflow.com/questions/29796637/unable-to-start-rails-app-after-adding-carrierwave-initializer-for-amazon-s3/29818299#29818299", "title": "unable to start rails app after adding carrierwave initializer for amazon s3", "body": "<p>The issue is that you're using the currently released version of carrierwave but following the documentation for the master - the two are over a year apart. You can read the README for 0.10.0 on github (<a href=\"https://github.com/carrierwaveuploader/carrierwave/blob/v0.10.0/README.md\" rel=\"nofollow\">https://github.com/carrierwaveuploader/carrierwave/blob/v0.10.0/README.md</a>) or via <a href=\"http://www.rubydoc.info/gems/carrierwave\" rel=\"nofollow\">rubydoc.info</a>. You'll need to either switch to the master version of carrier wave or modify your code to match the older readme.</p>\n\n<p>fog is a gem that attempts to provide a common interface to main cloud providers (AWS, rackspace, google compute etc.), however a consequence of that was that the gem was getting pretty big and that most users would actually only be using a small portion of it. A few months ago the decision was taken to split fog into fog-core, which contains code common to all the providers and then provider specific gems. </p>\n\n<p>fog-aws is the gem that has the AWS specific code (and thus S3). The fog gem still exists, for backwards compatibility but just pulls in all of the extracted gems (it still has some providers in it that have not yet been extracted).</p>\n\n<p>The <code>fog_provider</code> setting in newer version of carrier wave allow you to control whether carrierwave will try and load the legacy fog gem and all of its providers or just a specific one such as fog-aws.</p>\n"}], "owner": {"reputation": 160, "user_id": 1716055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWiHl.jpg?s=128&g=1", "display_name": "sancowinx", "link": "https://stackoverflow.com/users/1716055/sancowinx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1840, "favorite_count": 0, "accepted_answer_id": 29818299, "answer_count": 1, "score": 1, "last_activity_date": 1429779027, "creation_date": 1429703382, "last_edit_date": 1495542115, "question_id": 29796637, "link": "https://stackoverflow.com/questions/29796637/unable-to-start-rails-app-after-adding-carrierwave-initializer-for-amazon-s3", "title": "unable to start rails app after adding carrierwave initializer for amazon s3", "body": "<p>I'm trying to create an rails app to upload file to S3 using carrierwave. I follow the instructions from: <a href=\"https://github.com/carrierwaveuploader/carrierwave#using-amazon-s3\" rel=\"nofollow noreferrer\">https://github.com/carrierwaveuploader/carrierwave#using-amazon-s3</a>. For the local uploading is working fine. But when it comes to S3, it throws this error:</p>\n\n<pre><code>bin/rails:6: warning: already initialized constant APP_PATH\n/Users/sancowinx/Code/rails/fileuploadercarrierwave/bin/rails:6: warning: previous definition of APP_PATH was here\n</code></pre>\n\n<p>after searching from the web I found that there is also rubygem named <code>fog</code> (I was using <code>fog-aws</code>, according to the instructions of the carrierwave with S3 I mention above). Then, I try changing to use rubygem <code>fog</code> instead. Also throws an error. But now it throws exception for <code>undefined method</code> instead:</p>\n\n<pre><code>/Users/sancowinx/Code/rails/fileuploadercarrierwave/config/initializers/carrierwave.rb:2:in `block in &lt;top (required)&gt;': undefined method `fog_provider=' for CarrierWave::Uploader::Base:Class (NoMethodError)\n</code></pre>\n\n<p>for above exception full log: <a href=\"http://pastebin.com/2AiepK7w\" rel=\"nofollow noreferrer\">http://pastebin.com/2AiepK7w</a>  </p>\n\n<p>I also found the <a href=\"https://stackoverflow.com/questions/23402820/rails-server-bin-rails6-warning-already-initialized-constant-app-path-error\">similar question here</a>. Already follow an instruction but doesn't get me anywhere.</p>\n\n<p>Everything runs on ruby version: 2.2.1, rails version: 4.2.1</p>\n\n<p>Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '4.2.1'\ngem 'sqlite3'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'bootstrap-sass', '~&gt; 3.3.3'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'web-console', '~&gt; 2.0'\n  gem 'spring'\n  gem 'better_errors'\n  gem 'binding_of_caller'\nend\n\ngem 'fog-aws'\ngem 'carrierwave', '~&gt; 0.10.0'\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>class S3Post &lt; ActiveRecord::Base\n  mount_uploader :attachment, S3PostUploader\n  validates :name, presence: true # validates names\nend\n</code></pre>\n\n<p>Table schema</p>\n\n<pre><code>  create_table \"s3_posts\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"attachment\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>class S3PostsController &lt; ApplicationController\n  def index\n    @s3posts = S3Post.all\n  end\n\n  def new\n    @s3post = S3Post.new\n  end\n\n  def create\n    @s3post = S3Post.new(s3post_params)\n\n    if @s3post.save\n      redirect_to s3_posts_path, notice: \"The S3Post #{@s3post.name} has been uploaded.\"\n    else\n      render 'new'\n    end\n  end\n\n  def destroy\n    @s3post = S3Post.find(params[:id])\n    @s3post.destroy\n\n    redirect_to s3_posts_path, notice: \"The S3Post #{@s3post.name} has been deleted.\"\n  end\n\n  private\n    def s3post_params\n      params.require(:s3_post).permit(:name,:attachment)\n    end\nend\n</code></pre>\n\n<p>Uploader</p>\n\n<pre><code># encoding: utf-8\n\nclass S3PostUploader &lt; CarrierWave::Uploader::Base\n\n  storage :fog\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n\nend\n</code></pre>\n\n<p>config/initializer/carrierwave.rb  </p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_provider = 'fog-aws'\n  config.fog_credentials = {\n    :provider               =&gt; 'AWS',\n    :aws_access_key_id      =&gt; ENV['S3_KEY'],\n    :aws_secret_access_key  =&gt; ENV['S3_SECRET']\n  }\n  config.fog_directory  = ENV['S3_BUCKET']\nend\n</code></pre>\n\n<p>PS. I store AWS key in my ~/.bash_profile instead of hardcoding.</p>\n\n<p>I've tried uninstall/reinstall <code>fog-aws</code>, <code>carrierwave</code> gem but still cannot make it working. Can anybody help find what I am doing wrong here?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rails-activerecord", "rails-api"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4141088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eF472.jpg?s=128&g=1", "display_name": "Lukmanul Hakim", "link": "https://stackoverflow.com/users/4141088/lukmanul-hakim"}, "edited": false, "score": 0, "creation_date": 1429788391, "post_id": 29796512, "comment_id": 47770163, "body": "I am not able to follow quickly because I am a newbie to ROR. Even though I  have tried and posted above what I did. But I am getting some error says that the member_posts_attribute is unknown."}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "reply_to_user": {"reputation": 1, "user_id": 4141088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eF472.jpg?s=128&g=1", "display_name": "Lukmanul Hakim", "link": "https://stackoverflow.com/users/4141088/lukmanul-hakim"}, "edited": false, "score": 0, "creation_date": 1429825381, "post_id": 29796512, "comment_id": 47796478, "body": "should be from the camel cased has_many :MemberPosts. As a rule if thumbs, symbols in ruby are snake cased. the symbol :member_posts will be used to make a relationship to the model MemberPost. Might be a bit confusing, depending on your background. Let me know how you&#39;re doing."}], "tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 0, "last_activity_date": 1429703085, "creation_date": 1429703085, "answer_id": 29796512, "question_id": 29796190, "link": "https://stackoverflow.com/questions/29796190/how-to-insert-nested-data-in-one-go-using-ruby-on-rails-api/29796512#29796512", "title": "How to Insert Nested data in one go using Ruby on Rails API?", "body": "<p>You can achieve this using </p>\n\n<pre><code>class Category\n  has_many :sub_categories\n  accepts_nested_attributes_for :sub_categories\nend\n</code></pre>\n\n<p>I suggest you check <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html</a></p>\n\n<p>And be aware that your json sub_categories should be named sub_categories_attributes in order for this to work.</p>\n"}, {"comments": [{"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1429794366, "post_id": 29821278, "comment_id": 47774983, "body": "Any belongs_to, has_many, accepts_nested_attributes should be snake cased : examples : belongs_to :post, has_many :member_posts , etc..."}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1429795240, "post_id": 29821278, "comment_id": 47775715, "body": "Your json input is not ok as well, member_id and post_id should be in the same json object."}], "tags": [], "owner": {"reputation": 1, "user_id": 4141088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eF472.jpg?s=128&g=1", "display_name": "Lukmanul Hakim", "link": "https://stackoverflow.com/users/4141088/lukmanul-hakim"}, "is_accepted": false, "score": 0, "last_activity_date": 1429786285, "creation_date": 1429786285, "answer_id": 29821278, "question_id": 29796190, "link": "https://stackoverflow.com/questions/29796190/how-to-insert-nested-data-in-one-go-using-ruby-on-rails-api/29821278#29821278", "title": "How to Insert Nested data in one go using Ruby on Rails API?", "body": "<p>Thanks for your time <strong><em>floum</em></strong> </p>\n\n<p>I just tried following</p>\n\n<p><strong>Member Model</strong></p>\n\n<pre><code>class Member &lt; ActiveRecord::Base\n  has_many :MemberPosts\n  accepts_nested_attributes_for :MemberPosts\nend\n</code></pre>\n\n<p><strong>Post Model</strong></p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p><strong>MemberPosts Model</strong></p>\n\n<pre><code>class MemberPost &lt; ActiveRecord::Base\n  belongs_to :Member\n  belongs_to :Post\nend\n</code></pre>\n\n<p><strong>Members Controller</strong></p>\n\n<pre><code>class MembersController &lt; ApplicationController\ndef create\nmember = Member.create(member_params)\nend\ndef index\n    @members=Member.all\n    render json: @members\nend\nprivate\n  def memberparams\n    params.permit(:name,member_posts_attributes: [:member_id,:post_id])\n  end\nend\n</code></pre>\n\n<p><strong>Posts Controller</strong></p>\n\n<pre><code>class PostsController &lt; ApplicationController\ndef create\n   @post=Post.new(post_params)\n   if @post.save\n      render json: @post\n    else\n      render json: @post.errors, status: :unprocessable_entity\n    end\nend\ndef index\n    @posts=Post.all\n    render json: @posts\nend\nprivate\n  def post_params\n    params.require(:post).permit(:title)\n  end\nend\n</code></pre>\n\n<p><strong>Input Json</strong></p>\n\n<pre><code>{\n  \"name\": \"joe\", \"member_posts_attributes\": [\n    { \"member_id\": 1 },\n    { \"post_id\": 2 }\n\n  ]\n}\n</code></pre>\n\n<p>Please find where I gone wrong. Please keep in mind that I am newbie to Ruby on Rails. So Please elaborate your findings.</p>\n"}], "owner": {"reputation": 1, "user_id": 4141088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eF472.jpg?s=128&g=1", "display_name": "Lukmanul Hakim", "link": "https://stackoverflow.com/users/4141088/lukmanul-hakim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429786285, "creation_date": 1429702277, "question_id": 29796190, "link": "https://stackoverflow.com/questions/29796190/how-to-insert-nested-data-in-one-go-using-ruby-on-rails-api", "title": "How to Insert Nested data in one go using Ruby on Rails API?", "body": "<p>I am trying to insert associated data to DB. I have already created \"subcategory\" controller and inserted some data which contain id,name only. After that I need to create a \"category\" controller and need to insert data along with its subcategories. The relation should be in a third table. But I am not sure How can I make it live.</p>\n\n<p>For example :</p>\n\n<blockquote>\n  <p><strong>SubCategory</strong></p>\n  \n  <p>Id: 1, name: sub1</p>\n  \n  <p>Id: 2, name: sub2</p>\n  \n  <p><strong>Category</strong></p>\n  \n  <p>Id: 1, name: Category1</p>\n  \n  <p><strong>CategorySubcategory</strong></p>\n  \n  <p>Id: 1, category_id: 1, subcategory_id: 1</p>\n  \n  <p>Id: 1, category_id: 1, subcategory_id: 2</p>\n</blockquote>\n\n<p>This should be the entries in the join table (CategorySubcategory). It should happen when I create Category. I will pass subcategory ids as json to Category controller.</p>\n\n<p>Please help me to solve this problem. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1429703966, "post_id": 29796015, "comment_id": 47721768, "body": "can you share  <code>posts_controller</code>&#39;s show (or equivalent) method?"}, {"owner": {"reputation": 39, "user_id": 3555986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100002085083412/picture?type=large", "display_name": "user3555986", "link": "https://stackoverflow.com/users/3555986/user3555986"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1429705071, "post_id": 29796015, "comment_id": 47722701, "body": "Yes. <code>def index     pub = params[:published] == &quot;false&quot; ? false : true     @posts = Post.paginate(:page =&gt; params[:page]).order(&#39;created_at DESC&#39;).where(published: pub)     @bposts = Bpost.order(&#39;created_at DESC&#39;).all.limit(4)    end</code>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1429705277, "post_id": 29796015, "comment_id": 47722882, "body": "no, i mean single post. like this <code>@post = @posts.find(x)</code> or <code>@post = Post.find(x)</code>"}, {"owner": {"reputation": 39, "user_id": 3555986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100002085083412/picture?type=large", "display_name": "user3555986", "link": "https://stackoverflow.com/users/3555986/user3555986"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1429706694, "post_id": 29796015, "comment_id": 47724072, "body": "<code>@post = Post.friendly.find(params[:id])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1429710839, "last_edit_date": 1495540262, "creation_date": 1429708578, "answer_id": 29798783, "question_id": 29796015, "link": "https://stackoverflow.com/questions/29796015/how-to-customize-the-categories-and-sub-categories-in-rails/29798783#29798783", "title": "How to customize the categories and sub categories in rails", "body": "<p>change it  to <code>@post = Post.friendly.find_by_slug(params[:slug])</code>.<br>\n<p>also change your category and scategory controller like above. </p>\n\n<p>p.s. before these check you've <code>permit</code>ted <code>:slug</code> attribute. </p>\n\n<p>p.p.s. also consider <a href=\"https://stackoverflow.com/a/11571314/4481312\">this answer</a> for editing routes</p>\n"}], "owner": {"reputation": 39, "user_id": 3555986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100002085083412/picture?type=large", "display_name": "user3555986", "link": "https://stackoverflow.com/users/3555986/user3555986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429710839, "creation_date": 1429701837, "question_id": 29796015, "link": "https://stackoverflow.com/questions/29796015/how-to-customize-the-categories-and-sub-categories-in-rails", "title": "How to customize the categories and sub categories in rails", "body": "<p>Help!</p>\n\n<p>It is impossible to realize the right category and subcategory, please help me.</p>\n\n<p>My code</p>\n\n<p>Category.rb</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n\n  extend FriendlyId\n  friendly_id :title, use: :slugged\n\n  has_many  :scategories, :dependent =&gt; :destroy\n  validates :title, presence: true\n\nend\n</code></pre>\n\n<p>scategory.rb</p>\n\n<pre><code>class Scategory &lt; ActiveRecord::Base\n\n  extend FriendlyId\n  friendly_id :title, use: :slugged\n\n  belongs_to :category\n  has_many   :posts, :dependent =&gt; :destroy\n\nend\n</code></pre>\n\n<p>post.rb</p>\n\n<pre><code>  class Post &lt; ActiveRecord::Base  \n\n    belongs_to    :scategory\n    belongs_to    :user\n\n  end\n</code></pre>\n\n<p>_post.html.haml</p>\n\n<pre><code>.column4.post-block.item\n  / \u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \"lazy: true\" (\u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0431\u0430\u0433)\n  = link_to image_tag(post.post_cover.url(:medium)), post\n  .title\n    = link_to truncate(post.title, :length =&gt; 70), category_scategory_post_url(category_id: @category.slug, scategory_id: @scategory.slug, id: @post.slug)\n  -#\n    .description\n      = truncate(post.description, :length =&gt; 70)\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>  resources :categories do\n    resources :scategories do\n      resources :posts\n    end\n  end\n</code></pre>\n\n<p>Can not find a method of slug, how to properly do?</p>\n"}, {"tags": ["ruby", "metaprogramming", "immutability"], "comments": [{"owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "edited": false, "score": 0, "creation_date": 1429702539, "post_id": 29795526, "comment_id": 47720604, "body": "Why does it say <code>string</code> in the log in place of <code>name</code>?"}, {"owner": {"reputation": 3410, "user_id": 348482, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d503ef0fdc4b6e35f64bdd9013837bc?s=128&d=identicon&r=PG", "display_name": "Jonas Schubert Erlandsson", "link": "https://stackoverflow.com/users/348482/jonas-schubert-erlandsson"}, "reply_to_user": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "edited": false, "score": 0, "creation_date": 1429703053, "post_id": 29795526, "comment_id": 47720987, "body": "@Humza My specs uses different names than I used here. Fixed."}], "answers": [{"comments": [{"owner": {"reputation": 3410, "user_id": 348482, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d503ef0fdc4b6e35f64bdd9013837bc?s=128&d=identicon&r=PG", "display_name": "Jonas Schubert Erlandsson", "link": "https://stackoverflow.com/users/348482/jonas-schubert-erlandsson"}, "edited": false, "score": 0, "creation_date": 1429703229, "post_id": 29796478, "comment_id": 47721117, "body": "Ok, and from how it looks to me this is a language feature? Hence no way to override (even if I agree that that would probably be a bad id&#233;a :))."}, {"owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "reply_to_user": {"reputation": 3410, "user_id": 348482, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d503ef0fdc4b6e35f64bdd9013837bc?s=128&d=identicon&r=PG", "display_name": "Jonas Schubert Erlandsson", "link": "https://stackoverflow.com/users/348482/jonas-schubert-erlandsson"}, "edited": false, "score": 0, "creation_date": 1429703386, "post_id": 29796478, "comment_id": 47721272, "body": "TBH I haven&#39;t looked into it thoroughly enough to claim it to be a Ruby feature; but it does seem that way. I was trying to implement what you want through <code>method_missing</code> within <code>o.instance_eval</code> but it was yielding the same results."}, {"owner": {"reputation": 3410, "user_id": 348482, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d503ef0fdc4b6e35f64bdd9013837bc?s=128&d=identicon&r=PG", "display_name": "Jonas Schubert Erlandsson", "link": "https://stackoverflow.com/users/348482/jonas-schubert-erlandsson"}, "edited": false, "score": 0, "creation_date": 1429703464, "post_id": 29796478, "comment_id": 47721325, "body": "Yeah I went down that road first but it had some other problems as well. I looked it up, it&#39;s a language feature so no chance of an override. Thank you for the quick answer :)"}], "tags": [], "owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "is_accepted": true, "score": 4, "last_activity_date": 1429765953, "last_edit_date": 1429765953, "creation_date": 1429702990, "answer_id": 29796478, "question_id": 29795526, "link": "https://stackoverflow.com/questions/29795526/assignment-method-created-using-define-singleton-method-returns-the-wrong-value/29796478#29796478", "title": "Assignment method created using define_singleton_method returns the wrong value", "body": "<p>Turns out that the <code>=</code> methods always return the value being assigned.</p>\n\n<pre><code>o = Struct.new(:key).new(1)\no.define_singleton_method(\"something\") { @something }\no.define_singleton_method(\"something=\") do |v|\n  @something = v\n  return 6\nend\n</code></pre>\n\n<p>As you can see, I've 'fixed' the return value to <code>6</code> each time <code>something=</code> is called. Let's see if it works:</p>\n\n<pre><code>o.something = 1 #=&gt; outputs 1, not 6\no.something #=&gt; outputs 1, so the method did indeed run\n</code></pre>\n\n<p>Conclusion? My guess is that an <code>=</code> method will return the value that you are assigning through it. And IMO it's better this way; one reason would be to ensure proper functioning of assignment chains:</p>\n\n<pre><code>new_val = o.something = some_val\n</code></pre>\n"}], "owner": {"reputation": 3410, "user_id": 348482, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d503ef0fdc4b6e35f64bdd9013837bc?s=128&d=identicon&r=PG", "display_name": "Jonas Schubert Erlandsson", "link": "https://stackoverflow.com/users/348482/jonas-schubert-erlandsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 29796478, "answer_count": 1, "score": 4, "last_activity_date": 1429765953, "creation_date": 1429700658, "last_edit_date": 1592644375, "question_id": 29795526, "link": "https://stackoverflow.com/questions/29795526/assignment-method-created-using-define-singleton-method-returns-the-wrong-value", "title": "Assignment method created using define_singleton_method returns the wrong value", "body": "<h1>Background</h1>\n<p>The Entity class is a base class that gets inherited by several subclasses that holds entities received over a REST API. The entity classes are immutable and should return a new instance of themselves whenever a change is attempted.</p>\n<p>The Entity class has an <code>.update()</code> method that takes a hash of values to update, if the changes aren't really changes it returns itself and if there are real changes it returns a new instance of itself with the changes effected before instantiation.</p>\n<p>To be user friendly Entity also allows for direct assignment to properties (so that if a subclass of Entity has a name attribute you can do <code>instance.name = 'New Name'</code>) that also returns a new instance of the class. This is implemented in terms of update using dynamic methods that are created when the class is instantiated.</p>\n<p>And they are the problem.</p>\n<h1>Problem</h1>\n<p>The code in the Entity class looks, in part, like this (for a complete code listing and tests check out the Github repo: <a href=\"https://github.com/my-codeworks/fortnox-api.git\" rel=\"nofollow noreferrer\">https://github.com/my-codeworks/fortnox-api.git</a>):</p>\n<pre><code>require &quot;virtus&quot;\nrequire &quot;ice_nine&quot;\n\nclass Entity\n\n  extend Forwardable\n  include Virtus.model\n\n  def initialize( hash = {} )\n    super\n    create_attribute_setter_methods\n    IceNine.deep_freeze( self )\n  end\n\n  def update( hash )\n    attributes = self.to_hash.merge( hash )\n    return self if attributes == self.to_hash\n    self.class.new( attributes )\n  end\n\nprivate\n\n  def create_attribute_setter_methods\n    attribute_set.each do |attribute|\n      name = attribute.options[ :name ]\n\n      create_attribute_setter_method( name )\n    end\n  end\n\n  def create_attribute_setter_method( name )\n    self.define_singleton_method &quot;#{name}=&quot; do | value |\n      self.update( name =&gt; value )\n    end\n  end\n\nend\n</code></pre>\n<p>Doing this:</p>\n<pre><code>instance.update( name: 'New Name' )\n</code></pre>\n<p>and this:</p>\n<pre><code>instance.name = 'New Name'\n</code></pre>\n<p>Should be the same, literally since one is implemented in terms of the other.</p>\n<p>While <code>.update()</code> works perfectly the <code>.attr=()</code> methods return the value you assign.</p>\n<p>So in the above example <code>.update()</code> returns a new instance of the Entity subclass but <code>.attr=()</code> returns <code>'New Name'</code> ...</p>\n<p>I have tries capturing the output inside the <code>.attr=()</code> method and log it before returning so that I have this:</p>\n<pre><code>self.define_singleton_method &quot;#{name}=&quot; do | value |\n  p &quot;Called as :#{name}=, redirecting to update( #{name}: #{value} )&quot;\n  r = self.update( name =&gt; value )\n  p &quot;Got #{r} back from update&quot;\n  return r\nend\n</code></pre>\n<p>And the log lines say:</p>\n<pre><code> &quot;Called as :name=, redirecting to update( name: 'New Name' )&quot;\n &quot;Got #&lt;TestEntity:0x007ffedbd0ad18&gt; back from update&quot;\n</code></pre>\n<p>But all I get is the string <code>'New Name'</code>...</p>\n<p>My forehead is bloody and no posts I find show anything close to this. I bet I'm doing something wrong but I can't find it.</p>\n<h1>Getting dirty</h1>\n<p>The Github repo has tests in rspec that you can run, the failing ones are focused right now and some extra logging is in the Entity class to capture the different internal steps.</p>\n<p>Comments, links and/or pull requests are welcome.</p>\n"}, {"tags": ["ruby", "break"], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 3, "last_activity_date": 1429700859, "last_edit_date": 1429700859, "creation_date": 1429700305, "answer_id": 29795403, "question_id": 29795323, "link": "https://stackoverflow.com/questions/29795323/how-to-get-the-value-returned-by-break-in-while-loop/29795403#29795403", "title": "How to get the value returned by break in while loop", "body": "<p>The value passed to <code>break</code> becomes the value of the <code>while</code> loop expression.</p>\n\n<pre><code>i=10\nresult = while true\n           i += 1\n           break i if i % 7 == 0\n         end\nputs result # 14\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 29795403, "answer_count": 1, "score": 1, "last_activity_date": 1429700859, "creation_date": 1429700096, "last_edit_date": 1429700460, "question_id": 29795323, "link": "https://stackoverflow.com/questions/29795323/how-to-get-the-value-returned-by-break-in-while-loop", "title": "How to get the value returned by break in while loop", "body": "<p>Here is the sample code that returns a argument when it breaks the loop,</p>\n\n<pre><code>i=10\nwhile true\n   i += 1\n   break i if i % 7 == 0\nend\n</code></pre>\n\n<p>Can someone tell me how to get what value it returns, but is obvious the value is <code>i</code> (i.e 14). I want, how do I get the value without using the <code>i</code> value. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "edited": false, "score": 0, "creation_date": 1429700821, "post_id": 29795376, "comment_id": 47719303, "body": "So, by using $stdin.gets I eliminate some work? If I know that input will be from standard input instead of Command line argument to script"}, {"owner": {"reputation": 603, "user_id": 4763404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032340a79135fce4f67df23eecb6ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "FuRioN", "link": "https://stackoverflow.com/users/4763404/furion"}, "reply_to_user": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "edited": false, "score": 0, "creation_date": 1429713167, "post_id": 29795376, "comment_id": 47729644, "body": "Yes, if the input will be from the standard input I guess is better to use $stdin.gets."}], "tags": [], "owner": {"reputation": 603, "user_id": 4763404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032340a79135fce4f67df23eecb6ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "FuRioN", "link": "https://stackoverflow.com/users/4763404/furion"}, "is_accepted": true, "score": 5, "last_activity_date": 1429700244, "creation_date": 1429700244, "answer_id": 29795376, "question_id": 29795253, "link": "https://stackoverflow.com/questions/29795253/is-there-any-difference-between-stdin-gets-and-gets/29795376#29795376", "title": "Is there any difference between $stdin.gets and gets?", "body": "<p><code>gets</code> is <code>Kernel#gets</code>, it first tries to read the contents of files passed in through <code>ARGV</code>. If there are no files in <code>ARGV</code>, it will use standard input instead (at which point it's the same as <code>$stdin.gets</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1429703062, "post_id": 29795408, "comment_id": 47720995, "body": "<code>$stdin.gets</code> reads from <code>$stdin</code>, <code>Kernel#gets</code> reads from <code>ARGF</code>, that&#39;s an important distinction."}], "tags": [], "owner": {"reputation": 2643, "user_id": 289420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd45df315e2b93df1d56a6688fd6702?s=128&d=identicon&r=PG", "display_name": "EdvardM", "link": "https://stackoverflow.com/users/289420/edvardm"}, "is_accepted": false, "score": 1, "last_activity_date": 1430125378, "last_edit_date": 1430125378, "creation_date": 1429700318, "answer_id": 29795408, "question_id": 29795253, "link": "https://stackoverflow.com/questions/29795253/is-there-any-difference-between-stdin-gets-and-gets/29795408#29795408", "title": "Is there any difference between $stdin.gets and gets?", "body": "<p>By default puts, print, gets etc. work on stdin, and referring to globals (prefixed by '$') is kinda rare. To me it seems like it's idiomatic to not refer to $stdin explicitly.</p>\n\n<p>Update: as J\u00f6rg correctly pointed out, gets is sort of smart. According to docs (2.2.0)r:</p>\n\n<blockquote>\n  <p>Returns (and assigns to $_) the next line from the list of files in\n  ARGV (or $*), or from standard input if no files are present on the\n  command line</p>\n</blockquote>\n"}], "owner": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 29795376, "answer_count": 2, "score": 2, "last_activity_date": 1430125378, "creation_date": 1429699923, "question_id": 29795253, "link": "https://stackoverflow.com/questions/29795253/is-there-any-difference-between-stdin-gets-and-gets", "title": "Is there any difference between $stdin.gets and gets?", "body": "<p>I am going through Zed Shaw book \"Learn Ruby the Hard way\" and I wonder is there any difference between <strong>$stdin.gets</strong> and <strong>gets</strong>. If so which one I should prefer?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["php", "ruby", "curl"], "owner": {"reputation": 115, "user_id": 4817766, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/WAgOs.jpg?s=128&g=1", "display_name": "achyutdev", "link": "https://stackoverflow.com/users/4817766/achyutdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1429699409, "creation_date": 1429699409, "question_id": 29795049, "link": "https://stackoverflow.com/questions/29795049/change-php-curl-script-to-ruby", "title": "change php curl script to ruby", "body": "<p>I need to change following php script into ruby script. </p>\n\n<pre><code>$url = '&lt;ip&gt;/api/ticket/create';\n   $node_params = json_encode(array('type' =&gt; 'ticket',\n          'value1' =&gt; $var1,\n          'value2' =&gt; $var2,\n          'value3' =&gt; $var3\n        ));\n\n        $curl_node = curl_init($url);\n        $a1 = curl_setopt($curl_node, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\n        $a2 = curl_setopt($curl_node, CURLOPT_RETURNTRANSFER, true);\n        $a3 = curl_setopt($curl_node, CURLOPT_POST, true);\n        curl_setopt($curl_node, CURLOPT_POSTFIELDS, $node_params);\n\n        curl_setopt($curl_node, CURLOPT_FAILONERROR, TRUE);\n        $node_response = curl_exec($curl_node);\n\n        curl_close($curl_node);\n</code></pre>\n\n<p>Here i have done so far</p>\n\n<pre><code>  def create_ticket\n    node_params={\n       'type'       =&gt; 'ticket',\n      'value1'      =&gt; @var1,\n      'value2'      =&gt; @var2,\n      'value3'      =&gt; @var3\n    }.to_json\n    apiurl      = \"&lt;ip&gt;/api/ticket/create\"\n    easy        = Curl::Easy.new\n    easy.header_in_body = true\n    easy.url    = apiurl\n    result      = easy.http_post(apiurl,node_params)\n    puts result.inspect \n  end\n</code></pre>\n\n<p>but it's not working and i can't figure out the mistake. Help me guys. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "dns"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4102893, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-euD1PGdpq5g/AAAAAAAAAAI/AAAAAAAAABE/ciHeLqvi8Uw/photo.jpg?sz=128", "display_name": "Manuel Frigerio", "link": "https://stackoverflow.com/users/4102893/manuel-frigerio"}, "edited": false, "score": 0, "creation_date": 1429703126, "post_id": 29796331, "comment_id": 47721041, "body": "Hey Tanguy, thanks but this doesn&#39;t solve my problem. In fact I can use custom domains for the entire app and not for specific urls..."}, {"owner": {"reputation": 667, "user_id": 386050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5e7c9de76284b8e9164b7de23fd57c92?s=128&d=identicon&r=PG", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/386050/lorenz"}, "reply_to_user": {"reputation": 143, "user_id": 4102893, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-euD1PGdpq5g/AAAAAAAAAAI/AAAAAAAAABE/ciHeLqvi8Uw/photo.jpg?sz=128", "display_name": "Manuel Frigerio", "link": "https://stackoverflow.com/users/4102893/manuel-frigerio"}, "edited": false, "score": 0, "creation_date": 1507745240, "post_id": 29796331, "comment_id": 80337429, "body": "@ManuelFrigerio did you ever figure this out?"}], "tags": [], "owner": {"reputation": 133, "user_id": 4818268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3TrMb.png?s=128&g=1", "display_name": "Tanguy S", "link": "https://stackoverflow.com/users/4818268/tanguy-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1429702619, "creation_date": 1429702619, "answer_id": 29796331, "question_id": 29795012, "link": "https://stackoverflow.com/questions/29795012/setting-up-dynamic-custom-domains-on-heroku/29796331#29796331", "title": "Setting up dynamic custom domains on heroku", "body": "<p>i think you could use heroku gems to achieve this.</p>\n\n<p><a href=\"https://github.com/heroku/heroku.rb\" rel=\"nofollow\">https://github.com/heroku/heroku.rb</a></p>\n\n<p>with this gem you're able to manage your domain like this example</p>\n\n<p>Domains</p>\n\n<p>heroku.delete_domain(APP, 'example.com')   # remove the 'example.com' domain from the APP app\nheroku.get_domains(APP)                    # list configured domains for the APP app\nheroku.post_domain(APP, 'example.com')     # add 'example.com' domain to the APP app</p>\n\n<p>Check this article about Custom Domains on heroku dev site.\n<a href=\"https://devcenter.heroku.com/articles/custom-domains\" rel=\"nofollow\">https://devcenter.heroku.com/articles/custom-domains</a></p>\n"}], "owner": {"reputation": 143, "user_id": 4102893, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-euD1PGdpq5g/AAAAAAAAAAI/AAAAAAAAABE/ciHeLqvi8Uw/photo.jpg?sz=128", "display_name": "Manuel Frigerio", "link": "https://stackoverflow.com/users/4102893/manuel-frigerio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1429702619, "creation_date": 1429699300, "question_id": 29795012, "link": "https://stackoverflow.com/questions/29795012/setting-up-dynamic-custom-domains-on-heroku", "title": "Setting up dynamic custom domains on heroku", "body": "<p>I've got a simple Ruby on Rails applications where people can create events. The app is currently hosted on Heroku.</p>\n\n<p>I'd like users to set a custom domain and the app would automatically do the DNS redirecting.</p>\n\n<p><strong>An example.</strong><br/>\nMy website => mywebsite.com<br/>\nEvent Page => mywebsite.com/events/awesome-event<br/>\nUser sets a custom domain => userdomain.com/event-1<br/></p>\n\n<p>When people visit userdomain.com/event-1 they actually see mywebsite.com/events/awesome-event.</p>\n\n<p>How do I do that automatically, so that I don't have to change manually DNS settings (at least on my end) but the custom domain is just stored on the database?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mobile", "layout"], "comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1429699562, "post_id": 29795005, "comment_id": 47718347, "body": "Why don&#39;t you using <code>twitter-bootstrap</code>?"}, {"owner": {"reputation": 737, "user_id": 4757050, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8f17eec299ccddf9f84808550217e9c?s=128&d=identicon&r=PG&f=1", "display_name": "s-cho-m", "link": "https://stackoverflow.com/users/4757050/s-cho-m"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 1, "creation_date": 1429749916, "post_id": 29795005, "comment_id": 47751032, "body": "@Emu Because we are using different design between pc and mobile. We have our self&#39;s design and we are not using twitter-bootstrap."}], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 4757050, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8f17eec299ccddf9f84808550217e9c?s=128&d=identicon&r=PG&f=1", "display_name": "s-cho-m", "link": "https://stackoverflow.com/users/4757050/s-cho-m"}, "edited": false, "score": 1, "creation_date": 1429750144, "post_id": 29798766, "comment_id": 47751102, "body": "Thank you very much. But now we are design two different layout for pc and mobile. Even the feature are different. So we should try to find a way to deal both pc and mobile device."}, {"owner": {"reputation": 920, "user_id": 2483239, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/t0clj.jpg?s=128&g=1", "display_name": "Michael Feihstel", "link": "https://stackoverflow.com/users/2483239/michael-feihstel"}, "reply_to_user": {"reputation": 737, "user_id": 4757050, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8f17eec299ccddf9f84808550217e9c?s=128&d=identicon&r=PG&f=1", "display_name": "s-cho-m", "link": "https://stackoverflow.com/users/4757050/s-cho-m"}, "edited": false, "score": 2, "creation_date": 1429767402, "post_id": 29798766, "comment_id": 47756484, "body": "Ok, in that case, you might want to take a look at Action Pack Variants which does exactly what you had in mind and was introduced recently with Rails 4.1: <a href=\"http://guides.rubyonrails.org/4_1_release_notes.html#action-pack-variants\" rel=\"nofollow noreferrer\">See here</a>  In contrast to the Railscasts guide, this is a more recent and the recommended approach to achieve your goal. If possible, it&#39;s always preferable to stick with the best practices."}, {"owner": {"reputation": 737, "user_id": 4757050, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8f17eec299ccddf9f84808550217e9c?s=128&d=identicon&r=PG&f=1", "display_name": "s-cho-m", "link": "https://stackoverflow.com/users/4757050/s-cho-m"}, "edited": false, "score": 0, "creation_date": 1429837869, "post_id": 29798766, "comment_id": 47800690, "body": "Yes. I have found it. And it works well for me. Thank you very much:)"}], "tags": [], "owner": {"reputation": 920, "user_id": 2483239, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/t0clj.jpg?s=128&g=1", "display_name": "Michael Feihstel", "link": "https://stackoverflow.com/users/2483239/michael-feihstel"}, "is_accepted": true, "score": 2, "last_activity_date": 1429708541, "creation_date": 1429708541, "answer_id": 29798766, "question_id": 29795005, "link": "https://stackoverflow.com/questions/29795005/how-to-make-pc-and-mobile-layout-for-a-rails-application/29798766#29798766", "title": "How to make pc and mobile layout for a Rails application?", "body": "<p>Not trying to discourage you from following the tutorial, but if your goal is to adjust your app to small screens and their limitations, the approach of maintaining separate layouts/views is rather outdated. Your time would be better spent on learning responsive webdesign, which is the concept of letting page elements grow/shrink with the available screen size.</p>\n"}, {"tags": [], "owner": {"reputation": 737, "user_id": 4757050, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8f17eec299ccddf9f84808550217e9c?s=128&d=identicon&r=PG&f=1", "display_name": "s-cho-m", "link": "https://stackoverflow.com/users/4757050/s-cho-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1429766921, "creation_date": 1429766921, "answer_id": 29814447, "question_id": 29795005, "link": "https://stackoverflow.com/questions/29795005/how-to-make-pc-and-mobile-layout-for-a-rails-application/29814447#29814447", "title": "How to make pc and mobile layout for a Rails application?", "body": "<p>I found the right solution:</p>\n\n<blockquote>\n  <p><a href=\"http://guides.rubyonrails.org/4_1_release_notes.html\" rel=\"nofollow\">http://guides.rubyonrails.org/4_1_release_notes.html</a></p>\n</blockquote>\n\n<p><strong>2.3 Action Pack Variants</strong> is what I wanted.</p>\n\n<pre><code>request.variant\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 4757050, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8f17eec299ccddf9f84808550217e9c?s=128&d=identicon&r=PG&f=1", "display_name": "s-cho-m", "link": "https://stackoverflow.com/users/4757050/s-cho-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2055, "favorite_count": 0, "accepted_answer_id": 29798766, "answer_count": 2, "score": 1, "last_activity_date": 1429766921, "creation_date": 1429699266, "question_id": 29795005, "link": "https://stackoverflow.com/questions/29795005/how-to-make-pc-and-mobile-layout-for-a-rails-application", "title": "How to make pc and mobile layout for a Rails application?", "body": "<p>I have follow this tutorial to do:</p>\n\n<blockquote>\n  <p><a href=\"http://railscasts.com/episodes/199-mobile-devices?view=asciicast\" rel=\"nofollow\">http://railscasts.com/episodes/199-mobile-devices?view=asciicast</a></p>\n</blockquote>\n\n<p>Now I have <code>app/views/layouts/pc.html.erb</code> and <code>app/views/layouts/mobile.html.erb</code>.</p>\n\n<p>I tried to add these code to application_controller.rb:</p>\n\n<pre><code>private\n\ndef mobile_device?\n  if session[:mobile_param]\n    session[:mobile_param] == \"1\"\n  else\n    request.user_agent =~ /Mobile/\n  end\nend\n\ndef prepare_for_mobile\n  session[:mobile_param] = params[:mobile] if params[:mobile]\n  request.format = :mobile if mobile_device?\nend\n\nprotected\n\ndef layout_by_device\n  if mobile_device?\n    render layout: \"mobile\"\n  else\n    render layout: \"pc\"\n  end\nend\n</code></pre>\n\n<p>And in my products_controller.rb:</p>\n\n<pre><code>before_action :layout_by_device\n\ndef show\n  respond_to do |format|\n    format.html\n    format.mobile\n  end\nend\n</code></pre>\n\n<p>But I can only see my mobile layout's content, I can't see product page's content with <code>:yield</code>.</p>\n\n<p>If I remove <code>before_action :layout_by_device</code> and use <code>render layout: 'mobile'</code> in my products_controller.rb, I can see the product page's content but can't see the mobile layout's.</p>\n\n<p>Maybe this is about Rails' <code>respond_to</code> and <code>render</code>. How to do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1429698187, "post_id": 29794539, "comment_id": 47717283, "body": "It&#39;s only wild guess, but maybe validation fails?"}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1429698392, "post_id": 29794539, "comment_id": 47717453, "body": "validation does not fails. I am deleting it somewhere else to and it&#39;s being deleted. I had this problem at that point too but then I defined the relation. I just can&#39;t understand that why isn&#39;t it deleting it here"}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1429699242, "post_id": 29794539, "comment_id": 47718081, "body": "what is <code>corsponding_requests</code>? association or a field ? Show your <code>Bookmark</code> model"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1429699705, "post_id": 29794539, "comment_id": 47718460, "body": "update executes successfully only when all relevant validations passes...please check whether you are trying to save valid values and model.errors is empty or model.validate method is nil"}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "reply_to_user": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1429699935, "post_id": 29794539, "comment_id": 47718630, "body": "@Milind Bookmark.error returns this <code>#&lt;ActiveModel::Errors:0x007f51f871ba78 @base=#&lt;Bookmark _id: 5533bf1e6761720ce3350000, created_at: 2015-04-19 14:43:42 UTC, updated_at: 2015-04-19 14:43:53 UTC, user_id: BSON::ObjectId(&#39;553360746761720ce32a0000&#39;), request_id: BSON::ObjectId(&#39;5533bf0b6761720ce3340000&#39;), corsponding_requests: []&gt;, @messages={}&gt;</code> and model.validate returns true"}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "reply_to_user": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1429700009, "post_id": 29794539, "comment_id": 47718684, "body": "@lx00st it&#39;s a field. I have added the details of bookmark model"}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "reply_to_user": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1429707914, "post_id": 29794539, "comment_id": 47725071, "body": "@Milind I am passing all the validation in the validation it requires a user_id and request_id and I am passing a whole object and then I passed a hash so that if it was skipping something I would excitability put in it but it;s still not updating the database"}], "answers": [{"comments": [{"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "edited": false, "score": 0, "creation_date": 1431414137, "post_id": 29817297, "comment_id": 48473413, "body": "Thanks alot your solution helped. Can you tell how do I make a self relation like a request has many favorite request"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1429776351, "creation_date": 1429776351, "answer_id": 29817297, "question_id": 29794539, "link": "https://stackoverflow.com/questions/29794539/update-function-not-effecting-te-databaserails/29817297#29817297", "title": "update function not effecting te database(RAILS )", "body": "<p>It doesn't delete the object in the other mongo collection because mongoid has no idea that's what you want to do - as far as it's concerned you've just got an array of ids</p>\n\n<p>If you want mongoid to make that link for you then you need to setup a  <a href=\"http://mongoid.org/en/mongoid/docs/relations.html\" rel=\"nofollow\">relation</a> - what you have there looks like a one-sides n-n relation</p>\n"}], "owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 29817297, "answer_count": 1, "score": 0, "last_activity_date": 1429776351, "creation_date": 1429698142, "last_edit_date": 1429699458, "question_id": 29794539, "link": "https://stackoverflow.com/questions/29794539/update-function-not-effecting-te-databaserails", "title": "update function not effecting te database(RAILS )", "body": "<p>I am trying to delete an BSON id . It deletes the element from the object's array but does not effects the database. Can you please tell me what is it that I am doing wrong. Thanks </p>\n\n<pre><code>  def delete_bookmark\n    request_to_be_deleted = params[:d]\n    l = request_to_be_deleted.split(\"'\")\n    request_to_be_deleted = l[1]\n    request_bookmarks = params[:d1]\n    l = request_bookmarks.split(\"'\")\n    request_bookmarks = l[1]\n    b = Bookmark.where(request_id: request_bookmarks).first()\n    b1 = b\n    req = Request.find(request_to_be_deleted)\n    b1[:corsponding_requests].delete(req[:_id])\n\n    b1.update(Hash['corsponding_requests' , b1[:corsponding_requests]])\n    session[:request_bookmarks] = request_bookmarks\n    asd\n    render :action =&gt; \"bookmark\"\n  end\n</code></pre>\n\n<p>Bookmark Model</p>\n\n<pre><code>include Mongoid::Document\n  include Mongoid::Timestamps\n  field :user_id, type: Mongoid\n  field :request_id, type: Mongoid\n  field :corsponding_requests, type: Array\n\n  validates_presence_of :user_id , :request_id\n\n  belongs_to :user\n  belongs_to :request\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "owner": {"reputation": 141, "user_id": 4818785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d38e7768b8842cee9a214cd424a9699e?s=128&d=identicon&r=PG&f=1", "display_name": "F2Andy", "link": "https://stackoverflow.com/users/4818785/f2andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1429697338, "creation_date": 1429697338, "last_edit_date": 1495540623, "question_id": 29794250, "link": "https://stackoverflow.com/questions/29794250/paperclip-and-rails-4-undefined-method-split-for-nilnilclass", "title": "PaperClip and Rails 4: undefined method `split&#39; for nil:NilClass", "body": "<p>This seems to be an error with Rails 4, it worked with Rails 3, but fails with both 4.1 and 4.2. I created a new test project, with a single model, Post, then added a Paperclip file field, called avatar. Paperclip 4.2.1, by the way.</p>\n\n<p>Here is my test model, which just validates the content type.</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_attached_file :avatar\n\n  validates_attachment_content_type :avatar, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\nend\n</code></pre>\n\n<p>The controller</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  #...\n  # Just as generated by Rails, except as below, where I added the avatar field:\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def post_params\n      params.require(:post).permit(:name, :body, :avatar)\n    end\nend\n</code></pre>\n\n<p>The _form view</p>\n\n<pre><code>&lt;%= form_for(@post, :url =&gt; posts_path, :html =&gt; { :multipart =&gt; true }) do |f| %&gt;\n  ...Several lines generated by Rails\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :body %&gt;&lt;br&gt;\n    &lt;%= f.file_field :avatar %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Trying to upload an image generates this error:</p>\n\n<pre><code>NoMethodError (undefined method `split' for nil:NilClass):                                                 \n  paperclip (4.2.1) lib/paperclip/media_type_spoof_detector.rb:63:in `type_from_file_command'              \n  paperclip (4.2.1) lib/paperclip/media_type_spoof_detector.rb:50:in `calculated_content_type'             \n  paperclip (4.2.1) lib/paperclip/media_type_spoof_detector.rb:42:in `calculated_media_type'               \n  paperclip (4.2.1) lib/paperclip/media_type_spoof_detector.rb:30:in `media_type_mismatch?'                \n  paperclip (4.2.1) lib/paperclip/media_type_spoof_detector.rb:13:in `spoofed?'                            \n  paperclip (4.2.1) lib/paperclip/validators/media_type_spoof_detection_validator.rb:8:in `validate_each'  \n  activemodel (4.2.0) lib/active_model/validator.rb:151:in `validate'                                      \n  org/jruby/RubyArray.java:1613:in `each'                                                                  \n  activemodel (4.2.0) lib/active_model/validator.rb:148:in `validate'                                      \n  paperclip (4.2.1) lib/paperclip/validators.rb:68:in `create_validating_before_filter'                        \n</code></pre>\n\n<p>I had a poke around. In ...\\gems\\paperclip-4.2.1\\lib\\paperclip\\helpers, there is a module with this method:</p>\n\n<pre><code>def run(cmd, arguments = \"\", interpolation_values = {}, local_options = {})\n  command_path = options[:command_path]\n  Cocaine::CommandLine.path = [Cocaine::CommandLine.path, command_path].flatten.compact.uniq\n  if logging? &amp;&amp; (options[:log_command] || local_options[:log_command])\n    local_options = local_options.merge(:logger =&gt; logger)\n  end\n  Cocaine::CommandLine.new(cmd, arguments, local_options).run(interpolation_values)\nend\n</code></pre>\n\n<p>It seems to stumble on that last line, and it seems to be because it is looking for the wrong file. Here are the params:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"?\", \"authenticity_token\"=&gt;\"gYTVjpqNjHpzZt5aBdpWzHhwZ3V0URFhH/TkRQT5P6qJShmFuauehEdRXtGiNZoSmPmPK5q+F7jOv8VR3B6hTg==\", \"post\"=&gt;{\"name\"=&gt;\"name\", \"body\"=&gt;\"body...\", \"avatar\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x86dbbe @original_filename=\"colour test.png\", @headers=\"Content-Disposition: form-data; name=\\\"post[avatar]\\\"; filename=\\\"colour test.png\\\"\\r\\nContent-Type: image/png\\r\\n\", @tempfile=#&lt;Tempfile:C:\\Users\\user\\AppData\\Local\\Temp\\RackMultipart20150422-7116-12wd99n.png&gt;, @content_type=\"image/png\"&gt;}, \"commit\"=&gt;\"Create Post\"}\n</code></pre>\n\n<p>Note that the temporary file starts \"RackMultipart\" (and this is still there after Rails 4 does its strong parameters thing). However, Cocaine is being sent this:</p>\n\n<pre><code>file -b --mime \"C:\\Users\\user\\AppData\\Local\\Temp\\7f220723ebddeeb3a4feff6ec43c42a5150422-7116-1et5e2r-.png\" \n</code></pre>\n\n<p>The RackMultipart file exists, the one Concaine is looking for does not. Not surprisingly it objects, saying \"bin/rails: No such file or directory -\" and returns nil, and hence the error.</p>\n\n<p>By the way, I am aware of this question, but I believe it to be a different issue, as that was a bug in Paperclip, apparently resolved in 2012 (though I am on Windows 7).\n<a href=\"https://stackoverflow.com/questions/11278679/paperclip-on-windows-undefined-method-split-for-nilnilclass\">Paperclip on Windows - undefined method `split&#39; for nil:NilClass</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "deployment", "digital-ocean"], "comments": [{"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1429720326, "post_id": 29793838, "comment_id": 47735183, "body": "The one-click install does not use Capistrano, nor Unicorn. It&#39;s a very basic Rails install using Webbrick as the server. If you can get your app running within their very simple  config, that&#39;s a good step one, then add complications once you confirmed your app launches in Webbrick."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 0, "creation_date": 1429697180, "post_id": 29794135, "comment_id": 47716545, "body": "<a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-the-1-click-ruby-on-rails-on-ubuntu-14-04-image\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>   I have this image and want to use this only. Can you guide me?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3228456"}, "reply_to_user": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 0, "creation_date": 1429697405, "post_id": 29794135, "comment_id": 47716699, "body": "Means you need to configure application with nginx and Unicorn?"}, {"owner": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 0, "creation_date": 1429697507, "post_id": 29794135, "comment_id": 47716775, "body": "Yes I need to deploy and configure my application with currently installed nginx and unicorn"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3228456"}, "reply_to_user": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 0, "creation_date": 1429697785, "post_id": 29794135, "comment_id": 47716991, "body": "you can refer  <a href=\"http://azure.microsoft.com/en-in/documentation/articles/virtual-machines-ruby-deploy-capistrano-host-nginx-unicorn/\" rel=\"nofollow noreferrer\">azure.microsoft.com/en-in/documentation/articles/&hellip;</a> <a href=\"https://coderwall.com/p/yz8cha/deploying-rails-app-using-nginx-unicorn-postgres-and-capistrano-to-digital-ocean\" rel=\"nofollow noreferrer\">coderwall.com/p/yz8cha/&hellip;</a>"}, {"owner": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 0, "creation_date": 1429697897, "post_id": 29794135, "comment_id": 47717080, "body": "Thanks but currently of no use. can you please explain <a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-the-1-click-ruby-on-rails-on-ubuntu-14-04-image\" rel=\"nofollow noreferrer\">link</a> this"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3228456"}, "is_accepted": false, "score": 0, "last_activity_date": 1429697022, "creation_date": 1429697022, "answer_id": 29794135, "question_id": 29793838, "link": "https://stackoverflow.com/questions/29793838/how-to-one-click-deploy-rails-app-on-digital-ocean/29794135#29794135", "title": "How to one click deploy rails app on digital ocean?", "body": "<p>Yes you can use Capistrano for deployment, it is best practice to use Capistrano you can refer <a href=\"http://robmclarty.com/blog/how-to-deploy-a-rails-4-app-with-git-and-capistrano\" rel=\"nofollow\">http://robmclarty.com/blog/how-to-deploy-a-rails-4-app-with-git-and-capistrano</a>.</p>\n\n<p>let me know if you face any issue. </p>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 1, "creation_date": 1429697561, "post_id": 29794220, "comment_id": 47716823, "body": "I want to deploy my app and configure it with currently installed nginx and unicorn."}], "tags": [], "owner": {"reputation": 44, "user_id": 2962356, "user_type": "registered", "profile_image": "https://graph.facebook.com/1443805655/picture?type=large", "display_name": "Tomas Majer", "link": "https://stackoverflow.com/users/2962356/tomas-majer"}, "is_accepted": false, "score": 0, "last_activity_date": 1429697250, "creation_date": 1429697250, "answer_id": 29794220, "question_id": 29793838, "link": "https://stackoverflow.com/questions/29793838/how-to-one-click-deploy-rails-app-on-digital-ocean/29794220#29794220", "title": "How to one click deploy rails app on digital ocean?", "body": "<p>Or you can also use <em>mina</em> for deployment. It is like capistrano but it is easier and much more faster than capistrano.</p>\n\n<p>Take a look at: <a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-mina-to-deploy-a-ruby-on-rails-application\" rel=\"nofollow\">https://www.digitalocean.com/community/tutorials/how-to-use-mina-to-deploy-a-ruby-on-rails-application</a></p>\n"}, {"comments": [{"owner": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "edited": false, "score": 0, "creation_date": 1429697709, "post_id": 29794359, "comment_id": 47716934, "body": "I know about this process and have done for one of my project successfully. but currently I have droplet created with auto installed rails. <a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-the-1-click-ruby-on-rails-on-ubuntu-14-04-image\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"}], "tags": [], "owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "is_accepted": true, "score": 6, "last_activity_date": 1462356983, "last_edit_date": 1462356983, "creation_date": 1429697625, "answer_id": 29794359, "question_id": 29793838, "link": "https://stackoverflow.com/questions/29793838/how-to-one-click-deploy-rails-app-on-digital-ocean/29794359#29794359", "title": "How to one click deploy rails app on digital ocean?", "body": "<p>I will try to explain it step by step.\nUse Ubuntu 12 or 14.\nYou need Nginx, RoR, Capistrano, git, passenger.</p>\n\n<p><strong>0. Log int to server</strong></p>\n\n<pre><code>ssh root@server_ip\n</code></pre>\n\n<p>You can find ip here <a href=\"https://cloud.digitalocean.com/droplets\" rel=\"nofollow\">https://cloud.digitalocean.com/droplets</a></p>\n\n<p><strong>1. Create a user (if needed)</strong></p>\n\n<pre><code>adduser deployer\n</code></pre>\n\n<p><strong>2. Move user to sudo users</strong></p>\n\n<pre><code>visudo\ndeployer ALL=(ALL:ALL) ALL\n</code></pre>\n\n<p><strong>3. Install bash for him</strong></p>\n\n<pre><code>nano /etc/passwd\nChange /bin/sh to /bin/bash\n</code></pre>\n\n<p><strong>4. Change ssh-port for security</strong></p>\n\n<pre><code>nano /etc/ssh/sshd_config\nChange Port 22 on Port XXXX (where XXXX is any number)\n</code></pre>\n\n<p><strong>5. reload ssh</strong></p>\n\n<p><strong>6. Enter by ssh with our new user</strong></p>\n\n<pre><code>ssh -p XXXX deployer@XXX.XXX.XXX.XXX\n</code></pre>\n\n<p><strong>7. Update system if needed</strong></p>\n\n<pre><code>sudo apt-get update \nsudo apt-get upgrade\nsudo apt-get install curl\n</code></pre>\n\n<p><strong>8. Install rvm:</strong></p>\n\n<pre><code>curl -L get.rvm.io | bash -s stable\nsource ~/.rvm/scripts/rvm\nrvm requirements\n</code></pre>\n\n<p><strong>9. Install ruby, postgres, etc..</strong></p>\n\n<pre><code>rvm install [version of ruby similar to app]\n\nsudo apt-get install postgresql\n</code></pre>\n\n<p>If cluster was not created, do it manually:</p>\n\n<pre><code>sudo pg_createcluster [postgresql_version] main --start\n\nsudo apt-get install language-pack-en-base\nexport LANGUAGE=en_US.UTF-8\nexport LANG=en_US.UTF-8\nexport LC_ALL=en_US.UTF-8\nlocale-gen en_US.UTF-8\nsudo dpkg-reconfigure locales\n</code></pre>\n\n<p>Create postgres user</p>\n\n<pre><code>sudo -u postgres psql \nalter user postgres with password '[password]';\n</code></pre>\n\n<h1>To quit from psql press \\q</h1>\n\n<pre><code>sudo apt-get install git-core\n</code></pre>\n\n<p><strong>10. Install gem passenger:</strong></p>\n\n<pre><code>gem install passenger\n</code></pre>\n\n<p><strong>11. Install nginx using passenger</strong></p>\n\n<pre><code>rvmsudo passenger-install-nginx-module\n</code></pre>\n\n<p><strong>12. Set swap if needed</strong></p>\n\n<pre><code>sudo dd if=/dev/zero of=/swap bs=1M count=1024\nsudo mkswap /swap\nsudo swapon /swap\n</code></pre>\n\n<p><strong>13. Change config of nginx (server section):</strong></p>\n\n<pre><code>server {\n      listen 80;\n      server_name www.yourhost.com;\n      root /somewhere/public;   # &lt;--- be sure to point to 'public'!\n      passenger_enabled on;\n      location ^~ /assets/ \n           { gzip_static on; \n           expires max; \n           add_header Cache-Control public; \n      }\n }\n</code></pre>\n\n<p><strong>14. Clone good script for nginx start/stop/restart if Ubuntu:</strong></p>\n\n<pre><code>git clone https://github.com/vkurennov/rails-nginx-passenger-ubuntu.git\nsudo cp nginx/nginx.conf /etc/init.d/nginx.conf\nsudo chmod +x /etc/init.d/nginx/conf\n</code></pre>\n\n<p><strong>15. Run nginx:</strong></p>\n\n<pre><code>sudo /etc/init.d/nginx start\n</code></pre>\n\n<p><strong>BOYA!! Check your browser!</strong></p>\n\n<p><strong>Let's go to our app!</strong></p>\n\n<p><strong>1. gem \u2018capistrano\u2019 for depoly</strong></p>\n\n<pre><code>group :development do\n  gem 'capistrano'\n  gem 'rvm-capistrano'\n  gem 'net-ssh\u2019, \u20182.7.0'\nend\n</code></pre>\n\n<p><strong>2. Run:</strong></p>\n\n<pre><code>capify .\n</code></pre>\n\n<p><strong>Open deploy.rb and set:</strong></p>\n\n<pre><code>set :application, 'app_title'\nset :repository,  'app_repo'\n</code></pre>\n\n<p><strong>5. add:</strong></p>\n\n<pre><code>require 'bundler/capistrano'\nrequire \"rvm/capistrano\"\n\nload 'deploy/assets\u2019\n\nset :port, XXXX\nset :use_sudo, false\n\nset :rails_env, :production\nset :branch, \"master\"\nset :deploy_to, \"/home/deployer/app_title\"\nset :user, 'deployer'\n\nrole :web, \"XXX.XXX.XXX.XXX\"                          # Your HTTP server, Apache/etc\nrole :app, \"XXX.XXX.XXX.XXX\"                          # This may be the same as your `Web` server\nrole :db,  \"XXX.XXX.XXX.XXX\", :primary =&gt; true # This is where Rails migrations will run\n</code></pre>\n\n<p><strong>6. cap deploy:check</strong></p>\n\n<p><strong>7. cap deploy:setup</strong></p>\n\n<pre><code>set :bundle_cmd, \"/home/deployer/.rvm/gems/ruby-2.0.0-p451@global/bin/bundle\"\nset :bundle_dir, \"/home/deployer/.rvm/gems/ruby-2.0.0-p451\"\n\nset :rvm_type, :user\nset :rvm_ruby_string, 'ruby-2.0.0-p451@global'\n</code></pre>\n\n<p><strong>8. Recipes for deploy:</strong></p>\n\n<pre><code>namespace :deploy do\n  task :start do ; end\n  task :stop do ; end\n  task :restart, :roles =&gt; :app, :except =&gt; { :no_release =&gt; true } do\n    run \"#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}\"\n  end\nend\n</code></pre>\n\n<p><strong>9. Clone ssh-key on server and add to repo</strong></p>\n\n<pre><code>ssh-keygen -t rsa\ncat ~/.ssh/id_rsa.pub\n</code></pre>\n\n<p><strong>10. Add gem \u2018therubyracer\u2019</strong></p>\n\n<p><strong>11. cap deploy:cold</strong></p>\n\n<p>Boya! I opened for questions if smth is not clear.</p>\n"}], "owner": {"reputation": 389, "user_id": 2650002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4c1757a4bf444d1e9e8d2546a12800c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav Mehta", "link": "https://stackoverflow.com/users/2650002/bhargav-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3292, "favorite_count": 0, "accepted_answer_id": 29794359, "answer_count": 3, "score": 1, "last_activity_date": 1553601340, "creation_date": 1429696352, "last_edit_date": 1429698013, "question_id": 29793838, "link": "https://stackoverflow.com/questions/29793838/how-to-one-click-deploy-rails-app-on-digital-ocean", "title": "How to one click deploy rails app on digital ocean?", "body": "<p>I have created a droplet on digital ocean of ruby on rails with already configured nginx and unicorn server.</p>\n\n<p>How can i deploy my already created rails app to that server.</p>\n\n<p>Should I use capistrano to deploy? Or is there any other way to deploy?</p>\n\n<p>I have been to digital ocean guide for deployment but it is very confusing for a beginner like me.</p>\n\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-the-1-click-ruby-on-rails-on-ubuntu-14-04-image\" rel=\"nofollow\">Tutorial used for creating droplet.</a></p>\n\n<p>I have the same droplet created</p>\n"}, {"tags": ["ruby", "rspec", "params", "controllers"], "comments": [{"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1429695429, "post_id": 29793427, "comment_id": 47715249, "body": "Could you add the code of your current attempts?"}, {"owner": {"reputation": 764, "user_id": 3930758, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2d20d71ca93a31bf75a5fd36f302babe?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Radhakrishnan", "link": "https://stackoverflow.com/users/3930758/balaji-radhakrishnan"}, "reply_to_user": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1429695635, "post_id": 29793427, "comment_id": 47715396, "body": "sry, I cant post the code here. Also, I thought it&#39;s of little importance here. I just need to know how to mention <code>if params[&quot;c&quot;]</code> and <code>params[&quot;e&quot;]</code> in rspec."}], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 3930758, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2d20d71ca93a31bf75a5fd36f302babe?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Radhakrishnan", "link": "https://stackoverflow.com/users/3930758/balaji-radhakrishnan"}, "edited": false, "score": 0, "creation_date": 1429697122, "post_id": 29793705, "comment_id": 47716499, "body": "Thank you very much. This really sets me up in proper direction"}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": true, "score": 1, "last_activity_date": 1429696069, "creation_date": 1429696069, "answer_id": 29793705, "question_id": 29793427, "link": "https://stackoverflow.com/questions/29793427/writing-rspec-for-controllers-with-params/29793705#29793705", "title": "Writing rspec for controllers with params?", "body": "<p>If I understand your question correctly, you can try approach like this:</p>\n\n<pre><code>RSpec.describe &lt;controllername&gt;, :type =&gt; :controller do\n  describe \"GET my_method\" do\n    context \"param 'c' is provided\"\n      get :my_method, { \"c\" =&gt; \"sample value\" }\n      expect(response).to have_http_status(:success)\n    end\n\n    context \"param 'e' is provided\"\n      get :my_method, { \"e\" =&gt; \"sample value\" }\n      expect(response).to have_http_status(:success)\n    end\n  end\nend\n</code></pre>\n\n<p>Hope it puts you in proper direction.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 764, "user_id": 3930758, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2d20d71ca93a31bf75a5fd36f302babe?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Radhakrishnan", "link": "https://stackoverflow.com/users/3930758/balaji-radhakrishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 29793705, "answer_count": 1, "score": 0, "last_activity_date": 1429696599, "creation_date": 1429695368, "question_id": 29793427, "link": "https://stackoverflow.com/questions/29793427/writing-rspec-for-controllers-with-params", "title": "Writing rspec for controllers with params?", "body": "<p>I have a controller which has the following method</p>\n\n<pre><code>class &lt;controllername&gt; &lt; ApplicationController\n def method\n  if params[\"c\"]\n   .....\n  elsif params[\"e\"]\n   .....\n  else\n   .....\n  end\n\n end\n\nend\n</code></pre>\n\n<p>Now, I want to write rspec for the above code.</p>\n\n<p>How can I write separate context for both the params and how will I mention them as a get method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1429714415, "creation_date": 1429714415, "answer_id": 29801394, "question_id": 29793319, "link": "https://stackoverflow.com/questions/29793319/has-secure-password-checks-validations-but-not-for-password-reset-doesnt-save/29801394#29801394", "title": "Has_secure_password checks validations but not for password reset (doesn&#39;t save password but also no error message)", "body": "<p>Found the solution. In the password reset controller, the second half of <code>def update</code> needed an additional if-else statement to account for a failure of update. So this means:</p>\n\n<pre><code>else \n  if @organization\n    if @organization.update_attributes(passreset_params)\n      log_in(\"organization\", @organization)\n      flash[:success] = \"Your password has been reset.\"\n      redirect_to @organization\n    else\n      render 'editorg'\n    end\n  elsif @member\n    if @member.update_attributes(passreset_params)\n      log_in(\"member\", @member)\n      flash[:success] = \"Your password has been reset.\"\n      redirect_to @member\n    else\n      render 'editmem'\n    end\n  else\n    flash.now[:danger] = \"Update failed.\"\n    redirect_to root_url\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 29801394, "answer_count": 1, "score": 1, "last_activity_date": 1429714415, "creation_date": 1429695135, "last_edit_date": 1429711708, "question_id": 29793319, "link": "https://stackoverflow.com/questions/29793319/has-secure-password-checks-validations-but-not-for-password-reset-doesnt-save", "title": "Has_secure_password checks validations but not for password reset (doesn&#39;t save password but also no error message)", "body": "<p>For a new signup and for an update in user profile, has_secure_password properly checks the validations. This includes the length of the password and checking if the password confirmation matches. </p>\n\n<p>How can I have the same for the password reset? (this used to work but doesn't anymore for some reason)</p>\n\n<p>However, the password reset resource doesn't seem to check these validations. After following the password reset link sent by email, I can fill in a password that is too short and/or a password confirmation that doesn\u2019t match, and then it still redirects as if the resetted password was saved and shows a (flash?) message that the new password has been saved. I can even leave the confirmation password empty. So it doesn't seem to check the validations for a password reset. On the other hand, even though it generated a succes message, it actually doesn\u2019t save the new password (as it shouldn\u2019t since it doesn\u2019t pass validations).</p>\n\n<p>When I would try this for a new signup or when updating my existing profile, then it would generate an error message such as <code>Password confirmation doesn't match Password</code> and <code>Password is too short (minimum is 6 characters)</code>, as it should.</p>\n\n<p>Does anyone know what is wrong about my code so that it doesn't work with the password reset? I have no idea where to look for the cause, since I would expect has_secure_password to automatically manage this. The two user models include:</p>\n\n<pre><code>attr_accessor :remember_token, :activation_token, :reset_token\nhas_secure_password\nvalidates :password, length: { minimum: 6 }, allow_blank: true\n</code></pre>\n\n<p>The password reset edit view includes (a second view for the other user type is similar):</p>\n\n<pre><code>&lt;%= form_for(@member, url: password_reset_path(params[:id])) do |f| %&gt;\n  &lt;%= render 'shared/error_messages', object: f.object %&gt;\n  &lt;%= hidden_field_tag :email, @member.email %&gt;\n  &lt;%= f.label :password %&gt;\n  &lt;%= f.password_field :password, class: 'form-control' %&gt;\n  &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n  &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n  &lt;%= f.submit \"Update password\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And the password resets controller is:</p>\n\n<pre><code>class PasswordResetsController &lt; ApplicationController\n  before_action :get_user, only: [:edit, :update]\n  before_action :valid_user, only: [:edit, :update]\n  before_action :check_expiration,  only: [:edit, :update]\n\n  def new\n  end\n\n  def create\n    @member = Member.find_by(email: params[:password_reset][:email].downcase)\n    @organization = Organization.find_by(email: params[:password_reset][:email].downcase)\n    if @organization\n      @organization.create_reset_digest\n      @organization.send_password_reset_email\n      flash[:info] = \"An email is sent to you with password reset instructions\"\n      redirect_to root_url\n    elsif @member\n      @member.create_reset_digest\n      @member.send_password_reset_email\n      flash[:info] = \"An email is sent to you with password reset instructions\"\n      redirect_to root_url\n    else\n      flash.now[:danger] = \"Email address not found\"\n      render 'new'\n    end\n  end\n\n  def edit\n    if @organization\n      render action: \"editorg\"\n    elsif @member\n      render action: \"editmem\"\n    else\n      redirect_to root_url\n    end\n  end\n\n  def update\n    if password_blank?\n      flash.now[:danger] = \"Password can't be blank\"\n      if @organization\n        render 'editorg'\n      elsif @member\n        render 'editmem'\n      else\n        redirect_to root_url\n      end\n    elsif \n      if @organization\n        @organization.update_attributes(passreset_params)\n        log_in(\"organization\", @organization)\n        flash[:success] = \"Your password has been reset.\"\n        redirect_to @organization\n      elsif @member\n        @member.update_attributes(passreset_params)\n        log_in(\"member\", @member)\n        flash[:success] = \"Your password has been reset.\"\n        redirect_to @member\n      end\n    else\n      redirect_to root_url\n    end\n  end\n\n\n  private\n\n    def passreset_params\n      if @organization\n        params.require(:organization).permit(:password, :password_confirmation)\n      elsif @member\n        params.require(:member).permit(:password, :password_confirmation)\n      end\n    end\n\n    # Returns true if password is blank.\n    def password_blank?\n      if @organization\n        params[:organization][:password].blank?\n      elsif @member\n        params[:member][:password].blank?\n      end\n    end\n\n    # Before filters\n\n    def get_user\n      @member = Member.find_by(email: params[:email])\n      @organization = Organization.find_by(email: params[:email])\n    end\n\n    # Confirms a valid user.\n    def valid_user\n      if @organization\n        unless (@organization &amp;&amp; @organization.activated? &amp;&amp; @organization.authenticated?(:reset, params[:id]))\n          redirect_to root_url\n        end\n      elsif @member\n        unless (@member &amp;&amp; @member.activated? &amp;&amp; @member.authenticated?(:reset, params[:id]))\n          redirect_to root_url\n        end\n      else\n        flash[:danger] = \"Not a valid user.\"\n        redirect_to root_url\n      end\n    end\n\n    # Checks expiration of reset token.\n    def check_expiration\n      if @organization\n        if @organization.password_reset_expired?\n          flash[:danger] = \"Password reset has expired.\"\n          redirect_to new_password_reset_url\n        end\n      elsif @member\n        if @member.password_reset_expired?\n          flash[:danger] = \"Password reset has expired.\"\n          redirect_to new_password_reset_url\n        end\n      end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 743975, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6b0899d70c3239ead231cebc7e8ce9af?s=128&d=identicon&r=PG", "display_name": "Dmitry Polyakovsky", "link": "https://stackoverflow.com/users/743975/dmitry-polyakovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1452876331, "last_edit_date": 1452876331, "creation_date": 1452874948, "answer_id": 34815477, "question_id": 29793066, "link": "https://stackoverflow.com/questions/29793066/overriding-the-default-views-in-railsadmin/34815477#34815477", "title": "Overriding the default views in RailsAdmin", "body": "<p>You can create folders in your app</p>\n\n<p>app/views/rails_admin/main for <a href=\"https://github.com/sferik/rails_admin/tree/master/app/views/rails_admin/main\" rel=\"nofollow\">https://github.com/sferik/rails_admin/tree/master/app/views/rails_admin/main</a></p>\n\n<p>app/views/layouts/rails_admin/ for \n<a href=\"https://github.com/sferik/rails_admin/tree/master/app/views/layouts/rails_admin\" rel=\"nofollow\">https://github.com/sferik/rails_admin/tree/master/app/views/layouts/rails_admin</a></p>\n\n<p>Put modified files there.  It can get a little messy and you will need to update the files if the gem changes.  </p>\n"}], "owner": {"reputation": 543, "user_id": 3227190, "user_type": "registered", "profile_image": "https://graph.facebook.com/694991591/picture?type=large", "display_name": "Enrai", "link": "https://stackoverflow.com/users/3227190/enrai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 650, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452876331, "creation_date": 1429694545, "last_edit_date": 1592644375, "question_id": 29793066, "link": "https://stackoverflow.com/questions/29793066/overriding-the-default-views-in-railsadmin", "title": "Overriding the default views in RailsAdmin", "body": "<p>I am using Ruby on Rails 4.2.1 with <a href=\"https://github.com/sferik/rails_admin\" rel=\"nofollow noreferrer\">RailsAdmin</a>. The gem works excellent, but I have the requirement that the layout of the admin panel and the forms must look different than what is generated by default. For example, the navigation should be horizontal top, the forms should order the fields in two columns.</p>\n<p>So far I haven't find a way to copy the views locally and modify them (like in Devise for example). I have tried to replicate the views manually in the respective path under my <code>views</code> folder by copying the original views, but I got problems with the helper methods that are part of RailsAdmin not being accessible from my views.</p>\n<p>I dug deeper and found that there is a task <code>copy_views</code>, it was referred to in questions for the older versions of the gem, but if I try to use it now <code>rake rails_admin:copy_views</code>, it is not available anymore.</p>\n<p>Am I doing something wrong, or is there another way to do this?</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "encryption", "openssl"], "owner": {"reputation": 21, "user_id": 4511971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9oTzA.jpg?s=128&g=1", "display_name": "Zhaoyi Wan", "link": "https://stackoverflow.com/users/4511971/zhaoyi-wan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1429693591, "creation_date": 1429693591, "question_id": 29792690, "link": "https://stackoverflow.com/questions/29792690/des-encrypt-in-ruby", "title": "DES encrypt in ruby", "body": "<p>I am using some http apis in my ruby app, which need to check signature encrypted by DES, my code used <code>OpenSSL::Cipher</code> to do that, but i got different answer with the document showed.</p>\n\n<p>The DES mode is CBC.</p>\n\n<p>standard input: <code>random1242timestamp1375685363</code></p>\n\n<p>key: <code>2-------</code></p>\n\n<p>expected output: <code>041F03E83D85AD43B0BCE79FBB6841DAA87CC6C874BB71B45F5214DDF80BEB16</code></p>\n\n<p>There is a encrypt demo in php, i got different answer when encrypting with ruby.</p>\n\n<p>The php code:</p>\n\n<pre><code>&lt;?php\n\nclass DES {\n    var $key;\n    var $iv; //\u504f\u79fb\u91cf\n\nfunction GetKey($key) {\n    $tmp = \"--------\";\n    $key = substr ( $key . $tmp, 0, 8 );\n    return $key;\n}\nfunction DES($key, $iv = 0) {\n\n    //key\u957f\u5ea68\u4f8b\u5982:1234abcd\n    $this-&gt;key =$this-&gt;GetKey($key);\n    if ($iv == 0) {\n        $this-&gt;iv = $key;\n    } else {\n        $this-&gt;iv = $iv; //mcrypt_create_iv ( mcrypt_get_block_size (MCRYPT_DES, MCRYPT_MODE_CBC), MCRYPT_DEV_RANDOM );\n    }\n}\n\nfunction encrypt($str) {\n    //\u52a0\u5bc6\uff0c\u8fd4\u56de\u5927\u5199\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\n    $size = mcrypt_get_block_size ( MCRYPT_DES, MCRYPT_MODE_CBC );\n    $str = $this-&gt;pkcs5Pad ( $str, $size );\n    return strtoupper ( bin2hex ( mcrypt_cbc ( MCRYPT_DES, $this-&gt;key, $str, MCRYPT_ENCRYPT, $this-&gt;iv ) ) );\n}\n\nfunction decrypt($str) {\n    //\u89e3\u5bc6\n    $strBin = $this-&gt;hex2bin ( strtolower ( $str ) );\n    $str = mcrypt_cbc ( MCRYPT_DES, $this-&gt;key, $strBin, MCRYPT_DECRYPT, $this-&gt;iv );\n    $str = $this-&gt;pkcs5Unpad ( $str );\n    return $str;\n}\n\nfunction hex2bin($hexData) {\n    $binData = \"\";\n    for($i = 0; $i &lt; strlen ( $hexData ); $i += 2) {\n        $binData .= chr ( hexdec ( substr ( $hexData, $i, 2 ) ) );\n    }\n    return $binData;\n}\n\nfunction pkcs5Pad($text, $blocksize) {\n    $pad = $blocksize - (strlen ( $text ) % $blocksize);\n    return $text . str_repeat ( chr ( $pad ), $pad );\n}\n\nfunction pkcs5Unpad($text) {\n    $pad = ord ( $text {strlen ( $text ) - 1} );\n    if ($pad &gt; strlen ( $text ))\n        return false;\n    if (strspn ( $text, chr ( $pad ), strlen ( $text ) - $pad ) != $pad)\n        return false;\n    return substr ( $text, 0, - 1 * $pad );\n}\n</code></pre>\n\n<p>}\n?></p>\n\n<p>And my ruby code:</p>\n\n<pre><code>class Des  \nrequire 'openssl'\n#require 'base64'\nALG = 'DES-CBC'  \nKEY_LENGTH = 8\nPADDING = '-'\n\ndef initialize key\n    @cipher = OpenSSL::Cipher.new 'DES-CBC'\n    @key = key.to_s.ljust KEY_LENGTH, PADDING\nend\n\n#\u52a0\u5bc6\ndef encode(str,key = nil, options={})\n    @cipher.encrypt\n    @cipher.key = key.nil? ? @key : key.ljust(KEY_LENGTH, PADDING)\n\n    plain = @cipher.update(str)\nplain &lt;&lt; @cipher.final\n    unless options[:text]\n                    plain = plain.to_hex_sequence.upcase\n    end\n    plain\nend  \n\n#\u89e3\u5bc6    \ndef decode(plain,key = nil, options={})\n    @cipher.key = key.nil? ? @key : key.ljust(KEY_LENGTH, PADDING)\n    unless options[:text]\n        plain = plain.de_hex_sequence\n    end\n    text = @cipher.update plain\n    text &lt;&lt; cipher.final\n    text\nend \n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby", "variables", "methods"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1429695114, "post_id": 29792517, "comment_id": 47715030, "body": "Learn about <code>Scope</code> from <a href=\"http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Scope\" rel=\"nofollow noreferrer\">here</a> with example"}], "answers": [{"comments": [{"owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "edited": false, "score": 0, "creation_date": 1429693754, "post_id": 29792560, "comment_id": 47714094, "body": "Can i also give two variables? Like other_method(var1)(var2)?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "edited": false, "score": 0, "creation_date": 1429693831, "post_id": 29792560, "comment_id": 47714145, "body": "@saigkill yes, you can, <code>other_method(var1, var2)</code>. I advice you to start from some basics before you start programming in Ruby."}, {"owner": {"reputation": 12415, "user_id": 1881769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6e5b6160c64e3a7b7ee8df9b019f05?s=128&d=identicon&r=PG", "display_name": "tessi", "link": "https://stackoverflow.com/users/1881769/tessi"}, "reply_to_user": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "edited": false, "score": 0, "creation_date": 1429693990, "post_id": 29792560, "comment_id": 47714256, "body": "@saigkill Marek is right. I&#39;ve updated my answer with a link explaining methods in ruby. I hope that helps :)"}, {"owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "edited": false, "score": 0, "creation_date": 1429694702, "post_id": 29792560, "comment_id": 47714752, "body": "That helps. Thank you very much"}], "tags": [], "owner": {"reputation": 12415, "user_id": 1881769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6e5b6160c64e3a7b7ee8df9b019f05?s=128&d=identicon&r=PG", "display_name": "tessi", "link": "https://stackoverflow.com/users/1881769/tessi"}, "is_accepted": false, "score": 1, "last_activity_date": 1429693923, "last_edit_date": 1429693923, "creation_date": 1429693248, "answer_id": 29792560, "question_id": 29792517, "link": "https://stackoverflow.com/questions/29792517/ruby-using-local-variable-in-methods/29792560#29792560", "title": "ruby: Using local variable in methods", "body": "<p>You can give that variable as a method parameter, as shown in the example below:</p>\n\n<pre><code>def main_program\n  my_variable = 3\n  other_method(my_variable)\nend\n\ndef other_method(special_variable)\n  # do something with the special-variable\nend\n</code></pre>\n\n<p>A nice read on how to define and call methods can be found in the <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Method_Calls\" rel=\"nofollow\">Ruby programming wiki</a></p>\n"}], "owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429693923, "creation_date": 1429693125, "question_id": 29792517, "link": "https://stackoverflow.com/questions/29792517/ruby-using-local-variable-in-methods", "title": "ruby: Using local variable in methods", "body": "<p>I have a local variable in my main program. Now i would llike to give it to a method so it can use it for it's work.\nWhat is the best way to do it? A Instance variable @test?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1429697952, "post_id": 29792881, "comment_id": 47717119, "body": "I applied your way but this error ST <a href=\"http://localhost:3000/homes/scan_report\" rel=\"nofollow noreferrer\">localhost:3000/homes/scan_report</a> 500 (Internal Server Error) is coming as log message."}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "reply_to_user": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "edited": false, "score": 0, "creation_date": 1429706509, "post_id": 29792881, "comment_id": 47723903, "body": "I&#39;m guessing your passing an ID without a &quot;/&quot; in it, but can&#39;t say for certain without an error log. It could be anything. Have a look at the log, see what line it is ad then debug from there. The action is getting called (as per your question). There&#39;s an error in the action."}], "tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1429694110, "creation_date": 1429694110, "answer_id": 29792881, "question_id": 29792239, "link": "https://stackoverflow.com/questions/29792239/access-methods-present-in-controller-page-in-view-pages-using-rails-3/29792881#29792881", "title": "Access methods present in controller page in view pages using Rails 3", "body": "<p>A method in a controller is just a method of a class, you'll therefore need to create an instance of that class and call the method on that instance. For controllers this is done via the routes file. </p>\n\n<p>So make sure that you have a route for the action in your routes.rb</p>\n\n<pre><code>post 'home#scan_report' \n</code></pre>\n\n<p>Then in your javascript you would just do an ajax request (assuming Jquery here):</p>\n\n<pre><code>&lt;script&gt;\nwindow.onload=function(){\n   $.post('/home/scan_report', { 'sdf': {\"Receipt_No\": \"YOUR_ID\"}}, handle_response) \n}\nfunction handle_response(data){\n  // Do something with the response\n}\n\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429694748, "creation_date": 1429692463, "last_edit_date": 1429694748, "question_id": 29792239, "link": "https://stackoverflow.com/questions/29792239/access-methods-present-in-controller-page-in-view-pages-using-rails-3", "title": "Access methods present in controller page in view pages using Rails 3", "body": "<p>I have a doubt. Suppose I have a action in controller page like the following example.</p>\n\n<pre><code>#homes_controller.rb\nclass HomesController &lt; ApplicationController\n\n    def scan_report\n           if @sdf=TSdf.find_by_Receipt_No(params[:sdf][:Receipt_No])\n                @hcsy=THcsy.find_by_Sdp_Id(@sdf.Sdp_Id)\n                @hcsy_deatils=THcsyDetails.find_by_HCSY_ID(@hcsy.id)\n                @woods=THcsyFundTypeMaster.find_by_Fund_Type_Code(1)\n                @burn=THcsyFundTypeMaster.find_by_Fund_Type_Code(2)\n                @good=THcsyFundTypeMaster.find_by_Fund_Type_Code(3)\n                @swd=THcsyFundTypeMaster.find_by_Fund_Type_Code(5)\n                @photo=THcsyFundTypeMaster.find_by_Fund_Type_Code(6)\n                flash[:notice]=\" number matched\"\n            else\n                splitted = params[:sdf][:Receipt_No].split('/')\n                receipt = splitted[0]\n                table_id = splitted[1]\n                @sdfs=TSdf.find_by_Receipt_No(receipt)\n                if @sdfs\n                    @hcsys=THcsy.find_by_Sdp_Id(@sdfs.Sdp_Id)\n                    @fund_details=THcsyFundTypeMaster.find_by_Fund_Type_Code(table_id)\n                else\n                    flash[:notice]=\"Scan number not found\"\n                end\n            end\n    end\nend\n</code></pre>\n\n<p>This has one action <code>scan_report</code>. Can I call this method through the HomesController class name or creating object of this class in view page like below?</p>\n\n<pre><code>//home.html.erb\n&lt;script&gt;\nwindow.onload=function(){\n//here want to call scan_report action\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>I want when page will be loaded that action will execute. If it is possible then help me to do it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "save", "runtime-error"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1429690498, "post_id": 29791286, "comment_id": 47711781, "body": "There is no local variable named <code>params</code> in <code>register</code>. That said, local variable <code>params</code> is being initialized to <code>nil</code> on first appearance; <code>params[:id]</code> is hereby equivalent to <code>nil[:id]</code> causing the error you\u2019ve got."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1429691457, "post_id": 29791286, "comment_id": 47712432, "body": "Step through this in the console: set params by copying from your log and step through the code line by line.  You should be able to see what&#39;s not right."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 3, "creation_date": 1429692130, "post_id": 29791286, "comment_id": 47712837, "body": "ouch, you&#39;re doing many wrong stuff: no need for attr_accessors when its about table columns, dont ever redefine initialize"}], "answers": [{"tags": [], "owner": {"reputation": 1344, "user_id": 601851, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/sYZTJ.jpg?s=128&g=1", "display_name": "Alex Chin", "link": "https://stackoverflow.com/users/601851/alex-chin"}, "is_accepted": false, "score": 0, "last_activity_date": 1429692440, "creation_date": 1429692440, "answer_id": 29792228, "question_id": 29791286, "link": "https://stackoverflow.com/questions/29791286/rails-activerecord-save-error-undefined-method-for-nilnilclass/29792228#29792228", "title": "Rails ActiveRecord save error undefined method `[]&#39; for nil:NilClass", "body": "<p>In your new method, you should change these to be symbols, from:</p>\n\n<pre><code>@first_name = attributes[first_name]\n@last_name = attributes[last_name]\n@location = attributes[location]\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>@first_name = attributes[:first_name]\n@last_name = attributes[:last_name]\n@location = attributes[:location]\n</code></pre>\n\n<p>Also, you don't need to pass in an options hash? As you don't use it.</p>\n"}, {"tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": true, "score": 2, "last_activity_date": 1429694935, "last_edit_date": 1429694935, "creation_date": 1429692756, "answer_id": 29792360, "question_id": 29791286, "link": "https://stackoverflow.com/questions/29791286/rails-activerecord-save-error-undefined-method-for-nilnilclass/29792360#29792360", "title": "Rails ActiveRecord save error undefined method `[]&#39; for nil:NilClass", "body": "<pre><code>require 'bcrypt'\nrequire 'securerandom'\nclass Profile &lt; ActiveRecord::Base\n  include BCrypt\n\n  self.table_name = 'profiles'\n  self.primary_key = 'id'\n\n  def hash_rep\n    hash = {}\n    hash['id'] = id\n    hash['username'] = username\n    hash['password_hash'] = password_hash\n    hash['salt'] = salt\n    hash['location'] = location\n    hash['status'] = status\n    hash['game_status'] = game_status\n    hash\n  end\n\n  def self.build(args)\n    new_profile = Profile.new\n    new_profile.username = args[:username]\n    salt = SecureRandom.hex\n    new_profile.password_hash = Password.create(args[:password] + salt).to_s\n    new_profile.first_name = args[:first_name]\n    new_profile.last_name = args[:last_name]\n    new_profile.location = args[:location]\n    new_profile.status = \"Hi\"\n    new_profile.game_status = \"Playing some game...\"\n    new_profile\n  end\nend\n</code></pre>\n\n<p>Now you could use it like:</p>\n\n<pre><code>Profile.build({ username: 'foo' })\n</code></pre>\n\n<p>Btw, your hash_rep method is not that useful, try:</p>\n\n<pre><code>profile = Profile.build({ username: 'foo' })\nprofile.attributes\n</code></pre>\n\n<p>Sidenotes:</p>\n\n<ul>\n<li><p>since you follow conventions, you dont need to add those lines, you can just remove them: <code>self.table_name = 'profiles'</code>, <code>self.primary_key = 'id'</code></p></li>\n<li><p>beware of hashes, seems you dont care about string or symbol keys, but they are not the same</p></li>\n<li><p>there are more elegant way to write your methods, but I've kept it simple because its not necessary to elaborate at this stage</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429694706, "post_id": 29793096, "comment_id": 47714757, "body": "I dont agree, callbacks are a plague. If you need default values when you build something, you&#39;re just using a builder. Its part of the well known and used design patterns"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429694869, "post_id": 29793096, "comment_id": 47714858, "body": "Having tons of boilerplate assignment code dangling all over sounds like a really good idea - not."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429695045, "post_id": 29793096, "comment_id": 47714993, "body": "true, there are better ways but you&#39;re answering a beginner. So no need to confuse him right now. BTW, he coulnt use your code without getting an exception: <code>password is not an attribute</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429695307, "post_id": 29793096, "comment_id": 47715163, "body": "Edited to add accessor for password. But really he should be using <a href=\"http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>has_secure_password</code></a> and not trying to do password digests from scratch. Its just too easy to mess up."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429695592, "post_id": 29793096, "comment_id": 47715358, "body": ":) abstraction is possible once you feel comfortable with the tools, step by step...."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429695663, "post_id": 29793096, "comment_id": 47715415, "body": "BTW, replace your <code>before_save</code> with a <code>before_create</code> or it would fail... callbacks..."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429695978, "post_id": 29793096, "comment_id": 47715656, "body": "True but in that case it should be <code>before_validation</code> since validation occurs before <code>before_create </code>. <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Callbacks.html</a>"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429696099, "post_id": 29793096, "comment_id": 47715757, "body": "<code>before_validation</code> happens before each save (and before each <code>.valid?</code> call)"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1429697110, "post_id": 29793096, "comment_id": 47716494, "body": "you should really change, it will make things wrong on update :)"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1429697302, "last_edit_date": 1429697302, "creation_date": 1429694611, "answer_id": 29793096, "question_id": 29791286, "link": "https://stackoverflow.com/questions/29791286/rails-activerecord-save-error-undefined-method-for-nilnilclass/29793096#29793096", "title": "Rails ActiveRecord save error undefined method `[]&#39; for nil:NilClass", "body": "<p>A much better way to set default properties in rails is via callbacks:</p>\n\n<pre><code>require 'bcrypt'\nrequire 'securerandom'\nclass Profile &lt; ActiveRecord::Base\n  include BCrypt\n\n  attr_accessor :password # is a virtual attribute\n\n  after_initialize do\n    if new_record?\n      # values will be available for new record forms.\n      self.status = status || \"Hi\"\n      self.game_status = game_status || \"Playing some game...\"\n    end\n  end\n\n  before_validation(on: :create) do\n    self.salt = SecureRandom.hex\n    self.password_hash = Password.create(password + salt).to_s\n  end\n\n    # Yuck. use http://apidock.com/rails/ActiveModel/Serialization/serializable_hash\n  def hash_rep\n    serializable_hash( only: [:id, :username, :password_hash, :salt, :location, :status, :game_status] )\n  end\n\nend\n</code></pre>\n\n<p>You don't need to create accessors for ActiveRecord columns. You don't need to specify the <code>table</code> and <code>primary_key</code>. Rails figures that out for you. Also you REALLY don't want to redefine <code>initialize</code> since active record has a bunch going on there.</p>\n\n<p>Your controller is also missing the mark. Rails usually nests parameters under the resource name. If you are using Rails 4 - you would <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow\">whitelist</a> and assign the parameters by:</p>\n\n<pre><code>class ProfileController &lt; ApplicationController \n\n  def new\n    @profile = Profile.new\n  end\n\n  def register\n    @profile = Profile.new(create_params)\n    if @profile.save\n      redirect_to @profile \n    else \n      render action: :new\n    end\n  end\n\n  private\n  def create_params\n    params.require(:profile).allow(:username, :password, : first_name :last_name :location)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4257302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aefb0751b42733a2faf0bcc72cbbe4?s=128&d=identicon&r=PG&f=1", "display_name": "Parham", "link": "https://stackoverflow.com/users/4257302/parham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1449, "favorite_count": 0, "accepted_answer_id": 29792360, "answer_count": 3, "score": 2, "last_activity_date": 1429697302, "creation_date": 1429689756, "last_edit_date": 1429690202, "question_id": 29791286, "link": "https://stackoverflow.com/questions/29791286/rails-activerecord-save-error-undefined-method-for-nilnilclass", "title": "Rails ActiveRecord save error undefined method `[]&#39; for nil:NilClass", "body": "<p>I am getting an error when trying to save my model object in rails. Let me say that I did not use database migrations and am using a pre-existing database with rails. \nHere is my model class:</p>\n\n<pre><code>require 'bcrypt'\nrequire 'securerandom'\nclass Profile &lt; ActiveRecord::Base\n  include BCrypt\n\n  self.table_name = 'profiles'\n  self.primary_key = 'id'\n\n  attr_accessor :id, :username, :password_hash, :salt, :first_name, :last_name, :location, :status, :game_status\n\n  def initialize(attributes = {}, options = {})\n    @username = attributes[:username]\n    @salt = SecureRandom.hex\n    @password_hash = Password.create(attributes[:password] + @salt).to_s\n    @first_name = attributes[first_name]\n    @last_name = attributes[last_name]\n    @location = attributes[location]\n    @status = \"Hi\"\n    @game_status = \"Playing some game...\"\n  end\n\n  def hash_rep\n    hash = {}\n    hash['id'] = @id\n    hash['username'] = @username\n    hash['password_hash'] = @password_hash\n    hash['salt'] = @salt\n    hash['location'] = @location\n    hash['status'] = @status\n    hash['game_status'] = @game_status\n    return hash\n  end\n\nend\n</code></pre>\n\n<p>Here is my database schema:</p>\n\n<pre><code>id             int Unsigned NOT NULL AUTO_INCREMENT\nusername       varchar(16)  NOT NULL\npassword_hash  tinytext     NOT NULL\nsalt           varchar(64)  NOT NULL\nfirst_name     varchar(16)  NOT NULL\nlast_name      varchar(16)  NOT NULL\nlocation       tinytext     NOT NULL\nstatus         tinytext     NULL\ngame_status    tinytext     NULL\n</code></pre>\n\n<p>Here is my code for my controller:</p>\n\n<pre><code>  def register\n    profile = Profile.new(:id =&gt; params[:id],\n                          :username =&gt; params[:username],\n                          :password =&gt; params[:password],\n                          :first_name =&gt; params[:first_name],\n                          :last_name =&gt; params[:last_name],\n                          :location =&gt; params[:location])\n    profile.save\n    render_profile(profile)\n  end\n</code></pre>\n\n<p>The error occurs on the 'profile.save' method. Here is the relevant stacktrace:</p>\n\n<pre><code>activerecord (4.2.0) lib/active_record/transactions.rb:375:in `clear_transaction_record_state'\nactiverecord (4.2.0) lib/active_record/transactions.rb:306:in `ensure in rollback_active_record_state!'\nactiverecord (4.2.0) lib/active_record/transactions.rb:306:in `rollback_active_record_state!'\nactiverecord (4.2.0) lib/active_record/transactions.rb:285:in `save'\napp/controllers/profile_controller.rb:52:in `register'\nactionpack (4.2.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.0) lib/abstract_controller/base.rb:198:in `process_action'\n</code></pre>\n\n<p>The error says: \"undefined method `[]' for nil:NilClass\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1429689373, "post_id": 29790926, "comment_id": 47711121, "body": "No it is still not updating in params, whether I am missing anything in giving the options value in forms"}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1429690045, "post_id": 29790926, "comment_id": 47711508, "body": "People are busy in voting down for this question but they can&#39;t answer the problem"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1429690059, "post_id": 29790926, "comment_id": 47711520, "body": "check you&#39;re getting all the params in controller"}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1429690188, "post_id": 29790926, "comment_id": 47711607, "body": "@user120 I can see all the values getting updated in my rails console but when I am trying to render this in controller as plain hash it is showing just title and description, I am unable to update the database as well"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1429690480, "post_id": 29790926, "comment_id": 47711770, "body": "might be this a guess, can you change that two options into rails specific tags"}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1429692728, "post_id": 29790926, "comment_id": 47713268, "body": "@user120 I changed it still the same"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 2, "creation_date": 1429693664, "post_id": 29790926, "comment_id": 47714031, "body": "@cyborg You are getting downvotes because your question appears to be &quot;is this how you define a form&quot;. You only actually sneak in the real problem halfway down the question. You need to make your actual problem more prominent."}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 1, "creation_date": 1429694070, "post_id": 29792316, "comment_id": 47714325, "body": "Could you please add equal to sign in form tag in last line.  &lt;%= u.select :bgcolor, options_for_select(UserPreference.bgcolor_options) %&gt;"}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": true, "score": 1, "last_activity_date": 1429695671, "last_edit_date": 1429695671, "creation_date": 1429692659, "answer_id": 29792316, "question_id": 29790926, "link": "https://stackoverflow.com/questions/29790926/rails-form-not-updating-the-attributes/29792316#29792316", "title": "Rails Form Not Updating the Attributes", "body": "<p>When you say this</p>\n\n<pre><code>&lt;%= u.text_field :description %&gt;\n</code></pre>\n\n<p>because you are working with :user_preference, it will make an input like</p>\n\n<pre><code>&lt;input type=\"text\" name=\"user_preference[description]\" value=\"foo\"&gt;\n</code></pre>\n\n<p>(where 'foo' is the current value, or maybe it's blank)</p>\n\n<p>Note the \"name\" attribute:  this will go into params like</p>\n\n<pre><code>params = {:user_preference =&gt; {:description =&gt; \"foo\"}}\n</code></pre>\n\n<p>If you are going to hand-code the select then you need to make sure the name attribute has this structure too, eg</p>\n\n<pre><code> &lt;select name=\"user_preference[bgcolor]\" id=\"bgcolor\"&gt;\n</code></pre>\n\n<p>So you will get params like </p>\n\n<pre><code>params = {:user_preference =&gt; {:description =&gt; \"foo\", :bgcolor =&gt; \"#FFFFFF\"}}\n</code></pre>\n\n<p>Which then allows you to say </p>\n\n<pre><code>@user_preference.attributes = params[:user_preference]\n</code></pre>\n\n<p>which is the standard way to deal with this in the controller.</p>\n\n<p>However, rather than writing out all the html for the select, it's much nicer to use the rails form helpers (<code>select</code> in this case) like you do with the text fields.  You can also define the options for the select with the <code>options_for_select</code> helper, which saves a lot of typing too.</p>\n\n<pre><code> &lt;%= u.select :bgcolor, options_for_select([[\"Orange\", \"#FF3300\"], [\"Green\", \"#00FF00\"], [\"Blue\", \"#0000FF\"], [\"Pink\", \"#FF0066\"], [\"Yellow\", \"#FFFF00\"], [\"White\", \"#FFFFFF\"]]) %&gt;\n</code></pre>\n\n<p>It's also cleaner to define this variable of options in your code somewhere, eg in a UserPreference class method:</p>\n\n<pre><code>class UserPreference &lt; ActiveRecord::Base\n\n  #class methods section\n  class &lt;&lt; self\n\n    def bgcolor_options\n      [[\"Orange\", \"#FF3300\"], [\"Green\", \"#00FF00\"], [\"Blue\", \"#0000FF\"], [\"Pink\", \"#FF0066\"], [\"Yellow\", \"#FFFF00\"], [\"White\", \"#FFFFFF\"]]\n    end\n  end\nend\n</code></pre>\n\n<p>Now you can use the select like so:</p>\n\n<pre><code> &lt;%= u.select :bgcolor, options_for_select(UserPreference.bgcolor_options) %&gt;\n</code></pre>\n\n<p><a href=\"http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags\" rel=\"nofollow\">http://guides.rubyonrails.org/form_helpers.html#the-select-and-option-tags</a></p>\n"}], "owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 0, "accepted_answer_id": 29792316, "answer_count": 1, "score": -3, "last_activity_date": 1429695671, "creation_date": 1429688663, "last_edit_date": 1429693772, "question_id": 29790926, "link": "https://stackoverflow.com/questions/29790926/rails-form-not-updating-the-attributes", "title": "Rails Form Not Updating the Attributes", "body": "<p>Is this the correct way of defining form, let me know if I need to provide any more details.</p>\n\n<p>This is the UserPreference forms in new.html.erb</p>\n\n<pre><code>&lt;%= form_for :user_preference, url: user_preferences_path do |u|%&gt;\n     &lt;p&gt;\n        &lt;%= u.label :title %&gt;&lt;br&gt;\n        &lt;%= u.text_field :title %&gt;\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        &lt;%= u.label :description %&gt;&lt;br&gt;\n        &lt;%= u.text_field :description %&gt;\n      &lt;/p&gt;\n\n      &lt;p&gt; &lt;%= u.label :back_ground_color %&gt;&lt;br&gt;\n        &lt;select name=\"bgcolor\" id=\"bgcolor\"&gt;\n            &lt;option value=\"#FF3300\"&gt;Orange&lt;/option&gt;\n            &lt;option value=\"#00FF00\"&gt;Green&lt;/option&gt;\n            &lt;option value=\"#0000FF\"&gt;Blue&lt;/option&gt;\n            &lt;option value=\"#FF0066\"&gt;Pink&lt;/option&gt;\n            &lt;option value=\"#FFFF00\"&gt;Yellow&lt;/option&gt;\n            &lt;option value=\"#FFFFFF\"&gt;White&lt;/option&gt;\n        &lt;/select&gt;\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        &lt;%= u.label :font %&gt;&lt;br&gt;\n        &lt;select name=\"font\" id=\"font\"&gt;\n            &lt;option value=\"Times New Roman\"&gt;Times new Roman&lt;/option&gt;\n            &lt;option value=\"Verdana\"&gt;Verdana&lt;/option&gt;\n            &lt;option value=\"Arial\"&gt;Arial&lt;/option&gt;\n            &lt;option value=\"sans-serif\"&gt;serif&lt;/option&gt;\n        &lt;/select&gt;\n      &lt;/p&gt;\n\n     &lt;br &gt;\n      &lt;p&gt;\n        &lt;%= u.submit %&gt;\n      &lt;/p&gt;\n</code></pre>\n\n<p>I am getting title and description when I am trying to render in html,\nthe attribute is not getting updated in database.</p>\n\n<p><strong>UserPreference.controller.rb</strong></p>\n\n<pre><code>class UserPreferencesController &lt; ApplicationController\n    def new\n        @user_preference = UserPreference.new\n    end\n\n    def create\n        @user_preference = UserPreference.new(userp_params)\n        @user_preference.save unless user_signed_in?\n        render plain: params[:user_preference].inspect\n    end\n    def edit\n    end\n    def update\n    end\n\n    private\n    def userp_params\n        params.require(:user_preference).permit(:title, :bgcolor, :font, :description)\n    end\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "session"], "answers": [{"comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1429688632, "post_id": 29790757, "comment_id": 47710677, "body": "If you only use this single variable then HTML DOM size will be not that increasing as you thought."}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 338, "user_id": 3392302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zHY3O.jpg?s=128&g=1", "display_name": "Veeru", "link": "https://stackoverflow.com/users/3392302/veeru"}, "edited": false, "score": 0, "creation_date": 1429689368, "post_id": 29790757, "comment_id": 47711116, "body": "@Veeru, So it is supposed to be the accepted answer, right?"}], "tags": [], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "is_accepted": true, "score": 5, "last_activity_date": 1429688151, "creation_date": 1429688151, "answer_id": 29790757, "question_id": 29790604, "link": "https://stackoverflow.com/questions/29790604/how-to-access-ruby-session-variable-in-javascript/29790757#29790757", "title": "How to Access Ruby Session Variable in Javascript", "body": "<p>You can use HTML5 <code>data</code> method from where you can access the variable.</p>\n\n<p>suppose, your <code>JS</code> <strong>function</strong> is calling from a button.\nthus, you can define that button as:</p>\n\n<pre><code>&lt;button class=\"btn\" data-session=\"&lt;%= session[:note]%&gt;\" onclick=\"seesionCheck()\"&gt;Hello&lt;/button&gt;\n</code></pre>\n\n<p>now, in your <code>JS</code> function you can access the variable as:</p>\n\n<pre><code>$(\".btn\").data('session');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2322, "user_id": 5435505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dQi4o.png?s=128&g=1", "display_name": "Liren Yeo", "link": "https://stackoverflow.com/users/5435505/liren-yeo"}, "edited": false, "score": 0, "creation_date": 1548489419, "post_id": 29790770, "comment_id": 95567134, "body": "Rails&#39;s session is just browser cookies right? How is it server-side?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 2322, "user_id": 5435505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dQi4o.png?s=128&g=1", "display_name": "Liren Yeo", "link": "https://stackoverflow.com/users/5435505/liren-yeo"}, "edited": false, "score": 2, "creation_date": 1548499805, "post_id": 29790770, "comment_id": 95568942, "body": "@LirenYeo: Rails has cookie sessions <i>by default</i>, but you can use another <code>session_store</code>. Cookies are limited to 4Kb, may pose a security leak depending on your usage, and they increase the communication overhead; their advantage is that the server doesn&#39;t need to store things, so they slightly speed up things serverside by slightly increasing communication costs. While cookies are available at clientside, they are typically considered &quot;server stuff&quot;, and not messed with clientside. (Though I should probably have tempered the &quot;no way&quot; in my answer.)"}, {"owner": {"reputation": 2322, "user_id": 5435505, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dQi4o.png?s=128&g=1", "display_name": "Liren Yeo", "link": "https://stackoverflow.com/users/5435505/liren-yeo"}, "edited": false, "score": 0, "creation_date": 1548500870, "post_id": 29790770, "comment_id": 95569187, "body": "I see! Thanks for the explanation!"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1429688174, "creation_date": 1429688174, "answer_id": 29790770, "question_id": 29790604, "link": "https://stackoverflow.com/questions/29790604/how-to-access-ruby-session-variable-in-javascript/29790770#29790770", "title": "How to Access Ruby Session Variable in Javascript", "body": "<p>The session is on serverside. Your JS is on clientside. There is no way to directly read the session from JS. There are two ways you can get around it:</p>\n\n<ul>\n<li><p>Seed the values when you render your views. As you said, you can put it in your ERb. However, a better approach is using JSON:</p>\n\n<pre><code>var session_val = &lt;%= session[:note].to_json %&gt;\n</code></pre>\n\n<p>This avoids possible issues with escaping (or with lack thereof).</p></li>\n<li><p>Ask the server via AJAX</p></li>\n</ul>\n"}], "owner": {"reputation": 338, "user_id": 3392302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zHY3O.jpg?s=128&g=1", "display_name": "Veeru", "link": "https://stackoverflow.com/users/3392302/veeru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4932, "favorite_count": 0, "accepted_answer_id": 29790757, "answer_count": 2, "score": 5, "last_activity_date": 1429688174, "creation_date": 1429687642, "question_id": 29790604, "link": "https://stackoverflow.com/questions/29790604/how-to-access-ruby-session-variable-in-javascript", "title": "How to Access Ruby Session Variable in Javascript", "body": "<p>I have created <code>Ruby Session Variable</code> I need to access this variable in <code>Javascript</code></p>\n\n<p>Lets take this scenario</p>\n\n<p><code>session[:note]</code> = <code>'Some Notes'</code> this is done in <code>Ruby on Rails</code></p>\n\n<p>Now I want to access this is like</p>\n\n<p>var session_val = js-code for access above session variable.</p>\n\n<p>its not js.erb I know if it is js.erb we can access like </p>\n\n<pre><code>var sesion_val = \"&lt;%= session[:note] %&gt;\"\n</code></pre>\n\n<p>TIA</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1429686898, "post_id": 29790304, "comment_id": 47709493, "body": "How does the corresponding action looks like?"}, {"owner": {"reputation": 2639, "user_id": 923080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3fd6bca1c69c27c953deca00315d8e6?s=128&d=identicon&r=PG", "display_name": "Nitish Parkar", "link": "https://stackoverflow.com/users/923080/nitish-parkar"}, "edited": false, "score": 0, "creation_date": 1429686949, "post_id": 29790304, "comment_id": 47709532, "body": "You are getting that error because it&#39;s executing the ruby code. <code>@jobs</code> is nil. Are you setting it in controller?"}, {"owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 0, "creation_date": 1429687046, "post_id": 29790304, "comment_id": 47709600, "body": "<a href=\"https://github.com/Eibonic/Job-board-lesson\" rel=\"nofollow noreferrer\">github.com/Eibonic/Job-board-lesson</a> I put it on github."}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1429687144, "post_id": 29790304, "comment_id": 47709672, "body": "Anything inside <code>&lt;%  %&gt;</code>, in an erb file is Ruby code."}, {"owner": {"reputation": 2966, "user_id": 308523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOeK7.jpg?s=128&g=1", "display_name": "Fer", "link": "https://stackoverflow.com/users/308523/fer"}, "edited": false, "score": 0, "creation_date": 1429687181, "post_id": 29790304, "comment_id": 47709712, "body": "well, it does... your @jobs is nil. check in your controller that you are assigning it to something that responds to the each method"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1429687352, "post_id": 29790304, "comment_id": 47709829, "body": "You can create the values there in database? or check is there any data in Job"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1429687359, "post_id": 29790304, "comment_id": 47709836, "body": "I guess you have not created any <code>job</code> or the <code>jobs</code> database didn&#39;t save your created job. Could you please give me the output of <code>Job.last.title</code>?"}, {"owner": {"reputation": 2966, "user_id": 308523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOeK7.jpg?s=128&g=1", "display_name": "Fer", "link": "https://stackoverflow.com/users/308523/fer"}, "edited": false, "score": 0, "creation_date": 1429687377, "post_id": 29790304, "comment_id": 47709850, "body": "you have a problem with the &quot;ends&quot; in your controller. The index action is not properly closed and the <code>index</code> and <code>create</code> are local methods to the <code>new</code> method."}, {"owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 0, "creation_date": 1429687680, "post_id": 29790304, "comment_id": 47710038, "body": "Thanks guys, you fixed the problem, is there any way I can mark a comment as correct?  I didn&#39;t properly close the actions like fer said."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 0, "creation_date": 1430016673, "post_id": 29790511, "comment_id": 47871314, "body": "thanks but why was I downvoted into oblivion?  I can&#39;t ask anymore questions on this site now, this website sucks!"}, {"owner": {"reputation": 2639, "user_id": 923080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3fd6bca1c69c27c953deca00315d8e6?s=128&d=identicon&r=PG", "display_name": "Nitish Parkar", "link": "https://stackoverflow.com/users/923080/nitish-parkar"}, "reply_to_user": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 0, "creation_date": 1430068045, "post_id": 29790511, "comment_id": 47885559, "body": "Even I am surprised by the number of downvotes. Maybe this line got you in trouble - <i>It doesn&#39;t realize I&#39;m using ruby on this file.</i> It suggests you don&#39;t really understand what you are doing.  Don&#39;t get disheartened, stackoverflow is not that bad."}, {"owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 1, "creation_date": 1430135942, "post_id": 29790511, "comment_id": 47912911, "body": "Ok thanks, I&#39;m new to coding and this site.  I&#39;ll learn from my mistakes."}], "tags": [], "owner": {"reputation": 2639, "user_id": 923080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3fd6bca1c69c27c953deca00315d8e6?s=128&d=identicon&r=PG", "display_name": "Nitish Parkar", "link": "https://stackoverflow.com/users/923080/nitish-parkar"}, "is_accepted": true, "score": 6, "last_activity_date": 1429688009, "last_edit_date": 1429688009, "creation_date": 1429687418, "answer_id": 29790511, "question_id": 29790304, "link": "https://stackoverflow.com/questions/29790304/why-is-index-html-erb-not-executing-my-ruby-code/29790511#29790511", "title": "Why is index.html.erb not executing my Ruby code", "body": "<p>Your <code>JobsController</code> is messed up. Your <code>index</code> action is inside <code>new</code> action. Here is the corrected code:</p>\n\n<pre><code>class JobsController &lt; ApplicationController\n  def new\n    @job = Job.new\n  end\n\n  def index\n    @jobs = Job.all\n  end\n\n  def create\n    Job.create(job_params)\n    redirect_to jobs_path\n  end\n\n  private\n  def job_params\n    params.require(:job).permit(:title, :description)\n  end\n\nend\n</code></pre>\n\n<p>If you are interested in understanding why Rails was rendering <code>index</code> view even when the action was not present, see this\n<a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action\" rel=\"nofollow\">http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action</a> </p>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 3392302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zHY3O.jpg?s=128&g=1", "display_name": "Veeru", "link": "https://stackoverflow.com/users/3392302/veeru"}, "is_accepted": false, "score": 1, "last_activity_date": 1429688151, "creation_date": 1429688151, "answer_id": 29790759, "question_id": 29790304, "link": "https://stackoverflow.com/questions/29790304/why-is-index-html-erb-not-executing-my-ruby-code/29790759#29790759", "title": "Why is index.html.erb not executing my Ruby code", "body": "<p>Your Jobs controller got messed up</p>\n\n<p>it should be like this</p>\n\n<pre><code>class JobsController &lt; ApplicationController\n  def new\n    @job = Job.new\n  end\n\n  def index\n    @jobs = Job.all\n  end\n\n  def create\n    Job.create(job_params)\n    redirect_to jobs_path\n  end\n\n  private\n  def job_params\n    params.require(:job).permit(:title, :description)\n  end\n\nend\n</code></pre>\n\n<p>Then you can call @jobs in your index.html.erb, then it will work try like this</p>\n"}], "owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 29790511, "answer_count": 2, "score": -8, "last_activity_date": 1429688151, "creation_date": 1429686852, "last_edit_date": 1429687337, "question_id": 29790304, "link": "https://stackoverflow.com/questions/29790304/why-is-index-html-erb-not-executing-my-ruby-code", "title": "Why is index.html.erb not executing my Ruby code", "body": "<p><strong>This is my code</strong></p>\n\n<pre><code>&lt;h1&gt;RailsBridgeCorp Open Jobs&lt;/h1&gt;\n\n&lt;% @jobs.each do |job| %&gt;\n  &lt;h3&gt;&lt;%= job.title %&gt;&lt;/h3&gt;\n  &lt;p&gt;&lt;%= job.description %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Yet I get an error that says </p>\n\n<blockquote>\n  <p>undefined method `each' for nil:NilClass</p>\n</blockquote>\n\n<p>It doesn't realize I'm using ruby on this file.</p>\n\n<p><a href=\"http://i.imgur.com/hVNVTRO.png\" rel=\"nofollow\">This is the controller</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "param"], "comments": [{"owner": {"reputation": 1117, "user_id": 2066608, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56771e8ae8494e15f2794bb152ac54f5?s=128&d=identicon&r=PG", "display_name": "ppascualv", "link": "https://stackoverflow.com/users/2066608/ppascualv"}, "edited": false, "score": 0, "creation_date": 1429686458, "post_id": 29790026, "comment_id": 47709211, "body": "contact.new doesn&#39;t work, it will be Contact.new"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1429686460, "post_id": 29790157, "comment_id": 47709212, "body": "Ah yes, this is a possibility too :)"}], "tags": [], "owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "is_accepted": true, "score": 1, "last_activity_date": 1429686910, "last_edit_date": 1429686910, "creation_date": 1429686394, "answer_id": 29790157, "question_id": 29790026, "link": "https://stackoverflow.com/questions/29790026/ruby-on-rails-param-is-missing-or-the-value-is-empty-without-using-a-model/29790157#29790157", "title": "Ruby on Rails param is missing or the value is empty without using a model", "body": "<p>Your controller code is correct. You don't need <code>Contact.new</code> or something. The problem is with your <code>&lt;form&gt;</code>. What ends up in <code>params</code> depends on your form and in your form you don't have <code>contact</code>.</p>\n\n<p>Instead of:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"subject\"&gt;\n</code></pre>\n\n<p>You have to do something like this:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"contact[subject]\"&gt;\n</code></pre>\n\n<p>And that for all the fields on your contact form.</p>\n\n<p>Another option would be to use Rails' form helpers.</p>\n"}, {"comments": [{"owner": {"reputation": 1300, "user_id": 3118220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac8cc81c7b432465c18eb731b5a1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "user3118220", "link": "https://stackoverflow.com/users/3118220/user3118220"}, "reply_to_user": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 0, "creation_date": 1429686687, "post_id": 29790219, "comment_id": 47709350, "body": "i havnt&#39; seen, stackoverflow doesn&#39;t reload the page to see it, I was preparing/formatting my answer"}], "tags": [], "owner": {"reputation": 1300, "user_id": 3118220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac8cc81c7b432465c18eb731b5a1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "user3118220", "link": "https://stackoverflow.com/users/3118220/user3118220"}, "is_accepted": false, "score": 1, "last_activity_date": 1429686623, "last_edit_date": 1429686623, "creation_date": 1429686579, "answer_id": 29790219, "question_id": 29790026, "link": "https://stackoverflow.com/questions/29790026/ruby-on-rails-param-is-missing-or-the-value-is-empty-without-using-a-model/29790219#29790219", "title": "Ruby on Rails param is missing or the value is empty without using a model", "body": "<p><code>contact[]</code> is missing in your form, see below correct one:</p>\n\n<pre><code>        &lt;div class=\"form\"&gt;\n            &lt;form name=\"email-form\" method=\"POST\"&gt;\n                &lt;label class=\"field-label\" for=\"name\"&gt;Name:&lt;/label&gt;\n                &lt;input class=\"w-input text-field-2\" id=\"name\" type=\"text\" name=\"contact[name]\" data-name=\"Name\" required=\"required\"&gt;\n                &lt;label class=\"field-label\" for=\"Email\"&gt;Email:&lt;/label&gt;\n                &lt;input class=\"w-input text-field-2\" id=\"email\" type=\"email\" name=\"contact[email]\" data-name=\"Email\" required=\"required\"&gt;\n                &lt;label class=\"field-label\" for=\"Subject\"&gt;Subject:&lt;/label&gt;\n                &lt;input class=\"w-input text-field-2\" id=\"subject\" type=\"text\" name=\"contact[subject]\" data-name=\"Subject\"&gt;\n                &lt;label class=\"field-label\" for=\"Content\"&gt;Text Message:&lt;/label&gt;\n                &lt;textarea class=\"w-input text-field-2 area\" id=\"content\" name=\"contact[content]\" data-name=\"Text Area\" required=\"required\"&gt;&lt;/textarea&gt;\n                &lt;div&gt;\n                    &lt;input class=\"w-button button\" type=\"submit\" value=\"Submit Message\" data-wait=\"Please wait...\"&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 4553034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aLeXg.jpg?s=128&g=1", "display_name": "MAC", "link": "https://stackoverflow.com/users/4553034/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 29790157, "answer_count": 2, "score": 1, "last_activity_date": 1429686910, "creation_date": 1429685948, "last_edit_date": 1429686282, "question_id": 29790026, "link": "https://stackoverflow.com/questions/29790026/ruby-on-rails-param-is-missing-or-the-value-is-empty-without-using-a-model", "title": "Ruby on Rails param is missing or the value is empty without using a model", "body": "<p>In my contact.html, I have this code</p>\n\n<pre><code>            &lt;div class=\"form\"&gt;\n                &lt;form name=\"email-form\" method=\"POST\"&gt;\n                    &lt;label class=\"field-label\" for=\"name\"&gt;Name:&lt;/label&gt;\n                    &lt;input class=\"w-input text-field-2\" id=\"name\" type=\"text\" name=\"name\" data-name=\"Name\" required=\"required\"&gt;\n                    &lt;label class=\"field-label\" for=\"Email\"&gt;Email:&lt;/label&gt;\n                    &lt;input class=\"w-input text-field-2\" id=\"email\" type=\"email\" name=\"email\" data-name=\"Email\" required=\"required\"&gt;\n                    &lt;label class=\"field-label\" for=\"Subject\"&gt;Subject:&lt;/label&gt;\n                    &lt;input class=\"w-input text-field-2\" id=\"subject\" type=\"text\" name=\"subject\" data-name=\"Subject\"&gt;\n                    &lt;label class=\"field-label\" for=\"Content\"&gt;Text Message:&lt;/label&gt;\n                    &lt;textarea class=\"w-input text-field-2 area\" id=\"content\" name=\"content\" data-name=\"Text Area\" required=\"required\"&gt;&lt;/textarea&gt;\n                    &lt;div&gt;\n                        &lt;input class=\"w-button button\" type=\"submit\" value=\"Submit Message\" data-wait=\"Please wait...\"&gt;\n                    &lt;/div&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>This is under my controller</p>\n\n<pre><code> def contact\n\n end\n\n def send_mail\n    MessageMailer.new_message(contact_params).deliver\n    redirect_to contact_path, notice: 'Your messages has been sent.'\n end\n\n private\n   def contact_params\n      params.require(:contact).permit(:name, :email, :subject, :content)\n   end\n</code></pre>\n\n<p>under mailers/message_mailer.rb</p>\n\n<pre><code>class MessageMailer &lt; ActionMailer::Base\n   default from: \"sys.questdentalusa@gmail.com\"\n   default to: \"questdentalusa@gmail.com\"\n\n   def new_message(contact)\n      @contact = contact\n\n      mail subject: @contact.subject\n   end\nend\n</code></pre>\n\n<p>and under my new_message.text.erb is this code</p>\n\n<pre><code>Name: &lt;%= @contact.name %&gt;\nEmail: &lt;%= @contact.email %&gt;\nMessage: &lt;%= @contact.content %&gt;\n</code></pre>\n\n<p>I am to send an email consisting user's name, email and message which is inputed and <strong>NOT</strong> saved in the database. When I pass the four parameters like this</p>\n\n<pre><code>def send_mail\n    MessageMailer.new_message(:name, :email, :subject, :content).deliver\n    redirect_to contact_path, notice: 'Your messages has been sent.'\nend\n</code></pre>\n\n<p>it worked just fine but i was told to use only one parameter, seems like group the four parameters: <code>name, email, subject, content</code> as one (<code>contact</code>)</p>\n\n<p>When I typed the info and hit the submit button, I get this error message\n<code>param is missing or the value is empty: contact</code>\nI presume that what caused this error is because my <code>def contact</code> is empty. So I added <code>contact.new</code> and <code>@contact=contact.new</code> and <code>MessageMailer.new</code> but this error occurs <code>NoMethodError</code></p>\n\n<p>How can I possibly fix this? What should I write under my <code>def contact</code> ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "recursion", "memory-leaks"], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 2356390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04be1392eef84bdeb18358d89529ea72?s=128&d=identicon&r=PG", "display_name": "deadlysyntax", "link": "https://stackoverflow.com/users/2356390/deadlysyntax"}, "edited": false, "score": 0, "creation_date": 1429691147, "post_id": 29790544, "comment_id": 47712231, "body": "Thanks, data is a hash of fields to update in the db, including it&#39;s status as scraped or not."}, {"owner": {"reputation": 1, "user_id": 4818172, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/db81444ea8bf7d61c9ba3c90ec04e36a?s=128&d=identicon&r=PG", "display_name": "user4818172", "link": "https://stackoverflow.com/users/4818172/user4818172"}, "reply_to_user": {"reputation": 144, "user_id": 2356390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04be1392eef84bdeb18358d89529ea72?s=128&d=identicon&r=PG", "display_name": "deadlysyntax", "link": "https://stackoverflow.com/users/2356390/deadlysyntax"}, "edited": false, "score": 0, "creation_date": 1429694668, "post_id": 29790544, "comment_id": 47714719, "body": "If you set the status again to unscraped, a page will be processed again and again and again. That probably happens if the page cannot be scraped. That can lead to a very long running time."}], "tags": [], "owner": {"reputation": 1, "user_id": 4818172, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/db81444ea8bf7d61c9ba3c90ec04e36a?s=128&d=identicon&r=PG", "display_name": "user4818172", "link": "https://stackoverflow.com/users/4818172/user4818172"}, "is_accepted": false, "score": 0, "last_activity_date": 1429689278, "last_edit_date": 1429689278, "creation_date": 1429687513, "answer_id": 29790544, "question_id": 29789996, "link": "https://stackoverflow.com/questions/29789996/apparent-memory-leak-in-recursive-ruby-method/29790544#29790544", "title": "Apparent memory leak in recursive ruby method", "body": "<p>You should make sure to set the status to other than unscraped when finishing with\na page. To me it is not clear what working_page.update( data ) unless data.nil?\ndoes. Also I see no point in using recursion. You could use an infinite loop and break when there are no more pages. Using recursion probably fills up the memory\npretty quickly.\nMost such scripts are slow and could cause a timeout when executed by a web server. You should run the script as some kind of scheduled job.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 2356390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04be1392eef84bdeb18358d89529ea72?s=128&d=identicon&r=PG", "display_name": "deadlysyntax", "link": "https://stackoverflow.com/users/2356390/deadlysyntax"}, "edited": false, "score": 0, "creation_date": 1429691042, "post_id": 29791042, "comment_id": 47712173, "body": "I appreciate your feedback. Thanks, I&#39;ll have a refactor based on your suggestions."}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1429688998, "creation_date": 1429688998, "answer_id": 29791042, "question_id": 29789996, "link": "https://stackoverflow.com/questions/29789996/apparent-memory-leak-in-recursive-ruby-method/29791042#29791042", "title": "Apparent memory leak in recursive ruby method", "body": "<p>Let me first point you to <a href=\"http://blog.skylight.io/hunting-for-leaks-in-ruby/?utm_source=rubyweekly&amp;utm_medium=email\" rel=\"nofollow\">this article</a> I recently read about memory leakage, it is part of the wonderful Ruby Weekly newsletter.</p>\n\n<p>That sead, it is mostly advcanced stuff and the more traditional easy approach works faster most of the time.</p>\n\n<p>In my opinion, the most likely source of the problem is the recursion, get rid of that.</p>\n\n<p>There are some parts of your code that could be more streamlined also. eg</p>\n\n<pre><code>working_page = ProjectData.where( status: 'unscraped', project_id: project[:id]).first\n    working_page.status = 'processing'\n    working_page.save\n</code></pre>\n\n<p>could be</p>\n\n<pre><code>working_page = ProjectData.where( status: 'unscraped', project_id: project[:id]).first_or_create(status: 'processing')\n</code></pre>\n\n<p>The same trick with</p>\n\n<pre><code>unless ProjectData.where( url: link.to_s, project_id: project[:id] ).exists?  \n          ProjectData.create({\n            :url        =&gt; link.to_s,\n            :status     =&gt; 'unscraped',\n            :project_id =&gt; project[:id]\n          })\n</code></pre>\n\n<p>could be (and don't mix old and new notations of hashes)</p>\n\n<pre><code>hash = {url: link.to_s, status: 'unscraped', project_id: project[:id]})\nProjectData.where(hash).first_or_create(hash.merge({status: 'unscraped'}))\n</code></pre>\n\n<p>You can get rid of the last extra level by using</p>\n\n<pre><code>return if links.nil? \n</code></pre>\n\n<p>You'd better comment out all the stuff that is not absolutely necessary, eg the logging and even the saving to database, start with a few lines and see it that works without increasing the memory, then build up by removing the comments.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 2356390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04be1392eef84bdeb18358d89529ea72?s=128&d=identicon&r=PG", "display_name": "deadlysyntax", "link": "https://stackoverflow.com/users/2356390/deadlysyntax"}, "edited": false, "score": 0, "creation_date": 1429695126, "post_id": 29792538, "comment_id": 47715040, "body": "This is the answer to my Disk IO and CPU issues. Changing to a while loop has brought both these stats down to reasonable levels and they aren&#39;t climbing. Thank you."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 144, "user_id": 2356390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04be1392eef84bdeb18358d89529ea72?s=128&d=identicon&r=PG", "display_name": "deadlysyntax", "link": "https://stackoverflow.com/users/2356390/deadlysyntax"}, "edited": false, "score": 0, "creation_date": 1429754300, "post_id": 29792538, "comment_id": 47752356, "body": "Your welcome, but I have to give credit to @peter for his insight. I wrote my answer after reading his and I don&#39;t know if I would have thought about this issue without his reminder."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 2, "last_activity_date": 1429693559, "last_edit_date": 1429693559, "creation_date": 1429693200, "answer_id": 29792538, "question_id": 29789996, "link": "https://stackoverflow.com/questions/29789996/apparent-memory-leak-in-recursive-ruby-method/29792538#29792538", "title": "Apparent memory leak in recursive ruby method", "body": "<p>Just a thought, not an answer:</p>\n\n<p>I hope you are aware that by using recursion, you keep all the collected data and variables in the memory - they are NEVER released UNTIL the recursion ends.</p>\n\n<p>For instance, both the <code>working_page</code> and <code>links</code> variables stay alive in the memory (along with the DB ActiveRecord class) while new <code>working_page</code> and <code>links</code> variables are created within the recursive name-space.</p>\n\n<p>There might be no memory leak, just an issue of design.</p>\n\n<p>Unless you need that data again after the recursion - which you don't seem to - it would be better to use a <code>while</code> loop:</p>\n\n<pre><code>working_page = nil\nwhile (working_page = ProjectData.where( status: 'unscraped', project_id: project[:id] ).first)\n   # ... do your thing...\nend\n</code></pre>\n\n<p>(the <code>=</code> is not a mistake. It's used as an assignment and the whole assignment is reviewed to check that <code>working_page</code> has an object that exists and is assigned to it)</p>\n"}], "owner": {"reputation": 144, "user_id": 2356390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04be1392eef84bdeb18358d89529ea72?s=128&d=identicon&r=PG", "display_name": "deadlysyntax", "link": "https://stackoverflow.com/users/2356390/deadlysyntax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 1, "accepted_answer_id": 29792538, "answer_count": 3, "score": 1, "last_activity_date": 1429693559, "creation_date": 1429685843, "question_id": 29789996, "link": "https://stackoverflow.com/questions/29789996/apparent-memory-leak-in-recursive-ruby-method", "title": "Apparent memory leak in recursive ruby method", "body": "<p>As soon as this script runs I see a steadily increasing level of CPU usage and Disk IO on the server until it eventually gets killed. </p>\n\n<p>It's a script which recursively crawls a site by picking an unscraped url off the database, scraping it and adding it's links to the db.</p>\n\n<p>I assume there is some kind of memory leak within the function or in the way it interacts with ActiveRecord. Is there a way I can make this more efficient and plug the leak?</p>\n\n<pre><code>def self.site project, operate\n\n  @log = Logger.new(STDOUT)\n\n  recurse = -&gt;() do\n    #\n    # Pick a from the database to crawl\n    unless ProjectData.where( status: 'unscraped', project_id: project[:id] ).exists?\n      @log.info \"No pages to scrape\"\n      return\n    end  \n\n    working_page = ProjectData.where( status: 'unscraped', project_id: project[:id]).first\n    working_page.status = 'processing'\n    working_page.save\n\n    @log.info \"Scraping #{working_page.url}\"\n    #\n    #   Scape it\n    data, links = OutriderTools::Scrape::page( working_page.url, operate)\n\n    unless links.nil? \n      links.each  do |link|\n        # Check if link already exists\n        #if ProjectData.find_by(url: link.to_s).nil?\n        unless ProjectData.where( url: link.to_s, project_id: project[:id] ).exists?  \n          ProjectData.create({\n            :url        =&gt; link.to_s,\n            :status     =&gt; 'unscraped',\n            :project_id =&gt; project[:id]\n          })\n          @log.info \"Adding new url to database: #{link.to_s}\"\n        else\n          @log.info \"URL already exists in database: #{link.to_s}\"\n        end\n      end\n    end\n\n    @log.info \"Saving page data for url #{working_page.url}\"\n    @log.info data[:status]\n    working_page.update( data ) unless data.nil?\n\n    recurse.call\n\n  end\n\n  recurse.call\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "multithreading", "file", "pointers", "csv"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429685079, "post_id": 29789644, "comment_id": 47708411, "body": "No, CSV reads the file sequentially. What you could do is read CSV and distribute lines lazily to several different worker threads as they arrive."}, {"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429685433, "post_id": 29789644, "comment_id": 47708624, "body": "hmm, that is actually a very good idea, thank you, i will try that!"}, {"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429686256, "post_id": 29789644, "comment_id": 47709104, "body": "hmm, i must be doing something wrong... it is slower than before!!! :D :( help please"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429686416, "post_id": 29789644, "comment_id": 47709189, "body": "See the comment at the end of my answer. You cannot speed up anything using threads in MRI except blocked IO, since MRI runs only one thread at a time. If you are after speedups, either go with JRuby or Rubinius, or use processes instead of threads."}], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1429688149, "post_id": 29789983, "comment_id": 47710364, "body": "well, i tried that, but probably the file is just too big, or i have a small amount of ram (8GB) so no success. I will probably go by with my old slow but reliable solution. Anyway, big thanks for your ideas and help!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 1, "creation_date": 1429688347, "post_id": 29789983, "comment_id": 47710493, "body": "I am not sure what you mean - why does RAM matter? The file should be loaded one row at a time. What kind of error are you getting?"}, {"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1429688693, "post_id": 29789983, "comment_id": 47710710, "body": "I am getting no error. When I open the task manager in windows, i just see only that ruby had consumed all free ram and nothing is happening. my csv file has about 3.8mil rows and about 2.5GB"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1429689775, "post_id": 29789983, "comment_id": 47711357, "body": "Okay, I found the issue - my deepest apologies, it seems that <code>parallel</code> doesn&#39;t work with iterators properly (it coerces the collection <code>to_a</code> unless it is a lambda, which made it load the whole CSV into memory). Changing to <code>peach</code> should solve that issue."}, {"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1429691154, "post_id": 29789983, "comment_id": 47712237, "body": "do not worry :) so i will have to have require parallel and peach and then, in code Parallel.peach(CSV.foreach(...)) ?"}, {"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1429691264, "post_id": 29789983, "comment_id": 47712306, "body": "ah, you changed the code, okay, thank you, i will try that also"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 1, "creation_date": 1429691284, "post_id": 29789983, "comment_id": 47712317, "body": "No, just <code>peach</code>. There are a bunch of different libraries for threaded master-worker pattern (peach, parallel, workers, parallel-each, producer-consumer...), they all do more or less the same thing. I already changed the sample code in the answer to work with <code>peach</code> instead of <code>parallel</code>. (Forgot to change the link, fixed that too)"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1429691324, "last_edit_date": 1429691324, "creation_date": 1429685799, "answer_id": 29789983, "question_id": 29789644, "link": "https://stackoverflow.com/questions/29789644/ruby-read-csv-but-on-two-different-rows-simultaneously/29789983#29789983", "title": "ruby read csv but on two different rows simultaneously", "body": "<p>What I said in the comments - for example, using the <a href=\"http://peach.rubyforge.org/\" rel=\"nofollow\"><code>peach</code></a> gem:</p>\n\n<pre><code>require 'csv'\nrequire 'peach'\n\nCSV.foreach(\"a.csv\").peach(2) do |row|\n  row.map(&amp;:to_i).reduce(&amp;:+)\nend\n</code></pre>\n\n<p>If you are using MRI, you will suffer from GIL; if the workers are doing some heavy lifting, this code should be a bit slower than the non-threaded one. If your slowness is related to CPU, switch to JRuby or Rubinius, as they don't have GIL. If it is related to IO blocking, then this should help even on MRI.</p>\n"}], "owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1429691324, "creation_date": 1429684821, "last_edit_date": 1429686693, "question_id": 29789644, "link": "https://stackoverflow.com/questions/29789644/ruby-read-csv-but-on-two-different-rows-simultaneously", "title": "ruby read csv but on two different rows simultaneously", "body": "<p>Let's say, I can read CSV by the built in CSV parser. like this:</p>\n\n<pre><code>CSV.foreach(file_path, quote_char: '\"', col_sep: ',', row_sep: :auto, headers: true) { |line|\n    #some code here\n}\n</code></pre>\n\n<p>this code reads and parse whole csv from start to end.</p>\n\n<p>So, my question is if it is possible or some no-lame way to read the CSV simultaneously > like one part of script would read csv from start to half and second part of script from half to end just by accesing the file on disk?</p>\n\n<p>! without reading the csv into array/memory/other</p>\n\n<p>ruby pseudo code (with knowing all lines in file)</p>\n\n<pre><code>threads = []\n\nthreads &lt;&lt; Thread.new do\n    csvread(startrowindex,halfrowindex)\n    end\n\nthreads &lt;&lt; Thread.new do\n   csvread(halfrowindex+1,endrowindex)\n   end\nthreads.each(&amp;:join)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sunspot-rails", "sunspot-solr"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4768426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c7a8d12d76767be434921670cdcb88?s=128&d=identicon&r=PG&f=1", "display_name": "Monkey D. Luffy", "link": "https://stackoverflow.com/users/4768426/monkey-d-luffy"}, "edited": false, "score": 0, "creation_date": 1429689221, "post_id": 29789615, "comment_id": 47711024, "body": "its not raise an error now, but the product not order accordingly to desc at created_at :("}, {"owner": {"reputation": 3211, "user_id": 4377017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-QUYAVWJQopU/AAAAAAAAAAI/AAAAAAAAAAA/5Xpy51rKuFM/photo.jpg?sz=128", "display_name": "Igor Ivancha", "link": "https://stackoverflow.com/users/4377017/igor-ivancha"}, "reply_to_user": {"reputation": 23, "user_id": 4768426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c7a8d12d76767be434921670cdcb88?s=128&d=identicon&r=PG&f=1", "display_name": "Monkey D. Luffy", "link": "https://stackoverflow.com/users/4768426/monkey-d-luffy"}, "edited": false, "score": 0, "creation_date": 1429689830, "post_id": 29789615, "comment_id": 47711399, "body": "what db are you using?"}, {"owner": {"reputation": 3211, "user_id": 4377017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-QUYAVWJQopU/AAAAAAAAAAI/AAAAAAAAAAA/5Xpy51rKuFM/photo.jpg?sz=128", "display_name": "Igor Ivancha", "link": "https://stackoverflow.com/users/4377017/igor-ivancha"}, "reply_to_user": {"reputation": 23, "user_id": 4768426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c7a8d12d76767be434921670cdcb88?s=128&d=identicon&r=PG&f=1", "display_name": "Monkey D. Luffy", "link": "https://stackoverflow.com/users/4768426/monkey-d-luffy"}, "edited": false, "score": 0, "creation_date": 1429690536, "post_id": 29789615, "comment_id": 47711808, "body": "so I thought! I also have the same issue with postgre, when there is a searching, scope does not work properly! in development sqlite3 and all work fine"}, {"owner": {"reputation": 23, "user_id": 4768426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c7a8d12d76767be434921670cdcb88?s=128&d=identicon&r=PG&f=1", "display_name": "Monkey D. Luffy", "link": "https://stackoverflow.com/users/4768426/monkey-d-luffy"}, "edited": false, "score": 0, "creation_date": 1429690597, "post_id": 29789615, "comment_id": 47711846, "body": "I see, so its an issue then, I must not use sunspot with postgresql then :("}, {"owner": {"reputation": 3211, "user_id": 4377017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-QUYAVWJQopU/AAAAAAAAAAI/AAAAAAAAAAA/5Xpy51rKuFM/photo.jpg?sz=128", "display_name": "Igor Ivancha", "link": "https://stackoverflow.com/users/4377017/igor-ivancha"}, "reply_to_user": {"reputation": 23, "user_id": 4768426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c7a8d12d76767be434921670cdcb88?s=128&d=identicon&r=PG&f=1", "display_name": "Monkey D. Luffy", "link": "https://stackoverflow.com/users/4768426/monkey-d-luffy"}, "edited": false, "score": 0, "creation_date": 1429691081, "post_id": 29789615, "comment_id": 47712194, "body": "this issue will always if you want to use search in postgresql, scope results will be not correct"}], "tags": [], "owner": {"reputation": 3211, "user_id": 4377017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-QUYAVWJQopU/AAAAAAAAAAI/AAAAAAAAAAA/5Xpy51rKuFM/photo.jpg?sz=128", "display_name": "Igor Ivancha", "link": "https://stackoverflow.com/users/4377017/igor-ivancha"}, "is_accepted": false, "score": 0, "last_activity_date": 1429684709, "creation_date": 1429684709, "answer_id": 29789615, "question_id": 29789256, "link": "https://stackoverflow.com/questions/29789256/rails-4-and-gem-sunspot-cannot-order-correctly/29789615#29789615", "title": "Rails 4 and gem sunspot cannot order correctly", "body": "<p>just add <code>time :created_at</code> in your model</p>\n\n<pre><code> class Product &lt; ActiveRecord::Base\n   searchable do \n     text :name\n     text :description\n     text :specification\n     time :created_at\n\n     string  :name\n   end\n end\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4768426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c7a8d12d76767be434921670cdcb88?s=128&d=identicon&r=PG&f=1", "display_name": "Monkey D. Luffy", "link": "https://stackoverflow.com/users/4768426/monkey-d-luffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429684709, "creation_date": 1429683521, "question_id": 29789256, "link": "https://stackoverflow.com/questions/29789256/rails-4-and-gem-sunspot-cannot-order-correctly", "title": "Rails 4 and gem sunspot cannot order correctly", "body": "<p>Im getting this error:</p>\n\n<pre><code>Sunspot::UnrecognizedFieldError in SitesController#products\nNo field configured for Product with name 'created_at'\n</code></pre>\n\n<p>here is my model <strong>Product.rb</strong></p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n    searchable do \n      text :name\n      text :description\n      text :specification\n\n      string  :name\n    end\nend\n</code></pre>\n\n<p>and here is a mehod in my controller:</p>\n\n<pre><code>def list_all_products\n    @search = Product.search do\n      fulltext params[:search]\n      order_by :created_at, :desc\n    end\n\n    @products = @search.results\n  end\n</code></pre>\n\n<p>the <em>name</em> field in my table products is a <em>string</em>. I defined in searchable products both for text and string. Why I still getting an error like this? thank you.</p>\n"}, {"tags": ["ruby", "cucumber", "rally"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429788051, "post_id": 29809772, "comment_id": 47769902, "body": "I am using rally_api 1.1.2 gem only. In above output it showing rally_rest_api version 1.1.0.. Am instanting RallyRestApi and using @slm as variable (@slm= RallyRestApi.new(:url, :username, :password) \u2013"}, {"owner": {"reputation": 61, "user_id": 2112473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fs3EI.jpg?s=128&g=1", "display_name": "unicornzero", "link": "https://stackoverflow.com/users/2112473/unicornzero"}, "reply_to_user": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429824117, "post_id": 29809772, "comment_id": 47795785, "body": "The two gems are very similarly named and I think you&#39;re using the old/outdated one. To verify this, go into command line for your project and type &#39;gem list&#39; to see the list of gems and copy-paste it here. I believe you are running the old rally_rest_api gem (see <a href=\"https://rubygems.org/gems/rally_rest_api\" rel=\"nofollow noreferrer\">rubygems.org/gems/rally_rest_api</a>) instead of the new rally_api gem (see <a href=\"https://rubygems.org/gems/rally_api/versions/1.1.2\" rel=\"nofollow noreferrer\">rubygems.org/gems/rally_api/versions/1.1.2</a>). In the new gem, the class name you instantiate is different (example:     @rally = RallyAPI::RallyRestJson.new(config))"}, {"owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429857801, "post_id": 29809772, "comment_id": 47807097, "body": "*** LOCAL GEMS ***  activemodel (4.2.1) activeresource (4.0.0, 2.3.4) activesupport (4.2.1, 2.3.4) bigdecimal (1.2.6) builder (3.2.2) cucumber (2.0.0) cucumber-core (1.1.3) cucumber-to-rally (0.1.3) debase (0.1.2) debase-ruby_core_source (0.7.8) diff-lcs (1.2.5) domain_name (0.5.23) formatter (0.1.0) formatter-date (0.1.1) formatter-number (0.1.0) gherkin (2.12.2) http-cookie (1.0.2) httpclient (2.6.0.1, 2.4.0) i18n (0.7.0) io-console (0.4.3) java-properties (0.0.2) java_properties (0.0.4) json (1.8.1) logeasy (0.0.8) logger (1.2.8) mime-types (2.4.3)"}, {"owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429857812, "post_id": 29809772, "comment_id": 47807103, "body": "mini_portile (0.6.2) minitest (5.4.3) multi_json (1.11.0) multi_test (0.1.2) net-http-digest_auth (1.4) net-http-persistent (2.9.4) ntlm-http (0.1.1) optparse-command (0.1.8) power_assert (0.2.2) properties-ruby (0.0.4) psych (2.0.8) rails-observers (0.1.2) rake (10.4.2) rally_api (1.1.2) rally_rest_api (1.1.0) rdoc (4.2.0) ruby-debug-ide (0.4.28) test-unit (3.0.8) thread_safe (0.3.5) tzinfo (1.2.2) unf (0.1.4) unf_ext (0.0.6) webrobots (0.1.1) yaml-lint (0.0.4)"}, {"owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429858151, "post_id": 29809772, "comment_id": 47807253, "body": "Those are the gems I installed... When using RallyAPI::RallyRestJson.new(config), am unable to find workspace.."}, {"owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429858204, "post_id": 29809772, "comment_id": 47807287, "body": "Piece of code  slm = RallyAPI::RallyRestJson.new(conf)       rally = Hash.new       rally[&quot;slm&quot;] = slm       rally[&quot;workspace&quot;] = slm.user.subscription.workspaces.find { |w| w.name == &quot;workspace_name&quot; }"}, {"owner": {"reputation": 61, "user_id": 2112473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fs3EI.jpg?s=128&g=1", "display_name": "unicornzero", "link": "https://stackoverflow.com/users/2112473/unicornzero"}, "reply_to_user": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429891912, "post_id": 29809772, "comment_id": 47830692, "body": "First, you need to uninstall &quot;rally_rest_api&quot; as that is the old library and is what your errors were generated by."}, {"owner": {"reputation": 61, "user_id": 2112473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fs3EI.jpg?s=128&g=1", "display_name": "unicornzero", "link": "https://stackoverflow.com/users/2112473/unicornzero"}, "reply_to_user": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1429892179, "post_id": 29809772, "comment_id": 47830871, "body": "If RallyAPI cannot find the workspace, then please verify the user in your config or connection has access to that workspace through the website. If it does, then your connection credentials are probably not configured correctly. Please refer to the readme for the rally_api gem at <a href=\"https://github.com/RallyTools/RallyRestToolkitForRuby\" rel=\"nofollow noreferrer\">github.com/RallyTools/RallyRestToolkitForRuby</a>"}, {"owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "edited": false, "score": 0, "creation_date": 1430215374, "post_id": 29809772, "comment_id": 47953849, "body": "Can&#39;t we update a test case by rally_rest_api? Our team developed a project under rally_rest_api. We just need a feature to update test case. We already creating user stories and test cases by finding workspace under rally_rest_api. When we are able to do user story creation, can&#39;t we update test case by rally_rest_api??"}], "tags": [], "owner": {"reputation": 61, "user_id": 2112473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fs3EI.jpg?s=128&g=1", "display_name": "unicornzero", "link": "https://stackoverflow.com/users/2112473/unicornzero"}, "is_accepted": false, "score": 1, "last_activity_date": 1429740347, "creation_date": 1429740347, "answer_id": 29809772, "question_id": 29789183, "link": "https://stackoverflow.com/questions/29789183/updating-test-case-in-rally-by-ruby/29809772#29809772", "title": "Updating test case in rally by ruby", "body": "<p>First of all, I see that you're using an outdated gem. Please switch to using the rally_api gem. The latest version is 1.1.2: <a href=\"https://rubygems.org/gems/rally_api/versions/1.1.2\" rel=\"nofollow\">https://rubygems.org/gems/rally_api/versions/1.1.2</a></p>\n\n<p>Then, if you still need help, please point me to a repo where the code is located or provide a gist link. I'd like to know where @slm and :work_product are defined as they seem to be the source of your error.</p>\n"}], "owner": {"reputation": 85, "user_id": 3773693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6704689f9b31296bb7b6c6a18ee2ecb2?s=128&d=identicon&r=PG&f=1", "display_name": "User 0234", "link": "https://stackoverflow.com/users/3773693/user-0234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429770083, "creation_date": 1429683190, "last_edit_date": 1429770083, "question_id": 29789183, "link": "https://stackoverflow.com/questions/29789183/updating-test-case-in-rally-by-ruby", "title": "Updating test case in rally by ruby", "body": "<p>I am trying to update test case of a particular scenario. But it saying that undefined method update for :test_case symbol.</p>\n\n<p>Need help on this..</p>\n\n<p>My updating method is....</p>\n\n<pre><code>def dataValidInput(featName,testCase)\n  fields = {:workspace =&gt; @rally[\"workspace\"],\n    :project =&gt; @rally[\"project\"],\n    :work_product =&gt; featName,\n    :test_case =&gt; testCase,\n    :validation_input =&gt; @step_name,\n    :name =&gt; testCase}\n  test_case = @slm.update(:test_case,fields)\nend\n</code></pre>\n\n<p>Am getting output as...</p>\n\n<pre><code>undefined method `update' for :test_case:Symbol (NoMethodError)\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/rally_rest_api-1.1.0/lib  /rally_rest_api/rally_rest.rb:105:in `update'\nC:/Users/CukesRally/features/CreateTC10.rb:176:in `nilValidInput'\nC:/Users/CukesRally/features/CreateTC10.rb:154:in `chek_Steps'\nC:/Users/CukesRally/features/CreateTC10.rb:132:in `find_or_create_test_case'\nC:/Users/CukesRally/features/CreateTC10.rb:104:in `after_features'\nC:/Users/CukesRally/features/CreateTC10.rb:93:in `before_test_case'\n</code></pre>\n\n<p>My Command :</p>\n\n<pre><code>cucumber C:/Users/CukesRally/features/Plan.feature --format MyTest::CreateStep\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "strong-parameters"], "comments": [{"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1429685219, "post_id": 29789151, "comment_id": 47708499, "body": "Could you please show the schema to get more idea about it."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1429685296, "post_id": 29789151, "comment_id": 47708555, "body": "You need to type the nested format inside the form, so please share the schema."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1429692493, "post_id": 29789151, "comment_id": 47713097, "body": "@Akhil : I have post the answer please let me know it works or not?"}, {"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429693635, "post_id": 29789151, "comment_id": 47714003, "body": "hi friends thanks i will check and let you know"}], "answers": [{"comments": [{"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429694698, "post_id": 29790073, "comment_id": 47714745, "body": "Hi,  I think i need to research more. I changed as per your suggestion but now create page is error with <b>&#39;ActionView::Template::Error (undefined method `link_to_add&#39; for #&lt;ActionView::Helpers::FormBuilder:0x007f7d3c00b4a8&gt;):&#39;</b> . But i added helper in application helper"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 1, "creation_date": 1429695428, "post_id": 29790073, "comment_id": 47715247, "body": "@Akhil : no need to add any helper method in application helper file.  install <code>gem &quot;nested_form&quot;</code> and in application.js file add <code>&#47;&#47;= require jquery_nested_form</code>"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429697322, "post_id": 29790073, "comment_id": 47716644, "body": "@Akhil : I have updated the answer for model with <code>:reject_if =&gt; :all_blank</code> and restart the server then try"}, {"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429697515, "post_id": 29790073, "comment_id": 47716787, "body": "I updated and same error raising. I don&#39;t any other mistake so i updated my changes in my question. Yes i updated :reject_if also"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429697661, "post_id": 29790073, "comment_id": 47716899, "body": "@Akhil : I have updated my Answer. I found that you had use <code>form_for</code> which was giving you error. Use &#39;nested_form_for` Check my updated answer and keep that <code>&lt;%= f.link_to_add &quot;Add Location&quot;, :office_assignment_Location , :class=&gt;&#39;btn btn-primary&#39;%&gt;</code> out of loop only"}, {"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 1, "creation_date": 1429697999, "post_id": 29790073, "comment_id": 47717158, "body": "Thanks now it shows error as <b>Invalid association. Make sure that accepts_nested_attributes_for is used for :office_assignment_Location association</b> so something related to attribute"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 1, "creation_date": 1429698167, "post_id": 29790073, "comment_id": 47717271, "body": "replace <code>:office_assignment_Location</code> with <code>:office_assignment</code>"}, {"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429698744, "post_id": 29790073, "comment_id": 47717706, "body": "thanks @Gagan Gami . Now create page shown with one Add Location button. But i am not clear that how i add location along with instructor. Nothing happened when i clicked Add Location button. please explain"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429699090, "post_id": 29790073, "comment_id": 47717963, "body": "So you mean that data are not stored in db? Or Data which you entered are not seen(location). Check that data are entered in db?"}, {"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "edited": false, "score": 0, "creation_date": 1429699363, "post_id": 29790073, "comment_id": 47718183, "body": "Yes not saved. Also i don&#39;t get any text box to add location. I got Add Location button just before save button. When i save instructor is inserted but nothing happened in location. If you are ok please help in chat"}, {"owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1429701946, "post_id": 29790073, "comment_id": 47720146, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/75932/discussion-between-akhil-and-gagan-gami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1429698278, "last_edit_date": 1429698278, "creation_date": 1429686104, "answer_id": 29790073, "question_id": 29789151, "link": "https://stackoverflow.com/questions/29789151/create-related-data-using-nested-attributes/29790073#29790073", "title": "Create Related Data using Nested attributes", "body": "<p>FYI: attribute's name should start with small letter not capital.</p>\n\n<p>Here are some changes:</p>\n\n<pre><code>class Instructor &lt; ActiveRecord::Base\n  has_one :office_assignment , :dependent =&gt; :destroy # add dependent destroy\n  has_many :departments\n  has_and_belongs_to_many :courses\n\n  accepts_nested_attributes_for :office_assignment,  :reject_if =&gt; :all_blank, :allow_destroy =&gt; true # add allow destroy\nend\n</code></pre>\n\n<p>Some change in strong Parameters: </p>\n\n<pre><code> def instructor_params\n      params.require(:instructor).permit(:LastName, :FirstMidName, :HireDate, office_assignment_attributes: [:id, :Lesson ,:_destroy])\n    end\n</code></pre>\n\n<p><strong>Note:</strong> Don't forget to add <code>:id</code> and <code>:_destroy</code> in <code>office_assignment_attributes</code></p>\n\n<p>Now in View(form_template):</p>\n\n<p>Instead of this:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :Location, :class =&gt; 'control-label' %&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;input type=\"text\" name=\"office_assignment_Location\" class =\"form-control\"&gt;\n      &lt;/div&gt;\n      &lt;%= error_span(@instructor[:HireDate]) %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>&lt;%= nested_form_for @instructor, :html =&gt; { :class =&gt; \"form-horizontal instructor\" } do |f| %&gt;\n\n......\n.....\n\n&lt;%= f.fields_for :office_assignment do |loc| %&gt;\n      &lt;div class=\"form-group\"&gt;\n       &lt;%= loc.label :Location, :class =&gt; 'control-label' %&gt;\n        &lt;div class=\"controls\"&gt; \n          &lt;%= loc.text_field :Location %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n     &lt;%= f.link_to_add \"Add Location\", :office_assignment , :class=&gt;'btn btn-primary'%&gt;\n</code></pre>\n\n<p>You have to create nested form like this. I hope this helps you.</p>\n\n<p><strong>Note:</strong> Use <code>nested_form_for</code> instead of <code>form_for</code> in your form:\nFor your reference:</p>\n\n<ul>\n<li><a href=\"http://railscasts.com/episodes/196-nested-model-form-part-1\" rel=\"nofollow\">http://railscasts.com/episodes/196-nested-model-form-part-1</a></li>\n<li><a href=\"http://railscasts.com/episodes/197-nested-model-form-part-2\" rel=\"nofollow\">http://railscasts.com/episodes/197-nested-model-form-part-2</a></li>\n</ul>\n"}], "owner": {"reputation": 1601, "user_id": 1882844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/JmhB5.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1882844/akhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1429698278, "creation_date": 1429683090, "last_edit_date": 1429697469, "question_id": 29789151, "link": "https://stackoverflow.com/questions/29789151/create-related-data-using-nested-attributes", "title": "Create Related Data using Nested attributes", "body": "<p>api. Now need to insert a record which has associated records. I read nested attributes but didn't get any idea. I can't understand well.</p>\n\n<p>I tried with one example in rails mvc project but even i can't create associated record in one-one mapping itself. Please guid me what the steps to do this or any good articles with sample?</p>\n\n<p>Anyway the following is my workings</p>\n\n<p>My model is</p>\n\n<pre><code>class Instructor &lt; ActiveRecord::Base\n  has_one :office_assignment\n  has_many :departments\n  has_and_belongs_to_many :courses\n\n  accepts_nested_attributes_for :office_assignment\nend\n\nclass OfficeAssignment &lt; ActiveRecord::Base\n  belongs_to :instructor\nend\n</code></pre>\n\n<p>My controller methods for create</p>\n\n<pre><code>def new\n    @instructor = Instructor.new\n  end\n\n  def create\n    @instructor = Instructor.new(instructor_params)\n\n    respond_to do |format|\n      if @instructor.save\n\n        format.html { redirect_to @instructor, notice: 'Instructor was successfully created.' }\n        format.json { render :show, status: :created, location: @instructor }\n      else\n        format.html { render :new }\n        format.json { render json: @instructor.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_instructor\n      @instructor = Instructor.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def instructor_params\n      params.require(:instructor).permit(:LastName, :FirstMidName, :HireDate, office_assignment_attributes: [:Location])\n    end\n</code></pre>\n\n<p>My create form</p>\n\n<pre><code>&lt;%= form_for @instructor, :html =&gt; { :class =&gt; \"form-horizontal instructor\" } do |f| %&gt;\n\n    &lt;% if @instructor.errors.any? %&gt;\n    &lt;div id=\"error_expl\" class=\"panel panel-danger\"&gt;\n      &lt;div class=\"panel-heading\"&gt;\n        &lt;h3 class=\"panel-title\"&gt;&lt;%= pluralize(@instructor.errors.count, \"error\") %&gt; prohibited this instructor from being saved:&lt;/h3&gt;\n      &lt;/div&gt;\n      &lt;div class=\"panel-body\"&gt;\n        &lt;ul&gt;\n        &lt;% @instructor.errors.full_messages.each do |msg| %&gt;\n          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :LastName, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\"&gt;\n      &lt;%= f.text_field :LastName, :class =&gt; 'form-control' %&gt;\n    &lt;/div&gt;\n    &lt;%= error_span(@instructor[:LastName]) %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :FirstMidName, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\"&gt;\n      &lt;%= f.text_field :FirstMidName, :class =&gt; 'form-control' %&gt;\n    &lt;/div&gt;\n    &lt;%= error_span(@instructor[:FirstMidName]) %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :HireDate, :class =&gt; 'control-label' %&gt;\n    &lt;div class=\"controls\"&gt;\n      &lt;%= f.text_field :HireDate, :class =&gt; 'form-control' %&gt;\n    &lt;/div&gt;\n    &lt;%= error_span(@instructor[:HireDate]) %&gt;\n  &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :Location, :class =&gt; 'control-label' %&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;input type=\"text\" name=\"office_assignment_Location\" class =\"form-control\"&gt;\n      &lt;/div&gt;\n      &lt;%= error_span(@instructor[:HireDate]) %&gt;\n    &lt;/div&gt;\n\n\n  &lt;%= f.submit nil, :class =&gt; 'btn btn-primary' %&gt;\n  &lt;%= link_to t('.cancel', :default =&gt; t(\"helpers.links.cancel\")),\n            instructors_path, :class =&gt; 'btn btn-default' %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Please guide me..</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Changes in html file</p>\n\n<pre><code>&lt;%= f.fields_for :office_assignment_Location do |loc| %&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= loc.label :Location, :class =&gt; 'control-label' %&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= loc.text_field :Location %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;%= loc.link_to_add \"Add Location\", :office_assignment_Location , :class=&gt;'btn btn-primary'%&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My param in controller</p>\n\n<pre><code>def instructor_params\n  params.require(:instructor).permit(:LastName, :FirstMidName, :HireDate, office_assignment_attributes: [:id, :Location ,:_destroy])\nend\n</code></pre>\n\n<p>My schema</p>\n\n<pre><code>create_table \"instructors\", force: :cascade do |t|\n    t.string   \"LastName\",     limit: 255\n    t.string   \"FirstMidName\", limit: 255\n    t.date     \"HireDate\"\n    t.datetime \"created_at\",               null: false\n    t.datetime \"updated_at\",               null: false\n  end\n\n  create_table \"office_assignments\", primary_key: \"Instructor_Id\", force: :cascade do |t|\n    t.string   \"Location\",   limit: 255\n    t.datetime \"created_at\",             null: false\n    t.datetime \"updated_at\",             null: false\n  end\n\n  add_foreign_key \"office_assignments\", \"instructors\", column: \"Instructor_Id\"\n</code></pre>\n"}, {"tags": ["ruby", "datepicker", "ruby-on-rails-3.2"], "owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1429680719, "creation_date": 1429680719, "question_id": 29788519, "link": "https://stackoverflow.com/questions/29788519/search-database-value-using-will-paginate-gem-in-rails-3", "title": "Search database value using will_paginate gem in Rails 3", "body": "<p>I am using will_paginate gem for filtering table according to date which is saved in DB already.My db column name and column value like this <code>Created_On-&gt; 2015-04-15 23.00.59</code>.In my search field i am using <code>gem 'bootstrap-datepicker-rails', '&gt;= 0.6.21'</code> for accepting date from calendar and it gives date like this <code>04/15/2015</code>. in this format i am unable to fetch data properly.Please help me to format this type of date to same as db date format and search from table successfully.</p>\n\n<p>I am explaining my code below.</p>\n\n<h1>reports/view_report.html.erb</h1>\n\n<pre><code>&lt;div class=\"input-group bmargindiv1 date\" data-behaviour='datepicker1'&gt;\n         &lt;%= form_tag reports_view_report_path, :method =&gt; 'get' do %&gt;  \n         &lt;%= text_field_tag :search, params[:search], :class =&gt; \"form-control\", :onchange =&gt; 'this.form.submit();'%&gt; \n           &lt;% end %&gt;\n            &lt;span class=\"input-group-addon\"&gt;\n                &lt;span class=\"fa fa-calendar\"&gt;&lt;/span&gt;\n            &lt;/span&gt;\n            &lt;script type=\"text/javascript\"&gt;\n              $('[data-behaviour~=datepicker1]').datepicker();\n            &lt;/script&gt;\n          &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;!--1st_total_div--&gt;\n    &lt;!--1st_total_div--&gt;\n    &lt;div class=\"block-content\"&gt;\n        &lt;div class=\"table-responsive\"&gt;\n            &lt;table class=\"table table-bordered\"&gt;\n            &lt;colgroup&gt;\n                &lt;col class=\"col-md-1 col-sm-1\"&gt;\n                &lt;col class=\"col-md-2 col-sm-2\"&gt;\n                &lt;col class=\"col-md-3 col-sm-3\"&gt;\n                &lt;col class=\"col-md-3 col-sm-3\"&gt;\n                &lt;col class=\"col-md-1 col-sm-1\"&gt;\n                &lt;col class=\"col-md-1 col-sm-1\"&gt;\n                &lt;col class=\"col-md-1 col-sm-1\"&gt;\n            &lt;/colgroup&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                &lt;th class=\"text-center\"&gt;Sl. No&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Receipt Number&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Date&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Deceased Name&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Deceased Adress&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Doner Name&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Doner Adress&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Doner Mobile No&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Doner's Relationship&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Donation Amount&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Date of death&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;HCSY Status&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Deceased photo&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Doner photo&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Brahmin&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Action&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n            &lt;% @sdf.each do |sdf| %&gt;\n            &lt;tr&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Sdp_Id %&gt;&lt;/td&gt;\n             &lt;td class=\"text-center\"&gt;&lt;%= sdf.Receipt_No %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Created_On %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Deceased_Name %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Deceased_Address1 %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Doner_Name %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Doner_Address1 %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Doner_MobileNo %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Doner_Relationship_Other %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Donation_Amount %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Date_Of_Death %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.HCSY_Status %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= image_tag(sdf.Photo,:width =&gt; 50,:height =&gt; 50) %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= image_tag(sdf.Doner_Photo,:width =&gt; 50,:height =&gt; 50) %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;&lt;%= sdf.Brahmin %&gt;&lt;/td&gt;\n            &lt;td class=\"text-center\"&gt;\n            &lt;div class=\"btn-group\"&gt;\n            &lt;a href=\"/homes/home/?receipt_no=&lt;%= sdf.Receipt_No %&gt;\" data-toggle=\"tooltip\" title=\"\" class=\"btn btn-xs btn-success\" data-original-title=\"View\"&gt;\n                &lt;i class=\"fa fa-eye\"&gt;&lt;/i&gt;\n            &lt;/a&gt;\n            &lt;/div&gt;\n            &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;% end %&gt;\n            &lt;/tbody&gt;\n            &lt;/table&gt;\n             &lt;%= will_paginate @sdf %&gt;  \n        &lt;/div&gt;\n    &lt;/div&gt; \n</code></pre>\n\n<h1>controller/reports_controller.rb</h1>\n\n<pre><code>class ReportsController &lt; ApplicationController\n     helper_method :sort_column, :sort_direction\n    def view_report\n        @sdf =TSdf.all\n        @sdf = TSdf.search(params[:search]).order(sort_column + ' ' + sort_direction).paginate(:per_page =&gt; 5, :page =&gt; params[:page])  \n    end\n    def sort_column\n     TSdf.column_names.include?(params[:sort]) ? params[:sort] : \"Created_On\"\n  end\n\n  def sort_direction\n    %w[asc desc].include?(params[:direction]) ? params[:direction] : \"asc\"\n  end\nend\n</code></pre>\n\n<h1>t_sdf.rb</h1>\n\n<pre><code>class TSdf &lt; ActiveRecord::Base\n  # attr_accessible :title, :body\n  self.table_name = 't_sdf'\n  def self.search(search)  \n    if search  \n      where('Created_On LIKE ?', \"%#{search}%\")  \n    else  \n      scoped  \n    end  \n  end  \nend\n</code></pre>\n\n<h1>Gemfile</h1>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '3.2.19'\n\n# Bundle edge Rails instead:\n# gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'\n\ngem 'mysql'\n\n\n# Gems used only for assets and not required\n# in production environments by default.\ngroup :assets do\n  gem 'sass-rails',   '~&gt; 3.2.3'\n  gem 'coffee-rails', '~&gt; 3.2.1'\n\n  # See https://github.com/sstephenson/execjs#readme for more supported runtimes\n  # gem 'therubyracer', :platforms =&gt; :ruby\n\n  gem 'uglifier', '&gt;= 1.0.3'\nend\n\ngem 'jquery-rails'\n\n# To use ActiveModel has_secure_password\n# gem 'bcrypt-ruby', '~&gt; 3.0.0'\ngem \"bcrypt-ruby\", :require =&gt; \"bcrypt\"\n# To use Jbuilder templates for JSON\n# gem 'jbuilder'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Deploy with Capistrano\n# gem 'capistrano'\n\n# To use debugger\n# gem 'debugger'\ngem 'bootstrap-datepicker-rails', '&gt;= 0.6.21'\ngem 'will_paginate', '~&gt; 3.0'\n</code></pre>\n\n<p>I cannot search even if i am selecting the right date from calendar due to different date time format.Please help me to resolve this issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1077, "user_id": 1425596, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/888a706c6bd51bb4272e069b835f1f3f?s=128&d=identicon&r=PG", "display_name": "Silverfall05", "link": "https://stackoverflow.com/users/1425596/silverfall05"}, "edited": false, "score": 0, "creation_date": 1429680529, "post_id": 29788466, "comment_id": 47706142, "body": "forgot to say, that it saves entry in DB"}, {"owner": {"reputation": 149047, "user_id": 762073, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7fb6b9bc012cd839a99ba778c722c5a7?s=128&d=identicon&r=PG", "display_name": "xdazz", "link": "https://stackoverflow.com/users/762073/xdazz"}, "reply_to_user": {"reputation": 1077, "user_id": 1425596, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/888a706c6bd51bb4272e069b835f1f3f?s=128&d=identicon&r=PG", "display_name": "Silverfall05", "link": "https://stackoverflow.com/users/1425596/silverfall05"}, "edited": false, "score": 0, "creation_date": 1429680647, "post_id": 29788466, "comment_id": 47706192, "body": "@AigarsCibu\u013cskis Could you post more code to demonstrate your issue?"}], "tags": [], "owner": {"reputation": 149047, "user_id": 762073, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7fb6b9bc012cd839a99ba778c722c5a7?s=128&d=identicon&r=PG", "display_name": "xdazz", "link": "https://stackoverflow.com/users/762073/xdazz"}, "is_accepted": false, "score": 0, "last_activity_date": 1429680649, "last_edit_date": 1429680649, "creation_date": 1429680457, "answer_id": 29788466, "question_id": 29788362, "link": "https://stackoverflow.com/questions/29788362/rails-first-or-initialize-doesnt-manage-to-set-id-in-time/29788466#29788466", "title": "Rails first_or_initialize doesn&#39;t manage to set id in time?", "body": "<p>You have to check whether the user is successfully saved.</p>\n\n<pre><code>@user = User.where(:provider =&gt; @provider, :uid =&gt; @shop[:uid]).first_or_initialize\n\nif @user.save\n  EmailWelcome.perform_async @user.id\nelse \n  p @user.errors\nend\n</code></pre>\n\n<p>Or using <code>@user.save!</code>, this way will throw exception if save failed.</p>\n"}, {"tags": [], "owner": {"reputation": 6424, "user_id": 17076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/38a8230ed3d5c685558b4f0aad3fc74b?s=128&d=identicon&r=PG", "display_name": "Joe Van Dyk", "link": "https://stackoverflow.com/users/17076/joe-van-dyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1429680835, "creation_date": 1429680835, "answer_id": 29788544, "question_id": 29788362, "link": "https://stackoverflow.com/questions/29788362/rails-first-or-initialize-doesnt-manage-to-set-id-in-time/29788544#29788544", "title": "Rails first_or_initialize doesn&#39;t manage to set id in time?", "body": "<p>Are you sure that the id is nil when it's being sent to the worker? Or that the worker process just can't find the user based on the id that's given to the job?</p>\n\n<p>If you are using a worker process like resque or sidekiq, it won't have access to the user until the transaction completes. If that's the problem, you need to use <code>after_commit</code> or some other way to queue up the <code>EmailWelcome</code> job <em>after</em> the transaction completes.</p>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 1110232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1edb3be270997d88abbda53a181f9275?s=128&d=identicon&r=PG", "display_name": "Jim Grimmett", "link": "https://stackoverflow.com/users/1110232/jim-grimmett"}, "is_accepted": false, "score": 0, "last_activity_date": 1553273517, "creation_date": 1553273517, "answer_id": 55304378, "question_id": 29788362, "link": "https://stackoverflow.com/questions/29788362/rails-first-or-initialize-doesnt-manage-to-set-id-in-time/55304378#55304378", "title": "Rails first_or_initialize doesn&#39;t manage to set id in time?", "body": "<p>I was just looking for an answer to the same problem. I have multiple databases and it was working on dev but not staging.</p>\n\n<p>The id column on the staging column was missing the auto-increment sequence (in postgres).</p>\n\n<p>Something else for you to check.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 1077, "user_id": 1425596, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/888a706c6bd51bb4272e069b835f1f3f?s=128&d=identicon&r=PG", "display_name": "Silverfall05", "link": "https://stackoverflow.com/users/1425596/silverfall05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 29788544, "answer_count": 3, "score": 1, "last_activity_date": 1553273517, "creation_date": 1429680024, "last_edit_date": 1429680579, "question_id": 29788362, "link": "https://stackoverflow.com/questions/29788362/rails-first-or-initialize-doesnt-manage-to-set-id-in-time", "title": "Rails first_or_initialize doesn&#39;t manage to set id in time?", "body": "<p>I have very strange behaviour when I'm initialising new User.</p>\n\n<p>I run code like <code>@user = User.where(:provider =&gt; @provider, :uid =&gt; @shop[:uid]).first_or_initialize</code></p>\n\n<p>setting all neded data and then saving <code>@user.save</code></p>\n\n<p>But then when I pass user id immediately after saving to Worker</p>\n\n<p><code>EmailWelcome.perform_async @user.id</code></p>\n\n<p>It passes <code>nil</code> as user id.. So my question has anybody seen such behaviour with *_initialize methods and what should I do? </p>\n\n<p><strong>EDIT:</strong> Also need to mention, that it saves record in DB</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays", "validation"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 2, "creation_date": 1429677424, "post_id": 29787819, "comment_id": 47705163, "body": "Are you rebuilding a foreign-key constraint in Rails? <a href=\"http://www.w3schools.com/sql/sql_foreignkey.asp\" rel=\"nofollow noreferrer\">w3schools.com/sql/sql_foreignkey.asp</a>"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1429677728, "post_id": 29787819, "comment_id": 47705242, "body": "is <code>ids</code> a class method of <code>PaymentType </code>, what&#39;s <code>PaymentType</code>? model?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1429677828, "post_id": 29787819, "comment_id": 47705276, "body": "<code>ids</code> fetches out all the ids of the PaymentType class -&gt; AFAICS the OP is trying to check that the pay_type is one of those ids... this is exactly what a foreign-key constraint does and should be done in the DB using SQL, not through ruby."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1429680641, "post_id": 29787819, "comment_id": 47706188, "body": "@stepler645 : It&#39;s better you change the column type of <code>pay_type</code> from <code>string</code> to <code>integer</code> bcz there is not any meaning to store digits as string in db. When you fetch the data that time you have to convert it in integer again."}, {"owner": {"reputation": 2237, "user_id": 1503615, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KHpln.jpg?s=128&g=1", "display_name": "argentum47", "link": "https://stackoverflow.com/users/1503615/argentum47"}, "edited": false, "score": 0, "creation_date": 1429685682, "post_id": 29787819, "comment_id": 47708776, "body": "why not something like PaymentType.find(array_of_ids_in_integer_or_string) .. although you have to catch the exception raised"}, {"owner": {"reputation": 2104, "user_id": 831549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ac87315744b6d14a8aba1eb1a0660f?s=128&d=identicon&r=PG", "display_name": "alexeydemin", "link": "https://stackoverflow.com/users/831549/alexeydemin"}, "edited": false, "score": 0, "creation_date": 1429731195, "post_id": 29787819, "comment_id": 47742315, "body": "Yeah, Gagan was right, the problem was that column type of <code>pay_type</code> was <code>string</code>, not <code>integer</code>."}], "owner": {"reputation": 2104, "user_id": 831549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ac87315744b6d14a8aba1eb1a0660f?s=128&d=identicon&r=PG", "display_name": "alexeydemin", "link": "https://stackoverflow.com/users/831549/alexeydemin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1429731363, "creation_date": 1429677170, "last_edit_date": 1429731363, "question_id": 29787819, "link": "https://stackoverflow.com/questions/29787819/rails-id-array-inclusion-validation", "title": "Rails id array inclusion validation", "body": "<p>I want to check whether an ID value coming from user included in the array of acceptable values or not.</p>\n\n<p>It's clear for me that it's coming like a string, e.g \"135\", \"148\", and  the array of values is presented like number array ([135,148,191]).</p>\n\n<p>So, I do:</p>\n\n<pre><code>validates :pay_type, inclusion: { in: PaymentType.ids.map(&amp;:to_s) }\n</code></pre>\n\n<p>Is there any way to get rid from this uneven <code>.map(&amp;:to_s)</code> method every time I want to perform this kind of check?</p>\n\n<p><em>Update:</em> Changing <code>pay_type</code> type in database from <code>string</code> to <code>integer</code> solved the problem. Thanks for all.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1429677607, "creation_date": 1429677607, "answer_id": 29787885, "question_id": 29787791, "link": "https://stackoverflow.com/questions/29787791/how-does-this-block-work-for-integer-times-method/29787885#29787885", "title": "How does this block work for Integer times method?", "body": "<p>Ruby supports parallel assignment.</p>\n\n<pre><code>new, old = new + old, new\n</code></pre>\n\n<p>is roughly equivalent to:</p>\n\n<pre><code>temp = [new + old, new]  # right side are evaluated and stored in an array\nnew, old = temp          # there is a commaa in the left side\n                         # so they get the value from the array, one by one\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1429677642, "creation_date": 1429677642, "answer_id": 29787892, "question_id": 29787791, "link": "https://stackoverflow.com/questions/29787791/how-does-this-block-work-for-integer-times-method/29787892#29787892", "title": "How does this block work for Integer times method?", "body": "<p><code>n.times { ... }</code> will do whatever is inside the block <code>n</code> times.  So for example, if <code>n</code> is <code>5</code>, it's equivalent to:</p>\n\n<pre><code>new, old = 1, 0\nnew, old = new + old, new # new = 1+0 = 1; old = 1\nnew, old = new + old, new # new = 1+1 = 2; old = 1\nnew, old = new + old, new # new = 2+1 = 3; old = 2\nnew, old = new + old, new # new = 3+2 = 5; old = 3\nnew, old = new + old, new # new = 5+3 = 8; old = 5\nold\n# =&gt; 5\n</code></pre>\n\n<p>The other thing that may be confusing you is the parallel assignment:</p>\n\n<pre><code>new, old = new + old, new\n</code></pre>\n\n<p>In general, you can have:</p>\n\n<pre><code>a, b = &lt;some-expr&gt;, &lt;some-other-expr&gt;\n</code></pre>\n\n<p>The expressions on the right will be evaluated first, and then <code>a</code> will be assigned the first value, <code>b</code> the second.  You can use this as a quick way to swap two variables without using a <code>temp</code> variable, for example: <code>a, b = b, a</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4771469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d820abb24122b643950b4400cded83a2?s=128&d=identicon&r=PG&f=1", "display_name": "stack888", "link": "https://stackoverflow.com/users/4771469/stack888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1429678210, "creation_date": 1429676952, "last_edit_date": 1495542497, "question_id": 29787791, "link": "https://stackoverflow.com/questions/29787791/how-does-this-block-work-for-integer-times-method", "title": "How does this block work for Integer times method?", "body": "<p>I can\u2019t figure out how the <code>n.times</code> line works in the ruby code given below, specifically what the commas mean and how the <code>new</code> variable is updated.</p>\n\n<pre><code>def fib(n)\n  raise \"fib not defined for negative numbers\" if n &lt; 0\n  new, old = 1, 0\n  n.times {new, old = new + old, new}\n  old\nend\n</code></pre>\n\n<p>The code works, and was code given by user pjs in response to a question about fibonacci sequences in ruby, at this stackoverflow question: <a href=\"https://stackoverflow.com/questions/24438655/ruby-fibonacci-algorithm\">Ruby Fibonacci algorithm</a>. </p>\n\n<p>I don\u2019t understand what\u2019s going on inside the block.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 3010157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a621f6234c5a3c77931a58f3176592dc?s=128&d=identicon&r=PG&f=1", "display_name": "dannnylo", "link": "https://stackoverflow.com/users/3010157/dannnylo"}, "is_accepted": false, "score": 2, "last_activity_date": 1430324473, "creation_date": 1430324473, "answer_id": 29949332, "question_id": 29787664, "link": "https://stackoverflow.com/questions/29787664/rtesseractimagenotselectederror/29949332#29949332", "title": "RTesseract::ImageNotSelectedError", "body": "<p>The RTesseract only read local files and the path what you are used was a relative path to url.\nTry pass the full path of file on your local server.\nI guess your full path is this.</p>\n\n<pre><code>def index\n  @image = RTesseract.new(Rails.root.join('public', 'assets','download.png').to_s, :processor =&gt; \"none\")\n  @result = @image.to_s\nend\n</code></pre>\n"}], "owner": {"reputation": 1179, "user_id": 2858044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b99bf8baf41337577e4e425677080472?s=128&d=identicon&r=PG&f=1", "display_name": "itx", "link": "https://stackoverflow.com/users/2858044/itx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430324473, "creation_date": 1429676176, "question_id": 29787664, "link": "https://stackoverflow.com/questions/29787664/rtesseractimagenotselectederror", "title": "RTesseract::ImageNotSelectedError", "body": "<p>I'm using <a href=\"https://github.com/dannnylo/rtesseract\" rel=\"nofollow\">rtesseract</a> gem for my rails apps.</p>\n\n<p>I'm sure, I have </p>\n\n<ul>\n<li>Tesseract - Program (v 3.02.02)</li>\n<li>ImageMagick - Program (v 6.9.0)</li>\n<li>image (download.png) on images directory</li>\n</ul>\n\n<p>And  I have make the right code</p>\n\n<pre><code>def index\n  @image = RTesseract.new(view_context.asset_path(\"download.png\"), :processor =&gt; \"none\")\n  @result = @image.to_s\nend\n</code></pre>\n\n<p>But I got this error</p>\n\n<pre><code>RTesseract::ImageNotSelectedError in OcrController#index\nRTesseract::ImageNotSelectedError\n\nExtracted source (around line #4):     \n\n  def index\n    @image = RTesseract.new(view_context.asset_path(\"download.png\"), :processor =&gt; \"none\")\n    @result = @image.to_s\n</code></pre>\n\n<p>test on console</p>\n\n<pre><code>$ view_context.asset_path(\"download.png\")\n$ /assests/download.png\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 2, "last_activity_date": 1429689623, "creation_date": 1429689623, "answer_id": 29791237, "question_id": 29787336, "link": "https://stackoverflow.com/questions/29787336/why-is-force-encodingbinary-used-here/29791237#29791237", "title": "Why is force_encoding(&quot;BINARY&quot;) used here?", "body": "<p>This isn't a rails specific thing - it's a wrapper  rubygems will generate for any ruby executable in a gem. The call to <code>force_encoding</code> was added in <a href=\"https://github.com/rubygems/rubygems/commit/6bf71914de25776a6725eceae4046cd81c5ede45\" rel=\"nofollow\">6bf71914</a></p>\n\n<p>The reason for the change is that the first argument might not be a version at all - we want to test if it is a version, but it could be anything and we don't want the regex check to blow up. For example some executables accept a list of file names as arguments, and those file names could be invalid in the default external encoding used by ruby.</p>\n\n<p>There is a bit more discussion on the <a href=\"https://github.com/rubygems/rubygems/issues/307\" rel=\"nofollow\">issue</a> which prompted this change. </p>\n"}], "owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 29791237, "answer_count": 1, "score": 4, "last_activity_date": 1429689623, "creation_date": 1429674216, "question_id": 29787336, "link": "https://stackoverflow.com/questions/29787336/why-is-force-encodingbinary-used-here", "title": "Why is force_encoding(&quot;BINARY&quot;) used here?", "body": "<p>When we install Rails, we get this <code>rails</code> \"executable\":</p>\n\n<pre><code>#!/usr/bin/env ruby\n#\n# This file was generated by RubyGems.\n#\n# The application 'railties' is installed as part of a gem, and\n# this file is here to facilitate running it.\n#\n\nrequire 'rubygems'\n\nversion = \"&gt;= 0\"\n\nif ARGV.first\n  str = ARGV.first\n  str = str.dup.force_encoding(\"BINARY\") if str.respond_to? :force_encoding\n  if str =~ /\\A_(.*)_\\z/ and Gem::Version.correct?($1) then\n    version = $1\n    ARGV.shift\n  end\nend\n\ngem 'railties', version\nload Gem.bin_path('railties', 'rails', version)\n</code></pre>\n\n<p>I'm wondering what the point of doing <code>force_encoding(\"BINARY\")</code> is on that String. What possible values could it be that <code>force_encoding</code> is necessary? I would think that people would only specify versions using numbers and letters here.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 24723, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "edited": false, "score": 0, "creation_date": 1429674007, "post_id": 29787293, "comment_id": 47704084, "body": "<code>&#47;</code> are regex delimiters and <code>i</code> is for case insensitive pattern matching"}, {"owner": {"reputation": 67, "user_id": 2466841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3227bd42ffaea667a498a37029875d?s=128&d=identicon&r=PG", "display_name": "scabbyjoe", "link": "https://stackoverflow.com/users/2466841/scabbyjoe"}, "reply_to_user": {"reputation": 24723, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "edited": false, "score": 0, "creation_date": 1429674161, "post_id": 29787293, "comment_id": 47704123, "body": "@nu11p01n73R Ah okay pretty straight forward, therefore would <code>&#47;[a-zA-Z0-9\\s]&#47;</code> make the same match?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429674176, "post_id": 29787293, "comment_id": 47704127, "body": "@scabbyjoe: Yes. EDIT: Err, no - you forgot the <code>^</code>. But with it, yes."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1429674303, "post_id": 29787293, "comment_id": 47704158, "body": "<a href=\"http://ruby-doc.org/core-2.2.0/Regexp.html#class-Regexp-label-Options\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Regexp.html#class-Regexp-label-Optio&zwnj;&#8203;ns</a> for more info."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 2466841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3227bd42ffaea667a498a37029875d?s=128&d=identicon&r=PG", "display_name": "scabbyjoe", "link": "https://stackoverflow.com/users/2466841/scabbyjoe"}, "edited": false, "score": 0, "creation_date": 1429674435, "post_id": 29787317, "comment_id": 47704191, "body": "My apologies, I had just completed <a href=\"http://regexone.com/\" rel=\"nofollow noreferrer\">regexone.com</a> and it did not cover flags."}, {"owner": {"reputation": 1177, "user_id": 4377568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GeUr66tY9q0/AAAAAAAAAAI/AAAAAAAACbI/7bMjXKuG5cE/photo.jpg?sz=128", "display_name": "Docteur", "link": "https://stackoverflow.com/users/4377568/docteur"}, "reply_to_user": {"reputation": 67, "user_id": 2466841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3227bd42ffaea667a498a37029875d?s=128&d=identicon&r=PG", "display_name": "scabbyjoe", "link": "https://stackoverflow.com/users/2466841/scabbyjoe"}, "edited": false, "score": 0, "creation_date": 1429674480, "post_id": 29787317, "comment_id": 47704206, "body": "No problem, it happens. Check cheatsheets on website such as <a href=\"http://regexr.com/\" rel=\"nofollow noreferrer\">this one</a>! :-)"}, {"owner": {"reputation": 1177, "user_id": 4377568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GeUr66tY9q0/AAAAAAAAAAI/AAAAAAAACbI/7bMjXKuG5cE/photo.jpg?sz=128", "display_name": "Docteur", "link": "https://stackoverflow.com/users/4377568/docteur"}, "reply_to_user": {"reputation": 67, "user_id": 2466841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3227bd42ffaea667a498a37029875d?s=128&d=identicon&r=PG", "display_name": "scabbyjoe", "link": "https://stackoverflow.com/users/2466841/scabbyjoe"}, "edited": false, "score": 0, "creation_date": 1429674510, "post_id": 29787317, "comment_id": 47704220, "body": "Forgot to tag you @scabbyjoe"}], "tags": [], "owner": {"reputation": 1177, "user_id": 4377568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GeUr66tY9q0/AAAAAAAAAAI/AAAAAAAACbI/7bMjXKuG5cE/photo.jpg?sz=128", "display_name": "Docteur", "link": "https://stackoverflow.com/users/4377568/docteur"}, "is_accepted": false, "score": 0, "last_activity_date": 1429674135, "creation_date": 1429674135, "answer_id": 29787317, "question_id": 29787293, "link": "https://stackoverflow.com/questions/29787293/what-does-the-i-character-in-this-regex-do-mean/29787317#29787317", "title": "What does the `i` character in this regex do/mean?", "body": "<p>This is the <code>ignore case</code> flag. Please research more about regexs; the flags are easy to find about!</p>\n\n<p>The matches will ignore case:</p>\n\n<p><code>/toto/i</code> will accept <code>TOTO,toto,ToTo</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": true, "score": 2, "last_activity_date": 1429674238, "creation_date": 1429674238, "answer_id": 29787339, "question_id": 29787293, "link": "https://stackoverflow.com/questions/29787293/what-does-the-i-character-in-this-regex-do-mean/29787339#29787339", "title": "What does the `i` character in this regex do/mean?", "body": "<p>It (<code>i</code>) is the modifier used for case insensitive matching.</p>\n\n<p>Example regex: <code>/hello/</code>  (without i) matches only the string <code>hello</code></p>\n\n<p>Whereas the regex <code>/hello/i</code> (with i) matches the strings <code>hello, Hello, HeLLo, etc</code> without considering case sensitivity.</p>\n"}], "owner": {"reputation": 67, "user_id": 2466841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3227bd42ffaea667a498a37029875d?s=128&d=identicon&r=PG", "display_name": "scabbyjoe", "link": "https://stackoverflow.com/users/2466841/scabbyjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 29787339, "answer_count": 2, "score": -3, "last_activity_date": 1429675095, "creation_date": 1429673956, "last_edit_date": 1429675095, "question_id": 29787293, "link": "https://stackoverflow.com/questions/29787293/what-does-the-i-character-in-this-regex-do-mean", "title": "What does the `i` character in this regex do/mean?", "body": "<p>I cannot find what the <code>i</code> just after the regex here represents.</p>\n\n<pre><code>/[^a-z0-9\\s]/i\n</code></pre>\n"}]