[{"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1575500680, "post_id": 59185820, "comment_id": 104591877, "body": "You probably want to pass a Regexp object to <code>match</code> rather than a string, i.e. <code>&#47;^window.__APOLLO_...&#47;</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1575501276, "post_id": 59185820, "comment_id": 104592019, "body": "Do you need to get what is inside the quotes?"}, {"owner": {"reputation": 4039, "user_id": 2954587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9faba4c8f1437084ee1b2b976eeadaa3?s=128&d=identicon&r=PG&f=1", "display_name": "user2954587", "link": "https://stackoverflow.com/users/2954587/user2954587"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1575501373, "post_id": 59185820, "comment_id": 104592048, "body": "yes @WiktorStribi\u017cew"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1575501379, "post_id": 59185820, "comment_id": 104592049, "body": "Use <code>resp.body[&#47;window\\.__APOLLO_STATE__ = JSON\\.parse\\(&quot;(.*?)&quot;\\);&#47;, 1]</code>, see <a href=\"https://ideone.com/sJth9I\" rel=\"nofollow noreferrer\">ideone.com/sJth9I</a>"}, {"owner": {"reputation": 4039, "user_id": 2954587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9faba4c8f1437084ee1b2b976eeadaa3?s=128&d=identicon&r=PG&f=1", "display_name": "user2954587", "link": "https://stackoverflow.com/users/2954587/user2954587"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1575502669, "post_id": 59185820, "comment_id": 104592429, "body": "thank you @WiktorStribi\u017cew :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1575506355, "post_id": 59185820, "comment_id": 104593323, "body": "@user2954587 I posted a bit expanded answer."}], "answers": [{"tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1575502319, "creation_date": 1575502319, "answer_id": 59186105, "question_id": 59185820, "link": "https://stackoverflow.com/questions/59185820/convert-python-search-regex-to-ruby-regex/59186105#59186105", "title": "Convert python search regex to ruby regex", "body": "<p>An idiomatic way is to use the <code>=~</code> regex match operator:</p>\n\n<pre><code>resp.body =~ /^window.__APOLLO_STATE__ = JSON.parse\\(\"(.+?)\"\\)/\n</code></pre>\n\n<p>You can access the capture groups with <code>$1</code>, <code>$2</code>, and so on.</p>\n\n<p>If you don't like the global variable usage, you can also use the <code>Regexp#match</code> method</p>\n\n<pre><code>result = /^window.__APOLLO_STATE__ = JSON.parse\\(\"(.+?)\"\\)/.match(resp.body)\nresult[1] # =&gt; returns first capture group\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1575506339, "creation_date": 1575506339, "answer_id": 59186578, "question_id": 59185820, "link": "https://stackoverflow.com/questions/59185820/convert-python-search-regex-to-ruby-regex/59186578#59186578", "title": "Convert python search regex to ruby regex", "body": "<p>You may use</p>\n\n<pre><code>resp.body[/window\\.__APOLLO_STATE__ = JSON\\.parse\\(\"(.*?)\"\\);/, 1]\n</code></pre>\n\n<p>Here,</p>\n\n<ul>\n<li><code>/.../</code> is a regex literal notation that is very convenient when defining regex patterns</li>\n<li>Literal dots are escaped, else, they match any char but line break chars</li>\n<li>The <code>.+?</code> is changed to <code>.*?</code> to be able to match empty values (else, you may overmatch, it is easier to later discard empty matches than fix overmatches)</li>\n<li><code>1</code> tells the engine to return the  value  of the capturing group with ID 2 of the first match. If you need multiple matches, use <code>resp.body.scan(/regex/)</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1575516276, "last_edit_date": 1575516276, "creation_date": 1575515525, "answer_id": 59187657, "question_id": 59185820, "link": "https://stackoverflow.com/questions/59185820/convert-python-search-regex-to-ruby-regex/59187657#59187657", "title": "Convert python search regex to ruby regex", "body": "<p>As I understand, your string is something like</p>\n\n<pre><code>str = 'window.__APOLLO_STATE__ = JSON.parse(\"my dog has fleas\");'\n</code></pre>\n\n<p>and you wish to extract the text between the double quotes. You can do that with the following regular expression, which does not employ a capture group:</p>\n\n<pre><code>r = /\\Awindow\\.__APOLLO_STATE__ = JSON\\.parse\\(\\\"\\K.+?(?=\\\"\\);\\z)/\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>str[r]\n  #=&gt; \"my dog has fleas\"\n</code></pre>\n\n<p>The regular expression can be written in <em>free-spacing mode</em> to make it self-documenting:</p>\n\n<pre><code>r = /\n    \\A          # match beginning of string\n    window\\.__APOLLO_STATE__\\ =\\ JSON\\.parse\\(\\\"\n                # match substring\n    \\K          # discard everything matched so far \n    .+?         # match 1+ characters, lazily\n    (?=\\\"\\);\\z) # match \"); followed by end-of-string (positive lookahead)\n    /x          # free-spacing regex definition mode\n</code></pre>\n\n<p>The contents of a <em>positive lookahead</em> must be matched but are not part of the match returned. Neither is the text matched prior to the <code>\\K</code> directive part of the match returned.</p>\n\n<p>Free-spacing mode removes all whitespace before the expression is parsed. Accordingly, any intended spaces (in <code>\"APOLLO_STATE__ = JSON\"</code>, for example) must be protected. I've done that by escaping the spaces, one of several ways that can be done.       </p>\n"}], "owner": {"reputation": 4039, "user_id": 2954587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9faba4c8f1437084ee1b2b976eeadaa3?s=128&d=identicon&r=PG&f=1", "display_name": "user2954587", "link": "https://stackoverflow.com/users/2954587/user2954587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 59186578, "answer_count": 3, "score": 1, "last_activity_date": 1575516276, "creation_date": 1575500472, "question_id": 59185820, "link": "https://stackoverflow.com/questions/59185820/convert-python-search-regex-to-ruby-regex", "title": "Convert python search regex to ruby regex", "body": "<p>I'm trying to convert the following python regex to ruby</p>\n\n<pre><code>match = re.search(r'window.__APOLLO_STATE__ = JSON.parse\\(\"(.+?)\"\\);', body)\n</code></pre>\n\n<p>I've done some <a href=\"https://stackoverflow.com/questions/5671653/ruby-regex-vs-python-regex/5672092\">digging</a> and Regexp#match should be what i'm looking for but the following is returning nil. </p>\n\n<pre><code>resp.body.match('^window.__APOLLO_STATE__ = JSON.parse\\(\"(.+?)\"\\)')\n</code></pre>\n\n<p>How can I convert the regex and where am I wrong? </p>\n"}, {"tags": ["ruby", "activerecord"], "comments": [{"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1575497319, "post_id": 59185292, "comment_id": 104590912, "body": "Don&#39;t use foreign key <b>constraints</b>. Use foreign keys, but without constraints, make your application to handle data consistency."}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 1, "creation_date": 1575497708, "post_id": 59185292, "comment_id": 104591022, "body": "Your seeds file should create the artist before the event that references it."}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "reply_to_user": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1575650232, "post_id": 59185292, "comment_id": 104649938, "body": "As @dinjas suggested. If in your seeds you did <code>artist = Artist.create(...)</code> and then <code>venue = Venue.create(...)</code> <code>artist.events.create(..., venue: venue)</code> It should do the trick"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1576495714, "post_id": 59185292, "comment_id": 104905997, "body": "Also, what order are your migrations in? If you try to migrate in the order you have them listing now, it will throw an error because the Venue migration is trying to create a reference to the Artist table, which hasn&#39;t been created yet."}], "owner": {"reputation": 97, "user_id": 3579495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eace5d09dcdc8f89f154376fbbec4412?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Kiel", "link": "https://stackoverflow.com/users/3579495/charles-kiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575497162, "creation_date": 1575497162, "question_id": 59185292, "link": "https://stackoverflow.com/questions/59185292/foreign-key-constraint-failed-when-migrating-and-seeding-data-in-activerecord", "title": "FOREIGN KEY constraint failed when migrating and seeding data in ActiveRecord", "body": "<p>We are trying to migrate data into a sqlite3 database in Ruby with class associations between 3 classes;</p>\n\n<pre><code>class Artist &lt; ActiveRecord::Base\n    has_many :events\n    has_many :venues, :through =&gt; :events\nend\n</code></pre>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n    belongs_to :venue \n    belongs_to :artist\nend\n</code></pre>\n\n<pre><code>class Venue &lt; ActiveRecord::Base\n    has_many :events\n    has_many :artists, :through =&gt; :events\nend\n</code></pre>\n\n<p>with our seed data looking like this;</p>\n\n<pre><code>Event.create(id: 2599084, venue_id: 82166, playdate: \"2015-06-06\", name: \"U2 at Pepsi Center\", artist_id: \"5039\")\nVenue.create(id: 81533, name: \"Paradise Theatre\", cityid: \"2055\", state: \"CO\", city: \"Paonia\", zip: \"80246\")\nArtist.create(id: 5039, artistname: \"U2\", genre: \"Pop / Rock\")\n</code></pre>\n\n<p>and each migration file looking like this;</p>\n\n<pre><code>class CreateEventsTable &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :events do |t|\n      #table and column to reference (join)\n      t.string :name\n      t.date :playdate\n      t.references :artist, foreign_key: true\n      t.references :venue, foreign_key: true\n    end\n  end\nend\n</code></pre>\n\n<pre><code>class CreateVenuesTable &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :venues do |t|\n      #table and column to reference (join)\n      t.string :name\n      t.date :playdate\n      t.integer :cityid\n      t.string :state\n      t.string :city\n      t.string :zip\n      t.references :artist, foreign_key: true\n      t.references :event, foreign_key: true\n      binding.pry\n    end\n  end\nend\n</code></pre>\n\n<pre><code>class CreateArtistsTable &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :artists do |t|\n      #table and column to reference (join)\n      t.string :artistname\n      t.string :genre\n    end\n  end\nend\n</code></pre>\n\n<p>with the intent to have every</p>\n\n<p>-event reference an artist and a venue</p>\n\n<p>-venue reference many events and artists</p>\n\n<p>-artist referencing many events</p>\n\n<p>and our results are this;</p>\n\n<pre><code>$ rake db:seed --trace\n** Invoke db:seed (first_time)\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Invoke db:load_config \n** Execute db:seed\n** Invoke db:abort_if_pending_migrations (first_time)\n** Invoke db:load_config \n** Execute db:abort_if_pending_migrations\n\nrake aborted!\nActiveRecord::InvalidForeignKey: SQLite3::ConstraintException: FOREIGN KEY constraint failed\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:108:in `step'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:108:in `block in each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:107:in `loop'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:107:in `each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:49:in `to_a'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:49:in `block (2 levels) in exec_query'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:40:in `block in exec_query'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:718:in `block (2 levels) in log'\n/Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:717:in `block in log'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:708:in `log'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:39:in `exec_query'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:135:in `exec_insert'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:166:in `insert'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/query_cache.rb:22:in `insert'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:375:in `_insert_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:933:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/counter_cache.rb:163:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/locking/optimistic.rb:70:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/attribute_methods/dirty.rb:211:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:332:in `block in _create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:101:in `run_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:827:in `_run_create_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:332:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/timestamp.rb:111:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:906:in `create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:328:in `block in create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:135:in `run_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:827:in `_run_save_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:328:in `create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/timestamp.rb:129:in `create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:470:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/validations.rb:47:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:315:in `block in save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:375:in `block in with_transaction_returning_status'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:281:in `block in transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'\n/Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:281:in `transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:212:in `transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:366:in `with_transaction_returning_status'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:315:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/suppressor.rb:44:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:38:in `create'\ndb/seeds.rb:3235:in `&lt;top (required)&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:319:in `load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:319:in `block in load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:319:in `load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sinatra-activerecord-2.0.14/lib/sinatra/activerecord/rake/activerecord_6.rb:3:in `load_seed'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/tasks/database_tasks.rb:440:in `load_seed'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/railties/databases.rake:328:in `block (2 levels) in &lt;top (required)&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:281:in `block in execute'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:281:in `each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:281:in `execute'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:219:in `block in invoke_with_call_chain'\n/Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:188:in `invoke'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:160:in `invoke_task'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:116:in `each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:116:in `block in top_level'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:125:in `run_with_threads'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:110:in `top_level'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:83:in `block in run'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:186:in `standard_exception_handling'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:80:in `run'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/exe/rake:27:in `&lt;top (required)&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/rake:23:in `load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/rake:23:in `&lt;main&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `eval'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\n\nCaused by:\nSQLite3::ConstraintException: FOREIGN KEY constraint failed\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:108:in `step'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:108:in `block in each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:107:in `loop'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sqlite3-1.4.1/lib/sqlite3/statement.rb:107:in `each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:49:in `to_a'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:49:in `block (2 levels) in exec_query'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:40:in `block in exec_query'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:718:in `block (2 levels) in log'\n/Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:717:in `block in log'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:708:in `log'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:39:in `exec_query'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:135:in `exec_insert'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:166:in `insert'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/query_cache.rb:22:in `insert'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:375:in `_insert_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:933:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/counter_cache.rb:163:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/locking/optimistic.rb:70:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/attribute_methods/dirty.rb:211:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:332:in `block in _create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:101:in `run_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:827:in `_run_create_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:332:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/timestamp.rb:111:in `_create_record'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:906:in `create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:328:in `block in create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:135:in `run_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:827:in `_run_save_callbacks'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/callbacks.rb:328:in `create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/timestamp.rb:129:in `create_or_update'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:470:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/validations.rb:47:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:315:in `block in save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:375:in `block in with_transaction_returning_status'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:281:in `block in transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'\n/Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:281:in `transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:212:in `transaction'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:366:in `with_transaction_returning_status'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/transactions.rb:315:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/suppressor.rb:44:in `save'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/persistence.rb:38:in `create'\ndb/seeds.rb:3235:in `&lt;top (required)&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:319:in `load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:319:in `block in load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:319:in `load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/sinatra-activerecord-2.0.14/lib/sinatra/activerecord/rake/activerecord_6.rb:3:in `load_seed'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/tasks/database_tasks.rb:440:in `load_seed'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/activerecord-6.0.1/lib/active_record/railties/databases.rake:328:in `block (2 levels) in &lt;top (required)&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:281:in `block in execute'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:281:in `each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:281:in `execute'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:219:in `block in invoke_with_call_chain'\n/Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/task.rb:188:in `invoke'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:160:in `invoke_task'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:116:in `each'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:116:in `block in top_level'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:125:in `run_with_threads'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:110:in `top_level'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:83:in `block in run'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:186:in `standard_exception_handling'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/lib/rake/application.rb:80:in `run'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/rake-13.0.1/exe/rake:27:in `&lt;top (required)&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/rake:23:in `load'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/rake:23:in `&lt;main&gt;'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `eval'\n/Users/flatironschool/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\nTasks: TOP =&gt; db:seed\n</code></pre>\n\n<p>We've googled the hell out of this, but can't seem to figure out what's wrong. We are not using Rails.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "grpc"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575496987, "post_id": 59184893, "comment_id": 104590816, "body": "Best way to call Rails from an external service is to just run a REST API on the Rails server, and then use HTTP to access it. Of course if you want you can modify the Rails DB through ActiveRecord, but then you create a code coupling and dependency on your Rails code from your external server."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575497272, "post_id": 59184893, "comment_id": 104590892, "body": "Is there still a benefit to using GRPC at that point? Since the GRPC server has to wait fot the slower rest call to the Rails Backend before spitting back its proto buff response to the original caller?"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575497483, "post_id": 59184893, "comment_id": 104590960, "body": "Would the best solution be to make a rails controller I can call from the GRPC server that just calls my ruby code and returns an answer? What is the best way to do that?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575497704, "post_id": 59184893, "comment_id": 104591021, "body": "I don&#39;t really understand what you are trying to do. Why involve Rails at all? If you want efficiency why not build everything into the GPRC server? If you have lib code then just require it, but be aware that if your lib code has Rails dependencies, you will pull everything with it."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575497951, "post_id": 59184893, "comment_id": 104591085, "body": "I have logic on a rails server that calls and api, gets a boolean response, and stores that response in a local DB using active record. I could move the API call into the grpc server easily but then how should I go about storing that into my database that is tied to a rails app?  Big picture as well I want to have other rails applications call my application using grpc and then use logic in my rails app to return a response, what is the best way to do that in general? For instance another rails app calls my app to get back a boolean response and for my app to store that data, with GRPC"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575498810, "post_id": 59184893, "comment_id": 104591344, "body": "If your Rails app has some magic code that does something, then put this magic code into module X. This module X can then be included in both GPRC and Rails. This decouples Rails from GPRC and GPRC from Rails. The other options is call Rails with HTTP, or use ActiveRecord from GPRC."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575499148, "post_id": 59184893, "comment_id": 104591443, "body": "Thanks a lot for the help Casper, if I move my code to a module wouldn&#39;t I still have to include dependencies into my GRPC server? For instance I can move the logic to a module and then include that in GRPC, but if say I make HTTP calls and write to my DB in the module using active record I would need to: &quot;require &#39;net/http&#39;&quot; and require &#39;active_record&#39; in grpc still correct?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575499399, "post_id": 59184893, "comment_id": 104591529, "body": "Yes. That is correct. This is why you will get the cleanest API by calling HTTP on Rails, but as you say, you lose the speed. However what difference does it make, if your module X then still uses HTTP itself? The fastest code will be using ActiveRecord, but if that is not possible, then module X (with HTTP or other requirements) is your other solution."}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575499659, "post_id": 59184893, "comment_id": 104591616, "body": "Makes sense thanks a ton Casper appreciate it"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575652916, "post_id": 59184893, "comment_id": 104651089, "body": "@Casper What is the best way to call my rails app from the GRPC server? How do I make the REST request to my existing code in a controller I have made"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575656592, "post_id": 59184893, "comment_id": 104652491, "body": "You can use any HTTP gem, or even native net/http. Some simple gems could be HTTParty (should be relatively lightweight), rest-clent is another more REST focused. More similar gems here: <a href=\"https://www.ruby-toolbox.com/categories/http_clients\" rel=\"nofollow noreferrer\">ruby-toolbox.com/categories/http_clients</a>"}, {"owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575660052, "post_id": 59184893, "comment_id": 104653811, "body": "@Casper Gotcha, I am able to set up a http call, but how do I expose say one of my function in my current ruby app in say /lib/random_file.rb to be called?"}], "owner": {"reputation": 705, "user_id": 5327403, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c293099c7e61e9c0396c0ca2d2e983f6?s=128&d=identicon&r=PG&f=1", "display_name": "FrankTheTank", "link": "https://stackoverflow.com/users/5327403/frankthetank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1575498509, "creation_date": 1575494825, "last_edit_date": 1575498509, "question_id": 59184893, "link": "https://stackoverflow.com/questions/59184893/how-to-call-rails-backend-from-grpc-server", "title": "How To Call Rails Backend From Grpc Server?", "body": "<p>Hey guys I have a GRPC server I have set up locally in my rails app that I can successfully call and retrieve a message back from. My question is how do I now use my grpc server to call something in my rails app? </p>\n\n<p>For instance my grpc server is in ./grpc/fnma_server.rb and I want to call a method in a class located at: ./lib/example_app/api_class.rb. This call with then make a call to a seperate api and return a boolean, I want to just take this boolean and then return it to the original caller to the GRPC server. What is the best way to do this?</p>\n\n<p>It is tough as well because my api_class is altering tables in my DB for the rails app using active record so I can not just include the file into the grpc server.</p>\n\n<p>Big Picture of what I want to do: </p>\n\n<p>App A = My Rails App, App B = Rails App Calling My App</p>\n\n<p>App B sends App A a request using GRPC, App A (with the GRPC Server) then takes this data, formats it, and sends it to an API that returns a boolean value. App A then (using GRPC) sends a response back to App A with the boolean return value for each of the calls.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1575496210, "post_id": 59184832, "comment_id": 104590583, "body": "If you&#39;re happy to use the webpacker gem, you could add the <code>javascript_pack_tag</code> helper to include your javascript file for one particular view/haml file only."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575520038, "post_id": 59184832, "comment_id": 104596204, "body": "<code>I&#39;m having problems</code> what problems? any error? something? do you have a file at /config/initializers/assets.rb? if so, it should have an array of files, add the terrific file to that list so rails compiles it as an individual linkable file"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575495156, "creation_date": 1575494464, "last_edit_date": 1575495156, "question_id": 59184832, "link": "https://stackoverflow.com/questions/59184832/how-can-i-use-content-for-to-render-conditional-javascript-from-a-gem", "title": "How can I use content_for to render conditional javascript from a gem?", "body": "<p>I am using the <a href=\"http://filterrific.clearcove.ca/\" rel=\"nofollow noreferrer\">Filterrific gem</a> to try to add filtering on an ActiveRecord object for one page only. </p>\n\n<p>In the filterrific page, it says to add this line to <code>application.js</code></p>\n\n<pre><code>//= require filterrific/filterrific-jquery\n</code></pre>\n\n<p>From what I read about the asset pipeline, this will add filterrific on all my pages. I can't have this filterrific js in the asset pipeline because it is interfering with previous written javascript on many other pages. Something in filterrific is messing up the rest of the javascript.</p>\n\n<p>So to bypass this, I need to use <code>content_for</code> but I'm having problems making it work with javascript tag methods for a particular controller rendered page. This is what I've tried so far in my html/haml file in question.</p>\n\n<pre><code>%h1 Signed Certificates\n= form_for_filterrific @filterrific do |f|\n  %div\n    Sorted by\n    \\#{f.select(:sorted_by, @filterrific.select_options[:sorted_by])}\n  %div\n    = link_to('Reset filters', reset_filterrific_url)\n  = render_filterrific_spinner\n\n#filterrific_results\n  %div\n    = page_entries_info @signed_certificates # provided by will_paginate\n  %table\n    %tr\n      %th Common Name\n      %th Effective Date\n      %th Expiration Date\n    - @signed_certificates.each do |sc|\n      %tr\n        %td= sc.common_name\n        %td= sc.effective_date.strftime(\"%m/%d/%y %H:%M:%S\")\n        %td= sc.expiration_date.strftime(\"%m/%d/%y %H:%M:%S\")\n= will_paginate @signed_certificates\n</code></pre>\n\n<p>At the top I've tried this:</p>\n\n<pre><code>-content_for :javascript =require filterrific/filterrific-jquery\n-content_for :javascript 'filterrific/filterrific-jquery'\n-content_for :head do\n  = javascript_include_tag 'filterrific/filterrific-jquery'\n</code></pre>\n\n<p>Also, I'm reading about this solution here <a href=\"https://stackoverflow.com/questions/6167805/using-rails-3-1-where-do-you-put-your-page-specific-javascript-code\">Stackoverflow rails 3.1</a> but I dont think this is applicable to rails 4.2. If someone knows how to implement conditional javascript from a gem, could you please point out what I'm doing wrong? </p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 12482203, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC0l2QMpPr3M0fbDpglzmaH5-WM2kGPcLp-Qx-GWA=k-s128", "display_name": "Jude rozelaar", "link": "https://stackoverflow.com/users/12482203/jude-rozelaar"}, "is_accepted": false, "score": 1, "last_activity_date": 1575493723, "creation_date": 1575493723, "answer_id": 59184703, "question_id": 59184480, "link": "https://stackoverflow.com/questions/59184480/issue-installing-a-gem/59184703#59184703", "title": "issue installing a gem", "body": "<p>Ruby was installed in <code>Program Files (x86)</code> which contains a space, which apparently MINGW gems, such as jaro_winkler, don't agree with, so if you encounter this issue change your Ruby install location.</p>\n"}], "owner": {"reputation": 31, "user_id": 12482203, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC0l2QMpPr3M0fbDpglzmaH5-WM2kGPcLp-Qx-GWA=k-s128", "display_name": "Jude rozelaar", "link": "https://stackoverflow.com/users/12482203/jude-rozelaar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575493723, "creation_date": 1575492461, "question_id": 59184480, "link": "https://stackoverflow.com/questions/59184480/issue-installing-a-gem", "title": "issue installing a gem", "body": "<p>I've checked many other posts but I can't seem to find a solution, I get the same error each time I try to install this gem. I've tried reinstalling and even changing ruby versions (I tried my original 25 install then the latest 26 then 25), but nothing worked.</p>\n\n<p>here's the log:</p>\n\n<pre><code>PS X:\\Windows\\system32&gt; gem install solargraph\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions. This could take a while...\nERROR:  Error installing solargraph:\n        ERROR: Failed to build gem native extension.\n\n    current directory: X:/Program Files (x86)/Ruby25-x64/lib/ruby/gems/2.5.0/gems/jaro_winkler-1.5.4/ext/jaro_winkler\n\"X:/Program Files (x86)/Ruby25-x64/bin/ruby.exe\" -r ./siteconf20191204-11892-whysdy.rb extconf.rb\ncreating Makefile\n\ncurrent directory: X:/Program Files (x86)/Ruby25-x64/lib/ruby/gems/2.5.0/gems/jaro_winkler-1.5.4/ext/jaro_winkler\nmake \"DESTDIR=\" clean\nMakefile:267: *** multiple target patterns.  Stop.\n\ncurrent directory: X:/Program Files (x86)/Ruby25-x64/lib/ruby/gems/2.5.0/gems/jaro_winkler-1.5.4/ext/jaro_winkler\nmake \"DESTDIR=\"\nMakefile:267: *** multiple target patterns.  Stop.\n\nmake failed, exit code 2\n\nGem files will remain installed in X:/Program Files (x86)/Ruby25-x64/lib/ruby/gems/2.5.0/gems/jaro_winkler-1.5.4 for inspection.\nResults logged to X:/Program Files (x86)/Ruby25-x64/lib/ruby/gems/2.5.0/extensions/x64-mingw32/2.5.0/jaro_winkler-1.5.4/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1575496556, "post_id": 59184089, "comment_id": 104590675, "body": "If you&#39;re talking about X11 forwarding though SSH with Ruby Net::SSH, then it does not seem it is supported: <a href=\"https://github.com/net-ssh/net-ssh/issues/125\" rel=\"nofollow noreferrer\">github.com/net-ssh/net-ssh/issues/125</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575496616, "post_id": 59184089, "comment_id": 104590701, "body": "You could just run the <code>ssh</code> executable instead, which supports forwarding: <code>system(&quot;ssh -X ...&quot;)</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1575512782, "post_id": 59184089, "comment_id": 104594626, "body": "@Casper Yes, but be sure to break out arguments like <code>system(&#39;ssh&#39;,&#39;-X&#39;, &#39;...&#39;)</code> to avoid nasty shell issues."}, {"owner": {"reputation": 737, "user_id": 8511822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h9Xmn.png?s=128&g=1", "display_name": "rchitect-of-info", "link": "https://stackoverflow.com/users/8511822/rchitect-of-info"}, "edited": false, "score": 0, "creation_date": 1575548132, "post_id": 59184089, "comment_id": 104608155, "body": "Thank you everyone for the tips!"}], "owner": {"reputation": 737, "user_id": 8511822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h9Xmn.png?s=128&g=1", "display_name": "rchitect-of-info", "link": "https://stackoverflow.com/users/8511822/rchitect-of-info"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575490763, "creation_date": 1575490763, "question_id": 59184089, "link": "https://stackoverflow.com/questions/59184089/how-to-set-remote-display-using-net-ssh-gem", "title": "How to set remote DISPLAY using net-ssh gem?", "body": "<p>I am trying to use the net-ssh Ruby gem to connect to a remote workstation and start a GUI application with the DISPLAY set to the originating workstation.  Here is the code that works to connect to the selected workstation.</p>\n\n<pre><code>Net::SSH.start(selected_workstation, ENV['USER']) do |ssh|\n  # How can I set the remote display here?\nend\n</code></pre>\n\n<p>thx in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1575486474, "post_id": 59183018, "comment_id": 104586880, "body": "Did you try <code>bundle exec rails generate devise:install</code>, or somehow <code>spring stop; rails generate devise install</code>?"}, {"owner": {"reputation": 3, "user_id": 11579647, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0EBHf6MhJXA/AAAAAAAAAAI/AAAAAAAACXo/9sZtUNKUxjk/photo.jpg?sz=128", "display_name": "Tr&#233;sor Bireke", "link": "https://stackoverflow.com/users/11579647/tr%c3%a9sor-bireke"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1575486940, "post_id": 59183018, "comment_id": 104587068, "body": "yes I tried that but I&#39;m still getting the same error"}], "answers": [{"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 0, "last_activity_date": 1575487946, "creation_date": 1575487946, "answer_id": 59183443, "question_id": 59183018, "link": "https://stackoverflow.com/questions/59183018/is-there-any-specific-generator-i-need-to-install-so-that-devise-can-work-in-rub/59183443#59183443", "title": "is there any specific generator i need to install so that devise can work in ruby on rails?", "body": "<p>is it maybe just error you wrote \"bunBle install\",  you should use '<code>bundle install</code>' also check result after you run this command if everything is okay and run this command to be sure devise is installed '<code>gem list --local devise</code>'</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "is_accepted": true, "score": 0, "last_activity_date": 1575488164, "creation_date": 1575488164, "answer_id": 59183488, "question_id": 59183018, "link": "https://stackoverflow.com/questions/59183018/is-there-any-specific-generator-i-need-to-install-so-that-devise-can-work-in-rub/59183488#59183488", "title": "is there any specific generator i need to install so that devise can work in ruby on rails?", "body": "<p>The better way to add gem is going to <a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">https://rubygems.org</a> and search specify gem\nfor your situation you should add <code>gem 'devise', '~&gt; 4.7', '&gt;= 4.7.1'</code> to your Gemfile, then go back to console type <code>bundle install</code> </p>\n"}], "owner": {"reputation": 3, "user_id": 11579647, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0EBHf6MhJXA/AAAAAAAAAAI/AAAAAAAACXo/9sZtUNKUxjk/photo.jpg?sz=128", "display_name": "Tr&#233;sor Bireke", "link": "https://stackoverflow.com/users/11579647/tr%c3%a9sor-bireke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59183488, "answer_count": 2, "score": 0, "last_activity_date": 1575488602, "creation_date": 1575486127, "last_edit_date": 1575488602, "question_id": 59183018, "link": "https://stackoverflow.com/questions/59183018/is-there-any-specific-generator-i-need-to-install-so-that-devise-can-work-in-rub", "title": "is there any specific generator i need to install so that devise can work in ruby on rails?", "body": "<p>I have been trying to add the device gem in my rails app so I added</p>\n\n<p><code>gem 'devise'</code> to my gem file and i ran</p>\n\n<p><code>bundle install</code></p>\n\n<p>but when i'm trying to run</p>\n\n<p><code>rails generate devise:install</code></p>\n\n<p>I'm getting this error:</p>\n\n<pre><code>Could not find generator 'devise:install'. Maybe you meant 'assets', 'generator' or 'coffee:assets'\n</code></pre>\n\n<p>what should i do to make it install?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575485087, "post_id": 59182663, "comment_id": 104586355, "body": "Wrap your double quotes in single quotes like: &#39;&quot;Olege&quot;&#39;, &#39;&quot;15&quot;&#39; or add &quot;force_quotes: true&quot; option to your CSV.open call.  Duplicate of: <a href=\"https://stackoverflow.com/questions/17079873/ruby-read-and-write-csv-with-quotes\" title=\"ruby read and write csv with quotes\">stackoverflow.com/questions/17079873/&hellip;</a>"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575485240, "post_id": 59182663, "comment_id": 104586430, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/17079873/ruby-read-and-write-csv-with-quotes\">Ruby Read and Write CSV with Quotes</a>"}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575486207, "post_id": 59182663, "comment_id": 104586789, "body": "@bkunzi01, thanks for your help. But CSV.foreach(source_filename, :force_quotes =&gt; true) do |csv| ... end writes file? I think it loops rows of file."}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575486654, "post_id": 59182663, "comment_id": 104586946, "body": "@bkunzi01, I am going to write to the new file, not reading the existing file."}], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1575486573, "post_id": 59183081, "comment_id": 104586917, "body": "I am getting like this.  NAME,AGE &quot;&quot;&quot;Oleg&quot;&quot;&quot;,&quot;&quot;&quot;15&quot;&quot;&quot;"}], "tags": [], "owner": {"reputation": 94, "user_id": 1744430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b751f4b5a8aeedc5017a2e1ffa869035?s=128&d=identicon&r=PG", "display_name": "Ram Kumar", "link": "https://stackoverflow.com/users/1744430/ram-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1575491214, "last_edit_date": 1575491214, "creation_date": 1575486365, "answer_id": 59183081, "question_id": 59182663, "link": "https://stackoverflow.com/questions/59182663/the-issue-to-write-string-in-double-quotes-in-the-csv/59183081#59183081", "title": "The issue to write string in double quotes in the CSV", "body": "<p>Below you can find a small code snippet which will help you to write what you need.</p>\n\n<pre><code>CSV.open(\"abc.csv\", \"wb\") do |csv|\n  csv &lt;&lt; [\"NAME\", \"AGE\"]\n  csv &lt;&lt; [\"\\\"Oleg\\\"\", \"\\\"15\\\"\"]\nend\n</code></pre>\n\n<p>Below you can find output screenshot</p>\n\n<p><a href=\"https://i.stack.imgur.com/RfBmJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RfBmJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1575489638, "last_edit_date": 1575489638, "creation_date": 1575489327, "answer_id": 59183769, "question_id": 59182663, "link": "https://stackoverflow.com/questions/59182663/the-issue-to-write-string-in-double-quotes-in-the-csv/59183769#59183769", "title": "The issue to write string in double quotes in the CSV", "body": "<p>The minimal form is this:</p>\n\n<pre><code>NAME,AGE\nOleg,15\n</code></pre>\n\n<p>The quoted form is:</p>\n\n<pre><code>NAME,AGE\n\"Oleg\",\"15\"\n</code></pre>\n\n<p>However quotes are only necessary when the content contains something <em>irregular</em> like a <code>,</code>, or a <code>\"</code>. They're not introduced unless necessary in order to conserve space in the resulting CSV document. All those extra quotes can bloat the file if they serve no practical purpose.</p>\n\n<p>If you want <em>literal quotes</em> in the value, that is you want the value to be <code>\"Oleg\"</code> with quotes around it, not just from the point of how it appears in the CSV file, then you need to do this:</p>\n\n<pre><code>NAME,AGE\n\"\"\"Oleg\"\"\",\"\"\"15\"\"\"\n</code></pre>\n\n<p>Where <code>\"...\"</code> represents a quoted CSV string and <code>\"\"</code> within a string represents a single <code>\"</code> in the value. As such you see triple, in the form <code>\"(\"\")...(\"\")\"</code>. The details of why is explained in the <a href=\"https://tools.ietf.org/html/rfc4180\" rel=\"nofollow noreferrer\">CSV specification</a>.</p>\n\n<p>In my experience Ruby's CSV library gets it right so it's best to trust it with whatever data you have. For example:</p>\n\n<pre><code>require 'csv'\n\ncsv = CSV.generate do |csv|\n  csv &lt;&lt; [ 'Name', 'Age' ]\n  csv &lt;&lt; [ 'Alice', 29 ]\n  csv &lt;&lt; [ 'Brent', 31 ]\n  csv &lt;&lt; [ 'Cathy Dint', 21 ]\n  csv &lt;&lt; [ 'Daryl \"Darby\" Everest', 62 ]\n  csv &lt;&lt; [ \"Captain\\nNewline\", 32 ]\nend\n\nputs csv\n</code></pre>\n\n<p>The end result looks like:</p>\n\n<pre><code>Name,Age\nAlice,29\nBrent,31\nCathy Dint,21\n\"Daryl \"\"Darby\"\" Everest\",62\n\"Captain\nNewline\",32\n</code></pre>\n\n<p>Notice how the newline is handled. CSV is not as simple as you'd think.</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1575490997, "last_edit_date": 1575490997, "creation_date": 1575490431, "answer_id": 59184013, "question_id": 59182663, "link": "https://stackoverflow.com/questions/59182663/the-issue-to-write-string-in-double-quotes-in-the-csv/59184013#59184013", "title": "The issue to write string in double quotes in the CSV", "body": "<p>If you don't want literal quotes in the values, but simply want to wrap all values with quotes you can do so by setting the <code>force_quotes</code> option:</p>\n\n<pre><code>csv = CSV.generate(force_quotes: true) do |csv|\n  csv &lt;&lt; [\"NAME\", \"AGE\"]\n  csv &lt;&lt; [\"Oleg\", 15]\nend\n\nputs csv\n</code></pre>\n\n<p>Prints:</p>\n\n<pre class=\"lang-csv prettyprint-override\"><code>\"NAME\",\"AGE\"\n\"Oleg\",\"15\"\n</code></pre>\n\n<p>I use <code>generate</code> in this answer to simplify copy/pasting the code. You can use the same options with <code>open</code>. This then becomes <code>CSV.open(source_filename, \"wb\", force_quotes: true)</code>.</p>\n\n<p>However when the above is read by an CSV implementation the quotes will not be part of the value. This is further explained by the <a href=\"https://stackoverflow.com/a/59183769/3982562\">answer of tadman</a>.</p>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 59184013, "answer_count": 3, "score": 0, "last_activity_date": 1575491214, "creation_date": 1575484452, "question_id": 59182663, "link": "https://stackoverflow.com/questions/59182663/the-issue-to-write-string-in-double-quotes-in-the-csv", "title": "The issue to write string in double quotes in the CSV", "body": "<p>I am going to write a string in double quotes in the CSV using <strong>csv</strong> gem.</p>\n\n<pre><code>CSV.open(source_filename, \"wb\") do |csv|\n  csv &lt;&lt; [\"NAME\", \"AGE\"]\n  csv &lt;&lt; [\"Oleg\", 15]\nend\n</code></pre>\n\n<p>The result is</p>\n\n<pre><code>NAME,AGE\nOleg,15\n</code></pre>\n\n<p>What I want to write is that </p>\n\n<pre><code>NAME,AGE\n\"Oleg\",\"15\"\n</code></pre>\n\n<p>Is there any way to write like this?</p>\n"}, {"tags": ["ruby", "web-scraping", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 9244337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d587365f94387e44f4f569915918d1?s=128&d=identicon&r=PG&f=1", "display_name": "jbowman", "link": "https://stackoverflow.com/users/9244337/jbowman"}, "edited": false, "score": 0, "creation_date": 1575485855, "post_id": 59182678, "comment_id": 104586670, "body": "Thanks for the quick response, but it seems <code>div#content</code> only contains 1 item. I will add some extra code to the OP to explain."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 330, "user_id": 9244337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d587365f94387e44f4f569915918d1?s=128&d=identicon&r=PG&f=1", "display_name": "jbowman", "link": "https://stackoverflow.com/users/9244337/jbowman"}, "edited": false, "score": 0, "creation_date": 1575487155, "post_id": 59182678, "comment_id": 104587156, "body": "div#content only finds one div. Within that div, there are multiple <code>h3.news</code>. <code>event.css(&quot;h3.news&quot;).text</code> gets just the text for the first matched <code>h3.news</code>. Just search for and iterate <code>.css(&quot;div#content h3.news&quot;)</code> and build an event out of each item - no need to perform another <code>.css</code> search within your loop."}, {"owner": {"reputation": 330, "user_id": 9244337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d587365f94387e44f4f569915918d1?s=128&d=identicon&r=PG&f=1", "display_name": "jbowman", "link": "https://stackoverflow.com/users/9244337/jbowman"}, "edited": false, "score": 0, "creation_date": 1575494498, "post_id": 59182678, "comment_id": 104590014, "body": "sorry if these questions are obvious... so, using your example <code>events = parsed_page.css(&quot;h3.news, p.pub&quot;).map(&amp;:text)</code> gives me an array of titles and dates, but each event title and its date are not grouped together in the array. is this a question of writing the right <code>#map</code> block? thank you."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 330, "user_id": 9244337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d587365f94387e44f4f569915918d1?s=128&d=identicon&r=PG&f=1", "display_name": "jbowman", "link": "https://stackoverflow.com/users/9244337/jbowman"}, "edited": false, "score": 0, "creation_date": 1575501290, "post_id": 59182678, "comment_id": 104592026, "body": "That&#39;s going to be more tricky, because the date is in a <code>p.pub strong</code> tag that is a <i>sibling</i> to the H3. You&#39;ll have to iterate the list of h3 elements, then get the next sibling from each of them, and then pull the date out of that."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 1, "last_activity_date": 1575485389, "last_edit_date": 1575485389, "creation_date": 1575484500, "answer_id": 59182678, "question_id": 59182602, "link": "https://stackoverflow.com/questions/59182602/how-to-get-specific-items-with-nokogiri-from-poorly-structured-html/59182678#59182678", "title": "How to get specific items with Nokogiri from poorly structured HTML", "body": "<p><code>at_css</code> <a href=\"https://www.rubydoc.info/gems/nokogiri/Nokogiri%2FXML%2FSearchable:at_css\" rel=\"nofollow noreferrer\">returns a single element</a>. It won't be iterable; when you try to iterate it, you're getting the attributes of the div. Use <code>parsed_page.css(\"div#content\")</code> instead if you want to get a list of elements to iterate.</p>\n\n<p>Or, more succinctly:</p>\n\n<pre><code>events = parsed_page.css(\"div#content h3.news\").map(&amp;:text)\n</code></pre>\n\n<p>With that bit of refactoring done, you might also consider refactoring the method a bit so that your URL fetch and document parse are reusable, which cleans up your <code>scrape_broadway_books</code> to a single responsibility:</p>\n\n<pre><code>def scrape_broadway_books\n  doc = doc_from_url(\"https://broadwaybookshophackney.com\",\n    \"/events/?event=archive\")\n  doc.css(\"div#content h3.news\").map(&amp;:text)\nend\n\ndef doc_from_url(*parts)\n  uri = URI.join(*parts)\n  Nokogiri::HTML(HTTParty.get(uri))\nend\n</code></pre>\n"}], "owner": {"reputation": 330, "user_id": 9244337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d587365f94387e44f4f569915918d1?s=128&d=identicon&r=PG&f=1", "display_name": "jbowman", "link": "https://stackoverflow.com/users/9244337/jbowman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 59182678, "answer_count": 1, "score": 0, "last_activity_date": 1575691824, "creation_date": 1575484171, "last_edit_date": 1575691824, "question_id": 59182602, "link": "https://stackoverflow.com/questions/59182602/how-to-get-specific-items-with-nokogiri-from-poorly-structured-html", "title": "How to get specific items with Nokogiri from poorly structured HTML", "body": "<p>I'm scraping \"<a href=\"http://broadwaybookshophackney.com/events/?event=archive\" rel=\"nofollow noreferrer\">The Broadway Bookshop</a>\" for an events list using Nokogiri, but the page is more or less all one block of content. I can't seem to access the specific <code>h3</code> items with <code>class=\"news\"</code> using:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def scrape_broadway_books\n  base_url = \"https://broadwaybookshophackney.com\"\n  slug = \"/events/?event=archive\"\n  url = base_url + slug\n  unparsed_page = HTTParty.get(url)\n  parsed_page = Nokogiri::HTML(unparsed_page)\n  events_list = parsed_page.at_css(\"div#content\")\n  # binding.pry\n  events = Array.new\n  events_list.each do |item|\n    puts item.css(\"h3.news\").text\n  end\nend\n</code></pre>\n\n<p>This gives me the error:</p>\n\n<pre><code>undefined method `css' for [\"id\", \"content\"]:Array (NoMethodError)\n</code></pre>\n\n<p>If I try to iterate over the <code>events_list</code> I still only end up with one event written to my data file:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>events_list = parsed_page.css(\"div#content\")\nevents = Array.new\nevents_list.each_with_index do |event, index|\n  event = {\n    index: index,\n    title: event.css(\"h3.news\").text\n  }\n  events &lt;&lt; event\nend\nFile.open(\"./_data/events.json\", \"w\") do |file|\n  file.write(JSON.pretty_generate(events))\nend\n</code></pre>\n\n<p>Why can't I iterate over the content div?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1412, "user_id": 1997707, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86a28f715dee63c5aec328fc2374b4bd?s=128&d=identicon&r=PG", "display_name": "John Mercier", "link": "https://stackoverflow.com/users/1997707/john-mercier"}, "edited": false, "score": 0, "creation_date": 1575483940, "post_id": 59182505, "comment_id": 104585885, "body": "This is a good problem. What have you tried so far?"}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "reply_to_user": {"reputation": 1412, "user_id": 1997707, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86a28f715dee63c5aec328fc2374b4bd?s=128&d=identicon&r=PG", "display_name": "John Mercier", "link": "https://stackoverflow.com/users/1997707/john-mercier"}, "edited": false, "score": 0, "creation_date": 1575484099, "post_id": 59182505, "comment_id": 104585958, "body": "array.sort_by{|x|x.split(&#39;.&#39;).last}. But not exact results"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575486939, "post_id": 59182505, "comment_id": 104587067, "body": "You should not have a Rails tag as this is a pure-Ruby question."}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1575488447, "post_id": 59183072, "comment_id": 104587648, "body": "You could replace <code>parts.unshift(parts.count)</code> with <code>[parts.count] + parts</code> which might be better readable if you don&#39;t encounter <code>unshift</code> often, but is less optimal since there are two additional arrays instantiated."}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1575627635, "post_id": 59183072, "comment_id": 104638903, "body": "hi how to add one more sorting with the above results(priorities wise also i have to sort. any suggestion?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1575628164, "post_id": 59183072, "comment_id": 104639172, "body": "@RajkumarUlaganadhan I don&#39;t fully understand your comment. If you&#39;d like to sort by additional factors you can simply add them to the parts array like I did with the part count. Array elements are compared from left (index 0) to right. You could for example do <code>[parts.count, another_criteria] + parts</code>, or <code>[parts.count] + parts + [another_criteria]</code> (you could also write this as <code>[parts.count, *parts, another_criteria]</code>)."}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1575628519, "post_id": 59183072, "comment_id": 104639336, "body": "Yes I want to add additional factors. thank you @3limin4t0r."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 4, "last_activity_date": 1575487782, "last_edit_date": 1575487782, "creation_date": 1575486329, "answer_id": 59183072, "question_id": 59182505, "link": "https://stackoverflow.com/questions/59182505/how-to-sort-array-of-string-by-alphabetical-order-with-domain-based-list/59183072#59183072", "title": "How to sort array of string by alphabetical order with domain based list", "body": "<p>You where on the correct path with <code>array.sort_by{|x|x.split('.').last}</code>. The problem is that you now only sort by the last domain part and not the underlying sub-domains. Instead <code>reverse</code> the <code>split</code> result so it first sorts by <code>\"com\"</code>, then <code>\"ramo\"</code> followed by other the sub-domains.</p>\n\n<pre><code>array = [\"test-new.ramo.com\", \"analytics.ramo.com\", \"top-test.ramo.com\", \"ec2.new.ramo.com\", \"ccc.ramo.com\", \"ddd.kumar.ramo.com\", \"ccc.test.ramo\", \"ramo.com\"] \narray.sort_by { |domain| domain.split('.').reverse }\n#=&gt; [\"ramo.com\",\n#    \"analytics.ramo.com\",\n#    \"ccc.ramo.com\",\n#    \"ddd.kumar.ramo.com\",\n#    \"ec2.new.ramo.com\",\n#    \"test-new.ramo.com\",\n#    \"top-test.ramo.com\",\n#    \"ccc.test.ramo\"]\n</code></pre>\n\n<p>This sorts the domains first based on the last part, then the second-last part etc.</p>\n\n<p>The reason <code>\"ddd.kumar.ramo.com\"</code> is out of order compared with your expectation is because <code>\"kumar\" &gt; \"ccc\"</code> and <code>\"kumar\" &lt; \"new\"</code>. The same applies for <code>\"ec2.new.ramo.com\"</code>. If you want them in the exact same positions as specified in the question you need to sort by domain part count first.</p>\n\n<pre><code>array.sort_by do |domain|\n  parts = domain.split('.').reverse\n  parts.unshift(parts.count)\nend\n#=&gt; [\"ramo.com\",\n#    \"analytics.ramo.com\",\n#    \"ccc.ramo.com\",\n#    \"test-new.ramo.com\",\n#    \"top-test.ramo.com\",\n#    \"ccc.test.ramo\",\n#    \"ddd.kumar.ramo.com\",\n#    \"ec2.new.ramo.com\"]\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 59183072, "answer_count": 1, "score": 4, "last_activity_date": 1575523660, "creation_date": 1575483779, "last_edit_date": 1575523660, "question_id": 59182505, "link": "https://stackoverflow.com/questions/59182505/how-to-sort-array-of-string-by-alphabetical-order-with-domain-based-list", "title": "How to sort array of string by alphabetical order with domain based list", "body": "<pre><code>array = [\"test-new.ramo.com\", \"analytics.ramo.com\", \"top-test.ramo.com\", \"ec2.new.ramo.com\", \"ccc.ramo.com\", \"ddd.kumar.ramo.com\", \"ccc.test.ramo\", \"ramo.com\"] \n</code></pre>\n\n<p>I just need to display the results with domain based alphabetical orders.</p>\n\n<p>Normal sorting it is giving </p>\n\n<pre><code>array = [\"analytics.ramo.com\", \"ccc.ramo.com\", \"ccc.test.ramo\", \"ddd.kumar.ramo.com\", \"ec2.new.ramo.com\", \"ramo.com\", \"test-new.ramo.com\", \"top-test.ramo.com\"] \n</code></pre>\n\n<p>Domain based components(from right side after . with alphabet order)</p>\n\n<p>Expectation:</p>\n\n<pre><code>ramo.com\nanalytics.ramo.com\nccc.ramo.com\ntest-new.ramo.com\ntop-test.ramo.com\nddd.kumar.ramo.com\nec2.new.ramo.com\n</code></pre>\n\n<p>I want to display the results based domain(.com). After .com need to check the second subdomain name with alphabets(.ramo.com).</p>\n\n<p>I have tried many ways not working based on domain(.com, .ramo.com, *.remo.com with alphabets).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "minitest"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575501089, "post_id": 59182426, "comment_id": 104591969, "body": "Back in 2014 <code>rspec-rails</code> split the configuration into <code>spec_helper.rb</code> and <code>rails_helper.rb</code>. The rationale being that it lets you run specs that don&#39;t require the Rails stack faster. <code>spec_helper.rb</code> should just contain the basic configuration of RSpec itself. Don&#39;t place anything Rails specific here as its required before the Rails stack. <code>rails_helper.rb</code> loads <code>spec_helper.rb</code> and then requires the Rails stack."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575501321, "post_id": 59182426, "comment_id": 104592032, "body": "You may want tell us what Rails version you are using and include your <code>application.rb</code>. Rails has used <code>Bundler.require(*Rails.groups)</code> for quite some time and <code>if defined?(Bundler)</code> seems to indicate that it is reeeally old."}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575512864, "post_id": 59182426, "comment_id": 104594647, "body": "@max It&#39;s currently 4.2.11.1 but I think it originally started on 3.x"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575544275, "post_id": 59182426, "comment_id": 104606107, "body": "On 4.2.1 you should swap the offending line with <code>Bundler.require(*Rails.groups)</code>. Not sure that this will totally fix the issue which could also be because you are requiring factory_bot before rails is loaded."}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575560738, "post_id": 59182426, "comment_id": 104615237, "body": "@max Now its saying <code>uninitialized constant ActiveRecord::Base</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575630886, "post_id": 59182426, "comment_id": 104640502, "body": "Did you remove \u2019require &#39;factory_bot&#39;\u2018?"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575654238, "post_id": 59182426, "comment_id": 104651650, "body": "I tried with and without @max"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575665235, "post_id": 59182426, "comment_id": 104655601, "body": "You need to require factory bot and database cleaner after require rspec/rails"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575729620, "post_id": 59182426, "comment_id": 104667802, "body": "@max still no luck. I&#39;ve updated the rails_helper in the q above"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575731131, "post_id": 59182426, "comment_id": 104668180, "body": "Does the issue only apply to the test environment?"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575902758, "post_id": 59182426, "comment_id": 104712211, "body": "@max Yes, I&#39;m able to start the dev server fine"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1577461804, "post_id": 59182426, "comment_id": 105178389, "body": "Did you update rails boot/application.rb files when updating from rails 3? Please post <code>application.rb</code>"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1577481923, "post_id": 59182426, "comment_id": 105184898, "body": "@Vasfed I&#39;ve added application.rb above"}, {"owner": {"reputation": 518, "user_id": 4044403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f9bcecd67c3d35bcf5d2ee7bbd15f?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Castellanos", "link": "https://stackoverflow.com/users/4044403/jose-castellanos"}, "edited": false, "score": 0, "creation_date": 1577904499, "post_id": 59182426, "comment_id": 105278912, "body": "Do you have you <code>config&#47;environments&#47;test.rb</code> file? Also are use using <code>bundle exec rspec</code> as your command to run specs?"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 518, "user_id": 4044403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f9bcecd67c3d35bcf5d2ee7bbd15f?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Castellanos", "link": "https://stackoverflow.com/users/4044403/jose-castellanos"}, "edited": false, "score": 0, "creation_date": 1577972437, "post_id": 59182426, "comment_id": 105296404, "body": "@JoseCastellanos I&#39;ve added test.rb above"}, {"owner": {"reputation": 475, "user_id": 4812102, "user_type": "registered", "profile_image": "https://graph.facebook.com/984436241567947/picture?type=large", "display_name": "Aurel Branzeanu", "link": "https://stackoverflow.com/users/4812102/aurel-branzeanu"}, "edited": false, "score": 0, "creation_date": 1578045705, "post_id": 59182426, "comment_id": 105319598, "body": "@AntarrByrd, seems the <code>require &quot;#{Rails.root}&#47;lib&#47;active_record_base.rb&quot;</code> line is the culprit. I could see no such file in rails/lib - try to comment this line."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1578140133, "post_id": 59182426, "comment_id": 105346645, "body": "Do you have a test section in the <code>config&#47;database.yml</code>? Mmmm weird why do you have those explicit requires in <code>application.rb</code>, was this project ever used without bundler?"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1578319053, "post_id": 59182426, "comment_id": 105389856, "body": "@nathanvda The database is configured. I&#39;m not sure what&#39;s going on with all the requires."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1578329669, "post_id": 59182426, "comment_id": 105395272, "body": "It looks like the order is wrong in the requires. I would be tempted to create a clean new rails 4.2.11 project, and then make sure the application.rb looks more like the &quot;pristine&quot; version. Remove all superfluour requires (and then re-add them if they are really needed). What is also possible is that your <code>Gemfile</code> is too restrictive: maybe some gems are only allowed in the <code>development&#47;production</code> envs and not <code>test</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1577481328, "post_id": 59501333, "comment_id": 105184754, "body": "I&#39;ve added the test.rb file above. rails_helper.rb is the only place in the app setting RAILS_ENV. Tried adding to test.rb and modifying rails_helper but didn&#39;t help."}, {"owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1577483816, "post_id": 59501333, "comment_id": 105185393, "body": "Add this line to the top of your <code>rails_helper.rb</code>, and what does it output when you run the spec?  <code>puts &quot;Your env: #{ENV.fetch(&#39;RAILS_ENV&#39;, &#39;test&#39;)}&quot;</code>"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1577656573, "post_id": 59501333, "comment_id": 105218278, "body": "It says <code>Your env: test</code>"}, {"owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1577750863, "post_id": 59501333, "comment_id": 105246333, "body": "Please post your <code>Gemfile</code> as well."}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1577801457, "post_id": 59501333, "comment_id": 105259157, "body": "I&#39;ve added the Gemfile"}], "tags": [], "owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "is_accepted": false, "score": 0, "last_activity_date": 1577455672, "last_edit_date": 1577455672, "creation_date": 1577452412, "answer_id": 59501333, "question_id": 59182426, "link": "https://stackoverflow.com/questions/59182426/error-when-migrating-for-minitest-to-rspec/59501333#59501333", "title": "Error when migrating for MiniTest to RSpec", "body": "<p>My guess is that the <code>RAILS_ENV</code> environment variable is set to something other than <code>test</code> when you run your <code>rspec</code> command.  I've run into this before on some machines that have the <code>RAILS_ENV</code> environment variable explicitly set to <code>development</code> or something else entirely (which like others have mentioned will cause the issue you're seeing since the environment file is missing for that value).</p>\n\n<p>In your <code>rails_helper.rb</code> file, try changing this line:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>ENV['RAILS_ENV'] = 'test'\n</code></pre>\n\n<p>and see if your tests can run.  If that is the case, you'll want to either find where you have <code>RAILS_ENV</code> manually set (typically in a shell configuration file) and remove it,  or copy your <code>config/environments/test.rb</code> file to new one to match whatever it is <code>RAILS_ENV</code> is set to.</p>\n"}], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 600, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1577972416, "creation_date": 1575483365, "last_edit_date": 1577972416, "question_id": 59182426, "link": "https://stackoverflow.com/questions/59182426/error-when-migrating-for-minitest-to-rspec", "title": "Error when migrating for MiniTest to RSpec", "body": "<p>I'm trying to migrate my rails application to RSpec. But I'm getting the error <code>uninitialized constant ActiveRecord::Relation</code> when running the specs. It says it's on line 10 of application.rb which is <code>Bundler.require(:default, Rails.env) if defined?(Bundler)</code></p>\n\n<p><strong>error message</strong></p>\n\n<pre><code>An error occurred while loading rails_helper.\nFailure/Error: require File.expand_path('../config/environment', __dir__)\n\nNameError:\n  uninitialized constant ActiveRecord::Base\n# ./config/application.rb:12:in `&lt;top (required)&gt;'\n# ./config/environment.rb:4:in `require'\n# ./config/environment.rb:4:in `&lt;top (required)&gt;'\n# ./spec/rails_helper.rb:11:in `require'\n# ./spec/rails_helper.rb:11:in `&lt;top (required)&gt;'\n# ------------------\n# --- Caused by: ---\n# NameError:\n#   uninitialized constant ActiveRecord::Base\n#   ./config/application.rb:12:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p><strong>Spec</strong></p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Api::V1::CertificateRequestsController, type: :controller do\n  describe '#create_v1_4' do\n    it 'worked' do\n        expect(true).to eq(true)\n    end\n  end\nend\n</code></pre>\n\n<p><strong>spec_helper.rb</strong></p>\n\n<pre><code># frozen_string_literal: true\n\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  # rspec-mocks config goes here. You can use an alternate test double\n  # library (such as bogus or mocha) by changing the `mock_with` option here.\n  config.mock_with :rspec do |mocks|\n    # Prevents you from mocking or stubbing a method that does not exist on\n    # a real object. This is generally recommended, and will default to\n    # `true` in RSpec 4.\n    mocks.verify_partial_doubles = true\n  end\n\n  # This option will default to `:apply_to_host_groups` in RSpec 4 (and will\n  # have no way to turn it off -- the option exists only for backwards\n  # compatibility in RSpec 3). It causes shared context metadata to be\n  # inherited by the metadata hash of host groups and examples, rather than\n  # triggering implicit auto-inclusion in groups with matching metadata.\n  config.shared_context_metadata_behavior = :apply_to_host_groups\nend\n</code></pre>\n\n<p><strong>rails_helper.rb</strong></p>\n\n<pre><code># frozen_string_literal: true\n\n# This file is copied to spec/ when you run 'rails generate rspec:install'\nputs \"Your env: #{ENV.fetch('RAILS_ENV', 'test')}\"\n\nrequire 'spec_helper'\nrequire 'database_cleaner'\nrequire 'pry'\n\nENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../config/environment', __dir__)\n# binding.pry\n\n# Prevent database truncation if the environment is production\nif Rails.env.production?\n  abort('The Rails environment is running in production mode!')\nend\nrequire 'rspec/rails'\n# include Warden::Test::Helpers\n# Warden.test_mode!\n# Add additional requires below this line. Rails is not loaded until this point!\n\n# Requires supporting ruby files with custom matchers and macros, etc, in\n# spec/support/ and its subdirectories.\nDir[Rails.root.join('spec', 'support', '**', '*.rb')].each { |f| require f }\n\n# Checks for pending migrations and applies them before tests are run.\n# If you are not using ActiveRecord, you can remove these lines.\nbegin\n  ActiveRecord::Migration.maintain_test_schema!\nrescue ActiveRecord::PendingMigrationError =&gt; e\n  puts e.to_s.strip\n  exit 1\nend\nRSpec.configure do |config|\n  # If you're not using ActiveRecord, or you'd prefer not to run each of your\n  # examples within a transaction, remove the following line or assign false\n  # instead of true.\n  config.use_transactional_fixtures = true\n\n  # RSpec Rails can automatically mix in different behaviours to your tests\n  # based on their file location, for example enabling you to call `get` and\n  # `post` in specs under `spec/controllers`.\n  config.infer_spec_type_from_file_location!\n\n  # Filter lines from Rails gems in backtraces.\n  config.filter_rails_from_backtrace!\n  # arbitrary gems may also be filtered via:\n  # config.filter_gems_from_backtrace(\"gem name\")\n\n  config.before(:suite) do\n    DatabaseCleaner.strategy = :transaction\n    DatabaseCleaner.clean_with(:truncation)\n  end\n\n  config.around(:each) do |example|\n    DatabaseCleaner.cleaning do\n      example.run\n    end\n  end\nend\n</code></pre>\n\n<p><strong>application.rb</strong></p>\n\n<pre><code># frozen_string_literal: true\n\nrequire File.expand_path('boot', __dir__)\nrequire 'oauth/rack/oauth_filter'\nrequire 'rack/ssl-enforcer'\nrequire 'rails/all'\nrequire './lib/middleware/catch_json_parse_errors'\n\nBundler.setup\n# If you have a Gemfile, require the gems listed there, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nCLIENT_OPTIONS = ['aswesome.com', 'aswementer'].freeze\nDEPLOYMENT_CLIENT = CLIENT_OPTIONS[0]\n\nStruct.new('Expiring', :before, :after, :cert)\nStruct.new('Notification', :before, :after, :domain, :expire, :reminder_type, :scanned_certificate_id)\nStruct.new('Reminding', :year, :cert)\n\nmodule AwesomeApp\n  class Application &lt; Rails::Application\n    # set environment variables\n    config.before_configuration do\n      env_file = File.join(Rails.root, 'config', 'local_env.yml')\n      YAML.safe_load(File.open(env_file)).each do |key, value|\n        ENV[key.to_s] = value\n      end\n    end\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n\n    # Custom directories with classes and modules you want to be autoloadable.\n    config.autoload_paths += %W[#{config.root}/lib]\n\n    Bundler.require(*Rails.groups)\n    # Config::Integration::Rails::Railtie.preload\n\n    # Add additional load paths for your own custom dirs\n    %w[observers mailers middleware serializers].each do |dir|\n      config.autoload_paths &lt;&lt; \"#{config.root}/app/#{dir}\"\n    end\n\n    # Only load the plugins named here, in the order given (default is alphabetical).\n    # :all can be used as a placeholder for all plugins not explicitly named.\n    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]\n\n    # Activate observers that should always be running.\n    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer\n\n    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.\n    # Run \"rake -D time\" for a list of tasks for finding time zone names. Default is UTC.\n    config.time_zone = 'Central Time (US &amp; Canada)'\n\n    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.\n    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]\n    # config.i18n.default_locale = :de\n\n    # Configure the default encoding used in templates for Ruby 1.9.\n    config.encoding = 'utf-8'\n\n    # Configure sensitive parameters which will be filtered from the log file.\n    config.filter_parameters += %i[password password_confirmation]\n    # config.action_mailer.default_url_options = { :host =&gt; Settings.actionmailer_host }\n\n    # machinist generator\n    # config.generators do |g|\n    #   g.fixture_replacement :machinist\n    # end\n\n    # Rails Api\n    config.api_only = false\n\n    # turn off strong parameters\n    config.action_controller.permit_all_parameters = true\n\n    config.generators do |g|\n      g.test_framework :minitest, spec: true, fixture: false\n      g.jbuilder false\n    end\n\n    # config.middleware.use OAuth::Rack::OAuthFilter\n    config.middleware.insert_before ActionDispatch::ParamsParser, 'CatchJsonParseErrors'\n\n    # Delayed Job\n    config.active_job.queue_adapter = :delayed_job\n\n    config.middleware.insert_before 0, Rack::Cors do\n      allow do\n        origins '*'\n        resource '/certificate/*',\n                 headers: :any,\n                 methods: %i[get post delete put options head],\n                 max_age: 0\n      end\n    end\n\n    # Enable the asset pipeline\n    config.assets.enabled = true\n\n    config.sass.preferred_syntax = :sass\n    config.sass.line_comments = false\n    config.sass.cache = false\n    config.action_mailer.default_url_options = { host: 'secure.ssl.com', protocol: 'https' }\n    if DEPLOYMENT_CLIENT =~ /certassure/i &amp;&amp; Rails.root.to_s =~ /Development/\n      paths['config/database'] = 'config/client/certassure/database.yml'\n    end\n  end\nend\n\nrequire \"#{Rails.root}/lib/base.rb\"\nrequire \"#{Rails.root}/lib/asset_tag_helper.rb\"\nrequire \"#{Rails.root}/lib/array.rb\"\nrequire \"#{Rails.root}/lib/range.rb\"\nrequire \"#{Rails.root}/lib/in_words.rb\"\nrequire \"#{Rails.root}/lib/kernel.rb\"\nrequire \"#{Rails.root}/lib/money.rb\"\n# require \"#{Rails.root}/lib/subdomain-fu.rb\"\nrequire \"#{Rails.root}/lib/domain_constraint.rb\"\nrequire \"#{Rails.root}/lib/preferences.rb\"\nrequire \"#{Rails.root}/lib/active_record.rb\"\nrequire \"#{Rails.root}/lib/active_record_base.rb\"\nrequire \"#{Rails.root}/lib/hash.rb\"\nrequire 'will_paginate'\n\n# try to figure this out for heroku and rails 3\n# class Fixnum; include InWords; end\n# class Bignum; include InWords; end\nDB_STRING_MAX_LENGTH = 255\nDB_TEXT_MAX_LENGTH = 40_000\nHTML_TEXT_FIELD_SIZE = 20\nAMOUNT_FIELD_SIZE = 10\nADDRESS_FIELD_SIZE = 30\nSERVER_SIDE_CART = false\n# SQL_LIKE = Rails.configuration.database_configuration[Rails.env]['adapter'].\n#   downcase=='postgresql' ? 'ilike' : 'like'\ndb_env = Rails.configuration.database_configuration[Rails.env]\ndb_adapter = db_env['adapter'].downcase if db_env.present?\nSQL_LIKE = db_adapter == 'postgresql' ? 'ilike' : 'like'\n\n# uncomment to track down bugs on heroku production\n# ApplicationRecord.logger.level = 0 # at any time\nActiveMerchant::Billing::CreditCard.require_verification_value = false\nPublicSuffix::List.default =\n  PublicSuffix::List.parse(File.read(PublicSuffix::List::DEFAULT_LIST_PATH), private_domains: false)\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code># frozen_string_literal: true\n\nsource 'http://rubygems.org'\n\ngem 'activemerchant'\ngem 'acts_as_publishable'\ngem 'authlogic'\ngem 'awesome_print'\ngem 'aws-sdk', '~&gt; 2.0'\ngem 'bootsnap', require: false\ngem 'declarative_authorization', git: 'https://github.com/xymist/declarative_authorization.git', branch: 'allow_rails_5'\ngem 'dynamic_form'\ngem 'easy_roles'\ngem 'haml', '&gt;= 3.1.alpha.50'\ngem 'json' # , '~&gt; 1.8.6'\ngem 'money', '2.1.0'\ngem 'mysql2'\ngem 'paperclip', '~&gt; 5.3.0'\ngem 'protected_attributes'\ngem 'pry-rails'\ngem 'rabl', '0.14.1'\ngem 'rack-ssl-enforcer'\ngem 'rails', '~&gt; 4.2.11.1'\ngem 'rb-inotify', require: false\ngem 'responders', '~&gt; 2.0'\ngem 'savon', '~&gt; 2.0'\ngem 'sprockets'\ngem 'squeel'\ngem 'will_paginate'\ngem 'workflow', '~&gt; 1.2'\ngem 'xml-simple'\ngem 'yui-compressor'\ngem 'zip-zip'\n# Commented out while converting to pipeline\n# gem 'jammit'\ngem 'config'\ngem 'oauth-plugin', '&gt;= 0.4.0.pre1'\ngem 'openssl-extensions', require: 'openssl-extensions/all'\ngem 'radix62'\ngem 'simpleidn'\ngem 'uuidtools'\ngem 'whenever', require: false\n# gem \"therubyracer\", '~&gt; 0.12.3', platform: :ruby\ngem 'actionpack-action_caching', '~&gt; 1.1', '&gt;= 1.1.1'\ngem 'airbrake', '~&gt; 9.5' # https://airbrake.io/docs/ruby/upgrading-your-notifier/\ngem 'api-pagination'\ngem 'attr_encrypted', '&gt;= 3.0.3'\ngem 'bootstrap'\ngem 'cancan'\ngem 'coffee-rails'\ngem 'compass-rails'\ngem 'daemons'\ngem 'dalli'\ngem 'dalli-elasticache'\ngem 'delayed-web'\ngem 'delayed_job_active_record'\ngem 'delayed_job_groups_plugin'\ngem 'jbuilder'\ngem 'jquery-rails'\ngem 'jquery-ui-rails'\ngem 'json-schema'\ngem 'jsonapi-serializers'\ngem 'libv8'\ngem 'mini_racer', platforms: :ruby\ngem 'nokogiri', '&gt;= 1.10.4'\ngem 'popper_js', '~&gt; 1.11.1'\ngem 'public_suffix', '&gt;= 4.0.0'\ngem 'rack-cors', '&gt;= 0.4.1', require: 'rack/cors'\ngem 'rails-api'\ngem 'rails-observers'\ngem 'request_exception_handler'\ngem 'rubyzip', '&gt;= 1.3.0'\ngem 'rvm-capistrano'\ngem 'sass-rails'\ngem 'sdoc', group: :doc\ngem 'select2-rails'\ngem 'stripe'\ngem 'turbolinks'\ngem 'unscoped_associations'\n# gem 'wkhtmltopdf-binary' see config/initializers/wicked_pdf.rb for installation instructions\ngem 'duo_web', '~&gt; 1.0'\ngem 'u2f'\ngem 'wicked_pdf'\n# gem 'simple_captcha2', require: 'simple_captcha'\ngem 'acts_as_tree'\ngem 'font-awesome-rails'\ngem 'recaptcha', require: 'recaptcha/rails'\ngem 'where-or'\ngem 'whois', '~&gt; 4.0'\ngem 'whois-parser'\n# gem \"skylight\"\ngem 'authy'\ngem 'mailboxer'\ngem 'memoist'\n# gem 'countries'\ngem 'bootstrap-datepicker-rails'\ngem 'timezone', '~&gt; 1.0'\n# required by sws-a1\ngem 'activerecord-import'\ngem 'date'\ngem 'etc'\ngem 'fileutils', '~&gt; 1.1.0'\ngem 'forwardable'\ngem 'scout_apm'\ngem 'stringio'\ngem 'strscan'\ngem 'zlib'\n\ngroup :development do\n  gem 'annotate'\n  gem 'better_errors'\n  gem 'binding_of_caller'\n  gem 'bullet'\n  gem 'dotenv-rails'\n  gem 'letter_opener_web', '~&gt; 1.0'\n  gem 'memory_profiler'\n  gem 'meta_request'\n  gem 'spring'\n  gem 'spring-commands-testunit'\n  gem 'web-console', '~&gt; 2.0'\n\n  # Linting\n  gem 'rubocop', require: false\n  gem 'rubocop-performance'\n  gem 'rubocop-rails'\n  gem 'solargraph', require: false\nend\n\ngroup :development, :test do\n  gem 'builder'\n  gem 'byebug'\n  gem 'factory_bot_rails'\n  gem 'pry-byebug'\n  gem 'pry-remote'\n  gem 'ruby-odbc'\n  gem 'ruby_parser'\n  gem 'rspec-rails'\nend\n\ngroup :test do\n  gem 'database_cleaner'\n  gem 'faker'\n  gem 'mocha'\n  gem 'simplecov', require: false\n  gem 'vcr'\n  gem 'webmock'\nend\n\ngem 'foreman'\ngem 'httparty'\ngem 'swagger-blocks'\ngem 'swagger-docs'\ngem 'uglifier', '4.1.8'\n\ngem 'rswag-ui'\n\ngem 'bcrypt_pbkdf', '~&gt; 1'\ngem 'ed25519', '~&gt; 1.2'\n</code></pre>\n\n<p><strong>test.rb</strong></p>\n\n<pre><code>SslCom::Application.configure do\n  MIGRATING_FROM_LEGACY = false\n  # Settings specified here will take precedence over those in config/environment.rb\n\n  # The test environment is used exclusively to run your application's\n  # test suite.  You never need to work with it otherwise.  Remember that\n  # your test database is \"scratch space\" for the test suite and is wiped\n  # and recreated between test runs.  Don't rely on the data there!\n  config.cache_classes = true\n\n  # Log error messages when you accidentally call methods on nil.\n  config.whiny_nils = true\n\n  # Show full error reports and disable caching\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  # Raise exceptions instead of rendering exception templates\n  config.action_dispatch.show_exceptions = false\n\n  # Disable request forgery protection in test environment\n  config.action_controller.allow_forgery_protection    = false\n\n  # Tell Action Mailer not to deliver emails to the real world.\n  # The :test delivery method accumulates sent emails in the\n  # ActionMailer::Base.deliveries array.\n  config.action_mailer.delivery_method = :test\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.default_url_options = {host: 'localhost:3000'}\n\n  config.after_initialize do\n    Rails.application.routes.default_url_options = {host: 'localhost:3000'}\n  end\n\n  config.force_ssl = false\n\n  # Use SQL instead of Active Record's schema dumper when creating the test database.\n  # This is necessary if your schema can't be completely dumped by the schema dumper,\n  # like if you have constraints or database-specific column types\n  # config.active_record.schema_format = :sql\n\n  # Sort the order test cases are executed.\n  config.active_support.test_order = :sorted\n\n  # Print deprecation notices to the stderr\n  config.active_support.deprecation = :stderr\n\n  ActiveMerchant::Billing::Base.mode = :test\n\n  config.eager_load=false\n\n  config.serve_static_assets = true\n  config.static_cache_control = \"public, max-age=3600\"\n\n  #config.log_level = Logger::INFO\n\n  GATEWAY_TEST_CODE=1.0\n  # END ActiveMerchant configuration\nend\n\n#require \"#{Rails.root}/lib/firewatir_url.rb\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssh", "rsa"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1575475263, "post_id": 59179950, "comment_id": 104581112, "body": "do you intend t deal with SSL keys (as your code and title suggest) or ssh keys (as you write in your text)? Also, how exactly are you exporting the key? Please show that code."}, {"owner": {"reputation": 987, "user_id": 2466146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba708133ae57979be5fb538e117d8a57?s=128&d=identicon&r=PG", "display_name": "mdargacz", "link": "https://stackoverflow.com/users/2466146/mdargacz"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1575543301, "post_id": 59179950, "comment_id": 104605587, "body": "@HolgerJust I meant to generate ssh keys pair, I updated the code"}], "owner": {"reputation": 987, "user_id": 2466146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba708133ae57979be5fb538e117d8a57?s=128&d=identicon&r=PG", "display_name": "mdargacz", "link": "https://stackoverflow.com/users/2466146/mdargacz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575543425, "creation_date": 1575474921, "last_edit_date": 1575543425, "question_id": 59179950, "link": "https://stackoverflow.com/questions/59179950/opensslpkeyrsa-create-key-without-passphrase", "title": "OpenSSL::PKey::RSA Create key without passphrase", "body": "<p>I Created a keys pair using:</p>\n\n<pre><code>private def new_keys\n    key = OpenSSL::PKey::RSA.new 2048\n    type = key.public_key.ssh_type\n    data = [key.public_key.to_blob].pack('m0')\n    public_key_openssh_format = \"#{type} #{data}\"\n    {\n      :private =&gt; key.to_pem,\n      :public =&gt; public_key_openssh_format,\n    }\nend\n</code></pre>\n\n<p>Next, I exported both public and private key to files.\nWhen I try to use the public key it prompts me for passphrase, which I didn't add.</p>\n\n<p>As per documentation: <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html#new-method\" rel=\"nofollow noreferrer\">A pass_phrase can be used to decrypt the key. If none is given OpenSSL will prompt for the pass phrase.</a>. But I've run it in a rails process, so I'm not sure what's the behavior. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575480050, "post_id": 59179850, "comment_id": 104583873, "body": "Why do you want hashes instead of model instances?"}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575480077, "post_id": 59179850, "comment_id": 104583897, "body": "@Stefan I want to later export the data to json."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575480135, "post_id": 59179850, "comment_id": 104583922, "body": "You might want to take a look at <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow noreferrer\">github.com/rails/jbuilder</a>"}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575480325, "post_id": 59179850, "comment_id": 104584020, "body": "Interesting. It&#39;ll group them the way I want too?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575480856, "post_id": 59179850, "comment_id": 104584318, "body": "You still have to group the data yourself (in your controller). But you don&#39;t have to prepare a huge hash representing the entire JSON result. Instead you have a nice DSL to define your JSON (in your view)."}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575497439, "post_id": 59179850, "comment_id": 104590942, "body": "Great. Thanks for the suggestion!"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1575479036, "post_id": 59180853, "comment_id": 104583342, "body": "You currently call <code>attributes</code> with an array as receiver, since each value is an array of cities. Resulting in a <code>NoMethodError</code>. Furthermore your <code>slice(:name, :id)</code> should be <code>slice(&#39;name&#39;, &#39;id&#39;)</code>, since <code>attributes</code> returns a hash where the keys are strings, not symbols."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1575477770, "creation_date": 1575477770, "answer_id": 59180853, "question_id": 59179850, "link": "https://stackoverflow.com/questions/59179850/using-group-by-but-return-an-array-of-hashes/59180853#59180853", "title": "Using group_by but return an array of hashes", "body": "<p>This should be enough for you</p>\n\n<pre><code>City.all.group_by { |c| c.state.name }.map {|k,v| [k, v.attributes] }.to_h\n</code></pre>\n\n<p>and to select only specified attributes do</p>\n\n<pre><code>v.attributes.slice(:name, :id)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 2, "last_activity_date": 1575479382, "last_edit_date": 1575479382, "creation_date": 1575477845, "answer_id": 59180889, "question_id": 59179850, "link": "https://stackoverflow.com/questions/59179850/using-group-by-but-return-an-array-of-hashes/59180889#59180889", "title": "Using group_by but return an array of hashes", "body": "<p>The reason the grouped values are Rails objects (your models) is due to the fact that you also start with these objects. You can use the <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods.html#method-i-attributes\" rel=\"nofollow noreferrer\"><code>attributes</code></a> method to retrieve the attributes of a model instance as a hash.</p>\n\n<p>The following achieves the result you want:</p>\n\n<pre><code>City.all.group_by { |city| city.state.name }\n  .transform_values { |cities| cities.map(&amp;:attributes) }\n</code></pre>\n\n<p>If you only want specific attributes, use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Core.html#method-i-slice\" rel=\"nofollow noreferrer\"><code>slice</code></a> instead:</p>\n\n<pre><code>City.all.group_by { |city| city.state.name }\n  .transform_values { |cities| cities.map { |city| city.slice(:id, :name) } }\n</code></pre>\n\n<p>Note that <code>slice</code> will return an <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html\" rel=\"nofollow noreferrer\"><code>ActiveSupport::HashWithIndifferentAccess</code></a> instance. Which mostly can be used in the same manner as a normal hash, but returns the same value for both <code>hash[:name]</code> and <code>hash['name']</code>. If you rather use a normal hash append a <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html#method-i-to_hash\" rel=\"nofollow noreferrer\"><code>to_hash</code></a> call after the <code>slice</code> call.</p>\n"}], "owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 59180889, "answer_count": 2, "score": 0, "last_activity_date": 1575479382, "creation_date": 1575474608, "question_id": 59179850, "link": "https://stackoverflow.com/questions/59179850/using-group-by-but-return-an-array-of-hashes", "title": "Using group_by but return an array of hashes", "body": "<p>I simply want to group cities by their state and from there have the array of the hash key (i.e. <em>State Name</em>) return an array of hash data pertaining to it's cities. Right now I have something like this:</p>\n\n<pre><code>City.all.group_by { |c| c.state.name }\n</code></pre>\n\n<p>Which will return:</p>\n\n<pre><code>{\n  \"Illinois\": [# &lt; City id: 3, name: \"Chicago\", state_id: 3 &gt; ],\n  \"Texas\": [# &lt; City id: 2, name: \"Houston\", state_id: 2 &gt; ],\n  \"California\": [# &lt; City id: 1, name: \"Los Angeles\", state_id: 1 &gt; ],\n  \"New York\": [# &lt; City id: 4, name: \"New York City\", state_id: 4 &gt; ]\n}\n</code></pre>\n\n<p>Notice how it returns an array of rails objects. Instead I want to return an array of hashes with certain attributes, like their <code>id</code> and <code>name</code>.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "json", "ruby", "datatables"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575470973, "post_id": 59178386, "comment_id": 104578559, "body": "The easiest way is to use this gem: Ajax-DataTables-Rails gem here: <a href=\"https://github.com/jbox-web/ajax-datatables-rails\" rel=\"nofollow noreferrer\">github.com/jbox-web/ajax-datatables-rails</a>  which will help you compartamentalize all of your datatables.  Typically you&#39;ll make a datatables class for a table and feed the view.context to it like: format.json { render json: DailyOrderDatatable.new(params) }"}, {"owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575471127, "post_id": 59178386, "comment_id": 104578646, "body": "Yeah, I know that there*s a gem but I rather go with the &quot;normal&quot; library. I just need to know how I get the value."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1575471262, "post_id": 59178386, "comment_id": 104578734, "body": "Follow this railscast then. Explains everything in full detail without gems: <a href=\"http://railscasts.com/episodes/340-datatables\" rel=\"nofollow noreferrer\">railscasts.com/episodes/340-datatables</a>  Basically you&#39;ll make a class that handles returning the properly formatted json response which is really just an array that follows the structure of columns on your table."}, {"owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "edited": false, "score": 0, "creation_date": 1575473082, "post_id": 59178386, "comment_id": 104579762, "body": "That&#39;s why I ask how to get this JSON response as properly formatted one :)"}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "edited": false, "score": 0, "creation_date": 1575476914, "post_id": 59179658, "comment_id": 104582119, "body": "Thanks, I didn&#39;t realize I could force the rendering as JSON as an array, with the server-side conversion and the right dataSrc method it works! You saved my day :D"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1613643593, "last_edit_date": 1613643593, "creation_date": 1575474066, "answer_id": 59179658, "question_id": 59178386, "link": "https://stackoverflow.com/questions/59178386/rails-parse-json-response-for-jquery-datatables/59179658#59179658", "title": "Rails parse JSON response for jQuery Datatables", "body": "<p>The <code>dataSrc</code> option does not exist and thus will be negated. Instead use the <a href=\"https://datatables.net/reference/option/ajax.dataSrc\" rel=\"nofollow noreferrer\"><code>ajax.dataSrc</code></a> option:</p>\n<pre class=\"lang-js prettyprint-override\"><code>$(&quot;#todaysOrdersTable&quot;).DataTable({\n  ajax: {\n    url: '/showDailyOrders',\n    dataSrc: ''\n  },\n  columns: [\n    { title: 'Vollkost', data: 'count1' }\n  ]\n});\n</code></pre>\n<p>After fixing the <code>dataSrc</code> option you still have the issue that the returned value is a single value instead of an array. When you return <code>OrderCard.all</code> you return a array of values, which is why it works.</p>\n<p>This means we have to convert the single returned object <code>{&quot;count1&quot;:1}</code> into an array that holds the object <code>[{&quot;count1&quot;:1}]</code>. This can either be done on the client- or server-side. On the client-side it should look something like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>$(&quot;#todaysOrdersTable&quot;).DataTable({\n  ajax: {\n    url: '/showDailyOrders',\n    dataSrc: obj =&gt; [obj], // transform into an array\n  },\n  columns: [\n    { title: 'Vollkost', data: 'count1' }\n  ]\n});\n</code></pre>\n<p>Or if you rather change the server-side it should look something like this:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>order_cards = OrderCard.where(day: Date.today).where(dish_type: 0)\n# note that the object is now wrapped inside an array\nrender json: [{ count1: order_cards.count }]\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 59179658, "answer_count": 1, "score": 0, "last_activity_date": 1613643593, "creation_date": 1575469962, "question_id": 59178386, "link": "https://stackoverflow.com/questions/59178386/rails-parse-json-response-for-jquery-datatables", "title": "Rails parse JSON response for jQuery Datatables", "body": "<p>I have a small problem with the ajax function of jQuery DataTables and with the JSON response, I get in my Rails 6 application. I'm successfully accessing the route and getting back a JSON response.</p>\n\n<p>What I want to achieve: I count the number of records with specific attributes for every day, so I get back an integer value. My problem is: How can I pass this value to jQuery DataTables to appear in the columns?</p>\n\n<p>My controller action:</p>\n\n<pre><code> def showDailyOrders\n    render json: \n    { count1: OrderCard.where(day: Date.today).where(dish_type: 0).count }\n  end \n</code></pre>\n\n<p>My jQuery code to initialize the DataTable and the AJAX request:</p>\n\n<pre><code>$(\"#todaysOrdersTable\").DataTable({\n            ajax: '/showDailyOrders',\n            dataSrc: '',\n            columns: [\n                { title: 'Vollkost', data: 'count1' }\n            ]\n        });\n</code></pre>\n\n<p>The JSON response I get looks like this:</p>\n\n<pre><code>\"{\\\"count1\\\":1}\"\n</code></pre>\n\n<p>How do I pass the value (1 in this case) to the jQuery function? It's just telling me \"Loading\", but nothing happens. If I use another query like OrderCard.all as response and use the key (for example \"id\") as data in the function, it's displaying the value.</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575469865, "post_id": 59177698, "comment_id": 104577888, "body": "Hpricot is an old gem and no longer maintained. You will probably have a lot of problems trying to install it. Switch to Nokogiri instead."}, {"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575470625, "post_id": 59177698, "comment_id": 104578360, "body": "yes - i discovered that it wasn&#39;t maintained any longer as i was looking for a solution. i have nokogiri in my gem file (added to the post) i need raakt, which seems to have a dependency on hpricot. can raakt work with nokogiri? forgive me, i&#39;m new to this world!"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575470922, "post_id": 59177698, "comment_id": 104578536, "body": "No it can&#39;t use Nokogiri as replacement. You need to post the output of both logfiles in your question. There&#39;s two of them. The other one is missing."}, {"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575471173, "post_id": 59177698, "comment_id": 104578683, "body": "thanks for coming back again: extra log added for gem_make.out log:"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575471459, "post_id": 59177698, "comment_id": 104578862, "body": "Did you install the MSYS DevKit with Ruby?"}, {"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575471819, "post_id": 59177698, "comment_id": 104579084, "body": "i tried <code>ridk install</code> but that didn&#39;t work - proxy problems. so i got it from here: <a href=\"http://www.msys2.org/\" rel=\"nofollow noreferrer\">msys2.org</a>"}, {"owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575533598, "post_id": 59177698, "comment_id": 104600717, "body": "i downgraded ruby to 1.9.3 and i was able to do everything i wanted. thanks for your time"}], "owner": {"reputation": 942, "user_id": 2061517, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/50effaeae7b9684e1b7551a9e16ed521?s=128&d=identicon&r=PG", "display_name": "dstewart101", "link": "https://stackoverflow.com/users/2061517/dstewart101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575471153, "creation_date": 1575467819, "last_edit_date": 1575471153, "question_id": 59177698, "link": "https://stackoverflow.com/questions/59177698/cannot-install-raakt-hpricot-gem", "title": "cannot install raakt/hpricot gem", "body": "<p>I'm absolutely a ruby beginner. I am trying to install raakt. This installation is failing - I think because of a dependency on another gem called hpricot. So I take a step back and try to install hpricot first:</p>\n\n<pre><code>install gem hpricot\n</code></pre>\n\n<p>Output as follows:</p>\n\n<pre><code>\nC:\\Users\\Administrator\\source\\repos\\rss&gt;gem install hpricot\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions. This could take a while...\nERROR:  Error installing hpricot:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/hpricot-0.8.6/ex\nt/fast_xs\nC:/tools/ruby26/bin/ruby.exe -I C:/tools/ruby26/lib/ruby/2.6.0 -r ./siteconf2019\n1204-7324-62if1j.rb extconf.rb\nchecking for stdio.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/tools/ruby26/bin/$(RUBY_BASE_NAME)\nC:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:467:in `try_do': The compiler failed to g\nenerate an executable file. (RuntimeError)\nYou have to install development tools first.\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:601:in `try_cpp'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:1109:in `block in have_heade\nr'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:959:in `block in checking_fo\nr'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:361:in `block (2 levels) in\npostpone'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:331:in `open'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:361:in `block in postpone'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:331:in `open'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:357:in `postpone'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:958:in `checking_for'\n        from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:1108:in `have_header'\n        from extconf.rb:2:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can\n be found here:\n\n  C:/tools/ruby26/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/hpricot-0.8.6\n/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/hpri\ncot-0.8.6 for inspection.\nResults logged to C:/tools/ruby26/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6\n.0/hpricot-0.8.6/gem_make.out\n\nC:\\Users\\Administrator\\source\\repos\\rss&gt;\n</code></pre>\n\n<p>gem_make.out log:</p>\n\n<pre><code>current directory: C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/hpricot-0.8.6/ext/fast_xs\nC:/tools/ruby26/bin/ruby.exe -I C:/tools/ruby26/lib/ruby/2.6.0 -r ./siteconf20191204-2592-obt2lm.rb extconf.rb\nchecking for stdio.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=C:/tools/ruby26/bin/$(RUBY_BASE_NAME)\nC:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:467:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:601:in `try_cpp'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:1109:in `block in have_header'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:959:in `block in checking_for'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:361:in `block (2 levels) in postpone'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:331:in `open'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:361:in `block in postpone'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:331:in `open'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:357:in `postpone'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:958:in `checking_for'\n    from C:/tools/ruby26/lib/ruby/2.6.0/mkmf.rb:1108:in `have_header'\n    from extconf.rb:2:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  C:/tools/ruby26/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/hpricot-0.8.6/mkmf.log\n\nextconf failed, exit code 1\n\n</code></pre>\n\n<p>Can anyone suggest a way I can get this installed or have some trouble-shooting tips?</p>\n\n<p>Log looks like this:</p>\n\n<pre><code>\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/tools/ruby26/include/ruby-2.6.0/x64-mingw32 -IC:/tools/ruby26/include/ruby-2.6.0/ruby/backward -IC:/tools/ruby26/include/ruby-2.6.0 -I. -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0600 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/tools/ruby26/lib -L. -pipe -s     -lx64-msvcrt-ruby260  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;winsock2.h&gt;\n4: #include &lt;windows.h&gt;\n5: int main(int argc, char **argv)\n6: {\n7:   return 0;\n8: }\n/* end */\n</code></pre>\n\n<p>Full gemfile</p>\n\n<pre><code>source 'http://rubygems.org'\n\ngem 'rake', '10.5.0'\ngem 'albacore', '2.3.22'\ngem 'business_time', '0.8.0'\ngem 'nokogiri'\ngem 'octokit', '4.3.0'\n#gem 'hpricot'\n#gem 'raakt'\n</code></pre>\n"}, {"tags": ["ruby", "multithreading", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1575470347, "post_id": 59176908, "comment_id": 104578192, "body": "What do you mean by &quot;it&#39;s not running&quot;? Are you using <code>ruby-on-rails</code> version 3, or 5? (Or maybe 6??) -- You&#39;ve tagged the question with both."}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575525165, "post_id": 59176908, "comment_id": 104597622, "body": "@TomLord Version 3 has been removed. And I have clearly mentioned that the server is hanged. I could not even stop the server."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575527981, "post_id": 59176908, "comment_id": 104598548, "body": "You said that &quot;the method in the other module is not running&quot;. What does this mean? Are you saying that the method never gets called? Or that it gets stuck halfway, in some code you haven&#39;t shown us? Does the rails log message appear?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575528058, "post_id": 59176908, "comment_id": 104598578, "body": "Does your code all work as expected if you remove the usage of Thread?"}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575528734, "post_id": 59176908, "comment_id": 104598826, "body": "I hope the method is not being called only. If I remove the thread , the code works as expected or if I remove the module method inside the same class as thread runs, the code works as expected. So I concluded that the method inside a different module is the problem here."}], "answers": [{"tags": [], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1575541434, "creation_date": 1575541434, "answer_id": 59193006, "question_id": 59176908, "link": "https://stackoverflow.com/questions/59176908/accessing-module-inside-a-thread-ruby/59193006#59193006", "title": "Accessing Module inside a Thread Ruby", "body": "<p>Tracked down the issue. Ran the application Production mode and the same code works fine. Its a simple class loading issue in development mode. </p>\n"}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575541434, "creation_date": 1575465280, "last_edit_date": 1575531697, "question_id": 59176908, "link": "https://stackoverflow.com/questions/59176908/accessing-module-inside-a-thread-ruby", "title": "Accessing Module inside a Thread Ruby", "body": "<p>I have a Service which calls a method that runs inside thread. But the code inside thread has access to other module methods. The thread is getting struck when the module method is called. </p>\n\n<p>Service:</p>\n\n<pre><code>  def place_order\n    threads = []\n    @responses = []\n    order_params.each_with_index do |order, index|\n      threads &lt;&lt; Thread.new do\n        @responses &lt;&lt; Module1::Class1.place_order(order)\n      end\n   end\n   threads.each &amp;:join\n  @responses\nend\n</code></pre>\n\n<p>Module1::Class1's place_order method:</p>\n\n<pre><code>def place_order(options)\n  order_params = { body: order_config(options).to_json }\n  resp = make_request(:post, \"/v3/order/\", order_params).parsed_response\n  Rails.logger.info \"QWIK_CILVER::ORDERResponse:: #{resp.inspect}\"\n  ***The below code calls a method in different module which is not running******     \n  Module2::SubModule1::Class1.parse(resp, self)\nend\n</code></pre>\n\n<p>THe server is hanged and I am not even able to stop the server after that. Have to kill the process manually and start the server again. How can I call the Module2::SubModule1::Class1's method inside thread? </p>\n\n<p>PS: If I call the same service from console, everything works as expected. But If i call from postman, the server hangs at the modeule method call point. </p>\n"}, {"tags": ["ruby", "api", "http", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 592, "user_id": 445724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b05071eb14e9c1820918366349bdc4?s=128&d=identicon&r=PG", "display_name": "MikeRogers0", "link": "https://stackoverflow.com/users/445724/mikerogers0"}, "is_accepted": false, "score": 0, "last_activity_date": 1593536426, "creation_date": 1593536426, "answer_id": 62662529, "question_id": 59176256, "link": "https://stackoverflow.com/questions/59176256/unexpected-behaviour-with-faradayconnectionfailed/62662529#62662529", "title": "Unexpected behaviour with Faraday::ConnectionFailed", "body": "<pre><code>before do\n   allow(token).to receive(:get).and_raise(Faraday::TimeoutError, 'execution expired')\n  described_class.get(api_endpoint)\nend\n</code></pre>\n<p>I solved this by passing a <a href=\"https://relishapp.com/rspec/rspec-mocks/docs/configuring-responses/raising-an-error\" rel=\"nofollow noreferrer\">second argument</a> to the <code>and_raise</code> method. I think it's because Faraday has slightly different exception classes.</p>\n"}], "owner": {"reputation": 1100, "user_id": 1584736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8c4392528b20b47726142f7a20c7cd?s=128&d=identicon&r=PG", "display_name": "ngw", "link": "https://stackoverflow.com/users/1584736/ngw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1593536426, "creation_date": 1575463092, "question_id": 59176256, "link": "https://stackoverflow.com/questions/59176256/unexpected-behaviour-with-faradayconnectionfailed", "title": "Unexpected behaviour with Faraday::ConnectionFailed", "body": "<p>I'm writing a client for an API that rescue from <code>Faraday::ConnectionFailed</code> and <code>Faraday::TimeoutError</code> to retry the same method <code>MAX_RETRIES</code> times.</p>\n\n<p>This is the main method involved:</p>\n\n<pre><code>def benchmark_request(path)\n  retries ||= 0\n  request_start_time = Process.clock_gettime(Process::CLOCK_MONOTONIC)\n\n  response = yield\n\n  total_request_seconds = (Process.clock_gettime(Process::CLOCK_MONOTONIC) - request_start_time)\n  Rails.logger.info \"client request took (#{total_request_seconds}s): #{ENV['API_PATH_PREFIX']}#{path}\"\n\n  response\nrescue Faraday::ConnectionFailed, Faraday::TimeoutError =&gt; e\n  retries += 1\n  retry if retries &lt;= MAX_RETRIES\nend\n</code></pre>\n\n<p>the method calling that is:</p>\n\n<pre><code> def get(path, params = {})\n   benchmark_request(path) { token.get(\"#{ENV['API_PATH_PREFIX']}#{path}\", params) }\n end\n</code></pre>\n\n<p><code>token.get</code> comes from the <code>oauth2</code> gem which is using <code>Faraday</code></p>\n\n<p>Here's the fun bit.\nI wrote 2 specs, 1 for each exception I want to handle.</p>\n\n<pre><code>context 'when the endpoint raises a ConnectionFailed' do\n  let(:token_expires_at) { 1.hour.from_now.to_i }\n  let(:response_body) { '' }\n  let(:response_status) { 200 }\n\n  before do\n    allow(token).to receive(:get).and_raise(Faraday::ConnectionFailed)\n    described_class.get(api_endpoint)\n  end\n\n  it 'is called MAX_RETRIES times' do\n    expect(token).to have_received(:get).exactly(3).times\n  end\nend\n\ncontext 'when the endpoint raises a TimeoutError' do\n  let(:token_expires_at) { 1.hour.from_now.to_i }\n  let(:response_body) { '' }\n  let(:response_status) { 200 }\n\n  before do\n    allow(token).to receive(:get).and_raise(Faraday::TimeoutError)\n    described_class.get(api_endpoint)\n  end\n\n  it 'is called MAX_RETRIES times' do\n    expect(token).to have_received(:get).exactly(3).times\n  end\nend\n</code></pre>\n\n<p>The test testing <code>ConnectionFailed</code> fails, the test testing <code>TimeoutError</code> is green.\nThe exception raised is:</p>\n\n<pre><code>1) Client::Base.get when the endpoint raises a ConnectionFailed is called MAX_RETRIES times\n Failure/Error: token.get(path, params)\n\n ArgumentError:\n   wrong number of arguments (given 0, expected 1..2)\n # /home/ngw/.rvm/gems/ruby-2.6.2/gems/faraday-0.15.4/lib/faraday/error.rb:7:in `initialize'\n # ./app/lib/client/base.rb:13:in `get'\n # ./spec/lib/client/base_spec.rb:111:in `block (4 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Which apparently is about how the Exception is initialized.</p>\n\n<p>Does anybody have any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 6, "last_activity_date": 1575464571, "creation_date": 1575464571, "answer_id": 59176694, "question_id": 59176039, "link": "https://stackoverflow.com/questions/59176039/rspec-requires-me-to-print-object-before-test-can-pass/59176694#59176694", "title": "RSpec requires me to print object before test can pass", "body": "<p><code>intro_hp</code> is not instantiated in the first case, because <code>let</code> is lazy - instantiates objects only when it's used.</p>\n\n<p>You can use <code>let!</code> to instantiate the object instantly:</p>\n\n<pre><code>RSpec.describe HealthProfile, type: :model do\n    let(:client) { create(:client) }\n    let!(:intro_hp) { create(:health_profile, :no_callbacks, :with_issues, client_id: client.id)}\n</code></pre>\n\n<p>On related note - you don't have to print it, you could just use it: </p>\n\n<pre><code>        it \"diabetes is required in exit if present in intro\" do\n            intro_hp\n            exit_hp = build(:health_profile, :end, :no_callbacks, client_id: client.id)\n            exit_hp.valid?\n\n            expect(exit_hp.errors.keys).to include(:diabetic)\n\n        end\n</code></pre>\n"}], "owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 59176694, "answer_count": 1, "score": 1, "last_activity_date": 1575464590, "creation_date": 1575462313, "last_edit_date": 1575464590, "question_id": 59176039, "link": "https://stackoverflow.com/questions/59176039/rspec-requires-me-to-print-object-before-test-can-pass", "title": "RSpec requires me to print object before test can pass", "body": "<p>I have a simple model test where I am testing my validations and for some reason I need to print the object before my test can pass.</p>\n\n<p>The following test fails (failed output shown below):</p>\n\n<pre><code>RSpec.describe HealthProfile, type: :model do\n    let(:client) { create(:client) }\n    let(:intro_hp) { create(:health_profile, :no_callbacks, :with_issues, client_id: client.id)}\n\n    describe \"should validate that\" do\n\n        it \"diabetes is required in exit if present in intro\" do\n            exit_hp = build(:health_profile, :end, :no_callbacks, client_id: client.id)\n            exit_hp.valid?\n\n            expect(exit_hp.errors.keys).to include(:diabetic)\n\n        end\n\n    end\nend\n\nFailures:\n\n  1) HealthProfile should validate that diabetes is required in exit if present in intro\n     Failure/Error: expect(exit_hp.errors.keys).to include(:diabetic)\n\n       expected [:weight_mindset_one, :weight_mindset_two, :weight_mindset_three] to include :diabetic\n       Diff:\n       @@ -1,2 +1,2 @@\n       -[:diabetic]\n       +[:weight_mindset_one, :weight_mindset_two, :weight_mindset_three]\n\n     # ./spec/models/health_profile_spec.rb:14:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>After adding a print statement, <code>p intro_hp</code>, the same test passes:</p>\n\n<pre><code>RSpec.describe HealthProfile, type: :model do\n    let(:client) { create(:client) }\n    let(:intro_hp) { create(:health_profile, :no_callbacks, :with_issues, client_id: client.id)}\n\n    describe \"should validate that\" do\n\n        it \"diabetes is required in exit if present in intro\" do\n            exit_hp = build(:health_profile, :end, :no_callbacks, client_id: client.id)\n            p intro_hp\n            exit_hp.valid?\n\n            expect(exit_hp.errors.keys).to include(:diabetic)\n\n        end\n\n    end\nend\n</code></pre>\n\n<p>Why is this occurring and how can I avoid it?</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1575461515, "creation_date": 1575461515, "answer_id": 59175777, "question_id": 59175144, "link": "https://stackoverflow.com/questions/59175144/how-to-create-text-text-node-in-nokogiri/59175777#59175777", "title": "How to create &lt;text&gt;...&lt;/text&gt; node in Nokogiri?", "body": "<p>From the <a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Builder#label-Special+Tags\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>The builder works by taking advantage of method_missing. Unfortunately some methods are defined in ruby that are difficult or dangerous to remove. You may want to create tags with the name \u201ctype\u201d, \u201cclass\u201d, and \u201cid\u201d for example. In that case, you can use an underscore to disambiguate your tag name from the method call.</p>\n</blockquote>\n\n<p>Appending an underscore also works for \u201ctext\u201d, i.e. use <code>text_</code> instead:</p>\n\n<pre><code>builder = Nokogiri::XML::Builder.new(:encoding =&gt; 'UTF-8') do |xml|\n  xml.job {\n    xml.text_ {\n      xml.cdata 'foo bar baz'\n    }\n  }\nend\n\nputs builder.to_xml\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;job&gt;\n  &lt;text&gt;&lt;![CDATA[foo bar baz]]&gt;&lt;/text&gt;\n&lt;/job&gt;\n</code></pre>\n"}], "owner": {"reputation": 877, "user_id": 1136228, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/35886302d2b1902a6d8ae9c43408c45e?s=128&d=identicon&r=PG", "display_name": "user1136228", "link": "https://stackoverflow.com/users/1136228/user1136228"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 59175777, "answer_count": 1, "score": 3, "last_activity_date": 1575461774, "creation_date": 1575459468, "last_edit_date": 1575461774, "question_id": 59175144, "link": "https://stackoverflow.com/questions/59175144/how-to-create-text-text-node-in-nokogiri", "title": "How to create &lt;text&gt;...&lt;/text&gt; node in Nokogiri?", "body": "<p>I need to form such xml:</p>\n\n<pre><code>&lt;jobs&gt;\n  &lt;job&gt;\n    &lt;title&gt;&lt;![CDATA[cleaner]]&gt;&lt;/title&gt;\n    &lt;description&gt;&lt;![CDATA[cleaner in af]]&gt;&lt;/description&gt;\n    &lt;text&gt;&lt;![CDATA[cleaner weekly in af]]&gt;&lt;/text&gt;\n    &lt;referencenumber&gt;&lt;![CDATA[518]]&gt;&lt;/referencenumber&gt;\n    &lt;company&gt;&lt;![CDATA[we q.]]&gt;&lt;/company&gt;\n    &lt;country_code&gt;&lt;![CDATA[NL]]&gt;&lt;/country_code&gt;\n    &lt;city&gt;&lt;![CDATA[af]]&gt;&lt;/city&gt;\n    &lt;url&gt;&lt;![CDATA[url]]&gt;&lt;/url&gt;\n  &lt;/job&gt;\n&lt;/jobs&gt;\n</code></pre>\n\n<pre><code>builder = Nokogiri::XML::Builder.new(:encoding =&gt; 'UTF-8') do |xml|\n      xml.jobs {\n        data.each do |data|\n          xml.job {\n            xml.title {\n              xml.cdata \"...\"\n            }\n            xml.text {\n              xml.cdata \"...\"\n        }\n    end\n   }\n end\n</code></pre>\n\n<p>The above isn't working because <code>text</code> is an existing method on builder.</p>\n\n<p>How do I create a <code>&lt;text&gt;...&lt;/text&gt;</code> node?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575457687, "post_id": 59173659, "comment_id": 104570996, "body": "Are you trying to start a 2nd instance of rails before killing the first one?"}, {"owner": {"reputation": 1812, "user_id": 1460529, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e4cce5ad8a861052b4983152faca902b?s=128&d=identicon&r=PG", "display_name": "Dario Rusignuolo", "link": "https://stackoverflow.com/users/1460529/dario-rusignuolo"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575459070, "post_id": 59173659, "comment_id": 104571672, "body": "it should first kill the old one and then starts a new one.  <code>echo &quot;kill&quot; &amp;&amp; sudo kill -9 $(sudo lsof -t -i:3000) &amp;&amp; echo &quot;start&quot; &amp;&amp; rails s &amp;</code> but I guess the problem is not there. it&#39;s a ruby version prolem. the same script works if executed manually while logged as ssh."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1575459426, "post_id": 59173659, "comment_id": 104571863, "body": "I think setting <code>PATH</code> in your script is part of the problem."}, {"owner": {"reputation": 1812, "user_id": 1460529, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e4cce5ad8a861052b4983152faca902b?s=128&d=identicon&r=PG", "display_name": "Dario Rusignuolo", "link": "https://stackoverflow.com/users/1460529/dario-rusignuolo"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575459814, "post_id": 59173659, "comment_id": 104572067, "body": "yes. see PATH output."}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 1460529, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e4cce5ad8a861052b4983152faca902b?s=128&d=identicon&r=PG", "display_name": "Dario Rusignuolo", "link": "https://stackoverflow.com/users/1460529/dario-rusignuolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575462172, "creation_date": 1575462172, "answer_id": 59175990, "question_id": 59173659, "link": "https://stackoverflow.com/questions/59173659/start-rails-from-init-d-service-script-and-loads-the-correct-version-of-ruby/59175990#59175990", "title": "start rails from init.d service script and loads the correct version of ruby", "body": "<p>It works after setting the right paths to the right variables (using <code>2.6.5</code> ruby version)</p>\n\n<pre><code>export PATH=/home/ubuntu/.rvm/gems/ruby-2.6.5/bin:/usr/share/rvm/bin:$PATH\nexport GEM_PATH=/home/ubuntu/.rvm/gems/ruby-2.6.5:/home/ubuntu/.rvm/gems/ruby-2.6.5@global:$GEM_PATH\nsource .bash_profile\nsource ~/.rvm/scripts/rvm\n</code></pre>\n"}], "owner": {"reputation": 1812, "user_id": 1460529, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e4cce5ad8a861052b4983152faca902b?s=128&d=identicon&r=PG", "display_name": "Dario Rusignuolo", "link": "https://stackoverflow.com/users/1460529/dario-rusignuolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575462172, "creation_date": 1575454625, "last_edit_date": 1575459791, "question_id": 59173659, "link": "https://stackoverflow.com/questions/59173659/start-rails-from-init-d-service-script-and-loads-the-correct-version-of-ruby", "title": "start rails from init.d service script and loads the correct version of ruby", "body": "<p>I want to start <code>rails</code> server in production mode after installing, migrating and running some scripts in order for this script to be attached as pipeline deploy script.</p>\n\n<p><strong>The problem is that the same script doesn't work as service mode.</strong></p>\n\n<p><code>ubuntu@ip-x-y-z-w:~/backend.rails.com$ sudo vim /etc/init.d/rails-start-backend</code></p>\n\n<pre><code>#! /bin/sh\n# Start/stop the rails server daemon.\n#\n### BEGIN INIT INFO\n# Provides:          rails server start\n# Required-Start:    $remote_fs $syslog\n# Required-Stop:     $remote_fs $syslog\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start daemon at boot time\n# Description:       Enable service provided by daemon.\n### END INIT INFO\n\nPATH=/bin:/usr/bin:/sbin:/usr/sbin\nDESC=\"rails daemon\"\nNAME=rails\nDAEMON=/home/ubuntu/backend.rails.com/gitlab-ci.sh\nPIDFILE=/var/run/rails.pid\n\ntest -f $DAEMON || exit 0\n\n. /lib/lsb/init-functions\n\n\ncase \"$1\" in\n\nstart)\n        log_daemon_msg \"Starting rails\"\n        /home/ubuntu/backend.rails.com/gitlab-ci.sh &gt; /home/ubuntu/backend.rails.com/log/start_script.log\n        start_daemon -p $PIDFILE $DAEMON $EXTRA_OPTS\n        log_end_msg $?\n        ;;\nstop)   log_daemon_msg \"Stopping rails\" \"rails\"\n        sudo kill -9 $(sudo lsof -t -i:3000)\n        killproc -p $PIDFILE $DAEMON\n        RETVAL=$?\n        [ $RETVAL -eq 0 ] &amp;&amp; [ -e \"$PIDFILE\" ] &amp;&amp; rm -f $PIDFILE\n        log_end_msg $RETVAL\n        ;;\n\nrestart) log_daemon_msg \"Restarting \" \"rails\"\n        $0 stop\n        $0 start\n        ;;\nreload|force-reload) log_daemon_msg \"Reloading rails\" \"rails\"\n        # rails reloads automatically\n        log_end_msg 0\n        ;;\n*)      log_action_msg \"Usage: /etc/init.d/rails {start|stop|status|restart|reload|force-reload}\"\n        exit 2\n        ;;\nesac\nexit 0 \n</code></pre>\n\n<p>and thats my <code>gitlab-ci.sh</code> script </p>\n\n<pre><code>cd /home/ubuntu/backend.rails.com\nsudo chmod +x gitlab-ci.sh \nrm config/master.key\nrm config/credentials.yml.enc\necho \"credentials\"\nRAILS_ENV=production EDITOR=\"mate --wait\" rails credentials:edit\nexport RAILS_ENV=production \nexport FRONTEND_BASE_URL=https://www.rails.com \necho \"bundle install\"\nbundle install\necho \"rails db:migrate\"\nbundle exec rails db:migrate\necho \"rails rake application:initialize\"\nbundle exec rake application:initialize\necho \"kill\"\nsudo kill -9 $(sudo lsof -t -i:3000)\necho \"start\"\nrails s &amp;\n</code></pre>\n\n<p>The problem comes when I restarted the <code>sudo service rails-start-backend restart</code> service. It seems that in that context, all bundle, rails and ruby versions and settings are not the same as when I execute the same script manually in ssh.</p>\n\n<p>The errors I get are:</p>\n\n<pre><code>/usr/bin/env: \u2018ruby_executable_hooks2.6\u2019: No such file or directory\nbundle: not found\n</code></pre>\n\n<p>here's my PATH when ssh-logged</p>\n\n<pre><code>/home/ubuntu/.rvm/gems/ruby-2.6.5/bin:/home/ubuntu/.rvm/gems/ruby-2.6.5@global/bin:/usr/share/rvm/rubies/ruby-2.6.5/bin:/usr/share/rvm/bin:/home/ubuntu/bin:/home/ubuntu/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\n</code></pre>\n\n<p>and then when the script is executed as service</p>\n\n<pre><code>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1771, "user_id": 574472, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/65dac0b7ff4f99ad06aeb77f2fe6ed23?s=128&d=identicon&r=PG", "display_name": "Sahil Grover", "link": "https://stackoverflow.com/users/574472/sahil-grover"}, "edited": false, "score": 1, "creation_date": 1575454345, "post_id": 59173323, "comment_id": 104569173, "body": "a bit more of code will help"}, {"owner": {"reputation": 1042, "user_id": 3432885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b79facf0b58be9c24a40603a295c8d?s=128&d=identicon&r=PG&f=1", "display_name": "n0rm", "link": "https://stackoverflow.com/users/3432885/n0rm"}, "reply_to_user": {"reputation": 1771, "user_id": 574472, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/65dac0b7ff4f99ad06aeb77f2fe6ed23?s=128&d=identicon&r=PG", "display_name": "Sahil Grover", "link": "https://stackoverflow.com/users/574472/sahil-grover"}, "edited": false, "score": 0, "creation_date": 1575458977, "post_id": 59173323, "comment_id": 104571623, "body": "That&#39;s the only code there is. A CSV file is on the server and is being send with the code above. On rails 5 this was working properly. I updated to 6.0 and this problem came up."}], "owner": {"reputation": 1042, "user_id": 3432885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b79facf0b58be9c24a40603a295c8d?s=128&d=identicon&r=PG&f=1", "display_name": "n0rm", "link": "https://stackoverflow.com/users/3432885/n0rm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1575453627, "creation_date": 1575453627, "question_id": 59173323, "link": "https://stackoverflow.com/questions/59173323/using-send-file-weird-file-naming", "title": "Using send_file weird file naming", "body": "<p>Rails: V6.0.0</p>\n\n<p>I'm using <code>send_file</code> to send a file from the server to the client. Filename on the server is correct and send accordingly.</p>\n\n<p>Code:</p>\n\n<pre><code>send_file service.file_path, filename: \"test.csv\", type: \"text/csv\", disposition: \"attachment\"\n</code></pre>\n\n<p>When it arrives on the client the filename has completely changed to: </p>\n\n<pre><code>test.csv_; filename_=UTF-8''test.cs\n</code></pre>\n\n<p>Anyone has an idea why this happens? Or what I am doing wrong.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1575447995, "post_id": 59171411, "comment_id": 104565736, "body": "IDK but if it&#39;s not documented (<a href=\"https://ruby-doc.org/core-2.5.0/Struct.html#method-i-to_a\" rel=\"nofollow noreferrer\">`Struct#to_a</a>) then probably it&#39;s not worth relying on the order. Why do you need this? Maybe we can suggest a better way."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1575450058, "post_id": 59171411, "comment_id": 104566745, "body": "As far as I know, a) attributes are held in a <code>RHASH_TBL</code>; b) <code>RHASH_TBL</code> is the structure that backs Ruby <code>Hash</code>; c) <code>Hash</code> iterates keys in insertion order; d) <code>Struct</code> initialises attributes in the order specified in the constructor arguments. One might want to re-check my premises, but I conclude there is a basis to be confident about your conclusion. But I agree that a better way might make sense, as most of the above is undocumented."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1575450272, "post_id": 59171411, "comment_id": 104566864, "body": "If you examine the doc for <a href=\"https://ruby-doc.org/core-2.5.0/Struct.html#method-i-values_at\" rel=\"nofollow noreferrer\">Struct#values_at</a> you\u2018ll see that <code>s.values_at(0,1,2) #=&gt; [1,2,3]</code>. I therefore believe that <code>to_a</code> will return the same array, though that is not documented. You could of course use <code>values_at</code> in place of <code>to_a</code>."}, {"owner": {"reputation": 11, "user_id": 1369228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90573bea62cfa492883b8c758d6071eb?s=128&d=identicon&r=PG", "display_name": "bravejohnny", "link": "https://stackoverflow.com/users/1369228/bravejohnny"}, "edited": false, "score": 0, "creation_date": 1575454807, "post_id": 59171411, "comment_id": 104569448, "body": "Thank you. What I actually want to do is to generate a CSV using <code>Struct</code> with <code>keyword_init</code>, just like: <code>csv_obj &lt;&lt; MYSTRUCT.new(date: Date.today, user_id: 2, amount: 200).to_a</code>. The values must be written in the specific order (<code>date</code>, <code>user_id</code>, and <code>amount</code>). Maybe should take another way because that is undocumented behavior?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1575460172, "post_id": 59171411, "comment_id": 104572267, "body": "@bravejohnny <i>&quot;What I actually want to do is to generate a CSV&quot;</i> \u2013 Ruby comes with a <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\"><code>CSV</code></a> class. It might already do what you are looking for."}, {"owner": {"reputation": 11, "user_id": 1369228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90573bea62cfa492883b8c758d6071eb?s=128&d=identicon&r=PG", "display_name": "bravejohnny", "link": "https://stackoverflow.com/users/1369228/bravejohnny"}, "edited": false, "score": 0, "creation_date": 1575463254, "post_id": 59171411, "comment_id": 104573907, "body": "Yes, I&#39;m using CSV class, and looking for a better way to push data to a CSV object."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1575597959, "post_id": 59171411, "comment_id": 104629526, "body": "As @CarySwoveland says, I&#39;m almost 100% certain <code>to_a</code> is fine. In fact, you don&#39;t even need it: <code>CSV.generate { |csv| csv &lt;&lt; S.members &lt;&lt; s }</code> does exactly what you intended.."}], "owner": {"reputation": 11, "user_id": 1369228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90573bea62cfa492883b8c758d6071eb?s=128&d=identicon&r=PG", "display_name": "bravejohnny", "link": "https://stackoverflow.com/users/1369228/bravejohnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575464060, "creation_date": 1575446545, "last_edit_date": 1575446788, "question_id": 59171411, "link": "https://stackoverflow.com/questions/59171411/the-order-of-array-elements-when-calling-to-a-of-struct-object-in-ruby", "title": "The order of array elements when calling .to_a of Struct object in Ruby", "body": "<p><code>.to_a</code> of Struct object returns an array of its attribute values.\nHow are the array elements ordered?\nIt seems to be the definition order of attributes when running <code>Struct.new</code>, but I don't have much confidence.</p>\n\n<pre><code>S = Struct.new :foo, :bar, :baz\n# =&gt; S\ns = S.new 1, 2, 3\n#\u00a0=&gt; #&lt;struct S foo=1, bar=2, baz=3&gt;\ns.to_a\n# =&gt; [1, 2, 3]\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "bundler", "aws-opsworks"], "comments": [{"owner": {"reputation": 124, "user_id": 6708657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffe34f136c0e2a6a18dd17783595aba1?s=128&d=identicon&r=PG&f=1", "display_name": "darkash", "link": "https://stackoverflow.com/users/6708657/darkash"}, "edited": false, "score": 0, "creation_date": 1575635944, "post_id": 59170159, "comment_id": 104642895, "body": "not sure about how opsworks do as I never used it, but if you can install new version of bundler, then why not append it to the searchable path before requiring it? if it&#39;s the executable, then add it to PATH variable"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575986658, "post_id": 59170159, "comment_id": 104745197, "body": "What does <code>head -1 `which bundle`</code> return?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575986816, "post_id": 59170159, "comment_id": 104745286, "body": "Also why not just delete <code>&#47;usr&#47;local&#47;bin&#47;bundle</code>?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1575989833, "post_id": 59170159, "comment_id": 104747191, "body": "And even better, why not uninstall the original bundler first, and then reinstall? I think this warning is by design; it is telling you the new bundle binary will not be compatible with the old bundle gem. Hence you need to delete the old gem before installing the new one."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1575990639, "post_id": 59170159, "comment_id": 104747652, "body": "Btw. if you are afraid of deleting <code>&#47;usr&#47;local&#47;bin&#47;bundle</code>, just rename it to something else, like <code>bundle_old</code>. That way you can test and see if it works before committing."}, {"owner": {"reputation": 1269, "user_id": 6904782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mdx8R.png?s=128&g=1", "display_name": "Nijeesh Joshy", "link": "https://stackoverflow.com/users/6904782/nijeesh-joshy"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1576070233, "post_id": 59170159, "comment_id": 104778549, "body": "Thanks @Casper, but i do have the ssh access and i can directly go an manually install the bundler with out any problem. My problem is i have to do it via chef.  because when the server gets autoscaled i want the same behavior on the newly spun server too. i cannot just ssh into all the instances and manually install the bundler. That defeats the purpose of using opsworks in the firstplace."}], "owner": {"reputation": 1269, "user_id": 6904782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mdx8R.png?s=128&g=1", "display_name": "Nijeesh Joshy", "link": "https://stackoverflow.com/users/6904782/nijeesh-joshy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1576070525, "creation_date": 1575441214, "last_edit_date": 1576070525, "question_id": 59170159, "link": "https://stackoverflow.com/questions/59170159/how-to-upgrade-ruby-bundle-version-in-aws-opsworks", "title": "How to upgrade Ruby Bundle version in AWS Opsworks", "body": "<p>I have a project running on AWS Opsworks, which has current bundler version of <strong><em>1.5.3</em></strong> on <strong><em>Ruby 2.2.2</em></strong>.</p>\n\n<p>i want to upgrade the bundle version to <strong><em>1.17.3</em></strong> </p>\n\n<p>but when i try to do it i am getting this error</p>\n\n<pre><code>Mixlib::ShellOut::ShellCommandFailed\n------------------------------------\nExpected process to exit with [0], but received '1'\n---- Begin output of /usr/local/bin/gem install bundler -q --no-rdoc --no-ri -v \"1.11.2\" ----\nSTDOUT: \nSTDERR: ERROR:  Error installing bundler:\n\"bundle\" from bundler conflicts with /usr/local/bin/bundle\n---- End output of /usr/local/bin/gem install bundler -q --no-rdoc --no-ri -v \"1.11.2\" ----\nRan /usr/local/bin/gem install bundler -q --no-rdoc --no-ri -v \"1.11.2\" returned 1\n\n\nResource Declaration:\n---------------------\n# In /var/lib/aws/opsworks/cache.stage2/cookbooks/opsworks_bundler/recipes/default.rb\n\n2:   gem_package \"Installing Bundler #{node[:opsworks_bundler][:version]}\" do\n3:     gem_binary node[:dependencies][:gem_binary]\n4:     retries 2\n5:     package_name \"bundler\"\n6:     action :install\n7:     version node[:opsworks_bundler][:version]\n8:     if Gem::Version.new(node[:opsworks_rubygems][:version]) &gt; Gem::Version.new(\"2.6.14\")\n9:       options \"--force\"\n10:     end\n11:   end\n\n\n\nCompiled Resource:\n------------------\n# Declared in /var/lib/aws/opsworks/cache.stage2/cookbooks/opsworks_bundler/recipes/default.rb:2:in `from_file'\n\ngem_package(\"Installing Bundler 1.11.2\") do\nprovider Chef::Provider::Package::Rubygems\naction [:install]\nretries 0\nretry_delay 2\npackage_name \"bundler\"\nversion \"1.11.2\"\ncookbook_name \"opsworks_bundler\"\nrecipe_name \"default\"\ngem_binary \"/usr/local/bin/gem\"\nend\n\n\n\n[2019-12-04T04:42:03+00:00] INFO: Running queued delayed notifications before re-raising exception\n[2019-12-04T04:42:03+00:00] ERROR: Running exception handlers\n[2019-12-04T04:42:03+00:00] ERROR: Exception handlers complete\n[2019-12-04T04:42:03+00:00] FATAL: Stacktrace dumped to /var/lib/aws/opsworks/cache.stage2/chef-stacktrace.out\n[2019-12-04T04:42:03+00:00] ERROR: gem_package[Installing Bundler 1.11.2] (opsworks_bundler::default line 2) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'\n---- Begin output of /usr/local/bin/gem install bundler -q --no-rdoc --no-ri -v \"1.11.2\" ----\nSTDOUT: \nSTDERR: ERROR:  Error installing bundler:\n\"bundle\" from bundler conflicts with /usr/local/bin/bundle\n---- End output of /usr/local/bin/gem install bundler -q --no-rdoc --no-ri -v \"1.11.2\" ----\nRan /usr/local/bin/gem install bundler -q --no-rdoc --no-ri -v \"1.11.2\" returned 1\n[2019-12-04T04:42:03+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/eUaxe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eUaxe.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/yoVsf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yoVsf.png\" alt=\"enter image description here\"></a></p>\n\n<p>when i run <code>bundle -v</code> on the server i am getting bundler version as <strong>1.5.3.</strong> what ever i do i cannot change the bundle version from that.</p>\n\n<pre><code>root@hades:/srv/www/app_unicorn/current# which gem\n/usr/local/bin/gem\n\nroot@hades:/srv/www/app_unicorn/current# which ruby\n/usr/local/bin/ruby\n\nroot@hades:/srv/www/app_unicorn/current# which bundle\n/usr/local/bin/bundle\n\nroot@hades:/srv/www/app_unicorn/current# gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.2.2\n  - RUBY VERSION: 2.1.9 (2016-03-30 patchlevel 490) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.1.0\n  - RUBY EXECUTABLE: /usr/local/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/bin\n  - SPEC CACHE DIRECTORY: /root/.gem/specs\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /usr/local/lib/ruby/gems/2.1.0\n     - /root/.gem/ruby/2.1.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n\nroot@hades:/srv/www/app_unicorn/current# bundle env\nBundler 1.5.3\nRuby 2.1.9 (2016-03-30 patchlevel 490) [x86_64-linux]\nRubygems 2.2.2\nGEM_HOME\n\nBundler settings\n  path\n    Set for your local app (/srv/www/app_unicorn/releases/20061825/.bundle/config): \"/home/deploy/.bundler/app_unicorn\"\n  without\n    Set for your local app (/srv/www/app_unicorn/releases/20061825/.bundle/config): \"test:development\"\n  disable_shared_gems\n    Set for your local app (/srv/www/app_unicorn/releases/20061825/.bundle/config): \"1\"\n</code></pre>\n\n<p>someone asked me to look into this issue. but i dont know what to do with this <a href=\"https://github.com/chef/chef-dk/issues/536\" rel=\"nofollow noreferrer\">https://github.com/chef/chef-dk/issues/536</a></p>\n\n<p>how to add configuration in either the chef recipe  or anywhere else to update the bundle version ?</p>\n\n<p>my cook book :- <a href=\"https://gist.github.com/nijeeshjoshy/90ef2dfc693c869205bad589ef1b0e23\" rel=\"nofollow noreferrer\">https://gist.github.com/nijeeshjoshy/90ef2dfc693c869205bad589ef1b0e23</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/jz8La.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jz8La.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>I have ssh access and i can manually reinstall bunder without any\n  issues. but i have to do it via chef. If i do it manually every time\n  it defeats the purpose of using opsworks</p>\n</blockquote>\n"}, {"tags": ["ruby", "gtk2", "ruby-gnome2"], "owner": {"reputation": 953, "user_id": 2733453, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/1108602033/picture?type=large", "display_name": "Rahul Vijay Dawda", "link": "https://stackoverflow.com/users/2733453/rahul-vijay-dawda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575437927, "creation_date": 1575437927, "question_id": 59169554, "link": "https://stackoverflow.com/questions/59169554/adding-a-custom-background-color-to-button-in-gtk2-ruby-gives-it-an-orangish-bor", "title": "Adding a custom background color to button in Gtk2/Ruby gives it an orangish border", "body": "<p>I'm trying to do some really basic UI stuff where I need to set a specific color as a background of a button. I'm working with Gtk2/Ruby and here some sample using which I'm seeing the issue on Windows 10.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'gtk2'\n\n# Creates the main window.\n@window = Gtk::Window.new\n\n# You should always remember to connect the delete_event signal\n# to the main window. This is very important for proper intuitive\n# behavior.\n@window.signal_connect(\"delete_event\") do\n  Gtk::main_quit\n  false\nend\n@window.border_width = 10\n\n# Create a button\n@button = Gtk::Button.new(\"Test\")\n\n# Set the colors to test\n@button.modify_bg(Gtk::STATE_NORMAL, Gdk::Color.parse(\"#049678\"))\n@button.modify_bg(Gtk::STATE_PRELIGHT, Gdk::Color.parse(\"blue\"))\n@button.modify_bg(Gtk::STATE_ACTIVE, Gdk::Color.parse(\"yellow\"))\n\n@window.add(@button)\n\n# Display all widgets.\n@window.show_all\n\n# As usual, we finish by entering the main loop, with Gtk.main.\nGtk.main\n</code></pre>\n\n<p>And this is the result. See the orange tinge that appears at the borders of the button. I figured that using the standard green color does not have this problem.</p>\n\n<p><a href=\"https://i.stack.imgur.com/revsa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/revsa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any idea how I can get rid of the orange color on the border?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "puma-dev"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1575448015, "post_id": 59169353, "comment_id": 104565748, "body": "Creating it as a separate image and listing it as a dependency on the Rails app container should be fine. Unless that&#39;s not what you&#39;re asking?"}, {"owner": {"reputation": 470, "user_id": 9606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e08f711c246aef8f24cf90bf273546?s=128&d=identicon&r=PG&f=1", "display_name": "ActiveModel_Dirty", "link": "https://stackoverflow.com/users/9606113/activemodel-dirty"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1575468043, "post_id": 59169353, "comment_id": 104576698, "body": "Cool, thanks. It is what I&#39;m asking. Basically I got to a point with the implementation and I have some debugging to do, but was unsure if that method would work for me and wanted to verify before spending hours troubleshooting. I know small amounts about both networking and Docker so I wasn&#39;t sure if there was some underlying limitation of either puma-dev or docker that would invalidate my approach."}, {"owner": {"reputation": 2088, "user_id": 42486, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/44b9d03142bc8203ed9f35cfef9db257?s=128&d=identicon&r=PG", "display_name": "Clinton", "link": "https://stackoverflow.com/users/42486/clinton"}, "edited": false, "score": 0, "creation_date": 1587416325, "post_id": 59169353, "comment_id": 108499328, "body": "I&#39;m digging into this now, were you able to find a solution? For our use-case, we have a Rails app running locally with puma-dev and it works fine. I&#39;m containerizing the Rails app but want to change our existing workflow as little as possible, so I&#39;m trying to get puma-dev on the host machine to use the proxied port to the container."}, {"owner": {"reputation": 470, "user_id": 9606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e08f711c246aef8f24cf90bf273546?s=128&d=identicon&r=PG&f=1", "display_name": "ActiveModel_Dirty", "link": "https://stackoverflow.com/users/9606113/activemodel-dirty"}, "reply_to_user": {"reputation": 2088, "user_id": 42486, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/44b9d03142bc8203ed9f35cfef9db257?s=128&d=identicon&r=PG", "display_name": "Clinton", "link": "https://stackoverflow.com/users/42486/clinton"}, "edited": false, "score": 0, "creation_date": 1587617514, "post_id": 59169353, "comment_id": 108582536, "body": "@Clinton I wasn&#39;t able to get it working correctly. I wound up just modifying my <code>&#47;etc&#47;hosts</code> to get us to a usable state for our needs. Wish I could provide you with some more detail but to be honest, this was a while ago now so most of the details have escaped me."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 1126075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbf73d70984ea76fc001836032950de?s=128&d=identicon&r=PG", "display_name": "Toni Oriol", "link": "https://stackoverflow.com/users/1126075/toni-oriol"}, "is_accepted": false, "score": 0, "last_activity_date": 1605262654, "creation_date": 1605262654, "answer_id": 64819139, "question_id": 59169353, "link": "https://stackoverflow.com/questions/59169353/how-can-i-use-puma-dev-in-a-local-docker-environment/64819139#64819139", "title": "How can I use puma-dev in a local docker environment?", "body": "<p>You can use puma-dev proxy feature <a href=\"https://github.com/puma/puma-dev#proxy-support\" rel=\"nofollow noreferrer\">https://github.com/puma/puma-dev#proxy-support</a></p>\n<p>Run rails server in the rails docker image and expose the port 3000, then in your host machine set a proxy for localhost:3000 with this command:</p>\n<pre><code>echo '3000' &gt; ~/.puma-dev/myapp\n</code></pre>\n"}], "owner": {"reputation": 470, "user_id": 9606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e08f711c246aef8f24cf90bf273546?s=128&d=identicon&r=PG&f=1", "display_name": "ActiveModel_Dirty", "link": "https://stackoverflow.com/users/9606113/activemodel-dirty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1605262654, "creation_date": 1575436587, "question_id": 59169353, "link": "https://stackoverflow.com/questions/59169353/how-can-i-use-puma-dev-in-a-local-docker-environment", "title": "How can I use puma-dev in a local docker environment?", "body": "<p>I\u2019m working with a legacy Rails application that requires the <code>puma-dev</code> tool in order to develop locally. The app needs to be able to resolve domains like <code>client-a.myapp.test</code> to localhost:3000. </p>\n\n<p>The problem is this app is so old that me and my team need to docker-ize it in order to have any hope of standing it up locally, due to various outdated components. </p>\n\n<p>The problem, continued, is that I can\u2019t just plop puma-dev into my docker container because Linux support for the tool is extremely lacking and highly unclear how to translate the instructions to a docker environment.  After struggling with that route for quite a while I decided to take another approach.</p>\n\n<p>Right now I\u2019ve created a separate docker image just for puma-dev from a golang image on dockerhub. I decided to try and run it in parallel with my other docker container, containing the ruby app, in hopes that they can work together (the ruby app serving on port 3000, with puma-dev listening), or with me ultimately listing it as a dependency in docker-compose for the ruby app and bundling them together. However, I\u2019m not sure if that makes any sense at all to do, or if it\u2019s at all a logically sound approach. </p>\n\n<p>I guess my question is, is it possible for me to do it this way? Or, better yet, how can I get puma-dev working with Docker?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1575421416, "post_id": 59167380, "comment_id": 104558499, "body": "Did you double check that all of your ENV variables are set?"}, {"owner": {"reputation": 5869, "user_id": 1448679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4efbb20b826ad4a24f9a46e83a3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Arun K", "link": "https://stackoverflow.com/users/1448679/arun-k"}, "edited": false, "score": 0, "creation_date": 1575421716, "post_id": 59167380, "comment_id": 104558551, "body": "You have to do, HTTP <code>put</code> request if you have chosen <code>put_object</code> when generating the pre-signed URL"}, {"owner": {"reputation": 528, "user_id": 2317064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/70412de210608ae70fe5e3770826d24e?s=128&d=identicon&r=PG", "display_name": "brownie3003", "link": "https://stackoverflow.com/users/2317064/brownie3003"}, "edited": false, "score": 0, "creation_date": 1575533581, "post_id": 59167380, "comment_id": 104600710, "body": "I tried put and patch, both gave error response"}], "owner": {"reputation": 528, "user_id": 2317064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/70412de210608ae70fe5e3770826d24e?s=128&d=identicon&r=PG", "display_name": "brownie3003", "link": "https://stackoverflow.com/users/2317064/brownie3003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1575533634, "creation_date": 1575419610, "last_edit_date": 1575533634, "question_id": 59167380, "link": "https://stackoverflow.com/questions/59167380/using-aws-sdk-s3-ruby-to-generate-a-presigned-url", "title": "Using aws-sdk-s3 ruby to generate a presigned url", "body": "<p>I'm trying to generate a presigned url for an s3 bucket using Ruby.</p>\n\n<pre><code>    client = Aws::S3::Client.new(\n      region:               'eu-west-1', #or any other region\n      access_key_id:        ENV['AWS_ACCESS_KEY_ID'],\n      secret_access_key:    ENV['AWS_SECRET_ACCESS_KEY']\n    )\n    @signer =  Aws::S3::Presigner.new(client: client)\n    @signer.presigned_url(\n      :put_object,\n      bucket: ENV['S3_PROFILES_BUCKET'],\n      key: \"test-#{SecureRandom.uuid}\"\n    )\n</code></pre>\n\n<p>I try and take the url that is returned from this, something like:</p>\n\n<pre><code>\"https://some-bucket.s3.eu-west-1.amazonaws.com/test-4ad40444-e907-4748-a025-a12515580450?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIATTSSBDQFDFFX36UU4%2F20191204%2Feu-west-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20191204T002242Z&amp;X-Amz-Expires=900&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=31b0a90127f43e79462713b101b5fc80146c50f800cfce31c493d206ea142333\"\n</code></pre>\n\n<p>When I try and make a POST (or PUT) request to this URL with an image binary (I'm using Postman) I get an error about the signature not being correct.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "parsing"], "comments": [{"owner": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "edited": false, "score": 0, "creation_date": 1575410648, "post_id": 59165909, "comment_id": 104555904, "body": "this should get you started <code>string.scan(&#47;[\\w\\s]+[:,]&#47;).inspect</code>"}], "answers": [{"tags": [], "owner": {"reputation": 312, "user_id": 7908764, "user_type": "registered", "profile_image": "https://graph.facebook.com/1563586593660033/picture?type=large", "display_name": "blazpie", "link": "https://stackoverflow.com/users/7908764/blazpie"}, "is_accepted": false, "score": 1, "last_activity_date": 1575416674, "last_edit_date": 1575416674, "creation_date": 1575413583, "answer_id": 59166611, "question_id": 59165909, "link": "https://stackoverflow.com/questions/59165909/parsing-a-string-list-with-multiple-values-into-json/59166611#59166611", "title": "Parsing a string list with multiple values into JSON", "body": "<p>elegantly:</p>\n\n<pre><code>result_hash = {}\n\nstring.scan(/(?&lt;key&gt;[\\w]+(?=:))|(?&lt;value&gt;[\\s\\w]+(?=(,|\\z)))/) do |key,value|\n  if key.present?\n    result_hash[key] = []\n    current_key = key\n  elsif value.present?\n    result_hash[current_key] &lt;&lt; value.strip\n  end\nend\n\n</code></pre>\n\n<p>then jsonize:</p>\n\n<pre><code>json = result_hash.to.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 4, "last_activity_date": 1575415006, "last_edit_date": 1575415006, "creation_date": 1575413662, "answer_id": 59166624, "question_id": 59165909, "link": "https://stackoverflow.com/questions/59165909/parsing-a-string-list-with-multiple-values-into-json/59166624#59166624", "title": "Parsing a string list with multiple values into JSON", "body": "<p>There are about a hundred ways to solve this. A pretty straightforward one is this:</p>\n\n<pre><code>str = \"something: this, this and that, that, other stuff, another: name, another name, last: here\"\n\nkey = nil\nstr.scan(/\\s*([^,:]+)(:)?\\s*/).each_with_object({}) do |(val, colon), hsh|\n  if colon\n    key = val.to_sym\n    hsh[key] = []\n  else\n    hsh[key] &lt;&lt; val\n  end\nend\n# =&gt; {\n#      something: [\"this\", \"this and that\", \"that\", \"other stuff\"], \n#      another: [\"name\", \"another name\"],\n#      last: [\"here\"]\n#    }\n</code></pre>\n\n<p>It works by scanning the string with the following regular expression:</p>\n\n<pre><code>/\n  \\s*      # any amount of optional whitespace\n  ([^,:]+) # one or more characters that aren't , or : (capture 1)\n  (:)?     # an optional trailing : (capture 2)\n  \\s*     # any amount of optional whitespace\n/x\n</code></pre>\n\n<p>Then it iterates over the matches and puts them into a hash. When a match has a trailing colon (capture 2), a new hash key is created with an empty array for a value. Otherwise the value (capture 1) is added to the array for the most recent key.</p>\n\n<h2>Or\u2026</h2>\n\n<p>A somewhat less straightforward but cleverer approach is to let the RegExp do more work:</p>\n\n<pre><code>MATCH_LIST_ENTRY = /([^:]+):\\s*((?:[^,]+(?:,\\s*|$))+?)(?=[^:,]+:|$)/\n\ndef parse_list2(str)\n  str.scan(MATCH_LIST_ENTRY).map do |k, vs|\n    [k.to_sym, vs.split(/,\\s*/)]\n  end.to_h\nend\n</code></pre>\n\n<p>I won't pick apart the RegExp for this one, but it's simpler than it looks. <a href=\"https://regexper.com/?#%28%5B%5E%3A%5D%2B%29%3A%5Cs*%28%28%3F%3A%5B%5E%2C%5D%2B%28%3F%3A%2C%5Cs*%7C%24%29%29%2B%3F%29%28%3F%3D%5B%5E%3A%2C%5D%2B%3A%7C%24%29\" rel=\"nofollow noreferrer\">Regexper does a pretty good job</a> of explaining it.</p>\n\n<p>You can see both of these in action on repl.it here: <a href=\"https://repl.it/@jrunning/LongtermMidnightblueAssembler\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/LongtermMidnightblueAssembler</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1575421816, "last_edit_date": 1575421816, "creation_date": 1575419564, "answer_id": 59167371, "question_id": 59165909, "link": "https://stackoverflow.com/questions/59165909/parsing-a-string-list-with-multiple-values-into-json/59167371#59167371", "title": "Parsing a string list with multiple values into JSON", "body": "<p>If <code>str</code> is the string given in the example, the desired hash can be constructed as follows.</p>\n\n<pre><code>str.split(/, *(?=\\p{L}+:)/).\n    each_with_object({}) do |s,h|\n      k, v = s.split(/: +/)\n      h[k.to_sym]= v.split(/, */)\n    end\n  #=&gt; {:something=&gt;[\"this\", \"this and that\", \"that\", \"other stuff\"],\n  #    :another=&gt;[\"name\", \"another name\"],\n  #    :last=&gt;[\"here\"]} \n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>str.split(/, *(?=\\p{L}+:)/)\n  #=&gt; [\"something: this, this and that, that, other stuff\",\n  #    \"another: name, another name\",\n  #    \"last: here\"] \n</code></pre>\n\n<p>This regular expression reads, \"match a comma followed by zero or more spaces, the match to be immediately followed by one or more Unicode letters followed by a colon, <code>(?=\\p{L}+:)</code> being a <em>positive lookahead</em>\".</p>\n"}], "owner": {"reputation": 37, "user_id": 8418056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYFjG.png?s=128&g=1", "display_name": "michael", "link": "https://stackoverflow.com/users/8418056/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 59166624, "answer_count": 3, "score": 2, "last_activity_date": 1575421816, "creation_date": 1575409894, "question_id": 59165909, "link": "https://stackoverflow.com/questions/59165909/parsing-a-string-list-with-multiple-values-into-json", "title": "Parsing a string list with multiple values into JSON", "body": "<p>I have about thirty thousand records with a string column that has been stored in the following format, with different keys:</p>\n\n<pre><code>\"something: this, this and that, that, other stuff, another: name, another name, last: here\"\n</code></pre>\n\n<p>In rails, I want to change it into a hash like</p>\n\n<pre><code>{\n    something: [ \"this\", \"this and that\", \"that\" ],\n    another: [ \"name\", \"another name\" ],\n    last: [ \"here\" ]   \n}\n</code></pre>\n\n<p>Is there a way to do this elegantly? I was thinking of splitting at the colon, then doing a reverse search of the first space.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "smtp", "mailgun"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1575425449, "post_id": 59165115, "comment_id": 104559345, "body": "<code>Rails.logger.info email_params[:reply_to]</code> and check your logs."}], "answers": [{"tags": [], "owner": {"reputation": 2269, "user_id": 1298553, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bfed2f6a921d93feb957ebf05f8ca7fb?s=128&d=identicon&r=PG", "display_name": "cgenco", "link": "https://stackoverflow.com/users/1298553/cgenco"}, "is_accepted": false, "score": 0, "last_activity_date": 1576707493, "creation_date": 1576707493, "answer_id": 59400737, "question_id": 59165115, "link": "https://stackoverflow.com/questions/59165115/smtp-550-messages-should-have-one-or-no-reply-to-headers-not-2-on-mailgun/59400737#59400737", "title": "&quot;smtp; 550 Messages should have one or no Reply-To headers, not 2&quot; on Mailgun", "body": "<p>Solved it! tl;dr: I needed to add quotes around the name of my email addresses.</p>\n\n<p>Instead of:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>default from: \"Robot@Fileinbox &lt;robot@finbox.com&gt;\",\n        reply_to: \"Christian@Fileinbox &lt;christian@finbox.com&gt;\"\n</code></pre>\n\n<p>I needed:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>default from: %(\"Robot@Fileinbox\" &lt;robot@finbox.com&gt;),\n  reply_to: %(\"Christian@Fileinbox\" &lt;christian@finbox.com&gt;)\n</code></pre>\n\n<hr>\n\n<p>Mailgun support said it was getting sent two <code>Reply-To</code> headers:</p>\n\n<pre><code>Reply-To: \"Christian@Fileinbox\" &lt;christian@finbox.com&gt;\n\nReply-To: Christian@Fileinbox &lt;christian@finbox.com&gt;\n</code></pre>\n\n<p>which is weird, because I was definitely only sending one (logging my <code>email_params[:reply_to]</code> just showed the one address). I think somewhere in the pipeline something got upset that the <code>Christian@Fileinbox</code> name part of the email and added an extra header with the quotes.</p>\n\n<p>Adding quotes and removing the email suppression in Mailgun fixed it! My user is getting emails again :D</p>\n"}], "owner": {"reputation": 2269, "user_id": 1298553, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bfed2f6a921d93feb957ebf05f8ca7fb?s=128&d=identicon&r=PG", "display_name": "cgenco", "link": "https://stackoverflow.com/users/1298553/cgenco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576707493, "creation_date": 1575406149, "question_id": 59165115, "link": "https://stackoverflow.com/questions/59165115/smtp-550-messages-should-have-one-or-no-reply-to-headers-not-2-on-mailgun", "title": "&quot;smtp; 550 Messages should have one or no Reply-To headers, not 2&quot; on Mailgun", "body": "<p>Emails to one of my users are periodically failing on Mailgun with the error <code>smtp; 550 Messages should have one or no Reply-To headers, not 2</code>:</p>\n\n<p>I can't see my <code>Reply-To</code> header in the Mailgun logs, but I'm reasonably certain I can only be sending one email in the <code>Reply-To</code> header. Here's my Ruby on Rails code that conditionally sets that header:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    folder_emails = @fileuploads.map do |f|\n      f.folder =~ /([\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+)/i\n      Regexp.last_match(1)\n    end.compact.uniq\n    email_params[:reply_to] = folder_emails.first if folder_emails.size == 1\n</code></pre>\n\n<p>If the <code>:reply_to</code> field isn't set in that code, it defaults to a default <code>reply-to</code> defined in my <code>ApplicationMailer</code>.</p>\n\n<p>I'm using the <code>mailgun-ruby</code> gem to deliver mail (<code>config.action_mailer.delivery_method = :mailgun</code>).</p>\n"}, {"tags": ["ruby", "watir", "page-object-gem"], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1577132185, "post_id": 59165695, "comment_id": 105102833, "body": "Hey Justin,  This method was working for me until I had a <code>page_section</code> within a <code>page_section</code> and then it broke. Think you know what&#39;s going on? <a href=\"https://stackoverflow.com/q/59460873/4701396\">stackoverflow.com/q/59460873/4701396</a>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1577501395, "post_id": 59165695, "comment_id": 105188137, "body": "@Bmoe, were you able to resolve your issue? It looks like you deleted the other question."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1575408863, "creation_date": 1575408863, "answer_id": 59165695, "question_id": 59164940, "link": "https://stackoverflow.com/questions/59164940/cheezy-dynamic-finder-for-page-section/59165695#59165695", "title": "Cheezy Dynamic Finder for Page Section", "body": "<p>I do not believe this scenario was considered in the original design, so there is not great support. Feel free to request it at <a href=\"https://github.com/cheezy/page-object/issues\" rel=\"nofollow noreferrer\">https://github.com/cheezy/page-object/issues</a> .</p>\n\n<p>That said, you could use the internal <code>platform</code> object's <code>#page_for</code> and <code>#pages_for</code> methods. The parameters are:</p>\n\n<ul>\n<li>A Hash for locating the container elements.</li>\n<li>The page section class.</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>class Container\n  include PageObject\nend\n\nclass MyPage\n  include PageObject\n\n  # Individual page section\n  def container\n    platform.page_for({tag_name: 'div'}, Container)\n  end\n\n  # Collection of page sections\n  def containers\n    platform.pages_for({tag_name: 'div'}, Container)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 59165695, "answer_count": 1, "score": 0, "last_activity_date": 1575408863, "creation_date": 1575405364, "question_id": 59164940, "link": "https://stackoverflow.com/questions/59164940/cheezy-dynamic-finder-for-page-section", "title": "Cheezy Dynamic Finder for Page Section", "body": "<p>I'm on ruby using the page-object-gem by cheezy. Following the excellent answer <a href=\"https://stackoverflow.com/a/59077554/4701396\">here</a>, I decided to ask this question (a <code>page_section</code> isn't an element I think). Anyway what is the syntax for the dynamic finder/locator for a <code>page_section</code> and <code>page_sections</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "redis", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1575390259, "creation_date": 1575390259, "answer_id": 59161358, "question_id": 59161310, "link": "https://stackoverflow.com/questions/59161310/whats-the-ruby-rspec-best-practice-for-dealing-with-background-jobs-and-am-i-do/59161358#59161358", "title": "What&#39;s the Ruby RSpec best practice for dealing with background jobs and am I doing something needlessly complicated?", "body": "<p>Sidekiq provides a <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow noreferrer\">testing guide</a>.</p>\n\n<p>If you want to test the behaviour of the job, use <code>Sidekiq::Testing.inline!</code>. If you just want to check the code without testing the job, use <code>Sidekiq::Testing.fake!</code> and check if jobs are enqueued.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5625499, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153746008109188/picture?type=large", "display_name": "Nate", "link": "https://stackoverflow.com/users/5625499/nate"}, "is_accepted": false, "score": 1, "last_activity_date": 1575488082, "last_edit_date": 1575488082, "creation_date": 1575487667, "answer_id": 59183399, "question_id": 59161310, "link": "https://stackoverflow.com/questions/59161310/whats-the-ruby-rspec-best-practice-for-dealing-with-background-jobs-and-am-i-do/59183399#59183399", "title": "What&#39;s the Ruby RSpec best practice for dealing with background jobs and am I doing something needlessly complicated?", "body": "<p>We use Resque in our project and our feature/system specs implement the following, which run and pass without <code>redis-server</code> running:</p>\n\n<p><strong>Scenario</strong></p>\n\n<p>A user signs up for a new account, and when the form submits we have the background job send a confirmation email to the provided email address.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.describe 'User account registration' do\n  before do\n    allow(BackgroundJob).to receive(:enqueue)\n  end\n\n  it do\n    it_creates_a_new_account\n  end\n\n  def it_creates_a_new_account\n    fill_in 'email', with: 'test@example.com'\n    fill_in 'password', with: 'password'\n    click_button 'Submit'\n    page.has_content? 'Please check your inbox to confirm your account registration'\n  end\nend\n</code></pre>\n\n<p>Basically we are stubbing the <code>enqueue</code> method with no return value, so it is extremely important to unit test what the job actually does further down the line. </p>\n\n<p><a href=\"https://relishapp.com/rspec/rspec-mocks/v/2-99/docs/method-stubs/allow-with-a-simple-return-value#stub-with-no-return-value\" rel=\"nofollow noreferrer\">Relevant Documentation</a></p>\n\n<p>When the user clicks submit it posts the form, and as you'd expect that would bubble down and eventually hit a background job, adding to the queue, that calls a service, and then sends the email.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class BackgroundJob\n  def self.enqueue(klass_name, *args)\n    Resque.enqueue(klass_name, *args)\n  end\nend\n</code></pre>\n\n<h2><strong>I'll leave the below examples for reference of the flow.</strong></h2>\n\n<p>Our (super simple example) form class might look like this: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#\n# When a user signs up for a new account we\n# need to send them a confirmation email\nclass NewUserForm\n  def initialize(email:, password:)\n    @email    = email\n    @password = password\n  end\n\n  def save\n    persist\n  end\n\n  private\n\n  def persist\n    User.transaction do\n      @new_user ||= create_user\n      send_confirmation_email\n    end\n  end\n\n  def create_user\n    User.create(email: @email, password: @password)\n  end\n\n  def send_confirmation_email\n    BackgroundJob.enqueue(NewUserAccountJob, @new_user.id)\n  end\nend\n</code></pre>\n\n<p>I'd then unit test the form class by simply checking: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let!(:form) { described_class.new(email: 'test@example.com', password: 'password') }\n\ncontext 'when user creation succeeds' do\n  it 'calls the new user account job' do\n    expect(BackgroundJob).to receive(:enqueue).with(\n      NewUserAccountJob, kind_of?(Integer)\n    )\n    form.save\n  end\n\n  it 'creates a user record with the provided details' do\n    expect(User).to receive(:create).with(\n      email: 'test@example.com', password: 'password'\n    )\n    form.save \n  end\nend\n</code></pre>\n\n<hr>\n\n<p>Then the Job class might look something like: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>##\n# We need to send a confirmation email to a newly\n# created account before we activate the user\nclass NewUserAccountJob\n  def self.perform(user_id)\n    UserMailer.new_account_confirmation(user_id).deliver_now\n  end\nend\n</code></pre>\n\n<p>Which, if I'm being honest with you, I wouldn't bother testing at all really. </p>\n\n<hr>\n\n<p>Then the mailer class would be something in the vein of: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class UserMailer &lt; ApplicationMailer\n  def new_account_confirmation(user_id)\n    @facade ||= ::Users::NewAccountMailerFacade.new(user_id)\n\n    mail(to: @facade.recipient, subject: @facade.email_subject)\n  end\nend\n</code></pre>\n\n<p><strong>NB:</strong> I'm a big fan of the <a href=\"https://refactoring.guru/design-patterns/facade/ruby/example\" rel=\"nofollow noreferrer\">facade pattern</a> as I find it much easier to collate the related services to a certain action, and also easier to test, but you could very easily skip it and just set <code>@user ||= User.find(user_id)</code> and use <code>@user.email</code> as the recipient and a string for the subject. \nDealer's choice here. </p>\n\n<p>If you went down the facade route it might look like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Users\n  class NewAccountMailerFacade\n    def initialize(user_id)\n      @user_id = user_id\n    end\n\n    def email_recipient\n      @email_recipient ||= user.email\n    end\n\n    def email_subject\n      I18n.t('users.new_account_confirmation.subject')\n    end\n\n    private\n\n    def user\n      @user ||= User.select(:email).find(@user_id)\n    end\n  end\nend\n</code></pre>\n\n<p><code>I18n.t('users.new_account_confirmation.subject')</code> = 'Please confirm your email address to complete your account registration for YOURAPPNAME'</p>\n\n<p>Then it's just another simple unit test. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.describe Users::NewAccountMailerFacade do\n  let(:instance) { described_class.new(user.id) }\n\n  let!(:user) { create(:user, email: email, password: 'password') }\n\n  describe '.email_subject' do\n    subject { instance.email_subject }\n\n    it { is_expected.to eq(I18n.t('users.new_account_confirmation.subject')) }\n  end\n\n  describe '.email_recipient' do\n    subject { instance.email_recipient }\n\n    context 'given an email of test@example.com' do\n      let(:email) { 'test@example.com' }\n\n      it 'returns the correct email' do\n        expect(subject).to eq('test@example.com')\n      end\n    end\n\n    context 'given an email of your@app.com' do\n      let(:email) { 'your@app.com' }\n\n      it 'returns the correct email' do\n        expect(subject).to eq('your@app.com')\n      end\n    end\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>I've used factories here as that's just what I'm used to. But hopefully, this provides some form of help to you. </p>\n\n<p>I'd also recommend looking into making the transition to system specs if that's a possibility in your position. Speaking from experience, our team saw a dramatic decrease in flaky specs, and js (mainly ajax) related troubles we experienced back when we wrote features after making the change.\nTo play devil's advocate though, system specs take <strong>MUCH</strong> longer to run on our CI than our features did (especially with <code>js: true</code> turned on), so it's not all sunshine and daisies in the system world, unfortunately. </p>\n"}], "owner": {"reputation": 607, "user_id": 3210927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/9c32b2beefffc67829ebf32bba7c7ea4?s=128&d=identicon&r=PG", "display_name": "Arepo", "link": "https://stackoverflow.com/users/3210927/arepo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1575488082, "creation_date": 1575390078, "last_edit_date": 1575390314, "question_id": 59161310, "link": "https://stackoverflow.com/questions/59161310/whats-the-ruby-rspec-best-practice-for-dealing-with-background-jobs-and-am-i-do", "title": "What&#39;s the Ruby RSpec best practice for dealing with background jobs and am I doing something needlessly complicated?", "body": "<p>I'm not sure if I have a bug somewhere, or am just not using good practice. Suppose I have either of the following:</p>\n\n<pre><code>class ThingMailer &lt; ApplicationMailer\n  def notify_of_thing\n    mail(subject: 'Thing has happened')\n  end\nend\n\n# ... and elsewhere...\n\nclass ThingDoer\n  def do_thing\n    ThingMailer.notify_of_thing.deliver_later(wait: 30.seconds)\n  end\nend\n</code></pre>\n\n<p>or </p>\n\n<pre><code>class ThingWorker\n  include Sidekiq::Worker\n\n  def perform(name)\n    some_model.update(name: name)\n  end\nend\n\n# ... and elsewhere...\n\nclass ThingPerformer\n  def perform_thing\n    ThingWorker.perform_in(30.seconds, 'Bob')\n  end\nend\n</code></pre>\n\n<p>And elsewhere I have a feature test (or other highish level test) which, in the normal course of things, causes <code>ThingPerformer#perform_thing</code> or <code>ThingDoer#do_thing</code> to be called. What's the best practice for dealing with them in a test suite? </p>\n\n<p>In my <em>actual</em> test suite, if I don't just stub out one of the thread-launching methods, and if I'm not running Redis in the background while the tests run, I get the error <code>Error connecting to Redis on 127.0.0.1:6379 (Errno::ECONNREFUSED) (Redis::CannotConnectError)</code>.</p>\n\n<p>In <code>config/environments/production.rb</code>, we specify the cache store:</p>\n\n<pre><code>config.cache_store = :redis_store, ENV['REDIS_URL'], { expires_in: 90.minutes }\n</code></pre>\n\n<p>But our <code>config/environments/test.rb</code>, we specify that the app shouldn't perform caching (though presumably that's not working, and maybe just fixing whatever's causing this issue would be the answer to the first question?)</p>\n\n<p>Here's the <code>test.rb</code> file:</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # The test environment is used exclusively to run your application's\n  # test suite. You never need to work with it otherwise. Remember that\n  # your test database is \"scratch space\" for the test suite and is wiped\n  # and recreated between test runs. Don't rely on the data there!\n  config.cache_classes = true\n\n  # Do not eager load code on boot. This avoids loading your whole application\n  # just for the purpose of running a single test. If you are using a tool that\n  # preloads Rails for running tests, you may have to set it to true.\n  config.eager_load = false\n\n  # Configure public file server for tests with Cache-Control for performance.\n  config.public_file_server.enabled = true\n  config.public_file_server.headers = {\n    'Cache-Control' =&gt; 'public, max-age=3600'\n  }\n\n  # Show full error reports and disable caching.\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  # Raise exceptions instead of rendering exception templates.\n  config.action_dispatch.show_exceptions = false\n\n  # Disable request forgery protection in test environment.\n  config.action_controller.allow_forgery_protection = false\n  config.action_mailer.perform_caching = false\n\n  # Tell Action Mailer not to deliver emails to the real world.\n  # The :test delivery method accumulates sent emails in the\n  # ActionMailer::Base.deliveries array.\n  config.action_mailer.delivery_method = :test\n  # config.active_job.queue_adapter = :test\n\n  # Fix the order in which test cases are executed.\n  # config.active_support.test_order = :sorted\n\n  # Print deprecation notices to the stderr.\n  config.active_support.deprecation = :stderr\n\n  # Raises error for missing translations\n  config.action_view.raise_on_missing_translations = true\n\n  config.cache_store = :null_store\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "view", "path"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "edited": false, "score": 0, "creation_date": 1575390146, "post_id": 59161211, "comment_id": 104546991, "body": "I got an syntax error message : syntax error, unexpected &#39;;&#39;, expecting &#39;)&#39; ...er.where(user_id: @author_id) ;@output_buffer.safe_append=&#39;&lt;..."}], "tags": [], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1575390687, "last_edit_date": 1575390687, "creation_date": 1575389778, "answer_id": 59161211, "question_id": 59161134, "link": "https://stackoverflow.com/questions/59161134/how-to-find-the-correct-path-for-a-link-in-rails/59161211#59161211", "title": "How to find the correct path for a link in rails", "body": "<p>Try something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= link_to(\"Par : #{@article.author.pseudo}\", @article.author) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "edited": false, "score": 0, "creation_date": 1575390102, "post_id": 59161263, "comment_id": 104546975, "body": "With that code, there are not error message but when I clicked on the button nothing happend.."}, {"owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "reply_to_user": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "edited": false, "score": 0, "creation_date": 1575390221, "post_id": 59161263, "comment_id": 104547044, "body": "Nothing at all? Please post the code that is around the above link. Note that you don&#39;t need <code>&lt;a&gt;</code> as <code>link_to</code> will generate that for you."}, {"owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "edited": false, "score": 1, "creation_date": 1575390769, "post_id": 59161263, "comment_id": 104547350, "body": "Exact, that was the problem, the &lt;a&gt;. Thanks!"}], "tags": [], "owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "is_accepted": false, "score": 1, "last_activity_date": 1575389921, "creation_date": 1575389921, "answer_id": 59161263, "question_id": 59161134, "link": "https://stackoverflow.com/questions/59161134/how-to-find-the-correct-path-for-a-link-in-rails/59161263#59161263", "title": "How to find the correct path for a link in rails", "body": "<p>You should be able to link directly to the author:</p>\n\n<pre><code>&lt;%= link_to \"Par : #{@article.author.pseudo}\", @article.author %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "edited": false, "score": 0, "creation_date": 1575390691, "post_id": 59161364, "comment_id": 104547308, "body": "Happy to help! Please, <a href=\"https://stackoverflow.com/help/accepted-answer\">accept the answer</a> if it helped"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 2, "last_activity_date": 1575390281, "creation_date": 1575390281, "answer_id": 59161364, "question_id": 59161134, "link": "https://stackoverflow.com/questions/59161134/how-to-find-the-correct-path-for-a-link-in-rails/59161364#59161364", "title": "How to find the correct path for a link in rails", "body": "<p>Don't wrap link_to helper into <code>&lt;a&gt;</code>tag, it is already generated by the helper. <code>where</code> returns the collection, not the instance - that's why your code does not work. You already have needed user instance in <code>@article.author</code>, just use it</p>\n\n<pre><code>&lt;%= link_to \"Par : #{@article.author.pseudo}\", user_path(@article.author) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12469310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b277b08b25e9d11e795e84ba5c98d7d3?s=128&d=identicon&r=PG&f=1", "display_name": "LilasAll", "link": "https://stackoverflow.com/users/12469310/lilasall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59161364, "answer_count": 3, "score": 2, "last_activity_date": 1575390687, "creation_date": 1575389505, "question_id": 59161134, "link": "https://stackoverflow.com/questions/59161134/how-to-find-the-correct-path-for-a-link-in-rails", "title": "How to find the correct path for a link in rails", "body": "<p>I got a problem with a link I've tried to make. I want to have a page with an article, and a link to the author page of it. Iv's try 100 differents version but i don't know how to do... \nHere is my code : </p>\n\n<pre><code>&lt;a &lt;% link_to \" Par : #{@article.author.pseudo}\", user_path(User.where(user_id: @author_id) %&gt;&lt;/a&gt;\n</code></pre>\n\n<p>or with this path : <code>user_path(Article.find(params[:id]).author_id)</code></p>\n\n<p>If you know how I can resolve that... Thanks !</p>\n"}, {"tags": ["ruby", "salesforce", "netsuite"], "answers": [{"tags": [], "owner": {"reputation": 2629, "user_id": 3038244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e19716b5a3511665b01e4e815ab698?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty Shackles", "link": "https://stackoverflow.com/users/3038244/rusty-shackles"}, "is_accepted": false, "score": 2, "last_activity_date": 1575406586, "creation_date": 1575406586, "answer_id": 59165213, "question_id": 59160877, "link": "https://stackoverflow.com/questions/59160877/netsuite-invoices-entity-doesnt-have-external-id-or-type-set/59165213#59165213", "title": "NetSuite invoice&#39;s entity doesn&#39;t have external_id or type set", "body": "<p>If you are using external id, you need to change this</p>\n\n<pre><code>customerJoin: [{\n  field: 'internalId',\n  operator: 'anyOf',\n  value: [ NetSuite::Records::Customer.new(external_id: 'xxxxxxxxxxxxxx1') ] \n}]\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>customerJoin: [{\n  field: 'externalId',\n  operator: 'anyOf',\n  value: [ NetSuite::Records::Customer.new(external_id: 'xxxxxxxxxxxxxx1') ] \n}]\n</code></pre>\n\n<p>The external id you set is in a different field on the customer record.</p>\n"}], "owner": {"reputation": 866, "user_id": 322896, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ac7b181ea28f92d4f13357ccd63846f5?s=128&d=identicon&r=PG&f=1", "display_name": "322896", "link": "https://stackoverflow.com/users/322896/322896"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575406586, "creation_date": 1575388583, "question_id": 59160877, "link": "https://stackoverflow.com/questions/59160877/netsuite-invoices-entity-doesnt-have-external-id-or-type-set", "title": "NetSuite invoice&#39;s entity doesn&#39;t have external_id or type set", "body": "<p>I'm using the <a href=\"https://github.com/NetSweet/netsuite\" rel=\"nofollow noreferrer\">netsuite</a> ruby gem and having issues with the association between an invoice and a customer, and wondering if I'm missing something obvious.</p>\n\n<p>We have an <code>invoice</code> that's associated with a <code>customer</code>. We set the <code>external_id</code> on the <code>customer</code> (synced via celigo from salesforce), and can see it on the <code>customer</code> when querying it directly:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>customer = NetSuite::Records::Customer.get(\"14829\")\ncustomer.internal_id\n# \"14829\"\ncustomer.external_id\n# \"xxxxxxxxxxxxxx1\"\n</code></pre>\n\n<p>However, when we query the invoice, the <code>external_id</code> and <code>type</code> on the <code>entity</code> are both <code>nil</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>NetSuite::Records::Invoice.get(\"79502\").entity\n# #&lt;NetSuite::Records::RecordRef:0x00007fb30aa63cf8 @internal_id=\"14829\", @external_id=nil, @type=nil, @attributes={:name=&gt;\"customer name\"}&gt;\n</code></pre>\n\n<p>This also prevents us from searching with <code>external_id</code>, for example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>search_params = {\n  criteria: {\n    basic: [{\n      field: 'internalId',\n      operator: 'anyOf',\n      value: [ NetSuite::Records::Invoice.new(internal_id: '79502') ]\n    }],\n    customerJoin: [{\n      field: 'internalId',\n      operator: 'anyOf',\n      # value: [ NetSuite::Records::Customer.new(internal_id: '14829') ]         # this works\n      value: [ NetSuite::Records::Customer.new(external_id: 'xxxxxxxxxxxxxx1') ] # this returns a `INVALID_KEY_OR_REF` error\n    }]\n  }\n}\nNetSuite::Records::Invoice.search(search_params)\n</code></pre>\n\n<p>I'm wondering if I miss something to get the associated <code>entity</code> from an invoice. Any insights would be very appreciated! Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "continuous-integration", "circleci"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1575389210, "post_id": 59160875, "comment_id": 104546519, "body": "What does <code>subject.call</code> do?"}, {"owner": {"reputation": 7160, "user_id": 250993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uep8d.jpg?s=128&g=1", "display_name": "joslinm", "link": "https://stackoverflow.com/users/250993/joslinm"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1575389411, "post_id": 59160875, "comment_id": 104546614, "body": "It calls <code>find_by_sql</code> with a query I just posted in question"}, {"owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 0, "creation_date": 1575391342, "post_id": 59160875, "comment_id": 104547684, "body": "Looks a bit odd that you&#39;re doing <code>select * from</code> and then treating them like ids from then on. I&#39;d expect them to be <code>Record</code> instances at that point."}, {"owner": {"reputation": 7160, "user_id": 250993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uep8d.jpg?s=128&g=1", "display_name": "joslinm", "link": "https://stackoverflow.com/users/250993/joslinm"}, "reply_to_user": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "edited": false, "score": 0, "creation_date": 1575391780, "post_id": 59160875, "comment_id": 104547930, "body": "That could be it... let me give it a shot! Thanks @Shadwell"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1575394748, "post_id": 59160875, "comment_id": 104549399, "body": "What exactly do you run in parallel? And does each spec have a separate DB, or is it a shared one?"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1575406555, "post_id": 59160875, "comment_id": 104554334, "body": "How are you deriving the params and query values?"}], "owner": {"reputation": 7160, "user_id": 250993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uep8d.jpg?s=128&g=1", "display_name": "joslinm", "link": "https://stackoverflow.com/users/250993/joslinm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575389403, "creation_date": 1575388581, "last_edit_date": 1592644375, "question_id": 59160875, "link": "https://stackoverflow.com/questions/59160875/record-ids-are-seemingly-changed-on-ci-server", "title": "Record IDs are seemingly changed on CI server", "body": "<p>I'm using CircleCI in order to run my tests. I'm running into a strange phenomena from test code that looks like this:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>record1_id = create(:record, ...).id\nrecord2_id = create(:record, ...).id\nrecord3_id = create(:record, ....).id\n\nputs &quot;Created the following records... #{ record1_id }, #{ record2_id }, #{ record3_id }&quot;\nputs &quot;Total records in DB right now... #{ Record.count }&quot;\n\n# Test call\nputs &quot;About to execute lookup&quot;\nrecord_ids = subject.call(params)\nputs &quot;Received back record ids... #{ record_ids }&quot;\n\nexpect(record_ids).to include(record1_id)\nexpect(record_ids).to include(record2_id)\nexpect(record_ids).to include(record3_id)\n</code></pre>\n<p>When run locally, it's fine. However when run in a parallel CircleCI setup, the tests fail sporadically and I see this output:</p>\n<blockquote>\n<p>Created the following records... 1018350864, 1018350865, 1018350866</p>\n<p>Total records in DB right now... 3</p>\n<p>About to execute lookup...</p>\n<p>Received back record ids... [980191033, 980191032, 980191031]</p>\n</blockquote>\n<p>How could this be happening? I've tried to clear the Rails query cache, retrying the test, but this test still manages to fail with a DB query that returns me to what seem to be correct records... but with totally different IDs?</p>\n<p><code>subject.call</code> does a <code>Record.find_by_sql(query, params...)</code> with query that looks like this:</p>\n<pre><code>      SELECT * FROM records\n      INNER JOIN joins ON records.joins_id = joins.id\n      WHERE records.status IN (:active_statuses) AND (\n           :phone_number IN (SELECT phone FROM users WHERE records.pickup_contact_id = users.id)\n        OR :phone_number IN (SELECT phone FROM users WHERE records.dropoff_contact_id = users.id)\n        OR :phone_number IN (SELECT phone FROM users WHERE records.user_id = users.id)\n      )\n      ORDER BY records.updated_at DESC\n      LIMIT 100\n</code></pre>\n"}, {"tags": ["ruby", "docusignapi"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1575405110, "post_id": 59157366, "comment_id": 104553818, "body": "Are you using base_path correctly? It doesn\u2019t look like it. <a href=\"https://github.com/docusign/docusign-ruby-client/blob/master/lib/docusign_esign/configuration.rb#L163\" rel=\"nofollow noreferrer\">github.com/docusign/docusign-ruby-client/blob/master/lib/&hellip;</a> It\u2019s not the host name."}, {"owner": {"reputation": 53, "user_id": 4704517, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206514796577542/picture?type=large", "display_name": "Marco Antonio Rojo Marcondes", "link": "https://stackoverflow.com/users/4704517/marco-antonio-rojo-marcondes"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1575547911, "post_id": 59157366, "comment_id": 104608032, "body": "Hi @anothermh. You&#39;re write.  There are 2 hosts: DocuSign_eSign::Configuration.host and DocuSign_eSign::ApiClient.set_oauth_base_path  I was using the same path for both.   Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 42798, "user_id": 64904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d18e711c1855012728c3a5782cfcc3ad?s=128&d=identicon&r=PG", "display_name": "Larry K", "link": "https://stackoverflow.com/users/64904/larry-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1575441291, "creation_date": 1575441291, "answer_id": 59170178, "question_id": 59157366, "link": "https://stackoverflow.com/questions/59157366/docusign-ruby-api-receiving-302-when-try-to-do-something/59170178#59170178", "title": "Docusign Ruby API - receiving 302 when try to do something", "body": "<p>I agree with @anothermh. Try setting your api_client's base path:</p>\n\n<pre><code>    api_client.config.host = 'https://demo.docusign.net/restapi'\n</code></pre>\n\n<p>The above base path is for demo (the developer sandbox).</p>\n\n<p>For production, you need to pull the base path out of the <code>get_user_info</code> response.</p>\n"}], "owner": {"reputation": 53, "user_id": 4704517, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206514796577542/picture?type=large", "display_name": "Marco Antonio Rojo Marcondes", "link": "https://stackoverflow.com/users/4704517/marco-antonio-rojo-marcondes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 59170178, "answer_count": 1, "score": 2, "last_activity_date": 1575441291, "creation_date": 1575376814, "question_id": 59157366, "link": "https://stackoverflow.com/questions/59157366/docusign-ruby-api-receiving-302-when-try-to-do-something", "title": "Docusign Ruby API - receiving 302 when try to do something", "body": "<p>I am getting 302 when I try to do something with docusign-ruby-client.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>envelope_args = {\n  signer_email: 'email@email.com',\n  signer_name: 'Name',\n  cc_email: 'another@email.com',\n  cc_name: 'Another name',\n  template_id: 'template-id'\n}\n\nargs = {\n  client_id: 'my-client-id',\n  impersonated_user_guid: 'my-impersonated-user-guid',\n  base_path: 'account-d.docusign.com',\n  envelope_args: envelope_args\n}\n\nenvelope_args = args[:envelope_args]\nconfiguration = DocuSign_eSign::Configuration.new\nconfiguration.host = args[:base_path]\n\npath = File.join(File.dirname(File.absolute_path(__FILE__)), 'private-key.txt')\nprivate_key = File.read(path)\n\napi_client = DocuSign_eSign::ApiClient.new configuration\napi_client.set_oauth_base_path(args[:base_path])\n\ntoken = api_client.request_jwt_user_token(args[:client_id], args[:impersonated_user_guid], private_key, 3600)\n\nuser_info = api_client.get_user_info(token.access_token)\ntemplate_api = DocuSign_eSign::TemplatesApi.new(api_client)\ntemplate_api.list_templates(user_info.accounts.first.account_id)\n</code></pre>\n\n<p>I created an JWT integration key, also authorized my user/ app and I see that I have an <code>user_info.accounts.first.account_id</code> when I execute <code>user_info = api_client.get_user_info(token.access_token)</code>.</p>\n\n<p>When I try to execute any <code>api.list_something</code> I receive:</p>\n\n<pre><code>302\n&lt;html&gt;&lt;head&gt;&lt;title&gt;Object moved&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\n&lt;h2&gt;Object moved to &lt;a href=\"https://account-d.docusign.com/\"&gt;here&lt;/a&gt;.&lt;/h2&gt;\n&lt;/body&gt;&lt;/html&gt;\n\n\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "canonical-link"], "comments": [{"owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "edited": false, "score": 1, "creation_date": 1575376987, "post_id": 59157005, "comment_id": 104538876, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/43434601/how-to-get-a-canonical-url-for-a-dynamically-generated-urls-on-rails\">How to get a canonical url for a dynamically generated urls on rails?</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1575377560, "post_id": 59157005, "comment_id": 104539196, "body": "Please show your attempt. Explain what you want it to do, what&#39;s wrong with it, and show the error message (if any). See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 25, "user_id": 12347237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b47ce0bc99bba4ed1329a0da8cf3a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Fagerlund", "link": "https://stackoverflow.com/users/12347237/jonas-fagerlund"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575397339, "post_id": 59157005, "comment_id": 104550538, "body": "@TomLord Thanks for the response. An example is now added to the question."}, {"owner": {"reputation": 25, "user_id": 12347237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b47ce0bc99bba4ed1329a0da8cf3a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Fagerlund", "link": "https://stackoverflow.com/users/12347237/jonas-fagerlund"}, "reply_to_user": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "edited": false, "score": 0, "creation_date": 1575397407, "post_id": 59157005, "comment_id": 104550564, "body": "@ramblex Maybe, I&#39;ll check it out and see!"}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 12347237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b47ce0bc99bba4ed1329a0da8cf3a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Fagerlund", "link": "https://stackoverflow.com/users/12347237/jonas-fagerlund"}, "is_accepted": false, "score": 0, "last_activity_date": 1575396420, "creation_date": 1575396420, "answer_id": 59162990, "question_id": 59157005, "link": "https://stackoverflow.com/questions/59157005/dynamic-canonical-tag/59162990#59162990", "title": "Dynamic canonical tag", "body": "<p>I somewhat solved the problem by placing</p>\n\n<pre><code>&lt;% content_for :canonical do %&gt;\n&lt;link rel=\"canonical\" href=\"&lt;%=\"example.com/#{@category.slug}/\"%&gt;\" /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Under</p>\n\n<pre><code>&lt;% if @category %&gt;\n</code></pre>\n\n<p>It does not work exactly as I described in the questing since there is no canonical for <code>example.com/all?brand=levis</code> nor <code>example.com/all</code>. But that might even be better for SEO since google might take <code>/all</code> and <code>/jeans</code> for duplicate content, I'm not 100% sure. If you have another better solution, share and I would be more than happy!</p>\n"}], "owner": {"reputation": 25, "user_id": 12347237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b47ce0bc99bba4ed1329a0da8cf3a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Fagerlund", "link": "https://stackoverflow.com/users/12347237/jonas-fagerlund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575396420, "creation_date": 1575375637, "last_edit_date": 1575393653, "question_id": 59157005, "link": "https://stackoverflow.com/questions/59157005/dynamic-canonical-tag", "title": "Dynamic canonical tag", "body": "<p>Lately, I've been making my site more SEO friendly. Everything has been fun and games\nuntil the canonical tag came along.</p>\n\n<p>My site index is structured like the following. </p>\n\n<ul>\n<li><code>example.com/all</code> show all products. </li>\n<li><code>example.com/all?brand=levis</code> shows all products from Levi's.</li>\n<li><code>example.com/jeans</code> shows all jeans.</li>\n</ul>\n\n<p>I would want to have dynamic canonical tags that refer to <code>mysite.com/all</code>, <code>mysite.com/all?brand=current-brand</code> and <code>mysite.com/current-category</code>.</p>\n\n<p>The site also has a filter option for color and brands which produces slugs like <code>mysite.com/hoodies?color=grey</code> and <code>mysite/hoodies?brand=nike&amp;color=green</code>. In both cases, I would want to have a canonical referring to <code>mysite.com/hoodies</code></p>\n\n<p>I made an attempt to fix this with an if else solution without success.</p>\n\n<p>How it's set up now is like the following:</p>\n\n<p><strong>views/layouts/application.html.erb</strong></p>\n\n<pre><code>&lt;%= yield :canonical %&gt;\n</code></pre>\n\n<p><strong>views/pages/about</strong></p>\n\n<pre><code>&lt;%= content_for :canonical do %&gt;\n&lt;link rel=\"canonical\" href=\"example.com/about/\" /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>views/products/show</strong></p>\n\n<pre><code>&lt;% content_for :canonical do %&gt;\n&lt;link rel=\"canonical\" href=\"&lt;%=\"example.com/#{@product.id}/\"%&gt;\" /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>These two works fine but when it comes to the index page it becomes trickier.</p>\n\n<p>First I tried </p>\n\n<pre><code>&lt;% content_for :canonical do %&gt;\n&lt;link rel=\"canonical\" href=\"&lt;%=\"example.com/#{@category.slug}/\"%&gt;\" /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This solution works fine when you go by category but crashes when you go to <code>mysite.com/all</code> or  <code>mysite.com/all?brand=levis</code>.</p>\n\n<p>I tried to experiment with some if else statements where I tried to target the current slug but it all ended up with crashes.</p>\n\n<p>Do you guys have any suggestions of what I can do?</p>\n"}, {"tags": ["ruby", "vagrant"], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 5970009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a3d2947d3e2ca1c9ed579d1422cf35?s=128&d=identicon&r=PG", "display_name": "su_li", "link": "https://stackoverflow.com/users/5970009/su-li"}, "is_accepted": true, "score": 2, "last_activity_date": 1575398779, "creation_date": 1575398779, "answer_id": 59163494, "question_id": 59156678, "link": "https://stackoverflow.com/questions/59156678/ruby-vagrant-network-configuration-duplication-trouble-some-objects-references/59163494#59163494", "title": "Ruby Vagrant network configuration duplication trouble, some objects references issue", "body": "<p>I think the <code>for guestindex in guestindices</code> part is the cause of your trouble. </p>\n\n<p>Try using <code>guestindices.each do |i|</code> or shorter <code>(1..2).each do |i|</code> instead.</p>\n\n<p>Vagrant is mentioning this in their documentation for multi-machine provisioning, see <a href=\"https://www.vagrantup.com/docs/vagrantfile/tips.html#loop-over-vm-definitions\" rel=\"nofollow noreferrer\">https://www.vagrantup.com/docs/vagrantfile/tips.html#loop-over-vm-definitions</a>:</p>\n\n<blockquote>\n  <p>The for i in ... construct in Ruby actually modifies the value of i for each iteration, rather than making a copy. Therefore, when you run this, every node will actually provision with the same [value].</p>\n</blockquote>\n"}], "owner": {"reputation": 380, "user_id": 1927853, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bf9bd86c19a2d0683968b17777a58f0c?s=128&d=identicon&r=PG", "display_name": "Dmitriy Vinokurov", "link": "https://stackoverflow.com/users/1927853/dmitriy-vinokurov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 59163494, "answer_count": 1, "score": 0, "last_activity_date": 1575398779, "creation_date": 1575374534, "question_id": 59156678, "link": "https://stackoverflow.com/questions/59156678/ruby-vagrant-network-configuration-duplication-trouble-some-objects-references", "title": "Ruby Vagrant network configuration duplication trouble, some objects references issue", "body": "<p>I will say right away - I'm experienced in Python for example, but Ruby is totally new for me so this question may be not related to Vagrant at all, I don't know, sorry.</p>\n\n<p>I want to create two VMs on my host and created Vagrantfile:</p>\n\n<pre><code>Vagrant.configure(\"2\") do |config|\n    # Image config\n    config.vm.box = \"ubuntu/bionic64\"\n    config.disksize.size = '40GB'\n\n    # Nodes specific configs\n    config.vm.define \"node_1_1\" do |node|\n        node.vm.network \"public_network\", ip: \"192.168.3.11\", bridge: \"enp4s0\", netmask: \"255.255.248.0\"\n        node.vm.hostname = \"vm-ci-node-1-1\"\n    end\n\n    config.vm.define \"node_1_2\" do |node|\n        node.vm.network \"public_network\", ip: \"192.168.3.12\", bridge: \"enp4s0\", netmask: \"255.255.248.0\"\n        node.vm.hostname = \"vm-ci-node-1-2\"\n    end\n\n    # Nodes generic configs\n    config.vm.provider \"virtualbox\" do |vb|\n        vb.memory = \"2048\"\n        vb.cpus=2\n    end\nend\n</code></pre>\n\n<p>It works fine.</p>\n\n<p>Then I decided to remove parameters hardcode and optimize it for next case with more than two VMs and for correct work on another machines with another bridge interface names. So I replaced <code>Nodes specific configs</code> section with:</p>\n\n<pre><code>    target_interface = nil\n    for if_addr in Socket.getifaddrs\n        if if_addr.addr.ipv4? and if_addr.addr.ip_address.include? '192.168'\n            target_interface = if_addr.name\n        end\n    end\n\n    hostindex = 8\n    guestindices = [1, 2]\n    # Nodes specific configs\n    for guestindex in guestindices\n        vm_code = 'node_' + hostindex.to_s() + '_' + guestindex.to_s()\n        ip = '192.168.3.' + hostindex.to_s() + guestindex.to_s()\n        hostname = 'vm-ci-node-' + hostindex.to_s() + '-' + guestindex.to_s()\n        config.vm.define vm_code.dup do |node|\n            node.vm.network \"public_network\", ip: ip.dup, bridge: target_interface, netmask: \"255.255.248.0\"\n            node.vm.hostname = hostname.dup\n        end\n    end\n</code></pre>\n\n<p>Then I run <code>vagrant up</code> - no errors, but if I try to SSH to these two machines - I get strange behaviour:</p>\n\n<ol>\n<li><code>node_8_1</code> IP address is <code>192.168.3.82</code>, hostname - <code>vm-ci-node-8-2</code></li>\n<li><code>node_8_2</code> IP address is <code>192.168.3.82</code>, hostname - <code>vm-ci-node-8-2</code></li>\n</ol>\n\n<p>As you see - it is same. Also there are another interface with same IP <code>10.0.2.15</code> - and it is trouble too, but it existed on previous version of config too.</p>\n\n<p>I suspected that there are some Ruby references troubles so I used <code>dup</code> (I repeat, I'm totally new to Ruby, sorry). But it does not seem to work.</p>\n\n<p>VM codes are different - <code>node_8_1</code> and <code>node_8_2</code>, but IP and hostnames are same.</p>\n\n<p>Could anybody please point me where I'm wrong?</p>\n"}, {"tags": ["ruby", "openssl", "rubygems"], "comments": [{"owner": {"reputation": 7472, "user_id": 1174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c9c635e13c2c77144fd971c299e4c55f?s=128&d=identicon&r=PG", "display_name": "Olly", "link": "https://stackoverflow.com/users/1174/olly"}, "edited": false, "score": 0, "creation_date": 1575378054, "post_id": 59156390, "comment_id": 104539490, "body": "Would you be able to post the contents of the Gemfile so people can try and reproduce?"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "reply_to_user": {"reputation": 7472, "user_id": 1174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c9c635e13c2c77144fd971c299e4c55f?s=128&d=identicon&r=PG", "display_name": "Olly", "link": "https://stackoverflow.com/users/1174/olly"}, "edited": false, "score": 1, "creation_date": 1575384804, "post_id": 59156390, "comment_id": 104543859, "body": "@Olly done, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 3, "last_activity_date": 1575381411, "creation_date": 1575381411, "answer_id": 59158744, "question_id": 59156390, "link": "https://stackoverflow.com/questions/59156390/managing-system-dependencies-of-ruby-gems-e-g-mysql2-and-openssl/59158744#59158744", "title": "Managing system dependencies of ruby gems (e.g. mysql2 and openssl)", "body": "<p>I've seen this <a href=\"https://github.com/rvm/rvm/issues/4819\" rel=\"nofollow noreferrer\">issue on</a> rvm project where you can find more detail about this.</p>\n\n<p>This step works for me, we have to wait for some official fix.</p>\n\n<ol>\n<li>Install openssl via rvm pkg install openssl</li>\n<li>Remove and reinstall rubies with rvm reinstall 2.6.0 \n--with-openssl-dir=$HOME/.rvm/usr</li>\n</ol>\n"}], "owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1281, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575384790, "creation_date": 1575373569, "last_edit_date": 1575384790, "question_id": 59156390, "link": "https://stackoverflow.com/questions/59156390/managing-system-dependencies-of-ruby-gems-e-g-mysql2-and-openssl", "title": "Managing system dependencies of ruby gems (e.g. mysql2 and openssl)", "body": "<p>TL;DR: Below is a tragic story of a how I lost about 8 hours of my life because different gems were looking for different versions of openssl that weren't there. In the course of coming here to beg for help and writing up everything I tried I've managed to implement the hackiest fix imaginable, at which point I have to get back on with actual work. But this solution seems totally inadequate for reasons I outline below. So I'm asking: Is there a proper way of specifying system dependencies for a ruby gem?</p>\n\n<p>====MY ORIGINAL PROBLEM===========</p>\n\n<p>I <code>rvm installed</code> ruby 2.6.0 over the weekend and for some reason this triggered homebrew to update openssl on my Mac to openssl@1.1. I now can't run my work's Rails app (running 5.1.7, ruby 2.4.0) because I get this error:</p>\n\n<pre><code>Roberts-MBP:website-upgrade Rob$ rails t\n/Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.2/lib/mysql2.rb:33:in `require': dlopen(/Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.2/lib/mysql2/mysql2.bundle, 9): Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib\n  Referenced from: /usr/local/opt/mysql/lib/libmysqlclient.20.dylib\n  Reason: image not found - /Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.2/lib/mysql2/mysql2.bundle (LoadError)\n</code></pre>\n\n<p>Basically the same error is described in this SO post:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib\">rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib</a></p>\n\n<p>Some solutions there suggest making symlinks to your installation of openSSL, or copying the files to where it wants them to be. This doesn't work for me; it seems that libraries of the old (1.0.x) and new (1.1) versions are incompatible.</p>\n\n<p>Simply uninstalling and reinstalling the mysql gem leaves me with the same error.\nFollowing another suggestion from that post, I tried:</p>\n\n<pre><code>Roberts-MBP:website-upgrade Rob$ gem install mysql2 -- with-cppflags=-I/usr/local/opt/openssl@1.1/include --with-ldflags=-L/usr/local/opt/openssl@1.1/lib\nFetching: mysql2-0.5.3.gem (100%)\nBuilding native extensions with: 'with-cppflags=-I/usr/local/opt/openssl@1.1/include --with-ldflags=-L/usr/local/opt/openssl@1.1/lib'\nThis could take a while...\nSuccessfully installed mysql2-0.5.3\nParsing documentation for mysql2-0.5.3\nInstalling ri documentation for mysql2-0.5.3\nDone installing documentation for mysql2 after 0 seconds\n1 gem installed\nRoberts-MBP:website-upgrade Rob$ rails t\nCould not find mysql2-0.5.2 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>Noticing that the mysql versions don't match here, I deleted my <code>Gemfile.lock</code> and tried to run the tests again:</p>\n\n<pre><code>Roberts-MBP:website-upgrade Rob$ rails t\nRoberts-MBP:website-upgrade Rob$ /Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.3/lib/mysql2.rb:36:in `require': dlopen(/Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.3/lib/mysql2/mysql2.bundle, 9): Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib\n  Referenced from: /usr/local/opt/mysql/lib/libmysqlclient.20.dylib\n  Reason: image not found - /Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.3/lib/mysql2/mysql2.bundle (LoadError)\n</code></pre>\n\n<p>Wondering if the problem could be anything to do with bundler, I ran <code>gem uninstall mysql2</code>, and checked that this actually deletes the directory <code>/Rob.rvm/gems/ruby-2.4.0/gems/mysql2-0.5.3/</code>. Then tried, as per <a href=\"https://bundler.io/v2.0/man/bundle-config.1.html\" rel=\"nofollow noreferrer\">https://bundler.io/v2.0/man/bundle-config.1.html</a> :</p>\n\n<pre><code> bundle config build.mysql2 --with-cppflags=-I/usr/local/opt/openssl@1.1/include --with-ldflags=-L/usr/local/opt/openssl@1.1/lib\nbundle install\nbundle exec rails t\n</code></pre>\n\n<p>But I still get the same error, which makes me wonder if this dependency on v.1.0 is hardcoded somehow.</p>\n\n<p>I tried downgrading the openssl version. I tried to do this with homebrew and could only see the new version. I googled around and used the script from <a href=\"https://github.com/kelaberetiv/TagUI/issues/86\" rel=\"nofollow noreferrer\">https://github.com/kelaberetiv/TagUI/issues/86</a>\nThe result was that now spring complained that it can't find the library for openssl@1.1.</p>\n\n<pre><code>Roberts-MBP:website-upgrade Rob$ rails t\n/Rob.rvm/gems/ruby-2.4.0/gems/spring-2.1.0/lib/spring/env.rb:3:in `require': dlopen(/Rob.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin18/digest/md5.bundle, 9): Library not loaded: /usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib (LoadError)\n  Referenced from: /Rob.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin18/digest/md5.bundle\n</code></pre>\n\n<p>I ran <code>brew install openssl</code> to reset.</p>\n\n<p>======THE FIX==========================================</p>\n\n<p>Trying to reproduce this last step this morning, however, I got a mess, and it was in disentangling this mess that I fixed my problem. I was getting messages like <code>1.0.2t is already installed</code> when I tried to run <code>brew uninstall</code>. I updated my locate database and found that I actually had both 1.0.2 and @1.1 installed (presumably after trying this yesterday, but mysql2 was looking in the directory symlinked against @1.1. Changing the symlink to 1.0.2, I can now run my tests.</p>\n\n<p>But this is awful. I have no way of knowing if some other gem is going to look in that symlink for v1.1. It feels like there should be a systematic way of specifying system dependencies of gems - either telling a gem which version to use, or at least a proper way of running multiple versions concurrently and telling a gem where to find the version it needs. How can I do this properly? </p>\n\n<p>EDIT in response to comment: Here's my gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.4.0'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\ngem 'rails', '~&gt; 5.1.2'\ngem 'postmark-rails', '~&gt; 0.15.0'\ngem 'mysql2'\ngem 'passenger', '= 5.1.5'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'jquery-rails'\ngem 'figaro'\ngem 'fastercsv', '~&gt; 1.5', '&gt;= 1.5.5'\ngem 'jwt'\ngem 'rack-cors'\ngem 'rest-client'\ngem 'sentry-raven'\ngem 'activerecord-session_store'\ngem 'timecop'\ngem 'webpacker', '~&gt; 3.5'\ngem 'write_xlsx'\n\ngem 'pry-rails'\n\ngem 'ddtrace'\n\ngroup :development, :test do\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'capybara', '~&gt; 2.13'\n  gem 'selenium-webdriver'\n  gem 'minitest', '5.10.3'\nend\n\ngroup :development do\n\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "factory-bot"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1575373502, "post_id": 59156360, "comment_id": 104536893, "body": "Do you want to prevent the attribute changing system wide or just in your specs?"}, {"owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1575373705, "post_id": 59156360, "comment_id": 104537008, "body": "Just in the factory. Added an example to clarify."}], "answers": [{"comments": [{"owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "edited": false, "score": 0, "creation_date": 1575387024, "post_id": 59156600, "comment_id": 104545223, "body": "This is cool, thanks. Unfortunately in my case, the error comes earlier from an <code>association</code> and it fails before <code>after(:build)</code> so I would need an earlier intervention if one exists. This issue explains how associations are saved before the <code>after(:build)</code> hook of the parent: <a href=\"https://github.com/thoughtbot/factory_bot/issues/649\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_bot/issues/649</a>"}], "tags": [], "owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "is_accepted": false, "score": 3, "last_activity_date": 1575374293, "creation_date": 1575374293, "answer_id": 59156600, "question_id": 59156360, "link": "https://stackoverflow.com/questions/59156360/disable-setting-attribute-in-factorybot/59156600#59156600", "title": "Disable setting attribute in FactoryBot", "body": "<p>You could use <code>after(:build)</code> in your factory:</p>\n\n<pre><code>factory :my_model do\n  active { true }\n\n  after(:build) do |model|\n    unless model.active\n      raise FactoryBot::InvalidFactoryError, 'active cannot be false'\n    end\n  end\nend\n</code></pre>\n\n<p>You may want to define your own exception type rather than using the FactoryBot <code>InvalidFactoryError</code>.</p>\n"}], "owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575387429, "creation_date": 1575373469, "last_edit_date": 1575387429, "question_id": 59156360, "link": "https://stackoverflow.com/questions/59156360/disable-setting-attribute-in-factorybot", "title": "Disable setting attribute in FactoryBot", "body": "<p>I have an ActiveRecord model with an <code>active</code> field. I have some validations which will certainly fail if <code>active = true</code> upon creation. I'm setting <code>active</code> to false in my factory by default, but I'd like to go the extra mile and disable the possibility of changing it, preferably with a meaningful error message. How can I do that?</p>\n\n<p>A valid use case would look like this:</p>\n\n<pre><code>my_model = create(:my_model) # my_model.active == false\n# do some other setup\nmy_model.update!(active: true)\n</code></pre>\n\n<p>What I want to achieve is this</p>\n\n<pre><code>create(:my_model, active: true)\n# =&gt; raise FactoryOptionsNotAllowed: cannot be active upon creation\n</code></pre>\n\n<p>Unfortunately, <code>after(:build)</code> is not bulletproof as <a href=\"https://github.com/thoughtbot/factory_bot/issues/649\" rel=\"nofollow noreferrer\">it runs after associations are saved</a>. So when an error happens during saving the associaition, it will not reach <code>after(:build)</code>.</p>\n"}, {"tags": ["ruby", "macos", "openssl", "macos-mojave"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575423003, "post_id": 59155991, "comment_id": 104558838, "body": "2.1.5 is no longer supported so it could take some trickery to get it working. Only 2.4 through 2.6 are currently maintained. Is there anything preventing upgrading? Ruby&#39;s been pretty good lately and there&#39;s usually no serious surprises. OpenSSL itself has had some <i>severe</i> security issues that make running older versions highly risky."}, {"owner": {"reputation": 151, "user_id": 10786415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b0f572d70cab47108dab17de5c5b18?s=128&d=identicon&r=PG&f=1", "display_name": "RB19", "link": "https://stackoverflow.com/users/10786415/rb19"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1575436081, "post_id": 59155991, "comment_id": 104561650, "body": "yes, actually we are not planning to upgrade it yet."}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1577586272, "post_id": 59155991, "comment_id": 105204330, "body": "See <a href=\"https://stackoverflow.com/questions/59337838/openssl-1-0-2m-on-macos\">OpenSSL 1.0.2m on macOS</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 2, "last_activity_date": 1575381522, "creation_date": 1575381522, "answer_id": 59158774, "question_id": 59155991, "link": "https://stackoverflow.com/questions/59155991/downgrade-to-openssl-version-1-0-from-1-1-on-mac/59158774#59158774", "title": "Downgrade to OPENSSL version 1.0 from 1.1 on mac", "body": "<p>I've seen this issue on <a href=\"https://github.com/rvm/rvm/issues/4819\" rel=\"nofollow noreferrer\">rvm project</a> where you can find more detail about this.</p>\n\n<p>This step works for me, we have to wait for some official fix.</p>\n\n<ol>\n<li>Install openssl via rvm pkg install openssl</li>\n<li>Remove and reinstall rubies with rvm reinstall  2.1.5 \n--with-openssl-dir=$HOME/.rvm/usr</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 882, "user_id": 328435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dab002bb7b8f128fa6f49a6ae78f5c6?s=128&d=identicon&r=PG", "display_name": "Gong Pengjun", "link": "https://stackoverflow.com/users/328435/gong-pengjun"}, "is_accepted": false, "score": 1, "last_activity_date": 1606896717, "creation_date": 1606896717, "answer_id": 65104336, "question_id": 59155991, "link": "https://stackoverflow.com/questions/59155991/downgrade-to-openssl-version-1-0-from-1-1-on-mac/65104336#65104336", "title": "Downgrade to OPENSSL version 1.0 from 1.1 on mac", "body": "<p>I have try the <a href=\"https://github.com/kelaberetiv/TagUI/issues/86#issuecomment-701531100\" rel=\"nofollow noreferrer\">solution</a> on Mac OS X Catalina and it works.</p>\n<ol>\n<li>Download the file: <a href=\"https://github.com/tebelorg/Tump/releases/download/v1.0.0/openssl.rb\" rel=\"nofollow noreferrer\">https://github.com/tebelorg/Tump/releases/download/v1.0.0/openssl.rb</a></li>\n<li>Run brew with the file downloaded: <pre>brew install openssl.rb</pre></li>\n</ol>\n"}], "owner": {"reputation": 151, "user_id": 10786415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b0f572d70cab47108dab17de5c5b18?s=128&d=identicon&r=PG&f=1", "display_name": "RB19", "link": "https://stackoverflow.com/users/10786415/rb19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5107, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1606896717, "creation_date": 1575372207, "question_id": 59155991, "link": "https://stackoverflow.com/questions/59155991/downgrade-to-openssl-version-1-0-from-1-1-on-mac", "title": "Downgrade to OPENSSL version 1.0 from 1.1 on mac", "body": "<p>I have ruby version 2.1.5 installed on my system.</p>\n\n<p>On running bundle install, I am getting \n\"Could not load OpenSSL.\nYou must recompile Ruby with OpenSSL support or change the sources in your Gemfile from 'https' to 'http'. Instructions for compiling with OpenSSL using RVM are available at\n<a href=\"http://rvm.io/packages/openssl\" rel=\"nofollow noreferrer\">http://rvm.io/packages/openssl</a>.\"</p>\n\n<p>My Gemfile has soures with http only.</p>\n\n<p>On executing \"rvm pkg install openssl\" :\n==> Formulae\ncurl-openssl                                 glib-openssl                                 openssl@1.1 \u2714                                homebrew/portable-ruby/portable-openssl</p>\n\n<p>There is no openssl@1.0 and openssl</p>\n\n<p>How to degrade to openssl@1.0 from 1.0.</p>\n\n<p>Already tried rvm reinstall 2.1.5 --with-openssl-dir=<code>brew --prefix openssl@1.0</code>\nBut it is of no use for me.</p>\n"}, {"tags": ["ruby", "openssl"], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1575387406, "last_edit_date": 1575387406, "creation_date": 1575386190, "answer_id": 59160178, "question_id": 59155310, "link": "https://stackoverflow.com/questions/59155310/ruby-not-getting-any-cipher-from-openssl/59160178#59160178", "title": "Ruby not getting any cipher from openssl", "body": "<p>The answer is correct, and you could not expect anything else.</p>\n\n<p>Source:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>DEFAULT_PARAMS = { # :nodoc:\n  :min_version =&gt; OpenSSL::SSL::TLS1_VERSION,\n  :verify_mode =&gt; OpenSSL::SSL::VERIFY_PEER,\n  :verify_hostname =&gt; true,\n  :options =&gt; -&gt; {\n    opts = OpenSSL::SSL::OP_ALL\n    opts &amp;= ~OpenSSL::SSL::OP_DONT_INSERT_EMPTY_FRAGMENTS\n    opts |= OpenSSL::SSL::OP_NO_COMPRESSION\n    opts\n   }.call\n}\n</code></pre>\n\n<p>Maybe you mean <code>Ciphers</code>?\nIn this case use:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts OpenSSL::Cipher.ciphers\n</code></pre>\n\n<p>Or use this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts `openssl ciphers -v 'DEFAULT:!PSK:!SRP'`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 1, "last_activity_date": 1575387065, "creation_date": 1575387065, "answer_id": 59160443, "question_id": 59155310, "link": "https://stackoverflow.com/questions/59155310/ruby-not-getting-any-cipher-from-openssl/59160443#59160443", "title": "Ruby not getting any cipher from openssl", "body": "<p>With newer Ruby versions (>= 2.4), and when using OpenSSL 1.1 or newer, Ruby doesn't explicitly override OpenSSL's default set of ciphers anymore as was done in previous versions. Previously, this was necessary since older OpenSSL versions included some insecure ciphers by default.</p>\n\n<p>With newer versions, Ruby relies on OpenSSL's default ciphers unless explicitly overwritten by yourself. You can get those by e.g. running <code>openssl ciphers -v 'DEFAULT:!PSK:!SRP'</code> on your shell.</p>\n\n<p>This behavior was changed (and explained) in the respective pull request at <a href=\"https://github.com/ruby/openssl/pull/66\" rel=\"nofollow noreferrer\">https://github.com/ruby/openssl/pull/66</a>.</p>\n"}], "owner": {"reputation": 1334, "user_id": 1447456, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/606d9f69e64fa4eddea4bada8802f7f2?s=128&d=identicon&r=PG", "display_name": "Francisco Albert", "link": "https://stackoverflow.com/users/1447456/francisco-albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 59160443, "answer_count": 2, "score": 0, "last_activity_date": 1575387406, "creation_date": 1575369934, "last_edit_date": 1575387167, "question_id": 59155310, "link": "https://stackoverflow.com/questions/59155310/ruby-not-getting-any-cipher-from-openssl", "title": "Ruby not getting any cipher from openssl", "body": "<p>I have ruby-2.6.2, and openssl@1.1 installed in my Mac. However Ruby is not getting any ssl ciphers.</p>\n\n<p>From the console I run this:</p>\n\n<pre><code>OpenSSL::SSL::SSLContext::DEFAULT_PARAMS\n# =&gt; {:min_version=&gt;769, :verify_mode=&gt;1, :verify_hostname=&gt;true, :options=&gt;2147614804}\n</code></pre>\n\n<p>In the output I was expecting a list of ciphers as well.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "visual-studio-code"], "comments": [{"owner": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "edited": false, "score": 0, "creation_date": 1575373549, "post_id": 59155147, "comment_id": 104536911, "body": "So it seems that the debug process does trigger as I get a REPL on the Debug Console, but none of the IDE bells and whistles like Call Stack / Variables state show up."}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "edited": false, "score": 0, "creation_date": 1575373457, "post_id": 59155218, "comment_id": 104536872, "body": "I know how to browse my gem and add a breakpoint. My issue is that when it hits the line the debug process doesn&#39;t trigger properly."}, {"owner": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "edited": false, "score": 0, "creation_date": 1575373647, "post_id": 59155218, "comment_id": 104536975, "body": "Sorry I wasn&#39;t clear enough with my question. I&#39;ve added a comment underneath. Thanks for helping out anyway !"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "edited": false, "score": 1, "creation_date": 1575373792, "post_id": 59155218, "comment_id": 104537046, "body": "No worries, I think the standard REPL is the most you can get from a pry point inside an engine but not 100% sure"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 3, "last_activity_date": 1575370182, "last_edit_date": 1575370182, "creation_date": 1575369646, "answer_id": 59155218, "question_id": 59155147, "link": "https://stackoverflow.com/questions/59155147/breakpoint-on-a-different-folder-in-a-rails-application-doesnt-work-well/59155218#59155218", "title": "Breakpoint on a different folder in a Rails application doesn&#39;t work well", "body": "<p><a href=\"https://stackoverflow.com/questions/21145216/how-can-i-see-the-source-code-of-a-gem-installed-on-my-machine\">How can I see the source code of a gem installed on my machine?</a> should help you</p>\n\n<p>If you need to edit the source code of say Devise, you would run:</p>\n\n<p><code>bundle open devise</code></p>\n\n<p>This will open the gem in your default text editor, allowing you to put breakpoints wherever needed.</p>\n\n<p>Alternatively to see where it's stored on your machine try:</p>\n\n<p><code>bundle show devise</code></p>\n"}, {"comments": [{"owner": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "edited": false, "score": 0, "creation_date": 1575386662, "post_id": 59158903, "comment_id": 104544990, "body": "Sure enough, but my intention is to sue the IDE&#39;s debugger :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 11957381, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LVInkREu-n0/AAAAAAAAAAI/AAAAAAAAAEY/lvopU3Dy0AA/photo.jpg?sz=128", "display_name": "henrich jones", "link": "https://stackoverflow.com/users/11957381/henrich-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1575381914, "creation_date": 1575381914, "answer_id": 59158903, "question_id": 59155147, "link": "https://stackoverflow.com/questions/59155147/breakpoint-on-a-different-folder-in-a-rails-application-doesnt-work-well/59158903#59158903", "title": "Breakpoint on a different folder in a Rails application doesn&#39;t work well", "body": "<p>You can use <code>gem 'pry-rescue'</code> and <code>gem 'pry-rails'</code> in your gemfile to debbug your code. Just put in your group development like this:</p>\n\n<p><code>group :development do\n  gem 'pry-rails'\n  gem 'pry-rescue'\nend</code></p>\n\n<p>in your code you can put \n<code>binding.pry</code></p>\n\n<p>and after that just run your application and your request will stop where you put the binding.pry</p>\n"}], "owner": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575381914, "creation_date": 1575369445, "last_edit_date": 1575373593, "question_id": 59155147, "link": "https://stackoverflow.com/questions/59155147/breakpoint-on-a-different-folder-in-a-rails-application-doesnt-work-well", "title": "Breakpoint on a different folder in a Rails application doesn&#39;t work well", "body": "<p>I'm debugging a Rails application that uses gems from my local environment. Is there a way to place a breakpoint in one of the gem's file and have it trigger when I debug my app ?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "edited": false, "score": 1, "creation_date": 1575370228, "post_id": 59154819, "comment_id": 104535081, "body": "Could you be more specific? What output you want to receive?"}, {"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "reply_to_user": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "edited": false, "score": 0, "creation_date": 1575370619, "post_id": 59154819, "comment_id": 104535330, "body": "@LucasM Sure! I need to pass data witch was only modified/deleted, not like now(he is passing whole page(all data). Like let&#39;s think that we have this output from the page <code>[&quot;01000340001001002&quot;, &quot;&quot;, &quot;2&quot;] [&quot;01000340001001003&quot;, &quot;&quot;, &quot;3A&quot;]</code>. So that is 2 values. I&#39;ve modifed the 3A, and now it becomes 16, so at the end i need to receive only 1 record =&gt; <code>[&quot;01000340001001003&quot;, &quot;autofillled_id&quot;, &quot;16&quot;]</code>. Because it has been modified."}, {"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "reply_to_user": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "edited": false, "score": 0, "creation_date": 1575370707, "post_id": 59154819, "comment_id": 104535389, "body": "Also it should work when you deleting value. So we have same output on the page and we modified the <code>3A</code> to nothing(deleted value), so at the end i should get only 1 record back =&gt; <code>[&quot;01000340001001003&quot;, &quot;&quot;, &quot;&quot;]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1575372587, "post_id": 59155842, "comment_id": 104536414, "body": "Thank you for your message! But unfortunately i can&#39;t use .on function because we use jQuery &lt; 1.7 on project and we can&#39;t change it. <code>bind</code> should be OK,"}, {"owner": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "reply_to_user": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1575449339, "post_id": 59155842, "comment_id": 104566354, "body": "Glad I could help. Next time when you ask a question, please add as many info as you can. jQuery &lt; 1.7 is very important constraint."}], "tags": [], "owner": {"reputation": 363, "user_id": 2272145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc232d2f2cf15b4b0481b8b8b8f66ba?s=128&d=identicon&r=PG", "display_name": "LucasM", "link": "https://stackoverflow.com/users/2272145/lucasm"}, "is_accepted": true, "score": 1, "last_activity_date": 1575371678, "creation_date": 1575371678, "answer_id": 59155842, "question_id": 59154819, "link": "https://stackoverflow.com/questions/59154819/check-if-value-in-text-filed-was-changed-and-post-it-js-rails/59155842#59155842", "title": "Check if value in text filed was changed and post it. JS. Rails", "body": "<p>You can use something like this: (this code was not tested)</p>\n\n<pre><code>var dataArray = [];\n\n$(function(){\n    $(document).on('change', 'input', function(){\n    var hid1 = $(this).data(\"hidden_val0\");\n    var hid2 = $(this).data(\"hidden_val1\");\n    var hid3 = $(this).data(\"hidden_val3\");\n    dataArray.push([hid1, hid2, hid3])\n  });\n});\n\n   $('.something_here').bind('click', function (event) {\n    event.preventDefault();\n    $.post('/do/it',\n        {\n            send_array: dataArray,\n            id: id\n        },\n        function (response) {\n           location.reload();\n        }\n    );\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 59155842, "answer_count": 1, "score": 0, "last_activity_date": 1575371678, "creation_date": 1575368419, "last_edit_date": 1575369774, "question_id": 59154819, "link": "https://stackoverflow.com/questions/59154819/check-if-value-in-text-filed-was-changed-and-post-it-js-rails", "title": "Check if value in text filed was changed and post it. JS. Rails", "body": "<p>So i'm having page, where we have <code>text_field</code>. The problem that when i press <code>submit</code> button, then he post full page(i mean each record that is on page). To exclude this, i need to check if the value has been changed in <code>text_field</code> or it has been removed. Do you have any ideas how to check it?</p>\n\n<p>P.S I'm having autocomplete on this field, so when he changes the number in text_field, then the hidden field <code>hidden_val0</code> is filled by number(but this is only when you change value, not remove it).</p>\n\n<p>Its HTML:</p>\n\n<pre><code>&lt;input autocomplete=\"off\" hidden_val0=\"hidden_val0\" id=\"add_109_01000340001001002_id\" name=\"add_109_01000340001001002[id]\" type=\"hidden\" value=\"111286507\"&gt;\n</code></pre>\n\n<p>This is js code that i'm using:</p>\n\n<pre><code>var NewArr = new Array();\n\n$('.something_here').bind('click', function () {\n    var id= $(this).attr('id');\n    collectID = $(\"[hidden_val0='hidden_val0'], [hidden_val1='hidden_val1'], [hidden_val2='hidden_val2']\")\n        .map(function(_, it){\n          return [it.value] // Collecting 3 values witch we should pass\n        })\n        .get();\n\n    for (var i=0; i&lt;collectID.length; i=i+3) {\n        NewArr.push(collectID.slice(i,i+3)); // Here we split values by 3\n    }\n\n    $.post('/do/it',\n        {\n            send_array: JSON.stringify(NewArr), // Pass them\n            id: id\n        },\n        function (response) {\n           location.reload();\n        }\n    );\n\n});\n</code></pre>\n\n<p>Its output:</p>\n\n<pre><code>[\"01000340001001001\", \"\", \"\"]\n[\"01000340001001002\", \"\", \"2\"]\n[\"01000340001001003\", \"\", \"3A\"]\n[\"01000340001001004\", \"\", \"3\"]\n[\"01000340001001005\", \"\", \"5\"]\n[\"01000340001001006\", \"\", \"6\"]\n[\"01000340001001007\", \"\", \"7\"]\n</code></pre>\n\n<p>How HTML looks like:</p>\n\n<pre><code>&lt;input autocomplete=\"off\" autocomplete_key=\"add_109\" hidden_val1=\"hidden_val1\" id=\"add_109_01000340001001002\" name=\"add_109_01000340001001002\" onkeyup=\"GetNumbers(this)\" size=\"3\" style=\"height: 10px\" type=\"text\" value=\"2\" class=\"ac_input\"&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "ruby-on-rails-5", "brakeman"], "answers": [{"tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": false, "score": 1, "last_activity_date": 1575419085, "last_edit_date": 1592644375, "creation_date": 1575418723, "answer_id": 59167270, "question_id": 59154781, "link": "https://stackoverflow.com/questions/59154781/brakeman-run-only-modified-file/59167270#59167270", "title": "Brakeman - Run only modified file", "body": "<p>Maybe you need to run something that gives you the files modified in the period you want, there are some tricks available to find the last (<code>Dir.glob(&quot;*&quot;).max_by {|f| File.mtime(f)}</code>) modified file, e.g. here:  <a href=\"https://stackoverflow.com/questions/4823507/ruby-finding-most-recently-modified-file\">ruby finding the most recently updated file</a>.</p>\n<p>Playing with it, e.g. with the time and not using max_by should give you more / a list of files.</p>\n<p>But ...</p>\n<p>From the <a href=\"https://brakemanscanner.org/docs/options/\" rel=\"nofollow noreferrer\">brakeman documentation</a>:</p>\n<blockquote>\n<p>To skip certain files use:</p>\n<p><code>brakeman --skip-files file1,file2,etc</code></p>\n<p><strong>Note Brakeman does \u201cwhole program\u201d analysis, therefore skipping a file may affect warning results from more than just that one file.</strong></p>\n<p>The inverse but even more dangerous option is to specific which files to scan:</p>\n<p><code>brakeman --only-files some_file,some_dir</code></p>\n<p><strong>Again, since Brakeman looks at the whole program, it is very likely not going t o behave as expected when scanning a subset of files. Also, if certain files are excluded Brakeman may not function at all.</strong></p>\n</blockquote>\n<p>Maybe you need to tell us why you want to scan only certain files ... the options mentioned seems to be sensible for me in your case.</p>\n"}], "owner": {"reputation": 77, "user_id": 5217508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b7960034bcda62113c4dff759296b4?s=128&d=identicon&r=PG", "display_name": "honestraj", "link": "https://stackoverflow.com/users/5217508/honestraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "closed_date": 1575449785, "answer_count": 1, "score": 0, "last_activity_date": 1575438997, "creation_date": 1575368324, "last_edit_date": 1575438997, "question_id": 59154781, "link": "https://stackoverflow.com/questions/59154781/brakeman-run-only-modified-file", "closed_reason": "Not suitable for this site", "title": "Brakeman - Run only modified file", "body": "<p>How to run the Security Analysis Tool brakeman only for modified files? Below are the gem details:</p>\n\n<ol>\n<li>gem 'brakeman', '4.6.1'</li>\n<li>Ruby: 2.6.3</li>\n</ol>\n"}, {"tags": ["ruby", "jemalloc"], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 427219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119f0492b4596d6e81cf5dcf9ae30883?s=128&d=identicon&r=PG", "display_name": "Lloyd Watkin", "link": "https://stackoverflow.com/users/427219/lloyd-watkin"}, "edited": false, "score": 0, "creation_date": 1575368404, "post_id": 59154710, "comment_id": 104533953, "body": "Thanks! I do indeed see <code>jemalloc</code> in the list: &quot;$ ruby -r rbconfig -e &quot;puts RbConfig::CONFIG[&#39;MAINLIBS&#39;]&quot; -lz -lpthread -lrt -lrt -ljemalloc -lgmp -ldl -lcrypt -lm&quot;"}, {"owner": {"reputation": 437, "user_id": 427219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119f0492b4596d6e81cf5dcf9ae30883?s=128&d=identicon&r=PG", "display_name": "Lloyd Watkin", "link": "https://stackoverflow.com/users/427219/lloyd-watkin"}, "edited": false, "score": 0, "creation_date": 1575374013, "post_id": 59154710, "comment_id": 104537167, "body": "Thanks. Sadly not really seeing an improvement in memory usage though. Back to the investigation."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 5, "last_activity_date": 1575368063, "creation_date": 1575368063, "answer_id": 59154710, "question_id": 59154333, "link": "https://stackoverflow.com/questions/59154333/ruby-2-6-5-with-jemalloc/59154710#59154710", "title": "Ruby 2.6.5 with jemalloc", "body": "<p>Try:</p>\n\n<pre><code>puts RbConfig::CONFIG['MAINLIBS']\n</code></pre>\n\n<p>And check if <code>-ljemalloc</code> is in the output. </p>\n\n<p>This behavior has changed recently (in 2.6.x, to be precise).</p>\n"}, {"tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": false, "score": 3, "last_activity_date": 1585302974, "creation_date": 1585302974, "answer_id": 60883641, "question_id": 59154333, "link": "https://stackoverflow.com/questions/59154333/ruby-2-6-5-with-jemalloc/60883641#60883641", "title": "Ruby 2.6.5 with jemalloc", "body": "<p>For some reason, the accepted answer does not work for me (Heroku), but this:</p>\n\n<p><code>MALLOC_CONF=stats_print:true ruby -e \"exit\"</code></p>\n\n<p>has done the trick.</p>\n\n<p>If you have some stats ouput, means it's working.</p>\n\n<p>source: <a href=\"https://github.com/gaffneyc/heroku-buildpack-jemalloc/issues/5#issuecomment-499932026\" rel=\"nofollow noreferrer\">https://github.com/gaffneyc/heroku-buildpack-jemalloc/issues/5#issuecomment-499932026</a></p>\n"}, {"tags": [], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "is_accepted": false, "score": 0, "last_activity_date": 1618331988, "creation_date": 1618331988, "answer_id": 67078995, "question_id": 59154333, "link": "https://stackoverflow.com/questions/59154333/ruby-2-6-5-with-jemalloc/67078995#67078995", "title": "Ruby 2.6.5 with jemalloc", "body": "<p>For ones using <code>LD_PRELOAD</code> and not building ruby directly, a more complete answer would be:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>RbConfig::CONFIG['MAINLIBS'].include?(&quot;jemalloc&quot;) || ENV['LD_PRELOAD'].include?(&quot;jemalloc&quot;)\n</code></pre>\n<p>Of course this is not enough to tell if jemalloc really is working, as for the accepted answer!</p>\n"}], "owner": {"reputation": 437, "user_id": 427219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119f0492b4596d6e81cf5dcf9ae30883?s=128&d=identicon&r=PG", "display_name": "Lloyd Watkin", "link": "https://stackoverflow.com/users/427219/lloyd-watkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 1, "accepted_answer_id": 59154710, "answer_count": 3, "score": 1, "last_activity_date": 1618331988, "creation_date": 1575366891, "question_id": 59154333, "link": "https://stackoverflow.com/questions/59154333/ruby-2-6-5-with-jemalloc", "title": "Ruby 2.6.5 with jemalloc", "body": "<p>I've built and installed rub 2.6.5 from source with jemalloc. However when I check to see if its there I'm not seeing an entry.  Is there something else I should have been doing?</p>\n\n<pre><code>ubuntu:~$ uname -a\nLinux ip-10-0-3-198 4.15.0-1032-aws #34-Ubuntu SMP Thu Jan 17 15:18:09 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\nubuntu:~$ ./configure --enable-shared --with-jemalloc\nubuntu:~$ make\nubuntu:~$ make install\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>ubuntu:~$ ruby -r rbconfig -e \"puts RbConfig::CONFIG['LIBS']\"\n-lm \n</code></pre>\n\n<p>Tracking memory usage once deployed I'm also not seeing a drop compared to similarly configured servers without jemalloc in place.</p>\n\n<p>I'm not sure what I need to be doing in order to get jemalloc working.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "algorithm", "tree"], "comments": [{"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 0, "creation_date": 1575369363, "post_id": 59153429, "comment_id": 104534528, "body": "Looks like you are trying to create a Trie like data structure. Is that correct?"}], "answers": [{"comments": [{"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575401313, "post_id": 59161935, "comment_id": 104552187, "body": "@Cary: It really doesn&#39;t matter if I don&#39;t know(and I don&#39;t account for) situations which run down the same branch... What do you you do with the string at the end of the branch if you extend the branch?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575490591, "post_id": 59161935, "comment_id": 104588523, "body": "I was merely confirming that your code worked for the example as you said you had not tested it. I&#39;m not sure I understand what you mean by &quot;...run down the same branch&quot;, but if <code>&quot;usr&#47;lib&#47;folder2&#47;cat&#47;&quot;</code> is added to <code>paths</code> an exception is raised by the line <code>acc[n] = {} if acc[n].nil?</code>: <code>IndexError (string not matched)</code>. At that point <code>acc #=&gt; &#39;usr&#47;lib&#47;folder2&#47;&#39;</code> and <code>n =&gt; &#39;cat&#39;</code>."}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575496208, "post_id": 59161935, "comment_id": 104590582, "body": "@Cary I was never a big fan of building a complex data structure with straight method calls. If I had a choice... I&#39;d solve this by creating a proper module for the data structure."}], "tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 0, "last_activity_date": 1575392823, "last_edit_date": 1575392823, "creation_date": 1575392235, "answer_id": 59161935, "question_id": 59153429, "link": "https://stackoverflow.com/questions/59153429/ruby-trees-with-full-path-on-leaves/59161935#59161935", "title": "Ruby Trees with full path on leaves", "body": "<p>This will do it but its not tested nor is it very Rubyish...</p>\n\n<pre><code>paths = [\"home\", \"usr/lib/folder1/\", \"usr/lib/folder2/\"]\n\nans =\n  paths.reduce({}){\n  |acc, e|\n  last = e.split('/').last\n  e.split('/').reduce(acc){\n    |acc, n|\n    acc[n] = {} if acc[n].nil?\n    acc[n] = e if n == last\n    acc[n]\n  }\n  acc\n}\n\np ans\n</code></pre>\n\n<p>What's your strategy for adding more paths?I.E. If you have to add another path like \"home/user/data\" and \"/home/user/docs\" or \"usr/lib/folder1/data\" and \"usr/lib/folder2/data\", what's your strategy?</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1575418105, "last_edit_date": 1575418105, "creation_date": 1575394135, "answer_id": 59162439, "question_id": 59153429, "link": "https://stackoverflow.com/questions/59153429/ruby-trees-with-full-path-on-leaves/59162439#59162439", "title": "Ruby Trees with full path on leaves", "body": "<p>This could be solved recursively.</p>\n\n<pre><code>def recurse(arr, arr_build = [])\n  return arr_build.join('/') if arr == [[]]\n  arr.group_by { |a| a.first }.\n      transform_values { |v| recurse(v.map { |a| a.drop(1) },\n        arr_build + [v.first.first]) }\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>recurse(paths.map { |s| s.split('/') })\n  #=&gt; {\"home\"=&gt;\"home\",\n  #    \"usr\"=&gt;{\"lib\"=&gt;{\"folder1\"=&gt;\"usr/lib/folder1\",\n  #                    \"folder2\"=&gt;\"usr/lib/folder2\"}}} \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a>.</p>\n\n<p>Note that when</p>\n\n<pre><code>arr = paths.map { |s| s.split('/') }\n  #=&gt; [[\"home\"], [\"usr\", \"lib\", \"folder1\"], [\"usr\", \"lib\", \"folder2\"]] \n</code></pre>\n\n<p>we find that</p>\n\n<pre><code>arr.group_by { |a| a.first }\n  #=&gt; {\"home\"=&gt;[[\"home\"]],\n  #    \"usr\"=&gt;[[\"usr\", \"lib\", \"folder1\"], [\"usr\", \"lib\", \"folder2\"]]} \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5268861, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mz4gGKLqPis/AAAAAAAAAAI/AAAAAAAAAFY/OwZFVz4LOK0/photo.jpg?sz=128", "display_name": "Joe Salman", "link": "https://stackoverflow.com/users/5268861/joe-salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1575418105, "creation_date": 1575363697, "last_edit_date": 1575367174, "question_id": 59153429, "link": "https://stackoverflow.com/questions/59153429/ruby-trees-with-full-path-on-leaves", "title": "Ruby Trees with full path on leaves", "body": "<p>I have an array of paths:</p>\n\n<pre><code>    paths = [\"home\", \"usr/lib/folder1/\", \"usr/lib/folder2/\"]\n</code></pre>\n\n<p>I tried to make a tree with full path on the ends (leaves):</p>\n\n<pre><code>    {\"home\" =&gt; \"home\", \"usr\" =&gt; {\"lib\" =&gt; {\"folder1\" =&gt; \"usr/lib/folder1/\", \"folder2\" =&gt; \"usr/lib/folder2/\"}}}\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>  paths.each do |path|\n    current = tree\n    path.split('/').inject('') do |_sub_path, dir|\n      sub_path = File.join(dir)\n      current[sub_path] ||= {path =&gt; {}}\n      current = current[sub_path]\n      sub_path\n    end\n end\n</code></pre>\n\n<p>Can you show me the right way for my question?\nThis is my first question on SO. Sorry if my English bad.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 3, "creation_date": 1575362314, "post_id": 59152908, "comment_id": 104530586, "body": "please, paste <code>app&#47;controllers&#47;products_controller.rb</code>"}, {"owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "edited": false, "score": 1, "creation_date": 1575363303, "post_id": 59152908, "comment_id": 104531083, "body": "You have a syntax error on line 72 in your <code>ProductsController</code>"}], "answers": [{"tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1575363273, "creation_date": 1575363273, "answer_id": 59153308, "question_id": 59152908, "link": "https://stackoverflow.com/questions/59152908/can-not-run-rails-server/59153308#59153308", "title": "Can not run rails server", "body": "<p>According to the error, in <code>products_controller</code> there's a typo in this line</p>\n\n<pre><code>params.require(:product).permit(:\\, :title, ...)\n</code></pre>\n\n<p>Remove <code>:\\</code> from the list and try again.</p>\n"}], "owner": {"reputation": 21, "user_id": 12285952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d516bea3e2d44916d479c525cef27a6?s=128&d=identicon&r=PG&f=1", "display_name": "nguyencuc2186", "link": "https://stackoverflow.com/users/12285952/nguyencuc2186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "closed_date": 1575387843, "answer_count": 1, "score": -1, "last_activity_date": 1575363273, "creation_date": 1575361764, "question_id": 59152908, "link": "https://stackoverflow.com/questions/59152908/can-not-run-rails-server", "closed_reason": "Not suitable for this site", "title": "Can not run rails server", "body": "<p>I am trying to make a very simple Rails program like this. At first, I made something in Rails by this command:</p>\n\n<p><code>rails generate scaffold Product \\ title:string desciption:text image_url:string price:decimal</code></p>\n\n<p>Seems everything run ok, then I ran this command <code>rails db:migrate</code> it was ok, but when I ran <code>rails server</code> I got those problem</p>\n\n<p><code>=&gt; Booting Puma\n=&gt; Rails 6.0.1 application starting in development\n=&gt; Run rails server --help for more startup options\n*** SIGUSR2 not implemented, signal based restart unavailable!\n*** SIGUSR1 not implemented, signal based restart unavailable!\n*** SIGHUP not implemented, signal based logs reopening unavailable!\nPuma starting in single mode...\n* Version 4.3.0 (ruby 2.6.4-p104), codename: Mysterious Traveller\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://[::1]:3000\n* Listening on tcp://127.0.0.1:3000\nUse Ctrl-C to stop</code></p>\n\n<p><code>Started GET \"/products\" for ::1 at 2019-12-03 14:29:37 +0700\n   (3.0ms)  SELECT sqlite_version(*)\n   (0.4ms)  SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC</code></p>\n\n<p><code>SyntaxError (C:/Users/xxx/Desktop/xxx/X/app/controllers/products_controller.rb:72: syntax error, unexpected backslash, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END\n...ams.require(:product).permit(:\\, :title, :desciption, :image...\n...^):</code></p>\n\n<p><code>app/controllers/products_controller.rb:72: syntax error, unexpected backslash, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END\napp/controllers/products_controller.rb:72: syntax error, unexpected backslash, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END\napp/controllers/products_controller.rb:72: syntax error, unexpected backslash, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END</code></p>\n\n<p>I am very confuse because of this problem? I am a newbie and trying to make a simple program, so please help me, thank you very much.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "fastjsonapi"], "comments": [{"owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1575630927, "post_id": 59152158, "comment_id": 104640524, "body": "Add to question full serializer pls."}], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1575536656, "post_id": 59155081, "comment_id": 104602049, "body": "So that do you think?"}, {"owner": {"reputation": 71, "user_id": 12472446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAJ8JLEaYe7M8-t6dm1m13l1klIlIpuRmetXqQnf-I=k-s128", "display_name": "Srimathi G", "link": "https://stackoverflow.com/users/12472446/srimathi-g"}, "edited": false, "score": 0, "creation_date": 1575623230, "post_id": 59155081, "comment_id": 104636639, "body": "Here paginate(pagy) = {links: {first: &quot; &quot;, next: &quot; &quot;, last: &quot; &quot;}}, if i follow like u said, links are not rendering automatically."}], "tags": [], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1575460179, "last_edit_date": 1575460179, "creation_date": 1575369233, "answer_id": 59155081, "question_id": 59152158, "link": "https://stackoverflow.com/questions/59152158/pass-current-user-and-links-together-in-fast-jsonapi-in-rails/59155081#59155081", "title": "Pass current_user and links together in fast_jsonapi, in rails", "body": "<p>Use something like this: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>render json: AreaSerializer.new(\n               Area.all, \n               { params: { paginate: paginate(pagy), current_user: @current_user } }\n    ), status: ok\n</code></pre>\n\n<p>Serializer</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>attributes :nodes do |area, params|\n  ...\n  params[:current_user]\n  params[:paginate]\n  ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 12472446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAJ8JLEaYe7M8-t6dm1m13l1klIlIpuRmetXqQnf-I=k-s128", "display_name": "Srimathi G", "link": "https://stackoverflow.com/users/12472446/srimathi-g"}, "is_accepted": true, "score": 3, "last_activity_date": 1575872345, "creation_date": 1575872345, "answer_id": 59243472, "question_id": 59152158, "link": "https://stackoverflow.com/questions/59152158/pass-current-user-and-links-together-in-fast-jsonapi-in-rails/59243472#59243472", "title": "Pass current_user and links together in fast_jsonapi, in rails", "body": "<p>I tried another way and it was working,</p>\n\n<p><strong>In Controller</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>areas = Area.all\n\noptions = { \n            links: paginate(pagy), \n            params: { current_user: @current_user } \n          }\n\nrender json: AreaSerializer.new(areas, options),\n       status: ok\n</code></pre>\n\n<p><strong>In serializer</strong></p>\n\n<pre><code>attributes :nodes do |area, params|\n  area.users.where.not(id: params[:current_user].id)\nend\n</code></pre>\n\n<p>And the links key is rendering automatically in Serializer.</p>\n\n<hr>\n\n<h3>Example output received by front-end:</h3>\n\n<pre><code>{\n  data: [\n    {},\n    {} // areas hash\n  ],\n  links: {\n    first: \"\",\n    last: \"\",\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 12472446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAJ8JLEaYe7M8-t6dm1m13l1klIlIpuRmetXqQnf-I=k-s128", "display_name": "Srimathi G", "link": "https://stackoverflow.com/users/12472446/srimathi-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 59243472, "answer_count": 2, "score": 3, "last_activity_date": 1575872345, "creation_date": 1575358449, "last_edit_date": 1592644375, "question_id": 59152158, "link": "https://stackoverflow.com/questions/59152158/pass-current-user-and-links-together-in-fast-jsonapi-in-rails", "title": "Pass current_user and links together in fast_jsonapi, in rails", "body": "<p>Rails version : 6.0.0\nRuby version : 2.6.3</p>\n<h1>controller</h1>\n<pre><code>render json: AreaSerializer.new(\n      Area.all, paginate(pagy), params: { current_user: current_user }\n    ), status: ok\n</code></pre>\n<h1>serializer</h1>\n<pre><code>attributes :nodes do |area, params|\n...\nend\n</code></pre>\n<p>Error:</p>\n<pre><code>ArgumentError (wrong number of arguments (given 3, expected 1..2)):\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1575358517, "post_id": 59151851, "comment_id": 104529139, "body": "Ruby doesn&#39;t provide direct access to an object&#39;s internal instance variable table."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575363498, "post_id": 59151851, "comment_id": 104531183, "body": "my go-to way to make a hash from array (if you use active support) is <code>instance_variables.index_by(&amp;:itself).transform_values(&amp;meth&zwnj;&#8203;od(:instance_variabl&zwnj;&#8203;e_get))</code>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575372666, "post_id": 59151851, "comment_id": 104536470, "body": "@maxpleaner : Nice idea, but I don&#39;t use active support."}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1575372773, "post_id": 59153120, "comment_id": 104536530, "body": "Great answer. What is the reason, that you consider <code>.to_h</code> simpler than <code>Hash::[]</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1575372900, "post_id": 59153120, "comment_id": 104536589, "body": "It&#39;s mostly the fact that it reads left-to-right instead of inside-out."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1575362589, "creation_date": 1575362589, "answer_id": 59153120, "question_id": 59151851, "link": "https://stackoverflow.com/questions/59151851/calculating-a-map-of-instance-variables/59153120#59153120", "title": "Calculating a map of instance variables", "body": "<blockquote>\n  <p>This works of course, but I wonder whether there isn't a simpler way to achieve the same result.</p>\n</blockquote>\n\n<p>There are some slight simplifications that you could do:</p>\n\n<ul>\n<li>Use <a href=\"https://ruby-doc.org/core/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>Array#to_h</code></a> instead of <a href=\"https://ruby-doc.org/core/Hash.html#method-c-5B-5D\" rel=\"nofollow noreferrer\"><code>Hash::[]</code></a>.</li>\n<li>Use <a href=\"https://ruby-doc.org/core/Array.html#method-i-zip\" rel=\"nofollow noreferrer\"><code>Array#zip</code></a>.</li>\n<li>Use point-free style using <a href=\"https://ruby-doc.org/core/Object.html#method-i-method\" rel=\"nofollow noreferrer\"><code>Object#method</code></a> or something like <a href=\"https://bugs.ruby-lang.org/issues/12125\" rel=\"nofollow noreferrer\">the <em>method reference operator</em></a> if that is ever added to Ruby.</li>\n</ul>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module M\n  def self.ivar_map\n    instance_variables.zip(instance_variables.map(&amp;method(:instance_variable_get))).to_h\n  end\nend\n</code></pre>\n\n<p>or with the experimental (and removed again in 2.7.0-preview3) method reference operator:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module M\n  def self.ivar_map\n    instance_variables.zip(instance_variables.map(&amp;self.:instance_variable_get)).to_h\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>After all, Ruby somehow has to maintain such a symbol table already, mapping the variables to their content.</p>\n</blockquote>\n\n<p>Actually, that is not true. Several Ruby Implementations (including YARV, the most widely-used one) optimize instance variables to some extent. E.g. I believe YARV stores up to three instance variables in the object header directly, without using an instance variable table.</p>\n\n<p>And YARV is on the more simple side when it comes to optimizations. Other implementations like Rubinius, JRuby, TruffleRuby, and RubyOMR perform much more sophisticated optimizations.</p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59153120, "answer_count": 1, "score": 0, "last_activity_date": 1575362589, "creation_date": 1575357114, "last_edit_date": 1575357968, "question_id": 59151851, "link": "https://stackoverflow.com/questions/59151851/calculating-a-map-of-instance-variables", "title": "Calculating a map of instance variables", "body": "<p>My module method should return a Hash, where the keys are symbols denoting the instance variables of <code>self</code> and the Hash values are their respective values. I came up with the following solution:</p>\n\n<pre><code>module M\n\n  def self.set\n      @foo = 5\n  end\n\n  def self.ivar_map\n    Hash[instance_variables.map{|iv| [iv, instance_variable_get(iv)]}]\n  end\n\nend\n\nM.set\nM.ivar_map # =&gt; {:@foo=&gt;5}\n</code></pre>\n\n<p>This works of course, but I wonder whether there isn't a simpler way to achieve the same result. After all, Ruby somehow has to maintain such a symbol table already, mapping the variables to their content.</p>\n"}, {"tags": ["ruby", "encryption", "devise", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "is_accepted": true, "score": 0, "last_activity_date": 1575387343, "last_edit_date": 1575387343, "creation_date": 1575368845, "answer_id": 59154944, "question_id": 59151611, "link": "https://stackoverflow.com/questions/59151611/invalid-reset-password-token-with-multiple-app-servers/59154944#59154944", "title": "Invalid Reset Password token with multiple app servers", "body": "<p>The token is generated and decrypted using secret_key_base, since they are different in these two services, everything does not work.</p>\n\n<p>You need to register the same secret_key_base in your services.</p>\n"}], "owner": {"reputation": 3, "user_id": 10257887, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BIEonJMcjCw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMTgCtL-zG4EkyfMQf357666PLlyQ/mo/photo.jpg?sz=128", "display_name": "Vivek Nanda", "link": "https://stackoverflow.com/users/10257887/vivek-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59154944, "answer_count": 1, "score": 0, "last_activity_date": 1575387343, "creation_date": 1575356112, "question_id": 59151611, "link": "https://stackoverflow.com/questions/59151611/invalid-reset-password-token-with-multiple-app-servers", "title": "Invalid Reset Password token with multiple app servers", "body": "<p><strong>Environment</strong></p>\n\n<p>Ruby ruby-2.5.3(RVM)</p>\n\n<p>Rails 5.2.3</p>\n\n<p>Devise 4.7.0</p>\n\n<p><strong>Issue</strong></p>\n\n<p>The issue with decrypt reset_password_token from the token which we get from reset password instructions email using with two app servers. But, when we get a request to one of the app servers it is working fine but not another app server. Maybe, It is working fine from the server-generated reset password token encrypted. Please check below full details.</p>\n\n<p><strong>Email URL</strong> -> /users/password/edit?reset_password_token=tNw1nqXqAa6c8Y9yUkGg</p>\n\n<p><strong>APP Server 1</strong> -> decrypted token with above token -> 6376d5b06682e8c0e627458a6a5654706c30a61ef19c1b2a985fbaa1aade1072</p>\n\n<p><strong>APP Server 2</strong> -> decrypted token with above email token -> b1040564c63d8f3336bddc050f06a6e4b04c6df06718643f7b9bea050c02631a</p>\n\n<p>When request sends to APP server 2 it will work fine because in the database this reset password token got saved. But, If request sends to the APP server 1 not working. I need a solution to seamless with any APP server. It might be an issue with encrypting or decrypt token within APP servers. Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1575356156, "post_id": 59151585, "comment_id": 104528233, "body": "please, paste the migration file"}, {"owner": {"reputation": 21, "user_id": 12285952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d516bea3e2d44916d479c525cef27a6?s=128&d=identicon&r=PG&f=1", "display_name": "nguyencuc2186", "link": "https://stackoverflow.com/users/12285952/nguyencuc2186"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1575356438, "post_id": 59151585, "comment_id": 104528340, "body": "I am very sorry for my deficiency. Here is my <code>20191203044840_create_products</code> in <code>C:\\Users\\xxx\\Desktop\\xxx\\X\\db\\migrate</code>  <code>class CreateProducts &lt; ActiveRecord::Migration[6.0]   def change     create_table :products do |t|       t.string :\\       t.string :title       t.text :desciption       t.string :image_url       t.decimal :price, precision: 8, scale: 2        t.timestamps     end   end end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12285952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d516bea3e2d44916d479c525cef27a6?s=128&d=identicon&r=PG&f=1", "display_name": "nguyencuc2186", "link": "https://stackoverflow.com/users/12285952/nguyencuc2186"}, "edited": false, "score": 0, "creation_date": 1575358929, "post_id": 59151731, "comment_id": 104529311, "body": "Thank you very much! I can solve my problem by your comment!"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 21, "user_id": 12285952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d516bea3e2d44916d479c525cef27a6?s=128&d=identicon&r=PG&f=1", "display_name": "nguyencuc2186", "link": "https://stackoverflow.com/users/12285952/nguyencuc2186"}, "edited": false, "score": 0, "creation_date": 1575359116, "post_id": 59151731, "comment_id": 104529379, "body": "Good to know. If it helps, please consider upvoting&amp;accepting."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 2, "last_activity_date": 1575356609, "creation_date": 1575356609, "answer_id": 59151731, "question_id": 59151585, "link": "https://stackoverflow.com/questions/59151585/can-not-create-database-in-rails-using-dbmigrate/59151731#59151731", "title": "Can not create database in rails using db:migrate?", "body": "<p>Your migration file was incorrectly generated (probably because of <code>\\</code> in the scaffold command). To fix it, remove <code>:\\ t.string</code>:</p>\n\n<pre><code>class CreateProducts &lt; ActiveRecord::Migration[6.0]\n  def change \n    create_table :products do |t| \n      t.string :title\n      t.text :desciption\n      t.string :image_url\n      t.decimal :price, precision: 8, scale: 2\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12285952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d516bea3e2d44916d479c525cef27a6?s=128&d=identicon&r=PG&f=1", "display_name": "nguyencuc2186", "link": "https://stackoverflow.com/users/12285952/nguyencuc2186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575356657, "creation_date": 1575355982, "last_edit_date": 1575356657, "question_id": 59151585, "link": "https://stackoverflow.com/questions/59151585/can-not-create-database-in-rails-using-dbmigrate", "title": "Can not create database in rails using db:migrate?", "body": "<p>I am trying to make a very simple Rails program like this. At first, I made something in Rails by this command:</p>\n\n<p><code>rails generate scaffold Product \\ title:string desciption:text image_url:string price:decimal</code></p>\n\n<p>I got no error, then I tried to made database by command <code>rails db:migrate</code> but I got this error</p>\n\n<pre><code>20191203044840 CreateProducts: migrating \ncreate_table(:products)\nrails aborted!\nStandardError: An error has occurred, this and all later migrations canceled:`\n\nundefined method string for :t:Symbol\nC:/Users/xxx/Desktop/xxx/X/db/migrate/20191203044840_create_products.rb:4:in block in change\nC:/Users/xxx/Desktop/xxx/X/db/migrate/20191203044840_create_products.rb:3:in change'\nbin/rails:4:in require\nbin/rails:4:in &lt;main&gt;\n\nCaused by:\nNoMethodError: undefined method string for :t:Symbol\nC:/Users/xxx/Desktop/xxx/X/db/migrate/20191203044840_create_products.rb:4:in block in change\nC:/Users/xxx/Desktop/xxx/X/db/migrate/20191203044840_create_products.rb:3:in change\nbin/rails:4:in require\nbin/rails:4:in &lt;main&gt;\nTasks: TOP =&gt; db:migrate\n(See full trace by running task with --trace)`\n</code></pre>\n\n<p>I am very confuse because of this problem? I am a newbie and trying to make a simple program, so please help me, thank you very much.</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1575352320, "post_id": 59149834, "comment_id": 104526950, "body": "See <a href=\"https://stackoverflow.com/a/18726293/2981429\">stackoverflow.com/a/18726293/2981429</a> you need to wait for all the threads to finish"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1575370042, "post_id": 59149834, "comment_id": 104534951, "body": "Rspec doesn&#39;t support the parallel execution. I have raised a related question here <a href=\"https://stackoverflow.com/questions/56083800/how-to-run-parrellel-tests-with-rspec-and-watir-on-a-windows-machine\" title=\"how to run parrellel tests with rspec and watir on a windows machine\">stackoverflow.com/questions/56083800/&hellip;</a>"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1575394538, "post_id": 59149834, "comment_id": 104549285, "body": "This is not execution. You&#39;re <b>defining</b> specs in parallel, not executing them. See more info here <a href=\"https://stackoverflow.com/a/59162511/299774\">stackoverflow.com/a/59162511/299774</a>"}], "owner": {"reputation": 19, "user_id": 12277049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c72267ee7ad11546fd4a3ecee199352?s=128&d=identicon&r=PG&f=1", "display_name": "soni", "link": "https://stackoverflow.com/users/12277049/soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575344729, "creation_date": 1575344179, "last_edit_date": 1575344729, "question_id": 59149834, "link": "https://stackoverflow.com/questions/59149834/trying-to-create-a-thread-in-ruby-with-rspec-that-can-run-multiple-tests-in-para", "title": "Trying to create a thread in ruby with rspec that can run multiple tests in parallel with different parameters", "body": "<p>I have the following rspec test code below which basically makes an API call to a server and gets all_elem_ids from get_all_queries. I'm trying to have tests run in parallel such that the 'it' block gets executed for each of the values for all_elem_ids variable, with perhaps like a max thread count of 5. Unfortunately with the code below it seems to be creating threads but the actual code ends up doing nothing. The it block gets executed 5 times but however I can see that the tests don't actually execute but are still declared as \"Passed\"</p>\n\n<p>Code:</p>\n\n<pre><code>ids = ['2']\n\nRSpec.describe 'Verify data' do\n  unless ids.nil?\n    ids.each do |val_a|\n      context \"Elem id: #{val_a}\" do\n        all_elem_ids = get_all_queries(val_a)\n        # example value, all_elem_ids= ['1', '56', '9', '10']\n\n        all_elem_ids.each do |val_b|\n          it \"Verify data for id: #{val_b}\" do\n            Thread.new{\n            run_test_a(val_b.to_s)\n            run_test_b(val_b.to_s)\n            }\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "backend"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1575487443, "post_id": 59149324, "comment_id": 104587258, "body": "can you try use &quot; instead of &#39; in class names"}, {"owner": {"reputation": 187, "user_id": 11536395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e6219ff0428a6ff7b8d32563a5ab24?s=128&d=identicon&r=PG&f=1", "display_name": "ezra", "link": "https://stackoverflow.com/users/11536395/ezra"}, "reply_to_user": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1575491562, "post_id": 59149324, "comment_id": 104588946, "body": "what do you mean by that?"}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1575494261, "post_id": 59149324, "comment_id": 104589937, "body": "this :class =&gt; &#39;--logout-form&#39; write like this :class =&gt; &quot;--logout-form&quot;  around class names use double quotes instead of single quotes."}, {"owner": {"reputation": 1184, "user_id": 9744136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CzAxn.jpg?s=128&g=1", "display_name": "cesartalves", "link": "https://stackoverflow.com/users/9744136/cesartalves"}, "edited": false, "score": 0, "creation_date": 1575644315, "post_id": 59149324, "comment_id": 104646953, "body": "There&#39;s no difference between using &quot; or &#39; on that context"}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 11536395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e6219ff0428a6ff7b8d32563a5ab24?s=128&d=identicon&r=PG&f=1", "display_name": "ezra", "link": "https://stackoverflow.com/users/11536395/ezra"}, "edited": false, "score": 0, "creation_date": 1575667832, "post_id": 59215439, "comment_id": 104656409, "body": "Thanks, but didn&#39;t work. Still staying unexpected &#39;)&#39;"}], "tags": [], "owner": {"reputation": 1184, "user_id": 9744136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CzAxn.jpg?s=128&g=1", "display_name": "cesartalves", "link": "https://stackoverflow.com/users/9744136/cesartalves"}, "is_accepted": false, "score": 1, "last_activity_date": 1575644024, "creation_date": 1575644024, "answer_id": 59215439, "question_id": 59149324, "link": "https://stackoverflow.com/questions/59149324/is-there-a-reason-why-this-form-tag-element-is-always-showing-a-syntax-error/59215439#59215439", "title": "Is there a reason why this form_tag element is always showing a syntax error?", "body": "<p>Try <code>form_tag({controller: :session, action: :delete, class: '--logout-form'})</code></p>\n\n<p>Check the docs for the form_tag helper\n<a href=\"https://api.rubyonrails.org/v5.1.7/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v5.1.7/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag</a></p>\n\n<p>It can take 2 option hashes.\nThe first option hash is one that's similar to the helper url_for, the second has extra params given in the doc.</p>\n\n<p>What you did in your code was basically:</p>\n\n<pre><code>({controller: :session, action: :delete} #first hash of options, \n :class =&gt; '--logout-form' #second hash of options with {} hash syntax, but without them.\n)\n</code></pre>\n\n<p>That's why it's breaking I suppose.</p>\n"}], "owner": {"reputation": 187, "user_id": 11536395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e6219ff0428a6ff7b8d32563a5ab24?s=128&d=identicon&r=PG&f=1", "display_name": "ezra", "link": "https://stackoverflow.com/users/11536395/ezra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575644024, "creation_date": 1575339593, "last_edit_date": 1575386380, "question_id": 59149324, "link": "https://stackoverflow.com/questions/59149324/is-there-a-reason-why-this-form-tag-element-is-always-showing-a-syntax-error", "title": "Is there a reason why this form_tag element is always showing a syntax error?", "body": "<p><br>\nI am working on a <code>ruby on rails</code> application and have already made some of the core elements, like the login system. However, I am trying to make a logout button using the <code>'erb'</code> gem to load files and include them in other files, so all pages in the side have the form. However, no matter how I write the <code>form_tag</code> element, it raises a syntac error and I do not know why. I have looked on the internet and pasted the error code, but the solutions given still raise the same error. <br>Any help?</p>\n\n<p>Here is the code:<br>\n<code>app/controllers/session_controller.rb</code> (excerpt):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'erb'\n...\n  def home\n    @page_title = 'Home'\n    @topbarFile = File.read('file location') // not real\n    ERB.new(@topbarFile, 0, \"\", \"@topbar\").result( binding ) // working! no errors\n    if !session[:usrname].present?\n      redirect_to '/login'\n    end\n    if session[:message].present?\n      session.delete :message\n    end\n  end\n  def delete\n    if params[:commit].present?\n      session.delete :usrname\n      session.delete :id\n      redirect_to '/login'\n    end\n  end\nend\n</code></pre>\n\n<p><code>app/file location</code> (not real location):</p>\n\n<pre><code>&lt;div class = 'topbar'&gt;\n    &lt;% sessionState = session[:usrname].present? ? [session[:usrname]] : [] %&gt;\n    &lt;% logoutState = session[:usrname].present? ? [] : ['Log out'] %&gt;\n    &lt;% sessionState.each do |username| %&gt;\n        &lt;span class = 'username'&gt;&lt;%= username %&gt;&lt;/span&gt;\n        &lt;%= form_tag({controller: :session, action: :delete}, :class =&gt; '--logout-form') do %&gt;\n            &lt;%= submit_tag 'Log out' %&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n    &lt;% logoutState.each do |message| %&gt;\n        &lt;a href = '/login'&gt;&lt;% message %&gt;&lt;/a&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><code>app/views/session/home.html.erb</code>:</p>\n\n<pre><code>&lt;%= raw @topbar %&gt; &lt;!-- I have tried with raw(@topbar), still doesn't work --&gt;\n</code></pre>\n\n<p>Here are the errors:</p>\n\n<pre><code>(erb):6: syntax error, unexpected ')' ...:class =&gt; '--logout-form') do ).to_s); @topbar.&lt;&lt; \"\\n ... ... ^ (erb):8: syntax error, unexpected end, expecting ')' ; end ; @topbar.&lt;&lt; \"\\n \".freeze ^~~ (erb):9: syntax error, unexpected end, expecting ')' ; end ; @topbar.&lt;&lt; \"\\n \".freeze ^~~ (erb):13: syntax error, unexpected end-of-input, expecting ')'\nRails.root: xxx\n\nApplication Trace | Framework Trace | Full Trace\n(erb):6: syntax error, unexpected ')'\n(erb):8: syntax error, unexpected end, expecting ')'\n(erb):9: syntax error, unexpected end, expecting ')'\n(erb):13: syntax error, unexpected end-of-input, expecting ')'\n(erb):6: syntax error, unexpected ')'\n(erb):8: syntax error, unexpected end, expecting ')'\n(erb):9: syntax error, unexpected end, expecting ')'\n(erb):13: syntax error, unexpected end-of-input, expecting ')'\n(erb):6: syntax error, unexpected ')'\n(erb):8: syntax error, unexpected end, expecting ')'\n(erb):9: syntax error, unexpected end, expecting ')'\n(erb):13: syntax error, unexpected end-of-input, expecting ')'\napp/controllers/session_controller.rb:65:in `home'\n</code></pre>\n\n<p>But there are no extra paretheses! I do not understand the problem! Why does it not work? </p>\n\n<p>PS. why is the stack trace repeated so many times?</p>\n"}, {"tags": ["ruby", "linux", "ubuntu", "server", "nohup"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1575337054, "creation_date": 1575337054, "answer_id": 59149030, "question_id": 59148232, "link": "https://stackoverflow.com/questions/59148232/bad-file-descriptor-error-read-when-using-nohup-to-run-server-in-background-o/59149030#59149030", "title": "Bad file descriptor error - read, when using nohup to run server in background of ubuntu box", "body": "<p>It looks like you're trying to run <code>pry</code> inside of your application as the errors seem related.  Try to remove or comment out any occurance of <code>binding.pry</code> and anywhere you may have included or required pry such as in Gemfile, or if you have any <code>require 'pry'</code> in anything.  </p>\n\n<p>Then try your command again to see if this works.</p>\n"}], "owner": {"reputation": 11, "user_id": 12054427, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O__NFY4joJ8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf2Xir2uLTcm-rDLE-ZT0Auh_jEFQ/photo.jpg?sz=128", "display_name": "user12054427", "link": "https://stackoverflow.com/users/12054427/user12054427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575337054, "creation_date": 1575329907, "question_id": 59148232, "link": "https://stackoverflow.com/questions/59148232/bad-file-descriptor-error-read-when-using-nohup-to-run-server-in-background-o", "title": "Bad file descriptor error - read, when using nohup to run server in background of ubuntu box", "body": "<p>I get this error appended to nohup.out every time I try to use make serve with the nohup command.</p>\n\n<h2>The nohup command I run</h2>\n\n<pre><code>codio@anita-doctor:~/workspace/Introduction-to-Data-Science/IntroBook$ nohup make serve &amp;\n[1] 2201\ncodio@anita-doctor:~/workspace/Introduction-to-Data-Science/IntroBook$ nohup: ignoring input and \nappending output to \u2018nohup.out\u2019\n</code></pre>\n\n<hr>\n\n<p>My program server works fine using the normal make serve without nohup. I am trying to host my server in the background using nohup but when I perform the above code I get the below error. </p>\n\n<h2>The error appended to nohup.out</h2>\n\n<pre><code>[0m19:01:07 - INFO - Bye bye...\nbundle exec guard\nConfiguration file: _config.yml\n23:06:19 - INFO - Jekyll [33mbuilding... [0m\n23:06:21 - INFO - Jekyll [32mbuild completed in 1.67s [0m/home/codio/workspace/Introduction-to- \nData-Science/IntroBook \u2192 _site\n23:06:21 - INFO - Jekyll watching and serving using jekyll at 0.0.0.0:4000/jupyter-book\n23:06:21 - INFO - Jekyll watching\n23:06:21 - INFO - LiveReload is waiting for a browser to connect.\n23:06:21 - INFO - Guard is now watching at '/home/codio/workspace/Introduction-to-Data- \nScience/IntroBook'\n[0G/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/guard-2.14.2/lib/guard/jobs/pry_wrapper.rb:279: \nwarning: method Pry#input_array is deprecated. Use Pry#input_ring instead\n[1] guard(main)&gt; Error: Bad file descriptor - read\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `block in \ninput_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:113:in \n`interruptible_region'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:199:in `input_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:185:in `block in read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:130:in `handle_read_errors'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:171:in `read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:98:in `read'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:68:in `block in repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `loop'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `block in start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:59:in \n`__with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:77:in \n`with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:13:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/pry_class.rb:200:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/guard-2.14.2/lib/guard/jobs/pry_wrapper.rb:102:in \n`block (2 levels) in _switch_to_pry'\n[1] guard(main)&gt; Error: Bad file descriptor - read\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `block in \ninput_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:113:in \n`interruptible_region'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:199:in `input_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:185:in `block in read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:130:in `handle_read_errors'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:171:in `read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:98:in `read'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:68:in `block in repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `loop'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `block in start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:59:in \n`__with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:77:in \n`with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:13:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/pry_class.rb:200:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/guard-2.14.2/lib/guard/jobs/pry_wrapper.rb:102:in \n`block (2 levels) in _switch_to_pry'\n[1] guard(main)&gt; Error: Bad file descriptor - read\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `block in \ninput_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:113:in \n`interruptible_region'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:199:in `input_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:185:in `block in read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:130:in `handle_read_errors'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:171:in `read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:98:in `read'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:68:in `block in repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `loop'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `block in start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:59:in \n`__with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:77:in \n`with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:13:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/pry_class.rb:200:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/guard-2.14.2/lib/guard/jobs/pry_wrapper.rb:102:in \n`block (2 levels) in _switch_to_pry'\n[1] guard(main)&gt; Error: Bad file descriptor - read\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `block in \ninput_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:113:in \n`interruptible_region'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:199:in `input_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:185:in `block in read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:130:in `handle_read_errors'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:171:in `read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:98:in `read'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:68:in `block in repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `loop'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `block in start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:59:in \n`__with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:77:in \n`with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:13:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/pry_class.rb:200:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/guard-2.14.2/lib/guard/jobs/pry_wrapper.rb:102:in \n`block (2 levels) in _switch_to_pry'\n[1] guard(main)&gt; Error: Bad file descriptor - read\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:200:in `block in \ninput_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:113:in \n`interruptible_region'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:199:in `input_readline'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:185:in `block in read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:130:in `handle_read_errors'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:171:in `read_line'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:98:in `read'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:68:in `block in repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `loop'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:67:in `repl'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `block in start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:59:in \n`__with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/input_lock.rb:77:in \n`with_ownership'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:38:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/repl.rb:13:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/pry-0.12.2/lib/pry/pry_class.rb:200:in `start'\n/home/codio/anaconda/lib/ruby/gems/2.6.0/gems/guard-2.14.2/lib/guard/jobs/pry_wrapper.rb:102:in \n`block (2 levels) in _switch_to_pry'\nFATAL: Pry failed to get user input using `Readline`.\nTo fix this you may be able to pass input and output file descriptors to pry directly. e.g.\n   Pry.config.input = STDIN\n   Pry.config.output = STDOUT\n   binding.pry\n\n[0m    Server address: http://0.0.0.0:4000/jupyter-book/\nServer running... press ctrl-c to stop.\n]2;\n\n[0m23:06:21 - INFO - Bye bye...\n</code></pre>\n\n<hr>\n\n<p>Any help would be appreciated as it is essential to my project that I am able to host in the background.</p>\n"}, {"tags": ["ruby", "macos", "clang", "rvm"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1575330325, "post_id": 59148033, "comment_id": 104522202, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/10357804/configure-error-c-compiler-cannot-create-executables\" title=\"configure error c compiler cannot create executables\">stackoverflow.com/questions/10357804/&hellip;</a>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1575330475, "post_id": 59148033, "comment_id": 104522247, "body": "Not related to Rails or Linux, so not sure why you would tag them."}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 2, "creation_date": 1575389892, "post_id": 59148033, "comment_id": 104546846, "body": "Have you tried <code>xcode-select --install</code>"}], "owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575388658, "creation_date": 1575328550, "last_edit_date": 1575388658, "question_id": 59148033, "link": "https://stackoverflow.com/questions/59148033/compiler-issue-when-installing-ruby-with-rvm-checking-whether-the-c-compiler-wo", "title": "Compiler issue when installing ruby with RVM: checking whether the C compiler works... no", "body": "<p>I'm trying to install ruby with RVM, like <code>rvm install 2.4.1</code>.</p>\n\n<p>I've never had issues with this before moving to Mojave, and am really out of my element here.</p>\n\n<p>But I'm getting an error that appears related to clang.</p>\n\n<pre><code>ruby-2.4.1 - #removing src/ruby-2.4.1..\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.14/x86_64/ruby-2.4.1.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for osx.\nWe don't know how to ensure that selected compiler 'x86_64-apple-darwin13.4.0-clang' exists.\nCertificates bundle '/usr/local/etc/openssl@1.1/cert.pem' is already up to date.\nRequirements installation successful.\nWarning: found user selected compiler 'x86_64-apple-darwin13.4.0-clang', this will suppress RVM auto detection mechanisms.\nInstalling Ruby from source to: /Users/me/.rvm/rubies/ruby-2.4.1, this may take a while depending on your cpu(s)...\nruby-2.4.1 - #downloading ruby-2.4.1, this may take a while depending on your connection...\nruby-2.4.1 - #extracting ruby-2.4.1 to /Users/me/.rvm/src/ruby-2.4.1.....\nruby-2.4.1 - #applying patch /Users/me/.rvm/patches/ruby/2.4.1/random_c_using_NR_prefix.patch.\nruby-2.4.1 - #configuring..\nError running './configure --prefix=/Users/me/.rvm/rubies/ruby-2.4.1 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/libksba:/usr/local/opt/readline:/usr/local/opt/zlib:/usr/local/opt/openssl@1.1 --disable-install-doc --enable-shared',\nplease read /Users/me/.rvm/log/1575328022_ruby-2.4.1/configure.log\nThere has been an error while running configure. Halting the installation.\n</code></pre>\n\n<p>The logs at <code>/Users/me/.rvm/log/1575328022_ruby-2.4.1/configure.log</code> are:</p>\n\n<pre><code>[2019-12-02 18:07:54] ./configure\ncurrent path: /Users/me/.rvm/src/ruby-2.4.1\nPATH=/usr/local/opt/coreutils/bin:/usr/local/opt/pkg-config/bin:/usr/local/opt/libtool/bin:/usr/local/opt/automake/bin:/usr/local/opt/autoconf/bin:/usr/local/anaconda3/bin:/usr/local/anaconda3/condabin:/usr/local/anaconda3/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/me/.rvm/bin\ncommand(5): ./configure --prefix=/Users/me/.rvm/rubies/ruby-2.4.1 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/libksba:/usr/local/opt/readline:/usr/local/opt/zlib:/usr/local/opt/openssl@1.1 --disable-install-doc --enable-shared\nchecking for ruby... /usr/bin/ruby\nconfig.guess already exists\nconfig.sub already exists\nchecking build system type... x86_64-apple-darwin18.5.0\nchecking host system type... x86_64-apple-darwin18.5.0\nchecking target system type... x86_64-apple-darwin18.5.0\nchecking whether the C compiler works... no\nconfigure: error: in `/Users/me/.rvm/src/ruby-2.4.1':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\n</code></pre>\n\n<p>I've spent several hours on this without any luck. </p>\n\n<p>Can anyone recommend something to try?</p>\n\n<h2><strong>UPDATE:</strong></h2>\n\n<p>Although this look similar to <a href=\"https://stackoverflow.com/questions/10357804/configure-error-c-compiler-cannot-create-executables\">this</a>, the solution recommended there is referencing xcode 4.3. I'm now on xcode 11.2, which no longer contains the downloads tab in preferences.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1575322282, "post_id": 59146903, "comment_id": 104519783, "body": "What Rails version are you using?"}, {"owner": {"reputation": 137, "user_id": 9200938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ae3e508d83e67976f88a1eecaeeb73?s=128&d=identicon&r=PG&f=1", "display_name": "SsPay", "link": "https://stackoverflow.com/users/9200938/sspay"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1575322432, "post_id": 59146903, "comment_id": 104519820, "body": "I use Rails 6.0.1"}, {"owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "edited": false, "score": 0, "creation_date": 1575322951, "post_id": 59146903, "comment_id": 104520019, "body": "Looks like you&#39;re referencing to author_id before authors table created(or missing it at all). Can you share output for <code>rails db:reset</code> and <code>ls -A1 db&#47;migrate&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 9200938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ae3e508d83e67976f88a1eecaeeb73?s=128&d=identicon&r=PG&f=1", "display_name": "SsPay", "link": "https://stackoverflow.com/users/9200938/sspay"}, "edited": false, "score": 0, "creation_date": 1575322705, "post_id": 59146983, "comment_id": 104519934, "body": "I did <code>rails db:system:change --to=postgresql</code>, but the error did not disappear"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 137, "user_id": 9200938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ae3e508d83e67976f88a1eecaeeb73?s=128&d=identicon&r=PG&f=1", "display_name": "SsPay", "link": "https://stackoverflow.com/users/9200938/sspay"}, "edited": false, "score": 1, "creation_date": 1575322843, "post_id": 59146983, "comment_id": 104519979, "body": "I guess you don&#39;t have problems deleting your database. Try <code>bundle exec rails db:drop db:create db:migrate</code>."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1575322794, "last_edit_date": 1575322794, "creation_date": 1575322440, "answer_id": 59146983, "question_id": 59146903, "link": "https://stackoverflow.com/questions/59146903/why-i-cant-to-switch-my-rails-app-to-pg/59146983#59146983", "title": "Why I can&#39;t to switch my rails app to pg?", "body": "<p>You must also change the adapter in your config/database.yml file.</p>\n\n<p>But to make things easier, since Rails 6 you can use the task <code>db:system:change</code>:</p>\n\n<pre><code>rails db:system:change --to=postgresql\nrails db:system:change --to=mysql\nrails db:system:change --to=sqlite3\nrails db:system:change --to=oracle\nrails db:system:change --to=frontbase\nrails db:system:change --to=sqlserver\nrails db:system:change --to=jdbc\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9200938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ae3e508d83e67976f88a1eecaeeb73?s=128&d=identicon&r=PG&f=1", "display_name": "SsPay", "link": "https://stackoverflow.com/users/9200938/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 59146983, "answer_count": 1, "score": 1, "last_activity_date": 1575322794, "creation_date": 1575321982, "question_id": 59146903, "link": "https://stackoverflow.com/questions/59146903/why-i-cant-to-switch-my-rails-app-to-pg", "title": "Why I can&#39;t to switch my rails app to pg?", "body": "<p>I have a rails app, that works on sqlite.\nBut i need use the PostgreSQL.\nI'm set up pg gem, created user and change sqlite on pg in my gemfile.\nThen i do rails db:setup, and i get error:</p>\n\n<pre><code>Database 'BlogOnRails_development' already exists\nDatabase 'BlogOnRails_test' already exists\nrails aborted!\nActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation \"authors\" does not exist\n</code></pre>\n\n<p>create_authors migration:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CreateAuthors &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :authors do |t|\n      t.string :first_name\n      t.string :last_name\n      t.string :gender\n      t.date :birthday\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>logs:</p>\n\n<pre><code>  [1m[35m (404.5ms)[0m  [1m[35mCREATE DATABASE \"BlogOnRails_development\" ENCODING = 'unicode'[0m\n  [1m[35m (330.1ms)[0m  [1m[35mCREATE DATABASE \"BlogOnRails_test\" ENCODING = 'unicode'[0m\n  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS \"active_storage_attachments\" CASCADE[0m\n  [1m[35m (23.8ms)[0m  [1m[35mCREATE TABLE \"active_storage_attachments\" (\"id\" bigserial primary key, \"name\" character varying NOT NULL, \"record_type\" character varying NOT NULL, \"record_id\" integer NOT NULL, \"blob_id\" integer NOT NULL, \"created_at\" timestamp NOT NULL)[0m\n  [1m[35m (13.8ms)[0m  [1m[35mCREATE  INDEX  \"index_active_storage_attachments_on_blob_id\" ON \"active_storage_attachments\"  (\"blob_id\")[0m\n  [1m[35m (8.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  \"index_active_storage_attachments_uniqueness\" ON \"active_storage_attachments\"  (\"record_type\", \"record_id\", \"name\", \"blob_id\")[0m\n  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS \"active_storage_blobs\" CASCADE[0m\n  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE \"active_storage_blobs\" (\"id\" bigserial primary key, \"key\" character varying NOT NULL, \"filename\" character varying NOT NULL, \"content_type\" character varying, \"metadata\" text, \"byte_size\" bigint NOT NULL, \"checksum\" character varying NOT NULL, \"created_at\" timestamp NOT NULL)[0m\n  [1m[35m (8.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  \"index_active_storage_blobs_on_key\" ON \"active_storage_blobs\"  (\"key\")[0m\n  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS \"comments\" CASCADE[0m\n  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE \"comments\" (\"id\" bigserial primary key, \"username\" character varying, \"body\" text, \"post_id\" integer NOT NULL, \"created_at\" timestamp(6) NOT NULL, \"updated_at\" timestamp(6) NOT NULL, \"author_id\" integer, \"ancestry\" character varying, \"ancestry_depth\" integer DEFAULT 0)[0m\n  [1m[35m (14.1ms)[0m  [1m[35mCREATE  INDEX  \"index_comments_on_ancestry\" ON \"comments\"  (\"ancestry\")[0m\n  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  \"index_comments_on_author_id\" ON \"comments\"  (\"author_id\")[0m\n  [1m[35m (8.2ms)[0m  [1m[35mCREATE  INDEX  \"index_comments_on_post_id\" ON \"comments\"  (\"post_id\")[0m\n  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS \"impressions\" CASCADE[0m\n  [1m[35m (17.9ms)[0m  [1m[35mCREATE TABLE \"impressions\" (\"id\" bigserial primary key, \"impressionable_type\" character varying, \"impressionable_id\" integer, \"user_id\" integer, \"controller_name\" character varying, \"action_name\" character varying, \"view_name\" character varying, \"request_hash\" character varying, \"ip_address\" character varying, \"session_hash\" character varying, \"message\" text, \"referrer\" text, \"params\" text, \"created_at\" timestamp(6) NOT NULL, \"updated_at\" timestamp(6) NOT NULL)[0m\n  [1m[35m (12.8ms)[0m  [1m[35mCREATE  INDEX  \"controlleraction_ip_index\" ON \"impressions\"  (\"controller_name\", \"action_name\", \"ip_address\")[0m\n  [1m[35m (13.7ms)[0m  [1m[35mCREATE  INDEX  \"controlleraction_request_index\" ON \"impressions\"  (\"controller_name\", \"action_name\", \"request_hash\")[0m\n  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  \"controlleraction_session_index\" ON \"impressions\"  (\"controller_name\", \"action_name\", \"session_hash\")[0m\n  [1m[35m (7.6ms)[0m  [1m[35mCREATE  INDEX  \"poly_ip_index\" ON \"impressions\"  (\"impressionable_type\", \"impressionable_id\", \"ip_address\")[0m\n  [1m[35m (14.3ms)[0m  [1m[35mCREATE  INDEX  \"poly_params_request_index\" ON \"impressions\"  (\"impressionable_type\", \"impressionable_id\", \"params\")[0m\n  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  \"poly_request_index\" ON \"impressions\"  (\"impressionable_type\", \"impressionable_id\", \"request_hash\")[0m\n  [1m[35m (8.2ms)[0m  [1m[35mCREATE  INDEX  \"poly_session_index\" ON \"impressions\"  (\"impressionable_type\", \"impressionable_id\", \"session_hash\")[0m\n  [1m[35m (14.1ms)[0m  [1m[35mCREATE  INDEX  \"impressionable_type_message_index\" ON \"impressions\"  (\"impressionable_type\", \"message\", \"impressionable_id\")[0m\n  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  \"index_impressions_on_user_id\" ON \"impressions\"  (\"user_id\")[0m\n  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS \"posts\" CASCADE[0m\n  [1m[35m (23.0ms)[0m  [1m[35mCREATE TABLE \"posts\" (\"id\" bigserial primary key, \"name\" character varying, \"title\" character varying, \"content\" text, \"created_at\" timestamp(6) NOT NULL, \"updated_at\" timestamp(6) NOT NULL, \"author_id\" integer, \"impressions_count\" integer)[0m\n  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  \"index_posts_on_author_id\" ON \"posts\"  (\"author_id\")[0m\n  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS \"votes\" CASCADE[0m\n  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE \"votes\" (\"id\" bigserial primary key, \"comment_id\" integer NOT NULL, \"author_id\" integer NOT NULL, \"created_at\" timestamp(6) NOT NULL, \"updated_at\" timestamp(6) NOT NULL, \"votes\" integer DEFAULT 0)[0m\n  [1m[35m (13.2ms)[0m  [1m[35mCREATE  INDEX  \"index_votes_on_author_id\" ON \"votes\"  (\"author_id\")[0m\n  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  \"index_votes_on_comment_id\" ON \"votes\"  (\"comment_id\")[0m\n  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE \"active_storage_attachments\" ADD CONSTRAINT \"fk_rails_c3b3935057\"\nFOREIGN KEY (\"blob_id\")\n  REFERENCES \"active_storage_blobs\" (\"id\")\n[0m\n  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE \"comments\" ADD CONSTRAINT \"fk_rails_2fd19c0db7\"\nFOREIGN KEY (\"post_id\")\n  REFERENCES \"posts\" (\"id\")\n[0m\n  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE \"votes\" ADD CONSTRAINT \"fk_rails_96086a30ba\"\nFOREIGN KEY (\"author_id\")\n  REFERENCES \"authors\" (\"id\")\n[0m\n</code></pre>\n\n<p>When I do rails db: reset i get same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pg", "macos-catalina"], "comments": [{"owner": {"reputation": 1001, "user_id": 1509291, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/okmBh.jpg?s=128&g=1", "display_name": "Andrei", "link": "https://stackoverflow.com/users/1509291/andrei"}, "edited": false, "score": 0, "creation_date": 1591490589, "post_id": 59146276, "comment_id": 110076132, "body": "Have you solved this? I&#39;m getting this exact same error on Heroku."}], "owner": {"reputation": 51, "user_id": 4372517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377003f9474b9b84a8a959fab06def31?s=128&d=identicon&r=PG&f=1", "display_name": "user27931", "link": "https://stackoverflow.com/users/4372517/user27931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1080, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1575326236, "creation_date": 1575318794, "last_edit_date": 1575326236, "question_id": 59146276, "link": "https://stackoverflow.com/questions/59146276/error-pginvalidparametervalue-error-invalid-value-for-parameter-client-mi", "title": "Error \u2014&#160;PG::InvalidParameterValue: ERROR: invalid value for parameter &quot;client_min_messages&quot;: &quot;panic&quot;", "body": "<p>I'm having issues getting a ruby on rails project running with Docker. I have a hunch it has something to do with running macOS Catalina (10.15.1). The issue comes when I try to <code>docker-compose run web rake db:create</code>.</p>\n\n<p>When I run <code>docker-compose run web rake db:create</code> I get this output:</p>\n\n<pre><code>Starting vft_db_1 ... done\nPG::InvalidParameterValue: ERROR:  invalid value for parameter \"client_min_messages\": \"panic\"\nHINT:  Available values: debug5, debug4, debug3, debug2, debug1, log, notice, warning, error.\n: SET client_min_messages TO 'panic'\n/usr/local/bundle/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql/database_statements.rb:155:in `async_exec'\n/usr/local/bundle/gems/activerecord-\n...\nCouldn't create database for {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"host\"=&gt;\"db\", \"username\"=&gt;\"postgres\", \"password\"=&gt;nil, \"pool\"=&gt;5, \"database\"=&gt;\"vft_test\", \"client_min_messages\"=&gt;\"warning\"}\n</code></pre>\n\n<p>Here is my <code>database.yml</code></p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  encoding: unicode\n  host: db\n  username: postgres\n  password:\n  pool: 5\n\ndevelopment:\n  &lt;&lt;: *default\n  database: vft_development\n  min_messages: warning\n\ntest:\n  &lt;&lt;: *default\n  database: vft_test\n  min_messages: warning\n</code></pre>\n\n<p>(I also tried <code>client_min_messages: warning</code> but encountered the same issue)</p>\n\n<p>And when I run <code>$ docker version</code> I get:</p>\n\n<pre><code>Client: Docker Engine - Community\n Version:           19.03.5\n API version:       1.40\n Go version:        go1.12.12\n Git commit:        633a0ea\n Built:             Wed Nov 13 07:22:34 2019\n OS/Arch:           darwin/amd64\n Experimental:      false\n\nServer: Docker Engine - Community\n Engine:\n  Version:          19.03.5\n  API version:      1.40 (minimum version 1.12)\n  Go version:       go1.12.12\n  Git commit:       633a0ea\n  Built:            Wed Nov 13 07:29:19 2019\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          v1.2.10\n  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339\n runc:\n  Version:          1.0.0-rc8+dev\n  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657\n docker-init:\n  Version:          0.18.0\n  GitCommit:        fec3683\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "cucumber", "watir", "gherkin"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1575318844, "post_id": 59146187, "comment_id": 104518481, "body": "The answer will depend on the page HTML as well as if you are also using a page-object framework. In general, you would be iterating over each key-value pair to find a field and input the value. Example if the first column matched the element ids you could have <code>data.each_pair { |setting, value| browser.element(id: setting).to_subtype.set(value) }</code>. Though ideally you&#39;d have a page-object framework which would get to something as simple as <code>page.populate_with(values)</code>."}, {"owner": {"reputation": 313, "user_id": 2695818, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/71321de399d47802a3bc1636d4addc64?s=128&d=identicon&r=PG&f=1", "display_name": "yudi2312", "link": "https://stackoverflow.com/users/2695818/yudi2312"}, "edited": false, "score": 0, "creation_date": 1575452954, "post_id": 59146187, "comment_id": 104568307, "body": "please add some info about the web-page you&#39;re dealing with and if you&#39;re using page-object framework?"}], "answers": [{"tags": [], "owner": {"reputation": 1106, "user_id": 782713, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/20b309cdcea1aa280b617c318af99274?s=128&d=identicon&r=PG", "display_name": "Gijs Paulides", "link": "https://stackoverflow.com/users/782713/gijs-paulides"}, "is_accepted": false, "score": 0, "last_activity_date": 1575366449, "creation_date": 1575366449, "answer_id": 59154220, "question_id": 59146187, "link": "https://stackoverflow.com/questions/59146187/how-to-pass-hash-values-into-fields-in-registration-form/59154220#59154220", "title": "How to pass hash values into fields in registration form?", "body": "<p>The following code is untested, but something like this should work for you.</p>\n\n<pre><code># Step definition\nGiven /^I enter the following credentials$/ do |table|\n  # .drop(1) is to get rid of your first row with titles\n  table.drop(1).each_pair do |setting, value|\n    browser.element(name: setting).to_subtype.set(value) }\n  end\nend\n</code></pre>\n\n<p>Be carefull using Gherkin as a replacement for coding. It should be focussed on <strong>what</strong> you're trying to achieve, not <strong>how</strong> you're trying to achieve it.</p>\n\n<p>I would recommend a scenario as follows:</p>\n\n<pre><code>Given RegularJohn is on the create account page\nWhen he submits the create account form with his information\nThen the successfully created message should display\n</code></pre>\n\n<p>Note that in your code you would need <code>RegularJohn</code> to be a configuration variable that is filled with the expected information information.</p>\n\n<p>When you try to test a failure you could use a different variable, like <code>BadEmailAndy</code>. This way you keep it readable, maintainable and understandable.</p>\n"}], "owner": {"reputation": 91, "user_id": 7338519, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1163883443805e1895b73dadc1fa973b?s=128&d=identicon&r=PG&f=1", "display_name": "JavaApprentice", "link": "https://stackoverflow.com/users/7338519/javaapprentice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1575366449, "creation_date": 1575318400, "question_id": 59146187, "link": "https://stackoverflow.com/questions/59146187/how-to-pass-hash-values-into-fields-in-registration-form", "title": "How to pass hash values into fields in registration form?", "body": "<p>I am new to automation testing and have no experience in Ruby, nor any other programming language. However my current employer wants from me to start automating small tasks. The problem I stumbled upon is when trying to pass hash values into fields of a registration form.</p>\n\n<p>This is my Gherkin Scenario:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jl7KF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jl7KF.png\" alt=\"enter image description here\"></a></p>\n\n<p>On the left hand side of the when-statement is the name of the field in which I want to pass a certain value. The first two are input fields. The last hash \"age\" is a dropdown.</p>\n\n<p>Can someone help me out by giving me an example ruby method, that would fill-in such a registration form, given the information above?</p>\n\n<p>P.S.  The automation framework I use consists of Ruby, Cucumber and Watir Webdriver.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 3, "last_activity_date": 1575320526, "last_edit_date": 1575320526, "creation_date": 1575317075, "answer_id": 59145910, "question_id": 59145837, "link": "https://stackoverflow.com/questions/59145837/call-function-in-the-map-block-of-hash/59145910#59145910", "title": "call function in the map block of hash", "body": "<p>You could use a <code>Proc</code> in that scenario:</p>\n\n<pre><code>calc = proc { |a| a['amount'].to_i * a['value'].to_i / 100 }\n\nhash1.map(&amp;calc)\nhash2.map(&amp;calc)\nhash3.map(&amp;calc)\n</code></pre>\n\n<p>I'm not sure if the <code>proc { ... }</code> syntax is available in Ruby 1.8, if not use <code>Proc.new { ... }</code> instead.</p>\n\n<hr>\n\n<p>If you've already have the calculation defined in a method you could also pass that method:</p>\n\n<pre><code># for example:\ndef calc(a)\n  a['amount'].to_i * a['value'].to_i / 100\nend\n\n# or\nmodule Helpers\n  def self.calc(a)\n    a['amount'].to_i * a['value'].to_i / 100\n  end\nend\n\ndef do_stuff\n  hash1.map(&amp;method(:calc)) # use the method #calc of self\n  hash2.map(&amp;self.method(:calc)) # same as the line above\n  hash3.map(&amp;Helpers.method(:calc)) # use the method #calc of the Helpers module\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": true, "score": 5, "last_activity_date": 1575319105, "last_edit_date": 1575319105, "creation_date": 1575317916, "answer_id": 59146076, "question_id": 59145837, "link": "https://stackoverflow.com/questions/59145837/call-function-in-the-map-block-of-hash/59146076#59146076", "title": "call function in the map block of hash", "body": "<p>I think the simplest thing would be to make a method that accepts that hash as an argument.</p>\n\n<pre><code>def map_totals(hash)\n  hash.map do |a|\n    a['amount'].to_i * a['value'].to_i / 100\n  end\nend\n\ntotals1 = map_totals(hash1)\ntotals2 = map_totals(hash2)\ntotals3 = map_totals(hash3)\n</code></pre>\n\n<p>Or...</p>\n\n<pre><code>def calc_total(line_item)\n  line_item['amount'].to_i * line_item['value'].to_i / 100\nend\n\ntotals1 = hash1.map { |li| calc_total(li) }\ntotals2 = hash2.map { |li| calc_total(li) }\ntotals3 = hash3.map { |li| calc_total(li) }\n</code></pre>\n"}], "owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 59146076, "answer_count": 2, "score": 4, "last_activity_date": 1575320526, "creation_date": 1575316704, "question_id": 59145837, "link": "https://stackoverflow.com/questions/59145837/call-function-in-the-map-block-of-hash", "title": "call function in the map block of hash", "body": "<p>I am using Ruby version 1.8 because of legacy reason.</p>\n\n<p>I have multiple hashes. I have a code logic that applies to the <code>map</code> block on all my hashes. </p>\n\n<pre><code>hash1.map{|a| a['amount'].to_i * a['value'].to_i / 100}\n</code></pre>\n\n<p>I don't want to repeat that code logic every where like:</p>\n\n<pre><code>hash2.map{|a| a['amount'].to_i * a['value'].to_i / 100}\nhash3.map{|a| a['amount'].to_i * a['value'].to_i / 100}\n</code></pre>\n\n<p>How can I pass a function call to the block so that the code logic would only be in a function which is easier for me to maintain?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1575321673, "post_id": 59144965, "comment_id": 104519547, "body": "In your listing model, do you have a database column where you can save the pricing id? If i&#39;m understanding you correctly, you want to save the Pricing Id in the Listing model?"}, {"owner": {"reputation": 209, "user_id": 10455122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157728488209348/picture?type=large", "display_name": "project_kingz", "link": "https://stackoverflow.com/users/10455122/project-kingz"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1575324554, "post_id": 59144965, "comment_id": 104520551, "body": "@BKSpurgeon yes this is correct. In my Listing model I want to save the pricing id selected by the user. I have pricing id in my Listing model"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1575325872, "post_id": 59144965, "comment_id": 104520989, "body": "In that case, have a hidden field which saves the pricing id to the listing model, but conditionally: only if the check box is ticked ---&gt; and you can do this by adding a vitrtual attribute (google this) to the listing model. If the check box is ticked, then save the id. If it is not ticked, then don&#39;t save the id (or otherwise handle that situation). (Having said that, I don&#39;t like your design: perhaps consider using a join table which joins the listing with the pricing id that is chosen. I don&#39;t like saving the pricing ID in the listing model - but that&#39;s just me.)."}], "owner": {"reputation": 209, "user_id": 10455122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157728488209348/picture?type=large", "display_name": "project_kingz", "link": "https://stackoverflow.com/users/10455122/project-kingz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575312968, "creation_date": 1575312360, "last_edit_date": 1575312968, "question_id": 59144965, "link": "https://stackoverflow.com/questions/59144965/ruby-on-rails-in-a-form-for-step-how-can-i-save-the-results-of-a-database-quer", "title": "Ruby On Rails - In a form_for step how can I save the results of a database query into the f database in the form form", "body": "<p>Relatively new to Ruby and have a potentially simple query.</p>\n\n<p>Background\nI have 3 models Listing, Category and Pricing. A Listing will have a Category, a Category will have many Pricings. Pricing is only related to Listing through the single Category selected. When a user creates a new Listing , they select a Category that Category will have 3 options for Pricing. User then selects the Pricing best appropriate for their needs.</p>\n\n<p>Question\nI am using a form_for to create a new listing. In one of the steps I need to query the database and identify the Pricing options available based on the Category selected and once the user selects an option then I save that option to my database driven of the form_for</p>\n\n<p>My form_for structure</p>\n\n<pre><code>  &lt;%= form_for @listing, html: {class: \"steps-content m-l-100 m-r-100\"} do |f| %&gt;\n    &lt;%= hidden_field_tag 'step', @step %&gt;\n    &lt;%= render 'step1', f: f %&gt;\n    &lt;%= render 'step2', f: f %&gt;\n    &lt;%= render 'step3', f: f %&gt;\n    &lt;%= render 'step4', f: f %&gt;\n    &lt;%= render 'step5', f: f %&gt;\n\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My step 2 of the model has my query to the database where i identify the Pricings for the Category</p>\n\n<pre><code>&lt;div class=\"step-content &lt;%= 'is-active' if @step == 2 %&gt;\"&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;div class=\"control\"&gt;    \n      &lt;div class=\"tile is-ancestor\"&gt;\n        &lt;% @listing_category_pricings.each do |data| %&gt;\n          &lt;%= hidden_field_tag \"listing_category_pricings[pricing_ids][]\", nil %&gt;\n          &lt;div class=\"tile is-parent\"&gt;\n            &lt;article class=\"tile is-child box\"&gt;\n            &lt;div class=\"subtitle\"&gt;&lt;%= \"#{data.overview}\" %&gt;&lt;/div&gt;\n            &lt;div class=\"content\"&gt;&lt;%= \"Deposit payable: \u00a3#{data.price}\" %&gt;&lt;/div&gt;\n            &lt;div class=\"content\"&gt;&lt;%= \"Time to complete: #{pluralize(data.complete_by_date, 'Day')}\" %&gt;&lt;/div&gt;\n            &lt;tr valign=\"bottom\"&gt;&lt;div class=\"content\"&gt;&lt;%= \"#{data.description}\" %&gt;&lt;/div&gt;&lt;/tr&gt;\n            &lt;tr valign=\"bottom\"&gt;&lt;div class=\"content\"&gt;&lt;%= \"#{data.id}\" %&gt;&lt;/div&gt;&lt;/tr&gt;\n            &lt;%= f.check_box {***HOW DO I SAVE THE id IN THE PRICINGS MODEL INTO MY LISTINGS MODEL ??????***} %&gt;\n          &lt;/article&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>How do I save the <code>id</code> from the <code>@listing_category_pricings</code> query into my <code>Listing</code> table. We would typically use <code>&lt;%= f.checkbox :id %&gt;</code> but the id that would be saved is the id from the <code>Listing</code> model and not the <code>Pricing</code> model.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "aasm"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 5, "creation_date": 1575311897, "post_id": 59144812, "comment_id": 104515759, "body": "The alternative to this is to change <code>eval</code> to <code>public_send(&quot;#{t}_admin_user_path&quot;,user)</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1575313163, "post_id": 59144812, "comment_id": 104516264, "body": "I&#39;m not sure what you mean by &quot;freaking out&quot;, but if I were reviewing this code, I would definitely not let it pass. There is exactly 0 reason to use <code>eval</code> over <code>public_send</code> in this code."}, {"owner": {"reputation": 17, "user_id": 5577699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418d287a56bc0d635c07a7638ed0ceae?s=128&d=identicon&r=PG&f=1", "display_name": "stooshie45", "link": "https://stackoverflow.com/users/5577699/stooshie45"}, "edited": false, "score": 0, "creation_date": 1575318522, "post_id": 59144812, "comment_id": 104518388, "body": "Thanks, wasn&#39;t aware of <code>public_send</code> - will check it out. Still, interested in why <code>eval</code> is so evil? Especially in this context?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5577699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418d287a56bc0d635c07a7638ed0ceae?s=128&d=identicon&r=PG&f=1", "display_name": "stooshie45", "link": "https://stackoverflow.com/users/5577699/stooshie45"}, "edited": false, "score": 0, "creation_date": 1575318661, "post_id": 59145006, "comment_id": 104518426, "body": "Thanks! That seems like such a logical suggestion now you&#39;ve pointed it out, and will definitely help me clean up a lot of this code."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 3, "last_activity_date": 1575331919, "last_edit_date": 1575331919, "creation_date": 1575312564, "answer_id": 59145006, "question_id": 59144812, "link": "https://stackoverflow.com/questions/59144812/is-this-use-of-a-ruby-eval-method-really-dangerous-and-if-so-whats-the-alterna/59145006#59145006", "title": "Is this use of a Ruby eval method really dangerous, and if so what&#39;s the alternative? (Rails)", "body": "<blockquote>\n  <p>Is there a better method for implementing this? Maybe some kind of generic transition action in the controller that has the transition passed in? Seems cleaner, interested to hear if anyone else has taken this approach.</p>\n</blockquote>\n\n<p>How about something along the lines of: </p>\n\n<pre><code>&lt;% user.available_transitions.each do |t| %&gt;\n  &lt;%= link_to t.to_s.humanize, admin_user_path(user, transition: t), class: 'dropdown-item', method: :patch %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then, in the <code>update</code> method of your <code>AdminUsersController</code> (or wherever <code>admin_user_path</code> using the <code>patch</code> HTTP verb resolves to), you can test for the presence of the <code>transition</code> param and act accordingly. You can include, as you say, some begin/rescues to catch invalid transitions due to guards, etc.</p>\n\n<p>That way, you have only one action for all of your links.</p>\n"}], "owner": {"reputation": 17, "user_id": 5577699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418d287a56bc0d635c07a7638ed0ceae?s=128&d=identicon&r=PG&f=1", "display_name": "stooshie45", "link": "https://stackoverflow.com/users/5577699/stooshie45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 59145006, "answer_count": 1, "score": 0, "last_activity_date": 1575331919, "creation_date": 1575311559, "question_id": 59144812, "link": "https://stackoverflow.com/questions/59144812/is-this-use-of-a-ruby-eval-method-really-dangerous-and-if-so-whats-the-alterna", "title": "Is this use of a Ruby eval method really dangerous, and if so what&#39;s the alternative? (Rails)", "body": "<p>Okay so I'm using <a href=\"https://github.com/aasm/aasm\" rel=\"nofollow noreferrer\">AASM</a> in my Rails app to manage workflows around my User model. In the view layer, I want to make a little dropdown that displays all the available transitions for a given user and perform that transition when clicked, which adjusts dynamically depending on what state the user is in. It works okay. Here's the basic implementation:</p>\n\n<p><em>views/admin/users/index.html.erb</em>:</p>\n\n<pre><code>&lt;% user.available_transitions.each do |t| %&gt;\n  &lt;%= link_to(t.to_s.humanize, eval(\"#{t}_admin_user_path(user)\"), class: 'dropdown-item', :method =&gt; :post) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And in the routes file:</p>\n\n<pre><code>namespace :admin do\n    ...\n    resources :users do\n      member do\n        post 'apply'\n        post 'invite_to_interview'\n        post 'approve_for_training'\n        ...\n      end\n    end\n  end\n</code></pre>\n\n<p>Each one has a corresponding action in the controller. It isn't really worth listing each one, they just call the appropriate transition, such as <code>@user.invite_to_interview!</code> with some <code>begin/rescues</code> to catch invalid transitions due to guards, etc.</p>\n\n<p>Brakeman is freaking out about the <code>eval()</code> method in the view. I'm not 100% sure why it's bothered by this - is it just treating all <code>eval()</code> methods as evil? The object that's being passed into the method (<code>t</code>) isn't a user input, it's based on the transitions made available by the state machine. I don't know how this is something that could be a vulnerability? Maybe this is my lack of understanding about some underlying concept though...</p>\n\n<p>So two questions really:</p>\n\n<ul>\n<li>Should I be worried and why? What's the potential issue here, and if there is a problem how should I go about fixing it?</li>\n<li>In general, this feels like a cumbersome way of implementing things because every time you add a new state, transitions etc you have to create a controller action and route entry. Is there a better method for implementing this? Maybe some kind of generic <code>transition</code> action in the controller that has the transition passed in? Seems cleaner, interested to hear if anyone else has taken this approach.</li>\n</ul>\n\n<p>Thank you! I appreciate the help.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 2, "creation_date": 1575305656, "post_id": 59143332, "comment_id": 104513132, "body": "It works on my computer: <code>&quot;11 301&quot;.gsub(&#47;\\s+&#47;, &quot;&quot;) #=&gt; &quot;11301&quot;</code> Are you sure it&#39;s the regular whitespace between <code>11</code> and <code>301</code> on your computer?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575305935, "post_id": 59143332, "comment_id": 104513270, "body": "Cannot reproduce. What is <code>&quot;11 301&quot;.codepoints</code>?"}, {"owner": {"reputation": 1980, "user_id": 339067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33a5c875bbc1bc060cea6a18c58ffaee?s=128&d=identicon&r=PG", "display_name": "Mark Denn", "link": "https://stackoverflow.com/users/339067/mark-denn"}, "edited": false, "score": 0, "creation_date": 1575306089, "post_id": 59143332, "comment_id": 104513335, "body": "Codepoints is: [ 56, 160, 48, 48, 56 ]"}, {"owner": {"reputation": 1980, "user_id": 339067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33a5c875bbc1bc060cea6a18c58ffaee?s=128&d=identicon&r=PG", "display_name": "Mark Denn", "link": "https://stackoverflow.com/users/339067/mark-denn"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1575306113, "post_id": 59143332, "comment_id": 104513352, "body": "@mrzasa How can I check the type?"}, {"owner": {"reputation": 1980, "user_id": 339067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33a5c875bbc1bc060cea6a18c58ffaee?s=128&d=identicon&r=PG", "display_name": "Mark Denn", "link": "https://stackoverflow.com/users/339067/mark-denn"}, "edited": false, "score": 0, "creation_date": 1575306249, "post_id": 59143332, "comment_id": 104513411, "body": "I have updated my answer. Sometimes it works and sometimes it does not! Very strange"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575306589, "post_id": 59143332, "comment_id": 104513558, "body": "You should not have a Rails tag as this is a pure-Ruby question."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1575308303, "post_id": 59143798, "comment_id": 104514232, "body": "For reference: <code>[ 56, 160, 48, 48, 56 ].map(&amp;:chr) == [&quot;8&quot;, &quot;\\xA0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;8&quot;]</code>"}, {"owner": {"reputation": 1980, "user_id": 339067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33a5c875bbc1bc060cea6a18c58ffaee?s=128&d=identicon&r=PG", "display_name": "Mark Denn", "link": "https://stackoverflow.com/users/339067/mark-denn"}, "edited": false, "score": 0, "creation_date": 1575362575, "post_id": 59143798, "comment_id": 104530704, "body": "This is still the same outcome unfortunately (a String): value.gsub(&#39;/\\p{Blank}/&#39;,&#39;&#39;). Tried space too."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1980, "user_id": 339067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33a5c875bbc1bc060cea6a18c58ffaee?s=128&d=identicon&r=PG", "display_name": "Mark Denn", "link": "https://stackoverflow.com/users/339067/mark-denn"}, "edited": false, "score": 0, "creation_date": 1575369985, "post_id": 59143798, "comment_id": 104534907, "body": "@MarkDenn: Very strange. It works for me. I know that the Unicode database gets updated regularly in Ruby, so this is version-dependent, but U+00A0 has been in Unicode since before Ruby even existed, so I doubt that is the problem. Note that your solution only works for this particular character. It will break in exactly the same way, whenever the <i>next</i> space character comes your way. See for example <a href=\"https://stackoverflow.com/a/42410643/2988\">this question</a> where the asker had a Chinese space character."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1575307233, "creation_date": 1575307233, "answer_id": 59143798, "question_id": 59143332, "link": "https://stackoverflow.com/questions/59143332/remove-whitespace-from-a-string-and-then-convert-to-integer/59143798#59143798", "title": "Remove whitespace from a string and then convert to integer", "body": "<p>As <a href=\"https://ruby-doc.org/core/Regexp.html\" rel=\"nofollow noreferrer\">the documentation</a> says, <code>/\\s/</code> is equivalent to the character class <code>/[ \\t\\r\\n\\f\\v]/</code>. In other words, <code>/\\s/</code> is a space, a tab, carriage return, a newline, a form feed, or a vertical tab.</p>\n\n<p>You, however, have a <a href=\"https://unicode.org/cldr/utility/character.jsp?a=00A0\" rel=\"nofollow noreferrer\">U+00A0 NO-BREAK SPACE</a> character, which is not in the list of the characters matching <code>/\\s/</code>.</p>\n\n<p>A better alternative would be to match against a Unicode Character Property such as <code>/\\p{Blank}/</code> or <code>/\\p{Space}/</code>.</p>\n"}], "owner": {"reputation": 1980, "user_id": 339067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33a5c875bbc1bc060cea6a18c58ffaee?s=128&d=identicon&r=PG", "display_name": "Mark Denn", "link": "https://stackoverflow.com/users/339067/mark-denn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 59143798, "answer_count": 1, "score": 1, "last_activity_date": 1575362874, "creation_date": 1575305329, "last_edit_date": 1575362874, "question_id": 59143332, "link": "https://stackoverflow.com/questions/59143332/remove-whitespace-from-a-string-and-then-convert-to-integer", "title": "Remove whitespace from a string and then convert to integer", "body": "<p>I am building a Rails 5 app.\nIn this app I need to turn a String into an Integer.</p>\n\n<p>The string can look like this:</p>\n\n<pre><code>11 454\n</code></pre>\n\n<p>or</p>\n\n<pre><code>8 080\n</code></pre>\n\n<p>When I try the code below I can remove the white space and then .to_i</p>\n\n<pre><code>\"8 008\".gsub(/\\s+/, \"\")\n =&gt; \"8008\" \n</code></pre>\n\n<p>But when I try another number it does not remove the white space</p>\n\n<pre><code>\"11\u00a0301\".gsub(/\\s+/, \"\")\n =&gt; \"11\u00a0301\" \n</code></pre>\n\n<p>I need to first remove the whitespace before converting to an Integer otherwise I will only get the first digit for example 8 or 11.</p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>Updated</strong></p>\n\n<p>Sometimes it works and sometimes it doesn\u00b4t</p>\n\n<pre><code>2.4.2 :103 &gt; \"11 301\".gsub(/\\s+/, \"\")\n =&gt; \"11301\" \n2.4.2 :104 &gt; \"11\u00a0301\".codepoints\n =&gt; [49, 49, 160, 51, 48, 49] \n2.4.2 :105 &gt; \"11\u00a0301\".gsub(/\\s+/, \"\")\n =&gt; \"11\u00a0301\" \n2.4.2 :106 &gt; \n</code></pre>\n\n<p><strong>Updated 2</strong></p>\n\n<p>Turns out it was a none breaking space and it was solved with (as suggested in the selected answer below):</p>\n\n<pre><code>value.gsub(\"\\u00A0\", \"\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "file", "migration"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1575303525, "post_id": 59142225, "comment_id": 104512106, "body": "What code are you running?"}, {"owner": {"reputation": 3302, "user_id": 12431728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fb7b733c152599fa38023820400e9b?s=128&d=identicon&r=PG&f=1", "display_name": "Matt U", "link": "https://stackoverflow.com/users/12431728/matt-u"}, "edited": false, "score": 0, "creation_date": 1575304136, "post_id": 59142225, "comment_id": 104512393, "body": "We&#39;ll need more information in order to help you, such as the code you&#39;re using."}, {"owner": {"reputation": 1, "user_id": 12469170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b83dd536111ff77d8ae8362f5502f?s=128&d=identicon&r=PG&f=1", "display_name": "sarra", "link": "https://stackoverflow.com/users/12469170/sarra"}, "edited": false, "score": 0, "creation_date": 1575363144, "post_id": 59142225, "comment_id": 104531009, "body": "I just want to delete the migration no file with the migration 000, because I work in an app project and I can push my works on gitHub if I have this problem. This migration is going to be pushed"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1575540464, "post_id": 59142225, "comment_id": 104604026, "body": "Is that the total of migrations you have?"}], "answers": [{"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 0, "last_activity_date": 1575653801, "creation_date": 1575653801, "answer_id": 59217892, "question_id": 59142225, "link": "https://stackoverflow.com/questions/59142225/migration-no-file-with-an-id-0000/59217892#59217892", "title": "Migration NO FILE With an ID 0000", "body": "<p>If this is on your development machine only,  there are a few options: </p>\n\n<p>1) Drop the database and recreate it, using the present migrations. Take the following steps </p>\n\n<pre><code>rake db:drop \nrake db:create \nrake db:migrate \n</code></pre>\n\n<p>This will recreate the database using only the present migrations, like a clean start, and since the <code>000</code> migration file is gone, it will not be recreated.</p>\n\n<p>2) rollback all the migrations, from your list only two, and then run the migrations again</p>\n\n<pre><code> rake db:rollback STEP=2\n rake db:migrate \n</code></pre>\n\n<p>this does nearly the same as the previous option, I guess it depends on how migrations you need to rollback to see which is the easiest. </p>\n\n<p>These will only work if the migration with version '000' is NOT already deployed, or migrated by your fellow developers (when working in a team). If that <em>is</em> the case, I would consider the following options: </p>\n\n<ul>\n<li>squash all migrations into one (e.g. load the schema file from a migration)</li>\n<li>create a new migration-file with the missing-number and ... restore what it contained before (even if it was empty?)</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 12469170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b83dd536111ff77d8ae8362f5502f?s=128&d=identicon&r=PG&f=1", "display_name": "sarra", "link": "https://stackoverflow.com/users/12469170/sarra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575653801, "creation_date": 1575301133, "last_edit_date": 1575370223, "question_id": 59142225, "link": "https://stackoverflow.com/questions/59142225/migration-no-file-with-an-id-0000", "title": "Migration NO FILE With an ID 0000", "body": "<p>I have a problem with my migration.\nIt returns me that:</p>\n\n<pre><code>database: THP_POS_development\n\n Status   Migration ID    Migration Name\n--------------------------------------------------\n   up     000             ********** NO FILE **********\n   up     20191202102702  Devise create users\n</code></pre>\n\n<p>Please help me ;)\nI just want to delete the migration no file with the migration 000, because I work in an app project and I can push my works on gitHub if I have this problem. This migration is going to be pushed </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1575300954, "post_id": 59141931, "comment_id": 104510747, "body": "Pls, add migrations and models to question."}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "is_accepted": true, "score": 2, "last_activity_date": 1575303528, "creation_date": 1575303528, "answer_id": 59142849, "question_id": 59141931, "link": "https://stackoverflow.com/questions/59141931/i-cannot-make-a-function-to-delete-likes/59142849#59142849", "title": "I cannot make a function to delete likes", "body": "<p>It looks like you're missing an argument from your delete link. Try adding <code>post</code> as the first argument:</p>\n\n<pre><code>&lt;%= button_to 'Delete Vote', post_comment_vote_path(post, comment, pre_vote), method: :delete %&gt;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59142849, "answer_count": 1, "score": 0, "last_activity_date": 1575303528, "creation_date": 1575300133, "last_edit_date": 1575303332, "question_id": 59141931, "link": "https://stackoverflow.com/questions/59141931/i-cannot-make-a-function-to-delete-likes", "title": "I cannot make a function to delete likes", "body": "<p>I try to make simple voting system for comments.\nJust one button \"voteup\", and if the user has already clicked it, it changes to \"delete vote\". And everything seems to work, except for the voice removal feature. If I click \"delete vote\" an error <code>Couldn't find Post with 'id'=11</code> appears.\nAnd I do not understand why this is so, because this is, in fact, one method that is used both for voting and for removing one's vote. Only in one case does everything work, but in the other not.</p>\n\n<p>votes_controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class VotesController &lt; ApplicationController\n  before_action :find_comment\n  before_action :find_vote, only: [:destroy]\ndef create\n  if already_voted?\n    flash[:notice] = \"You can't like more than once\"\n  else\n      @comment.votes.create(author_id: current_author.id)\n  end\n  redirect_to post_path(@post)\nend\n\ndef destroy\n  if !(already_voted?)\n    flash[:notice] = \"Cannot unlike\"\n  else\n    @vote.destroy\n  end\n  redirect_to post_path(@post)\nend\n\nprivate\ndef find_comment\n  @post = Post.find(params[:post_id])\n  @comment = Comment.find(params[:comment_id])\nend\n\ndef already_voted?\n  Vote.where(author_id: current_author.id, comment_id:\n  params[:comment_id]).exists?\nend\n\ndef find_vote\n   @vote = @comment.votes.find(params[:id])\nend\nend\n</code></pre>\n\n<p>Votes  elements in _comment.html.erb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;% pre_vote = comment.votes.find { |vote| vote.author_id == current_author.id} %&gt;\n        &lt;% if pre_vote %&gt;\n          &lt;%= button_to 'Delete Vote', post_comment_vote_path(comment, pre_vote), method: :delete %&gt;\n        &lt;% else %&gt;\n          &lt;%= button_to 'UpVote', post_comment_votes_path(post, comment), method: :post %&gt;\n        &lt;% end %&gt;\n      &lt;p&gt;&lt;%= comment.votes.count %&gt; &lt;%= (comment.votes.count) == 1 ? 'Like' : 'Likes'%&gt;&lt;/p&gt;\n</code></pre>\n\n<p><strong>UPD</strong>\nThis post has id - 3, not 11.\nThe comment has id 11.\nFor some reason, it confused everything during the removal of like.</p>\n\n<p><strong>UPD 2</strong></p>\n\n<p>Migration:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def change\n    create_table :votes do |t|\n      t.references :comment, null: false, foreign_key: true\n      t.references :author, null: false, foreign_key: true\n\n      t.timestamps\n    end\n  end\n</code></pre>\n\n<p>vote.rb :</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Vote &lt; ApplicationRecord\n  belongs_to :comment\n  belongs_to :author\nend\n</code></pre>\n\n<p>comment.rb and author.rb : <code>has_many :votes, dependent: :destroy</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1575303261, "creation_date": 1575303261, "answer_id": 59142790, "question_id": 59141027, "link": "https://stackoverflow.com/questions/59141027/active-record-association-in-rails-for-a-secret-santa-type-buyer-receiver-relati/59142790#59142790", "title": "Active Record association in rails for a Secret Santa type buyer/receiver relation", "body": "<p>It looks like you just need a simple migration with a couple of validation.</p>\n\n<pre><code>rails generate migration AddSantaRefToUsers\n</code></pre>\n\n<p>Edit migration to be:</p>\n\n<pre><code>class AddSantaRefToUsers &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :santa_id, :integer\n    add_index :users, :santa_id\n  end\nend\n</code></pre>\n\n<p>Run migration <code>rake db:migrate</code> then update your User model.</p>\n\n<pre><code>class User\n  has_one :santa, foreign_key: 'santa_id'\n  belongs_to :santa, class_name: 'User'\n\n  validate :can_be_santa\n  validates :santa_id, uniqueness: true # this means no duplicate Santas\n\n  private\n  def can_be_santa\n    if self.santa == self\n      self.errors.add(user_id:, \"You can't be your own Santa!\")\n    end\n  end\nend\n</code></pre>\n\n<p>Then making someone another user's Santa should be as easy as:</p>\n\n<pre><code>user1.santa = user2 \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12468843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479f5607031033253f1603f1b37cdd60?s=128&d=identicon&r=PG&f=1", "display_name": "AlexS", "link": "https://stackoverflow.com/users/12468843/alexs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575303261, "creation_date": 1575297058, "question_id": 59141027, "link": "https://stackoverflow.com/questions/59141027/active-record-association-in-rails-for-a-secret-santa-type-buyer-receiver-relati", "title": "Active Record association in rails for a Secret Santa type buyer/receiver relation", "body": "<p>Trying to get my head around the correct tables and associations for a user model to be related in such a way that a user can be both the buyer and receiver of gifts to/from other users. Each user should only be a buyer for one other user and only be a receiver from one other user.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1575297057, "post_id": 59140846, "comment_id": 104508611, "body": "While there is no difference between the two I would like to mention that <code>*</code> is generally referred to as a splat not a splash"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1575303045, "post_id": 59140846, "comment_id": 104511837, "body": "Thanks for pointing out! Of course you are right. Don&#39;t know how the &#39;splash&#39; slipped in .... perhaps I&#39;m taking a bath too often."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1575304423, "post_id": 59140846, "comment_id": 104512552, "body": "Are you a <a href=\"https://m.youtube.com/watch?v=QSA-yHzkvP8\" rel=\"nofollow noreferrer\">Bobby Darin</a> fan perchance?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1575352493, "post_id": 59140846, "comment_id": 104527000, "body": "Not exactly, but I get the point :-D"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1575378198, "post_id": 59140846, "comment_id": 104539590, "body": "BTW, <code>x, y = a</code> is a shorthand variant of <code>(x, y) = a</code> which denotes <a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">array decomposition</a>. The documentation doesn&#39;t even mention that you can omit the parentheses."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575321457, "post_id": 59142388, "comment_id": 104519461, "body": "<code>Array#to_ary</code> is the only so-named core method. Are you (or anyone else) aware of an application where it has been useful to define a method <code>to_ary</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575325881, "post_id": 59142388, "comment_id": 104520992, "body": "@CarySwoveland so far I never had to define <code>to_ary</code> (or any other implicit conversion method like <code>to_hash</code>, <code>to_str</code>, <code>to_int</code> etc). An application could be an array-like class that&#39;s not a subclass of <code>Array</code> or maybe a mock in a test."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1575303465, "last_edit_date": 1575303465, "creation_date": 1575301733, "answer_id": 59142388, "question_id": 59140846, "link": "https://stackoverflow.com/questions/59140846/distributing-array-over-a-scalars-to-splash-or-not-to-splash/59142388#59142388", "title": "Distributing array over a scalars: To splash or not to splash?", "body": "<blockquote>\n  <p>To be more precise, is it possible that in certain situations (maybe depending on the actual content of <code>a</code>) these two variants behave different, and there is a reason to prefer one over the other?</p>\n</blockquote>\n\n<p>The difference is subtle. The former attempts to call <code>to_ary</code> (implicit conversion), whereas the latter attempts to call <code>to_a</code> (explicit conversion due to <code>*</code>):</p>\n\n<pre><code>a = Object.new\n\ndef a.to_ary\n  [1, 2, 3]\nend\n\ndef a.to_a\n  [:a, :b, :c]\nend\n\nx, y = a\np x: x, y: y\n#=&gt; {:x=&gt;1, :y=&gt;2}\n\nx, y = *a\np x: x, y: y\n#=&gt; {:x=&gt;:a, :y=&gt;:b}\n</code></pre>\n\n<p>However, if <code>a</code> is an array, there's no difference between the two.</p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 59142388, "answer_count": 1, "score": 1, "last_activity_date": 1575303465, "creation_date": 1575296461, "question_id": 59140846, "link": "https://stackoverflow.com/questions/59140846/distributing-array-over-a-scalars-to-splash-or-not-to-splash", "title": "Distributing array over a scalars: To splash or not to splash?", "body": "<p>Say I have an array <code>a</code> and want to assign its first element to variable <code>x</code> and its second element to variable <code>y</code>. Ruby offers me (at least) two possibilities:</p>\n\n<pre><code>x,y = a\n</code></pre>\n\n<p>or</p>\n\n<pre><code>x,y = *a\n</code></pre>\n\n<p>Aside from the fact that I, personally, find the second form (i.e. using an explicit splash operator) more logical, is there any difference between the two? To be more precise, is it possible that in certain situations (maybe depending on the actual content of <code>a</code>) these two variants behave different, and there is a reason to prefer one over the other?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "cmd"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 1, "creation_date": 1575279534, "post_id": 59135965, "comment_id": 104499457, "body": "Paste converted ruby code in irb console and check <code>response.body</code> Also, add error that you are facing"}, {"owner": {"reputation": 327, "user_id": 7974208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y3GJNTwk_es/AAAAAAAAAAI/AAAAAAAAARg/J0AdlD1l2RY/photo.jpg?sz=128", "display_name": "Abdul Wahed", "link": "https://stackoverflow.com/users/7974208/abdul-wahed"}, "edited": false, "score": 0, "creation_date": 1575286077, "post_id": 59135965, "comment_id": 104502871, "body": "make sure you have these two lines <code>require &#39;net&#47;http&#39;</code> <code>require &#39;uri&#39;</code>"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575292337, "post_id": 59135965, "comment_id": 104506045, "body": "If you want to actually use curl you can use <code>curb</code> gem <a href=\"https://rubygems.org/gems/curb/versions/0.9.10\" rel=\"nofollow noreferrer\">rubygems.org/gems/curb/versions/0.9.10</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575294554, "post_id": 59135965, "comment_id": 104507276, "body": "@arieljuod but why use curb if std-lib net/http works ?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575294613, "post_id": 59135965, "comment_id": 104507311, "body": "@ChrisServ so why are you using the curl converter if it doesn&#39;t work for you?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575294907, "post_id": 59135965, "comment_id": 104507473, "body": "@lacostenycoder it&#39;s just another option, someone may want to use curl and there&#39;s a gem for that and that&#39;s ok"}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "is_accepted": true, "score": 1, "last_activity_date": 1575293190, "creation_date": 1575293190, "answer_id": 59139900, "question_id": 59135965, "link": "https://stackoverflow.com/questions/59135965/how-to-use-certain-curl-in-ruby-rails/59139900#59139900", "title": "How to use certain curl in ruby rails", "body": "<p>Your code seems to work but you need to look at <code>response.body</code>:</p>\n\n<pre><code>require 'net/http'\n\nuri = URI.parse(\"https://api.wappalyzer.com/lookup/v1/?url=https://example.com\")\nrequest = Net::HTTP::Get.new(uri)\nrequest[\"X-Api-Key\"] = \"wappalyzer.api.demo.key\"\nreq_options = {  use_ssl: uri.scheme == \"https\" }\nresponse = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n  http.request(request)\nend\n\nputs response.body\n\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 12365920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA_MRquLbi8WJCSL7_S7W_5COoyl50zFkAINHteVA=k-s128", "display_name": "Chris Serv", "link": "https://stackoverflow.com/users/12365920/chris-serv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 59139900, "answer_count": 1, "score": 0, "last_activity_date": 1575293190, "creation_date": 1575279075, "last_edit_date": 1575292607, "question_id": 59135965, "link": "https://stackoverflow.com/questions/59135965/how-to-use-certain-curl-in-ruby-rails", "title": "How to use certain curl in ruby rails", "body": "<p>I have tried using curl-to-ruby (<a href=\"https://jhawthorn.github.io/curl-to-ruby/\" rel=\"nofollow noreferrer\">https://jhawthorn.github.io/curl-to-ruby/</a>)</p>\n\n<pre><code>uri = URI.parse(\"https://api.wappalyzer.com/lookup/v1/?url=https://example.com\")\nrequest = Net::HTTP::Get.new(uri)\nrequest[\"X-Api-Key\"] = \"wappalyzer.api.demo.key\"\nreq_options = {  use_ssl: uri.scheme == \"https\", }\nresponse = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n  http.request(request)\nend\n</code></pre>\n\n<p>Had no success, it gives back a http response code.</p>\n\n<p>This is my curl:</p>\n\n<pre><code>curl -H \"X-Api-Key: wappalyzer.api.demo.key\" https://api.wappalyzer.com/lookup/v1/?url=https://example.com&amp;callback_url=https://theverge.com\n</code></pre>\n\n<p>It's supposed to give back data about in what a website is made.</p>\n\n<p>example of what its supposed to give:</p>\n\n<pre><code>[{\"monthYear\":\"12-2019\",\"languages\":[],\"applications\":[{\"name\":\"Apache\",\"categories\":[\"Web Servers\"],\"versions\":[\"2.4.29\"],\"hits\":754},{\"name\":\"Ubuntu\",\"categories\":[\"Operating Systems\"],\"versions\":[],\"hits\":754},{\"name\":\"PHP\",\"categories\":[\"Programming Languages\"],\"versions\":[],\"hits\":713},{\"name\":\"Symfony\",\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 297, "user_id": 11526748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1bsU.jpg?s=128&g=1", "display_name": "sivamani", "link": "https://stackoverflow.com/users/11526748/sivamani"}, "is_accepted": false, "score": 0, "last_activity_date": 1575275284, "last_edit_date": 1575275284, "creation_date": 1575271047, "answer_id": 59134220, "question_id": 59134188, "link": "https://stackoverflow.com/questions/59134188/couldnt-find-spreepage-error-how-to-solve-this-issue/59134220#59134220", "title": "Couldn&#39;t find Spree::Page Error how to solve this Issue", "body": "<p><a href=\"https://i.stack.imgur.com/xzjUr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xzjUr.png\" alt=\"enter image description here\"></a>Just noticed it seems to be unchecking my store check box on every save in admin side.</p>\n"}], "owner": {"reputation": 297, "user_id": 11526748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1bsU.jpg?s=128&g=1", "display_name": "sivamani", "link": "https://stackoverflow.com/users/11526748/sivamani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575275284, "creation_date": 1575270851, "question_id": 59134188, "link": "https://stackoverflow.com/questions/59134188/couldnt-find-spreepage-error-how-to-solve-this-issue", "title": "Couldn&#39;t find Spree::Page Error how to solve this Issue", "body": "<p>I have integrated spree static pages gem in my existing spree app.And I created one new page in admin side but the page link is displayed this following error.</p>\n\n<p>Couldn't find Spree::Page\nCouldn't find Spree::Page with [WHERE \"spree_pages\".\"visible\" = $1 AND (spree_pages_stores.store_id = 1) AND \"spree_pages\".\"slug\" = $2]</p>\n"}, {"tags": ["javascript", "jquery", "html", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 12289413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH0Ew.jpg?s=128&g=1", "display_name": "NewbieOnRails", "link": "https://stackoverflow.com/users/12289413/newbieonrails"}, "is_accepted": true, "score": 0, "last_activity_date": 1575320394, "creation_date": 1575320394, "answer_id": 59146582, "question_id": 59133037, "link": "https://stackoverflow.com/questions/59133037/get-return-from-javascript-function-to-html-attribute/59146582#59146582", "title": "Get return from javascript function to html attribute", "body": "<p>I solved the problem doing this:</p>\n\n<pre><code>    function getScore(){\n      var hrefAttr = document.getElementById(\"rating-link\").getAttribute(\"href\"); // /books/5/rating_book?rate=5\n      var hrefTrunk = hrefAttr.slice(0, hrefAttr.length-1); // /books/5/rating_book?rate=\n      console.log(hrefTrunk + $('#rating').raty('score')); // DEBUG: concat with new score\n      document.getElementById(\"rating-link\").setAttribute(\"href\", hrefTrunk + $('#rating').raty('score'));\n    }\n</code></pre>\n\n<p>And I added <code>id: \"rating-link\"</code> like an attribute for link_to</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12439128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec20d437687e3f004c6f1f8f0726f84f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Mosk", "link": "https://stackoverflow.com/users/12439128/alex-mosk"}, "is_accepted": false, "score": 0, "last_activity_date": 1575730731, "creation_date": 1575730731, "answer_id": 59227251, "question_id": 59133037, "link": "https://stackoverflow.com/questions/59133037/get-return-from-javascript-function-to-html-attribute/59227251#59227251", "title": "Get return from javascript function to html attribute", "body": "<pre><code>&lt;%= link_to rating_book_path(@book, :rate =&gt; HERE_I_WANT_THE_SCORE_RETURNED_BY_FUNCTION), style: \"text-decoration: none;\" do %&gt;\n  &lt;div id=\"rating\" data-score=\"1\"&gt;&lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  $(document).ready(function() {\n    $('#rating').raty('reload'); //Previene el error de que al volver atras o ir adelante se muestren m\u00e1s estrellas de las debidas\n    $('#rating').raty({\n      path: '/assets/'\n    });\n\n    $(\"#rating img\").mouseover(function(){\n      $('#rating').data('score', this.alt)\n    });\n\n    $('#rating').click(function(){\n      return $('#rating').raty('score');\n    });\n  });\n  &lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12289413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH0Ew.jpg?s=128&g=1", "display_name": "NewbieOnRails", "link": "https://stackoverflow.com/users/12289413/newbieonrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 59146582, "answer_count": 2, "score": 0, "last_activity_date": 1575730731, "creation_date": 1575263973, "question_id": 59133037, "link": "https://stackoverflow.com/questions/59133037/get-return-from-javascript-function-to-html-attribute", "title": "Get return from javascript function to html attribute", "body": "<p>I have this code in ones of my views</p>\n\n<pre><code>  &lt;%= link_to rating_book_path(@book, :rate =&gt; HERE_I_WANT_THE_SCORE_RETURNED_BY_FUNCTION), style: \"text-decoration: none;\" do %&gt;\n     &lt;div id=\"rating\" data-score=\"1\" onclick=\"getScore();\"&gt;&lt;/div&gt;\n  &lt;% end %&gt;\n &lt;script&gt;\n    $(document).ready(function() {\n      $('#rating').raty('reload'); //Previene el error de que al volver atras o ir adelante se muestren m\u00e1s estrellas de las debidas\n        $('#rating').raty({\n            path: '/assets/'\n        });\n    })\n    function getScore(){\n      return $('#rating').raty('score');\n    }\n  &lt;/script&gt;\n</code></pre>\n\n<p>What I need is the value returned by the function <code>getScore()</code> gets placed next to <code>:rate =&gt;</code> symbol, so the link to it redirect is something like: <code>/books/5/rating_book?rate=THE_VALUE_RETURNED_BY_THE_FUNCTION</code> (i.e: <code>/books/5/rating_book?rate=3</code>)</p>\n\n<p>Maybe can help that the ruby helper is translated to html like this:</p>\n\n<pre><code>&lt;a style=\"text-decoration: none;\" href=\"/books/5/rating_book?rate=5\"&gt;\n     &lt;div id=\"rating\" data-score=\"1\" onclick=\"getScore();\" style=\"cursor: pointer;\"&gt;\n     &lt;img alt=\"1\" src=\"/assets/star-on.png\" title=\"bad\"&gt;&amp;nbsp;\n     &lt;img alt=\"2\" src=\"/assets/star-off.png\" title=\"poor\"&gt;&amp;nbsp;\n     &lt;img alt=\"3\" src=\"/assets/star-off.png\" title=\"regular\"&gt;&amp;nbsp;\n     &lt;img alt=\"4\" src=\"/assets/star-off.png\" title=\"good\"&gt;&amp;nbsp;\n     &lt;img alt=\"5\" src=\"/assets/star-off.png\" title=\"gorgeous\"&gt;\n     &lt;input name=\"score\" type=\"hidden\" value=\"1\"&gt;&lt;/div&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1575274147, "last_edit_date": 1592644375, "creation_date": 1575269585, "answer_id": 59133930, "question_id": 59133006, "link": "https://stackoverflow.com/questions/59133006/union-two-arrays-while-filling-the-gaps/59133930#59133930", "title": "Union two arrays while filling the gaps", "body": "<p><strong>Data</strong></p>\n<pre><code>class Day\n  attr_accessor :name, :magnitude\n  def initialize(name, magnitude)\n    @name = name\n    @magnitude = magnitude\n  end\nend\n</code></pre>\n<h1><p></p></h1>\n<pre><code>days = [[&quot;Monday&quot;, 4], [&quot;Friday&quot;, 3], [&quot;Sunday&quot;, 8]].map {|args|\n  Day.new(*args) }\n  #=&gt; [#&lt;Day:0x00005a1be9157548 @name=&quot;Monday&quot;, @magnitude=4&gt;,\n  #    #&lt;Day:0x00005a1be91574d0 @name=&quot;Friday&quot;, @magnitude=3&gt;,\n  #    #&lt;Day:0x00005a1be91574a8 @name=&quot;Sunday&quot;, @magnitude=8&gt;]\n</code></pre>\n<p><strong>Code</strong></p>\n<pre><code>require 'date'\n</code></pre>\n<h1><p></p></h1>\n<pre><code>h = days.each_with_object({}) { |inst,h| h[inst.name] = inst }\n  #=&gt; {&quot;Monday&quot;=&gt;#&lt;Day:0x00005a1be9157548 @name=&quot;Monday&quot;, @magnitude=4&gt;,\n  #    &quot;Friday&quot;=&gt;#&lt;Day:0x00005a1be91574d0 @name=&quot;Friday&quot;, @magnitude=3&gt;,\n  #    &quot;Sunday&quot;=&gt;#&lt;Day:0x00005a1be91574a8 @name=&quot;Sunday&quot;, @magnitude=8&gt;} \n</code></pre>\n<h1><p></p></h1>\n<pre><code>h.default_proc = -&gt;(h,d) { h[d] = Day.new(d,0) }\n  #=&gt; #&lt;Proc:0x00005a1be93ce858@(irb):26 (lambda)&gt; \n</code></pre>\n<h1><p></p></h1>\n<pre><code>h.values_at(*Date::DAYNAMES.rotate(1))\n  #=&gt; [#&lt;Day:0x00005a1be9157548 @name=&quot;Monday&quot;, @magnitude=4&gt;,\n  #    #&lt;Day:0x00005a1be93d8ec0 @name=&quot;Tuesday&quot;, @magnitude=0&gt;,\n  #    #&lt;Day:0x00005a1be93d8e98 @name=&quot;Wednesday&quot;, @magnitude=0&gt;,\n  #    #&lt;Day:0x00005a1be93d8e70 @name=&quot;Thursday&quot;, @magnitude=0&gt;,\n  #    #&lt;Day:0x00005a1be91574d0 @name=&quot;Friday&quot;, @magnitude=3&gt;,\n  #    #&lt;Day:0x00005a1be93d8e48 @name=&quot;Saturday&quot;, @magnitude=0&gt;,\n  #    #&lt;Day:0x00005a1be91574a8 @name=&quot;Sunday&quot;, @magnitude=8&gt;] \n</code></pre>\n<p><strong>Explanation</strong></p>\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-default_proc-3D\" rel=\"nofollow noreferrer\">Hash#default_proc=</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\">Hash#values_at</a>. If <code>h</code> does not have a key <code>day</code> the default proc causes <code>h</code> to return a new <code>Day</code> object with <code>@name</code> equal to the value of <code>day</code> and <code>@magnitude</code> equal to zero.</p>\n<p>The first two expressions could be combined using (for example) <a href=\"https://ruby-doc.org/core-2.6.5/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Object#tap</a>:</p>\n<pre><code>h = days.each_with_object({}) { |inst,h| h[inst.name] = inst }.\n         tap { |h| h.default_proc = -&gt;(h,d) { h[d] = Day.new(d,0) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1575279853, "creation_date": 1575279853, "answer_id": 59136175, "question_id": 59133006, "link": "https://stackoverflow.com/questions/59133006/union-two-arrays-while-filling-the-gaps/59136175#59136175", "title": "Union two arrays while filling the gaps", "body": "<p>You can consider to map against an array of weekdays:</p>\n\n<pre><code>weekdays = %w(Monday Tuesday Wednesday Thursday Friday Saturday Sunday)\n</code></pre>\n\n<p>Where you can use the constant <code>Date::DAYNAMES</code> available requiring the <code>date</code> library.</p>\n\n<p>Then, given your array (I'm not using the class <code>Day</code>) for example as</p>\n\n<pre><code>days = [ ['Monday', 4], ['Friday', 3], ['Sunday', 8] ]\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>weekdays.map { |weekday| days.find { |e| e.first == weekday } || [weekday, 0] }\n#=&gt; [[\"Monday\", 4], [\"Tuesday\", 0], [\"Wednesday\", 0], [\"Thursday\", 0], [\"Friday\", 3], [\"Saturday\", 0], [\"Sunday\", 8]]\n</code></pre>\n\n<p>Or, using your class:</p>\n\n<pre><code>weekdays.map { |weekday| days.find { |e| e.name == weekday } || Day.new(weekday, 0) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1575315971, "last_edit_date": 1575315971, "creation_date": 1575314314, "answer_id": 59145373, "question_id": 59133006, "link": "https://stackoverflow.com/questions/59133006/union-two-arrays-while-filling-the-gaps/59145373#59145373", "title": "Union two arrays while filling the gaps", "body": "<p>I would go for a similar answer as already given by <a href=\"https://stackoverflow.com/a/59133930/3982562\">Cary Swoveland</a>. However I'd use the following:</p>\n\n<pre><code>day_lookup = days.to_h { |day| [day.name, day] }\nday_lookup.default_proc = -&gt;(_, name) { Day.new(name: name, magnitude: 0) }\ndays = day_lookup.values_at(*Date::DAYNAMES.rotate(1))\n</code></pre>\n\n<p>So, what did I change? If you use Ruby 2.6.0 or greater you can use <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>Array#to_h</code></a> with a block, which makes creating a hash from array a lot cleaner in my opinion.</p>\n\n<p>Secondly I only return a default value if a name is not present, but don't set the value in the <code>day_lookup</code> hash. If you need to access a day multiple times this might be a good idea to do, however in this scenario we only call <a href=\"https://ruby-doc.org/core-2.6.5/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a> once and then we're done with the hash.</p>\n"}], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1575315971, "creation_date": 1575263752, "question_id": 59133006, "link": "https://stackoverflow.com/questions/59133006/union-two-arrays-while-filling-the-gaps", "title": "Union two arrays while filling the gaps", "body": "<p>I have a <code>day</code> object. It has two attributes: <code>name</code> and <code>magnitude</code> where <code>name</code> is the name of the day (\"Monday\", \"Tuesday\" ....) while <code>magnitude</code> is an integer.</p>\n\n<p>I need to build a <code>week</code> which must always return an array of 7 <code>day</code>s, one for each day of the week. </p>\n\n<p>However, sometimes, the array I get has less than 7 <code>day</code>s. I.e.</p>\n\n<pre><code>days = [&lt;Day name: \"Monday\", magnitude: 4&gt;, \n        &lt;Day name: \"Friday\", magnitude: 3&gt;, \n        &lt;Day name: \"Sunday\", magnitude: 8&gt;]\n</code></pre>\n\n<p>So, to build the week I came up with the following code</p>\n\n<pre><code>default = Date::DAYNAMES.rotate(1).map{ |day| Day.new(name: day, magnitude: 0) }\n\ndefault.map do |day|\n days.detect do |other|\n   other.day == day.day\n end || day\nend\n</code></pre>\n\n<p>This works but I find it pretty ugly. I'd rather perform a union between the two arrays. However, I must preserve the order of the <code>day</code>s in the array. <code>Monday</code> must always be the first day while <code>Sunday</code> the last one.</p>\n\n<p>Any ideas on how to improve the code above?   </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1575297681, "post_id": 59132649, "comment_id": 104508970, "body": "That seems like a strange workflow. Have you considered having a bit flag indicating approval or a staging area (PrePressAd) for ads in production? That when when the ad is approved you can either flip the bit or move the image from the <code>pre_press_ads</code> to <code>ads</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1575270247, "post_id": 59133830, "comment_id": 104495706, "body": "I thought of it, but its not a wise decision maybe. Because each image has multiple versions."}, {"owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1575276897, "post_id": 59133830, "comment_id": 104498212, "body": "@Emu How about copying the root images file path?"}], "tags": [], "owner": {"reputation": 722, "user_id": 3643211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kEAbU.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3643211/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1575268996, "creation_date": 1575268996, "answer_id": 59133830, "question_id": 59132649, "link": "https://stackoverflow.com/questions/59132649/rails-copy-record-from-staging-to-production/59133830#59133830", "title": "Rails copy record from staging to production", "body": "<p>It seems the images are urls which represent the files' paths, and the image files are stored in the file system. You can just copy those files to the new server with rsync or scp tools.</p>\n"}], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575268996, "creation_date": 1575260722, "question_id": 59132649, "link": "https://stackoverflow.com/questions/59132649/rails-copy-record-from-staging-to-production", "title": "Rails copy record from staging to production", "body": "<p>I'm working on a project where there are two environments <strong>staging</strong> and <strong>production</strong>. The marketing team creates records on staging environment and wait for client approval. If client approves, then they have to create the same record on production environment which is a re-work. </p>\n\n<p>I would like to move the staging record to production. To do that, I created a separate model on my <code>models/ad_to_production.rb</code>, in there I established the connection to the production database. The original model name is <code>Ad</code>. </p>\n\n<p>The problem is that, the <code>ad</code> record that I'm trying to copy to remote database has some images. I'm not sure how to send the images over to the production server. This is what I've done so far:</p>\n\n<pre><code>class Ad &lt; ActiveRecord::Base\n#  id              :integer          not null, primary key\n#  title           :string\n#  image           :string\n#  destination_url :text\n#  created_at      :datetime         not null\n#  updated_at      :datetime         not null\nend\n\n\nclass AdToProduction &lt; ActiveRecord::Base\n  establish_connection :\"production_db\"\n\n\n\n  def copy(staging_ad)\n    self.title = staging_ad.title\n    self.image = image if staging_ad.image.present?\n    # skip codes\n  end \nend\n</code></pre>\n\n<p>Any suggestion is highly appreciated! </p>\n"}, {"tags": ["ruby", "canvas", "moodle", "common-cartridge"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 12759668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df5aeaf288af974a96686418fc2c9bfb?s=128&d=identicon&r=PG", "display_name": "Poussy", "link": "https://stackoverflow.com/users/12759668/poussy"}, "is_accepted": true, "score": 0, "last_activity_date": 1579680301, "last_edit_date": 1579680301, "creation_date": 1579676818, "answer_id": 59854329, "question_id": 59131151, "link": "https://stackoverflow.com/questions/59131151/ruby-canvas-cc-gem-is-causing-errors/59854329#59854329", "title": "Ruby canvas_cc gem is causing errors", "body": "<p>Just initialize this property </p>\n\n<pre><code>course.grading_standards = []\n</code></pre>\n\n<p>before </p>\n\n<pre><code>output_dir = CanvasCc::CanvasCC::CartridgeCreator.new(course).create(Dir.pwd + \"/cartridge\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12465707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2e6d978ad15ba58c3799686f8b7ee8?s=128&d=identicon&r=PG&f=1", "display_name": "notdolphin", "link": "https://stackoverflow.com/users/12465707/notdolphin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59854329, "answer_count": 1, "score": 0, "last_activity_date": 1579680301, "creation_date": 1575245042, "question_id": 59131151, "link": "https://stackoverflow.com/questions/59131151/ruby-canvas-cc-gem-is-causing-errors", "title": "Ruby canvas_cc gem is causing errors", "body": "<p>Attempting to use the Ruby 'canvas_cc' gem to create .imscc cartridges, but running into issues that I am having difficulty trouble shooting. I followed the basic documentation in the readme, but I get an issue from within the gem.</p>\n\n<p>Ruby</p>\n\n<pre><code>require 'tmpdir'\ncourse = CanvasCc::CanvasCC::Models::Course.new\ncourse.identifier = \"cc\"\ncourse.title =  \"testing cc\"\ndir = Dir.mktmpdir\noutput_dir = CanvasCc::CanvasCC::CartridgeCreator.new(course).create(dir)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Traceback (most recent call last):\n        5: from course_creation.rb:25:in `&lt;main&gt;'\n        4: from /Users/me/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/canvas_cc-0.0.43/lib/canvas_cc/canvas_cc/cartridge_creator.rb:18:in `create'\n        3: from /Users/me/.rbenv/versions/2.5.1/lib/ruby/2.5.0/tmpdir.rb:89:in `mktmpdir'\n        2: from /Users/me/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/canvas_cc-0.0.43/lib/canvas_cc/canvas_cc/cartridge_creator.rb:19:in `block in create'\n        1: from /Users/me/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/canvas_cc-0.0.43/lib/canvas_cc/canvas_cc/cartridge_creator.rb:45:in `write_cartridge'\n/Users/me/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/canvas_cc-0.0.43/lib/canvas_cc/canvas_cc/grading_standard_writer.rb:11:in `write': undefined method `empty?' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>Also tried </p>\n\n<pre><code>require 'canvas_cc'\ncourse = CanvasCc::CanvasCC::Models::Course.new\ncourse.identifier = \"cc\"\ncourse.title =  \"testing cc\"\ndir = Dir.mkdir \"cartridge\"\noutput_dir = CanvasCc::CanvasCC::CartridgeCreator.new(course).create(Dir.pwd + \"/cartridge\")\n</code></pre>\n\n<p>I am getting the same error running the second script as the first. </p>\n\n<p>I've tried to understand what is wrong by looking through both the documentation and the code in the gem, but I can't seem to debug it. I am using Ruby 2.5.1 with rbenv, but I have tried multiple other ruby versions with the same issue.</p>\n\n<p>My goal is to just create basic common cartridges with this gem, but I can't even do that. Any help would be much appreciated with this!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7922131, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wu6zXXnPxpw/AAAAAAAAAAI/AAAAAAAAACA/0i04Scen-UE/photo.jpg?sz=128", "display_name": "xc2333", "link": "https://stackoverflow.com/users/7922131/xc2333"}, "edited": false, "score": 0, "creation_date": 1575413204, "post_id": 59131379, "comment_id": 104556768, "body": "Thanks for the suggestions! It&#39;s really helpful!"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 1, "last_activity_date": 1575247880, "creation_date": 1575247880, "answer_id": 59131379, "question_id": 59131144, "link": "https://stackoverflow.com/questions/59131144/failed-to-upgrade-rails-from-4-20-to-5-2-3/59131379#59131379", "title": "Failed to upgrade Rails from 4.20 to 5.2.3", "body": "<p>You have to fix gems version, for example:</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"railties\":\n\nactiveadmin was resolved to 2.5.0, which depends on\n  railties (&lt; 6.1, &gt;= 5.2)\n\ncoffee-rails (~&gt; 4.1.0) was resolved to 4.1.0, which depends on\n  railties (&lt; 5.0, &gt;= 4.0.0)\n\ndevise was resolved to 4.2.1, which depends on\n  railties (&lt; 5.1, &gt;= 4.1.0)\n\nactiveadmin was resolved to 2.5.0, which depends on\n  jquery-rails (~&gt; 4.2) was resolved to 4.3.5, which depends on\n    railties (&gt;= 4.2.0)\n\nrails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n  railties (= 5.2.4.rc1)\n</code></pre>\n\n<p>This tells you that coffee-rails depends on railties &lt; 5.0, devise on railties &lt; 5.1, and rails 5.23 depends on railties 5.2.4.rc1. So you should ask for newer versions of devise and coffee-rails in that case.</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"activerecord\":\n\nacts-as-taggable-on was resolved to 5.0.0, which depends on\n  activerecord (&gt;= 4.2.8)\n\ndeep_cloneable was resolved to 3.0.0, which depends on\n  activerecord (&lt; 7, &gt;= 3.1.0)\n\noink was resolved to 0.10.1, which depends on\n  activerecord\n\nrails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n  activerecord (= 5.2.4.rc1)\n\nactiveadmin was resolved to 1.4.3, which depends on\n  ransack (&gt;= 1.8.7) was resolved to 1.8.10, which depends on\n    activerecord (&lt; 5.2, &gt;= 3.0)\n</code></pre>\n\n<p>This one tells you that you are requiring activeadmin 1.4.3 that depends on ransak >= 1.8.7 that depends on activerecord &lt; 5.2, but rails 5.2.3 depends on activerecord 5.2.4.rc1. You need to update your activeadmin and ransack gems.</p>\n\n<p>Fix the conflicts for each gem telling your gemfile which version to use for, you can check them at rubygems.</p>\n\n<p>You have the gems installed on your system, but you have conflicts between other gems' dependencies.</p>\n"}], "owner": {"reputation": 37, "user_id": 7922131, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wu6zXXnPxpw/AAAAAAAAAAI/AAAAAAAAACA/0i04Scen-UE/photo.jpg?sz=128", "display_name": "xc2333", "link": "https://stackoverflow.com/users/7922131/xc2333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 0, "accepted_answer_id": 59131379, "answer_count": 1, "score": 0, "last_activity_date": 1575247880, "creation_date": 1575244913, "question_id": 59131144, "link": "https://stackoverflow.com/questions/59131144/failed-to-upgrade-rails-from-4-20-to-5-2-3", "title": "Failed to upgrade Rails from 4.20 to 5.2.3", "body": "<p>I am trying to upgrade a rails 4.2 application to 5.2.3.<br>\nMy system is MacOS 10.14.6 Mojave. Bundler version 2.0.2 <br></p>\n\n<p>Here is the error after I did <code>bundle update</code>:</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"actionpack\":\n  In Gemfile:\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      actionpack (= 5.2.4.rc1)\n\n    simple_form was resolved to 5.0.1, which depends on\n      actionpack (&gt;= 5.0)\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      sprockets-rails (&gt;= 2.0.0) was resolved to 3.2.1, which depends on\n        actionpack (&gt;= 4.0)\n\nBundler could not find compatible versions for gem \"activemodel\":\n  In Gemfile:\n    paperclip was resolved to 6.1.0, which depends on\n      activemodel (&gt;= 4.2.0)\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      activemodel (= 5.2.4.rc1)\n\n    simple_form was resolved to 5.0.1, which depends on\n      activemodel (&gt;= 5.0)\n\nBundler could not find compatible versions for gem \"activerecord\":\n  In Gemfile:\n    acts-as-taggable-on was resolved to 6.5.0, which depends on\n      activerecord (&lt; 6.1, &gt;= 5.0)\n\n    deep_cloneable was resolved to 3.0.0, which depends on\n      activerecord (&lt; 7, &gt;= 3.1.0)\n\n    oink was resolved to 0.10.1, which depends on\n      activerecord\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      activerecord (= 5.2.4.rc1)\n\nBundler could not find compatible versions for gem \"activesupport\":\n  In Gemfile:\n    jbuilder (~&gt; 2.0) was resolved to 2.9.1, which depends on\n      activesupport (&gt;= 4.2.0)\n\n    activeadmin was resolved to 2.5.0, which depends on\n      kaminari (&gt;= 1.0.1, ~&gt; 1.0) was resolved to 1.1.1, which depends on\n        activesupport (&gt;= 4.1.0)\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      activesupport (= 5.2.4.rc1)\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      sprockets-rails (&gt;= 2.0.0) was resolved to 3.2.1, which depends on\n        activesupport (&gt;= 4.0)\n\nBundler could not find compatible versions for gem \"railties\":\n  In Gemfile:\n    activeadmin was resolved to 2.5.0, which depends on\n      railties (&lt; 6.1, &gt;= 5.2)\n\n    coffee-rails (~&gt; 4.1.0) was resolved to 4.1.0, which depends on\n      railties (&lt; 5.0, &gt;= 4.0.0)\n\n    devise was resolved to 4.2.1, which depends on\n      railties (&lt; 5.1, &gt;= 4.1.0)\n\n    activeadmin was resolved to 2.5.0, which depends on\n      jquery-rails (~&gt; 4.2) was resolved to 4.3.5, which depends on\n        railties (&gt;= 4.2.0)\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      railties (= 5.2.4.rc1)\n\n</code></pre>\n\n<p>Here is what I got when I only update rails <code>bundle update rails</code>:</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"activerecord\":\n  In Gemfile:\n    acts-as-taggable-on was resolved to 5.0.0, which depends on\n      activerecord (&gt;= 4.2.8)\n\n    deep_cloneable was resolved to 3.0.0, which depends on\n      activerecord (&lt; 7, &gt;= 3.1.0)\n\n    oink was resolved to 0.10.1, which depends on\n      activerecord\n\n    rails (~&gt; 5.2.3) was resolved to 5.2.4.rc1, which depends on\n      activerecord (= 5.2.4.rc1)\n\n    activeadmin was resolved to 1.4.3, which depends on\n      ransack (&gt;= 1.8.7) was resolved to 1.8.10, which depends on\n        activerecord (&lt; 5.2, &gt;= 3.0)\n</code></pre>\n\n<p>Here is my Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.5.1'\n\ngem 'rails', '~&gt; 5.2.3'\n\ngem 'mysql2', '&lt;= 0.5.1'\ngem 'mini_racer'\ngem 'sass-rails'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'jquery-rails'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'jbuilder_cache_multi'\n# gem 'sidekiq'\n# gem 'sinatra', require: false # Required by sidekiq/web\ngem 'savon'\ngem 'soap4r'\ngem 'kaminari'\n# gem 'actionpack-action_caching'\ngem 'acts-as-taggable-on'\ngem 'rest-client'\ngem 'simple_form'\n# gem 'responders', '~&gt; 2.0'\ngem 'paperclip'\ngem 'whenever', require: false\ngem 'typhoeus'\ngem 'zip-zip', require: false\ngem 'http'\ngem 'activeadmin'\ngem 'devise'\ngem 'redis-rails'\ngem 'crack'\ngem 'trollop'\ngem 'oink'\n# gem 'backport_new_renderer'\ngem 'deep_cloneable'\ngem 'gsl'\ngem 'kmeans-clusterer'\ngem 'scalpel'\ngem 'pragmatic_segmenter'\ngem 'memory_profiler'\ngem 'parallel'\ngem 'sqlite3', '~&gt; 1.3', '&gt;= 1.3.11'\ngem 'sprockets-rails', :require =&gt; 'sprockets/railtie'\ngem 'digest', git: 'git@github.com:ruby/digest.git'\ngem 'httparty'\ngem 'mail'\ngem 'net-ssh'\ngem 'highline'\n\n\n\n\ngroup :production do\n  gem 'newrelic_rpm'\n  gem 'appsignal'\n  gem 'execjs'\n  gem 'puma'\n  gem 'puma_worker_killer'\nend\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'web-console', '~&gt; 2.0'\n  # gem 'minitest-rails'\n  gem 'thin'\nend\n\ngroup :development do\n  gem 'awesome_print'\n  gem \"capistrano\"\n  gem 'capistrano-rails', require: false\n  gem 'capistrano-bundler', require: false\n  gem 'capistrano-sidekiq', require: false\n  gem 'quiet_assets'\n  gem 'better_errors'\n  gem 'binding_of_caller'\n  gem 'terminal-notifier-guard', require: false\n  gem 'terminal-notifier', require: false\n  gem 'derailed_benchmarks'\n  gem 'stackprof' # used by derailed_benchmarks\nend\n</code></pre>\n\n<p>It looks like actionpack, activerecord, activemodel and activesupport all require version <code>5.2.4.rc1</code>. Here is my local gem:</p>\n\n<pre><code>Xuans-MacBook-Pro:moldb xuan$ gem list \"activesupport\"\n\n*** LOCAL GEMS ***\n\nactivesupport (6.0.1, 5.2.4.rc1, 5.2.3, 5.2.0, 5.1.6.1, 4.2.11.1, 4.2.10)\nredis-activesupport (5.2.0, 5.0.7, 5.0.3, 4.0.0)\nXuans-MacBook-Pro:moldb xuan$ gem list \"activemodel\"\n\n*** LOCAL GEMS ***\n\nactivemodel (6.0.1, 5.2.4.rc1, 5.2.3, 5.2.0, 5.1.6.1, 4.2.11.1, 4.2.10)\nXuans-MacBook-Pro:moldb xuan$ gem list \"actionpack\"\n\n*** LOCAL GEMS ***\n\nactionpack (6.0.1, 5.2.4.rc1, 5.2.3, 5.2.0, 5.1.6.1, 4.2.11.1, 4.2.10)\nXuans-MacBook-Pro:moldb xuan$ gem list 'railties'\n\n*** LOCAL GEMS ***\n\nrailties (6.0.1, 5.2.4.rc1, 5.2.3, 5.2.0, 5.1.6.1, 4.2.11.1, 4.2.10)\n</code></pre>\n\n<p>I tried various way to solve this upgrade issue; but no luck. Removing <code>Gemfile.lock</code> then do <code>bundle install</code> doesn't work for me (which give the same error output).<br>\nIt's so frustrating when upgrade any Rails application, the dependency hell is just hard to solve. </p>\n\n<p>Thank you for any helps and suggestions!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1575245723, "post_id": 59131108, "comment_id": 104490450, "body": "I am inclined to use the associations approach. It is more flexible because you never know when a matchup could be more than 2 teams or a round robin tournament ect.  If you go the OOP way I would suggest teams be an array potentially."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575321821, "post_id": 59131704, "comment_id": 104519611, "body": "Unfortunately you can&#39;t just create a single has_many association since the team can be in either foreign key. You have to do this awkward <code>WHERE team_a = :x OR team_b = :x</code> query or create two seperate assocations and concenate them togeter with <code>+</code>."}], "tags": [], "owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "is_accepted": false, "score": 3, "last_activity_date": 1575251685, "creation_date": 1575251685, "answer_id": 59131704, "question_id": 59131108, "link": "https://stackoverflow.com/questions/59131108/ruby-on-rails-use-association-for-two-fields/59131704#59131704", "title": "Ruby on Rails: Use Association For Two Fields?", "body": "<p>A Matchup could belong to two teams. You can specify a different association name and then tell it the class to use. </p>\n\n<pre><code>belongs_to :team_a, class_name: \"Team\"\nbelongs_to :team_b, class_name: \"Team\"\n</code></pre>\n\n<p>Then a team has many matchups, which makes sense as well. </p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1575331927, "last_edit_date": 1575331927, "creation_date": 1575321540, "answer_id": 59146812, "question_id": 59131108, "link": "https://stackoverflow.com/questions/59131108/ruby-on-rails-use-association-for-two-fields/59146812#59146812", "title": "Ruby on Rails: Use Association For Two Fields?", "body": "<p>Just placing two foreign key columns on the matchups table might seem like the the simplest solution but the devil is in the details. Since you have two foreign keys you can't just create a <code>has_many :matchups</code> association since Rails can't know which column on matchups corresponds to <code>teams.id</code>. So this leads to really awkward hacks like:</p>\n\n<pre><code>class Team\n  has_many :matchups_as_a, class_name: \"Matchup\"\n                           foreign_key: 'team_a'\n  has_many :matchups_as_b, class_name: \"Matchup\"\n                           foreign_key: 'team_b'\n  def matchups\n     matchups_as_a + matchups_as_b\n  end\nend\n</code></pre>\n\n<p>Which breaks ordering and a lot of other things.</p>\n\n<p>Or:</p>\n\n<pre><code>Matchup.where('team_a = :x OR team_b = :x', x: team)\n</code></pre>\n\n<p>Which is not an association and can't be eager loaded for example.</p>\n\n<p>An alternative way of doing this is by creating a join table:</p>\n\n<pre><code>class Matchup\n  has_many :matchup_teams\n  has_many :teams, though: :matchup_teams\nend\n\n# rails g model MatchupTeam match_up:references team:references\nclass MatchupTeam\n  belongs_to :match_up\n  belongs_to :team\nend\n\nclass Team\n  has_many :matchup_teams\n  has_many :matchups, through: :matchup_teams\nend\n</code></pre>\n\n<p>Which might seem more complex but actually lets you do:</p>\n\n<pre><code>team.matchups\nmatchup.teams\n\n# Get matchups between team and other_team\nmatches = Matchups.joins(:teams)\n           .where(teams: { id: [team, other_team] })\n           .group('matchups.id')\n           .having('count(*) = 2')\n</code></pre>\n"}], "owner": {"reputation": 6871, "user_id": 1316501, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f0ddaf1d7d2aaeeb19b6ec8a99a70ee?s=128&d=identicon&r=PG", "display_name": "anon_swe", "link": "https://stackoverflow.com/users/1316501/anon-swe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1575331927, "creation_date": 1575244537, "question_id": 59131108, "link": "https://stackoverflow.com/questions/59131108/ruby-on-rails-use-association-for-two-fields", "title": "Ruby on Rails: Use Association For Two Fields?", "body": "<p>I currently have two models in my Rails app: <code>Team</code> and <code>Player</code>, like this:</p>\n\n<pre><code>class Team &lt; ApplicationRecord\n  has_many :players\nend\n\nclass Player &lt; ApplicationRecord\n  belongs_to :team\nend\n</code></pre>\n\n<p>I want to add a <code>Matchup</code> class to represent two teams playing each other.  In normal OOP-land, I might do something like:</p>\n\n<pre><code>class Matchup\n  attr_accessor :first_team, :second_team\nend\n</code></pre>\n\n<p>But I'm not 100% sure what the idiomatic Rails way of setting this up is.  Some options I'm considering:</p>\n\n<p>1) Use associations: A <code>Matchup</code> has many teams and a <code>Team</code> belongs to many matchups.  This is a little awkward, since now I don't get to specify a field for each of <code>first_team</code> and <code>second_team</code>.</p>\n\n<p>2) Stick with OOP approach.  <code>Matchup</code> has two fields: <code>first_team</code> and <code>second_team</code>, both referring to <code>Team</code> objects.  Since I mainly plan on allowing users to view matchups, I don't need resourceful routing here.</p>\n\n<p>Thanks in advance for any help you can offer!</p>\n"}, {"tags": ["ruby", "installation"], "comments": [{"owner": {"reputation": 156, "user_id": 10514755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d04c0dedc1c06cf37cc7bef40b8b00?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/10514755/james-bond"}, "edited": false, "score": 0, "creation_date": 1575243507, "post_id": 59130958, "comment_id": 104490049, "body": "rbenv global 2.6.5                   source ~/.bashrc"}, {"owner": {"reputation": 31, "user_id": 12413311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91907596efa764fed224edc0bbfc2bd8?s=128&d=identicon&r=PG&f=1", "display_name": "PierceF", "link": "https://stackoverflow.com/users/12413311/piercef"}, "reply_to_user": {"reputation": 156, "user_id": 10514755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d04c0dedc1c06cf37cc7bef40b8b00?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/10514755/james-bond"}, "edited": false, "score": 0, "creation_date": 1575243793, "post_id": 59130958, "comment_id": 104490105, "body": "Copy pasted that but no effect... ``` \u279c  ~ rbenv global 2.6.5 source ~/.bashrc \u279c  ~ ruby -v                             ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18] ```"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 12413311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91907596efa764fed224edc0bbfc2bd8?s=128&d=identicon&r=PG&f=1", "display_name": "PierceF", "link": "https://stackoverflow.com/users/12413311/piercef"}, "is_accepted": false, "score": 0, "last_activity_date": 1575244652, "creation_date": 1575244652, "answer_id": 59131120, "question_id": 59130958, "link": "https://stackoverflow.com/questions/59130958/ruby-version-is-not-changing/59131120#59131120", "title": "Ruby version is not changing", "body": "<p>NVM, I fixed it after following the Step 3.1: Install rbenv mentioned here:</p>\n\n<p><a href=\"https://www.theodinproject.com/courses/web-development-101/lessons/installing-ruby?ref=lnav\" rel=\"nofollow noreferrer\">https://www.theodinproject.com/courses/web-development-101/lessons/installing-ruby?ref=lnav</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4475707"}, "is_accepted": false, "score": 0, "last_activity_date": 1578365508, "creation_date": 1578365508, "answer_id": 59621579, "question_id": 59130958, "link": "https://stackoverflow.com/questions/59130958/ruby-version-is-not-changing/59621579#59621579", "title": "Ruby version is not changing", "body": "<p>Try this:</p>\n\n<pre><code>$ rbenv rehash\n$ rehash\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12413311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91907596efa764fed224edc0bbfc2bd8?s=128&d=identicon&r=PG&f=1", "display_name": "PierceF", "link": "https://stackoverflow.com/users/12413311/piercef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1578365508, "creation_date": 1575242836, "last_edit_date": 1575243155, "question_id": 59130958, "link": "https://stackoverflow.com/questions/59130958/ruby-version-is-not-changing", "title": "Ruby version is not changing", "body": "<p>I'm a beginner trying to setup ruby and start learning. I feel stuck just on figuring out whether my PC is using the latest ruby version..\nwhen I do this: </p>\n\n<pre><code>\u279c  ~ rbenv global 2.6.5                  \n\u279c  ~ ruby -v           \nruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]\n\u279c  ~ export PATH=\"$HOME/.rbenv/bin:$PATH\"\n\u279c  ~ env | grep PATH                     \nPATH=/Users/Prodigy/.rbenv/bin:/Users/Prodigy/.rvm/gems/ruby-2.6.3/bin:/Users/Prodigy/.rvm/gems/ruby-2.6.3@global/bin:/Users/Prodigy/.rvm/rubies/ruby-2.6.3/bin:/usr/local/opt/node@10/bin:./bin:./node_modules/.bin:/Users/Prodigy/.rbenv/shims:/Users/Prodigy/.rbenv/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/sbin:/Users/Prodigy/.rvm/bin\nGEM_PATH=/Users/Prodigy/.rvm/gems/ruby-2.6.3:/Users/Prodigy/.rvm/gems/ruby-2.6.3@global\n\u279c  ~ whereis ruby                        \n/usr/bin/ruby\n\u279c  ~ which ruby                          \n/Users/Prodigy/.rvm/rubies/ruby-2.6.3/bin/ruby\n\u279c  ~ rbenv versions                      \n  system\n  2.5.3\n* 2.6.5 (set by /Users/Prodigy/.ruby-version)\n</code></pre>\n\n<p>I restarted my terminal and my laptop. I also tried to use the tips mentioned here (<a href=\"https://stackoverflow.com/questions/10940736/rbenv-not-changing-ruby-version\">rbenv not changing ruby version</a>) but I don't think it's relevant to my issue. I would really appreciate your help thanks!</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575237533, "post_id": 59130064, "comment_id": 104488696, "body": "Can you please update your question to include the output of <code>gem env</code> ?  Also, are you in an empty directory when you run <code>rails new</code> ?"}, {"owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575237736, "post_id": 59130064, "comment_id": 104488768, "body": "Done, please check. Result is the same in empty or not empty directory. =("}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575238100, "post_id": 59130064, "comment_id": 104488845, "body": "well you have duplicate <code>&#47;usr&#47;local&#47;bin</code> so that could be part of the problem.  Many problems can happen with rbenv when your PATH variable is not configured correctly.  Have you modified it in any of your shell load scripts?  What shell are you using?"}, {"owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575301640, "post_id": 59130064, "comment_id": 104511117, "body": "I am on a mac using bash. Somehow the bash $PATH is fine but gem concatenates it twice. On gem, the path is twice the $path, concatenated."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575331601, "post_id": 59130064, "comment_id": 104522498, "body": "Did this ever work?  Do you have many other ruby or rails projects using different versions?"}], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575235906, "post_id": 59130148, "comment_id": 104488219, "body": "Many thanks for myour help. Still fails. The wrong ruby binary is invoked =("}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "reply_to_user": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575235951, "post_id": 59130148, "comment_id": 104488232, "body": "Change out the directory and then back in again. Also, make sure you are using <code>bin&#47;rails</code> or <code>bundle exec rails</code> for good practice."}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "reply_to_user": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575235994, "post_id": 59130148, "comment_id": 104488243, "body": "I also put the wrong versions in my code example, obviously make sure you update those number to your specifics"}, {"owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575236706, "post_id": 59130148, "comment_id": 104488463, "body": "Yes, versions are correctly.  Yet the other one is invoked.  $ rbenv versions   system * 2.6.5 (set by /Users/flaab/.ruby-version)   mruby-dev"}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "reply_to_user": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575237069, "post_id": 59130148, "comment_id": 104488566, "body": "Try rbenv rehash"}, {"owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575237305, "post_id": 59130148, "comment_id": 104488631, "body": "Thanks but still does not work. And /usr/bin/ruby belongs to macosx and I can&#39;t delete it, not even as root. LOL"}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "reply_to_user": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575244647, "post_id": 59130148, "comment_id": 104490263, "body": "The only thing I can think is that the current rails gem was installed under system Ruby. Try uninstalling it completely or doing gem install rails"}], "tags": [], "owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "is_accepted": false, "score": 0, "last_activity_date": 1575235707, "creation_date": 1575235707, "answer_id": 59130148, "question_id": 59130064, "link": "https://stackoverflow.com/questions/59130064/weird-issue-with-ruby-version-on-mac/59130148#59130148", "title": "Weird issue with ruby version on mac", "body": "<p>Either run <code>rbenv global 2.5.0</code> to set your global ruby or create a <code>.ruby-version</code> file in the app directory to instruct rbenv to use a specific version.</p>\n\n<p><code>echo \"2.5.0\" &gt;&gt; .ruby-version</code> and then try again.</p>\n\n<p><a href=\"https://github.com/rbenv/rbenv#choosing-the-ruby-version\" rel=\"nofollow noreferrer\">Documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "edited": false, "score": 0, "creation_date": 1575301569, "post_id": 59130616, "comment_id": 104511077, "body": "Thank you. I do have the path in my bashrc (not profile). Still does not work properly ^^"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1575240132, "last_edit_date": 1575240132, "creation_date": 1575239809, "answer_id": 59130616, "question_id": 59130064, "link": "https://stackoverflow.com/questions/59130064/weird-issue-with-ruby-version-on-mac/59130616#59130616", "title": "Weird issue with ruby version on mac", "body": "<p>Do you have this already added to your <code>.bash_profile</code> ?</p>\n\n<pre><code>export PATH=\"$HOME/.rbenv/bin:$PATH\"\neval \"$(rbenv init -)\"\n</code></pre>\n\n<p>If not add the above lines to the bottom of the file, then close and restart your terminal(s). </p>\n\n<p>It looks like your <code>EXECUTABLE DIRECTORY</code> may not be set correctly. Try the following command:</p>\n\n<pre><code>rbenv shell 2.6.5\n</code></pre>\n\n<p>Also, make sure you're in a new empty directory and do</p>\n\n<pre><code>rbenv local 2.6.5\n</code></pre>\n\n<p>Then try rails command again</p>\n\n<pre><code>rails new blog\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "is_accepted": true, "score": 0, "last_activity_date": 1576886651, "creation_date": 1576886651, "answer_id": 59432528, "question_id": 59130064, "link": "https://stackoverflow.com/questions/59130064/weird-issue-with-ruby-version-on-mac/59432528#59432528", "title": "Weird issue with ruby version on mac", "body": "<p>To no avail. Ditched mac and went back to developing on debian. No issues.</p>\n"}], "owner": {"reputation": 465, "user_id": 449974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e07d56d0190bc80d9b93b7799cd4e0a9?s=128&d=identicon&r=PG", "display_name": "flaab", "link": "https://stackoverflow.com/users/449974/flaab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 59432528, "answer_count": 3, "score": 2, "last_activity_date": 1576886651, "creation_date": 1575234921, "last_edit_date": 1575237701, "question_id": 59130064, "link": "https://stackoverflow.com/questions/59130064/weird-issue-with-ruby-version-on-mac", "title": "Weird issue with ruby version on mac", "body": "<p>I am trying to create a rails app and fails like so:</p>\n\n<pre><code>$ rails new blog\n\n    Rails 6 requires Ruby 2.5.0 or newer.\n\n    You're running:\n      ruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin18]\n\n    Please upgrade to Ruby 2.5.0 or newer to continue.\n</code></pre>\n\n<p>However, my ruby version is 2.6.3 according to my system:</p>\n\n<pre><code>$ ruby --version\nruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin18]\n\n$ which ruby\n/Users/flaab/.rbenv/shims/ruby\n</code></pre>\n\n<p>Rbenv has 2.6.5 activated.</p>\n\n<pre><code>$ rbenv versions\n  system\n* 2.6.5 (set by /Users/flaab/.ruby-version)\n  mruby-dev\n</code></pre>\n\n<p>But it recognizes the wrong one as well.</p>\n\n<pre><code>$ which -a ruby\n/Users/flaab/.rbenv/shims/ruby\n/usr/bin/ruby\n</code></pre>\n\n<p>My gem env is...</p>\n\n<pre><code>flaab@MBP-de-Arturo ~ $ gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 3.0.3\n  - RUBY VERSION: 2.6.5 (2019-10-01 patchlevel 114) [x86_64-darwin18]\n  - INSTALLATION DIRECTORY: /Users/flaab/.gem\n  - USER INSTALLATION DIRECTORY: /Users/flaab/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /Users/flaab/.rbenv/versions/2.6.5/bin/ruby\n  - GIT EXECUTABLE: /usr/bin/git\n  - EXECUTABLE DIRECTORY: /Users/flaab/.gem/bin\n  - SPEC CACHE DIRECTORY: /Users/flaab/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Users/flaab/.rbenv/versions/2.6.5/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-18\n  - GEM PATHS:\n     - /Users/flaab/.gem\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"echo \\\"gem\" =&gt; \"--no-document\\\" &gt; ~/.gemrc\"\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /Users/flaab/.rbenv/versions/2.6.5/bin\n     - /opt/local/libexec/rbenv\n     - /Users/flaab/.rbenv/shims\n     - /usr/local/bin\n     - /opt/local/bin\n     - /opt/local/sbin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /Users/flaab/bin\n     - /Users/flaab/.rbenv/shims\n     - /sw/bin\n     - /Users/flaab/.local/lib/npm/bin\n     - /Users/flaab/.composer/vendor/bin\n</code></pre>\n\n<p>How can I instruct gem to use the 2.6.5 version of ruby mentioned above?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575240374, "post_id": 59129987, "comment_id": 104489414, "body": "Do you have  users sessions in your app?  If so, <code>current_user</code> should be present on any controller action and not need to be passed at all as a param right?"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575240534, "post_id": 59129987, "comment_id": 104489454, "body": "yes, I have <code>current_user</code> available to all controllers, but I still have to create the association between the nested lessons and the user. That&#39;s the problem. I get a &quot;Lessons user must exist&quot; error when I try to submit the form."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575240641, "post_id": 59129987, "comment_id": 104489481, "body": "will <code>@lesson.user_id</code> always be <code>current_user.id</code> ?"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575240711, "post_id": 59129987, "comment_id": 104489502, "body": "not necessarily, but it will always be true on create, update, or destroy."}], "answers": [{"comments": [{"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575235170, "post_id": 59130041, "comment_id": 104488035, "body": "So is it a common pattern in Rails to just leave it in the view like this? It felt wrong as I was doing it."}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 1, "creation_date": 1575235293, "post_id": 59130041, "comment_id": 104488064, "body": "No, normally you would revisit your data model to see if that field is necessary or do one of the other two methods I said. I believe Basecamp uses <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/CurrentAttributes.html\" rel=\"nofollow noreferrer\">Current</a> I believe to handle this."}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575236172, "post_id": 59130041, "comment_id": 104488284, "body": "What is a more common way in rails to model your app if you want to scope everything to the user&#39;s account. I was just assuming that you would want any object to belong_to User. Would you still do this, but then use Current on your create action, similar to the rails api example, <code>Current.account.messages.create(message_params)</code>"}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 2, "creation_date": 1575236414, "post_id": 59130041, "comment_id": 104488361, "body": "In general you need to look at your data model and see if there is a way to efficiently get from A to B or C if only one of them has a user association. In your case since <code>Result</code> <code>belongs_to :user</code> you can get all of the lessons by going through the <code>Result</code> model. <code>Lesson.joins(:result).where(results: { user_id: current_user.id }).first</code> or whatever you are trying to do with it."}], "tags": [], "owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "is_accepted": false, "score": 1, "last_activity_date": 1575234781, "creation_date": 1575234781, "answer_id": 59130041, "question_id": 59129987, "link": "https://stackoverflow.com/questions/59129987/how-to-avoid-using-a-hidden-field-for-user-id-in-a-rails-nested-form/59130041#59130041", "title": "How to avoid using a hidden field for user_id in a Rails nested form", "body": "<p>I don't think there is a great way to handle this automatically outside of the view. You would either have to inject the value unto the params or possible have a use <code>default</code> on the <code>user</code> association in Lesson that sets it from the Record's user (<code>belongs_to :user, default: -&gt; { result.user }</code>). In these scenarios, I generally move outside of the default Rails flow and use a PORO, Form Object, service object, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575239912, "post_id": 59130398, "comment_id": 104489312, "body": "Thanks, that totally worked, but now I&#39;m getting a similar error on the update action, so what would be a DRY to handle editing this same form?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 1, "creation_date": 1575240719, "post_id": 59130398, "comment_id": 104489504, "body": "I guess you could create a private method on your controller to do that little lessons loop fix (like <code>def set_lessons_user; @result.lessons.... </code>) and just call that method on both your actions. Since it only sets the user if <code>new_record?</code> it should be safe."}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575241303, "post_id": 59130398, "comment_id": 104489614, "body": "hmm. that is not working. I&#39;m getting the same &quot;Lessons user must exist&quot; error on update even if I put the same loop in the update action. It&#39;s only working on create now. Been playing around with this and don&#39;t understand why."}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575242861, "post_id": 59130398, "comment_id": 104489934, "body": "I&#39;m confused as to why this update action is not working: <a href=\"https://gist.github.com/leemcalilly/65dc3b4dd58f11b304c9069be50e5728\" rel=\"nofollow noreferrer\">gist.github.com/leemcalilly/65dc3b4dd58f11b304c9069be50e5728</a>"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575247370, "post_id": 59130398, "comment_id": 104490739, "body": "You are setting the current_user on lessons before actually setting them. Do something like <code>@result.attributes = result_params</code>, then the loop, and then <code>if @result.save</code>"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1575256723, "post_id": 59130398, "comment_id": 104492378, "body": "Yep that did it. Here is the version of the update action that worked: <a href=\"https://gist.github.com/leemcalilly/02438e2a04367ae57e57761abc9f0178\" rel=\"nofollow noreferrer\">gist.github.com/leemcalilly/02438e2a04367ae57e57761abc9f0178</a>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1575304283, "post_id": 59130398, "comment_id": 104512473, "body": "I would change the answer to: <code>@result.lessons.select(&amp;:new_record?).each { |lesson| lesson.user ||= current_user }</code> but this is just personal preference."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1575311601, "post_id": 59130398, "comment_id": 104515622, "body": "@3limin4t0r you are looping twice that way, once to filter and once to set the user."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1575312473, "post_id": 59130398, "comment_id": 104515989, "body": "@arieljuod Correct, however I prefer readability over performance to start of. Optimizations can always be done later down the line."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575321319, "post_id": 59130398, "comment_id": 104519413, "body": "For me, a single loop with an explicit action on each iteam is more readable than chaining methods. Like you said, it&#39;s just personal preference."}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 3, "last_activity_date": 1575237725, "creation_date": 1575237725, "answer_id": 59130398, "question_id": 59129987, "link": "https://stackoverflow.com/questions/59129987/how-to-avoid-using-a-hidden-field-for-user-id-in-a-rails-nested-form/59130398#59130398", "title": "How to avoid using a hidden field for user_id in a Rails nested form", "body": "<p>Personally, since setting the current_user id is something the controller should care about, I would iterate over all the lessons and set the user_id value there.</p>\n\n<pre><code>def create\n  @result = current_user.results.new(result_params)\n  @result.lessons.each do |lesson|\n    lesson.user ||= current_user if lesson.new_record?\n  end\n\n  ... the rest ...\n</code></pre>\n\n<p>Having a hidden field is a security risk, someone could edit it. I also don't like changing the params hash.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7908053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8223cdb7fe5f3ad33fe3fedd2e41dbeb?s=128&d=identicon&r=PG&f=1", "display_name": "Snawar Latif", "link": "https://stackoverflow.com/users/7908053/snawar-latif"}, "is_accepted": false, "score": 0, "last_activity_date": 1575244991, "creation_date": 1575244991, "answer_id": 59131147, "question_id": 59129987, "link": "https://stackoverflow.com/questions/59129987/how-to-avoid-using-a-hidden-field-for-user-id-in-a-rails-nested-form/59131147#59131147", "title": "How to avoid using a hidden field for user_id in a Rails nested form", "body": "build form like this\n\n<pre><code>&lt;%= form.fields_for :lessons, lesson_for_form(current_user.id) do |lesson| %&gt;\n  &lt;%= render \"lesson_fields\", form: lesson %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>remove hidden user_id field you have added</p>\n\nupdate your result.rb file\n\n<pre><code> class Result &lt; ApplicationRecord\n\n   def lesson_for_form(user_id)\n     collection = lessons.where(user_id: user_id)\n     collection.any? ? collection : lessons.build(user_id: user_id)\n   end\n\n end\n</code></pre>\n"}], "owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 59130398, "answer_count": 3, "score": 1, "last_activity_date": 1575244991, "creation_date": 1575234425, "question_id": 59129987, "link": "https://stackoverflow.com/questions/59129987/how-to-avoid-using-a-hidden-field-for-user-id-in-a-rails-nested-form", "title": "How to avoid using a hidden field for user_id in a Rails nested form", "body": "<p>I feel like this should be an easy thing to do in Rails, but all of the examples of nested forms in Rails do not take into account the fact that most nested forms also need to pass the current_user when creating new objects through a nested form.</p>\n\n<p>The only way I can get this to work at the moment is by passing a hidden field such as <code>&lt;%= form.hidden_field :user_id, value: current_user.id %&gt;</code>.</p>\n\n<p>For my specific example, I have a model called \"Result\" that has many \"Lessons\" and I'd like to create new lessons through the Result form without passing a hidden <code>:user_id</code>.</p>\n\n<p>This seems unsafe because someone could edit that hidden field in the browser and then submit the form thus associating the submission with a different user. The current_user.id seems like the type of thing you don't want to embed in the html as a hidden field. </p>\n\n<p>So how do you create the association between the nested objects and the current_user without putting that hidden field in the form?</p>\n\n<p>FYI, I'm using the <a href=\"https://gorails.com/episodes/dynamic-nested-forms-with-stimulus-js\" rel=\"nofollow noreferrer\">GoRails nested form with stimulus</a> style javascript to add and remove lessons from the result form. (<a href=\"http://%20https://github.com/gorails-screencasts/dynamic-nested-forms-with-stimulusjs\" rel=\"nofollow noreferrer\">Here's the source code for that example</a>.) Here are the relevant parts of my code:</p>\n\n<p><strong>models/result.rb</strong></p>\n\n<pre><code>class Result &lt; ApplicationRecord\n  belongs_to :user\n  has_many :lessons, inverse_of: :result\n\n  accepts_nested_attributes_for :lessons, reject_if: :all_blank, allow_destroy: true\nend\n</code></pre>\n\n<p><strong>models/lesson.rb</strong></p>\n\n<pre><code>class Lesson &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :result\nend\n</code></pre>\n\n<p><strong>controllers/results_controller.rb</strong></p>\n\n<pre><code>class ResultsController &lt; ApplicationController\n  before_action :set_result, only: [:show, :edit, :update, :destroy]\n\n  def new\n    @result = Result.new\n    @result.lessons.new\n  end\n\n  def create\n    @result = current_user.results.new(result_params)\n\n    respond_to do |format|\n      if @result.save\n        format.html { redirect_to @result, notice: 'Result was successfully created.' }\n      else\n        format.html { render :new }\n      end\n    end\n  end\n\n  private\n    def set_result\n      @result = Result.find(params[:id])\n    end\n\n    def result_params\n      params.require(:result).permit(:prediction_id, :post_mortem, :correct,\n                                     lessons_attributes: [:user_id, :id, :summary, :_destroy])\n    end\nend\n</code></pre>\n\n<p><strong>controllers/lessons_controller.rb</strong></p>\n\n<pre><code>class LessonsController &lt; ApplicationController\n  before_action :set_lesson, only: [:show, :edit, :update, :destroy]\n\n  # GET /lessons/new\n  def new\n    @lesson = Lesson.new\n  end\n\n  def create\n    @lesson = current_user.lessons.new(lesson_params)\n\n    respond_to do |format|\n      if @lesson.save\n        format.html { redirect_to @lesson, notice: 'Lesson was successfully created.' }\n      else\n        format.html { render :new }\n      end\n    end\n  end\n\n  private\n    def set_lesson\n      @lesson = Lesson.find(params[:id])\n    end\n\n    def lesson_params\n      params.require(:lesson).permit(:result_id, :summary)\n    end\nend\n</code></pre>\n\n<p><strong>views/results/_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_with(model: result, local: true) do |form| %&gt;\n\n  &lt;h3&gt;Lessons&lt;/h3&gt;\n\n  &lt;div data-controller=\"nested-form\"&gt;\n    &lt;template data-target=\"nested-form.template\"&gt;\n      &lt;%= form.fields_for :lessons, Lesson.new, child_index: 'NEW_RECORD' do |lesson| %&gt;\n        &lt;%= render \"lesson_fields\", form: lesson %&gt;\n      &lt;% end %&gt;\n    &lt;/template&gt;\n\n    &lt;%= form.fields_for :lessons do |lesson| %&gt;\n      &lt;%= render \"lesson_fields\", form: lesson %&gt;\n    &lt;% end %&gt;\n\n    &lt;div class=\"pt-4\" data-target=\"nested-form.links\"&gt;\n      &lt;%= link_to \"Add Lesson\", \"#\",\n                  data: { action: \"click-&gt;nested-form#add_association\" } %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-submit\"&gt;\n   &lt;%= form.submit \"Save\" %&gt;\n &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>views/results/_lesson_fields.html.erb</strong></p>\n\n<pre><code>&lt;%= content_tag :div, class: \"nested-fields\", data: { new_record: form.object.new_record? } do %&gt;\n  # This hidden field seems unsafe!\n  &lt;%= form.hidden_field :user_id, value: current_user.id %&gt;\n\n  &lt;div class=\"pb-8\"&gt;\n    &lt;%= form.text_area :summary %&gt;\n    &lt;%= link_to \"Remove\", \"#\", \n                data: { action: \"click-&gt;nested-form#remove_association\" } %&gt;\n  &lt;/div&gt;\n\n  &lt;%= form.hidden_field :_destroy %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I'm sure this is a common problem in Rails but I can't find any tutorials online that have the user_id as a part of the nested fields example. Any help is much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module", "model", "controller"], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 1395961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/094a18dfb0afb9fc27b3e57768961948?s=128&d=identicon&r=PG", "display_name": "JoshuaESummers", "link": "https://stackoverflow.com/users/1395961/joshuaesummers"}, "edited": false, "score": 0, "creation_date": 1575235075, "post_id": 59129616, "comment_id": 104488012, "body": "Thanks for your answer. Where do I update the autoload path?"}, {"owner": {"reputation": 1612, "user_id": 1146473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798f66c6c7e53703e2a30ff911b0e884?s=128&d=identicon&r=PG", "display_name": "ekampp", "link": "https://stackoverflow.com/users/1146473/ekampp"}, "reply_to_user": {"reputation": 373, "user_id": 1395961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/094a18dfb0afb9fc27b3e57768961948?s=128&d=identicon&r=PG", "display_name": "JoshuaESummers", "link": "https://stackoverflow.com/users/1395961/joshuaesummers"}, "edited": false, "score": 0, "creation_date": 1575290088, "post_id": 59129616, "comment_id": 104504921, "body": "I would do that in the application.rb file. But you can do it in your development.rb or production.rb files if you only want this feature in a specific environment."}], "tags": [], "owner": {"reputation": 1612, "user_id": 1146473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798f66c6c7e53703e2a30ff911b0e884?s=128&d=identicon&r=PG", "display_name": "ekampp", "link": "https://stackoverflow.com/users/1146473/ekampp"}, "is_accepted": false, "score": 1, "last_activity_date": 1575231713, "creation_date": 1575231713, "answer_id": 59129616, "question_id": 59128999, "link": "https://stackoverflow.com/questions/59128999/where-to-store-concerns-in-a-ruby-on-rails-project-rails-5-2/59129616#59129616", "title": "Where to store &#39;concerns&#39; in a Ruby on Rails project? (Rails 5.2+)", "body": "<p>You should always extend your concerns module with the supplied concerns base from Rails. </p>\n\n<p>Pathing is usually <code>app/models/concerns/file.rb</code> for model concerns and <code>app/controllers/file.rb</code> for controllers and so on. </p>\n\n<p>If you specifically have logic that crosses the controller and models separation, consider placing that in <code>lib</code>, and adding lib to your autoload path. </p>\n\n<p><code>include</code> and <code>extend</code> are methods. Most things (almost all) are objects in ruby. So almost all operations are methods on objects. </p>\n"}, {"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 2, "last_activity_date": 1575232132, "creation_date": 1575232132, "answer_id": 59129670, "question_id": 59128999, "link": "https://stackoverflow.com/questions/59128999/where-to-store-concerns-in-a-ruby-on-rails-project-rails-5-2/59129670#59129670", "title": "Where to store &#39;concerns&#39; in a Ruby on Rails project? (Rails 5.2+)", "body": "<p><code>the file path that using include or extend</code> Rails does some magic when starting to autoload a lot of things so you don't have to worry later when you call \"Bar\". This talk is really helpfull to understand WHY you can just do <code>include Bar</code> inside a rails model without much thinking <a href=\"https://www.youtube.com/watch?v=I0a5zv7uBHw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=I0a5zv7uBHw</a></p>\n\n<p>Usually, you want model related concerns inside /app/models/concerns and controller related concerns inside /app/controllers/concerns, but that's just for organization purposes, rails will autoload them even if you use /app/whatever/concerns, so be carefull about name collisions.</p>\n\n<p>You DO need to extend <code>ActiveSupport::Concern</code> if you want to use the syntax sugar that Concerns provide, but at the end they are just modules that can be included. <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveSupport/Concern.html</a> check this examples, concerns are just a way to write modules to share behaviour with a more friendly syntax for common rails patterns.</p>\n\n<p><code>extend</code> is a method of Object <a href=\"https://docs.ruby-lang.org/en/2.6.0/Object.html#method-i-extend\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.6.0/Object.html#method-i-extend</a>\n<code>include</code> is a method of Module <a href=\"https://docs.ruby-lang.org/en/2.6.0/Module.html#method-i-include\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.6.0/Module.html#method-i-include</a> (and Module inherits <code>extend</code> from Object)</p>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 11237493, "user_type": "registered", "profile_image": "https://graph.facebook.com/2424357700931460/picture?type=large", "display_name": "Abeid Ahmed", "link": "https://stackoverflow.com/users/11237493/abeid-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1594029997, "creation_date": 1594029997, "answer_id": 62753737, "question_id": 59128999, "link": "https://stackoverflow.com/questions/59128999/where-to-store-concerns-in-a-ruby-on-rails-project-rails-5-2/62753737#62753737", "title": "Where to store &#39;concerns&#39; in a Ruby on Rails project? (Rails 5.2+)", "body": "<p><code>concerns</code> are auto-loaded by rails by default starting from <code>rails v4+</code>. You can read the <a href=\"https://signalvnoise.com/posts/3372-put-chubby-models-on-a-diet-with-concerns\" rel=\"nofollow noreferrer\">article</a> written by DHH to get a fair idea of what concern does and what does it try to solve.</p>\n<p>However, it gets pretty complicated in determining which <code>scope</code> you are in and what <code>self</code> is in the method. Check out this <a href=\"https://www.youtube.com/watch?v=uIp6N89PH-c&amp;list=PL4XBVtvKZKqcoTXHdOCXdiQmh7ke94Hzm&amp;index=60\" rel=\"nofollow noreferrer\">video</a> by Ryan Bates regarding the problems with <code>concerns</code>.</p>\n<p>To solve some parts of the problem, I generally nest the concern inside a folder and refer it by giving a <code>class</code>. For example</p>\n<pre class=\"lang-rb prettyprint-override\"><code># app/models/concerns/user/authentication.rb\n\nclass User\n  module Authentication\n    extend ActiveSupport::Concern\n    # stuff\n  end\nend\n</code></pre>\n<p>and include in the <code>model</code> like</p>\n<pre class=\"lang-rb prettyprint-override\"><code># app/models/user.rb\n\ninclude Authentication\n</code></pre>\n<p>In my opinion, the separation of concerns helps in isolating your methods. For example, you can create a <code>Filterable</code> <code>concern</code> in a similar way, and isolate it from your other <code>models</code>.</p>\n"}], "owner": {"reputation": 373, "user_id": 1395961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/094a18dfb0afb9fc27b3e57768961948?s=128&d=identicon&r=PG", "display_name": "JoshuaESummers", "link": "https://stackoverflow.com/users/1395961/joshuaesummers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 59129670, "answer_count": 3, "score": 0, "last_activity_date": 1594029997, "creation_date": 1575227582, "question_id": 59128999, "link": "https://stackoverflow.com/questions/59128999/where-to-store-concerns-in-a-ruby-on-rails-project-rails-5-2", "title": "Where to store &#39;concerns&#39; in a Ruby on Rails project? (Rails 5.2+)", "body": "<p>I am fairly new to RoR. I have spent the afternoon reading about modules (used as concerns). I have yet to find a good article which describes the file path that using <code>include</code> or <code>extend</code> methods looks up (if <code>include</code> and <code>extend</code> are methods?).</p>\n\n<p>The most specific example I have found was here: <a href=\"https://stackoverflow.com/questions/24394427/ruby-on-rails-using-concerns-in-controllers\">Ruby On Rails - Using concerns in controllers</a>. This makes me feel that if I wanted to include the 'Bar' module in my <code>Foo</code> model I would create a <code>concerns/</code> directory in my <code>models/</code> directory, and create a 'Bar' module file in this folder.</p>\n\n<pre><code># in models/concerns/bar.rb\nmodlue Bar\n  # do I need this???\n  extend ActiveSupport::Concern\n\n  def speak_bar\n    puts \"model module bar!\"\n  end\nend\n\n# in models/foo.rb\nclass Foo &lt; ApplicationRecord\n  include Bar\nend\n\n# I could then perform:\nFoo.new.speak_bar\n=&gt; \"model module bar!\"\n</code></pre>\n\n<p>And if I wanted to include a Bar module in my Foo controller I would do:</p>\n\n<pre><code># in controllers/concerns/bar.rb\nmodlue Bar\n  # Again, do I need this???\n  extend ActiveSupport::Concern\n\n  def speak_bar\n    return \"controller module bar!\"\n  end\nend\n\n# in controllers/foo.rb\nclass FoosController &lt; ApplicationController\n  include Bar\n\n  def make_bar\n    @bar = speak_bar\n  end\nend\n\n# I could then use @bar in my views (anywhere else?) as &lt;%= @bar %&gt; and get it to output \n=&gt; \"controller module bar!\"\n</code></pre>\n\n<p>Summary of questions:</p>\n\n<p>Is this understanding set out above correct in terms of the file paths? </p>\n\n<p>And do I need to use the <code>extend ActiveSupport::Concern</code> line in order to use this path system?</p>\n\n<p>Are <code>include</code> and <code>extend</code> methods?</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["ruby", "rspec", "guard"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575227064, "post_id": 59128553, "comment_id": 104485847, "body": "Can you print out the value of <code>rspec.spec_dir</code>?"}, {"owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575227696, "post_id": 59128553, "comment_id": 104486030, "body": "Sure how do i do that, i tried a few things but failed"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575236210, "post_id": 59128553, "comment_id": 104488297, "body": "just <code>puts &quot;SPEC DIR: #{rspec.spec_dir}</code>"}], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575228012, "creation_date": 1575224509, "last_edit_date": 1575228012, "question_id": 59128553, "link": "https://stackoverflow.com/questions/59128553/how-can-i-get-guard-for-rspec-to-watch-my-current-directory-instead-of-only-spe", "title": "How can I get guard for rspec to watch my current directory instead of only /spec", "body": "<p>When I use</p>\n\n<pre><code>bundle exec guard\n</code></pre>\n\n<p>and I change tests in a <code>spec/</code> directory they run.</p>\n\n<p>How can I get guard to run tests that are in the current directory (i.e. root) of the project?  Also how can i get guard to watch app files as well?</p>\n\n<p>I see the section with</p>\n\n<pre><code>rspec = dsl.rspec\nwatch(rspec.spec_helper) { rspec.spec_dir }\nwatch(rspec.spec_support) { rspec.spec_dir }\nwatch(rspec.spec_files)\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>watch(rspec.spec_files) {'.'}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>watch('.')\n</code></pre>\n\n<p>and...</p>\n\n<pre><code>#  watch(rspec.spec_files) { rspec.spec_dir + '../' }                                             \n#  watch(rspec.spec_files) { './blob/' }\n#  watch(rspec.spec_files) {'.'}\n#  watch('.')\n#  watch(rspec.spec_files) {''}\n#  watch(rspec.spec_files) {'.'}\n#  watch('*') {'.'}\n</code></pre>\n\n<p>Also app.rb changes aren't picked up.</p>\n\n<p>So how can i watch <code>thing_spec.rb</code> or <code>thing.rb</code> if either is in the root directory of the project. or in the case of thing.rb, elsewhere in the project, including root.</p>\n\n<p>but neither helped (file still not picked up)</p>\n"}, {"tags": ["ruby", "openssl"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1575218263, "creation_date": 1575218263, "answer_id": 59127629, "question_id": 59127311, "link": "https://stackoverflow.com/questions/59127311/why-do-we-need-separate-openssl-rb-file/59127629#59127629", "title": "Why do we need separate openssl.rb file?", "body": "<p>You're right the core ruby has openssl as std-lib.   However, if you want to insure that a gem works as expected, you want to have it's dependencies tested against current versions of the gem so that when you do <code>gem install bitcoin-ruby</code> it will install a tested dependency chain.  Otherwise, how can you be sure the version of core ruby SSL has not changed something which might break the  installed version of <code>bitcoin-ruby</code>? </p>\n\n<p>Here first part of std-lib core version of ruby 2.3</p>\n\n<pre><code>module OpenSSL\n  class Digest\n\n    alg = %w(DSS DSS1 MD2 MD4 MD5 MDC2 RIPEMD160 SHA SHA1)\n    if OPENSSL_VERSION_NUMBER &gt; 0x00908000\n      alg += %w(SHA224 SHA256 SHA384 SHA512)\n    end\n\n</code></pre>\n\n<p>Here is gem version for ruby 2.4.1</p>\n\n<pre><code>module OpenSSL\n  class Digest\n\n    alg = %w(MD2 MD4 MD5 MDC2 RIPEMD160 SHA1 SHA224 SHA256 SHA384 SHA512)\n    if OPENSSL_VERSION_NUMBER &lt; 0x10100000\n      alg += %w(DSS DSS1 SHA)\n    end\n</code></pre>\n\n<p>So right away we can see some different algorithm definitions. Not locking a bundle gem version would be a bad idea, especially for something as important as cryptography in bitcoin.</p>\n"}], "owner": {"reputation": 220, "user_id": 12297337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa34c3549c4e057c769f12172b8d6c0b?s=128&d=identicon&r=PG&f=1", "display_name": "HardFork", "link": "https://stackoverflow.com/users/12297337/hardfork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59127629, "answer_count": 1, "score": 0, "last_activity_date": 1575218263, "creation_date": 1575216324, "last_edit_date": 1575217124, "question_id": 59127311, "link": "https://stackoverflow.com/questions/59127311/why-do-we-need-separate-openssl-rb-file", "title": "Why do we need separate openssl.rb file?", "body": "<p>I want to understand why we need <a href=\"https://github.com/lian/bitcoin-ruby/blob/master/lib/bitcoin/ffi/openssl.rb\" rel=\"nofollow noreferrer\">openssl.rb</a> in <a href=\"https://github.com/lian/bitcoin-ruby\" rel=\"nofollow noreferrer\">bitcoin-ruby</a> project.\nIs <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/openssl/rdoc/OpenSSL/SSL.html\" rel=\"nofollow noreferrer\">Ruby SSL implementation</a> not enough?</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1575208154, "post_id": 59126051, "comment_id": 104480641, "body": "IOW you want to rotate the array?"}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1575208872, "post_id": 59126051, "comment_id": 104480809, "body": "Yes, did not know Ruby had a method to do that. Thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1575220521, "post_id": 59126051, "comment_id": 104484079, "body": "The first thing to do is go through <a href=\"https://ruby-doc.org/core-2.6.3/Array.html\" rel=\"nofollow noreferrer\">Array</a>\u2019s instance methods, looking for one that does the job. Had you done that you would have found <code>rotate</code>. (Had that failed, look through the <code>Enumerable</code> module.)."}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 297630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feab5e46b16603da5b850f14b304a3a4?s=128&d=identicon&r=PG", "display_name": "ramblex", "link": "https://stackoverflow.com/users/297630/ramblex"}, "is_accepted": true, "score": 2, "last_activity_date": 1575208805, "creation_date": 1575208805, "answer_id": 59126204, "question_id": 59126051, "link": "https://stackoverflow.com/questions/59126051/how-can-i-change-the-starting-and-ending-items-of-an-array-while-following-the-s/59126204#59126204", "title": "How can I change the starting and ending items of an array while following the same order?", "body": "<p>Assuming your return values are subsequent outputs you can use the <code>rotate</code> method:</p>\n\n<pre><code>order.rotate(-1)\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 59126204, "answer_count": 1, "score": 2, "last_activity_date": 1575221923, "creation_date": 1575207504, "last_edit_date": 1575221923, "question_id": 59126051, "link": "https://stackoverflow.com/questions/59126051/how-can-i-change-the-starting-and-ending-items-of-an-array-while-following-the-s", "title": "How can I change the starting and ending items of an array while following the same order?", "body": "<p>I would like to sort the array</p>\n\n<pre><code>order = ['B', 'E', 'A', 'D', 'G', 'C', 'F']\n</code></pre>\n\n<p>in a way that would return</p>\n\n<pre><code>['F', 'B', 'E', 'A', 'D', 'G', 'C']\n</code></pre>\n\n<p>In other words, the last element of <code>order</code> should be moved to the beginning and all other elements should be shifted right one position.</p>\n\n<p>A new array is to be returned (<code>order</code> is not to be modified). How can I do that?</p>\n"}, {"tags": ["ruby", "elasticsearch", "searchkick"], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1575198837, "creation_date": 1575198837, "answer_id": 59124961, "question_id": 59124345, "link": "https://stackoverflow.com/questions/59124345/how-to-add-a-field-to-elasticsearch-in-order-to-order-by-it-in-ruby-gem-searchki/59124961#59124961", "title": "How to add a field to ElasticSearch in order to order by it in ruby gem SearchKick", "body": "<p>You need to add elasticsearch indexes to each new field you want to be orderable / searchable.</p>\n\n<p><a href=\"https://iridakos.com/programming/2017/12/03/elasticsearch-and-rails-tutorial\" rel=\"nofollow noreferrer\">Here</a> is a decent guide to setting one up from scratch which explains all the basic concepts, elasticsearch has its own schema so you need to get that to match your new one.</p>\n\n<p>The example they give is:</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\n\n  settings do\n    mappings dynamic: false do\n      indexes :author, type: :text\n      indexes :title, type: :text, analyzer: :english\n      indexes :body, type: :text, analyzer: :english\n      indexes :tags, type: :text, analyzer: :english\n      indexes :published, type: :boolean\n    end\n  end\nend\n</code></pre>\n\n<p>You should see a similar section on whatever model you're searching for.</p>\n\n<p>Just add the fields you want to have indexed to the model file, and then from console call (replacing <code>Post</code> with your model name):</p>\n\n<pre><code>Post.__elasticsearch__.delete_index!\nPost.import force: true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1575240202, "last_edit_date": 1575240202, "creation_date": 1575208351, "answer_id": 59126153, "question_id": 59124345, "link": "https://stackoverflow.com/questions/59124345/how-to-add-a-field-to-elasticsearch-in-order-to-order-by-it-in-ruby-gem-searchki/59126153#59126153", "title": "How to add a field to ElasticSearch in order to order by it in ruby gem SearchKick", "body": "<p>I've found a solution on <code>searchkick</code> documentation.</p>\n\n<p>Update <code>search_data</code> definition</p>\n\n<pre><code>def search_data\n  {\n    ...,\n    images_count:         images_count,\n    parameters_count:     parameters_count\n  }\nend\n</code></pre>\n\n<p>Update searchkick otpions:</p>\n\n<pre><code>def base options\n{\n   fields: %i[catalogue_number oe_numbers],\n   match: :word_start,\n   misspellings: false,\n   where: @conditions,\n   load: false,\n   order: [{ images_count: { order: :desc } }, { parameters_count: { order: :desc } }],\n   highlight: @params[:highlight]\n}\nend\n</code></pre>\n\n<p>Reindex the model</p>\n\n<p><code>Part.reindex</code></p>\n\n<p>It will automatically add indexes.</p>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575240202, "creation_date": 1575193590, "question_id": 59124345, "link": "https://stackoverflow.com/questions/59124345/how-to-add-a-field-to-elasticsearch-in-order-to-order-by-it-in-ruby-gem-searchki", "title": "How to add a field to ElasticSearch in order to order by it in ruby gem SearchKick", "body": "<p>I have a project, where I use Searchkick gem in order to fetch records from ElasticSearch first and then do further processing on them. The guys that initially implemented it added a sort option by two fields in base options in SearchKick:</p>\n\n<pre><code>def base options\n{\n   fields: %i[catalogue_number oe_numbers],\n   match: :word_start,\n   misspellings: false,\n   where: @conditions,\n   load: false,\n   order: { sale_rotation_group: { order: :desc } }, { lauber_id_integer: { order: :desc } },\n   highlight: @params[:highlight]\n}\nend\n</code></pre>\n\n<p><code>lauber_it_integer</code> does not exist in the application database so it must be a field in ElasticSearch that they added.</p>\n\n<p>Now I want to change this and instead of current order I want to tell SearchKick to tell ElasticSearch to order the records by the fields I added to the application database: <code>images_count</code> and <code>parameters_count</code>. So probably I need to add those new fields to ElasticSearch so it knows how to order the records. I changed the order option to</p>\n\n<pre><code>order: { images_count: { order: :desc } }\n</code></pre>\n\n<p>but now I am getting the error:</p>\n\n<pre><code>Searchkick::InvalidQueryError ([400] {\"error\":{\"root_cause\":[{\"type\":\"query_shard_exception\",\"reason\":\"No mapping found for [images_count] in order to sort on\",\"index_uuid\":\"WhC4XK8IRnmmfkPJMNmV1g\",\"index\":\"parts_development_20191124205133405\"}]\n</code></pre>\n\n<p>This will probably involve also some extra work on ElasticSearch to add data to those new fields, however I know very little about ElasticSearch. Could you give me some indications or hints on how I could solve my problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "elasticsearch"], "comments": [{"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1575194333, "post_id": 59124103, "comment_id": 104477598, "body": "are you trying to run 3 elastic search on the same port?"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1575201544, "post_id": 59124103, "comment_id": 104479111, "body": "Where do you configure the location of the database?  From the point of view of your <code>app</code> container, it&#39;s not <code>localhost</code> because that&#39;s the <code>app</code> container (not any other container and not the physical host)."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 7065800, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tHw9R8dCTT4/AAAAAAAAAAI/AAAAAAAAACQ/MLOZ4Oszb8M/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u0410\u0433\u0435\u0435\u0432", "link": "https://stackoverflow.com/users/7065800/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%90%d0%b3%d0%b5%d0%b5%d0%b2"}, "edited": false, "score": 0, "creation_date": 1585921406, "post_id": 59185439, "comment_id": 107941962, "body": "It is WORKING method!"}, {"owner": {"reputation": 219, "user_id": 6441416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ImKk5.jpg?s=128&g=1", "display_name": "jDmendiola", "link": "https://stackoverflow.com/users/6441416/jdmendiola"}, "edited": false, "score": 0, "creation_date": 1617638126, "post_id": 59185439, "comment_id": 118352757, "body": "Works like a charm! Cheers man"}], "tags": [], "owner": {"reputation": 151, "user_id": 4862498, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a8Oo0FgYRjA/AAAAAAAAAAI/AAAAAAAANoM/72UmdYds5Cg/photo.jpg?sz=128", "display_name": "Stevan O.", "link": "https://stackoverflow.com/users/4862498/stevan-o"}, "is_accepted": false, "score": 3, "last_activity_date": 1575497981, "creation_date": 1575497981, "answer_id": 59185439, "question_id": 59124103, "link": "https://stackoverflow.com/questions/59124103/failed-to-open-tcp-connection-to-localhost9200-rails-on-docker/59185439#59185439", "title": "Failed to open TCP connection to localhost:9200 - Rails on Docker", "body": "<p>On your environment you must add <code>ELASTICSEARCH_URL=http://elasticsearch:9200</code> and then rebuild your docker compose. You can take this <a href=\"https://dev.to/peterfication/tested-elasticsearch-on-rails-with-docker-2chi\" rel=\"nofollow noreferrer\">article</a> as reference.</p>\n"}], "owner": {"reputation": 131, "user_id": 5507554, "user_type": "registered", "profile_image": "https://graph.facebook.com/180972848909655/picture?type=large", "display_name": "Fady Yousry", "link": "https://stackoverflow.com/users/5507554/fady-yousry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1396, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1575497981, "creation_date": 1575191173, "question_id": 59124103, "link": "https://stackoverflow.com/questions/59124103/failed-to-open-tcp-connection-to-localhost9200-rails-on-docker", "title": "Failed to open TCP connection to localhost:9200 - Rails on Docker", "body": "<p>I 'm want to run ElasticSearch on docker and connect rails with it.</p>\n\n<p>this is my docker-compose.yml file</p>\n\n<pre><code>version: '3'\nservices:\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: P@ssw0rd\n      MYSQL_DATABASE: chatsystem\n      MYSQL_USER: root\n      MYSQL_PASSWORD: P@ssw0rd\n    ports:\n      - \"3307:3306\"\n\n  es01:\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.4.2\n    container_name: es01\n    environment:\n      - node.name=es01\n      - cluster.name=es-docker-cluster\n      - discovery.seed_hosts=es02,es03\n      - cluster.initial_master_nodes=es01,es02,es03\n      - bootstrap.memory_lock=true\n      - \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - data01:/usr/share/elasticsearch/data\n    ports:\n      - 9200:9200\n    networks:\n      - elastic\n\n  es02:\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.4.2\n    container_name: es02\n    environment:\n      - node.name=es02\n      - cluster.name=es-docker-cluster\n      - discovery.seed_hosts=es01,es03\n      - cluster.initial_master_nodes=es01,es02,es03\n      - bootstrap.memory_lock=true\n      - \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - data02:/usr/share/elasticsearch/data\n    networks:\n      - elastic\n  es03:\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.4.2\n    container_name: es03\n    environment:\n      - node.name=es03\n      - cluster.name=es-docker-cluster\n      - discovery.seed_hosts=es01,es02\n      - cluster.initial_master_nodes=es01,es02,es03\n      - bootstrap.memory_lock=true\n      - \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - data03:/usr/share/elasticsearch/data\n    networks:\n      - elastic\n\n  app:\n    build: .\n    command: bundle exec rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - \".:/ChatSystem\"\n    depends_on:\n      - db\n      - es01\n      - es02\n      - es03\n    ports:\n      - \"3000:3000\"\n    links:\n      - db\n      - es01\n      - es02\n      - es03\n    environment:\n      DB_USER: root\n      DB_NAME: chatsystem\n      DB_PASSWORD: P@ssw0rd\n      DB_HOST: db\n\nvolumes:\n  data01:\n    driver: local\n  data02:\n    driver: local\n  data03:\n    driver: local\n\nnetworks:\n  elastic:\n    driver: bridge\n</code></pre>\n\n<p>When I run <code>docker-compose up</code> and access <code>localhost:9200</code> through the browser. I get this response</p>\n\n<pre><code>{\n  \"name\": \"es01\",\n  \"cluster_name\": \"es-docker-cluster\",\n  \"cluster_uuid\": \"fNDAvsI6QUyHkzy919PHhw\",\n  \"version\": {\n    \"number\": \"7.4.2\",\n    \"build_flavor\": \"default\",\n    \"build_type\": \"docker\",\n    \"build_hash\": \"2f90bbf7b93631e52bafb59b3b049cb44ec25e96\",\n    \"build_date\": \"2019-10-28T20:40:44.881551Z\",\n    \"build_snapshot\": false,\n    \"lucene_version\": \"8.2.0\",\n    \"minimum_wire_compatibility_version\": \"6.8.0\",\n    \"minimum_index_compatibility_version\": \"6.0.0-beta1\"\n  },\n  \"tagline\": \"You Know, for Search\"\n}\n</code></pre>\n\n<p>When i try create new \"message\" i get this error</p>\n\n<p><strong>Errno::EADDRNOTAVAIL (Failed to open TCP connection to localhost:9200 (Cannot assign requested address - connect(2) for \"localhost\" port 9200))</strong></p>\n\n<p>message.rb file</p>\n\n<pre><code>class Message &lt; ApplicationRecord\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\n\n  settings do\n    mappings dynamic: false do\n      indexes :message, type: :text\n    end\n  end\n\nend\n\nMessage.import force: true\n</code></pre>\n\n<p>I 'm using this gems</p>\n\n<pre><code>gem 'elasticsearch-model', git: 'git://github.com/elastic/elasticsearch-rails.git', branch: 'master'\ngem 'elasticsearch-rails', git: 'git://github.com/elastic/elasticsearch-rails.git', branch: 'master'\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575693047, "post_id": 59122960, "comment_id": 104660981, "body": "Considering that <a href=\"https://github.com/savonrb/nori\" rel=\"nofollow noreferrer\">Nori</a> hasn&#39;t had any development in 4+ years, I&#39;d say you should find a different candidate. Personally I recommend Nokogiri but YMMV. You might like Ox, especially its ability to <a href=\"https://github.com/ohler55/ox#parsing-xml-into-a-hash-fast\" rel=\"nofollow noreferrer\">parse XML into a hash</a>."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1575693360, "creation_date": 1575693360, "answer_id": 59223034, "question_id": 59122960, "link": "https://stackoverflow.com/questions/59122960/how-to-access-attribute-value-when-child-is-text-node-using-nori/59223034#59223034", "title": "How to access attribute value when child is text node using Nori", "body": "<p>Nokogiri is my recommended tool since Nori doesn't appear it's being actively supported.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(\"&lt;FareReference ResBookDesigCode='Q'&gt;Value&lt;/FareReference&gt;\")\n</code></pre>\n\n<p><code>doc</code> now contains the DOM for the XML.</p>\n\n<p>We can access the content for the <code>FareReference</code> node easily, along with its parameters:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>doc.at('FareReference').text # =&gt; \"Value\"\ndoc.at('FareReference')['ResBookDesigCode'] # =&gt; \"Q\"\n</code></pre>\n\n<p><a href=\"https://nokogiri.org/rdoc/Nokogiri/XML/Searchable.html#at-instance_method\" rel=\"nofollow noreferrer\"><code>at</code></a> basically means find the first node containing that selector. The documentation and tutorials describe the sibling methods.</p>\n"}], "owner": {"reputation": 61, "user_id": 9112406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa9ea4d2f5a7bc3fd9c5284c6cb2432?s=128&d=identicon&r=PG&f=1", "display_name": "Yakitate", "link": "https://stackoverflow.com/users/9112406/yakitate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575693584, "creation_date": 1575180075, "last_edit_date": 1575693584, "question_id": 59122960, "link": "https://stackoverflow.com/questions/59122960/how-to-access-attribute-value-when-child-is-text-node-using-nori", "title": "How to access attribute value when child is text node using Nori", "body": "<p>I tried this:</p>\n\n<pre><code>xml_parser = Nori.new\nxml_parser.parse \"&lt;FareReference ResBookDesigCode='Q'&gt;Value&lt;/FareReference&gt;\"\n</code></pre>\n\n<p>And the result is:</p>\n\n<pre><code>{\"FareReference\"=&gt;\"Value\"}\n</code></pre>\n\n<p>I wanted to retrieve the <code>ResBookDesigCode</code> value also.</p>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1575163558, "post_id": 59121732, "comment_id": 104473101, "body": "Local variables are always selected over methods - this is <i>only an &quot;issue&quot; at the scope of usage</i>, as <code>@c</code> has not been altered. Choose better names and/or leave the module in a tidy scope, eg. <code>M2.c</code> (with an explicit receiver the local variable will never be selected)."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5252832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a716e02e82f8bcf727f2984396442ff?s=128&d=identicon&r=PG&f=1", "display_name": "dnorcott", "link": "https://stackoverflow.com/users/5252832/dnorcott"}, "is_accepted": false, "score": 0, "last_activity_date": 1575658100, "creation_date": 1575658100, "answer_id": 59218719, "question_id": 59121732, "link": "https://stackoverflow.com/questions/59121732/ruby-namespace-conflict-with-module-class-instance-variable-defined-in-a-method/59218719#59218719", "title": "Ruby Namespace conflict with module class instance variable defined in a method and using attr:", "body": "<p>The only purpose of the question was to determine if I could isolate the two variables 'c' using the module's namespace.  </p>\n\n<p>Perhaps I did not ask the question properly.   What I previously had tried led me to believe this was not possible (except for class variables).  </p>\n\n<p>I am going to assume that the answer is that it can not be done.</p>\n"}], "owner": {"reputation": 1, "user_id": 5252832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a716e02e82f8bcf727f2984396442ff?s=128&d=identicon&r=PG&f=1", "display_name": "dnorcott", "link": "https://stackoverflow.com/users/5252832/dnorcott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1575658100, "creation_date": 1575162664, "last_edit_date": 1575172628, "question_id": 59121732, "link": "https://stackoverflow.com/questions/59121732/ruby-namespace-conflict-with-module-class-instance-variable-defined-in-a-method", "title": "Ruby Namespace conflict with module class instance variable defined in a method and using attr:", "body": "<p>I am trying to familiarize myself with modules and this code shows a name clash in main that I can not find any information on how to resolve using a namepace (only) with a module class instance variable.  Perhaps not possible?</p>\n\n<p>**Modified code slightly so  \"c = \"MAIN\"\" is before \"include\" so no doubt that two c variables exist.  Added class so I can specify 'cv::a' which I believe is an example of an explicit receiver as you mentioned. I deliberately created the name collision just to see if I could resolve it (main::c was defined before include in my original code from which this was snipped)</p>\n\n<p>I guess my theoretical question becomes can I in some manner specify an explicit receiver (like M2.C) for the instance variable 'c' defined in a method, the similar to that of 'a' (cv::a) defined in a class.</p>\n\n<p>I had decided probably not possible as I was unable to code a namespace to prefix 'c' but thought to ask thinking I had missed something.\nIf this is possible using my code, could you show me how to do so.*</p>\n\n<pre><code>module M2\ndef method_vars() @c = \"@C\"; @d = \"@D\";  end  \nattr :c; attr :d\n\nclass Class_var\n  def   init()  @a = \"A\"; @b = \"B\"; end\n  attr :a; attr :b\nend\nend\nc = \"MAIN\" \ninclude M2  \nmethod_vars()\nputs \"&gt;#{c}&lt;---&gt;#{d}&lt;\"  # &gt;MAIN&lt;---&gt;@D&lt;\ncv = Class_var.new\ncv.init()\nputs \"&gt;#{cv::a}&lt;---&gt;#{cv::b}&lt;\" # &gt;A&lt;---&gt;B&lt;  \nexit\n</code></pre>\n"}, {"tags": ["ruby", "keyword-argument"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1575155976, "post_id": 59120058, "comment_id": 104471854, "body": "This is a pure-Ruby question so it should not have a Rails tag."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1575160963, "post_id": 59120058, "comment_id": 104472707, "body": "I removed ruby on rails tag because as Cary said, this is purely ruby question."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 7057788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4da03c2e856b40a220a4dcac0cd2709?s=128&d=identicon&r=PG&f=1", "display_name": "RoR noob", "link": "https://stackoverflow.com/users/7057788/ror-noob"}, "edited": false, "score": 0, "creation_date": 1575149880, "post_id": 59120298, "comment_id": 104470542, "body": "I cannot really understand why it doesn&#39;t make sense to use it. It&#39;s just another way of using the double splat, right? Maybe it could be used for more clarity? But again this is subjective"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 177, "user_id": 7057788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4da03c2e856b40a220a4dcac0cd2709?s=128&d=identicon&r=PG&f=1", "display_name": "RoR noob", "link": "https://stackoverflow.com/users/7057788/ror-noob"}, "edited": false, "score": 1, "creation_date": 1575150235, "post_id": 59120298, "comment_id": 104470605, "body": "It is NOT equivalent to a double splat or <code>hash = {}</code>.  You have to actually call it like <code>initialize(arg: { foo: &#39;bar&#39; })</code>. If you call <code>initialize(foo: &#39;bar&#39;)</code> you&#39;ll get <code>ArgumentError (unknown keyword: foo)</code>. Thats why it would make more sense if it was part of a complex signature but not on its own."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 177, "user_id": 7057788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4da03c2e856b40a220a4dcac0cd2709?s=128&d=identicon&r=PG&f=1", "display_name": "RoR noob", "link": "https://stackoverflow.com/users/7057788/ror-noob"}, "edited": false, "score": 0, "creation_date": 1575194347, "post_id": 59120298, "comment_id": 104477601, "body": "It also does not guarantee that arg is a hash. The user can pass whatever they want. If you use <code>**kwargs</code> - <code>kwargs</code> is always a hash."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1575149510, "last_edit_date": 1575149510, "creation_date": 1575148205, "answer_id": 59120298, "question_id": 59120058, "link": "https://stackoverflow.com/questions/59120058/ruby-keyword-arguments-clarification/59120298#59120298", "title": "Ruby keyword arguments clarification", "body": "<p>Its just a keyword argument with an empty hash as the default value:</p>\n\n<pre><code>def initialize(arg: {})\n  arg\nend\n\nirb(main):011:0&gt; initialize().class\n=&gt; Hash\n</code></pre>\n\n<p>Its really strange and unidiomatic though. Before Ruby 2.0 introduced first-class support for keywords you declared a method that takes an optional options hash as:</p>\n\n<pre><code>def initialize(hash = {})\n\nend\n</code></pre>\n\n<p>This argument had to be at the end of the list of. The name is not significant.</p>\n\n<p>With Ruby 2.0 you can declare a method that takes any number of keywords with a double splat:</p>\n\n<pre><code>def initialize(**other_keyword_args)\n\nend\n</code></pre>\n\n<p>You can combine it with positional and named keyword arguments as well:</p>\n\n<pre><code>def initialize(a, b = 2, foo:, bar: 2, **other_keyword_args)\n\nend\n</code></pre>\n\n<p>Using <code>initialize(arg: {}, ...)</code> would make sense if there where more parameters and this one takes a hash but on its own its just strange.</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575148852, "post_id": 59120326, "comment_id": 104470346, "body": "That should actually be <code>def foo(anything = {})</code>. But it looks like a really strange and unidiomatic way of doing <code>def foo(**kwargs)</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575148978, "post_id": 59120326, "comment_id": 104470378, "body": "It&#39;s just based on the most simple way to do it. Over the years Ruby allowed other forms as you note."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1575149042, "post_id": 59120326, "comment_id": 104470396, "body": "What I&#39;m trying to say is that you actually changed the signature. <code>initialize(arg: {})</code> can be called with no arguments."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": -1, "last_activity_date": 1575148899, "last_edit_date": 1575148899, "creation_date": 1575148601, "answer_id": 59120326, "question_id": 59120058, "link": "https://stackoverflow.com/questions/59120058/ruby-keyword-arguments-clarification/59120326#59120326", "title": "Ruby keyword arguments clarification", "body": "<p>Ruby doesn't need braces (<code>{}</code>) around a hash when passing the last argument to a method:</p>\n\n<pre><code>def foo(anything)\n  anything       # =&gt; {:arg=&gt;{}}\n          .class # =&gt; Hash\nend\n\nfoo(arg: {})\n</code></pre>\n\n<p>For more information see \"<a href=\"https://docs.ruby-lang.org/en/2.0.0/syntax/calling_methods_rdoc.html\" rel=\"nofollow noreferrer\">Calling Methods</a>.\"</p>\n"}], "owner": {"reputation": 177, "user_id": 7057788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4da03c2e856b40a220a4dcac0cd2709?s=128&d=identicon&r=PG&f=1", "display_name": "RoR noob", "link": "https://stackoverflow.com/users/7057788/ror-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59120298, "answer_count": 2, "score": 3, "last_activity_date": 1575160906, "creation_date": 1575146267, "last_edit_date": 1575160906, "question_id": 59120058, "link": "https://stackoverflow.com/questions/59120058/ruby-keyword-arguments-clarification", "title": "Ruby keyword arguments clarification", "body": "<p>Lately I saw this function signature:</p>\n\n<pre><code>   class Foo &lt; Bar\n    def initialize(arg: {})\n      ...\n   end\n</code></pre>\n\n<p>What does the keyword argument (<code>arg: {}</code> ) with the curly braces means here? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1810, "user_id": 1301840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ad9bbcb458c0923c2946f85b6b98107b?s=128&d=identicon&r=PG&f=1", "display_name": "lusketeer", "link": "https://stackoverflow.com/users/1301840/lusketeer"}, "edited": false, "score": 0, "creation_date": 1575140815, "post_id": 59119289, "comment_id": 104468458, "body": "You could do a concat on the two columns and put them in the WHERE clause like this <a href=\"https://stackoverflow.com/questions/10325170/combine-two-columns-in-sql-for-where-clause\" title=\"combine two columns in sql for where clause\">stackoverflow.com/questions/10325170/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1575145076, "creation_date": 1575145076, "answer_id": 59119890, "question_id": 59119289, "link": "https://stackoverflow.com/questions/59119289/is-there-a-way-to-create-a-temporary-column-for-a-single-query-in-activerecord/59119890#59119890", "title": "Is there a way to create a temporary column for a single query in Activerecord?", "body": "<p>You can use <code>.select</code> to create any select statement you want:</p>\n\n<pre><code>@chess_pieces = ChessPiece.select(\n  \"chess_pieces.*\", \n  \"CONCAT(chess_pieces.row, '-', chess_pieces.column) AS position\"\n)\n</code></pre>\n\n<p>When you use an alias the column in the result will be available as an attribute on the model:</p>\n\n<pre><code>@chess_pieces.first.position\n</code></pre>\n\n<p>You can also use column aliases in the WHERE, ORDER and GROUP clauses on some (PG, MySQL) but not all dbs:</p>\n\n<pre><code>ChessPiece.select(\n  \"chess_pieces.*\", \n  \"CONCAT(chess_pieces.row, '-', chess_pieces.column) AS position\"\n).where('position = ?', '1-1')\n .group('position')\n .order('position ASC')\n</code></pre>\n\n<p>On those who don't support it you need to concat, aggregate or whatever it is you are doing in-situ.</p>\n\n<pre><code>ChessPiece.order(\"CONCAT(chess_pieces.row, '-', chess_pieces.column)\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "is_accepted": false, "score": 0, "last_activity_date": 1575160931, "last_edit_date": 1575160931, "creation_date": 1575160480, "answer_id": 59121563, "question_id": 59119289, "link": "https://stackoverflow.com/questions/59119289/is-there-a-way-to-create-a-temporary-column-for-a-single-query-in-activerecord/59121563#59121563", "title": "Is there a way to create a temporary column for a single query in Activerecord?", "body": "<p>Why not make this a permanent column?</p>\n\n<p>Add a position column of type integer.\nCreate a before save hook that sets the position to <code>row * 10 + column</code></p>\n\n<p>You can now query the position column</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>ChessPiece.where(game_id: @game_id, position: [11, 22, 33])\n</code></pre>\n\n<p>If you want you can also override the position= to also set the column and row. Allowing you to use it for writes as well.</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1575311133, "last_edit_date": 1575311133, "creation_date": 1575307909, "answer_id": 59143978, "question_id": 59119289, "link": "https://stackoverflow.com/questions/59119289/is-there-a-way-to-create-a-temporary-column-for-a-single-query-in-activerecord/59143978#59143978", "title": "Is there a way to create a temporary column for a single query in Activerecord?", "body": "<p>You could add a helper to your <code>ChessPiece</code> model to simplify building the correct query. Something like this should do the trick:</p>\n\n<pre><code>class ChessPiece &lt; ApplicationRecord\n  def self.matches_position(*positions)\n    return none if positions.empty?\n\n    constraints = positions.map do |row, column|\n      arel_table[:row].eq(row).and(arel_table[:column].eq(column))\n    end\n\n    where(constraints.reduce(:or))\n  end\nend\n\nChessPiece.where(game_id: @game_id).matches_position([1, 1], [2, 2], [3, 3])\n</code></pre>\n\n<p>This should result in the SQL (syntax might differ based on the database used):</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT \"chess_pieces\".*\nFROM \"chess_pieces\"\nWHERE \"chess_pieces\".\"game_id\" = 1\n  AND (\"chess_pieces\".\"row\" = 1 AND \"chess_pieces\".\"column\" = 1\n       OR \"chess_pieces\".\"row\" = 2 AND \"chess_pieces\".\"column\" = 2\n       OR \"chess_pieces\".\"row\" = 3 AND \"chess_pieces\".\"column\" = 3)\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 3175238, "user_type": "registered", "profile_image": "https://graph.facebook.com/606807570/picture?type=large", "display_name": "MDrewT", "link": "https://stackoverflow.com/users/3175238/mdrewt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1575311133, "creation_date": 1575140505, "question_id": 59119289, "link": "https://stackoverflow.com/questions/59119289/is-there-a-way-to-create-a-temporary-column-for-a-single-query-in-activerecord", "title": "Is there a way to create a temporary column for a single query in Activerecord?", "body": "<p>Let's say we have a ChessPiece class with the following migration.</p>\n\n<pre><code>create_table :chess_pieces do |t|\n  t.string  :type\n  t.integer :row\n  t.integer :column\n  t.integer :game_id, index: true\nend\n</code></pre>\n\n<p>If a Bishop wanted to move from (0,0) to (7,7) then I need to check each space in between the two positions for other pieces that might be blocking my Bishop. IE if there was a Pawn on (5,5).</p>\n\n<p>I could query the database for EACH position that might have a blocking piece like this:</p>\n\n<pre><code>pieces = []\n8.times do |i|\n  pieces &lt;&lt; ChessPiece.where(game_id: @game_id, row: i, column: i)\nend\n</code></pre>\n\n<p>But I want to cut down on queries. Alternatively, I could grab <strong><em>all</em></strong> the chess pieces for a game and iterate over them in Ruby, but that also seems inefficient. What I'd like to do is tell the database to combine the <code>row</code> and <code>column</code> columns together into the form \"row-column\" and call it <code>position</code>. That way I could run something like the following query:</p>\n\n<pre><code>ChessPiece.where(game_id: @game_id, position: [\"1-1\", \"2-2\", \"3-3\"])\n</code></pre>\n\n<p>How do I dynamically create this new column so I can run something like the above query? (Assume I can't just edit the database schema.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "file"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575152138, "post_id": 59118197, "comment_id": 104471051, "body": "&quot;<a href=\"https://meta.stackoverflow.com/questions/260648/stack-overflow-question-checklist\">Stack Overflow question checklist</a>&quot; is your friend."}, {"owner": {"reputation": 470, "user_id": 473472, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a60160b11b12be2002670cc7b2824fac?s=128&d=identicon&r=PG", "display_name": "Jason Logsdon", "link": "https://stackoverflow.com/users/473472/jason-logsdon"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575224830, "post_id": 59118197, "comment_id": 104485259, "body": "That&#39;s a similar question, and the answer helps out, but I wasn&#39;t looking for files of a certain extension and it never came up in my searching for an answer"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575668886, "post_id": 59118197, "comment_id": 104656802, "body": "If you read the documentation for the methods you&#39;ll see that the exact extension can easily be changed and there are wildcards to allow you to ignore extensions or snoop inside the filename, look at particular attributes of the files, depending on which way you go about finding the files. It&#39;s not a simple subject and there are lots of gotchas to be aware of, and research and reading is important because picking the wrong path can degrade your script, or the host&#39;s, performance."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575669097, "post_id": 59118197, "comment_id": 104656880, "body": "Also, your question was poorly asked, hence my link to the checklist. On SO, we expect you to show us what you tried: Did you search? Where? Why didn&#39;t it help? If it helped, what did you try? If you didn&#39;t try, why not? If you did, what did you try? What happened then? As is your question was extremely broad and a general duplicate. Searching for files is well covered in that linked question."}, {"owner": {"reputation": 470, "user_id": 473472, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a60160b11b12be2002670cc7b2824fac?s=128&d=identicon&r=PG", "display_name": "Jason Logsdon", "link": "https://stackoverflow.com/users/473472/jason-logsdon"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575756237, "post_id": 59118197, "comment_id": 104674364, "body": "Cool. I would have preferred a simple answer to the question like Nezir gave, but I appreciate you taking the time to criticize the question."}], "answers": [{"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": true, "score": 0, "last_activity_date": 1575136818, "creation_date": 1575136818, "answer_id": 59118822, "question_id": 59118197, "link": "https://stackoverflow.com/questions/59118197/how-to-find-a-file-in-a-directory-structure-in-rails/59118822#59118822", "title": "How to find a file in a directory structure in Rails", "body": "<p>Did you tried something like: </p>\n\n<pre><code>Dir.glob(\"#{root_folder}/**/*.file_extension\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 11075069, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7R2FZQjAVJ4/AAAAAAAAAAI/AAAAAAAAEbE/iSRa_2tIgRc/photo.jpg?sz=128", "display_name": "Alexandra", "link": "https://stackoverflow.com/users/11075069/alexandra"}, "is_accepted": false, "score": -1, "last_activity_date": 1575152241, "last_edit_date": 1575152241, "creation_date": 1575136841, "answer_id": 59118829, "question_id": 59118197, "link": "https://stackoverflow.com/questions/59118197/how-to-find-a-file-in-a-directory-structure-in-rails/59118829#59118829", "title": "How to find a file in a directory structure in Rails", "body": "<p>It looks like the Ruby <code>Find</code> module may help you out. Its <code>find</code> method lets you iterate through all files in a directory. </p>\n\n<p>See the answers in \"<a href=\"https://stackoverflow.com/questions/15502799/ruby-function-list-file-recursively/15502880\">Ruby function list file recursively</a>\" for some other approaches to a related issue.</p>\n"}], "owner": {"reputation": 470, "user_id": 473472, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a60160b11b12be2002670cc7b2824fac?s=128&d=identicon&r=PG", "display_name": "Jason Logsdon", "link": "https://stackoverflow.com/users/473472/jason-logsdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1575136870, "accepted_answer_id": 59118822, "answer_count": 2, "score": -1, "last_activity_date": 1575152241, "creation_date": 1575132212, "last_edit_date": 1575152089, "question_id": 59118197, "link": "https://stackoverflow.com/questions/59118197/how-to-find-a-file-in-a-directory-structure-in-rails", "closed_reason": "Duplicate", "title": "How to find a file in a directory structure in Rails", "body": "<p>I need to find a file somewhere in in the file system.  I'll know the base folder to start looking for and the file name, but I'm not sure how to find it. </p>\n\n<p>This would be dynamically done as part of the code, just like when using FileUtils or <code>Dir.glob</code>.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "ruby-on-rails-6"], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 0, "last_activity_date": 1575130368, "creation_date": 1575130368, "answer_id": 59117971, "question_id": 59117525, "link": "https://stackoverflow.com/questions/59117525/delete-post-from-another-controller/59117971#59117971", "title": "Delete post from another controller?", "body": "<p>I think you mean <code>p</code> and not <code>@post</code>:</p>\n\n<pre><code>&lt;%= link_to \"Delete\", p, ... %&gt;\n</code></pre>\n\n<p>In your view <code>@post</code> is most likely <code>nil</code>, which is confusing to <code>link_to</code>, and hence the error.</p>\n"}], "owner": {"reputation": 97, "user_id": 11894403, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dUGRjP6Xdys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyf_ORXeaqDuZXwjflGWEyiVsE6A/photo.jpg?sz=128", "display_name": "Minimalism", "link": "https://stackoverflow.com/users/11894403/minimalism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 59117971, "answer_count": 1, "score": 0, "last_activity_date": 1575130368, "creation_date": 1575127339, "question_id": 59117525, "link": "https://stackoverflow.com/questions/59117525/delete-post-from-another-controller", "title": "Delete post from another controller?", "body": "<p>I have two controllers in my app. as of now- User  &amp; Post.The user controller has only these methods as of now are - index,new,create and show. I show users posts in users#show view page only.</p>\n\n<p>I wanted to add a functionality to delete the post. I added the method to delete post in post's controller....But i when click on delete button it shows an error <strong>The action 'destroy' could not be found for UsersController</strong></p>\n\n<p>Which is true, I dont have method destroy in users controller.</p>\n\n<p>How can i delete post using posts controller only? I dont want to user controller here , to delete post as - i want to add functionality to delete user in future</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def index\n    @users = User.all\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(set_params)\n    if @user.save\n      UserNotifierMailer.send_signup_email(@user).deliver\n      flash[:success] =\"Success\"\n      redirect_to new_sessions_path and return\n    else\n      render 'new'\n    end\n\n  end\n\n  def show\n    @user = User.find(params[:id])\n    @posts = @user.posts\n  end\n\n  private\n\n  def set_params\n    params.require(:user).permit(:name, :email, :password, :password_confirmation)\n  end\n\n  def post_params\n    params(:post.require).permit(:title, :body)\n  end\n\nend\n</code></pre>\n\n<p>User#show</p>\n\n<pre><code>&lt;div class=\"col-md-8\"&gt;\n    &lt;h1&gt; Posts ( &lt;%= @posts.count %&gt; ) &lt;/h1&gt;\n    &lt;%= @posts.each do |p| %&gt;\n\n        &lt;div class=\"form-field\"&gt;\n            &lt;h4&gt;&lt;b&gt;&lt;%= p.title %&gt;&lt;/b&gt;  &lt;%= link_to \"Edit\", edit_post_path(p.id), class: \"btn \n                 btn-warning col-md-2-offset\", style: \"align-right\" %&gt;&lt;%= link_to \"Delete\", \n                 @post , method: :delete,data: { confirm: \"You sure? \"}, class: \"btn btn-danger \n                 col-md-2-offset\", style: \"align-right\" %&gt;&lt;/h4&gt; \n            &lt;%= p.body %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Post Controller - delete method</p>\n\n<pre><code> def destroy\n     @post = Post.find(params[:id])\n     @post.destroy\n     flash.now[:success] = \"Succesfully Deleted\"\n     redirect_to user_path(current_user)\n  end\n</code></pre>\n\n<p>Routes </p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'posts#index'\n  resources :users\n  resources :posts\n  resource :sessions, only: [:new, :create, :destroy]\n  resources :passwords, only: [:new, :create, :edit, :update]\nend\n</code></pre>\n\n<p>Rake routes :      <strong>DELETE /posts/:id(.:format)       posts#destroy</strong>                                                           </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "edited": false, "score": 0, "creation_date": 1575121793, "post_id": 59116605, "comment_id": 104463558, "body": "<code>Cannot read property &#39;clientWidth&#39; of undefined</code> this error means <code>carouselImages[0]</code> is undefined... please use <code>debugger</code> and make sure you are getting all images correctly"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12452168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e759d36ff652f4b636e9ed158aefdbc5?s=128&d=identicon&r=PG&f=1", "display_name": "madeofquartz", "link": "https://stackoverflow.com/users/12452168/madeofquartz"}, "edited": false, "score": 0, "creation_date": 1575201476, "post_id": 59116796, "comment_id": 104479098, "body": "Thank you for your comment. Unfortunately, this did not fix my problem."}, {"owner": {"reputation": 2136, "user_id": 8045645, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AHubENEZPy0/AAAAAAAAAAI/AAAAAAAAAMo/Cpy8tBFBHGA/photo.jpg?sz=128", "display_name": "Renaldo Balaj", "link": "https://stackoverflow.com/users/8045645/renaldo-balaj"}, "reply_to_user": {"reputation": 9, "user_id": 12452168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e759d36ff652f4b636e9ed158aefdbc5?s=128&d=identicon&r=PG&f=1", "display_name": "madeofquartz", "link": "https://stackoverflow.com/users/12452168/madeofquartz"}, "edited": false, "score": 0, "creation_date": 1575204255, "post_id": 59116796, "comment_id": 104479747, "body": "I updated my answer, I added the demo in there using HTML and JS (your problem is here not at RUBY, it works  just check it carefully :) Feel free to upvote + accepted answer"}], "tags": [], "owner": {"reputation": 2136, "user_id": 8045645, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AHubENEZPy0/AAAAAAAAAAI/AAAAAAAAAMo/Cpy8tBFBHGA/photo.jpg?sz=128", "display_name": "Renaldo Balaj", "link": "https://stackoverflow.com/users/8045645/renaldo-balaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1575204167, "last_edit_date": 1575204167, "creation_date": 1575121820, "answer_id": 59116796, "question_id": 59116605, "link": "https://stackoverflow.com/questions/59116605/how-do-i-define-clientwidth-in-js-for-my-ruby-app/59116796#59116796", "title": "How do I define clientWidth in JS for my ruby app?", "body": "<p>It doesn't have to do with <em>ruby</em> but with the <strong>javascript</strong> itself.</p>\n\n<p>The problem is at querySelectorAll, it isn't returning the right value + i suggest not to use it because it <strong>isn't supported</strong> in every browser.\nSo just add a class to each image and everything would be easier :)</p>\n\n<p>A working demo for you : </p>\n\n<pre><code>&lt;div class=\"carousel-slide\"&gt; \n&lt;%= image_tag(\"photo4.jpg\", id: \"lastClone\"), class: \"imgCarousel\" %&gt; \n&lt;%= image_tag(\"photo1.jpg\"), class: \"imgCarousel\" %&gt; \n&lt;%= image_tag(\"photo2.jpg\"), class: \"imgCarousel\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>At javascript : </p>\n\n<pre><code>x = document.getElementsByClassName(\"imgCarousel\")[0];\nconsole.log(x.clientWidth)\n</code></pre>\n\n<p>Demo (<strong>with JS and html</strong>): </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function myFunction() {\r\n  x=document.getElementsByClassName(\"imgCarousel\")[0];\r\n  console.log(x.clientWidth)\r\n  document.getElementById(\"widthContainer\").innerHTML = x.clientWidth\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;body&gt;\r\n\r\n&lt;img class=\"imgCarousel\" src=\"https://www.w3schools.com/jsref/compman.gif\" &gt;\r\n&lt;img class=\"imgCarousel\" src=\"https://www.w3schools.com/jsref/compman.gif\" &gt;\r\n&lt;img class=\"imgCarousel\" src=\"https://www.w3schools.com/jsref/compman.gif\" &gt;\r\n\r\n\r\n&lt;p id=\"widthContainer\"&gt;Click the button to get clientWidth of first image.&lt;/p&gt;\r\n\r\n&lt;button onclick=\"myFunction()\"&gt;Try it&lt;/button&gt;\r\n\r\n&lt;/body&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 9, "user_id": 12452168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e759d36ff652f4b636e9ed158aefdbc5?s=128&d=identicon&r=PG&f=1", "display_name": "madeofquartz", "link": "https://stackoverflow.com/users/12452168/madeofquartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575204167, "creation_date": 1575120399, "question_id": 59116605, "link": "https://stackoverflow.com/questions/59116605/how-do-i-define-clientwidth-in-js-for-my-ruby-app", "title": "How do I define clientWidth in JS for my ruby app?", "body": "<p>I am having a lot of trouble getting any javascripts to run in my Ruby application. </p>\n\n<p>Currently my console is giving me one error message:</p>\n\n<p>\"<strong>Uncaught TypeError: Cannot read property 'clientWidth' of undefined</strong>\"</p>\n\n<p>This error is referencing this line in my <em>application.js</em> file:</p>\n\n<pre><code>const size = carouselImages[0].clientWidth;\n</code></pre>\n\n<p>I'm guessing it's saying it has no idea what clientWidth is? I was following along with <a href=\"https://www.youtube.com/watch?v=KcdBOoK3Pfw\" rel=\"nofollow noreferrer\">this tutorial</a> when I hit this roadblock. (He's not making a rails app, but his script loads fine.) The script also loaded fine for me when I created a regular index.html page not tied to my ruby app.</p>\n\n<h2>How do I define clientWidth/do I need to?</h2>\n\n<p>My Rails files:</p>\n\n<p><strong>Gem File</strong></p>\n\n<pre><code>gem 'coffee-rails', '~&gt; 4.2'\n\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\ngem 'jquery-rails', '~&gt; 4.3', '&gt;= 4.3.3'\ngem 'rails-ujs', '~&gt; 0.1.0'\ngem 'jquery-ui-rails'\n</code></pre>\n\n<p><strong>_header.html.erb</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;title&gt;Page Title&lt;/title&gt;\n\n&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n\n&lt;%= javascript_include_tag( 'slider.js' ) %&gt;\n\n&lt;/head&gt;\n&lt;body&gt; &lt;!--Body and html tags are closed in my _footer.html.erb --&gt;\n</code></pre>\n\n<p><strong>application.js</strong></p>\n\n<pre><code>//= require rails-ujs\n//= require jquery \n//= require jquery_ujs \n//= require turbolinks\n\n\n$(document).ready to $(document).on('turbolinks:load', function(main());\n\n//image slider code\n//\n//\n\nconst carouselSlide = document.querySelector('.carousel-slide');\n\nconst carouselImages = document.querySelectorAll('.carousel-slide img');\n\n\n//buttons\n\nconst prevBtn = document.querySelector('#prevBtn');\nconst nextBtn = document.querySelector('#nextBtn');\n\n\n//Counter\n\nlet counter = 1;\nconst size = carouselImages[0].clientWidth;\n\ncarouselSlide.style.transform = 'translateX('+(-size * counter)+ 'px)';\n</code></pre>\n\n<p><strong>slider.html.erb</strong></p>\n\n<pre><code>&lt;button id=\"prevBtn\"&gt;Prev&lt;/button&gt;\n&lt;button id=\"nextBtn\"&gt;Next&lt;/button&gt;\n\n&lt;br /&gt;&lt;br /&gt;\n\n&lt;div class=\"carousel-container\"&gt;\n&lt;div class=\"carousel-slide\"&gt; \n&lt;%= image_tag(\"photo4.jpg\", id: \"lastClone\") %&gt; \n&lt;!-- photo1.jpg is an image of a road at sunset should have the border around it and be the focus. Currently, it is not. --&gt;\n&lt;%= image_tag(\"photo1.jpg\") %&gt; \n&lt;%= image_tag(\"photo2.jpg\") %&gt;\n&lt;%= image_tag(\"photo3.jpg\") %&gt;\n&lt;%= image_tag(\"photo4.jpg\") %&gt;\n&lt;%= image_tag(\"photo1.jpg\", id: \"firstClone\") %&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>slider.scss</strong></p>\n\n<pre><code>/* This is for a test slider */\n\n.carousel-container {\n  width: 1000px;\n  border: 5px solid black;\n}\n\n.carousel-slide {\n  display: flex;\n\n  img{\n    width: 1000px;\n    height: auto;\n  }\n}\n</code></pre>\n\n<p>Here is an imgur link to see a screenshot of my ruby app vs. a regular .html file I created to compare/contrast what is going on:\n<a href=\"https://imgur.com/a/jVhjLd3\" rel=\"nofollow noreferrer\">https://imgur.com/a/jVhjLd3</a></p>\n\n<p>Here are the versions I am running of things:</p>\n\n<p><strong>Ruby</strong>: ruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-linux]</p>\n\n<p><strong>Node</strong>: v13.2.0</p>\n\n<p><strong>NPM</strong>: 6.13.1</p>\n\n<p>I tried a few different suggestions found via google searches (a la 'get fixed quick'), so if anything is off or out of place, please point it out to me. If you require more info/code, I will be happy to provide.</p>\n\n<p>Any help getting my Javascript to run would be greatly appreciated!</p>\n"}, {"tags": ["ruby", "ruby-2.2"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1575117974, "post_id": 59116290, "comment_id": 104462690, "body": "can you show the code for the caller method please - it&#39;s apparently returning nil some of the time"}], "answers": [{"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575119227, "post_id": 59116320, "comment_id": 104462973, "body": "so how did you fix the problem?"}], "tags": [], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "is_accepted": false, "score": 0, "last_activity_date": 1575153407, "last_edit_date": 1575153407, "creation_date": 1575118098, "answer_id": 59116320, "question_id": 59116290, "link": "https://stackoverflow.com/questions/59116290/weird-undefined-method-but-when-debugging-there-is-no-errors/59116320#59116320", "title": "weird undefined method [] but when debugging there is no errors", "body": "<p><code>caller</code> is a native Ruby method that returns the current execution stack as an array of strings. The problem I was having was because, as my code was running in the console one of the lines was:</p>\n\n<pre><code>\"(pry):7:in `&lt;main&gt;'\"\n</code></pre>\n\n<p>All the other lines had a filename/line/method name format as:</p>\n\n<pre><code>/...../gems/pry-0.9.12.6/lib/pry/pry_instance.rb:328:in `eval'\n</code></pre>\n\n<p>The regular expresion that I was using <code>[/\\/(?:.(?!\\/))+$/]</code> was expected to capture the filename as the line had no a filename it returned <code>nil</code> and the <code>b[-1..2]</code> was throwing an error as <code>b</code> was `nil.</p>\n\n<p>While I'm debugging the <code>caller</code> variable got replaced on the <code>binding.pry</code> execution time, making the code work.</p>\n\n<p>This is how I fixed the code to make it work:</p>\n\n<pre><code>  def log_method_backtrace\n    backtrace = []\n    (4..8).map do |i| # 4 because before is ... map, log_method_backtrace...\n        line = caller[i]\n        b = line[/\\/(?:.(?!\\/))+$/] || line\n        b = b[1..-2]\n        b = b.sub(':in `', '#')\n        backtrace &lt;&lt; \"#{b} &lt;- \"\n    end\n    log \"(Method called from #{backtrace.join})\"\n  end\n</code></pre>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575153407, "creation_date": 1575117844, "question_id": 59116290, "link": "https://stackoverflow.com/questions/59116290/weird-undefined-method-but-when-debugging-there-is-no-errors", "title": "weird undefined method [] but when debugging there is no errors", "body": "<p>I've defined this method on ruby <code>ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]</code> and <code>(Rails 4.2.5.2)</code></p>\n\n<pre><code>  def log_method_backtrace\n    backtrace = []\n    (4..8).map do |i| # 4 because before is ... map, log_method_backtrace...\n        b = caller[i][/\\/(?:.(?!\\/))+$/]\n        b = b[1..-2] # *This is the error line\n        b = b.sub(':in `', '#')\n        backtrace &lt;&lt; \"#{b} &lt;- \"\n    end\n    log \"(Method called from #{backtrace.join})\"\n  end\n</code></pre>\n\n<p>When I call it it throw this error:</p>\n\n<pre><code>NoMethodError: undefined method `[]' for nil:NilClass from (pry):5:in `block in log_method_backtrace'\n</code></pre>\n\n<p>But if I place a debugger breakpoint (I'm using binding.pry) in that line, and run the same line it works.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575115510, "post_id": 59115802, "comment_id": 104462088, "body": "How does your <code>comment_params</code> method in your <code>CommentController</code> look like?"}, {"owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575116569, "post_id": 59115802, "comment_id": 104462324, "body": "def comment_params       params.require(:comment).permit(:content, :course_id)    end"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1575118702, "post_id": 59115802, "comment_id": 104462847, "body": "please post your model definitions in your question, don&#39;t need everything, but need the relations.  You should have <code>belongs_to</code> and <code>has_many</code> relations.... do you?"}, {"owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "edited": false, "score": 0, "creation_date": 1575198674, "post_id": 59115802, "comment_id": 104478538, "body": "in model:  belongs_to :course to comment.rb and has_many :comments in course.rb."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 12468467, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m6kM8swCFfU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfJ2FK75EwSrKmrdAfbrZRsr43lUQ/photo.jpg?sz=128", "display_name": "solene basaia", "link": "https://stackoverflow.com/users/12468467/solene-basaia"}, "is_accepted": false, "score": 2, "last_activity_date": 1575293936, "creation_date": 1575293936, "answer_id": 59140115, "question_id": 59115802, "link": "https://stackoverflow.com/questions/59115802/how-do-i-add-comment-feature-in-my-app-ruby-on-rails/59140115#59140115", "title": "how do I add comment feature in my app ruby on rails?", "body": "<p>In your Comment model you have no 'comment' field. You only have a 'content' field.\nYour issue here is the </p>\n\n<pre><code>validates :comment ,presence:true,\n                    length: { minimum: 10}\n</code></pre>\n\n<p>in your Comment model. I think you meant </p>\n\n<pre><code>validates :content, presence:true,\n                    length: { minimum: 10}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575373372, "creation_date": 1575113965, "last_edit_date": 1575373372, "question_id": 59115802, "link": "https://stackoverflow.com/questions/59115802/how-do-i-add-comment-feature-in-my-app-ruby-on-rails", "title": "how do I add comment feature in my app ruby on rails?", "body": "<p>I can not add the comment system in my rails app. I followed the rails guide <a href=\"https://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">see rails guide started</a> and even started in a new rails app. But I'm not sure I followed the guide correctly.  Please help me figure out what I'm doing wrong.</p>\n\n<p><strong>CommentsController</strong></p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  def new\n    @comment = Comment.new\n  end\n\n  def create\n    @course = Course.find(params[:course_id])\n    @comment = @course.comments.build(comment_params)\n    respond_to do |format|\n      if @comment.save\n        format.html { redirect_to @course, notice: 'Comment was successfully created.' }\n        format.json { render :show, status: :created, location: @course }\n      else\n        format.html { render :new }\n        format.json { render json: @comment.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  private\n\n  def comment_params\n    params.require(:comment).permit(:content, :course_id)    \n  end\nend\n</code></pre>\n\n<p><strong>model Course</strong></p>\n\n<pre><code>class Course &lt; ApplicationRecord\n  has_many :comments\nend\n</code></pre>\n\n<p><strong>model Comment</strong></p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :course\n  validates :comment, presence: true, length: { minimum: 10}\nend\n</code></pre>\n\n<p><strong>comment form</strong></p>\n\n<pre><code>&lt;%= simple_form_for([@course, @course.comments.build], remote: true) do |f| %&gt;\n  &lt;div class=\"card my-4\"&gt;\n    &lt;h5 class=\"card-header\"&gt;Interaction&lt;/h5&gt;\n    &lt;div class=\"card-body\"&gt;     \n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.input :content, required: true, input_html: { class: 'textarea' }, wrapper: false, label_html: { class: 'label' }, placeholder:'Ajouter une question ou un commentaire...' %&gt;\n      &lt;/div&gt;\n      &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;&lt;i class=\"fa fa-location-arrow\" aria-hidden=\"true\"&gt;&lt;/i&gt; Ajouter&lt;/button&gt;\n   &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code> Rails.application.routes.draw do\n  resources :courses do\n   resources :comments\n  end   \n\n  root to:'home#index'\nend\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>create_table \"comments\", force: :cascade do |t|\n    t.text \"content\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.bigint \"course_id\"\n    t.bigint \"user_id\"\n  end\n\n  create_table \"courses\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"content\"\n    t.string \"image_course\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"slug\"\n    t.bigint \"matiere_id\"\n    t.bigint \"user_id\"\n    t.index [\"matiere_id\"], name: \"index_courses_on_matiere_id\"\n    t.index [\"user_id\"], name: \"index_courses_on_user_id\"\n  end\n</code></pre>\n\n<p><strong>console message</strong> \nNote: ****ROLLBACK** ON LINE 28**</p>\n\n<pre><code>Started POST \"/courses/4/comments\" for ::1 at 2019-11-30 11:30:11 +0000\nProcessing by CommentsController#create as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"comment\"=&gt;{\"content\"=&gt;\"100 ans, c'est tr\u00e8s long. Je vous pr\u00e9sente un pays qui n'a mis que deux ans \u00e0 devenir un pays du tiers monde issu d'un pays riche et d\u00e9velopp\u00e9. C'est toujours un pays du tiers monde. Fortement et fi\u00e8rement.\"}, \"course_id\"=&gt;\"4\"}\n  Course Load (1.3ms)  SELECT  \"courses\".* FROM \"courses\" WHERE \"courses\".\"id\" = $1 LIMIT $2  [[\"id\", 4], [\"LIMIT\", 1]]\n  \u21b3 app/controllers/comments_controller.rb:27\n   (0.8ms)  BEGIN\n  \u21b3 app/controllers/comments_controller.rb:28\n   (0.6ms)  ROLLBACK\n  \u21b3 app/controllers/comments_controller.rb:28\nCompleted 500 Internal Server Error in 33ms (ActiveRecord: 3.2ms)\n\n\n\nNoMethodError - undefined method `comment' for #&lt;Comment:0x0000555ccc6a8528&gt;\nDid you mean?  content:\n  app/controllers/comments_controller.rb:28:in `create'\n\nsource=rack-timeout id=ca133680-ce55-4b88-99ce-16fd3d1f01a0 timeout=15000ms service=130ms state=completed\n</code></pre>\n\n<p><strong>but where i have to define comment</strong></p>\n\n<p>on terminal error message say:</p>\n\n<pre><code> NoMethodError - undefined method `comment' for #&lt;Comment:0x00007f04245dc0a8&gt;\nDid you mean?  content:\n  app/controllers/comments_controller.rb:33:in `block in create'\n  app/controllers/comments_controller.rb:32:in `create'\n</code></pre>\n"}, {"tags": ["ruby", "functional-programming"], "comments": [{"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575111006, "post_id": 59115314, "comment_id": 104461159, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/19558351/does-ruby-have-an-identity-function-i-e-x-fn-x-for-all-x\">Does ruby have an identity function, i.e. x.fn == x, for all x?</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1575111833, "post_id": 59115314, "comment_id": 104461331, "body": "@picklerick the answer you\u2019ve linked obviously does not answer this question because <code>Object#itself</code> in many ways differs from <a href=\"https://stackoverflow.com/questions/tagged/elixir\">elixir</a>\u2019s <code>&amp; &amp;1</code>, as I pointed out in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 12460022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ba76a08237353831f414cb39959c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Y", "link": "https://stackoverflow.com/users/12460022/timo-y"}, "edited": false, "score": 0, "creation_date": 1575111363, "post_id": 59115408, "comment_id": 104461230, "body": "Thanks! The reason I use a bare function instead of a block is that this doesn&#39;t happen in the main program, it happens in a configuration file, where a  user with little programming knowledge can create a fitness function by combining the base functions in different ways. Maybe there is a better way of doing this? Would a DSL be appropriate here?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 31, "user_id": 12460022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ba76a08237353831f414cb39959c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Y", "link": "https://stackoverflow.com/users/12460022/timo-y"}, "edited": false, "score": 0, "creation_date": 1575111723, "post_id": 59115408, "comment_id": 104461304, "body": "Definitely it\u2019s a perfect use case for DSL. You have a <i>domain</i> and you need a <i>specific language</i> for it :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1575115002, "post_id": 59115408, "comment_id": 104461991, "body": "&quot;<i>Sidenote:</i> using a bare function instead of the block in call to <code>either</code> looks like a bad design to me. Blocks are faster, and everywhere in the core lib <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> uses blocks in such a case.&quot; \u2013 <code>either</code> takes <i>two</i> functions as an argument. You can only pass <i>one</i> block. Therefore, you <i>have</i> to pass a function. You <i>could</i> make it one function and one block, but that would be strangely asymmetrical."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1575110948, "creation_date": 1575110948, "answer_id": 59115408, "question_id": 59115314, "link": "https://stackoverflow.com/questions/59115314/is-there-an-identity-function-in-ruby/59115408#59115408", "title": "Is there an identity function in Ruby?", "body": "<p>There is no anonymous functions capture in <a href=\"/questions/tagged/ruby\" class=\"post-tag\" title=\"show questions tagged &#39;ruby&#39;\" rel=\"tag\">ruby</a>, because in OOP there are objects having methods defined on them, not functions.</p>\n\n<p>The most similar call would be <a href=\"https://ruby-doc.org/core/Object.html#method-i-itself\" rel=\"nofollow noreferrer\"><code>Object#itself</code></a>, and while one might do <code>method(:itself)</code> instead of <code>-&gt;(x) { x }</code>, it would not be exactly same for many reasons.</p>\n\n<p>Why would not you just assign the anonymous function to the variable and use it instead, like <code>\u03bb = -&gt;(x) { x }</code> and then use <code>\u03bb</code> everywhere?</p>\n\n<p><em>Sidenote:</em> using a bare function instead of the block in call to <code>either</code> looks like a bad design to me. Blocks are faster, and everywhere in the core lib <a href=\"/questions/tagged/ruby\" class=\"post-tag\" title=\"show questions tagged &#39;ruby&#39;\" rel=\"tag\">ruby</a> uses blocks in such a case.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1575129069, "creation_date": 1575129069, "answer_id": 59117762, "question_id": 59115314, "link": "https://stackoverflow.com/questions/59115314/is-there-an-identity-function-in-ruby/59117762#59117762", "title": "Is there an identity function in Ruby?", "body": "<p><strong>tl;dr</strong> summary: there is no identity function in the Ruby core or standard libraries. In fact, there are no functions (in the sense of pre-defined <code>Proc</code> instances) <em>at all</em> anywhere in the core or standard libraries.</p>\n\n<p>First-class functions in Ruby are kind-of second-class (if that makes sense).</p>\n\n<p>When Yukihiro \"matz\" Matsumoto first designed Ruby, he surveyed the standard libraries of other languages for uses of first-class and higher-order functions, and he found that the vast majority of uses were:</p>\n\n<ul>\n<li>a single function argument</li>\n<li>that is not stored, passed, or returned</li>\n<li>that is only immediately invoked one or more times</li>\n</ul>\n\n<p>A significant portion of higher-order functions where this is <em>not</em> true are control structures (e.g. <code>if</code> which takes a condition and two consequences), which however he wanted to model as built-in language constructs, not library functions.</p>\n\n<p>Therefore, he decided to optimize Ruby for the common case that he identified, and created <em>blocks</em>.</p>\n\n<p><em>Blocks</em> are <em>not</em> first-class functions:</p>\n\n<ul>\n<li>they aren't objects</li>\n<li>you can't send messages to them</li>\n<li>they can't be stored in variables</li>\n<li>they can't be returned</li>\n<li>they can't be freely passed as arguments, you can only pass at most one and only at a special place in the argument list</li>\n</ul>\n\n<p>As a result, <em>real</em> (in the sense that they are actual objects) first-class functions (<code>Proc</code>s) are in some sense second-class language features compared to blocks:</p>\n\n<ul>\n<li>they are more expensive in memory</li>\n<li>calling them is slower</li>\n<li>they are more syntactically cumbersome to create</li>\n</ul>\n\n<p>So, in essence, it is not surprising that you are running into limitations when trying to use Ruby the way you do: that's not what Ruby was designed for.</p>\n\n<p>In the past, I used to carry around a helper library with constants such like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Proc\n  Id = -&gt; x { x }\nend\n</code></pre>\n\n<p>But I stopped doing that. If I want to use Ruby, I use Ruby as an OO language, if I want to do fancy FP, I use Haskell or Scala or Clojure or Racket or \u2026</p>\n"}], "owner": {"reputation": 31, "user_id": 12460022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ba76a08237353831f414cb39959c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Y", "link": "https://stackoverflow.com/users/12460022/timo-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1575129069, "creation_date": 1575110267, "question_id": 59115314, "link": "https://stackoverflow.com/questions/59115314/is-there-an-identity-function-in-ruby", "title": "Is there an identity function in Ruby?", "body": "<p>I'm currently writing a Ruby class that provides a menu of base lambdas that can be mixed-and-matched to create a new set of lambdas. (it's an evolutionary algorithm that requires a lot of customizing of the fitness function depending on the dataset)</p>\n\n<p>The configuration fire where this happens it full of stuff like this </p>\n\n<p><code>function_from_modifier.(base_function, either.(modifier_from.(case),-&gt;(x){x}) )</code></p>\n\n<p>The identity function <code>-&gt;(x){x}</code> pops up several times in the configuration file, and it looks ugly, so I was wondering if there is a more elegant way of doing this. Is something like Elixir's <code>&amp;(&amp;1)</code> possible in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "helper"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575103126, "post_id": 59114429, "comment_id": 104459582, "body": "I think <code>ApplicationHelper</code> is deprecated - see <a href=\"https://apidock.com/rails/ApplicationHelper\" rel=\"nofollow noreferrer\">apidock.com/rails/ApplicationHelper</a>. I have not personally used controller helpers before but I found this link which has docs <a href=\"https://api.rubyonrails.org/classes/ActionController/Helpers.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionController/Helpers.html</a> and the method you have to call <a href=\"https://apidock.com/rails/AbstractController/Helpers/ClassMethods/helper\" rel=\"nofollow noreferrer\">apidock.com/rails/AbstractController/Helpers/ClassMethods/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 12346471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YAMl3iU1o_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIlhk10idHtfK_eVt4kom5kqxRTg/photo.jpg?sz=128", "display_name": "user12346471", "link": "https://stackoverflow.com/users/12346471/user12346471"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1575156171, "post_id": 59114429, "comment_id": 104471897, "body": "Probably this will work. I will try it"}], "answers": [{"comments": [{"owner": {"reputation": 1612, "user_id": 1146473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798f66c6c7e53703e2a30ff911b0e884?s=128&d=identicon&r=PG", "display_name": "ekampp", "link": "https://stackoverflow.com/users/1146473/ekampp"}, "edited": false, "score": 0, "creation_date": 1575232065, "post_id": 59119035, "comment_id": 104487156, "body": "You should also move your current user method directly into the controller, a concern, or the application controller."}], "tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 2, "last_activity_date": 1575138346, "creation_date": 1575138346, "answer_id": 59119035, "question_id": 59114429, "link": "https://stackoverflow.com/questions/59114429/undefined-local-variable-or-method-current-user-in-controller/59119035#59119035", "title": "[undefined local variable or method `current_user&#39; in controller]", "body": "<p>Try with adding this into <code>ApplicationController.rb</code></p>\n\n<pre><code>helper_method :current_user\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 10228647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4bc318f3220c022ef988c40a80e11bd?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza mohagheghi", "link": "https://stackoverflow.com/users/10228647/alireza-mohagheghi"}, "is_accepted": false, "score": 0, "last_activity_date": 1575270086, "creation_date": 1575270086, "answer_id": 59134038, "question_id": 59114429, "link": "https://stackoverflow.com/questions/59114429/undefined-local-variable-or-method-current-user-in-controller/59134038#59134038", "title": "[undefined local variable or method `current_user&#39; in controller]", "body": "<p>\u2028call helper methods in Rails 5 : \u2028</p>\n\n<pre><code># sample : \n\nmodule UsersHelper\n  def full_name(user)\n    user.first_name + user.last_name\n  end\nend\n\nclass UsersController &lt; ApplicationController\n\n  def update\n    @user = User.find params[:id]\n    if @user.update_attributes(user_params)\n      notice = \"#{helpers.full_name(@user) is successfully updated}\"\n      redirect_to user_path(@user), notice: notice\n    else\n      render :edit\n    end\n  end\nend\n</code></pre>\n\n<p>Before Rails 5 :</p>\n\n<pre><code>\n# sample :\n\nmodule UsersHelper\n  def full_name(user)\n    user.first_name + user.last_name\n  end\nend\n\nclass UsersController &lt; ApplicationController\n  include UsersHelper\n\n  def update\n    @user = User.find params[:id]\n    if @user.update_attributes(user_params)\n      redirect_to user_path(@user), notice: \"#{full_name(@user) is successfully updated}\"\n    else\n      render :edit\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12346471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YAMl3iU1o_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIlhk10idHtfK_eVt4kom5kqxRTg/photo.jpg?sz=128", "display_name": "user12346471", "link": "https://stackoverflow.com/users/12346471/user12346471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575270086, "creation_date": 1575101841, "question_id": 59114429, "link": "https://stackoverflow.com/questions/59114429/undefined-local-variable-or-method-current-user-in-controller", "title": "[undefined local variable or method `current_user&#39; in controller]", "body": "<p>I've been around for this problem for 1 hour and not figuring out why it doesn't work.</p>\n\n<p>I don't use gem devise.\nI have user model, post model, UsersController.rb, PostsController.rb and 1 helper like below</p>\n\n<ol>\n<li>PostsController.rb :</li>\n</ol>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :set_post, only: [:show, :edit, :update, :destroy]\n\n  # GET /posts\n  # GET /posts.json\n  def index\n    @posts = Post.all\n  end\n\n  # GET /posts/1\n  # GET /posts/1.json\n  def show\n  end\n\n  # GET /posts/new\n  def new\n    @post = Post.new\n  end\n\n  # GET /posts/1/edit\n  def edit\n  end\n\n  # POST /posts\n  # POST /posts.json\n  def create\n    @post = current_user.posts.build(post_params)\n\n    respond_to do |format|\n      if @post.save\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\n        format.json { render :show, status: :created, location: @post }\n      else\n        format.html { render :new }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /posts/1\n  # PATCH/PUT /posts/1.json\n  def update\n    respond_to do |format|\n      if @post.update(post_params)\n        format.html { redirect_to @post, notice: 'Post was successfully updated.' }\n        format.json { render :show, status: :ok, location: @post }\n      else\n        format.html { render :edit }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /posts/1\n  # DELETE /posts/1.json\n  def destroy\n    @post.destroy\n    respond_to do |format|\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_post\n      @post = Post.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def post_params\n      params.require(:post).permit(:caption, :user_id)\n    end\nend\n\n</code></pre>\n\n<ol start=\"2\">\n<li>ApplicationHelper.rb</li>\n</ol>\n\n<pre><code>module ApplicationHelper\n    def current_user\n        session[:user_id] &amp;&amp; User.find(session[:user_id])\n    end\nend\n\n</code></pre>\n\n<p>The current_user helper method works fine for all the views. </p>\n\n<p>As I understand, PostsController inherits from ApplicationController, so it takes all the helpers from ApplicationHelper. I still dont figure out why this doesn't work.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1575112537, "post_id": 59114177, "comment_id": 104461489, "body": "I think if you have this kind of question, you should start with studying some ruby book and then some <i>simple</i> ruby code."}, {"owner": {"reputation": 27, "user_id": 10454360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JNExZcNh7j4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWPnAUs3Bp_C0uWb84UfGBJgMbwqw/mo/photo.jpg?sz=128", "display_name": "wolverine99", "link": "https://stackoverflow.com/users/10454360/wolverine99"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1575338522, "post_id": 59114177, "comment_id": 104523882, "body": "@AlekseiMatiushkin could you recommend a good ruby book."}, {"owner": {"reputation": 27, "user_id": 10454360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JNExZcNh7j4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWPnAUs3Bp_C0uWb84UfGBJgMbwqw/mo/photo.jpg?sz=128", "display_name": "wolverine99", "link": "https://stackoverflow.com/users/10454360/wolverine99"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577308671, "post_id": 59114177, "comment_id": 105140253, "body": "@AlekseiMatiushkin you are right.  have been reviewing Ruby language for last few weeks and now have a much better understanding of the language."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1575112784, "post_id": 59114324, "comment_id": 104461540, "body": "<a href=\"https://gitlab.com/ninerian-gitlab/gitlab-ce/blob/master/lib/gitlab/view/presenter/base.rb#L23-31\" rel=\"nofollow noreferrer\">FWIW</a>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1575100460, "creation_date": 1575100460, "answer_id": 59114324, "question_id": 59114177, "link": "https://stackoverflow.com/questions/59114177/what-does-presents-mean-in-declaration-of-symbol/59114324#59114324", "title": "What does presents mean in declaration of symbol?", "body": "<p>I am not sure if I understand your question. if not, please elaborate on what exactly is unclear to you.</p>\n\n<p>In line 4</p>\n\n<pre><code>presents :members\n</code></pre>\n\n<p>there is a method call to the <code>presents</code> class method the symbol <code>:members</code> is an argument to that method.</p>\n\n<p>In line 12</p>\n\n<pre><code>yield member.present(current_user: current_user)\n</code></pre>\n\n<p>there is the <code>present</code> method called on each <code>member</code>. The hash <code>current_user: current_user</code> in the argument to that method.</p>\n\n<p>What does that mean? </p>\n\n<p>Hmm, that the class methods obviously expects a symbol (very likely it would understand a string too) and uses that to build or configure a presenter. And that the <code>present</code> instance method needs to know about the current user and the method expects the current user to be provided in an options hash or as <a href=\"https://www.justinweiss.com/articles/fun-with-keyword-arguments/\" rel=\"nofollow noreferrer\">kwarg</a>.</p>\n\n<p>An what that really means totally depends on the codebase and what the methods do with these arguments.</p>\n"}], "owner": {"reputation": 27, "user_id": 10454360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JNExZcNh7j4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWPnAUs3Bp_C0uWb84UfGBJgMbwqw/mo/photo.jpg?sz=128", "display_name": "wolverine99", "link": "https://stackoverflow.com/users/10454360/wolverine99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 59114324, "answer_count": 1, "score": 0, "last_activity_date": 1575100460, "creation_date": 1575099112, "question_id": 59114177, "link": "https://stackoverflow.com/questions/59114177/what-does-presents-mean-in-declaration-of-symbol", "title": "What does presents mean in declaration of symbol?", "body": "<p>I am studying some Ruby on Rails code, and found several symbols declared with <strong>presents</strong>, as shown below...</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class MembersPresenter &lt; Gitlab::View::Presenter::Delegated\n  include Enumerable\n\n  presents :members\n\n  def to_ary\n    to_a\n  end\n\n  def each\n    members.each do |member|\n      yield member.present(current_user: current_user)\n    end\n  end\nend\n</code></pre>\n\n<p>What does this mean?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575090834, "post_id": 59113328, "comment_id": 104457634, "body": "Why are you using a fork of sqlite from Github?"}, {"owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575091414, "post_id": 59113328, "comment_id": 104457718, "body": "Only one that works to a point. Here are other ones I have tried: gem &#39;sqlite3&#39; gem &#39;sqlite3&#39;, &#39;&lt; 1.4&#39; gem &#39;sqlite3&#39;, git: &quot;<a href=\"https://github.com/larskanis/sqlite3-ruby\" rel=\"nofollow noreferrer\">github.com/larskanis/sqlite3-ruby</a>&quot;, branch: &quot;add-gemspec&quot; gem &quot;sqlite3&quot;, &quot;~&gt; 1.3.6&quot;"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575091417, "post_id": 59113328, "comment_id": 104457720, "body": "Perhaps it&#39;s not a good idea to try to run the latest and greatest version. I would try to uninstalll this 6.0.1 version, and install the last one from the v5 branch, which is 5.2.4 (<code>gem uninstall rails; gem install rails -v 5.2.4</code>). Then try again."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575092803, "post_id": 59113328, "comment_id": 104457894, "body": "If you&#39;re running into the wall with sqlite - just don&#39;t use it. Rails defaults to because it&#39;s (usually) an easy to setup db for rapid prototyping and learning. It&#39;s not what you are going to actually deploy on and not what you should dev/test real apps on. I would suggest you go for postgres instead."}, {"owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575093038, "post_id": 59113328, "comment_id": 104457923, "body": "@Casper I had trouble with trying to downgrade my rails version. Is there an alternative way to downgrade as the commands just lead to errors for me. Thanks"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575093160, "post_id": 59113328, "comment_id": 104457939, "body": "I&#39;d recommend using a better tutorial. A video isn&#39;t as thorough as a good book or site."}, {"owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1575093176, "post_id": 59113328, "comment_id": 104457943, "body": "@max How exactly would I replace sqlite3 with postgres?"}, {"owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575093223, "post_id": 59113328, "comment_id": 104457951, "body": "@theTinMan The tutorial doesn&#39;t experience the errors I am having so I am just troubleshooting myself."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575094033, "post_id": 59113328, "comment_id": 104458077, "body": "Do you have the exact same OS and OS version, version of Ruby, gem, drivers? When was the tutorial created? The internet remembers forever but our systems don&#39;t remain static, they change, so unless that tutorial is current with your system you can&#39;t trust it. And, since you didn&#39;t tell us <i>which</i> tutorial, we can&#39;t help you much as we&#39;re shooting blindly in the dark."}, {"owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575094460, "post_id": 59113328, "comment_id": 104458131, "body": "@theTinMan I feel like what tutorial I am watching is irrelevant as my main goal right now is just to start the rails server. After I start the server I can continue with the video."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575124833, "post_id": 59113328, "comment_id": 104464340, "body": "Ethan, I suspect the v5 branch is more likely to work on Windows. But it&#39;s just a guess. I would not downgrade anything. I would delete the whole Rails app and make a new one in the v5 branch. You can save the modified files if you edited anything, and then copy paste the changes over to the new one. Even the tutorial that said for you to use a Github version for SQLite was for Rails 5.2.2! You&#39;ll find much more help for Rails v5 problems on Windows since it&#39;s been around longer. On v6 you&#39;ll most likely be on your own. Maybe try to file a Github issue instead if you still want to try though."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1575125404, "post_id": 59113328, "comment_id": 104464460, "body": "Maybe see this one also: <a href=\"https://stackoverflow.com/questions/54527277/cant-activate-sqlite3-1-3-6-already-activated-sqlite3-1-4-0/54606137#54606137\" title=\"cant activate sqlite3 1 3 6 already activated sqlite3 1 4 0\">stackoverflow.com/questions/54527277/&hellip;</a> Notice it&#39;s for Rails 5.2.2 though."}, {"owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "edited": false, "score": 0, "creation_date": 1575148626, "post_id": 59113328, "comment_id": 104470298, "body": "Thanks guys for the help. I guess I will downgrade to railsv5 and take it from there. :3"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 12393080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrIv3yN84JD7Vn4DzOGAuH3pyme3UjjaaPufUPxA=k-s128", "display_name": "Martin Van\u011bk", "link": "https://stackoverflow.com/users/12393080/martin-van%c4%9bk"}, "is_accepted": false, "score": 1, "last_activity_date": 1577090369, "creation_date": 1577090369, "answer_id": 59452287, "question_id": 59113328, "link": "https://stackoverflow.com/questions/59113328/error-loading-the-sqlite3-active-record-adapter-ruby-on-rails-error-win10-64b/59452287#59452287", "title": "Error loading the &#39;sqlite3&#39; Active Record adapter, Ruby on Rails error Win10 64bit", "body": "<p>This worked for me:</p>\n\n<p>At first install <a href=\"https://stackoverflow.com/questions/57891751/webpacker-configuration-file-not-found-rails-6-0-0\">Webpacker configuration file not found - Rails 6.0.0</a></p>\n\n<p>Then change your sqllite3 gem for this:  gem 'sqlite3', '~> 1.3', '>= 1.3.6'</p>\n\n<p>For me worked well. version 6.0.2</p>\n"}], "owner": {"reputation": 1, "user_id": 12458842, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDd7HeCJQneoVih31nzqRwd-uhS8AGKw4NDY0ntCA=k-s128", "display_name": "Ethan Middleton", "link": "https://stackoverflow.com/users/12458842/ethan-middleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577090369, "creation_date": 1575090211, "last_edit_date": 1575092469, "question_id": 59113328, "link": "https://stackoverflow.com/questions/59113328/error-loading-the-sqlite3-active-record-adapter-ruby-on-rails-error-win10-64b", "title": "Error loading the &#39;sqlite3&#39; Active Record adapter, Ruby on Rails error Win10 64bit", "body": "<p>Before I reload my localhost:3000 webpage it says this:</p>\n\n<pre><code>$ rails s\n=&gt; Booting Puma\n=&gt; Rails 6.0.1 application starting in development\n=&gt; Run `rails server --help` for more startup options\n*** SIGUSR2 not implemented, signal based restart unavailable!\n*** SIGUSR1 not implemented, signal based restart unavailable!\n*** SIGHUP not implemented, signal based logs reopening unavailable!\nPuma starting in single mode...\n* Version 4.3.0 (ruby 2.6.5-p114), codename: Mysterious Traveller\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://[::1]:3000\n* Listening on tcp://127.0.0.1:3000\nUse Ctrl-C to stop\n</code></pre>\n\n<p>Then after I reload:</p>\n\n<pre><code>2019-11-29 20:18:59 -0800: Rack app error handling request { GET / }\n#&lt;LoadError: Error loading the 'sqlite3' Active Record adapter. Missing a gem it depends on? can't activate sqlite3 (~&gt; 1.4), already activated sqlite3-1.3.13.20180326210955. Make sure all dependencies are added to Gemfile.&gt;\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/rubygems_integration.rb:406:in `block (2 levels) in replace_gem'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/connection_adapters/sqlite3_adapter.rb:13:in `&lt;top (required)&gt;'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/connection_adapters/connection_specification.rb:170:in `spec'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:1054:in `establish_connection'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/connection_handling.rb:51:in `establish_connection'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/railtie.rb:201:in `block (2 levels) in &lt;class:Railtie&gt;'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:72:in `class_eval'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:72:in `block in execute_hook'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:62:in `with_execution_control'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:67:in `execute_hook'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:52:in `block in run_load_hooks'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:51:in `each'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/lazy_load_hooks.rb:51:in `run_load_hooks'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/base.rb:327:in `&lt;module:ActiveRecord&gt;'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/base.rb:27:in `&lt;top (required)&gt;'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/query_cache.rb:31:in `run'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:28:in `before'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:429:in `block in make_lambda'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:201:in `block (2 levels) in halting'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:607:in `block (2 levels) in default_terminator'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:606:in `catch'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:606:in `block in default_terminator'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:202:in `block in halting'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:514:in `block in invoke_before'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:514:in `each'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:514:in `invoke_before'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:134:in `run_callbacks'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:111:in `run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:73:in `block in run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:70:in `tap'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:70:in `run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionpack-6.0.1/lib/action_dispatch/middleware/executor.rb:12:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionpack-6.0.1/lib/action_dispatch/middleware/static.rb:126:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionpack-6.0.1/lib/action_dispatch/middleware/host_authorization.rb:83:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/webpacker-4.2.0/lib/webpacker/dev_server_proxy.rb:23:in `perform_request'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/rack-proxy-0.6.5/lib/rack/proxy.rb:57:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/railties-6.0.1/lib/rails/engine.rb:526:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/configuration.rb:228:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/server.rb:667:in `handle_request'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/server.rb:470:in `process_client'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/server.rb:328:in `block in run'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/thread_pool.rb:134:in `block in spawn_thread'\n</code></pre>\n\n<p>Here is what I have in my gemfile for SQLite3:</p>\n\n<pre><code>gem 'sqlite3', git: \"https://github.com/larskanis/sqlite3-ruby\", branch: \"add-gemspec\"\n</code></pre>\n\n<p>I'm running these versions:</p>\n\n<pre><code>$ sqlite3 --version\n3.30.1\n\n$ rails -v\nRails 6.0.1\n\n$ ruby -v\nruby 2.6.5p114\n</code></pre>\n\n<p>I have been trying to start a Rails server for the past three days and this is the furthest I have gotten. I guess there is a discrepancy between what is in my gemfile and whatever else it's checking. I'm trying to follow a YouTube tutorial for making my first application.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1575090258, "post_id": 59113292, "comment_id": 104457558, "body": "missing the assignment equal sign (<code>states = {</code> instead of <code>states {</code>)"}, {"owner": {"reputation": 1, "user_id": 12425588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83fdf12a9620e863c61530b5f963a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "IlyesHadji", "link": "https://stackoverflow.com/users/12425588/ilyeshadji"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1575090708, "post_id": 59113292, "comment_id": 104457619, "body": "@SimpleLime yep I feel dumb now haha Thank you"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575091957, "post_id": 59113292, "comment_id": 104457797, "body": "Welcome to SO! Please read &quot;<a href=\"https://meta.stackoverflow.com/questions/260648/stack-overflow-question-checklist\">Stack Overflow question checklist</a>&quot; and  &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>&quot; including all linked pages. The steps listed in those will go a long way toward avoiding this sort of mistake."}], "answers": [{"comments": [{"owner": {"reputation": 6361, "user_id": 2097529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QnP8n.jpg?s=128&g=1", "display_name": "Kick Buttowski", "link": "https://stackoverflow.com/users/2097529/kick-buttowski"}, "edited": false, "score": 0, "creation_date": 1575091314, "post_id": 59113402, "comment_id": 104457705, "body": "interesting.... are not having paranteces optional in ruby?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1575100603, "post_id": 59113402, "comment_id": 104459132, "body": "No, parentheses are not not really optional in Ruby. You can leave them out in many cases and Ruby will still understand but not always."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1575090990, "creation_date": 1575090990, "answer_id": 59113402, "question_id": 59113292, "link": "https://stackoverflow.com/questions/59113292/getting-an-error-when-declaring-hash-on-ruby/59113402#59113402", "title": "Getting an error when declaring Hash on Ruby", "body": "<p>There is an ambiguity between blocks and <code>Hash</code> literals when passing a <code>Hash</code> literal as the only argument to message send without using parentheses.</p>\n\n<p>I.e. when you write something like </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>foo {\n  # something\n}\n</code></pre>\n\n<p>It could either mean that you are sending the message <code>foo</code> and passing a block, or passing a <code>Hash</code>. It will be interpreted by Ruby as passing a block, so Ruby expects <code># something</code> to be an <em>expression</em> or a sequence of expressions.</p>\n\n<p>In order to make it clear to Ruby that you mean to pass a <code>Hash</code>, you should use parentheses to make it clear that the curly braces are inside the argument list:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>states({\n  \"Pennsylvania\" =&gt; \"PA\",\n  \"Quebec\" =&gt; \"MTL\"\n})\n\nputs states[\"Pennsylvania\"]\n# PA\n</code></pre>\n\n<p>Of course, this assumes a suitable definition of <code>states</code>, something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>states_cache = {}\ndefine_method(:states) do |states = (states_not_passed = true; nil)|\n  return states_cache.dup if states_not_passed\n  states_cache = states_cache.merge(states).freeze\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12425588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83fdf12a9620e863c61530b5f963a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "IlyesHadji", "link": "https://stackoverflow.com/users/12425588/ilyeshadji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "closed_date": 1575094486, "answer_count": 1, "score": -2, "last_activity_date": 1575090990, "creation_date": 1575089780, "question_id": 59113292, "link": "https://stackoverflow.com/questions/59113292/getting-an-error-when-declaring-hash-on-ruby", "closed_reason": "Not suitable for this site", "title": "Getting an error when declaring Hash on Ruby", "body": "<p>I am currently learning Ruby, and on the tutorial the way to declare an hash is like this:</p>\n\n<pre><code>states {\n  \"Pennsylvania\" =&gt; \"PA\",\n  \"Quebec\" =&gt; \"MTL\"\n}\n\nputs states[\"Pennsylvania\"]\n</code></pre>\n\n<p>The error message gives me that:</p>\n\n<pre><code>[Running] ruby \"c:\\Users\\ilyes\\OneDrive\\Bureau\\Concordia\\2nd Year\\Fall 2019\\COMP 348\\RubyPrograms\\practice.rb\"\nc:/Users/ilyes/OneDrive/Bureau/Concordia/2nd Year/Fall 2019/COMP 348/RubyPrograms/practice.rb:2: syntax error, unexpected =&gt;, expecting '}'\n  :Pennsylvania =&gt; \"PA\",\n                ^~\nc:/Users/ilyes/OneDrive/Bureau/Concordia/2nd Year/Fall 2019/COMP 348/RubyPrograms/practice.rb:2: syntax error, unexpected ',', expecting end-of-input\n  :Pennsylvania =&gt; \"PA\",\n                       ^\n\n[Done] exited with code=1 in 0.171 seconds\n</code></pre>\n\n<p>I don't understand why since I have been following what he says exactly\nI am currently using VSC since atom doesn't work at all.</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "watir"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12395759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a06d8abdfe0b41b3e17c41a04e23ab?s=128&d=identicon&r=PG&f=1", "display_name": "Truman", "link": "https://stackoverflow.com/users/12395759/truman"}, "edited": false, "score": 0, "creation_date": 1575264868, "post_id": 59121879, "comment_id": 104494061, "body": "Thank you @Rajagopalan. That resolved the warning. On the other hand, according to <a href=\"https://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Chrome/Service\" rel=\"nofollow noreferrer\">rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Chro&zwnj;&#8203;me/&hellip;</a> the Service class is private. Is it possible the class is no longer private and the docs are not updated? Or is using a private class &quot;safer&quot; than a deprecated feature?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 3, "user_id": 12395759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a06d8abdfe0b41b3e17c41a04e23ab?s=128&d=identicon&r=PG&f=1", "display_name": "Truman", "link": "https://stackoverflow.com/users/12395759/truman"}, "edited": false, "score": 0, "creation_date": 1575265369, "post_id": 59121879, "comment_id": 104494184, "body": "driver_path is the class method which comes under Service which is open to access, Service class comes under <code>module Selenium   module WebDriver     module Chrome       class Service &lt; WebDriver::Service</code> Since there is a depreciation message, it&#39;s apparently they have changed something and I was not aware of what change it is."}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 2, "last_activity_date": 1575164867, "creation_date": 1575164867, "answer_id": 59121879, "question_id": 59113263, "link": "https://stackoverflow.com/questions/59113263/ruby-selenium-warning-that-driver-path-is-deprecated/59121879#59121879", "title": "Ruby Selenium - warning that :driver_path is deprecated", "body": "<p>You can avoid this error by explicitly assigning the driver_path variable even before you instantiate the driver variable. Look at the following code</p>\n\n<pre><code>require 'selenium-webdriver'\nSelenium::WebDriver::Chrome::Service.driver_path = \"C:/Ruby26/chromedriver.exe\"\ndriver = Selenium::WebDriver.for :chrome\ndriver.manage.timeouts.implicit_wait = 10\ndriver.navigate.to(\"https://www.google.com/\")\ndriver.find_element(name: 'q').send_keys 'raja'\n</code></pre>\n\n<p>This code doesn't give that warning. Because I assign that value <code>Selenium::WebDriver::Chrome::Service.driver_path = \"C:/Ruby26/chromedriver.exe\"</code> before I create the drive. </p>\n"}], "owner": {"reputation": 3, "user_id": 12395759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a06d8abdfe0b41b3e17c41a04e23ab?s=128&d=identicon&r=PG&f=1", "display_name": "Truman", "link": "https://stackoverflow.com/users/12395759/truman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1072, "favorite_count": 0, "accepted_answer_id": 59121879, "answer_count": 1, "score": 0, "last_activity_date": 1575164867, "creation_date": 1575089201, "last_edit_date": 1575100813, "question_id": 59113263, "link": "https://stackoverflow.com/questions/59113263/ruby-selenium-warning-that-driver-path-is-deprecated", "title": "Ruby Selenium - warning that :driver_path is deprecated", "body": "<p>Using Ruby selenium-webdriver 3.142.6</p>\n\n<p>My tests work, but at the start of the run it displays the warning</p>\n\n<pre><code>WARN Selenium [DEPRECATION] :driver_path is deprecated. Use :service with an instance of Selenium::WebDriver::Service instead.\n</code></pre>\n\n<p>According to Ruby docs Selenium::WebDriver::Service is a private API. </p>\n\n<p>Searching the web for articles related to the warning has references to Capybara, RoR, and chromedriver-help, none of which I\u2019m using. I've tried 'gem install webdrivers' but that fails.</p>\n\n<p>Any recommendations on the path to take: ignore the deprecation message, or use the private Service class (and if so how to use it), or attempt to replace selenium-webdriver with webdrivers, or something else?</p>\n\n<p>Here is the code that successfully creates the Selenium driver with the warning</p>\n\n<pre><code>require \"selenium-webdriver\"\nrequire \"test/unit\"\nrequire \"byebug\"\n\n...\n\nclass GoogleTest &lt; Test::Unit::TestCase\n\n  def setup\n\n    case $browser_arg\n    when 'chrome'\n        browser = :chrome\n        driver_path = '/selenium_browser_drivers/chromedriver'\n    when 'firefox'\n        browser = :firefox\n        driver_path = '/selenium_browser_drivers/geckodriver'\n    else\n          raise ArgumentError.new(\"Unexpected browser argument '#{$browser_arg}'\") \n          exit      \n    end\n      @se = Selenium::WebDriver.for browser, :driver_path =&gt; driver_path\n\n  end\n...\n</code></pre>\n\n<p>Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'selenium-webdriver', '~&gt; 3.142.0'\ngem 'test-unit', '~&gt; 3.3.0'\ngem 'byebug', '~&gt; 9.1.0'\n</code></pre>\n\n<p>Gemfile.lock</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    byebug (9.1.0)\n    childprocess (3.0.0)\n    power_assert (1.1.5)\n    rubyzip (2.0.0)\n    selenium-webdriver (3.142.6)\n      childprocess (&gt;= 0.5, &lt; 4.0)\n      rubyzip (&gt;= 1.2.2)\n    test-unit (3.3.4)\n      power_assert\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  byebug (~&gt; 9.1.0)\n  selenium-webdriver (~&gt; 3.142.0)\n  test-unit (~&gt; 3.3.0)\n\nBUNDLED WITH\n   2.0.2\n</code></pre>\n\n<p>Output from the command gem list</p>\n\n<pre><code>backports (3.15.0)\nbigdecimal (default: 1.3.4)\nbuilder (3.2.3)\nbundler (2.0.2, 1.16.1, default: 1.16.0)\nbyebug (9.1.0)\nchildprocess (3.0.0, 0.8.0)\ncmath (default: 1.0.0)\ncsv (default: 1.0.0)\ncucumber (3.1.2)\ncucumber-core (3.2.1)\ncucumber-expressions (6.0.1)\ncucumber-tag_expressions (1.1.1)\ncucumber-wire (0.0.1)\ndate (default: 1.0.0)\ndbm (default: 1.0.0)\ndid_you_mean (1.2.0)\ndiff-lcs (1.3)\netc (default: 1.0.0)\nfcntl (default: 1.0.0)\nffi (1.9.18)\nfiddle (default: 1.0.0)\nfileutils (default: 1.0.2)\ngherkin (5.1.0)\nio-console (default: 0.4.6)\nipaddr (default: 1.2.0)\njson (default: 2.1.0)\nminitest (5.10.3)\nmulti_json (1.13.1)\nmulti_test (0.1.2)\nnet-telnet (0.1.1)\nopenssl (default: 2.1.0)\npower_assert (1.1.5, 1.1.1)\npsych (default: 3.0.2)\nrake (12.3.0)\nrdoc (default: 6.0.1)\nrspec (3.9.0, 3.7.0, 3.6.0)\nrspec-core (3.9.0, 3.7.1, 3.6.0)\nrspec-expectations (3.9.0, 3.7.0, 3.6.0)\nrspec-mocks (3.9.0, 3.7.0, 3.6.0)\nrspec-support (3.9.0, 3.7.1, 3.7.0, 3.6.0)\nrubyzip (2.0.0, 1.2.1)\nscanf (default: 1.0.0)\nsdbm (default: 1.0.0)\nselenium-webdriver (3.142.6, 3.8.0)\nstringio (default: 0.0.1)\nstrscan (default: 1.0.0)\ntest-unit (3.3.4, 3.2.7)\nwebrick (default: 1.4.2)\nxmlrpc (0.3.0)\nzlib (default: 1.0.0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "timezone"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1575092714, "post_id": 59113236, "comment_id": 104457884, "body": "Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>&quot; and all their linked pages. We need the minimal code in the question itself that demonstrates the problem. We <i>can</i> work it out from the IRB session but that&#39;s not what SO wants."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1575095064, "post_id": 59113236, "comment_id": 104458219, "body": "There is no <code>in_time_zone</code> method in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 2, "last_activity_date": 1575374459, "creation_date": 1575374459, "answer_id": 59156649, "question_id": 59113236, "link": "https://stackoverflow.com/questions/59113236/in-time-zone-changes-timezone-for-past-date/59156649#59156649", "title": "&quot;in_time_zone&quot; changes timezone for past date", "body": "<p>It's because of summer and winter time. This year EDT was changed to EST on 3rd November. So it's not a bug, it's a feature :)</p>\n"}], "owner": {"reputation": 408, "user_id": 8051788, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/fYT2M.jpg?s=128&g=1", "display_name": "Akash Kinwad", "link": "https://stackoverflow.com/users/8051788/akash-kinwad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59156649, "answer_count": 1, "score": 0, "last_activity_date": 1575374459, "creation_date": 1575088886, "question_id": 59113236, "link": "https://stackoverflow.com/questions/59113236/in-time-zone-changes-timezone-for-past-date", "title": "&quot;in_time_zone&quot; changes timezone for past date", "body": "<p>I am using <a href=\"https://apidock.com/rails/DateTime/in_time_zone\" rel=\"nofollow noreferrer\">in_time_zone</a> method of ruby to convert the time in required timezone.</p>\n\n<p>When the date is in past it is changing the Time Zone which is unexpected.</p>\n\n<p><strong>process_date</strong> : is column of table where I store the DateTime </p>\n\n<p>Here is snippet</p>\n\n<pre><code>2.5.5 :500 &gt; @time_zone\n =&gt; \"Eastern Time (US &amp; Canada)\" \n2.5.5 :501 &gt; future_transaction.process_date\n =&gt; Sat, 30 Nov 2019 03:59:11 UTC +00:00 \n2.5.5 :502 &gt; DateTime.parse(future_transaction.process_date.to_s).in_time_zone(@time_zone).strftime(\"%m/%d/%Y %r %Z\")\n =&gt; \"11/29/2019 10:59:11 PM EST\" # &lt;&lt; here it is EST\n2.5.5 :503 &gt; past_transaction.process_date\n =&gt; Sat, 02 Nov 2019 09:38:00 UTC +00:00 \n2.5.5 :504 &gt; DateTime.parse(past_transaction.process_date.to_s).in_time_zone(@time_zone).strftime(\"%m/%d/%Y %r %Z\")\n =&gt; \"11/02/2019 05:38:00 AM EDT\" # &lt;&lt; here it is EDT becasue of past date\n2.5.5 :505 &gt;\n</code></pre>\n\n<p>Can anybody tell me what's wrong with my approach .</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 408, "user_id": 8051788, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/fYT2M.jpg?s=128&g=1", "display_name": "Akash Kinwad", "link": "https://stackoverflow.com/users/8051788/akash-kinwad"}, "edited": false, "score": 0, "creation_date": 1575090446, "post_id": 59113103, "comment_id": 104457576, "body": "You should display assignments only if they are present."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10553382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156409336731273/picture?type=large", "display_name": "Daniel Thomas", "link": "https://stackoverflow.com/users/10553382/daniel-thomas"}, "edited": false, "score": 1, "creation_date": 1575334186, "post_id": 59113344, "comment_id": 104522979, "body": "Thanks @ZedTuX !! I took your advice and added the if/else and it works perfectly"}], "tags": [], "owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "is_accepted": true, "score": 1, "last_activity_date": 1575090477, "creation_date": 1575090477, "answer_id": 59113344, "question_id": 59113103, "link": "https://stackoverflow.com/questions/59113103/ruby-on-rails-undefined-method-course-name-for-nilnilclass/59113344#59113344", "title": "Ruby on Rails Undefined method &#39;course_name&#39; for nil:NilClass", "body": "<p><code>@course</code> come from your <code>show</code> controller action, where you're trying to find it by its ID, but you're not checking if you found it or not.</p>\n\n<p>In the case a <code>Course</code> is mandatory for a <code>Student</code>, add a presence validation on <code>:course_id</code> on the <code>Student</code> model, and when you create the student, you'll get an error when no course is assigned.</p>\n\n<p>In the case <code>Course</code> is not mandatory for a <code>Student</code>, you could add a <code>&lt;% if @course %&gt;</code> block in your view file, and in the <code>&lt;% else %&gt;</code> part showing a message. For example:</p>\n\n<pre><code>&lt;% if @course %&gt;\n  &lt;div class='container text-center'&gt;\n    &lt;h2&gt;&lt;%= @course.course_name %&gt;&lt;/h2&gt;\n    &lt;% @course.assignments.all.each do |assignment| %&gt;\n      &lt;%= assignment.title %&gt;, &lt;%= assignment.course.course_name %&gt;, &lt;%= assignment.due_date %&gt; \n      &lt;br&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% else %&gt;\n  &lt;div class='container text-center'&gt;\n    &lt;p&gt;This student has no course yet.&lt;/p&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 408, "user_id": 8051788, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/fYT2M.jpg?s=128&g=1", "display_name": "Akash Kinwad", "link": "https://stackoverflow.com/users/8051788/akash-kinwad"}, "is_accepted": false, "score": 1, "last_activity_date": 1575090830, "creation_date": 1575090830, "answer_id": 59113383, "question_id": 59113103, "link": "https://stackoverflow.com/questions/59113103/ruby-on-rails-undefined-method-course-name-for-nilnilclass/59113383#59113383", "title": "Ruby on Rails Undefined method &#39;course_name&#39; for nil:NilClass", "body": "<p>Also modify your html code as below and show assignments only if they are present.</p>\n\n<p>Also no need to write <strong>.all</strong> on associated objects.</p>\n\n<pre><code>&lt;% if @course %&gt;\n  &lt;div class='container text-center'&gt;\n    &lt;h2&gt;&lt;%= @course.course_name %&gt;&lt;/h2&gt;\n    &lt;% if @course.assignment.any? %&gt;\n      &lt;% @course.assignments.each do |assignment| %&gt;\n        &lt;%= assignment.title %&gt;, &lt;%= assignment.course.course_name %&gt;, &lt;%= assignment.due_date %&gt; \n        &lt;br&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% else %&gt;\n  &lt;div class='container text-center'&gt;\n    &lt;p&gt;This student has no course yet.&lt;/p&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10553382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156409336731273/picture?type=large", "display_name": "Daniel Thomas", "link": "https://stackoverflow.com/users/10553382/daniel-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 59113344, "answer_count": 2, "score": 0, "last_activity_date": 1575090830, "creation_date": 1575086608, "question_id": 59113103, "link": "https://stackoverflow.com/questions/59113103/ruby-on-rails-undefined-method-course-name-for-nilnilclass", "title": "Ruby on Rails Undefined method &#39;course_name&#39; for nil:NilClass", "body": "<p>I am creating a simple student planner app. If I try to view the course (course#show) assignments before adding an assignment to the course I get an error thrown instead of an empty list with just the course_name printed at the top.</p>\n\n<p>The error reads:\n\"undefined method `course_name' for nil:NilClass\"</p>\n\n<p>My course#show page is where the error is being thrown on line 2:</p>\n\n<pre><code>&lt;div class='container text-center'&gt;\n &lt;h2&gt; &lt;%= @course.course_name %&gt; &lt;/h2&gt;\n &lt;% @course.assignments.all.each do |assignment| %&gt;\n  &lt;%= assignment.title %&gt;, &lt;%= assignment.course.course_name %&gt;, &lt;%= assignment.due_date %&gt; \n  &lt;br&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My courses_controller:</p>\n\n<pre><code>class CoursesController &lt; ApplicationController\n def new\n  @course = Course.new\n end\n def create\n  @course = Course.create(course_params)\n  if @course.save\n   redirect_to student_courses_path(@student)\n  else\n   render :new\n  end\n end\ndef index\n  student = Student.find_by(id: params[:student_id])\n  @courses = Course.all\nend\ndef show\n  student = Student.find_by(id: params[:student_id])\n  @course = student.courses.find_by(id: params[:id])\nend\ndef edit\nend\ndef update\nend\nprivate\n  def course_params\n    params.require(:course).permit(:course_name)\n  end\nend\n</code></pre>\n\n<p>Course model:</p>\n\n<pre><code>class Course &lt; ActiveRecord::Base\n has_many :assignments\n has_many :students, through: :assignments\n validates :course_name, presence: true\nend\n</code></pre>\n\n<p>Any thoughts on what's going on? Any advice is much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 497, "user_id": 3979725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj52I.jpg?s=128&g=1", "display_name": "David Lilue", "link": "https://stackoverflow.com/users/3979725/david-lilue"}, "edited": false, "score": 0, "creation_date": 1575086273, "post_id": 59112791, "comment_id": 104457049, "body": "Possibly the error is because <code>@review</code> is not referring to <code>review</code> in the line <code>reviews: @ship.reviews.preload(:user_profile).map do |review|</code>. Try removing the <code>@</code> to refer the variable in the scope of the <code>map</code>. The <code>@</code> is for instance variables of a class."}, {"owner": {"reputation": 1, "user_id": 12458988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7a5efb197039d63cff63e3fbe1f2c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason_C", "link": "https://stackoverflow.com/users/12458988/jason-c"}, "reply_to_user": {"reputation": 497, "user_id": 3979725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj52I.jpg?s=128&g=1", "display_name": "David Lilue", "link": "https://stackoverflow.com/users/3979725/david-lilue"}, "edited": false, "score": 0, "creation_date": 1575132695, "post_id": 59112791, "comment_id": 104466449, "body": "thanks.           &#39;comments: review.comments.map do |comment|&#39; worked"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12458988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7a5efb197039d63cff63e3fbe1f2c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason_C", "link": "https://stackoverflow.com/users/12458988/jason-c"}, "edited": false, "score": 0, "creation_date": 1575132739, "post_id": 59116009, "comment_id": 104466468, "body": "thanks. &#39;comments: review.comments.map do |comment|&#39; work"}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": false, "score": 0, "last_activity_date": 1575115600, "creation_date": 1575115600, "answer_id": 59116009, "question_id": 59112791, "link": "https://stackoverflow.com/questions/59112791/undefined-method-comment-for-nilnilclass-ruby-on-rails/59116009#59116009", "title": "undefined method `comment&#39; for nil:NilClass (ruby on rails)", "body": "<p>Remove <code>.preload(:commment)</code> from <code>@review.comments.preload(:comment).map do |comment|</code>. You don't need it at all.</p>\n"}], "owner": {"reputation": 1, "user_id": 12458988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7a5efb197039d63cff63e3fbe1f2c?s=128&d=identicon&r=PG&f=1", "display_name": "Jason_C", "link": "https://stackoverflow.com/users/12458988/jason-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575115600, "creation_date": 1575082720, "last_edit_date": 1575092845, "question_id": 59112791, "link": "https://stackoverflow.com/questions/59112791/undefined-method-comment-for-nilnilclass-ruby-on-rails", "title": "undefined method `comment&#39; for nil:NilClass (ruby on rails)", "body": "<p>In Ruby on Rails I'm trying to render a JSON file that will map each comment to a review. Each review has many comments but each comment belongs to a review. </p>\n\n<p>Here is my controller to generate a JSON file: </p>\n\n<pre><code> reviews: @ship.reviews.preload(:user_profile).map do |review|\n        {\n          id: review.id,\n          body: review.body,\n          rating: review.rating,\n          user_profile: review.user_profile,\n          comments: @review.comments.preload(:comment).map do |comment|\n            {\n              id: comment.id,\n              body: comment.body,\n              user_profile: comment.user_profile_id,\n            }\n          end\n        }\n</code></pre>\n\n<p>Here is the comment model:</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :user_profile\n  belongs_to :review\nend\n</code></pre>\n\n<p>Here is the review.rb model:</p>\n\n<pre><code>class Review &lt; ApplicationRecord\n  belongs_to :user_profile\n  belongs_to :ship\n  has_many :comments\n  has_many :helpfuls\nend\n</code></pre>\n\n<p>However my JSON file returns an error:</p>\n\n<pre><code>undefined method `comment' for nil:NilClass\n</code></pre>\n\n<p>on this line:</p>\n\n<pre><code>comments: @review.comment.preload(:comment).map do |comment|\n</code></pre>\n"}]