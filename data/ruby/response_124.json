[{"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 3, "creation_date": 1495663720, "post_id": 44169171, "comment_id": 75354397, "body": "why not <code>words.each { |w| p sentence.include?(w) }</code>?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1495664984, "post_id": 44169171, "comment_id": 75354813, "body": "The way you split <code>sentence</code> won&#39;t match with <code>&quot;rick james&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 5225325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9c806a8d3dfa2a92576c328f64fc3e?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/5225325/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1495675662, "creation_date": 1495675662, "answer_id": 44170887, "question_id": 44169171, "link": "https://stackoverflow.com/questions/44169171/ruby-check-if-sentence-has-words-from-array-which-are-bigram-trigram/44170887#44170887", "title": "Ruby check if sentence has words from array which are bigram/trigram", "body": "<p>Perhaps you can search (.include?) or (.include_in?) the sentence for each word in the array. This way you will search for .include?(\"rick james\")</p>\n"}, {"comments": [{"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1495878386, "post_id": 44172791, "comment_id": 75441870, "body": "The sentence needs to be split in unigrams, the way suggested in the ques. If sentence has matching tri or bi word phrases, it needs to be <code>true</code> for each corresponding uni gram words when split. Checking them for tri/bi/uni in that order wud be too consuming."}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 2, "last_activity_date": 1495689533, "creation_date": 1495689533, "answer_id": 44172791, "question_id": 44169171, "link": "https://stackoverflow.com/questions/44169171/ruby-check-if-sentence-has-words-from-array-which-are-bigram-trigram/44172791#44172791", "title": "Ruby check if sentence has words from array which are bigram/trigram", "body": "<p>If your domain is bigrams/trigrams you should split the sentence to bigrams/trigrams. </p>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumareable#each_cons(n)</a> might help you (I'll take n=2 for bigrams)</p>\n\n<pre><code>sentence = \"say hello to rick james but not rick and james\"\nsplit.each_cons(2) {|e| puts \"#{e.join(\" \")}\" }\n\n# say hello\n# hello to\n# to rick\n# rick james\n# james but\n# but not\n# not rick\n# rick and\n# and james\n</code></pre>\n\n<p>And if bi/trigrams are included as a whole, it means its lexems are also included. </p>\n\n<pre><code>words = [\"foo\", \"bar\", \"spooky\", \"rick james\"]   \nsentence.split.each_cons(2) do |e| \n  puts \"#{e} =&gt; #{words.include?(e)||words.include?(e.join(\" \"))}\"\nend\n\n# [\"say\", \"hello\"] =&gt; false\n# [\"hello\", \"to\"] =&gt; false\n# [\"to\", \"rick\"] =&gt; false\n# [\"rick\", \"james\"] =&gt; true\n# [\"james\", \"but\"] =&gt; false\n# [\"but\", \"not\"] =&gt; false\n# [\"not\", \"rick\"] =&gt; false\n# [\"rick\", \"and\"] =&gt; false\n# [\"and\", \"james\"] =&gt; false\n</code></pre>\n\n<p>then you can take those array elements and return true/flase for each of them</p>\n"}], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495689533, "creation_date": 1495663204, "question_id": 44169171, "link": "https://stackoverflow.com/questions/44169171/ruby-check-if-sentence-has-words-from-array-which-are-bigram-trigram", "title": "Ruby check if sentence has words from array which are bigram/trigram", "body": "<p>I want to check if a sentence has an array item, <em>which is a bigram/trigram</em>, from <code>words</code> array, and the bigram/trigram comprising the array item are together in the sentence. </p>\n\n<p><code>words = [\"foo\", \"bar\", \"spooky\", \"rick james\"]</code><br>\n <code>sentence = say hello to rick james but not rick and james</code>  </p>\n\n<p>Since <code>rick james</code> is an array item and is <strong>together</strong>,<br>\nExpected output should be</p>\n\n<pre><code>false #say\nfalse #hello\nfalse #to\ntrue #rick &lt;---\ntrue #james &lt;---\nfalse #but\nfalse #not\nfalse #rick &lt;---\nfalse #and\nfalse #james &lt;---\n</code></pre>\n\n<p>I tried this</p>\n\n<pre><code># BASIC EXAMPLE\nwords = [\"foo\", \"bar\", \"spooky\", \"rick james\"]\n\nsentence = \"something spooky rick this way comes, rick james\"\n\nsentence.split.each {|s| puts words.include?(s) }\n\n# OUTPUT                      #EXPECTED OUTPUT\nfalse #something              false\ntrue #spooky &lt;---             true  #spooky\nfalse #rick                   false  #rick\nfalse #this                   false\nfalse #way                    false\nfalse #comes                  false\nfalse #rick                   true  #rick &lt;---\nfalse #james                  true  #james &lt;---\n</code></pre>\n\n<p>What to modify to include the expected output</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 5085573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGODz.jpg?s=128&g=1", "display_name": "saga", "link": "https://stackoverflow.com/users/5085573/saga"}, "is_accepted": false, "score": 0, "last_activity_date": 1495684058, "creation_date": 1495684058, "answer_id": 44171946, "question_id": 44168999, "link": "https://stackoverflow.com/questions/44168999/trick-to-delete-session-after-going-back-in-browser/44171946#44171946", "title": "Trick to delete session after going back in browser", "body": "<p>Two possible solutions with the information you've provided:</p>\n\n<ol>\n<li>Set a <code>before_action</code> on the index to clear the recipe id from the session.</li>\n<li>Pass the recipe id to the show page via params then set it to an instance variable for use in the view.</li>\n</ol>\n\n<p>I would choose the latter of these if possible. More info would allow a better answer.</p>\n"}, {"tags": [], "owner": {"reputation": 1851, "user_id": 5535989, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1151037578257714/picture?type=large", "display_name": "Van_Paitin", "link": "https://stackoverflow.com/users/5535989/van-paitin"}, "is_accepted": false, "score": 0, "last_activity_date": 1498169744, "creation_date": 1498169744, "answer_id": 44710170, "question_id": 44168999, "link": "https://stackoverflow.com/questions/44168999/trick-to-delete-session-after-going-back-in-browser/44710170#44710170", "title": "Trick to delete session after going back in browser", "body": "<p>So I solved it by checking if the <code>request.referer</code> is the index page's url. If it is, then I clear the session.</p>\n\n<p>Moving forward, you can handle cases like this by checking the header key <code>(request.headers[\"HTTP_REFERER\"])</code> (also gotten by calling <code>request.referer</code>). This way regardless of the method you used to get to a page, you can always get its fidelity.</p>\n"}], "owner": {"reputation": 1851, "user_id": 5535989, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1151037578257714/picture?type=large", "display_name": "Van_Paitin", "link": "https://stackoverflow.com/users/5535989/van-paitin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498169744, "creation_date": 1495662410, "question_id": 44168999, "link": "https://stackoverflow.com/questions/44168999/trick-to-delete-session-after-going-back-in-browser", "title": "Trick to delete session after going back in browser", "body": "<p>I have an issue. I have a list of recipes in my recipes index page. The idea is that when you click on a particular recipe, it carries you to the show page and stores the recipe id in session. The presence/absence of the id in session is integral to the workflow of the program. The session gets cleared when you create a sub-recipe or revisit the index page. However, when you click back on the browser (<code>to recipes/index</code>) without creating a resource, the recipe id remains in session and you no longer desire the value in the session. This causes the program to run into errors. How do I do it that the clicking of the back button also deletes the session</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "installation"], "answers": [{"tags": [], "owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "is_accepted": false, "score": 0, "last_activity_date": 1495660902, "last_edit_date": 1495660902, "creation_date": 1495660541, "answer_id": 44168592, "question_id": 44168544, "link": "https://stackoverflow.com/questions/44168544/installing-new-version-of-rails/44168592#44168592", "title": "Installing new version of rails", "body": "<p>If you plan on sticking with Rails you need to get a version manager program. The two most popular are RVM and Rbenv. I use RVM and it is very good. With that you can set up multiple Ruby and Rails environments with different Ruby, Rails and gem versions that apply to specific apps. Otherwise you will run into problems with multiple apps using different versions.</p>\n\n<p>Here's the link <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">https://rvm.io/</a></p>\n"}, {"tags": [], "owner": {"reputation": 600, "user_id": 5994561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-VGTzdts3mMw/AAAAAAAAAAI/AAAAAAAAADY/6Qwn_AVjnQI/photo.jpg?sz=128", "display_name": "sammms", "link": "https://stackoverflow.com/users/5994561/sammms"}, "is_accepted": true, "score": 0, "last_activity_date": 1495660932, "creation_date": 1495660932, "answer_id": 44168662, "question_id": 44168544, "link": "https://stackoverflow.com/questions/44168544/installing-new-version-of-rails/44168662#44168662", "title": "Installing new version of rails", "body": "<p>You can install the new version right in your home directory, this is perfectly acceptable and even common.  The Rails executable (the file run by <code>rails new myCoolThing</code>) will default to the newest version of rails when you create a new project.  You can override this if you like by passing the version as an argument <code>rails &lt;version&gt; new myOldSchoolThing</code> when you create a new project.</p>\n"}], "owner": {"reputation": 75, "user_id": 7810927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a8f8f592c64abde6de0f0ecb3f2e322?s=128&d=identicon&r=PG&f=1", "display_name": "Nehemiah Mekonnen", "link": "https://stackoverflow.com/users/7810927/nehemiah-mekonnen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 44168662, "answer_count": 2, "score": 1, "last_activity_date": 1495660932, "creation_date": 1495660319, "question_id": 44168544, "link": "https://stackoverflow.com/questions/44168544/installing-new-version-of-rails", "title": "Installing new version of rails", "body": "<p>When I installed rails at an earlier period from the command line, I did it from my home directory. My question is, when I install a newer version, should I create a new project and install the new version in that directory? If I install the new version from the home directory and then create a new project directory and create a new rails project with the version specified, will it cause problems?  </p>\n"}, {"tags": ["sql", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1495660549, "post_id": 44168477, "comment_id": 75353148, "body": "Ruby has the function, so why not do this in Ruby? Your Postgres might have V8 support, so you could <i>theoretically</i> port it to JavaScript if you wanted, but that sounds like a lot of work."}, {"owner": {"reputation": 561, "user_id": 1641480, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e7a16200389741e15ce75789715ee26f?s=128&d=identicon&r=PG", "display_name": "Shawn Deprey", "link": "https://stackoverflow.com/users/1641480/shawn-deprey"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1495660885, "post_id": 44168477, "comment_id": 75353323, "body": "I do have a script which performs this function in Ruby, however, this script will take &gt;12 hours to run on my production dataset. I&#39;ve seen this problem quite a bit on many projects and would rather create much faster SQL scripts/commands to get production datasets to clean states as fast as possible. Ruby scripts are great, but when you have an ORM siting over a DB it&#39;s actually quite slow compared to lower level database scripts. I really want to find a way to solve that problem."}, {"owner": {"reputation": 1341, "user_id": 2033800, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2b0936d3f063bc16135077cf51461b7b?s=128&d=identicon&r=PG", "display_name": "nicholasnet", "link": "https://stackoverflow.com/users/2033800/nicholasnet"}, "edited": false, "score": 0, "creation_date": 1495661336, "post_id": 44168477, "comment_id": 75353529, "body": "As far as I know Postgresql does not have such native function but you can mimic it by using concatenation and regex replace function."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495661916, "post_id": 44168477, "comment_id": 75353771, "body": "There&#39;s a lot of options for <a href=\"https://www.postgresql.org/docs/9.6/static/xplang.html\" rel=\"nofollow noreferrer\">procedural languages in Postgres</a>, so you could experiment with <a href=\"https://github.com/knu/postgresql-plruby\" rel=\"nofollow noreferrer\">pl-ruby</a>. That seems rather drastic for a one-time thing, mind you."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1495662059, "post_id": 44168477, "comment_id": 75353838, "body": "I&#39;m not sure if <code>regexp_replace(lower(name), &#39; &#39;, &#39;-&#39;)</code> would do it, but you never know."}, {"owner": {"reputation": 561, "user_id": 1641480, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e7a16200389741e15ce75789715ee26f?s=128&d=identicon&r=PG", "display_name": "Shawn Deprey", "link": "https://stackoverflow.com/users/1641480/shawn-deprey"}, "edited": false, "score": 0, "creation_date": 1495663979, "post_id": 44168477, "comment_id": 75354473, "body": "Thank you for all the responses!  tadman, I am trying to find some reusable patterns for my team to use in future scripts as well so it might not be overkill to figure this out. I am going to check out pl-ruby.  As for the regex option, I thought about that but there are a lot of unicode values in the data I need to parameterize so I would basically have to just create a parameterize function myself in SQL in order to do this. That might not be a bad option though lol!"}, {"owner": {"reputation": 4577, "user_id": 4147191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zNy4Unw5fq8/AAAAAAAAAAI/AAAAAAAAAP8/kQW6cfxt280/photo.jpg?sz=128", "display_name": "\u0141ukasz Kami\u0144ski", "link": "https://stackoverflow.com/users/4147191/%c5%81ukasz-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1495695226, "post_id": 44168477, "comment_id": 75363277, "body": "While not exactly the same, but you could try <a href=\"https://github.com/petere/pguri\" rel=\"nofollow noreferrer\">pgURI extension</a> that will url encode your string. <code>select uri_escape(&#39;Rising Star&#39;); --Rising%20Star</code>"}], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 1641480, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e7a16200389741e15ce75789715ee26f?s=128&d=identicon&r=PG", "display_name": "Shawn Deprey", "link": "https://stackoverflow.com/users/1641480/shawn-deprey"}, "is_accepted": true, "score": 0, "last_activity_date": 1497025844, "creation_date": 1497025844, "answer_id": 44462707, "question_id": 44168477, "link": "https://stackoverflow.com/questions/44168477/is-there-a-parameterize-function-in-postgresql-like-in-ruby/44462707#44462707", "title": "Is there a parameterize function in PostgreSQL like in Ruby?", "body": "<p>So the solution I found to this problem isn't 100% the answer I was looking for, however, it's a massive performance improvement over any alternatives I could find or figure out.</p>\n\n<pre><code>connection = ActiveRecord::Base.connection\nCompany.all.find_in_batches do |companies|\n  cases = companies.map{|c| \"UPDATE companies set unique_permalink = {c.id}-#{c.name.parameterize}' where id = #{c.id}\"}\n  query = cases.join('; ')\n  connection.execute(query)\nend\n</code></pre>\n\n<p>The performance boost of this solution comes from batching a massive amount of queries in a single SQL statement. It's very performant and took a large process and made it super fast. Hopefully this helps someone out there.</p>\n"}], "owner": {"reputation": 561, "user_id": 1641480, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e7a16200389741e15ce75789715ee26f?s=128&d=identicon&r=PG", "display_name": "Shawn Deprey", "link": "https://stackoverflow.com/users/1641480/shawn-deprey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 2, "accepted_answer_id": 44462707, "answer_count": 1, "score": 0, "last_activity_date": 1497025844, "creation_date": 1495660023, "question_id": 44168477, "link": "https://stackoverflow.com/questions/44168477/is-there-a-parameterize-function-in-postgresql-like-in-ruby", "title": "Is there a parameterize function in PostgreSQL like in Ruby?", "body": "<p>In Ruby, there's a very useful function on string objects which will take a string and parameterize the characters in that string so that can be used in a URL. i.e.:</p>\n\n<pre><code>2.2.2 :001 &gt; \"Rising Star\".parameterize\n  =&gt; \"rising-star\"\n</code></pre>\n\n<p>Is there a comparable function in SQL which will perform this same function on a string?</p>\n\n<p>Use case:</p>\n\n<p>I need to write an SQL script which will do something like the following:</p>\n\n<pre><code>UPDATE companies SET unique_permalink = id + name;\n</code></pre>\n\n<p>If there was a parameterize function in SQL, I would expect I could do the following:</p>\n\n<pre><code>UPDATE companies SET unique_permalink = id + parameterize(name);\n</code></pre>\n\n<p>However, I can't find any kind of function which will perform the operation I need it to perform. Has anyone tackled this challenge before who could help me out?</p>\n\n<p>Much thanks friends!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1495660577, "creation_date": 1495660577, "answer_id": 44168600, "question_id": 44168467, "link": "https://stackoverflow.com/questions/44168467/rails-validation-style-two-invalid-fields-but-only-list-one-error-message/44168600#44168600", "title": "Rails validation: style two invalid fields but only list one error message", "body": "<p>I got a working solution:</p>\n\n<pre><code>def city_presence\n  if city_id.blank? &amp;&amp; city_out_state.blank?\n    errors.add(:city_id, \"A City must be present\")\n    errors.add(:city_out_state, \"\")\n  end\nend\n</code></pre>\n\n<p>And here is the errors partial.  The key is that an error's message does not generate an <code>li</code> if the error's message is not <code>present?</code>:</p>\n\n<pre><code>&lt;% if object &amp;&amp; object.errors.any? %&gt;\n  &lt;div class=\"alert alert-danger\"&gt;\n    &lt;a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\"&gt;&amp;times;&lt;/a&gt;\n\n    &lt;p&gt;&lt;%= pluralize(object.errors.size, \"error\") %&gt; prohibited this record from being saved&lt;/p&gt;\n    &lt;p&gt;There were problems with the following fields:&lt;/p&gt;\n    &lt;ul&gt;\n      &lt;% object.errors.each do |attr, message| %&gt;\n        &lt;% if message.present?  %&gt;\n          &lt;li&gt;\n            &lt;%= message %&gt;\n          &lt;/li&gt;\n        &lt;% end  %&gt;\n      &lt;% end  %&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 44168600, "answer_count": 1, "score": 0, "last_activity_date": 1495660577, "creation_date": 1495659998, "question_id": 44168467, "link": "https://stackoverflow.com/questions/44168467/rails-validation-style-two-invalid-fields-but-only-list-one-error-message", "title": "Rails validation: style two invalid fields but only list one error message", "body": "<p>I have the following custom validation:</p>\n\n<pre><code>def city_presence\n  if city_id.blank? &amp;&amp; city_out_state.blank?\n    errors.add([:city_id, :city_out_state], \"A City must be present\")\n    throw(:abort)\n  end\nend\n</code></pre>\n\n<p>It errors out, but what it is trying to do is this:</p>\n\n<ul>\n<li>See if both <code>city_id</code> and <code>city_out_state</code> are both blank\n\n<ul>\n<li>If so, then add BOTH of those fields to the errors hash in order to provide <em>invalid styling</em> to both fields on the form, but only display <strong>one</strong> error bullet point message.</li>\n</ul></li>\n</ul>\n\n<p>Is there an easy way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "factory-bot", "minitest"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2876886"}, "edited": false, "score": 0, "creation_date": 1495660699, "post_id": 44168368, "comment_id": 75353224, "body": "Ive also tried doing this <code>unless Product.find_by(name: &quot;A Product&quot;) do FactoryGirl.create(:product) end</code> and the same issue occurs"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 7927990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425331290823651/picture?type=large", "display_name": "Riley Thompson", "link": "https://stackoverflow.com/users/7927990/riley-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1495660083, "creation_date": 1495660083, "answer_id": 44168490, "question_id": 44168368, "link": "https://stackoverflow.com/questions/44168368/factorygirl-not-finding-instances-in-db/44168490#44168490", "title": "FactoryGirl not finding instances in DB", "body": "<p>This is just an idea, but try commenting out FactoryGirl.lint in your FactoryGirl config. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2876886"}, "edited": false, "score": 0, "creation_date": 1495660834, "post_id": 44168555, "comment_id": 75353296, "body": "My bad, that was a typo error. my code is actually doing <code>Product.find_by(name: &quot;A Product&quot;)</code> I just fixed that in my original question. But with the &#39;name&#39; declaration in there it is still having the same problem"}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1495663467, "post_id": 44168555, "comment_id": 75354317, "body": "Actually, where did you find that syntax for <code>association</code> on FactoryGirl. I don&#39;t think <code>association</code> takes a block...or at least it is not documented"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2876886"}, "edited": false, "score": 0, "creation_date": 1495664467, "post_id": 44168555, "comment_id": 75354641, "body": "I honestly just tried it based off of how Ruby generally works, and it worked. I needed a way to associate a Model with a User using Devise, but you can&#39;t create a user utilizing devise by simply doing <code>FactoryGirl.create(:user)</code>. Instead you have to go <code>@user_attr = FactoryGirl.attributes_for(:user)</code> followed by &#39;User.create(@user_attr)&#39;. Since the association call wasn&#39;t coming from a factory, I replaced it with a <code>do</code> statement and placed those two calls in it. It works."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2876886"}, "edited": false, "score": 0, "creation_date": 1495664503, "post_id": 44168555, "comment_id": 75354656, "body": "And since it worked with User, I figured it would have to work for others"}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1495665154, "post_id": 44168555, "comment_id": 75354864, "body": "I&#39;m not following your previous comments as they don&#39;t really follow what you&#39;re doing?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2876886"}, "edited": false, "score": 0, "creation_date": 1495814207, "post_id": 44168555, "comment_id": 75423940, "body": "Your first example is working properly, except I changed it to <code>product { Product.first || FactoryGirl.create(:product) }</code> This works best for what I will be doing. Thanks!"}], "tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 1, "last_activity_date": 1495664058, "last_edit_date": 1495664058, "creation_date": 1495660375, "answer_id": 44168555, "question_id": 44168368, "link": "https://stackoverflow.com/questions/44168368/factorygirl-not-finding-instances-in-db/44168555#44168555", "title": "FactoryGirl not finding instances in DB", "body": "<p><strong>Updated</strong></p>\n\n<p>I believe your issue is with the way you're using <code>association</code>. I don't see anywhere that association takes a block the way you're defining it. </p>\n\n<p>What you want to do instead is something like this</p>\n\n<pre><code>factory :cart_item do\n  product { Product.find_by(name: \"A Product\") || association(:product) }       \nend\n</code></pre>\n\n<p>This actually seems wrong since you're creating non-determinism. Instead, you should create a record and assign it directly to the factory in your tests.</p>\n\n<pre><code>FactoryGirl.define do\n  factory :cart_item do\n    association :product \n  end\nend\n\nFactoryGirl.define do\n  factory :order_item do\n    association :product\n  end\nend\n</code></pre>\n\n<p>Then in your tests</p>\n\n<pre><code>product = FactoryGirl.create(:product)\ncart_item = FactoryGirl.create(:cart_item, product: product)\norder_item = FactoryGirl.create(:order_item, product: product)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2876886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 44168555, "answer_count": 2, "score": 0, "last_activity_date": 1495664107, "creation_date": 1495659610, "last_edit_date": 1495664107, "question_id": 44168368, "link": "https://stackoverflow.com/questions/44168368/factorygirl-not-finding-instances-in-db", "title": "FactoryGirl not finding instances in DB", "body": "<p>When attempting to initialize data with FactoryGirl I am running into a problem with being able to access previous data I have created. </p>\n\n<p>Say I have 3 different Models: Product, CartItem, and OrderItem. And these are the basic rules:</p>\n\n<ul>\n<li>CartItem and OrderItem belong_to Product, and is required. </li>\n<li>Product has a unique identifier 'name'.</li>\n</ul>\n\n<p>My Factory files are set up like so:</p>\n\n<p><strong>Product</strong></p>\n\n<pre><code>FactoryGirl.define do\n  factory :product do\n    name \"A Product\"\n  end\nend\n</code></pre>\n\n<p><strong>CartItem</strong></p>\n\n<pre><code>FactoryGirl.define do\n  factory :cart_item do\n    association :product do\n        Product.find_by(name: \"A Product\") || FactoryGirl.create(:product)\n    end\n  end\nend\n</code></pre>\n\n<p><strong>OrderItem</strong></p>\n\n<pre><code>FactoryGirl.define do\n  factory :order_item do\n    association :product do\n        Product.find_by(name: \"A Product\") || FactoryGirl.create(:product)\n    end\n  end\nend\n</code></pre>\n\n<p>Now, within one test, I first create CartItem using this call <code>FactoryGirl.create(:cart_item)</code></p>\n\n<p>Everything runs fine. Because there is no Product, it creates a new one and then assigns it to CartItem. </p>\n\n<p>Next, I then attempt to create OrderItem using this call <code>FactoryGirl.create(:order_item)</code></p>\n\n<p>This time when I run it, it fails with the error <code>Validation failed, Name has already been taken</code></p>\n\n<p>This fails when trying to create a new Product with the name \"A Product\", which was already created from the call to create CartItem.</p>\n\n<p>However, this should never even attempt to create a new Product instance because I set the OrderItem's product using this <code>Product.find_by(\"A Product\") || FactoryGirl.create(:product)</code> which should first attempt to find that product instance before creating a new one. </p>\n\n<p>Any ideas as to why this is occurring?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1495658444, "post_id": 44168040, "comment_id": 75352197, "body": "I can&#39;t duplicate the problem. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Use snake_case for method and variable names, notCamelCaseBecauseItIsHarderToRead. <code>return</code> is redundant as Ruby will return the last value seen. The method can be reduced to <code>(temp - 32) * 5&#47;9</code> as a result."}, {"owner": {"reputation": 1, "user_id": 7655209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211059044407943/picture?type=large", "display_name": "Amr ElTayeb", "link": "https://stackoverflow.com/users/7655209/amr-eltayeb"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495659233, "post_id": 44168040, "comment_id": 75352538, "body": "question edited. thanks for the advice"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495659457, "post_id": 44168040, "comment_id": 75352669, "body": "If you run this concrete snippet it will work."}, {"owner": {"reputation": 600, "user_id": 5994561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-VGTzdts3mMw/AAAAAAAAAAI/AAAAAAAAADY/6Qwn_AVjnQI/photo.jpg?sz=128", "display_name": "sammms", "link": "https://stackoverflow.com/users/5994561/sammms"}, "edited": false, "score": 0, "creation_date": 1495659964, "post_id": 44168040, "comment_id": 75352923, "body": "Did you try running the new code?  I see you still have the old error posted, referencing a variable that no longer exists.  Also, as the Tin Man suggested you can get rid of the variable assignment altogether."}, {"owner": {"reputation": 1, "user_id": 7655209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211059044407943/picture?type=large", "display_name": "Amr ElTayeb", "link": "https://stackoverflow.com/users/7655209/amr-eltayeb"}, "edited": false, "score": 0, "creation_date": 1495727058, "post_id": 44168040, "comment_id": 75383125, "body": "yes I tried the new code and it still gives me error. sorry that I forgot to edit the error."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7655209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211059044407943/picture?type=large", "display_name": "Amr ElTayeb", "link": "https://stackoverflow.com/users/7655209/amr-eltayeb"}, "edited": false, "score": 0, "creation_date": 1495727187, "post_id": 44171241, "comment_id": 75383196, "body": "I write the code on &quot;visual studio code&quot;. I save the .rb file and then drag and drop it on &quot;start cmd with ruby&quot;. it gives me the same error when I try this code on aptana studio 3"}], "tags": [], "owner": {"reputation": 24, "user_id": 3718830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wPZxj.jpg?s=128&g=1", "display_name": "Quan Nguyen", "link": "https://stackoverflow.com/users/3718830/quan-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1495678695, "creation_date": 1495678695, "answer_id": 44171241, "question_id": 44168040, "link": "https://stackoverflow.com/questions/44168040/undefined-local-variable-or-method-nameerror/44171241#44171241", "title": "undefined local variable or method (NameError)", "body": "<p>It work fine for me. I use this command line: </p>\n\n<pre><code>ruby test.rb\n</code></pre>\n\n<p>You can try again ?</p>\n"}], "owner": {"reputation": 1, "user_id": 7655209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211059044407943/picture?type=large", "display_name": "Amr ElTayeb", "link": "https://stackoverflow.com/users/7655209/amr-eltayeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1495726898, "creation_date": 1495658201, "last_edit_date": 1495726898, "question_id": 44168040, "link": "https://stackoverflow.com/questions/44168040/undefined-local-variable-or-method-nameerror", "title": "undefined local variable or method (NameError)", "body": "<p>This code:</p>\n\n<pre><code>def convert(temp)  \n  new_temp\u00a0= (temp - 32) * 5/9  \n  return new_temp\nend\n\nfahrenheit_temp = gets.to_i\ncelsius_temp = convert(fahrenheit_temp)\nputs celsius_temp\n</code></pre>\n\n<p>raises:</p>\n\n<pre><code>C:/Users/Asd/Documents/Aptana Studio 3 Workspace/test/test.rb:3:in `convert': undefined local variable or method `new_temp' for main:Object (NameError)\nfrom C:/Users/Asd/Documents/Aptana Studio 3 Workspace/test/test.rb:7:in `&lt;main&gt;\n</code></pre>\n\n<p>Is there any help? I don't understand why the <code>return</code> method causes this problem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails", "specs"], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "edited": false, "score": 0, "creation_date": 1495660460, "post_id": 44168474, "comment_id": 75353115, "body": "That did it. Thank you!"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "edited": false, "score": 0, "creation_date": 1495660704, "post_id": 44168474, "comment_id": 75353226, "body": "Sure thing! Please feel free to accept if you feel so inclined."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1495660021, "creation_date": 1495660021, "answer_id": 44168474, "question_id": 44168008, "link": "https://stackoverflow.com/questions/44168008/rspec-routing-error-w-nested-resources/44168474#44168474", "title": "RSpec Routing Error w/ Nested Resources", "body": "<p>You have <code>team</code> nested under <code>projects</code> which is giving you:</p>\n\n<pre><code>project_team GET  /organizations/:organization_id/projects/:project_id/team(.:format)  projects#team\n</code></pre>\n\n<p>So this: </p>\n\n<pre><code>get :team, organization_id: organization.id, id: project.id\n</code></pre>\n\n<p>Should probably be this: </p>\n\n<pre><code>get :team, organization_id: organization.id, project_id: project.id\n</code></pre>\n\n<p>It also seems like you might be heading for trouble here:</p>\n\n<pre><code>def team\n  @team = @project.project_team\nend\n</code></pre>\n\n<p>Because you don't look up <code>@project</code> (unless you do it in a <code>before_action</code> hook). </p>\n\n<p>Finally, I would be tempted to create a <code>ProjectTeamController</code>. That way, you could use a <code>show</code> method instead of the non-standard <code>team</code> method. But, that's a matter of personal preference.</p>\n"}], "owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 44168474, "answer_count": 1, "score": 0, "last_activity_date": 1495660021, "creation_date": 1495658051, "question_id": 44168008, "link": "https://stackoverflow.com/questions/44168008/rspec-routing-error-w-nested-resources", "title": "RSpec Routing Error w/ Nested Resources", "body": "<p>I have a spec that I feel should be passing without issue, but I believe that since it is a nested resource, it may be throwing off my request. I am using Rails 4.2 with Ruby 2.3.3. What's going on? I know this is a valid route, because when it appears when I hit <code>rake routes</code></p>\n\n<p>routes.rb</p>\n\n<pre><code>    scope '/organizations/:organization_id' do\n      get 'dashboard', to: 'projects#dashboard'\n      resources :projects, except: [:delete] do\n        get 'configure', to: 'projects#configure'\n        post 'configure', to: 'projects#configure'\n        get 'team', to: 'projects#team'\n        get 'subprojects', to: 'projects#subprojects'\n        collection do\n          get 'search', to: 'projects#search'\n          get 'find', to: 'projects#find'\n          post 'create_by_sf_id', to: 'projects#create_by_sf_id'\n        end\n        resources :courses do\n          get 'module_progress', to: 'courses#module_progress'\n          get 'add_content', to: 'courses#add_content'\n          get 'summary', to: 'courses#summary'\n          post 'summary', to: 'courses#summary'\n        end\n        resources :tasks\n      end\n    end\n</code></pre>\n\n<p>projects_controller_spec.rb</p>\n\n<pre><code>describe 'GET project_team' do\n  it 'should render the project team page' do\n    get :team, organization_id: organization.id, id: project.id\n    expect(response.code).to eq '200'\n  end\nend\n</code></pre>\n\n<p>projects_controller.rb</p>\n\n<pre><code>def team\n  @team = @project.project_team\nend\n</code></pre>\n\n<p>...Aaaand the resulting error:</p>\n\n<pre><code>1) ProjectsController when authenticating as a customer GET project_team should render the project team page\n Failure/Error: get :team, organization_id: organization.id, id: project.id\n\n ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"team\", :controller=&gt;\"projects\", :id=&gt;\"460\", :organization_id=&gt;\"417\"}\n # ./spec/controllers/projects_controller_spec.rb:90:in `block (4 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "macos", "terminal", "homebrew", "macos-sierra"], "answers": [{"tags": [], "owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "is_accepted": false, "score": 2, "last_activity_date": 1495662782, "creation_date": 1495662782, "answer_id": 44169078, "question_id": 44167862, "link": "https://stackoverflow.com/questions/44167862/cant-install-brew/44169078#44169078", "title": "Can&#39;t install brew", "body": "<p>The same thing was asked in this <a href=\"https://github.com/Homebrew/brew/issues/1071\" rel=\"nofollow noreferrer\">GitHub issue</a>. The cause of your problem is that you have a very old version of Homebrew installed that still relies on Ruby 1.8, which has been replaced by Ruby 2.0 in macOS 10.10.</p>\n\n<p>If you check the issue, you'll find two slightly different solutions. The one that worked for the person who opened the original issue is running these command in a terminal:</p>\n\n<pre><code>cd /usr/local/Homebrew\ngit fetch origin\ngit reset --hard origin/master\n</code></pre>\n\n<p>Afterwards, you can run <code>brew upgrade</code> to update the installed packages (might take some time).</p>\n"}], "owner": {"reputation": 11708, "user_id": 1130279, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1df7b9c8b417f07426654011e63e829c?s=128&d=identicon&r=PG", "display_name": "luciano", "link": "https://stackoverflow.com/users/1130279/luciano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495662782, "creation_date": 1495657497, "question_id": 44167862, "link": "https://stackoverflow.com/questions/44167862/cant-install-brew", "title": "Can&#39;t install brew", "body": "<p>I ran this in Terminal:</p>\n\n<pre><code>brew install libsndfile\n</code></pre>\n\n<p>Which gave this error:</p>\n\n<pre><code>/usr/local/bin/brew: /usr/local/Library/brew.rb: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: bad interpreter: No such file or directory\n/usr/local/bin/brew: line 21: /usr/local/Library/brew.rb: Undefined error: 0\n</code></pre>\n\n<p>So in Terminal, <a href=\"https://stackoverflow.com/questions/24652996/homebrew-not-working-on-osx/35495897\">I ran steps 1-5 as suggested in this answer</a>:</p>\n\n<pre><code>1. open terminal  \n2. $ cd /usr/local/Library/Homebrew  \n3. $ git reset --hard  \n4. $ git clean -df\n5. $ brew update\n</code></pre>\n\n<p>And this is a screenshot of the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fPT9y.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fPT9y.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>How can I get the command <code>brew install libsndfile</code> to work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "collections", "shopify"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495657572, "post_id": 44167727, "comment_id": 75351804, "body": "We don&#39;t care what your experience level is, we just want you to do your research, write a clear and concise question, show us your effort. Remember, SO isn&#39;t a &quot;help me&quot; site, it&#39;s a &quot;here&#39;s a question to help others in the future site&quot; so clarity and conciseness are important. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; are important, along with &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;"}, {"owner": {"reputation": 37, "user_id": 7903061, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312009912186051/picture?type=large", "display_name": "Nicholas Atkinson", "link": "https://stackoverflow.com/users/7903061/nicholas-atkinson"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495843250, "post_id": 44167727, "comment_id": 75435393, "body": "Thanks for your feedback on my question Tin Man. I did not ask with enough information and made it seem like I wanted people to &#39;do it for me&#39; so for that I apologize. I believe I&#39;ve done quite a bit of research on this and still haven&#39;t found a way to remove the rule completely. The thing is I wasn&#39;t sure how to phrase my question properly and yes I understand you don&#39;t care about my level of experience and that&#39;s totally fine. My question though doesn&#39;t really need a &quot;do it for me&quot; response, rather a point in the right direction. I&#39;ve edited the question with more info based on your response"}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 7903061, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312009912186051/picture?type=large", "display_name": "Nicholas Atkinson", "link": "https://stackoverflow.com/users/7903061/nicholas-atkinson"}, "is_accepted": true, "score": 0, "last_activity_date": 1497394817, "creation_date": 1497394817, "answer_id": 44532883, "question_id": 44167727, "link": "https://stackoverflow.com/questions/44167727/how-to-remove-replace-smart-collection-rules-from-shopify-with-ruby/44532883#44532883", "title": "How to remove/replace Smart Collection rules from Shopify with Ruby", "body": "<p>I just wanted to note that I've created a bandaid for our issue, although for multiple collections it may not be the correct way to write a script and loop through the problematic collections. For future individuals who are trying the same thing I've included the script that seems to work.</p>\n\n<pre><code>@a = ShopifyAPI::SmartCollection.find(COLLECTIONID)\n# The line above finds the collection via ID\n@a.rules = nil\n# The line above changes all of the rules to a \"null\" value\n@a.save\n# After changing the condition rules to null we save\n@b = ShopifyAPI::SmartCollection.find(COLLECTIONID)\n# We go back into the collection and add a new rule (this will be the only existing rule we have now)\n@b.rules &lt;&lt; ShopifyAPI::Rule.new(:column =&gt; 'tag', :relation =&gt; 'equals', :condition =&gt; 'YOURTAG')\n# The above line will add a new rule\n@b.save\n# We save it again to add the new rule\n# If you'd like to test it you can add \"@b.reload\" to reload the collection information that currently exists and you should see your older rules removed and the new one in place\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7903061, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312009912186051/picture?type=large", "display_name": "Nicholas Atkinson", "link": "https://stackoverflow.com/users/7903061/nicholas-atkinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 44532883, "answer_count": 1, "score": 0, "last_activity_date": 1497394817, "creation_date": 1495657057, "last_edit_date": 1495843502, "question_id": 44167727, "link": "https://stackoverflow.com/questions/44167727/how-to-remove-replace-smart-collection-rules-from-shopify-with-ruby", "title": "How to remove/replace Smart Collection rules from Shopify with Ruby", "body": "<p>I have created a script to add conditional rules to a Shopify Smart Collection but before it does that I need it to remove all the current conditions so that the new condition is the only one there. I am running into an issue that kicks back an undefined error when trying to remove them.</p>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>@update_collection = ShopifyAPI::SmartCollection.find(411011140)\n@a = @update_collection.rules[0].attributes\n@a.delete_all\n@update_collection.rules &lt;&lt; ShopifyAPI::Rule.new(:column =&gt; 'tag', :relation =&gt; 'equals', :condition =&gt; 'test12')\n@update_collection.save\nputs \"#{update_collection.title} Updated\"\n</code></pre>\n\n<p><strong>Error Output:</strong></p>\n\n<pre><code>NoMethodError: undefined method `delete_all' for #&lt;ActiveSupport::HashWithIndifferentAccess:0x007fc2cbafd008&gt;\n</code></pre>\n\n<p>I've tried to remove each attribute separately which is not the correct way I am sure and it removes the attribute but not the entire rule and results in an error upon saving.</p>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>@update_collection = ShopifyAPI::SmartCollection.find(411011140)\n@a = @update_collection.rules[0].attributes\n@a.delete(\"column\")\n@a.delete(\"relation\")\n@a.delete(\"condition\")\n@update_collection.rules &lt;&lt; ShopifyAPI::Rule.new(:column =&gt; 'tag', :relation =&gt; 'equals', :condition =&gt; 'test12')\n@update_collection.save\nputs \"#{update_collection.title} Updated\"\n</code></pre>\n\n<p><strong>Error Output:</strong></p>\n\n<pre><code>irb(main):1806:0&gt; @update_collection.save\n=&gt; false\n</code></pre>\n\n<p><strong>Error lookup:</strong></p>\n\n<p>irb(main):1818:0> @update_collection.errors</p>\n\n<p>\"rules\"=>[#, #\"tag\", \"relation\"=>\"equals\", \"condition\"=>\"test12\"}, @prefix_options={}, @persisted=false>]}, @prefix_options={}, @persisted=true, @remote_errors=#, @validation_context=nil, @errors=#>, @messages={:conditions=>[\"are not valid\"]}, @details={:conditions=>[{:error=>\"are not valid\"}]}></p>\n\n<p>I tried .destroy and got the following error:</p>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>@update_collection = ShopifyAPI::SmartCollection.find(411011140)\n@a = @update_collection.rules[0].attributes\n@a.destroy\n@update_collection.rules &lt;&lt; ShopifyAPI::Rule.new(:column =&gt; 'tag', :relation =&gt; 'equals', :condition =&gt; 'test12')\n@update_collection.save\nputs \"#{update_collection.title} Updated\"\n\nNameError: undefined local variable or method `params' for #&lt;ActiveSupport::HashWithIndifferentAccess:0x007fc2cc168280&gt;\n</code></pre>\n\n<p>I am not sure what I am missing or doing wrong. Any point in the right direction would be greatly appreciated!</p>\n\n<p>Shopify API Documentation: <a href=\"https://help.shopify.com/api/reference/smartcollection\" rel=\"nofollow noreferrer\">https://help.shopify.com/api/reference/smartcollection</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bcrypt"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495655876, "post_id": 44167370, "comment_id": 75350968, "body": "What does <code>bundle check</code> say?"}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495656788, "post_id": 44167370, "comment_id": 75351445, "body": "&quot;The Gemfile&#39;s dependencies are satisfied&quot;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495657272, "post_id": 44167370, "comment_id": 75351666, "body": "How are you running your site? Where does that error show up?"}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495657719, "post_id": 44167370, "comment_id": 75351886, "body": "When I try to load the one page that uses this controller, it brings up the error. The error that loads in the browser points to the line that says &quot;require bcrypt&quot; and if I take that line out, then it points to the line in my model that says &quot;has_secure_password&quot;.  I will update my question with the code in the User model."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495658121, "post_id": 44167370, "comment_id": 75352057, "body": "It could be the Ruby running your application is different from the Ruby running on the command-line."}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495658345, "post_id": 44167370, "comment_id": 75352154, "body": "Sorry- I&#39;m new to ruby and rails.  Do you mean the version is different?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495658550, "post_id": 44167370, "comment_id": 75352256, "body": "It&#39;s possible you have two different Ruby versions on your system, or the way the gems were installed is confusing to the way your server is running Ruby."}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495659038, "post_id": 44167370, "comment_id": 75352459, "body": "So how do I fix that?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495659364, "post_id": 44167370, "comment_id": 75352614, "body": "The first thing is to verify that&#39;s the case. I&#39;m not sure how you installed your server, so you may want to re-check you&#39;ve installed everything correctly. If you need mentoring or coaching try services like <a href=\"https://www.codementor.io\" rel=\"nofollow noreferrer\">Codementor</a>, <a href=\"https://www.savvy.is\" rel=\"nofollow noreferrer\">Savvy</a>, or <a href=\"https://hackhands.com\" rel=\"nofollow noreferrer\">Hackhands</a>."}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495659537, "post_id": 44167370, "comment_id": 75352719, "body": "Everything worked fine until today, though.  So that makes me think that this is not the case."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1495716196, "post_id": 44172046, "comment_id": 75375688, "body": "Neither way worked.  Even with git installed it said &quot;Unfortunately, an unexpected error occurred, and Bundler cannot continue.&quot;"}, {"owner": {"reputation": 26, "user_id": 5085573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGODz.jpg?s=128&g=1", "display_name": "saga", "link": "https://stackoverflow.com/users/5085573/saga"}, "reply_to_user": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1495807725, "post_id": 44172046, "comment_id": 75419958, "body": "Did it say more than that or only that?"}, {"owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "edited": false, "score": 0, "creation_date": 1496249543, "post_id": 44172046, "comment_id": 75587599, "body": "I have no idea why this didn&#39;t work last week, but I just tried it again and it worked! Thank you so much!!!"}], "tags": [], "owner": {"reputation": 26, "user_id": 5085573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OGODz.jpg?s=128&g=1", "display_name": "saga", "link": "https://stackoverflow.com/users/5085573/saga"}, "is_accepted": true, "score": 1, "last_activity_date": 1495684743, "creation_date": 1495684743, "answer_id": 44172046, "question_id": 44167370, "link": "https://stackoverflow.com/questions/44167370/rails-server-says-it-cannot-load-the-bcrypt-gem/44172046#44172046", "title": "Rails server says it cannot load the bcrypt gem?", "body": "<p>Try this:</p>\n\n<ol>\n<li>Remove <code>bcrypt</code> from your Gemfile.</li>\n<li>Uninstall from your system by running <code>gem uninstall bcrypt</code>.</li>\n<li>Add <code>gem 'bcrypt', git: 'https://github.com/codahale/bcrypt-ruby.git', :require =&gt; 'bcrypt'</code> to your Gemfile.</li>\n<li>Run <code>bundle install</code>.</li>\n<li>If you get errors, install Git <a href=\"https://git-scm.com/downloads\" rel=\"nofollow noreferrer\">https://git-scm.com/downloads</a> and retry <code>bundle install</code>.</li>\n</ol>\n\n<p>Source: <a href=\"https://github.com/codahale/bcrypt-ruby/issues/102#issuecomment-284118731\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby/issues/102#issuecomment-284118731</a></p>\n"}], "owner": {"reputation": 49, "user_id": 7851812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2be7c8eeada09f944ad13ee4605abe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Xenedra", "link": "https://stackoverflow.com/users/7851812/xenedra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 1, "accepted_answer_id": 44172046, "answer_count": 1, "score": 0, "last_activity_date": 1495684743, "creation_date": 1495655661, "last_edit_date": 1495657754, "question_id": 44167370, "link": "https://stackoverflow.com/questions/44167370/rails-server-says-it-cannot-load-the-bcrypt-gem", "title": "Rails server says it cannot load the bcrypt gem?", "body": "<p>When I try to do this action I get the \"LoadError (cannot load such file -- bcrypt)\"</p>\n\n<pre><code>require 'bcrypt'\n\nclass PublicController &lt; ApplicationController\n\n  def attempt_login\n        if params[:email].present? &amp;&amp; params[:password].present?\n            found_user = User.where(:email =&gt; params[:email]).first\n            if found_user\n                authorized_user = found_user.authenticate(params[:password])\n            end\n        end\n        if authorized_user\n            render(:text =&gt;'authorized')\n            redirect_to(:controller =&gt; 'private', :action =&gt; 'home')\n        else\n            flash[:notice] = \"Invalid email or password\"\n            render :new\n        end\n  end\nend\n</code></pre>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\nhas_secure_password\nend\n</code></pre>\n\n<p>I have tried all of the following in the gemfile and I get the same error every time:</p>\n\n<pre><code>gem 'bcrypt', '~&gt;3.1.11'\ngem 'bcrypt', '~&gt; 3.1', '&gt;= 3.1.11'\ngem 'bcrypt', platforms: :ruby\n</code></pre>\n\n<p>How can I get it to load the bcrypt gem?\nI'm using Windows 10.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5255, "user_id": 2639304, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40c44219d944f4acb6182fd153a87b73?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2639304/john-smith"}, "edited": false, "score": 0, "creation_date": 1495656012, "post_id": 44167263, "comment_id": 75351027, "body": "thanks for your answer, Is there something similar to <code>insert</code> that does not modifies str? Thanks!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 5255, "user_id": 2639304, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40c44219d944f4acb6182fd153a87b73?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2639304/john-smith"}, "edited": false, "score": 0, "creation_date": 1495656436, "post_id": 44167263, "comment_id": 75351260, "body": "You&#39;ll need to compose the string some other way, like <code>number[0,8] + &#39;-&#39; + number[8,number.length]</code> or something like that. You could also work on a copy, like <code>number.dup.insert(...)</code> which would have no effect on the original, but runs the risk of double-dashing if run twice for some reason."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1495656600, "last_edit_date": 1495656600, "creation_date": 1495655232, "answer_id": 44167263, "question_id": 44167169, "link": "https://stackoverflow.com/questions/44167169/dont-change-string-value-on-insert/44167263#44167263", "title": "Don&#39;t change string value on insert", "body": "<p>If you're using the <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-insert\" rel=\"nofollow noreferrer\"><code>insert</code></a> method, which in the documentation explicitly states \"modifies <em>str</em>\", then you will need to avoid doing this twice, rendering it idempotent, or use another method that doesn't mangle data.</p>\n\n<p>One way is a simple regular expression to extract the components you're interested in, ignoring any dash already present:</p>\n\n<pre><code>def number_with_hyphen\n  if (m = number.match(/\\A(\\d{8})\\-?(\\d+)\\z/))\n    [ m[1], m[2] ].join('-')\n  else\n    number\n  end\nend\n</code></pre>\n\n<p>That ends up being really safe. If modified to accept an argument, you can test this:</p>\n\n<pre><code>number = '123456781234'\n\nnumber_with_hyphen(number)\n# =&gt; \"12345678-1234\"\nnumber\n# =&gt; \"123456781234\"\nnumber_with_hyphen(number_with_hyphen(number))\n# =&gt; \"12345678-1234\"\nnumber_with_hyphen('1234')\n# =&gt; \"1234\"\n</code></pre>\n\n<p>Calling it twice doesn't mangle anything, and any non-conforming data is sent through as-is.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1495655729, "post_id": 44167342, "comment_id": 75350889, "body": "<code>&quot;#{number}&quot;</code> is enough as it creates a new <code>String</code> as the OP inadvertently pointed out"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495656507, "post_id": 44167342, "comment_id": 75351298, "body": "<code>&quot;#{x}&quot;</code> is a pattern I really wish people would drop. It&#39;s something that crawled out of the tar pit of <code>bash</code>. It&#39;s much better to say what you mean: <code>number.clone</code>."}, {"owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1495656604, "post_id": 44167342, "comment_id": 75351357, "body": "@tadman agree, I just re-used the line on the OP&#39;s example, I usually just use string interpolation when formatting text really."}], "tags": [], "owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "is_accepted": false, "score": 0, "last_activity_date": 1495655518, "creation_date": 1495655518, "answer_id": 44167342, "question_id": 44167169, "link": "https://stackoverflow.com/questions/44167169/dont-change-string-value-on-insert/44167342#44167342", "title": "Don&#39;t change string value on insert", "body": "<p>Do a clone of the string:</p>\n\n<pre><code>\"#{number}\".clone.insert(8, '-')\n</code></pre>\n"}], "owner": {"reputation": 5255, "user_id": 2639304, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40c44219d944f4acb6182fd153a87b73?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2639304/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495656600, "creation_date": 1495654835, "question_id": 44167169, "link": "https://stackoverflow.com/questions/44167169/dont-change-string-value-on-insert", "title": "Don&#39;t change string value on insert", "body": "<p>I have a Model <code>user</code> with the following method:</p>\n\n<pre><code>  def number_with_hyphen\n    number&amp;.insert(8, \"-\")\n  end\n</code></pre>\n\n<p>When I run it several times in my tests I get the following output:</p>\n\n<pre><code>users(:default).number_with_hyphen\n\"340909-1234\"\n(byebug) users(:default).number_with_hyphen\n\"340909--1234\"\n(byebug) users(:default).number_with_hyphen\n\"340909---1234\"\n(byebug) users(:default).number_with_hyphen\n\"340909----1234\"\n</code></pre>\n\n<p><b>It changes the <code>number</code> ?</b>Here are the docs <a href=\"https://apidock.com/ruby/v1_9_3_392/String/insert\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/v1_9_3_392/String/insert</a></p>\n\n<p>When I restructure my method to:</p>\n\n<pre><code>  def number_with_hyphen\n    \"#{number}\".insert(8, \"-\") if number\n  end\n</code></pre>\n\n<p>If works like expected. The output stays the same! </p>\n\n<p><strong>How would you structure the code, how would you perform the insert?</strong> \nwhich method should I use instead. Thanks</p>\n"}, {"tags": ["ruby", "rubygems", "cucumber"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1495653752, "post_id": 44166262, "comment_id": 75349941, "body": "When linking to a page, provide useful anchor text, so that those reading know where they&#39;re going to land. &quot;<a href=\"https://www.w3.org/QA/Tips/noClickHere\" rel=\"nofollow noreferrer\">Don&#39;t use &#39;click here&#39; as link text</a>&quot; and  &quot;<a href=\"http://www.w3.org/TR/WCAG10-TECHS/#tech-meaningful-links\" rel=\"nofollow noreferrer\">Clearly identify the target of each link</a>&quot;"}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495653884, "post_id": 44166262, "comment_id": 75350011, "body": "Thanks, shall keep that in mind."}], "answers": [{"comments": [{"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1495652530, "post_id": 44166520, "comment_id": 75349352, "body": "How do I install the MRI version? The Ruby Installer for Windows doesn&#39;t let me select any specific version. And I can&#39;t find anything about that on <a href=\"http://www.ruby-lang.org/en/downloads/\" rel=\"nofollow noreferrer\">the installation page</a>."}, {"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "reply_to_user": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1495652714, "post_id": 44166520, "comment_id": 75349429, "body": "Go to <a href=\"https://rubyinstaller.org/\" rel=\"nofollow noreferrer\">rubyinstaller.org</a> and install the lastest version. You should also install and configure <a href=\"https://rubyinstaller.org/add-ons/devkit/\" rel=\"nofollow noreferrer\">DevKit</a>"}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1495652961, "post_id": 44166520, "comment_id": 75349548, "body": "That is exactly what I did to get my current version of Ruby. But somehow there is no mention of &#39;MRI&#39; anywhere on that page."}, {"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "reply_to_user": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1495653252, "post_id": 44166520, "comment_id": 75349691, "body": "MRI is what the &quot;standard&quot;, <code>C</code> based version of ruby is called, IronRuby is a .NET implementation that as I already said seems to be incompatible with current gems due to changes in the language. If you absolutely need to use IronRuby then check for gems that require Ruby versions &lt; 1.9"}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1495653616, "post_id": 44166520, "comment_id": 75349881, "body": "Thanks, I downgraded <code>term-ansicolor</code> to 1.0.4 and that made it work."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 1, "creation_date": 1495662724, "post_id": 44166520, "comment_id": 75354083, "body": "@Antimony IronRuby is a mostly abandoned implementation of the Ruby language (its latest release was about 6 years ago). You should not use it unless you really, really, really need it. Instead use the normal Ruby implementation (often called MRI) which you can download for Windows at <a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">rubyinstaller.org/downloads</a>. Generally, when people speak of Ruby and don&#39;t further specify the implementation, they mean MRI, the original Ruby implemented in C. Other options are JRuby and Rubinius, but to get started with Ruby, you should use the default implementation."}, {"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1495663287, "post_id": 44166520, "comment_id": 75354256, "body": "Thanks @HolgerJust. Which implementation would you recommend to be able to use Cucumber with .NET? Cuke4nuke?"}], "tags": [], "owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "is_accepted": true, "score": 1, "last_activity_date": 1495653465, "last_edit_date": 1495653465, "creation_date": 1495652315, "answer_id": 44166520, "question_id": 44166262, "link": "https://stackoverflow.com/questions/44166262/syntax-error-in-ruby-gem-term-ansicolor/44166520#44166520", "title": "Syntax Error in Ruby Gem term-ansicolor", "body": "<p>It seems that IronRuby isn't ready for the last version of <code>term-ansicolor</code> either. Around Ruby 2.0 it became possible to use keyword parameters (the <code>max: 255</code> part in your error message) but since version 1.9 this can be simulated using hashes. </p>\n\n<p>The last release of IronRuby I can find is 1.1.3 and it claims to be working towards compatibility with Ruby 1.9 but it seems kind of abandoned. So you can downgrade your gems even further or change your Ruby implementation to MRI or JRuby.</p>\n"}], "owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 44166520, "answer_count": 1, "score": 0, "last_activity_date": 1495653681, "creation_date": 1495651250, "last_edit_date": 1495653681, "question_id": 44166262, "link": "https://stackoverflow.com/questions/44166262/syntax-error-in-ruby-gem-term-ansicolor", "title": "Syntax Error in Ruby Gem term-ansicolor", "body": "<p>I have been following \"<a href=\"http://blog.webintellix.com/2009/10/how-to-use-cucumber-with-net-and-c.html\" rel=\"nofollow noreferrer\">How-to: Use Cucumber with .NET and C# under IronRuby</a>\" to set up Cucumber for .net on Windows. I had no problem installing Ruby, IronRuby and installing Cucumber, but when I came to this step, my troubles started:</p>\n\n<blockquote>\n  <p>Check to see if Cucumber under IronRuby works: <code>icucumber \u2013help</code></p>\n</blockquote>\n\n<p>Here <code>icucumber.bat</code> is a file we write to tell IronRuby where to find gems. I just copied the script from the link above and changed the directories to match my installation directories.</p>\n\n<p>I first got a bunch of <code>require</code> errors, which I fixed by installing Cucumber (0.6.4) according to \"<a href=\"http://blog.timwingfield.com/2010/07/16/ironruby-0-to-cucumber-in-15-minutes.html\" rel=\"nofollow noreferrer\">IRONRUBY: 0 TO CUCUMBER IN 15 MINUTES</a>\":</p>\n\n<blockquote>\n  <p>IronRuby isn\u2019t quite ready for the latest version of Cucumber.</p>\n</blockquote>\n\n<p>I also installed <code>term-ansicolor</code> by doing <code>gem install term-ansicolor</code>. At this point, although I got rid of the <code>require</code> errors, I got a new one:</p>\n\n<pre><code>c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/term-ansicolor-1.6.0/lib/term/ansicolor/rgb_triple.rb:8: syntax error, unexpected label\n  def self.convert_value(color, max: 255)\n                                ^\n</code></pre>\n\n<p>The file  is pointing to <code>rgb_triple.rb</code>, which came with the <code>term-ansicolor</code> gem. So I do not understand what could have caused this error.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "associations"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 1, "creation_date": 1495651551, "post_id": 44166196, "comment_id": 75348902, "body": "What does <code>auction</code> have? Where is <code>bidder_id</code>? Shouldn&#39;t that be <code>user_id</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495651844, "post_id": 44166196, "comment_id": 75349047, "body": "Yeah, I just removed the <code>bidder_id</code> and replaced it with &#39;user_id&#39; and it seems to be working now, just hoping the rest is fine."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495652257, "post_id": 44166196, "comment_id": 75349230, "body": "Posted the answer to wrap it up..and you can search/post another question if something else breaks.."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1495654651, "post_id": 44166196, "comment_id": 75350376, "body": "I don&#39;t see a <code>user_id</code> in <code>Auction</code> so <code>seller</code> is going to fail."}], "answers": [{"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1495652197, "creation_date": 1495652197, "answer_id": 44166484, "question_id": 44166196, "link": "https://stackoverflow.com/questions/44166196/trying-to-make-associations-with-rails/44166484#44166484", "title": "Trying to make associations with Rails", "body": "<p><code>foreign_key</code> refers to the <code>_id</code> (by default) or any unique attribute used to associate the models.</p>\n\n<p>I can't see <code>bidder</code> model, you need to replace them with <code>user_id</code> as they are associated to <code>user</code> model.</p>\n\n<p>Refer for more details <a href=\"https://apidock.com/rails/ActiveRecord/Associations/ClassMethods/belongs_to\" rel=\"nofollow noreferrer\"><code>belongs_to</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6434141, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/---x22Clo9K0/AAAAAAAAAAI/AAAAAAAABEM/5mo_IFxmjHE/photo.jpg?sz=128", "display_name": "Srinjoy", "link": "https://stackoverflow.com/users/6434141/srinjoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1495658827, "creation_date": 1495658827, "answer_id": 44168174, "question_id": 44166196, "link": "https://stackoverflow.com/questions/44166196/trying-to-make-associations-with-rails/44168174#44168174", "title": "Trying to make associations with Rails", "body": "<pre><code>class CreateBids &lt; ActiveRecord::Migration\n  def change\n    create_table :bids do |t|\n      t.integer :user_id **do not think this is correct** \n      t.integer :auction_id **or this one** \n\n      t.timestamps\n    end\n end\nend\n</code></pre>\n\n<p>You want to use something more along the lines of the following </p>\n\n<pre><code>class CreateGames &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :games do |t|\n      t.integer :total_time\n      t.references :version, foreign_key: true **#this is how a foreign key should be declared**\n      t.integer :total_points\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Alternatively, if you want to change things in future migrations you can always add a reference: </p>\n\n<pre><code>  def change\n    add_reference :levels, :version, foreign_key: true\n  end\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7496931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495658827, "creation_date": 1495651040, "question_id": 44166196, "link": "https://stackoverflow.com/questions/44166196/trying-to-make-associations-with-rails", "title": "Trying to make associations with Rails", "body": "<p>i'm learning Rails and i'm doing an exercise to practice associations and migration files.</p>\n\n<p>Currently, trying to make a models between users, auction item, and bids.</p>\n\n<p>So far for the migrate files I have the following:</p>\n\n<pre><code>    class CreateItem &lt; ActiveRecord::Migration\n      def change\n        create_table :auction do |t|\n            t.string :item_name\n            t.string :condition\n            t.date :start_date\n            t.date :end_date\n            t.text :description\n\n      t.timestamps\n    end\n  end\nend\n\n\n class CreateBids &lt; ActiveRecord::Migration\n  def change\n    create_table :bids do |t|\n      t.integer :user_id\n      t.integer :auction_id\n\n      t.timestamps\n    end\n end\nend\n\n\n   class CreateUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      t.string :email\n      t.string :username\n      t.string :password_digest\n\n      t.timestamps\n    end\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>These are the following models:</p>\n\n<pre><code>class Bid &lt; ActiveRecord::Base\n  belongs_to :bidder, class_name: \"User\", foreign_key: \"bidder_id\"\n  belongs_to :auction\nend\n\n\nclass User &lt; ActiveRecord::Base\n  has_many :bids\n  has_many :auctions, :foreign_key =&gt; 'bidder_id'\n\n  has_secure_password\nend\n\n\nclass Auction &lt; ActiveRecord::Base\n  belongs_to :seller, class_name: \"User\", foreign_key: :user_id\n  has_many :bids\n  has_many :bidders, through: :bids\nend\n</code></pre>\n\n<p>Any suggestions or opinions? I'm currently trying to test the tables but auctions doesn't seem to be working...\nSpecifically, my auction table can't seem to find a user_id and therefore a user doesn't have any auctions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "minitest", "paper-trail-gem"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495651208, "post_id": 44165969, "comment_id": 75348737, "body": "Don&#39;t use controller tests for a new app as <a href=\"http://blog.bigbinary.com/2016/04/19/changes-to-test-controllers-in-rails-5.html\" rel=\"nofollow noreferrer\">they are depreciated</a>. Instead use <code>ActionDispatch::IntegrationTest</code> as this is a more future proof way forward. An added bonus is you can simply use <code>include Warden::Test::Helpers</code> and login users with <code>login_as @user</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495651342, "post_id": 44165969, "comment_id": 75348806, "body": "I missed the part about writing it for the paper_trail gem. But my advice still stands. Convert it to an <code>ActionDispatch::IntegrationTest</code> and stop poking around in the internals."}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1499188132, "post_id": 44165969, "comment_id": 76798879, "body": "Max, I think your comment could be an answer. I use <code>login_as</code> on my paper_trail projects. To the OP: re: paper_trail, make sure to read section <a href=\"https://github.com/airblade/paper_trail#4a-finding-out-who-was-responsible-for-a-change\" rel=\"nofollow noreferrer\">4.a. Finding Out Who Was Responsible For A Change</a>"}], "owner": {"reputation": 2356, "user_id": 6090736, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d286da5594a779a224fe4d4ff72df1c5?s=128&d=identicon&r=PG&f=1", "display_name": "lgants", "link": "https://stackoverflow.com/users/6090736/lgants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1337, "favorite_count": 2, "answer_count": 0, "score": 6, "last_activity_date": 1495650192, "creation_date": 1495650192, "question_id": 44165969, "link": "https://stackoverflow.com/questions/44165969/set-current-user-in-controller-test-with-rails-5-minitest", "title": "Set current_user in Controller Test with Rails 5 Minitest", "body": "<p>Anyone know how to set the devise helper function #current_user in a controller test (using fixture data) for a Rails 5 app? I've tried the following:</p>\n\n<ul>\n<li><code>sign_in users(:example_user)</code> </li>\n<li><code>@current_user = users(:example_user)</code></li>\n<li><code>current_user = users(:example_user)</code></li>\n<li><code>@controller.stubs(:current_user).returns(users(:example_user))</code>.</li>\n</ul>\n\n<p>I'm writing tests for the <a href=\"https://github.com/airblade/paper_trail\" rel=\"noreferrer\">paper_trail</a> gem, which uses #current_user to set the 'whodunnit' attribute (i.e. id of current_user) on the version.</p>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495654100, "post_id": 44165876, "comment_id": 75350133, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Code being submitted needs to run. Code with syntax errors are off-topic and will be closed. See #2 on <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495654539, "post_id": 44165876, "comment_id": 75350328, "body": "Don&#39;t do <code>1.to_s, 2.to_s,3.to_s</code>. Output of a string or an integer results in the same thing on the screen, the visual representation of the values: <code>puts 1.to_s # &gt;&gt; 1</code> and <code>puts 1 # &gt;&gt; 1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495650402, "post_id": 44165898, "comment_id": 75348328, "body": "Why negative though? Does the downvoter has a better answer?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1495654264, "post_id": 44165898, "comment_id": 75350199, "body": "Possibly it&#39;s because your answer seems more like it&#39;d be a comment, or because you misspelled &quot;parentheses&quot;. Technically it&#39;s acceptable though very brief. Here&#39;s an up vote to maintain stasis."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 2, "last_activity_date": 1495654303, "last_edit_date": 1495654303, "creation_date": 1495649971, "answer_id": 44165898, "question_id": 44165876, "link": "https://stackoverflow.com/questions/44165876/what-is-the-syntax-error-in-this-short-ruby-block/44165898#44165898", "title": "What is the syntax error in this short ruby block?", "body": "<p>Remove spaces between method name and parentheses.</p>\n"}, {"comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 1, "creation_date": 1495650235, "post_id": 44165915, "comment_id": 75348239, "body": "Nay.. <code>puts 1.to_s, 2.to_s,3.to_s</code> is fine..won&#39;t throw error"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495650312, "post_id": 44165915, "comment_id": 75348278, "body": "My fault, although it changes a little bit, maybe is what he was trying to do (maybe not)."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 1, "creation_date": 1495650387, "post_id": 44165915, "comment_id": 75348314, "body": "Maybe..maybe not.. but i agree, at first instance that seems to be an error but i tried running it and it works good.."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495650622, "post_id": 44165915, "comment_id": 75348429, "body": "I faced the same, but the error is just because of the method call, so, that&#39;s."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1495650428, "last_edit_date": 1495650428, "creation_date": 1495650016, "answer_id": 44165915, "question_id": 44165876, "link": "https://stackoverflow.com/questions/44165876/what-is-the-syntax-error-in-this-short-ruby-block/44165915#44165915", "title": "What is the syntax error in this short ruby block?", "body": "<p>You need to avoid using spaces between the method call and the arguments in parenthesis:</p>\n\n<pre><code>def do_this (a,b,c)\n  puts 1.to_s, 2.to_s,3.to_s\n  if a == 4\n    do_this(1,2,3)\n  end\nend\ndo_this(4,5,6)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8061187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912e462098845d417aa3c4969a88af02?s=128&d=identicon&r=PG&f=1", "display_name": "TDE", "link": "https://stackoverflow.com/users/8061187/tde"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1495654678, "accepted_answer_id": 44165898, "answer_count": 2, "score": -4, "last_activity_date": 1495654303, "creation_date": 1495649903, "last_edit_date": 1495650495, "question_id": 44165876, "link": "https://stackoverflow.com/questions/44165876/what-is-the-syntax-error-in-this-short-ruby-block", "closed_reason": "Not suitable for this site", "title": "What is the syntax error in this short ruby block?", "body": "<p>What is the syntax error in this short ruby block?</p>\n\n<pre><code>def do_this (a,b,c)\n    puts 1.to_s, 2.to_s,3.to_s\n    if a == 4\n        do_this (1,2,3)\n    end\nend\ndo_this (4,5,6)\n</code></pre>\n\n<p>I get errors on the fourth and seventh lines, where \"<code>do_this</code>\" is called. </p>\n\n<p>The error is: <code>'unexpected \")\", expecting \".\" or...' [...]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "is_accepted": true, "score": 2, "last_activity_date": 1495649548, "creation_date": 1495649548, "answer_id": 44165779, "question_id": 44165691, "link": "https://stackoverflow.com/questions/44165691/rails-rspec-trying-to-test-if-an-http-delete-changes-a-boolean-field-from-fals/44165779#44165779", "title": "Rails rspec - trying to test if an HTTP delete changes a boolean field from false to true", "body": "<p>The instance of <code>project</code> in your controller, which is being updated, is a different instance than the one in your tests. The one in the test doesn't change by what happens within the controller. A minimal change to get this working would be change the expectation to something along the lines of</p>\n\n<pre><code>change { project.reload.flag_for_deletion }.from(false).to(true)\n</code></pre>\n\n<p>This will just reload all the data from the database before and after invoking the block from <code>expect</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5602331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eaa0456f3e1c09a8ab02cc23e9ae6b?s=128&d=identicon&r=PG&f=1", "display_name": "Gbenga Ojo", "link": "https://stackoverflow.com/users/5602331/gbenga-ojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 44165779, "answer_count": 1, "score": 0, "last_activity_date": 1495649548, "creation_date": 1495649243, "question_id": 44165691, "link": "https://stackoverflow.com/questions/44165691/rails-rspec-trying-to-test-if-an-http-delete-changes-a-boolean-field-from-fals", "title": "Rails rspec - trying to test if an HTTP delete changes a boolean field from false to true", "body": "<p>I'm new to Ruby on Rails.</p>\n\n<p>I have a Project controller with a method that flags a project in the database to be deleted at a later date. The code is as follows:</p>\n\n<pre><code>def destroy\n  @project.update(:flag_for_deletion =&gt; true);\n\n  respond_to do |format|\n    format.html { redirect_to projects_path,\n                  :notice =&gt; 'Project was successfully destroyed.' }\n  end\nend\n</code></pre>\n\n<p>I have a corresponding rspec test:</p>\n\n<pre><code>describe \"DELETE destroy\" do\n  it \"flags the requested project for deletion\" do\n    project = Project.create! valid_attributes\n    expect {\n      delete :destroy, {:id =&gt; project.to_param}, valid_session\n    }.to change(project, :flag_for_deletion).from(false).to(true)\n  end\nend\n</code></pre>\n\n<p>I receive the following upon running bundle exec rspec:</p>\n\n<pre><code>1) ProjectsController DELETE destroy flags the requested project for deletion\n\nFailure/Error:\n   expect {\n     delete :destroy, {:id =&gt; project.to_param}, valid_session\n   }.to change(project, :flag_for_deletion).from(false).to(true)\n\n   expected #flag_for_deletion to have changed from false to true, but did not change\n # ./spec/controllers/projects_controller_spec.rb:141:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>The corresponding ruby/rails generated Project model is:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  validates :title, :presence =&gt; true\n  has_many :items, :dependent =&gt; :destroy\nend\n</code></pre>\n\n<p>Can anyone provide any insight into what I'm doing wrong?</p>\n\n<p>(Please note, this is my first Stackoverflow question post, so please be patient with any mistakes)</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "string", "csv"], "comments": [{"owner": {"reputation": 5, "user_id": 1711414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df10427ef900cd02bc9c10581913b6c?s=128&d=identicon&r=PG", "display_name": "rubyUser", "link": "https://stackoverflow.com/users/1711414/rubyuser"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1495649498, "post_id": 44165538, "comment_id": 75347865, "body": "It can be more than 3 digits or less than 3 digits as well."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1495651367, "post_id": 44165538, "comment_id": 75348817, "body": "Are the numbers in &quot;abc is 123 test&quot; always three digits?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495654838, "post_id": 44165538, "comment_id": 75350481, "body": "Using <code>read</code> and a regex is a bad idea unless you ALWAYS know the file will easily fit into memory. Anything over 2MB will slow your code in comparison to using line-by-line IO. <a href=\"https://stackoverflow.com/questions/25189262/\">stackoverflow.com/questions/25189262</a>"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1495659124, "last_edit_date": 1495659124, "creation_date": 1495655284, "answer_id": 44167281, "question_id": 44165538, "link": "https://stackoverflow.com/questions/44165538/replace-a-string-in-csv-using-regex-using-ruby/44167281#44167281", "title": "Replace a string in csv using regex using ruby", "body": "<p>While technically the files are CSV, we can treat CSV files as text, since that's what they are. That makes it much easier to munge them when they're simple.</p>\n\n<p>I'd start with:</p>\n\n<pre><code>File.open('csv.new', 'w') do |fo|\n  DATA.each_line do |li|\n    fo.puts li.sub('123', '456')\n  end\nend\n\n__END__\n\"abc is 123 test\", 1\n\"abc is 123 test\", 2\n\"abc is 123 test\", 3\n\"abc is 123 test\", 4\n\"abc is 123 test\", 5\n</code></pre>\n\n<p>Running it generates a file called \"csv.new\" which contains:</p>\n\n<pre><code>\"abc is 456 test\", 1\n\"abc is 456 test\", 2\n\"abc is 456 test\", 3\n\"abc is 456 test\", 4\n\"abc is 456 test\", 5\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>DATA.each_line do |li|\n</code></pre>\n\n<p>you'd want to open your original file using:</p>\n\n<pre><code>File.foreach(\"/home/test/files/abc.csv\") do |li|\n</code></pre>\n\n<p>(<code>DATA</code> and <code>__END__</code> are a way to access sample data stored at the end of a Ruby script.)</p>\n\n<p><code>'123'</code> is prone to false-positive hits, and would change sub-strings:</p>\n\n<pre><code>'0123456'.sub('123', '456') # =&gt; \"0456456\"\n</code></pre>\n\n<p>to counter that, if there is any chance of sub-string matches you'd want to use a more intelligent search string; I'd use a regular expression:</p>\n\n<pre><code>'0123456'.sub(/\\b123\\b/, '456') # =&gt; \"0123456\"\n</code></pre>\n\n<p>which now checks to see if there's a word boundary surrounding <code>123</code>:</p>\n\n<pre><code>'0 123 456'.sub(/\\b123\\b/, '456') # =&gt; \"0 456 456\"\n</code></pre>\n\n<p>Since \"123\" could change, it'd make sense to assign it to a constant then substitute that into the pattern:</p>\n\n<pre><code>TARGET_STR = '123'\n\n'0123456'.sub(/\\b#{TARGET_STR}\\b/, '456') # =&gt; \"0123456\"\n'0 123 456'.sub(/\\b#{TARGET_STR}\\b/, '456') # =&gt; \"0 456 456\"\n</code></pre>\n\n<p>Because I'm using blocks with <code>open</code> and <code>foreach</code>, Ruby will automatically close the files once the blocks end, resulting in cleaner code, and better management of file handles.</p>\n\n<p>Your code:</p>\n\n<pre><code>file = IO.read(/home/test/files/abc.csv\")\nfile_final = expected_file.gsub!(\"abc is\".*, string_replace)\nFile.open(f1, 'w') { |f| f.write(file_final) }\n</code></pre>\n\n<p>... is a ... mess. </p>\n\n<ul>\n<li><code>read</code> is great for files you know will always be below 1MB in size. If you don't know that, especially if you're working in a production environment where files can be well into the GB range, using line-by-line IO is faster and safer as it sidesteps scalability issues. See \"<a href=\"https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-not-a-good-practice\">Why is &quot;slurping&quot; a file not a good practice?</a>\" for more information.</li>\n<li>We don't know what <code>expected_file</code> is, but it'll cause an error because it's undefined so Ruby would revolt because you used the <code>gsub!</code> method on a nil value.</li>\n<li><p>If <code>expected_file</code> is a String, <code>expected_file.gsub!</code> would mutate <code>expected_file</code>, but assigning the result to <code>file_final</code> wastes CPU. Instead reuse <code>expected_file</code>, or, better, use:</p>\n\n<pre><code>file_final = expected_file.gsub(\n</code></pre></li>\n<li><p><code>\"abc is\".*</code> is an invalid parameter. Possibly <code>\"abc is.*\"</code> would be closer, but it appears you're reaching for a regular expression <code>/abc is.*/</code>, but that wouldn't be necessary to change the string, <code>/123/</code> or <code>'123'</code> would be sufficient. </p></li>\n<li><code>gsub</code> would be overkill here too, since you only need a single replacement, so <code>sub</code> would be faster.</li>\n<li><p>Technically,</p>\n\n<pre><code>File.open(f1, 'w') { |f| f.write(file_final) }\n</code></pre>\n\n<p>will work, but it's much more easily written as</p>\n\n<pre><code>File.write(f1, file_final)\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>You could reduce the code to:</p>\n\n<pre><code>File.write(\n  'file.csv.new',\n  File.read('file.csv').gsub(/\\b123\\b/, '456')\n)\n</code></pre>\n\n<p>which, out of perverseness, could be written as:</p>\n\n<pre><code>File.write('file.csv.new', File.read('file.csv').gsub(/\\b123\\b/, '456'))\n</code></pre>\n\n<p>There'd be no improvement in speed, and instead it'd reduce readability.</p>\n"}], "owner": {"reputation": 5, "user_id": 1711414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df10427ef900cd02bc9c10581913b6c?s=128&d=identicon&r=PG", "display_name": "rubyUser", "link": "https://stackoverflow.com/users/1711414/rubyuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 44167281, "answer_count": 1, "score": 0, "last_activity_date": 1495659124, "creation_date": 1495648790, "last_edit_date": 1495649839, "question_id": 44165538, "link": "https://stackoverflow.com/questions/44165538/replace-a-string-in-csv-using-regex-using-ruby", "title": "Replace a string in csv using regex using ruby", "body": "<p>I have a csv files which has a columns test and id and values are :</p>\n\n<pre><code>\"abc is 123 test\", 1\n\n\"abc is 123 test\", 2\n\n\"abc is 123 test\", 3\n\n\"abc is 123 test\", 4\n\n\"abc is 123 test\", 5\n</code></pre>\n\n<p>I want to replace the <code>\"abc is 123 test\"</code> with <code>\"abc is 567 test\"</code>.</p>\n\n<p>Note : Values <code>123</code> and <code>567</code> are dynamic values and with every new csv <code>123</code> gets changed, but string <code>\"abc is &lt;value&gt; test\"</code> always remain same.</p>\n\n<p>Code i tried :</p>\n\n<pre><code>folder_path = \"/home/test/files/\"\nf1 = folder_path + \"abc.csv\"\nstring_replace = \"abc is 567 test\"\n\nfile = IO.read(/home/test/files/abc.csv\")\nfile_final = expected_file.gsub!(\"abc is\".*, string_replace)\nFile.open(f1, 'w') { |f| f.write(file_final) }\n</code></pre>\n\n<p>I am getting the error:</p>\n\n<blockquote>\n  <p>\"ArgumentError: wrong number of arguments calling <code>*</code> (0 for 1)</p>\n</blockquote>\n\n<p>Can anyone help ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1495649008, "post_id": 44165597, "comment_id": 75347568, "body": "This is incorrect  <code>update-attributes</code> with an &quot;s&quot; runs validations"}], "tags": [], "owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "is_accepted": false, "score": -1, "last_activity_date": 1495648978, "creation_date": 1495648978, "answer_id": 44165597, "question_id": 44165418, "link": "https://stackoverflow.com/questions/44165418/ruby-on-rails-why-validades-presence-of-only-work-at-create-and-not-at-update/44165597#44165597", "title": "Ruby on Rails - Why validades_presence_of only work at create and not at update?", "body": "<p>Quoting Rails documentation on <code>update</code> a.k.a <code>update_attribute</code></p>\n\n<blockquote>\n  <p>Updates a single attribute and saves the record. This is especially\n  useful for boolean flags on existing records. Also note that</p>\n  \n  <ul>\n  <li><p>Validation is skipped.</p></li>\n  <li><p>Callbacks are invoked.</p></li>\n  <li><p>updated_at/updated_on column is updated if that column is available.</p></li>\n  <li><p>Updates all the attributes that are dirty in this object.</p></li>\n  </ul>\n  \n  <p>This method raises an ActiveRecord::ActiveRecordError if the attribute\n  is marked as readonly.</p>\n  \n  <p>So there's that, <code>update</code> skips the validation steps, if you want to validate your models either call <code>valid?</code> yourself or use <code>save</code> instead of <code>update</code>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1495649815, "post_id": 44165698, "comment_id": 75348043, "body": "Maybe mention the Error (<code>ActiveRecord::RecordInvalid</code>) that will be raised since rescuing <code>Exception</code> is not the best idea."}, {"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1495650236, "post_id": 44165698, "comment_id": 75348240, "body": "Good point! Thanks for the hint, I added some additional explanation to that point."}], "tags": [], "owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "is_accepted": false, "score": 2, "last_activity_date": 1495650206, "last_edit_date": 1495650206, "creation_date": 1495649265, "answer_id": 44165698, "question_id": 44165418, "link": "https://stackoverflow.com/questions/44165418/ruby-on-rails-why-validades-presence-of-only-work-at-create-and-not-at-update/44165698#44165698", "title": "Ruby on Rails - Why validades_presence_of only work at create and not at update?", "body": "<p>You're calling <code>update_attributes</code> but never checking its return value. Since it looks like you're expecting an error to be raised, you should use <code>update_attributes!</code> (with an exclamation mark at the end) instead.</p>\n\n<p>Note that it is advisable to rescue only from those errors you're actually expecting to be thrown. In this case, you should <code>rescue ActiveRecord::RecordInvalid =&gt; e</code>.</p>\n\n<p>Alternatively, you can also use the <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html#method-i-rescue_from\" rel=\"nofollow noreferrer\"><code>rescue_from</code></a> method to execute error handling in a separate method. This is helpful if your error handler is more complex, for example because it has its own <code>respond_to</code> block.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1495650032, "last_edit_date": 1495650032, "creation_date": 1495649311, "answer_id": 44165713, "question_id": 44165418, "link": "https://stackoverflow.com/questions/44165418/ruby-on-rails-why-validades-presence-of-only-work-at-create-and-not-at-update/44165713#44165713", "title": "Ruby on Rails - Why validades_presence_of only work at create and not at update?", "body": "<p>First of all <code>response.body</code> will never be <code>empty</code> based on what you have and generally shouldn't be as it offers no context to the situation.</p>\n\n<p>Secondly you are not checking that <code>update_attributes</code> returned <code>false</code> you are just returning the object. That object is in an invalid state and does not reflect the persisted object since validation failed.</p>\n\n<p><code>update_attributes</code> will call <code>assign_attributes</code> before <code>save</code> so the in memory <code>propose</code> will reflect the new assignment with <code>propose.propose</code> being blank but that is not actually what is stored in the database. </p>\n\n<p>Consider changing update to </p>\n\n<pre><code>def update\n  begin\n    propose = Propose.find(params[:propose_id])     \n    if propose.update_attributes(update_params)\n      render(json: propose.to_json, status: :ok)\n    else\n      # modify this portion as you see fit\n      render(json: {error:{errors: propose.errors.full_messages}}.to_json,status: :unprocessable_entity)\n    end\n  end\nend\n</code></pre>\n\n<p>If you want an Error to be raised as your initial intent implies then use</p>\n\n<pre><code># expanded based on @ma_il's answer\ndef update\n  begin\n    propose = Propose.find(params[:propose_id])\n    propose.update_attributes!(update_params) #notice the bang (!)\n    render(json: propose.to_json, status: :ok)\n  # notice we are only rescuing ActiveRecord::RecordInvalid rather than \n  # Exception which is considered poor form and could expose information in the json that you don't intend\n  rescue ActiveRecord::RecordInvalid =&gt; e \n    render(json: {error: e.message}, status: :unprocessable_entity)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495650790, "post_id": 44166099, "comment_id": 75348523, "body": "Your should also name your model Proposal - which is the noun form, not propose which is the verb form. Models should be named after things - not actions."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1495653303, "post_id": 44166099, "comment_id": 75349717, "body": "<code>e</code> is not valid in your example of  &quot;safe&quot; <code>update</code> method"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1495659825, "last_edit_date": 1495659825, "creation_date": 1495650685, "answer_id": 44166099, "question_id": 44165418, "link": "https://stackoverflow.com/questions/44165418/ruby-on-rails-why-validades-presence-of-only-work-at-create-and-not-at-update/44166099#44166099", "title": "Ruby on Rails - Why validades_presence_of only work at create and not at update?", "body": "<p>While you could use \"dangerous\" <code>.update!</code> which raises an exception if the record is invalid:</p>\n\n<pre><code>def update\n  begin\n    propose = Propose.find(params[:propose_id])\n    propose.update!(update_params)\n    render(json: propose.to_json, status: :ok)\n    # Never use rescue without an exception type!\n  rescue ActiveRecord::RecordInvalid =&gt; e\n    render(json: {error: e.message}, status: :unprocessable_entity)\n  end\nend\n</code></pre>\n\n<p>This is not a good practice since exceptions should be used for exceptional events. Not the normal application flow.</p>\n\n<p>Instead use the safe <code>.update</code> method and check the return value:</p>\n\n<pre><code>def update\n  propose = Propose.find(params[:propose_id])\n  if propose.update(update_params)\n    render(json: propose.to_json, status: :ok)\n  else\n    render(json: { errors: propose.errors.full_messages }, status: :unprocessable_entity)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5521065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3ed643e11c75ee24fb4ab8541457532b?s=128&d=identicon&r=PG&f=1", "display_name": "William Caetano", "link": "https://stackoverflow.com/users/5521065/william-caetano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 44166099, "answer_count": 4, "score": 0, "last_activity_date": 1495659825, "creation_date": 1495648313, "question_id": 44165418, "link": "https://stackoverflow.com/questions/44165418/ruby-on-rails-why-validades-presence-of-only-work-at-create-and-not-at-update", "title": "Ruby on Rails - Why validades_presence_of only work at create and not at update?", "body": "<p>I'm having a problem with validations at rails, i have a parameter call <strong>propose</strong> that cannot be blank, when I try to create it work, but when update do not, this is my validations:</p>\n\n<pre><code>class Propose &lt; ActiveRecord::Base\n\n  validates_presence_of :propose, :date, :meeting_type\n\n\nend\n</code></pre>\n\n<p>For some reason, this only works when a object is create, then <strong>propose</strong> cannot be blank, but if I try update for empty it works when should not. I tried this solution, but did not work as well:</p>\n\n<pre><code>validates_length_of :propose, :minimum =&gt; 1, allow_blank: false\n</code></pre>\n\n<p>In both cases, my rspec returns this</p>\n\n<pre><code>     Failure/Error: expect(response.body).to be_empty\n   expected `\"{\\\"id\\\":508,\\\"propose\\\":\\\"\\\",\\\"business_id\\\":442,\\\"date\\\":\\\"2017-05-24T00:00:00.000-03:00\\\",\\\"meetin...\\\":\\\"2017-05-24T14:13:42.120-03:00\\\",\\\"updated_at\\\":\\\"2017-05-24T14:13:42.120-03:00\\\",\\\"status\\\":0}\".empty?` to return true, got false\n</code></pre>\n\n<p>This is the test:</p>\n\n<pre><code>it \"Should not be able to update propose because propose is blank\" do\n      @propose = Fabricate(:propose, company: @current_user.return_company)\n      put :update, propose_id: @propose.id, propose: ''\n      expect(response.body).to be_empty\n      expect(response.status).to eq(422)\nend\n</code></pre>\n\n<p>This is my controller:</p>\n\n<pre><code>def update\n    begin\n      propose = Propose.find(params[:propose_id])\n      propose.update_attributes(update_params)\n      render(json: propose.to_json, status: :ok)\n    rescue =&gt; e\n      render(json: {error: e.message}, status: :unprocessable_entity)\n    end\n  end\nprivate\ndef update_params\n    params.permit(:propose, :date, :meeting_type, :status)\nend\n</code></pre>\n\n<p>So, that is the problem, <strong>propose</strong> cannot be blank when update or create, but the validations appears only to work for create. I know that I can use something like:</p>\n\n<pre><code>raise \"empty propose\" if params[:propose].empty?\n</code></pre>\n\n<p>But I want to use rails methods if possible to the code don't be fill with manually validations when there is a way to do using rails already.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1495646545, "post_id": 44164900, "comment_id": 75346227, "body": "You have a relationship between <code>Inventory</code> and <code>Item</code>, you need to deal with that and/or to specify the <code>destroy</code> <code>dependency</code> within your relationships."}], "answers": [{"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 3, "last_activity_date": 1495646729, "creation_date": 1495646729, "answer_id": 44165003, "question_id": 44164900, "link": "https://stackoverflow.com/questions/44164900/activerecordinvalidforeignkey-error/44165003#44165003", "title": "ActiveRecord::InvalidForeignKey Error", "body": "<p>It sounds like there is a foreign key to the inventories table from another one, which you would expect to see expressed in the Inventory model with a <code>has_many</code> or <code>has_one</code> relationship. </p>\n\n<p>The fixes would be to either have the foreign key configured to automatically delete the child records, or to specify <code>dependent: :destroy</code> on the association.</p>\n\n<p>The former would be very fast, but would not allow callbacks on the child instances to execute, so I'd recommend the <code>:destroy</code> option.</p>\n"}], "owner": {"reputation": 33, "user_id": 4307352, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2855ff942caf1a095a39519e856a32cd?s=128&d=identicon&r=PG&f=1", "display_name": "Davidson", "link": "https://stackoverflow.com/users/4307352/davidson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2819, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495646729, "creation_date": 1495646321, "last_edit_date": 1495646590, "question_id": 44164900, "link": "https://stackoverflow.com/questions/44164900/activerecordinvalidforeignkey-error", "title": "ActiveRecord::InvalidForeignKey Error", "body": "<p>When I try to delete something from my inventory database, I get this error:</p>\n\n<pre><code>ActiveRecord::InvalidForeignKey in InventoriesController#destroy\n\nSQLite3::ConstraintException: FOREIGN KEY constraint failed: DELETE FROM \"inventories\" WHERE \"inventories\".\"id\" = ?\n</code></pre>\n\n<p>In the terminal, it says</p>\n\n<pre><code>{\"_method\"=&gt;\"delete\", \"authenticity_token\"=&gt;\"dBNU2GkV0+rOcp4NVEljm4oIpkdOnPsvZKdmisaadBzX3QkY1VwurZNRPL0WFtVvizeAcJb7H6E50ObmpRsXAg==\", \"id\"=&gt;\"1\"}\n</code></pre>\n\n<p>It also says the source is at:</p>\n\n<pre><code> def destroy\n    @inventory = Inventory.find(params[:id])\n    @inventory.destroy\n\n    redirect_to inventory_path\nend\n</code></pre>\n\n<p>In my inventories file which is:</p>\n\n<pre><code>class InventoriesController &lt; ApplicationController\n    def show\n        @inventory = Inventory.find(params[:id])\n     end\n\n    def index\n        @inventories = Inventory.all\n    end\n\n    def new\n        @inventory = Inventory.new\n    end\n\n    def create\n        @inventory = Inventory.new(inventory_params)\n\n\n        if @inventory.save\n        redirect_to @inventory\n        else\n            render 'new'\n        end\n    end\n\n    def edit\n        @inventory = Inventory.find(params[:id])\n    end\n\n    def update\n        @inventory = Inventory.find(params[:id])\n        if @inventory.update(inventory_params)\n            redirect_to @inventory\n        else\n            render 'edit'\n        end\n    end\n\n    def destroy\n        @inventory = Inventory.find(params[:id])\n        @inventory.destroy\n\n        redirect_to inventory_path\n    end\nend\n\nprivate \ndef inventory_params\n    params.require(:inventory).permit(:product_name, :brand_name, :item_id, :upc_code, :color, :department, :size, :condition, :fabric_type, :shipping_weight, :sku, :asin, :quantity, :cost_price, :sell_price, :key_product_features, :product_description, :search_terms, :status, :listing_in_usa, :listing_in_canada, :listing_in_mexico)\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "capistrano", "puma"], "comments": [{"owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 0, "creation_date": 1495671014, "post_id": 44164898, "comment_id": 75356431, "body": "My guess is that it is because your Gemfile.lock contains <code>x86-mingw32</code>. That means you are probably developing on Windows and trying to deploy to Linux? I am not sure how to get that to work :("}, {"owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 0, "creation_date": 1495671103, "post_id": 44164898, "comment_id": 75356445, "body": "Here is an accepted answer for what I think is the same problem: <a href=\"https://stackoverflow.com/questions/34604839/corrupt-gemfile-lock-error-with-capistrano/35021383#35021383\" title=\"corrupt gemfile lock error with capistrano\">stackoverflow.com/questions/34604839/&hellip;</a>"}, {"owner": {"reputation": 165, "user_id": 4571219, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/27cbb571bf4aa81f7a25125d47ce0cd3?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent van Ruijven", "link": "https://stackoverflow.com/users/4571219/vincent-van-ruijven"}, "reply_to_user": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 0, "creation_date": 1495816542, "post_id": 44164898, "comment_id": 75425126, "body": "Yes I saw that one, but it is not solving the problem for me."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4571219, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/27cbb571bf4aa81f7a25125d47ce0cd3?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent van Ruijven", "link": "https://stackoverflow.com/users/4571219/vincent-van-ruijven"}, "edited": false, "score": 0, "creation_date": 1495647869, "post_id": 44165013, "comment_id": 75346911, "body": "Not solving the problem but I will get the following when I do ~bundle platform  Your platform is: x86_64-linux-gnu  Your app has gems that work on these platforms: * ruby  Your Gemfile specifies a Ruby version requirement: * ruby 2.3.3p222"}], "tags": [], "owner": {"reputation": 365, "user_id": 5339089, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xynzpKdp1Mw/AAAAAAAAAAI/AAAAAAAAABA/sFBDQdwNN6Q/photo.jpg?sz=128", "display_name": "Rifatul Islam Chayon", "link": "https://stackoverflow.com/users/5339089/rifatul-islam-chayon"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646745, "creation_date": 1495646745, "answer_id": 44165013, "question_id": 44164898, "link": "https://stackoverflow.com/questions/44164898/having-trouble-deploying-rails-application-on-a-server/44165013#44165013", "title": "Having trouble deploying rails application on a server", "body": "<p>Can you try to add ruby version in your Gemfile?</p>\n\n<pre><code>ruby '2.3.3' // or whatever your ruby version is\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4571219, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/27cbb571bf4aa81f7a25125d47ce0cd3?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent van Ruijven", "link": "https://stackoverflow.com/users/4571219/vincent-van-ruijven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1495650111, "creation_date": 1495646313, "last_edit_date": 1495650111, "question_id": 44164898, "link": "https://stackoverflow.com/questions/44164898/having-trouble-deploying-rails-application-on-a-server", "title": "Having trouble deploying rails application on a server", "body": "<p>I am having trouble deploying my rails application with puma and capistrano on my server. Also I am using <br>\n<a href=\"https://mattbrictson.com/build-and-deploy-a-rails-vps-part-2\" rel=\"nofollow noreferrer\">https://mattbrictson.com/build-and-deploy-a-rails-vps-part-2</a> <br>\nas a reference guide</p>\n\n<p>But when I try to run <code>bundle exec cap production deploy</code> <br>\nI will get the following error message: <br><br></p>\n\n<pre><code>The deploy has failed with an error: Exception while executing as deployer@SERVER: bundle exit status: 16\nbundle stdout: Your bundle only supports platforms [\"x86-mingw32\"] but your local platforms are[\"ruby\", \"x86_64-linux\"], and there's no compatible match between those two lists.\n</code></pre>\n\n<p>Which is strange since when I run: <code>bundle platform</code> <br>\nI get: </p>\n\n<pre><code>Your platform is: x86_64-linux-gnu\n\nYour app has gems that work on these platforms:\n* ruby\n\nYour Gemfile does not specify a Ruby version requirement.\n</code></pre>\n\n<p>And the Gemfile.lock contains the following:</p>\n\n<pre><code>GIT\n  remote: git://github.com/capistrano/rbenv.git\n  revision: 65db3295752d079bf8cf874dab36b16ab45454b7\n  specs:\n    capistrano-rbenv (2.1.1)\n      capistrano (~&gt; 3.1)\n      sshkit (~&gt; 1.3)\n\nGEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.0.3)\n      actionpack (= 5.0.3)\n      nio4r (&gt;= 1.2, &lt; 3.0)\n      websocket-driver (~&gt; 0.6.1)\n    actionmailer (5.0.3)\n      actionpack (= 5.0.3)\n      actionview (= 5.0.3)\n      activejob (= 5.0.3)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.0.3)\n      actionview (= 5.0.3)\n      activesupport (= 5.0.3)\n      rack (~&gt; 2.0)\n      rack-test (~&gt; 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.0.3)\n      activesupport (= 5.0.3)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.3)\n    activeadmin (1.0.0)\n      arbre (&gt;= 1.1.1)\n      bourbon\n      coffee-rails\n      formtastic (~&gt; 3.1)\n      formtastic_i18n\n      inherited_resources (~&gt; 1.7)\n      jquery-rails\n      jquery-ui-rails\n      kaminari (&gt;= 0.15, &lt; 2.0)\n      railties (&gt;= 4.2, &lt; 5.2)\n      ransack (~&gt; 1.3)\n      sass-rails\n      sprockets (&lt; 4.1)\n    activejob (5.0.3)\n      activesupport (= 5.0.3)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.0.3)\n      activesupport (= 5.0.3)\n    activerecord (5.0.3)\n      activemodel (= 5.0.3)\n      activesupport (= 5.0.3)\n      arel (~&gt; 7.0)\n    activesupport (5.0.3)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (~&gt; 0.7)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    airbrussh (1.2.0)\n      sshkit (&gt;= 1.6.1, != 1.7.0)\n    arbre (1.1.1)\n      activesupport (&gt;= 3.0.0)\n    arel (7.1.4)\n    bcrypt (3.1.11)\n    bindex (0.5.0)\n    bourbon (4.3.4)\n      sass (~&gt; 3.4)\n      thor (~&gt; 0.19)\n    builder (3.2.3)\n    byebug (9.0.6)\n    capistrano (3.8.1)\n      airbrussh (&gt;= 1.0.0)\n      i18n\n      rake (&gt;= 10.0.0)\n      sshkit (&gt;= 1.9.0)\n    capistrano-bundler (1.2.0)\n      capistrano (~&gt; 3.1)\n      sshkit (~&gt; 1.2)\n    capistrano-rails (1.2.3)\n      capistrano (~&gt; 3.1)\n      capistrano-bundler (~&gt; 1.1)\n    capistrano3-puma (3.1.0)\n      capistrano (~&gt; 3.7)\n      capistrano-bundler\n      puma (~&gt; 3.4)\n    coffee-rails (4.2.1)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.2.x)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.12.2)\n    concurrent-ruby (1.0.5)\n    devise (4.3.0)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0, &lt; 5.2)\n      responders\n      warden (~&gt; 1.2.3)\n    erubis (2.7.0)\n    execjs (2.7.0)\n    formtastic (3.1.5)\n      actionpack (&gt;= 3.2.13)\n    formtastic_i18n (0.6.0)\n    globalid (0.4.0)\n      activesupport (&gt;= 4.2.0)\n    haml (5.0.1)\n      temple (&gt;= 0.8.0)\n      tilt\n    has_scope (0.7.1)\n      actionpack (&gt;= 4.1, &lt; 5.2)\n      activesupport (&gt;= 4.1, &lt; 5.2)\n    i18n (0.8.1)\n    inherited_resources (1.7.2)\n      actionpack (&gt;= 3.2, &lt; 5.2.x)\n      has_scope (~&gt; 0.6)\n      railties (&gt;= 3.2, &lt; 5.2.x)\n      responders\n    jbuilder (2.6.4)\n      activesupport (&gt;= 3.0.0)\n      multi_json (&gt;= 1.2)\n    jquery-rails (4.3.1)\n      rails-dom-testing (&gt;= 1, &lt; 3)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    jquery-ui-rails (6.0.1)\n      railties (&gt;= 3.2.16)\n    kaminari (1.0.1)\n      activesupport (&gt;= 4.1.0)\n      kaminari-actionview (= 1.0.1)\n      kaminari-activerecord (= 1.0.1)\n      kaminari-core (= 1.0.1)\n    kaminari-actionview (1.0.1)\n      actionview\n      kaminari-core (= 1.0.1)\n    kaminari-activerecord (1.0.1)\n      activerecord\n      kaminari-core (= 1.0.1)\n    kaminari-core (1.0.1)\n    loofah (2.0.3)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.5)\n      mime-types (&gt;= 1.16, &lt; 4)\n    method_source (0.8.2)\n    mime-types (3.1)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2016.0521)\n    mini_portile2 (2.1.0)\n    minitest (5.10.2)\n    multi_json (1.12.1)\n    net-scp (1.2.1)\n      net-ssh (&gt;= 2.6.5)\n    net-ssh (4.1.0)\n    nio4r (2.0.0)\n    nokogiri (1.7.2)\n      mini_portile2 (~&gt; 2.1.0)\n    orm_adapter (0.5.0)\n    polyamorous (1.3.1)\n      activerecord (&gt;= 3.0)\n    puma (3.8.2)\n    rack (2.0.3)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (5.0.3)\n      actioncable (= 5.0.3)\n      actionmailer (= 5.0.3)\n      actionpack (= 5.0.3)\n      actionview (= 5.0.3)\n      activejob (= 5.0.3)\n      activemodel (= 5.0.3)\n      activerecord (= 5.0.3)\n      activesupport (= 5.0.3)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 5.0.3)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.0.3)\n      loofah (~&gt; 2.0)\n    railties (5.0.3)\n      actionpack (= 5.0.3)\n      activesupport (= 5.0.3)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (12.0.0)\n    ransack (1.8.2)\n      actionpack (&gt;= 3.0)\n      activerecord (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      i18n\n      polyamorous (~&gt; 1.3)\n    responders (2.4.0)\n      actionpack (&gt;= 4.2.0, &lt; 5.3)\n      railties (&gt;= 4.2.0, &lt; 5.3)\n    sass (3.4.24)\n    sass-rails (5.0.6)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n        sprockets (3.7.1)\n          concurrent-ruby (~&gt; 1.0)\n          rack (&gt; 1, &lt; 3)\n        sprockets-rails (3.2.0)\n          actionpack (&gt;= 4.0)\n          activesupport (&gt;= 4.0)\n          sprockets (&gt;= 3.0.0)\n        sqlite3 (1.3.13)\n        sshkit (1.13.1)\n          net-scp (&gt;= 1.1.2)\n          net-ssh (&gt;= 2.8.0)\n        temple (0.8.0)\n        thor (0.19.4)\n        thread_safe (0.3.6)\n        tilt (2.0.7)\n        turbolinks (5.0.1)\n          turbolinks-source (~&gt; 5)\n        turbolinks-source (5.0.3)\n        tzinfo (1.2.3)\n          thread_safe (~&gt; 0.1)\n        tzinfo-data (1.2017.2)\n          tzinfo (&gt;= 1.0.0)\n        uglifier (3.2.0)\n          execjs (&gt;= 0.3.0, &lt; 3)\n        warden (1.2.7)\n          rack (&gt;= 1.0)\n        web-console (3.5.1)\n          actionview (&gt;= 5.0)\n          activemodel (&gt;= 5.0)\n          bindex (&gt;= 0.4.0)\n          railties (&gt;= 5.0)\n        websocket-driver (0.6.5)\n          websocket-extensions (&gt;= 0.1.0)\n        websocket-extensions (0.1.2)\n\n    PLATFORMS\n      ruby\n\n    DEPENDENCIES\n      activeadmin\n      byebug\n      capistrano (~&gt; 3.0)\n      capistrano-bundler\n      capistrano-rails\n      capistrano-rbenv!\n      capistrano3-puma\n      coffee-rails (~&gt; 4.2)\n      devise\n      haml\n      jbuilder (~&gt; 2.5)\n      jquery-rails\n      puma (~&gt; 3.0)\n      rails (~&gt; 5.0.0)\n      sass-rails (~&gt; 5.0)\n      sqlite3\n      turbolinks (~&gt; 5)\n      tzinfo-data\n      uglifier (&gt;= 1.3.0)\n      web-console\n\n    BUNDLED WITH\n       1.14.6\n</code></pre>\n\n<p>What am I doing wrong? Did I forget something?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1495646277, "post_id": 44164539, "comment_id": 75346075, "body": "What&#39;s wrong with <code>def repeat(str, count = 2) str * count end</code>?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495646543, "post_id": 44164539, "comment_id": 75346226, "body": "@J&#246;rgWMittag you beat me to it. On side note as it stands now (i.e. default args[1] to 1) <code>repeat</code> without a count will not &quot;repeat&quot; because <code>1-1 =0</code> so the while loop will end."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1495646547, "post_id": 44164539, "comment_id": 75346229, "body": "There&#39;s absolutely no reason to use a <i>Variable-Length Argument List</i> here. It&#39;s slower, it&#39;s more code, and it&#39;s less clear."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 3, "last_activity_date": 1495648311, "last_edit_date": 1495648311, "creation_date": 1495645514, "answer_id": 44164642, "question_id": 44164539, "link": "https://stackoverflow.com/questions/44164539/how-to-repeating-a-string-in-ruby-one-or-multiple-times/44164642#44164642", "title": "How to repeating a String in Ruby one or multiple times", "body": "<p>Here <code>if args[1] == nil</code> you're validating if the second value in <code>ARGV</code> is <code>nil</code> and setting it as <code>1</code>, but then, in your <code>while</code> statement you're working with <code>second_arg</code>, which already has taken the value for <code>args[1]</code>, so, most probably it won't pass your validation in:</p>\n\n<pre><code>if args[1] == nil\n  args[1] = 1\nend\n</code></pre>\n\n<p>You could try setting <code>second_arg</code> variable inside that validation, instead setting <code>args[1]</code>:</p>\n\n<pre><code>if args[1] == nil\n  second_arg = 1\nend\n</code></pre>\n\n<p>Also \"<em>any statement in Ruby returns the value of the last evaluated expression</em>\", so you can put just <code>str</code> as the last value in your <code>repeat</code> method and this will be evaluated as the return value.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 7926043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a05eeb94cfe09ed7a81a9dbd971998?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/7926043/sisyphe"}, "is_accepted": false, "score": 1, "last_activity_date": 1495645721, "creation_date": 1495645721, "answer_id": 44164712, "question_id": 44164539, "link": "https://stackoverflow.com/questions/44164539/how-to-repeating-a-string-in-ruby-one-or-multiple-times/44164712#44164712", "title": "How to repeating a String in Ruby one or multiple times", "body": "<p>You have to set <code>args[1]</code> before you set <code>second_arg</code>.</p>\n\n<pre><code>def repeat(*args)\n    args[1] = 1 if args[1] == nil\n    str, second_arg, count = \"\", args[1], 1\n\n    while second_arg &gt;= count\n      str += args[0] + \" \"\n      second_arg -= 1\n    end\n\n    return str\nend\n</code></pre>\n\n<p>You can also use the conditional assignment operator instead:</p>\n\n<pre><code># The two lines do the same thing\nargs[1] = 1 if args[1] == nil\nargs[1] ||= 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1495667462, "post_id": 44164987, "comment_id": 75355511, "body": "Not sure who downvoted this, but it&#39;s exactly the first thing that came to my mind."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1554752297, "post_id": 44164987, "comment_id": 97859676, "body": "Not the downvoter, but maybe because of the lack of Ruby verbosity in the code. You can see the unneeded return in a one-line method definition, the for loop, the +=, the + for concatenation, etc."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1554766343, "post_id": 44164987, "comment_id": 97864345, "body": "@SebastianPalma Have you noticed what is says right above that code? &quot;Or if you prefer to manually loop it:&quot;. That code is demonstrative of what <code>join</code> does."}], "tags": [], "owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1495647024, "last_edit_date": 1495647024, "creation_date": 1495646658, "answer_id": 44164987, "question_id": 44164539, "link": "https://stackoverflow.com/questions/44164539/how-to-repeating-a-string-in-ruby-one-or-multiple-times/44164987#44164987", "title": "How to repeating a String in Ruby one or multiple times", "body": "<p>You're completely overcomplicating this. There's absolutely no reason to use a Variable-Length Argument List here. It's slower, it's more code, and it's less clear. The test code says it itself: \"Hint: *default values*\"</p>\n\n<pre><code>def repeat(str, count = 2)\n    return Array.new(count, str).join(\" \")\nend\n</code></pre>\n\n<p>Or if you prefer to manually loop it:</p>\n\n<pre><code>def repeat(str, count = 2)\n    result = str\n\n    for _ in 0...count-1\n        result += \" \" + str\n    end\n\n    return result\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1495686985, "creation_date": 1495686985, "answer_id": 44172356, "question_id": 44164539, "link": "https://stackoverflow.com/questions/44164539/how-to-repeating-a-string-in-ruby-one-or-multiple-times/44172356#44172356", "title": "How to repeating a String in Ruby one or multiple times", "body": "<pre><code>\"hello\" * 5 # =&gt; \"hellohellohellohellohello\"\n\nArray.new(5, \"hello\").join(\" \") # =&gt; \"hello hello hello hello hello\"\n</code></pre>\n"}], "owner": {"reputation": 4684, "user_id": 1315857, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0RojV.jpg?s=128&g=1", "display_name": "Antonio Pavicevac-Ortiz", "link": "https://stackoverflow.com/users/1315857/antonio-pavicevac-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1495686985, "creation_date": 1495645212, "last_edit_date": 1495659594, "question_id": 44164539, "link": "https://stackoverflow.com/questions/44164539/how-to-repeating-a-string-in-ruby-one-or-multiple-times", "title": "How to repeating a String in Ruby one or multiple times", "body": "<p>How do I repeat a String in Ruby one or multiple times?</p>\n\n<pre><code>def repeat(*args)\n  str, second_arg, count = \"\", args[1], 1\n   if args[1] == nil\n     args[1] = 1\n   end\n    while second_arg &gt;= count\n      str += args[0] + \" \"\n      second_arg -= 1\n    end\n\n  return str\nend\n</code></pre>\n\n<p>My outlined test is:</p>\n\n<pre><code>describe \"repeat\" do\n    it \"should repeat\" do\n      expect(repeat(\"hello\")).to eq(\"hello hello\")\n    end\n\n    # Wait a second! How can you make the \"repeat\" method\n    # take one *or* two arguments?\n    #\n    # Hint: *default values*\n    it \"should repeat a number of times\" do\n      expect(repeat(\"hello\", 3)).to eq(\"hello hello hello\")\n    end\n  end\n</code></pre>\n\n<p>If <code>argument[1]</code> is missing I want to fill it with the value \"1\" so it will at least return 1.</p>\n\n<p>This is my error:</p>\n\n<pre><code>Failures:\n\n  1) Simon says repeat should repeat\n     Failure/Error: expect(repeat(\"hello\")).to eq(\"hello hello\")\n     NoMethodError:\n       undefined method `&gt;=' for nil:NilClass\n     # ./lib/03_simon_says.rb:14:in `repeat'\n     # ./spec/03_simon_says_spec.rb:39:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "fixtures", "paper-trail-gem"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1495645365, "post_id": 44164297, "comment_id": 75345566, "body": "Going out on a limb here, do object_changes need to be in double quotes?"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1495653238, "post_id": 44164297, "comment_id": 75349681, "body": "What kind of error messages do you get? Is the value for <code>object_changes</code> really evaluated <b>twice</b> to get the double backslashes out of the loaded YAML (for which they are <b>not</b> escape sequences, i.e. <code>\\\\n</code> loads as 3 characters  ). What is your exact question? Whether there is an alternative for paper_trail? How to convert the YAML to JSON? If you can write the test using XML?"}, {"owner": {"reputation": 2356, "user_id": 6090736, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d286da5594a779a224fe4d4ff72df1c5?s=128&d=identicon&r=PG&f=1", "display_name": "lgants", "link": "https://stackoverflow.com/users/6090736/lgants"}, "edited": false, "score": 0, "creation_date": 1495655429, "post_id": 44164297, "comment_id": 75350760, "body": "I actually don&#39;t receive an error when loading fixtures with db:fixtures:load, but there are no versions loaded when prying into the tests. I&#39;d definitely like to continue using paper_trail. And, it was my understanding that I needed to escape the new line characters, hence the additional &#39;\\&#39;. I&#39;m very new to fixtures since I prefer factories. In a nutshell, I&#39;m looking to see if there are any apparent syntax errors or other hiccups that those with paper_trail experience might know about that would prevent the fixtures from loading. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2356, "user_id": 6090736, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d286da5594a779a224fe4d4ff72df1c5?s=128&d=identicon&r=PG&f=1", "display_name": "lgants", "link": "https://stackoverflow.com/users/6090736/lgants"}, "is_accepted": true, "score": 1, "last_activity_date": 1496682108, "creation_date": 1496682108, "answer_id": 44373983, "question_id": 44164297, "link": "https://stackoverflow.com/questions/44164297/rails-yaml-fixture-error-with-papertrail-gem/44373983#44373983", "title": "Rails YAML Fixture Error with PaperTrail gem", "body": "<p>I eventually got the fixture to load by adding the following to test_helper.rb:</p>\n\n<p><code>self.set_fixture_class versions: PaperTrail::Version</code></p>\n\n<p>And, the with following yaml syntax:</p>\n\n<pre><code>version_001:\n  id: 1\n  item_type: 'DistributionChannel'\n  item_id: 1\n  event: 'create'\n  whodunnit: &lt;%= ActiveRecord::FixtureSet.identify('user_example').to_s %&gt;\n  object: nil\n  created_at: 2017-05-15 12:00:00\n  object_changes: \"---\\nid:\\n- \\n- 1\\nprimary_channel:\\n- \\n- Best Buy\\nsecondary_channel:\\n- \\n- ''\\ncreated_at:\\n- \\n- 2017-05-15 12:00:00.000000000 Z\\nupdated_at:\\n- \\n- 2017-05-15 12:00:00.000000000 Z\\n\"\n</code></pre>\n\n<p>The addition to test_helper.rb is necessary because the Version table is namespaced within PaperTrail. I've seen some conflicting info about appropriate yaml syntax, so I'm hesitant to explain my theories why that yaml syntax worked (any explanations in comments would be greatly appreciated). But, hopefully this will help point someone in the right direction when testing paper_trail with Minitest and using fixtures. </p>\n"}, {"tags": [], "owner": {"reputation": 1058, "user_id": 921859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/296498f984c29f8ec635c1ac375435ce?s=128&d=identicon&r=PG", "display_name": "Fumisky Wells", "link": "https://stackoverflow.com/users/921859/fumisky-wells"}, "is_accepted": false, "score": 1, "last_activity_date": 1514347105, "creation_date": 1514347105, "answer_id": 47986154, "question_id": 44164297, "link": "https://stackoverflow.com/questions/44164297/rails-yaml-fixture-error-with-papertrail-gem/47986154#47986154", "title": "Rails YAML Fixture Error with PaperTrail gem", "body": "<p>I faced with the similar issue.  When I didn't use <code>versions</code> fixture (there was no versions fixture YAML file), this caused that <code>versions</code> table was not cleared on <code>rake db:fixtures:load</code> so that this quite confused me on development environment debugging.</p>\n\n<p>In order to avoid this issue, I introduced <code>versions</code> fixture as follows:</p>\n\n<ol>\n<li>Locate fixture file to test/fixtures/paper_trail/versions.yml so that it is automatically loaded by rake task.</li>\n<li><p>Writing <code>object_changes</code> data by hand is quite tedious task so that let's use <code>to_yaml</code> method to generate it as follows.  Creating and/or updating an AR generates version record so that following at command-line generates yaml file to tmp/versions.yml:</p>\n\n<pre><code>$ rails console\nirb&gt; File.write('tmp/versions.yml', PaperTrail::Version.all.map{|v| v.attributes}.to_yaml)\n</code></pre></li>\n<li><p>edit tmp/versions.yml as follows and save it to test/fixtures/paper_trail/versions.yml:</p>\n\n<pre><code>version_001:\n  item_type:  DistributionChannel\n  item:       distribution_001\n  event:      create\n  whodunnit:  ...\n  created_at: 2017-12-27 02:25:33.000000000 Z\n  object_changes: \"... (keep as above to_yaml generated)...\"\n</code></pre></li>\n<li>Now, run <code>rake db:fixtures:load</code>!  It should load version fixture to PaperTrail::Version AR and distribution_001 record <code>.versions</code> method should contain it.</li>\n</ol>\n\n<p>NOTE-1: <code>item</code> above is <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveRecord/FixtureSet.html\" rel=\"nofollow noreferrer\">Label Reference</a></p>\n\n<p>NOTE-2: <code>whodunnit</code> should be the same.  See <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveRecord/FixtureSet.html\" rel=\"nofollow noreferrer\">Fixture label interpolation</a></p>\n"}], "owner": {"reputation": 2356, "user_id": 6090736, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d286da5594a779a224fe4d4ff72df1c5?s=128&d=identicon&r=PG&f=1", "display_name": "lgants", "link": "https://stackoverflow.com/users/6090736/lgants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 44373983, "answer_count": 2, "score": 0, "last_activity_date": 1514347105, "creation_date": 1495644474, "last_edit_date": 1495653015, "question_id": 44164297, "link": "https://stackoverflow.com/questions/44164297/rails-yaml-fixture-error-with-papertrail-gem", "title": "Rails YAML Fixture Error with PaperTrail gem", "body": "<p>I'm trying to create a rails fixture for testing a controller that fetches versions persisted with the <a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow noreferrer\">paper_trail</a> gem (7.0.1). But, I've thus far been unable to populate any versions within fixtures to test against. And, it appears that the YAML file isn't loading/is breaking other tests. Here's the contents of my `versions.yml`` file:</p>\n\n<pre><code>---\nversion_001:\n  id: 1\n  item_type: 'DistributionChannel'\n  item_id: 1\n  event: 'create'\n  whodunnit: &lt;%= User.find_by(email: 'user@example.com').id.to_s %&gt;\n  object: nil\n  created_at: 2017-05-15 12:00:00.000000000 Z\n  object_changes: '---\\\\nid:\\\\n- \\\\n- 1\\\\nprimary_channel:\\\\n- \\\\n- Best Buy\\\\nsecondary_channel:\\\\n- \\\\n- ''\\ncreated_at:\\\\n- \\\\n- 2017-05-15 12:00:00.000000000 Z\\\\nupdated_at:\\\\n- \\\\n- 2017-05-15 12:00:00.000000000 Z\\\\n'\n</code></pre>\n\n<p>The schema contains the versions table with the appropriate columns btw. </p>\n"}, {"tags": ["ruby", "regex", "case-statement"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8021370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495489ccdc31bec8f9b97512a3fd6261?s=128&d=identicon&r=PG&f=1", "display_name": "qaminded", "link": "https://stackoverflow.com/users/8021370/qaminded"}, "edited": false, "score": 0, "creation_date": 1495649292, "post_id": 44164673, "comment_id": 75347734, "body": "This also worked! I guess I was the one confused. And I will definitely see what I can do about creating a method for this. Thanks!"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1495645611, "creation_date": 1495645611, "answer_id": 44164673, "question_id": 44164160, "link": "https://stackoverflow.com/questions/44164160/how-do-i-write-a-conditional-ruby-case-statement-with-parameters-passed-into-the/44164673#44164673", "title": "How do I write a conditional Ruby case statement with parameters passed into the case?", "body": "<p>Ruby is not \"confused\" you just only have 2 cases:</p>\n\n<pre><code>case record_type &amp;&amp; role_type == 'RoleA' # true or false \n</code></pre>\n\n<p>because <code>record_type &amp;&amp; role_type == 'RoleA'</code> will only evaluate to true or false I think more what you are looking for is:</p>\n\n<pre><code>case role_type\n  when 'RoleA'\n    case record_type\n       when 'New'\n         #do something\n       when 'Updated'\n         #do something\n    end\n when 'RoleB'\n    case record_type\n       when 'New'\n         #do something\n       when 'Updated'\n         #do something\n   end\nend\n</code></pre>\n\n<p>That being said I would recommend looking into whether refactoring this is possible into something simpler like </p>\n\n<pre><code>def new_record(role_type)\n  if role_type == 'RoleA'\n    #do something\n  elsif role_type == 'RoleB'\n    #do something\n  end \nend\n\ndef updated_record(role_type)\n  if role_type == 'RoleA'\n    #do something\n  elsif role_type == 'RoleB'\n    #do something\n  end\nend \n\nacceptable_record_types = ['New','Updated']\npublic_send(\"#{record_type.downcase}_record\",role_type) if acceptable_record_types.include?(record_type)\n</code></pre>\n\n<p>This could be refactored even more if I understood the similarities between <code>#do something</code></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8021370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495489ccdc31bec8f9b97512a3fd6261?s=128&d=identicon&r=PG&f=1", "display_name": "qaminded", "link": "https://stackoverflow.com/users/8021370/qaminded"}, "edited": false, "score": 0, "creation_date": 1495649256, "post_id": 44164819, "comment_id": 75347709, "body": "This worked, thank you! And now I&#39;m clearer on how the &amp;&amp; operator resolves."}], "tags": [], "owner": {"reputation": 324, "user_id": 7052392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db12a1a0d2b5892c8abfa9d066e3c20?s=128&d=identicon&r=PG&f=1", "display_name": "steenuil", "link": "https://stackoverflow.com/users/7052392/steenuil"}, "is_accepted": true, "score": 2, "last_activity_date": 1495646051, "creation_date": 1495646051, "answer_id": 44164819, "question_id": 44164160, "link": "https://stackoverflow.com/questions/44164160/how-do-i-write-a-conditional-ruby-case-statement-with-parameters-passed-into-the/44164819#44164819", "title": "How do I write a conditional Ruby case statement with parameters passed into the case?", "body": "<p>You can't pass an \"argument\" to <code>case</code>. The first term after <code>case</code> is an expression that returns the object it will match upon, and the expression you put in returns either <code>true</code> or <code>false</code>. You can either put it all inside an <code>if</code> expression, or put the two objects in an array and match on the whole array:</p>\n\n<pre><code>case [record_type, role_type]\nwhen ['New', 'RoleA']\n  ...\nwhen ['New', 'RoleB']\n  ...\nwhen ['Updated', 'RoleA']\n  ...\nwhen ['Updated', 'RoleB']\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8021370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495489ccdc31bec8f9b97512a3fd6261?s=128&d=identicon&r=PG&f=1", "display_name": "qaminded", "link": "https://stackoverflow.com/users/8021370/qaminded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 44164819, "answer_count": 2, "score": 1, "last_activity_date": 1495659808, "creation_date": 1495644076, "last_edit_date": 1495659808, "question_id": 44164160, "link": "https://stackoverflow.com/questions/44164160/how-do-i-write-a-conditional-ruby-case-statement-with-parameters-passed-into-the", "title": "How do I write a conditional Ruby case statement with parameters passed into the case?", "body": "<p>I'm trying to figure out a way for a <code>case</code> statement to take into account two parameters passed in from a regex. </p>\n\n<p>My regex example is:</p>\n\n<p>When <code>(/^(?:a|an|the) (RoleA|RoleB)</code> attempts to access a <code>(New|Updated) Record$/)</code> do <code>|role_type, record_type|</code>.</p>\n\n<p>I have a <code>case</code> statement that only accounts for role type right now, but how do I also have the case portion account for <code>role_type</code> and <code>record_type</code>?</p>\n\n<p>My goal is to test that Role A is directed to a different set of endpoints when the record type is \"New\" or \"Updated\" and I want Role B to be directed to another set of endpoints when passing in \"New\" and \"Updated\". If they were being passed into the same endpoints, then a case statement for <code>record_type</code> only would suffice.</p>\n\n<p>What I have right now is:</p>\n\n<pre><code>case record_type\n   when 'New'\n     &lt;do something&gt;\n   when 'Updated'\n     &lt;do something&gt;\n end\n</code></pre>\n\n<p>I'd like to  switch the behavior based on what the role is. This  didn't work:</p>\n\n<pre><code>case record_type &amp;&amp; role_type == 'RoleA'\n   when 'New'\n     &lt;do something&gt;\n   when 'Updated'\n     &lt;do something&gt;\n end\n\ncase record_type &amp;&amp; role_type == 'RoleB'\n   when 'New'\n     &lt;do something&gt;\n   when 'Updated'\n     &lt;do something&gt;\n end\n</code></pre>\n\n<p>This code is skipped over and I'm assuming that Ruby is confused about which statement to use.</p>\n"}, {"tags": ["ios", "ruby", "selenium", "appium"], "comments": [{"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "edited": false, "score": 0, "creation_date": 1495709158, "post_id": 44163917, "comment_id": 75371198, "body": "I have managed to find a solution to this issue. Thanks to anyone who tried to work on this."}, {"owner": {"reputation": 957, "user_id": 604131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acde3f47ffe10bf9d823951fe5e8b284?s=128&d=identicon&r=PG", "display_name": "Mark Lapierre", "link": "https://stackoverflow.com/users/604131/mark-lapierre"}, "edited": false, "score": 0, "creation_date": 1495732389, "post_id": 44163917, "comment_id": 75386162, "body": "If you have a solution why not post it as an answer for anyone else who has a similar problem?"}], "owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495643326, "creation_date": 1495643326, "question_id": 44163917, "link": "https://stackoverflow.com/questions/44163917/invalid-argument-for-class-used-xcuielementtypeapp", "title": "Invalid argument for class used &#39;XCUIElementTypeapp&#39;", "body": "<p>I am getting the below error message</p>\n\n<pre><code>Selenium::WebDriver::Error::NoSuchElementError: An element could not be \nlocated on the page using the given search parameters.\n</code></pre>\n\n<p>I am using appium in conjunction with ruby and cucumber. Within appium I am getting the below error.</p>\n\n<pre><code>[JSONWP Proxy] Proxying [POST /element] to [POST \nhttp://localhost:8100/session/A17F852A-3E7A-40D1-9626-\n9E9BC666F16A/element] with body: {\"using\":\"class \nname\",\"value\":\"XCUIElementTypeapp\"}\n[JSONWP Proxy] Got response with status 200: {\"value\":\"Invalid argument \nfor class used 'XCUIElementTypeapp'. Did you mean \nXCUIElementTypeXCUIElementTypeapp?\",\"sessionId\":\"A17F852A-3E7A-40D1-\n9626-9E9BC666F16A\",\"status\":15}\n[HTTP] &lt;-- POST /wd/hub/session/a7ea0c9d-5aab-4780-a24c-\n15e20c8aa5d8/element 500 44 ms - 164\n</code></pre>\n\n<p>I currently using XUITest for Xcode. I have searched online but not able to find out why the javascript cannot be located when the ios emulator has started.</p>\n\n<p>Can somebody please help? </p>\n"}, {"tags": ["ruby", "rspec", "capybara", "acceptance-testing", "capybara-webkit"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1495690388, "post_id": 44163816, "comment_id": 75361208, "body": "If you know how the sound is created (e.g. an <code>&lt;audio&gt;</code> node) you may be able to mute it through Javascript (<code>execute_script</code>). See <a href=\"https://stackoverflow.com/questions/23084472/disable-sound-in-browser-window-with-js-or-jquery\">disable-sound-in-browser-window-with-js-or-jquery</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4978, "user_id": 3033649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d885e80c88f3969d451d513c6a73c802?s=128&d=identicon&r=PG", "display_name": "markets", "link": "https://stackoverflow.com/users/3033649/markets"}, "is_accepted": true, "score": 1, "last_activity_date": 1495708330, "last_edit_date": 1495708330, "creation_date": 1495647010, "answer_id": 44165087, "question_id": 44163816, "link": "https://stackoverflow.com/questions/44163816/disable-sound-in-capybara-webkit/44165087#44165087", "title": "Disable sound in capybara-webkit", "body": "<p>It seems that <code>capybara-webkit</code> doesn't expose this setting, as <code>Qt</code> (<code>capybara-webkit</code> depends on a WebKit implementation from <code>Qt</code>) doesn't expose it either. </p>\n\n<p>Ref: <a href=\"https://github.com/thoughtbot/capybara-webkit/issues/555\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/capybara-webkit/issues/555</a></p>\n\n<p>But you probably can achieve it with other approaches like:</p>\n\n<ul>\n<li>Execute javascript to remove the audio tags or mute the player:</li>\n</ul>\n\n<p><code>page.execute_script(\"your_js_here\")</code></p>\n\n<ul>\n<li>Block the audio urls:</li>\n</ul>\n\n<p><code>config.block_url(\"example.com/path_to_audio_files/*\")</code></p>\n"}], "owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 44165087, "answer_count": 1, "score": 2, "last_activity_date": 1495708330, "creation_date": 1495643042, "last_edit_date": 1495646700, "question_id": 44163816, "link": "https://stackoverflow.com/questions/44163816/disable-sound-in-capybara-webkit", "title": "Disable sound in capybara-webkit", "body": "<p>I'm running a website signup spec with</p>\n\n<pre><code>Capybara.javascript_driver = :webkit\n</code></pre>\n\n<p>I noticed that when the test completes the signup, the \"successful signup\" sound (the one that can be heard when signing up from a \"normal\" browser) starts.</p>\n\n<p>I think this is the normal behaviour, but my questions are:</p>\n\n<ul>\n<li>Is there a way to disable sounds in capybara-webkit?</li>\n<li>Is there a way to mute the browser instance?</li>\n</ul>\n\n<p>Like when we want to not load images and we use <code>config.skip_image_loading</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arguments"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1495643638, "last_edit_date": 1495643638, "creation_date": 1495643110, "answer_id": 44163847, "question_id": 44163758, "link": "https://stackoverflow.com/questions/44163758/ruby-argument-error-in-convert-function/44163847#44163847", "title": "Ruby Argument error in convert function", "body": "<p>TL;DR \u2013 Use <code>convert(snippet, phrase)</code> instead of <code>convert[snippet, phrase]</code></p>\n\n<hr>\n\n<p>When you write</p>\n\n<pre><code>convert[snippet, phrase]\n</code></pre>\n\n<p>... it is equivalent to:</p>\n\n<pre><code>convert()[snippet, phrase]\n</code></pre>\n\n<p>Adding a space:</p>\n\n<pre><code>convert [snippet, phrase]\n</code></pre>\n\n<p>... would call the method with an array:</p>\n\n<pre><code>convert([snippet, phrase])\n</code></pre>\n\n<p>To actually call the method with two arguments, use:</p>\n\n<pre><code>convert(snippet, phrase)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>convert snippet, phrase\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8032239, "user_type": "registered", "profile_image": "https://graph.facebook.com/2270700966487613/picture?type=large", "display_name": "Ben Sinkhorn", "link": "https://stackoverflow.com/users/8032239/ben-sinkhorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495643638, "creation_date": 1495642858, "question_id": 44163758, "link": "https://stackoverflow.com/questions/44163758/ruby-argument-error-in-convert-function", "title": "Ruby Argument error in convert function", "body": "<p>I am trying to run a program from a book that I am learning ruby from, but I keep getting this error no matter how I try to fix it</p>\n\n<pre><code>ex41.rb:70:in `convert': wrong number of arguments (0 for 2) (ArgumentError)\n    from ex41.rb:117:in `block (2 levels) in &lt;main&gt;'\n    from ex41.rb:113:in `each'\n    from ex41.rb:113:in `block in &lt;main&gt;'\n    from ex41.rb:108:in `loop'\n    from ex41.rb:108:in `&lt;main&gt;'\n</code></pre>\n\n<p>I do understand that I have the wrong number of arguments, but the thing is I can't find where I'm getting them wrong, could someone please explain this to me? For convienience I put (LINE XXX(as a number)) by the lines that cause me trouble. Thank you.</p>\n\n<pre><code># calls external file from web\nrequire 'open-uri'\n\n# assigns WORD_URL to website\nWORD_URL = \"http://learncodethehardway.org/words.txt\"\n# creates empty array WORDS\nWORDS =[]\n\n# creates hash PHRASES\nPHRASES = {\n  \"class ### &lt; ### \\nend\" =&gt;\n    \"Make a class named ### that is-a ###.\",\n  # my assumption is that @@@ ### and the like will sb in words, lets find \n  out\n  \"class ###\\n\\tdef initialize(@@@)\\n\\tend\\nend\" =&gt;\n    \"class ### has-a initialize that takes @@@ parameters.\",\n  \"class ###\\n\\tdef ***(@@@)\\n\\tend\\nend\" =&gt;\n    \"class ### has-a function named *** that takes @@@ parameters.\",\n  \"*** = ###.new()\" =&gt;\n    \"Set *** to an instance of class ###.\",\n  \"***.***(@@@)\" =&gt;\n    \"From *** get the *** function, and call it with parameters @@@\",\n  \"***.*** = '***'\" =&gt;\n    \"From ***, get the *** attribute and set it equal to '***'.\"\n}\n\n# creates variable for first argument if argument is english\nPHRASE_FIRST = ARGV[0] == \"english\"\n\n # opens WORD_URL function and creates function f\n open(WORD_URL) {|f|\n  # for every line in f chomps break character and pushes out word to f\n  f.each_line {|word| WORDS.push(word.chomp)}\n}\n\n# defines function craft_names with variables rand_words, snippet and \npattern, and assigns caps value to false\ndef craft_names(rand_words, snippet, pattern, caps=false)\n  # assigns vriable names to snippet.scan on pattern maps and does the \nfollowing \nfunction\n  names = snippet.scan(pattern).map do\n    # assigns word to rand_words that have popped off the end\n    word = rand_words.pop()\n    # Guessing again, maybe capitalizes the first word\n    caps ? word.capitalize : word\n    # ends do\n  end\n\n  # returns names twice\n  return names * 2\n  # ends craft_names function\nend\n\n    # defines function craft_params with variables rand_words snippet, and \n      pattern\ndef craft_params(rand_words, snippet, pattern)\n# assigns names to action scan  with variable pattern with action \n# length on beginning part of array to snippet and runs the following \n# function using map\n  names = (0...snippet.scan(pattern).length).map do\n    # assigns variable param_count to an action that takes a random 3 and adds one to it\n    param_count = rand(3) + 1\n    # assigns variable params to one long ass action that maps 0 to param_count \nvalue and pops out the last word\n    params = (0...param_count).map { |x| rand_words.pop() }\n    # joins params list, (I'm sure its a list) with string ,\n    params.join(\", \")\n    # ends names for loop\n  end\n\n  # returns names twice\n  return names * 2\n# ends craft_params function\nend\n\n# defines convert function with variables snippet and phrase\n(LINE 70) def convert(snippet, phrase)\n  # sords words randomly and assigns words to rand_words\n  rand_words = WORDS.sort_by {rand}\n  # assigns class names to function craft mnames on rand_words, snippet /###/, and caps=true\n  class_names = craft_names(rand_words, snippet, /###/, caps=true)\n  # assigns other_names to craft_names with variables rand_words, snippet, and /\\*\\*\\*/\n  other_names = craft_names(rand_words, snippet, /\\*\\*\\*/)\n  # assigns param_names to craft_params with rand_words, snippet, and @@@ as variables\n  param_names = craft_params(rand_words, snippet, /@@@/)\n\n  # assigns  empty array results\n  results = []\n\n\n  # on all variables snippet and phrase matchups perform the function \n sentence\n [snippet, phrase].each do |sentence|\n\n    # fake class names, also copies sentence\n    result = sentence.gsub(/###/) {|x| param_names.pop}\n\n    # fake other names\n    result.gsub!(/\\*\\*\\*/)\n\n    # fake parameter lists\n    result.gsub!(/@@@/)\n\n    # returns result\n    results.push(result)\n    # ends function\n  end\n\n  # returns results\n  return results\n   # ends convert function\nend\n\n# keep going until they hit ctrl-d\n# continual loop\n(LINE 108)loop do\n  # assigns variable snippets to Prases.keys  and sorts randomly\n  snippets = PHRASES.keys().sort_by {rand}\n\n # for snippet in snippets\n  (LINE113) snippets.each do |snippet|\n    # assigns PHRASES on snippet to phrase\n    phrase = PHRASES[snippet]\n    # asssigns question and answer to converted snippet and phrase \n    #respectively\n    (LINE117)question, answer = convert[snippet, phrase]\n\n    # if values in phrase firs are equal to answer, question\n    if PHRASE_FIRST\n       # question, answer = answer, question\n      question, answer = answer, question\n    # ends if\n    end\n    # prints question, two line breaks, and &gt; without line break\n    print question, \"\\n\\n&gt; \"\n\n    # closes program unless input\n    exit(0) unless $stdin.gets\n\n    # prints line break ANSWER: answer line break line break\n      puts \"\\nANSWER: %s\\n\\n\"\n\n    # ends unless\n  end\n  # ends loop\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "actionmailer"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495640040, "post_id": 44162731, "comment_id": 75342173, "body": "Might be a silly question but is <code>@agent</code> defined in the building leads controller? Alternatively you could maybe try passing the <code>@agent.id</code>, here, this will tell you if @agent is not defined or not a single record for some reason. Or depending on the object logic, you could create belongs_to / through associations and get all of this data from one object. <code>@building_lead.building_id</code>, <code>@building_lead.agent_id</code> etc"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495640334, "post_id": 44162731, "comment_id": 75342403, "body": "@whodini9 agent_id is included in the strong params. Do you mean adding a method for agent in the create section?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495640648, "post_id": 44162731, "comment_id": 75342639, "body": "I just mean if a @building_lead references a particular @building or @agent, then you can make an parent/child/sibling association so that you only have to pass one child, rather than passing 4 different models to your mailer. For example in a sports app I could pass only @player to the mailer, and then call <code>@player.coach.id</code> or <code>@player.team.name</code>. This prevents problems if for some reason <code>@coach</code> or <code>@team</code> aren&#39;t defined in the controller, but if these other models aren&#39;t directly related its not a solution. The problem is <code>@agent</code> does not exist in your mailer"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 2, "creation_date": 1495641785, "post_id": 44162731, "comment_id": 75343412, "body": "<code>@agent</code> is <code>nil</code>, so it can&#39;t respond to <code>email</code> method. Show us how are you setting <code>@agent</code> in your controller."}], "owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495639734, "creation_date": 1495639734, "question_id": 44162731, "link": "https://stackoverflow.com/questions/44162731/rails-4-mailer-issue-using-multiple-models", "title": "Rails 4 Mailer Issue, Using Multiple Models", "body": "<p>I am using 4 models and trying to configure one mailer. I have an <code>agent</code> model, a <code>building</code> model, a <code>building_lead</code> model, and a <code>building_agent</code> model. When an end user submits a lead it should trigger a mailer that sends the info to the agents associated with that building. I am coming up short and not sure what I am missing.</p>\n\n<p>building_lead_mailer.rb:</p>\n\n<pre><code>class BuildingLeadMailer &lt; ActionMailer::Base\n  default from: \"&lt;help@email.com&gt;\"\n\n  def building_lead_notification(agent, building, building_lead, building_agent)\n    @agent = agent\n    @building = building\n    @building_lead = building_lead\n    @building_agent = building_agent\n    mail(to: @agent.email, subject: \"New Building Lead!\")\n  end\nend\n</code></pre>\n\n<p>building_leads_controller:</p>\n\n<pre><code>BuildingLeadMailer.building_lead_notification(@agent, @building, @building_lead, @building_agent).deliver_later\n</code></pre>\n\n<p>building_lead_notification.html.erb:</p>\n\n<pre><code>Hiya &lt;%= @agent.first_name %&gt;,&lt;br&gt;&lt;br&gt;\n\nA lead for &lt;%= @building.primary_address %&gt; has come in. This lead has been distributed to every agent on your building team, so act fast. Their info is below.\n\nName: &lt;%= @building_lead.name %&gt;&lt;br&gt;\nPhone: &lt;%= number_to_phone(@building_lead.phone) %&gt;&lt;br&gt;\nEmail: &lt;%= mail_to @building_lead.email %&gt;\nMove-In: &lt;%= @building_lead.move_in_date %&gt;&lt;br&gt;\nSubmitted: &lt;%= @building_lead.created_at %&gt;\n</code></pre>\n\n<p>I am getting this error even though there is an email column on the agent table.<a href=\"https://i.stack.imgur.com/wmae6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wmae6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495660255, "post_id": 44162627, "comment_id": 75353037, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Provide a working, minimal, example of your code along with the necessary input (minimal HTML) that demonstrates the problem. Asking us to create the HTML wastes our time and slows us when helping you and others. It&#39;s possible to run into <code>&lt; br&gt;</code>, <code>&lt;br &gt;</code>, <code>&lt;br&#47;&gt;</code> or worse. Don&#39;t use regex or string manipulation to change HTML; It&#39;ll make you go nuts. Instead use a parser."}], "answers": [{"tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": false, "score": 2, "last_activity_date": 1495639997, "last_edit_date": 1495639997, "creation_date": 1495639694, "answer_id": 44162715, "question_id": 44162627, "link": "https://stackoverflow.com/questions/44162627/ruby-gsub-br-tags-to-n-n-for-api-but-including-any-whitespace/44162715#44162715", "title": "Ruby - gsub br tags to \\n\\n for API, but including any whitespace", "body": "<p>This'll do it: </p>\n\n<pre><code>module ApiHelper\n  def parse_newlines(string)\n    # Handles &lt;br&gt;, &lt;br/&gt;, &lt;br /&gt;\n    string.gsub(/\\s*&lt;br\\s*?\\/?&gt;\\s*/, \"\\n\\n\")\n  end\nend\n\n# irb\n&gt; parse_newlines(\"     &lt;br&gt;      \")\n=&gt; \"\\n\\n\"\n&gt; parse_newlines(\"     &lt;br /&gt;      \")\n=&gt; \"\\n\\n\"\n&gt; parse_newlines(\"&lt;br /&gt;\")\n=&gt; \"\\n\\n\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1495639824, "creation_date": 1495639824, "answer_id": 44162763, "question_id": 44162627, "link": "https://stackoverflow.com/questions/44162627/ruby-gsub-br-tags-to-n-n-for-api-but-including-any-whitespace/44162763#44162763", "title": "Ruby - gsub br tags to \\n\\n for API, but including any whitespace", "body": "<p>You can try with:</p>\n\n<pre><code>string = 'Lorem &lt;br&gt; Ipsum'\nputs string.gsub(/\\s(&lt;br&gt;)\\s/, '\\n\\n')\n# =&gt; Lorem\\n\\nIpsum\nputs string.gsub(/\\s(&lt;br&gt;)\\s/, \"\\n\\n\")\n# Lorem\n# \n# Ipsum\n</code></pre>\n\n<p>And note the difference between <code>'\\n\\n'</code> and <code>\"\\n\\n\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1304, "user_id": 670127, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ftaqP.jpg?s=128&g=1", "display_name": "Alexandre Abreu", "link": "https://stackoverflow.com/users/670127/alexandre-abreu"}, "is_accepted": false, "score": 1, "last_activity_date": 1495639862, "creation_date": 1495639862, "answer_id": 44162776, "question_id": 44162627, "link": "https://stackoverflow.com/questions/44162627/ruby-gsub-br-tags-to-n-n-for-api-but-including-any-whitespace/44162776#44162776", "title": "Ruby - gsub br tags to \\n\\n for API, but including any whitespace", "body": "<pre><code>module ApiHelper\n  def parse_newlines(string)\n    string.gsub(/\\s*&lt;br&gt;\\s*/, \"\\n\\n\")\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3219, "user_id": 2202674, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NYHNX.jpg?s=128&g=1", "display_name": "Greg Blass", "link": "https://stackoverflow.com/users/2202674/greg-blass"}, "edited": false, "score": 0, "creation_date": 1495717331, "post_id": 44168866, "comment_id": 75376356, "body": "Thanks for all these details! Yeah, I realized that I needed two lines instead of one. The data came from word/excel from the client, and they had these  &#182; symbols, which I mistakenly replaced with only one &lt;br&gt; tag at first. Then realized I couldn&#39;t use the &lt;br&gt; tags in react native, I needed to use /n. Then realized I actually needed two /n."}, {"owner": {"reputation": 3219, "user_id": 2202674, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NYHNX.jpg?s=128&g=1", "display_name": "Greg Blass", "link": "https://stackoverflow.com/users/2202674/greg-blass"}, "edited": false, "score": 0, "creation_date": 1495717354, "post_id": 44168866, "comment_id": 75376377, "body": "Nokogiri seems pretty great. I may have to do some more robust parsing later and this will be helpful. Much appreciated!"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1495734426, "last_edit_date": 1495734426, "creation_date": 1495661796, "answer_id": 44168866, "question_id": 44162627, "link": "https://stackoverflow.com/questions/44162627/ruby-gsub-br-tags-to-n-n-for-api-but-including-any-whitespace/44168866#44168866", "title": "Ruby - gsub br tags to \\n\\n for API, but including any whitespace", "body": "<p>When messing with HTML or XML it's better to use a parser. I'd start with:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML::DocumentFragment.parse(&lt;&lt;EOT)\n&lt;p&gt;this&lt;br&gt;is&lt;br&gt; some &lt;br&gt;\ntext&lt;br&gt;and&lt;br &gt;some&lt;br/&gt;more&lt;/p&gt;\nEOT\n\ndoc.search('br').each { |br| br.replace(\"\\n\\n\") }\ndoc.to_html\n# =&gt; \"&lt;p&gt;this\\n\" +\n#    \"\\n\" +\n#    \"is\\n\" +\n#    \"\\n\" +\n#    \" some \\n\" +\n#    \"\\n\" +\n#    \"\\n\" +\n#    \"text\\n\" +\n#    \"\\n\" +\n#    \"and\\n\" +\n#    \"\\n\" +\n#    \"some\\n\" +\n#    \"\\n\" +\n#    \"more&lt;/p&gt;\\n\"\n</code></pre>\n\n<p>Whitespace in HTML displayed by a browser is gobbled by the browser so space runs, or multiple returns will be reduced to a single space or a single line unless you wrap it with <code>&lt;pre&gt;</code> tags or do something similar.</p>\n\n<p>If you absolutely need to strip spaces before and after where you're inserting new-lines, I'd use an extra step:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML::DocumentFragment.parse(&lt;&lt;EOT)\n&lt;p&gt;this&lt;br&gt;is&lt;br&gt; some &lt;br&gt;\ntext&lt;br&gt;and&lt;br &gt;some&lt;br/&gt;more&lt;/p&gt;\nEOT\n\ndoc.search('p').each do |p|\n  p.inner_html = p.inner_html.gsub(/ +&lt;/, '&lt;').gsub(/&gt; +/, '&gt;')\nend \n\ndoc.to_html\n# =&gt; \"&lt;p&gt;this&lt;br&gt;is&lt;br&gt;some&lt;br&gt;\\n\" +\n#    \"text&lt;br&gt;and&lt;br&gt;some&lt;br&gt;more&lt;/p&gt;\\n\"\n\ndoc.search('br').each { |br| br.replace(\"\\n\\n\") }\ndoc.to_html\n# =&gt; \"&lt;p&gt;this\\n\" +\n#    \"\\n\" +\n#    \"is\\n\" +\n#    \"\\n\" +\n#    \"some\\n\" +\n#    \"\\n\" +\n#    \"\\n\" +\n#    \"text\\n\" +\n#    \"\\n\" +\n#    \"and\\n\" +\n#    \"\\n\" +\n#    \"some\\n\" +\n#    \"\\n\" +\n#    \"more&lt;/p&gt;\\n\"\n</code></pre>\n\n<p>Note: Technically, <code>&lt;br&gt;</code> is equivalent to a single \"\\n\", not \"\\n\\n\". <code>&lt;p&gt;</code> would be two new-lines because that constitutes a paragraph.</p>\n"}], "owner": {"reputation": 3219, "user_id": 2202674, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NYHNX.jpg?s=128&g=1", "display_name": "Greg Blass", "link": "https://stackoverflow.com/users/2202674/greg-blass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 44168866, "answer_count": 4, "score": 0, "last_activity_date": 1495734426, "creation_date": 1495639493, "last_edit_date": 1495717558, "question_id": 44162627, "link": "https://stackoverflow.com/questions/44162627/ruby-gsub-br-tags-to-n-n-for-api-but-including-any-whitespace", "title": "Ruby - gsub br tags to \\n\\n for API, but including any whitespace", "body": "<p>I've got <code>&lt;br&gt;</code> tags in my client's data that I need to replace with '\\n\\n' in my Rails API for a React Native app.</p>\n\n<p>Sometimes there are spaces before or after the <code>&lt;br&gt;</code> tag, or both.</p>\n\n<p>I'm looking for a <code>gsub</code> to say \"any <code>&lt;br&gt;</code> tag, and also include any whitespace before or after it, replace with '\\n\\n'.</p>\n\n<p>Right now I'm doing:</p>\n\n<pre><code>module ApiHelper\n  def parse_newlines(string)\n    string = string.gsub('&lt;br&gt;', '\\n\\n')\n    string = string.gsub(' &lt;br&gt;', '\\n\\n')\n    string = string.gsub('&lt;br&gt; ', '\\n\\n')\n    string = string.gsub(' &lt;br&gt; ', '\\n\\n')\n  end\nend\n</code></pre>\n\n<p>Is there something cleaner?</p>\n\n<p>EDIT: Thanks all. I want to accept both Gavin's and the Tin Man's answers...Gavin because he gave me the down and dirty solution, but Tin Man for such a great/in depth explanation on a more robust way using Nokogiri...</p>\n\n<p>2nd EDIT: I take it back. Tin man...using Nokogiri is actually much more readable. Your argument about using regex's in your comment is valid. In the end your code is easier to understand. Giving you the accepted answer, even though I am using Gavin's for now.</p>\n"}, {"tags": ["ruby", "unit-testing"], "answers": [{"comments": [{"owner": {"reputation": 744, "user_id": 1227012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/10853c3b2a875547b7233f25cd56fcb4?s=128&d=identicon&r=PG", "display_name": "David Nedrow", "link": "https://stackoverflow.com/users/1227012/david-nedrow"}, "edited": false, "score": 0, "creation_date": 1495645024, "post_id": 44163662, "comment_id": 75345360, "body": "How would I do this without checking for the raise_error. IE., how do I call fixtures_project.coverage_files to generate the exit code? I&#39;ve removed the &quot;raise&quot; in the code, so I can&#39;t test for that anymore."}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 744, "user_id": 1227012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/10853c3b2a875547b7233f25cd56fcb4?s=128&d=identicon&r=PG", "display_name": "David Nedrow", "link": "https://stackoverflow.com/users/1227012/david-nedrow"}, "edited": false, "score": 0, "creation_date": 1495705297, "post_id": 44163662, "comment_id": 75368889, "body": "Why don&#39;t you want to have raise_error expectation in there as well? Otherwise, you&#39;ll have to call the method and rescue the exception, which is not a good practice in a spec."}, {"owner": {"reputation": 744, "user_id": 1227012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/10853c3b2a875547b7233f25cd56fcb4?s=128&d=identicon&r=PG", "display_name": "David Nedrow", "link": "https://stackoverflow.com/users/1227012/david-nedrow"}, "edited": false, "score": 0, "creation_date": 1495708230, "post_id": 44163662, "comment_id": 75370626, "body": "In the code under test, if I raise StandardError before I exit(nnn), then the app exits with code 1, rather than the code I want. Then the second expect fails in the unit test. If I exit(nnn) before raising StandardError, then the first expect fails in the test."}], "tags": [], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "is_accepted": true, "score": 2, "last_activity_date": 1495643243, "last_edit_date": 1495643243, "creation_date": 1495642518, "answer_id": 44163662, "question_id": 44162569, "link": "https://stackoverflow.com/questions/44162569/how-do-i-unit-test-a-ruby-app-for-return-codes/44163662#44163662", "title": "How do I unit test a Ruby app for return codes", "body": "<p>You were right in trying to use <code>$?</code> object. Just call <code>$?.exitstatus</code> to get your exit status.</p>\n\n<pre><code>it \"should raise an exception if no unignored project coverage file files were found\" do\n  fixtures_project.ignore_list = [\"*fixturesTests*\", \"*fixtures*\"]\n  expect {fixtures_project.coverage_files}.to raise_error(StandardError)\n  expect($?.exitstatus).to eq(102)\nend\n</code></pre>\n"}], "owner": {"reputation": 744, "user_id": 1227012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/10853c3b2a875547b7233f25cd56fcb4?s=128&d=identicon&r=PG", "display_name": "David Nedrow", "link": "https://stackoverflow.com/users/1227012/david-nedrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 44163662, "answer_count": 1, "score": 1, "last_activity_date": 1495643243, "creation_date": 1495639349, "question_id": 44162569, "link": "https://stackoverflow.com/questions/44162569/how-do-i-unit-test-a-ruby-app-for-return-codes", "title": "How do I unit test a Ruby app for return codes", "body": "<p>I'm not terribly familiar with Ruby testing and my searches haven't yielded an answer to my specific question.</p>\n\n<p>Currently, I have an app that raises StandardError to exit on certain conditions. The drawback to this is that the exit code is always 1.</p>\n\n<p>I want to use exit() to provide unique codes to the exit conditions.</p>\n\n<p>Currently, the project spec tests the StandardError mechanism as follows:</p>\n\n<pre><code>it \"should raise an exception if no unignored project coverage file files were found\" do\n  fixtures_project.ignore_list = [\"*fixturesTests*\", \"*fixtures*\"]\n  expect {fixtures_project.coverage_files}.to raise_error(StandardError)\nend\n</code></pre>\n\n<p>I want to do something like <code>assert($?.exit == 102)</code>, but I still need the fixtures_project.coverage_files to fire before hand in order to get the exit code.</p>\n\n<p>I've tried variations of <code>assert_equal(102, fixtures_project.coverage_files, \"Hello there\")</code> inside the it/end with no luck. I'm sure this is probably simple Ruby, but I haven't <a href=\"https://en.wikipedia.org/wiki/Grok\" rel=\"nofollow noreferrer\">grokked</a> this bit yet.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1495695238, "last_edit_date": 1495695238, "creation_date": 1495638569, "answer_id": 44162332, "question_id": 44162241, "link": "https://stackoverflow.com/questions/44162241/piece-of-ruby-code-is-confusing-super/44162332#44162332", "title": "Piece of Ruby code is confusing - super", "body": "<blockquote>\n  <p>Why would someone do super(name) rather than just write <code>@name = name</code>?</p>\n</blockquote>\n\n<p>Let's look from another angle. Why would someone duplicate [potentially complex] functionality, which already exists in parent class, rather than simply delegate the work to parent?</p>\n\n<p>If you duplicate the functionality and then requirements change, you need to go change all of the copies. This is error-prone and needlessly expensive (in terms of time/efforts).</p>\n"}, {"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1495640097, "creation_date": 1495640097, "answer_id": 44162863, "question_id": 44162241, "link": "https://stackoverflow.com/questions/44162241/piece-of-ruby-code-is-confusing-super/44162863#44162863", "title": "Piece of Ruby code is confusing - super", "body": "<p>I see two different programming best-practices being used here.</p>\n\n<p>First is the best-practice of never duplicating code. You'll often see code like this:</p>\n\n<pre><code>class MyClass\n\n  def blah\n    @blah\n  end\n\n  def do_something\n    puts blah\n  end\n\nend\n</code></pre>\n\n<p>You may wonder \"why does the programmer call the method <code>blah()</code> when they could just use the variable <code>@blah</code> instead? The answer is that <code>@blah</code> may be a simple variable right now, but what if you decide to save it in a hash later, accessible as <code>myData[:blah]</code>? It would be a pain to go through every line of code, searching for every <code>@blah</code> and changing it to <code>myData[:blah]</code>. Using the method <code>blah()</code> ensures that if you ever change the way <code>@blah</code> works, you only have to change it in one place: the method.</p>\n\n<p>The same can be said for <code>super(name)</code> vs <code>@name = name</code>. Right now, the <code>initialize()</code> method for <code>Person</code> might be simple, but someday it might become really complicated. You wouldn't want to have to change the code of every class inheriting <code>Person</code>, so it's best to call <code>super()</code>.</p>\n\n<hr>\n\n<p>Second is the best-practice of encapsulation. Imagine for a second that your code looks like this instead:</p>\n\n<pre><code>require \"person\"\n\nclass Employee &lt; Person\n\n  def initialize(name, salary)\n    super(name)\n    @salary = salary\n  end \n\n  attr_accessor :salary, :name\nend\n</code></pre>\n\n<p>In object-oriented programming, it's common to use libraries made by other people, with classes and objects that you didn't write and don't have the ability to change.</p>\n\n<p>Encapsulation is the idea that a class is a self-sufficient and independent machine. You pass it input data and receive output data, but you have no idea what's going on inside. So in this code, even though <code>Employee</code> inherits <code>Person</code>, <code>Employee</code> shouldn't make any assumptions about what the <code>Person</code> class is doing under the hood. Calling <code>super(name)</code> is trusting <code>Person</code> to set itself up, without worrying about the details of how a <code>Person</code> should be set up.</p>\n\n<p>Even if the two classes are written in the same file and you can see the source code for both, it's important to follow the best practice of encapsulation to keep your code clean and robust for your future self and other programmers, because someday those two classes may be in different files or even different libraries.</p>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 44162332, "answer_count": 2, "score": 0, "last_activity_date": 1495695238, "creation_date": 1495638326, "question_id": 44162241, "link": "https://stackoverflow.com/questions/44162241/piece-of-ruby-code-is-confusing-super", "title": "Piece of Ruby code is confusing - super", "body": "<p>I'm reading Zed Shaw's Ruby introduction book. I came across a piece of code I don't quite understand. </p>\n\n<pre><code>class Person\n\ndef initialize(name)\n    @name = name\n    @pet = nil\nend \n\nattr_accessor :pet\nend \n\nclass Employee &lt; Person\n\ndef initialize(name, salary)\n    super(name)\n    @salary = salary\nend \n\nattr_accessor :salary, :name\nend \n</code></pre>\n\n<p>I understand the super(name) part very roughly. I believe that means it defers to the parent class? I'm not sure I understand why this would be done in the real world. Why would someone do super(name) rather than just write @name = name? </p>\n\n<p>I'm still learning. Thanks in advance!</p>\n"}, {"tags": ["ruby", "sqlite", "sequel"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1495639869, "post_id": 44160541, "comment_id": 75342035, "body": "You want to do this in runtime? My recommendation for all these types of of questions is create another table we&#39;ll call it <code>attributes</code> and another table <code>attribute_values</code> then the model can have many <code>attribute_values</code> which is simply a join of your model.id, attribute.id and then a given value for that attribute. This is extremely flexible and does not require schema change during runtime"}], "answers": [{"tags": [], "owner": {"reputation": 215, "user_id": 3188148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UGJts.jpg?s=128&g=1", "display_name": "Adam Drew", "link": "https://stackoverflow.com/users/3188148/adam-drew"}, "is_accepted": false, "score": 0, "last_activity_date": 1495641696, "creation_date": 1495641696, "answer_id": 44163395, "question_id": 44160541, "link": "https://stackoverflow.com/questions/44160541/add-columns-to-a-table-managed-by-sequel-model/44163395#44163395", "title": "Add columns to a table managed by Sequel Model", "body": "<p>I did a bunch of research and talked to Jeremy Evans. I was going about this wrong. The right way to do this was to remove my schema plugin code and create_table block and move to using migrations. The steps I went through were:</p>\n\n<ol>\n<li>Remove the schema code (create_table, set_schema) from my modesl</li>\n<li>Dump the schema from my current sqlite data files into initial migrations into migration files via the sequel -d command</li>\n<li>Create a new migration that adds the columns I need via add_column calls in an alter_table block in a change block</li>\n<li>Apply the migrations via the sequel -m command</li>\n<li>Create rake tasks to run the migrations and hook those tasks into my deploy tasks</li>\n</ol>\n"}], "owner": {"reputation": 215, "user_id": 3188148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UGJts.jpg?s=128&g=1", "display_name": "Adam Drew", "link": "https://stackoverflow.com/users/3188148/adam-drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495641696, "creation_date": 1495634194, "question_id": 44160541, "link": "https://stackoverflow.com/questions/44160541/add-columns-to-a-table-managed-by-sequel-model", "title": "Add columns to a table managed by Sequel Model", "body": "<p>I'm using Sequel::Model. My model has a set_schema block and a create_table call, so the database is completely managed by the model. The database is sqlite.</p>\n\n<p>I'm trying to add columns to the database and I can't find a way to. Adding fields to the schema has no effect. Adding a migration or an alter_table call doesn't do anything. I've asked on IRC and read the docs. I can't find an example of anyone doing this, but it seems simple.</p>\n\n<p>How do I add a column/field to a Sequel Model?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1495633970, "post_id": 44160378, "comment_id": 75337174, "body": "Are you passing the line into the function? Currently line would be undefined"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1495634374, "post_id": 44160378, "comment_id": 75337529, "body": "You have a string <code>&quot;DateTime.new(1979,1,1) DateTime.new(2012,3,29)&quot;</code>? Why?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495662311, "post_id": 44160378, "comment_id": 75353928, "body": "This could well be an &quot;<a href=\"https://meta.stackexchange.com/q/66377/153968\">XY Problem</a>&quot;. WHY do you have that line in a text file?"}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1495634337, "creation_date": 1495634337, "answer_id": 44160613, "question_id": 44160378, "link": "https://stackoverflow.com/questions/44160378/new-datetime-instead-of-string-in-ruby/44160613#44160613", "title": "New DateTime instead of String in ruby", "body": "<p>Assuming your string is in the correct format, then you're probably looking for:</p>\n\n<pre><code>@date_of_birth = array[0].to_datetime\n@date_of_death = array[1].to_datetime\n</code></pre>\n\n<p>See here for more info:</p>\n\n<p><a href=\"https://apidock.com/rails/String/to_datetime\" rel=\"nofollow noreferrer\">https://apidock.com/rails/String/to_datetime</a></p>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1495634512, "creation_date": 1495634512, "answer_id": 44160692, "question_id": 44160378, "link": "https://stackoverflow.com/questions/44160378/new-datetime-instead-of-string-in-ruby/44160692#44160692", "title": "New DateTime instead of String in ruby", "body": "<p>This: </p>\n\n<pre><code>DateTime.new(1979,1,1) DateTime.new(2012,3,29)\n</code></pre>\n\n<p>Is not code. What do you expect that to do?</p>\n\n<p>If you want two <code>DateTimes</code> as a space-separated string, do something like:</p>\n\n<pre><code>\"#{DateTime.new(1979,1,1)} #{DateTime.new(2012,3,29)}\" \n</code></pre>\n\n<p>When you have something like <code>#{...}</code> inside a set of double quotation marks (they <strong>must</strong> be double, not single quotation marks), it's called <code>string interpolation</code>. Learn it. Love it. Live it.</p>\n\n<p>But, for the life of me, I don't know why you wouldn't do:</p>\n\n<pre><code>[DateTime.new(1979,1,1), DateTime.new(2012,3,29)]\n</code></pre>\n\n<p>Which gives you an <code>array</code>, so no <code>split</code> needed. Just: </p>\n\n<pre><code>def split_line\n  @date_of_birth = array[0] \n  @date_of_death = array[1] \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1495663347, "last_edit_date": 1495663347, "creation_date": 1495662827, "answer_id": 44169086, "question_id": 44160378, "link": "https://stackoverflow.com/questions/44160378/new-datetime-instead-of-string-in-ruby/44169086#44169086", "title": "New DateTime instead of String in ruby", "body": "<p>If you want DateTime values, grab the numbers and create them:</p>\n\n<pre><code>require 'date'\n\n'DateTime.new(1979,1,1) DateTime.new(2012,3,29)'.split.map { |s|\n  DateTime.new(*s.scan(/\\d+/).map(&amp;:to_i) )\n}\n# =&gt; [#&lt;DateTime: 1979-01-01T00:00:00+00:00 ((2443875j,0s,0n),+0s,2299161j)&gt;,\n#     #&lt;DateTime: 2012-03-29T00:00:00+00:00 ((2456016j,0s,0n),+0s,2299161j)&gt;]\n</code></pre>\n\n<p>The values aren't DateTime though, they're Dates:</p>\n\n<pre><code>'DateTime.new(1979,1,1) DateTime.new(2012,3,29)'.split.map { |s|\n  Date.new(*s.scan(/\\d+/).map(&amp;:to_i) )\n}\n# =&gt; [#&lt;Date: 1979-01-01 ((2443875j,0s,0n),+0s,2299161j)&gt;,\n#     #&lt;Date: 2012-03-29 ((2456016j,0s,0n),+0s,2299161j)&gt;]\n</code></pre>\n\n<p>Breaking it down:</p>\n\n<pre><code>'DateTime.new(1979,1,1) DateTime.new(2012,3,29)'.split # =&gt; [\"DateTime.new(1979,1,1)\", \"DateTime.new(2012,3,29)\"]\n  .map { |s|\n  Date.new(\n    *s.scan(/\\d+/) # =&gt; [\"1979\", \"1\", \"1\"], [\"2012\", \"3\", \"29\"]\n    .map(&amp;:to_i) # =&gt; [1979, 1, 1],       [2012, 3, 29]\n  )\n}\n# =&gt; [#&lt;Date: 1979-01-01 ((2443875j,0s,0n),+0s,2299161j)&gt;,\n#     #&lt;Date: 2012-03-29 ((2456016j,0s,0n),+0s,2299161j)&gt;]\n</code></pre>\n\n<p><code>*</code> (AKA \"splat\"), used like this, explodes an array into its elements, which is useful when you have an array but the method only takes separate parameters.</p>\n\n<p>The bigger question is why you're getting values like that in a text file.</p>\n"}], "owner": {"reputation": 1, "user_id": 8059880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ynP2A.jpg?s=128&g=1", "display_name": "Raskerov", "link": "https://stackoverflow.com/users/8059880/raskerov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 3, "score": -7, "last_activity_date": 1495663347, "creation_date": 1495633822, "last_edit_date": 1495662330, "question_id": 44160378, "link": "https://stackoverflow.com/questions/44160378/new-datetime-instead-of-string-in-ruby", "title": "New DateTime instead of String in ruby", "body": "<p>I've got some issue with DateTime in Ruby\nI've got line which looks like this (it's in .txt file)</p>\n\n<pre><code>DateTime.new(1979,1,1) DateTime.new(2012,3,29)\n</code></pre>\n\n<p>And my function to get this looks like this </p>\n\n<pre><code>def split_line\n  array = line.split(' ')\n  @date_of_birth = array[0] \n  @date_of_death = array[1] \nend\n</code></pre>\n\n<p>But <code>@date_of_birth</code> and <code>@date_of_death</code> class are String. How can I get them as DateTime?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1495631474, "post_id": 44159165, "comment_id": 75335088, "body": "What to you try to achieve? Do you want to override the <code>category_id</code> value or read the existing value of <code>category_id</code>? What is <code>:article</code> in this context?  It feels to me like you need to add more code to your question to make it clearer."}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1495634237, "post_id": 44159165, "comment_id": 75337421, "body": "Thanks for the comment. I modified the script. Could you check it?"}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495641373, "post_id": 44160659, "comment_id": 75343153, "body": "Thanks, but it didn&#39;t work. I missed my strong parameter. I rewrote the issue. Could you tell me how?"}], "tags": [], "owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "is_accepted": false, "score": 0, "last_activity_date": 1495634449, "creation_date": 1495634449, "answer_id": 44160659, "question_id": 44159165, "link": "https://stackoverflow.com/questions/44159165/how-to-express-nested-attribute-in-let-helper-on-rspec/44160659#44160659", "title": "How to express nested attribute in let helper on RSpec", "body": "<p>Try this:   </p>\n\n<pre><code>let(:article) {\n{\n  article_categories_attributes:\n  {\n    \"0\"=&gt;{\"category_id\"=&gt;\"40001\"},\n    \"1\"=&gt;{\"category_id\"=&gt;\"40002\"}\n  }      \n }\n</code></pre>\n\n<p>Hope that helps :)</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495639661, "post_id": 44162677, "comment_id": 75341887, "body": "PS. Use <code>let</code> with <code>do end</code> for multi-line declarations. <a href=\"https://github.com/bbatsov/ruby-style-guide#single-line-blocks\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide#single-line-blocks</a>"}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495641248, "post_id": 44162677, "comment_id": 75343083, "body": "Thanks for the comment. I almost forgot. Due to strong parameter, it didn&#39;t work correctly. Could you tell me how to express nested model in this case? I appended the definition of strong parameter."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495641652, "post_id": 44162677, "comment_id": 75343328, "body": "What do you mean? Two levels of nesting? That is an example of how you create nested records."}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495642374, "post_id": 44162677, "comment_id": 75343769, "body": "Sorry, it might be so. When I run the code you answered, debugger showed &quot;article_categories_attributes&quot;=&gt;[&lt;ActionController::Paramet&zwnj;&#8203;ers {} permitted: true&gt;, &lt;ActionController::Parameters {} permitted: true&gt;] So, I assumed this might be caused by strong parameter definitions. In this case, what should I do?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495642451, "post_id": 44162677, "comment_id": 75343807, "body": "I ediited it. If you are just looking to create a an article and assign  categories to it at the same time you don&#39;t need nested attributes. Just use <code>categories_ids</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495642963, "post_id": 44162677, "comment_id": 75344154, "body": "The same with tags. Just use <code>_ids</code> and rails will create the join model for you."}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495643058, "post_id": 44162677, "comment_id": 75344210, "body": "Is that so? OK I&#39;ll apply it and get back to you when it turns out. Thanks!"}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1495674874, "post_id": 44162677, "comment_id": 75357379, "body": "I applied what you wrote, and then it works well. Thanks :D"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1495697075, "last_edit_date": 1495697075, "creation_date": 1495639602, "answer_id": 44162677, "question_id": 44159165, "link": "https://stackoverflow.com/questions/44159165/how-to-express-nested-attribute-in-let-helper-on-rspec/44162677#44162677", "title": "How to express nested attribute in let helper on RSpec", "body": "<p>If what you really are looking to do is just associate an Article and Category you don't need <code>accepts_nested_attributes</code>.</p>\n\n<p>Lets say you have these models:</p>\n\n<pre><code>class Article\n  has_many :article_categories\n  has_many :categories, through: :article_categories\nend\n\nclass Category\n  has_many :article_categories\n  has_many :categories, through: :article_categories\nend\n\nclass ArticleCategory\n  belongs_to :article\n  belongs_to :category\nend\n</code></pre>\n\n<p>You can create an article and associate it with categories 1,2 and 3 with:</p>\n\n<pre><code>Article.create(title: 'Hello World', category_ids: [1,2,3]).\n</code></pre>\n\n<p>In that  case the params hash would read:</p>\n\n<pre><code>let(:params) do   \n  {\n    article: {\n      title: 'Hello World',\n      category_ids: [1,2,3]\n    }\n  }\nend\n</code></pre>\n\n<p>ActiveRecord creates <code>_ids</code> setters for all <code>has_many</code> and <code>has_and_belongs_to_many</code> associations. If the association is indirect Rails handles inserting the join model as well. </p>\n\n<p>Don't bother trying to do it with <code>accepts_nested_attributes</code> - it won't work when creating records since the record does not yet have an ID.</p>\n\n<p>You're also nesting the strong params insanely.</p>\n\n<p>Don't write strong params in a single line. Follow the 72 character per line convention so that you can actually read the code.</p>\n\n<pre><code>params.require(:article)\n      .permit(\n        :id, :publish_version, :file, :status, :user_id, \n        :update_user_id, :publish_at, :publish_until,\n        :categories_ids, :tags_ids,\n        article_histories_attributes:\n          [:id, :article_id, :version, :title, :content, :comment]\n       )\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495697075, "creation_date": 1495630829, "last_edit_date": 1495640853, "question_id": 44159165, "link": "https://stackoverflow.com/questions/44159165/how-to-express-nested-attribute-in-let-helper-on-rspec", "title": "How to express nested attribute in let helper on RSpec", "body": "<p>I can't figure out how to express nested attribute.\nArticle has many ArticleCategory.\nAnd I'd simulate this kind of parameter.</p>\n\n<p><code>[:article][:article _categories][\"0\"][:category _id] = 40001</code></p>\n\n<p>And I express this parameter by using let.\nBelows are my Rspec code.</p>\n\n<pre><code>  let(:article) {\n    {\n      article_categories_attributes:[\n        category_id: [\"40001\", \"40002\"]\n      ]\n     }\n</code></pre>\n\n<p>But I think this expresses article[:article_categories_attributes][:category_id].\nHow to express [\"0\"]?\nI'd appreciate if you could solve this.</p>\n\n<p>[appendix] Strong_parameter</p>\n\n<pre><code>  def article_params\n    params.require(:article).permit(:id, :current_version , :publish_version, :file, :status, :user_id , :update_user_id, :publish_at, :publish_until, article_categories_attributes: [:article_id, {:category_id =&gt; []}], article_tags_attributes: [:article_id, {:tag_id =&gt; []}], article_histories_attributes:[:id, :article_id, :version, :title, :content, :comment], articles_article_series_attributes:[:article_id, :series_id, :num])\n  end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495630311, "post_id": 44158889, "comment_id": 75334164, "body": "You mean when you click on the edit link, the form doesn&#39;t show up?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495630407, "post_id": 44158889, "comment_id": 75334220, "body": "Yes, but the js.erb is suppossed to let me edit it on the page, right? Neither are happening at present."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495630466, "post_id": 44158889, "comment_id": 75334271, "body": "Ok. I understood the problem. Just tell me from where <code>_comment.html.erb</code> is being rendered."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495630705, "post_id": 44158889, "comment_id": 75334444, "body": "@Pavan On the event show page - I&#39;ve updated the question to include this code also."}, {"owner": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495793474, "post_id": 44158889, "comment_id": 75410731, "body": "@Mike.Whitehead i don&#39;t see a div with id &#39;comment&#39; anywhere, only class &#39;comment&#39;"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495793735, "post_id": 44158889, "comment_id": 75410877, "body": "@Robbo Is this line where its going wrong - &#39;&lt;div id=&quot;&lt;%=dom_id(comment)%&gt;&quot; class=&quot;comment&quot;&gt; &#39;"}, {"owner": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495793973, "post_id": 44158889, "comment_id": 75411011, "body": "what do you want to actually happen? clicking an &#39;edit&#39; link with &#39;remote: true&#39; isn&#39;t what you should be doing. you should just use javascript or jquery to show and hide the form and then the &#39;remote: true&#39; should be on the update action which re-renders the whole comment partial"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495794125, "post_id": 44158889, "comment_id": 75411101, "body": "@Robbo I want a user to be able to edit their own comments if they want to on the same page. Looks like I&#39;m miles out."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495794238, "post_id": 44158889, "comment_id": 75411168, "body": "@Robbo Trying to avoid using the best_in_place gem..."}, {"owner": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495794277, "post_id": 44158889, "comment_id": 75411190, "body": "i&#39;ve never heard of that and doesn&#39;t seem necessary for this"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "edited": false, "score": 0, "creation_date": 1495794736, "post_id": 44158889, "comment_id": 75411448, "body": "@Robbo The gem? There&#39;s a railscast on it and yeah, I agree. I thought this would be straightforward. Probably is when you know how."}, {"owner": {"reputation": 1202, "user_id": 3601411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b61858c5a70f8197f904db29a851e2c0?s=128&d=identicon&r=PG", "display_name": "Robbo", "link": "https://stackoverflow.com/users/3601411/robbo"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495794777, "post_id": 44158889, "comment_id": 75411467, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/145186/discussion-between-robbo-and-mike-whitehead\">continue this discussion in chat</a>."}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1495631855, "creation_date": 1495630139, "last_edit_date": 1495630665, "question_id": 44158889, "link": "https://stackoverflow.com/questions/44158889/rails-5-0-in-line-editing-function-not-working", "title": "Rails 5.0 - In-line editing function not working", "body": "<p>I'm building an events app on Rails and have comments as a nested resource. So far Users can create and destroy comments but can't edit/update. I'm trying to implement the function using Ajax/ <code>remote: true</code> but it's not working. When I click on the edit link nothing happens. Here's what comes up in the development log - </p>\n\n<pre><code>Processing by CommentsController#show as JS\n  Parameters: {\"event_id\"=&gt;\"27\", \"id\"=&gt;\"33\"}\n  [1m[36mComment Load (0.1ms)[0m  [1m[34mSELECT  \"comments\".* FROM \"comments\" WHERE \"comments\".\"id\" = ? LIMIT ?[0m  [[\"id\", 33], [\"LIMIT\", 1]]\n  Rendering comments/show.html.erb within layouts/application\n  Rendered comments/show.html.erb within layouts/application (0.4ms)\nCompleted 200 OK in 101ms (Views: 88.5ms | ActiveRecord: 0.1ms)\n</code></pre>\n\n<p>Here's the relevant code -</p>\n\n<p><strong>Comments_controller.rb</strong></p>\n\n<pre><code># GET /comments/1/edit\n    def edit\n        @event = @comment.event\n        @comment = @event.comments.find(params[:id])\n        respond_to do |f|\n            f.js \n            f.html \n        end\n    end\n\n    def show\n    end\n\n\n\n    def update \n        if @comment.update(comment_params)\n            redirect_to @event, notice: \"Comment was successfully updated!\"\n        else\n            render 'edit'\n        end\n    end\n\n\n\n    def destroy\n        @event = Event.find(params[:event_id])\n        @comment = @event.comments.find(params[:id])\n        @comment.destroy\n\n        redirect_to event_path(@event)\n    end\n</code></pre>\n\n<p><strong>edit.js.erb</strong> (I've a feeling this code may be where I'm going wrong)</p>\n\n<pre><code>$('#comment').append('&lt;%= j render 'form' %&gt;');\n</code></pre>\n\n<p><strong>_comment.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"comment clearfix\"&gt;\n  &lt;div class=\"comment_content\"&gt;\n    &lt;div id=\"&lt;%=dom_id(comment)%&gt;\" class=\"comment\"&gt;  \n      &lt;p class=\"comment_name\"&gt;&lt;strong&gt;&lt;%= comment.name %&gt;&lt;/strong&gt;&lt;/p&gt;\n      &lt;p class=\"comment_body\"&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n\n  &lt;/div&gt;\n\n      &lt;p&gt;&lt;%= link_to 'Edit', [comment.event, comment], id: \"comment\", remote: true %&gt;&lt;/p&gt;\n\n                  &lt;p&gt;&lt;%= link_to 'Delete', [comment.event, comment],\n                                     method: :delete,\n                                        class: \"button\",\n                              data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for([@event, @comment], remote: true) do |f| %&gt;\n\n\n    &lt;%= f.label :comment %&gt;&lt;br&gt;\n    &lt;%= f.text_area :body %&gt;&lt;br&gt;\n    &lt;br&gt;\n    &lt;%= f.button :submit, label: 'Add Comment', class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Am I identifying the dom ID correctly?</p>\n\n<p>UPDATE - The _comment.html.erb file is rendered on the event/show page -</p>\n\n<p><strong>show.html.erb - events</strong></p>\n\n<pre><code>            &lt;% if user_signed_in?  %&gt;\n\n                &lt;div id=\"comments\"&gt;\n                    &lt;h2&gt;&lt;%= pluralize @event.comments.count, 'Comment' %&gt;&lt;/h2&gt;\n                    &lt;%= render @event.comments %&gt;\n\n\n                &lt;h3&gt;Add a comment:&lt;/h3&gt;\n                        &lt;%= render \"comments/form\" %&gt;\n\n            &lt;% end %&gt;\n\n&lt;/div&gt;  \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495632115, "post_id": 44158782, "comment_id": 75335601, "body": "Do you want <code>email_domain_name</code> to be able to store multiple email addresses?"}, {"owner": {"reputation": 1, "user_id": 8058738, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155442481179708/picture?type=large", "display_name": "Adrien Liagre", "link": "https://stackoverflow.com/users/8058738/adrien-liagre"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495635355, "post_id": 44158782, "comment_id": 75338315, "body": "Yep exactly. I need demail_domain_name to store multiple value which are domain name such as: apple.com, algolia.com . For now, i can only store one."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8058738, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155442481179708/picture?type=large", "display_name": "Adrien Liagre", "link": "https://stackoverflow.com/users/8058738/adrien-liagre"}, "edited": false, "score": 0, "creation_date": 1495635947, "post_id": 44160380, "comment_id": 75338813, "body": "Sorry, i know that is not really clear. I don&#39;t need the user to have a valid email but i need 2 users with 2 different emails to redirect on the same group (if i have it specified beforehand in the admin console). For ex, i have currently for one group, email_domain_name: &quot;edhec.com&quot;. I would like to store more than just this one, and have for example email_domain_name: &quot;edhec.com, hec.com&quot; to redirect on this group all people signing up with hec.com &amp; edhec.com email address.  It is clearer ... ? Thanks a lot"}], "tags": [], "owner": {"reputation": 21, "user_id": 5637767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b7705911669237ceff95dab2e49c35?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Billie", "link": "https://stackoverflow.com/users/5637767/matthew-billie"}, "is_accepted": false, "score": 0, "last_activity_date": 1495633824, "creation_date": 1495633824, "answer_id": 44160380, "question_id": 44158782, "link": "https://stackoverflow.com/questions/44158782/how-to-set-multiple-value-in-a-form-rails-app/44160380#44160380", "title": "How to set multiple value in a form ? Rails app", "body": "<p>You could add an alt_email_domain_name field, and look up the group by that if the first fails. Does the user need to have a valid email for that alternate domain? Little confused as to what you're trying to accomplish.</p>\n\n<p>Alternatively, you could allow for comma separated email domains in the field, split them, and check for both domain groups.</p>\n"}, {"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1495647724, "creation_date": 1495647724, "answer_id": 44165276, "question_id": 44158782, "link": "https://stackoverflow.com/questions/44158782/how-to-set-multiple-value-in-a-form-rails-app/44165276#44165276", "title": "How to set multiple value in a form ? Rails app", "body": "<p>You can store comma seperated domain_names and while querying you do <code>ilike</code> search.\nIf you expect the list to be huge than you need to define it as <code>text</code> instead of <code>string</code>.</p>\n\n<p>You can list them down too like,</p>\n\n<pre><code>Group.first.email_domain_name.split(',')\n</code></pre>\n\n<p>Another recommended solution if you are using postges as db is to use <a href=\"https://www.postgresql.org/docs/9.1/static/arrays.html\" rel=\"nofollow noreferrer\">Array</a> datatype</p>\n"}], "owner": {"reputation": 1, "user_id": 8058738, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155442481179708/picture?type=large", "display_name": "Adrien Liagre", "link": "https://stackoverflow.com/users/8058738/adrien-liagre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1495647724, "creation_date": 1495629857, "question_id": 44158782, "link": "https://stackoverflow.com/questions/44158782/how-to-set-multiple-value-in-a-form-rails-app", "title": "How to set multiple value in a form ? Rails app", "body": "<p>First time to post smth on stackoverflow, so hopping to be clear enough :). </p>\n\n<p>I have built an app where you need to sign up with your professionnel address email and thanks to your email domain name you are being redirected on the group of your company. Ex: if my email is example@companyone.com, i will be redirected on the group called companyone. \nNow, i want to allow someone with a different domain name email address to access the same group, by adding a second value in my admin console  in the email_domain_name input. I can't figure it out...</p>\n\n<p>Here is my code: </p>\n\n<p>admin group model:</p>\n\n<pre><code>f.inputs \"Details\" do\n  f.input :name\n  f.input :description\n  f.input :email_domain_name\n  f.input :slug\n  f.input :picture, as: :file\nend\n</code></pre>\n\n<p>Registration controller: </p>\n\n<pre><code>def check_group_domain_name\nunless Group.find_by(email_domain_name: Mail::Address.new(params[:user][:email]).domain)\n  flash[:notice] = t('users.sign_in.invalid')\nend\nend\n</code></pre>\n\n<p>Model User: </p>\n\n<pre><code>def assign_to_group\n self.group = Group.find_by(email_domain_name: Mail::Address.new(self.email).domain)\nend\n</code></pre>\n\n<p>Email_validator:</p>\n\n<pre><code>  class EmailValidator &lt; ActiveModel::EachValidator\n  def validate_each(record, attribute, value)\n    domain_names = Group.all.pluck(:email_domain_name)\n    begin\n      m = Mail::Address.new(value)\n      r = m.domain!=nil &amp;&amp; m.domain.match(Regexp.union(domain_names)) &amp;&amp; m.address == value\n    rescue Exception =&gt; e\n      r = false\n    end\n    record.errors[attribute] &lt;&lt; (options[:message] || \"is invalid\") unless \nr\n  end\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495663466, "post_id": 44158474, "comment_id": 75354314, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked pages. The first thing is we need to see evidence of your effort. Without that it looks like you didn&#39;t try and want us to do it for you."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495631049, "post_id": 44158717, "comment_id": 75334724, "body": "<code>transform_values</code> was introduced in 2.4? I must have overlooked it. Very useful! :-)"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495638465, "post_id": 44158717, "comment_id": 75340967, "body": "@Stefan yeap, in 2.4.0 :)"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1495630785, "last_edit_date": 1495630785, "creation_date": 1495629667, "answer_id": 44158717, "question_id": 44158474, "link": "https://stackoverflow.com/questions/44158474/array-to-hash-while-summing-values/44158717#44158717", "title": "Array to hash while summing values", "body": "<p>You can try something about:</p>\n\n<pre><code>&gt; array\n#=&gt; [[172, 3], [173, 1], [174, 2], [174, 3], [174, 1]]\n\narray.group_by(&amp;:first).map { |k, v| [k, v.map(&amp;:last).inject(:+)] }.to_h\n#=&gt; =&gt; {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n\n<p>Ruby 2.4.0 version:</p>\n\n<pre><code>a.group_by(&amp;:first).transform_values { |e| e.sum(&amp;:last) }\n#=&gt; =&gt; {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 1, "last_activity_date": 1495629689, "creation_date": 1495629689, "answer_id": 44158723, "question_id": 44158474, "link": "https://stackoverflow.com/questions/44158474/array-to-hash-while-summing-values/44158723#44158723", "title": "Array to hash while summing values", "body": "<p>For:</p>\n\n<pre><code>array = [[172, 3], [173, 1], [174, 2], [174, 3], [174, 1]]\n</code></pre>\n\n<p>You could use a hash with a default value 0 like this    </p>\n\n<pre><code>hash = Hash.new{|h,k| h[k] = 0 }\n</code></pre>\n\n<p>Then use it, and sum up values:</p>\n\n<pre><code>array.each { |a, b| hash[a] += b }\n\n#=&gt; {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1495630078, "creation_date": 1495630078, "answer_id": 44158859, "question_id": 44158474, "link": "https://stackoverflow.com/questions/44158474/array-to-hash-while-summing-values/44158859#44158859", "title": "Array to hash while summing values", "body": "<p>Another possible solution:</p>\n\n<pre><code>arr = [[172, 3], [173, 1], [174, 2], [174, 3], [174, 1]]\n\nhash = arr.each_with_object({}) {|a,h| h[a[0]] = h[a[0]].to_i + a[1]}\n\np hash\n# {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1495635945, "post_id": 44158880, "comment_id": 75338811, "body": "wow you even went through the parts that don&#39;t work to show the reasoning +1"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 7, "last_activity_date": 1495630189, "last_edit_date": 1495630189, "creation_date": 1495630121, "answer_id": 44158880, "question_id": 44158474, "link": "https://stackoverflow.com/questions/44158474/array-to-hash-while-summing-values/44158880#44158880", "title": "Array to hash while summing values", "body": "<blockquote>\n  <p>How would I go about doing this?</p>\n</blockquote>\n\n<p>Solve one problem at a time.</p>\n\n<p>Given your array:</p>\n\n<pre><code>a = [[172, 3], [173, 1], [174, 2], [174, 3], [174, 1]]\n</code></pre>\n\n<p>We need an additional hash:</p>\n\n<pre><code>h = {}\n</code></pre>\n\n<p>Then we have to traverse the pairs in the array:</p>\n\n<pre><code>a.each do |k, v|\n  if h.key?(k) # If the hash already contains the key\n    h[k] += v  # we add v to the existing value\n  else         # otherwise\n    h[k] = v   # we use v as the initial value\n  end\nend\n\nh #=&gt; {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n\n<p>Now let's refactor it. The conditional looks a bit cumbersome, what if we would just add everything?</p>\n\n<pre><code>h = {}\na.each { |k, v| h[k] += v }\n#=&gt; NoMethodError: undefined method `+' for nil:NilClass\n</code></pre>\n\n<p>Bummer, that doesn't work because the hash's values are initially <code>nil</code>. Let's fix that:</p>\n\n<pre><code>h = Hash.new(0) # &lt;- hash with default values of 0\na.each { |k, v| h[k] += v }\nh #=&gt; {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n\n<p>That looks good. We can even get rid of the temporary variable by using <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-each_with_object\" rel=\"noreferrer\"><code>each_with_object</code></a>:</p>\n\n<pre><code>a.each_with_object(Hash.new(0)) { |(k, v), h| h[k] += v }\n#=&gt; {172=&gt;3, 173=&gt;1, 174=&gt;6}\n</code></pre>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 44158880, "answer_count": 4, "score": 0, "last_activity_date": 1495630785, "creation_date": 1495629007, "question_id": 44158474, "link": "https://stackoverflow.com/questions/44158474/array-to-hash-while-summing-values", "title": "Array to hash while summing values", "body": "<p>I have a an array as follows: </p>\n\n<pre><code>[[172, 3], \n [173, 1], \n [174, 2], \n [174, 3], \n [174, 1]]\n</code></pre>\n\n<p>That I'd like to convert into an array, but while summing the values for matching keys. So I'd get the following:</p>\n\n<pre><code>{172 =&gt; 3, 173 =&gt; 1, 174 =&gt; 6}\n</code></pre>\n\n<p>How would I go about doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cycle"], "comments": [{"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495627003, "post_id": 44157655, "comment_id": 75331651, "body": "Could you post your User and Account models and the error you are getting? Where are you getting nil?"}, {"owner": {"reputation": 487, "user_id": 3892659, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6669ae07df4e5929805e2f505a0457e2?s=128&d=identicon&r=PG&f=1", "display_name": "Maximi", "link": "https://stackoverflow.com/users/3892659/maximi"}, "reply_to_user": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495627437, "post_id": 44157655, "comment_id": 75331944, "body": "Sure, I updated the question"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "edited": false, "score": 0, "creation_date": 1495627494, "post_id": 44157655, "comment_id": 75331994, "body": "is <code>current_user.accounts[0]</code> or <code>@account</code> nil?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1495627549, "post_id": 44157655, "comment_id": 75332034, "body": "Be aware that <code>@account</code> is not the same thing as <code>account</code> within your block. If you intend to inspect <code>account</code> in each iteration, you need to use the local variable, not an instance variable that happens to have the same name."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1495627688, "post_id": 44157655, "comment_id": 75332134, "body": "What does the <code>currency_obj</code> method do?"}, {"owner": {"reputation": 487, "user_id": 3892659, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6669ae07df4e5929805e2f505a0457e2?s=128&d=identicon&r=PG&f=1", "display_name": "Maximi", "link": "https://stackoverflow.com/users/3892659/maximi"}, "edited": false, "score": 0, "creation_date": 1495627845, "post_id": 44157655, "comment_id": 75332251, "body": "I update my question. Currency_obj is inside question now. My question is how to get all the information for account inside the loop. Still the nil"}], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 3736381, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/sdRFO.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/3736381/charles"}, "reply_to_user": {"reputation": 487, "user_id": 3892659, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6669ae07df4e5929805e2f505a0457e2?s=128&d=identicon&r=PG&f=1", "display_name": "Maximi", "link": "https://stackoverflow.com/users/3892659/maximi"}, "edited": false, "score": 1, "creation_date": 1495628322, "post_id": 44157969, "comment_id": 75332666, "body": "It depends on what you need actually I could see function so you can declared a variable outside with nil value and assign the account to it, if you want all the account create an empty array and push the acoount inside the loop"}, {"owner": {"reputation": 487, "user_id": 3892659, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6669ae07df4e5929805e2f505a0457e2?s=128&d=identicon&r=PG&f=1", "display_name": "Maximi", "link": "https://stackoverflow.com/users/3892659/maximi"}, "edited": false, "score": 0, "creation_date": 1495628745, "post_id": 44157969, "comment_id": 75332959, "body": "I thoght that account.currency_obj.coin will inject coin to Currency.find_by_code(attributes[:currency]), but if not, how to do that?"}], "tags": [], "owner": {"reputation": 688, "user_id": 3736381, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/sdRFO.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/3736381/charles"}, "is_accepted": false, "score": 1, "last_activity_date": 1495627563, "creation_date": 1495627563, "answer_id": 44157969, "question_id": 44157655, "link": "https://stackoverflow.com/questions/44157655/after-loop-always-nil-in-rails-4/44157969#44157969", "title": "After loop always nil in Rails 4", "body": "<p>The variable account has scope only to the loop. So it will be nil outside the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1495629385, "last_edit_date": 1495629385, "creation_date": 1495628772, "answer_id": 44158393, "question_id": 44157655, "link": "https://stackoverflow.com/questions/44157655/after-loop-always-nil-in-rails-4/44158393#44158393", "title": "After loop always nil in Rails 4", "body": "<p><code>currenc_obj</code> is <code>nil</code>, so it can't respond to <code>coin?</code> method; check this line:</p>\n\n<pre><code>#&lt;Account id: 14, member_id: 3, currency: nil, balance: 0.0, locked: 0.0, created_at: \"2017-05-23 08:50:11\", updated_at: \"2017-05-23 08:50:16\", in: nil, out: nil, default_withdraw_fund_source_id: nil\n</code></pre>\n\n<p>In your first <code>Account</code> object, the attribute <code>:currency</code> is <code>nil</code> so the method <code>currency_obj</code> will return <code>nil</code> as well.</p>\n"}], "owner": {"reputation": 487, "user_id": 3892659, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6669ae07df4e5929805e2f505a0457e2?s=128&d=identicon&r=PG&f=1", "display_name": "Maximi", "link": "https://stackoverflow.com/users/3892659/maximi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 44158393, "answer_count": 2, "score": 0, "last_activity_date": 1495629385, "creation_date": 1495626748, "last_edit_date": 1495628099, "question_id": 44157655, "link": "https://stackoverflow.com/questions/44157655/after-loop-always-nil-in-rails-4", "title": "After loop always nil in Rails 4", "body": "<p>When I try cycle the rails array I have still nil, even when array already defined.</p>\n\n<p>The code:</p>\n\n<pre><code>def gen_address\n  current_user.accounts.each do |account|\n    abort(@account.inspect)\n    next if not account.currency_obj.coin?\n\n    if account.payment_addresses.blank?\n      account.payment_addresses.create(currency: account.currency)\n    else\n      address = account.payment_addresses.last\n      address.gen_address if address.address.blank?\n    end\n  end\n  render nothing: true\nend\n</code></pre>\n\n<p>current_user.accounts have array with three items. abort is there for testing only.</p>\n\n<p>current_user.accounts have:</p>\n\n<pre><code>#&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Account id: 14, member_id: 3, currency: nil, balance: 0.0, locked: 0.0, created_at: \"2017-05-23 08:50:11\", updated_at: \"2017-05-23 08:50:16\", in: nil, out: nil, default_withdraw_fund_source_id: nil&gt;, #&lt;Account id: 5, member_id: 3, currency: \"btc\", balance: 0.0, locked: 0.0, created_at: \"2017-05-03 08:37:19\", updated_at: \"2017-05-03 08:37:19\", in: nil, out: nil, default_withdraw_fund_source_id: nil&gt;, #&lt;Account id: 6, member_id: 3, currency: \"ltc\", balance: 0.0, locked: 0.0, created_at: \"2017-05-03 08:37:19\", updated_at: \"2017-05-03 08:37:19\", in: nil, out: nil, default_withdraw_fund_source_id: nil&gt;, #&lt;Account id: 13, member_id: 3, currency: \"eth\", balance: 0.0, locked: 0.0, created_at: \"2017-05-23 08:42:29\", updated_at: \"2017-05-23 08:42:35\", in: nil, out: nil, default_withdraw_fund_source_id: nil&gt;]&gt;\n</code></pre>\n\n<p>account is always nil</p>\n\n<p>currency_obj is:</p>\n\n<pre><code>module HashCurrencible\n  extend ActiveSupport::Concern\n\n  included do\n    def currency_obj\n      Currency.find_by_code(attributes[:currency])\n    end\n  end\nend\n</code></pre>\n\n<p>I get this error for row next if not account.currency_obj.coin?, when remove abort:</p>\n\n<pre><code>undefined method `coin?' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 116, "user_id": 7926043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a05eeb94cfe09ed7a81a9dbd971998?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/7926043/sisyphe"}, "edited": false, "score": 0, "creation_date": 1495626596, "post_id": 44157282, "comment_id": 75331321, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15478747/instance-variables-in-modules\">Instance variables in modules?</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 116, "user_id": 7926043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a05eeb94cfe09ed7a81a9dbd971998?s=128&d=identicon&r=PG&f=1", "display_name": "Sisyphe", "link": "https://stackoverflow.com/users/7926043/sisyphe"}, "edited": false, "score": 2, "creation_date": 1495626626, "post_id": 44157282, "comment_id": 75331350, "body": "@Sisyphe No, it is not a duplicate. Your linked question asks why it is possible in the first place. The current question asks whether it is recommended to put that into practice."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1495627699, "post_id": 44157282, "comment_id": 75332141, "body": "There&#39;s a third option: <code>a + 1</code> with <code>a</code> being a method that <code>Foo</code> has to implement, e.g. via <code>attr_reader :a</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495633983, "post_id": 44159814, "comment_id": 75337186, "body": "It&#39;s quite usual to have some kind of interface / requirement. <code>Enumerable</code> depends on <code>each</code>, <code>Comparable</code> depends on <code>&lt;=&gt;</code> and so on. A module without any coupling whatsoever should probably define its methods as class methods or as <a href=\"http://ruby-doc.org/core-2.4.1/Module.html#method-i-module_function\" rel=\"nofollow noreferrer\">module functions</a>."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495638017, "post_id": 44159814, "comment_id": 75340599, "body": "Indeed, I was trying to express the spectrum of coupling, I think of some better wording."}], "tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": true, "score": 4, "last_activity_date": 1495633137, "last_edit_date": 1495633137, "creation_date": 1495632527, "answer_id": 44159814, "question_id": 44157282, "link": "https://stackoverflow.com/questions/44157282/is-a-bad-practice-to-use-instance-variable-in-a-module/44159814#44159814", "title": "Is a bad practice to use instance variable in a module?", "body": "<p>It seems to me that <code>Bar</code> is highly coupled to the implementation of <code>Foo</code> if it uses a variable defined in <code>Foo</code>. What if there is no <code>@a</code> defined, or worse still it it defined but has a different purpose.</p>\n\n<p>What if another class, say <code>Baz</code>, includes <code>Bar</code> and it renames <code>@a</code> to something more descriptive, then we also need to change <code>Bar</code> and thus we also need to change every other class which includes <code>Bar</code> too.</p>\n\n<p>The module can expect the class it is included in to provide an interface, i.e. a set of methods. But this, again, this is coupling. But this is better than relying on <code>@a</code> variables. The interface can be defined, tested and documented. See <a href=\"https://en.wikipedia.org/wiki/Duck_typing#In_Ruby\" rel=\"nofollow noreferrer\">duck typing</a>.</p>\n\n<p>There is a saying, \"program to interfaces not implementations\", from the GOF book. Here is an <a href=\"http://www.artima.com/lejava/articles/designprinciples.html\" rel=\"nofollow noreferrer\">interview</a> describing it.</p>\n\n<p>Ideally a module adds behaviour to a class without any care for the kind of class it is included in.</p>\n\n<p>It is hard to say what the best approach would be without a concrete example.</p>\n"}], "owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "accepted_answer_id": 44159814, "answer_count": 1, "score": 1, "last_activity_date": 1495633137, "creation_date": 1495625817, "question_id": 44157282, "link": "https://stackoverflow.com/questions/44157282/is-a-bad-practice-to-use-instance-variable-in-a-module", "title": "Is a bad practice to use instance variable in a module?", "body": "<p>I have a class <code>Foo</code> that uses a module <code>Bar</code>:</p>\n\n<pre><code>class Foo\n  include Bar\n\n  def initialize\n    @a = 1\n  end\nend\n\nmodule Bar\n  def something\n    @a + 1\n  end\nend\n</code></pre>\n\n<p>Is it a bad practice? Should it rather be like this?</p>\n\n<pre><code>module Bar\n  def something(a)\n    a + 1\n  end\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "model-view-controller"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495624727, "post_id": 44156705, "comment_id": 75329939, "body": "At which line you get that error?"}, {"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495624843, "post_id": 44156705, "comment_id": 75330028, "body": "Could you inspect your link html to be sure the Comment id is present in href ?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495624964, "post_id": 44156705, "comment_id": 75330112, "body": "@Pavan That&#39;s from when I click on &#39;create comment&#39;"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495625061, "post_id": 44156705, "comment_id": 75330180, "body": "@HoloHokkaido You mean in the routes? Yes, its definitely suppossed to be there. I&#39;ve looked via console and it shows on the comment info but I can&#39;t seem to get it to come through the parameters."}, {"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495625551, "post_id": 44156705, "comment_id": 75330545, "body": "@Mike.Whitehead Not in console, but in your web page, generated by rails. (Click right on the link on your web page and select &quot;inspect&quot;, then look at what is in &quot;href&quot; attribute). Or just look at what URL your browser indicates when your mouse is over the link."}, {"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495625795, "post_id": 44156705, "comment_id": 75330703, "body": "Could you show us what you get by doing a <code>rails routes -g comment</code> ?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495625988, "post_id": 44156705, "comment_id": 75330862, "body": "@HoloHokkaido This is what I get for edit -      edit_event_comment GET    /events/:event_id/comments/:id/edit(.:format) comments#edit"}, {"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495626225, "post_id": 44156705, "comment_id": 75331055, "body": "It seems to think that event_id is comment_id/event_id (hence the <code>27%2F32</code>). Could you show us your routes.rb file ?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495626750, "post_id": 44156705, "comment_id": 75331463, "body": "@HoloHokkaido added"}, {"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495626869, "post_id": 44156705, "comment_id": 75331557, "body": "@Mike.Whitehead Ok it seems correct."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495625531, "post_id": 44157031, "comment_id": 75330526, "body": "I agree, but how do I do that?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495625551, "post_id": 44157031, "comment_id": 75330544, "body": "to <code>edit</code>, not <code>create</code>, those are two different actions and serve different purposes. at time of creating comment, comment doesn&#39;t exist, thus <code>id</code> is <code>nil</code> and so <code>couldn&#39;t find with id=</code>"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495625624, "post_id": 44157031, "comment_id": 75330595, "body": "@Mike.Whitehead I showed you, remove <code>:create</code> from your only array."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495625797, "post_id": 44157031, "comment_id": 75330706, "body": "@Md.FarhanMemon I&#39;ve done that but edit still doesn&#39;t work. Can you see why this might be happening?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 2, "creation_date": 1495626054, "post_id": 44157031, "comment_id": 75330916, "body": "@Mike.Whitehead Your links are wrong.<code>&lt;%= link_to &#39;Edit&#39;, edit_event_comment_path([comment.event, comment]), id: &quot;comment&quot;, remote: true %&gt;</code> should be <code>&lt;%= link_to &#39;Edit&#39;, edit_event_comment_path(comment.event, comment), id: &quot;comment&quot;, remote: true %&gt;</code> or <code>&lt;%= link_to &#39;Edit&#39;, [comment.event, comment], id: &quot;comment&quot;, remote: true %&gt;</code>"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495626546, "post_id": 44157031, "comment_id": 75331288, "body": "try above fix, it should work, your params are passing wrong"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495626816, "post_id": 44157031, "comment_id": 75331512, "body": "@Md.FarhanMemon Which link do I use?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495627073, "post_id": 44157031, "comment_id": 75331701, "body": "@Md.FarhanMemon     Tried the second one - the routes are now working, however, I&#39;m now getting this in my development log - &#39;No template found for CommentsController#show, rendering head :no_content&#39; - I think this is now to do with the javascript side."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495627192, "post_id": 44157031, "comment_id": 75331791, "body": "well, that&#39;s because you have not created a view for <code>show</code> in comments. Rails redirects to show after creating any record. you need to handle the redirection."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495627462, "post_id": 44157031, "comment_id": 75331962, "body": "@Md.FarhanMemon Do I do that in the conventional way or do i need a js.erb file also?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495627662, "post_id": 44157031, "comment_id": 75332112, "body": "@Md.FarhanMemon Well, I want the edit function to work in-line so that&#39;s really the point. Do all nested resource html files need an underscore like _show.html.erb ?"}, {"owner": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495627735, "post_id": 44157031, "comment_id": 75332166, "body": "@Mike.Whitehead You should read this page : <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/layouts_and_rendering.html</a>"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 301, "user_id": 2641861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7ab21d891403cd866141e4e6d6ae15?s=128&d=identicon&r=PG", "display_name": "ArnoHolo", "link": "https://stackoverflow.com/users/2641861/arnoholo"}, "edited": false, "score": 0, "creation_date": 1495627899, "post_id": 44157031, "comment_id": 75332302, "body": "that&#39;s the syntax for partials, as suggested by @HoloHokkaido, please refer the documentation as this is way out of scope of question. Please accept the answer here and raise another question if you have any"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495628078, "post_id": 44157031, "comment_id": 75332444, "body": "@Md.FarhanMemon Sure, if you update your answer to include the part about the links then I&#39;ll mark it as correct."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1495628338, "post_id": 44157031, "comment_id": 75332685, "body": "@Md.FarhanMemon Actually that was somebody else. Don&#39;t worry, I&#39;ve done it."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 4, "last_activity_date": 1495628188, "last_edit_date": 1495628188, "creation_date": 1495625208, "answer_id": 44157031, "question_id": 44156705, "link": "https://stackoverflow.com/questions/44156705/rails-5-0-comments-not-working/44157031#44157031", "title": "Rails 5.0 - Comments not working", "body": "<p>change</p>\n\n<pre><code>before_action :set_comment, only: [:show, :create, :edit, :update, :destroy]\n</code></pre>\n\n<p>to </p>\n\n<pre><code>before_action :set_comment, only: [:show, :edit, :update, :destroy]\n</code></pre>\n\n<p>you can't set comment when you are creating it.</p>\n\n<p>Also, as discussed in the comments, your edit link should be,</p>\n\n<pre><code>&lt;%= link_to 'Edit', [comment.event, comment], id: \"comment\", remote: true %&gt;\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 44157031, "answer_count": 1, "score": 0, "last_activity_date": 1495628188, "creation_date": 1495624357, "last_edit_date": 1495626731, "question_id": 44156705, "link": "https://stackoverflow.com/questions/44156705/rails-5-0-comments-not-working", "title": "Rails 5.0 - Comments not working", "body": "<p>I'm implementing comments as a nested resource for an events app and hitting one issue after another. Initially it worked fine, however, the only functionality they had was create &amp; destroy. I want to add an edit function using Ajax/remote: true for same page editing (never done it before) and I've hit a wall. The edit link_to doesn't/has never worked and now even the create function doesn't work. This is what's coming through on the development log -</p>\n\n<pre><code>Processing by CommentsController#create as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"comment\"=&gt;{\"body\"=&gt;\"Comment.\"}, \"commit\"=&gt;\"Create Comment\", \"event_id\"=&gt;\"27\"}\n  [1m[36mComment Load (0.1ms)[0m  [1m[34mSELECT  \"comments\".* FROM \"comments\" WHERE \"comments\".\"id\" = ? LIMIT ?[0m  [[\"id\", nil], [\"LIMIT\", 1]]\nCompleted 404 Not Found in 1ms (ActiveRecord: 0.1ms)\n\n\n\nActiveRecord::RecordNotFound (Couldn't find Comment with 'id'=):\n</code></pre>\n\n<p>I've tried all sorts of different parameters via trial and error but the 'id' issue keeps springing up. Here's my code -</p>\n\n<p><strong>comments_controller.rb</strong></p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n\n    before_action :set_comment, only: [:show, :create, :edit, :update, :destroy]\n\n\n    def create\n        @event = Event.find(params[:event_id])\n        @comment = @event.comments.create(comment_params)\n        @comment.user_id = current_user.id\n\n        if @comment.save\n            redirect_to @event\n        else\n            render 'new'\n        end\n    end\n\n\n    # GET /comments/1/edit\n    def edit\n        @event = @comment.event\n        @comment = @event.comments.find(params[:id])\n        respond_to do |f|\n            f.js \n            f.html \n        end\n    end\n\n    def show\n    end\n\n\n\n    def update \n        if @comment.update(comment_params)\n            redirect_to @event, notice: \"Comment was successfully updated!\"\n        else\n            render 'edit'\n        end\n    end\n\n\n\n    def destroy\n        @event = Event.find(params[:event_id])\n        @comment = @event.comments.find(params[:id])\n        @comment.destroy\n\n        redirect_to event_path(@event)\n    end\n\n    private\n\n    def set_comment\n      @comment = Comment.find(params[:id])\n    end\n\n    def set_event\n        @event = Event.find(params[:event_id])\n    end\n\n\n    def comment_params\n      params.require(:comment).permit(:name, :body)\n    end\n\n\nend\n</code></pre>\n\n<p><strong>_comment.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"comment clearfix\"&gt;\n  &lt;div class=\"comment_content\"&gt;\n    &lt;div id=\"&lt;%=dom_id(comment)%&gt;\" class=\"comment\"&gt;  \n      &lt;p class=\"comment_name\"&gt;&lt;strong&gt;&lt;%= comment.name %&gt;&lt;/strong&gt;&lt;/p&gt;\n      &lt;p class=\"comment_body\"&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n\n  &lt;/div&gt;\n\n      &lt;p&gt;&lt;%= link_to 'Edit', edit_event_comment_path([comment.event, comment]), id: \"comment\", remote: true %&gt;&lt;/p&gt;\n                  &lt;p&gt;&lt;%= link_to 'Delete', [comment.event, comment],\n                                     method: :delete,\n                                        class: \"button\",\n                              data: { confirm: 'Are you sure?' } %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for([@event, @comment], remote: true) do |f| %&gt;\n\n\n    &lt;%= f.label :comment %&gt;&lt;br&gt;\n    &lt;%= f.text_area :body %&gt;&lt;br&gt;\n    &lt;br&gt;\n    &lt;%= f.button :submit, label: 'Add Comment', class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>edit.js.erb</strong></p>\n\n<pre><code>$('#comment').append('&lt;%= j render 'form' %&gt;');\n</code></pre>\n\n<p>I think I'm getting mixed up with the 'id's for this thing and how to get the <code>remote: true</code> function working on the page. I don't want to accept defeat but I may have to if I don't get this working. </p>\n\n<p>UPDATE - </p>\n\n<p>When I try and edit an existing comment I get this in my development log - </p>\n\n<pre><code>Started GET \"/events/27%2F32/comments/27/edit\" for ::1 at 2017-05-24 12:28:20 +0100\nProcessing by CommentsController#edit as JS\n  Parameters: {\"event_id\"=&gt;\"27/32\", \"id\"=&gt;\"27\"}\n  [1m[36mComment Load (0.1ms)[0m  [1m[34mSELECT  \"comments\".* FROM \"comments\" WHERE \"comments\".\"id\" = ? LIMIT ?[0m  [[\"id\", 27], [\"LIMIT\", 1]]\nCompleted 404 Not Found in 1ms (ActiveRecord: 0.1ms)\n\n\n\n\nActiveRecord::RecordNotFound (Couldn't find Comment with 'id'=27):\n</code></pre>\n\n<p>The route doesn't make sense - <code>\"/events/27%2F32/comments/27/edit\"</code> - the comment id should be 32 and the event id 27.</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n     devise_for :users, :controllers =&gt; { omniauth_callbacks: \"omniauth_callbacks\", registrations: \"registrations\" }  \n\n\n  resources :users\n  # the above resource draws out routes for user profiles\n  resources :events do\n\n    resources :comments\n    resources :bookings\n\n  end\n\n\n\n\n\n    root 'events#index'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495624801, "post_id": 44156150, "comment_id": 75330004, "body": "Being able to override same-named methods in subclasses is a key feature of inheritance in Ruby, so there is no built-in way to prevent it. (<code>include</code> simply makes the module the superclass of the class, so this is just class-inheritance, too.) What should happen if I <code>include</code> the module <i>first</i> and <i>then</i> add a same-named method to the class? What should happen if I <code>include</code> 2 modules with same-named methods? How can I override a mixed in method?"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495625449, "post_id": 44156150, "comment_id": 75330470, "body": "&quot;What should happen if I include the module first and then add a same-named method to the class?&quot; If another method was later added to the class which then overrides my method (then I think whoever implement that code should take responsibility, that is he/she makes sure that the method is not yet there, or that he/she knows what to do when there is already a method; which is just like me myself asking this question). This normally shouldn&#39;t be a problem because overriding methods is constrained to a namespace module or application, however I am overriding a generic <code>Object</code>  so..."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495625461, "post_id": 44156150, "comment_id": 75330481, "body": "... I need to make sure it&#39;s safe. Or... maybe this was not a really good idea of mine, I guess?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495625986, "post_id": 44156150, "comment_id": 75330861, "body": "How are you enforcing load order of the files? Ruby has open classes, you can add anything to a class at anytime. <code>include</code>ing the module first and later adding a same-named method is <i>exactly the same thing</i> as adding a same-named method first and <code>include</code>ing later \u2026 it just depends on which file happens to get loaded first."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495626672, "post_id": 44156150, "comment_id": 75331392, "body": "yes the order matters. I am loading all my lib files at the very end after every gem dependency has already been loaded. So this means then that I&#39;m sure that it won&#39;t be overriden later then right? or at least if someone overrides it later then he&#39;s using my gem incorrectly or that he knows what he&#39;s doing, or that I could provide some proper way of overriding the methods in my git readme. Although, I havent seen something like this in ruby or gems that checks for &quot;safetiness&quot;, so maybe it&#39;s best for me to not check this after all?"}], "answers": [{"comments": [{"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1495626748, "post_id": 44156984, "comment_id": 75331458, "body": "this is interesting! thanks! I&#39;ll try this when I get back to the office :)"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1495635944, "post_id": 44156984, "comment_id": 75338809, "body": "Just found out though that this only works if <code>def bar</code> is not defined on <code>Foo</code>, but is defined on <code>Person</code>. But it doesn&#39;t work when <code>def bar</code> is defined on <code>Foo</code>, but is not defined on <code>Person</code>"}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1495636381, "post_id": 44156984, "comment_id": 75339155, "body": "Right, let me think of a way around that one :)"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1495636719, "post_id": 44156984, "comment_id": 75339465, "body": "No worries! Take your time! :) I&#39;ll see what I can do as well."}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1495637209, "post_id": 44156984, "comment_id": 75339913, "body": "@Jay-ArPolidario okay, think i&#39;ve found it ;-)"}], "tags": [], "owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "is_accepted": true, "score": 4, "last_activity_date": 1495637199, "last_edit_date": 1495637199, "creation_date": 1495625097, "answer_id": 44156984, "question_id": 44156150, "link": "https://stackoverflow.com/questions/44156150/how-to-raise-error-when-including-a-module-that-already-has-same-name-methods/44156984#44156984", "title": "How to raise error when including a module that already has same-name methods", "body": "<p>If you <em>really</em> want this behaviour, you could consider the following:</p>\n\n<pre><code>module Foo\n  def self.included(base)\n    overrides = instance_methods.select { |method| base.instance_method(method).owner != self }\n    raise \"#{self.name} overrides #{overrides.join(', ')}\" if overrides.any?\n  end\nend\n</code></pre>\n\n<p>Running your code would get the following results:</p>\n\n<blockquote>\n  <p>in `included': Foo overrides bar (RuntimeError)</p>\n</blockquote>\n"}], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 44156984, "answer_count": 1, "score": 2, "last_activity_date": 1495637199, "creation_date": 1495622853, "question_id": 44156150, "link": "https://stackoverflow.com/questions/44156150/how-to-raise-error-when-including-a-module-that-already-has-same-name-methods", "title": "How to raise error when including a module that already has same-name methods", "body": "<h2>Given:</h2>\n\n<pre><code>module Foo\n  def bar\n    puts 'Foo Bar!'\n  end\nend\n\nclass Person\n  def bar\n    puts 'Person Bar!'\n  end\nend\n\nclass Person\n  # I want this line to raise an error because Foo and Person has same-named methods that would break dependencies if ignored\n  include Foo\nend\n\nPerson.new.bar\n# =&gt; Person Bar!\n</code></pre>\n\n<h2>Question:</h2>\n\n<ul>\n<li>From the code above, I am looking for an alternative to <code>include</code> and <code>extend</code> that would do the same thing except that it will raise an error when included or extended methods are already defined.</li>\n<li>Is there something like <code>include!</code> or <code>extend!</code>?</li>\n</ul>\n\n<h2>Usage:</h2>\n\n<ul>\n<li><p>I am writing a small gem that would be adding methods to the <code>Object</code> class:</p>\n\n<pre><code>class Object\n  include MyGemName\nend\n</code></pre>\n\n<p>, and I want to make sure first that there are no same-name methods defined yet on the <code>Object</code> class.</p></li>\n</ul>\n\n<h2>Attempts:</h2>\n\n<pre><code>class Person\n  duplicate_methods = self.instance_methods(false) &amp; Foo.instance_methods(false)\n  raise \"#{self} already has methods: #{duplicate_methods}\" unless duplicate_methods.empty?\n  include Foo\nend\n</code></pre>\n\n<ul>\n<li>above works, but because this is my first gem and that I feel that \"naming\" is a \"usual\" programming problem, that perhaps there is just some \"simpler\" way of doing this.</li>\n</ul>\n\n<p><strong>Note:</strong></p>\n\n<ul>\n<li><p>It is a requirement for me to override the <code>Object</code> class, because I want to skip passing <code>self</code> as an argument to the said methods.</p></li>\n<li><p>I might be missing just simple thing here, but my search over the internet yields me no helpful solution. Perhaps then, I'm doing something wrong?</p></li>\n</ul>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1495622997, "post_id": 44156128, "comment_id": 75328824, "body": "<i>&quot;I read that instance variables are accessible to all methods in the class so why am I getting the error?&quot;</i> \u2013 because your <code>require_relative</code> call is not inside a method."}, {"owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495623954, "post_id": 44156128, "comment_id": 75329451, "body": "@Stefan Thanks for the reply. But i really require the file to be loaded in the class as it contains modules i plan to use in the class. Can you suggest a workaround please?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1495625151, "post_id": 44156128, "comment_id": 75330254, "body": "That makes no sense. <code>require_relative</code> simply runs the file. Where the call to <code>require_relative</code> is, has no influence whatsoever."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1495625366, "post_id": 44156128, "comment_id": 75330410, "body": "What J&#246;rg said. Also, you want to do something at class level before any instance is created, yet <b>requiring data from instance initializer</b>. This doesn&#39;t make any sense."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1495625450, "post_id": 44156128, "comment_id": 75330473, "body": "&quot;The problem is associated with scope gates&quot; - scope gates have <b>nothing</b> to do with this. But yes, it&#39;s a matter of scope, class vs instance."}, {"owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495625551, "post_id": 44156128, "comment_id": 75330542, "body": "@J&#246;rgWMittag Ohh I see ... I thought It loads the script into the file. I&#39;m really sorry for my ignorance. But with what i plan to do is there a workaround that i can use? I need a mechanism to add the script in the file to the class because it holds some extensions to the class."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495625597, "post_id": 44156128, "comment_id": 75330569, "body": "Well, if the script file holds extensions to the class, then running it will add those extensions to the class."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495627274, "post_id": 44156128, "comment_id": 75331843, "body": "@W.J.A from the <a href=\"http://ruby-doc.org/core-2.4.1/Kernel.html#method-i-require\" rel=\"nofollow noreferrer\">docs</a>: <i>&quot;Any constants or globals within the loaded source file will be available in the calling program\u2019s global namespace.&quot;</i> Once the file is loaded, you can add it (i.e. its modules) to your class via <code>include</code> and <code>extend</code>."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1495625702, "post_id": 44157215, "comment_id": 75330647, "body": "What is the purpose of that <code>Class.new</code> thing in the initializer? It won&#39;t work as you think it would"}, {"owner": {"reputation": 324, "user_id": 7052392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db12a1a0d2b5892c8abfa9d066e3c20?s=128&d=identicon&r=PG&f=1", "display_name": "steenuil", "link": "https://stackoverflow.com/users/7052392/steenuil"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1495626001, "post_id": 44157215, "comment_id": 75330876, "body": "It defines a new anonymous class, which you can assign to a constant (like <code>A = Class.new</code>) or inherit from (<code>a = Class.new; class A &lt; a; end</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1495626068, "post_id": 44157215, "comment_id": 75330927, "body": "But you don&#39;t assign it. And return value of initializer is ignored."}, {"owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "edited": false, "score": 0, "creation_date": 1495626149, "post_id": 44157215, "comment_id": 75331000, "body": "Thanks a mil @steenuil  You&#39;ve been most helpful. It&#39;s the latter that I want to do! I&#39;m really grateful!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1495626303, "post_id": 44157215, "comment_id": 75331110, "body": "You need a very very very good reason to play with overriding <code>.new</code>. And here you don&#39;t do it correctly."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1495627443, "post_id": 44157215, "comment_id": 75331950, "body": "@steenuil: yes, it does. Also its very purpose is to create classes. Suppose, you wanted to do the same thing here (which you don&#39;t, as confirmed by OP). Judging from class name, <code>InterfaceServer.new</code> creates servers, not server classes. That&#39;s the violation of contract/principle-of-least-surprise. But you can have <code>InterfaceServerFactory.create</code> (or something) for your class creation needs. So, if you remove the first part of your answer, which is a total shot-in-the-dark (and doesn&#39;t work anyway, see J&#246;rg&#39;s answer), I&#39;ll retract my downvote."}, {"owner": {"reputation": 324, "user_id": 7052392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db12a1a0d2b5892c8abfa9d066e3c20?s=128&d=identicon&r=PG&f=1", "display_name": "steenuil", "link": "https://stackoverflow.com/users/7052392/steenuil"}, "edited": false, "score": 0, "creation_date": 1495628330, "post_id": 44157215, "comment_id": 75332675, "body": "Point taken. I removed the first part."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1495628635, "post_id": 44157215, "comment_id": 75332881, "body": "@steenuil: JFYI, if you want someone to see your comment, you <code>@mention</code> them. Otherwise, they may never come back to the post."}, {"owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "edited": false, "score": 1, "creation_date": 1495669204, "post_id": 44157215, "comment_id": 75356000, "body": "Thanks guys. I&#39;ve found a solution to what I was trying to do. Apparently, what i was trying to implement can be done using the decorator design pattern. I got some code and more explanation from the book Design Patterns In Ruby by Russ Olsen. Thanks for helping out! I really appreciate."}], "tags": [], "owner": {"reputation": 324, "user_id": 7052392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db12a1a0d2b5892c8abfa9d066e3c20?s=128&d=identicon&r=PG&f=1", "display_name": "steenuil", "link": "https://stackoverflow.com/users/7052392/steenuil"}, "is_accepted": false, "score": -1, "last_activity_date": 1495628237, "last_edit_date": 1495628237, "creation_date": 1495625659, "answer_id": 44157215, "question_id": 44156128, "link": "https://stackoverflow.com/questions/44156128/how-to-load-a-file-into-a-class-scope/44157215#44157215", "title": "How to load a file into a class scope", "body": "<p><code>require_relative @channel_path</code> is called when Ruby loads the <code>InterfaceServer</code> class, but <code>@channel_path</code> is only defined later when the class is instantiated.</p>\n\n<p>If you want to define which modules to load into the class at runtime, you could put the methods you want to include from the '_implementation' files in different modules, and <code>include</code> each module in the class.</p>\n\n<pre><code>class InterfaceServer; end\n\nchannels.each do |channel|\n  InterfaceServer.include Object.const_get(channel.capitalize)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "edited": false, "score": 0, "creation_date": 1495627027, "post_id": 44157292, "comment_id": 75331671, "body": "Thanks for the insight @Jorg"}, {"owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "edited": false, "score": 0, "creation_date": 1495669279, "post_id": 44157292, "comment_id": 75356020, "body": "Thanks for pointing out my mistakes. I&#39;ve found a solution to what I was trying to do. Apparently, what i was trying to implement can be done using the decorator design pattern. I got some code and more explanation from the book Design Patterns In Ruby by Russ Olsen. Thanks for helping out! I really appreciate."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1495625846, "creation_date": 1495625846, "answer_id": 44157292, "question_id": 44156128, "link": "https://stackoverflow.com/questions/44156128/how-to-load-a-file-into-a-class-scope/44157292#44157292", "title": "How to load a file into a class scope", "body": "<p>Instance variables belong to objects (\"instances\"), that's why they are <em>called</em> instance variables. You have two completely different objects here: <code>InterfaceServer</code> and an instance of <code>InterfaceServer</code>. They are different objects (after all, they don't even the same class! <code>InterfaceServer</code> has class <code>Class</code>, the instance of <code>InterfaceServer</code> has class <code>InterfaceServer</code>), so they have different instance variables as well.</p>\n\n<blockquote>\n  <p>My code requires a file to be loaded into the <code>InterfaceServer</code> class's scope.\n  [\u2026]\n  Wrapping the <code>require_relative</code> statement in a method would solve the problem, but it defeats my requirement for the file to be loaded into the class's scope.</p>\n</blockquote>\n\n<p><code>require_relative</code> simply runs the file. It has nothing to do with scopes. Where the call to <code>require_relative</code> is located is irrelevant.</p>\n\n<p>(Oh, and also: <code>require_relative</code> is not a statement, it is an expression. In fact, there are no statements in Ruby, everything is an expression.)</p>\n\n<blockquote>\n  <p>The problem is associated with scope gates</p>\n</blockquote>\n\n<p>Nope, it isn't.</p>\n\n<blockquote>\n  <p>I read that instance variables are accessible to all methods in the class.</p>\n</blockquote>\n\n<p>Instance variables belong to instances. They have nothing to do with methods.</p>\n\n<blockquote>\n  <p>Why am I getting the error?</p>\n</blockquote>\n\n<p>The instance variable <code>@channel_path</code> of <code>InterfaceServer</code> has nothing to do with the instance variable <code>@channel_path</code> of the <em>instance of</em> <code>InterfaceServer</code>. Since you never assigned to the instance variable <code>@channel_path</code> of <code>InterfaceServer</code>, it doesn't exist, and non-existing instance variables evaluate to <code>nil</code>, ergo you are calling <code>require_relative</code> with <code>nil</code> as an argument.</p>\n\n<blockquote>\n  <p>Can anyone help with a solution?</p>\n</blockquote>\n\n<p>Not really, since you haven't stated the problem. What you are doing is a) impossible (there are multiple instances of the class, so which instance's <code>@channel_path</code> should be used?) and b) non-sensical (there is no such thing as \"<code>require</code>ing a file into a class's scope).</p>\n"}], "owner": {"reputation": 11, "user_id": 8058357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2977e99c26baf4380175001c9c04db?s=128&d=identicon&r=PG&f=1", "display_name": "W.J.A", "link": "https://stackoverflow.com/users/8058357/w-j-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495628237, "creation_date": 1495622806, "last_edit_date": 1495625600, "question_id": 44156128, "link": "https://stackoverflow.com/questions/44156128/how-to-load-a-file-into-a-class-scope", "title": "How to load a file into a class scope", "body": "<p>In <code>InterfaceServer#initialize</code>, I intend to build a path to a file, and load the file into <code>InterfaceServer</code> class's scope.</p>\n\n<p>This is my code:</p>\n\n<pre><code>class InterfaceServer\n  def initialize(channel)\n    @channel_path = channel + \"_implementation\"\n  end\n\n  require_relative @channel_path\nend\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>error =&gt; `require_relative': no implicit conversion of nil into String (TypeError)\n</code></pre>\n\n<p>Wrapping the <code>require_relative</code> statement in a method would solve the problem, but it defeats my requirement for the file to be loaded into the class's scope.</p>\n\n<p>The problem is associated with scope gates, but I can't make it work. I read that instance variables are accessible to all methods in the class. Why am I getting the error?\n Can anyone help with a solution?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495621745, "post_id": 44155706, "comment_id": 75327951, "body": "Would a default value work for you or do you need a pre-filled hash?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1495626919, "post_id": 44155706, "comment_id": 75331588, "body": "Not sure what you mean by &quot;one key per wday hour minute&quot;. What is &quot;wday hour minute&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 4, "last_activity_date": 1495625569, "last_edit_date": 1495625569, "creation_date": 1495622233, "answer_id": 44155937, "question_id": 44155706, "link": "https://stackoverflow.com/questions/44155706/smarter-way-to-initialize-a-deep-hash/44155937#44155937", "title": "Smarter way to initialize a deep hash", "body": "<p>You can use default procs as possible way:</p>\n\n<pre><code>hash = Hash.new do |h, k|\n  h[k] = Hash.new do |h1, k1|\n    h1[k1] = Hash.new do |h2, k2|\n      h2[k2] = 0 if (0..59).include?(k2)\n    end if (0..23).include?(k1)\n  end if (1..7).include?(k)\nend\n</code></pre>\n\n<p>Then check:</p>\n\n<pre><code>hash[1][2][3]\n#=&gt; 0\nhash[1][2][300]\n#=&gt; nil\n</code></pre>\n\n<p>The main advantage of this solution is that you don't need to create a bunch of objects, you just create a rule. Creating objects is possible if you have a little amount of objects like in your instance, but could be a problem if you want to create a lot of them.</p>\n"}, {"tags": [], "owner": {"reputation": 735, "user_id": 5775246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rWMQ7_UYyiI/AAAAAAAAAAI/AAAAAAAAADc/xFHc8sFhSWk/photo.jpg?sz=128", "display_name": "DjezzzL", "link": "https://stackoverflow.com/users/5775246/djezzzl"}, "is_accepted": false, "score": 0, "last_activity_date": 1495622563, "creation_date": 1495622563, "answer_id": 44156035, "question_id": 44155706, "link": "https://stackoverflow.com/questions/44155706/smarter-way-to-initialize-a-deep-hash/44156035#44156035", "title": "Smarter way to initialize a deep hash", "body": "<p>Could you try this one:</p>\n\n<pre><code>(1..7).inject({}) do |wday, i|\n  wday[i] = (0..23).inject({}) do |hour, j|\n    hour[j] = (0..59).inject({}) do |minute, k|\n      minute[k] = 0\n      minute\n    end\n    hour\n  end\n  wday\nend\n</code></pre>\n\n<p>or something like that:</p>\n\n<pre><code>Hash.new(Hash.new(Hash.new(0))\n</code></pre>\n\n<p>which define default constructors for your nested hash properly</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 3535591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b95cf349867c4011af91a341734f350?s=128&d=identicon&r=PG", "display_name": "kairos", "link": "https://stackoverflow.com/users/3535591/kairos"}, "is_accepted": false, "score": 0, "last_activity_date": 1495644443, "creation_date": 1495644443, "answer_id": 44164285, "question_id": 44155706, "link": "https://stackoverflow.com/questions/44155706/smarter-way-to-initialize-a-deep-hash/44164285#44164285", "title": "Smarter way to initialize a deep hash", "body": "<p>You can use a more readable set of instructions like this:</p>\n\n<pre><code>result = {}\n(1..7).each do |wday|\n  (0..23).each do |hour|\n    (0..59).each do |minute|\n      result[wday] ||= {}\n      result[wday][hour] ||= {}\n      result[wday][hour][minute] = 0\n    end\n  end\nend\n</code></pre>\n\n<p>Even if there are more powerful solutions, I think that this is more readable if you don't need a more complex behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646437, "last_edit_date": 1495646437, "creation_date": 1495646065, "answer_id": 44164825, "question_id": 44155706, "link": "https://stackoverflow.com/questions/44155706/smarter-way-to-initialize-a-deep-hash/44164825#44164825", "title": "Smarter way to initialize a deep hash", "body": "<p>I would do it thusly, which is merely a refinement of what the OP has written.</p>\n\n<pre><code>result = (1..7).each_with_object({}) do |wday, f|\n           f[wday] = (0..23).each_with_object({}) do |hour, g|\n             g[hour] = (0..59).each_with_object({}) do |minute, h|\n               h[minute] = 0\n             end\n           end\n         end\n</code></pre>\n\n<p>Alternatively,</p>\n\n<pre><code>result = (1..7).each_with_object({}) do |wday, f|\n           (0..23).each_with_object(f[wday] = {}) do |hour, g|\n             (0..59).each_with_object(g[hour] = {}) do |minute, h|\n               h[minute] = 0\n             end\n           end\n         end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1495668346, "creation_date": 1495668346, "answer_id": 44170009, "question_id": 44155706, "link": "https://stackoverflow.com/questions/44155706/smarter-way-to-initialize-a-deep-hash/44170009#44170009", "title": "Smarter way to initialize a deep hash", "body": "<p>It's not the prettiest of the lot, but here's something to consider:</p>\n\n<pre><code>(1..7).to_a.product((0..23).to_a, (0..59).to_a).\n  reduce({}) do |hash, (weekday, hour, minute)| \n    hash.tap { |h| ((h[weekday] ||= {})[hour] ||= {})[minute] = 0 }\n  end\n</code></pre>\n"}], "owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1495668346, "creation_date": 1495621586, "last_edit_date": 1495626882, "question_id": 44155706, "link": "https://stackoverflow.com/questions/44155706/smarter-way-to-initialize-a-deep-hash", "title": "Smarter way to initialize a deep hash", "body": "<p>I need a hash with one key per wday hour minute. I wrote this:</p>\n\n<pre><code>result = {}\n      for wday in 1..7 do\n        result[wday] = {}\n        for hour in 0..23 do\n          result[wday][hour] = {}\n          for minute in 0..59 do\n            result[wday][hour][minute] = 0\n          end\n        end\n      end\n</code></pre>\n\n<p>I wanted to know if there is a better way to achieve the same behavior with less lines of code, and be as readable as is.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "smtp", "actionmailer"], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1495629183, "post_id": 44156539, "comment_id": 75333261, "body": "You are my hero today :) .... that was it....so simple.. thank you so much"}], "tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": true, "score": 3, "last_activity_date": 1495623911, "creation_date": 1495623911, "answer_id": 44156539, "question_id": 44155659, "link": "https://stackoverflow.com/questions/44155659/serious-problems-sending-mails-via-actionmailer-in-production-ror/44156539#44156539", "title": "serious problems sending mails via actionmailer in production ROR", "body": "<p>I wonder if this is just as simple as the following:</p>\n\n<pre><code>config.action_mailer.smtp_settings = {\n  # address: ENV[\"SMTP_ADDRESS\"].inspect,\n  address: ENV[\"SMTP_ADDRESS\"],\n  # ...\n}\n</code></pre>\n\n<ul>\n<li><p>because <code>inspect</code> adds quotes to the string (see below):</p>\n\n<pre><code>puts \"somestring\"\n# =&gt; somestring\nputs \"somestring\".inspect\n# =&gt; \"somestring\"\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 44156539, "answer_count": 1, "score": 1, "last_activity_date": 1495623911, "creation_date": 1495621473, "question_id": 44155659, "link": "https://stackoverflow.com/questions/44155659/serious-problems-sending-mails-via-actionmailer-in-production-ror", "title": "serious problems sending mails via actionmailer in production ROR", "body": "<p>I really need help with this, have been trying to work this out for 3 days :(\nMy app is supposed to send emails to customer when order is either received or shipped but it constantly breaks with this error.</p>\n\n<pre><code>  I, [2017-05-23T11:01:44.741054 #1060]  INFO -- : Completed 500 Internal Server Error in 66ms (ActiveRecord: 4.2ms)\nF, [2017-05-23T11:01:44.743481 #1060] FATAL -- :\nSocketError (getaddrinfo: Name or service not known):\n  app/admin/order.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>My <code>actionmailer</code>setup seems to be right:</p>\n\n<pre><code>      config.action_mailer.default_url_options = { host: 'mypage.com'}\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.smtp_settings = {\n    address: ENV[\"SMTP_ADDRESS\"].inspect,\n    user_name: ENV[\"SMTP_USER\"],\n    password: ENV[\"SMTP_PASSWORD\"],\n    domain: \"mypage.com\",\n    port: 587,\n    authentication: :login,\n    enable_starttls_auto: true\n  }\n</code></pre>\n\n<p>The <code>ENV</code>variables are stored in the <code>application.yml</code> </p>\n\n<pre><code>SMTP_ADDRESS: \"smtp.gmail.com\"\nSMTP_USER: \"xxx@xxxxxxxxxx.com\"\nSMTP_PASSWORD: \"xxxxxxxx\"\n</code></pre>\n\n<p>The <code>ENV</code>variables have been checked by running:</p>\n\n<pre><code>Loading production environment (Rails 4.2.5)\nirb(main):001:0&gt; puts ENV[\"SMTP_ADDRESS\"].inspect \n\"smtp.gmail.com\"\n=&gt; nil\nirb(main):002:0&gt; \n</code></pre>\n\n<p>I have done <code>host smtp.gmail.com</code> with positive resault:</p>\n\n<pre><code>smtp.gmail.com is an alias for gmail-smtp-msa.l.google.com.\ngmail-smtp-msa.l.google.com has address 74.125.206.108\ngmail-smtp-msa.l.google.com has address 74.125.206.109\ngmail-smtp-msa.l.google.com has IPv6 address 2a00:1450:400c:c04::6d\n</code></pre>\n\n<p>I've done <code>telnet smtp.gmail.com 587</code>:</p>\n\n<pre><code>Trying 74.125.206.108...\nConnected to gmail-smtp-msa.l.google.com.\nEscape character is '^]'.\n220 smtp.gmail.com ESMTP c17sm3264999wre.35 - gsmtp\n</code></pre>\n\n<p>I've also done <code>nslookup smtp.gmail.com</code>:</p>\n\n<pre><code>Server:     8.8.8.8\nAddress:    8.8.8.8#53\n\nNon-authoritative answer:\nsmtp.gmail.com  canonical name = gmail-smtp-msa.l.google.com.\nName:   gmail-smtp-msa.l.google.com\nAddress: 74.125.206.108\nName:   gmail-smtp-msa.l.google.com\nAddress: 74.125.206.109\n</code></pre>\n\n<p>I'm running out of options here, this works perfectly locally were <code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }</code></p>\n\n<p>But after deploy <code>actionmailer</code>breaks.</p>\n\n<p>In my google account, I've <code>https://accounts.google.com/DisplayUnlockCaptcha</code> and enabled <code>less secure apps</code>  with out luck.</p>\n\n<p>Below is the <code>admin/order.rb</code> were the error is raised for line: 6.</p>\n\n<pre><code>ActiveAdmin.register Order do\n\npermit_params :shipped\n\nafter_update do |order|\n    OrderNotifier.shipped(@order).deliver if order.shipped  #this is line 6.\n\nend\n\nshow do |order|\n\n\n\n    panel 'Customer Details' do\n        attributes_table_for order, :name, :email, :address, :city, :country\n    end\n\n    panel 'Created' do\n        \"#{time_ago_in_words order.created_at} ago\"\n    end\n\n\n    panel 'Shipped' do\n        order.shipped\n    end\n\n    panel 'Order Details' do\n        table_for(order.product_items) do \n            column 'Product' do |item|\n                item.product.title\n            end\n            column 'Quantity' do |item|\n                item.quantity\n            end\n            column 'Price Isl' do |item|\n                number_to_currency item.total_price_isl\n            end\n            column 'Price USD' do |item|\n                number_to_currency item.total_price_usd\n            end\n        end\n    end\n\n    panel 'Order Total USD' do \n        number_to_currency order.total_price_usd\n\n    end\n\n    panel 'Order Total Iskr' do \n        number_to_currency order.total_price_isl\n\n    end\n\nend\n\n\nend\n</code></pre>\n\n<p>here is the <code>mailer/order_notifier.rb</code></p>\n\n<pre><code> class OrderNotifier &lt; ApplicationMailer\n\n  default from: 'Concept Store &lt;mail@mypage.com&gt;'\n\n  def received(order)\n    @order = order\n\n    mail to: order.email, subject: 'Concept Store'\n  end\n\n\n  def shipped(order)\n\n   @order = order\n\n    mail to: order.email, subject: 'Order Shipped'\n  end\nend\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "odbc"], "comments": [{"owner": {"reputation": 653, "user_id": 4685126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3OJbi6SigoI/AAAAAAAAAAI/AAAAAAAAAgM/F1EueL-Gfgw/photo.jpg?sz=128", "display_name": "Reza Bojnordi", "link": "https://stackoverflow.com/users/4685126/reza-bojnordi"}, "edited": false, "score": 0, "creation_date": 1495620346, "post_id": 44154861, "comment_id": 75333328, "body": "You can connect to a SQL Database using Ruby on Windows, Linux, or Mac. <a href=\"https://docs.microsoft.com/en-us/sql/connect/ruby/ruby-driver-for-sql-server\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/sql/connect/ruby/&hellip;</a>"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1495713002, "post_id": 44154861, "comment_id": 75373582, "body": "This is rather broad and hard to answer. Are you getting any error messages?"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1495716323, "post_id": 44154861, "comment_id": 75375784, "body": "What did you try up to now? (beside the information in <a href=\"https://stackoverflow.com/questions/44138013/error-with-rake-dbmigrate-using-tiny-tds-and-sqlserver-adapter\" title=\"error with rake dbmigrate using tiny tds and sqlserver adapter\">stackoverflow.com/questions/44138013/&hellip;</a> - there is no need to open new questions with the same topic, but less information)"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "is_accepted": true, "score": 0, "last_activity_date": 1499952155, "creation_date": 1499952155, "answer_id": 45081919, "question_id": 44154861, "link": "https://stackoverflow.com/questions/44154861/how-to-connect-ruby-to-sql-server-management-studio/45081919#45081919", "title": "How to connect Ruby to SQL Server Management Studio?", "body": "<p>try a <code>dlib connection</code> with the <code>activerecord-sqlserver-adapter</code> gem:</p>\n\n<pre><code>development:\n  adapter: sqlserver\n  mode: dblib\n  database: sqlserverdatabase\n  host: host\n  port: port\n  username: username\n  password: password\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 45081919, "answer_count": 1, "score": 0, "last_activity_date": 1499952155, "creation_date": 1495619432, "last_edit_date": 1495712969, "question_id": 44154861, "link": "https://stackoverflow.com/questions/44154861/how-to-connect-ruby-to-sql-server-management-studio", "title": "How to connect Ruby to SQL Server Management Studio?", "body": "<p>I've been trying to connect my Ruby on Rails web app to my SQL Server database, I've looked everywhere on the internet especially Stack Overflow and can't seem to get it to work, even tried odbc. Any ideas/ things I can do to make it work?</p>\n"}, {"tags": ["arrays", "ruby", "loops"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1495619448, "post_id": 44154849, "comment_id": 75326337, "body": "You should use another variable name, though: <code>array</code> is no longer an array ;-)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495619524, "post_id": 44154849, "comment_id": 75326396, "body": "Does it work <code>colors_enum</code> for you? Naming is an hard problem for me :D"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1495619589, "post_id": 44154849, "comment_id": 75326449, "body": "Sure, <code>color_cycle</code> would be fine, too."}, {"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1495619755, "post_id": 44154849, "comment_id": 75326570, "body": "Looking at the docs for <code>cycle</code> I don&#39;t seem to find the possibility to give the <code>enumerator</code> a starting point. I.e. is it possible to get next element without starting from first element each time?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1495619918, "post_id": 44154849, "comment_id": 75326701, "body": "@FellowStranger you call <code>cycle</code> once and store the result. Then, you keep calling <code>next</code> to get one value after another."}, {"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1495620051, "post_id": 44154849, "comment_id": 75326797, "body": "OK thanks. So not possible to get &quot;next&quot; value just by pointing to any position."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 1, "creation_date": 1495620141, "post_id": 44154849, "comment_id": 75326854, "body": "@FellowStranger the whole point of <code>cycle</code> is that you don&#39;t have to remember the position. <code>cycle</code> does that for you."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1495620482, "post_id": 44154849, "comment_id": 75327092, "body": "@FellowStranger I think it&#39;s not possible but you might rotate the array before call cycle. <a href=\"https://stackoverflow.com/questions/26597835/set-starting-point-for-cycle/26597884\" title=\"set starting point for cycle\">stackoverflow.com/questions/26597835/&hellip;</a>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 10, "last_activity_date": 1495627135, "last_edit_date": 1495627135, "creation_date": 1495619388, "answer_id": 44154849, "question_id": 44154770, "link": "https://stackoverflow.com/questions/44154770/how-to-get-the-next-element-in-an-array-but-get-first-if-current-is-last/44154849#44154849", "title": "How to get the next element in an array but get first if current is last", "body": "<p>Use <code>cycle</code> method, an enumerator seems what you're looking for.</p>\n\n<pre><code>color_cycle = %w(#646C74 #F68848 #1FA45C).cycle\ncolor_cycle.next # =&gt; \"#646C74\"\ncolor_cycle.next # =&gt; \"#F68848\"\ncolor_cycle.next # =&gt; \"#1FA45C\"\ncolor_cycle.next # =&gt; \"#646C74\"\ncolor_cycle.next # =&gt; \"#F68848\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 1, "creation_date": 1495620638, "post_id": 44155268, "comment_id": 75327202, "body": "This is an excellent solution. But I don&#39;t understand your example index position of <code>1234</code> ?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 2, "creation_date": 1495621105, "post_id": 44155268, "comment_id": 75327517, "body": "@FellowStranger It&#39;s just a random number to make you understand that with modulo operator you always end in the array range"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495621474, "post_id": 44155268, "comment_id": 75327753, "body": "It also works as expected with negative indices, i.e. <code>-1 % array.size</code> gives you the last item&#39;s index, <code>-2 % array.size</code> the second to last and so on."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1495620412, "creation_date": 1495620412, "answer_id": 44155268, "question_id": 44154770, "link": "https://stackoverflow.com/questions/44154770/how-to-get-the-next-element-in-an-array-but-get-first-if-current-is-last/44155268#44155268", "title": "How to get the next element in an array but get first if current is last", "body": "<p>Just out of curiosity, there is plain old good arithmetics (modulo calc) still alive:</p>\n\n<pre><code>array = %w(#646C74 #F68848 #1FA45C)\nindex = 1234\nitem = array[index % array.size]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1495671106, "creation_date": 1495671106, "answer_id": 44170330, "question_id": 44154770, "link": "https://stackoverflow.com/questions/44154770/how-to-get-the-next-element-in-an-array-but-get-first-if-current-is-last/44170330#44170330", "title": "How to get the next element in an array but get first if current is last", "body": "<blockquote>\n  <p>Looking at the docs for cycle I don't seem to find the possibility to give the enumerator a starting point. I.e. is it possible to get next element without starting from first element each time?</p>\n</blockquote>\n\n<p>I'd do something like this:</p>\n\n<pre><code>colors = array = %w(646C74 F68848 1FA45C)\n</code></pre>\n\n<p>\"randomly\" grab a color from the list:</p>\n\n<pre><code>first_color = colors.delete_at(rand(colors.size))\ncolors # =&gt; [\"646C74\", \"1FA45C\"]\n</code></pre>\n\n<p>and push it onto the end of the list:</p>\n\n<pre><code>colors &lt;&lt; first_color\n</code></pre>\n\n<p>Then you can start cycling after you used the first color:</p>\n\n<pre><code>color_wheel = colors.cycle\ncolors.size.times do\n  puts color_wheel.next\nend\n\n# &gt;&gt; 646C74\n# &gt;&gt; 1FA45C\n# &gt;&gt; F68848\n</code></pre>\n"}], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3154, "favorite_count": 0, "accepted_answer_id": 44155268, "answer_count": 3, "score": 2, "last_activity_date": 1495671705, "creation_date": 1495619196, "last_edit_date": 1495671705, "question_id": 44154770, "link": "https://stackoverflow.com/questions/44154770/how-to-get-the-next-element-in-an-array-but-get-first-if-current-is-last", "title": "How to get the next element in an array but get first if current is last", "body": "<p>I have an array of color codes:</p>\n\n<pre><code>array = %w(#646C74 #F68848 #1FA45C etc...)\n</code></pre>\n\n<p>Every time I query the array I compare with what color was lastly used and want to get the next one. If the last one used is the last in the array, I want the first one. </p>\n\n<p>Is there a more dedicated or succinct way to solve this than:</p>\n\n<pre><code>index_of_last_used_color = array.index(last_used_color)\nnext_position = index_of_last_used_color + 1\nif color = array[next_position]\n    return color\nelse\n    return array.first\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 1700258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/424de8d9f0408570e038e097766d3e54?s=128&d=identicon&r=PG", "display_name": "Aditya Kapoor", "link": "https://stackoverflow.com/users/1700258/aditya-kapoor"}, "is_accepted": true, "score": 1, "last_activity_date": 1495618722, "creation_date": 1495618722, "answer_id": 44154606, "question_id": 44154465, "link": "https://stackoverflow.com/questions/44154465/rails-s-doesnt-work-but-bundle-exec-rails-s-works-why/44154606#44154606", "title": "&quot;rails s&quot; doesn&#39;t work but &quot;bundle exec rails s&quot; works. Why?", "body": "<p>The purpose of having the bundle exec command is to look/search for the command which you want to run inside the current bundle or installed gems inside your vendor directory.</p>\n\n<p>If you are running newer rails (v5) then have a look at the binstubs which copies over the command executeable in the bin directory. So that you can simply call</p>\n\n<p>bin/rails server</p>\n\n<p>This is the same approach which is followed by the deployment solutions which we currently have. They create a .bundle directory which eliminates the need to do bundle install everytime.</p>\n"}], "owner": {"reputation": 329, "user_id": 6021924, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-7W2UshWawos/AAAAAAAAAAI/AAAAAAAAABY/cI2CZIET0nk/photo.jpg?sz=128", "display_name": "Vitalii Paprotskyi", "link": "https://stackoverflow.com/users/6021924/vitalii-paprotskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 44154606, "answer_count": 1, "score": 0, "last_activity_date": 1495618722, "creation_date": 1495618322, "question_id": 44154465, "link": "https://stackoverflow.com/questions/44154465/rails-s-doesnt-work-but-bundle-exec-rails-s-works-why", "title": "&quot;rails s&quot; doesn&#39;t work but &quot;bundle exec rails s&quot; works. Why?", "body": "<p>I copied the app from Github. Installed a proper version of Ruby using rbenv. I installed bundler by <code>gem install bundler</code> and ran <code>bundle install --path vendor/bundle</code>. All gems were installed in <code>vendor/bundle</code> directory in the app. Now I wonder, why <code>rails s</code> command doesn't work but <code>bundle exec rails s</code> works? The same with <code>rspec</code> command. Is this because I installed gems in <code>vendor/bundle</code> directory? I'm confused.</p>\n\n<p>Also, when I run <code>gem list</code> I get only a few gems, but there are a lot of them in <code>vendor/bundle</code> directory.</p>\n\n<p>Please tell me why <code>gem list</code> command doesn't see gems from <code>vendor/bundle</code> directory and why I need to run commands with <code>bundle exec</code>. Thank you!</p>\n"}, {"tags": ["ruby", "watir", "ruby-watir"], "comments": [{"owner": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495620160, "post_id": 44154398, "comment_id": 75326867, "body": "If you want to scrape an HTML, why don&#39;t you use nokogiri?"}, {"owner": {"reputation": 1153, "user_id": 7765493, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-ykfe_wHJyD8/AAAAAAAAAAI/AAAAAAAAAA8/DrMN9kW83gI/photo.jpg?sz=128", "display_name": "userash", "link": "https://stackoverflow.com/users/7765493/userash"}, "reply_to_user": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495620846, "post_id": 44154398, "comment_id": 75327338, "body": "I want it this way since its simple and I want to learn that way"}, {"owner": {"reputation": 1153, "user_id": 7765493, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-ykfe_wHJyD8/AAAAAAAAAAI/AAAAAAAAAA8/DrMN9kW83gI/photo.jpg?sz=128", "display_name": "userash", "link": "https://stackoverflow.com/users/7765493/userash"}, "reply_to_user": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495620867, "post_id": 44154398, "comment_id": 75327352, "body": "Isnt this possible?"}, {"owner": {"reputation": 1468, "user_id": 2931765, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eiU4j.jpg?s=128&g=1", "display_name": "Arun G", "link": "https://stackoverflow.com/users/2931765/arun-g"}, "edited": false, "score": 0, "creation_date": 1495621216, "post_id": 44154398, "comment_id": 75327580, "body": "You can do it. But need to use some data structure"}, {"owner": {"reputation": 1153, "user_id": 7765493, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-ykfe_wHJyD8/AAAAAAAAAAI/AAAAAAAAAA8/DrMN9kW83gI/photo.jpg?sz=128", "display_name": "userash", "link": "https://stackoverflow.com/users/7765493/userash"}, "edited": false, "score": 0, "creation_date": 1495622593, "post_id": 44154398, "comment_id": 75328585, "body": "Is there any example as such?"}], "answers": [{"tags": [], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1495631351, "creation_date": 1495631351, "answer_id": 44159358, "question_id": 44154398, "link": "https://stackoverflow.com/questions/44154398/ruby-code-to-display-table-element-details/44159358#44159358", "title": "Ruby code to display table element details", "body": "<p>This code is only for the given table with two rows</p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new(:chrome)\n\nbrowser.goto('file:///C:/Users/Ashwin/Desktop/text.html')\n\nbrowser.table(:class, 'table table-striped').rows.each_with_index do |row,index|  \n  if index.eql?0\n    firstRow=row\n    next\n  end\n  p firstRow[0].text+\":\"+row[0].text\n  p firstRow[1].text+\":\"+row[1].text\n  p firstRow[2].text+\":\"+row[2].text\n  p firstRow[3].text+\":\"+row[3].text\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1153, "user_id": 7765493, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-ykfe_wHJyD8/AAAAAAAAAAI/AAAAAAAAAA8/DrMN9kW83gI/photo.jpg?sz=128", "display_name": "userash", "link": "https://stackoverflow.com/users/7765493/userash"}, "edited": false, "score": 0, "creation_date": 1495676341, "post_id": 44160519, "comment_id": 75357733, "body": "Thanks a lot Justin"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1495634131, "creation_date": 1495634131, "answer_id": 44160519, "question_id": 44154398, "link": "https://stackoverflow.com/questions/44154398/ruby-code-to-display-table-element-details/44160519#44160519", "title": "Ruby code to display table element details", "body": "<p>The table looks quite simple, so you can use the <code>Table#strings</code> method to convert the table into an array of strings. Then you can output each column header with each row value.</p>\n\n<pre><code># Get the table you want to work with\ntable = browser.table(class: 'table table-striped')\n\n# Get the text of the table\nrows = table.strings\n\n# Get the column headers and determine the longest one\nheader = rows.shift    \ncolumn_width = header.max { |a, b| a.length &lt;=&gt; b.length }.length\n\n# Loop through the data rows and output the header/value\nrows.each do |row|\n  header.zip(row) do |header, value|\n    puts \"#{header.ljust(column_width)} : #{value}\"\n  end\nend\n#=&gt; Product    : google.com\n#=&gt; Duration   : 1 Year\n#=&gt; Unit Price : $5\n#=&gt; Price      : $5\n</code></pre>\n"}], "owner": {"reputation": 1153, "user_id": 7765493, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-ykfe_wHJyD8/AAAAAAAAAAI/AAAAAAAAAA8/DrMN9kW83gI/photo.jpg?sz=128", "display_name": "userash", "link": "https://stackoverflow.com/users/7765493/userash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1718, "favorite_count": 0, "accepted_answer_id": 44160519, "answer_count": 2, "score": 1, "last_activity_date": 1495634131, "creation_date": 1495618159, "last_edit_date": 1495625818, "question_id": 44154398, "link": "https://stackoverflow.com/questions/44154398/ruby-code-to-display-table-element-details", "title": "Ruby code to display table element details", "body": "<p>I have a HTML which displays the Product Details in the following way:</p>\n\n<pre><code>&lt;div class=\"column\"&gt;\n    &lt;h3 class=\"hidden-xs\"&gt;Product Details&lt;/h3&gt;\n    &lt;table class=\"table table-striped\"&gt;\n        &lt;tbody&gt;\n            &lt;tr class=\"header-row hidden-xs\"&gt;\n                &lt;th&gt;Product&lt;/th&gt;\n                &lt;th&gt;Duration&lt;/th&gt;\n                &lt;th&gt;Unit Price&lt;/th&gt;\n                &lt;th&gt;Price&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;google.com&lt;/td&gt;\n                &lt;td&gt;1 Year&lt;/td&gt;\n                &lt;td class=\"hidden-xs\"&gt;$5&lt;/td&gt;\n                &lt;td&gt;$5&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;div class=\"totals text-right\"&gt;\n    &lt;p&gt;Subtotal: $5&lt;/p&gt;\n    &lt;p&gt;Total: $5&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Ruby code is given below:</p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new(:chrome)\n\nbrowser.goto('file:///C:/Users/Ashwin/Desktop/text.html')\n\nbrowser.table(:class, 'table table-striped').trs.each do |tr|\n p tr[0].text\n p tr[1].text\n p tr[2].text\n p tr[3].text\nend\n</code></pre>\n\n<p>I am getting the output this way:</p>\n\n<pre><code>\"Product\"\n\"Duration\"\n\"Unit Price\"\n\"Price\"\n\"google.com\"\n\"1 Year\"\n\"$5\"\n\"$5\"\n</code></pre>\n\n<p>But I want the details to be displayed as below:</p>\n\n<pre><code>Product    : google.com\nDuration   : 1 Year\nUnit Price : $5\nPrice      : $5\n</code></pre>\n\n<p>Can anyone please help?</p>\n"}, {"tags": ["ios", "ruby", "selenium", "mobile", "appium"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "edited": false, "score": 0, "creation_date": 1495709198, "post_id": 44157323, "comment_id": 75371218, "body": "I have managed to find a solution to this issue. Thanks for your help anyways much appreciated."}, {"owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "reply_to_user": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "edited": false, "score": 0, "creation_date": 1495711297, "post_id": 44157323, "comment_id": 75372551, "body": "would you like to share your solution here please as an answer?"}, {"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "edited": false, "score": 0, "creation_date": 1495727734, "post_id": 44157323, "comment_id": 75383524, "body": "Appium has XCUITest working on top of appium and creates an instance of the mobile app everytime you run a test. So it converts your tags like class, name, id etc etc to XCUIElementTypeclass, XCUIElementTypename, XCUIElementTypeid etc. This its only accepts the following: <code>[BaseDriver] Valid locator strategies for this request: xpath, id, name, class name, -ios predicate string, -ios class chain, accessibility id</code>. Thus is used @driver.find_element(:name, &quot;APACHE CORDOVA&quot;) and it worked. I hope this helps!!! I am going to try and look into this further so I can have a better understanding/"}], "tags": [], "owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "is_accepted": true, "score": 0, "last_activity_date": 1495625911, "creation_date": 1495625911, "answer_id": 44157323, "question_id": 44153771, "link": "https://stackoverflow.com/questions/44153771/element-could-not-be-found-selenium-webdriver-mobile/44157323#44157323", "title": "element could not be found selenium webdriver mobile", "body": "<p>I am not sure if you are aware but XCUITest automation is only supported from xcode 8 and iOS 9.3+ .</p>\n\n<p>So please change following things:<br>\nUpdate your XCode to 8+ latest version.<br>\nUpdate your appium_lib gem version to latest version .<br>\nUpdate your appium version to 1.6.4 .<br>\nChange capability iOS version to 9.3 or 10.3<br>\nChange Capability to specific mobile version and not iPhone Simulator .  </p>\n\n<p>Here are sample capabilities:</p>\n\n<pre><code>caps = {\n      :platformName =&gt; \"iOS\",\n      :deviceName =&gt; \"iPhone 6\",\n      :platformVersion =&gt; \"9.3\",\n      :app =&gt; app_path,\n      :noReset =&gt; 'true',\n      :newCommandTimeout =&gt; \"30\",\n      :automationName =&gt; \"XCUITest\",\n      :sendKeyStrategy =&gt; 'setValue'\n  }\n</code></pre>\n\n<p>Try these and let me know.</p>\n\n<p>Hope it helps!! </p>\n"}], "owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 44157323, "answer_count": 1, "score": 1, "last_activity_date": 1495625911, "creation_date": 1495616639, "question_id": 44153771, "link": "https://stackoverflow.com/questions/44153771/element-could-not-be-found-selenium-webdriver-mobile", "title": "element could not be found selenium webdriver mobile", "body": "<p>I keep getting the below error message.</p>\n\n<pre><code>Selenium::WebDriver::Error::NoSuchElementError: An element could not be \nlocated on the page using the given search parameters.\nfrom /Users/shafiq.malik/.rvm/gems/ruby-2.2.0/gems/selenium-webdriver-\n3.4.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok'\n</code></pre>\n\n<p>I am currently in the process of setting up a ruby/appium framework for mobile testing using selenium.</p>\n\n<p>Here is my env.rb file.</p>\n\n<pre><code>require 'rubygems'\nrequire 'rspec/expectations'\nrequire 'selenium-webdriver'\nrequire 'pry'\n\n#APP_PATH = 'PlainNote.app'\n\ndef capabilities123\n  {\n      'automationName' =&gt; 'XCUITest',\n      'platformName' =&gt; 'iOS',\n      'deviceName' =&gt;  'iPhone Simulator',\n      'platform' =&gt; 'Mac',\n      'version' =&gt; '9.2',\n      'app' =&gt; '/Users/shafiq.malik/Documents/Projects/nuff-class-\nbooking-mobile/platforms/ios/build/emulator/HelloCordova.app'}\nend\n\ndef server_url\n   'http://localhost:8000/wd/hub'\nend\n\ndef seleniumabc\n   @driver ||= Selenium::WebDriver.for(:remote, :desired_capabilities =&gt; \ncapabilities123, :url =&gt; server_url)\nend\n\nAfter { @driver.quit }\n</code></pre>\n\n<p>Can somebody please help? Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495618196, "post_id": 44153710, "comment_id": 75325380, "body": "Don&#39;t you <a href=\"https://stackoverflow.com/q/44129173/477037\">want</a> <code>&quot;2017-01-09&quot;: {}</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 2, "last_activity_date": 1495616600, "creation_date": 1495616600, "answer_id": 44153756, "question_id": 44153710, "link": "https://stackoverflow.com/questions/44153710/ruby-make-a-date-key-hash/44153756#44153756", "title": "Ruby make a date key hash", "body": "<pre><code>(start_date..end_date).each_with_object({}) { |date, hash| hash[date.to_s] = '' }\n#=&gt; {\"2017-01-09\"=&gt;\"\", \"2017-01-10\"=&gt;\"\", \"2017-01-11\"=&gt;\"\", \"2017-01-12\"=&gt;\"\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1495619287, "post_id": 44153763, "comment_id": 75326190, "body": "Note that in the first and second example, all hash values refer to the same string instance."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1495619664, "last_edit_date": 1495619664, "creation_date": 1495616618, "answer_id": 44153763, "question_id": 44153710, "link": "https://stackoverflow.com/questions/44153710/ruby-make-a-date-key-hash/44153763#44153763", "title": "Ruby make a date key hash", "body": "<pre><code>(start_date..end_date).map(&amp;:to_s).product([\"\"]).to_h\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(start_date..end_date).map(&amp;:to_s).zip([\"\"].cycle).to_h\n</code></pre>\n\n<p><strong>NB</strong> as properly noted by @Stefan in comments, in both snippets above all the hash values refer to the same <code>String</code> instance. If it\u2019s not an option, then you have another (my fave) solution on hand:</p>\n\n<pre><code>Hash.new { |h, k| h[k.to_s] = \"\"}.tap do |h|\n  h.values_at(*(start_date..end_date))\nend\n</code></pre>\n\n<p>The latter solution has a bonus:</p>\n\n<pre><code>hash = Hash.new { |h, k| h[k.to_s] = \"\"}.tap do |h|\n  h.values_at(*(start_date..end_date))\nend\n#\u21d2\u00a0{\"2017-01-09\"=&gt;\"\", ... \"2017-01-12\"=&gt;\"\"}\n</code></pre>\n\n<p>Now let\u2019s deal with new date:</p>\n\n<pre><code>hash[Date.today] &lt;&lt; \"\u00a1Yay!\" # note the plain date is passed!\nhash\n#\u21d2\u00a0{\"2017-01-09\"=&gt;\"\", ... \"2017-01-12\"=&gt;\"\", \"2017-05-24\" =&gt; \"\u00a1Yay!\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 2, "last_activity_date": 1495618739, "last_edit_date": 1495618739, "creation_date": 1495618456, "answer_id": 44154517, "question_id": 44153710, "link": "https://stackoverflow.com/questions/44153710/ruby-make-a-date-key-hash/44154517#44154517", "title": "Ruby make a date key hash", "body": "<p>You can simply use </p>\n\n<pre><code>(start_date..end_date).map { |date| [date.to_s, ''] }.to_h\n#=&gt; {\"2017-05-24\"=&gt;\"\", \"2017-05-25\"=&gt;\"\", \"2017-05-26\"=&gt;\"\", \"2017-05-27\"=&gt;\"\", \"2017-05-28\"=&gt;\"\", \"2017-05-29\"=&gt;\"\"}\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 44153763, "answer_count": 3, "score": 2, "last_activity_date": 1495619664, "creation_date": 1495616481, "question_id": 44153710, "link": "https://stackoverflow.com/questions/44153710/ruby-make-a-date-key-hash", "title": "Ruby make a date key hash", "body": "<p>How to quickly make a hash contains date key</p>\n\n<p>Like </p>\n\n<pre><code>start_date = Date.new(2017, 1, 9)\nend_date  = Date.new(2017, 1, 12)\n</code></pre>\n\n<p>How to get </p>\n\n<pre><code>result = \n{\n  \"2017-01-09\": \"\",\n  \"2017-01-10\": \"\",\n  \"2017-01-11\": \"\",\n  \"2017-01-12\": \"\",\n}\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "runtime"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1495639737, "creation_date": 1495639737, "answer_id": 44162734, "question_id": 44153703, "link": "https://stackoverflow.com/questions/44153703/selenium-rudy-uninitialized-constant-contactlistruntime-nameerror-error/44162734#44162734", "title": "Selenium / Rudy: &#39;uninitialized constant Contactlist::Runtime (NameError)&#39; error", "body": "<p><code>Runtime</code> is not an object in standard ruby (looks like <code>Runtime.getRuntime().exec()</code> comes from java?). However if this is implemented elsewhere then you need to <code>require</code> or <code>include</code>.</p>\n\n<p>If you are just trying to execute a command at the shell level you can use <code>system('script.exe')</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8058441, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gkhxDtZTY4A/AAAAAAAAAAI/AAAAAAAAAeU/7zDIUa1x1N4/photo.jpg?sz=128", "display_name": "Preeti Kumari", "link": "https://stackoverflow.com/users/8058441/preeti-kumari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495639737, "creation_date": 1495616456, "last_edit_date": 1495622935, "question_id": 44153703, "link": "https://stackoverflow.com/questions/44153703/selenium-rudy-uninitialized-constant-contactlistruntime-nameerror-error", "title": "Selenium / Rudy: &#39;uninitialized constant Contactlist::Runtime (NameError)&#39; error", "body": "<p>What command should I initialize in order to execute <code>Runtime.getRuntime().exec(\"Script.exe\")</code> in Ruby-selenium environment)</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>class Contactlist\n    require \"selenium-webdriver\"\n    require \"rubygems\"\n    require \"test/unit\"\n\n    driver = Selenium::WebDriver.for :firefox\n        driver.navigate.to \"https://www.contactually.com/\"\n        sleep 20\n      element = driver.find_element(:css, \".signin&gt;a\").click\n     sleep 5\n      element = driver.find_element(:css, \"#user_email\")\n      element.send_keys \"pcroyalpaint@gmail.com\"\n      element = driver.find_element(:css, \"#user_password\")\n      element.send_keys \"Astegic1!\"\n      element = driver.find_element(:css, \".callout.sign-in-btn\").click\n      sleep 15\n    element = driver.find_element(:xpath, \".//*[@class='ui inverted underlined ApplicationHeader__main-menu___1gsj_ menu']//a[2]\").click\n    sleep 10\n    element = driver.find_element(:xpath,\"/.//a[@ href='https://www.contactually.com/contacts/import']\").click\n    sleep 10\n    element =  driver.find_element(:xpath,\".//*[@id='file']\").click\n Runtime.getRuntime().exec(\"Script.exe\")\nend\n</code></pre>\n\n<p><strong>Console output:</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/cUfC1.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby", "testunit"], "answers": [{"tags": [], "owner": {"reputation": 6433, "user_id": 663028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/19fe7ba7282ef0f36fe76b38ee58e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "prusswan", "link": "https://stackoverflow.com/users/663028/prusswan"}, "is_accepted": false, "score": 0, "last_activity_date": 1519204967, "creation_date": 1519204967, "answer_id": 48902165, "question_id": 44153660, "link": "https://stackoverflow.com/questions/44153660/ruby-what-changes-needed-to-make-test-unit-1-2-3-working-with-ruby-2-4-1/48902165#48902165", "title": "Ruby : What changes needed to make test-unit-1.2.3 working with Ruby-2.4.1", "body": "<p>You should update to TestUnit 3.x, which will have a higher chance of working with Ruby 2.x. Then you need to figure out the changes between Ruby 1.8.7 and Ruby 2.4.1, and how to fix your existing code, which is most likely broken, even after you have fixed/updated your unit test configuration.</p>\n\n<p>Also, consider a switch to Minitest or Rspec, as they are a lot more popular today, so it will be easier to find examples and supporting tools for them. Minitest is also the default test framework used by Ruby on Rails currently.</p>\n\n<p>References:</p>\n\n<p><a href=\"https://www.jetbrains.com/research/devecosystem-2017/ruby/\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/research/devecosystem-2017/ruby/</a></p>\n\n<p><a href=\"http://guides.rubyonrails.org/v5.1/testing.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v5.1/testing.html</a></p>\n"}], "owner": {"reputation": 35, "user_id": 2732473, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e7359649f9111a72894da1a2aeaef3be?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Rawat", "link": "https://stackoverflow.com/users/2732473/tarun-rawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519204967, "creation_date": 1495616349, "question_id": 44153660, "link": "https://stackoverflow.com/questions/44153660/ruby-what-changes-needed-to-make-test-unit-1-2-3-working-with-ruby-2-4-1", "title": "Ruby : What changes needed to make test-unit-1.2.3 working with Ruby-2.4.1", "body": "<p>I am new to Ruby Development. Now i am working on ruby test-framework code which was working fine with Ruby-1.8.7\nNow i want to upgrade ruby for this framework. I have found that test-unit-1.2.3 is included in Ruby-1.8.7 so i have installed it separately with Ruby-2.4.1.\nCurrently i am facing method missing issue [\"register_autorunner\"] with this combination. Because these method have not been used in ruby-1.8.7 </p>\n\n<p>Can anyone please tell me other changes needed to make this combination [Ruby-2.4.1 , test-unit-1.2.3] working. </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["jquery", "ruby", "slider", "yaml"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1495615458, "post_id": 44153093, "comment_id": 75323476, "body": "Are you asking &quot;How do I write a YAML file, in ruby&quot;? (<a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/yaml/rdoc/YAML/Store.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.1.0/libdoc/yaml/rdoc/YAML/Store.html</a>) Your question is very unclear."}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495616131, "post_id": 44153093, "comment_id": 75323920, "body": "@TomLord No. How do I get Key/Values from yaml to use as variables in rails."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495633999, "post_id": 44153093, "comment_id": 75337205, "body": "Your choice of words was very confusing: &quot;How do <b>get</b> the key so I can <b>set it</b> equal to ... so I can <b>set the</b> ...&quot; -- I see now that all you were asking is &quot;How do I read a YAML file&quot;. You&#39;re not &quot;setting values in the file&quot;, you&#39;re just assigning variables in javascript. If you&#39;d googled for this, it&#39;s <a href=\"https://stackoverflow.com/a/21422745/1954610\">easy</a> to find plenty of existing answers."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495634045, "post_id": 44153093, "comment_id": 75337256, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/21422494/reading-and-updating-yaml-file-by-ruby-code\">Reading and updating YAML file by ruby code</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1495623833, "post_id": 44154619, "comment_id": 75329375, "body": "Thanks! How do I access specific keys/values from the object?"}, {"owner": {"reputation": 462, "user_id": 2780828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c3fe29e7e1b4c3a12474a2cf6ac872?s=128&d=identicon&r=PG", "display_name": "r3bo0t", "link": "https://stackoverflow.com/users/2780828/r3bo0t"}, "reply_to_user": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "edited": false, "score": 0, "creation_date": 1495627385, "post_id": 44154619, "comment_id": 75331914, "body": "you can simply use like <code>@yaml_object[&#39;key&#39;]</code> for accessing any object"}], "tags": [], "owner": {"reputation": 462, "user_id": 2780828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c3fe29e7e1b4c3a12474a2cf6ac872?s=128&d=identicon&r=PG", "display_name": "r3bo0t", "link": "https://stackoverflow.com/users/2780828/r3bo0t"}, "is_accepted": true, "score": 1, "last_activity_date": 1495618757, "creation_date": 1495618757, "answer_id": 44154619, "question_id": 44153093, "link": "https://stackoverflow.com/questions/44153093/get-variable-from-yaml-in-rails/44154619#44154619", "title": "Get variable from yaml in rails", "body": "<p>@JustusP to load any YAML file you can simply use built-in YAML <code>load_file</code> method</p>\n\n<blockquote>\n  <p>@yaml_object = YAML.load_file(\"path_to_file\")</p>\n</blockquote>\n\n<p>This will load the content of YAML file as <code>HASH</code> object.</p>\n"}], "owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 44154619, "answer_count": 1, "score": -4, "last_activity_date": 1544570604, "creation_date": 1495614775, "last_edit_date": 1544570604, "question_id": 44153093, "link": "https://stackoverflow.com/questions/44153093/get-variable-from-yaml-in-rails", "title": "Get variable from yaml in rails", "body": "<p>I have a yaml file with key value pairs in them. I want to use this file to configure a form (titles &amp; DOM slider values).</p>\n\n<p>How do get the key so I can set it equal to ie. <code>@project_title</code> and the value so I can set the slider value (jQuery?)? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "rails-admin"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1495613761, "post_id": 44152529, "comment_id": 75322321, "body": "I&#39;ve read that capitalize! will make the first letter capital and the rest will become small leter. I used capitalize! because I want to prevent the situation i&#39;ve given.."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1495613823, "post_id": 44152529, "comment_id": 75322359, "body": "So what should I do to prevent this problem"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1495614053, "post_id": 44152529, "comment_id": 75322515, "body": "Try to replace <code>capitalize!</code> with <code>capitalize</code>."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1495614281, "post_id": 44152529, "comment_id": 75322687, "body": "I thought capitalize will make the first letter capital(from the word it self). I didn&#39;t read the full definition of it. Thanks buddy! :)"}], "tags": [], "owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "is_accepted": true, "score": 3, "last_activity_date": 1495613185, "creation_date": 1495613185, "answer_id": 44152529, "question_id": 44152311, "link": "https://stackoverflow.com/questions/44152311/field-becomes-blank-when-before-validation-is-used-in-rails-admin/44152529#44152529", "title": "Field becomes blank when before_validation is used in Rails Admin", "body": "<p>The problem arises from <code>capitalize_first_letter_name</code>. <code>\"\".capitalize!</code> will return <code>nil</code>. If you change it to <code>\"\".capitalize</code> that will return blank string as expected.</p>\n\n<p>Moreover, <code>capitalize!</code> will return nil if no changes were made. See <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-capitalize-21\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.0/String.html#method-i-capitalize-21</a>.</p>\n"}], "owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 44152529, "answer_count": 1, "score": 2, "last_activity_date": 1495613185, "creation_date": 1495612560, "last_edit_date": 1495613138, "question_id": 44152311, "link": "https://stackoverflow.com/questions/44152311/field-becomes-blank-when-before-validation-is-used-in-rails-admin", "title": "Field becomes blank when before_validation is used in Rails Admin", "body": "<p>I am using the Rails Admin gem. When I add a new activity type and create it again with the same name, it validates that name is already taken. But whenever I try to edit one it will give you an error: \"name can't be blank\"</p>\n\n<p>For example, I created Swimming, and I tried to add a new activity type which is swimming/SWIMMING etc. To avoid this I used the <code>before_validation</code> callback, to make the first letter a capital, then check the uniqueness of <code>name</code>. </p>\n\n<p>Yes, it's working but whenever I try to edit the <code>name</code> field it will become blank after I submit it.</p>\n\n<p>NOTE: I also tried to use <code>validates :name, presence: true, :uniqueness =&gt; {:case_sensitive =&gt; true}</code> only without the <code>before_validation</code> but it didn't work.</p>\n\n<p><strong>Activity Type</strong></p>\n\n<pre><code>class ActivityType &lt; ApplicationRecord\n  before_destroy :ensure_has_no_activity_type\n  before_validation :capitalize_first_letter_name\n  has_many :activities\n\n  validates :name, presence: true,:uniqueness =&gt; {:case_sensitive =&gt; true}, length: { maximum: 20 },format: Utilities::RegexValidations.alphanumeric_underscore\n  validates :description, presence: false\n\n  private\n\n  def ensure_has_no_activity_type\n    if activities.present?\n      errors.add(:base, 'Cannot delete activity type that has activity')\n    throw(:abort)\n    end\n  end\n  def capitalize_first_letter_name\n    # Capitalize the first letter and the rest will be small letter\n    self.name = self.name.capitalize!\n  end\n\nend\n</code></pre>\n\n<p>Question: Why whenever I tried to edit and try to submit it, does the name field become blank? What is the reason for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "twitter", "faraday"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495614082, "post_id": 44152201, "comment_id": 75322534, "body": "Have you enabled &quot;write&quot; permissions for your app, on the twitter account?"}, {"owner": {"reputation": 1, "user_id": 8057886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1681989458481951/picture?type=large", "display_name": "Ben Castillo", "link": "https://stackoverflow.com/users/8057886/ben-castillo"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495634205, "post_id": 44152201, "comment_id": 75337388, "body": "Yes, permissions are currently set to read, write, and direct messages."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495635118, "post_id": 44152201, "comment_id": 75338129, "body": "Are you able to read tweets? (Is the key/secret/token definitely right?)"}, {"owner": {"reputation": 1, "user_id": 8057886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1681989458481951/picture?type=large", "display_name": "Ben Castillo", "link": "https://stackoverflow.com/users/8057886/ben-castillo"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495676759, "post_id": 44152201, "comment_id": 75357835, "body": "I&#39;m closing this thread. The key/secret/token had whitespace in them after I pasted them into my code. I appreciate your help, Tom! Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8057886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1681989458481951/picture?type=large", "display_name": "Ben Castillo", "link": "https://stackoverflow.com/users/8057886/ben-castillo"}, "is_accepted": false, "score": 0, "last_activity_date": 1495676914, "creation_date": 1495676914, "answer_id": 44171026, "question_id": 44152201, "link": "https://stackoverflow.com/questions/44152201/2-3-0-gems-twitter-6-1-0-lib-twitter-rest-response-raise-error-rb13in-on-comp/44171026#44171026", "title": "2.3.0/gems/twitter-6.1.0/lib/twitter/rest/response/raise_error.rb:13:in `on_complete&#39;: Bad Authentication data. (Twitter::Error::BadRequest)", "body": "<p>After copy/pasting the keys into their appropriate lines, whitespace was found to be present in the keys. Deleting the whitespace allowed the ruby file to function as designed. Thanks and kudos to Tom Lord for help and critique!</p>\n"}], "owner": {"reputation": 1, "user_id": 8057886, "user_type": "registered", "profile_image": "https://graph.facebook.com/1681989458481951/picture?type=large", "display_name": "Ben Castillo", "link": "https://stackoverflow.com/users/8057886/ben-castillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495676914, "creation_date": 1495612243, "last_edit_date": 1495614116, "question_id": 44152201, "link": "https://stackoverflow.com/questions/44152201/2-3-0-gems-twitter-6-1-0-lib-twitter-rest-response-raise-error-rb13in-on-comp", "title": "2.3.0/gems/twitter-6.1.0/lib/twitter/rest/response/raise_error.rb:13:in `on_complete&#39;: Bad Authentication data. (Twitter::Error::BadRequest)", "body": "<p>Simply put, I'm attempting to post a tweet using these pieces of ruby code:</p>\n\n<pre><code>require 'Twitter'\n\nclient = Twitter::REST::Client.new do |config|\nconfig.consumer_key        = \"my_key\"\nconfig.consumer_secret     = \"my_secret_key\"\nconfig.access_token        = \"my_token\"\nconfig.access_token_secret = \"my_secret_token\"\nend\n\nclient.update(\"I'm tweeting with a @gem!\")\n</code></pre>\n\n<p>I'm using 64-bit ruby 2.3.0 with the appropriate 64-bit dev kit on Windows 10.</p>\n\n<p>However, a `on_complete': Bad Authentication data. (Twitter::Error::BadRequest) appears like so:</p>\n\n<pre><code>C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/response/raise_error.rb:13:in `on_complete': Bad Authentication data. (Twitter::Error::BadRequest)\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/response.rb:9:in `block in call'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/response.rb:61:in `on_complete'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/response.rb:8:in `call'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/request/url_encoded.rb:15:in `call'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/request/multipart.rb:14:in `call'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/request/multipart_with_file.rb:21:in `call'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/rack_builder.rb:139:in `build_response'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/connection.rb:377:in `run_request'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/faraday-0.11.0/lib/faraday/connection.rb:177:in `post'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/request.rb:33:in `perform'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/utils.rb:50:in `perform_request'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/utils.rb:72:in `perform_request_with_object'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/utils.rb:64:in `perform_post_with_object'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib/twitter/rest/tweets.rb:158:in `update!'\nfrom C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/twitter-6.1.0/lib                                                                        /twitter/rest/tweets.rb:128:in `update'\nfrom om_tweet.rb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>Thanks in advance for your time and advice!</p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1495611840, "post_id": 44152006, "comment_id": 75321011, "body": "I have literally no idea what the question is about."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495612596, "post_id": 44152006, "comment_id": 75321567, "body": "I think you are trying to extract values from a HTML table. Please show that table (your input) and your expected output. Which library are you using \u2013 Nokogiri? You are also talking about a form, what kind of form is that? And what does &quot;139/5000&quot; mean?"}, {"owner": {"reputation": 23, "user_id": 8053651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMfN3.jpg?s=128&g=1", "display_name": "Ferhat", "link": "https://stackoverflow.com/users/8053651/ferhat"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495613800, "post_id": 44152006, "comment_id": 75322350, "body": "capybara @stefan"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495613926, "post_id": 44152006, "comment_id": 75322430, "body": "@Ferhat thanks, I&#39;ve added a <code>capybara</code> tag. Could you clarify the other points, too?"}, {"owner": {"reputation": 23, "user_id": 8053651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMfN3.jpg?s=128&g=1", "display_name": "Ferhat", "link": "https://stackoverflow.com/users/8053651/ferhat"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495615023, "post_id": 44152006, "comment_id": 75323182, "body": "@stefan Imagine a table is a hundred rows. I have to write a hundred prints using the method I wrote above. I just want a short and simple method with a print. English is not good I can not express myself fully I do not look up"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495615580, "post_id": 44152006, "comment_id": 75323560, "body": "So your above code works and you just want to remove the 100 repetitive calls? That&#39;s a basic loop: <code>0.upto(100) { |i| p area.all(&#39;tr&#39;)[i].text }</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495616528, "post_id": 44152006, "comment_id": 75324192, "body": "If you want to print each row, you can also write: <code>area.all(&#39;tr&#39;).each { |row| p row.text }</code>"}, {"owner": {"reputation": 23, "user_id": 8053651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMfN3.jpg?s=128&g=1", "display_name": "Ferhat", "link": "https://stackoverflow.com/users/8053651/ferhat"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1495617557, "post_id": 44152006, "comment_id": 75324903, "body": "you are super thanks @Stefan"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1496439056, "creation_date": 1496439056, "answer_id": 44337699, "question_id": 44152006, "link": "https://stackoverflow.com/questions/44152006/how-to-avoid-repetitive-method-calls/44337699#44337699", "title": "How to avoid repetitive method calls?", "body": "<p>You can use a loop:</p>\n\n<pre><code>0.upto(100) { |i| p area.all('tr')[i].text }\n</code></pre>\n\n<p>Or \u2013 if you want to print every row \u2013 call <code>each</code>:</p>\n\n<pre><code>area.all('tr').each { |row| p row.text }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8053651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMfN3.jpg?s=128&g=1", "display_name": "Ferhat", "link": "https://stackoverflow.com/users/8053651/ferhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 44337699, "answer_count": 1, "score": -6, "last_activity_date": 1496439056, "creation_date": 1495611696, "last_edit_date": 1495616367, "question_id": 44152006, "link": "https://stackoverflow.com/questions/44152006/how-to-avoid-repetitive-method-calls", "title": "How to avoid repetitive method calls?", "body": "<p>I want to print some values from a HTML table using Capybara. My code looks like this:</p>\n\n<pre><code>area = find_by_id('SonDakika')\n\np area.all('tr')[0].text\np area.all('tr')[1].text\np area.all('tr')[2].text\n# ...\np area.all('tr')[98].text\np area.all('tr')[99].text\np area.all('tr')[100].text\n</code></pre>\n\n<p>It works, but it's very long and repetitive. How can I shorten my code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495611056, "post_id": 44151758, "comment_id": 75320451, "body": "Will that specific index always be same?"}, {"owner": {"reputation": 93, "user_id": 8053733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee4f15ea41397c65d5e9bcf9aa424a8?s=128&d=identicon&r=PG&f=1", "display_name": "marius_ll", "link": "https://stackoverflow.com/users/8053733/marius-ll"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495611256, "post_id": 44151758, "comment_id": 75320586, "body": "yes. it will be allways the same"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495611314, "post_id": 44151758, "comment_id": 75320625, "body": "Then you got the answer below."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 8053733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee4f15ea41397c65d5e9bcf9aa424a8?s=128&d=identicon&r=PG&f=1", "display_name": "marius_ll", "link": "https://stackoverflow.com/users/8053733/marius-ll"}, "edited": false, "score": 1, "creation_date": 1495611542, "post_id": 44151794, "comment_id": 75320794, "body": "but I dont understand the issue of -1. Can you explain it?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 93, "user_id": 8053733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee4f15ea41397c65d5e9bcf9aa424a8?s=128&d=identicon&r=PG&f=1", "display_name": "marius_ll", "link": "https://stackoverflow.com/users/8053733/marius-ll"}, "edited": false, "score": 1, "creation_date": 1495611632, "post_id": 44151794, "comment_id": 75320858, "body": "@marius_ll <code>-1</code> indicates the <i>index of last element</i> in the array"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495611697, "post_id": 44151794, "comment_id": 75320902, "body": "yes, so basically it is a range starting from specified index to end of array."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 10, "last_activity_date": 1495611048, "creation_date": 1495611048, "answer_id": 44151794, "question_id": 44151758, "link": "https://stackoverflow.com/questions/44151758/how-can-i-iterate-on-an-array-starting-from-a-specific-index/44151794#44151794", "title": "How can I iterate on an array starting from a specific index?", "body": "<p>Do the following:</p>\n\n<pre><code>your_array[your_index..-1].each do |temp| \n  ###\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495611968, "post_id": 44151950, "comment_id": 75321108, "body": "that&#39;s cool too, thanx..but it needs to specify number of elements than index."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 3, "creation_date": 1495612042, "post_id": 44151950, "comment_id": 75321157, "body": "@Md.FarhanMemon Number of elements to drop is <b>literally</b> the same as an index to start with."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1495612329, "post_id": 44151950, "comment_id": 75321380, "body": "yeah, however i meant w.r.t range where you have flexibility i.e. <code>[1..-1]</code> is different than <code>[1...-1]</code>. if you consider mine and yours solution in this case then both are same."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 8, "last_activity_date": 1495611525, "creation_date": 1495611525, "answer_id": 44151950, "question_id": 44151758, "link": "https://stackoverflow.com/questions/44151758/how-can-i-iterate-on-an-array-starting-from-a-specific-index/44151950#44151950", "title": "How can I iterate on an array starting from a specific index?", "body": "<p>More idiomatic would be to use <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-drop\" rel=\"noreferrer\"><code>Enumerable#drop</code></a>:</p>\n\n<pre><code>myj.drop(index).each do |temp| \n  ###\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 5917002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af995eaac82de2feb2b901e1ffc83516?s=128&d=identicon&r=PG&f=1", "display_name": "raghav_vc", "link": "https://stackoverflow.com/users/5917002/raghav-vc"}, "is_accepted": false, "score": 0, "last_activity_date": 1495621855, "creation_date": 1495621855, "answer_id": 44155800, "question_id": 44151758, "link": "https://stackoverflow.com/questions/44151758/how-can-i-iterate-on-an-array-starting-from-a-specific-index/44155800#44155800", "title": "How can I iterate on an array starting from a specific index?", "body": "<p>You could use a simple for loop. Assuming that the array is arr, start index is \"start\" and the end index is \"end\"</p>\n\n<pre><code>for i in start..end do\n  #Access array items by arr[i]\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8053733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ee4f15ea41397c65d5e9bcf9aa424a8?s=128&d=identicon&r=PG&f=1", "display_name": "marius_ll", "link": "https://stackoverflow.com/users/8053733/marius-ll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3255, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1495621855, "creation_date": 1495610954, "last_edit_date": 1495611461, "question_id": 44151758, "link": "https://stackoverflow.com/questions/44151758/how-can-i-iterate-on-an-array-starting-from-a-specific-index", "title": "How can I iterate on an array starting from a specific index?", "body": "<p>I want to start iterating over an array from a specific index.\nHow can I do that? </p>\n\n<pre><code>myj.each do |temp| \n###\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495608103, "post_id": 44150700, "comment_id": 75318532, "body": "Can you update the question with <code>params</code> that are coming in the server log?"}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1495608990, "post_id": 44150852, "comment_id": 75319056, "body": "You are spot on!"}, {"owner": {"reputation": 107, "user_id": 3819718, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/124207dc1459112b71c1f807d56c18de?s=128&d=identicon&r=PG&f=1", "display_name": "vinay_Kumar", "link": "https://stackoverflow.com/users/3819718/vinay-kumar"}, "edited": false, "score": 0, "creation_date": 1495644074, "post_id": 44150852, "comment_id": 75344843, "body": "I am getting <code>ActiveModel::ForbiddenAttributesError</code> when I do,  <code>post = Post.create(params)</code>"}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495644468, "post_id": 44150852, "comment_id": 75345049, "body": "Yes, <code>Post.create(params)</code> was a bad example. Try to extract values from <code>params</code>. e.g. <code>Post.create(data_value: params[:data_value])</code>."}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495644510, "post_id": 44150852, "comment_id": 75345074, "body": "But first, I strongly advise to read about strong parameters. It will also helps to handle this issue with params."}], "tags": [], "owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "is_accepted": true, "score": 3, "last_activity_date": 1495608339, "creation_date": 1495608339, "answer_id": 44150852, "question_id": 44150700, "link": "https://stackoverflow.com/questions/44150700/using-params-in-rails-gives-argumenterror-when-assigning-attributes-you-must-p/44150852#44150852", "title": "Using params in rails gives ArgumentError: When assigning attributes, you must pass a hash as an argument", "body": "<p>You pass <code>params[:data_value]</code> to the Post object. From your script it looks like <code>params[:data_value]</code> equals <code>\"Hello\"</code>. Instead <code>Post.create</code> expects a hash.</p>\n\n<p>You should either do <code>Post.create(params)</code> or <code>Post.create(data_value: params[:data_value])</code>. Also, check out <a href=\"https://github.com/rails/strong_parameters\" rel=\"nofollow noreferrer\">https://github.com/rails/strong_parameters</a> to make your parameters secure.</p>\n"}], "owner": {"reputation": 107, "user_id": 3819718, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/124207dc1459112b71c1f807d56c18de?s=128&d=identicon&r=PG&f=1", "display_name": "vinay_Kumar", "link": "https://stackoverflow.com/users/3819718/vinay-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 44150852, "answer_count": 1, "score": 1, "last_activity_date": 1495608339, "creation_date": 1495607826, "question_id": 44150700, "link": "https://stackoverflow.com/questions/44150700/using-params-in-rails-gives-argumenterror-when-assigning-attributes-you-must-p", "title": "Using params in rails gives ArgumentError: When assigning attributes, you must pass a hash as an argument", "body": "<p>I am using params which is a hash and still, I get this error stating ArgumentError (When assigning attributes, you must pass a hash as an argument.) Here are parts of my code:</p>\n\n<p><strong>Project/app/controllers/index_controller.rb:</strong></p>\n\n<pre><code>class IndexController &lt; ApplicationController\n    helper_method :create\n    def create\n        @post = Post.new(params[:data_value])\n    end\nend\n</code></pre>\n\n<p><strong>Project/app/models/post.rb:</strong></p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n    belongs_to :user\n    has_many :posts, :dependent =&gt; :delete_all\nend\n</code></pre>\n\n<p><strong>Project/config/routes.rb:</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  root \"index#index\"\n  post \"/customurl\", to: \"index#create\"\nend\n</code></pre>\n\n<p>ajax request from <strong>Project/app/assets/javascripts/index.js:</strong></p>\n\n<pre><code>$.ajax({\n    url : \"/customurl\",\n    type : \"post\",\n    data : { data_value: \"Hello\" }\n})\n</code></pre>\n\n<p>When I print the return value of <code>create</code> method from views, it displays a random hex value for each call. Can anyone please help me by letting me know what's the mistake I am doing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "edited": false, "score": 0, "creation_date": 1495634797, "post_id": 44150685, "comment_id": 75337875, "body": "What do you get when you type the following commands: <b>rvm list</b> and <b>ruby -v</b> and <b>rvm gemset list</b>?"}, {"owner": {"reputation": 239, "user_id": 6270878, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-oocS_3xNWtE/AAAAAAAAAAI/AAAAAAAAADM/cColmDJee7s/photo.jpg?sz=128", "display_name": "Prakash Bhavnath", "link": "https://stackoverflow.com/users/6270878/prakash-bhavnath"}, "reply_to_user": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "edited": false, "score": 0, "creation_date": 1495688055, "post_id": 44150685, "comment_id": 75360441, "body": "&#39;rvm list&#39; and &#39;ruby -v&#39; shows only &#39;2.1.4&#39; version. but before I install &#39;rvm&#39; &#39;2.1.4&#39; version default ruby version was &#39;1.9.1&#39;."}, {"owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "edited": false, "score": 0, "creation_date": 1495698629, "post_id": 44150685, "comment_id": 75365097, "body": "Do you have a gemset created? <b>rvm gemset list</b>. Do you have .ruby-version or .rvmrc? If so check that it refers to ruby 2.1.4."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 6270878, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-oocS_3xNWtE/AAAAAAAAAAI/AAAAAAAAADM/cColmDJee7s/photo.jpg?sz=128", "display_name": "Prakash Bhavnath", "link": "https://stackoverflow.com/users/6270878/prakash-bhavnath"}, "edited": false, "score": 0, "creation_date": 1495688162, "post_id": 44151369, "comment_id": 75360465, "body": "Ok, I will try it once again."}], "tags": [], "owner": {"reputation": 575, "user_id": 1576860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANQqj.jpg?s=128&g=1", "display_name": "chrisxrobertson", "link": "https://stackoverflow.com/users/1576860/chrisxrobertson"}, "is_accepted": false, "score": 0, "last_activity_date": 1495609859, "creation_date": 1495609859, "answer_id": 44151369, "question_id": 44150685, "link": "https://stackoverflow.com/questions/44150685/dependency-error-on-bundle-install/44151369#44151369", "title": "Dependency error on bundle install", "body": "<p>Have you tried <code>bundle update</code>?</p>\n\n<p>It will update the gem versions and dependencies in your <code>Gemfile.lock</code>.</p>\n\n<p>See the docs <a href=\"http://bundler.io/man/bundle-update.1.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 239, "user_id": 6270878, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-oocS_3xNWtE/AAAAAAAAAAI/AAAAAAAAADM/cColmDJee7s/photo.jpg?sz=128", "display_name": "Prakash Bhavnath", "link": "https://stackoverflow.com/users/6270878/prakash-bhavnath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495609859, "creation_date": 1495607769, "question_id": 44150685, "link": "https://stackoverflow.com/questions/44150685/dependency-error-on-bundle-install", "title": "Dependency error on bundle install", "body": "<p>I had use ruby <code>2.1.4</code> version using <code>rvm</code> but whenever I tried to run <code>bundle install</code> on application it gives an error as given below</p>\n\n<pre><code>    /usr/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (&gt;= 0) amongst [bundler-unload-1.0.2, executable-hooks-1.3.2, gem-wrappers-1.2.7, rubygems-bundler-1.4.4, rvm-1.11.3.9] (Gem::LoadError)\n    from /usr/lib/ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'\n    from /usr/lib/ruby/1.9.1/rubygems.rb:1231:in `gem'\n    from /usr/local/bin/bundle:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>The first question is I switched ruby version to <code>2.1.4</code> then why should they give version <code>1.9.1</code> in error?</p>\n\n<p>And the second question is, in application Gemfile there is dependent gem</p>\n\n<pre><code>    gem 'quality-measure-engine', :git =&gt; 'https://github.com/pophealth/quality-measure-engine.git', :branch =&gt; 'master'\n</code></pre>\n\n<p>due to dependent gem, this error occurs?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pg-search"], "comments": [{"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495608663, "post_id": 44150568, "comment_id": 75318845, "body": "<code>&quot;#{&#39;visible&#39; unless @search_results?}</code> probably missing <code>#</code> at the end."}, {"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495608752, "post_id": 44150568, "comment_id": 75318901, "body": "And have u declared <code>@search_results?</code>. It is not the same as <code>@search_results</code>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1495609668, "post_id": 44150568, "comment_id": 75319470, "body": "Don&#39;t redirect back. Instead render a view that tells the user that there is no search results. Otherwise you get an endless loop when you hit the back button."}, {"owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495609930, "post_id": 44150568, "comment_id": 75319626, "body": "@yzalavin wait.. isn&#39;t @var? equals @var.presented? Anyway after adding closing bracket i get  <code>results_controller.rb:9: syntax error, unexpected &#39;(&#39;, expecting keyword_end redirect_to :back(@search_results) ^</code>"}, {"owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495610000, "post_id": 44150568, "comment_id": 75319667, "body": "@max seems to me you&#39;re right about that. anyway, i&#39;m still interested why my code is not work."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1495610372, "post_id": 44150568, "comment_id": 75319923, "body": "<a href=\"http://guides.rubyonrails.org/action_controller_overview.html#the-flash\" rel=\"nofollow noreferrer\">the flash</a> handles this use-case. You&#39;d store it with <code>flash[:foo] = &quot;bar&quot;</code> and read it after the redirect with <code>flash[:foo]</code>. Unlike session, it does not persist across multiple requests; only for a single redirect."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1495611243, "last_edit_date": 1495611243, "creation_date": 1495610510, "answer_id": 44151608, "question_id": 44150568, "link": "https://stackoverflow.com/questions/44150568/rails-pass-variable-to-different-page-on-redirect/44151608#44151608", "title": "Rails - pass variable to different page on redirect", "body": "<p>Don't redirect back. Instead render a view that tells the user that there is no search results. Otherwise you get an endless loop when you hit the back button.</p>\n\n<pre><code>class ResultsController &lt; FrontendController\n  def index\n    @search_results = PgSearch.multisearch(params[:query])\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code># app/views/results/index.html\n&lt;% if @search_results.any? do %&gt;\n  &lt;% @search_results.each do |r| %&gt;\n\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  No results.\n  &lt;%= render 'some_kind_of_form' %&gt;\n&lt;% end &gt;\n</code></pre>\n\n<h2>Why the syntax error?</h2>\n\n<p>In <code>redirect_to :back</code> <code>:back</code> is a literal symbol. You can't call literals in Ruby:</p>\n\n<pre><code>irb(main):001:0&gt; :foo(\"bar\")\nSyntaxError: (irb):1: syntax error, unexpected '(', expecting end-of-input\n:foo(\"bar\")\n</code></pre>\n\n<p>If you want to augment the the url use <code>url_for(:back)</code> which is the same as <code>request.referrer</code>.</p>\n\n<pre><code># see https://ruby-doc.org/stdlib-2.1.2/libdoc/uri/rdoc/URI/HTTP.html\nuri = URI(url_for(:back))\nuri.query = { foo: 'bar' }.to_query\nredirect_to uri\n</code></pre>\n\n<p>If you want to get the route object you can do:</p>\n\n<pre><code>Rails.application.routes.recognize_path(url_for(:back), method: :get)\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 1, "accepted_answer_id": 44151608, "answer_count": 1, "score": 1, "last_activity_date": 1495611243, "creation_date": 1495607403, "question_id": 44150568, "link": "https://stackoverflow.com/questions/44150568/rails-pass-variable-to-different-page-on-redirect", "title": "Rails - pass variable to different page on redirect", "body": "<p>appreciate if you can help. I added pg_search to my project and need to redirect user back if there is no search results at all. Here is my search controller. </p>\n\n<pre><code>/app/controllers/results_controller.rb\n\nclass ResultsController &lt; FrontendController\n  def index\n    @search_results = PgSearch.multisearch(params[:query])\n    if @search_results.empty?\n      redirect_to :back(@search_results)\n    end\n  end\nend\n</code></pre>\n\n<p>And here is my layout where i'm trying to catch search result:</p>\n\n<pre><code>/app/views/layouts/application.html.slim\n...\n    .search-result class=\"#{'visible' unless @search_results?}\n      ' 0 results\n...\n</code></pre>\n\n<p>and all I get is </p>\n\n<pre><code>/app/views/layouts/application.html.slim:165: syntax error, unexpected ')' ...isible' unless@search_results?))).to_s)); _temple_html_attri... ... ^ \n/app/views/layouts/application.html.slim:168: syntax error, unexpected keyword_do_cond, expecting ')' ...method: :get, role: 'search' do; ... ^ \n/app/views/layouts/application.html.slim:171: syntax error, unexpected keyword_end, expecting ')' ; end; @output_buffer.safe_concat(... ^ /app/views/layouts/application.html.slim:194: syntax error, unexpected keyword_ensure, expecting ')' \n/app/views/layouts/application.html.slim:196: syntax error, unexpected keyword_end, expecting ')'\n</code></pre>\n\n<p>I several different approaches from Stackoverflow, but nothing helped. What am I doing wrong? Rails 4.2.5.1, Ruby 2.2.3</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 0, "creation_date": 1495616408, "post_id": 44151881, "comment_id": 75324119, "body": "This doesn&#39;t generate clean CSV string, but rather something like that: <code>&quot;[&quot;&quot;value1&quot;&quot;, &quot;&quot;value2&quot;&quot;,</code>... (tested on Ruby 2.2.4)"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "edited": false, "score": 0, "creation_date": 1495628463, "post_id": 44151881, "comment_id": 75332766, "body": "I like an idea with <code>&amp;method(:rows)</code> but the code gives wrong result."}, {"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "reply_to_user": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "edited": false, "score": 0, "creation_date": 1495629813, "post_id": 44151881, "comment_id": 75333751, "body": "@IlyaLavrov  You can make it work by doing <code>items.flat_map(&amp;method(:rows)).each(&amp;csv.method(:&lt;&lt;))</code>, but your version (from the question) is IMO soo much more cleaner."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1495611322, "creation_date": 1495611322, "answer_id": 44151881, "question_id": 44150565, "link": "https://stackoverflow.com/questions/44150565/ruby-how-to-add-two-lines-at-once-to-a-csv/44151881#44151881", "title": "Ruby: How to add two lines at once to a csv?", "body": "<pre><code>CSV.generate do |csv|\n  csv &lt;&lt; items.flat_map(&amp;method(:rows))\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 1, "creation_date": 1495614241, "post_id": 44152517, "comment_id": 75322663, "body": "<a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\"><code>CSV</code></a> object doesn&#39;t have <code>append</code> method"}, {"owner": {"reputation": 324, "user_id": 7052392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db12a1a0d2b5892c8abfa9d066e3c20?s=128&d=identicon&r=PG&f=1", "display_name": "steenuil", "link": "https://stackoverflow.com/users/7052392/steenuil"}, "reply_to_user": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 0, "creation_date": 1495615944, "post_id": 44152517, "comment_id": 75323794, "body": "@TeWu Thanks, I didn&#39;t notice."}], "tags": [], "owner": {"reputation": 324, "user_id": 7052392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db12a1a0d2b5892c8abfa9d066e3c20?s=128&d=identicon&r=PG&f=1", "display_name": "steenuil", "link": "https://stackoverflow.com/users/7052392/steenuil"}, "is_accepted": false, "score": 1, "last_activity_date": 1495615278, "last_edit_date": 1495615278, "creation_date": 1495613151, "answer_id": 44152517, "question_id": 44150565, "link": "https://stackoverflow.com/questions/44150565/ruby-how-to-add-two-lines-at-once-to-a-csv/44152517#44152517", "title": "Ruby: How to add two lines at once to a csv?", "body": "<p><code>Array#push</code> or <code>Array#append</code> work the same way, and can take multiple arguments. <strong>Edit</strong>: As it turns out, <code>CSV.generate</code> yields a <code>CSV</code> object which has neither of those methods.</p>\n\n<p>You can also do it like this:</p>\n\n<pre><code>CSV.generate do |csv|\n  items.each do |item|\n    r = rows(item)\n    csv &lt;&lt; r[0] &lt;&lt; r[1]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495629677, "creation_date": 1495607394, "last_edit_date": 1495629677, "question_id": 44150565, "link": "https://stackoverflow.com/questions/44150565/ruby-how-to-add-two-lines-at-once-to-a-csv", "title": "Ruby: How to add two lines at once to a csv?", "body": "<p>I have a list of items and a script which generates two lines of csv for each item.\nMay I add two lines at once to csv generator? I want something like this:</p>\n\n<pre><code>CSV.generate do |csv|\n  items.each do |item|\n    csv &lt;&lt; rows(item)\n  end\nend\n\ndef rows(item)\n  return \\\n    ['value1', 'value2', 'value2'],\n    ['value3', 'value4', 'value5']\nend\n</code></pre>\n\n<p>But <code>csv &lt;&lt;</code> can't receive two lines at once.</p>\n\n<p>Now my the best code is:</p>\n\n<pre><code>CSV.generate do |csv|\n  items.each do |item|\n    rows(item).each { |row| csv &lt;&lt; row } \n  end\nend\n</code></pre>\n\n<p><strong>Update:</strong> Now the best code without adding two line at once looks like:</p>\n\n<pre><code>CSV.generate do |csv|\n  items.\n    flat_map(&amp;method(:rows)).\n    each(&amp;csv.method(:&lt;&lt;))\nend\n</code></pre>\n"}, {"tags": ["ruby", "stripe-payments", "webhooks"], "answers": [{"comments": [{"owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "edited": false, "score": 0, "creation_date": 1495631860, "post_id": 44151266, "comment_id": 75335390, "body": "This is the perfect answer and it&#39;s what I did. Thanks a lot."}, {"owner": {"reputation": 2175, "user_id": 1125284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GAQl.png?s=128&g=1", "display_name": "Zico", "link": "https://stackoverflow.com/users/1125284/zico"}, "reply_to_user": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "edited": false, "score": 0, "creation_date": 1495636582, "post_id": 44151266, "comment_id": 75339326, "body": "Welcome @Tintin81 :)"}], "tags": [], "owner": {"reputation": 2175, "user_id": 1125284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GAQl.png?s=128&g=1", "display_name": "Zico", "link": "https://stackoverflow.com/users/1125284/zico"}, "is_accepted": true, "score": 7, "last_activity_date": 1495609623, "creation_date": 1495609623, "answer_id": 44151266, "question_id": 44150390, "link": "https://stackoverflow.com/questions/44150390/how-to-get-notified-when-recurring-subscription-payments-successfully-processed/44151266#44151266", "title": "How to get notified when recurring subscription payments successfully processed by Stripe?", "body": "<p><strong>Yes, you can easily do it by using <a href=\"https://stripe.com/docs/webhooks\" rel=\"noreferrer\">webhooks</a></strong></p>\n\n<p>Use webhooks to be notified about events that happen in a Stripe account.\nYou have to do the following for successful recurring subscription payment notification.</p>\n\n<ol>\n<li>You have to create new endpoint (your application url which will accept the request from stripe) from dashboard which indicate Stripe to request after every successful Charges. <a href=\"https://dashboard.stripe.com/account/webhooks\" rel=\"noreferrer\">You can create webhooks here</a></li>\n<li>Add endpoint -> Set URL of your application to be called, Filter event (<code>charge.succeeded</code>)</li>\n<li>In you application endpoint, you will receive <a href=\"https://stripe.com/docs/api#events\" rel=\"noreferrer\">Event</a> object. Inside the <a href=\"https://stripe.com/docs/api#event_object\" rel=\"noreferrer\">object</a> you can get <code>\"data\"-&gt;\"object\"</code> which will contain the <code>charge</code> <a href=\"https://stripe.com/docs/api#charge_object\" rel=\"noreferrer\">object</a></li>\n<li>By this charge object you can get all of your needed information.</li>\n<li>When you get the information regarding the payment, then you can do your application stuffs...</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2145, "user_id": 4357238, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40dff2e0545026c9974ebc750a970ddd?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/4357238/edward"}, "is_accepted": false, "score": 0, "last_activity_date": 1495755206, "creation_date": 1495755206, "answer_id": 44191321, "question_id": 44150390, "link": "https://stackoverflow.com/questions/44150390/how-to-get-notified-when-recurring-subscription-payments-successfully-processed/44191321#44191321", "title": "How to get notified when recurring subscription payments successfully processed by Stripe?", "body": "<p>As Zico said, yes use webhooks. Here is a good tutorial of how to set up webhooks.</p>\n\n<p><a href=\"https://www.truespotmedia.com/testing-webhooks-in-stripe-with-php/\" rel=\"nofollow noreferrer\">https://www.truespotmedia.com/testing-webhooks-in-stripe-with-php/</a></p>\n"}], "owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 44151266, "answer_count": 2, "score": 3, "last_activity_date": 1531722727, "creation_date": 1495606754, "last_edit_date": 1531722727, "question_id": 44150390, "link": "https://stackoverflow.com/questions/44150390/how-to-get-notified-when-recurring-subscription-payments-successfully-processed", "title": "How to get notified when recurring subscription payments successfully processed by Stripe?", "body": "<p>In my Ruby on Rails SaaS application users can subscribe to monthly or yearly plans. I am using <a href=\"https://stripe.com\" rel=\"nofollow noreferrer\">Stripe</a> as a payment processor. Stripe also handles all the subscriptions and re-bills users on a monthly (or yearly) basis.</p>\n\n<p>I am also a member of an affiliate network which gets notified about every new subscription / charge that a user makes, so that the advertiser may get rewarded (if there is one). This works great for new subscriptions because Stripe instantly notifies me if a payment went through or not. </p>\n\n<p>But what about recurring subscription payments? I have to (and want to) inform my affiliate network about those too, however, in my web application I can't really detect whether a recurring payment has been made. I can <em>assume</em> that it will be made, say, on the 24th of each month but that's not for sure.</p>\n\n<p>Is there a better way for a web app to detect when a recurring subscription payment has been successfully processed by Stripe? My affiliate network requires me to show some little Javascript snippet on the frontend whenever a charge has been made.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1495610299, "post_id": 44150256, "comment_id": 75319876, "body": "What is in <code>gym_website</code>?"}, {"owner": {"reputation": 35, "user_id": 5751350, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153204684910863/picture?type=large", "display_name": "bgilbank", "link": "https://stackoverflow.com/users/5751350/bgilbank"}, "reply_to_user": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1495612625, "post_id": 44150256, "comment_id": 75321581, "body": "@RSB it&#39;s just the name of my form field &lt;%= f.text_field :gym_website, class: &quot;&quot;, placeholder: &quot;facility website&quot; %&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 13459, "user_id": 550349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QSyCs.jpg?s=128&g=1", "display_name": "stef", "link": "https://stackoverflow.com/users/550349/stef"}, "is_accepted": true, "score": 0, "last_activity_date": 1495612853, "creation_date": 1495612853, "answer_id": 44152416, "question_id": 44150256, "link": "https://stackoverflow.com/questions/44150256/how-can-i-display-a-truncated-url-with-the-link-to-helper/44152416#44152416", "title": "How can I display a truncated URL with the link_to helper?", "body": "<p>You could use the <code>block</code> version of the <code>link_to</code> helper for readability here.</p>\n\n<pre><code>&lt;%= link_to url_for(gym.gym_website), target: '_blank', class: '' do %&gt;\n  &lt;%= truncate(gym.gym_website.try(:remove, /.*\\/\\//), :escape =&gt; false, :length =&gt; 45) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5751350, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153204684910863/picture?type=large", "display_name": "bgilbank", "link": "https://stackoverflow.com/users/5751350/bgilbank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 44152416, "answer_count": 1, "score": -2, "last_activity_date": 1495612922, "creation_date": 1495606174, "last_edit_date": 1495612922, "question_id": 44150256, "link": "https://stackoverflow.com/questions/44150256/how-can-i-display-a-truncated-url-with-the-link-to-helper", "title": "How can I display a truncated URL with the link_to helper?", "body": "<p>How would I truncate a url submitted from a form? Here is what I am using to display the submitted url: </p>\n\n<p>index view:</p>\n\n<pre><code>&lt;%= link_to gym.gym_website.try(:remove, /.*\\/\\//), url_for(gym.gym_website), target: '_blank', class: '' %&gt;\n</code></pre>\n\n<p>How would I add the truncate method onto this? I am currently removing http/https from the submitted url.</p>\n\n<pre><code>&lt;%= truncate(gym.gym_website, :escape =&gt; false, :length =&gt; 45) %&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "file-upload", "upload"], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1495654990, "post_id": 44150917, "comment_id": 75350558, "body": "I see. Is it possible to permanently add the file to a given path within the app?"}], "tags": [], "owner": {"reputation": 126, "user_id": 7130601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WIHzYWbB5Aw/AAAAAAAAAAI/AAAAAAAAACE/57mlH86tFRU/photo.jpg?sz=128", "display_name": "ralinc", "link": "https://stackoverflow.com/users/7130601/ralinc"}, "is_accepted": false, "score": 1, "last_activity_date": 1495608517, "creation_date": 1495608517, "answer_id": 44150917, "question_id": 44150128, "link": "https://stackoverflow.com/questions/44150128/how-can-i-parse-a-local-csv-file-with-rails/44150917#44150917", "title": "How can I parse a local CSV file with Rails?", "body": "<p>To get the file path as a string you need to do the following:</p>\n\n<pre><code>filename = params[:csv].path\n</code></pre>\n\n<p>as params[:csv] is a <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html\" rel=\"nofollow noreferrer\">UploadedFile</a> object. You don't need handle the temp file yourself, i.e. storing and deleting it. Rails would do that for you. As per documentation: </p>\n\n<blockquote>\n  <p>Uploaded files are temporary files whose lifespan is one request. When the object is finalized Ruby unlinks the file, so there is no need to clean them with a separate maintenance task.</p>\n</blockquote>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495608517, "creation_date": 1495605651, "question_id": 44150128, "link": "https://stackoverflow.com/questions/44150128/how-can-i-parse-a-local-csv-file-with-rails", "title": "How can I parse a local CSV file with Rails?", "body": "<p>I'm trying to use <a href=\"https://github.com/tilo/smarter_csv\" rel=\"nofollow noreferrer\">smarter_csv</a> to parse csv files with my Rails app. But the documentation only explains how to parse a file that already belongs to the app.</p>\n\n<p>I want to parse a file that's stored locally on my computer. So I think I have to upload the file, parse it, and then delete it.</p>\n\n<p>This is how far I got:</p>\n\n<pre><code>&lt;%= form_tag({action: :upload}, multipart: true) do %&gt;\n  &lt;%= file_field :csv %&gt;\n  &lt;%= submit_tag 'Submit' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So then how can I reference and use the uploaded file in my controller action?</p>\n\n<pre><code>def upload\n  #save file temporarily to app\n  filename = #filename\n  #parse file with smarter_csv\n  #File.delete(filename)\nend\n</code></pre>\n"}, {"tags": ["ruby", "sorting", "utf-8", "portability"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1495607051, "post_id": 44149310, "comment_id": 75317925, "body": "I am aware of no good solution save for <a href=\"https://github.com/blackwinter/unicode\" rel=\"nofollow noreferrer\"><code>unicode</code></a> gem."}, {"owner": {"reputation": 1650, "user_id": 4130619, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4fc6ed0802004cefbf1f629d638af022?s=128&d=identicon&r=PG&f=1", "display_name": "reducing activity", "link": "https://stackoverflow.com/users/4130619/reducing-activity"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1495612848, "post_id": 44149310, "comment_id": 75321726, "body": "@mudasobwa In my test it failed <code>require &quot;unicode&quot; puts [&#39;l&#39;, &#39;\u0142&#39;, &#39;m&#39;].sort{|a, b| Unicode::strcmp(a, b)} puts [&#39;l&#39;, &#39;\u0142&#39;, &#39;m&#39;].sort{|a, b| Unicode::strcmp_compat(a, b)}</code> (based on documentation from <a href=\"https://github.com/blackwinter/unicode\" rel=\"nofollow noreferrer\">github.com/blackwinter/unicode</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 1650, "user_id": 4130619, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4fc6ed0802004cefbf1f629d638af022?s=128&d=identicon&r=PG&f=1", "display_name": "reducing activity", "link": "https://stackoverflow.com/users/4130619/reducing-activity"}, "edited": false, "score": 0, "creation_date": 1495869943, "post_id": 44180659, "comment_id": 75439847, "body": "<code>[&#39;m&#39;, &#39;\u0142&#39;, &#39;l&#39;].localize(:pl).sort.to_a</code> also works and it is shorter. Also, it explicitly sets localization."}, {"owner": {"reputation": 1650, "user_id": 4130619, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4fc6ed0802004cefbf1f629d638af022?s=128&d=identicon&r=PG&f=1", "display_name": "reducing activity", "link": "https://stackoverflow.com/users/4130619/reducing-activity"}, "edited": false, "score": 0, "creation_date": 1495870123, "post_id": 44180659, "comment_id": 75439898, "body": "Also, <a href=\"https://github.com/twitter/twitter-cldr-rb#requirements\" rel=\"nofollow noreferrer\">from readme</a>: &quot;No external requirements.&quot;"}], "tags": [], "owner": {"reputation": 26, "user_id": 7962429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecbf9b06385aaa262fbb80e97fd71dd?s=128&d=identicon&r=PG&f=1", "display_name": "COAX_Software", "link": "https://stackoverflow.com/users/7962429/coax-software"}, "is_accepted": true, "score": 1, "last_activity_date": 1495715533, "creation_date": 1495715533, "answer_id": 44180659, "question_id": 44149310, "link": "https://stackoverflow.com/questions/44149310/how-one-should-add-utf-8-support-to-sorting-in-ruby-including-%c5%82-character-with/44180659#44180659", "title": "How one should add UTF-8 support to sorting in Ruby (including \u0142 character, without affecting portability)?", "body": "<p>good solution is using gem <a href=\"https://github.com/twitter/twitter-cldr-rb\" rel=\"nofollow noreferrer\">https://github.com/twitter/twitter-cldr-rb</a></p>\n\n<pre><code>require 'twitter_cldr'\ncollator = TwitterCldr::Collation::Collator.new\ncollator.sort(['m', '\u0142', 'l'])\n=&gt; [\"l\", \"\u0142\", \"m\"]\n</code></pre>\n"}], "owner": {"reputation": 1650, "user_id": 4130619, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/4fc6ed0802004cefbf1f629d638af022?s=128&d=identicon&r=PG&f=1", "display_name": "reducing activity", "link": "https://stackoverflow.com/users/4130619/reducing-activity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 44180659, "answer_count": 1, "score": 3, "last_activity_date": 1507449873, "creation_date": 1495601957, "last_edit_date": 1507449873, "question_id": 44149310, "link": "https://stackoverflow.com/questions/44149310/how-one-should-add-utf-8-support-to-sorting-in-ruby-including-%c5%82-character-with", "title": "How one should add UTF-8 support to sorting in Ruby (including \u0142 character, without affecting portability)?", "body": "<p>Ruby string functions are not supporting UTF-8.</p>\n\n<p>For example <code>['l', '\u0142', 'm'].sort</code> returns <code>[\"l\", \"m\", \"\u0142\"]</code> rather than <code>[\"l\", \"\u0142\", \"m\"]</code>.</p>\n\n<p>How one should sort UTF-8 strings in Ruby?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/982948/sorting-utf-8-strings-in-ror\">Sorting UTF-8 strings in RoR</a> - accepted answer has no support for \u0142 character (<a href=\"https://github.com/grosser/sort_alphabetical/issues/13\" rel=\"nofollow noreferrer\">issue open since 2015</a>, blocked by <a href=\"https://github.com/lang/unicode_utils/pull/10\" rel=\"nofollow noreferrer\">PR waiting opened in 2014</a>), waiting unmerged as of 2017-10-08.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/982948/sorting-utf-8-strings-in-ror/17173122#17173122\">ffi-icu answer</a> works for systems that have libicu installed what AFAIK is not really portable.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1495604095, "post_id": 44148564, "comment_id": 75316500, "body": "Do you have a folder called <code>voltaire</code> in your project?"}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1495604202, "post_id": 44148564, "comment_id": 75316553, "body": "There&#39;s one in the gem lib directory. The structure is like lib/voltaire/voltaire.rb"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1495604970, "post_id": 44148564, "comment_id": 75316914, "body": "Can you share the link to the gem?"}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1495605022, "post_id": 44148564, "comment_id": 75316939, "body": "For sure. <a href=\"https://github.com/ddonche/voltaire\" rel=\"nofollow noreferrer\">https://github.com/ddonche/voltaire</a>. I added the self. to the methods in there, but that didn&#39;t work so I&#39;m going to take it off."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1495606001, "post_id": 44148564, "comment_id": 75317432, "body": "Hmm. Works fine on my end. Only reason I can think of is if you already have a module named <code>Voltaire</code> defined in your application. If you have a folder named <code>voltaire</code>, Rails will create that module while autoloading the <code>Voltaire</code> constant."}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1495606620, "post_id": 44148564, "comment_id": 75317727, "body": "Thanks for testing it out. I&#39;ll keep playing with it. I thought I had it working, but it turns out I don&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 1, "creation_date": 1495608848, "post_id": 44150592, "comment_id": 75318949, "body": "Rails loads the gem automatically, but doesn&#39;t help you <code>include</code> it. Most related gems have a line loading it into <code>ActionController::Base</code>. Eg. <a href=\"https://github.com/CanCanCommunity/cancancan/blob/develop/lib/cancan/controller_additions.rb\" rel=\"nofollow noreferrer\">github.com/CanCanCommunity/cancancan/blob/develop/lib/cancan&zwnj;&#8203;/&hellip;</a>"}], "tags": [], "owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "is_accepted": true, "score": 1, "last_activity_date": 1495637656, "last_edit_date": 1495637656, "creation_date": 1495607477, "answer_id": 44150592, "question_id": 44148564, "link": "https://stackoverflow.com/questions/44148564/module-no-longer-works-after-moving-to-gem/44150592#44150592", "title": "Module no longer works after moving to gem", "body": "<p>The only way I could get this to work was to put <code>include Voltaire</code> at the top of the controller. I was under the impression that rails did this automatically, but I tried the gem on two separate apps and this is the only way it will work. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I managed getting this to function properly after some of the comments. In the gem's file where my module is, I just included this. Now rails includes it into the controller and it works perfectly.</p>\n\n<pre><code>if defined? ActionController::Base\n  ActionController::Base.class_eval do\n    include Voltaire\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 44150592, "answer_count": 1, "score": 1, "last_activity_date": 1495637656, "creation_date": 1495597348, "last_edit_date": 1495600168, "question_id": 44148564, "link": "https://stackoverflow.com/questions/44148564/module-no-longer-works-after-moving-to-gem", "title": "Module no longer works after moving to gem", "body": "<p>I had a module <code>Voltaire</code> that works great. And in my articles controller, I had a method that increases the user's reputation by the amount passed into the parameters.</p>\n\n<p>I decided to make the module provided by a gem. I have since removed the module from my application_controller.rb file, and made it its own gem, pushed to github, and bundle installed it:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  include Voltaire\n\n  def upvote\n    @article.upvote_by current_user\n\n    voltaire_up(1, :reputation, @article.user_id)\n    redirect_to :back\n  end\n\n  def downvote\n    @article.downvote_by current_user\n\n    voltaire_down(1, :reputation, @article.user_id)\n    redirect_to :back\n  end\nend\n</code></pre>\n\n<p>When I use any of the methods from the module, I get <code>undefined method `voltaire_down'</code> where it worked before. </p>\n\n<p>I have also tried removing the <code>include Voltaire</code> from the controller, but this is still not working.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby", "xml-parsing", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495657951, "post_id": 44147778, "comment_id": 75351961, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Remove the image and instead paste the markup into the question after stripping it to the bare minimum that still demonstrates the problem, formatting it appropriately. We have to retype the information to use it instead of being able to copy/paste it, which slows us, induces errors, and makes it so your question can&#39;t be indexed by the search engines. A link to the page only wastes our time as it forces us to sift through that page, doing what is your responsibility. <a href=\"http://catb.org/esr/faqs/smart-questions.html#idm46680517890864\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html#idm46680517890864</a> is useful reading too."}, {"owner": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495685382, "post_id": 44147778, "comment_id": 75359654, "body": "done,  @theTinMan"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495733781, "post_id": 44147778, "comment_id": 75386895, "body": "The problem is your (mis)use of <code>children</code>. See my code below."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495806981, "post_id": 44147778, "comment_id": 75419421, "body": "I agree with @theTinMan regarding <code>children</code> but all you have to do is use <code>element_children</code> instead, which behaves the way you thought it did. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "edited": false, "score": 0, "creation_date": 1495600916, "post_id": 44148964, "comment_id": 75315345, "body": "Thank you, @Gerry. It fixed the confusion of the indexing too.  So using the option   <code>noblanks</code> is the way to go when parsing XML?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "edited": false, "score": 1, "creation_date": 1495601035, "post_id": 44148964, "comment_id": 75315385, "body": "@Ben Yes, unless you need to take any specific action with those spaces."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "edited": false, "score": 0, "creation_date": 1495601166, "post_id": 44148964, "comment_id": 75315416, "body": "@Ben check the output in console after parsing your document without <code>noblanks</code> and you&#39;ll see all those <code>&quot;\\n        &quot;</code> lines."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 6, "last_activity_date": 1495599843, "creation_date": 1495599843, "answer_id": 44148964, "question_id": 44147778, "link": "https://stackoverflow.com/questions/44147778/nokogiri-children-method/44148964#44148964", "title": "Nokogiri children method", "body": "<p>It's not a bug, its the space created while parsing strings that contain <code>\"\\n\"</code> (or empty nodes), but you could use the <code>noblanks</code> option to avoid them:</p>\n\n<pre><code>nokogiri_object = Nokogiri::XML(html_data) { |conf| conf.noblanks }\n</code></pre>\n\n<p>Use that and you will have no <em>blanks</em> in your array.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 3, "last_activity_date": 1495733751, "creation_date": 1495733751, "answer_id": 44186563, "question_id": 44147778, "link": "https://stackoverflow.com/questions/44147778/nokogiri-children-method/44186563#44186563", "title": "Nokogiri children method", "body": "<p>The problem is you are not parsing the document correctly. <code>children</code> returns more than you think, and its use is painting you into a corner. </p>\n\n<p>Here's a simplified example of how I'd do it:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(DATA.read)\n\nauctions = doc.search('listing').map do |listing|\n  seller_info = listing.at('seller_info')\n  auction_info = listing.at('auction_info')\n\n  hash = [:seller_name, :seller_rating].each_with_object({}) do |s, h|\n    h[s] = seller_info.at(s.to_s).text.strip\n  end\n\n  [:current_bid, :time_left].each do |s|\n    hash[s] = auction_info.at(s.to_s).text.strip\n  end\n\n  hash\nend\n\n\n__END__\n&lt;?xml version='1.0' ?&gt;\n&lt;!DOCTYPE root SYSTEM \"http://www.cs.washington.edu/research/projects/xmltk/xmldata/data/auctions/321gone.dtd\"&gt;\n&lt;root&gt;\n  &lt;listing&gt;\n    &lt;seller_info&gt;\n      &lt;seller_name&gt;537_sb_3 &lt;/seller_name&gt;\n      &lt;seller_rating&gt; 0&lt;/seller_rating&gt;\n    &lt;/seller_info&gt;\n    &lt;auction_info&gt;\n      &lt;current_bid&gt; $839.93&lt;/current_bid&gt;\n      &lt;time_left&gt; 1 Day, 6 Hrs&lt;/time_left&gt;\n    &lt;/auction_info&gt;\n  &lt;/listing&gt;\n\n  &lt;listing&gt;\n    &lt;seller_info&gt;\n      &lt;seller_name&gt; lapro8&lt;/seller_name&gt;\n      &lt;seller_rating&gt; 0&lt;/seller_rating&gt;\n    &lt;/seller_info&gt;\n    &lt;auction_info&gt;\n      &lt;current_bid&gt; $210.00&lt;/current_bid&gt;\n      &lt;time_left&gt; 4 Days, 21 Hrs&lt;/time_left&gt;\n    &lt;/auction_info&gt;\n  &lt;/listing&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>After running, <code>auctions</code> will be:</p>\n\n<pre><code>auctions\n# =&gt; [{:seller_name=&gt;\"537_sb_3\",\n#      :seller_rating=&gt;\"0\",\n#      :current_bid=&gt;\"$839.93\",\n#      :time_left=&gt;\"1 Day, 6 Hrs\"},\n#     {:seller_name=&gt;\"lapro8\",\n#      :seller_rating=&gt;\"0\",\n#      :current_bid=&gt;\"$210.00\",\n#      :time_left=&gt;\"4 Days, 21 Hrs\"}]\n</code></pre>\n\n<p>Notice there are no empty text nodes to deal with because I told Nokogiri exactly which nodes to grab text from. You should be able to extend the code to grab any information you want easily.</p>\n\n<p>A typically formatted XML or HTML document that displays nesting or indentation uses text nodes to provide that indenting:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;p&gt;foo&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOT\n</code></pre>\n\n<p>Here's what your code is seeing:</p>\n\n<pre><code>doc.at('body').children.map(&amp;:to_html)\n# =&gt; [\"\\n\" +\n#    \"    \", \"&lt;p&gt;foo&lt;/p&gt;\", \"\\n\" +\n#    \"  \"]\n</code></pre>\n\n<p>The Text nodes are what are confusing you:</p>\n\n<pre><code>doc.at('body').children.first.class # =&gt; Nokogiri::XML::Text\ndoc.at('body').children.first.text # =&gt; \"\\n    \"\n</code></pre>\n\n<p>If you don't drill down far enough you will pick up the Text nodes and have to clean up the results:</p>\n\n<pre><code>doc.at('body')\n  .text # =&gt; \"\\n    foo\\n  \"\n  .strip # =&gt; \"foo\"\n</code></pre>\n\n<p>Instead, explicitly find the node you want and extract the information:</p>\n\n<pre><code>doc.at('body p').text # =&gt; \"foo\"\n</code></pre>\n\n<p>In the suggested code above I used <code>strip</code> because the incoming XML had spaces surrounding some text:</p>\n\n<pre><code>h[s] = seller_info.at(s.to_s).text.strip\n</code></pre>\n\n<p>which is the result of the original XML creation code not cleaning the lines prior to generating the XML. So sometimes we have to clean up their mess, but the proper accessing of the node can reduce that a lot.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "edited": false, "score": 0, "creation_date": 1495808255, "post_id": 44203411, "comment_id": 75420322, "body": "what is the different between <code>children</code> and <code>element_children</code> both return a list of elements in the context of the example?"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "edited": false, "score": 0, "creation_date": 1495813806, "post_id": 44203411, "comment_id": 75423729, "body": "<code>children</code> returns elements and text nodes. <code>element_children</code> returns only elements. You were expecting the former to behave like the latter."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495816947, "post_id": 44203411, "comment_id": 75425343, "body": "I find that building code based on <code>children</code> or even <code>element_children</code> results in having to check node names to see if it&#39;s what I want, instead of seeking for the node directly. There&#39;s occasions where I want to look at every child node, such as converting the XML to a hash, but usually I&#39;m only concerned with cherry-picking information."}, {"owner": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "edited": false, "score": 0, "creation_date": 1495857228, "post_id": 44203411, "comment_id": 75437580, "body": "Thank you for the information. It helped me to learn about the gem. I used the <code>at</code> method to grab the information about a particular token. Appreciate them very much."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495981876, "post_id": 44203411, "comment_id": 75466829, "body": "@theTinMan I agree, and think that people tend to stop and iterate way too early, when with carefully crafted XPath or CSS selectors you can go straight to what you want. Ben, I&#39;m glad you figured that out."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1536629755, "last_edit_date": 1536629755, "creation_date": 1495806888, "answer_id": 44203411, "question_id": 44147778, "link": "https://stackoverflow.com/questions/44147778/nokogiri-children-method/44203411#44203411", "title": "Nokogiri children method", "body": "<p>The problem is that <code>children</code> includes text nodes such as the whitespace between elements. If instead you use <code>element_children</code> you get just the child elements (i.e. the contents of the tags, not the surrounding whitespace).</p>\n"}], "owner": {"reputation": 55, "user_id": 4849300, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca48e2f8eabd96ed3ace379dcfbe00b6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4849300/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3912, "favorite_count": 0, "accepted_answer_id": 44148964, "answer_count": 3, "score": 2, "last_activity_date": 1536629755, "creation_date": 1495591699, "last_edit_date": 1495685348, "question_id": 44147778, "link": "https://stackoverflow.com/questions/44147778/nokogiri-children-method", "title": "Nokogiri children method", "body": "<p>I have the following XML here:</p>\n\n<pre><code>&lt;listing&gt;\n    &lt;seller_info&gt;\n    &lt;payment_types&gt;Visa, Mastercard, , , , 0, Discover, American Express &lt;/payment_types&gt;\n    &lt;shipping_info&gt;siteonly, Buyer Pays Shipping Costs &lt;/shipping_info&gt;\n    &lt;buyer_protection_info/&gt;\n    &lt;auction_info&gt;\n    &lt;bid_history&gt;\n    &lt;item_info&gt;\n&lt;/listing&gt;\n</code></pre>\n\n<p>The following code works fine for displaying first child of the first <code>//listing</code> node:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri' \n\nhtml_data = open('http://aiweb.cs.washington.edu/research/projects/xmltk/xmldata/data/auctions/321gone.xml')\n\nnokogiri_object = Nokogiri::XML(html_data)\nlisting_elements = nokogiri_object.xpath(\"//listing\")\n\nputs listing_elements[0].children[1]\n</code></pre>\n\n<p>This also works:</p>\n\n<pre><code>puts listing_elements[0].children[3]\n</code></pre>\n\n<p>I tried to access the second node <code>&lt;payment_types&gt;</code> with the the following code: </p>\n\n<pre><code>puts listing_elements[0].children[2]\n</code></pre>\n\n<p>but a blank line was displayed. Looking through Firebug, it is clearly the 2nd child of the listing node. In general, only odd numbers work with the children method.</p>\n\n<p>Is this a bug in Nokogiri? Any thoughts?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "line-breaks"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8056405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G8eq6.png?s=128&g=1", "display_name": "ElonTheFreemason", "link": "https://stackoverflow.com/users/8056405/elonthefreemason"}, "edited": false, "score": 0, "creation_date": 1495588317, "post_id": 44147277, "comment_id": 75312175, "body": "It changes the &lt;br&gt; tags in line breaks, but the other HTML tags are not displayed to the screen..."}, {"owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "reply_to_user": {"reputation": 97, "user_id": 8056405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G8eq6.png?s=128&g=1", "display_name": "ElonTheFreemason", "link": "https://stackoverflow.com/users/8056405/elonthefreemason"}, "edited": false, "score": 0, "creation_date": 1495592263, "post_id": 44147277, "comment_id": 75313130, "body": "Yes, the sanitize method escapes the html by not showing it at all except the whitelisted tags. There is not a Rails helper that will escape and display as raw only some html tags and render others. You&#39;ll have to do some Ruby tricks for that. Gerry&#39;s answer below works, just tried it out."}], "tags": [], "owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "is_accepted": false, "score": 4, "last_activity_date": 1495587573, "creation_date": 1495587573, "answer_id": 44147277, "question_id": 44147124, "link": "https://stackoverflow.com/questions/44147124/html-and-ruby-on-rails-display-br-tags-as-line-breaks-but-other-tags-as-st/44147277#44147277", "title": "HTML and Ruby on Rails - Display &lt;br/&gt; tags as line breaks, but other tags as strings", "body": "<p>Use the Rails sanitize helper method and whitelist the tags you want to allow and leave those out that you don't. All those left out would be stripped and shown as text. So in your case it would be something like </p>\n\n<pre><code>&lt;%= sanitize @user_input, tags: %w(br) %&gt;\n</code></pre>\n\n<p>For the sanitize method api info see <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1495592713, "post_id": 44147703, "comment_id": 75313252, "body": "You can&#39;t rely on regular expressions or using <code>&lt;br&#47;&gt;</code> as a delimiter. This fails in cases where the character sequence <code>&lt;br&#47;&gt;</code> is not actually an HTML tag, such as <code>&lt;input type=&quot;text&quot; value=&quot;&lt;br&#47;&gt;&quot;&gt;</code>."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1495597179, "post_id": 44147703, "comment_id": 75314258, "body": "@meagar Yes, you are right, for edge cases it would be better to parse the HTML and work from there. <i>Nokogiri</i> could be handy since its already included in rails. I&#39;ll post an update to cover that scenario."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1495603640, "last_edit_date": 1495603640, "creation_date": 1495590904, "answer_id": 44147703, "question_id": 44147124, "link": "https://stackoverflow.com/questions/44147124/html-and-ruby-on-rails-display-br-tags-as-line-breaks-but-other-tags-as-st/44147703#44147703", "title": "HTML and Ruby on Rails - Display &lt;br/&gt; tags as line breaks, but other tags as strings", "body": "<p>You could do something like this:</p>\n\n<pre><code>&lt;% @user_input.split(\"&lt;br/&gt;\").each do |line| %&gt;\n  &lt;%= line %&gt;&lt;br/&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;a href='#2'&gt;Go to #2&lt;/a&gt;\n&lt;a href='#3'&gt;Go to #3&lt;/a&gt;\n</code></pre>\n\n<p>Or even better, use a regexp so you can split either <code>&lt;br&gt;</code> or <code>&lt;br/&gt;</code>:</p>\n\n<pre><code>&lt;% @user_input.split(/&lt;br\\/&gt;|&lt;br&gt;/).each do |line| %&gt;\n  &lt;%= line %&gt;&lt;br/&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Some cases will fail with the above approach, for example:</p>\n\n<pre><code>&lt;input type=\"text\" value=\"&lt;br/&gt;\"&gt;\n</code></pre>\n\n<p>To be able to handle those cases, you could use <strong>Nokogiri</strong>, already bundled with rails, but you'll need add a couple of additional steps in your code.</p>\n\n<p>First, your controller:</p>\n\n<pre><code>def some_action\n  input = \"&lt;a href='#2'&gt;Go to #2&lt;/a&gt;&lt;br/&gt;&lt;a href='#3'&gt;Go to #3&lt;/a&gt;&lt;br&gt;&lt;input type='text' value='&lt;br/&gt;'&gt;\"\n\n  @user_input = Nokogiri::HTML.parse(input)\n  @user_input.search('br').each { |br| br.replace(\"\\n\") }\nend\n</code></pre>\n\n<p>Basically, you will create a Nokogiri HTML document and replace all <code>br</code> tags with <code>\"\\n\"</code>.</p>\n\n<p>Second, create a <code>css</code> class to use those <code>\"\\n\"</code> as break lines:</p>\n\n<pre><code>.new-lines {\n  white-space: pre-line\n}\n</code></pre>\n\n<p>Now you will simply add this to your view:</p>\n\n<pre><code>&lt;div class=\"new-lines\"&gt;\n  &lt;%= @user_input.css('body').children %&gt;\n&lt;div&gt;\n</code></pre>\n\n<p>Notice the use of <code>class=\"new-lines\"</code>, this is important to make each <code>\"\\n\"</code> act as a <code>&lt;br&gt;</code>.</p>\n\n<p>And the output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;a href=\"#2\"&gt;Go to #2&lt;/a&gt;\n&lt;a href=\"#3\"&gt;Go to #3&lt;/a&gt;\n&lt;input type=\"text\" value=\"&amp;lt;br/&amp;gt;\"&gt;\n</code></pre>\n\n<p>Yes, there is a small <em>caveat</em> since the original <code>value='&lt;br&gt;'</code> turned into <code>value=\"&amp;lt;br/&amp;gt;\"</code>, but i hope that not to be a big issue; but if it is, then you could do something like this:</p>\n\n<pre><code>&lt;%= @input.css('body').children.to_s.gsub(\"&amp;lt;\", \"&lt;\").gsub(\"&amp;gt;\", \"&gt;\") %&gt;\n</code></pre>\n\n<p>And the output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;a href=\"#2\"&gt;Go to #2&lt;/a&gt;\n&lt;a href=\"#3\"&gt;Go to #3&lt;/a&gt;\n&lt;input type=\"text\" value=\"&lt;br/&gt;\"&gt;\n</code></pre>\n\n<p>You may need to enhance this code further for more edge cases, but i think this example will do the trick.</p>\n\n<p>Also consider using a <em>helper</em> instead of throwing all the code in your controller/view.</p>\n"}], "owner": {"reputation": 97, "user_id": 8056405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G8eq6.png?s=128&g=1", "display_name": "ElonTheFreemason", "link": "https://stackoverflow.com/users/8056405/elonthefreemason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 1, "accepted_answer_id": 44147703, "answer_count": 2, "score": 2, "last_activity_date": 1495603640, "creation_date": 1495586271, "question_id": 44147124, "link": "https://stackoverflow.com/questions/44147124/html-and-ruby-on-rails-display-br-tags-as-line-breaks-but-other-tags-as-st", "title": "HTML and Ruby on Rails - Display &lt;br/&gt; tags as line breaks, but other tags as strings", "body": "<p>I'm working on my first Rails website, but I have a little problem: I want to display the &lt;br/> tags as line breaks, but I also want to display the other tags as strings.</p>\n\n<p>For example, the user input is:</p>\n\n<pre>&lt;a href='#2'>Go to #2&lt;/a>&lt;br/>&lt;a href='#3'>Go to #3&lt;/a></pre>\n\n<p>I want to display:</p>\n\n<pre>&lt;a href='#2'>Go to #2&lt;/a><br/>&lt;a href='#3'>Go to #3&lt;/a></pre>\n\n<p>I know that I can display the &lt;br/> tags as line breaks like this: <pre>&lt;%= simple_format @user_input %></pre></p>\n\n<p>But the problem is that this command display:</p>\n\n<pre>Go to #2<br/>Go to #3</pre>\n\n<p>And not:</p>\n\n<pre>&lt;a href='#2'>Go to #2&lt;/a><br/>&lt;a href='#3'>Go to #3&lt;/a></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1495586514, "post_id": 44147037, "comment_id": 75311795, "body": "Learn to use Ruby in a script, then try using it on the command-line. It&#39;s the easier path."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 81, "user_id": 8056463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de52f15bf793725032270b16a0aaa2ff?s=128&d=identicon&r=PG&f=1", "display_name": "enigma", "link": "https://stackoverflow.com/users/8056463/enigma"}, "edited": false, "score": 2, "creation_date": 1495587165, "post_id": 44147171, "comment_id": 75311931, "body": "You&#39;re welcome, but don&#39;t use comments to say thank you. Mmmkay?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 6, "last_activity_date": 1495587191, "last_edit_date": 1495587191, "creation_date": 1495586790, "answer_id": 44147171, "question_id": 44147037, "link": "https://stackoverflow.com/questions/44147037/how-to-sort-text-by-numeric-order-in-ruby-table/44147171#44147171", "title": "How to sort text by numeric order in ruby table", "body": "<p>The problem is you're not sorting numerically, you are sorting by character values:</p>\n\n<pre><code>[1, 12, 2].sort # =&gt; [1, 2, 12]\n%w[1 12 2].sort # =&gt; [\"1\", \"12\", \"2\"]\n</code></pre>\n\n<p>Instead:</p>\n\n<pre><code>str = &lt;&lt;EOT\n1,fgff\n12,seffdd\n2,dssffs\nEOT\n\nstr.lines.sort_by { |l| l.to_i }.join\n# =&gt; \"1,fgff\\n\" +\n#    \"2,dssffs\\n\" +\n#    \"12,seffdd\\n\"\n</code></pre>\n\n<p><code>to_i</code> will return the integer value of the string, up to the first non-digit:</p>\n\n<pre><code>'1'.to_i # =&gt; 1\n'1 2'.to_i # =&gt; 1\n'1,2'.to_i # =&gt; 1\n'1_2'.to_i # =&gt; 12\n</code></pre>\n\n<p>The final one succeeds, because Ruby, like many other languages, allows the use of underscore (<code>_</code>) as a separator, similar to how we use comma:</p>\n\n<pre><code>1000 # =&gt; 1000\n1_000 # =&gt; 1000\n</code></pre>\n\n<p>Knowing that:</p>\n\n<pre><code>'1,fgff'.to_i # =&gt; 1\n'12,seffdd'.to_i # =&gt; 12\n'2,dssffs'.to_i # =&gt; 2\n</code></pre>\n\n<p>It'd also be useful to read about the difference between <code>sort</code> and <code>sort_by</code>. There are major speedups available using the proper one, given the right programming situation.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1495594000, "creation_date": 1495594000, "answer_id": 44148099, "question_id": 44147037, "link": "https://stackoverflow.com/questions/44147037/how-to-sort-text-by-numeric-order-in-ruby-table/44148099#44148099", "title": "How to sort text by numeric order in ruby table", "body": "<p>If there may be duplicates of the numeric part of the string, and the rest of the string is to be used to break ties, you can do the following.</p>\n\n<pre><code>str =&lt;&lt;END\n1,fgff\n12,seffdd\n12,seffda\n2,dssffs\nEND\n\nstr.lines.sort_by do |s|\n  n, t = s.split(',')\n  [n.to_i, t]\nend\n  #=&gt; [\"1,fgff\\n\", \"2,dssffs\\n\", \"12,seffda\\n\", \"12,seffdd\\n\"]\n</code></pre>\n\n<p>See <a href=\"https://docs.ruby-lang.org/en/2.4.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\">Array#&lt;=></a> for an explanation of how arrays are ordered.</p>\n"}], "owner": {"reputation": 81, "user_id": 8056463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de52f15bf793725032270b16a0aaa2ff?s=128&d=identicon&r=PG&f=1", "display_name": "enigma", "link": "https://stackoverflow.com/users/8056463/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 44147171, "answer_count": 2, "score": 1, "last_activity_date": 1495594353, "creation_date": 1495585449, "last_edit_date": 1495594353, "question_id": 44147037, "link": "https://stackoverflow.com/questions/44147037/how-to-sort-text-by-numeric-order-in-ruby-table", "title": "How to sort text by numeric order in ruby table", "body": "<p>I'm trying to sort this text with Ruby but it does not work.</p>\n\n<pre><code>1,fgff\n12,seffdd\n2,dssffs\n</code></pre>\n\n<p>Using:</p>\n\n<pre><code>cat sorting  | ruby -ne 'BEGIN{ $x=[]}; $x &lt;&lt; $_.chomp.to_s; END { puts $x.sort }'\n</code></pre>\n\n<p>I get this result:</p>\n\n<pre><code>1,fgff\n12,seffdd\n2,dssffs\n</code></pre>\n\n<p>I expected this</p>\n\n<pre><code>1,fgff\n2,dssffs\n12,seffdd\n</code></pre>\n\n<p>How woudld I fix my code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubymine"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 2492286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f27d755cb2d979af33504a3b555adf05?s=128&d=identicon&r=PG", "display_name": "user2492286", "link": "https://stackoverflow.com/users/2492286/user2492286"}, "edited": false, "score": 0, "creation_date": 1495644971, "post_id": 44151348, "comment_id": 75345337, "body": "Doesn&#39;t work with the dash as well. Same error &quot;invalid option: -b&quot;."}, {"owner": {"reputation": 99, "user_id": 2492286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f27d755cb2d979af33504a3b555adf05?s=128&d=identicon&r=PG", "display_name": "user2492286", "link": "https://stackoverflow.com/users/2492286/user2492286"}, "edited": false, "score": 0, "creation_date": 1495652693, "post_id": 44151348, "comment_id": 75349415, "body": "I tried with double dash. It&#39;s trying to load a file in the current directory when the local debugger connects to it and it fails.  -bash-4.1$ rdebug-ide --port 1236 --dispatcher-port 26166 --host 0.0.0.0 ? -- bin/rails s -b 0.0.0.0 Fast Debugger (ruby-debug-ide 0.6.1.beta4, debase 0.2.1, file filtering is supported) listens on 0.0.0.0:1236 Uncaught exception: cannot load such file --  Could you please let me know on what it&#39;s expecting? Pardon my ignorance as I&#39;m new to Rails. Thank you."}, {"owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "reply_to_user": {"reputation": 99, "user_id": 2492286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f27d755cb2d979af33504a3b555adf05?s=128&d=identicon&r=PG", "display_name": "user2492286", "link": "https://stackoverflow.com/users/2492286/user2492286"}, "edited": false, "score": 0, "creation_date": 1495695483, "post_id": 44151348, "comment_id": 75363418, "body": "Can you supply the exception details please?"}, {"owner": {"reputation": 99, "user_id": 2492286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f27d755cb2d979af33504a3b555adf05?s=128&d=identicon&r=PG", "display_name": "user2492286", "link": "https://stackoverflow.com/users/2492286/user2492286"}, "edited": false, "score": 0, "creation_date": 1495818172, "post_id": 44151348, "comment_id": 75425971, "body": "Should there be a &quot;?&quot; also before the double dash?  If I ignore the &quot;?&quot;, I&#39;m still getting the same error (invalid option -b). But if I use following command   rdebug-ide --port 1236 --dispatcher-port 26166 --host 0.0.0.0 ? -- bin/rails s -b 0.0.0.0  it starts up but when the debugger connects, it throws the exception  Uncaught exception: cannot load such file -- /vagrant/abc/webservices/xyz/? \t/var/imno/external/bin/rdebug-ide:23:in <code>load&#39; \t&#47;var&#47;mno&#47;external&#47;bin&#47;rdebug-ide:23:in </code>&lt;main&gt;&#39;  I guess it&#39;s trying to load some file from the current directory and it&#39;s failing"}], "tags": [], "owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "is_accepted": false, "score": 2, "last_activity_date": 1495821533, "last_edit_date": 1495821533, "creation_date": 1495609818, "answer_id": 44151348, "question_id": 44146773, "link": "https://stackoverflow.com/questions/44146773/remote-debugging-rails-application-using-rubymine/44151348#44151348", "title": "Remote debugging Rails application using RubyMine", "body": "<p>It looks like the command you are using is incorrect. It should be:</p>\n\n<pre><code>rdebug-ide --port 1236 --dispatcher-port 26166 --host 0.0.0.0 -- bin/rails s -b 0.0.0.0\n</code></pre>\n\n<p>You have a missing double dash before bin/rails.</p>\n\n<p>The error says the b option is not valid for the rdebug-ide command. However, the b option is intended for the bin/rails s command.</p>\n"}], "owner": {"reputation": 99, "user_id": 2492286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f27d755cb2d979af33504a3b555adf05?s=128&d=identicon&r=PG", "display_name": "user2492286", "link": "https://stackoverflow.com/users/2492286/user2492286"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495821533, "creation_date": 1495583493, "last_edit_date": 1495644883, "question_id": 44146773, "link": "https://stackoverflow.com/questions/44146773/remote-debugging-rails-application-using-rubymine", "title": "Remote debugging Rails application using RubyMine", "body": "<p>I'm following the instructions listed in the \n<a href=\"https://www.jetbrains.com/help/ruby/remote-debugging.html\" rel=\"nofollow noreferrer\">Remote debugging article published by JetBrains</a> to debug a remote Rails application using RubyMine. </p>\n\n<p>Based on the instructions, I'm supposed to run </p>\n\n<pre><code>rdebug-ide --port 1236 --dispatcher-port 26166 --host 0.0.0.0 ? bin/rails s -b 0.0.0.0\n</code></pre>\n\n<p>on the remote host. Running the above command throws the following error message stating that option -b is invalid.</p>\n\n<pre><code>-bash-4.1$ rdebug-ide --port 1236 --dispatcher-port 26166 --host 0.0.0.0  bin/rails s -b 0.0.0.0 \n    Using ruby-debug-base 0.2.1 Usage: rdebug-ide is supposed to be called from RDT, NetBeans, RubyMine, or\n               the IntelliJ IDEA Ruby plugin.  The command line interface to\n               ruby-debug is rdebug.\n\n        Options:\n            -h, --host HOST                  Host name used for remote \n\ndebugging\n        -p, --port PORT                  Port used for remote debugging\n            --dispatcher-port PORT       Port used for multi-process debugging dispatcher\n            --evaluation-timeout TIMEOUT evaluation timeout in seconds (default: 10)\n            --stop                       stop when the script is loaded\n        -x, --trace                      turn on line tracing\n        -l, --load-mode                  load mode (experimental)\n        -d, --debug                      Debug self - prints information for debugging ruby-debug itself\n            --xml-debug                  Debug self - sends information &lt;message&gt;s for debugging ruby-debug itself\n        -I, --include PATH               Add PATH to $LOAD_PATH\n            --attach-mode                Tells that rdebug-ide is working in attach mode\n            --keep-frame-binding         Keep frame bindings\n            --disable-int-handler        Disables interrupt signal handler\n            --rubymine-protocol-extensions\n                                         Enable all RubyMine-specific incompatible protocol extensions\n            --catchpoint-deleted-event   Enable chatchpointDeleted event\n            --value-as-nested-element    Allow to pass variable's value as nested element instead of attribute\n\n    Common options:\n        -v, --version                    Show version\n\n    invalid option: -b\n</code></pre>\n\n<ul>\n<li>RubyMine version 2017.1 </li>\n<li>Remote Host OS: Centos-6.9 </li>\n<li>Ruby version: 2.3.1p112</li>\n</ul>\n\n<p>Could you please help me to understand what's going wrong? Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "getstream-io"], "comments": [{"owner": {"reputation": 3769, "user_id": 364024, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/97eb936641f63111d3a2a0a155386515?s=128&d=identicon&r=PG", "display_name": "iandouglas", "link": "https://stackoverflow.com/users/364024/iandouglas"}, "edited": false, "score": 1, "creation_date": 1495580681, "post_id": 44146225, "comment_id": 75310400, "body": "<code>is there some angular thing out there?</code> -- this is too vague of a question to answer."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495581195, "post_id": 44146225, "comment_id": 75310553, "body": "(1) How does <code>stream_rails</code> work? (2) How do I build an AngularJS front-end for a Rails app? (3) Is there an existing implementation of this? (4) Does <code>stream_rails</code> integrate with AMS?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1495581239, "post_id": 44146225, "comment_id": 75310566, "body": "Those are four very broad questions... I think this is way beyond the scope of a single SO post."}], "answers": [{"tags": [], "owner": {"reputation": 3769, "user_id": 364024, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/97eb936641f63111d3a2a0a155386515?s=128&d=identicon&r=PG", "display_name": "iandouglas", "link": "https://stackoverflow.com/users/364024/iandouglas"}, "is_accepted": false, "score": 0, "last_activity_date": 1495580570, "creation_date": 1495580570, "answer_id": 44146392, "question_id": 44146225, "link": "https://stackoverflow.com/questions/44146225/how-to-use-stream-rails-with-angular-ui-serialization/44146392#44146392", "title": "How to use stream_rails with Angular UI/Serialization", "body": "<p>The stream_rails gem has documentation for \"enriching\" the feed data to turn your actor from \"user:123\" back into a User object for \"Derek\" and whatever other data that might contain, same for any other activity fields you specify in the enrichment setup. From there you can have your Rails controller action return a json payload that your Angular app can interpret and draw your UI.</p>\n"}], "owner": {"reputation": 11, "user_id": 7802927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e47fe27dc5c798fd752eaa13f10d382?s=128&d=identicon&r=PG&f=1", "display_name": "Derek Lin littlemuffin618", "link": "https://stackoverflow.com/users/7802927/derek-lin-littlemuffin618"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495580570, "creation_date": 1495579472, "question_id": 44146225, "link": "https://stackoverflow.com/questions/44146225/how-to-use-stream-rails-with-angular-ui-serialization", "title": "How to use stream_rails with Angular UI/Serialization", "body": "<p>I was wondering if Stream.io's stream_rails gem, is actually getting the records of the resource. say User: 1, will get user record with id: 1 from the PostGreSQL(in my case) DB, however I need to render the UI in AngularJS Frontend, instead of rails, how would I do that? can I still do the smart finding form way that stream_rails does it where it uses the rendered activity feed type(aggregated,flat,notification) to render the feed? is there some angular thing out there? Also, on top of that I'm using AMS to serialize my data into JSON to be sent to the client, will AMS pick up on the rendered activities and serialize the model records in the rendered activities? Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1495580121, "post_id": 44146214, "comment_id": 75310221, "body": "Your indentation is inconsistent, which may seem like a trivial thing, but following a consistent pattern will help you understand your own logic."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8042857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62af7c8d77b255d8fdd0b3d465549a86?s=128&d=identicon&r=PG&f=1", "display_name": "lamar", "link": "https://stackoverflow.com/users/8042857/lamar"}, "edited": false, "score": 0, "creation_date": 1495580694, "post_id": 44146284, "comment_id": 75310404, "body": "thank you but so i have to stay with 2 if else statement?  and about a third option? and elsif is ilegal why exist?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1, "user_id": 8042857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62af7c8d77b255d8fdd0b3d465549a86?s=128&d=identicon&r=PG&f=1", "display_name": "lamar", "link": "https://stackoverflow.com/users/8042857/lamar"}, "edited": false, "score": 0, "creation_date": 1495580864, "post_id": 44146284, "comment_id": 75310460, "body": "&quot;else IF&quot; requires a <i>condition</i>. Just like a plain &quot;IF&quot; requires a condition. Like I said above: &quot;else if <b>what?</b>&quot; It&#39;s illegal syntax to write &quot;elsif&quot; without a condition, because that makes no sense."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1, "user_id": 8042857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62af7c8d77b255d8fdd0b3d465549a86?s=128&d=identicon&r=PG&f=1", "display_name": "lamar", "link": "https://stackoverflow.com/users/8042857/lamar"}, "edited": false, "score": 0, "creation_date": 1495580949, "post_id": 44146284, "comment_id": 75310483, "body": "Or to put that another way, how do you want to decide between showing option 2 vs option 3? Pretend option 1 doesn&#39;t exist, for a moment -- how would you write that?"}, {"owner": {"reputation": 1, "user_id": 8042857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62af7c8d77b255d8fdd0b3d465549a86?s=128&d=identicon&r=PG&f=1", "display_name": "lamar", "link": "https://stackoverflow.com/users/8042857/lamar"}, "edited": false, "score": 0, "creation_date": 1495581149, "post_id": 44146284, "comment_id": 75310540, "body": "if option 2.present? blah else bloh"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1495580207, "last_edit_date": 1495580207, "creation_date": 1495579858, "answer_id": 44146284, "question_id": 44146214, "link": "https://stackoverflow.com/questions/44146214/rails-how-to-straight-3-row-conditional/44146284#44146284", "title": "Rails how to straight 3 row conditional?", "body": "<p>You can't just write <code>&lt;% elsif %&gt;</code> by itself.</p>\n\n<blockquote>\n  <p>Else if <strong>what</strong>??</p>\n</blockquote>\n\n<p>What you've written makes as much sense as:</p>\n\n<pre><code>if\n  puts \"this\"\nelse\n  puts \"that\"\nend\n</code></pre>\n\n<p>(Which is also illegal syntax, of course.)</p>\n\n<p>I'm guessing you meant to write something like:</p>\n\n<pre><code>&lt;% elsif order.dispute.nil? %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8042857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62af7c8d77b255d8fdd0b3d465549a86?s=128&d=identicon&r=PG&f=1", "display_name": "lamar", "link": "https://stackoverflow.com/users/8042857/lamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 44146284, "answer_count": 1, "score": -2, "last_activity_date": 1495580207, "creation_date": 1495579448, "last_edit_date": 1495580069, "question_id": 44146214, "link": "https://stackoverflow.com/questions/44146214/rails-how-to-straight-3-row-conditional", "title": "Rails how to straight 3 row conditional?", "body": "<p>I'm getting the following syntax error, and I don't understand why:</p>\n\n<blockquote>\n  <p>syntax error, unexpected keyword_ensure, expecting keyword_end</p>\n</blockquote>\n\n<p>I'm trying to direct the user to option 3 if option 1 or 2 are not used, so I did:</p>\n\n<pre><code>&lt;%if order.dispute.status == \"open\" %&gt;\n\n  &lt;li&gt;\n    &lt;%= button_to 'Dispute Open',  order_dispute_path(order), method: :get, class: 'btn_grey' %&gt;\n  &lt;/li&gt;\n\n&lt;% elsif %&gt;\n\n  &lt;li&gt;\n    &lt;%= button_to 'Dispute',  new_order_dispute_path(order), method: :get, class: 'btn_grey' %&gt;\n  &lt;/li&gt;\n\n&lt;% else %&gt;\n\n  &lt;li&gt;\n    &lt;%= button_to 'Dispute closed',  closed_order_dispute_path, method: :get, class: 'btn_grey' %&gt;\n  &lt;/li&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "input"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1495578365, "post_id": 44145886, "comment_id": 75309671, "body": "This may be better suited as a question on <a href=\"https://codereview.stackexchange.com/\">SE code review</a>. Also as a side note, use two-spaces for indentation in Ruby."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495579206, "post_id": 44145886, "comment_id": 75309939, "body": "Welcome to Stack Overflow. We don&#39;t care what your experience level is, we want well researched and concise questions. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and their linked pages for more information. Idiomatic Ruby code can best be learned by reading the code for various popular Ruby projects on github. Rails is actually full of Ruby&#39;s deeper magic so I recommend spending a lot of time with Ruby alone first. Sinatra and Padrino are a great starting point, then step into Rails."}, {"owner": {"reputation": 31, "user_id": 7907945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1419173611437402/picture?type=large", "display_name": "Bao Cong Pham", "link": "https://stackoverflow.com/users/7907945/bao-cong-pham"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495579955, "post_id": 44145886, "comment_id": 75310163, "body": "@theTinMan That&#39;s a pretty general answer when it comes to experience levels, can be understandable to a degree as well. Though, I post my experience level to make sure people know how to approach giving answers. This site and so are the visitors make up various experience levels, it is a good thing if you can understand how to communicate with people properly rather than being on separate pages."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495582071, "post_id": 44145886, "comment_id": 75310791, "body": "It&#39;s important to understand that SO isn&#39;t an &quot;answer my question&quot; site. Instead it&#39;s a &quot;here&#39;s a specific programming problem and how to fix it site&quot;. As such, the question asked has to have certain information in it that will help future searchers looking to solve the same problem. It has to be written clearly and concisely and address one, or at them most two, closely related questions. &quot;How do I improve my code&quot; is wide open, and very open to opinion, and, as such, isn&#39;t a good fit for SO. <a href=\"https://codereview.stackexchange.com\">Code Review</a> might be a better choice, determined by you reading their question requirements."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7907945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1419173611437402/picture?type=large", "display_name": "Bao Cong Pham", "link": "https://stackoverflow.com/users/7907945/bao-cong-pham"}, "edited": false, "score": 0, "creation_date": 1495579278, "post_id": 44146072, "comment_id": 75309973, "body": "That is better than what I currently have. But what about a better way to call on class.methods when it comes to multiple answers?"}, {"owner": {"reputation": 41, "user_id": 7960980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQVQo.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7960980/martin"}, "reply_to_user": {"reputation": 31, "user_id": 7907945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1419173611437402/picture?type=large", "display_name": "Bao Cong Pham", "link": "https://stackoverflow.com/users/7907945/bao-cong-pham"}, "edited": false, "score": 0, "creation_date": 1495580872, "post_id": 44146072, "comment_id": 75310462, "body": "Well, in that case you&#39;d want to create instances of your class Intro each containing a different answer as a instance variable."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495582235, "post_id": 44146072, "comment_id": 75310831, "body": "Don&#39;t use &quot;edit&quot; or &quot;update&quot; tags when you change things. Instead, incorporate the change as if it&#39;d been there initially. We can see what changed and when if we need to. <a href=\"https://meta.stackoverflow.com/a/255685/128421\">meta.stackoverflow.com/a/255685/128421</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 7960980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQVQo.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7960980/martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1495581373, "last_edit_date": 1495581373, "creation_date": 1495578586, "answer_id": 44146072, "question_id": 44145886, "link": "https://stackoverflow.com/questions/44145886/how-to-connect-input-with-class-in-a-simple-way/44146072#44146072", "title": "How to connect input with class in a simple way", "body": "<p>Cleanliness is somewhat subjective, but this might be something you're looking for. </p>\n\n<pre><code>class Intro\n\n  def self.display\n    input = nil\n    until (1..5).include? input\n      puts \"Welcome player! Choose one of the following!\"\n      puts \"1. Create a new flash card?\"\n      puts \"2. View all flash cards?\"\n      puts \"3. Edit a flashcard?\"\n      puts \"4. Delete a flashcard?\"\n      puts \"5. View score and answers?\"\n      input = gets.chomp.to_i\n      puts \"Invalid option.\" unless (1..5).include? input\n    end\n    self.select(input)\n  end\n\n  def self.select(number)\n    @number = number\n    puts \"#{@number} selected!\"\n    puts \"#{@back}\" # @back is uninitialized\n  end\nend\n\nIntro.display\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>If you want to be able to have multiple answers then one way to go about it would be to create instances of your <code>Intro</code> class each with a instance variable containing the answer. </p>\n\n<p>So, instead of calling <code>display</code> on the class itself you would call it on an instance of the class.</p>\n\n<p>The class <code>Intro</code> would have an <code>initialize</code> function that is automatically called whenever a new instance of the <code>Intro</code> class is instantiated.</p>\n\n<pre><code>class Intro\n\n  def initialize(answer)\n    @answer = answer\n  end\n\n  #[...]\n</code></pre>\n\n<p>This would mean that by calling</p>\n\n<p><code>new_game = Intro.new(7)</code></p>\n\n<p>you are creating an instance of the <code>Intro</code> class that has its instance variable <code>@answer</code> set to seven and you are storing that instance in the variable <code>new_game</code>. And from there you can call instance methods on <code>new_game</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1495586340, "post_id": 44146350, "comment_id": 75311757, "body": "Oh. That. Heh. I was going to remove the instance variable. Removed."}, {"owner": {"reputation": 31, "user_id": 7907945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1419173611437402/picture?type=large", "display_name": "Bao Cong Pham", "link": "https://stackoverflow.com/users/7907945/bao-cong-pham"}, "edited": false, "score": 0, "creation_date": 1495633837, "post_id": 44146350, "comment_id": 75337060, "body": "Case is definitely great. I appreciate the response. This actually makes the sheet more fluid. Is there anyway you could possibly iterate on how (&#39;%d. %s?&#39; % [i, s]) I tried googling and didn&#39;t find any explanations. I googled each.with_index and thats a pretty handy method, thanks for that."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1495653222, "last_edit_date": 1495653222, "creation_date": 1495580300, "answer_id": 44146350, "question_id": 44145886, "link": "https://stackoverflow.com/questions/44145886/how-to-connect-input-with-class-in-a-simple-way/44146350#44146350", "title": "How to connect input with class in a simple way", "body": "<p>Your question is very broad because there are many ways to write it. As a first pass I'd do:</p>\n\n<pre><code>class Intro\n  CHOICES = {\n    1 =&gt; 'Create a new flash card',\n    2 =&gt; 'View all flash cards',\n    3 =&gt; 'Edit a flashcard',\n    4 =&gt; 'Delete a flashcard',\n    5 =&gt; 'View score and answers',\n  }\n\n  def self.display\n    loop do\n      puts \"Welcome player! Choose one of the following!\"\n      CHOICES.each do |h|\n        puts '%d. %s?' % h\n      end\n\n      input = gets.to_i\n\n      return input if CHOICES[input]\n      puts 'Invalid option.' \n    end\n  end\n\n  def self.select number\n    puts \"#{number} selected!\"\n  end\nend\n\nchoice = Intro.display\nIntro.select(choice)\n</code></pre>\n\n<p>Your choice of <code>gets.chomp.to_i</code> is better written as <code>gets.to_i</code>.</p>\n\n<p><code>(1..5).include? input</code> is fine but forces you to edit your code if you add or remove options. Instead, compute the maximum value based on the list of choices, so you only have to add or delete them and everything adjusts.</p>\n\n<p><code>self.select input</code> probably shouldn't be a separate method. It probably shouldn't be called by <code>display</code> either, but that's mostly a programmer-choice.</p>\n\n<p>Using a class for such a simple piece of code is overkill. It could be simplified to:</p>\n\n<pre><code>CHOICES = {\n  1 =&gt; 'Create a new flash card',\n  2 =&gt; 'View all flash cards',\n  3 =&gt; 'Edit a flashcard',\n  4 =&gt; 'Delete a flashcard',\n  5 =&gt; 'View score and answers',\n}\n\ndef display\n  loop do\n    puts \"Welcome player! Choose one of the following!\"\n    CHOICES.each do |h|\n      puts '%d. %s?' % h\n    end\n\n    input = gets.to_i\n\n    return input if CHOICES[input]\n    puts 'Invalid option.' \n  end\nend\n\ndef select number\n  puts \"#{number} selected!\"\nend\n\nchoice = display\nselect(choice)\n</code></pre>\n\n<p>Using a class to encapsulate the methods, without using it to have instances of the class gets old very quickly. Ruby allows us to write code using classes, or without. Think of what is concise and simple to understand as you write. Sometimes we start simply and have to back up a little and take another run at it because we decide using classes makes more sense. I usually let the complexity of the program determine that.</p>\n\n<p>Using a series of <code>if</code>/<code>elsif</code>/<code>then</code> statements is sometimes useful. We often can use <code>case</code>/<code>when</code> to clean the code up even more than using <code>if</code> chains:</p>\n\n<pre><code>CHOICES = [\n  'Create a new flash card',\n  'View all flash cards',\n  'Edit a flashcard',\n  'Delete a flashcard',\n  'View score and answers',\n]\n\ndef display\n  loop do\n    puts \"Welcome player! Choose one of the following!\"\n    CHOICES.each.with_index(1) do |s, i|\n      puts '%d. %s?' % [i, s]\n    end\n\n    input = gets.to_i\n\n    case input\n    when 1 .. CHOICES.size\n      return input\n    else\n      puts 'Invalid option.' \n    end\n  end\nend\n</code></pre>\n\n<p>Replace the previous methods with these and experiment.</p>\n\n<hr>\n\n<blockquote>\n  <p>...how ('%d. %s?' % [i, s]) [works]</p>\n</blockquote>\n\n<p>Notice that <code>'%d. %s?'</code> is a String. That'd make <code>%</code> a method of String.</p>\n\n<p>See <a href=\"https://ruby-doc.org/core/String.html#method-i-25\" rel=\"nofollow noreferrer\">String#%</a></p>\n"}], "owner": {"reputation": 31, "user_id": 7907945, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1419173611437402/picture?type=large", "display_name": "Bao Cong Pham", "link": "https://stackoverflow.com/users/7907945/bao-cong-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495653222, "creation_date": 1495577620, "last_edit_date": 1495590854, "question_id": 44145886, "link": "https://stackoverflow.com/questions/44145886/how-to-connect-input-with-class-in-a-simple-way", "title": "How to connect input with class in a simple way", "body": "<p>I am writing a flash card CLI game.</p>\n\n<pre><code>class Intro\n  def self.display\n    while 1\n      puts \"Welcome player! Choose one of the following!\"\n      puts \"1. Create a new flash card?\"\n      puts \"2. View all flash cards?\"\n      puts \"3. Edit a flashcard?\"\n      puts \"4. Delete a flashcard?\"\n      puts \"5. View score and answers?\"\n      input = gets.chomp.to_i\n      if (1..5).include? input\n        self.select input\n        break\n      else\n        puts \"Invalid option.\" \n      end\n    end\n  end\n  def self.select number\n    @number = number\n    puts \"#{@number} selected!\"\n    puts \"#{@back}\"\n  end\nend\nIntro.display\n</code></pre>\n\n<p>It seems redundant to consistently use if/else for many answers unless that's the only way.</p>\n\n<p>How would I write cleaner code that compares the input of the user and the call to a class? If there is another method to do so, I'd appreciate it.</p>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1495576092, "post_id": 44145283, "comment_id": 75308843, "body": "I just tried this, and it works fine for me. Can you give a verifiable example to reproduce the issue - i.e. a minimal <code>.rubocop.yaml</code> and folder structure?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1495576170, "post_id": 44145283, "comment_id": 75308890, "body": "BTW although I don&#39;t think this is necessary here, one possibility is to define Include/Exclude patterns using a regular expression: <code>!ruby&#47;regexp &lt;pattern&gt;</code>"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495647190, "post_id": 44145283, "comment_id": 75346581, "body": "@TomLord is correct: what you wrote will absolutely work. If it is not working for you, then you have some other issue besides the config file contents."}], "owner": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1495574683, "creation_date": 1495574683, "question_id": 44145283, "link": "https://stackoverflow.com/questions/44145283/disable-rubocop-for-folder-but-re-enable-for-specific-files-in-folder", "title": "Disable rubocop for folder, but re-enable for specific files in folder", "body": "<p>I'm trying to disable a cop for an entire folder, but then re-enable the cop for specific files inside the folder.   I've tried the following, but it doesn't work.</p>\n\n<pre><code>Lint/AmbiguousBlockAssociation:\n  Exclude:\n    - 'spec/**/*'\n  Include:\n    - 'spec/support/**/*'\n    - 'spec/factories/**/*'\n    - 'spec/rails_helper.rb'\n    - 'spec/spec_helper.rb'\n</code></pre>\n\n<p>Is this possible with rubocop?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1495573176, "post_id": 44144859, "comment_id": 75307466, "body": "Can you see what does <code>&lt;%= session[:user_id] %&gt;</code> print?"}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1495573392, "post_id": 44144859, "comment_id": 75307589, "body": "its prints the actual user id of the user"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1495573995, "post_id": 44144859, "comment_id": 75307878, "body": "What does <code>&lt;%= session[:user_id] %&gt;</code> print <b>in the rspec test</b>, where the error is actually happening? (Hint: it&#39;s <code>nil</code>.) (Can you give an example of a test that&#39;s failing? You&#39;re probably missing a <code>sign_in(user)</code> statement, in order to access session data.)"}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495575383, "post_id": 44144859, "comment_id": 75308551, "body": "@TomLord, it gives no errors in the rspec test, but &lt;%= User.find(session[:user_id]).first_name %&gt; gives Failure/Error: &lt;%= User.find(session[:user_id]).first_name %&gt;    ActionView::Template::Error:     Couldn&#39;t find User with &#39;id&#39;="}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1495576329, "post_id": 44144859, "comment_id": 75308956, "body": "By &quot;error&quot;, I meant &quot;failing test&quot;. <i>When that test is running, what is <code>session[:user_id]</code>?</i> (Hint#2: it&#39;s <code>nil</code>.) (Can you give an example of a test that&#39;s failing? You&#39;re probably missing a <code>sign_in(user)</code> statement, in order to access session data.)"}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "edited": false, "score": 0, "creation_date": 1495577648, "post_id": 44144859, "comment_id": 75309454, "body": "describe &quot;deleting an item&quot; do   \tit &quot;should remove item and redirect to index page&quot; do  \t\titem = Item.create(item_attributes) \t\tvisit item_path(item) \t\tclick_link &#39;Delete Item&#39; \t\texpect(current_path).to eq(items_path) \t\texpect(page).not_to have_text(item.name) \t\texpect(page).to have_text(&quot;Item Successfully Deleted!&quot;) \tend end"}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495577727, "post_id": 44144859, "comment_id": 75309469, "body": "@TomLord, sorry, im new to this, not sure how to format that properly"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1495579593, "post_id": 44144859, "comment_id": 75310069, "body": "You should always <a href=\"https://stackoverflow.com/posts/44144859/edit\">edit your post</a> to include any additional information like this. (I&#39;ve done it for you just now.) As I guessed, in that test there is no user signing in. What behaviour do you expect to see if an anonymous user visits the <code>Items#show</code> page? (Should it force them to log in first, or just display the page without showing a name?) Write the test and controller+view accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 1476, "user_id": 3282479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45e313bf91a74f84cb6dfc02625797de?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/3282479/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1495576502, "creation_date": 1495576502, "answer_id": 44145687, "question_id": 44144859, "link": "https://stackoverflow.com/questions/44144859/adding-session-data-to-page-in-rails-breaks-specs/44145687#44145687", "title": "adding session data to page in rails breaks specs", "body": "<p>Is the partial getting rendered in a page which can be accessed even without a logged in user.\nBecause in that case, the session[:user_id] will be nil, and you will get the mentioned error.</p>\n\n<p>Also, devise defines a current_user for you, use that instead of doing a find. Also use other devise helper methods to check if a user is signed_in or not if you are using it in a page that can be accessed from anywhere.</p>\n\n<pre><code>&lt;% if user_signed_in? %&gt;\n  &lt;%= current_user.first_name %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 7927990, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425331290823651/picture?type=large", "display_name": "Riley Thompson", "link": "https://stackoverflow.com/users/7927990/riley-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1495591819, "creation_date": 1495591819, "answer_id": 44147798, "question_id": 44144859, "link": "https://stackoverflow.com/questions/44144859/adding-session-data-to-page-in-rails-breaks-specs/44147798#44147798", "title": "adding session data to page in rails breaks specs", "body": "<p>Session is not available in a view.</p>\n\n<p>You should write some kind of current_user helper method that looks something like this in your application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  helper_method :current_user\n  protect_from_forgery with: :exception\n\n  def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n  end\nend\n</code></pre>\n\n<p>You can then call</p>\n\n<pre><code>&lt;%= current_user.first_name %&gt;\n</code></pre>\n\n<p>in your view. Try to keep any logic out of your views as it is generally considered bad practice.</p>\n"}], "owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495591819, "creation_date": 1495573009, "last_edit_date": 1495579324, "question_id": 44144859, "link": "https://stackoverflow.com/questions/44144859/adding-session-data-to-page-in-rails-breaks-specs", "title": "adding session data to page in rails breaks specs", "body": "<p>When I add the following code into my header partial </p>\n\n<pre><code>&lt;%= session[:user_id] %&gt;\n</code></pre>\n\n<p>Everything works fine, but when I try to display a user's name from a session with the following...</p>\n\n<pre><code>&lt;%= User.find(session[:user_id]).first_name %&gt;\n</code></pre>\n\n<p>it breaks a lot of my <code>rspec</code> tests with the following error:</p>\n\n<pre><code>Failure/Error: &lt;%= User.find(session[:user_id]).first_name %&gt;\n\n  ActionView::Template::Error:\n    Couldn't find User with 'id'=\n</code></pre>\n\n<p>even though everything works just fine in the browser.</p>\n\n<p>This is my user model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n  validates :first_name, :last_name, :address, :phone, :email, presence: true\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\w]+\\.[a-z\\d]+\\z/\n  validates :email, format: { with: VALID_EMAIL_REGEX },\n                     uniqueness: { case_sensitive: false }\n  has_secure_password\n\n  def self.authenticate(email, password)\n    user = User.find_by(email: email)\n    user &amp;&amp; user.authenticate(password)\n  end\nend\n</code></pre>\n\n<p>and my session controller: </p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new \n  end\n\n  def create \n    if user = User.authenticate(params[:email], params[:password])\n      session[:user_id] = user.id \n      flash[:notice] = \"Welcome back, #{user.first_name}!\"\n      redirect_to user\n    else \n      flash.now[:alert] = \"Invalid email/password combination!\"\n      render :new\n    end\n  end\n\nend\n</code></pre>\n\n<p>This is an example of a now-failing <code>rspec</code> test:</p>\n\n<pre><code>describe \"deleting an item\" do\n  it \"should remove item and redirect to index page\" do\n    item = Item.create(item_attributes)\n    visit item_path(item)\n    click_link 'Delete Item'\n    expect(current_path).to eq(items_path)\n    expect(page).not_to have_text(item.name)\n    expect(page).to have_text(\"Item Successfully Deleted!\")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "mixins", "instance-variables", "class-variables"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1495583353, "post_id": 44145300, "comment_id": 75311111, "body": "<code>extend</code> doesn&#39;t &quot;add&quot; anything. <code>o.extend(M)</code> simply makes <code>M</code> the superclass of the singleton class of <code>o</code>. IOW, it&#39;s (more or less) equivalent to <code>class &lt;&lt; o; include M end</code> (<code>include</code> makes the module the superclass of the class)."}, {"owner": {"reputation": 23, "user_id": 6635535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j27zy.jpg?s=128&g=1", "display_name": "Evgeny S", "link": "https://stackoverflow.com/users/6635535/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1495609126, "post_id": 44145300, "comment_id": 75319129, "body": "&quot;Put the class variable in the InstanceMethods module&quot; - not working((( I&#39;ve added @@instances = 0 to ClassMethods and InstanceMethods - it doesn&#39;t work correctly. If I add @@instances = 0 to InstanceMethods only - I receive an error in irb: Car.instances -&gt;&gt;&gt; &quot;NameError: uninitialized class variable @@instances in InstanceCounter::ClassMethods&quot;"}, {"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1495642421, "post_id": 44145300, "comment_id": 75343787, "body": "Thanks for the clarification J&#246;rg. @EvggenyS I didn&#39;t give a great answer to your question, and ruby inheritance can be a bit confusing. I think this question might help you out: <a href=\"https://stackoverflow.com/questions/30022273/how-to-access-class-variables-from-module\" title=\"how to access class variables from module\">stackoverflow.com/questions/30022273/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 0, "last_activity_date": 1495574743, "creation_date": 1495574743, "answer_id": 44145300, "question_id": 44144581, "link": "https://stackoverflow.com/questions/44144581/ruby-uninitialized-class-variable-in-instance-methods/44145300#44145300", "title": "Ruby - uninitialized class variable in instance methods", "body": "<p>Put the class variable in the InstanceMethods module. It looks like extend only adds methods to the calling object by default.</p>\n\n<p>Documentation on default ruby implementations for reference: <a href=\"https://ruby-doc.org/core-2.4.1/Object.html#method-i-extend\" rel=\"nofollow noreferrer\">extend</a> and <a href=\"https://ruby-doc.org/core-2.4.1/Module.html#method-i-append_features\" rel=\"nofollow noreferrer\">include</a></p>\n"}], "owner": {"reputation": 23, "user_id": 6635535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j27zy.jpg?s=128&g=1", "display_name": "Evgeny S", "link": "https://stackoverflow.com/users/6635535/evgeny-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495574743, "creation_date": 1495571967, "question_id": 44144581, "link": "https://stackoverflow.com/questions/44144581/ruby-uninitialized-class-variable-in-instance-methods", "title": "Ruby - uninitialized class variable in instance methods", "body": "<p>I'm working on RoR course and I receive an error in irb console:\n\"NameError: uninitialized class variable @@instances in InstanceCounter::InstanceMethods\"</p>\n\n<p>What I need to change in my modules.rb?</p>\n\n<p>Console:</p>\n\n<pre><code>Evgenys-MacBook-Pro-2:lesson_05 admin$ irb\n2.3.1 :001 &gt; load 'modules.rb'\n =&gt; true \n2.3.1 :002 &gt; load 'car.rb'\n =&gt; true \n2.3.1 :003 &gt; car=Car.new\ninitialize\nNameError: uninitialized class variable @@instances in InstanceCounter::InstanceMethods\nDid you mean?  instance_methods\nfrom modules.rb:35:in `initialize'\nfrom (irb):3:in `new'\nfrom (irb):3\nfrom /Users/aku/.rvm/rubies/ruby-2.3.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>modules.rb:</p>\n\n<pre><code>module InstanceCounter\n  module ClassMethods\n\n    @@instances = 0\n\n    def instances\n      puts \"@@instances\"\n      @@instances\n    end\n\n  end\n\n  module InstanceMethods\n\n    def initialize\n      puts \"initialize\"\n      register_instance\n      super\n    end\n\n    protected\n\n    def register_instance\n      @@instances += 1\n      puts \"@@instances += 1\"\n    end\n\n  end\n\n  def self.included(base)\n    base.extend ClassMethods\n    base.send :prepend, InstanceMethods\n  end\nend\n</code></pre>\n\n<p>car.rb:</p>\n\n<pre><code>class Car\n  include InstanceCounter\n\n  def initialize\n    puts \"initialize2\"\n  end  \nend\n\nclass PassengerCar &lt; Car\nend\n\nclass CargoCar &lt; Car\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "thread-safety", "middleware"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495571289, "post_id": 44144303, "comment_id": 75306523, "body": "<code>Rack::Lock</code>(not <code>Rake::Lock</code>) is disabled in development because it enables class caching."}, {"owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495571636, "post_id": 44144303, "comment_id": 75306704, "body": "Corrected, and I run <code>RAILS_ENV=production rake middleware</code> in the prduction server and the output is the same."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495572016, "post_id": 44144303, "comment_id": 75306873, "body": "<a href=\"https://github.com/rails/rails/pull/17102\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/17102</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1495572073, "post_id": 44144303, "comment_id": 75306919, "body": "It seems that <code>Rack::Lock</code> has not been removed from Rails."}], "owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495574917, "creation_date": 1495570797, "last_edit_date": 1495574917, "question_id": 44144303, "link": "https://stackoverflow.com/questions/44144303/racklock-does-not-appear-as-a-middleware", "title": "Rack::Lock does not appear as a middleware", "body": "<p>I have been read about threadsafe and multithread concepts on Rails, so I knew the middleware <code>Rack::Lock</code> and the command <code>rake middleware</code>. But when I tried to run it in my app, this middleware does not appear in the list.</p>\n\n<p>What does this mean? Why does <code>Rack::Lock</code> not appear? How does Rails manage to be threadsafe if this middleware doesn't appear?.</p>\n\n<p>The command output of <code>rake middleware</code>:</p>\n\n<pre><code>use Rack::Sendfile\nuse ActionDispatch::Static\nuse ActionDispatch::Executor\nuse Rack::Runtime\nuse Rack::MethodOverride\nuse ActionDispatch::RequestId\nuse Rails::Rack::Logger\nuse ActionDispatch::ShowExceptions\nuse WebConsole::Middleware\nuse ActionDispatch::DebugExceptions\nuse ActionDispatch::RemoteIp\nuse ActionDispatch::Reloader\nuse ActionDispatch::Callbacks\nuse ActiveRecord::Migration::CheckPending\nuse ActionDispatch::Cookies\nuse ActionDispatch::Session::CookieStore\nuse ActionDispatch::Flash\nuse Rack::Head\nuse Rack::ConditionalGet\nuse Rack::ETag\nuse Warden::Manager\nuse OmniAuth::Strategies::Twitter\nuse OmniAuth::Strategies::Facebook\nrun Myapp::Application.routes\n</code></pre>\n\n<p>I am using: </p>\n\n<p>Rails 5.1 and Ruby 2.3.1</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I have found on Rails 5 actually <code>Rack::Lock</code> is not present, so, how does Rails 5 manage <code>threadsafe</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "delayed-job", "rails-activejob"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495574307, "post_id": 44143734, "comment_id": 75308050, "body": "What is your question? Are you asking <i>why is it working? I don&#39;t think this is supposed to be working, but it is</i>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1495574443, "post_id": 44143734, "comment_id": 75308133, "body": "...In which case, presumably because you&#39;re running a background <code>delayed_job</code> task. Have a look: <code>ps aux | grep delayed_job</code>"}], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495568692, "creation_date": 1495568692, "question_id": 44143734, "link": "https://stackoverflow.com/questions/44143734/active-recrod-delayed-job-is-being-ignored", "title": "active_recrod_delayed_job is being ignored", "body": "<p>i have used `active_record_delayed_job' before without problem. </p>\n\n<p>i added to Gemfile </p>\n\n<p><code>gem 'delayed_job_active_record'</code> \n<code>rails g delayed_job:active_record</code>\n<code>rake db:migrate</code></p>\n\n<p><code>$ rake jobs:work</code> </p>\n\n<blockquote>\n  <p>Starting job worker</p>\n</blockquote>\n\n<pre><code>class CreateTopicJob &lt; ActiveJob::Base\n  queue_as :default\n\n  def perform(object)\n    #stuff here\n  end\nend\n\nphoto.rb\n\nafter_save :create_topics \n\ndef create_topics\n  CreateTopicJob.perform_later(self)\nend\n</code></pre>\n\n<p>all of the topics get created, but nothing is happening inside of </p>\n\n<p><code>$ rake jobs:work</code> </p>\n\n<blockquote>\n  <p>Starting job worker</p>\n</blockquote>\n\n<p>and even if i close that terminal all the topics are still created. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 3301, "user_id": 3183717, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/521483588/picture?type=large", "display_name": "user3183717", "link": "https://stackoverflow.com/users/3183717/user3183717"}, "edited": false, "score": 1, "creation_date": 1495719709, "post_id": 44144175, "comment_id": 75378072, "body": "Fantastic, this was 100% the answer. Thank you!"}, {"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "reply_to_user": {"reputation": 3301, "user_id": 3183717, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/521483588/picture?type=large", "display_name": "user3183717", "link": "https://stackoverflow.com/users/3183717/user3183717"}, "edited": false, "score": 0, "creation_date": 1495729689, "post_id": 44144175, "comment_id": 75384645, "body": "Glad I could help :)"}], "tags": [], "owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "is_accepted": true, "score": 2, "last_activity_date": 1495570325, "creation_date": 1495570325, "answer_id": 44144175, "question_id": 44143674, "link": "https://stackoverflow.com/questions/44143674/rails-4-devise-4-keep-user-on-current-page-after-updating-profile/44144175#44144175", "title": "Rails 4 &amp; Devise 4: Keep user on current page after updating profile", "body": "<p>If you already have a <code>UsersController</code> you should set something up comparable to this:</p>\n\n<pre><code>Class UsersController &lt; ApplicationController\n  def update\n    @user = User.find(params[:id])\n    if @user.update(user_params)\n      redirect_to your_path_here\n    end\n  end\nend\n</code></pre>\n\n<p>I am not sure exactly what your <code>UsersController</code> looks like, but that should give you an idea. After a user is updated, use <code>redirect_to</code> with your path you would like the User sent to. You may also use <code>redirect_to :back</code> if you are looking to redirect back to the current page you are on. </p>\n\n<p>Please see this existing <a href=\"https://stackoverflow.com/questions/8952487/how-do-i-redirect-back-to-a-page-im-currently-on\">SO post</a>.</p>\n"}], "owner": {"reputation": 3301, "user_id": 3183717, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/521483588/picture?type=large", "display_name": "user3183717", "link": "https://stackoverflow.com/users/3183717/user3183717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 44144175, "answer_count": 1, "score": 0, "last_activity_date": 1495570325, "creation_date": 1495568392, "question_id": 44143674, "link": "https://stackoverflow.com/questions/44143674/rails-4-devise-4-keep-user-on-current-page-after-updating-profile", "title": "Rails 4 &amp; Devise 4: Keep user on current page after updating profile", "body": "<p>I have a User model, and I am hoping to have different pages to edit their info so that I don't have everything on <code>edit.html.erb</code></p>\n\n<p>So far I have created views for <code>page_content.html.erb</code> and <code>donation_options.html.erb</code> which have my forms on them. Both work as intended and successfully update my User, but after submitting the form I am redirected the User root, which is <code>show.html.erb</code>. I would like to set it up so that the user stays on the current page after updating their profile. I am not sure if I need to edit my <code>UsersController</code>, or create a new controller, or take a different approach.</p>\n\n<p>Here's an example of my form:</p>\n\n<pre><code>&lt;%= form_for @user do |f| %&gt;\n              &lt;!--Some inputs--&gt;\n\n              &lt;div class=\"actions\"&gt;\n                &lt;%= f.submit 'Update', :class =&gt; \"btn btn-primary\"  %&gt;\n                &lt;!--After submitting, I'm taken to /users/:id/. I'd like to stay on /users/:id/current_view--&gt;\n              &lt;/div&gt;\n          &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "find", "appium", "elements"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4355621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-rBrnRU0zwB0/AAAAAAAAAAI/AAAAAAAAAMA/i1NvkZrPa5U/photo.jpg?sz=128", "display_name": "Jesse Fish", "link": "https://stackoverflow.com/users/4355621/jesse-fish"}, "edited": false, "score": 0, "creation_date": 1495632232, "post_id": 44157411, "comment_id": 75335693, "body": "Thanks! For my case I had to add the caseless comparison to address my casing problem as follows:  button_array.each do |btn|     btn.click if btn.text.casecmp(&quot;#{button_text}&quot;) == 0   end  Otherwise this is perfect for what I need, thanks a ton!"}, {"owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "reply_to_user": {"reputation": 81, "user_id": 4355621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-rBrnRU0zwB0/AAAAAAAAAAI/AAAAAAAAAMA/i1NvkZrPa5U/photo.jpg?sz=128", "display_name": "Jesse Fish", "link": "https://stackoverflow.com/users/4355621/jesse-fish"}, "edited": false, "score": 0, "creation_date": 1495711229, "post_id": 44157411, "comment_id": 75372509, "body": "Glad this could help, another option if u don&#39;t bother about case if you can convert both into lower or uppercase and compare, here is how you do that... btn.text.downcase == button_text.downcase  Happy to help!!"}], "tags": [], "owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "is_accepted": true, "score": 1, "last_activity_date": 1495626116, "creation_date": 1495626116, "answer_id": 44157411, "question_id": 44143531, "link": "https://stackoverflow.com/questions/44143531/ruby-appium-how-to-select-element-from-find-elements-array-via-text-attribute/44157411#44157411", "title": "Ruby/Appium: How to select element from find_elements array via text attribute", "body": "<p>The index which you have taken will have the web-element instead of an Integer which you are expecting. Try the following :</p>\n\n<pre><code>Then (/^I press the \"([^\"]*)\" button$/) do |button_text|\n  button_array = find_elements(xpath: \"//android.widget.Button\")\n  button_array.each do |btn|\n     btn.click if btn.text == button_text\n  end\nend\n</code></pre>\n\n<p>Let me know in the comments if you face further issue.</p>\n\n<p>Hope it helps!!</p>\n"}], "owner": {"reputation": 81, "user_id": 4355621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-rBrnRU0zwB0/AAAAAAAAAAI/AAAAAAAAAMA/i1NvkZrPa5U/photo.jpg?sz=128", "display_name": "Jesse Fish", "link": "https://stackoverflow.com/users/4355621/jesse-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 0, "accepted_answer_id": 44157411, "answer_count": 1, "score": 0, "last_activity_date": 1495626116, "creation_date": 1495567876, "last_edit_date": 1495571932, "question_id": 44143531, "link": "https://stackoverflow.com/questions/44143531/ruby-appium-how-to-select-element-from-find-elements-array-via-text-attribute", "title": "Ruby/Appium: How to select element from find_elements array via text attribute", "body": "<p>So I use a general \"I press \"*\" button\" Gherkin statement for pressing buttons. My problem is the text is not standardized throughout the app.</p>\n\n<p>What I want to do is use find_elements to form an array of all button elements, take the text from my Gherkin input (for example: 'I press the \"Yes\" button'), utilize the .casecmp method to ignore the capitalization of my button text from the find_elements array and compare the text attributes and my Gherkin input.</p>\n\n<p>Here's my attempt at the code:</p>\n\n<pre><code>Then (/^I press the \"([^\"]*)\" button$/) do |button_text|\n#assign gherkin input to variable\n@button_text = button_text\n#create find_elements array for all Buttons\nbutton_array = find_elements(xpath: \"//android.widget.Button\")\n#create for loop that will compare each element's text with @button_text\n  button_array.each do |index|\n   #Attempting to reference text attribute of array at index and compare @button_text with case insensitive comparison\n\n   matching_button = button_array[index].text.casecmp(\"#{@button_text}\")\n     if matching_button = 0 #this means it's a match\n      button_array[index].click()\n     else\n     end \n  end\nend\n</code></pre>\n\n<p>At the moment I get the following errors:</p>\n\n<pre><code>And I press the \"YES\" button                  # features/step_definitions_android/common_steps.rb:107\n      no implicit conversion of Selenium::WebDriver::Element into Integer (TypeError)\n      ./features/step_definitions_android/common_steps.rb:113:in `[]'\n      ./features/step_definitions_android/common_steps.rb:113:in `block (2 levels) in &lt;top (required)&gt;'\n      ./features/step_definitions_android/common_steps.rb:111:in `each'\n      ./features/step_definitions_android/common_steps.rb:111:in `/^I press the \"([^\"]*)\" button$/'\n      features/FAB.feature:18:in `And I press the \"YES\" button'\n</code></pre>\n\n<p>I'm not totally sure what these errors mean in my case but I'm continuing my research. If anyone can share insight into what I'm doing incorrectly I'd greatly appreciate it.</p>\n\n<p>Also is there any documentation as to how appium stores elements in that array? Can I even compare the text attribute of the element to a variable or other value? Thanks a ton for any help you can give me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 854, "user_id": 6205893, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/760180597445489/picture?type=large", "display_name": "Luan Gon&#231;alves Barbosa", "link": "https://stackoverflow.com/users/6205893/luan-gon%c3%a7alves-barbosa"}, "edited": false, "score": 0, "creation_date": 1495571845, "post_id": 44143059, "comment_id": 75306794, "body": "Let me see if I have understood: What you want to do is to get a backup from your current sqlite from a rails application, and then latter be able to restore, reuse or rebuild the database from that file? is that it?"}, {"owner": {"reputation": 3970, "user_id": 347365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/925478df6c6a384eb7a8ef7da288f3f2?s=128&d=identicon&r=PG", "display_name": "Thanasis Petsas", "link": "https://stackoverflow.com/users/347365/thanasis-petsas"}, "reply_to_user": {"reputation": 854, "user_id": 6205893, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/760180597445489/picture?type=large", "display_name": "Luan Gon&#231;alves Barbosa", "link": "https://stackoverflow.com/users/6205893/luan-gon%c3%a7alves-barbosa"}, "edited": false, "score": 0, "creation_date": 1495573272, "post_id": 44143059, "comment_id": 75307516, "body": "Actually, I want to replicate those exact steps described here: <a href=\"https://techblog.dorogin.com/sqliteexception-database-disk-image-is-malformed-77e59d547c50\" rel=\"nofollow noreferrer\">techblog.dorogin.com/&hellip;</a> to overcome the &quot;database disk image is malformed&quot; error. I am able to do it using the command line util (sqlite3) using the <code>.dump</code> and <code>.read</code>, but I wan to be able to do those steps entirely in ruby without relying on the sqlite3 command line tool, i.e., without calling sqlite3 tool through system, etc."}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 2, "creation_date": 1495574152, "post_id": 44143059, "comment_id": 75307960, "body": "The &quot;dot&quot; commands are part of the sqlite3 shell utility, not of SQLite3 (or the sqlite3 gem) itself, so if you really want to do that using ruby, then you have to implement what they do using ruby.  (But why not just use the shell?)"}, {"owner": {"reputation": 3970, "user_id": 347365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/925478df6c6a384eb7a8ef7da288f3f2?s=128&d=identicon&r=PG", "display_name": "Thanasis Petsas", "link": "https://stackoverflow.com/users/347365/thanasis-petsas"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1495637215, "post_id": 44143059, "comment_id": 75339918, "body": "Thanks @varro for the details. I didn&#39;t know about that. I want this functionality to be part of the program itself and not to rely on any other software that happens to be installed on the host machine. I will have a look to the source code of these commands if available and try to embed in my program."}], "owner": {"reputation": 3970, "user_id": 347365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/925478df6c6a384eb7a8ef7da288f3f2?s=128&d=identicon&r=PG", "display_name": "Thanasis Petsas", "link": "https://stackoverflow.com/users/347365/thanasis-petsas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495566129, "creation_date": 1495566129, "question_id": 44143059, "link": "https://stackoverflow.com/questions/44143059/what-are-the-equivalents-of-sqlite3-options-dump-and-read-in-sqlite3-ruby-gem", "title": "What are the equivalents of sqlite3 options .dump and .read in sqlite3-ruby gem?", "body": "<p>What I want is the ruby way to perform the following actions:</p>\n\n<pre><code># dump database in SQL text format\necho .dump | sqlite3 mydb.sqlite3 &gt; mydump.sql\n\n# execute sql queries found on file mydump.sql to rebuild database\nsqlite&gt; .read mydump.sql\n</code></pre>\n\n<p>I want to perform the above actions through the SQLite3 API assuming that only the sqlite3-ruby gem and lib is available and not the command line util.</p>\n\n<p>I read through the documentation here: <a href=\"http://www.rubydoc.info/github/luislavena/sqlite3-ruby/SQLite3/Database\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/luislavena/sqlite3-ruby/SQLite3/Database</a>\nbut I can't find the proper way to do it. Has anyone a clue on how to do it?</p>\n"}, {"tags": ["ruby", "web-scraping", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8049655, "user_type": "registered", "profile_image": "https://graph.facebook.com/1522012851173169/picture?type=large", "display_name": "Ben Gitter", "link": "https://stackoverflow.com/users/8049655/ben-gitter"}, "edited": false, "score": 0, "creation_date": 1495613733, "post_id": 44145795, "comment_id": 75322302, "body": "If I use the selenium webdriver to authenticate can I use nokogiri to send further requests to the server and parse them while maintaining my login session? Trying to use a multithreaded approach to scraping."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 31, "user_id": 8049655, "user_type": "registered", "profile_image": "https://graph.facebook.com/1522012851173169/picture?type=large", "display_name": "Ben Gitter", "link": "https://stackoverflow.com/users/8049655/ben-gitter"}, "edited": false, "score": 0, "creation_date": 1495643518, "post_id": 44145795, "comment_id": 75344485, "body": "@BenGitter although it can be run without GUI using the <code>headless</code> gem, and also wrapped into a Thread so as to not block the main thread, according to <a href=\"https://stackoverflow.com/questions/30808606/can-selenium-use-multi-threading-in-one-browser\">here</a> the driver is not thread safe, so your best bet would be to launch <i>multiple drivers</i> to run parallel tests. Haven&#39;t used it myself, but <a href=\"http://www.seleniumhq.org/docs/07_selenium_grid.jsp\" rel=\"nofollow noreferrer\">Selenium Grid</a> seems a promising tool."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1495577137, "creation_date": 1495577137, "answer_id": 44145795, "question_id": 44142898, "link": "https://stackoverflow.com/questions/44142898/locating-a-form-with-mechanize-in-ruby/44145795#44145795", "title": "Locating a form with Mechanize in ruby", "body": "<p>This page uses Javascript to render the form, which mechanize doesn't run. If you want to see what a page looks like without Javascript, you can open it with the lynx browser.</p>\n\n<p>Selenium can be used instead. After installing a driver such as for chrome (see <a href=\"https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver\" rel=\"nofollow noreferrer\">here</a>), the API is pretty similar:</p>\n\n<pre><code>driver = Selenium::WebDriver.for :chrome\ndriver.navigate.to \"https://www.instagram.com/accounts/login/\"\nfirst_form = driver.find_elements(css: \"form\")[0]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8049655, "user_type": "registered", "profile_image": "https://graph.facebook.com/1522012851173169/picture?type=large", "display_name": "Ben Gitter", "link": "https://stackoverflow.com/users/8049655/ben-gitter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495577137, "creation_date": 1495565635, "question_id": 44142898, "link": "https://stackoverflow.com/questions/44142898/locating-a-form-with-mechanize-in-ruby", "title": "Locating a form with Mechanize in ruby", "body": "<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'mechanize'\n\nagent = Mechanize.new\n\npage = agent.get('https://www.instagram.com/accounts/login/')\nforms = page.forms.first\npp form\n</code></pre>\n\n<p>I am trying to locate the form to login to the instagram website. I cannot seem to get mechanize to locate the form even though it should be the only one on the page. When I pretty print the page I get back blank output.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495565326, "post_id": 44142695, "comment_id": 75303505, "body": "<code>sudo chown -R $USER &#47;Library&#47;Ruby&#47;Gems&#47;</code> did not work?"}, {"owner": {"reputation": 4684, "user_id": 1315857, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0RojV.jpg?s=128&g=1", "display_name": "Antonio Pavicevac-Ortiz", "link": "https://stackoverflow.com/users/1315857/antonio-pavicevac-ortiz"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495565463, "post_id": 44142695, "comment_id": 75303568, "body": "@whodini9 I thought you weren&#39;t supposed to use <code>sudo</code> ?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495565841, "post_id": 44142695, "comment_id": 75303790, "body": "I think the general recommendation is to not use a sudo with the <code>gem</code> command itself, because this installs the gem <b>as root</b>. Either way the shell that you are in does not have write access to the gems folder... <code>chown</code> will fix that."}, {"owner": {"reputation": 4684, "user_id": 1315857, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0RojV.jpg?s=128&g=1", "display_name": "Antonio Pavicevac-Ortiz", "link": "https://stackoverflow.com/users/1315857/antonio-pavicevac-ortiz"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495569372, "post_id": 44142695, "comment_id": 75305570, "body": "@whodini9 Thanks, but now I get what I updated above..."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495570687, "post_id": 44142695, "comment_id": 75306195, "body": "I would try the same chown command for <code>&#47;Library&#47;Ruby&#47;Site</code> I don&#39;t have a good answer for why this is happening, are you possibly using a ruby manager like rbenv / rvm?"}, {"owner": {"reputation": 4684, "user_id": 1315857, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0RojV.jpg?s=128&g=1", "display_name": "Antonio Pavicevac-Ortiz", "link": "https://stackoverflow.com/users/1315857/antonio-pavicevac-ortiz"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1495588675, "post_id": 44142695, "comment_id": 75312261, "body": "That worked, thanks my friend! Sorry for the late reply, thanks again!"}], "owner": {"reputation": 4684, "user_id": 1315857, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0RojV.jpg?s=128&g=1", "display_name": "Antonio Pavicevac-Ortiz", "link": "https://stackoverflow.com/users/1315857/antonio-pavicevac-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495569476, "creation_date": 1495564970, "last_edit_date": 1495569476, "question_id": 44142695, "link": "https://stackoverflow.com/questions/44142695/cant-use-gem-update-system-with-rbenv", "title": "Can&#39;t use &quot;gem update --system&quot; with rbenv", "body": "<p>I am trying to run:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>But I get back.</p>\n\n<pre><code>Updating rubygems-update\nFetching: rubygems-update-2.6.12.gem (100%)\nERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.\n</code></pre>\n\n<p>I am using <code>.zhrc</code> for my shell.</p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/14607193/installing-gem-or-updating-rubygems-fails-with-permissions-error\">post</a> seems to relate but I added what was prescribed to my .zhrc file and it didn't work.</p>\n\n<p>Any help would be appreciated!</p>\n\n<p><strong>UPDATE MAY 23rd</strong></p>\n\n<p>I tried:</p>\n\n<pre><code>sudo chown -R $USER /Library/Ruby/Gems/2.0.0 \n</code></pre>\n\n<p>But now when running:</p>\n\n<pre><code>gem update --system\n\nUpdating rubygems-update\nSuccessfully installed rubygems-update-2.6.12\nParsing documentation for rubygems-update-2.6.12\nInstalling RubyGems 2.6.12\nERROR:  While executing gem ... (Errno::EACCES)\n    Permission denied - /Library/Ruby/Site/2.0.0/rubygems.rb\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "rubygems", "babeljs"], "answers": [{"comments": [{"owner": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "edited": false, "score": 0, "creation_date": 1495574382, "post_id": 44141678, "comment_id": 75308094, "body": "Thanks for the asset pipeline explanation, that gives me some perspective. The React-Rails gem is using Babel-Transpiler but I don&#39;t understand where to configure it (initializers?). I&#39;d rather config the transpiler to work on my existing files than the other way around. Sorry for my lack of info, I&#39;m just used to JS and using build tools like Webpack/Browserify/Gulp/Grunt to run these tasks explicitly."}, {"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "reply_to_user": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "edited": false, "score": 0, "creation_date": 1495574936, "post_id": 44141678, "comment_id": 75308354, "body": "Rails is all about convention over configuration. Asset pipeline convention runs off of file suffix. You can customize sprockets to tweak how this is handled, but may be more work than it&#39;s worth: check out <a href=\"https://github.com/rails/sprockets/blob/master/guides/extending_sprockets.md\" rel=\"nofollow noreferrer\">github.com/rails/sprockets/blob/master/guides/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 4, "last_activity_date": 1536765416, "last_edit_date": 1536765416, "creation_date": 1495561491, "answer_id": 44141678, "question_id": 44141418, "link": "https://stackoverflow.com/questions/44141418/babel-transpiler-with-ruby-on-rails-getting-started/44141678#44141678", "title": "Babel-Transpiler with Ruby on Rails: Getting Started", "body": "<p>Rails uses a feature called the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">asset pipeline</a> to compile, concatenate and transform assets. Assets are generally style sheets, JavaScript files, and media files (mainly images).  The asset pipeline can perform different actions based on file type, which is the file extension of the filename.</p>\n\n<p>The React-Rails gem integrates with the asset pipeline so that files ending in <code>.jsx</code> will go through Babel  preprocessing (by default).</p>\n\n<p>Try putting your ES6 code into a file with a <code>.jsx</code> suffix, <code>app/assets/javascripts/myjavascript.jsx</code>. This should get them to run through Babel which will transform the ES6 code.</p>\n"}], "owner": {"reputation": 2109, "user_id": 5508633, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10204865704992930/picture?type=large", "display_name": "Mike Fleming", "link": "https://stackoverflow.com/users/5508633/mike-fleming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 0, "closed_date": 1495573981, "answer_count": 1, "score": 0, "last_activity_date": 1536765416, "creation_date": 1495560597, "question_id": 44141418, "link": "https://stackoverflow.com/questions/44141418/babel-transpiler-with-ruby-on-rails-getting-started", "closed_reason": "Needs more focus", "title": "Babel-Transpiler with Ruby on Rails: Getting Started", "body": "<p>I'm new to Rails but am familiar with JavaScript and ES6. I already have ES6 transpiling happening in my React-Rails gem so I can write normally in React, but any other js file I am limited to ES5. </p>\n\n<p>I have to make a config file to tell it to get to work on ALL js files, but I am at a loss as to how to do that. </p>\n\n<p>Any help, from a higher level explanation of what is going on to a more step by step approach, would be appreciated. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1495559419, "post_id": 44141028, "comment_id": 75300327, "body": "you&#39;re not calling <code>return</code> explicitly from a block, so the behavior should be the same"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495559650, "post_id": 44141028, "comment_id": 75300419, "body": "It seems to work for me, I tried calling as <code>dfs_rec(OpenStruct.new(position: 1), 1)</code> and it returned the <code>OpenStruct</code> instance."}, {"owner": {"reputation": 11, "user_id": 6077724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd6303b9e3691f615268cba0652e953?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/6077724/robert"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495559986, "post_id": 44141028, "comment_id": 75300600, "body": "@kris it works if the first object matches, but not after."}, {"owner": {"reputation": 11, "user_id": 6077724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd6303b9e3691f615268cba0652e953?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/6077724/robert"}, "edited": false, "score": 0, "creation_date": 1495560948, "post_id": 44141028, "comment_id": 75301106, "body": "I see now that the iterator treats the recursive call as though it were any other method. I&#39;d need to collect the knights into some array at global scope to do what I want."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6077724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd6303b9e3691f615268cba0652e953?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/6077724/robert"}, "edited": false, "score": 0, "creation_date": 1495560685, "post_id": 44141151, "comment_id": 75300960, "body": "Yeah, I&#39;ll probably just do something like this. Thanks!"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 11, "user_id": 6077724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd6303b9e3691f615268cba0652e953?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/6077724/robert"}, "edited": false, "score": 0, "creation_date": 1495570590, "post_id": 44141151, "comment_id": 75306129, "body": "@robert Great \u2014 if this answered your question go ahead and accept it with the checkmark on the left so other users know you&#39;re all set."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1495559682, "creation_date": 1495559682, "answer_id": 44141151, "question_id": 44141028, "link": "https://stackoverflow.com/questions/44141028/how-to-recursively-call-a-block-and-return-a-value/44141151#44141151", "title": "How to recursively call a block and return a value", "body": "<p>Why not refactor to something more like this? </p>\n\n<pre><code>class Knight\n  def at_position?(target_position)\n    position == target_position\n  end\n\n  def can_move_to?(target_position)\n    moves.include?(target_position)\n  end\nend\n\n# to find a knight in an array of knights that can move to `position`\nknights.select { |knight| knight.can_move_to?(position) || knight.at_position?(position) } #=&gt; [ &lt;Knight&gt;, &lt;Knight&gt; ]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6077724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd6303b9e3691f615268cba0652e953?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/6077724/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495562939, "creation_date": 1495559163, "last_edit_date": 1495562939, "question_id": 44141028, "link": "https://stackoverflow.com/questions/44141028/how-to-recursively-call-a-block-and-return-a-value", "title": "How to recursively call a block and return a value", "body": "<p><code>knight.moves</code> is an array of instances of knights at other positions.</p>\n\n<p>If I print out <code>knight.position</code> and <code>target</code> together, there are times where they're equal, but the method doesn't return anything.</p>\n\n<p>I think it has something to do with how blocks handle returns, but I haven't figured it out.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>def dfs_rec knight, target  \n  if knight\n    if knight.position == target\n      return knight\n    end\n\n    moves = knight.moves.size - 1\n    moves.times do |num|\n      dfs_rec knight.moves[num], target\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 2, "creation_date": 1495558514, "post_id": 44140796, "comment_id": 75299799, "body": "These two methods, even though they do very similar things, serve <i>very</i> different purposes.  What were you hoping to gain by unifying them?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495563150, "post_id": 44140796, "comment_id": 75302363, "body": "Don&#39;t write code that returns a variety of types; If you can figure out the logic it&#39;ll be more difficult to maintain, plus any code calling it will have to test for any of those possible types and then react accordingly, creating an additional problem area to maintain."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1495561918, "post_id": 44140891, "comment_id": 75301675, "body": "clean solution although I would go with <code>pattern.source if pattern</code>"}], "tags": [], "owner": {"reputation": 2570, "user_id": 577315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97c93ef06b6379ed0f6602f4b8385fb9?s=128&d=identicon&r=PG", "display_name": "Chris Hasi\u0144ski", "link": "https://stackoverflow.com/users/577315/chris-hasi%c5%84ski"}, "is_accepted": true, "score": 5, "last_activity_date": 1552407135, "last_edit_date": 1552407135, "creation_date": 1495558669, "answer_id": 44140891, "question_id": 44140796, "link": "https://stackoverflow.com/questions/44140796/how-to-refactor-two-loops-to-use-one-method-in-ruby/44140891#44140891", "title": "How to refactor two loops to use one method in Ruby", "body": "<p>How about:</p>\n\n<pre><code>def valid?\n  !pattern_matched.nil?\nend\n\ndef pattern_matched\n  patterns.detect { |pattern| text.match(pattern) }&amp;.source\nend\n</code></pre>\n\n<p>I also replaced <code>each</code> loop as for finding first matching element <code>detect</code> seems like a better choice.</p>\n"}], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 44140891, "answer_count": 1, "score": 1, "last_activity_date": 1552407135, "creation_date": 1495558394, "last_edit_date": 1495563052, "question_id": 44140796, "link": "https://stackoverflow.com/questions/44140796/how-to-refactor-two-loops-to-use-one-method-in-ruby", "title": "How to refactor two loops to use one method in Ruby", "body": "<p>I have the following code, and would like the loop to only exist once, but my return statements are different for each:</p>\n\n<pre><code>def valid?\n  patterns.each do |pattern|\n    match_data = text.match(pattern)\n    if match_data\n      return true\n    end\n  end\n  false\nend\n\ndef pattern_matched\n  patterns.each do |pattern|\n    match_data = text.match(pattern)\n    if match_data\n      return pattern.source\n    end\n  end\n  nil\nend\n</code></pre>\n\n<p>I don't want to store anything in state as I want these functions to be pure and independent of each other.</p>\n\n<p>How can I write a helper function that runs the loop but returns either true/false OR pattern/nil?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495558456, "post_id": 44140760, "comment_id": 75299764, "body": "Can you show the example output of 7z?"}, {"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "reply_to_user": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495558731, "post_id": 44140760, "comment_id": 75299929, "body": "Added the output"}, {"owner": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495558979, "post_id": 44140760, "comment_id": 75300082, "body": "And what is the output that you want from parsing that example of the 7z output?"}, {"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "reply_to_user": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "edited": false, "score": 0, "creation_date": 1495559291, "post_id": 44140760, "comment_id": 75300272, "body": "Looking for the line that matches mkv, avi, or srt. I added that as well. I initially tried using grep with my system call but it didn&#39;t like the escapes."}], "answers": [{"comments": [{"owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "edited": false, "score": 0, "creation_date": 1495560005, "post_id": 44141218, "comment_id": 75300611, "body": "What about avi and srt files?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1495564289, "post_id": 44141218, "comment_id": 75302949, "body": "<code>^.*</code> wastes CPU. Looking for just the dividing <code>&#39;.&#39;</code> and the extension is sufficient."}], "tags": [], "owner": {"reputation": 425, "user_id": 3907426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR3cD.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/3907426/adrian"}, "is_accepted": true, "score": 1, "last_activity_date": 1495560305, "last_edit_date": 1495560305, "creation_date": 1495559955, "answer_id": 44141218, "question_id": 44140760, "link": "https://stackoverflow.com/questions/44140760/how-to-search-multiple-line-strings/44141218#44141218", "title": "How to search multiple-line strings", "body": "<p>You can use this:</p>\n\n<pre><code>puts rarlist.scan(/^.*\\.mkv/)\n</code></pre>\n\n<p>The regex will match from the beginning of lines.</p>\n\n<p>To match <code>.mkv</code>, <code>.avi</code>, or <code>.srt</code>, you can use:</p>\n\n<pre><code>rarlist.scan(/(^.*\\.(mkv|avi|srt))/) {|a,_| puts a}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1495565461, "last_edit_date": 1495565461, "creation_date": 1495563847, "answer_id": 44142359, "question_id": 44140760, "link": "https://stackoverflow.com/questions/44140760/how-to-search-multiple-line-strings/44142359#44142359", "title": "How to search multiple-line strings", "body": "<p>The solution is much simpler than what you're making it.</p>\n\n<p>Starting with:</p>\n\n<pre><code>TARGET_EXTENSIONS = %w[mkv avi srt]\nTARGET_EXTENSION_RE = /\\.(?:#{ Regexp.union(TARGET_EXTENSIONS).source})/\n# =&gt; /\\.(?:mkv|avi|srt)/\n\noutput = &lt;&lt;EOT\n7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21\np7zip Version 16.02 (locale=utf8,Utf16=on,HugeFiles=on,64 bits,8 CPUs x64)\n\nScanning the drive for archives:\n1 file, 15000000 bytes (15 MiB)\n\nListing archive: Gotham.S03E19.HDTV.x264-KILLERS/gotham.s03e19.hdtv.x264-killers.rar\n\n--\nPath = Gotham.S03E19.HDTV.x264-KILLERS/gotham.s03e19.hdtv.x264-killers.rar\nType = Rar\nPhysical Size = 15000000\nTotal Physical Size = 285988640\nCharacteristics = Volume FirstVolume VolCRC\nSolid = -\nBlocks = 1\nMultivolume = +\nVolume Index = 0\nVolumes = 20\n\n    Date      Time    Attr         Size   Compressed  Name\n------------------- ----- ------------ ------------  ------------------------\n2017-05-23 02:30:52 .....    285986500    285986500  Gotham.S03E19.HDTV.x264-KILLERS.mkv\n------------------- ----- ------------ ------------  ------------------------\n2017-05-23 02:30:52          285986500    285986500  1 files\n\n------------------- ----- ------------ ------------  ------------------------\n2017-05-23 02:30:52          285986500    285986500  1 files\n\nArchives: 1\nVolumes: 20\nTotal archives size: 285988640\nEOT\n</code></pre>\n\n<p>All it takes is to iterate over the lines in the output and <code>puts</code> the matches:</p>\n\n<pre><code>puts output.lines.grep(TARGET_EXTENSION_RE)\n</code></pre>\n\n<p>Which would output:</p>\n\n<pre><code>2017-05-23 02:30:52 .....    285986500    285986500  Gotham.S03E19.HDTV.x264-KILLERS.mkv\n</code></pre>\n\n<p>The above is a basic solution, but there are things that could be done to speed up the code, depending on the output being received:</p>\n\n<pre><code>TARGET_EXTENSIONS = %w[mkv avi srt].map { |e| '.' &lt;&lt; e } # =&gt; [\".mkv\", \".avi\", \".srt\"]\nputs output.split(/\\r?\\n/).select { |l| l.end_with?(*TARGET_EXTENSIONS) }\n</code></pre>\n\n<p>I'd have to run benchmarks, but that should be faster, since regular expressions can drastically slow code if not written correctly.</p>\n\n<p>You could try:</p>\n\n<pre><code>TARGET_EXTENSION_RE = /\\.(?:#{ Regexp.union(TARGET_EXTENSIONS).source})$/\n# =&gt; /\\.(?:mkv|avi|srt)$/\nputs output.split(/\\r?\\n/).grep(TARGET_EXTENSION_RE)\n</code></pre>\n\n<p>as anchored patterns are much faster than unanchored.</p>\n\n<p>If the 7z archives will generate huge listings (in the MB range) it'd be better to iterate over the input to avoid scalability issues. In the above example <code>output.lines</code> would be akin to slurping the output. See \"<a href=\"https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-not-a-good-practice/25189286\">Why is &quot;slurping&quot; a file not a good practice?</a>\" for more information.</p>\n"}], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 44141218, "answer_count": 2, "score": 0, "last_activity_date": 1495565461, "creation_date": 1495558264, "last_edit_date": 1495563329, "question_id": 44140760, "link": "https://stackoverflow.com/questions/44140760/how-to-search-multiple-line-strings", "title": "How to search multiple-line strings", "body": "<p>I'm trying to extract filenames from rar packages in a directory.  I'm using 7z which returns a multi-line string, and would like to search the output for \"mkv\", \"avi\", or \"srt\" files.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>ROOT_DIR = \"/users/ken/extract\"\n\n# Check each directory for Rar packages\n# Returns an arary of directories with filenames from the rar's\ndef checkdirs()\n    pkgdirs = {}\n    Dir.foreach(ROOT_DIR) do |d|\n        if !Dir.glob(\"#{ROOT_DIR}/#{d}/*.rar\").empty?\n            rarlist = `7z l #{ROOT_DIR}/#{d}/*.rar`\n            puts rarlist  # Returns multilinen output from 7z l\n            puts rarlist.scan('*.mkv').first\n            pkgdirs[d] = 'filename'\n        end\n    end\n    pkgdirs\nend\n</code></pre>\n\n<p>I can get the 7z output but I can't figure out how to search the output for my strings. How can I search the output and return the matching lines?</p>\n\n<p>This is an example of the 7z output:</p>\n\n<pre><code>7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21\np7zip Version 16.02 (locale=utf8,Utf16=on,HugeFiles=on,64 bits,8 CPUs x64)\n\nScanning the drive for archives:\n1 file, 15000000 bytes (15 MiB)\n\nListing archive: Gotham.S03E19.HDTV.x264-KILLERS/gotham.s03e19.hdtv.x264-killers.rar\n\n--\nPath = Gotham.S03E19.HDTV.x264-KILLERS/gotham.s03e19.hdtv.x264-killers.rar\nType = Rar\nPhysical Size = 15000000\nTotal Physical Size = 285988640\nCharacteristics = Volume FirstVolume VolCRC\nSolid = -\nBlocks = 1\nMultivolume = +\nVolume Index = 0\nVolumes = 20\n\n   Date      Time    Attr         Size   Compressed  Name\n------------------- ----- ------------ ------------  ------------------------\n2017-05-23 02:30:52 .....    285986500    285986500  Gotham.S03E19.HDTV.x264-KILLERS.mkv\n------------------- ----- ------------ ------------  ------------------------\n2017-05-23 02:30:52          285986500    285986500  1 files\n\n------------------- ----- ------------ ------------  ------------------------\n2017-05-23 02:30:52          285986500    285986500  1 files\n\nArchives: 1\nVolumes: 20\nTotal archives size: 285988640\n</code></pre>\n\n<p>I expect this output:</p>\n\n<pre><code> 2017-05-23 02:30:52 .....    285986500    285986500  Gotham.S03E19.HDTV.x264-KILLERS.mkv\n</code></pre>\n"}, {"tags": ["java", "ruby-on-rails", "ruby", "rubygems", "stanford-nlp"], "comments": [{"owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "edited": false, "score": 0, "creation_date": 1495555550, "post_id": 44139682, "comment_id": 75298021, "body": "The ClassNotFoundException usually indicates that the class is not on the classpath.  If you have a .java file, you need to compile it to a .class file and ensure that the .class file is on the classpath."}, {"owner": {"reputation": 1, "user_id": 8054263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafced3fc4af7cf935a9d38e46883eb8?s=128&d=identicon&r=PG&f=1", "display_name": "aherriau", "link": "https://stackoverflow.com/users/8054263/aherriau"}, "reply_to_user": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "edited": false, "score": 0, "creation_date": 1495617604, "post_id": 44139682, "comment_id": 75324939, "body": "Thank you for you answer. I tried to compile the .java file with this command line <code>javac -cp stanford-corenlp-3.5.0.jar AnnotationBridge.java</code> but 1 error remains : <code>AnnotationBridge.java:14: error: method get in class ArrayCoreMap cannot be applied to given types;</code> <code>Object object = ((ArrayCoreMap) entity).get(klass);</code> <code>required: Class&lt;? extends Key&lt;VALUE&gt;&gt;</code> <code>found: Class&lt;CoreAnnotation&gt;</code> Do you have an idea?"}], "owner": {"reputation": 1, "user_id": 8054263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafced3fc4af7cf935a9d38e46883eb8?s=128&d=identicon&r=PG&f=1", "display_name": "aherriau", "link": "https://stackoverflow.com/users/8054263/aherriau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495557413, "creation_date": 1495554970, "last_edit_date": 1495557413, "question_id": 44139682, "link": "https://stackoverflow.com/questions/44139682/stanford-core-nlp-gem-java-lang-classnotfoundexception-annotationbridge", "title": "stanford-core-nlp gem / java.lang.ClassNotFoundException: AnnotationBridge", "body": "<p>I want to use the <a href=\"https://github.com/louismullie/stanford-core-nlp\" rel=\"nofollow noreferrer\"><code>stanford-core-nlp</code> gem</a> in a rails application.</p>\n\n<p>So, I followed the README file instructions:</p>\n\n<ul>\n<li><p>I installed the <code>stanford-core-nlp</code> gem and put it in the Gemfile</p></li>\n<li><p>I downloaded and put the contents of Stanford CoreNLP version 3.5.0 in the <code>bin/</code> folder of the gem</p></li>\n<li><p>I downloaded and put the contents of the full Stanford Tagger version 3.5.0 in the <code>bin/taggers/</code> folder of the gem</p></li>\n<li><p>I downloaded and put the <code>bridge.jar</code> file in the <code>bin/</code> folder of the gem</p></li>\n</ul>\n\n<p>But when I want to use the gem and write in a rails controller file:<br>\n<code>pipeline = StanfordCoreNLP.load(:pos)</code></p>\n\n<p>I have this error: </p>\n\n<blockquote>\n  <p>java.lang.ClassNotFoundException: AnnotationBridge</p>\n</blockquote>\n\n<p>But I can see the <code>AnnotationBridge.java</code> file in the <code>bin/</code> folder of the gem...</p>\n\n<p>I don't know how or where I can specify the path...  </p>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-attributes"], "comments": [{"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "edited": false, "score": 1, "creation_date": 1495556077, "post_id": 44139644, "comment_id": 75298365, "body": "seems that the only practical way is <code>prepare = Marshal.load(Marshal.dump(init_value))</code>. I wouldn&#39;t even call this copy. It seems that ruby totally lacks a real &quot;deep copy&quot; function for hashes. If you know a method please propose one!"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495556366, "post_id": 44139644, "comment_id": 75298528, "body": "Marshal is, unfortunately, the way to do a deep copy. Because even <code>dup</code> and then <code>freeze</code> will not stop modification of the values themselves, only assignment to keys."}], "answers": [{"comments": [{"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "edited": false, "score": 0, "creation_date": 1495555438, "post_id": 44139693, "comment_id": 75297949, "body": "please add an example of how to do it, then I will vote for your answer. Actually the answer you quoted does not contain usefull examples. I gave a minimal example that can easily be converted into a code driven answer, as Ruby actually seems to lack a real deep copy function."}], "tags": [], "owner": {"reputation": 3589, "user_id": 70603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7881f3cacd278fb65ca3342307e4275b?s=128&d=identicon&r=PG", "display_name": "jdizzle", "link": "https://stackoverflow.com/users/70603/jdizzle"}, "is_accepted": false, "score": 0, "last_activity_date": 1495555009, "creation_date": 1495555009, "answer_id": 44139693, "question_id": 44139644, "link": "https://stackoverflow.com/questions/44139644/initialize-ruby-hash-with-a-constant-value/44139693#44139693", "title": "Initialize Ruby hash with a constant value", "body": "<p>I think you want a \"deep copy\" of init_value when assigning to prepare.</p>\n\n<p>see:\n<a href=\"https://stackoverflow.com/questions/4157399/how-do-i-copy-a-hash-in-ruby\">How do I copy a hash in Ruby?</a></p>\n"}, {"comments": [{"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "edited": false, "score": 0, "creation_date": 1495558494, "post_id": 44140393, "comment_id": 75299789, "body": "This looks like a reasonable answer. I will try it tomorrow and approve if it works for me."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "edited": false, "score": 1, "creation_date": 1495573090, "post_id": 44140393, "comment_id": 75307430, "body": "@ikrabbe depending on your implementation checkout Stefan&#39;s answer as it provides the same functionality with none of the code. That being said I will leave this hear as an example of &quot;deep copying&quot; since it seemed like a hot topic on this post."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 3, "last_activity_date": 1495562050, "last_edit_date": 1495562050, "creation_date": 1495557089, "answer_id": 44140393, "question_id": 44139644, "link": "https://stackoverflow.com/questions/44139644/initialize-ruby-hash-with-a-constant-value/44140393#44140393", "title": "Initialize Ruby hash with a constant value", "body": "<p>Extracted from Rails 4.2.7</p>\n\n<ul>\n<li><p><a href=\"https://apidock.com/rails/Object/deep_dup\" rel=\"nofollow noreferrer\"><code>Object#deep_dup</code></a> <em>\"Returns a deep copy of object if it\u2019s duplicable. If it\u2019s not duplicable, returns self.\"</em></p></li>\n<li><p><a href=\"https://apidock.com/rails/v4.2.7/Hash/deep_dup\" rel=\"nofollow noreferrer\"><code>Hash#deep_dup</code></a> <em>\"Returns a deep copy of hash.\"</em></p></li>\n<li><p><a href=\"https://apidock.com/rails/Array/deep_dup\" rel=\"nofollow noreferrer\"><code>Array#deep_dup</code></a> <em>\"Returns a deep copy of array.\"</em></p></li>\n</ul>\n\n<p>Implementation:</p>\n\n<pre><code>class Object\n  def duplicable?\n    true\n  end\n  def deep_dup\n    duplicable? ? dup : self\n  end\nend \n\nclass Hash\n   def deep_dup\n     each_with_object(dup) do |(key, value), hash|\n       hash[key.deep_dup] = value.deep_dup\n     end\n  end\nend\n\nclass Array\n  def deep_dup\n    map { |it| it.deep_dup }\n  end\nend\n\n# Not duplicable? \n# if ruby version &lt; 2.0 also add Class and Module as they were not duplicable until 2.0\n[Method, Symbol, FalseClass, TrueClass, NilClass, Numeric, BigDecimal].each do |m|\n  m.send(:define_method, :duplicable?, -&gt;{false})\nend\n</code></pre>\n\n<p>Then you could use a method for <code>init_value</code> so that <code>deep_dup</code> is always called and you can't accidentally forget</p>\n\n<pre><code>#since you asked for a constant\nINIT_VALUE = { \"a\" =&gt; { \"b\" =&gt; \"c\" } }.freeze\n\ndef init_value \n  INIT_VALUE.deep_dup \nend\n</code></pre>\n\n<p>And usage as such </p>\n\n<pre><code>prepare = init_value\nprepare[\"a\"][\"x\"] = \"y\"\n\nprepare2 = init_value\nprepare2[\"a\"][\"y\"] = \"x\"\n\nprepare\n#=&gt; {\"a\"=&gt;{\"b\"=&gt;\"c\", \"x\"=&gt;\"y\"}}\nprepare2\n#=&gt; {\"a\"=&gt;{\"b\"=&gt;\"c\", \"y\"=&gt;\"x\"}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1495572813, "post_id": 44143283, "comment_id": 75307308, "body": "This is by far the simplest solution (I can&#39;t believe I overlooked this) I was so focused on the fact that the OP and other commenters seemed sure deep copying was not something that was supported."}, {"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1495615414, "post_id": 44143283, "comment_id": 75323446, "body": "Thanks to you all! I think we actually found what I and possibly some more have been searching for! Good Teamwork @engineersmnky"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1495567025, "creation_date": 1495567025, "answer_id": 44143283, "question_id": 44139644, "link": "https://stackoverflow.com/questions/44139644/initialize-ruby-hash-with-a-constant-value/44143283#44143283", "title": "Initialize Ruby hash with a constant value", "body": "<p>You could move the initial hash into a method. This way, the method always returns a \"fresh\" hash:</p>\n\n<pre><code>def init_value\n  {\"a\"=&gt;{\"b\"=&gt;\"c\"}}\nend\n\nprepare = init_value\nprepare[\"a\"][\"x\"] = \"y\"\nprepare\n#=&gt; {\"a\"=&gt;{\"b\"=&gt;\"c\", \"x\"=&gt;\"y\"}}\n\nprepare = init_value\nprepare[\"a\"][\"y\"] = \"x\"\nprepare\n#=&gt; {\"a\"=&gt;{\"b\"=&gt;\"c\", \"y\"=&gt;\"x\"}}\n</code></pre>\n"}], "owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 44143283, "answer_count": 3, "score": 2, "last_activity_date": 1495567025, "creation_date": 1495554843, "question_id": 44139644, "link": "https://stackoverflow.com/questions/44139644/initialize-ruby-hash-with-a-constant-value", "title": "Initialize Ruby hash with a constant value", "body": "<p>Actually I want to use such constructs in chef attributes, where I initialize a structure with a constant and modify it</p>\n\n<pre><code>init_value = { \"a\" =&gt; { \"b\" =&gt; \"c\" } }\nprepare = init_value\nprepare[\"a\"][\"x\"] = \"y\"\n</code></pre>\n\n<p>now init_value also contains <code>[\"a\"][\"x\"] = \"y\"</code>, so when I prepare a new value</p>\n\n<pre><code>prepare = init_value\nprepare[\"a\"][\"y\"] = \"x\"\n</code></pre>\n\n<p>so <code>prepare[\"a\"]</code> contains the keys <code>[\"b\", \"x\", \"y\"]</code>.</p>\n\n<p>How can I initialize prepare with a constant without quoting the constant, so that in the last step, <code>prepare[\"a\"]</code> only contains the two keys <code>[\"b\",\"y\"]</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "answers": [{"tags": [], "owner": {"reputation": 1269, "user_id": 2414938, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/033b70536c4ba822401f5e444e8801c0?s=128&d=identicon&r=PG", "display_name": "vretamal", "link": "https://stackoverflow.com/users/2414938/vretamal"}, "is_accepted": false, "score": 0, "last_activity_date": 1499914357, "creation_date": 1499914357, "answer_id": 45070651, "question_id": 44139262, "link": "https://stackoverflow.com/questions/44139262/rails-prawn-bordered-long-text/45070651#45070651", "title": "Rails Prawn - Bordered long text", "body": "<p>I had the same problem today. You must put the <code>stroke_bounds</code> at end of <code>column_box</code></p>\n\n<pre><code>column_box([0, cursor], :columns =&gt; 1, :width =&gt; bounds.width) do\n  text(budget.additional_info, {size: 20})\n  stroke_color \"000000\"\n  stroke_bounds\nend\n</code></pre>\n\n<p>Sorry my bad english. Grettings!</p>\n"}], "owner": {"reputation": 837, "user_id": 5922900, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/u7mYy.jpg?s=128&g=1", "display_name": "Pasp Ruby", "link": "https://stackoverflow.com/users/5922900/pasp-ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499914357, "creation_date": 1495553731, "question_id": 44139262, "link": "https://stackoverflow.com/questions/44139262/rails-prawn-bordered-long-text", "title": "Rails Prawn - Bordered long text", "body": "<p>I have a long text which overflows to several PDF pages. I'd like to border this text. I've tried following code:</p>\n\n<pre><code>    column_box([0, cursor], :columns =&gt; 1, :width =&gt; bounds.width) do\n      stroke_color \"000000\"\n      stroke_bounds\n      text(budget.additional_info, {size: 20})\n    end\n</code></pre>\n\n<p>But it doesn't work. It just prints a border on top of text on first page.</p>\n"}, {"tags": ["ruby", "select", "methods", "syntax", "ruby-block"], "answers": [{"comments": [{"owner": {"reputation": 1298, "user_id": 6305204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jGfSZ.png?s=128&g=1", "display_name": "con--", "link": "https://stackoverflow.com/users/6305204/con"}, "edited": false, "score": 0, "creation_date": 1495553737, "post_id": 44139132, "comment_id": 75296809, "body": "Ok that makes sense. I was thinking the block would be treated the same as other parameters. Forgot blocks are an exception in ruby and aren&#39;t actually objects. The round brackets work fine if you pass a proc or lambda to select, but not a block. Thanks for the help!"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 2, "last_activity_date": 1495553395, "creation_date": 1495553395, "answer_id": 44139132, "question_id": 44139010, "link": "https://stackoverflow.com/questions/44139010/ruby-method-call-using-round-brackets-throwing-syntax-error/44139132#44139132", "title": "Ruby method call using round brackets throwing syntax error", "body": "<p>Round brackets are a way to pass arguments to a method while the squiggly brackets (or do/end) are a way to pass a block to a method. They are not interchangeable.</p>\n\n<p>Squiggly brackets can also be used to create a hash in ruby, which can cause some confusion.</p>\n\n<p>Some ruby methods can take arguments and a block in which case you can use round brackets before the squiggly brackets: E.G.</p>\n\n<pre><code>open(\"ChangeLog\") { |f|\n    f.slice_before(/\\A\\S/).each { |e| pp e }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": true, "score": 4, "last_activity_date": 1495556161, "last_edit_date": 1495556161, "creation_date": 1495553835, "answer_id": 44139300, "question_id": 44139010, "link": "https://stackoverflow.com/questions/44139010/ruby-method-call-using-round-brackets-throwing-syntax-error/44139300#44139300", "title": "Ruby method call using round brackets throwing syntax error", "body": "<p>You cannot pass a block with such a synatx, you would have to do something like this:</p>\n\n<pre><code>a.select(&amp;lambda { |v| v.is_a?(Integer) })\n</code></pre>\n\n<p>but normally you would just do</p>\n\n<pre><code>a.select { |v| v.is_a?(Integer) }\n</code></pre>\n\n<p>which is the same as</p>\n\n<pre><code>a.select() { |v| v.is_a?(Integer) }\n</code></pre>\n\n<p>i.e the block is outside the method parameters.</p>\n\n<p>You could also use the 'stabby' lambda syntax:</p>\n\n<pre><code>is_a_integer = -&gt;(v) { v.is_a?(Integer) }\na.select(&amp;is_a_integer)\n</code></pre>\n\n<p>So if you want to pass a block as an argument you need to prefix with <code>&amp;</code>, but usually you would have the block outside the parameters for atheistic reasons.</p>\n\n<p>Also notice the difference between these to method signatures and the way they are called:</p>\n\n<pre><code>def call(&amp;block)\n  yield\nend\n\ncall { 1 } # =&gt; 1\n\ncall(lambda { 1 }) # =&gt; ArgumentError\n\ncall(&amp;lambda { 1 }) # =&gt; 1\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def call(block)\n  block.call\nend\n\ncall { 1 } # =&gt; ArgumentError\n\ncall(lambda { 1 }) # =&gt; 1\n\ncall(&amp;lambda { 1 }) # =&gt; ArgumentError\n</code></pre>\n\n<p>This is because lambda (and Procs) are objects hence we can do <code>#call</code> to evaluate them, but blocks are not and can be evaluated using the <code>yield</code> keyword. There is more information in <a href=\"http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/\" rel=\"nofollow noreferrer\">this blog post</a>.</p>\n\n<pre><code>lambda { 1 }.class # =&gt; Proc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1495554079, "creation_date": 1495554079, "answer_id": 44139384, "question_id": 44139010, "link": "https://stackoverflow.com/questions/44139010/ruby-method-call-using-round-brackets-throwing-syntax-error/44139384#44139384", "title": "Ruby method call using round brackets throwing syntax error", "body": "<p>With or without parenthesis, <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Array#select</code></a> doesn't accept any regular arguments. It, however accepts a block argument but the blocks associated with a method call are always placed after the parenthesis, not inside them.</p>\n\n<p>Consequently, the call:</p>\n\n<pre><code>a.select {|v| v.is_a? Integer }\n</code></pre>\n\n<p>can also be written with parenthesis as:</p>\n\n<pre><code>a.select() {|v| v.is_a? Integer }\n</code></pre>\n"}], "owner": {"reputation": 1298, "user_id": 6305204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jGfSZ.png?s=128&g=1", "display_name": "con--", "link": "https://stackoverflow.com/users/6305204/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 44139300, "answer_count": 3, "score": 0, "last_activity_date": 1557317485, "creation_date": 1495553056, "last_edit_date": 1557317485, "question_id": 44139010, "link": "https://stackoverflow.com/questions/44139010/ruby-method-call-using-round-brackets-throwing-syntax-error", "title": "Ruby method call using round brackets throwing syntax error", "body": "<p>I'm having some trouble understanding why I can't call select with round brackets.</p>\n\n<pre><code>a = [1,2,3]\na.select {|v| v.is_a?(Integer)}  # works\na.select({|v| v.is_a?(Integer)}) # syntax error, unexpected '|', expecting '}\n</code></pre>\n\n<p>As far as I can tell select is a regular method.</p>\n\n<pre><code>Array.method_defined? :select # true\nArray.method_defined? :is_a?  # true\n</code></pre>\n\n<p>I though round brackets are optional for methods in ruby.<br>\nIn the case below round brackets make no difference.</p>\n\n<pre><code>a.reverse() == a.reverse #true\n</code></pre>\n\n<p>I'm using ruby 2.2.1.<br>\nAny ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 5, "creation_date": 1495551783, "post_id": 44138367, "comment_id": 75295408, "body": "It means what it says, <code>static_pages_controller_test.rb:26: syntax error, unexpected end-of-input, expecting keyword_end (SyntaxError)</code>.  So there&#39;s probably a syntax error in the file named in the error message."}], "answers": [{"tags": [], "owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "is_accepted": false, "score": 3, "last_activity_date": 1495551912, "creation_date": 1495551912, "answer_id": 44138545, "question_id": 44138367, "link": "https://stackoverflow.com/questions/44138367/rails-test-error-in-terminal/44138545#44138545", "title": "Rails test error in terminal", "body": "<p>The error message is actually telling you exactly where the issue is.</p>\n\n<p>On line 26 of your <code>static_pages_controller_test.rb</code> file, you're missing an <code>end</code>.</p>\n\n<pre><code>...static_pages_controller_test.rb:26: syntax error, unexpected end-of-input, expecting keyword_end (SyntaxError)...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1495552024, "creation_date": 1495552024, "answer_id": 44138607, "question_id": 44138367, "link": "https://stackoverflow.com/questions/44138367/rails-test-error-in-terminal/44138607#44138607", "title": "Rails test error in terminal", "body": "<p>It's telling you that you likely have either ommitted an <code>end</code> from your <code>static_pages_controller_test.rb</code> file. Or, you have an extra <code>end</code> in that file. </p>\n\n<p>If you look at the error: </p>\n\n<pre><code>..../test/controllers/static_pages_controller_test.rb:26 syntax error,   \n     unexpected end-of-input, expecting keyword_end (SyntaxError)`\n</code></pre>\n\n<p>It's telling you that something is amiss on line 26. \nThen <code>syntax error</code>, means you have typed something incorrectly. \nIt then says <code>unexpected end-of-input</code> which means that the parser couldn't figure out where to end the method, and the reason for that is that it was <code>expecting keyword_end</code>, which means there is an <code>end</code> keyword missing.</p>\n"}], "owner": {"reputation": 11, "user_id": 7640287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad42b7d2f5c9b2b3d6d1eccb626648b3?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtocode", "link": "https://stackoverflow.com/users/7640287/tryingtocode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495552024, "creation_date": 1495551433, "last_edit_date": 1495551973, "question_id": 44138367, "link": "https://stackoverflow.com/questions/44138367/rails-test-error-in-terminal", "title": "Rails test error in terminal", "body": "<p>I'm a beginner trying to learn rails. When i tried to run the \"rails test\" command, I get this message. I don't understand what this message is :/ </p>\n\n<pre><code>rails test\nRunning via Spring preloader in process 46753\n/Users/.../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.1/lib/active_support/dependencies.rb:292:in `require': /Users/..../test/controllers/static_pages_controller_test.rb:26: syntax error, unexpected end-of-input, expecting keyword_end (SyntaxError)\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.1/lib/active_support/dependencies.rb:292:in `block in require'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.1/lib/active_support/dependencies.rb:258:in `load_dependency'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/activesupport-5.1.1/lib/active_support/dependencies.rb:292:in `require'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.1/lib/rails/test_unit/test_requirer.rb:14:in `block in require_files'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.1/lib/rails/test_unit/test_requirer.rb:13:in `each'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.1/lib/rails/test_unit/test_requirer.rb:13:in `require_files'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.1/lib/rails/test_unit/minitest_plugin.rb:94:in `plugin_rails_init'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/minitest-5.10.2/lib/minitest.rb:81:in `block in init_plugins'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/minitest-5.10.2/lib/minitest.rb:79:in `each'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/minitest-5.10.2/lib/minitest.rb:79:in `init_plugins'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/minitest-5.10.2/lib/minitest.rb:130:in `run'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.1/lib/rails/test_unit/minitest_plugin.rb:77:in `run'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/minitest-5.10.2/lib/minitest.rb:63:in `block in autorun'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/..../.rbenv/versions/2.4.1/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "string-length"], "comments": [{"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 2, "creation_date": 1495551470, "post_id": 44138346, "comment_id": 75295129, "body": "could you please post what errors you get?"}, {"owner": {"reputation": 5828, "user_id": 5203069, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf5b1613b2287cd6b8bf05baa2842b5?s=128&d=identicon&r=PG&f=1", "display_name": "skwidbreth", "link": "https://stackoverflow.com/users/5203069/skwidbreth"}, "edited": false, "score": 1, "creation_date": 1495551573, "post_id": 44138346, "comment_id": 75295205, "body": "Please format your code correctly - <a href=\"https://meta.stackexchange.com/questions/18614/style-guide-for-questions-and-answers\" title=\"style guide for questions and answers\">meta.stackexchange.com/questions/18614/&hellip;</a>"}, {"owner": {"reputation": 254, "user_id": 2374041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652e1bfe2d4f6f68ad132d80b65e14f6?s=128&d=identicon&r=PG", "display_name": "jmschles", "link": "https://stackoverflow.com/users/2374041/jmschles"}, "edited": false, "score": 0, "creation_date": 1495555208, "post_id": 44138346, "comment_id": 75297808, "body": "shot in the dark without knowing what your errors are, but <code>puts</code> prints a line and then returns <code>nil</code>, which isn&#39;t what it sounds like your method is supposed to do..."}], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 2, "last_activity_date": 1495557114, "creation_date": 1495557114, "answer_id": 44140402, "question_id": 44138346, "link": "https://stackoverflow.com/questions/44138346/comparing-the-length-of-two-strings-with-ruby/44140402#44140402", "title": "Comparing the length of two strings with Ruby", "body": "<p>Ruby comparison operators like <code>&gt;=</code> return boolean values naturally. You don't need to use a conditional, and you almost never want to return string equivalents of <code>true</code> and <code>false</code>. Also, Ruby convention is to use a question mark in the name of methods that return boolean values. </p>\n\n<p>For this kind of method, Ruby lets us write this:</p>\n\n<pre><code>def first_longer_than_second?(first, second)\n  first.length &gt;= second.length\nend\n</code></pre>\n\n<p>Then you can call the method like this:</p>\n\n<pre><code>&gt;&gt; first_longer_than_second?('hello', 'sir')\n=&gt; true\n</code></pre>\n\n<p>Note that the method name is somewhat confusing since it returns true if <code>first</code> is the same length as <code>second</code>. You might consider renaming the method as appropriate. Names do matter!</p>\n"}], "owner": {"reputation": 39, "user_id": 6951095, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10157519478795125/picture?type=large", "display_name": "Lkoprivica", "link": "https://stackoverflow.com/users/6951095/lkoprivica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495557114, "creation_date": 1495551371, "last_edit_date": 1495551821, "question_id": 44138346, "link": "https://stackoverflow.com/questions/44138346/comparing-the-length-of-two-strings-with-ruby", "title": "Comparing the length of two strings with Ruby", "body": "<p>Define a method called <code>first_longer_than_second</code> with a parameter called <code>first</code> and another called <code>second</code>. The method will return <code>true</code> if the <code>first</code> word passed in is greater than or equal to the length of the <code>second</code> word. It returns false otherwise. Here's how the method would be called and the expected return:</p>\n\n<p>This is what I have:</p>\n\n<pre><code>def first_longer_than_second(first, second)\n   if first.length &gt;= second.length\n     puts true\n   else\n     puts false\n   end\nend\n</code></pre>\n\n<p>I am getting errors and I not sure why.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "sql-server", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1495716045, "post_id": 44138013, "comment_id": 75375598, "body": "Die you install <a href=\"https://rubygems.org/gems/tiny_tds\" rel=\"nofollow noreferrer\">tiny_tds</a>? Use <code>gem install tiny_tds</code> to install the gem."}, {"owner": {"reputation": 51015, "user_id": 356849, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/INqgP.jpg?s=128&g=1", "display_name": "NullVoxPopuli", "link": "https://stackoverflow.com/users/356849/nullvoxpopuli"}, "edited": false, "score": 0, "creation_date": 1496947945, "post_id": 44138013, "comment_id": 75884573, "body": "I have this same problem with Windows10 / Ruby 2.4 / 64bit"}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 1546785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d901bdf6801bcc6e75c6d9b7b326a1?s=128&d=identicon&r=PG", "display_name": "Tom Chapin", "link": "https://stackoverflow.com/users/1546785/tom-chapin"}, "is_accepted": false, "score": 0, "last_activity_date": 1532448437, "creation_date": 1532448437, "answer_id": 51503179, "question_id": 44138013, "link": "https://stackoverflow.com/questions/44138013/error-with-rake-dbmigrate-using-tiny-tds-and-sqlserver-adapter/51503179#51503179", "title": "Error with rake db:migrate using tiny_tds and sqlserver adapter", "body": "<p>I ran into this problem recently, and it turns out that the issue was due to the Ruby DevKit not being included in my Windows system and user PATH variables.</p>\n\n<p>My full answer/solution can be found on this other related Stack Overflow post: <a href=\"https://stackoverflow.com/a/51488484/1546785\">https://stackoverflow.com/a/51488484/1546785</a></p>\n"}], "owner": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532448437, "creation_date": 1495550656, "last_edit_date": 1495713074, "question_id": 44138013, "link": "https://stackoverflow.com/questions/44138013/error-with-rake-dbmigrate-using-tiny-tds-and-sqlserver-adapter", "title": "Error with rake db:migrate using tiny_tds and sqlserver adapter", "body": "<p>When I try using <code>rake db:migrate</code> I get this error:</p>\n\n<pre><code>LoadError: cannot load such file -- tiny_tds/tiny_tds\nD:/myrailsapp/config/application.rb:7:in `&lt;top (required)&gt;'\nD:/myrailsapp/Rakefile:4:in `require_relative'\nD:/myrailsapp/Rakefile:4:in `&lt;top (required)&gt;'\nLoadError: 126: The specified module could not be found.   - D:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/tiny_tds-1.1.0-x86-mingw32/lib/tiny_tds/2.2/tiny_tds.so\nD:/myrailsapp/config/application.rb:7:in `&lt;top (required)&gt;'\nD:/myrailsapp/Rakefile:4:in `require_relative'\nD:/myrailsapp/Rakefile:4:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>This is my database.yml file:</p>\n\n<pre><code>#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: sqlite3\n  pool: 5\n  timeout: 5000\n\ndevelopment:\n  adapter: sqlserver\n  mode: odbc\n  dsn: railsapp\n  database: sqlserverapp\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: db/test.sqlite3\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production.sqlite3\n</code></pre>\n\n<p>Can somebody help? I can't seem to find a solution, I've looked basically everywhere on the web and can't find a proper solution to this specific case, I've tried uninstalling and reinstalling, and both gems are declared on gemfile.</p>\n"}, {"tags": ["ruby", "validation", "grape", "grape-api"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8021176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd229a6fc426485dbad3bba46065c9f?s=128&d=identicon&r=PG&f=1", "display_name": "znon", "link": "https://stackoverflow.com/users/8021176/znon"}, "is_accepted": false, "score": 0, "last_activity_date": 1495563051, "creation_date": 1495563051, "answer_id": 44142113, "question_id": 44137670, "link": "https://stackoverflow.com/questions/44137670/grape-custom-validator-for-each-element-of-an-array/44142113#44142113", "title": "Grape: custom validator for each element of an array", "body": "<p>This is totally possible, You can assert the value for specific keys in a response.</p>\n\n<pre><code>assert_equal some_obj[0].first[1], \"interests\" \n</code></pre>\n\n<p>Here is this same thing in irb</p>\n\n<pre><code> \ud83c\uddf1\ud83c\uddf7  Success weeds out the uncommitted ~ irb\n2.2.3 :001 &gt; a = [{:field=&gt;\"interests\", :operator=&gt;\"any\", :value=&gt;[\"cars\", \"cats\"]}]\n =&gt; [{:field=&gt;\"interests\", :operator=&gt;\"any\", :value=&gt;[\"cars\", \"cats\"]}]\n2.2.3 :002 &gt; a[0].first\n =&gt; [:field, \"interests\"]\n2.2.3 :003 &gt; a[0].first[1]\n =&gt; \"interests\"\n2.2.3 :004 &gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 345, "user_id": 5555471, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ieQnW.jpg?s=128&g=1", "display_name": "Florent Chatterji", "link": "https://stackoverflow.com/users/5555471/florent-chatterji"}, "is_accepted": false, "score": 0, "last_activity_date": 1499702441, "creation_date": 1499702441, "answer_id": 45016709, "question_id": 44137670, "link": "https://stackoverflow.com/questions/44137670/grape-custom-validator-for-each-element-of-an-array/45016709#45016709", "title": "Grape: custom validator for each element of an array", "body": "<p>Yes it's possible, but you have to use a custom validator. </p>\n\n<p>Here is an example</p>\n\n<pre><code>class Validator &lt; Grape::Validations::Base\n  def validate_param!(attr_name, params)\n    unless params[attr_name].each { //your code here }\n      fail Grape::Exceptions::Validation, params: [@scope.full_name(attr_name)], message: 'your message'\n    end\n  end\nend\n</code></pre>\n\n<p>You would then use it like this:</p>\n\n<pre><code>requires :conditions, type: Array, validator: true\n</code></pre>\n"}], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 662, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1499702441, "creation_date": 1495549819, "question_id": 44137670, "link": "https://stackoverflow.com/questions/44137670/grape-custom-validator-for-each-element-of-an-array", "title": "Grape: custom validator for each element of an array", "body": "<p>Is it possible to run a custom validator against each element of array in Grape? I know I can validate whole array with my validator, but I think error messages would be better if I use it for each element.</p>\n\n<p>My parameters look like this:</p>\n\n<pre><code>  \"conditions\": [\n      {\n          \"field\": \"interests\",\n          \"operator\": \"any\",\n          \"value\": ['cars', 'cats']\n      },\n      {\n          \"field\": \"age\",\n          \"operator\": \"gt\",\n          \"value\": 25\n      }\n  ]\n</code></pre>\n\n<p>With <code>requires :conditions, type: Array, valid_conditions: true</code> the validator is run for the whole array. Is it best I can get?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1495549970, "post_id": 44137631, "comment_id": 75293906, "body": "Did you check in the rails console, that <code>Produit.all</code> is getting data. Also, the products that you have stored, have the attribute <code>active: true</code> ? remember the <code>default_scope { where(active: true) }</code>."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 2, "creation_date": 1495550101, "post_id": 44137631, "comment_id": 75294002, "body": "<code>Produits#index</code> shouldn&#39;t be receiving params for <code>OrderItem</code>. It should be a GET request. Consider moving the <code>@order_item.save</code> conditional to an <code>OrderItems</code> controller (probably in a <code>create</code> action)."}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1495550119, "post_id": 44137631, "comment_id": 75294022, "body": "@AlejandroMontilla Yes i did check the rails console and <code>Produit.all</code> is getting the data i entered in my active_admin session. That&#39;s why i don&#39;t understand..."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1495550256, "post_id": 44137631, "comment_id": 75294139, "body": "If I&#39;m reading this right, <code>produits&#47;index.html</code> is never rendered: if the <code>order_item</code> params aren&#39;t present, <code>create</code> is rendered. If they are present, the request is redirected to <code>OrderItems#show</code>."}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1495550364, "post_id": 44137631, "comment_id": 75294229, "body": "@coreyward <code>produit&#47;index.html.erb</code> is rendered. Which is not renderer is the partial <code>produit&#47;_produit_row.html.erb</code>. I have tried to do what you said but unfortunately it didn&#39;t work"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1495554387, "post_id": 44137631, "comment_id": 75297268, "body": "@justinedps26 Okay, what action is rendering it? Either the code you&#39;re sharing isn&#39;t the code you&#39;re running or there&#39;s no index being rendered. Read the code you wrote\u2026it&#39;s redirecting or rendering another action on either fork of the conditional."}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1495563570, "post_id": 44137631, "comment_id": 75302569, "body": "@coreyward in <code>produit&#47;index.html.erb</code> i have a partial called inside an each statement. The <code>produit&#47;index.html.erb</code> is also called inside a view named <code>marche_breton&#47;index.html.erb</code>. It is called as a template rendering. i&#39;m not sure it&#39;s clear but i know the issue comes from the <code>_produit_row.html.erb</code> partial rendering"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "edited": false, "score": 0, "creation_date": 1495609433, "post_id": 44143215, "comment_id": 75319311, "body": "the thing is, <code>@produits</code> is also nil. I have tried to do what you just suggested and it doesn&#39;t work..."}, {"owner": {"reputation": 3796, "user_id": 3686898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IvIuI.jpg?s=128&g=1", "display_name": "Philipp Meissner", "link": "https://stackoverflow.com/users/3686898/philipp-meissner"}, "reply_to_user": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "edited": false, "score": 0, "creation_date": 1495609970, "post_id": 44143215, "comment_id": 75319654, "body": "Oh, okay. First, make sure you definitely have <code>Produit</code> in your DB. Besides that, please remove the <code>if @order_item.save</code>-part from your index-method (Also remove the else-case) so that you can make sure it&#39;s rendering the index-view. I guess due to this conditional it&#39;s not actually rendering your desired view."}, {"owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "edited": false, "score": 0, "creation_date": 1495610413, "post_id": 44143215, "comment_id": 75319954, "body": "<code>Produit</code> is in the DB. I have removed the <code>if @order_item.save</code> statement (also the <code>else</code> case) and nothing changes. I will update the question with the logs to let you see what&#39;s happening"}, {"owner": {"reputation": 3796, "user_id": 3686898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IvIuI.jpg?s=128&g=1", "display_name": "Philipp Meissner", "link": "https://stackoverflow.com/users/3686898/philipp-meissner"}, "reply_to_user": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "edited": false, "score": 0, "creation_date": 1495614896, "post_id": 44143215, "comment_id": 75323111, "body": "Please try to use <code>gem pry</code> to debug this further. Add it to your Gemfile, run <code>bundle install</code> and after <code>@produits = Produit.all</code> add a new line with <code>binding.pry</code>. Your server will then add a breakpoint at that line of code and allow you to debug all variables. Check that <code>Produit.all</code> does in fact return items and tell us, what <code>@produits</code> evaluates to."}], "tags": [], "owner": {"reputation": 3796, "user_id": 3686898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IvIuI.jpg?s=128&g=1", "display_name": "Philipp Meissner", "link": "https://stackoverflow.com/users/3686898/philipp-meissner"}, "is_accepted": false, "score": 0, "last_activity_date": 1495566774, "creation_date": 1495566774, "answer_id": 44143215, "question_id": 44137631, "link": "https://stackoverflow.com/questions/44137631/rails-product-is-set-to-nil/44143215#44143215", "title": "Rails: product is set to nil", "body": "<p>The problem is here:</p>\n\n<pre><code>&lt;% @produits.in_groups_of(4, false).each do |g| %&gt;\n        &lt;% g.each do |produit| %&gt;\n          &lt;%= render partial: \"produits/produit_row\", produit: @produit, order_item: @order_item %&gt;\n</code></pre>\n\n<p>You iterate over the collection <code>@produits</code> and assign each single instance of the collection to <code>produit</code>. Hence when you pass the partial <code>produit: @produit</code>  you actually pass <code>nil</code>.</p>\n\n<p>To solve this, just remove the <code>@</code> and have it scoped properly! :)</p>\n\n<pre><code>&lt;% @produits.in_groups_of(4, false).each do |g| %&gt;\n        &lt;% g.each do |produit| %&gt;\n          &lt;%= render partial: \"produits/produit_row\", produit: produit, order_item: @order_item %&gt;\n</code></pre>\n\n<p>Besides that I assume that <code>produits_show_path</code> in your partial will not work like that. You may want to have it like this:</p>\n\n<pre><code>link_to produit_path(produit) do\n</code></pre>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 149, "user_id": 5914341, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/10208640241620387/picture?type=large", "display_name": "justinedps26", "link": "https://stackoverflow.com/users/5914341/justinedps26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495610467, "creation_date": 1495549727, "last_edit_date": 1495610467, "question_id": 44137631, "link": "https://stackoverflow.com/questions/44137631/rails-product-is-set-to-nil", "title": "Rails: product is set to nil", "body": "<p>I have an ecommerce website with products, carts and other things.</p>\n\n<p>Both variables @produit and @produits are set to nil but i have no idea why.</p>\n\n<p>here is <code>produit.rb</code> :</p>\n\n<pre><code>class Produit &lt; ActiveRecord::Base\n  has_many :order_items\n\n  default_scope { where(active: true) }\n\n  mount_uploader :photo, PhotoUploader\n\n  validates :nom, presence: true\n  validates :artisan, presence: true\n  validates :quantite, presence: true\n  validates :categorie, presence: true\n  validates :denomination, presence: true\n  validates :description, presence: true\n  validates :prix, presence: true\n  validates :photo, presence: true\n\nend\n</code></pre>\n\n<p>here is the controller: </p>\n\n<pre><code>class ProduitsController &lt; ApplicationController\n\n  def index\n    @produits = Produit.all\n    @order_item = current_order.order_items.new(produit_params)\n\n    if @order_item.save\n      format.html { redirect_to @order_item, notice: 'Le produit a \u00e9t\u00e9 ajout\u00e9 au panier !' }\n      format.json { render json: @order_item, status: :created, location: @order_item }\n      format.js\n    else\n      format.html { render action: 'create', notice: 'Le produit n\\'a pas \u00e9t\u00e9 ajout\u00e9 au panier' }\n      format.json { render @order_item.errors, status: unprocessable_entity }\n      format.js\n    end\n  end\n\n  def show\n    @produit = Produit.find(params[:id])\n  end\n\n  private\n\n  def produit_params\n    params.require(:produit).permit(:nom, :quantite, :description, :denomination, :artisan, :categorie, :prix, :photo)\n  end\n\nend\n</code></pre>\n\n<p>I also have this view in produits/index :</p>\n\n<pre><code>&lt;%= render partial: 'layouts/navbarindex' %&gt;\n\n&lt;%= render partial: 'produits/header' %&gt;\n\n\n&lt;div id=\"path-progress-bar\"&gt;\n  &lt;p&gt;Accueil&lt;/p&gt;\n  &lt;p&gt;/&lt;/p&gt;\n  &lt;p style=\"color:black\"&gt;Boutique de produits breton&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;section id=\"marche-breton-container\"&gt;\n\n  &lt;%= render template: 'categories/index' %&gt;\n\n  &lt;div id=\"produits-column-container\"&gt;\n    &lt;% if @produits %&gt;\n      &lt;% @produits.in_groups_of(4, false).each do |g| %&gt;\n        &lt;% g.each do |produit| %&gt;\n          &lt;%= render partial: \"produits/produit_row\", produit: @produit, order_item: @order_item %&gt;\n        &lt;% end %&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n&lt;/section&gt;\n</code></pre>\n\n<p>and here is the renderer <code>_produit_row.html.erb</code> :</p>\n\n<pre><code>&lt;div id=\"produits-row-container\"&gt;\n  &lt;div id=\"fiche-produit-container\"&gt;\n    &lt;%= form_for order_item, remote: true do |f| %&gt;\n      &lt;div id=\"produit-img\"&gt;\n        &lt;%= link_to produits_show_path do %&gt;\n          &lt;%= image_tag produit.photo %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div id=\"produit-nom\"&gt;\n        &lt;%= produit.nom %&gt;\n      &lt;/div&gt;\n      &lt;div id=\"produit-prix\"&gt;\n        &lt;%= number_to_currency(produit.prix, unit: '\u20ac', format: \"%n%u\") %&gt;\n      &lt;/div&gt;\n      &lt;div id=\"produit-au-panier\"&gt;\n        &lt;%= image_tag('icon/icon-panier') %&gt;\n        &lt;%= f.submit 'Ajouter au panier' %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The problem is that <code>@produit</code> and <code>@produits</code> are set to nil, so the view doesn't display anything even though i have an active_admin session where products are set up.</p>\n\n<p>UPDATE: the <code>logs</code>:</p>\n\n<pre><code>Started GET \"/mon-marche-breton\" for ::1 at 2017-05-24 09:17:47 +0200\nProcessing by MarcheBretonController#index as HTML\n  User Load (0.3ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 2  ORDER BY `users`.`id` ASC LIMIT 1\n  Rendered layouts/_cart_text.html.erb (6.9ms)\n  Rendered layouts/_navbarindex.html.erb (26.4ms)\n  Rendered produits/_header.html.erb (3.4ms)\n  Categorie Load (0.3ms)  SELECT `categories`.* FROM `categories`\n  Rendered categories/index.html.erb (5.5ms)\n  Rendered produits/index.html.erb (39.2ms)\n  Rendered marche_breton/index.html.erb within layouts/application (40.3ms)\n  Rendered layouts/_footer.html.erb (3.2ms)\nCompleted 200 OK in 253ms (Views: 242.1ms | ActiveRecord: 3.6ms)\n\n\nStarted GET \"/assets/bg/bg-banner.png\" for ::1 at 2017-05-24 09:17:48 +0200\n\n\nStarted GET \"/assets/bg/footer.png\" for ::1 at 2017-05-24 09:17:48 +0200\n\n\nStarted GET \"/assets/bg/before-footer.png\" for ::1 at 2017-05-24 09:17:48 +0200\n</code></pre>\n"}, {"tags": ["ruby", "dns", "rubygems"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495556674, "post_id": 44137446, "comment_id": 75298704, "body": "what is <a href=\"http://somesource.com/rubugems\" rel=\"nofollow noreferrer\">somesource.com/rubugems</a> a private gem server?"}, {"owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1495558061, "post_id": 44137446, "comment_id": 75299555, "body": "you need to put a valid ip address for a dns server in place of that 255.255.255.255 line"}, {"owner": {"reputation": 983, "user_id": 445440, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d71aabc62c63cb8b4180459bc19e090?s=128&d=identicon&r=PG", "display_name": "danny", "link": "https://stackoverflow.com/users/445440/danny"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1495580301, "post_id": 44137446, "comment_id": 75310281, "body": "@Kris yes actually a mirror."}, {"owner": {"reputation": 983, "user_id": 445440, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d71aabc62c63cb8b4180459bc19e090?s=128&d=identicon&r=PG", "display_name": "danny", "link": "https://stackoverflow.com/users/445440/danny"}, "reply_to_user": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1495580363, "post_id": 44137446, "comment_id": 75310296, "body": "@user3788685 for ubuntu i delete the &quot;255.255.255.255&quot;, but for windows  i don&#39;t see it anywhere."}, {"owner": {"reputation": 2473, "user_id": 3788685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0153b937db548cca172e6a78e71eabe3?s=128&d=identicon&r=PG&f=1", "display_name": "user3788685", "link": "https://stackoverflow.com/users/3788685/user3788685"}, "edited": false, "score": 0, "creation_date": 1495583351, "post_id": 44137446, "comment_id": 75311110, "body": "you could try 8.8.8.8 or 4.4.4.4 (I think) which are googles DNS&#39;s servers - your dns server should be listed as your router, or ISP if you do an <code>ipconfig &#47;all</code>"}], "answers": [{"tags": [], "owner": {"reputation": 983, "user_id": 445440, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d71aabc62c63cb8b4180459bc19e090?s=128&d=identicon&r=PG", "display_name": "danny", "link": "https://stackoverflow.com/users/445440/danny"}, "is_accepted": false, "score": 0, "last_activity_date": 1495635549, "creation_date": 1495635549, "answer_id": 44161105, "question_id": 44137446, "link": "https://stackoverflow.com/questions/44137446/ruby-2-2-gem-dns-error/44161105#44161105", "title": "ruby 2.2 gem dns error", "body": "<p>just found the cause: i have an openvpn client on my PC, whenever i created a vpn connection, a tap0 network interface i created, and the DNS for that interface is '<code>255.255.255.255</code>'</p>\n\n<p>when ruby2.2.2  trying to find the DNS server for my machine , it uses <code>Win32::Resolv.get_resov_info</code> to get a list dns server, and the first one is <code>'255.255.255.255'</code> from my vpn interface.</p>\n\n<p>later on when it try to resolve a gem  server , it try to use the '255.255.255.255' but without proper exception handling(only timeout exception), so i got the error without even trying the remaining proper dns server from other network interface.</p>\n"}], "owner": {"reputation": 983, "user_id": 445440, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d71aabc62c63cb8b4180459bc19e090?s=128&d=identicon&r=PG", "display_name": "danny", "link": "https://stackoverflow.com/users/445440/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495635549, "creation_date": 1495549269, "question_id": 44137446, "link": "https://stackoverflow.com/questions/44137446/ruby-2-2-gem-dns-error", "title": "ruby 2.2 gem dns error", "body": "<p>i just installed ruby 2.2 on windows and try to install some gems, but i always get this error:</p>\n\n<pre><code>gem source -a http://somesource.com/rubugems\nERROR: While executing gem ...(Errno:EACCESS)\npermission denied - sendto(2) for \"255.255.255.255\" port 53\n</code></pre>\n\n<p>i also tried this on a ubuntu server, same error, but as dig into it , it seems like a DNS problem, when i check my <code>resolv.conf</code> , the first line is <code>\"255.255.255.255\"</code>, so i remove it ,and everything is good on ubuntu.i try to do the same on windows : set the same DNS server manully , the <code>nslookup</code> command works fine ,but still got the same error.</p>\n\n<p>anyone has any clue? thanks.</p>\n"}, {"tags": ["ruby", "shell"], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1495548422, "creation_date": 1495548422, "answer_id": 44137102, "question_id": 44137059, "link": "https://stackoverflow.com/questions/44137059/how-to-set-a-shell-variable-in-ruby-script/44137102#44137102", "title": "How to set a shell variable in ruby script?", "body": "<p>You can't. A child process inherits its parent's environment, but cannot modify it.</p>\n"}], "owner": {"reputation": 671, "user_id": 3785447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003014900444/picture?type=large", "display_name": "Praveenkumar", "link": "https://stackoverflow.com/users/3785447/praveenkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 44137102, "answer_count": 1, "score": 0, "last_activity_date": 1495548422, "creation_date": 1495548301, "question_id": 44137059, "link": "https://stackoverflow.com/questions/44137059/how-to-set-a-shell-variable-in-ruby-script", "title": "How to set a shell variable in ruby script?", "body": "<p>Hi this is my following code. I need to get the value through shell script which is assigned in ruby script.</p>\n\n<pre><code>#!/bin/bash\n\nruby &lt;&lt;EOM\n    system &lt;&lt;-CMD\n        export VARNAME=123\n    CMD\nEOM\necho \"------\"\necho ${VARNAME}\n</code></pre>\n\n<p>it is printing output as</p>\n\n<pre><code>------\n</code></pre>\n\n<p>Any Help?</p>\n"}, {"tags": ["ruby", "sketchup"], "comments": [{"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495546968, "post_id": 44136485, "comment_id": 75291612, "body": "It is not a good idea at all, but this will work (except you should round your floating points): <code>(-1.0..1.0).step(0.1).to_a.each { |e| e }</code>"}, {"owner": {"reputation": 3299, "user_id": 1177999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2397dd703288cfed313b4d682608c89?s=128&d=identicon&r=PG", "display_name": "sinsedrix", "link": "https://stackoverflow.com/users/1177999/sinsedrix"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495559690, "post_id": 44136485, "comment_id": 75300440, "body": "@yzalavin Why wouln&#39;t it be a good idea? Is there a &quot;good&quot; way to do it?"}, {"owner": {"reputation": 3299, "user_id": 1177999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2397dd703288cfed313b4d682608c89?s=128&d=identicon&r=PG", "display_name": "sinsedrix", "link": "https://stackoverflow.com/users/1177999/sinsedrix"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1495559796, "post_id": 44136485, "comment_id": 75300504, "body": "May the downvote explain their reasons?"}], "answers": [{"comments": [{"owner": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "edited": false, "score": 0, "creation_date": 1495632595, "post_id": 44137386, "comment_id": 75336030, "body": "Since the question being in context of SketchUp, indicating he&#39;s producing an extension, it&#39;s worth noting that extensions hosted on the SketchUp Extension Warehouse are not allowed to modify Ruby API namespace in order to avoid clashes. Instead it would have to take the float as an argument."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1495549128, "creation_date": 1495549128, "answer_id": 44137386, "question_id": 44136485, "link": "https://stackoverflow.com/questions/44136485/floating-loop-in-a-sketchup-plugin/44137386#44137386", "title": "Floating loop in a sketchup plugin", "body": "<p>There is no <code>#upto</code> method for Float but you can create your own similar method</p>\n\n<pre><code>class Float\n  def upto(target, options={})\n    options = {step: 1.0}.merge(options)\n    current_value = self\n    while current_value &lt; target\n      yield current_value\n      current_value += options[:step]\n    end\n  end\nend\n</code></pre>\n\n<p>You can then do...</p>\n\n<pre><code>(-1.0).upto(1.0, step: 0.1) do |t|\n    ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "is_accepted": true, "score": 1, "last_activity_date": 1495632823, "creation_date": 1495632823, "answer_id": 44159941, "question_id": 44136485, "link": "https://stackoverflow.com/questions/44136485/floating-loop-in-a-sketchup-plugin/44159941#44159941", "title": "Floating loop in a sketchup plugin", "body": "<p>One option is to use step on a <code>Range</code>:</p>\n\n<pre><code>(-1.0..1.0).step(0.1) { |i|\n  puts i\n}\n</code></pre>\n\n<p>Note, while you increment with 0.1 you will run into floating point precision issue. So take that into consideration.</p>\n\n<pre><code>-1.0\n-0.9\n-0.8\n-0.7\n-0.6\n-0.5\n-0.39999999999999997\n-0.29999999999999993\n-0.19999999999999996\n-0.09999999999999995\n5.551115123125783e-17\n0.10000000000000006\n0.20000000000000007\n0.30000000000000004\n0.4000000000000001\n0.5000000000000001\n0.6000000000000001\n0.7000000000000001\n0.8\n0.9000000000000001\n1.0\n</code></pre>\n"}], "owner": {"reputation": 3299, "user_id": 1177999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2397dd703288cfed313b4d682608c89?s=128&d=identicon&r=PG", "display_name": "sinsedrix", "link": "https://stackoverflow.com/users/1177999/sinsedrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 44159941, "answer_count": 2, "score": 0, "last_activity_date": 1495632823, "creation_date": 1495546750, "last_edit_date": 1495559761, "question_id": 44136485, "link": "https://stackoverflow.com/questions/44136485/floating-loop-in-a-sketchup-plugin", "title": "Floating loop in a sketchup plugin", "body": "<p>I need to loop on a floating point but I don't find the right syntax.\nWhat I tried:</p>\n\n<pre><code>(-1.0).upto(1.0).step(0.1) do |t|\n    ...\nend\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>Error: #NoMethodError: undefined method `upto' for -1.0:Float></p>\n</blockquote>\n\n<p><strong>EDIT</strong>: Is there a \"good\" or better way to do this loop?</p>\n"}, {"tags": ["ruby", "cucumber", "watir", "pageobjects", "page-object-gem"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1495585998, "post_id": 44136385, "comment_id": 75311688, "body": "So when does the issue happen?  When you aren&#39;t using browserstack?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495596657, "post_id": 44136385, "comment_id": 75314145, "body": "It&#39;s happening because your page loads happens for more than 60 sec after a click. Just check it right or not."}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1495631863, "post_id": 44136385, "comment_id": 75335392, "body": "@Jason : I guess, i noticed the same error too earlier. Can you please paste the whole error logs?"}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1495631895, "post_id": 44136385, "comment_id": 75335412, "body": "Try adding a sleep command and check?"}, {"owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1495637578, "post_id": 44136385, "comment_id": 75340222, "body": "@orde, yes, it happens when I am running locally on a local Browser."}, {"owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "reply_to_user": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1495637581, "post_id": 44136385, "comment_id": 75340228, "body": "@Mrityunjeyan, I dont have any more error log then what I posted. that is part of what has me stumped. This is all happening within the Visit command.  I cannot insert a sleep."}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1495691095, "post_id": 44136385, "comment_id": 75361441, "body": "@JasonKoelewyn There is either a problem with the existing session of watir and the browser&#39;s driver or it could be since, the website is still loading more than the default wait time, and the next step cannot be processed. Can you shut down the <code>browser&#39;s driver</code> and again restart it? then check? Also, it would be nice, if you can mention what is your code and when you are getting this error."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495694344, "post_id": 44136385, "comment_id": 75362833, "body": "@JasonKoelewyn You haven&#39;t read my reply. It&#39;s happening because some of your click loads the page more than 60 secs. It crosses the default time."}, {"owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495806035, "post_id": 44136385, "comment_id": 75418791, "body": "@RAJ, I did read your reply.  What does not make sense there is it only happens locally.  If it was slow loading I would expect it to occur on Browserstack as well, esp since performance is noticeably worse on BS."}, {"owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "reply_to_user": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1495806082, "post_id": 44136385, "comment_id": 75418831, "body": "@MrityunjeyanS, the code is visit(AppHelpers.get_page_name($page, &#39;page_object&#39;)).await     visit is an method of the Page Objects gem. If your assumption is correct, do you know of a fix?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495807362, "post_id": 44136385, "comment_id": 75419696, "body": "@JasonKoelewyn I met this problem and I found a work around as well. Just increase the time to 300 seconds and it would work."}, {"owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495808518, "post_id": 44136385, "comment_id": 75420490, "body": "@RAJ, it is occurring within a gem method.  I have tried increasing the global timeout with Watir.default_timeout = 90 to no effect.  I actually suspect something is wrong on my machine.  But full shut downs and cache clears do not seem to help."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495808823, "post_id": 44136385, "comment_id": 75420678, "body": "<code>Watir.default_timeout = 90</code> is for element to exist not for loading after the click."}, {"owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495810346, "post_id": 44136385, "comment_id": 75421662, "body": "@RAJ  \t \t So where do you set the timeout?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495824045, "post_id": 44136385, "comment_id": 75428933, "body": "@JasonKoelewyn prototype file!"}], "owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495585774, "creation_date": 1495546476, "last_edit_date": 1495585774, "question_id": 44136385, "link": "https://stackoverflow.com/questions/44136385/i-am-suddenly-getting-a-netreadtimeout-on-visit-with-pageobjects-watir-ruby", "title": "I am suddenly getting a NET::ReadTimeout On Visit with Pageobjects/Watir/Ruby", "body": "<p>I have a very stable Pageobjects/Watir/Ruby/Cucumber framework.\nIt is still working fine executing through Jenkins/Browserstack, and Browserstack Local from my machine.\nOther co-workers are  not getting this issue.</p>\n\n<p>On the visit step, I am getting <code>Net::ReadTimeout: Net::ReadTimeout</code>.\nThe IDE is reporting the failure on the Visit line in the Cucumber step file. </p>\n\n<p>The browser is launching and going to the correct page for the specified page object.\nThis has been observed in both Chrome and Firefox. (I am on a Mac) </p>\n\n<p>Nothing I have seen in Google looks close to my issue.\nI am at a loss.</p>\n"}]