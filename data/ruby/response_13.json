[{"tags": ["ruby", "bash", "version"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1469687429, "post_id": 29527125, "comment_id": 64641566, "body": "A better duplicate would be <a href=\"http://stackoverflow.com/questions/14637979/how-to-permanently-set-path-on-linux\" title=\"how to permanently set path on linux\">stackoverflow.com/questions/14637979/&hellip;</a> - sorry about that."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4765976, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OY9lqGChLzs/AAAAAAAAAAI/AAAAAAAAAC4/OXOOAdQvsno/photo.jpg?sz=128", "display_name": "galactichawk", "link": "https://stackoverflow.com/users/4765976/galactichawk"}, "edited": false, "score": 0, "creation_date": 1428615289, "post_id": 29527162, "comment_id": 47250450, "body": "I gave that a shot and I&#39;m still getting the same problem"}], "tags": [], "owner": {"reputation": 156696, "user_id": 813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/12ab1ed206c4093d0eb61843d86fa2aa?s=128&d=identicon&r=PG", "display_name": "Jeremy Ruten", "link": "https://stackoverflow.com/users/813/jeremy-ruten"}, "is_accepted": false, "score": 1, "last_activity_date": 1428536080, "creation_date": 1428536080, "answer_id": 29527162, "question_id": 29527125, "link": "https://stackoverflow.com/questions/29527125/bash-ruby-command-not-found-other-solutions-only-temporarily-fix/29527162#29527162", "title": "bash: ruby: command not found -- Other solutions only temporarily fix", "body": "<p>Try adding those lines to your <code>.bashrc</code> instead of <code>.bash_profile</code>. <code>.bashrc</code> gets executed every time you bring up a terminal window.</p>\n"}], "owner": {"reputation": 1, "user_id": 4765976, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OY9lqGChLzs/AAAAAAAAAAI/AAAAAAAAAC4/OXOOAdQvsno/photo.jpg?sz=128", "display_name": "galactichawk", "link": "https://stackoverflow.com/users/4765976/galactichawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "closed_date": 1469686434, "answer_count": 1, "score": 0, "last_activity_date": 1428536080, "creation_date": 1428535836, "question_id": 29527125, "link": "https://stackoverflow.com/questions/29527125/bash-ruby-command-not-found-other-solutions-only-temporarily-fix", "closed_reason": "Duplicate", "title": "bash: ruby: command not found -- Other solutions only temporarily fix", "body": "<p>I'm running kubuntu (kde) on a chromebook and have ruby installed, along with rails. Everytime I close an instance of the konsole, reopen it, and try to check ruby's version </p>\n\n<pre><code>ruby -v\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>bash: ruby: command not found\n</code></pre>\n\n<p>However, I'm able to get the version of rails</p>\n\n<p>I've been able to tempoirarly fix this by typing</p>\n\n<pre><code>echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bash_profile\necho 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bash_profile\nexec $SHELL -l\n</code></pre>\n\n<p>but when I close out of konsole again, I get the same error upon reopening.</p>\n"}, {"tags": ["ruby", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 4766423, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1a22a7fe122dc41bd7ef44fa3db2c45f?s=128&d=identicon&r=PG&f=1", "display_name": "Nappstir", "link": "https://stackoverflow.com/users/4766423/nappstir"}, "edited": false, "score": 0, "creation_date": 1428544718, "post_id": 29526960, "comment_id": 47210986, "body": "I am aware of the destructive method &#39;!&#39; called on (.map!), and that it will permanently  change the array. That must have been my issue is that I had my variable defined within the method. I had moved it out earlier, tested it (it worked), then moved it back in (still worked). Because I didn&#39;t refresh though, I thought that it could work with having it within the method. &gt;.&lt;"}, {"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428550665, "post_id": 29526960, "comment_id": 47212443, "body": "@CarySwoveland I&#39;d never given it much thought, but I think you&#39;re correct. Removed the IRB prompts, thank you for the tip!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428553714, "post_id": 29526960, "comment_id": 47213274, "body": "Travis, For reasons I don&#39;t fully appreciate, some people just don&#39;t like to mutate objects. (Granted, it simplifies debugging.) On the plus side, changing an object in place tends to be much faster (and of course uses less memory) than making a copy."}], "tags": [], "owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "is_accepted": false, "score": 1, "last_activity_date": 1428550600, "last_edit_date": 1428550600, "creation_date": 1428534956, "answer_id": 29526960, "question_id": 29526857, "link": "https://stackoverflow.com/questions/29526857/adding-one-to-all-integers-in-an-array/29526960#29526960", "title": "Adding one to all integers in an array", "body": "<p>I just ran this in the console, and I think you're misunderstanding how it works. With your current code:</p>\n\n<pre><code>def my_array_modification_method!(i_want_pets, num)\n\n    i_want_pets=[\"I\", \"want\", 3, \"pets\", \"but\", \"only\", \"have\", 2 ]\n    i_want_pets.map!{|i| i.is_a?(Integer) ? (i + num) : i;}\n\nend\n\nmy_array_modification_method!(i_want_pets, 1)\n</code></pre>\n\n<p>You're first defining a method <code>my_array_modification_method</code>, but <strong>none of the code in it has been run yet</strong>. Next, you call the method, with the arguments <code>i_want_pets</code> and <code>1</code>. Your problem is that <code>i_want_pets</code> hasn't been defined yet.</p>\n\n<p>I think this is what you want. Define your method like this (the following all on Ruby 2.2.1):</p>\n\n<pre><code>def my_array_modification_method!(i_want_pets, num) \n    i_want_pets.map!{|i| i.is_a?(Integer) ? (i + num) : i;}\nend\n =&gt; :my_array_modification_method! \n</code></pre>\n\n<p>Then make a variable later called whatever you want:</p>\n\n<pre><code>array_of_pet_things = [\"I\", \"want\", 3, \"pets\", \"but\", \"only\", \"have\", 2 ]\n =&gt; [\"I\", \"want\", 3, \"pets\", \"but\", \"only\", \"have\", 2] \n</code></pre>\n\n<p>Now, you can call the method you defined with <code>array_of_pet_things</code> as an argument:</p>\n\n<pre><code>my_array_modification_method!(array_of_pet_things, 1)\n =&gt; [\"I\", \"want\", 4, \"pets\", \"but\", \"only\", \"have\", 3] \n</code></pre>\n\n<p>Also, note that since your method uses <code>map!</code>, the original array <code>array_of_pet_things</code> will be modified:</p>\n\n<pre><code>array_of_pet_things\n =&gt; [\"I\", \"want\", 4, \"pets\", \"but\", \"only\", \"have\", 3]\n</code></pre>\n"}], "owner": {"reputation": 865, "user_id": 4766423, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1a22a7fe122dc41bd7ef44fa3db2c45f?s=128&d=identicon&r=PG&f=1", "display_name": "Nappstir", "link": "https://stackoverflow.com/users/4766423/nappstir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1428550600, "creation_date": 1428534382, "last_edit_date": 1428535075, "question_id": 29526857, "link": "https://stackoverflow.com/questions/29526857/adding-one-to-all-integers-in-an-array", "title": "Adding one to all integers in an array", "body": "<p>I am completely unsure why this isn't working. I had it working a second ago but now I can no longer get it to function properly. Initially, I'm trying to add 1 or (num) to all integers within the array. </p>\n\n<pre><code>def my_array_modification_method!(i_want_pets, num)\n\n    i_want_pets=[\"I\", \"want\", 3, \"pets\", \"but\", \"only\", \"have\", 2 ]\n    i_want_pets.map!{|i| i.is_a?(Integer) ? (i + num) : i;}\n\nend\n</code></pre>\n\n<p>When I try and run this:</p>\n\n<pre><code>my_array_modification_method!(i_want_pets, 1)\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>undefined local variable or method `i_want_pets' for #&lt;Context:0x0000000174e6a8&gt;\n(repl):10:in `initialize'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 0, "last_activity_date": 1428533778, "creation_date": 1428533778, "answer_id": 29526751, "question_id": 29526190, "link": "https://stackoverflow.com/questions/29526190/mongoid-queries-not-returning-anything-on-new-model-fields/29526751#29526751", "title": "Mongoid queries not returning anything on new model fields", "body": "<p>When you say:</p>\n\n<pre><code>Model.where(archived: false)\n</code></pre>\n\n<p>you're looking for documents in MongoDB the <code>archived</code> field is exactly <code>false</code>. If you just added your <code>archived</code> field then none of the documents in your database will have that field (and no, the <code>:default</code> doesn't matter) so there won't be any with <code>archived: false</code>.  You're probably better off looking for documents where <code>archived</code> is not <code>true</code>:</p>\n\n<pre><code>Model.where(:archived.ne =&gt; true).each(&amp;:archive!)\n</code></pre>\n\n<p>You might want to add a validation on <code>archived</code> to ensure that it is always <code>true</code> or <code>false</code> and that every document has that field.</p>\n"}], "owner": {"reputation": 171, "user_id": 4629691, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/1mXKh.jpg?s=128&g=1", "display_name": "elliotwesoff", "link": "https://stackoverflow.com/users/4629691/elliotwesoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 29526751, "answer_count": 1, "score": 0, "last_activity_date": 1428533778, "creation_date": 1428530618, "question_id": 29526190, "link": "https://stackoverflow.com/questions/29526190/mongoid-queries-not-returning-anything-on-new-model-fields", "title": "Mongoid queries not returning anything on new model fields", "body": "<p>I have a Rails application where I am trying to iterate over each object in a Model class depending on whether the object has been archived or not.</p>\n\n<pre><code>class Model\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  field :example_id, type: Integer\n  field :archived, type: Boolean, default: false\n\n  def archive_all\n    Model.all.where(archived: false).each do |m|\n      m.archive!\n    end\n  end\n\nend\n</code></pre>\n\n<p>However, the where clause isn't returning anything.  When I go into the console and enter these lines, here is what I get:</p>\n\n<pre><code>Model.where(example_id: 3).count   #=&gt; 23\nModel.where(archived: false).count #=&gt; 0\nModel.all.map(&amp;:archived) #=&gt; [false, false, false, ...]\n</code></pre>\n\n<p>I have other where clauses throughout the application and they seem to work fine.  If it makes any difference, the 'archived' field is one that I just recently added.</p>\n\n<p>What is happening here?  What am I doing wrong?</p>\n"}, {"tags": ["ruby", "arrays", "ruby-on-rails-3", "filter"], "answers": [{"comments": [{"owner": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "edited": false, "score": 0, "creation_date": 1428531313, "post_id": 29526283, "comment_id": 47207008, "body": "Thanks that&#39;s exactly what I was looking for"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 4, "last_activity_date": 1428531130, "creation_date": 1428531130, "answer_id": 29526283, "question_id": 29526179, "link": "https://stackoverflow.com/questions/29526179/array-of-arrays-element-comparison-ruby/29526283#29526283", "title": "Array of arrays element comparison Ruby", "body": "<pre><code>ar = [[1, 2, \"2 mins\"], [2, 3, \"4 mins\"], [3, 2, \"2 mins\"]]\np ar.group_by{|sub_ar| sub_ar[1]}.min.last\n# =&gt; [[1, 2, \"2 mins\"], [3, 2, \"2 mins\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1428543504, "creation_date": 1428543504, "answer_id": 29528281, "question_id": 29526179, "link": "https://stackoverflow.com/questions/29526179/array-of-arrays-element-comparison-ruby/29528281#29528281", "title": "Array of arrays element comparison Ruby", "body": "<p>I like how the following reads:</p>\n\n<pre><code>a = [[1, 2, \"2 mins\"], [2, 3, \"4 mins\"], [3, 2, \"2 mins\"]]\n\nmin_val = a.min_by { |e| e[1] }[1]\n  #=&gt; 2\na.select { |e| e[1] == min_val }\n  #=&gt; [[1, 2, \"2 mins\"], [3, 2, \"2 mins\"]]\n</code></pre>\n"}], "owner": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 29526283, "answer_count": 2, "score": 0, "last_activity_date": 1428543504, "creation_date": 1428530548, "last_edit_date": 1428530966, "question_id": 29526179, "link": "https://stackoverflow.com/questions/29526179/array-of-arrays-element-comparison-ruby", "title": "Array of arrays element comparison Ruby", "body": "<p>I have an array which looks like </p>\n\n<pre><code>[[1, 2, \"2 mins\"], [2, 3, \"4 mins\"], [3, 2, \"2 mins\"]]\n</code></pre>\n\n<p>How can I filter subarrays so that I get the minimum value at position 2 or in case of equality the array of equal elements?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 15585, "user_id": 14877, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/23f288aa92a6e2c6f8664fa23d200429?s=128&d=identicon&r=PG", "display_name": "Chuck Callebs", "link": "https://stackoverflow.com/users/14877/chuck-callebs"}, "is_accepted": false, "score": 2, "last_activity_date": 1428528598, "creation_date": 1428528598, "answer_id": 29525709, "question_id": 29525630, "link": "https://stackoverflow.com/questions/29525630/activerecord-query-of-nil-field/29525709#29525709", "title": "ActiveRecord Query of nil field", "body": "<p>Depending on your version of SQL, you'll need to format the query like so:</p>\n\n<p><code>Pack.first.pages.where(\"thumbnail is null or printable_page is null or preview is null\")</code></p>\n\n<p><code>field = null</code> doesn't work.</p>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 1, "last_activity_date": 1428531194, "last_edit_date": 1428531194, "creation_date": 1428529189, "answer_id": 29525850, "question_id": 29525630, "link": "https://stackoverflow.com/questions/29525630/activerecord-query-of-nil-field/29525850#29525850", "title": "ActiveRecord Query of nil field", "body": "<p>Databases implement three-value logic, in which null is neither true nor false. Null cannot be stated to be equal to, not equal to, greater then, or less than any other value, including null, so comparisons with null will always be null, and therefore not true. There is a separate test for nullness: \"thumbnail is null\".</p>\n\n<p>As a side note, remember that a predicate such as \"name = 'jim'\" in an RDBMS is a statement of truth which is tested against rows, which are included or not based on whether that statement is true.</p>\n\n<p>As another side note, this means that \"age in (1,null)\" might be true is age equals 1, but will not be true is age has a value of null. Similarly, \"age not in (1, null)\" is false for age = 2 because \"2 = null\" is false.</p>\n\n<p>Active record is generally pretty good at handling this as it can respond to a condition such as where(:age => my_age) by writing different predicates based on whether my_age is null or not. It will even handle my_age being an array of [1, 2, nil] correctly by writing a predicate such as \"where age in (1,2) or age is null\".</p>\n\n<p>Long story short, use:</p>\n\n<pre><code>Pack.first.pages.where('thumbnail is null OR printable_page is null OR preview is null')\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 3709592, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/21ca80ef1de7012eb9e733ba468faaf4?s=128&d=identicon&r=PG&f=1", "display_name": "whoaaallamapajama", "link": "https://stackoverflow.com/users/3709592/whoaaallamapajama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 29525850, "answer_count": 2, "score": 0, "last_activity_date": 1428531194, "creation_date": 1428528323, "question_id": 29525630, "link": "https://stackoverflow.com/questions/29525630/activerecord-query-of-nil-field", "title": "ActiveRecord Query of nil field", "body": "<p>This is my test query and result:</p>\n\n<pre><code>&gt;Pack.first.pages\n  Pack Load (0.3ms)  SELECT  \"packs\".* FROM \"packs\"   ORDER BY \"packs\".\"id\" ASC LIMIT 1\n  Page Load (0.1ms)  SELECT \"pages\".* FROM \"pages\"  WHERE \"pages\".\"pack_id\" = $1  [[\"pack_id\", 1]]\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Page id: 53, created_at: \"2015-02-27 21:59:12\", updated_at: \"2015-03-23 16:41:05\", pack_id: 1, name: \"test - pack12?\", client_name: \"\", thumbnail: nil, printable_page: nil, preview: nil, vuforia_archive: \"dinosaur.zip\", unity_bundle: \"girl.unity3d\", vuforia_identifier: nil, vuforia_archive_updated_at: \"2015-02-27 21:59:12\", unity_bundle_updated_at: \"2015-03-23 16:41:05\"&gt;]&gt;\n</code></pre>\n\n<p>The fields I am concerned with are nil, so why doesn't this work...</p>\n\n<pre><code>&gt; Pack.first.pages.where('thumbnail=? OR printable_page=? OR preview=?',nil,nil,nil)\n  Pack Load (0.3ms)  SELECT  \"packs\".* FROM \"packs\"   ORDER BY \"packs\".\"id\" ASC LIMIT 1\n  Page Load (0.1ms)  SELECT \"pages\".* FROM \"pages\"  WHERE \"pages\".\"pack_id\" = $1 AND (thumbnail=NULL OR printable_page=NULL OR preview=NULL)  [[\"pack_id\", 1]]\n=&gt; #&lt;ActiveRecord::AssociationRelation []&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1428528308, "post_id": 29525449, "comment_id": 47205572, "body": "Are you getting this error when deploying?"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1428528433, "post_id": 29525449, "comment_id": 47205632, "body": "this could help you <a href=\"https://devcenter.heroku.com/articles/ruby-versions\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/ruby-versions</a>"}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "reply_to_user": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1428528493, "post_id": 29525449, "comment_id": 47205674, "body": "@forthowin: Thanks, I already tried adding the binaries to the <code>PATH</code>, but unfortunately it has no effect."}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1428528551, "post_id": 29525449, "comment_id": 47205714, "body": "are you using rvm? install the same ruby version there then run bundle"}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "edited": false, "score": 0, "creation_date": 1428528604, "post_id": 29525449, "comment_id": 47205738, "body": "I am using rvm, and I did that. On my side everything is fine, I can run a local server. Only heroky crashes."}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1428528649, "post_id": 29525449, "comment_id": 47205763, "body": "@infused : I just checked, it also crashes right after pushing (without any page load). So : deploy, page load, bundle commands"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1428530168, "post_id": 29525449, "comment_id": 47206502, "body": "what does running ruby -v give you? and do rvm list to make sure you&#39;re using the right version"}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "reply_to_user": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1428567628, "post_id": 29525449, "comment_id": 47219687, "body": "@forthowin : Do you want me to run those command in my local environment, or on Heroku? <code>ruby -v</code> on Heroku gives me 2.1.5 (see post) and <code>rvm</code> is not installed."}, {"owner": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "edited": false, "score": 0, "creation_date": 1428590021, "post_id": 29525449, "comment_id": 47234645, "body": "Ignore my answer about <code>.ruby-version</code>: that was a fix for a local rvm problem not heroku. I have to admit I don&#39;t remember exactly what fixed it, but I think you are on the right track with changing the path."}, {"owner": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "edited": false, "score": 0, "creation_date": 1428590144, "post_id": 29525449, "comment_id": 47234733, "body": "Have you already tried: <code>heroku config:set PATH=bin:vendor&#47;bundle&#47;ruby&#47;2.1.5&#47;bin:&#47;usr&#47;local&#47;bin:&#47;usr&#47;bi&zwnj;&#8203;n:&#47;bin</code> ?"}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "edited": false, "score": 0, "creation_date": 1428590550, "post_id": 29525449, "comment_id": 47235020, "body": "Yes I did, see edit 4. I read the correct values with <code>heroku config -s</code> but  note from &#39;within&#39; <code>heroku run bash</code>."}, {"owner": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "edited": false, "score": 0, "creation_date": 1428592454, "post_id": 29525449, "comment_id": 47236479, "body": "Actually it looks like your path is what its supposed to be, mine is the same and it runs fine. Also you dont need to run <code>heroku run bundle install</code>. All you need to do is run it locally to generate the <code>Gemfile.lock</code> and then push to heroku so <code>bundle</code> not working is not a problem you need to worry about. See: <a href=\"http://devcenter.heroku.com/articles/bundler\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/bundler</a>.  For the other page not serving issue, are you manually running the command: <code>heroku run bin&#47;rails server -p 57371 -e production</code>?"}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "reply_to_user": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "edited": false, "score": 0, "creation_date": 1428594883, "post_id": 29525449, "comment_id": 47238292, "body": "@Sid Thanks for the PATH, it&#39;s good to know. And no, I just <code>git push heroku master</code>, and heroku starts the server by itself."}, {"owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "reply_to_user": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "edited": false, "score": 0, "creation_date": 1428595211, "post_id": 29525449, "comment_id": 47238536, "body": "@Sid if the PATH is normal, how come does heroku references a <code>2.1.0</code> version of ruby, then a <code>1.9.1</code> version, but never <code>2.1.5</code> (first quote, original post)? Also, since I started a fresh app, and that other people are running <code>2.1.5</code> without any problem, where could it come from in my repo?"}], "answers": [{"tags": [], "owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "is_accepted": true, "score": 4, "last_activity_date": 1428596896, "last_edit_date": 1495542267, "creation_date": 1428596896, "answer_id": 29544009, "question_id": 29525449, "link": "https://stackoverflow.com/questions/29525449/heroku-ruby-versions-mismatch/29544009#29544009", "title": "Heroku ruby versions mismatch", "body": "<p>Alright, 48 hours later, I found the solution here : <a href=\"https://stackoverflow.com/questions/16256247/heroku-bundle-error-rails-app\">other SO post</a>. </p>\n\n<p>Indeed, there was some leftover crap in my project, namely in the <code>bin</code> folder. Here's what solved it:</p>\n\n<p><code>$ bundle config --delete bin</code></p>\n\n<p><code>$ bundle exec rake rails:update:bin</code></p>\n\n<p>all localy. Then push to heroku, without forgetting to include the newly generated files. Hurray!</p>\n"}, {"comments": [{"owner": {"reputation": 1402, "user_id": 21087, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1b08e1791e0d3ead8cd996009d8d7b3b?s=128&d=identicon&r=PG", "display_name": "MegaTux", "link": "https://stackoverflow.com/users/21087/megatux"}, "edited": false, "score": 0, "creation_date": 1480357528, "post_id": 40620267, "comment_id": 68918613, "body": "that fixed my Gemfile.lock file. Thanks"}], "tags": [], "owner": {"reputation": 43, "user_id": 1672243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2459cf2bdd8e8e0033d3fd7640f006a?s=128&d=identicon&r=PG", "display_name": "Travis Kochel", "link": "https://stackoverflow.com/users/1672243/travis-kochel"}, "is_accepted": false, "score": 1, "last_activity_date": 1479246384, "creation_date": 1479246384, "answer_id": 40620267, "question_id": 29525449, "link": "https://stackoverflow.com/questions/29525449/heroku-ruby-versions-mismatch/40620267#40620267", "title": "Heroku ruby versions mismatch", "body": "<p>Just ran into a related issue involving a ruby version mismatch when deploying to Heroku. The issue was a conflicting version of bundler. Heroku locks each buildpack to a specific version of bundler.</p>\n\n<p>To fix, update bundler <code>gem update bundler</code>, <code>bundle install</code> and deploy again.</p>\n\n<p>More here: <a href=\"https://devcenter.heroku.com/articles/bundler-version\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/bundler-version</a></p>\n"}], "owner": {"reputation": 1057, "user_id": 2716377, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0JbwB.png?s=128&g=1", "display_name": "Nicolas Mattia", "link": "https://stackoverflow.com/users/2716377/nicolas-mattia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1572, "favorite_count": 1, "accepted_answer_id": 29544009, "answer_count": 2, "score": 1, "last_activity_date": 1479246384, "creation_date": 1428527627, "last_edit_date": 1428577588, "question_id": 29525449, "link": "https://stackoverflow.com/questions/29525449/heroku-ruby-versions-mismatch", "title": "Heroku ruby versions mismatch", "body": "<p>I am having a problem with Heroku and a Rails app. In my Gemfile I specify <code>ruby \"2.1.5\"</code> but my app crashes with the following log:</p>\n\n<pre><code>2015-04-08T20:54:15.248878+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 57371 -e production`\n2015-04-08T20:54:17.365771+00:00 app[web.1]: /app/vendor/bundle/ruby/2.1.0/gems/bundler-1.7.12/lib/bundler/definition.rb:380:in `validate_ruby!': Your Ruby version is 1.9.3, but your Gemfile specified 2.1.5 (Bundler::RubyVersionMismatch)\n2015-04-08T20:54:17.365791+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.1.0/gems/bundler-1.7.12/lib/bundler.rb:118:in 'setup'\n\n2015-04-08T20:54:17.365793+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.1.0/gems/bundler-1.7.12/lib/bundler/setup.rb:17:in 'top (required)'\n\n2015-04-08T20:54:17.365795+00:00 app[web.1]:    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in 'require'\n\n2015-04-08T20:54:17.365796+00:00 app[web.1]:    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in 'require'\n2015-04-08T20:54:17.365798+00:00 app[web.1]:    from /app/config/boot.rb:3:in '&lt;top (required)&gt;'\n2015-04-08T20:54:17.365800+00:00 app[web.1]:    from bin/rails:7:in 'require_relative'\n2015-04-08T20:54:17.365802+00:00 app[web.1]:    from bin/rails:7:in &lt;main&gt;\n\n2015-04-08T20:54:18.135689+00:00 heroku[web.1]: Process exited with status 1\n\n2015-04-08T20:54:18.155346+00:00 heroku[web.1]: State changed from starting to crashed\n2015-04-08T20:54:41.881395+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=....herokuapp.com request_id=1ec36521-d1ca-4ea3-b635-b79caf9b82c9 fwd=\"x.x.x.x\" dyno= connect= service= status=503 bytes=\n</code></pre>\n\n<p>and here are a few weird results of commands:</p>\n\n<p><code>heroku run ruby -v: ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]\n</code>\n<code>heroku run bundle install: Your Ruby version is 1.9.3, but your Gemfile specified 2.1.5 (Bundler::RubyVersionMismatch)</code></p>\n\n<p>Everything was fine before I switched my Gemfile from 1.9.3 to 2.1.5. Any help is appreciated. Also, it does not look like Heroku is using rvm, so I have no idea how they do their magic.</p>\n\n<p><strong>EDIT:</strong> I already tried deleting the app and creating a fresh, new one with version <code>2.1.5</code> (and then later <code>2.2.0</code>) in the Gemfile from the beginning (though I synced it from the same git repo).</p>\n\n<p><strong>EDIT 2:</strong> It does <em>not</em> actually crash on deploy, rather only on page serving, and when running <code>bundle(r)</code>. (so far)</p>\n\n<p><strong>EDIT 3:</strong> Every time I deploy, heroku starts with:</p>\n\n<pre><code>remote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.1.5\nremote: -----&gt; Installing dependencies using 1.7.12\nremote:        Ruby version change detected. Clearing bundler cache.\nremote:        Old: ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux]\nremote:        New: ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]\nremote:        Running: bundle install --without development:test --path vendo\n</code></pre>\n\n<p>(with correct versions for old/new)</p>\n\n<p><strong>EDIT 4:</strong> it seems that Heroku is not loading the environment variables correctly (or is it?), and so the wrong ruby version is loaded and used:</p>\n\n<pre><code>local$ heroku config -s | grep PATH\nPATH=/app/vendor/ruby-2.1.5/bin:/app/vendor/bundle/ruby/2.1.0/bin:/bin:/usr/bin:/app/bin:/app/vendor/bundle/bin\nlocal$ heroku run ruby -v\nruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]\nlocal$ heroku run bash\nheroku $ echo $PATH\n/app/bin:/app/vendor/bundle/bin:/app/vendor/bundle/ruby/2.1.0    /bin:/app/vendor/ruby-2.1.5/bin:/app/vendor/bundle/ruby/2.1.0    /bin:/bin:/usr/bin:/app/bin:/app/vendor/bundle/bin\nheroku $ cat .profile.d/ruby.sh | grep PATH\nexport GEM_PATH=\"$HOME/vendor/bundle/ruby/2.1.0:$GEM_PATH\"\nexport PATH=\"$HOME/bin:$HOME/vendor/bundle/bin:$HOME/vendor/bundle/ruby/2.1.0/bin:$PATH\"\n</code></pre>\n\n<p>The environment is looking for <code>ruby</code> in <code>/app/bin</code> instead of <code>/app/vendor/ruby-2.1.5/bin</code>. If, in the Heroku environment, I <code>export PATH</code> to the correct values, I can run <code>bundle</code> with no problem. Unfortunately, it seems that the instance serving the app is not.</p>\n\n<p>I could either change the <code>PATH</code> in <code>profile.d/ruby.sh</code> or create the <code>.ruby-version</code> file, though neither nano, nor pico nor vim are available on heroku. How am I supposed to?</p>\n"}, {"tags": ["ruby", "emacs", "rvm", "modeline"], "answers": [{"comments": [{"owner": {"reputation": 5291, "user_id": 937506, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f93e10abd0998d0c7e6d3ae32da7b83?s=128&d=identicon&r=PG", "display_name": "squiter", "link": "https://stackoverflow.com/users/937506/squiter"}, "edited": false, "score": 0, "creation_date": 1428529766, "post_id": 29525941, "comment_id": 47206301, "body": "I already use <code>rvm.el</code> but it not give me that information :("}, {"owner": {"reputation": 52120, "user_id": 291550, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1be785d1d788b82929e55fc83a9f0aaa?s=128&d=identicon&r=PG", "display_name": "Bozhidar Batsov", "link": "https://stackoverflow.com/users/291550/bozhidar-batsov"}, "reply_to_user": {"reputation": 5291, "user_id": 937506, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f93e10abd0998d0c7e6d3ae32da7b83?s=128&d=identicon&r=PG", "display_name": "squiter", "link": "https://stackoverflow.com/users/937506/squiter"}, "edited": false, "score": 0, "creation_date": 1428560421, "post_id": 29525941, "comment_id": 47215715, "body": "Ah, yes - I got confused with <code>rbenv.el</code>, which does this. Guess you can add logic similar to the one for <code>rbenv--modestring</code> in <code>rvm.el</code> - that should be pretty simple."}, {"owner": {"reputation": 52120, "user_id": 291550, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1be785d1d788b82929e55fc83a9f0aaa?s=128&d=identicon&r=PG", "display_name": "Bozhidar Batsov", "link": "https://stackoverflow.com/users/291550/bozhidar-batsov"}, "reply_to_user": {"reputation": 5291, "user_id": 937506, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f93e10abd0998d0c7e6d3ae32da7b83?s=128&d=identicon&r=PG", "display_name": "squiter", "link": "https://stackoverflow.com/users/937506/squiter"}, "edited": false, "score": 0, "creation_date": 1428561927, "post_id": 29525941, "comment_id": 47216485, "body": "Or you can borrow a page from Projectile&#39;s book - have a look <a href=\"https://github.com/bbatsov/projectile/blob/master/projectile.el#L2567\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 52120, "user_id": 291550, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1be785d1d788b82929e55fc83a9f0aaa?s=128&d=identicon&r=PG", "display_name": "Bozhidar Batsov", "link": "https://stackoverflow.com/users/291550/bozhidar-batsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1428529581, "creation_date": 1428529581, "answer_id": 29525941, "question_id": 29525403, "link": "https://stackoverflow.com/questions/29525403/how-to-show-rvm-info-into-emacs-mode-line/29525941#29525941", "title": "How to show RVM info into emacs mode-line?", "body": "<p>Take a look at <a href=\"https://github.com/senny/rvm.el\" rel=\"nofollow\">rvm.el</a>. I provides many features that make the use of RVM from Emacs more enjoyable.</p>\n"}, {"tags": [], "owner": {"reputation": 5291, "user_id": 937506, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f93e10abd0998d0c7e6d3ae32da7b83?s=128&d=identicon&r=PG", "display_name": "squiter", "link": "https://stackoverflow.com/users/937506/squiter"}, "is_accepted": false, "score": 0, "last_activity_date": 1428608808, "creation_date": 1428608808, "answer_id": 29547585, "question_id": 29525403, "link": "https://stackoverflow.com/questions/29525403/how-to-show-rvm-info-into-emacs-mode-line/29547585#29547585", "title": "How to show RVM info into emacs mode-line?", "body": "<p>I tried but I can't custom strings to <code>mode-line</code> so I customize all of it.  </p>\n\n<pre><code>;; modeline\n(defun branch-name ()\n  (when vc-mode\n    (concat \"\\ue0a0 \" (substring vc-mode 5))\n    ))\n\n(defun current-ruby ()\n  (when vc-mode\n    (replace-regexp-in-string \"\\n$\" \"\" (shell-command-to-string \"~/.rvm/bin/rvm-prompt\"))\n))\n\n(setq-default mode-line-format\n      (list\n       \"[\" mode-line-modified \"]\"\n       \"  \"\n       \"%b\"\n       \"  |  \"\n       'mode-name\n       \"  |  \"\n       '(:eval (projectile-project-name))\n       \" \"\n       '(:eval (branch-name))\n       \"  |  \"\n       '(:eval (current-ruby))\n       \"  |  \"\n       \"%p (%l,%c)\"\n       ))\n</code></pre>\n"}], "owner": {"reputation": 5291, "user_id": 937506, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f93e10abd0998d0c7e6d3ae32da7b83?s=128&d=identicon&r=PG", "display_name": "squiter", "link": "https://stackoverflow.com/users/937506/squiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428608808, "creation_date": 1428527405, "question_id": 29525403, "link": "https://stackoverflow.com/questions/29525403/how-to-show-rvm-info-into-emacs-mode-line", "title": "How to show RVM info into emacs mode-line?", "body": "<p>Hey guys I need to see my ruby version and gemset name in emacs mode-line. Do you know how to do it?  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3595, "user_id": 2462524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb0f238bf55efdc41c34ad5e315408?s=128&d=identicon&r=PG", "display_name": "phts", "link": "https://stackoverflow.com/users/2462524/phts"}, "edited": false, "score": 0, "creation_date": 1428527408, "post_id": 29525366, "comment_id": 47205136, "body": "What line the error is poined on?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1428527516, "post_id": 29525366, "comment_id": 47205187, "body": "You really should indent your Ruby code so it&#39;s more readable. I hope you&#39;ve got that in the original source. When trying to narrow down syntax errors it&#39;s often helpful to remove chunks of code temporarily to see if it resolves the problem. We all have days where a spurious <code>end</code> wrecks compilation."}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 4, "last_activity_date": 1428527554, "creation_date": 1428527554, "answer_id": 29525434, "question_id": 29525366, "link": "https://stackoverflow.com/questions/29525366/syntax-error-in-ruby-script/29525434#29525434", "title": "Syntax error in Ruby script", "body": "<p>You have an extra-<code>end</code> before <code>when \"delete\"</code>.</p>\n\n<pre><code>end\nwhen \"delete\"\n</code></pre>\n\n<p>Remove it. You should start indenting your code, so that it will be more evident the error.</p>\n\n<pre><code>movies = { \n    Transformers: 8,\n    Avengers: 10,\n    Loki: 7,\n    Chappie: 6\n}\nputs \"__type  add to add movie__\"\nputs \"__type update to ping a movie__\"\nputs \"__type rate to rate a movie__\"\nputs \"__display to see all_\"\n\n\nchoice=gets.chomp\ncase choice\nwhen 'add'\n  puts \"what movie would you like to watch?\"\n  title = gets.chomp\n  if movies[title.to_sym].nil?\n    puts \"What is the rating\"\n    rating=gets.chomp\n    movies[title.to_sym]=rating.to_i\n\n    puts \"you will watch #{title} at #{rating} ratings\"\n  else\n    puts \"The #{title} movie has alraedy been added and its rating is #(Rating}\"\n  end\n\nwhen \"update\"\n  puts \"what movie do you wanna update?\"\n  update1=gets.chomp\n  if movies[update1.to_sym].nil?\n    puts \"movie not found!\"\n  else\n    puts \"movie has been updated!\"\n  end\nwhen \"display\"\n  puts \"movies\"\nend # &lt;-- here is the affected end\nwhen \"delete\"\n  puts \"deleted\"\nelse\n  puts \"Error!\"\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4766131, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q6xL_cYsAvg/AAAAAAAAAAI/AAAAAAAAAW0/7irFz5NsQQE/photo.jpg?sz=128", "display_name": "grey jabesi", "link": "https://stackoverflow.com/users/4766131/grey-jabesi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1428527871, "answer_count": 1, "score": 0, "last_activity_date": 1428527554, "creation_date": 1428527214, "last_edit_date": 1428527299, "question_id": 29525366, "link": "https://stackoverflow.com/questions/29525366/syntax-error-in-ruby-script", "closed_reason": "Not suitable for this site", "title": "Syntax error in Ruby script", "body": "<p>Why am I getting a syntax error in the following code?</p>\n\n<pre><code>movies = { Transformers: 8,\nAvengers: 10,\nLoki: 7,\nChappie: 6\n}\nputs \"__type  add to add movie__\"\nputs \"__type update to ping a movie__\"\nputs \"__type rate to rate a movie__\"\nputs \"__display to see all_\"\n\n\nchoice=gets.chomp\ncase choice\nwhen 'add'\nputs \"what movie would you like to watch?\"\ntitle = gets.chomp\nif movies[title.to_sym].nil?\nputs \"What is the rating\"\nrating=gets.chomp\nmovies[title.to_sym]=rating.to_i\n\nputs \"you will watch #{title} at #{rating} ratings\"\nelse\nputs \"The #{title} movie has alraedy been added and its rating is #(Rating}\"\nend\n\nwhen \"update\"\nputs \"what movie do you wanna update?\"\nupdate1=gets.chomp\nif movies[update1.to_sym].nil?\nputs \"movie not found!\"\nelse\nputs \"movie has been updated!\"\nend\nwhen \"display\"\nputs \"movies\"\nend\nwhen \"delete\"\nputs \"deleted\"\nelse\n    puts \"Error!\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "controller", "partial"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1428526820, "post_id": 29525141, "comment_id": 47204827, "body": "How is <code>accomplished</code> defined? Is there a flag on your model, like <code>accomplished?</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1428527689, "post_id": 29525294, "comment_id": 47205261, "body": "Awesome Infused! The colors work but for some reason the tag drops to the line below instead of staying inline like before. I don&#39;t why this is or how to fix it. I tried overriding it in my css file with <code>.&lt;%= deadline_label_class(goal) %&gt; { display: block-inline }</code> but doesn&#39;t work or with <code>.deadline_label_class</code>. Any ideas?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1428528285, "post_id": 29525294, "comment_id": 47205561, "body": "Infused if I reposition the span above name in my file it works fine so I can just go with that, but I have a more impressing issue, which is in the code (which I left out in the question) I also have this line:  <code>&lt;%= raw goal.tag_list.map { |t| link_to t.titleize, tag_path(t), class: &#39;label label-info&#39; }.join(&#39; &#39;) %&gt;</code> if I try to switch in <code>&lt;%= raw goal.tag_list.map { |t| link_to t.titleize, tag_path(t), class: &quot;&lt;%= deadline_label_class(goal) %&gt;&quot; }.join(&#39; &#39;) %&gt;</code> I get an ugly error: <code>syntax error, unexpected $undefined, expecting &#39;)&#39; ..._buffer.safe_append=&#39;&quot; }.join(\\&#39; \\&#39;) %&gt; ... ^</code> etc"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1428528336, "post_id": 29525294, "comment_id": 47205587, "body": "I&#39;ll take a look into that infused if I hate the repositioning :)"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1428528461, "post_id": 29525294, "comment_id": 47205648, "body": "Ah, since that is already inside of <code>&lt;%= %&gt;</code> use <code>class: deadline_label_class(goal)</code> instead."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1428528946, "post_id": 29525294, "comment_id": 47205894, "body": "Awesome I was putting in the &quot;&quot; Thanks again very helpful :)"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 2, "last_activity_date": 1428526928, "creation_date": 1428526928, "answer_id": 29525294, "question_id": 29525141, "link": "https://stackoverflow.com/questions/29525141/how-to-render-different-versions-of-the-same-file/29525294#29525294", "title": "How to render different versions of the same file?", "body": "<p>Create a helper method that returns the correct classes for the goal's status. In application_helper.rb:</p>\n\n<pre><code>def deadline_label_class(goal)\n  if goal.accomplished?\n    'label label-info'\n  else\n    'label label-warning'\n  end\nend\n</code></pre>\n\n<p>This assumes that <code>Goal</code> has an instance method called <code>accomplished?</code> which returns true/false. You may have to write that method if it doesn't exist or use some other criteria.</p>\n\n<p>Then use the helper in the <strong>_goal.html.erb</strong> template: </p>\n\n<pre><code>&lt;table&gt;\n  &lt;tr&gt;\n    &lt;%= goal.name %&gt;\n    &lt;span class=\"&lt;%= deadline_label_class(goal) %&gt;\"&gt;\n      &lt;%= goal.deadline.strftime(\"%d %b %Y\") %&gt;\n    &lt;/span&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 29525294, "answer_count": 1, "score": 0, "last_activity_date": 1428526928, "creation_date": 1428526370, "question_id": 29525141, "link": "https://stackoverflow.com/questions/29525141/how-to-render-different-versions-of-the-same-file", "title": "How to render different versions of the same file?", "body": "<p>For example I have this file:</p>\n\n<p><strong>_goal.html.erb</strong></p>\n\n<pre><code>&lt;table&gt;\n  &lt;tr&gt;\n    &lt;%= goal.name %&gt;\n    &lt;span class=\"label label-info\"&gt;&lt;%= goal.deadline.strftime(\"%d %b %Y\") %&gt;&lt;/span&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>It is being rendered from the <strong>home</strong> page:</p>\n\n<pre><code> &lt;h1&gt;&lt;b&gt;Goals&lt;/b&gt;&lt;/h1&gt;\n   &lt;%= render @unaccomplished_goals %&gt;\n   &lt;%= render @accomplished_goals %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>How can we wrap an accomplished goal with <code>&lt;span class=\"label label-info-success\"&gt;</code> but if it is an unaccomplished goal keep it <code>&lt;span class=\"label label-info\"&gt;</code>?</p>\n\n<p>In the <strong>controller</strong>:</p>\n\n<pre><code>@accomplished_goals = current_user.goals.accomplished\n@unaccomplished_goals = current_user.goals.unaccomplished\n</code></pre>\n\n<p>Here was my <strong>latest attempt</strong>, which just made them all <code>-info</code>:</p>\n\n<pre><code>&lt;% if @unaccomplished_goals == true %&gt;\n  &lt;span class=\"label label-info\"&gt;&lt;%= goal.deadline.strftime(\"%d %b %Y\") %&gt;&lt;/span&gt;\n&lt;% else @accomplished_goals == true %&gt;\n  &lt;span class=\"label label-warning\"&gt;&lt;%= goal.deadline.strftime(\"%d %b %Y\") %&gt;&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Maybe you'll have more luck :)</p>\n\n<p>Thank you so much.</p>\n"}, {"tags": ["ruby", "io"], "answers": [{"tags": [], "owner": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "is_accepted": true, "score": 1, "last_activity_date": 1428526093, "creation_date": 1428526093, "answer_id": 29525061, "question_id": 29524812, "link": "https://stackoverflow.com/questions/29524812/cant-print-file-after-writing-to-it/29525061#29525061", "title": "Can&#39;t print file after writing to it", "body": "<p>It looks like the issue comes from the file not being closed. Changing <code>$stdout</code> doesn't close the file object it used to refer to. Add <code>$stdout.close</code> to the line before you reassign it to the old stdout.</p>\n"}], "owner": {"reputation": 49, "user_id": 4647279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6VPzR-E0A7M/AAAAAAAAAAI/AAAAAAAAAGc/jTiN4QPk6IE/photo.jpg?sz=128", "display_name": "Grace B.", "link": "https://stackoverflow.com/users/4647279/grace-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 29525061, "answer_count": 1, "score": 1, "last_activity_date": 1428526093, "creation_date": 1428525173, "question_id": 29524812, "link": "https://stackoverflow.com/questions/29524812/cant-print-file-after-writing-to-it", "title": "Can&#39;t print file after writing to it", "body": "<p>For some reason I cannot get this to print anything with the final line.</p>\n\n<pre><code>prev_std = STDOUT\n\n$stdout = File.open(reportname, 'w')\n\n# Several things happen to print to STDOUT here\n\n$stdout = STDOUT\n\n# Tell them that the report was written\nputs \"Report written to #{ reportname }\"\n\n# Slurp in the report ( FIXME )\nreporttext = File.open(reportname, 'r') { |f| f.read }\n\n# Print out the report after ( FIXME )\nputs reporttext\n</code></pre>\n\n<p>I've just written the report to the file, but somehow I can't read it back to the screen. I'm using the exact same string in the code to refer to the file in both cases. Checking at the shell prompt proves the file was written correctly, and yet I still can't get it to print to the screen.</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "calendar", "railscasts"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1428523863, "post_id": 29524165, "comment_id": 47203273, "body": "What&#39;s your question?"}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 2352617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1d4da975871a22056653a5c27cfd60?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2352617/stephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1428524720, "creation_date": 1428524720, "answer_id": 29524684, "question_id": 29524165, "link": "https://stackoverflow.com/questions/29524165/ruby-on-rails-railscast-213-calendar-sort-by-datetime-not-date/29524684#29524684", "title": "Ruby on Rails - Railscast #213 Calendar sort by datetime not date", "body": "<p>I'm going off the assumption your question is how do I organize my @lessons by datetime. There are a few different scenarios I'll mention. I'm a bit limited since I don't know from your post how you've organized your schema for the table, but I think the controller gives me a ballpark idea.</p>\n\n<p>1)\nYou should replace:</p>\n\n<pre><code>@lesson = Lesson.all\n@lesson_by_date = @lessons.group_by { |i| i.lesson_date.to_date }\n</code></pre>\n\n<p>with something that's quicker:</p>\n\n<pre><code>@lesson_by_date = Lesson.order('lesson_date')\n</code></pre>\n\n<p>2) \nIf you're wondering why your current code isn't working it's because your group_by block is trying to convert i.lesson_date to a date IE to_date. Instead you may want to try to_datetime.</p>\n\n<p>3) I would review <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/QueryMethods/order</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4642229, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f8ad51b22e103e524ad65034de71a4eb?s=128&d=identicon&r=PG&f=1", "display_name": "PilotLite", "link": "https://stackoverflow.com/users/4642229/pilotlite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428524720, "creation_date": 1428522866, "question_id": 29524165, "link": "https://stackoverflow.com/questions/29524165/ruby-on-rails-railscast-213-calendar-sort-by-datetime-not-date", "title": "Ruby on Rails - Railscast #213 Calendar sort by datetime not date", "body": "<p>I am building an app that involves a calendar. I found that the railscast for building a calendar although dated proved to be very helpful. I have everything up and running I am just trying to allow for the contents on each date to be organized by the datetime and not just the date so they appear in the right chronological order.</p>\n\n<p>My current controller looks like this:</p>\n\n<pre><code>def index\n  @lessons = Lesson.all\n  @lesson_by_date = @lessons.group_by { |i| i.lesson_date.to_date }\n  @date = params[:date] ? Date.parse(params[:date]) : Date.today\nend\n</code></pre>\n\n<p>Any help would be greatly appreciated. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "video", "ffmpeg", "converter"], "answers": [{"comments": [{"owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "edited": false, "score": 1, "creation_date": 1428524861, "post_id": 29524158, "comment_id": 47203791, "body": "This looks very promising.  Thanks for the info!"}], "tags": [], "owner": {"reputation": 14317, "user_id": 182402, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de96aa2f424a48b2510a7d29c65a8ace?s=128&d=identicon&r=PG", "display_name": "Wander Nauta", "link": "https://stackoverflow.com/users/182402/wander-nauta"}, "is_accepted": true, "score": 7, "last_activity_date": 1428532522, "last_edit_date": 1495539816, "creation_date": 1428522851, "answer_id": 29524158, "question_id": 29524095, "link": "https://stackoverflow.com/questions/29524095/convert-a-series-of-jpg-into-an-mov-file-in-ruby-or-using-any-language/29524158#29524158", "title": "Convert a series of jpg into an mov file in Ruby (or using any language)", "body": "<p>You could probably use FFmpeg to do this. Here's an example from <a href=\"https://trac.ffmpeg.org/wiki/Create%20a%20video%20slideshow%20from%20images\" rel=\"nofollow noreferrer\">the FFmpeg Wiki on the subject</a>:</p>\n\n<blockquote>\n  <p>ffmpeg -framerate 1/5 -i img%03d.jpg -c:v libx264 -r 30 -pix_fmt yuv420p -movflags +faststart out.mp4</p>\n</blockquote>\n\n<p>What this would do is...</p>\n\n<ul>\n<li><code>-i img%03d.jpg</code><br>\nRead input from a series of JPEG files named img001.jpg, img002.jpg and so on</li>\n<li><code>-framerate 1/5</code><br>\n...at one frame per five seconds...</li>\n<li><code>-c:v libx264</code><br>\n...then turn it into H.264/MPEG-4 AVC...</li>\n<li><code>-r 30</code><br>\n...at thirty frames per second...</li>\n<li><code>-pix_fmt yuv420p</code><br>\n...with YUV420 pixel format (really, all the FFmpeg flags work here)...</li>\n<li><code>-movflags +faststart</code><br>\n...after encoding completes, relocate some data to the beginning of the file so playback can begin before the file is completely downloaded...</li>\n<li><code>out.mp4</code><br>\n...and store it into out.mp4.</li>\n</ul>\n\n<p>If you were using this from Ruby you'd likely launch a <a href=\"https://stackoverflow.com/questions/7212573/\">subprocess</a>. The flags would be similar if you really want a (QuickTime) .mov file instead of H.264 MPEG-4.</p>\n"}], "owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 29524158, "answer_count": 1, "score": 1, "last_activity_date": 1428532522, "creation_date": 1428522658, "last_edit_date": 1428525468, "question_id": 29524095, "link": "https://stackoverflow.com/questions/29524095/convert-a-series-of-jpg-into-an-mov-file-in-ruby-or-using-any-language", "title": "Convert a series of jpg into an mov file in Ruby (or using any language)", "body": "<p>I am making a site in Ruby in which I have a series of images, (almost like a powerpoint) and I need to automatically convert those images into one continuous video file (mov, mpeg) that shows each image for 5 seconds or so.  Any one have any clues where to start. </p>\n\n<p>I'm also open to using another language if there are tools to get the job done.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4075453, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1807326374/picture?type=large", "display_name": "Matthew", "link": "https://stackoverflow.com/users/4075453/matthew"}, "edited": false, "score": 0, "creation_date": 1428530133, "post_id": 29524869, "comment_id": 47206485, "body": "This is something I was looking for, not the pop part, but the push. I knew I would have to check if data was empty and if so do something and else do something else, but this really makes me understand. It didnt even cross my mind to create a LinkedListNode object inside of the Stack.   I&#39;m not sure how to mark answered, but this answers my question."}], "tags": [], "owner": {"reputation": 411, "user_id": 3175947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d31900f9af4ed8297354cc432d5935b1?s=128&d=identicon&r=PG&f=1", "display_name": "bhb603", "link": "https://stackoverflow.com/users/3175947/bhb603"}, "is_accepted": true, "score": 2, "last_activity_date": 1428525387, "creation_date": 1428525387, "answer_id": 29524869, "question_id": 29524081, "link": "https://stackoverflow.com/questions/29524081/reverse-a-linkedlist-without-using-array-methods/29524869#29524869", "title": "Reverse a LinkedList WITHOUT using array methods", "body": "<p>You can use the Linked List datatype, rather than an array, to implement a Stack. I believe something like this would work:  </p>\n\n<pre><code>def push(element)\n  if data.nil?\n    data = LinkedListNode.new(element, nil)\n  else\n    data = LinkedListNode.new(element, data)\n  end\nend\n\ndef pop\n  # grab the top piece of data\n  popped = data.value\n  # shift the data\n  data = data.next_node\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4075453, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1807326374/picture?type=large", "display_name": "Matthew", "link": "https://stackoverflow.com/users/4075453/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 1, "accepted_answer_id": 29524869, "answer_count": 1, "score": 1, "last_activity_date": 1428525387, "creation_date": 1428522599, "question_id": 29524081, "link": "https://stackoverflow.com/questions/29524081/reverse-a-linkedlist-without-using-array-methods", "title": "Reverse a LinkedList WITHOUT using array methods", "body": "<p>So, I'm working on an assignment where a LinkedListNode class generates a linked list and prints the values to the user. What I am supposed to do is create a Stack class to 'push', 'pop', and reverse the linked list. The thing is, we are unable to use the array methods of .push, .pop, or anything else.</p>\n\n<p>I have been thinking and trying to look up what to do for over a day and have no clue on where to even start. Could someone please point me in the right direction of just getting the push method started so I can get some traction and maybe catch on?</p>\n\n<p>LinkedListNode class given: </p>\n\n<pre><code>class LinkedListNode\n  attr_accessor :value, :next_node\n\n  def initialize(value, next_node=nil)\n      @value = value\n      @next_node = next_node\n  end\nend\n</code></pre>\n\n<p>Starting skeleton of Stack class given: </p>\n\n<pre><code>class Stack\n  attr_reader :data\n\n  def initialize\n      @data = nil\n  end\n\n  # Push an item onto the stack\n  def push(element)\n  # IMPLEMENT ME!\n  end\n\n  # Pop an item off the stack.  \n  # Remove the last item that was pushed onto the\n  # stack and return it to the user\n  def pop\n      # IMPLEMENT ME\n  end\nend\n</code></pre>\n\n<p>I am not trying to ask for the answer straight out, I just can't figure out where to go. Thank you in advance for any help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4", "sidekiq"], "comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1428615706, "post_id": 29524048, "comment_id": 47250638, "body": "Are you certain that it&#39;s the open connections which are causing your memory load? That would be quite unusual."}, {"owner": {"reputation": 101, "user_id": 1905830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659a0ead99b6dddf76bf2d9d36be4d1d?s=128&d=identicon&r=PG", "display_name": "Stefanie", "link": "https://stackoverflow.com/users/1905830/stefanie"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 1, "creation_date": 1428619059, "post_id": 29524048, "comment_id": 47252032, "body": "I am pretty sure, I read that postgres will not release the memory back until the connection has been closed.  I watch the used memory on my postgres server increase as my workers run, but not decrease once the workers stop running.  Only restarting the application will free the memory."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1428619158, "post_id": 29524048, "comment_id": 47252066, "body": "It would be worth knowing exactly what is causing that memory burn. You typically want your connections to persist, as connection overhead is substantial; if you have cursors that are being held open indefinitely long or something, you&#39;re going to have issues, but that is a configuration issue rather than an app issue."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1428619608, "post_id": 29524048, "comment_id": 47252225, "body": "<a href=\"https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server\" rel=\"nofollow noreferrer\">wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server</a> may be useful - pay attention to <code>work_mem</code> and <code>shared_buffers</code>."}, {"owner": {"reputation": 101, "user_id": 1905830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659a0ead99b6dddf76bf2d9d36be4d1d?s=128&d=identicon&r=PG", "display_name": "Stefanie", "link": "https://stackoverflow.com/users/1905830/stefanie"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1428624521, "post_id": 29524048, "comment_id": 47253769, "body": "I have seen this article, and increased the shared_buffers to 6 of the 15GB on the server and left work_mem as the default."}, {"owner": {"reputation": 983, "user_id": 261428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b238111fbaec95d3f8e8917d3ee32a7e?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/261428/michael"}, "edited": false, "score": 0, "creation_date": 1457386088, "post_id": 29524048, "comment_id": 59374432, "body": "This issue can also present itself as a <code>psql: FATAL:  too many connections for role &quot;foobar&quot;</code> for heroku users (or other users with n number of connections available) \u2014 when i scale down or up a dyno running sidekiq the parent sk process and its children all do not shut down their connections to PG, and then open another set. This quickly exhausts your 20 connection limit (or whatever it may be) \u2014 IMO this has nothing to do with pool sizes."}, {"owner": {"reputation": 983, "user_id": 261428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b238111fbaec95d3f8e8917d3ee32a7e?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/261428/michael"}, "edited": false, "score": 1, "creation_date": 1457386149, "post_id": 29524048, "comment_id": 59374477, "body": "@stefanie What did you figure out for your situation?"}], "owner": {"reputation": 101, "user_id": 1905830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659a0ead99b6dddf76bf2d9d36be4d1d?s=128&d=identicon&r=PG", "display_name": "Stefanie", "link": "https://stackoverflow.com/users/1905830/stefanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1210, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1428615117, "creation_date": 1428522471, "last_edit_date": 1428615117, "question_id": 29524048, "link": "https://stackoverflow.com/questions/29524048/sidekiq-not-closing-postgresql-connections", "title": "Sidekiq not closing postgresql connections", "body": "<p>My Rails 4.1 sidekiq application is running into an issue with the active record connections to postgresql not being closed.  </p>\n\n<p>Since the connections are not being closed postgres is not releasing the memory and after a while I run out of memory on my postgres server(I have 15GB of ram and a fairly small database).  </p>\n\n<p>The other issue is that after awhile my sidekiq workers start to take about 10X as long as they should to run, and after a time the workers just get stuck and stop processing any new jobs.</p>\n\n<p>I have tried wrapping my worker code in the following to no affect:</p>\n\n<pre><code>def with_connection(&amp;block)\n  ActiveRecord::Base.connection_pool.with_connection do\n    yield block\n  end\nensure\n  ActiveRecord::Base.clear_active_connections!\n  ActiveRecord::Base.connection.close\nend\n</code></pre>\n\n<p>I have also added this in my unicorn.rb file in the after_fork method</p>\n\n<pre><code>if defined?(ActiveRecord::Base)\n  config = ActiveRecord::Base.configurations[Rails.env] || Rails.application.config.database_configuration[Rails.env]\n  config['reaping_frequency'] = 10 # seconds\n  ActiveRecord::Base.establish_connection(config)\nend\n</code></pre>\n\n<p>Is there anything I can do to get these connections to close, or at least release the postgres memory?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 1, "creation_date": 1428521597, "post_id": 29523690, "comment_id": 47201915, "body": "<a href=\"http://ruby-doc.org\" rel=\"nofollow noreferrer\">ruby-doc.org</a>.  <code>system</code> is a Kernel method, so <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Kernel.html#method-i-system</a>"}, {"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 2, "creation_date": 1428521712, "post_id": 29523690, "comment_id": 47201977, "body": "ruby-doc.org is the target of the first few links under the &quot;Reference Documentation&quot; section at <a href=\"https://www.ruby-lang.org/en/documentation/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/documentation</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "edited": false, "score": 0, "creation_date": 1428526938, "post_id": 29524317, "comment_id": 47204878, "body": "Got, it just one step away!"}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": true, "score": 3, "last_activity_date": 1428523446, "creation_date": 1428523446, "answer_id": 29524317, "question_id": 29523690, "link": "https://stackoverflow.com/questions/29523690/where-is-the-per-method-documentation-for-ruby/29524317#29524317", "title": "Where is the per-method documentation for ruby", "body": "<h1><a href=\"http://ruby-doc.org/\" rel=\"nofollow\">http://ruby-doc.org</a></h1>\n\n<p>Packages are organized into \"core\" and \"std-lib\".</p>\n\n<p>For example, here is the documentation for the <a href=\"http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-system\" rel=\"nofollow\"><code>Kernel#system</code> method</a>.</p>\n"}], "owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 29524317, "answer_count": 1, "score": -1, "last_activity_date": 1428523446, "creation_date": 1428521366, "last_edit_date": 1495535640, "question_id": 29523690, "link": "https://stackoverflow.com/questions/29523690/where-is-the-per-method-documentation-for-ruby", "title": "Where is the per-method documentation for ruby", "body": "<p>I am looking for the primary documentation for ruby functions. As in, the full documentation for the <code>system</code> command. </p>\n\n<p>For example, I have seen one guy who is using the <code>system</code> command with redirection arguments at <a href=\"https://stackoverflow.com/questions/10224481/running-a-command-from-ruby-displaying-and-capturing-the-output\">Running a command from Ruby displaying and capturing the output</a> but someone else who doesn't know that this exists <a href=\"https://stackoverflow.com/questions/690151/getting-output-of-system-calls-in-ruby\">Getting output of system() calls in Ruby</a></p>\n\n<p>I don't care about the answer to that specific question, but when I search <a href=\"https://www.ruby-lang.org/en/documentation/\" rel=\"nofollow noreferrer\">https://www.ruby-lang.org/en/documentation/</a> which seems authoritative, all I can find are links to third party \"guides\" or conceptual learning resources. What I need is the ruby equivalent of PHP's function reference at <a href=\"https://php.net/manual/en/funcref.php\" rel=\"nofollow noreferrer\">https://php.net/manual/en/funcref.php</a> Or <code>perldoc -f</code> for perl.</p>\n"}, {"tags": ["ruby", "activerecord", "gem"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 1, "last_activity_date": 1428523682, "creation_date": 1428523682, "answer_id": 29524382, "question_id": 29523570, "link": "https://stackoverflow.com/questions/29523570/how-to-pass-an-activerecord-connection-to-a-custom-gem-in-ruby/29524382#29524382", "title": "How to pass an activerecord connection to a custom gem in ruby", "body": "<p>Instead of passing the connection object itself, pass the db_config and then establish a new connection in your gem:</p>\n\n<p>In your main code:</p>\n\n<pre><code>MyGem::RoboCopy.run_and_parse_robocopy option, db_config\n</code></pre>\n\n<p>In your gem:</p>\n\n<pre><code>module MyGem\n  class RoboCopy\n    def self.run_and_parse_robocopy(options, db_config)\n      ActiveRecord::Base.establish_connection db_config\n      # ...\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 4233189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b35f1b68f392a1dbc6493bf39e54c36a?s=128&d=identicon&r=PG&f=1", "display_name": "Markoh", "link": "https://stackoverflow.com/users/4233189/markoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 29524382, "answer_count": 1, "score": 1, "last_activity_date": 1428523682, "creation_date": 1428520983, "question_id": 29523570, "link": "https://stackoverflow.com/questions/29523570/how-to-pass-an-activerecord-connection-to-a-custom-gem-in-ruby", "title": "How to pass an activerecord connection to a custom gem in ruby", "body": "<p>I am trying to pass an an activerecord connection to a gem that updates my database and several tables. I have been unsuccessful so far. I need multiple threads that all connect to the DB to add data. </p>\n\n<p>Main code that calls the MyGem gem</p>\n\n<pre><code>database_yml = File.expand_path('database.yml', File.dirname(__FILE__))\ndb_config = YAML.load_file(database_yml)\nconnection = ActiveRecord::Base.establish_connection(db_config)\n\nputs \"Command array: #{options_array}\"\nthreads = options_array.length\noptions_array.pmap(threads) do |option|\n  MyGem::RoboCopy.run_and_parse_robocopy option, connection\nend\n</code></pre>\n\n<p>The Gem Method this calls</p>\n\n<pre><code>module MyGem\n  class RoboCopy\n    def self.run_and_parse_robocopy(options, db_connection)\n      ActiveRecord::Base.connection db_connection\n      statistic = RobocopyData.create output_file: options[:output_file], file_gen_start: Time.now.strftime(\"%Y-%m-%d %H:%M:%S\"), status: 'Started'\n      #More Code\n    end\n  end\nend\n</code></pre>\n\n<p>This causes the following error:</p>\n\n<p>ArgumentError: wrong number of arguments calling <code>connection</code> (1 for 0)</p>\n\n<p>I tried </p>\n\n<pre>ActiveRecord::Base.connection = db_connection</pre>\n\n<p>but got this error:</p>\n\n<p>NoMethodError: undefined method `connection=' for ActiveRecord::Base:Class</p>\n\n<p>What am I missing? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "arrays", "hash"], "comments": [{"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "edited": false, "score": 0, "creation_date": 1428518700, "post_id": 29522737, "comment_id": 47200193, "body": "Perhaps you would get more assistance in optimization if you posted your algorithm over on CodeReview.SE?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428520430, "post_id": 29522737, "comment_id": 47201234, "body": "Welcome. When asking a question on how to code something we expect to see your code written to solve the problem. It&#39;s much better, and easier, for us to correct your code than it is for us to write something from scratch, especially if you have to try to fit what we wrote into your existing code. If you don&#39;t show us your code it really looks like you&#39;re trolling for solutions written by someone else, which doesn&#39;t help you in the long run."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428527573, "post_id": 29522737, "comment_id": 47205210, "body": "I would expect it would be easier to use the result if the value of fruit processed on just one service call were returned in array; e.g., <code>{ Kiwi: [[2015-04-05, 3]] }</code> rather than <code>{ Kiwi: [2015-04-05, 3] }</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428528184, "post_id": 29522737, "comment_id": 47205515, "body": "@theTinMan, I am perplexed as to why this question has been put on hold. I am addressing you because (as usual) the others who voted to code are all unfamiliar to me. The &quot;off-topic&quot; reason given is very vague and I don&#39;t see why it applies here. I thought it was quite a good question, and very clear."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428528908, "post_id": 29522737, "comment_id": 47205877, "body": "The question is clear but doesn&#39;t show any attempt to solve it. Remember that SO is not a &quot;give me code&quot; site. People, in their enthusiasm to &quot;help&quot;, or more likely, be first to give code in the hope of getting points, will throw up answers, but that doesn&#39;t really help anyone searching for a problem with their code, only those who are trying to find a solution with that data. Historically there were reasons for closing because of lack of code, which migrated to the current off-topic due to lack of code for debugging. This could have also been lack of detail I think."}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428534125, "post_id": 29522737, "comment_id": 47207978, "body": "@theTinMan - I do understand the concerns here and also that SO is not a &quot;give me code&quot; site even though I have came across questions here users are asking for solutions without providing their solution/idea of solution. I was just finding an easier way to solve the issue than what I did and had explained how am I doing it presently. Anyways, thinking that this question might be useful for someone in future, I am updating with code."}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1428535097, "post_id": 29522737, "comment_id": 47208281, "body": "He&#39;s added the code he merely described in words in his original post now, I&#39;ve voted to reopen."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428541287, "post_id": 29522737, "comment_id": 47209984, "body": "While you might find questions that are outside the guidelines, those should not be considered examples of how questions should be asked. That they weren&#39;t closed could be because they&#39;re historical. The consensus among users is that code is strongly encouraged and preferred. Remember, Stack Overflow&#39;s rules are set by the users themselves; While you will find exceptions, we try to follow the rules that have been set up."}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 2, "last_activity_date": 1428535301, "last_edit_date": 1428535301, "creation_date": 1428519871, "answer_id": 29523205, "question_id": 29522737, "link": "https://stackoverflow.com/questions/29522737/creating-hash-and-checking-if-the-key-already-exists/29523205#29523205", "title": "Creating hash and checking if the key already exists", "body": "<p>When you have these sorts of specific requirements, it's best to just create your own class - so you can store the data internally however is best.  Eg.</p>\n\n<pre><code>class FunkyThing\n  def initialize\n    @s = {}\n  end\n\n  def add date, arr\n    arr.each do |e|\n      k, v = e.flatten\n      ( @s[k] ||= [] ) &lt;&lt; [ date, v ]\n    end\n  end\n\n  def val\n    @s.map { |k, v| { k =&gt; v } }\n  end\nend\n</code></pre>\n\n<p>So then:</p>\n\n<pre><code>[142] pry(main)&gt; a = FunkyThing.new\n=&gt; #&lt;FunkyThing:0x007fbc23ed5cb0 @s={}&gt;\n[143] pry(main)&gt; a.add '2015-04-01', [{Apple: 3}, {Banana: 2}, {Oranges: 4}]\n=&gt; [{:Apple=&gt;3}, {:Banana=&gt;2}, {:Oranges=&gt;4}]\n[144] pry(main)&gt; a.val\n=&gt; [{:Apple=&gt;[[\"2015-04-01\", 3]]}, {:Banana=&gt;[[\"2015-04-01\", 2]]}, {:Oranges=&gt;[[\"2015-04-01\", 4]]}]\n[145] pry(main)&gt; a.add '2015-04-05', [{Apple: 4}, {Banana: 5}, {Oranges: 1}, {Kiwi: 3}]\n=&gt; [{:Apple=&gt;4}, {:Banana=&gt;5}, {:Oranges=&gt;1}, {:Kiwi=&gt;3}]\n[146] pry(main)&gt; a.val\n=&gt; [{:Apple=&gt;[[\"2015-04-01\", 3], [\"2015-04-05\", 4]]}, {:Banana=&gt;[[\"2015-04-01\", 2], [\"2015-04-05\", 5]]}, {:Oranges=&gt;[[\"2015-04-01\", 4], [\"2015-04-05\", 1]]}, {:Kiwi=&gt;[[\"2015-04-05\", 3]]}]\n[147] pry(main)&gt; \n</code></pre>\n\n<p>Note that the first output is different from what you asked for in your question, because the values are already nested at a second level, I think this is probably what you'd want anyway so I left it as is.</p>\n"}, {"comments": [{"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "edited": false, "score": 0, "creation_date": 1428521686, "post_id": 29523212, "comment_id": 47201967, "body": "Yeah if my final data holder was a hash, it would have become much easier. But I need an array as the receiver is a third party who needs an array. I could have created a hash and then converted it to an array, but I am trying to see if what I want can be done more quickly in a single iteration."}], "tags": [], "owner": {"reputation": 662, "user_id": 4747096, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b85639c3c1cc226a5962b469c8bbbab?s=128&d=identicon&r=PG&f=1", "display_name": "IvanSelivanov", "link": "https://stackoverflow.com/users/4747096/ivanselivanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1428519886, "creation_date": 1428519886, "answer_id": 29523212, "question_id": 29522737, "link": "https://stackoverflow.com/questions/29522737/creating-hash-and-checking-if-the-key-already-exists/29523212#29523212", "title": "Creating hash and checking if the key already exists", "body": "<p>Something like this, maybe:</p>\n\n<pre><code>array_of_possible_keys.each do |key|\n    if my_final_hash.has_key?(key)\n       do something\n    else\n       do other thing\n    end\nend\n</code></pre>\n\n<p>You won't have to iterate through your arrays if you'll use hashes instead. And I don't see any reason for not replacing </p>\n\n<pre><code>my_array = [{Apple: 4}, {Banana: 5}, {Oranges: 1}, {Kiwi: 3}]\nmy_final_array = [{Apple: [2015-04-01, 3]}, {Banana: [2015-04-01, 2]}, {Oranges: [2015-04-01, 4]}]\n</code></pre>\n\n<p>with </p>\n\n<pre><code>my_hash= {Apple: 4, Banana: 5, Oranges: 1, Kiwi: 3}\nmy_final_hash = {Apple: [2015-04-01, 3], Banana: [2015-04-01, 2], Oranges: [2015-04-01, 4]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428541500, "post_id": 29523568, "comment_id": 47210060, "body": "When answering questions with code, it really helps if you explain what the code does, which educates the person attempting to use it. Handing out code is akin to handing a starving person a fish. Explaining the code is akin to teaching the starving person how to fish. There&#39;s a big difference in what they can do with the two different responses."}, {"owner": {"reputation": 949, "user_id": 4765343, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046776462003402/picture?type=large", "display_name": "Joshua Arvin Lat", "link": "https://stackoverflow.com/users/4765343/joshua-arvin-lat"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428559082, "post_id": 29523568, "comment_id": 47215092, "body": "Thanks @theTinMan! I&#39;ve added a quick summary of what the code does :)"}], "tags": [], "owner": {"reputation": 949, "user_id": 4765343, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046776462003402/picture?type=large", "display_name": "Joshua Arvin Lat", "link": "https://stackoverflow.com/users/4765343/joshua-arvin-lat"}, "is_accepted": false, "score": 0, "last_activity_date": 1428559021, "last_edit_date": 1428559021, "creation_date": 1428520982, "answer_id": 29523568, "question_id": 29522737, "link": "https://stackoverflow.com/questions/29522737/creating-hash-and-checking-if-the-key-already-exists/29523568#29523568", "title": "Creating hash and checking if the key already exists", "body": "<p>Here's a function that accepts the current version of the array, the date, and the new array to be processed. </p>\n\n<p>If it's the first service call, a new array is created based on the parameter time and array to be processed. For succeeding service calls, a hash is created based on the current version of the array and then the parameter (new) array is processed to add values to the hash. Finally, the hash is converted back to its original array form.</p>\n\n<p>Kindly refer to the example code below:</p>\n\n<p><strong>Solution</strong></p>\n\n<pre><code>def process_array(old_array: nil, date: date, my_array: my_array) \n  unless old_array\n    # service call # 1\n    my_array.each do |key_value_pair|\n      pair = key_value_pair.to_a.first\n      key = pair[0]\n      value = pair[1]\n\n      key_value_pair[key] = [date, value]\n    end\n\n    return my_array\n  else\n    # service call # 2 onwards\n    hash = {}\n\n    old_array.each do |key_value_pair|\n      pair = key_value_pair.to_a.first\n      key = pair[0]\n      value = pair[1]\n\n      hash[key] = value\n    end\n\n    my_array.each do |key_value_pair|\n      pair = key_value_pair.to_a.first\n      key = pair[0]\n      value = pair[1]\n\n      if hash.has_key?(key)\n        unless hash[key].first.kind_of?(Array)\n          hash[key] = [hash[key]]\n        end\n\n        hash[key] &lt;&lt; [date, value]\n      else\n        hash[key] = [date, value]\n      end\n    end\n\n    output_array = []\n\n    hash.each do |key, value|\n      new_hash = {}\n      new_hash[key] = value\n      output_array &lt;&lt; new_hash\n    end\n\n    output_array\n  end\nend\n</code></pre>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>service_1 = [{Apple: 3}, {Banana: 2}, {Oranges: 4}]\narray_1 = process_array(old_array: nil, date: \"2015-04-01\", my_array: service_1)\nputs array_1.to_s\n# =&gt; [{:Apple=&gt;[\"2015-04-01\", 3]}, {:Banana=&gt;[\"2015-04-01\", 2]}, {:Oranges=&gt;[\"2015-04-01\", 4]}]\n\nservice_2 = [{Apple: 4}, {Banana: 5}, {Oranges: 1}, {Kiwi: 3}]\narray_2 = process_array(old_array: array_1, date: \"2015-04-05\", my_array: service_2)\nputs array_2.to_s\n# =&gt; [{:Apple=&gt;[[\"2015-04-01\", 3], [\"2015-04-05\", 4]]}, {:Banana=&gt;[[\"2015-04-01\", 2], [\"2015-04-05\", 5]]}, {:Oranges=&gt;[[\"2015-04-01\", 4], [\"2015-04-05\", 1]]}, {:Kiwi=&gt;[\"2015-04-05\", 3]}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1428565699, "last_edit_date": 1428565699, "creation_date": 1428553452, "answer_id": 29529742, "question_id": 29522737, "link": "https://stackoverflow.com/questions/29522737/creating-hash-and-checking-if-the-key-already-exists/29529742#29529742", "title": "Creating hash and checking if the key already exists", "body": "<p>If you are storing the data like this:</p>\n\n<pre><code>data1 = [{ date: \"2015-04-01\",\n            my_array: [{Apple: 3}, {Banana: 2}, {Oranges: 4}] },\n          { date: \"2015-04-05\",\n            my_array: [{Apple: 4}, {Banana: 5}, {Oranges: 1}, {Kiwi: 3}] }]\n</code></pre>\n\n<p>consider changing that to:</p>\n\n<pre><code>data2 = data1.map { |g|\n  { date: g[:date],\n    my_hash: Hash[g[:my_array].flat_map(&amp;:to_a)] }\n}\n  #=&gt; [{:date=&gt;\"2015-04-01\",\n  #     :my_hash=&gt;{:Apple=&gt;3, :Banana=&gt;2, :Oranges=&gt;4}},\n  #    {:date=&gt;\"2015-04-05\",\n  #     :my_hash=&gt;{:Apple=&gt;4, :Banana=&gt;5, :Oranges=&gt;1, :Kiwi=&gt;3}}]\n</code></pre>\n\n<p>I don't know if that would work better for you purposes, but I wanted you to see it. Then you could get the desired grouping as follows:</p>\n\n<pre><code>result = data2.each_with_object({}) do |g,h|\n  g[:my_hash].each do |k,v|\n    h.update(k=&gt;[g[:date],v]) do |_,o,n|\n      case o.first\n      when Array then o.concat(n)\n      else [o,n]\n      end\n    end\n  end\nend\n  #=&gt; {:Apple=&gt;  [[\"2015-04-01\", 3], [\"2015-04-05\", 4]],\n  #    :Banana=&gt; [[\"2015-04-01\", 2], [\"2015-04-05\", 5]],\n  #    :Oranges=&gt;[[\"2015-04-01\", 4], [\"2015-04-05\", 1]],\n  #    :Kiwi=&gt;    [\"2015-04-05\", 3]} \n</code></pre>\n\n<p>Well, no, that's not quite what you asked for, but I wanted you see that as well, should you find it a more useful data structure. It's easy to convert this to what you asked for, and I will do that below, but first, I want to explain a few things about the above calculation.</p>\n\n<p>The calculation of <code>result</code> employs the form of <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-update\" rel=\"nofollow\">Hash#update</a> (aka <code>merge!</code>) that uses a block to to determine the values of keys that are present in both hashes being merged. The block variables are <code>k,o,n</code>, where:</p>\n\n<ul>\n<li><code>k</code> is the common key (which I've changed to <code>_</code> to signify that it's not being used in the block);</li>\n<li><code>o</code> (for \"old\") is the value of <code>k</code> in <code>h</code>, the hash being constructed; and</li>\n<li><code>n</code> (for \" new\") is the value of <code>k</code> in <code>g</code>, the hash being merged. </li>\n</ul>\n\n<p>If you want the value of <code>:Kiwi</code> above to to be <code>[[\"2015-04-05\", 3]]</code> (which I think would make life easier when processing the result), simplify <code>update</code> to:</p>\n\n<pre><code>h.update(k=&gt;[[g[:date],v]]) { |_,o,n| o+n } \n</code></pre>\n\n<p>To convert <code>result</code> to the form you asked for:</p>\n\n<pre><code>result.map { |k,a| { k=&gt;a } }\n  #=&gt; [{:Apple=&gt;  [[\"2015-04-01\", 3], [\"2015-04-05\", 4]]},\n  #    {:Banana=&gt; [[\"2015-04-01\", 2], [\"2015-04-05\", 5]]},\n  #    {:Oranges=&gt;[[\"2015-04-01\", 4], [\"2015-04-05\", 1]]},\n  #    {:Kiwi=&gt;[\"2015-04-05\", 3]}] \n</code></pre>\n"}], "owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 29523205, "answer_count": 4, "score": 0, "last_activity_date": 1428599582, "creation_date": 1428518206, "last_edit_date": 1428541345, "question_id": 29522737, "link": "https://stackoverflow.com/questions/29522737/creating-hash-and-checking-if-the-key-already-exists", "title": "Creating hash and checking if the key already exists", "body": "<p>The following data is available to me in my method:    </p>\n\n<ul>\n<li><p>data from first service call:</p>\n\n<pre><code>date: 2015-04-01\nmy_array = [{Apple: 3}, {Banana: 2}, {Oranges: 4}] \n</code></pre></li>\n<li><p>data from second service call:</p>\n\n<pre><code>date: 2015-04-05    \nmy_array = [{Apple: 4}, {Banana: 5}, {Oranges: 1}, {Kiwi: 3}]\n</code></pre></li>\n</ul>\n\n<p>At the end of the method, I would like to return an array of hashes which would have data collected from multiple service calls.</p>\n\n<p>The logic should check if the key is already present in the hash, if yes then add the values to the existing key and if not then create a key-value object for that new key. As for this example, my hash after the first service call would look like:</p>\n\n<pre><code>my_final_array = [{Apple: [2015-04-01, 3]}, {Banana: [2015-04-01, 2]}, {Oranges: [2015-04-01, 4]}]\n</code></pre>\n\n<p>However after we get the data from the second service call, I want my final array to be:</p>\n\n<pre><code>my_final_array = [{Apple: [[2015-04-01, 3], [2015-04-05, 4]]}, {Banana: [[2015-04-01, 2], [2015-04-05, 5]]}, {Oranges: [[2015-04-01, 4], [2015-04-05, 1]]}, {Kiwi: [2015-04-05, 3]}]\n</code></pre>\n\n<p>Is there an easy way I can get what I am expecting? </p>\n\n<p>The algorithm which I have is iterating through the data two times i.e. once I create an array to collect the data from all the service calls and then when I iterate over the array to group by keys. </p>\n\n<p>Here is the way I was trying to solve it initially:</p>\n\n<pre><code>dates_array.each do |week_date|\n    my_array = #Collect data returned by service for each week_date.\n\n    my_array.each do |sample_data|\n        sample_array &lt;&lt; [date, sample_data.keys.first, sample_data.values.first]\n    end\nend\n\n    sample_hash = sample_array.each_with_object({}) { |data_value, key_name| \n        (key_name[data_value[1]] ||= []) &lt;&lt; data_value.values_at(0,2)\n    }\n\n    #Convert sample_hash to my_final_array for third party input.\n</code></pre>\n"}, {"tags": ["ruby", "imagemagick", "minimagick"], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 9096103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YleDA.jpg?s=128&g=1", "display_name": "Navid Khan", "link": "https://stackoverflow.com/users/9096103/navid-khan"}, "edited": false, "score": 0, "creation_date": 1582866181, "post_id": 29604728, "comment_id": 106931606, "body": "Hi, could you please explain what each of the lines inside the block achieve?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1428926230, "creation_date": 1428926230, "answer_id": 29604728, "question_id": 29522707, "link": "https://stackoverflow.com/questions/29522707/minimagick-cut-circle-out-of-square-image/29604728#29604728", "title": "MiniMagick : Cut circle out of square image", "body": "<p>Just use <a href=\"https://github.com/minimagick/minimagick#metal\" rel=\"nofollow\">Metal</a>:</p>\n\n<pre><code>require 'mini_magick'\n\nMiniMagick::Tool::Convert.new do |cvrt|\n cvrt.size '300x300'\n cvrt &lt;&lt; 'xc:transparent'\n cvrt.fill 'image.png'\n cvrt.draw \"circle 240,90 290,90\"\n cvrt.crop '100x100+190+40'\n cvrt.repage.+\n cvrt &lt;&lt; 'circle.png'\nend\n</code></pre>\n\n<p>I personally never try to remember all this domestic method names and always use the metal core approach.</p>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 3877598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PYaB.jpg?s=128&g=1", "display_name": "tchret", "link": "https://stackoverflow.com/users/3877598/tchret"}, "edited": false, "score": 1, "creation_date": 1429440304, "post_id": 29716920, "comment_id": 47591154, "body": "Hi Alex, in my case CSS  has no impact. In the same method I get a square image from GitHub, I round it and insert it in an other image, to get a personalized thumbnail"}], "tags": [], "owner": {"reputation": 56, "user_id": 2960757, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000961567618/picture?type=large", "display_name": "Alex Scott", "link": "https://stackoverflow.com/users/2960757/alex-scott"}, "is_accepted": false, "score": 0, "last_activity_date": 1429357801, "creation_date": 1429357801, "answer_id": 29716920, "question_id": 29522707, "link": "https://stackoverflow.com/questions/29522707/minimagick-cut-circle-out-of-square-image/29716920#29716920", "title": "MiniMagick : Cut circle out of square image", "body": "<p>Is this for a website user upload? If it is, you would probably be best using CSS to turn the image into a circle, it would save a lot of server processing and if you feel that in the future you would like to revert back to a square image, it's a lot easier than individually changing the pictures back to the square versions, it's maybe just one line of CSS code.</p>\n"}], "owner": {"reputation": 142, "user_id": 3877598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PYaB.jpg?s=128&g=1", "display_name": "tchret", "link": "https://stackoverflow.com/users/3877598/tchret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1433, "favorite_count": 1, "accepted_answer_id": 29604728, "answer_count": 2, "score": 11, "last_activity_date": 1429369249, "creation_date": 1428518120, "last_edit_date": 1495542514, "question_id": 29522707, "link": "https://stackoverflow.com/questions/29522707/minimagick-cut-circle-out-of-square-image", "title": "MiniMagick : Cut circle out of square image", "body": "<p>I need to transform a square image in circle image with <a href=\"https://github.com/minimagick/minimagick\" rel=\"nofollow noreferrer\">MiniMagick</a>.</p>\n\n<p>I know there is a <a href=\"https://stackoverflow.com/questions/9026935/imagemagick-crop-square-from-circle\">way</a> with <code>ImageMagick</code>:</p>\n\n<pre><code>convert -size 300x300 xc:transparent -fill \"image.png\" -draw \"circle 240,90 290,90\" -crop 100x100+190+40 +repage circle1.png\n</code></pre>\n\n<p>I've tried to translate :</p>\n\n<pre><code>img.combine_options do |c|\n  c.draw \"circle 240,90 290,90\"\n  c.crop \"100x100+190+40\"\n  c.repage.+\nend\n</code></pre>\n\n<p>I get this stuff, a black circle with my big nose as background image :</p>\n\n<p><img src=\"https://i.stack.imgur.com/En64A.png\" alt=\"enter image description here\"></p>\n\n<p>if anyone know how to translate this properly... please !!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1428519338, "post_id": 29522644, "comment_id": 47200585, "body": "looks like you don&#39;t have permission to write to wherever the gem is being installed"}, {"owner": {"reputation": 559, "user_id": 200421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1a892ec7114c0282ff96d237e301a0dd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/200421/matt"}, "reply_to_user": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1428520419, "post_id": 29522644, "comment_id": 47201228, "body": "can I change that in my console with a command prompt to change the permission of the file? I ran as admin and still got the same message?"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1428556746, "post_id": 29522644, "comment_id": 47214222, "body": "I know this isn&#39;t a direct answer to your question, but just to give you some honest advice because I used to be in your shoes, I recommend using Linux or Max OS when working with Rails.  The ecosystem is riddled with so many gems written with native c-extensions that&#39;s its almost impossible to intelligibly do serious production work in it.  Not that I want to discourage you because I do want this to change, but it&#39;s an uphill battle: <a href=\"https://gist.github.com/KelseyDH/11198922#file-ruby_rails_windows-md\" rel=\"nofollow noreferrer\">gist.github.com/KelseyDH/11198922#file-ruby_rails_windows-md</a>"}, {"owner": {"reputation": 559, "user_id": 200421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1a892ec7114c0282ff96d237e301a0dd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/200421/matt"}, "edited": false, "score": 0, "creation_date": 1428563385, "post_id": 29522644, "comment_id": 47217210, "body": "I appreciate it and I&#39;m saving up to buy a mac. Been down this road too many times."}], "owner": {"reputation": 559, "user_id": 200421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1a892ec7114c0282ff96d237e301a0dd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/200421/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428517913, "creation_date": 1428517913, "question_id": 29522644, "link": "https://stackoverflow.com/questions/29522644/how-do-i-make-sure-that-gem-install-sdoc-v-0-4-1-succeeds-before-bundling", "title": "How do I ? Make sure that `gem install sdoc -v &#39;0.4.1&#39;` succeeds before bundling", "body": "<p>Trying to update after switching ruby versions. Here's what I get after I run bundle update:</p>\n\n<p><code>Errno::EACCES: Permission denied - C:/RailsInstaller/Ruby2.0.0/bin/sdoc.bat\n An error occurred while installing sdoc (0.4.1), and Bundler cannot continue.\n Make sure that gem install sdoc -v '0.4.1'</code> succeeds before bundling.</p>\n\n<p>I tried searching for the error in google and stack overflow with a bunch of dead ends. Any help would be appreciated.  </p>\n\n<p>I'm running windows 7, ruby 2.0.0p598, and rails 4.1.8\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1428518301, "post_id": 29522497, "comment_id": 47199977, "body": "Welcome. When wording a question it helps to not be worried too much about being friendly or chatty. Stick closely to the facts, ask a good, well thought-out and researched question, and you&#39;ll do well. Consider your question to be an entry in a reference book, something like Wikipedia, since Stack Overflow aims to be like a cookbook of programming questions with answers that help solve the problem. It&#39;s not a conversation, it&#39;s a statement of the problem with possible solutions."}, {"owner": {"reputation": 177, "user_id": 1582670, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d9a038b93a1267e72cc0acb89956cf09?s=128&d=identicon&r=PG", "display_name": "splatoperator", "link": "https://stackoverflow.com/users/1582670/splatoperator"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1428518637, "post_id": 29522497, "comment_id": 47200156, "body": "Thanks for your help.  Will do in the future."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 1582670, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d9a038b93a1267e72cc0acb89956cf09?s=128&d=identicon&r=PG", "display_name": "splatoperator", "link": "https://stackoverflow.com/users/1582670/splatoperator"}, "is_accepted": false, "score": 0, "last_activity_date": 1428680109, "creation_date": 1428680109, "answer_id": 29565376, "question_id": 29522497, "link": "https://stackoverflow.com/questions/29522497/passing-the-current-user-id-through-nested-attributes-in-rails/29565376#29565376", "title": "Passing the current_user ID through nested_attributes in Rails", "body": "<p>In case anyone runs across a problem like this.  Look at the rails log and figure out what the params hash looks like.  The problem I had was that due to building multiple attachment fields, :discussion_attachments_attributes pointed to a hash who's key values were the index of the array of attachments.  In my case, there were 3 fields.</p>\n\n<p>So, I created a private method in the discussions controller:</p>\n\n<pre><code>def set_attachments_created_by\n attrs = params[:discussion][:discussion_attachments_attributes]\n attrs['0'][:created_by] = current_user.PersonID if attrs['0'].present?\n attrs['1'][:created_by] = current_user.PersonID if attrs['1'].present?\n attrs['2'][:created_by] = current_user.PersonID if attrs['2'].present?\nend\n</code></pre>\n\n<p>Then in create, I call the method before I create the discussion:</p>\n\n<pre><code>def create\n  set_attachments_created_by if params[:discussion][:discussion_attachments_attributes].present?\n  @discussion = Discussion.new(discussion_params)\n  @discussion.created_by = current_user.PersonID\n  ....\n</code></pre>\n\n<p>There's probably a more elegant way to do this, but it works for this purpose and allows the nested_attribute to pass through to the DiscussionAttachments model.  Just remember to add :created_by in the strong parameters declaration.</p>\n"}], "owner": {"reputation": 177, "user_id": 1582670, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d9a038b93a1267e72cc0acb89956cf09?s=128&d=identicon&r=PG", "display_name": "splatoperator", "link": "https://stackoverflow.com/users/1582670/splatoperator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1428680109, "creation_date": 1428517508, "last_edit_date": 1428518159, "question_id": 29522497, "link": "https://stackoverflow.com/questions/29522497/passing-the-current-user-id-through-nested-attributes-in-rails", "title": "Passing the current_user ID through nested_attributes in Rails", "body": "<p>We have an application that has to authenticate using an external database run on .net. There is a separate Rails app, mounted as a gem that handles the authentication. When someone authenticates, their information is stored in the session object. The app itself is a type of discussion forum. </p>\n\n<p>When I create an attachment through the attachments controller, all the attributes are saved to the database correctly. However, when I do it using <code>nested_attributes_for</code> in the discussions model, only the attributes defined paperclip are passed through. The <code>created_by</code> attribute is null.  Otherwise, everything else is the same.  </p>\n\n<p>Why is this attribute not being added to the DB?</p>\n\n<p>Discussion model:</p>\n\n<pre><code>class Discussion &lt; ActiveRecord::Base\n  belongs_to :creator, :class_name =&gt; \"Person\", :foreign_key =&gt; \"created_by\"\n  belongs_to :updater, :class_name =&gt; \"Person\", :foreign_key =&gt; \"updated_by\"\n  belongs_to :discussion_group\n  belongs_to :discussion_category\n  has_many :discussion_comments, dependent: :destroy\n  has_many :discussion_attachments, dependent: :destroy\n  accepts_nested_attributes_for :discussion_attachments, allow_destroy: true\n  validates :discussion_group_id, on: :create, presence: :true\n  validates :subject, :body, presence: :true\n  validates :external_id, on: :create, uniqueness: :true\n  before_create :add_external_id\n  validates_associated :creator, :updater, :discussion_group,      :discussion_comments, :discussion_attachments\n  scope :for_discussion_group_ids, -&gt;(ids) {where('discussion_group_id IN (?)', ids)}\n  scope :for_ext_id, -&gt;(id) {where(external_id: id).first}\n\n  ....\n</code></pre>\n\n<p>Discussion Attachment model:</p>\n\n<pre><code>ALLOWABLE_IMAGES = [\"image/gif\", \"image/jpeg\", \"image/jpg\", \"image/png\"]\nALLOWABLE_APPLICATIONS = [\"application/vnd.oasis.opendocument.text\",\n\"application/vnd.oasis.opendocument.spreadsheet\",\n\"application/vnd.oasis.opendocument.presentation\",\n\"application/vnd.ms-excel\",\n\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n\"application/vnd.ms-powerpoint\",\n\"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n\"application/vnd.ms-word\", \"application/pdf\", \"text/plain\"]\n\nclass DiscussionAttachment &lt; ActiveRecord::Base\n  belongs_to :discussion\n  belongs_to :creator, :class_name =&gt; \"Person\", :foreign_key =&gt; \"created_by\"\n  belongs_to :updater, :class_name =&gt; \"Person\", :foreign_key =&gt; \"created_by\"\n  has_attached_file :document\n  validates_attachment :document, :presence =&gt; true,\n    :content_type =&gt; { :content_type =&gt; ALLOWABLE_APPLICATIONS + ALLOWABLE_IMAGES },\n    :size =&gt; { :in =&gt; 0..5.megabytes }\nend\n</code></pre>\n\n<p>Discussions controller:</p>\n\n<pre><code>class DiscussionsController &lt; ApplicationController\n  before_action :set_discussion, only: [:show, :destroy]\n  before_action :authorized_for_discussion?, only: [:show]\n  before_action :authorized_to_start_discussion?, only: [:new, :create]\n\n...\n\n  def new\n    @discussion = Discussion.new\n    @discussion_group = DiscussionGroup.find(params[:discussion_group_id])\n    @categories = DiscussionCategory.show.collect{|category| [category.name, category.id]}\n    3.times {@discussion.discussion_attachments.build(created_by: current_user.PersonID)}\n  end\n\n  def create\n    @discussion = Discussion.new(discussion_params.merge!({discussion_group_id: params[:discussion_group_id]}))\n    @discussion.created_by = current_user.PersonID\n\n    respond_to do |format|\n      if @discussion.save\n        flash[:success] = 'Discussion created successfully.'\n        format.html { redirect_to discussion_group_discussion_path(@discussion.discussion_group, @discussion), notice: 'Discussion was successfully created.' }\n        format.json { render action: 'show', status: :created, location: @discussion }\n        Notify.new_discussion_notification(@discussion).deliver\n      else\n        flash[:error] = 'Discussion not created.'\n        @discussion_group = DiscussionGroup.find(params[:discussion_group_id])\n        3.times {@discussion.discussion_attachments.build(created_by: current_user.PersonID)}\n        format.html { render action: 'new' }\n        format.json { render json: @discussion.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n ...\n\n  private\n\n  ...\n\n    def set_discussion\n      @discussion = Discussion.find(params[:id])\n    end\n\n\n    def discussion_params\n      params.require(:discussion).permit(:discussion_group_id, :discussion_category_id, :subject, :body, :document, discussion_attachments_attributes: [:id, :document])\n    end\nend\n</code></pre>\n\n<p>Discussions view:</p>\n\n<pre><code>=render partial: 'shared/error_messages', locals: {object: @discussion}\n\n%h1 Create Discussion\n%h4 #{@discussion_group.name }\n\n.form-box\n  =form_for @discussion, url: discussion_group_discussions_path, html: {multipart: true}, method: :post do |f|\n    =f.hidden_field :discussion_group_id, value: @discussion_group.id\n    .row\n      .col-md-8.form-group\n        =f.label :subject\n        %span.required *\n        =f.text_field :subject, class: \"form-control\", placeholder: 'Enter a subject for your discussion'\n\n      .col-md-4.form-group\n        =f.label :discussion_category, 'Discussion Category'\n        =f.select :discussion_category_id, DiscussionCategory.show.collect{|category| [category.name, category.id]}, {prompt: true}, {class: 'dropselection form-control'}\n\n\n    .row\n      .col-md-8.form-group\n        =f.label :body, \"Body\"\n        %span.required *\n        =f.text_area :body, class: \"form-control\", rows: 10\n\n      .col-md-4.form-group\n        %label Upload Files\n        = f.fields_for :discussion_attachments, :html =&gt; {class: \"form-control\"} do |builder|\n          = builder.file_field :document\n          %br\n\n    .form-group.row\n      .col-md-12\n        =f.submit 'Create', class: \"btn btn-default\"\n        = link_to 'Cancel', discussion_group_path(@discussion_group), class: 'btn btn-default'\n\n    .row\n      .col-md-12\n        %small\n          %span.required *\n          Denotes required fields\n%br\n</code></pre>\n\n<p>Thank you for any help you can provide.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1428517722, "post_id": 29522377, "comment_id": 47199597, "body": "There&#39;s no way to unshuffle something. You can use <code>sort</code> to get it back into order, or you can preserve the original order somewhere. Also you should be using <code>SecureRandom</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1081, "user_id": 4629102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857b6d784b99de3915d9dfb4de92d67d?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal S", "link": "https://stackoverflow.com/users/4629102/iqbal-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1428520811, "last_edit_date": 1428520811, "creation_date": 1428518606, "answer_id": 29522851, "question_id": 29522377, "link": "https://stackoverflow.com/questions/29522377/reverse-an-array-shufflerandom-to-get-the-original/29522851#29522851", "title": "Reverse an array.shuffle(random) to get the original?", "body": "<p>There is no way to get the original array back. If you have the array which is sorted already then you can get it back by using <code>sort</code>. And also when you use shuffle, it means you want to change  the order. You can store the original array before shuffling, if you want to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1428518979, "last_edit_date": 1428518979, "creation_date": 1428518638, "answer_id": 29522865, "question_id": 29522377, "link": "https://stackoverflow.com/questions/29522377/reverse-an-array-shufflerandom-to-get-the-original/29522865#29522865", "title": "Reverse an array.shuffle(random) to get the original?", "body": "<p>You can't undo randomness, but you can leave a trail of crumbs to help you get back to where you were before:</p>\n\n<pre><code>foo = ('a' .. 'g').to_a\nfoo.map!.with_index{ |f, i| [f, i] }.shuffle!\nfoo # =&gt; [[\"g\", 6], [\"a\", 0], [\"d\", 3], [\"f\", 5], [\"b\", 1], [\"c\", 2], [\"e\", 4]]\n\nfoo.sort_by!{ |f, i| i }.map!{ |f, i| f }\nfoo # =&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\n</code></pre>\n\n<p>Or you can simply keep a copy of your original array, or work from a copy of it:</p>\n\n<pre><code>foo = ('a' .. 'g').to_a\nbar = foo.shuffle\n\nfoo # =&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nbar # =&gt; [\"b\", \"c\", \"d\", \"f\", \"a\", \"g\", \"e\"]\n\nfoo.object_id # =&gt; 70308031906280\nbar.object_id # =&gt; 70308031906080\n</code></pre>\n\n<p><code>object_id</code> lets us see whether the arrays are separate objects, which is important because of how Ruby works.</p>\n\n<p>Keeping a duplicate of it around:</p>\n\n<pre><code>foo = ('a' .. 'g').to_a\nbar = foo.dup\nfoo.shuffle!\nfoo # =&gt; [\"g\", \"b\", \"f\", \"c\", \"d\", \"e\", \"a\"]\nbar # =&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nfoo.object_id # =&gt; 70123956309980\nbar.object_id # =&gt; 70123956307920\n\nfoo = bar\nfoo.object_id # =&gt; 70123956307920\nbar.object_id # =&gt; 70123956307920\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>foo = bar.dup\nfoo.object_id # =&gt; 70123960710260\nbar.object_id # =&gt; 70123956307920\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 4765567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mw5eKkatU2Q/AAAAAAAAAAI/AAAAAAAAAGA/evVjOm1_v3M/photo.jpg?sz=128", "display_name": "Kent Dahl", "link": "https://stackoverflow.com/users/4765567/kent-dahl"}, "is_accepted": false, "score": 4, "last_activity_date": 1428522520, "creation_date": 1428522520, "answer_id": 29524063, "question_id": 29522377, "link": "https://stackoverflow.com/questions/29522377/reverse-an-array-shufflerandom-to-get-the-original/29524063#29524063", "title": "Reverse an array.shuffle(random) to get the original?", "body": "<p>While there is no unshuffle method AFAIK, it isn't impossible. However, you might need to dig into the implementation of Array#shuffle to do it, which means it might not work across Ruby versions and different platforms. </p>\n\n<p>Since PRNGs are deterministic and you have the seed, running a new shuffle on another array with the same size and same seed <em>should</em> give the exact same reshuffling order.</p>\n\n<p>Which means you could shuffle an array of indexes and use the result to reverse map your shuffled array of actual values or elements. </p>\n"}, {"tags": [], "owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "is_accepted": false, "score": 5, "last_activity_date": 1428524800, "last_edit_date": 1495540612, "creation_date": 1428524800, "answer_id": 29524709, "question_id": 29522377, "link": "https://stackoverflow.com/questions/29522377/reverse-an-array-shufflerandom-to-get-the-original/29524709#29524709", "title": "Reverse an array.shuffle(random) to get the original?", "body": "<p>Based on <a href=\"https://stackoverflow.com/a/29524063/1157054\">Kent Dahl's answer</a>, I came up with the following solution:</p>\n\n<pre><code>class Array\n  def unshuffle(random:)\n    transformed_order = (0...length).to_a.shuffle!(random: random)\n    sort_by.with_index{|_, i| transformed_order[i]}\n  end\nend\n\nSEED = 42\n\n# Random array of numbers from 1 to 10\noriginal_array = (1..10).map{ rand 1..10 }\n\nshuffled = original_array.shuffle(random: Random.new(SEED))\nunshuffled = shuffled.unshuffle(random: Random.new(SEED))\n\nputs \"Original:   #{original_array}\"\nputs \"Shuffled:   #{shuffled}\"\nputs \"Unshuffled: #{unshuffled}\"\n\nputs unshuffled == original_array\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Original:   [2, 3, 7, 3, 7, 2, 5, 8, 6, 2]\nShuffled:   [6, 3, 2, 2, 8, 7, 2, 7, 3, 5]\nUnshuffled: [2, 3, 7, 3, 7, 2, 5, 8, 6, 2]\ntrue\n</code></pre>\n\n<p>Basically, it works by shuffling a new sorted array using the same seed the original array was shuffled with, then observing the final shuffled positions of the sorted array and using that information to reverse the shuffling of the original array.</p>\n\n<p>This solution should be robust against differences in the implementation of the <code>shuffle</code> method and <code>Random</code> class across different versions and implementations of Ruby.</p>\n"}], "owner": {"reputation": 13, "user_id": 4765477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9eCW.jpg?s=128&g=1", "display_name": "Jose Mendez", "link": "https://stackoverflow.com/users/4765477/jose-mendez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1428524800, "creation_date": 1428517167, "last_edit_date": 1428517599, "question_id": 29522377, "link": "https://stackoverflow.com/questions/29522377/reverse-an-array-shufflerandom-to-get-the-original", "title": "Reverse an array.shuffle(random) to get the original?", "body": "<p>I would like to know if there's a way to make a reverse of the function array.shuffle(random(seed)) on Ruby?\nExample:</p>\n\n<pre><code>array = [1, 2, 3, 4, 5]\narray.shuffle!(random: Random.new(seed))\n# =&gt; [5, 3, 2, 1, 4]\n</code></pre>\n\n<p>It's possible to get the original array using the same seed?\nThanks a lot</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api"], "comments": [{"owner": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "edited": false, "score": 0, "creation_date": 1428517360, "post_id": 29522328, "comment_id": 47199408, "body": "Try ::API::V1::VersionsController, I seem to remember an issue with namespacing this many levels."}, {"owner": {"reputation": 753, "user_id": 2639954, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8910fee8a04e4eb1d99e29a1a936c187?s=128&d=identicon&r=PG", "display_name": "Dear1ofGdBear", "link": "https://stackoverflow.com/users/2639954/dear1ofgdbear"}, "reply_to_user": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "edited": false, "score": 0, "creation_date": 1428517557, "post_id": 29522328, "comment_id": 47199512, "body": "@JamesDullaghan hmm doesn&#39;t seem to change. But yes i am sure, namespacing many levels can cause some issues. And see the updated error message that I have posted"}], "answers": [{"tags": [], "owner": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "is_accepted": true, "score": 0, "last_activity_date": 1428517638, "creation_date": 1428517638, "answer_id": 29522541, "question_id": 29522328, "link": "https://stackoverflow.com/questions/29522328/circular-dependency-detected-while-autoloading-constant-apiv1versionscontrol/29522541#29522541", "title": "Circular dependency detected while autoloading constant Api::V1::VersionsController", "body": "<p>It seems to be the uppercase of API in the controller that is causing your issues.</p>\n\n<p>Try capitalized</p>\n\n<pre><code>class Api::V1::VersionsController &lt; ApplicationController\n</code></pre>\n"}], "owner": {"reputation": 753, "user_id": 2639954, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8910fee8a04e4eb1d99e29a1a936c187?s=128&d=identicon&r=PG", "display_name": "Dear1ofGdBear", "link": "https://stackoverflow.com/users/2639954/dear1ofgdbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 29522541, "answer_count": 1, "score": 0, "last_activity_date": 1428517638, "creation_date": 1428517014, "last_edit_date": 1428517430, "question_id": 29522328, "link": "https://stackoverflow.com/questions/29522328/circular-dependency-detected-while-autoloading-constant-apiv1versionscontrol", "title": "Circular dependency detected while autoloading constant Api::V1::VersionsController", "body": "<p>I am building a rails API, and I want to see the data in my browser when I use the appropriate url followed by <code>.json</code> or <code>.xml</code>. I am getting the following error:</p>\n\n<p><code>Circular dependency detected while autoloading constant Api::V1::VersionsController</code></p>\n\n<p>I set up a <code>versions_controller.rb</code> in the path <code>music-app/app/controllers/api/v1/versions_controller.rb</code>:</p>\n\n<pre><code>class API::V1::VersionsController &lt; ApplicationController\n  respond_to :json, :xml\n\n  def index\n    @versions = Version.all\n    respond_with(@versions)\n  end\n\n  def show\n    @versions = Song.find_by(:id =&gt; params[:song_id]).versions\n    respond_with(@versions)\n  end\nend\n</code></pre>\n\n<p>and my routes:</p>\n\n<pre><code>namespace :api do\n  namespace :v1 do\n   get '/versions' =&gt; 'versions#index'\n   get '/versions/:id' =&gt; 'versions#show'\n  end\nend\n</code></pre>\n\n<p>Am I missing something, and how can this be resolved?</p>\n"}, {"tags": ["ruby", "stdout"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4647279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6VPzR-E0A7M/AAAAAAAAAAI/AAAAAAAAAGc/jTiN4QPk6IE/photo.jpg?sz=128", "display_name": "Grace B.", "link": "https://stackoverflow.com/users/4647279/grace-b"}, "edited": false, "score": 0, "creation_date": 1428518206, "post_id": 29522661, "comment_id": 47199922, "body": "Solved the problem neatly! Thank you!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1428517963, "creation_date": 1428517963, "answer_id": 29522661, "question_id": 29522320, "link": "https://stackoverflow.com/questions/29522320/output-redirection-troubleshooting-in-ruby/29522661#29522661", "title": "Output redirection troubleshooting in Ruby", "body": "<p>You're calling <code>reopen</code> on <code>STDOUT</code> since <code>$stdout</code> is just a global  variable that points to the same object. This permanently changes <code>STDOUT</code>.</p>\n\n<p>What about this:</p>\n\n<pre><code>$stdout = File.open(@filename, 'w:UTF-8')\n\n# ...\n\n$stdout = prev_std\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": false, "score": 1, "last_activity_date": 1428518140, "last_edit_date": 1495541180, "creation_date": 1428518140, "answer_id": 29522713, "question_id": 29522320, "link": "https://stackoverflow.com/questions/29522320/output-redirection-troubleshooting-in-ruby/29522713#29522713", "title": "Output redirection troubleshooting in Ruby", "body": "<p><code>STDOUT</code> is a constant that represents the standard output, which is an <code>IO</code> object. And <code>$stdout</code> is a global variable whose default values is usually <code>STDOUT</code> itself, by default, both point to the same object:</p>\n\n<pre><code>$stdout.object_id == STDOUT.object_id =&gt; true\n</code></pre>\n\n<p>If you call a method on one of them, the other one will be affected. So if you call a method using <code>$stdout</code> it will also take effect on <code>STDOUT</code>. Calling <code>reopen</code> on <code>$stdout</code> will affect <code>STDOUT</code> as well (even if it's a constant).</p>\n\n<p>If you want to redirect output to a file temporarily and restore it then to the standard output, you should assign <code>$stdout</code> a new <code>IO</code> object:</p>\n\n<pre><code>$stdout = File.open('/path/to/file', 'w:UTF-8')\nputs \"this will go to the file\"\n$stdout = STDOUT\nputs \"this will go to standard output!\"\n</code></pre>\n\n<p>See also the following questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6671716/what-is-the-difference-between-rubys-stdout-and-stdout\">What is the difference between Ruby&#39;s $stdout and STDOUT?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4279604/what-is-the-difference-between-stdin-and-stdin-in-ruby\">What is the difference between STDIN and $stdin in Ruby?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13616482/reopening-an-io-stream-vs-just-using-the-new-stream\">Reopening an IO Stream vs. just using the new Stream</a></li>\n<li>And <a href=\"http://ruby-doc.org/core-2.2.1/IO.html#method-i-reopen\" rel=\"nofollow noreferrer\">The IO reopen method</a> along with the rest of IO methods.</li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 4647279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6VPzR-E0A7M/AAAAAAAAAAI/AAAAAAAAAGc/jTiN4QPk6IE/photo.jpg?sz=128", "display_name": "Grace B.", "link": "https://stackoverflow.com/users/4647279/grace-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29522661, "answer_count": 2, "score": 0, "last_activity_date": 1428870588, "creation_date": 1428516986, "last_edit_date": 1428870588, "question_id": 29522320, "link": "https://stackoverflow.com/questions/29522320/output-redirection-troubleshooting-in-ruby", "title": "Output redirection troubleshooting in Ruby", "body": "<p>So I'm trying to redirect output to a file temporarily:</p>\n\n<pre><code>  prev_std = STDOUT\n\n  $stdout.reopen(@filename, 'w:UTF-8')\n\n  # stuff happens here with @filename and lots of output\n\n  $stdout = prev_std\n</code></pre>\n\n<p>but when I do this, it seems as though I can't redirect it back afterwards. What am I doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 717, "user_id": 150608, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/750298406/picture?type=large", "display_name": "Ranknoodle", "link": "https://stackoverflow.com/users/150608/ranknoodle"}, "edited": false, "score": 0, "creation_date": 1428564598, "post_id": 29521988, "comment_id": 47217926, "body": "Hi Ivan - I tried your suggestion on the :title tag and it didn&#39;t print out the the @title var (It was blank).  So far the only thing that works is a before_filter method in the controller to determine the title and description but I would prefer this in the view like your example...."}, {"owner": {"reputation": 662, "user_id": 4747096, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b85639c3c1cc226a5962b469c8bbbab?s=128&d=identicon&r=PG&f=1", "display_name": "IvanSelivanov", "link": "https://stackoverflow.com/users/4747096/ivanselivanov"}, "reply_to_user": {"reputation": 717, "user_id": 150608, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/750298406/picture?type=large", "display_name": "Ranknoodle", "link": "https://stackoverflow.com/users/150608/ranknoodle"}, "edited": false, "score": 0, "creation_date": 1428565429, "post_id": 29521988, "comment_id": 47218410, "body": "@Ranknoodle my suggestion had nothing to do with @title var. <code>provide</code> defines a block, which you then reuse in layout via <code>yield(:title)</code>"}, {"owner": {"reputation": 1540, "user_id": 245522, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/YYH7U.jpg?s=128&g=1", "display_name": "fro_oo", "link": "https://stackoverflow.com/users/245522/fro-oo"}, "edited": false, "score": 0, "creation_date": 1467821012, "post_id": 29521988, "comment_id": 63878978, "body": "@IvanSelivanov Very good solution to this problem. This should be the accepted answer. Nice, clean and effective."}], "tags": [], "owner": {"reputation": 662, "user_id": 4747096, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b85639c3c1cc226a5962b469c8bbbab?s=128&d=identicon&r=PG&f=1", "display_name": "IvanSelivanov", "link": "https://stackoverflow.com/users/4747096/ivanselivanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1428516279, "last_edit_date": 1428516279, "creation_date": 1428515932, "answer_id": 29521988, "question_id": 29521641, "link": "https://stackoverflow.com/questions/29521641/rails-caches-action-and-dynamic-html-meta-tags-in-layout/29521988#29521988", "title": "Rails caches_action and Dynamic HTML Meta Tags in Layout", "body": "<p>Did You try using <code>&lt;% provide(:title, \"This is an example title\") %&gt;</code> in <code>index.html.erb</code>(in the view) and <code>&lt;title&gt;&lt;%= yield(:title) %&gt; on MySite.com&lt;/title&gt;</code> in layout? In this case passing <code>:layout =&gt; false</code> to caches_action could help.</p>\n"}, {"tags": [], "owner": {"reputation": 717, "user_id": 150608, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/750298406/picture?type=large", "display_name": "Ranknoodle", "link": "https://stackoverflow.com/users/150608/ranknoodle"}, "is_accepted": true, "score": 0, "last_activity_date": 1432837162, "creation_date": 1432837162, "answer_id": 30514229, "question_id": 29521641, "link": "https://stackoverflow.com/questions/29521641/rails-caches-action-and-dynamic-html-meta-tags-in-layout/30514229#30514229", "title": "Rails caches_action and Dynamic HTML Meta Tags in Layout", "body": "<p>How I was able to get this to work was the following:</p>\n\n<p>In the home view for (eg index.erb) I have the following:</p>\n\n<pre><code>&lt;% content_for :seotitle do %&gt;\n&lt;title&gt;&lt;%=raw @seotitle %&gt;&lt;/title&gt;\n&lt;% end %&gt;\n&lt;% content_for :seodescription do %&gt;\n&lt;meta name=\"description\" content=\"&lt;%=raw @seodescription %&gt;\"&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In my application.erb layout I have the following:</p>\n\n<pre><code>&lt;%=raw yield :seotitle %&gt;\n&lt;%=raw yield :seodescription %&gt;\n</code></pre>\n\n<p>Plus I need the following custom code/hack added as an intializer in my config dir to get all the pieces working:</p>\n\n<p><a href=\"https://gist.github.com/dignoe/2485272\" rel=\"nofollow\">https://gist.github.com/dignoe/2485272</a></p>\n"}], "owner": {"reputation": 717, "user_id": 150608, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/750298406/picture?type=large", "display_name": "Ranknoodle", "link": "https://stackoverflow.com/users/150608/ranknoodle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 30514229, "answer_count": 2, "score": 0, "last_activity_date": 1432837162, "creation_date": 1428514888, "question_id": 29521641, "link": "https://stackoverflow.com/questions/29521641/rails-caches-action-and-dynamic-html-meta-tags-in-layout", "title": "Rails caches_action and Dynamic HTML Meta Tags in Layout", "body": "<p>I'm using caches_action in a controller:</p>\n\n<pre><code> class HomeController &lt; ApplicationController\n   caches_action :index, :layout =&gt; false, :expires_in =&gt; 20.minutes\n</code></pre>\n\n<p>And in the layout (application.erb) I have the following meta tags:</p>\n\n<pre><code>&lt;title&gt;&lt;%= @title %&gt; on MySite.com&lt;/title&gt;\n&lt;meta name=\"description\" content=\"&lt;%= @description %&gt;\"&gt;\n&lt;!-- Add the following three tags inside head --&gt;\n&lt;meta itemprop=\"name\" content=\"&lt;%= @title %&gt; on MySite.com\"&gt;\n&lt;meta itemprop=\"description\" content=\"&lt;%= @description %&gt;\"&gt;\n</code></pre>\n\n<p>In the Home Controller I have the following:</p>\n\n<pre><code>def index\n  @title = \"This is an example title\"\n  @description = \"This is an example description\"\n</code></pre>\n\n<p>However the cached page that is shown does not have the @title nor @description filled in for the outputted HTML.  I really like caches_action does everything I want except for dynamic meta tags in the application.erb file (layout).</p>\n\n<p>How can I update the meta tags while using caches_action?</p>\n"}, {"tags": ["ruby", "yield", "enumerable", "flatten"], "comments": [{"owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1428518308, "post_id": 29521367, "comment_id": 47199980, "body": "If you don&#39;t want an array with the result what do you want to do with each individual result?"}, {"owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1428518370, "post_id": 29521367, "comment_id": 47200006, "body": "And <code>response.full.to_enum</code> is there already for you to have a Enumerator out of it"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1428525874, "post_id": 29521367, "comment_id": 47204327, "body": "Okay, I see that <code>to_enum</code> works, but (1) where/how is it implemented, (2) what tells me that it&#39;s there, and (3) is it lazy?"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1428526229, "post_id": 29521367, "comment_id": 47204528, "body": "At the moment, I personally want to run a block of code on each record, and so I&#39;d be served well enough by <code>each</code>. But in the future, I (or other callers) might want to perform any of the <code>Enumerable</code> operations on the transformed collection."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "edited": false, "score": 0, "creation_date": 1428526307, "post_id": 29521367, "comment_id": 47204571, "body": "...though now, reading the documentation, it looks like nearly all the <code>Enumerable</code> methods create arrays, which is kind of useless for large data. Maybe I want <code>Enumerator</code> rather than <code>Enumerable</code>?"}], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428526463, "creation_date": 1428513976, "last_edit_date": 1428526463, "question_id": 29521367, "link": "https://stackoverflow.com/questions/29521367/convert-loop-generating-multiple-enumerables-to-single-lazy-enumerable-or-enume", "title": "Convert loop generating multiple Enumerables to single lazy Enumerable (or Enumerator?) in Ruby, possibly with flat_map/flatten", "body": "<p>I'm using a gem that includes the following code, allowing one to call a block on each record returned by a web service query, even if that web service query is paged and requires multiple requests:</p>\n\n<pre><code>  def each(&amp;block)\n    yield_from_response &amp;block\n    while resumable?\n      @response = @resumption_block.call @response\n      yield_from_response &amp;block\n    end\n  end\n\n  private\n\n  def yield_from_response(&amp;block)\n    @response.each do |obj|\n      block.call(obj)\n    end\n  end\n\n  def resumable?\n    @response.resumption_token and not @response.resumption_token.empty?\n  end\n</code></pre>\n\n<p>(For this question the details aren't very important, but for those who care, the gem is <a href=\"https://github.com/code4lib/ruby-oai\" rel=\"nofollow\">ruby-oai</a> and the code in question is in <a href=\"https://github.com/code4lib/ruby-oai/blob/v0.3.1/lib/oai/client/resumable.rb\" rel=\"nofollow\">resumable.rb</a>.)</p>\n\n<p>I'm trying to wrap <code>each()</code> here this in a method that returns an <code>Enumerable</code> of wrapper objects around each object in the response. If I don't care about resumption, I can avoid the above code and just access the response (which is an <code>Enumerable</code>) directly:</p>\n\n<pre><code>response ? response.map { |obj| MyGem::MyWrapper.new(obj) } : []\n</code></pre>\n\n<p>Now, it's easy enough for me to pass that block in:</p>\n\n<pre><code>response ? response.full.each { |obj| MyGem::MyWrapper.new(obj) } : []\n# full() provides the resumable wrapper with each() and yield_from_response()\n</code></pre>\n\n<p>But in the resumption case, since <code>each</code> doesn't return anything useful, there's no way to get the results out.</p>\n\n<p>The result set could be pretty large (larger-than-physical-RAM large), so I don't just want to dump everything into a temporary array, either explicitly or implicitly.</p>\n\n<p>Clearly, what I need is to write my own alternative to <code>each()</code> that instead of taking a block, just returns an <code>Enumerable</code> of all the <code>objs</code> embedded in the <code>@responses</code>. I feel like there should be a simple way to do this without writing a complete <code>Enumerable</code> implementation, but I'm new enough to Ruby that it's not clear what it is.</p>\n\n<p>The best I've been able to come up with is the following, which is also incorrect:</p>\n\n<pre><code>  def to_enumerable(response)\n    response.each { |obj| yield MyGem::MyWrapper.new(obj) }\n    resumption_block = response.resumption_block\n    if resumption_block\n      while response.resumption_token &amp;&amp; !response.resumption_token.empty?\n        response = resumption_block.call response\n        response.each { |obj| yield MyGem::MyWrapper.new(obj) }\n      end\n    end\n  end\n</code></pre>\n\n<p>It's incorrect because, of course, Ruby's <code>yield</code> doesn't really \"yield\", it just invokes a block, and if I wanted to pass in a block I could just call the original <code>each()</code>.</p>\n\n<p>If I could figure out how to convert the repeated assignments to <code>response</code> into a sequence of <code>responses</code>, I could use <code>flat_map</code>, but I'm not sure how to do that.</p>\n\n<hr>\n\n<p><strong>ETA:</strong> On close inspection it looks like <code>Enumerable</code> isn't lazy, and if I want to avoid creating arrays (and thereby running out of memory for large datasets) I probably actually want <code>Enumerator</code>. If I understand the difference correctly.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 3349830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/712009991/picture?type=large", "display_name": "uechan", "link": "https://stackoverflow.com/users/3349830/uechan"}, "is_accepted": true, "score": 2, "last_activity_date": 1428683192, "creation_date": 1428683192, "answer_id": 29566313, "question_id": 29521326, "link": "https://stackoverflow.com/questions/29521326/rspec-overriding-capybara-within-method-in-cucumber/29566313#29566313", "title": "Rspec overriding Capybara &#39;within&#39; method in Cucumber", "body": "<pre><code>page.within\n</code></pre>\n\n<p>I feel so dumb but at least I figured it out.</p>\n"}], "owner": {"reputation": 157, "user_id": 3349830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/712009991/picture?type=large", "display_name": "uechan", "link": "https://stackoverflow.com/users/3349830/uechan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 29566313, "answer_count": 1, "score": 1, "last_activity_date": 1438126717, "creation_date": 1428513829, "last_edit_date": 1438126717, "question_id": 29521326, "link": "https://stackoverflow.com/questions/29521326/rspec-overriding-capybara-within-method-in-cucumber", "title": "Rspec overriding Capybara &#39;within&#39; method in Cucumber", "body": "<p>I am testing the creation of an account on a large consumer website using cucumber and capybara. When I run my capybara code in a regular pry session it all works. But when I run the cucumber test, the <code>within</code> block doesn't seem to run and the sign up form doesn't get filled out.</p>\n\n<p><code>env.rb</code>  </p>\n\n<pre><code>require 'capybara/cucumber'\nrequire 'selenium-webdriver'\n\nBefore do\n  Capybara.default_driver = :selenium\nend\n</code></pre>\n\n<p><code>test.feature</code></p>\n\n<pre><code>Scenario: Test consumer site account creation\n* I create a new example.com account\n</code></pre>\n\n<p><code>step_definition.rb</code></p>\n\n<pre><code>When(/^I create a new account$/) do\n  visit 'http://example.com/myaccount'\n  find(\"#cboxClose\").click if page.has_css?(\"#cboxClose\")\n\n  require 'pry';binding.pry\n  within(\"form[name='newCustomer']\") do\n    random_letters = SecureRandom.urlsafe_base64(5)\n    fill_in \"Email Address\", :with =&gt; \"test-#{random_letters}@example.com\"\n    fill_in \"Create Password\", :with =&gt; \"Password123\"\n    fill_in \"Confirm Password\", :with =&gt; \"Password123\"\n    click_on \"Create Account\"\n  end\nend\n</code></pre>\n\n<p>When I run <code>cucumber</code> and try to run the <code>within</code> block in pry, I get this:</p>\n\n<pre><code>#&lt;RSpec::Matchers::AliasedMatcher:0x007ff5e86b16e8\n @base_matcher=\n  #&lt;RSpec::Matchers::BuiltIn::BeWithin:0x007ff5e86b1710\n   @delta=\"form[name='newCustomer']\"&gt;,\n @description_block=\n  #&lt;Proc:0x007ff5e4c34d08@/Users/anthonychung/.rvm/gems/ruby-2.1.2/gems/rspec-expectations-3.2.0/lib/rspec/matchers.rb:245 (lambda)&gt;&gt;\n</code></pre>\n\n<p>So I suspect RSpec's aliased matcher is overriding capybara's within method somehow.</p>\n\n<p>When I try to do <code>within(:css, \"form[etc.]\")</code> I get an argument error <code>ArgumentError: wrong number of arguments (2 for 1)</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "edited": false, "score": 0, "creation_date": 1428514741, "post_id": 29521276, "comment_id": 47197852, "body": "Looking at your server logs, what parameter is being sent in the get request for profile/show?"}, {"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "reply_to_user": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "edited": false, "score": 0, "creation_date": 1428524459, "post_id": 29521276, "comment_id": 47203594, "body": "@JamesDullaghan I get a blank nancydrew page with this <code>Started GET &quot;&#47;britneyspears&quot; for 12.43.117.2 at 2015-04-08 20:19:42 +0000 Processing by ProfilesController#show as HTML   Parameters: {&quot;id&quot;=&gt;&quot;britneyspears&quot;}   User Load (0.8ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot;  WHERE &quot;users&quot;.&quot;profile_name&quot; IS NULL  ORDER BY &quot;users&quot;.&quot;id&quot; ASC LIMIT 1   Status Load (0.3ms)  SELECT &quot;statuses&quot;.* FROM &quot;statuses&quot;  WHERE &quot;statuses&quot;.&quot;user_id&quot; = ?  [[&quot;user_id&quot;, 1]]   Rendered profiles&#47;show.html.erb within layouts&#47;application (3.9ms) Completed 200 OK in 144ms (Views: 135.3ms | ActiveRecord: 1.1ms)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428691555, "post_id": 29521730, "comment_id": 47286580, "body": "When I did this, it says <code>&quot;No route matches [GET] &quot;&#47;nancydrew&quot;</code>, but when I remove the first <code>&quot;&#47;profile&#47;&quot;</code> from the <code>get &quot;profile&#47;:profile_name&quot;, to &quot;profiles:show&quot;</code>, it gives me a 404 page that says &quot;The page you were looking for doesn&#39;t exist. You may have mistyped the address or the page may have moved.&quot;"}, {"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428691811, "post_id": 29521730, "comment_id": 47286710, "body": "This is the log I get in the latter situation: <code>Started GET &quot;&#47;nancydrew&quot; for 12.43.117.2 at 2015-04-10 18:49:13 +0000 Processing by ProfilesController#show as HTML   Parameters: {&quot;profile_name&quot;=&gt;&quot;nancydrew&quot;}   User Load (0.2ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot;  WHERE &quot;users&quot;.&quot;profile_name&quot; = &#39;nancydrew&#39;  ORDER BY &quot;users&quot;.&quot;id&quot; ASC LIMIT 1   Rendered public&#47;404.html within layouts&#47;application (0.2ms) Completed 404 Not Found in 231ms (Views: 215.1ms | ActiveRecord: 1.7ms)</code> I know I have a user called nancydrew because I was seeing her statuses on all the profiles previously"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428705626, "post_id": 29521730, "comment_id": 47292901, "body": "When you use <code>get &quot;profile&#47;:profile_name&quot;, to: &quot;profiles:show&quot;</code> you need to type in your url <code>&#47;profile&#47;nancydrew</code>, which i recommend you use, instead of just <code>&#47;nancydrew</code>. In your private user method, use this instead, <code>User.find_by(profile_name: params[:profile_name])</code>, you dont even need the <code>@user = </code>, and add <code>helper_method :user, :statuses</code> in the controller so that your view can use those methods"}], "tags": [], "owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "is_accepted": false, "score": 0, "last_activity_date": 1428515158, "creation_date": 1428515158, "answer_id": 29521730, "question_id": 29521276, "link": "https://stackoverflow.com/questions/29521276/trying-to-make-individual-profile-pages-appear/29521730#29521730", "title": "Trying to make individual profile pages appear", "body": "<p>In your routes, you have it set up as </p>\n\n<pre><code>get \"/:id\", to: \"profiles#show\"\n</code></pre>\n\n<p>which means in your controller, you need to use <code>params[:id]</code> instead of <code>params[:user_id]</code>. Also, if you're going to be using /britneyspears, /nickiminaj, etc, it makes more sense to call these profile_name under profile, so something like</p>\n\n<pre><code>get \"/profile/:profile_name\", to: \"profiles#show\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@user = User.where(profile_name: params[:profile_name]).limit(1).first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428524187, "post_id": 29521838, "comment_id": 47203443, "body": "When I applied all of the changes that have been suggested (including those to routes.rb), I get a routing error that says &quot;No route matches [GET]&quot; , although I have a profiles_show_path present when I rake routes."}, {"owner": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "reply_to_user": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428524264, "post_id": 29521838, "comment_id": 47203493, "body": "and you made sure to remove the conflicting profile#show route at the top of the route file? I cloned your repo down and it&#39;s working fine. I&#39;ll submit a PR for you. And you are visiting your url:port/profile_name, right?"}, {"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428524805, "post_id": 29521838, "comment_id": 47203763, "body": "i&#39;m visiting the c9.io I linked above without a particular port. i&#39;m working in their IDE, which was recommended to me since i&#39;m a Windows user and I had too many issues installing Ruby and Rails on my PC. I&#39;m not sure if that would make a difference, although all the server logs seem to believe that it&#39;s an ubuntu/linux server (as expected)."}, {"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428524876, "post_id": 29521838, "comment_id": 47203799, "body": "also, I haven&#39;t committed these most recent suggestions to github, because I was testing them and these new errors popped up. What&#39;s there now is the original code from when I initially asked this question."}], "tags": [], "owner": {"reputation": 1160, "user_id": 1899465, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3be3fcc8061dff6c44bacb391da9c36b?s=128&d=identicon&r=PG", "display_name": "JamesDullaghan", "link": "https://stackoverflow.com/users/1899465/jamesdullaghan"}, "is_accepted": false, "score": 2, "last_activity_date": 1428515481, "creation_date": 1428515481, "answer_id": 29521838, "question_id": 29521276, "link": "https://stackoverflow.com/questions/29521276/trying-to-make-individual-profile-pages-appear/29521838#29521838", "title": "Trying to make individual profile pages appear", "body": "<p>It looks as though you have 2 routes being defined for profile#show</p>\n\n<p>The first route is overriding the second route, which is the one you're looking to utilize in your controller method.</p>\n\n<p>Delete the top profile#show definition</p>\n\n<p>The profile route param should be explanatory of what it is for. Change :id to :profile_name or whatever attribute you're passing.</p>\n\n<pre><code>get \"/:profile_name\", to: \"profiles#show\"\n</code></pre>\n\n<p>Profile controller can be cleaned up considerably</p>\n\n<pre><code>class ProfilesController &lt; ApplicationController\n  def show\n    if user\n      render action: :show\n    else\n      render file: \"public/404\", status: 404, formats: [:html]\n    end\n  end\n\n  private\n\n  def user\n    User.find_by(profile_name: params[:profile_name])\n  end\n\n  def statuses\n    user.statuses\n  end\n\n  helper_method :user, :statuses\nend\n</code></pre>\n\n<p>And your view can use helper methods instead of littered instance variables per action.</p>\n\n<pre><code>&lt;div class =\"page-header\"&gt;\n    &lt;h1&gt;&lt;%= user.full_name %&gt;&lt;/h1&gt;\n&lt;/div&gt;\n\n&lt;% if statuses.any? %&gt;\n  &lt;% statuses.each do |status| %&gt;\n    &lt;div class=\"well\"&gt;\n      &lt;% status.content %&gt;\n      &lt;hr /&gt;\n      &lt;%= link_to time_ago_in_words(status.created_at), status_path(status) %&gt; ago\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "edited": false, "score": 0, "creation_date": 1428939257, "post_id": 29572761, "comment_id": 47364197, "body": "Thank you so much! I&#39;m currently having another issue (individual statuses won&#39;t show up on these profile pages), but this problem is solved."}], "tags": [], "owner": {"reputation": 78, "user_id": 2396304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b568e85ad1456c2ebd1f7b6c6bd8ee?s=128&d=identicon&r=PG", "display_name": "Chris Scott", "link": "https://stackoverflow.com/users/2396304/chris-scott"}, "is_accepted": true, "score": 0, "last_activity_date": 1428713280, "creation_date": 1428713280, "answer_id": 29572761, "question_id": 29521276, "link": "https://stackoverflow.com/questions/29521276/trying-to-make-individual-profile-pages-appear/29572761#29572761", "title": "Trying to make individual profile pages appear", "body": "<p>The variables in the top answer are a little off and a few little things.</p>\n\n<h3>routes.rb</h3>\n\n<pre><code>get '/:profile_name', to: 'profiles#show', as: :profile\n</code></pre>\n\n<p>Added <code>as: :profile</code> you can get to it with,</p>\n\n<pre><code>=link_to 'John Doe', profile_path(@user)\n</code></pre>\n\n<h3>profiles_controller.rb</h3>\n\n<p>It shouldn't need to be any more complicated than this a for the moment.</p>\n\n<pre><code>class ProfilesController &lt; ApplicationController\n  before_action :set_user, only: [:show]\n\n  def show\n    if @user\n      render action: :show\n    else\n      render file: \"public/404\", status: 404, formats: [:html]\n    end\n  end\n\n  private\n\n  def set_user\n    @user = User.where(profile_name: params[:profile_name]).first\n  end\n\nend\n</code></pre>\n\n<h3>profiles/show.html.erb</h3>\n\n<pre><code>&lt;div class =\"page-header\"&gt;\n    &lt;h1&gt;&lt;%= @user.full_name %&gt;&lt;/h1&gt;\n&lt;/div&gt;\n\n&lt;% if @user.statuses.any? %&gt;\n  &lt;% @user.statuses.each do |status| %&gt;\n    &lt;div class=\"well\"&gt;\n      &lt;% status.content %&gt;\n      &lt;hr /&gt;\n      &lt;%= link_to time_ago_in_words(status.created_at), status_path(status) %&gt; ago\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h3>registrations_controller.rb</h3>\n\n<p>You had forgotten to whitelist the profile name for users.</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n\n  private\n\n  def sign_up_params\n    params.require(:user).permit(:profile_name, :first_name, :last_name, :email, :password, :password_confirmation)\n  end\n\n  def account_update_params\n    params.require(:user).permit(:profile_name, :first_name, :last_name, :email, :password, :password_confirmation, :current_password)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 29572761, "answer_count": 3, "score": 0, "last_activity_date": 1428713280, "creation_date": 1428513654, "last_edit_date": 1428516504, "question_id": 29521276, "link": "https://stackoverflow.com/questions/29521276/trying-to-make-individual-profile-pages-appear", "title": "Trying to make individual profile pages appear", "body": "<p>I'm trying to make a Facebook-type site on Ruby on Rails 4 using devise. One of the features i'm trying to implement is an individual profile page, where you can go to a specific URL for a person's username and see that user's statuses.</p>\n\n<p>Initially, the relevant code in my /app/views/profiles/show.html.erb file was this:</p>\n\n<pre><code>&lt;% if @statuses %&gt;\n    &lt;% statuses.each do |status| %&gt;\n        &lt;div class=\"well\"&gt;\n            &lt;% status.content %&gt;\n            &lt;hr /&gt;\n</code></pre>\n\n<p>Which gave me a NameError in Profiles#show. Somewhere else, a person suggested that I change <code>statuses.each do</code> in the second line to <code>@statuses.each do</code> . At this point, the individual profile page now loads, but it still shows the statuses of one particular user no matter what. In other words, if I have a user called <strong>nancydrew</strong>, a user called <strong>britneyspears</strong>, and a user called <strong>nickiminaj</strong>, going to \"/britneyspears\" or \"/nickiminaj\" will still show nancydrew's statuses (instead of britneyspears' or nickiminaj's respective statuses). Visiting \"/nancydrew\" works as expected.</p>\n\n<p>Here's a link to my github repository:</p>\n\n<p><a href=\"https://github.com/yamilethmedina/wheels_registration\" rel=\"nofollow\">https://github.com/yamilethmedina/wheels_registration</a></p>\n\n<p>And the rails server is currently running if you would like to see it in action:</p>\n\n<p><a href=\"https://wheels-registration-yamilethmedina.c9.io/\" rel=\"nofollow\">https://wheels-registration-yamilethmedina.c9.io/</a></p>\n"}, {"tags": ["ruby", "csv", "transpose"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1428513641, "post_id": 29521170, "comment_id": 47197189, "body": "we&#39;ll need some sample input and your desired output."}], "answers": [{"comments": [{"owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "reply_to_user": {"reputation": 79, "user_id": 2344662, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/805cdded71e6b11892a634693867be98?s=128&d=identicon&r=PG", "display_name": "Lazarix", "link": "https://stackoverflow.com/users/2344662/lazarix"}, "edited": false, "score": 0, "creation_date": 1429210796, "post_id": 29521521, "comment_id": 47504239, "body": "@Lazarix - The print statement was using multiple arguments. I turned into one string(and one argument). String should be the same."}], "tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 2, "last_activity_date": 1429210617, "last_edit_date": 1429210617, "creation_date": 1428514497, "answer_id": 29521521, "question_id": 29521170, "link": "https://stackoverflow.com/questions/29521170/ruby-transpose-csv/29521521#29521521", "title": "Ruby transpose csv", "body": "<p>You need a 2d array if you want to use transpose. Currently you are just printing it out one line at a time. Use map for this:</p>\n\n<pre><code>tbl_array = doc.xpath('//table//tr').map do |row|\n  row.xpath('td').map do |cell|\n    \"\\\" #{cell_text.gsub(\"\\n\", ' ').gsub('\"', '\\\"').gsub(/(\\s){2,}/m, '\\1')} \\\", \"\n  end\nend\n\ntbl_array.transpose.each do |row|\n  row.each { |cell| print cell }\nend\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 2344662, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/805cdded71e6b11892a634693867be98?s=128&d=identicon&r=PG", "display_name": "Lazarix", "link": "https://stackoverflow.com/users/2344662/lazarix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1429210617, "creation_date": 1428513310, "question_id": 29521170, "link": "https://stackoverflow.com/questions/29521170/ruby-transpose-csv", "title": "Ruby transpose csv", "body": "<p>I'm using ruby and the gem nokogiri to convert html to csv and it's working great, but I would like to transpose the data also.</p>\n\n<p>I understand that ruby has a transpose function that I can leverage but I'm not sure how to integrate it into the script that I'm using as I'm not very good with ruby.</p>\n\n<p>Could someone help me putting the transpose code in the right place in this script to get the desired effect?</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\n\nprint_header_lines = ARGV[1]\n\nFile.open(ARGV[0]) do |f|\n\ntable_string=f\ndoc = Nokogiri::HTML(table_string)\n\ndoc.xpath('//table//tr').each do |row|\nif print_header_lines\n  row.xpath('th').each do |cell|\n    print '\"', cell.text.gsub(\"\\n\", ' ').gsub('\"', '\\\"').gsub(/(\\s){2,}/m, '\\1'), \"\\\", \"\n  end\nend\nrow.xpath('td').each do |cell|\n  print '\"', cell.text.gsub(\"\\n\", ' ').gsub('\"', '\\\"').gsub(/(\\s){2,}/m, '\\1'), \"\\\", \"\nend\nprint \"\\n\"\nend\nend\n</code></pre>\n\n<p>The script to transpose looks like this according to information I've found online:</p>\n\n<pre><code>require 'CSV'\n\nrows = CSV.new($stdin).read\nputs rows.transpose.map { |x| x.join ',' }\n</code></pre>\n\n<p>Naturally the require will need to go at the top, but I'm unsure what to change in the above example in order to get the output transposed.</p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "backbone.js", "devise"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 4392702, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/518953586/picture?type=large", "display_name": "Adam Yarger", "link": "https://stackoverflow.com/users/4392702/adam-yarger"}, "is_accepted": true, "score": 0, "last_activity_date": 1428603140, "creation_date": 1428603140, "answer_id": 29545923, "question_id": 29520857, "link": "https://stackoverflow.com/questions/29520857/static-page-route-using-backbone-and-rails/29545923#29545923", "title": "static page route using backbone and rails", "body": "<p>To get the root page to stop rendering on the edit page I the code below in the application layout file since all my backbone is being rendered into the container. </p>\n\n<pre><code>    &lt;% if params[:action] == \"root\" &amp;&amp; params[:controller] == \"static_pages\" %&gt;\n      &lt;% if user_signed_in? %&gt;\n        &lt;div class=\"container\" id=\"main-container\"&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>As far as the hashbang problem it was as trivial as changing the href in the header from href='#/messages' to href='/#/messages'. Just added a /</p>\n"}], "owner": {"reputation": 63, "user_id": 4392702, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/518953586/picture?type=large", "display_name": "Adam Yarger", "link": "https://stackoverflow.com/users/4392702/adam-yarger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 29545923, "answer_count": 1, "score": 0, "last_activity_date": 1428603140, "creation_date": 1428512307, "question_id": 29520857, "link": "https://stackoverflow.com/questions/29520857/static-page-route-using-backbone-and-rails", "title": "static page route using backbone and rails", "body": "<p>Im using devise for authentication in my backbone/rails app that uses normal devise authentication which redirects to the root page once logged in. When a user wants to edit their info they are redirected to a static users/edit page. When the page is rendered all the root page info is also rendered along with the edit form, so my question is how do i get backbone to play nice with static routes so the backbone doesn't try to render the root on every static page? do i have to use pushState?</p>\n\n<p>Also another problem is when i navigate away from the users/edit page the hashbangs are just appended to the users/edit url.</p>\n\n<p>Let me know if you need any code in specific, Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 1286, "user_id": 3843206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KuCnW.jpg?s=128&g=1", "display_name": "dwenzel", "link": "https://stackoverflow.com/users/3843206/dwenzel"}, "edited": false, "score": 0, "creation_date": 1428510737, "post_id": 29520130, "comment_id": 47195454, "body": "What result are you hoping to see?  <code>1..2</code> is the return value of the for loop, which becomes the return value of the method since that&#39;s the last line.  Can you display your <code>check_box_tag</code> method?  That may help to see what you&#39;re looking for."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1428511516, "post_id": 29520130, "comment_id": 47195955, "body": "You can just experiment in the console to build up your code if you&#39;re not sure what you&#39;re doing."}, {"owner": {"reputation": 177, "user_id": 4118282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1070904824/picture?type=large", "display_name": "Opy Osegs", "link": "https://stackoverflow.com/users/4118282/opy-osegs"}, "edited": false, "score": 0, "creation_date": 1428511555, "post_id": 29520130, "comment_id": 47195969, "body": "<code>check_box_tag</code> method? I referred to: &lt;<a href=\"http://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/FormTagHelper/&hellip;</a>&gt;"}, {"owner": {"reputation": 1286, "user_id": 3843206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KuCnW.jpg?s=128&g=1", "display_name": "dwenzel", "link": "https://stackoverflow.com/users/3843206/dwenzel"}, "edited": false, "score": 1, "creation_date": 1428512501, "post_id": 29520130, "comment_id": 47196558, "body": "ah... so this is really designed to be used within an .erb file as a View, not within a helper method.  The code is generating HTML, but it never shows up anywhere, as - again - the return value of the method is <code>1..2</code>"}, {"owner": {"reputation": 177, "user_id": 4118282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1070904824/picture?type=large", "display_name": "Opy Osegs", "link": "https://stackoverflow.com/users/4118282/opy-osegs"}, "reply_to_user": {"reputation": 1286, "user_id": 3843206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KuCnW.jpg?s=128&g=1", "display_name": "dwenzel", "link": "https://stackoverflow.com/users/3843206/dwenzel"}, "edited": false, "score": 0, "creation_date": 1428516069, "post_id": 29520130, "comment_id": 47198618, "body": "Thanks @dwenzel . I forgot about the extension and how it affects the HTML output."}], "answers": [{"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 0, "last_activity_date": 1428511648, "creation_date": 1428511648, "answer_id": 29520648, "question_id": 29520130, "link": "https://stackoverflow.com/questions/29520130/ruby-loops-not-working-properly/29520648#29520648", "title": "Ruby Loops not working properly", "body": "<p>This should display all the Sport records as radio buttons:</p>\n\n<pre><code>def sports_as_radio_buttons(sports = Sport.scoped)\n  html = \"\".html_safe\n  sports.each do |sport|\n    html += radio_button_tag('sport_id', sport.id, id: \"sport_#{sport.id}\")\n    html += label_tag(\"sport_#{sport.id}\", sport.name)\n  end\n  html\nend\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 4118282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1070904824/picture?type=large", "display_name": "Opy Osegs", "link": "https://stackoverflow.com/users/4118282/opy-osegs"}, "edited": false, "score": 0, "creation_date": 1428515476, "post_id": 29520973, "comment_id": 47198266, "body": "To think that i had tried something similar in <code>Sport.all.map {|e| check_box_tag(e.sport_name, checked =1) }</code> . Thanks for catching and explaining my error."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 1, "last_activity_date": 1428512694, "creation_date": 1428512694, "answer_id": 29520973, "question_id": 29520130, "link": "https://stackoverflow.com/questions/29520130/ruby-loops-not-working-properly/29520973#29520973", "title": "Ruby Loops not working properly", "body": "<p>This isn't sane:</p>\n\n<pre><code>check_box_tag(x[i], checked_value = 1, unchecked_value = 0)\n</code></pre>\n\n<p>The method definition is:</p>\n\n<pre><code>check_box_tag(name, value = \"1\", checked = false, options = {})\n</code></pre>\n\n<p>You're passing 1 for <code>value</code>, and 0 for <code>checked</code>. You cannot \"name\" parameters with <code>variable = value</code>, all you're doing is setting a variable and then passing the same value through to the method.</p>\n\n<p>If you want to produce a checkbox where the name is the sport's name and its value is the id of the sport, get rid of your pair of loops and just us a <em>single</em> loop:</p>\n\n<pre><code>def sport_select(sport)\n  Sport.all.map do |e|\n    check_box_tag(e.sport_name, e.id)\n  end\nend\n</code></pre>\n\n<p>If you're outputting the result to a page, you will also probably want to use <code>.join('').html_safe</code> to return a single string, and prevent it from being escaped.</p>\n"}], "owner": {"reputation": 177, "user_id": 4118282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1070904824/picture?type=large", "display_name": "Opy Osegs", "link": "https://stackoverflow.com/users/4118282/opy-osegs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 29520973, "answer_count": 2, "score": 0, "last_activity_date": 1428512694, "creation_date": 1428510086, "last_edit_date": 1495540613, "question_id": 29520130, "link": "https://stackoverflow.com/questions/29520130/ruby-loops-not-working-properly", "title": "Ruby Loops not working properly", "body": "<p>I recently asked a question about using some values in a hash for the labels of either radio buttons or check box in a rails form instead of hard coding in the label: <a href=\"https://stackoverflow.com/questions/29235931/using-elements-of-a-hash-as-radio-button\">Using elements of a Hash as radio Button</a>. I tried to solve this by creating a helper method that takes in the hash(basically a table in my database) and maps the required parameter into an array but looping through the array; while using the parameters as a label hasn't produced the desired result, it outputs the value of iterator instead of outputting the result of the lines of code i wrote. Below is my helper method. </p>\n\n<pre><code>def sport_select(sport)\n x = Sport.all.map {|e| e.sport_name}\n for i in 1..x.length\n   check_box_tag(x[i], checked_value = 1, unchecked_value = 0)\n end\nend\n</code></pre>\n\n<p>The line <code>x = Sport.all.map {|e| e.sport_name}</code> produces <code>[\"sport_name\", \"sport_name\"]</code>; but the for loop only shows <code>1..2</code>. I have tried changing <code>x = Sport.all.map {|e| e.sport_name}</code> to <code>x = Sport.all.map {|e| [e.id, e.sport_name]}</code>  to use it as a hash, which produces <code>[[id, \"sport_name\"],[id, \"sport_name\"]]</code> but i have had issues using the <code>id</code> as the key to the hash. Any help will be appreciated. Thanks.</p>\n"}, {"tags": ["html", "ruby"], "comments": [{"owner": {"reputation": 1927, "user_id": 2636112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb03890b531eee7d4d3090bb2d52e11a?s=128&d=identicon&r=PG", "display_name": "wavemode", "link": "https://stackoverflow.com/users/2636112/wavemode"}, "edited": false, "score": 3, "creation_date": 1428511862, "post_id": 29520008, "comment_id": 47196146, "body": "What problem are you having with the code?"}, {"owner": {"reputation": 621, "user_id": 4077486, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-GO6Ey_scITQ/AAAAAAAAAAI/AAAAAAAAAGw/Pk5COnye0u4/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/4077486/james"}, "edited": false, "score": 0, "creation_date": 1428532459, "post_id": 29520008, "comment_id": 47207438, "body": "It looks like you are interpolating the variable icon. Is there a particular reason why |icon| would need to be in quotes? Isn&#39;t it an image? What kind of error are you getting? If you are just seeing a bunch of text on your html, there is a good chance I would assume that it is returning the icon-path to your html, as opposed to an actual image. Can we see the error you are getting so we have a little more information to find out whats going on?"}, {"owner": {"reputation": 3, "user_id": 2607621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko2kD.jpg?s=128&g=1", "display_name": "Padwah", "link": "https://stackoverflow.com/users/2607621/padwah"}, "reply_to_user": {"reputation": 1927, "user_id": 2636112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb03890b531eee7d4d3090bb2d52e11a?s=128&d=identicon&r=PG", "display_name": "wavemode", "link": "https://stackoverflow.com/users/2636112/wavemode"}, "edited": false, "score": 0, "creation_date": 1428571593, "post_id": 29520008, "comment_id": 47222089, "body": "@wavemode -  My code is not producing any results at all ! I&#39;m sorry  for not being able to give a better platform to work off."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2607621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko2kD.jpg?s=128&g=1", "display_name": "Padwah", "link": "https://stackoverflow.com/users/2607621/padwah"}, "edited": false, "score": 0, "creation_date": 1428571638, "post_id": 29522718, "comment_id": 47222120, "body": "Thank you for your help but unfortunately I&#39;m not using Ruby on Rails - just plain old Ruby for me."}, {"owner": {"reputation": 155, "user_id": 4765567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mw5eKkatU2Q/AAAAAAAAAAI/AAAAAAAAAGA/evVjOm1_v3M/photo.jpg?sz=128", "display_name": "Kent Dahl", "link": "https://stackoverflow.com/users/4765567/kent-dahl"}, "reply_to_user": {"reputation": 3, "user_id": 2607621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko2kD.jpg?s=128&g=1", "display_name": "Padwah", "link": "https://stackoverflow.com/users/2607621/padwah"}, "edited": false, "score": 0, "creation_date": 1428610030, "post_id": 29522718, "comment_id": 47247452, "body": "Ah, then either try removing the first slash, or use Dir.pwd instead of Rails.root"}], "tags": [], "owner": {"reputation": 155, "user_id": 4765567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mw5eKkatU2Q/AAAAAAAAAAI/AAAAAAAAAGA/evVjOm1_v3M/photo.jpg?sz=128", "display_name": "Kent Dahl", "link": "https://stackoverflow.com/users/4765567/kent-dahl"}, "is_accepted": false, "score": 0, "last_activity_date": 1428518154, "creation_date": 1428518154, "answer_id": 29522718, "question_id": 29520008, "link": "https://stackoverflow.com/questions/29520008/ruby-iterate-through-every-file-in-a-directory-and-add-to-page/29522718#29522718", "title": "Ruby - Iterate through every file in a directory and add to page", "body": "<p>You are giving an absolute path to Dir.glob so it will not be relative to your Rails project directory. </p>\n\n<p>Try prepending the Rails root path to get a valid absolute path. </p>\n\n<p>Dir.glob(Rails.root + \"/assets... etc</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 2607621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko2kD.jpg?s=128&g=1", "display_name": "Padwah", "link": "https://stackoverflow.com/users/2607621/padwah"}, "edited": false, "score": 0, "creation_date": 1428571769, "post_id": 29522722, "comment_id": 47222198, "body": "Thank you for your help but unfortunately I&#39;m not using Ruby on Rails - just plain old Ruby for me."}, {"owner": {"reputation": 321, "user_id": 3479805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bea50c5a88cccc11d40a9b0eb6e088?s=128&d=identicon&r=PG&f=1", "display_name": "StuffAndThings", "link": "https://stackoverflow.com/users/3479805/stuffandthings"}, "reply_to_user": {"reputation": 3, "user_id": 2607621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko2kD.jpg?s=128&g=1", "display_name": "Padwah", "link": "https://stackoverflow.com/users/2607621/padwah"}, "edited": false, "score": 0, "creation_date": 1428593863, "post_id": 29522722, "comment_id": 47237529, "body": "Sorry for my confusion, though I would still like to help. Could you please provide additional context about your running environment? What gems are you using? Are you running a web server, or just opening the html on your browser? What is your process for rendering the embedded ruby?"}], "tags": [], "owner": {"reputation": 321, "user_id": 3479805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bea50c5a88cccc11d40a9b0eb6e088?s=128&d=identicon&r=PG&f=1", "display_name": "StuffAndThings", "link": "https://stackoverflow.com/users/3479805/stuffandthings"}, "is_accepted": false, "score": 1, "last_activity_date": 1428518164, "creation_date": 1428518164, "answer_id": 29522722, "question_id": 29520008, "link": "https://stackoverflow.com/questions/29520008/ruby-iterate-through-every-file-in-a-directory-and-add-to-page/29522722#29522722", "title": "Ruby - Iterate through every file in a directory and add to page", "body": "<p>I'm not an expert so any improvements would be appreciated. I could only get the Ruby <code>Dir.glob()</code> to iterate by providing the absolute path to the directory. I'm using Rails 4.0.8. Here's what works for me: </p>\n\n<pre><code>&lt;ul&gt;\n  &lt;% Dir.glob(\"#{Rails.root}/app/assets/images/*.png\") do |icon| %&gt;\n      &lt;% icon_base = File.basename(icon) %&gt;\n      &lt;li&gt;&lt;%= link_to icon_base, image_url(icon_base) %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>This produces a list of hyperlinks to all PNG images in <code>/assets/images</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 2607621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko2kD.jpg?s=128&g=1", "display_name": "Padwah", "link": "https://stackoverflow.com/users/2607621/padwah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428518164, "creation_date": 1428509781, "last_edit_date": 1495542493, "question_id": 29520008, "link": "https://stackoverflow.com/questions/29520008/ruby-iterate-through-every-file-in-a-directory-and-add-to-page", "title": "Ruby - Iterate through every file in a directory and add to page", "body": "<p>I would like to loop over a directory of .png icons and add them to a  on a standalone page. I would also like to expose the file name of the .png under each one.</p>\n\n<p>In a nutshell, this should become an automated feature to display all icons I'm currently using in my development environment so I can use this standalone page as an icon directory.</p>\n\n<p>I'm <em>very</em> new to Ruby but my question first led to me this article but does not go far enough:\n<a href=\"https://stackoverflow.com/questions/2512254/iterate-through-every-file-in-one-directory\">Iterate through every file in one directory</a></p>\n\n<p>My (basic inline HTML), attempt so far:</p>\n\n<pre><code>&lt;ul&gt;\n\n    &lt;% Dir.glob('/assets/css/img/png/*.png') do |icon| %&gt;\n\n        &lt;li&gt; &lt;%= \"#{icon}\" %&gt; &lt;/li&gt;\n\n    &lt;% end %&gt;\n\n&lt;/ul&gt;\n</code></pre>\n\n<p>Any help is hugely appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1428523545, "post_id": 29519972, "comment_id": 47203108, "body": "IMHO, putting executable code in hash keys is a design smell. As is converting from one data structure to another."}, {"owner": {"reputation": 646, "user_id": 408251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4bae8d2e86cc7d4a993474da115904b?s=128&d=identicon&r=PG", "display_name": "qbantek", "link": "https://stackoverflow.com/users/408251/qbantek"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1428541560, "post_id": 29519972, "comment_id": 47210078, "body": "I agree,... kinda: this is the post request from a form generated by an external service that needs to be posted back to the external service matching the above format. Rails working as a pass through middle man handily translate the POST to a nice structure (original) but the service wont accept it unless converted to the desired format."}], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 408251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4bae8d2e86cc7d4a993474da115904b?s=128&d=identicon&r=PG", "display_name": "qbantek", "link": "https://stackoverflow.com/users/408251/qbantek"}, "edited": false, "score": 0, "creation_date": 1428518014, "post_id": 29521169, "comment_id": 47199793, "body": "thanks! I was doing something similar but much longer."}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428521948, "post_id": 29521169, "comment_id": 47202117, "body": "Thanks @CarySwoveland - I&#39;ve done the combining of the first lines."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428525436, "post_id": 29521169, "comment_id": 47204089, "body": "A small thing, but you might want to add a last line, <code>new_hash</code>. Nice solution."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 2, "last_activity_date": 1428522050, "last_edit_date": 1428522050, "creation_date": 1428513305, "answer_id": 29521169, "question_id": 29519972, "link": "https://stackoverflow.com/questions/29519972/what-would-be-the-best-way-to-convert-this-hash/29521169#29521169", "title": "What would be the best way to convert this hash?", "body": "<p>If you can make a few assumptions about the structure of the input i.e. that it has the numbered responses inside a <code>\"userResponse.quesAnsDetailArray\"</code> section then you could do something along these lines:</p>\n\n<pre><code>new_hash = { 'parameters' =&gt; \n  { 'userResponse.objectInstanceType' =&gt; 'QuestionAnsResponse' } }\n\nhash['parameters']['userResponse.quesAnsDetailArray'].each_pair do |index, details|\n  details.each_pair do |field, value|\n    new_hash['parameters'][\"userResponse.quesAnsDetailArray[#{index}]#{field}\"] = value\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1428525271, "creation_date": 1428525271, "answer_id": 29524843, "question_id": 29519972, "link": "https://stackoverflow.com/questions/29519972/what-would-be-the-best-way-to-convert-this-hash/29524843#29524843", "title": "What would be the best way to convert this hash?", "body": "<p>I have assumed the hash is as follows:</p>\n\n<pre><code>h = {\n  'parameters'=&gt; {\n    'userResponse.objectInstanceType'=&gt; 'QuesAnsResponse',\n    'userResponse.quesAnsDetailArray'=&gt; {\n      '0'=&gt; {\n        '.answer'=&gt; '',\n        '.answerFieldType'=&gt; 'text',\n        '.isRequired'=&gt; 'true',\n        '.metaData'=&gt; 'QUESTION_1',\n        '.questionFieldType'=&gt; 'label',\n        '.question'=&gt; 'What is the name of your state?'\n      },\n      '1'=&gt; {\n        '.answer'=&gt; '',\n        '.answerFieldType'=&gt; 'text',\n        '.isRequired'=&gt; 'true',\n        '.metaData'=&gt; 'QUESTION_2',\n        '.questionFieldType'=&gt; 'label',\n        '.question'=&gt; 'What is the name of your first school'\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>and would convert it to the desired format as follows:</p>\n\n<pre><code>{ 'parameters'=&gt; Hash[[\n    ['userResponse.objectInstanceType',\n      h['parameters']['userResponse.objectInstanceType']],\n     *h['parameters']['userResponse.quesAnsDetailArray'].\n       flat_map { |ndx,f|\n         [\"userResponse.quesAnsDetailArray[#{ndx}]\"].product(f.to_a) }.\n           map { |prefix,(suffix,value)| [prefix+suffix, value] } ]]      \n}\n  #=&gt; {\"parameters\"=&gt;\n    {\"userResponse.objectInstanceType\"=&gt;\"QuesAnsResponse\", \n     \"userResponse.quesAnsDetailArray[0].answer\"=&gt;\"\", \n     \"userResponse.quesAnsDetailArray[0].answerFieldType\"=&gt;\"text\", \n     \"userResponse.quesAnsDetailArray[0].isRequired\"=&gt;\"true\", \n     \"userResponse.quesAnsDetailArray[0].metaData\"=&gt;\"QUESTION_1\", \n     \"userResponse.quesAnsDetailArray[0].questionFieldType\"=&gt;\"label\", \n     \"userResponse.quesAnsDetailArray[0].question\"=&gt;\n       \"What is the name of your state?\",\n     \"userResponse.quesAnsDetailArray[1].answer\"=&gt;\"\", \n     \"userResponse.quesAnsDetailArray[1].answerFieldType\"=&gt;\"text\", \n     \"userResponse.quesAnsDetailArray[1].isRequired\"=&gt;\"true\", \n     \"userResponse.quesAnsDetailArray[1].metaData\"=&gt;\"QUESTION_2\", \n     \"userResponse.quesAnsDetailArray[1].questionFieldType\"=&gt;\"label\", \n     \"userResponse.quesAnsDetailArray[1].question\"=&gt;\n       \"What is the name of your first school\"}} \n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 408251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4bae8d2e86cc7d4a993474da115904b?s=128&d=identicon&r=PG", "display_name": "qbantek", "link": "https://stackoverflow.com/users/408251/qbantek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 29521169, "answer_count": 2, "score": 0, "last_activity_date": 1428525271, "creation_date": 1428509678, "last_edit_date": 1428522713, "question_id": 29519972, "link": "https://stackoverflow.com/questions/29519972/what-would-be-the-best-way-to-convert-this-hash", "title": "What would be the best way to convert this hash?", "body": "<p>I have a Ruby hash that I need to convert to another format. \nConsidering that the 'array' size is unknown/unlimited, how would you 'flatten' this hash into the desired format?</p>\n\n<p>Original Hash</p>\n\n<pre><code>{\n  :parameters =&gt; {\n    :'userResponse.objectInstanceType' =&gt; 'QuesAnsResponse',\n    :'userResponse.quesAnsDetailArray' =&gt; {\n      :'0' =&gt; {\n        '.answer'=&gt; 'Texas'\n      },\n      :'1' =&gt; {\n        '.answer' =&gt; 'w3schools'\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Desired Format:</p>\n\n<pre><code>{\n  :parameters =&gt; {\n    :'userResponse.objectInstanceType' =&gt; 'QuestionAnsResponse',\n    :'userResponse.quesAnsDetailArray[0].answer' =&gt; 'Texas',    \n    :'userResponse.quesAnsDetailArray[1].answer' =&gt; 'w3schools'\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1428509714, "post_id": 29519880, "comment_id": 47194882, "body": "You should have a in-between step which would list all the results matching the given name, displaying both Building and Room. And then on this page you can display a &quot;show link&quot; of the resource. All of this can be done via AJAX, but it makes it a lot more complex."}, {"owner": {"reputation": 105, "user_id": 3790190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2e62c33a682704623f39906524ca629f?s=128&d=identicon&r=PG&f=1", "display_name": "mruis", "link": "https://stackoverflow.com/users/3790190/mruis"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1428510213, "post_id": 29519880, "comment_id": 47195171, "body": "A drop-down menu (google-style) of all the matching names under the search field would be nice indeed. Then, a user could click any of these, and the app would act accordingly (use appropriate controller?). Any more specific ideas on how to implement this? Examples? I am new to Rails, so tips are appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 148, "user_id": 2472024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06025a88fcfb2acc894649799ebb2cad?s=128&d=identicon&r=PG", "display_name": "luster", "link": "https://stackoverflow.com/users/2472024/luster"}, "is_accepted": false, "score": 2, "last_activity_date": 1428510214, "creation_date": 1428510214, "answer_id": 29520186, "question_id": 29519880, "link": "https://stackoverflow.com/questions/29519880/rails-search-form-two-models/29520186#29520186", "title": "Rails search form, two models", "body": "<p>I would recommend you to add the search code in the index method of buildings controller, there are many things you can do but here is what i will recommend:</p>\n\n<pre><code>def index\n   # \n   if params.has_key?(:name)\n     @buildings = Building.joins(:rooms).\n                  where([\n                     'lower(buildings.name) like ? or lower(rooms.name) like ?', \n                     \"%#{params[:name].downcase}%\",\n                     \"%#{params[:name].downcase}%\"\n                  ])\n   else\n     # your normal code goes here.\n   end\nend\n</code></pre>\n\n<p>Any other information you need such address ( is that a different model ) can he included in there.</p>\n\n<p>Hope this helps,</p>\n\n<p>PD: if necessary you can render a different view when a search is present inside your if block </p>\n\n<pre><code>render action: 'my_custom_view', status: :ok\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 3790190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2e62c33a682704623f39906524ca629f?s=128&d=identicon&r=PG&f=1", "display_name": "mruis", "link": "https://stackoverflow.com/users/3790190/mruis"}, "is_accepted": false, "score": 0, "last_activity_date": 1428575331, "creation_date": 1428575331, "answer_id": 29536001, "question_id": 29519880, "link": "https://stackoverflow.com/questions/29519880/rails-search-form-two-models/29536001#29536001", "title": "Rails search form, two models", "body": "<p>Due to time restrictions, I decided to merge these models into one common model, Space. It holds all the information that a building and a room needs. Thanks anyways!</p>\n"}], "owner": {"reputation": 105, "user_id": 3790190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2e62c33a682704623f39906524ca629f?s=128&d=identicon&r=PG&f=1", "display_name": "mruis", "link": "https://stackoverflow.com/users/3790190/mruis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1428575331, "creation_date": 1428509428, "question_id": 29519880, "link": "https://stackoverflow.com/questions/29519880/rails-search-form-two-models", "title": "Rails search form, two models", "body": "<p>I am trying to implement a search field in Rails 4 to find data behind two models. I have two controllers: buildings and rooms, and two models: building and room. A building, naturally, has many rooms and a room belongs to a building, which I have stated in the respective models. </p>\n\n<p><strong>Basically, a user could type either a building or a room name into the search form and it would return a response with details about the building or room.</strong> Of course, a building needs to have an address, and a room needs to know in which building it is with the address as well. So I'd need to display different details according to the searched for instance. Both have the same String attribute <code>name</code>, so this could make things easier.</p>\n\n<p>I have no luck in finding a relevant example on how to implement such a search form. This is the working basic search I have at the moment in <code>views\\buildings\\index.html.erb</code>, which can only search buildings:</p>\n\n<pre><code>&lt;%= form_tag({controller: \"buildings\", action: \"show\"}, method: \"get\", class: \"nifty_form\") do %&gt;\n  &lt;%= label_tag(:name, \"Search for a building (later also rooms):\") %&gt;\n  &lt;%= text_field_tag(:name) %&gt;\n  &lt;%= submit_tag(\"Search\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is the <code>show</code> method in <code>controllers\\buildings_controller.rb</code>:</p>\n\n<pre><code>def show\n  @building = Building.where('lower(name) = ?', params[:name].downcase).first\nend\n</code></pre>\n\n<p>And this is the route it refers to:</p>\n\n<pre><code>get 'buildings/:id' =&gt; 'buildings#show'\n</code></pre>\n\n<p>Any and all help is appreciated!</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "apache"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 7, "creation_date": 1428508599, "post_id": 29519512, "comment_id": 47194161, "body": "Might I humbly suggest that embracing Ruby would be a better strategy?"}, {"owner": {"reputation": 483, "user_id": 1610576, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/2d9hX.jpg?s=128&g=1", "display_name": "IIllIIll", "link": "https://stackoverflow.com/users/1610576/iilliill"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1428508704, "post_id": 29519512, "comment_id": 47194222, "body": "I&#39;m not entirely new to Ruby and RoR, but I still feel like a noob."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1428509240, "post_id": 29519512, "comment_id": 47194566, "body": "So learn, at some point you must have been a noob at php.  If you get stuck then there are loads of people here who will help you."}, {"owner": {"reputation": 483, "user_id": 1610576, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/2d9hX.jpg?s=128&g=1", "display_name": "IIllIIll", "link": "https://stackoverflow.com/users/1610576/iilliill"}, "edited": false, "score": 0, "creation_date": 1428509424, "post_id": 29519512, "comment_id": 47194682, "body": "That&#39;s what I&#39;m trying to do here! \ud83d\ude02"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1428515258, "post_id": 29519512, "comment_id": 47198159, "body": "The closest thing to <code>mod_rails</code> is <a href=\"https://www.phusionpassenger.com/\" rel=\"nofollow noreferrer\">Passenger</a>. They even own <code>modrails.com</code>."}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 1610576, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/2d9hX.jpg?s=128&g=1", "display_name": "IIllIIll", "link": "https://stackoverflow.com/users/1610576/iilliill"}, "edited": false, "score": 0, "creation_date": 1428516135, "post_id": 29520778, "comment_id": 47198654, "body": "This makes perfect sense! Thank you so much for helping me. It&#39;s perfectly understandable that you&#39;d either want to use PHP <i>or</i> RoR. Thanks, again!"}, {"owner": {"reputation": 101, "user_id": 4422271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ckCEe.jpg?s=128&g=1", "display_name": "Rick Chatham", "link": "https://stackoverflow.com/users/4422271/rick-chatham"}, "edited": false, "score": 0, "creation_date": 1439493916, "post_id": 29520778, "comment_id": 51897494, "body": "Railstutorial.org is also an incredibly useful site for getting up and running quickly with RoR."}], "tags": [], "owner": {"reputation": 800, "user_id": 1833177, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7145080805d78faef2c26efbb4b7ea11?s=128&d=identicon&r=PG", "display_name": "cmw2379", "link": "https://stackoverflow.com/users/1833177/cmw2379"}, "is_accepted": true, "score": 3, "last_activity_date": 1428512062, "creation_date": 1428512062, "answer_id": 29520778, "question_id": 29519512, "link": "https://stackoverflow.com/questions/29519512/whats-the-best-way-to-run-php-within-rails/29520778#29520778", "title": "What&#39;s the best way to run PHP within Rails?", "body": "<p>While it's probably possible, it's a bad idea. The only time PHP should run with RoR is when it is an external source that is queried such as a PHP API that RoR consumes. </p>\n\n<p>By combining PHP with Ruby on Rails, you are going against what Ruby on Rails is designed for and will make your code a lot less portable. The purpose or RoR is to make uniform code that follows the principles set by the creator. So, as Robert Harvey said, you should really truly embrace RoR. This will make your code easier to read for other developers and will also make asking questions on here and other forums easy since it would be a RoR question not a combined sudo question.</p>\n\n<p>A good sign for not using PHP is that there are no obvious solutions out there for this that are pain free. From that, it's pretty apparent that there is no really need for it past making development easier for somebody switching frameworks.</p>\n\n<p>So, I would suggest learning Ruby On Rails fully vs trying to combined them. It's going to take a while to learn all you need, but the same could be said about any framework/language.</p>\n\n<p>NOTE: This might be a helpful resource if you need it <a href=\"https://rads.stackoverflow.com/amzn/click/com/1934356042\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/Rails-PHP-Developers-Pragmatic-Programmers/dp/1934356042</a></p>\n"}], "owner": {"reputation": 483, "user_id": 1610576, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/2d9hX.jpg?s=128&g=1", "display_name": "IIllIIll", "link": "https://stackoverflow.com/users/1610576/iilliill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1806, "favorite_count": 0, "accepted_answer_id": 29520778, "answer_count": 1, "score": 1, "last_activity_date": 1428512062, "creation_date": 1428508479, "question_id": 29519512, "link": "https://stackoverflow.com/questions/29519512/whats-the-best-way-to-run-php-within-rails", "title": "What&#39;s the best way to run PHP within Rails?", "body": "<p>I'd like to run PHP from within Rails, so I'd like to be able to compile both PHP and Ruby code in the <code>.erb</code> files. I can't figure out the best way to do this, and I'm having a hard time finding information about it without becoming completely lost.</p>\n\n<p>I'm currently a Rails noob and a PHP lover so I'm using WEBrick on my Mac but Apache on my server (Windows), and I'd like to use both Rails and PHP on my Apache server if that's possible. I've heard about Passenger, but I've looked in <code>httpd.conf</code> on my Windows server and there's no <code>mod_rails</code> to be found.</p>\n\n<p>I don't know if I'm ready to try installing Passenger on a Windows machine. Is that even possible? What even is Passenger?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays", "loops"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1428508123, "last_edit_date": 1428508123, "creation_date": 1428508045, "answer_id": 29519364, "question_id": 29519296, "link": "https://stackoverflow.com/questions/29519296/ruby-read-text-file-into-2d-array-while-also-removing-newlines/29519364#29519364", "title": "RUBY: Read text file into 2D array, while also removing newlines?", "body": "<p>Stripping your input should help:</p>\n\n<pre><code>def load_board(file)\n    board = File.readlines(file)[1..-1].map do |line|\n        #    \u21d3\u21d3\u21d3\u21d3\u21d3\n        line.strip.split(\"\").map(&amp;:to_s)\n    end\nend\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-strip\" rel=\"nofollow\"><code>String#strip</code></a> will remove leading-trailing blanks from a string. The other option is not to use <code>readlines</code> in favour of <code>read</code> and <code>split</code> by <code>$/</code> (line separator):</p>\n\n<pre><code>def load_board(file)\n    board = File.read(file).split($/)[1..-1].map do |line|\n        line.split(\"\").map(&amp;:to_s)\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 2162306, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af3f518bf8c7d613e48eaee328f2658d?s=128&d=identicon&r=PG", "display_name": "InputUsername", "link": "https://stackoverflow.com/users/2162306/inputusername"}, "is_accepted": false, "score": 0, "last_activity_date": 1428508538, "creation_date": 1428508538, "answer_id": 29519538, "question_id": 29519296, "link": "https://stackoverflow.com/questions/29519296/ruby-read-text-file-into-2d-array-while-also-removing-newlines/29519538#29519538", "title": "RUBY: Read text file into 2D array, while also removing newlines?", "body": "<p>You can add a .chomp before the .split, like this:</p>\n\n<pre><code>def load_board(file)\n    board = File.readlines(file)[1..-1].map do |line|\n        line.chomp.split(\"\").map(&amp;:to_s)\n    end\nend\n</code></pre>\n\n<p>Haven't exactly tested it but did some fiddling and it should work <a href=\"http://repl.it/hgJ/1\" rel=\"nofollow\">http://repl.it/hgJ/1</a>.</p>\n"}], "owner": {"reputation": 35, "user_id": 4760790, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/518daf4e995dae8e2e0da60359a0c978?s=128&d=identicon&r=PG&f=1", "display_name": "EnduranceMan", "link": "https://stackoverflow.com/users/4760790/enduranceman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428508538, "creation_date": 1428507841, "question_id": 29519296, "link": "https://stackoverflow.com/questions/29519296/ruby-read-text-file-into-2d-array-while-also-removing-newlines", "title": "RUBY: Read text file into 2D array, while also removing newlines?", "body": "<p>I'm trying to input text from a file, ignoring the first line, and adding each character to a 2D array at a separate index [[],[]].  So far I can add the characters to their own index but can't remove the newline characters with .chomp or etc.</p>\n\n<p>I want my end result to be </p>\n\n<pre><code>[['*','.','.','.']\",\"['.','.','*','.']\",\"['.','.','.','.']]\n</code></pre>\n\n<p>So that <code>[0][0]</code> will return <code>*</code> for example, and <code>[0]</code> will return <code>*...</code></p>\n\n<p>Right now I'm returning </p>\n\n<pre><code>[['*','.','.','.',\"\\n\"]\",\"['.','.','*','.',\"\\n\"]\",\"['.','.','.','.',\"\\n\"]]\n</code></pre>\n\n<p>The code in question is:</p>\n\n<pre><code>def load_board(file)\n    board = File.readlines(file)[1..-1].map do |line|\n        line.split(\"\").map(&amp;:to_s)\n    end\nend\n\norigin_board = load_board('mines.txt')\nprint origin_board\n</code></pre>\n\n<p>If I try the following code:</p>\n\n<pre><code>def load_board(file)\n    board = File.readlines(file)[1..-1].map do |line|\n        line.split.map(&amp;:to_s)\n    end\nend\n\norigin_board = load_board('mines.txt')\nprint origin_board\n</code></pre>\n\n<p>I end up with a 2D array like:</p>\n\n<pre><code>[[\"*...\"],[\"..*.\"],[\"....\"]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "capistrano"], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1428506256, "creation_date": 1428506256, "question_id": 29518705, "link": "https://stackoverflow.com/questions/29518705/capistrano-2-to-3-how-to-refactor-a-gem-with-shared-recipes-that-uses-deprecate", "title": "Capistrano 2 to 3: how to refactor a gem with shared recipes that uses deprecated &quot;Capistrano::Configuration.instance(:must_exist).load do&quot;", "body": "<p>I'm really digging into capistrano for the first time (instead of just using it as a magic wand) as I upgrade an app from cap 2 to cap 3. The app relies on a gem that uses the following syntax to make the recipes accessible through capistrano's special load path:</p>\n\n<pre><code>Capistrano::Configuration.instance(:must_exist).load do\n  # tasks\nend\n</code></pre>\n\n<p>This pattern is outlined in several resources I found online, such as <a href=\"http://matthewtodd.org/2008/04/24/rails-tip-4-writing-capistrano-recipes-to-be-loaded-from-gems.html\" rel=\"nofollow\">this (outdated) blog post</a> on loading capistrano recipes from gem.</p>\n\n<p>This is apparently deprecated in cap 3, as it now returns a <code>NoMethodError</code> on <code>.instance</code>. Can anyone share or point me to a resource that explains a good way to remove this block and access the tasks from the gem easily?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "devise"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1428506429, "post_id": 29518655, "comment_id": 47192596, "body": "Did you add the new column to the users table in the DB ?You might have to create the migration file and/or run <code>rake db:migrate</code>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 0, "creation_date": 1428508453, "post_id": 29518812, "comment_id": 47194055, "body": "thanks for your response I have exectuted your post and now I get this error: undefined local variable or method `unconfirmed_email&#39; for #&lt;User:0x52fe9d8&gt;. Do I need to add another field now?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 0, "creation_date": 1428508660, "post_id": 29518812, "comment_id": 47194200, "body": "Oh my mistake, yep you&#39;re right. I&#39;ll update my answer."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 1, "creation_date": 1428508860, "post_id": 29518812, "comment_id": 47194325, "body": "If you don&#39;t want to recreate the db then you&#39;ll have to generate another migration file and just add that one field <code>unconfirmed_email</code>. Otherwise you can just just update the <code>add_confirmable_to_devise</code> migration you just created and rerun the migrations."}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 0, "creation_date": 1428512599, "post_id": 29518812, "comment_id": 47196620, "body": "Ok thanks, I have added the extra field and I don&#39;t get the error anymore. However, I don&#39;t receive any emails yet. I have set-up the actionmailer for dev and production using mailgun and this is working for other emails (not devise) but not for the confirmation email. Any suggestions?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 0, "creation_date": 1428513173, "post_id": 29518812, "comment_id": 47196939, "body": "I&#39;m not sure offhand. Devise should be using actionmailer so it should work if other emails are working. I would check the rails log to make sure it looks like it&#39;s successfully firing the email. The issue is probably more easily solved by asking a new question."}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 6, "last_activity_date": 1428508713, "last_edit_date": 1428508713, "creation_date": 1428506560, "answer_id": 29518812, "question_id": 29518655, "link": "https://stackoverflow.com/questions/29518655/send-email-confirmation-with-devise/29518812#29518812", "title": "Send email confirmation with devise", "body": "<p>The reason you are getting that error message is because the blackbox devise confirmation functionality uses fields that it assumes exist on the <code>User</code> model. This means that it assumes you have ensured the columns exist in the database for the users table. You need to do more than just add confirmable to the <code>User</code> model. You also need to add the migration for <code>confirmed_at</code> and then <code>rake db:migrate</code>.</p>\n\n<p>Generate the migration:</p>\n\n<pre><code>rails g migration add_confirmable_to_devise\n</code></pre>\n\n<p>Make sure the contents of the migration match this:</p>\n\n<pre><code>class AddConfirmableToDevise &lt; ActiveRecord::Migration\n  def change\n    change_table(:users) do |t| \n      t.string   :confirmation_token\n      t.datetime :confirmed_at\n      t.datetime :confirmation_sent_at\n      t.string   :unconfirmed_email\n    end\n    add_index :users, :confirmation_token, :unique =&gt; true \n  end\nend\n</code></pre>\n\n<p>Then run your migration with <code>rake db:migrate</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2523, "favorite_count": 1, "accepted_answer_id": 29518812, "answer_count": 1, "score": 3, "last_activity_date": 1428508713, "creation_date": 1428506124, "question_id": 29518655, "link": "https://stackoverflow.com/questions/29518655/send-email-confirmation-with-devise", "title": "Send email confirmation with devise", "body": "<p>I have devise and omniauth installed for letting users sign up with their facebook account (this works).Now I want to send an email to an user when they have created an account with the facebook login functionality.</p>\n\n<p>I am also using Actionmailer to send trigger based emails to users. Since I am using devise I don't have a create method in my user model to trigger the email, so I thought to make use of the standard functionality of devise to send out a confirmation email. I have added confirmable to the user model, but now i get the following error:</p>\n\n<p>NameError in Devise::RegistrationsController#create\nundefined local variable or method `confirmed_at' for #</p>\n\n<p>I don't understand the error message. For my perspective the devise gem is quite a black box and I don't see to which controller the error is referring to. Any help from someone who understands the devise gem better than I do?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "neo4j", "neo4j.rb"], "answers": [{"comments": [{"owner": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1428508008, "post_id": 29518687, "comment_id": 47193767, "body": "Ah, that makes perfect sense. Digging into it a little bit deeper, it&#39;s a feature that I don&#39;t think that I would need either way."}, {"owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "reply_to_user": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1428509826, "post_id": 29518687, "comment_id": 47194956, "body": "Great ;)  The other thing I forgot to mention: You should get into the habit of using strings for <code>model_class</code> like this: , <code>model_class: &#39;User&#39;</code>"}, {"owner": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1428513433, "post_id": 29518687, "comment_id": 47197081, "body": "Will do! Thanks a ton."}], "tags": [], "owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "is_accepted": true, "score": 4, "last_activity_date": 1428506225, "creation_date": 1428506225, "answer_id": 29518687, "question_id": 29518353, "link": "https://stackoverflow.com/questions/29518353/using-has-many-both-in-neo4j-rb/29518687#29518687", "title": "Using has_many &quot;both&quot; in neo4j.rb", "body": "<p>This is expected behavior.  Neo4j doesn't allow you to create relationships which don't have a direction.  Thus, the <code>both</code> association type is only for querying (that is, when querying it specifies the relationship, but not the direction to/from the node).</p>\n\n<p>Since Neo4j relationships always have a direction, when you create relationships with a <code>both</code> association it creates them as <code>out</code> relationships.  See this section in the docs:</p>\n\n<p><a href=\"https://github.com/neo4jrb/neo4j/wiki/Neo4j-v3-Declared-Relationships#all-has_manyhas_one-method-calls-begin-with-declaration-of-direction\" rel=\"nofollow\">https://github.com/neo4jrb/neo4j/wiki/Neo4j-v3-Declared-Relationships#all-has_manyhas_one-method-calls-begin-with-declaration-of-direction</a></p>\n\n<p>Thinking about it now, I'm wondering if perhaps Neo4j.rb shouldn't let you create relationships using <code>both</code> associations.  What do you think?  I'll create a Github issue as well</p>\n"}], "owner": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 1, "accepted_answer_id": 29518687, "answer_count": 1, "score": 3, "last_activity_date": 1428506225, "creation_date": 1428505294, "question_id": 29518353, "link": "https://stackoverflow.com/questions/29518353/using-has-many-both-in-neo4j-rb", "title": "Using has_many &quot;both&quot; in neo4j.rb", "body": "<p>I'm looking for a way to set up a relationship between <code>User</code>s where you can use <code>in</code>, <code>out</code>, and <code>both</code> all at the same time in Neo4j.rb.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>class User\n  include Neo4j::ActiveNode\n\n  has_many :both, :friends, type: :connection, model_class: User\n  has_many :out, :following, type: :connection, model_class: User\n  has_many :in, :followers, type: :connection, model_class: User\nend\n</code></pre>\n\n<p>The following works:</p>\n\n<pre><code>me = User.create\nyou = User.create\n\nme.followers &lt;&lt; you\nme.followers.to_a\n#=&gt; [you]\n\nyou.following.to_a\n#=&gt; [me]\n</code></pre>\n\n<p>The opposite of above works as well. But this doesn't seem to work:</p>\n\n<pre><code>me.friends &lt;&lt; you\nyou.following.to_a\n#=&gt; []\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>me.followers.to_a\n#=&gt; []\n</code></pre>\n\n<p>However, this does:</p>\n\n<pre><code>me.following.to_a\n#=&gt; [you]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception", "error-handling", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1428507007, "post_id": 29518616, "comment_id": 47193013, "body": "In tis case, you can use just rescue without begin. :)"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 1, "last_activity_date": 1428506031, "creation_date": 1428506031, "answer_id": 29518616, "question_id": 29518307, "link": "https://stackoverflow.com/questions/29518307/how-do-i-rescue-a-capybara-error-twice/29518616#29518616", "title": "How do I rescue a Capybara Error Twice?", "body": "<p>You can call the method again with a flag saying that you are executing the method for a second time:</p>\n\n<pre><code>def select_post_meta_name(page, selector = 'div.post-name', first_call_of_method = true)\n  begin\n    page.find(selector).text\n  rescue Capybara::ElementNotFound =&gt; e\n    if first_call_of_method\n      select_post_meta_name(page, 'div.post-title', false)\n    else\n      Rails.logger.warn('Could not find any elements: ' + e)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 2, "last_activity_date": 1428506495, "creation_date": 1428506495, "answer_id": 29518783, "question_id": 29518307, "link": "https://stackoverflow.com/questions/29518307/how-do-i-rescue-a-capybara-error-twice/29518783#29518783", "title": "How do I rescue a Capybara Error Twice?", "body": "<p>You can use <em>retry</em> in rescue block or \"recursive\" call the method again with param.</p>\n\n<pre><code>def select_post_meta_name(page, meta_name = 'div.post-name')\n  re_try = false\n  begin\n    page.find(meta_name).text\n  rescue Capybara::ElementNotFound =&gt; e\n    if re_try\n      Rails.logger.warn('Could not find any elements: ' + e)\n    else\n      meta_name = 'div.post-title'\n      re_try = true\n      retry\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 2820541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3528ee535c4bb8cd9326a4b4b1d405e6?s=128&d=identicon&r=PG&f=1", "display_name": "BaneOfSerenity", "link": "https://stackoverflow.com/users/2820541/baneofserenity"}, "is_accepted": true, "score": 1, "last_activity_date": 1428507725, "creation_date": 1428507725, "answer_id": 29519249, "question_id": 29518307, "link": "https://stackoverflow.com/questions/29518307/how-do-i-rescue-a-capybara-error-twice/29519249#29519249", "title": "How do I rescue a Capybara Error Twice?", "body": "<p>Why not try this, nesting exceptions works from what I have done. This should work and the second time the exception is thrown then you can say for sure that what you are doing it truly broken.</p>\n\n<pre><code># FAKE EMBARRASSING PSEUDO CODE ....\ndef select_post_meta_name(page)\n  selector = 'div.post-name'\n  begin\n    page.find(selector).text\n  rescue Capybara::ElementNotFound =&gt; e\n    begin\n      other_element_selector = 'div.post-title'\n      page.find(other_element_selector).text\n    rescue Capybara::ElementNotFound =&gt; e\n      Rails.logger.warn('Could not find any elements: ' + e)\n      ''\n    end\n  end\nend\n# /FAKE EMBARRASSING PSEUDO CODE ....\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 3689403, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7c44f5971856c4b5d94cc2e41c8e629?s=128&d=identicon&r=PG&f=1", "display_name": "SharkLaser", "link": "https://stackoverflow.com/users/3689403/sharklaser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2838, "favorite_count": 0, "accepted_answer_id": 29519249, "answer_count": 3, "score": 2, "last_activity_date": 1428507725, "creation_date": 1428505179, "question_id": 29518307, "link": "https://stackoverflow.com/questions/29518307/how-do-i-rescue-a-capybara-error-twice", "title": "How do I rescue a Capybara Error Twice?", "body": "<p>I'm using Capybara to check a page for an element and return it's content.  If the element doesn't exist i'd like to look for a different element's content and return that.  If neither are found i'd like to return an empty string.</p>\n\n<p>The challenge here is that Capybara throws a <code>Capybara::ElementNotFound</code> error when <code>#find</code> fails. </p>\n\n<p>For selecting when the case is \"return the element or an empty string\" this is easy -- i simply <code>rescue</code> and return the empty string like below:</p>\n\n<pre><code>def select_post_meta_name(page)\n  selector = 'div.post-name'\n  page.find(selector).text\nrescue Capybara::ElementNotFound =&gt; e\n  Rails.logger.warn('Could not get meta name: ' + e)\n  ''\nend\n</code></pre>\n\n<p>How would i refactor the code above to handle something like the intent of the following pseudo code?</p>\n\n<pre><code># FAKE EMBARRASSING PSEUDO CODE ....\ndef select_post_meta_name(page)\n  selector = 'div.post-name'\n  page.find(selector).text\nrescue Capybara::ElementNotFound =&gt; e\n  other_element_selector = 'div.post-title'\n  page.find(other_element_selector).text\n\n  rescue Capybara::ElementNotFound =&gt; e\n    Rails.logger.warn('Could not find any elements: ' + e)\n    ''\nend\n# /FAKE EMBARRASSING PSEUDO CODE ....\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "pry"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428505722, "post_id": 29518208, "comment_id": 47192064, "body": "What does <code>bundle exec pry --version</code> returns?"}, {"owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428508667, "post_id": 29518208, "comment_id": 47194203, "body": "Pry version 0.10.1 on Ruby 2.1.2"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428509108, "post_id": 29518208, "comment_id": 47194485, "body": "<code>0.10.1</code> was released on <a href=\"https://github.com/pry/pry/tree/v0.10.1\" rel=\"nofollow noreferrer\">August, 17</a>."}, {"owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428509368, "post_id": 29518208, "comment_id": 47194639, "body": "Thanks. How do releases work? I mean, what is the process when it comes to uploading a release to RubyGems.org?"}, {"owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428509728, "post_id": 29518208, "comment_id": 47194895, "body": "My comment above wasn&#39;t accurate. This is what I wanted to say: How do releases work? I mean, what is the standard criteria (if any) to set up a new release?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1428510423, "post_id": 29518208, "comment_id": 47195305, "body": "When <code>gem push</code> is explicitly executed by gem\u2019s author :) Some repos, though, monitor github for <i>new releases</i> and update gems respectively. Release here means new tag in github repo."}], "answers": [{"tags": [], "owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "is_accepted": false, "score": 0, "last_activity_date": 1428509085, "creation_date": 1428509085, "answer_id": 29519748, "question_id": 29518208, "link": "https://stackoverflow.com/questions/29518208/unable-to-step-in-forked-gem-with-pry/29519748#29519748", "title": "Unable to step in forked gem with Pry", "body": "<p>Found the cause of the error. Gemfile has as source RubyGems.org. Looking into the site, the release uploaded is the latest one (0.10.1), although <code>master</code> (and the issue I mentioned) has been recently updated. Conclusion: latest fixes have not been uploaded into RubyGems.org.</p>\n"}], "owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428598703, "creation_date": 1428504945, "last_edit_date": 1428598703, "question_id": 29518208, "link": "https://stackoverflow.com/questions/29518208/unable-to-step-in-forked-gem-with-pry", "title": "Unable to step in forked gem with Pry", "body": "<p>I forked a gem called mongoid-scroll. I'm trying to open the gem with pry command <code>gem-open</code> but I'm not able to do it since it is throwing an error. </p>\n\n<p>I execute pry with <code>bundle exec pry</code> in order to Pry \"see\" my forked gem (set in Gemfile as <code>gem 'mongoid-scroll', git: 'https://github.com/bgvo/mongoid-scroll.git'</code>. </p>\n\n<p>Then I run <code>gem-open mongoid-scroll</code> from Pry console and it throws an error:</p>\n\n<pre><code>[1] pry(main)&gt; gem-open mongoid-scroll\nNoMethodError: undefined method `invoke_editor' for Pry::Editor:Class\nfrom /Users/borjagvo/.rbenv/versions/2.1.2/lib/ruby/gems/2.1.0/bundler/ruby/2.1.0/gems/pry-0.10.1/lib/pry/commands/gem_open.rb:19:in `block in process'\n</code></pre>\n\n<p>Googling for that error takes me to <a href=\"https://github.com/pry/pry/pull/1298\" rel=\"nofollow\">this</a> issue in Pry repo. That fix was merged into master a while ago, so it should be locally (I tried <code>bundle update</code>), right?</p>\n\n<p>I there any case in which specifying a gem in the Gemfile wouldn't take <code>master</code> branch?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428505860, "post_id": 29517964, "comment_id": 47192160, "body": "Can you explain some more about what you want to do?  You say &quot;make a form to insert ifrme&quot; (i assume you mean iframe) but this doesn&#39;t really explain what you want to do.  Eg, insert into what?  Which form?  etc"}, {"owner": {"reputation": 27, "user_id": 4721887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U5EbBwRiPw8/AAAAAAAAAAI/AAAAAAAABP0/E83iU2f10Yc/photo.jpg?sz=128", "display_name": "Misha Kogan", "link": "https://stackoverflow.com/users/4721887/misha-kogan"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428509390, "post_id": 29517964, "comment_id": 47194660, "body": "I whant to insert 360photos form google site <a href=\"https://www.google.com/maps/views/view/104480032847444434150/gphoto/6117437897870305490?hl=ru&amp;gl=us&amp;heading=330&amp;pitch=90&amp;fovy=75\" rel=\"nofollow noreferrer\">google.com/maps/views/view/104480032847444434150/gphoto/&hellip;</a> Using this form, but iframe code doesn&#39;t insert corectly"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428509537, "post_id": 29517964, "comment_id": 47194742, "body": "It&#39;s not clear which form you are referring to there.  Do you mean there is a form which gives you some html to paste into your page to embed the map, and when you add that embed html to your page it isn&#39;t working properly?"}, {"owner": {"reputation": 27, "user_id": 4721887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U5EbBwRiPw8/AAAAAAAAAAI/AAAAAAAABP0/E83iU2f10Yc/photo.jpg?sz=128", "display_name": "Misha Kogan", "link": "https://stackoverflow.com/users/4721887/misha-kogan"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428509845, "post_id": 29517964, "comment_id": 47194965, "body": "Yes, i use sanitize method, but this not working. How corect paste ? Which method should i use. Thanks for your answer."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428567469, "post_id": 29517964, "comment_id": 47219593, "body": "Can you add, to your question, the value of <code>@panorama.code</code> please."}, {"owner": {"reputation": 27, "user_id": 4721887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U5EbBwRiPw8/AAAAAAAAAAI/AAAAAAAABP0/E83iU2f10Yc/photo.jpg?sz=128", "display_name": "Misha Kogan", "link": "https://stackoverflow.com/users/4721887/misha-kogan"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428615869, "post_id": 29517964, "comment_id": 47250716, "body": "value is equal to &lt; %= f.text_area :code %&gt; I want to insert iframe(code at the top of the topic)."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428653726, "post_id": 29517964, "comment_id": 47263415, "body": "By &quot;value&quot; i mean &quot;what do you get as a result of calling &quot;@panorama.code&quot;.  Eg if i say &quot;@x = 1 + 1&quot; and then ask &quot;what is the value of @x?&quot; you would say &quot;2&quot;.  It&#39;s a variable.  What is the value held in the variable?"}], "owner": {"reputation": 27, "user_id": 4721887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U5EbBwRiPw8/AAAAAAAAAAI/AAAAAAAABP0/E83iU2f10Yc/photo.jpg?sz=128", "display_name": "Misha Kogan", "link": "https://stackoverflow.com/users/4721887/misha-kogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1428510225, "creation_date": 1428504358, "last_edit_date": 1428510225, "question_id": 29517964, "link": "https://stackoverflow.com/questions/29517964/how-to-correct-add-iframe-in-ruby-on-rails-app-by-using-form", "title": "How to correct add iframe in ruby on rails app by using form", "body": "<p>Make my frist RoR app, i want to make a form to insert ifrme </p>\n\n<pre><code>&lt;iframe width=\"640\" height=\"360\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\" src=\"https://maps.google.com/maps?layer=c&amp;amp;panoid=4L2HRkzKhDkAAAQJOOolAg&amp;amp;ie=UTF8&amp;amp;source=embed&amp;amp;output=svembed&amp;amp;cbp=13%2C125.96039999999999%2C%2C0%2C0\"&gt;&lt;/iframe&gt;&lt;div&gt;&lt;small&gt;&lt;a href=\"https://www.google.com/maps/views/u/0/\" style=\"color:#0000FF; text-align:left\"&gt;Phototour&lt;/a&gt;: &lt;a href=\"https://www.google.com/maps/views/u/0/view/105063597672690553440/gphoto/5942493604463072898\" style=\"color:#0000FF; text-align:left\"&gt;Valle Chajnantor 5000 msnm, II region, Chile&lt;/a&gt;, &lt;a href=\"https://www.google.com/maps/views/u/0/profile/105063597672690553440\" style=\"color:#0000FF; text-align:left\"&gt;Edward Orme\u00f1o&lt;/a&gt;&lt;/small&gt;&lt;/div&gt;\n</code></pre>\n\n<p>buy how shoud i do this correctly in this template?  This is view template.</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @panorama.title %&gt;\n&lt;/p&gt;\n\n&lt;h1&gt;Panorama&lt;/h1&gt;\n  &lt;%= sanitize (@panorama.code) %&gt;\n\n\n&lt;p&gt;\n  &lt;strong&gt;Description:&lt;/strong&gt;\n  &lt;%= @panorama.description %&gt;\n&lt;/p&gt;\n\n&lt;%= link_to 'Edit', edit_panorama_path(@panorama) %&gt; |\n&lt;%= link_to 'Back', panoramas_path %&gt;\n</code></pre>\n\n<p>My form template here i need to code area insert iframe into this part</p>\n\n<pre><code>&lt;%= sanitize (@panorama.code) %&gt;\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= form_for(@panorama) do |f| %&gt;\r\n  &lt;% if @panorama.errors.any? %&gt;\r\n    &lt;div id=\"error_explanation\"&gt;\r\n      &lt;h2&gt;&lt;%= pluralize(@panorama.errors.count, \"error\") %&gt; prohibited this panorama from being saved:&lt;/h2&gt;\r\n\r\n      &lt;ul&gt;\r\n      &lt;% @panorama.errors.full_messages.each do |msg| %&gt;\r\n        &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\r\n      &lt;% end %&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;% end %&gt;\r\n\r\n  &lt;div class=\"field\"&gt;\r\n    &lt;%= f.label :title %&gt;&lt;br&gt;\r\n    &lt;%= f.text_area :title %&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"field\"&gt;\r\n    &lt;%= f.label :code %&gt;&lt;br&gt;\r\n    &lt;%=  f.text_area :code %&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"field\"&gt;\r\n    &lt;%= f.label :description %&gt;&lt;br&gt;\r\n    &lt;%= f.text_area :description %&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"actions\"&gt;\r\n    &lt;%= f.submit %&gt;\r\n  &lt;/div&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "edited": false, "score": 0, "creation_date": 1428505501, "post_id": 29517981, "comment_id": 47191899, "body": "well I have a lot of code that gets executed after the HTTParty call (some of which can also fail). I don&#39;t want to have cascading code layers of lots of begin rescue end blocks but rather just to wrap the fail-prone code in a begin and rescue with quitting the peform"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "edited": false, "score": 0, "creation_date": 1428509573, "post_id": 29517981, "comment_id": 47194778, "body": "If you use a single rescue statement at the end as I shown you without any exception type, all (standard) exceptions will be rescued."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 1, "last_activity_date": 1428504409, "creation_date": 1428504409, "answer_id": 29517981, "question_id": 29517814, "link": "https://stackoverflow.com/questions/29517814/stop-sidekiq-worker-perform-method/29517981#29517981", "title": "stop sidekiq worker perform method", "body": "<p>You don't need any break. If the code inside the begin fails, the execution will be halted and the content inside the <code>rescue</code> block is executed. To silently ignore and return, simply leave the content of the rescue empty.</p>\n\n<pre><code>def perform\n  begin\n    HTTParty.get(url)\n  rescue\n    ## call failed for some reason, log and stop performing\n  end\nend\n</code></pre>\n\n<p>You can also shorten the method</p>\n\n<pre><code>def perform\n  HTTParty.get(url)\nrescue\n  ## call failed for some reason, log and stop performing\nend\n</code></pre>\n\n<p>You may want to explicitly rescue only certain exceptions. I'm not sure what you want to rescue (it depends on what HTTParty can raise).</p>\n\n<pre><code>def perform\n  HTTParty.get(url)\nrescue WhateverError\n  ## call failed for some reason, log and stop performing\nend\n</code></pre>\n\n<p>Here's an example</p>\n\n<pre><code>def perform\n  HTTParty.get(url)\nrescue WhateverError =&gt; e\n  Rails.logger.error \"Kaboom! #{e.message}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 2, "last_activity_date": 1428508128, "creation_date": 1428508128, "answer_id": 29519388, "question_id": 29517814, "link": "https://stackoverflow.com/questions/29517814/stop-sidekiq-worker-perform-method/29519388#29519388", "title": "stop sidekiq worker perform method", "body": "<p>Just return:</p>\n\n<pre><code>begin\n  HTTParty.get(url)\nrescue =&gt; e\n  logger.warn(e.message)\n  return\nend\n</code></pre>\n"}], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "accepted_answer_id": 29519388, "answer_count": 2, "score": 0, "last_activity_date": 1428508128, "creation_date": 1428503992, "last_edit_date": 1428505687, "question_id": 29517814, "link": "https://stackoverflow.com/questions/29517814/stop-sidekiq-worker-perform-method", "title": "stop sidekiq worker perform method", "body": "<p>I have an <code>begin rescue</code> block in my worker's <code>perform</code> method like this</p>\n\n<pre><code>begin\n  HTTParty.get(url)\nrescue\n  ## call failed for some reason, log and stop performing\n  break\nend\n## do more stuff here with the result of the call if it didn't fail\n## this can fail too so a further\n  begin\n    ##would be cumbersome\n  rescue\n  end\n</code></pre>\n\n<p>however I get an <code>Invalid break (SyntaxError)</code></p>\n\n<p>Is there another way to tell sidekiq that this job is essentially finished? I don't want it to retry but rather just quit completely.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 2, "creation_date": 1428504472, "post_id": 29517810, "comment_id": 47191098, "body": "It is called the <code>here doc</code> : <a href=\"http://log.gmarik.info/2007/12/rubys-here-document-heredoc-mini.html\" rel=\"nofollow noreferrer\">log.gmarik.info/2007/12/rubys-here-document-heredoc-mini.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 401, "user_id": 4379077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4e05586d9ba0e48974412ffcf0c8b140?s=128&d=identicon&r=PG&f=1", "display_name": "mike0416", "link": "https://stackoverflow.com/users/4379077/mike0416"}, "reply_to_user": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1428505148, "post_id": 29517810, "comment_id": 47191612, "body": "That&#39;s great @PrakashMurthy.  Thanks."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1428505309, "post_id": 29517810, "comment_id": 47191746, "body": "BTW, you can call a method on a heredoc: <code>&lt;&lt;-HTML.html_safe</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1428504674, "post_id": 29517961, "comment_id": 47191255, "body": "Not just a Ruby way, <a href=\"http://en.wikipedia.org/wiki/Here_document\" rel=\"nofollow noreferrer\">heredocs</a> exist in various languages."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1428504725, "post_id": 29517961, "comment_id": 47191296, "body": "Thanks for the clarification @Stefan"}, {"owner": {"reputation": 401, "user_id": 4379077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4e05586d9ba0e48974412ffcf0c8b140?s=128&d=identicon&r=PG&f=1", "display_name": "mike0416", "link": "https://stackoverflow.com/users/4379077/mike0416"}, "edited": false, "score": 0, "creation_date": 1428504818, "post_id": 29517961, "comment_id": 47191367, "body": "I know ruby is pretty smart when it comes to line breaks, but you&#39;re saying that since it&#39;s a String it will take it explicitly.  So in your example, the server would not accept <code>sql = &quot;SELECT * FROM \\n WHERE \\n...</code>? into `ActiveRecord::Base.connection.execute(sql)?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1428505048, "post_id": 29517961, "comment_id": 47191538, "body": "Yes it would because the line-breakers <code>&quot;\\n&quot;</code> won&#39;t be used in the SQL query. (copy-paste the example in your IRB console, it works)"}, {"owner": {"reputation": 401, "user_id": 4379077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4e05586d9ba0e48974412ffcf0c8b140?s=128&d=identicon&r=PG&f=1", "display_name": "mike0416", "link": "https://stackoverflow.com/users/4379077/mike0416"}, "edited": false, "score": 0, "creation_date": 1428505049, "post_id": 29517961, "comment_id": 47191540, "body": "I understand what you&#39;re saying, I just wanted to know if it was just for human readability, or if the argument would work if put line breaks into the single line sql variable.  I get what you&#39;re saying though.  I can try it myself.  Thanks."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1428505122, "post_id": 29517961, "comment_id": 47191588, "body": "Yes it is for human readability. The SQL query code I used returns <code>&quot;  SELECT * FROM users\\n  WHERE users.id &gt; 15\\n  ORDER BY users.username;\\n&quot;</code> and the <code>&quot;\\n&quot;</code> are not treated in the SQL query"}, {"owner": {"reputation": 401, "user_id": 4379077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4e05586d9ba0e48974412ffcf0c8b140?s=128&d=identicon&r=PG&f=1", "display_name": "mike0416", "link": "https://stackoverflow.com/users/4379077/mike0416"}, "edited": false, "score": 0, "creation_date": 1428516090, "post_id": 29517961, "comment_id": 47198625, "body": "Thanks for clarifying @MrYoshiji"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 6, "last_activity_date": 1428505180, "last_edit_date": 1428505180, "creation_date": 1428504355, "answer_id": 29517961, "question_id": 29517810, "link": "https://stackoverflow.com/questions/29517810/ruby-block-that-starts-with-html/29517961#29517961", "title": "ruby block that starts with &lt;&lt;-HTML", "body": "<p>This is a <del>ruby</del> common way to declare a string, it is pretty useful in some cases (edit: <a href=\"http://en.wikipedia.org/wiki/Here_document\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Here_document</a> thanks to @Stefan):</p>\n\n<pre><code>sql = &lt;&lt;-SQL\n  SELECT * FROM users\n  WHERE users.id &gt; 15\n  ORDER BY users.username;\nSQL\nActiveRecord::Base.connection.execute(sql)\n</code></pre>\n\n<p>Way better to read this than a simple:</p>\n\n<pre><code>sql = \"SELECT * FROM users WHERE users.id &gt; 15 ORDER BY users.username;\"\nActiveRecord::Base.connection.execute(sql)\n</code></pre>\n\n<p>Imagine the pain to read a very complex SQL query without any line-break! (like with a manual join, recursive, union or views of table(s)!</p>\n\n<hr>\n\n<p>It works with any kind of word:</p>\n\n<pre><code>a_string = &lt;&lt;-WHATEVER\n  This is a string\n  with some line-break\n  to make it more readable\n  #{and_you_can_use_string_interpolation_too}\nWHATEVER\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 4379077, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4e05586d9ba0e48974412ffcf0c8b140?s=128&d=identicon&r=PG&f=1", "display_name": "mike0416", "link": "https://stackoverflow.com/users/4379077/mike0416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "accepted_answer_id": 29517961, "answer_count": 1, "score": 5, "last_activity_date": 1428505180, "creation_date": 1428503977, "question_id": 29517810, "link": "https://stackoverflow.com/questions/29517810/ruby-block-that-starts-with-html", "title": "ruby block that starts with &lt;&lt;-HTML", "body": "<p>I'm learning about integrating Devise flash and error messages with Bootstrap (or in my case Materialize).  I found an article on the topic within Devise's wiki (<a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Integrate-I18n-Flash-Messages-with-Devise-and-Bootstrap\">https://github.com/plataformatec/devise/wiki/How-To:-Integrate-I18n-Flash-Messages-with-Devise-and-Bootstrap</a>), so I understand how it has to work, but there was a section of the code I'm having problems understanding.</p>\n\n<pre><code>html = &lt;&lt;-HTML\n&lt;div class=\"card-panel red lighten-2\"&gt; \n  #{messages}\n&lt;/div&gt;\nHTML\n\nhtml.html_safe\n</code></pre>\n\n<p>Can someone explain the <code>&lt;&lt;-HTML</code> syntax?   BTW, here is the full function in case you need context</p>\n\n<pre><code>def devise_error_messages!\nreturn '' if resource.errors.empty?\n\nmessages = resource.errors.full_messages.map { |msg| content_tag(:li, msg) }.join\nhtml = &lt;&lt;-HTML\n&lt;div class=\"card-panel red lighten-2\"&gt; \n  #{messages}\n&lt;/div&gt;\nHTML\n\nhtml.html_safe\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428503107, "post_id": 29517426, "comment_id": 47190085, "body": "what is your activerecord query?"}, {"owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428503361, "post_id": 29517426, "comment_id": 47190270, "body": "@orders = Order.where(complete: false) where false comes from the paras hash"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428503762, "post_id": 29517426, "comment_id": 47190552, "body": "can you try this <code>@orders = Order.where(&quot;complete = ?&quot;, false)</code>"}, {"owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428503869, "post_id": 29517426, "comment_id": 47190634, "body": "That gives me what I want, but you see false will be given to me as a string in the params hash."}], "answers": [{"comments": [{"owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "edited": false, "score": 0, "creation_date": 1428503905, "post_id": 29517714, "comment_id": 47190668, "body": "That was what I was afraid of. Thanks for the reply. I shall just intercept the boolean in the params hash and convert it before I make the query"}], "tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": true, "score": 1, "last_activity_date": 1428503701, "last_edit_date": 1495539816, "creation_date": 1428503701, "answer_id": 29517714, "question_id": 29517426, "link": "https://stackoverflow.com/questions/29517426/activerecord-string-booleans-as-query/29517714#29517714", "title": "ActiveRecord string booleans as query", "body": "<p>By the looks of it you can't really do this without a helper of some kind. See the selected answer here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8119970/string-true-and-false-to-boolean\">String &quot;true&quot; and &quot;false&quot; to boolean</a> </p>\n"}], "owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 29517714, "answer_count": 1, "score": 0, "last_activity_date": 1428503701, "creation_date": 1428503000, "question_id": 29517426, "link": "https://stackoverflow.com/questions/29517426/activerecord-string-booleans-as-query", "title": "ActiveRecord string booleans as query", "body": "<p>I am trying to query my database with a boolean type that is passed to me through the controller as a string. What Rails attempts to do is the following:</p>\n\n<pre><code>SELECT \"orders\".* FROM \"orders\" WHERE \"orders\".\"complete\" = ?  [[\"complete\", \"false\"]]\n</code></pre>\n\n<p>This yields an empty array which should not be the case. Having tried manually retrieving records via the rails console, I come up with the same results. However substituting \"false\" for \"f\" solves the problem.</p>\n\n<p>It is not an ideal solution to use \"f\" as a substitute because I am using emberjs and the boolean type in my frontend models which by default sends up \"true\" or \"false\"</p>\n\n<p>Why wont ActiveRecord accept full booleans as string and how can I make it do so?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "grape", "grape-entity"], "answers": [{"comments": [{"owner": {"reputation": 558, "user_id": 1880442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KFzHA.jpg?s=128&g=1", "display_name": "Spike886", "link": "https://stackoverflow.com/users/1880442/spike886"}, "edited": false, "score": 0, "creation_date": 1428512927, "post_id": 29518057, "comment_id": 47196797, "body": "But if it is just for the documentation (swagger), which is the meaning of <code>params  Entities::OSEntity.documentation</code>? Because you should always add the params on the other way to validate.  Also on grape documentation under <code>params  API::Entities::Status.documentation</code> says  &quot;params: Define parameters directly from an Entity&quot;"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 558, "user_id": 1880442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KFzHA.jpg?s=128&g=1", "display_name": "Spike886", "link": "https://stackoverflow.com/users/1880442/spike886"}, "edited": false, "score": 1, "creation_date": 1428517987, "post_id": 29518057, "comment_id": 47199771, "body": "I now understand the mixup: there are two <code>params</code> commands. So the  entity defines the params, but in the <code>desc</code> block. Which imho is not used for validation, might be used to generate documentation, but not by the grape-swagger gem. The <code>params</code> block on the same level as <code>desc</code> handles the validation (and is used by the grape-swagger gem)."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 558, "user_id": 1880442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KFzHA.jpg?s=128&g=1", "display_name": "Spike886", "link": "https://stackoverflow.com/users/1880442/spike886"}, "edited": false, "score": 0, "creation_date": 1428518139, "post_id": 29518057, "comment_id": 47199883, "body": "There is a feature request which will partially solve this: <a href=\"https://github.com/intridea/grape/issues/827\" rel=\"nofollow noreferrer\">github.com/intridea/grape/issues/827</a>"}, {"owner": {"reputation": 558, "user_id": 1880442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KFzHA.jpg?s=128&g=1", "display_name": "Spike886", "link": "https://stackoverflow.com/users/1880442/spike886"}, "edited": false, "score": 0, "creation_date": 1428722040, "post_id": 29518057, "comment_id": 47296350, "body": "Finally i created a hack to make grape, work as i thing it should. Look at it at my answer"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 1, "last_activity_date": 1428517885, "last_edit_date": 1428517885, "creation_date": 1428504554, "answer_id": 29518057, "question_id": 29517362, "link": "https://stackoverflow.com/questions/29517362/grape-required-params-with-grape-entity/29518057#29518057", "title": "Grape: required params with grape-entity", "body": "<p>I love the grape/grape-swagger/grape-entity combination for building API's. I generally use the grape entities for building the result, and not at all for documenting/validating the API. According to the documentation (for grape-entity) it should work, but I am guessing just to build the documentation.</p>\n\n<p>According to the grape <a href=\"https://github.com/intridea/grape#parameter-validation-and-coercion\" rel=\"nofollow noreferrer\">documentation on parameter validation and coercion</a> it requires a <code>block</code> to enforce any validation/coercion. </p>\n\n<p>[EDIT: mixing up params] </p>\n\n<p>You can define the params in the <code>desc</code> using an entity, but for validation you have to supply the <code>params</code> block, on the same level as the <code>desc</code> block, so for example:</p>\n\n<pre><code>    # POST /app\n    desc 'Creates a new app' do\n      detail 'It is used to re gister a new app on the server and get the app_id'\n      params  Entities::OSEntity.documentation\n      success Entities::AppEntity\n      failure [[401, 'Unauthorized', Entities::ErrorEntity]]\n      named 'My named route'\n    end\n    params do\n      requires :name, String\n      optional :description, String\n    end \n    post do\n      app = ::App.create params\n      present app, with: Entities::AppEntity\n    end\n</code></pre>\n\n<p>They are both called <code>params</code> but located quite differently and with a different function.<br>\nI am not sure if the <code>desc</code> block has any use other than documentation (and how to extract this documentation is a bit of a mystery to me).</p>\n\n<p>The grape-swagger gem does not use it, my typical <code>desc</code> looks like this: </p>\n\n<pre><code>  desc \"list of batches\", {\n    :notes =&gt; &lt;&lt;-NOTE\n      Show a list of all available batches.\n\n      ## Request properties\n\n      * _Safe:_ Yes\n      * _Idempotent:_ Yes\n      * _Can be retried:_ Yes\n    NOTE\n  }\n  params do\n    optional :page, desc: 'paginated per 25'\n  end\n  get do\n    present Batch.page(params[:page]), with: API::Entities::Batch\n  end\n</code></pre>\n\n<p>where the <code>:notes</code> are rendered using markdown. How this looks in swagger-ui <img src=\"https://i.stack.imgur.com/FPXU9.png\" alt=\"swagger-ui\"></p>\n"}, {"comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1428767393, "post_id": 29573640, "comment_id": 47307970, "body": "My point was that the params in the <code>desc</code> block is of no use for grape-swagger, so why even try to declare it? And why declare specific entities for the API? But on the other hand: great work. Why not add this to grape in a pull request?"}], "tags": [], "owner": {"reputation": 558, "user_id": 1880442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KFzHA.jpg?s=128&g=1", "display_name": "Spike886", "link": "https://stackoverflow.com/users/1880442/spike886"}, "is_accepted": true, "score": 4, "last_activity_date": 1533644439, "last_edit_date": 1533644439, "creation_date": 1428721841, "answer_id": 29573640, "question_id": 29517362, "link": "https://stackoverflow.com/questions/29517362/grape-required-params-with-grape-entity/29573640#29573640", "title": "Grape: required params with grape-entity", "body": "<p>After some work, I was able to make grape work as I think it should be working. Because I don't want to repeat the code for both of the validation and the documentation. You just have to add this to the initializers (if you are in rails, of course). I also was able to support nested associations. As you can see, the API code looks so simple and the swagger looks perfect.\nHere are the API and all the needed entities:</p>\n\n<p><strong>app/api/smart/entities/characteristics_params_entity.rb</strong></p>\n\n<pre><code>module Smart\n  module Entities\n    class CharacteristicsParamsEntity &lt; Grape::Entity\n\n      root :characteristics, :characteristic\n      expose :id, documentation: { type: Integer, desc: 'Id of the characteristic' }\n\n    end\n  end\nend\n</code></pre>\n\n<p><strong>app/api/smart/entities/characterisitcs_entity.rb</strong></p>\n\n<pre><code>module Smart\n  module Entities\n    class CharacteristicsEntity &lt; CharacteristicsParamsEntity\n\n      expose :id, documentation: { type: Integer, desc: 'Id of the characteristic' }\n      expose :name, documentation: { type: String, desc: 'Name of the characteristic' }\n      expose :description, documentation: { type: String, desc: 'Description of the characteristic' }\n      expose :characteristic_type, documentation: { type: String, desc: 'Type of the characteristic' }\n      expose :updated_at, documentation: { type: Date, desc: 'Last updated time of the characteristic' }\n\n    end\n  end\nend\n</code></pre>\n\n<p><strong>app/api/smart/entities/apps_params_entity.rb</strong></p>\n\n<pre><code>module Smart\n  module Entities\n    class AppsParamsEntity &lt; Grape::Entity\n\n      expose :os, documentation: { type: String, desc: 'Operative system name', values: App::OS_LIST, required: true }\n      expose :characteristic_ids, using: CharacteristicsParamsEntity, documentation: { type: CharacteristicsParamsEntity, desc: 'List of characteristic_id that the customer has', is_array: true }\n\n\n    end\n  end\nend\n</code></pre>\n\n<p><strong>app/api/smart/entities/apps_entity.rb</strong></p>\n\n<pre><code>module Smart\n  module Entities\n    class AppsEntity &lt; AppsParamsEntity\n\n      unexpose :characteristic_ids\n      expose :id, documentation: { type: 'integer', desc: 'Id of the created app', required: true }\n      expose :customer_id, documentation: { type: 'integer', desc: 'Id of the customer', required: true }\n      expose :characteristics, using: CharacteristicsEntity, documentation: { is_array: true, desc: 'List of characteristics that the customer has' }\n\n    end\n  end\nend\n</code></pre>\n\n<p><strong>app/api/smart/version1/apps.rb</strong></p>\n\n<pre><code>module Smart\n  module Version1\n    class Apps &lt; Version1::BaseAPI\n\n    resource :apps do\n\n        # POST /apps\n        desc 'Creates a new app' do\n          detail 'It is used to register a new app on the server and get the app_id'\n          params Entities::AppsParamsEntity.documentation\n          success Entities::AppsEntity\n          failure [[400, 'Bad Request', Entities::ErrorEntity]]\n          named 'create app'\n        end\n        post do\n          app = ::App.create! params\n          present app, with: Entities::AppsEntity\n        end\n\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>And this is the code that do the magic to make it work:</p>\n\n<p><strong>config/initializers/grape_extensions.rb</strong></p>\n\n<pre><code>class Evaluator\n  def initialize(instance)\n    @instance = instance\n  end\n\n  def params parameters\n    evaluator = self\n    @instance.normal_params do\n      evaluator.list_parameters(parameters, self)\n    end\n  end\n\n  def method_missing(name, *args, &amp;block)\n  end\n\n  def list_parameters(parameters, grape)\n    evaluator = self\n    parameters.each do |name, description|\n      description_filtered = description.reject { |k| [:required, :is_array].include?(k) }\n      if description.present? &amp;&amp; description[:required]\n        if description[:type] &lt; Grape::Entity\n          grape.requires name, description_filtered.merge(type: Array) do\n            evaluator.list_parameters description[:type].documentation, self\n          end\n        else\n          grape.requires name, description_filtered\n        end\n      else\n        if description[:type] &lt; Grape::Entity\n          grape.optional name, description_filtered.merge(type: Array) do\n            evaluator.list_parameters description[:type].documentation, self\n          end\n        else\n          grape.optional name, description_filtered\n        end\n      end\n    end\n  end\nend\n\nmodule GrapeExtension\n  def desc name, options = {}, &amp;block\n    Evaluator.new(self).instance_eval &amp;block if block\n    super name, options do\n      def params *args\n      end\n\n      instance_eval &amp;block if block\n    end\n  end\nend\n\nclass Grape::API\n  class &lt;&lt; self\n    prepend GrapeExtension\n  end\nend\n</code></pre>\n\n<p>This is the result of the example:</p>\n\n<p><img src=\"https://i.stack.imgur.com/FsDsv.png\" alt=\"Swagger result\"></p>\n"}], "owner": {"reputation": 558, "user_id": 1880442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KFzHA.jpg?s=128&g=1", "display_name": "Spike886", "link": "https://stackoverflow.com/users/1880442/spike886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4932, "favorite_count": 5, "accepted_answer_id": 29573640, "answer_count": 2, "score": 7, "last_activity_date": 1558174548, "creation_date": 1428502833, "question_id": 29517362, "link": "https://stackoverflow.com/questions/29517362/grape-required-params-with-grape-entity", "title": "Grape: required params with grape-entity", "body": "<p>I'm writing an API server with grape and i choose to use grape-entity because it has the capability to auto generate the documentation for swagger.\nBut now i have a problem when i set a param as required. Because grape don't validate that the param is present. It looks like grape ignores the <code>required: true</code> of the entity's params.</p>\n\n<p><strong>app.rb</strong></p>\n\n<pre><code>module Smart\n  module Version1\n    class App &lt; BaseApi\n\n      resource :app do\n\n        # POST /app\n        desc 'Creates a new app' do\n          detail 'It is used to re gister a new app on the server and get the app_id'\n          params  Entities::OSEntity.documentation\n          success Entities::AppEntity\n          failure [[401, 'Unauthorized', Entities::ErrorEntity]]\n          named 'My named route'\n        end\n        post do\n          app = ::App.create params\n          present app, with: Entities::AppEntity\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>os_entity.rb</strong></p>\n\n<pre><code>module Smart\n  module Entities\n    class OSEntity &lt; Grape::Entity\n\n      expose :os, documentation: { type: String, desc: 'Operative system name', values: App::OS_LIST, required: true }\n\n    end\n  end\nend\n</code></pre>\n\n<p><strong>app_entity.rb</strong></p>\n\n<pre><code>module Smart\n  module Entities\n    class AppEntity &lt; OSEntity\n\n      expose :id, documentation: { type: 'integer', desc: 'Id of the created app', required: true }\n      expose :customer_id, documentation: { type: 'integer', desc: 'Id of the customer', required: true }\n\n    end\n  end\nend\n</code></pre>\n\n<p>Everything else is working great now, but i don't know how to use the entities in a DRY way, and make grape validating the requirement of the parameter.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "mongoid", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 988, "user_id": 4384619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l7-7H3MFzcY/AAAAAAAAAAI/AAAAAAAAAP8/K6ILQ-kg8T4/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Buttice", "link": "https://stackoverflow.com/users/4384619/j%c3%a9r%c3%a9my-buttice"}, "is_accepted": false, "score": 0, "last_activity_date": 1428506676, "creation_date": 1428506676, "answer_id": 29518860, "question_id": 29517331, "link": "https://stackoverflow.com/questions/29517331/rails-admin-add-nested-model-adding-modal-in-edit-page/29518860#29518860", "title": "Rails_admin add nested model adding modal in edit page", "body": "<p>I do not like that but :</p>\n\n<p>You can override stylesheets rails_admin...</p>\n\n<p>1 - Identified the parent id like this <code>#client_ids_field</code> </p>\n\n<p>2 - Identified the child class of <code>multi-select</code> like this <code>ra-multiselect</code></p>\n\n<p>3 - Add <code>display:block</code> in your css property <code>#client_ids_field.ra-multiselect</code></p>\n\n<p><a href=\"https://github.com/sferik/rails_admin/wiki/Theming-and-customization\" rel=\"nofollow\">To override rails_admin css</a></p>\n"}], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428506676, "creation_date": 1428502761, "question_id": 29517331, "link": "https://stackoverflow.com/questions/29517331/rails-admin-add-nested-model-adding-modal-in-edit-page", "title": "Rails_admin add nested model adding modal in edit page", "body": "<p>I have models: <code>Client</code> and <code>Favourite</code>. <code>Client has many Favourites</code>. I am using rails_admin gem.</p>\n\n<p>In my <code>Client</code> model definition I have added this code:</p>\n\n<pre><code>rails_admin do\n\n  create do\n    exclude_fields :favourites\n  end\n\n  update do\n  end\n\nend\n</code></pre>\n\n<p>As you can see, I have removed favourites adding form element from my <code>create</code>. Now when I open editing page of my selected <code>Client</code>, it has this form element:\n<img src=\"https://i.stack.imgur.com/l7UhE.png\" alt=\"image1\"> </p>\n\n<p>I want remove this multi selection form element and leave only modal button for adding <code>Favourite</code> in my <code>Client</code> and when I click on this button, it must already select current <code>Client</code> as attribute of my <code>Favourite</code>.</p>\n\n<p>Is it possible?</p>\n"}, {"tags": ["ruby", "class", "object"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1428500761, "post_id": 29516361, "comment_id": 47188168, "body": "I&#39;m not sure I understand... what do you mean when you say <code>objname = SimpleClass.new(&quot;Jeff&quot;)</code> doesn&#39;t work?  Doesn&#39;t the variable <code>objname</code> contain a SimpleClass instance?  Are you saying you want a variable called <code>object</code> to contain the object?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1428500811, "post_id": 29516361, "comment_id": 47188204, "body": "I don&#39;t understand what you are trying to do ... You&#39;re assigning the string <code>&quot;object&quot;</code> to the variable <code>objname</code>, without using the variable afterwards. Then, you&#39;re assigning (thus replacing) your <code>SimpleClass</code> instance to <code>objname</code>."}, {"owner": {"reputation": 61, "user_id": 4717458, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ba9e761f9736173da0a1402cdccb2fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Gittb", "link": "https://stackoverflow.com/users/4717458/gittb"}, "edited": false, "score": 0, "creation_date": 1428500986, "post_id": 29516361, "comment_id": 47188364, "body": "No no, I would like to use a variable to call an object the contents of the variable, So in the non working one I would like the object to be called object. Not objname. But I can&#39;t write that into the code because the code I am applying it to needs to create objects. Thus it would have to name then differently as well. So a variable would have to be in place for the name so that I can write a name to that variable earlier in the script then use it to name an object.. I hope this helped :) I am extremely new to classes and how they interact.. This must be very hard to understand"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1428501034, "post_id": 29516361, "comment_id": 47188399, "body": "@Stefan let me guess: it\u2019s a try to achieve smth like <code>eval(&quot;#{objname} = SimpleClass.new(&#39;Jeff&#39;)&quot;)</code> :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428501278, "post_id": 29516361, "comment_id": 47188559, "body": "@Gittb Despite what you are trying to achieve, your design is bad. You are never supposed to need the floating variable names."}, {"owner": {"reputation": 61, "user_id": 4717458, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ba9e761f9736173da0a1402cdccb2fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Gittb", "link": "https://stackoverflow.com/users/4717458/gittb"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428501374, "post_id": 29516361, "comment_id": 47188637, "body": "@mudasobwa EXACTLY! but I do receive an error if I attempt to run that.. test.rb:13: syntax error, unexpected end-of-input, expecting &#39;)&#39; eval(#{objname} = SimpleClass.new(&#39;Jeff&#39;))"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428501530, "post_id": 29516361, "comment_id": 47188757, "body": "@Gittb The double quotes in my snippet were <i>mandatory</i>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428501762, "post_id": 29516361, "comment_id": 47188942, "body": "@mudasobwa the variable <code>object</code> will fall out of scope immediately and will not be accessible outside of the eval method. The OP will get &quot;undefined local variable or method &#39;object&#39; for main:Object&quot; if he tries to do it this way."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1428502119, "post_id": 29516361, "comment_id": 47189270, "body": "@engineersmnky Yes, that was just a demo. But <code>objname=&#39;@myobj&#39; ; eval(&quot;#{objname} = 5&quot;) ; p @myobj</code> would work perfectly."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428502712, "post_id": 29516361, "comment_id": 47189758, "body": "@mudasobwa yes because instance_variables will not suffer from the same scoping constraints but using an example that has no possibility of doing what was requested seems misleading especially to someone who is clearly very new to ruby. Chances are this will make the OP feel like they have done something wrong when in reality you provided a concept that never had any chance of working."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1428503100, "post_id": 29516361, "comment_id": 47190081, "body": "@engineersmnky You might notice, that my comment contained \u201csmth like\u201d wording, was not addressed to OP and was not published as an answer. You might as well notice, that the concept in fact works, the value is <i>perfectly assigned</i>."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1428501373, "creation_date": 1428501373, "answer_id": 29516753, "question_id": 29516361, "link": "https://stackoverflow.com/questions/29516361/name-an-object-with-a-variable-ruby/29516753#29516753", "title": "Name an Object with a Variable - Ruby", "body": "<p>Not sure why you would want to do this but it could be preformed using instance variables like this</p>\n\n<pre><code>objname = \"object\"  # &lt; Var used for Obj name\n\nclass SimpleClass\n  def initialize(name)\n  end\nend\n\ninstance_variable_set(\"@#{objname}\", SimpleClass.new(\"Jeff\")) \n#=&gt; #&lt;SimpleClass:0x228a548&gt; \n@object\n#=&gt; #&lt;SimpleClass:0x228a548&gt;\ninstance_variable_get(\"@#{objname}\")\n#=&gt; #&lt;SimpleClass:0x228a548&gt;\n</code></pre>\n\n<p>All that being said this is a poor design concept and as you can see it would be easier to just use a standard local variable as your code will be littered with instance_variable_get/set methods which perform no actual purpose in this context.</p>\n"}], "owner": {"reputation": 61, "user_id": 4717458, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ba9e761f9736173da0a1402cdccb2fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Gittb", "link": "https://stackoverflow.com/users/4717458/gittb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1428501680, "answer_count": 1, "score": 0, "last_activity_date": 1428501373, "creation_date": 1428500491, "question_id": 29516361, "link": "https://stackoverflow.com/questions/29516361/name-an-object-with-a-variable-ruby", "closed_reason": "Needs details or clarity", "title": "Name an Object with a Variable - Ruby", "body": "<p>I am trying to create objects within a script but I'm failing to understand how to create an object by using a variable to name it, See below:</p>\n\n<pre><code>objname = \"object\"  # &lt; Var used for Obj name\n\nclass SimpleClass\n    def initialize(name)\n    end\nend\n\nobjname = SimpleClass.new(\"Jeff\")  #does not work\n# ^ using a variable to name the object\n\nworkingname = SimpleClass.new(\"Jeff\") # will work\n</code></pre>\n\n<p>P.S\nY'all are the best, From a beginning programmers prospective I don't know where I would be without this site.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428500364, "post_id": 29516040, "comment_id": 47187822, "body": "@mudasobwa that won&#39;t work because import is defined as a class method."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1428500810, "post_id": 29516040, "comment_id": 47188201, "body": "Ah, yeah, sorry, I did not notice that <code>Pin</code> is your model."}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 0, "creation_date": 1428517871, "post_id": 29516040, "comment_id": 47199693, "body": "So any thought on a solution? Thanks in advance!"}, {"owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "edited": false, "score": 0, "creation_date": 1428877284, "post_id": 29516040, "comment_id": 47337491, "body": "I have edited the blog post with some new modifcations. I now receive the following error:  invalid byte sequence in UTF-8. Does anyone knows what to do?"}], "owner": {"reputation": 79, "user_id": 4236731, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/586868156/picture?type=large", "display_name": "Olivier Van Hees", "link": "https://stackoverflow.com/users/4236731/olivier-van-hees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428870773, "creation_date": 1428499742, "last_edit_date": 1428870773, "question_id": 29516040, "link": "https://stackoverflow.com/questions/29516040/import-csv-to-rails-4", "title": "Import csv to rails 4", "body": "<p>I would like to add cvs data to my RoR app. I have tried to follow the following tutorial: <a href=\"http://railscasts.com/episodes/396-importing-csv-and-excel\" rel=\"nofollow\">http://railscasts.com/episodes/396-importing-csv-and-excel</a></p>\n\n<p>In the front-end it looks like it works (I am able to add a file), however it get the following error when clicking on the import button:</p>\n\n<pre><code> invalid byte sequence in UTF-8\n</code></pre>\n\n<p>My pins controller looks like this:</p>\n\n<pre><code>.... \n\n def import\n  Pin.import(params[:file])\n  redirect_to root_url, notice: \"Restaurants imported.\"\n  end\n....\n</code></pre>\n\n<p>According to the tutorial I have modified my pin model to this:</p>\n\n<pre><code>....\n def self.import(file)\n        CSV.foreach(file.path, headers: true) do |row|\n        Pin.create! row.to_hash\n     end\n    end\n ....\n</code></pre>\n\n<p>I have also added a form_tag to my view to add the csv file.Does anyone know what I am doing wrong? </p>\n"}, {"tags": ["ruby", "heroku", "rufus-scheduler"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3426458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1969bc8e456fbe8384cfcdeb75218418?s=128&d=identicon&r=PG&f=1", "display_name": "nerionavea", "link": "https://stackoverflow.com/users/3426458/nerionavea"}, "edited": false, "score": 0, "creation_date": 1428576887, "post_id": 29525023, "comment_id": 47225429, "body": "Sorry, yes that is it, could you give me an example?"}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "reply_to_user": {"reputation": 13, "user_id": 3426458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1969bc8e456fbe8384cfcdeb75218418?s=128&d=identicon&r=PG&f=1", "display_name": "nerionavea", "link": "https://stackoverflow.com/users/3426458/nerionavea"}, "edited": false, "score": 1, "creation_date": 1428580193, "post_id": 29525023, "comment_id": 47227492, "body": "An example of what? Of someone losing all his scheduled jobs?"}], "tags": [], "owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "is_accepted": true, "score": 0, "last_activity_date": 1428525903, "creation_date": 1428525903, "answer_id": 29525023, "question_id": 29515915, "link": "https://stackoverflow.com/questions/29515915/rufus-scheduler-in-a-heroku-app/29525023#29525023", "title": "rufus-scheduler in a Heroku app", "body": "<blockquote>\n  <p>will I lose all the scheduler process?</p>\n</blockquote>\n\n<p>Yes, of course, the current scheduler process will exit and a new one will get started.</p>\n\n<p>Maybe you meant to ask:</p>\n\n<blockquote>\n  <p>will I lose all the scheduled jobs?</p>\n</blockquote>\n\n<p>Yes, you'll lose all the scheduled jobs.</p>\n\n<p>Rufus-scheduler provides no persistence mechanism, it's just a scheduling tool.</p>\n\n<p>Most people have a fixed set of scheduled jobs that get scheduled as the process starts (and instantiates a rufus-scheduler then populates it with jobs). One of those jobs could trigger at a set frequency and check a DB or some kind of file for actual work to perform.</p>\n\n<p>Fewer people have a model whose rows they read to populate rufus-scheduler with jobs. But with this technique, one has to carefully keep the scheduler and the rows in sync. More moving parts.</p>\n"}], "owner": {"reputation": 13, "user_id": 3426458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1969bc8e456fbe8384cfcdeb75218418?s=128&d=identicon&r=PG&f=1", "display_name": "nerionavea", "link": "https://stackoverflow.com/users/3426458/nerionavea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 29525023, "answer_count": 1, "score": 1, "last_activity_date": 1428528333, "creation_date": 1428499392, "last_edit_date": 1428528333, "question_id": 29515915, "link": "https://stackoverflow.com/questions/29515915/rufus-scheduler-in-a-heroku-app", "title": "rufus-scheduler in a Heroku app", "body": "<p>If I have a Sinatra app deployed in Heroku with a rufus-scheduler process running, if I make changes on this app and deploy it again, will I lose all the  scheduler process?  </p>\n"}, {"tags": ["ruby", "arrays", "loops"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 3, "creation_date": 1428498979, "post_id": 29515662, "comment_id": 47186784, "body": "Do you mean <code>board[i]</code>? What you have, <code>board |i|</code> doesn&#39;t really make any sense."}, {"owner": {"reputation": 35, "user_id": 4760790, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/518daf4e995dae8e2e0da60359a0c978?s=128&d=identicon&r=PG&f=1", "display_name": "EnduranceMan", "link": "https://stackoverflow.com/users/4760790/enduranceman"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1428499458, "post_id": 29515662, "comment_id": 47187142, "body": "That was it! Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1428499566, "creation_date": 1428499566, "answer_id": 29515977, "question_id": 29515662, "link": "https://stackoverflow.com/questions/29515662/cant-convert-fixnum-into-array-typeerror-ruby/29515977#29515977", "title": "Can&#39;t convert Fixnum into array (TypeError) Ruby", "body": "<p>The issue is at following line </p>\n\n<pre><code>subarray2 = board|i|\n</code></pre>\n\n<p>You are doing:</p>\n\n<pre><code>board.each_index do |i|\n</code></pre>\n\n<p>And in following line you are trying to get the value of <code>board</code> at that index. To achive this you should do:</p>\n\n<pre><code>subarray2 = board[i]\n</code></pre>\n\n<p>At last, there is a better way to achieve this by using <a href=\"http://apidock.com/ruby/Enumerable/each_with_index\" rel=\"nofollow\">each_with_index</a>.</p>\n\n<p>Eg:</p>\n\n<pre><code>board.each_with_index do |v, i|\n  subarray2 = v\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4760790, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/518daf4e995dae8e2e0da60359a0c978?s=128&d=identicon&r=PG&f=1", "display_name": "EnduranceMan", "link": "https://stackoverflow.com/users/4760790/enduranceman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428499566, "creation_date": 1428498775, "question_id": 29515662, "link": "https://stackoverflow.com/questions/29515662/cant-convert-fixnum-into-array-typeerror-ruby", "title": "Can&#39;t convert Fixnum into array (TypeError) Ruby", "body": "<p>I'm getting the error:</p>\n\n<pre><code>minesweeper.rb:32:in '|': can't convert Fixnum into Array (TypeError)\n   from minesweeper.rb:32:in 'block in create_hint_board'\n   from minesweeper.rb:31:in 'each_index'\n   from minesweeper.rb:31:in 'create_hint_board'\n   from minesweeper.rb:68:in '(main)'\n</code></pre>\n\n<p>when attempting to check a 2D array for a value, and adding 1 to all cells adjacent to that index location.  The error occurs at subarray2 = board|i|.  I'm trying to iterate over the entire 2D array</p>\n\n<p>The entire code is</p>\n\n<pre><code>    #def load_board(file)\n#   gameboard = File.readlines(file)[1..-1]\n#       gameboard.map! do |line|\n#           line.split.map(&amp;:to_s)\n#       end\n#   $globalarray = gameboard\n#end\n\n$globalarray = [['*','.','.','.'],['.','.','*','.'],['.','.','.','.']]\n\ndef pp_board(board)\n    puts Array.new(board[0].size*2+1, '-').join('')\n    board.each do |row|\n        puts \"|\" + row.join(\"|\") + \"|\"\n        puts Array.new(row.size*2+1, '-').join('')\n    end\nend\n\ndef create_hint_board(board)\n    board = $globalarray\n    $globalarray.each_index do |i|\n        subarray = $globalarray[i]\n            subarray.each_index do |j|\n                if $globalarray[i][j] != '*'\n                    board[i][j].to_i\n                    board[i][j] = 0                 \n                end\n                puts \"#{String(i)},#{String(j)} is #{board[i][j]}\" \n            end\n        end\n    board.each_index do |i| \n        subarray2 = board|i|\n            subarray2.each_index do |j|\n                if board[i][j] == '*'\n                    board[i+1][j] = board[i+1][j]+1\n                    board[i+1][j+1] = board[i+1][j+1]+1\n                    board[i+1][j-1] = board[i+1][j-1]+1\n                    board[i][j-1] = board[i][j-1]+1\n                    board[i][j+1] = board[i][j+1]+1\n                    board[i-1][j] = board[i-1][j]+1\n                    board[i-1][j+1] = board[i-1][j+1]+1\n                    board[i-1][j-1] = board[i-1][j-1]+1\n                end\n            end\n    end\n\nputs \"new array is \"\nputs board  \nend\n\n=begin\n#def copy_to_blank(board)\n#   $newarrayblank = $newarray\n#   $newarrayblank.each_index do |i|\n#       subarray = $newarrayblank[i]\n#           subarray.each_index do |j|\n#               $newarrayblank[i][j] = '.'\n#               puts \"#{String(i)},#{String(j)} is #{$newarrayblank[i][j]}\" \n#           end\n#       end\n#end\n\n#load_board(\"mines.txt\")\nblank = [[]]\n=end\nputs \"Original array is\"\nputs $globalarray\ncreate_hint_board($globalarray)\n#pp_board($globalarray)\n#create_hint_board($globalarray)\n#puts \"new array is\"\n#pp_board($newarray)\n#puts \"new blank board is\"\n#copy_to_blank(blank)\n#puts $newarrayblank\n#pp_board($newarrayblank)\n=begin\n\nputs \"Input Guess\"\nvalue1 = gets.split(\" \")\nrow_guess = value1[0].to_i\ncol_guess = value1[1].to_i\n\nputs $newarray[row_guess][col_guess]\n\nwhile $newarray[row_guess][col_guess] != '*'\n\n    if $newarray[row_guess][col_guess] != '*'\n        puts \"You guessed row #{row_guess} and column #{col_guess}.\"\n        puts $newarray[row_guess][col_guess]\n        #$newarrayblank[row_guess][col_guess] = $newarray[row_guess][col_guess]\n        #pp_board($newarrayblank)\n        puts \"Input your guess in coordinates, separated by a blank space, or press q to quit.\"\n        value1 = gets.split(\" \")\n        row_guess = value1[0].to_i\n        col_guess = value1[1].to_i\n\n    elsif $newarray[row_guess][col_guess] == '*'\n        puts \"You guessed row #{row_guess} and column #{col_guess}.\"\n        puts \"You hit a mine!\"\n        puts \"Game Over\"\n    end\nend\n=end\n</code></pre>\n\n<p>The area giving me trouble is </p>\n\n<pre><code>board.each_index do |i| \n            subarray2 = board|i|\n                subarray2.each_index do |j|\n                    if board[i][j] == '*'\n                        board[i+1][j] = board[i+1][j]+1\n                        board[i+1][j+1] = board[i+1][j+1]+1\n                        board[i+1][j-1] = board[i+1][j-1]+1\n                        board[i][j-1] = board[i][j-1]+1\n                        board[i][j+1] = board[i][j+1]+1\n                        board[i-1][j] = board[i-1][j]+1\n                        board[i-1][j+1] = board[i-1][j+1]+1\n                        board[i-1][j-1] = board[i-1][j-1]+1\n                    end\n                end\n        end\n</code></pre>\n\n<p>I've also tried moving the addition section above, as an elsif statement below the if, like so</p>\n\n<pre><code>def create_hint_board(board)\n    board = $globalarray\n    $globalarray.each_index do |i|\n        subarray = $globalarray[i]\n            subarray.each_index do |j|\n                if $globalarray[i][j] != '*'\n                    board[i][j].to_i\n                    board[i][j] = 0                 \n                elsif board[i][j] == '*'\n                    board[i+1][j] = board[i+1][j]+1\n                    board[i+1][j+1] = board[i+1][j+1]+1\n                    board[i+1][j-1] = board[i+1][j-1]+1\n                    board[i][j-1] = board[i][j-1]+1\n                    board[i][j+1] = board[i][j+1]+1\n                    board[i-1][j] = board[i-1][j]+1\n                    board[i-1][j+1] = board[i-1][j+1]+1\n                    board[i-1][j-1] = board[i-1][j-1]+1\n                end\n            end\n                puts \"#{String(i)},#{String(j)} is #{board[i][j]}\" \n    end\nend\n</code></pre>\n\n<p>This results in the error message:</p>\n\n<pre><code>minesweeper.rb:28:in '+': can't convert Fixnum into String (TypeError)\n   from minesweeper.rb:28:in 'block (2 levels) in create_hint_board'\n   from minesweeper.rb:28:in 'each_index'\n   from minesweeper.rb:28:in 'block in create_hint_board'\n   from minesweeper.rb:28:in 'each_index'\n   from minesweeper.rb:28:in 'create_hint_board'\n   from minesweeper.rb:28:in '(main')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "foreign-keys", "one-to-many"], "answers": [{"comments": [{"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "edited": false, "score": 0, "creation_date": 1428497737, "post_id": 29515224, "comment_id": 47185906, "body": "I did try this, but didn&#39;t fix the issue."}, {"owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "reply_to_user": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "edited": false, "score": 0, "creation_date": 1428498268, "post_id": 29515224, "comment_id": 47186291, "body": "Looks fine to me. you can add more context in models, so it will help."}], "tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 0, "last_activity_date": 1428497650, "creation_date": 1428497650, "answer_id": 29515224, "question_id": 29515013, "link": "https://stackoverflow.com/questions/29515013/rails-cannot-override-engine-wrong-one-to-many-foreign-key/29515224#29515224", "title": "Rails - cannot override engine wrong one to many foreign key", "body": "<p>Maybe you also needs to add :foreign_key in photo.rb</p>\n"}], "owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428497650, "creation_date": 1428497148, "question_id": 29515013, "link": "https://stackoverflow.com/questions/29515013/rails-cannot-override-engine-wrong-one-to-many-foreign-key", "title": "Rails - cannot override engine wrong one to many foreign key", "body": "<p>I have an engine that contains two tables, <code>seven_gallery_galleries</code> and <code>seven_gallery_photos</code>. I want to have one (gallery) to many (photos) relationship.</p>\n\n<p>I have set the relationship and made my migrations, but I always get this error:</p>\n\n<pre><code>Unknown column 'seven_gallery_photos.gallery_id' in 'where clause': SELECT  `seven_gallery_photos`.* FROM `seven_gallery_photos` WHERE `seven_gallery_photos`.`gallery_id` = 1 \n</code></pre>\n\n<p>Here's my migrations:</p>\n\n<pre><code>class CreateSevenGalleryPhotos &lt; ActiveRecord::Migration\n  def change\n    create_table :seven_gallery_photos do |t|\n      t.string :caption\n      t.string :image\n      t.references :seven_gallery_gallery, index: true, foreign_key: true\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>In <strong>gallery.rb</strong>:</p>\n\n<pre><code>has_many :photos, dependent: :destroy, , class_name: \"SevenGallery::Photo\", :foreign_key =&gt; \"seven_gallery_gallery_id\"\n</code></pre>\n\n<p>In <strong>photo.rb</strong>:</p>\n\n<pre><code>belongs_to :gallery, class_name: \"SevenGallery::Gallery\"\n</code></pre>\n\n<p>As you can see in <code>gallery.rb</code>, I have set a custom <code>foreign_key</code> to match the one created by the migrations, but apparently rails still looks for <code>gallery_id</code> instead of <code>seven_gallery_gallery_id</code>.</p>\n"}, {"tags": ["php", "ruby", "symfony", "compass"], "comments": [{"owner": {"reputation": 5939, "user_id": 1847340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e02261c9592b118663ed82e02260166?s=128&d=identicon&r=PG", "display_name": "ferdynator", "link": "https://stackoverflow.com/users/1847340/ferdynator"}, "edited": false, "score": 0, "creation_date": 1429007461, "post_id": 29515006, "comment_id": 47393406, "body": "Is it a typo or do you have 2 times <code>compass</code> in your config? I only have one in mine. Try to remove one <a href=\"https://gist.github.com/ferdynator/280048aceea4ea16d925\" rel=\"nofollow noreferrer\">like so</a>. Also could you please add your <code>base.scss</code>?"}, {"owner": {"reputation": 847, "user_id": 4247477, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/SGQ9u.jpg?s=128&g=1", "display_name": "Thomas Crawford", "link": "https://stackoverflow.com/users/4247477/thomas-crawford"}, "reply_to_user": {"reputation": 5939, "user_id": 1847340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e02261c9592b118663ed82e02260166?s=128&d=identicon&r=PG", "display_name": "ferdynator", "link": "https://stackoverflow.com/users/1847340/ferdynator"}, "edited": false, "score": 0, "creation_date": 1429091004, "post_id": 29515006, "comment_id": 47433809, "body": "Hi ferdynator, updated my question and added base.scss. Also tried your config but still not working. error :    &quot;/usr/bin/ruby&quot; &quot;C:\\Ruby21-x64\\bin\\compass.bat&quot; &quot;compile&quot; &quot;C:\\Windows\\Temp&quot; &quot;--boring&quot; &quot;--config&quot; &quot;C:\\Windows\\Temp\\assB498.tmp&quot; &quot;--sass-dir&quot; &quot;&quot; &quot;--css-dir&quot; &quot;&quot; &quot;C:/Windows/Temp/assB499.tmp.scss&quot;"}, {"owner": {"reputation": 4564, "user_id": 1173391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/880dec89d3389f3b18b561c99707cf62?s=128&d=identicon&r=PG", "display_name": "Nickolaus", "link": "https://stackoverflow.com/users/1173391/nickolaus"}, "edited": false, "score": 0, "creation_date": 1429304081, "post_id": 29515006, "comment_id": 47553934, "body": "take a look at this guide maybe it will help: <a href=\"http://stackoverflow.com/questions/16003621/configuring-compass-on-windows\" title=\"configuring compass on windows\">stackoverflow.com/questions/16003621/&hellip;</a>"}, {"owner": {"reputation": 865, "user_id": 674840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fadc01371e9e25eab561dc0ef3367c1?s=128&d=identicon&r=PG", "display_name": "kronn", "link": "https://stackoverflow.com/users/674840/kronn"}, "edited": false, "score": 0, "creation_date": 1467360276, "post_id": 29515006, "comment_id": 63710449, "body": "Can you show us the content of compass.BAT? It seems that this file contains an error."}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 4247477, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/SGQ9u.jpg?s=128&g=1", "display_name": "Thomas Crawford", "link": "https://stackoverflow.com/users/4247477/thomas-crawford"}, "edited": false, "score": 0, "creation_date": 1429531612, "post_id": 29673394, "comment_id": 47627053, "body": "Thanks also tried this but unfortunately this is not the problem. I am still getting the same error."}], "tags": [], "owner": {"reputation": 189, "user_id": 2481303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6fd9b8a023e3fd6c39317a23fc4933?s=128&d=identicon&r=PG", "display_name": "hermitcodemonkey", "link": "https://stackoverflow.com/users/2481303/hermitcodemonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1429183912, "creation_date": 1429183912, "answer_id": 29673394, "question_id": 29515006, "link": "https://stackoverflow.com/questions/29515006/compass-in-symfony-2-assetic-filter-exception/29673394#29673394", "title": "Compass in Symfony 2 assetic Filter Exception", "body": "<p>It's highly likely this is something you've already tried / noticed, but just in case:</p>\n\n<p>The error seems more like the ruby interpreter is dying, rather than it choking on your scss / twig. Which makes some degree of sense since ruby doesn't expect a .BAT script to be utilized.</p>\n\n<p>Generally just 'compass' is used, not 'compass.BAT', which usually just calls ruby with 'compass'.</p>\n\n<p>I.e. </p>\n\n<blockquote>\n  <p>\"C:\\Ruby21-x64\\bin\\ruby.EXE\" \"C:\\Ruby21-x64\\bin\\compass.BAT\" \"compile\"\n  \"C:\\ Users\\tommie\\AppData\\Local\\Temp\" \"--boring\" \"--config\"\n  \"C:\\Users\\tommie\\App Data\\Local\\Temp\\ass4325.tmp\" \"--sass-dir\" \"\"\n  \"--css-dir\" \"\" \"C:/Users/tommi e/AppData/Local/Temp/ass4326.tmp.scss\"</p>\n</blockquote>\n\n<p>Would normally be</p>\n\n<blockquote>\n  <p>\"C:\\Ruby21-x64\\bin\\ruby.EXE\" \"C:\\Ruby21-x64\\bin\\compass\" \"compile\"\n  \"C:\\ Users\\tommie\\AppData\\Local\\Temp\" \"--boring\" \"--config\"\n  \"C:\\Users\\tommie\\App Data\\Local\\Temp\\ass4325.tmp\" \"--sass-dir\" \"\"\n  \"--css-dir\" \"\" \"C:/Users/tommi e/AppData/Local/Temp/ass4326.tmp.scss\"</p>\n</blockquote>\n\n<p>Essentially, set the compass.bin path to not have the .bat in it, and you'll probably be fine. This is generally in the assetic.filters.compass.bin in your config.yml</p>\n\n<p>See also <a href=\"https://github.com/symfony/AsseticBundle/issues/158\" rel=\"nofollow\">https://github.com/symfony/AsseticBundle/issues/158</a></p>\n\n<p>This also reveals special characters aren't well liked, not sure how well it likes spaces in dirnames. Those might also contribute to choking if it still doesn't work without the .bat</p>\n"}, {"tags": [], "owner": {"reputation": 152, "user_id": 4572297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0d7ca084b0a57d9db4b862b9de9bbf?s=128&d=identicon&r=PG&f=1", "display_name": "Crisan Lucian", "link": "https://stackoverflow.com/users/4572297/crisan-lucian"}, "is_accepted": true, "score": 1, "last_activity_date": 1523880004, "creation_date": 1523880004, "answer_id": 49856822, "question_id": 29515006, "link": "https://stackoverflow.com/questions/29515006/compass-in-symfony-2-assetic-filter-exception/49856822#49856822", "title": "Compass in Symfony 2 assetic Filter Exception", "body": "<p>I don`t want to discourage you, but using Windows and Ruby this is the worse combo ever, (node also, node_module with long tree subdirectories, making Windows to have a limit of 256charaters and will show an error by installing the packages). My point is like an alternative to move your project to Virtual Machine similar with your server configuration. (VirtualBox and Vagrant)</p>\n\n<p>Linux is more friendly with Ruby (it has support for him) and has symlinks and long path names; </p>\n\n<p>for tinkering: \n<a href=\"https://symfony.com/doc/2.8/setup/homestead.html\" rel=\"nofollow noreferrer\">https://symfony.com/doc/2.8/setup/homestead.html</a></p>\n\n<p>Perhaps will be help also this old link:\n<a href=\"https://stackoverflow.com/questions/9622960/how-to-use-scss-filter-in-symfony2-under-windows\">How to use SCSS filter in Symfony2 under Windows?</a></p>\n"}], "owner": {"reputation": 847, "user_id": 4247477, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/SGQ9u.jpg?s=128&g=1", "display_name": "Thomas Crawford", "link": "https://stackoverflow.com/users/4247477/thomas-crawford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1353, "favorite_count": 1, "accepted_answer_id": 49856822, "answer_count": 2, "score": 38, "last_activity_date": 1523880004, "creation_date": 1428497139, "last_edit_date": 1429173180, "question_id": 29515006, "link": "https://stackoverflow.com/questions/29515006/compass-in-symfony-2-assetic-filter-exception", "title": "Compass in Symfony 2 assetic Filter Exception", "body": "<p>I have installed compass in my symfony 2 project. Now i want to use the assetic filter in combination with compass. \ni am using windows 7.</p>\n\n<p>I think it's almost working but i am still getting this error : </p>\n\n<pre><code>[Assetic\\Exception\\FilterException]\nAn error occurred while running:\n\"C:\\Ruby21-x64\\bin\\ruby.EXE\" \"C:\\Ruby21-x64\\bin\\compass.BAT\" \"compile\" \"C:\\\nUsers\\tommie\\AppData\\Local\\Temp\" \"--boring\" \"--config\" \"C:\\Users\\tommie\\App\nData\\Local\\Temp\\ass4325.tmp\" \"--sass-dir\" \"\" \"--css-dir\" \"\" \"C:/Users/tommi\ne/AppData/Local/Temp/ass4326.tmp.scss\"\nError Output:\nC:/Ruby21-x64/bin/compass.BAT:1: syntax error, unexpected tCONSTANT, expect\ning end-of-input\n</code></pre>\n\n<p>My code in html (twig) : stylesheets.html.twig</p>\n\n<pre><code>{% stylesheets filter=\"compass\" output='css/compiled/*.css'\n   \"@AcmeSassDemoBundle/Resources/assets/css/base.scss\"\n%}\n&lt;link rel=\"stylesheet\" href=\"{{ asset_url }}\" /&gt;\n\n{% endstylesheets %}\n</code></pre>\n\n<p>base.html.twig:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n    &lt;title&gt;{% block title %}Sass Demo!{% endblock %}&lt;/title&gt;\n    {#{% block stylesheets %}{% endblock %} #}\n\n    {% include \"AcmeSassDemoBundle:Demo:stylesheets.html.twig\" %}\n    &lt;link rel=\"shortcut icon\" href=\"{{ asset('favicon.ico') }}\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"header\"&gt;\n        {% block header %}\n            &lt;h1&gt;Sass Demo&lt;/h1&gt;\n            &lt;div class=\"logo\"&gt;this container is half as big as the sass.gif's dimension&lt;/div&gt;\n        {% endblock %}\n    &lt;/div&gt;\n\n    &lt;div id=\"menu\"&gt;\n        &lt;ul&gt;\n            &lt;li class=\"add\"&gt;&lt;a href=\"#\"&gt;add something&lt;/a&gt;&lt;/li&gt;\n            &lt;li class=\"edit\"&gt;&lt;a href=\"#\"&gt;edit something&lt;/a&gt;&lt;/li&gt;\n            &lt;li class=\"delete\"&gt;&lt;a href=\"#\"&gt;delete something&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"content\"&gt;\n        {% block body %}hello sass!{% endblock %}\n    &lt;/div&gt;\n\n    &lt;div id=\"footer\"&gt;\n        {% block footer %}awesome footer goes here ...{% endblock %}\n    &lt;/div&gt;\n    {% block javascripts %}{% endblock %}&lt;/\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>index.html.twig:</p>\n\n<pre><code>{% extends 'AcmeSassDemoBundle:Demo:base.html.twig' %}\n\n{% block body %}\n\n&lt;div class=\"content\"&gt;\n  hello world\n    &lt;div class=\"sub\"&gt;\n       This text should be in green ...\n       &lt;div class=\"sub\"&gt;\n        ... and this one in blue!\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>my config.yml filter assetic configuration: </p>\n\n<pre><code># Assetic Configuration\nassetic:\n    debug: false\n    use_controller: true# default: true\n    filters:\n        sass:    ~\n        compass: \n            compass:\n                bin: C:\\Ruby21-x64\\bin\\compass.bat\n</code></pre>\n\n<p>base.scss</p>\n\n<pre><code>$main-background-color: #FFF;\n$main-color: #FFF;\n$light-color: #759E1A;\n$link-color: #0088CC;\n\nbody {\n    background-color: #CCC;\n}\n\n@mixin rounded($side, $radius: 10px) {\n    border-radius: $radius;\n    border-#{$side}-radius: $radius;\n    -moz-border-radius-#{$side}: $radius;\n    -webkit-border-#{$side}-radius: $radius;\n}\n\n@import \"header.scss\";\n@import \"menu.scss\";\n@import \"content.scss\";\n@import \"footer.scss\";\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 4751211, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b83188bd7f186ac7e51aaef397db943?s=128&d=identicon&r=PG&f=1", "display_name": "jumbo_siopao", "link": "https://stackoverflow.com/users/4751211/jumbo-siopao"}, "edited": false, "score": 0, "creation_date": 1428499736, "post_id": 29515228, "comment_id": 47187335, "body": "Thanks for the reply, I put all the codes in that model if you want to take a look please. In my field I have created virtual attributes start time and start date then in my model Im combining these 2 to save it in my database. Its not just clear why does the value not retain after the custom validation executes"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 147, "user_id": 4751211, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b83188bd7f186ac7e51aaef397db943?s=128&d=identicon&r=PG&f=1", "display_name": "jumbo_siopao", "link": "https://stackoverflow.com/users/4751211/jumbo-siopao"}, "edited": false, "score": 0, "creation_date": 1428505038, "post_id": 29515228, "comment_id": 47191529, "body": "Is that still the case when you use my version?"}, {"owner": {"reputation": 147, "user_id": 4751211, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b83188bd7f186ac7e51aaef397db943?s=128&d=identicon&r=PG&f=1", "display_name": "jumbo_siopao", "link": "https://stackoverflow.com/users/4751211/jumbo-siopao"}, "edited": false, "score": 0, "creation_date": 1428509056, "post_id": 29515228, "comment_id": 47194459, "body": "hi, I used your version, the values are still not showing in the field after validation. Anyway, I tried a simple custom validation, see my code, I have custom validation called check_time. its giving same result (not showing value in field). I dont knwo what to do now. I have a feeling the problem could be in setting my virtual atr but not so sure. Thank you for your reply."}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1428497668, "creation_date": 1428497668, "answer_id": 29515228, "question_id": 29514815, "link": "https://stackoverflow.com/questions/29514815/custom-validation-gives-blank-field-after-validation-which-is-not-right/29515228#29515228", "title": "custom validation gives blank field after validation which is not right", "body": "<pre><code>validate :time_collision_validation\n\ndef time_collision_validation\n  appointments = Appointment.all\n  if self.start_date.present? &amp;&amp; self.start_time.present? &amp;&amp; duration.present?\n    start_at = Time.parse(\"#{self.start_date} #{self.start_time}\") \n    end_at = Time.parse(\"#{self.start_date} #{self.start_time}\") + (self.duration.to_f.hours)\n    appointments.each do |appointment|\n      if duration == 0.to_s\n        duration_ok = start_at &gt;= appointment.start_at - (1.hours) \n      else\n        duration_ok = appointment.start_at &lt;= end_at\n      end\n      if start_at &lt;= appointment.end_at - (2.hours) &amp;&amp; duration_ok\n        errors.add(:start_time)\n        errors.add(:start_date, \"An appointment already \n          exists at #{appointment.start_at.strftime(\"%I:%M%p\")} of #{appointment.start_at.strftime(\"%d/%m/%Y\")} \n          to #{appointment.end_at.strftime(\"%I:%M%p\")} of #{appointment.end_at.strftime(\"%d/%m/%Y\")}. \n          Please select a different date or time.\")\n        break\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Notes: </p>\n\n<ul>\n<li>you variously refer to <code>duration</code> and <code>self.duration</code>.  For readability i would always use <code>self.duration</code> rather than <code>duration</code> or <code>self.duration</code> as it makes it clear to the reader that you are talking about  a method/field of the current object rather than a local variable.  I've change all instances of referencing methods/fields of the current object to <code>self.methodname</code></li>\n<li>you had a lot of repetition shared between the two if cases.  I've refactored these to avoid repetition.</li>\n<li><code>2*60*60</code> is like saying <code>2.hours</code> and the latter is much more readable.</li>\n<li>what are start_date and start_time - are they strings or date/time objects?</li>\n<li>rather than loading every appointment in your entire database, and cycling through them, it would be much more efficient to just search for a single colliding other appointment.  if you find one then you can add the errors.  I was tempted to do this here but it's not clear exactly what's going on with your database.</li>\n</ul>\n"}], "owner": {"reputation": 147, "user_id": 4751211, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b83188bd7f186ac7e51aaef397db943?s=128&d=identicon&r=PG&f=1", "display_name": "jumbo_siopao", "link": "https://stackoverflow.com/users/4751211/jumbo-siopao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428499802, "creation_date": 1428496557, "last_edit_date": 1428499802, "question_id": 29514815, "link": "https://stackoverflow.com/questions/29514815/custom-validation-gives-blank-field-after-validation-which-is-not-right", "title": "custom validation gives blank field after validation which is not right", "body": "<p>I have a custom validation in my model like this: </p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n    #VIRTUAL ATTRIBUTES\n    attr_accessor :start_date, :start_time, :duration\n\n    #RELATIONSHIPS\n    belongs_to :task\n\n    #VALIDATIONS\n    before_validation :convert_to_datetime\n    before_validation :dur\n    validates :duration, presence: true\n    validate :is_date_nil\n    validate :time_collision_validation, if: :is_appointments_not_empty\n    validate :check_time\n    after_save :save_start_date\n\n    def is_appointments_not_empty\n        Appointment.all.present? \n    end\n\n    def check_time  \n        start_at = Time.parse(\"#{@start_date} #{@start_time}\") \n        if start_at &lt; Time.now\n            errors.add(:start_date, \"Cannot input past times\")\n        end\n    end\n\n    def convert_to_datetime\n        unless @start_date.blank? &amp;&amp; @start_time.blank? \n            self.start_at = Time.parse(\"#{@start_date} #{@start_time}\")         \n        end\n    end\n\n    def dur\n        if @start_date.present? &amp;&amp; @start_time.present? &amp;&amp; @duration.present?\n            self.end_at = Time.parse(\"#{@start_date} #{@start_time}\") + (@duration.to_f*60*60)\n        end\n    end\n\n    def time_collision_validation\n        appointments = Appointment.all\n\n\n        if @start_date.present? &amp;&amp; @start_time.present? &amp;&amp; duration == 0.to_s\n            start_at = Time.parse(\"#{@start_date} #{@start_time}\") \n            end_at = Time.parse(\"#{@start_date} #{@start_time}\") + (@duration.to_f*60*60)\n            appointments.each do |a|\n                if start_at &lt;= a.end_at - (2*60*60) &amp;&amp; start_at &gt;= a.start_at - (1*60*60)\n                    errors.add(:start_time)\n                    errors.add(:start_date, \"An appointment already \n                        exists at #{a.start_at.strftime(\"%I:%M%p\")} of #{a.start_at.strftime(\"%d/%m/%Y\")} \n                        to #{a.end_at.strftime(\"%I:%M%p\")} of #{a.end_at.strftime(\"%d/%m/%Y\")}. \n                        Please select a different date or time.\")\n\n                    break\n\n                end\n            end\n\n        elsif @start_date.present? &amp;&amp; @start_time.present? &amp;&amp; duration.present?\n            start_at = Time.parse(\"#{@start_date} #{@start_time}\") \n            end_at = Time.parse(\"#{@start_date} #{@start_time}\") + (@duration.to_f*60*60)\n            appointments.each do |a|\n                if start_at &lt;= a.end_at - (2*60*60) &amp;&amp; a.start_at &lt;= end_at \n                    errors.add(:start_time)\n                    errors.add(:start_date, \"An appointment already \n                        exists at #{a.start_at.strftime(\"%I:%M%p\")} of #{a.start_at.strftime(\"%d/%m/%Y\")} \n                        to #{a.end_at.strftime(\"%I:%M%p\")} of #{a.end_at.strftime(\"%d/%m/%Y\")}. \n                        Please select a different date or time.\")\n                    break\n                end\n            end\n        end\n\n    end\n\n\n    def is_date_nil\n        if @start_date.blank? &amp;&amp; @start_time.blank?\n            errors.add(:start_date,  \"Start date can't be blank\")\n            errors.add(:start_time,  \"Start time can't be blank\")\n        end\n\n        if @start_date.blank? &amp;&amp; @start_time.present?\n            errors.add(:start_date,  \"Start date can't be blank\")\n        end\n\n        if  @start_time.blank? &amp;&amp; @start_date.present?\n            errors.add(:start_time,  \"Start time can't be blank\")\n        end\n    end\n\n\n    def start_date=(date)\n        @start_date = Date.strptime(date, \"%d/%m/%Y\") if date.present?\n    end\n    # def save_start_date\n    #   @start_date = Date.strptime(@start_date, \"%d/%m/%Y\") if @start_date.present?\n    # end\n\n    # def save_start_date\n    #   @start_date = Date.parse(@start_date).strftime(\"%d/%m/%Y\")if @start_date.present?\n\n    # end\n\n    def start_time=(time)\n        @start_time = Time.parse(time).strftime(\"%H:%M:%S\") if time.present?\n    end\n\n    def duration=(duration)\n        @duration = duration if duration.present?\n    end\n\n    # def start_date\n    #       @start_date.strftime(\"%d/%m/%Y\") if start_at.present?  # || start_at.strftime(\"%d/%m/%Y\") if start_at.present? \n    #   end \n\n    def start_date\n        unless @start_date.blank?\n            @start_date.strftime(\"%d/%m/%Y\")\n        end\n        # start_at.strftime(\"%d/%m/%Y\") if start_at.present? \n    end \n\n    def start_time\n        @start_time || start_at.strftime(\"%I:%M%p\") if start_at.present? \n    end\n\n\n    # def duration\n    #   @duration || 9\n    # end\n\nend\n</code></pre>\n\n<p>After this time_collision_validation executes, the value fields are blank which I don't want because I'm concerned with UX. ie: start_date and start_time fields are blank. </p>\n\n<p>When I checked the value attribute in input in the HTML source code, the value contains a date string. I wonder why it does not show in the field.</p>\n\n<p>Can somebody help me with this and explain what is going on please? >.&lt;</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "mongoid", "rails-admin"], "answers": [{"comments": [{"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1428497682, "post_id": 29515068, "comment_id": 47185868, "body": "throws me an error <code>NoMethodError  undefined method default for #&lt;Client:0x0000000d569598&gt;</code>"}, {"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1428499356, "post_id": 29515068, "comment_id": 47187066, "body": "This solution brings new question. I have removed nested form during the creation of model. If I want to something like <code>add Favourite for this Client</code> in <code>edit</code> page of my model, what do I need to do?"}], "tags": [], "owner": {"reputation": 988, "user_id": 4384619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l7-7H3MFzcY/AAAAAAAAAAI/AAAAAAAAAP8/K6ILQ-kg8T4/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Buttice", "link": "https://stackoverflow.com/users/4384619/j%c3%a9r%c3%a9my-buttice"}, "is_accepted": true, "score": 1, "last_activity_date": 1428498669, "last_edit_date": 1428498669, "creation_date": 1428497284, "answer_id": 29515068, "question_id": 29514765, "link": "https://stackoverflow.com/questions/29514765/rails-admin-remove-nested-model-attributes-from-form-while-creating-model/29515068#29515068", "title": "Rails_admin, remove nested model attributes from form while creating model", "body": "<p>In your model:</p>\n\n<pre><code>class Client\n    include Mongoid::Document\n    field :email, type: String\n    has_many :favourites, dependent: :destroy\n\n    rails_admin do\n     edit do\n       exclude_fields :favourites\n     end\n    end\nend\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL#configuring-fields\" rel=\"nofollow\">https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL#configuring-fields</a></p>\n"}], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 0, "accepted_answer_id": 29515068, "answer_count": 1, "score": 0, "last_activity_date": 1428498669, "creation_date": 1428496463, "question_id": 29514765, "link": "https://stackoverflow.com/questions/29514765/rails-admin-remove-nested-model-attributes-from-form-while-creating-model", "title": "Rails_admin, remove nested model attributes from form while creating model", "body": "<p>I have started to use Rails_Admin gem and it is great. However, there is one issue. I am using Mongoid and I have created my models:</p>\n\n<pre><code>class Client\n   include Mongoid::Document\n\n   field :email, type: String\n\n   has_many :favourites, dependent: :destroy\nend\n\nclass Service\n   include Mongoid::Document\n\n   field :name, type: String\n   has_many :favourites, dependent: :destroy\nend\n\nclass Favourite\n   include Mongoid::Document\n\n   belongs_to :client\n   belongs_to :service\n end\n</code></pre>\n\n<p>I have created some data by using <code>seed.rb</code>. When I open my admin page and try to create new <code>Client</code>, after <code>Clients</code> attribute fields, it shows me multiselect form to add <code>Favourites</code> and shows me <code>Favourites</code> of all other <code>Clients</code>.</p>\n\n<p>How to remove this from creation form? I have read that I need to add <code>inverse_of</code> for all my classes associations, but it is not removing them.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 8393, "user_id": 4341439, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NBPKq.jpg?s=128&g=1", "display_name": "Miha \u0160u\u0161ter\u0161i\u010d", "link": "https://stackoverflow.com/users/4341439/miha-%c5%a0u%c5%a1ter%c5%a1i%c4%8d"}, "edited": false, "score": 0, "creation_date": 1428496345, "post_id": 29514644, "comment_id": 47184922, "body": "ugh, and here I was setting up a git repository =) Solved, thanks for the help, will accept once I can"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1428496135, "creation_date": 1428496135, "answer_id": 29514644, "question_id": 29514602, "link": "https://stackoverflow.com/questions/29514602/index-outputs-content-that-isnt-in-the-html-erb-file/29514644#29514644", "title": "index outputs content that isn&#39;t in the .html.erb file", "body": "<p>You should put <code>book.each</code> call inside of <code>&lt;%</code> tag, instead of <code>&lt;%=</code> tag:</p>\n\n<pre><code>&lt;% books.each do |book| %&gt;\n</code></pre>\n\n<p>Now, you print the result of <code>books.each</code> (which is <code>books</code> array) into your HTML. </p>\n"}, {"comments": [{"owner": {"reputation": 8393, "user_id": 4341439, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NBPKq.jpg?s=128&g=1", "display_name": "Miha \u0160u\u0161ter\u0161i\u010d", "link": "https://stackoverflow.com/users/4341439/miha-%c5%a0u%c5%a1ter%c5%a1i%c4%8d"}, "edited": false, "score": 1, "creation_date": 1428496320, "post_id": 29514674, "comment_id": 47184900, "body": "thanks, I&#39;ll accept Marek Lipka&#39;s anwser, since he posted a minute before you"}], "tags": [], "owner": {"reputation": 1059, "user_id": 1954997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b74ceb43f57ee68b44ac1969fe5a38cc?s=128&d=identicon&r=PG", "display_name": "Alessandro Cifani", "link": "https://stackoverflow.com/users/1954997/alessandro-cifani"}, "is_accepted": false, "score": 1, "last_activity_date": 1428496205, "creation_date": 1428496205, "answer_id": 29514674, "question_id": 29514602, "link": "https://stackoverflow.com/questions/29514602/index-outputs-content-that-isnt-in-the-html-erb-file/29514674#29514674", "title": "index outputs content that isn&#39;t in the .html.erb file", "body": "<pre><code>&lt;%= book.each do |book| %&gt;\n</code></pre>\n\n<p>The equal after the opening syntax prints the command(s) that follow. That should be the case, try removing it </p>\n"}, {"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 0, "last_activity_date": 1428496357, "creation_date": 1428496357, "answer_id": 29514729, "question_id": 29514602, "link": "https://stackoverflow.com/questions/29514602/index-outputs-content-that-isnt-in-the-html-erb-file/29514729#29514729", "title": "index outputs content that isn&#39;t in the .html.erb file", "body": "<p>remove<code>=</code> from the line <code>&lt;%= book.each do |book| %&gt;</code></p>\n"}], "owner": {"reputation": 8393, "user_id": 4341439, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NBPKq.jpg?s=128&g=1", "display_name": "Miha \u0160u\u0161ter\u0161i\u010d", "link": "https://stackoverflow.com/users/4341439/miha-%c5%a0u%c5%a1ter%c5%a1i%c4%8d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29514644, "answer_count": 3, "score": 0, "last_activity_date": 1428496357, "creation_date": 1428496050, "question_id": 29514602, "link": "https://stackoverflow.com/questions/29514602/index-outputs-content-that-isnt-in-the-html-erb-file", "title": "index outputs content that isn&#39;t in the .html.erb file", "body": "<p>I'm following a ruby on rails tutorial to build a simple application using database tables and for some reason my home page outputs more than it should. It creates this array that looks like a database query made with prompt and puts it on the page. I'm pretty sure the problem is with my index.html.erb file (if I empty the file and reload the weird content isn't there), but I can't figure out what's going on. <a href=\"http://oi62.tinypic.com/2rfvrrs.jpg\" rel=\"nofollow\">Here</a>'s a screenshot of what happens.</p>\n\n<pre><code>controller code:\nclass BooksController &lt; ApplicationController\n  def new\n    @page_title = 'Add Book'\n    @book = Book.new\n    @category = Category.new\n    @author = Author.new\n    @publisher = Publisher.new\n  end\n\n  def create\n    @book = Book.new(book_params)\n    @book.save\n\n    redirect_to books_path\n  end\n\n  def update\n  end\n\n  def edit\n  end\n\n  def destroy\n  end\n\n  def index\n    @books = Book.all\n  end\n\n  def show\n  end\n\n  private\n    def book_params\n      params.require(:book).permit(:title, :category_id, :author_id, :publisher_id, :isbn, :price, :buy, :format, :excerpt, :pages, :year, :coverpath)\n    end\nend\n</code></pre>\n\n<p>html:</p>\n\n<pre><code>&lt;div id= \"books-index\"&gt;\n    &lt;% @books.each_slice(4) do |book| %&gt;\n        &lt;div class = \"row\"&gt;\n            &lt;%= book.each do |book| %&gt;\n                &lt;div class=\"col-md-3 col-sm-3\"&gt;\n                    &lt;h3&gt;&lt;%= book.title %&gt;&lt;/h3&gt;\n                    &lt;%= image_tag(book.coverpath) %&gt;\n                    &lt;%= link_to 'Read More', book_path(book), class:'btn btn-primary' %&gt;\n                &lt;/div&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I am new to ruby and ruby on rails, so if I need to post any more resources or info in order to make my question clearer please let me know. Thanks for the help</p>\n"}, {"tags": ["ruby", "daemon", "eventmachine"], "comments": [{"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1428497481, "post_id": 29514226, "comment_id": 47185717, "body": "Does execution stop after the call to daemonize or later?"}, {"owner": {"reputation": 16696, "user_id": 359380, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b1f5969eb9f627f7d596552079d9ce57?s=128&d=identicon&r=PG", "display_name": "DVG", "link": "https://stackoverflow.com/users/359380/dvg"}, "reply_to_user": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1428497605, "post_id": 29514226, "comment_id": 47185815, "body": "After. It detaches from the terminal, creates the pid file, and then nothing else happens. Nothing ever appears in the log (If I disable daemonizing, the log receives input)"}, {"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1428498374, "post_id": 29514226, "comment_id": 47186363, "body": "I took the code from the example provided in the gem and made <a href=\"https://gist.github.com/sid-code/8ddb4573ea683bf6bec9\" rel=\"nofollow noreferrer\">this</a>. and it works fine. Does this isolate the problem to the logger?"}], "answers": [{"tags": [], "owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "is_accepted": false, "score": 0, "last_activity_date": 1430942738, "creation_date": 1430942738, "answer_id": 30086500, "question_id": 29514226, "link": "https://stackoverflow.com/questions/29514226/daemonizing-an-eventmachine-app/30086500#30086500", "title": "Daemonizing an eventmachine app", "body": "<p>If you are running Ubuntu (or another Upstart-based Linux), I have used the following script and service configuration to run EventMachine services. Maybe it will work for you. For other init based systems you can probably modify the approach.</p>\n\n<p>In this example, <em>SVC</em> is the name of my app, and <em>BASEHOME</em> is the location I installed it to (<code>/usr/share</code> in my case)</p>\n\n<p><strong>Create an init control script for your EM server</strong></p>\n\n<p>Place this file in the lib directory of your EM app, and update <em>SVC</em> and <em>BASEDIR</em> appropriately.</p>\n\n<pre><code>#!/bin/bash\nSVC=em-server\nBASEHOME=/usr/share    \nBASEDIR=$BASEHOME/$SVC    \necho Starting $SVC: `date`\necho Running as: `whoami`   \necho Running in: $BASEDIR\n### Set RVM source if you are using it, otherwise remove these two lines\nsource \"/usr/local/rvm/scripts/rvm\"\nrvm use 2.1\n###\ncd $BASEDIR    \nruby $BASEDIR/lib/em_server.rb\n</code></pre>\n\n<p><strong>Configure Upstart to run the control script</strong></p>\n\n<pre><code>sudo -i\n\nSVC=em-server\nBASEDIR=/usr/share/$SVC\n\nadduser $SVC --system\nusermod -a  -G em-service $SVC\nchown --recursive $SVC:$SVCGRP $BASEDIR\nchmod --recursive 660 $BASEDIR\nchmod 550 $BASEDIR/lib/start_em_service_upstart.sh\nchmod 550 $BASEDIR/scripts/*\ncat &gt; /etc/init/$SVC.conf &lt;&lt;EOF\n    description     \"EM Server\"\n    start on (starting network-interface\n     or starting network-manager\n     or starting networking)\n    stop on runlevel [!2345]\n    setuid $SVC\n    exec $BASEDIR/lib/start_em_service_upstart.sh\n    respawn\nEOF\n\ninitctl reload-configuration\n\nexit\n</code></pre>\n\n<p>Run <code>sudo service em-server start</code> to try it out.</p>\n\n<p>Be sure to check <code>/var/log/upstart/em_server.log</code> for feedback on whether the service starts as expected or other issues occur. </p>\n\n<p>Also, note that RVM can cause all kinds of issues. In my example I set it up as multiuser to avoid annoying Ruby and Bundler issuers. Probably not ideal though</p>\n"}], "owner": {"reputation": 16696, "user_id": 359380, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b1f5969eb9f627f7d596552079d9ce57?s=128&d=identicon&r=PG", "display_name": "DVG", "link": "https://stackoverflow.com/users/359380/dvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1430942738, "creation_date": 1428495014, "question_id": 29514226, "link": "https://stackoverflow.com/questions/29514226/daemonizing-an-eventmachine-app", "title": "Daemonizing an eventmachine app", "body": "<p>I have an event-machine based app that I want to run as a daemon, so I can easily start stop it.</p>\n\n<p>I'm attempting to use the daemons gem, however it appears to just skip over the EM runloop and dies at the end of the script.</p>\n\n<p>An example:</p>\n\n<pre><code>require 'daemons'\nrequire 'eventmachine'\nrequire 'logging'\n\nlogger = Logging.logger['DAEMON']\nlogger.level = :debug\n\nlogger.add_appenders \\\n  Logging.appenders.file('logs/daemon.log')\n\nDaemons.daemonize\nFile.open('/tmp/mydaemon.pid', 'w') { |f| f.puts(Process.pid) }\n\nEM.run {\n  EM.add_periodic_timer(1) { logger.info \"I'm logging in a daemon\" }\n}\n</code></pre>\n\n<p>I've also tried doing it in Daemon.run or Process.daemon, with no better luck. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 3783721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/33iSb.png?s=128&g=1", "display_name": "Zal&#225;n J&#243;zsa", "link": "https://stackoverflow.com/users/3783721/zal%c3%a1n-j%c3%b3zsa"}, "edited": false, "score": 0, "creation_date": 1428495005, "post_id": 29514186, "comment_id": 47183953, "body": "Thanks for the quick answer, this fixes it!"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428495378, "post_id": 29514186, "comment_id": 47184210, "body": "You knerr nothing jon snerr"}], "tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": true, "score": 2, "last_activity_date": 1428494907, "creation_date": 1428494907, "answer_id": 29514186, "question_id": 29513991, "link": "https://stackoverflow.com/questions/29513991/actioncontrollerurlgenerationerror-in-postsindex/29514186#29514186", "title": "ActionController::UrlGenerationError in Posts#index", "body": "<p>noting like <code>@post</code> is defined in your <strong>_comment.html.erb</strong>.\nyou have to do like this,</p>\n\n<pre><code>&lt;%= link_to \"delete\", post_comment_path(comment.post.id, comment.id), method: :delete, data: { confirm: \"Are you sure?\" } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 3783721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/33iSb.png?s=128&g=1", "display_name": "Zal&#225;n J&#243;zsa", "link": "https://stackoverflow.com/users/3783721/zal%c3%a1n-j%c3%b3zsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 1, "accepted_answer_id": 29514186, "answer_count": 1, "score": -1, "last_activity_date": 1428494907, "creation_date": 1428494342, "question_id": 29513991, "link": "https://stackoverflow.com/questions/29513991/actioncontrollerurlgenerationerror-in-postsindex", "title": "ActionController::UrlGenerationError in Posts#index", "body": "<p>I'm trying to link to the delete method of a nested route inside the index page but I'm getting the following error:</p>\n\n<blockquote>\n  <p>No route matches {:action=>\"show\", :controller=>\"comments\", :id=>\"1\",\n  :post_id=>nil} missing required keys: [:post_id]</p>\n</blockquote>\n\n<p>Here is the code:</p>\n\n<p><strong>show.html.erb</strong> </p>\n\n<pre><code>&lt;p&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Content:&lt;/strong&gt;\n  &lt;%= @post.content %&gt;\n&lt;/p&gt;\n\n&lt;div id=\"comments_wrapper\"&gt;\n    &lt;%= render @post.comments %&gt;\n    &lt;div id=\"form\"&gt;\n        &lt;%= render \"comments/form\",  %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;%= link_to 'Edit', edit_post_path(@post) %&gt;\n&lt;%= link_to 'Back', posts_path %&gt;\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt;\n    &lt;%= f.text_field :content, placeholder: \"New Comment\" %&gt;\n    &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>_comment.html.erb</strong></p>\n\n<pre><code>&lt;p&gt;&lt;%= comment.content %&gt;&lt;/p&gt;\n#the line below gives me the error.\n&lt;%= link_to \"delete\", post_comment_path(@post, comment.id), method: :delete, data: { confirm: \"Are you sure?\" } %&gt;\n</code></pre>\n\n<p>This works well, but when I try to display the same thing on the index page I get the error form the <strong>_comment.html.erb</strong>.</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;h2&gt;Posts&lt;/h2&gt;\n    &lt;% @posts.each do |post| %&gt;\n        &lt;%= post.content %&gt;\n        &lt;%= link_to 'Show', post %&gt;\n        &lt;%= link_to 'Edit', edit_post_path(post) %&gt;\n        &lt;%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n        &lt;br&gt;\n\n        &lt;div id=\"comments_wrapper\"&gt;\n            &lt;%= render post.comments %&gt;\n            &lt;div id=\"form\"&gt;\n                &lt;%= render \"comments/form\" %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;br&gt;\n&lt;%= link_to 'New Post', new_post_path %&gt;\n</code></pre>\n\n<p>How do I need to change my code so I can display the delete button on the index page?</p>\n\n<p>Here is the rest of my code:</p>\n\n<pre><code>  #routes.rb\n  resources :posts  do\n    resources :comments\n  end\n  #post.rb\n  has_many :comments\n  #comment.rb\n  belongs_to :post\n\n\n  #comments_controller.rb\n  before_action :set_post\n\n  def create\n    @comment = @post.comments.create(comment_params)\n    redirect_to @post\n  end\n\n  def destroy\n    @comment = @post.comments.find(params[:id])\n    if @comment.destroy\n      flash[:success] = \"Comment was deleted.\"\n    else\n      flash[:error] = \"Comment could not be deleted.\"\n    end\n    redirect_to @post\n  end\n\n  private\n\n  def set_post\n    @post = Post.find(params[:post_id])\n  end\n\n  def comment_params\n    params[:comment].permit(:content)\n  end\n</code></pre>\n\n<hr>\n\n<pre><code>#posts_controller.rb\nbefore_action :set_post, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @posts = Post.all\n  end\n\n  def show\n  end\n\n  def new\n    @post = Post.new\n  end\n\n  def edit\n  end\n\n  def create\n    @post = Post.new(post_params)\n\n    respond_to do |format|\n      if @post.save\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\n        format.json { render :show, status: :created, location: @post }\n      else\n        format.html { render :new }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @post.update(post_params)\n        format.html { redirect_to @post, notice: 'Post was successfully updated.' }\n        format.json { render :show, status: :ok, location: @post }\n      else\n        format.html { render :edit }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @post.destroy\n    respond_to do |format|\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    def set_post\n      @post = Post.find(params[:id])\n    end\n\n    def post_params\n      params.require(:post).permit(:content)\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428495741, "post_id": 29513903, "comment_id": 47184482, "body": "The default behaviour is to see if there is a plaintext template and an html template.  If there are both then it makes a multipart email, with each part set from the corresponding template.  If there is just one, it doesn&#39;t make it multipart."}, {"owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428498079, "post_id": 29513903, "comment_id": 47186154, "body": "This is exactly what I though. We do have both a plain text and html version so I assume it is sending a multipart email. However the client does not seem to read it as HTML and instead has a content type of text/plain. BTW I am using Apple Mail as the client with html emails enabled."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1428499684, "post_id": 29513903, "comment_id": 47187302, "body": "The best way to look at the email is to log it out, and view it in the log.  It should have <code>Content-Type: multipart&#47;alternative; boundary=mimepart_&lt;random_string_of_chars&gt;</code> near the top, and then several sections, seperated by  <code>--mimepart_&lt;the_same_random_string_of_chars&gt;</code>"}, {"owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428501250, "post_id": 29513903, "comment_id": 47188539, "body": "Thanks @MaxWillians. This is what I ended up doing. The Content-Type was set to text/pain for some reason so I had to explicitly set it to multipart/alternative before delivering"}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 896860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d23c5b0b6de413d99702767d1d148d?s=128&d=identicon&r=PG", "display_name": "HiteshRawal", "link": "https://stackoverflow.com/users/896860/hiteshrawal"}, "is_accepted": false, "score": 2, "last_activity_date": 1428494941, "creation_date": 1428494941, "answer_id": 29514199, "question_id": 29513903, "link": "https://stackoverflow.com/questions/29513903/default-rails-actionmailer-not-delivering-multipart-emails-correctly/29514199#29514199", "title": "Default Rails ActionMailer not delivering multipart emails correctly", "body": "<p>Yes, Action Mailer automatically send multipart emails if you have different templates for the same action.</p>\n\n<p>But if this is not the case then you can also pass content-type along with parameter to mail.\nfor eg.</p>\n\n<pre><code>def order_receipt(order)\n  @order = order\n  mail(content_type: \"text/html\", subject: \"Order #{order.id}\")\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "is_accepted": true, "score": 3, "last_activity_date": 1428498838, "creation_date": 1428498838, "answer_id": 29515691, "question_id": 29513903, "link": "https://stackoverflow.com/questions/29513903/default-rails-actionmailer-not-delivering-multipart-emails-correctly/29515691#29515691", "title": "Default Rails ActionMailer not delivering multipart emails correctly", "body": "<p>Strangely I had to specify that the content type would be multipart:</p>\n\n<pre><code>mail content_type: 'multipart/alternative', subject: \"Order #{order.id}\"\n</code></pre>\n\n<p>This fixed the issue immediately. I find it very strange that Rails has to be told this. Bug perhaps in the version I am using?</p>\n"}], "owner": {"reputation": 1489, "user_id": 1613695, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/49b5b3b9873e3060bff7244940fed930?s=128&d=identicon&r=PG", "display_name": "tomasbasham", "link": "https://stackoverflow.com/users/1613695/tomasbasham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 29515691, "answer_count": 2, "score": 3, "last_activity_date": 1428498838, "creation_date": 1428494120, "question_id": 29513903, "link": "https://stackoverflow.com/questions/29513903/default-rails-actionmailer-not-delivering-multipart-emails-correctly", "title": "Default Rails ActionMailer not delivering multipart emails correctly", "body": "<p>I have created, what I thought to be, a MultiPart email using rails but upon delivery to any client it is only ever shown in plain text therefore printing out the headers and all the templating.</p>\n\n<pre><code>def order_receipt(order)\n  @order = order\n  mail subject: \"Order #{order.id}\"\nend\n\nOrderMailer.order_receipt(Order.first).deliver\n</code></pre>\n\n<p>The email I receive in the clients is as such:</p>\n\n<pre><code>----==_mimepart_5525126014929_7e3f9b4c1fb98c525c2 Content-Type: text/plain; charset=UTF-8 Content-Transfer-Encoding: etc...\n</code></pre>\n\n<p>And then just boxes and text where styled content should be.</p>\n\n<p>Do I need to explicitly set the formats in the mailer like so:</p>\n\n<pre><code>def order_receipt(order)\n  @order = order\n  mail subject: \"Order #{order.id}\" do |format|\n    format.text\n    format.html\n  end\nend\n</code></pre>\n\n<p>because I thought that was the default ActionMailer behaviour</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2211, "user_id": 4499267, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dflOT.png?s=128&g=1", "display_name": "Phate01", "link": "https://stackoverflow.com/users/4499267/phate01"}, "edited": false, "score": 0, "creation_date": 1428494811, "post_id": 29513857, "comment_id": 47183815, "body": "It&#39;s not clear what you&#39;re asking"}, {"owner": {"reputation": 806, "user_id": 2057928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d54eb9311d61feb3e8ba4b597ea71?s=128&d=identicon&r=PG", "display_name": "RPinel", "link": "https://stackoverflow.com/users/2057928/rpinel"}, "edited": false, "score": 1, "creation_date": 1428498406, "post_id": 29513857, "comment_id": 47186388, "body": "If you were using Rails 4, you could use <code>concern</code> in your <code>routes.rb</code>. <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Concerns.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1428496481, "creation_date": 1428496481, "answer_id": 29514776, "question_id": 29513857, "link": "https://stackoverflow.com/questions/29513857/how-can-code-duplication-be-avoided-in-rails-routes/29514776#29514776", "title": "How can code duplication be avoided in Rails routes?", "body": "<p>You can organize your routes file so as to keep it from becoming a massive, unmanageable mess. But, it's not via Concerns ... it's actually more \"basic\" than that. Just break up the files and include them in the main routes file :). </p>\n\n<p>I read a good post on this a while back: <a href=\"http://blog.arkency.com/2015/02/how-to-split-routes-dot-rb-into-smaller-parts/\" rel=\"nofollow\">splitting routes,rb into smaller parts</a></p>\n\n<p>Hope it helps. </p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 4765567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mw5eKkatU2Q/AAAAAAAAAAI/AAAAAAAAAGA/evVjOm1_v3M/photo.jpg?sz=128", "display_name": "Kent Dahl", "link": "https://stackoverflow.com/users/4765567/kent-dahl"}, "is_accepted": false, "score": 0, "last_activity_date": 1428524035, "creation_date": 1428524035, "answer_id": 29524470, "question_id": 29513857, "link": "https://stackoverflow.com/questions/29513857/how-can-code-duplication-be-avoided-in-rails-routes/29524470#29524470", "title": "How can code duplication be avoided in Rails routes?", "body": "<p>I've used procs for this myself. Then I just call it in each namespace or resource block where I need it. </p>\n\n<p>But concerns are likely a better and more readable solution. </p>\n"}], "owner": {"reputation": 13, "user_id": 4701010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd66f47404862e5e143a6291ca88e45?s=128&d=identicon&r=PG&f=1", "display_name": "rohan", "link": "https://stackoverflow.com/users/4701010/rohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29514776, "answer_count": 2, "score": 0, "last_activity_date": 1428738248, "creation_date": 1428494011, "last_edit_date": 1428738248, "question_id": 29513857, "link": "https://stackoverflow.com/questions/29513857/how-can-code-duplication-be-avoided-in-rails-routes", "title": "How can code duplication be avoided in Rails routes?", "body": "<p>I have many resources in <code>routes.rb</code> where many few resources are used and repeated.<br>\n<em>Is there a way to avoid code duplication?</em></p>\n\n<pre><code>  resources :pages do\n    resources :comments\n    ##other routes \n    member { post :vote }   \n  end \n  resources :videos do\n    resources :comments\n    ##other routes\n    member { post :vote }   \n  end \n  resources :images do\n    resources :comments\n    ##other routes \n    member { post :vote }   \n  end \n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "ruby-on-rails-4.1"], "comments": [{"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1428491520, "post_id": 29512717, "comment_id": 47181717, "body": "Do you mean to ask that you want to have two <code>selects</code> in an HTML form. And choosing a particular country will populate the other select with the sub regions of that specific country?"}, {"owner": {"reputation": 849, "user_id": 2739770, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e563039c73c1cf486c99260caf4694c8?s=128&d=identicon&r=PG&f=1", "display_name": "Dinshaw Raje", "link": "https://stackoverflow.com/users/2739770/dinshaw-raje"}, "reply_to_user": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1428492126, "post_id": 29512717, "comment_id": 47182114, "body": "yeah exactly i need this."}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1428492196, "post_id": 29512717, "comment_id": 47182158, "body": "But I didn&#39;t understand why the helper is named &quot;only_us_and_canada&quot;"}, {"owner": {"reputation": 849, "user_id": 2739770, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e563039c73c1cf486c99260caf4694c8?s=128&d=identicon&r=PG&f=1", "display_name": "Dinshaw Raje", "link": "https://stackoverflow.com/users/2739770/dinshaw-raje"}, "reply_to_user": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1428492300, "post_id": 29512717, "comment_id": 47182219, "body": "Its just a name of a helper."}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1428607439, "post_id": 29512717, "comment_id": 47245893, "body": "re organize thoughts"}], "answers": [{"tags": [], "owner": {"reputation": 849, "user_id": 2739770, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e563039c73c1cf486c99260caf4694c8?s=128&d=identicon&r=PG&f=1", "display_name": "Dinshaw Raje", "link": "https://stackoverflow.com/users/2739770/dinshaw-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1428560626, "last_edit_date": 1428560626, "creation_date": 1428560088, "answer_id": 29531093, "question_id": 29512717, "link": "https://stackoverflow.com/questions/29512717/using-carmen-gem-with-rails/29531093#29531093", "title": "Using carmen gem with rails", "body": "<p>I have solved this by :</p>\n\n<p><strong>Step1: Generated migration</strong></p>\n\n<pre><code>rails g migration addStateCodeFieldToAccounts state_code:string\n</code></pre>\n\n<p><strong>Step2: Define a method inside controller</strong></p>\n\n<pre><code>def subregion_options\n    render partial: 'subregion_select'\nend\n</code></pre>\n\n<p><strong>Step3: Declare in routes</strong></p>\n\n<pre><code>resources :accounts do\n    collection do\n      get 'subregion_options'\n    end\n  end\n</code></pre>\n\n<p><strong>Step4: In view</strong></p>\n\n<pre><code>&lt;div class=\"input-control select state_input\" data-role=\"input-control\"&gt;\n   &lt;%= f.select :country, region_options_for_select(only_us_and_france) %&gt;\n&lt;/div&gt;\n&lt;div class=\"input-control select state_input\" data-role=\"input-control\"&gt;\n  &lt;%= render partial: 'subregion_select', locals: {parent_region: f.object.country} %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Step5: Make partial subregion_select</strong> </p>\n\n<pre><code>&lt;div id=\"account_state_code_wrapper\"&gt;\n  &lt;% parent_region ||= params[:parent_region] %&gt;\n  &lt;% country = Carmen::Country.coded(parent_region) %&gt;\n\n  &lt;% if country.nil? %&gt;\n    &lt;em&gt;Please select a country above&lt;/em&gt;\n  &lt;% elsif country.subregions? %&gt;\n    &lt;%= subregion_select(:order, :state_code, parent_region) %&gt;\n  &lt;% else %&gt;\n    &lt;%= text_field(:order, :state_code) %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Step6: In my js file written this</strong></p>\n\n<pre><code> $('select#account_detail_country').change(function(){\n    selectWrapper = $('#account_state_code_wrapper')\n    countryCode = $(this).val()\n    url = \"/account_details/subregion_options?parent_region=\"+countryCode\n    console.log(url)\n    selectWrapper.load(url)\n  });\n</code></pre>\n\n<p>yeah and it works :) Hope this will help you.</p>\n"}], "owner": {"reputation": 849, "user_id": 2739770, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e563039c73c1cf486c99260caf4694c8?s=128&d=identicon&r=PG&f=1", "display_name": "Dinshaw Raje", "link": "https://stackoverflow.com/users/2739770/dinshaw-raje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433406058, "creation_date": 1428490573, "last_edit_date": 1433406058, "question_id": 29512717, "link": "https://stackoverflow.com/questions/29512717/using-carmen-gem-with-rails", "title": "Using carmen gem with rails", "body": "<p>What I am trying to do is show the 2 letter abbreviation code of the countries, i.e 'US'.</p>\n\n<p>After the country is selected I need to show its state or province.\nbut I am having a problem. </p>\n\n<p>My code looks like </p>\n\n<pre><code>&lt;%= f.select :country_code, region_options_for_select(only_us_and_france) %&gt;\n</code></pre>\n\n<p>and define this in helper:</p>\n\n<pre><code>def only_us_and_france\n    Carmen::Country.all.select{|c| %w{US FR}.include?(c.code)}\nend\n</code></pre>\n\n<p>I am using Rails 4.1.0.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "edited": false, "score": 0, "creation_date": 1428493588, "post_id": 29512277, "comment_id": 47183009, "body": "I don&#39;t think it&#39;s hacky and besides, you&#39;re only going to run this loop once so I don&#39;t think it matters anyway."}], "answers": [{"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1428492144, "post_id": 29513028, "comment_id": 47182125, "body": "It&#39;s that easy? Awesome. Thanks so much."}], "tags": [], "owner": {"reputation": 497, "user_id": 1393798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOlGB.jpg?s=128&g=1", "display_name": "Alexaner Tipugin", "link": "https://stackoverflow.com/users/1393798/alexaner-tipugin"}, "is_accepted": true, "score": 1, "last_activity_date": 1428493577, "last_edit_date": 1428493577, "creation_date": 1428491586, "answer_id": 29513028, "question_id": 29512277, "link": "https://stackoverflow.com/questions/29512277/rails-4-changing-model-from-activerecord-to-sti/29513028#29513028", "title": "Rails 4: changing model from ActiveRecord to STI", "body": "<p>You can access your articles with raw sql query like this:</p>\n\n<pre><code>ActiveRecord::Base.connection.execute('SELECT * FROM articles').each do |article|\n  # article is basically a hash of attributes (i.e. article['title'])\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1428493744, "post_id": 29513645, "comment_id": 47183120, "body": "The logic here makes sense but ideally I&#39;d rather not have to deploy to production, run a loop with a temporary codebase, and redeploy again just to get the data correct. Seems very dangerous to me, especially since my deploy time is around 15 minutes."}, {"owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1428493994, "post_id": 29513645, "comment_id": 47183284, "body": "Why would you need to temporarily deploy? <code>rails c production</code> to start console within production database. Run the above loop to convert. Deploy STI enabled code."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1428494333, "post_id": 29513645, "comment_id": 47183486, "body": "Ah, of course! Don&#39;t know what I was thinking there. That totally makes sense. Thanks!"}], "tags": [], "owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "is_accepted": false, "score": 1, "last_activity_date": 1428493399, "creation_date": 1428493399, "answer_id": 29513645, "question_id": 29512277, "link": "https://stackoverflow.com/questions/29512277/rails-4-changing-model-from-activerecord-to-sti/29513645#29513645", "title": "Rails 4: changing model from ActiveRecord to STI", "body": "<p>If I understand correctly, you have existing <code>EditedArticle</code> models in your database within the <code>edited_articles</code> table and you're trying to convert those to <code>Component</code> models with a type of <code>EditedArticle</code>.</p>\n\n<p>If so, you can temporarily keep <code>EditedArticle &lt; ActiveRecord::Base</code> until you've ran the loop and converted the existing <code>EditedArticle</code> models to <code>Component</code> models with type <code>EditedArticle</code>, at which point you can delete the existing <code>edited_articles</code> table and change the model to <code>EditedArticle &lt; Component</code> to enable STI.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 29513028, "answer_count": 2, "score": 0, "last_activity_date": 1428493577, "creation_date": 1428489263, "question_id": 29512277, "link": "https://stackoverflow.com/questions/29512277/rails-4-changing-model-from-activerecord-to-sti", "title": "Rails 4: changing model from ActiveRecord to STI", "body": "<p>I'm trying to change a model type from <code>ActiveRecord::Base</code> to an STI architecture. I'm writing a loop to create everything I need like so:</p>\n\n<pre><code>EditedArticle.each do |e|\n  c = Component.create(name: e.name, body: e.body, type: 'EditedArticle', user_id: e.user_id, state: e.state, description: e.description, cover_id: e.cover_id)\n  e.publication.update_attribute(:component_id, c.id)\nend\n</code></pre>\n\n<p>I need to run this loop so that <code>EditedArticle</code> changes from its own table to a subtype of <code>Component</code>. Is this loop going to work? Already the class begins like this:</p>\n\n<pre><code>class EditedArticle &lt; Component\n  ...\n</code></pre>\n\n<p>So potentially <code>EditedArticle.each</code> will return nothing. Do I need to keep <code>EditedArticle &lt; ActiveRecord::Base</code> until after this loop is done? Is there a better way to do this? This seems awfully hacky.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "destroy"], "comments": [{"owner": {"reputation": 9917, "user_id": 100342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af270ac26bf744c2ef2534a138bf7f67?s=128&d=identicon&r=PG", "display_name": "janfoeh", "link": "https://stackoverflow.com/users/100342/janfoeh"}, "edited": false, "score": 0, "creation_date": 1428489318, "post_id": 29512263, "comment_id": 47180202, "body": "How does it not work? What happens instead?"}, {"owner": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "edited": false, "score": 0, "creation_date": 1428489558, "post_id": 29512263, "comment_id": 47180362, "body": "plz show me your log contents, after clicked on the destroy action."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1428489570, "post_id": 29512263, "comment_id": 47180371, "body": "Look in your log.  Is the right action being called?  Look at the params being passed through.  Do they match what is expected by the code in the action?  Step through the code in the action, with the params.  What happens when you save the object?  Does save fail, and return false?  If so, are there validation failures?  If any of these questions reveal something unexpected happening, you can try to work out why.  That&#39;s your strategy."}, {"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "edited": false, "score": 2, "creation_date": 1428490405, "post_id": 29512263, "comment_id": 47180953, "body": "It looks you don&#39;t include any javascript code in tag <code>javascript_include_tag</code> it is necessary for sending proper DELETE request via link <code>&lt;a&gt;</code> tag."}, {"owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "edited": false, "score": 0, "creation_date": 1428500876, "post_id": 29512263, "comment_id": 47188268, "body": "Hate to ask the obvious, but where is your controller code?"}, {"owner": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "reply_to_user": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "edited": false, "score": 0, "creation_date": 1428909431, "post_id": 29512263, "comment_id": 47345725, "body": "@Udaykumardas: how can i get the log contents. I am a newbie still trying to learn ruby on rails. edariedl: i figured that out that the javascript is absent, i dont know why it happens since it already has the javascipt include tag. @ Matt As to the controller code where can i find it?"}, {"owner": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "edited": false, "score": 0, "creation_date": 1428909627, "post_id": 29512263, "comment_id": 47345820, "body": "for getting js logs you should <code>F12</code> key in the browser and  the select <code>Network</code> and the click on the destroy and send me the error logs."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "edited": false, "score": 0, "creation_date": 1428995989, "post_id": 29602285, "comment_id": 47386684, "body": "indeed, they are included, however none of the javascript is shown in html only the css files"}, {"owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "reply_to_user": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "edited": false, "score": 0, "creation_date": 1428999780, "post_id": 29602285, "comment_id": 47388675, "body": "@user3108623 do you have <code>therubyracer</code> inside your Gemfile?"}, {"owner": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "edited": false, "score": 0, "creation_date": 1429088172, "post_id": 29602285, "comment_id": 47432049, "body": "i have and it is commented out."}, {"owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "reply_to_user": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "edited": false, "score": 0, "creation_date": 1429091415, "post_id": 29602285, "comment_id": 47434058, "body": "Uncomment it, run <code>bundle install</code> and reload the server. Check if you have the same problems."}, {"owner": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "edited": false, "score": 0, "creation_date": 1429099102, "post_id": 29602285, "comment_id": 47438973, "body": "i ran it. the problem does not seem to be therubyracer per se. i now get a javascript file in head but when i click on it i get: <code>Routing Error: No route matches [GET] &quot;&#47;javascripts&#47;default.js&quot;</code>"}, {"owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "reply_to_user": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "edited": false, "score": 0, "creation_date": 1429103149, "post_id": 29602285, "comment_id": 47441763, "body": "@user3108623 change <code>&lt;%= javascript_include_tag &#39;default&#39;, &#39;data-turbolinks-track&#39; =&gt; true %&gt;</code> to <code>&lt;%= javascript_include_tag :default, &#39;data-turbolinks-track&#39; =&gt; true %&gt;</code> and you should be good to go."}], "tags": [], "owner": {"reputation": 11796, "user_id": 1942551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97a80fd6531adf0db0c3bc9c7c11a8ea?s=128&d=identicon&r=PG", "display_name": "karlingen", "link": "https://stackoverflow.com/users/1942551/karlingen"}, "is_accepted": false, "score": 0, "last_activity_date": 1428918279, "creation_date": 1428918279, "answer_id": 29602285, "question_id": 29512263, "link": "https://stackoverflow.com/questions/29512263/ruby-on-rails-unable-to-delete-destroy/29602285#29602285", "title": "ruby on rails - unable to delete (destroy)", "body": "<p>Inside <code>application.erb</code>, you need to include your <code>application.js</code> file with  <code>javascript_include_tag</code> like this:</p>\n\n<pre><code>&lt;%= javascript_include_tag 'application' %&gt;\n</code></pre>\n\n<p>Assuming you have <code>jquery</code> and <code>jquery_ujs</code> set inside your <code>application.js</code></p>\n"}], "owner": {"reputation": 77, "user_id": 3108623, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fc71a1cdb0e6f1e52553cb1e8d6209fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3108623", "link": "https://stackoverflow.com/users/3108623/user3108623"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452248053, "creation_date": 1428489214, "last_edit_date": 1495540746, "question_id": 29512263, "link": "https://stackoverflow.com/questions/29512263/ruby-on-rails-unable-to-delete-destroy", "title": "ruby on rails - unable to delete (destroy)", "body": "<p>I am unable to delete a record in ruby on rails for some reason.\nI have tried many solutions unfortunately to no avail. (such as <a href=\"https://stackoverflow.com/questions/29313970/how-to-delete-destroy-a-record-in-rails\">How to delete / destroy a record in rails?</a>)</p>\n\n<p><strong>The contents of my <code>application.erb</code> are:</strong> </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>when i open in html it only displays the following css it does not display js as in the tags above.</p>\n\n<pre><code>&lt;link data-turbolinks-track=\"true\" href=\"/assets/scaffolds.css?body=1\" media=\"all\" rel=\"stylesheet\" /&gt;\n&lt;link data-turbolinks-track=\"true\" href=\"/assets/statuses.css?body=1\" media=\"all\" rel=\"stylesheet\" /&gt;\n&lt;link data-turbolinks-track=\"true\" href=\"/assets/application.css?body=1\" media=\"all\" rel=\"stylesheet\" /&gt;\n</code></pre>\n\n<p><strong>for my <code>index.html.erb</code></strong></p>\n\n<pre><code> &lt;h1&gt;Listing statuses&lt;/h1&gt;\n\n    &lt;table&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;Name&lt;/th&gt;\n          &lt;th&gt;Content&lt;/th&gt;\n          &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n\n      &lt;tbody&gt;\n        &lt;% @statuses.each do |status| %&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;%= status.name %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= status.content %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= status.id %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'Show', status %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'Edit', edit_status_path(status) %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'Destroy', status , method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;% end %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n\n    &lt;br&gt;\n\n    &lt;%= link_to 'New Status', new_status_path %&gt;\n</code></pre>\n\n<p>i am troubleshooting this currently to no avail, if someone can pick any faults in this code, i would greatly appreciate. :) \nthe js files are not showing  in the head section of the page and the destroy function is not working, let alone the confirm tag.</p>\n\n<p><strong>Update</strong>: Now I am getting this error: </p>\n\n<p>TypeError: Object doesn't support this property or method\nRails.root: [location] </p>\n\n<p>if i remove the '<code>&lt;%= javascript_include_tag %&gt;</code>' it functions, although not fully (ie. does not delete like in the first instance)</p>\n\n<p><strong>update 2</strong> when i click on destroy button, it simply redirects me to view that particular status only, it does not destroy</p>\n\n<p><strong>update 3</strong> inside the <strong><code>application.js</code></strong> i have the following:</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p><strong>update 4</strong> I have changed the <code>&lt;%= javascript_include_tag %&gt;</code> to <code>&lt;%= javascript_include_tag 'default', 'data-turbolinks-track' =&gt; true %&gt;</code> and it loads the js file however when i click on that js file from the sourcecode i get a routing error.\nAny possible way i can solve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "relationship"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1428489169, "post_id": 29512198, "comment_id": 47180106, "body": "Or if <code>user_type</code> is <code>normal</code> then ?"}], "answers": [{"comments": [{"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1428490711, "post_id": 29512302, "comment_id": 47181167, "body": "hi @Arup,  I found a problem... Defining this way, my test passes... but there are a error: it is trying to build the select like this: <code>SELECT  &quot;departments&quot;.* FROM &quot;departments&quot; WHERE &quot;departments&quot;.&quot;id&quot; = $1 AND &quot;departments&quot;.&quot;user_type&quot; = &#39;admin&#39; LIMIT 1</code>"}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1428490881, "post_id": 29512302, "comment_id": 47181293, "body": "note that <code>user_type</code> column exists only on USer table and not on Department table"}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1428491444, "post_id": 29512302, "comment_id": 47181658, "body": "doent work. <code>SELECT  &quot;departments&quot;.* FROM &quot;departments&quot; WHERE &quot;departments&quot;.&quot;id&quot; = $1 AND (users.user_type = &#39;admin&#39;) LIMIT 1</code>"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1428491571, "post_id": 29512302, "comment_id": 47181762, "body": "what&#39;s the column datatype of <code>user_type</code> ?"}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1428491611, "post_id": 29512302, "comment_id": 47181783, "body": "user_type is integer."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 1, "creation_date": 1428492024, "post_id": 29512302, "comment_id": 47182055, "body": "@P.Santos did you try <code>{ where &quot;users.user_type = ?&quot;, 0 }</code>?"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1428499418, "last_edit_date": 1428499418, "creation_date": 1428489324, "answer_id": 29512302, "question_id": 29512198, "link": "https://stackoverflow.com/questions/29512198/create-scoped-relationship-with-rails-4/29512302#29512302", "title": "Create scoped relationship with Rails 4", "body": "<p>You can use <em>scope</em> like :</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  enum user_type: [:admin, :normal]\n  belongs_to :department, -&gt; { joins(:users).where(\"users.user_type = ?\", 0) }\nend\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow\"><em>Associations</em> are built from <code>Relations</code></a>, and you can use the <code>Relation</code> syntax to customise them. Inside the <code>-&gt; { ... }</code> block you can use all of the usual <code>Relation</code> methods.</p>\n"}], "owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 29512302, "answer_count": 1, "score": 0, "last_activity_date": 1428499418, "creation_date": 1428489068, "last_edit_date": 1428489196, "question_id": 29512198, "link": "https://stackoverflow.com/questions/29512198/create-scoped-relationship-with-rails-4", "title": "Create scoped relationship with Rails 4", "body": "<p>I have two models in Rails:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    enum user_type: [:admin, :normal] \nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Department &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Inclusive I wrote the following Rspec test:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe User, :type =&gt; :model do\n    it { should belong_to(:department).conditions(user_type: :admin)}\nend\n</code></pre>\n\n<p>What I need and I dont know how, is to implement this. How can I create relationship between two models based on their type?</p>\n\n<p>in other words, how can make this relation only with users with type \"admin\"?</p>\n\n<p>The link or similar questions I saw, does not work for me, the test still fail</p>\n"}, {"tags": ["mysql", "ruby", "csv", "activerecord", "rubygems"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428488630, "post_id": 29511897, "comment_id": 47179753, "body": "does your csv file have headers?"}, {"owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428488728, "post_id": 29511897, "comment_id": 47179821, "body": "No i am not using @shivam"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1428489667, "post_id": 29511897, "comment_id": 47180445, "body": "just to be clear, are these both <code>CSV.foreach</code> part of same file?"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "edited": false, "score": 0, "creation_date": 1428491519, "post_id": 29512151, "comment_id": 47181715, "body": "suggest me some links and books for changing my designation to <b>Programmer</b> from <b>Beginner</b>"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "edited": false, "score": 0, "creation_date": 1428495090, "post_id": 29512151, "comment_id": 47184014, "body": "I am a learner myself. Best I can advice is keep writing codes and google/SO when stuck. :)"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 0, "last_activity_date": 1428490543, "last_edit_date": 1428490543, "creation_date": 1428488953, "answer_id": 29512151, "question_id": 29511897, "link": "https://stackoverflow.com/questions/29511897/how-to-retrieve-column-value-from-table1-and-keep-it-in-table2s-column/29512151#29512151", "title": "How to retrieve column value from table1 and keep it in table2&#39;s column?", "body": "<p>Assuming <code>Employee</code> does not contain enormous amount of data, you can do this:</p>\n\n<pre><code>employees = Employee.all\nCSV.foreach('C:/Users/modi/Desktop/designation.csv') do |row|\n  Designation.create!(\n    :Emp_id =&gt; employees.detect { |emp| emp.name == row[0] }.id # handle nil case\n    :name =&gt; row[0],\n    :designation=&gt;row[1]\n  )           \nend\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 29512151, "answer_count": 1, "score": -1, "last_activity_date": 1428490543, "creation_date": 1428488264, "last_edit_date": 1428488291, "question_id": 29511897, "link": "https://stackoverflow.com/questions/29511897/how-to-retrieve-column-value-from-table1-and-keep-it-in-table2s-column", "title": "How to retrieve column value from table1 and keep it in table2&#39;s column?", "body": "<p>Table_1:</p>\n\n<pre><code>ID |   Name    | Address\n1  |  prakash  | 2-107, NY\n2  |  rakesh   | 2-109/a, NY\n</code></pre>\n\n<p>Table_2:</p>\n\n<pre><code>emp_ID| Name    | Designation\n   ?  | Prakash | Software Developer\n   ?  | Rakesh  | Software Tester\n</code></pre>\n\n<p>By using the Name column in the table-2, I need to get the id from the table-1 and place it in the table-2.</p>\n\n<pre><code>require 'csv'\nload 'dbconnection.rb'\nrequire 'activerecord'\n\n\nclass Employee&lt;ActiveRecord::Base\n\nend\n\nclass Designation&lt;ActiveRecord::Base\nend\n\n#Employee  Table Data Insertion\nCSV.foreach(\"C:/Users/modi/Desktop/employee.csv\") do |row|\n    Employee.create!(\n        # ID will be auto increement \n        :name =&gt; row[0],\n        :address =&gt; row[1],\n        )\n    end\n\n\n#Designation Table Data Insertion\n\nCSV.foreach('C:/Users/modi/Desktop/designation.csv') do |row|\n\n    Designation.create!(\n        :Emp_id #Here we need to get the id value from the Employee Table\n        :name =&gt; row[0],\n        :designation=&gt;row[1]\n        )           \n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 3296, "user_id": 476270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba93c0a07d2caa804c0d4874e7fac0e?s=128&d=identicon&r=PG", "display_name": "alno", "link": "https://stackoverflow.com/users/476270/alno"}, "is_accepted": true, "score": 0, "last_activity_date": 1428494158, "last_edit_date": 1428494158, "creation_date": 1428488912, "answer_id": 29512133, "question_id": 29511862, "link": "https://stackoverflow.com/questions/29511862/how-to-put-this-specific-constructor-into-a-factorygirl-object/29512133#29512133", "title": "How to put this specific constructor into a FactoryGirl object?", "body": "<p>In your code <code>user</code> is called in the context of factory definition, which doesn't have such method. You need to call <code>user</code> on object actually being built, picture. </p>\n\n<p>To do so, you should wrap computed values in blocks:</p>\n\n<pre><code>factory :picture do\n  store_dir { user.get_user_medias_path }\n  remote_url { \"http://lorempixel.com/600/600/animals/internet#{user.id}/\" }\n  association :user     \nend\n</code></pre>\n\n<p>See <a href=\"https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#lazy-attributes\" rel=\"nofollow\">lazy</a> and <a href=\"https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#dependent-attributes\" rel=\"nofollow\">dependent</a> attributes in docs.</p>\n"}], "owner": {"reputation": 197, "user_id": 4542899, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46b9e936a41bc6054998c5d4098b0ae9?s=128&d=identicon&r=PG", "display_name": "MrHello", "link": "https://stackoverflow.com/users/4542899/mrhello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 29512133, "answer_count": 1, "score": 0, "last_activity_date": 1428494158, "creation_date": 1428488154, "question_id": 29511862, "link": "https://stackoverflow.com/questions/29511862/how-to-put-this-specific-constructor-into-a-factorygirl-object", "title": "How to put this specific constructor into a FactoryGirl object?", "body": "<p>I am trying to put that creation code into a FactoryGirl. </p>\n\n<p>So basically here, you can see my class User has a Method to create a Picture from his informations, id, created_at, etc....</p>\n\n<p>.</p>\n\n<pre><code>class User \nhas_many :pictures\n\ndef create_picture\n    picture = Picture.new(\n        user_id: self.id,\n        store_dir: get_user_medias_path,\n    )\n    picture.save!\n    picture\nend\n\ndef get_user_media_path\n   \"u/#{self.id}/#{self.created_at}\nend\n\n\nend\n</code></pre>\n\n<p>so then I tried to put that into a FactoryGirl object, this looked as follow</p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do\n    sequence(:name) { |i| \"flav_#{i}\" }\n  end\n\n  factory :picture do\n    store_dir user.get_user_medias_path\n    remote_url \"http://lorempixel.com/600/600/animals/internet#{user.id}/\"\n    association :user     \n  end\nend\n</code></pre>\n\n<p>But as you would expect, he cannot find neither the user.id or the user.method. </p>\n\n<p>How am I supposed to be able to reference the user attribute inside the picture object ?</p>\n\n<p>I am lost. Any help would be more than welcomed. =)</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "limit", "offset"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1542803883, "post_id": 29511743, "comment_id": 93699036, "body": "Eg: If <code>arr = [1,2,3,4,5,6,7,8,9]</code>, then this <code>arr[0..2]</code> would give <code>[1,2,3]</code>, <code>arr[3..5]</code> would give <code>[4,5,6]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 3, "creation_date": 1428488115, "post_id": 29511765, "comment_id": 47179384, "body": "Looks like he&#39;s using a query though, if he is then <code>userposts.offset(15).limit(10)</code> would be better"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1428488174, "post_id": 29511765, "comment_id": 47179430, "body": "@japed You are right.. But from <i>..from all the above three table into a single <b>array</b> called userposts.</i> I can infer what I answered.. :)"}, {"owner": {"reputation": 724, "user_id": 4595811, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gEgiS.jpg?s=128&g=1", "display_name": "sank", "link": "https://stackoverflow.com/users/4595811/sank"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1428488193, "post_id": 29511765, "comment_id": 47179446, "body": "@japed it gives me an error that undefined method &#39;offset&#39; for an Array."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 22, "last_activity_date": 1428487866, "creation_date": 1428487866, "answer_id": 29511765, "question_id": 29511743, "link": "https://stackoverflow.com/questions/29511743/how-to-specify-limit-and-offset-in-array-in-rails/29511765#29511765", "title": "How to specify limit and offset in array in rails?", "body": "<p>You should use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D\"><code>ary[start, length] \u2192 new_ary or nil</code></a> method.</p>\n\n<blockquote>\n  <p>..returns a subarray starting at the <em>start</em> index and continuing for <em>length</em> elements,</p>\n</blockquote>\n\n<pre><code>userposts[10, 15]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 2, "creation_date": 1504874816, "post_id": 29511939, "comment_id": 79195925, "body": "This works on a normal array, not just ActiveRecord relation arrays. :+1:"}], "tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 20, "last_activity_date": 1428488367, "creation_date": 1428488367, "answer_id": 29511939, "question_id": 29511743, "link": "https://stackoverflow.com/questions/29511743/how-to-specify-limit-and-offset-in-array-in-rails/29511939#29511939", "title": "How to specify limit and offset in array in rails?", "body": "<p><code>userposts.drop(15).first(10)</code> will help you</p>\n"}], "owner": {"reputation": 724, "user_id": 4595811, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gEgiS.jpg?s=128&g=1", "display_name": "sank", "link": "https://stackoverflow.com/users/4595811/sank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11225, "favorite_count": 3, "accepted_answer_id": 29511765, "answer_count": 2, "score": 12, "last_activity_date": 1574249872, "creation_date": 1428487797, "last_edit_date": 1574249872, "question_id": 29511743, "link": "https://stackoverflow.com/questions/29511743/how-to-specify-limit-and-offset-in-array-in-rails", "title": "How to specify limit and offset in array in rails?", "body": "<p>I have 3 tables <code>PostText</code>, <code>PostImage</code> and <code>PostVideo</code>.\nNow I am combining data from all the above three table into a single array called <code>userposts</code>.</p>\n\n<p>Now from <code>userposts</code> I want to access only 10 records starting with offset 15.</p>\n\n<p>How can I do that?</p>\n\n<p>I tried out <code>userposts.first(10)</code>. It gives me first 10 records but I want 10 records starting from offset-15.</p>\n\n<p>thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "installation", "rvm"], "comments": [{"owner": {"reputation": 9917, "user_id": 100342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af270ac26bf744c2ef2534a138bf7f67?s=128&d=identicon&r=PG", "display_name": "janfoeh", "link": "https://stackoverflow.com/users/100342/janfoeh"}, "edited": false, "score": 0, "creation_date": 1428488181, "post_id": 29511611, "comment_id": 47179437, "body": "<code>rvm list known</code> shows you all versions of Ruby your current rvm installation knows about. Try updating it: <code>rvm get stable</code>."}, {"owner": {"reputation": 1593, "user_id": 2568343, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7i4CA.jpg?s=128&g=1", "display_name": "igor_rb", "link": "https://stackoverflow.com/users/2568343/igor-rb"}, "edited": false, "score": 0, "creation_date": 1428497468, "post_id": 29511611, "comment_id": 47185703, "body": "Can you post terminal output from installation process?"}], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 1917978, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/556852e729fc56e4fd55d980e9f94469?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/1917978/sunil"}, "edited": false, "score": 0, "creation_date": 1428495430, "post_id": 29513487, "comment_id": 47184251, "body": "Sorry @mudaso, it was my typo."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 960, "user_id": 1917978, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/556852e729fc56e4fd55d980e9f94469?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/1917978/sunil"}, "edited": false, "score": 0, "creation_date": 1428497476, "post_id": 29513487, "comment_id": 47185713, "body": "Then I don\u2019t actually understand what you want to. <code>2.2.0 &gt; 2.2.0-preview1</code>. That said, there is no ability to <i>downgrade</i> from <code>2.2.0-preview1</code> to <code>2.2.0</code>. It would be <i>an upgrade</i>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1428492964, "creation_date": 1428492964, "answer_id": 29513487, "question_id": 29511611, "link": "https://stackoverflow.com/questions/29511611/how-to-install-ruby-2-2-0-not-ruby-2-2-0-preview1/29513487#29513487", "title": "How to install ruby-2.2.0 not ruby-2.2.0-preview1?", "body": "<p>As far as I understood you want to downgrade to <code>2.0.0</code>. You are mistyping <code>2.0.0</code> as <code>2.2.0</code>. Please review your request to <code>rvm</code> <em>very carefully</em>. It should be:</p>\n\n<pre><code>#                  \u21d3\nrvm install ruby-2.0.0\n</code></pre>\n\n<p>and you are trying </p>\n\n<pre><code>#                  \u21d3\nrvm install ruby-2.2.0\n</code></pre>\n\n<p>which, apparently, forces <code>rvm</code> to download the closest possible version, which is <code>ruby-2.2.0-preview1</code>.</p>\n"}], "owner": {"reputation": 960, "user_id": 1917978, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/556852e729fc56e4fd55d980e9f94469?s=128&d=identicon&r=PG", "display_name": "sunil", "link": "https://stackoverflow.com/users/1917978/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1428496411, "creation_date": 1428487414, "last_edit_date": 1428495169, "question_id": 29511611, "link": "https://stackoverflow.com/questions/29511611/how-to-install-ruby-2-2-0-not-ruby-2-2-0-preview1", "title": "How to install ruby-2.2.0 not ruby-2.2.0-preview1?", "body": "<p>I am facing some Bad::URI issue in ruby-2.2.0-preview1 so I want to downgrade with ruby-2.2.0.</p>\n\n<p>I ran following commands: to uninstall <code>ruby-2.2.0-preview1</code></p>\n\n<blockquote>\n  <p><code>rvm uninstall ruby-2.2.0-preview1</code></p>\n</blockquote>\n\n<p>then </p>\n\n<blockquote>\n  <p><code>rvm install ruby-2.2.0</code></p>\n</blockquote>\n\n<p>But its installing <code>ruby-2.2.0-preview1</code> version again.</p>\n\n<p>How can I install specific version of ruby i.e. <code>ruby-2.2.0</code> ?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": true, "score": 0, "last_activity_date": 1428487253, "creation_date": 1428487253, "answer_id": 29511553, "question_id": 29511430, "link": "https://stackoverflow.com/questions/29511430/runtimeerror-is-coming-in-rails-3/29511553#29511553", "title": "RuntimeError is coming in Rails 3", "body": "<p>change <code>@hcsy.sdp_id=@sdp.id</code> to <code>@hcsy.sdp_id=@sdf.id</code> ... just <code>@sdf.id</code></p>\n"}], "owner": {"reputation": 306, "user_id": 4719860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/917655ddb357726cbdf1c13b40c37fef?s=128&d=identicon&r=PG&f=1", "display_name": "rajat_474", "link": "https://stackoverflow.com/users/4719860/rajat-474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15, "favorite_count": 0, "accepted_answer_id": 29511553, "answer_count": 1, "score": 0, "last_activity_date": 1428487253, "creation_date": 1428486917, "question_id": 29511430, "link": "https://stackoverflow.com/questions/29511430/runtimeerror-is-coming-in-rails-3", "title": "RuntimeError is coming in Rails 3", "body": "<p>I am getting the following error when i am submitting the form using Rails 3.</p>\n\n<p>Error:</p>\n\n<p>RuntimeError in HcsysController#create</p>\n\n<pre><code>Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id\nRails.root: C:/Site/swargadwar_admin\n\nApplication Trace | Framework Trace | Full Trace\napp/controllers/hcsys_controller.rb:12:in `create'\n</code></pre>\n\n<p>Please check my below codes and try to help me to resolve this error.</p>\n\n<h1>views/hcsys/new_html.erb</h1>\n\n<pre><code>&lt;center&gt;\n    &lt;%= form_for :hcsy,:url =&gt; {:action =&gt; \"create\",:id =&gt; params[:id] } do |f| %&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Deceased Name&lt;/label&gt;\n        &lt;%= f.text_field :dece_name %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Beneficiary name&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_name %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for \"name\"&gt; Address line -1&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_address1 %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for \"name\"&gt; Address line -2&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_address2 %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt; Village&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_village %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Block&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_block %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Dist&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_dist %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;State&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_state %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;country&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_country %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Police station&lt;/label&gt;\n        &lt;%= f.text_field :beneficiary_ps %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Occupation&lt;/label&gt;\n        &lt;%= f.text_field :occupation %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;BPL&lt;/label&gt;\n        Yes: &lt;%= f.radio_button :bpl,'Yes',:checked =&gt; true %&gt;\n        No : &lt;%= f.radio_button :bpl,'No' %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Date of Required&lt;/label&gt;\n        &lt;%= f.text_field :date_of_required,:id =&gt; \"popupDatepicker\" %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Recieved fund earlier&lt;/label&gt;\n         Yes:&lt;%= f.radio_button :recieved_fund_earlier,'Yes',:checked =&gt; true %&gt;\n         No: &lt;%= f.radio_button :recieved_fund_earlier,'No' %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Mobile no&lt;/label&gt;\n        &lt;%= f.telephone_field :mobile %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Previous reciept no&lt;/label&gt;\n        &lt;%= f.text_field :prev_receipt_no %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Previous amount recieved&lt;/label&gt;\n        &lt;%= f.text_field :prev_amount_recieved %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Goverment service&lt;/label&gt;\n        &lt;%= f.text_field :govt_service %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Business&lt;/label&gt;\n        &lt;%= f.text_field :business %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Land property&lt;/label&gt;\n        &lt;%= f.text_field :land_property %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Others&lt;/label&gt;\n        &lt;%= f.text_field :others %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt; Amount Required&lt;/label&gt;\n        &lt;%= f.text_field :amount_required %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Photo&lt;/label&gt;\n        &lt;%= f.file_field :bphoto %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Doner photo&lt;/label&gt;\n        &lt;%= f.file_field :dphoto %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for= \"name\"&gt;Created&lt;/label&gt;\n        &lt;%= f.number_field :created_by %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Updated&lt;/label&gt;\n        &lt;%= f.number_field :updated_by %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for =\"name\"&gt;Brahmin&lt;/label&gt;\n         Yes:&lt;%= f.radio_button :brahmin,'Yes',:checked =&gt; true %&gt;\n         No: &lt;%= f.radio_button :brahmin,'No' %&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;%= f.submit \"Submit\" %&gt;\n    &lt;/p&gt;\n    &lt;% end %&gt;\n&lt;/center&gt;\n</code></pre>\n\n<h1>controller/hcsys_controller.rb</h1>\n\n<pre><code>class HcsysController &lt; ApplicationController\n    def new\n        @hcsy=Hcsy.new\n    end\n    def show\n        @hcsy=Hcsy.all\n    end\n    def create\n        @sdf=Sdf.find(params[:id])\n        @hcsy=Hcsy.new(params[:hcsy])\n        @hcsy.sdp_id=@sdp.id\n        if @hcsy.save\n        flash[:notice]=\"data has successfully saved\"\n        flash[:color]=\"valid\"\n        redirect_to :action =&gt; \"new\" ,:controller =&gt; \"admins\"\n        else\n            flash[:alert]=\"Data could not saved\"\n            flash[:color]=\"invalid\"\n            render 'new'\n        end\n    end\nend\n</code></pre>\n\n<h1>migrate/20150408170838_create_hcsies.rb</h1>\n\n<pre><code>class CreateHcsies &lt; ActiveRecord::Migration\n  def change\n    create_table :hcsies do |t|\n      t.integer :sdp_id\n      t.integer :receipt_no\n      t.string :dece_name\n      t.string :beneficiary_name\n      t.integer :beneficiary_relationship_id\n      t.string :beneficiary_relationship_other\n      t.string :beneficiary_address1\n      t.string :beneficiary_address2\n      t.string :beneficiary_village\n      t.string :beneficiary_block\n      t.string :beneficiary_dist\n      t.string :beneficiary_state\n      t.string :beneficiary_country\n      t.string :beneficiary_ps\n      t.string :mobile\n      t.string :occupation\n      t.boolean :bpl\n      t.string :govt_service\n      t.string :business\n      t.string :land_property\n      t.string :others\n      t.boolean :brahmin\n      t.decimal :amount_required, :precision =&gt; 8, :scale =&gt; 2\n      t.date :date_of_required\n      t.boolean :recieved_fund_earlier\n      t.string :prev_receipt_no\n      t.decimal :prev_amount_recieved, :precision =&gt; 8, :scale =&gt; 2\n      t.string :dphoto\n      t.string :bphoto\n      t.string :b_audio\n      t.string :b_thumb\n      t.integer :created_by\n      t.integer :updated_by\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<h1>model/hcsy.rb</h1>\n\n<pre><code>class Hcsy &lt; ActiveRecord::Base\n  attr_accessible :amount_required, :b_audio, :b_thumb, :beneficiary_address1, :beneficiary_address2, :beneficiary_block, :beneficiary_country, :beneficiary_dist, :beneficiary_name, :beneficiary_ps, :beneficiary_relationship_id, :beneficiary_relationship_other, :beneficiary_state, :beneficiary_village, :bphoto, :bpl, :brahmin, :business, :created_by, :date_of_required, :dece_name, :dphoto, :govt_service, :land_property, :mobile, :occupation, :others, :prev_amount_recieved, :prev_receipt_no, :receipt_no, :recieved_fund_earlier, :sdp_id, :updated_by\n  mount_uploader :bphoto, BphotoUploader\n  mount_uploader :dphoto, DphotoUploader\n  belongs_to :sdf\nend\n</code></pre>\n\n<p>Please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1428486398, "post_id": 29511140, "comment_id": 47178282, "body": "This is easy when you have only class attribute, but I have more than one attribute and this will not work."}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1428489890, "post_id": 29511140, "comment_id": 47180601, "body": "You can define a helper method according to your need, you just asked if it&#39;s possible or not."}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1428486800, "last_edit_date": 1428486800, "creation_date": 1428486159, "answer_id": 29511140, "question_id": 29511112, "link": "https://stackoverflow.com/questions/29511112/set-class-and-data-in-haml-based-on-condition/29511140#29511140", "title": "Set class and data in HAML based on condition", "body": "<p>You can do that easily</p>\n\n<pre><code>class: ('disabled' if  1 + 1 == 2), \"data-original-title\" =&gt; (\"Tooltip on left\" if  1 + 1 == 2), \"data-placement\" =&gt; (\"left\" if  1 + 1 == 2), \"data-toggle\" =&gt; (\"tooltip\" if  1 + 1 == 2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 988, "user_id": 4384619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l7-7H3MFzcY/AAAAAAAAAAI/AAAAAAAAAP8/K6ILQ-kg8T4/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Buttice", "link": "https://stackoverflow.com/users/4384619/j%c3%a9r%c3%a9my-buttice"}, "is_accepted": false, "score": 0, "last_activity_date": 1428487070, "creation_date": 1428487070, "answer_id": 29511477, "question_id": 29511112, "link": "https://stackoverflow.com/questions/29511112/set-class-and-data-in-haml-based-on-condition/29511477#29511477", "title": "Set class and data in HAML based on condition", "body": "<p>It's an example to give the class active, depending controller and method:\nYou can use it to create your own.</p>\n\n<p>application_helper.rb</p>\n\n<pre><code>module ApplicationHelper\n  def is_active(controller, action)       \n    params[:action] == action &amp;&amp; params[:controller] == controller ? \"active\" : nil        \n  end \nend\n</code></pre>\n\n<p>view file</p>\n\n<pre><code> %li\n   %a{class: is_active('controller_1', 'index'), :href =&gt; \"/controller_1\"}\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428487070, "creation_date": 1428486088, "question_id": 29511112, "link": "https://stackoverflow.com/questions/29511112/set-class-and-data-in-haml-based-on-condition", "title": "Set class and data in HAML based on condition", "body": "<p>I have some partial that looks like this:</p>\n\n<pre><code>.btn.btn-success{class: 'disabled',\"data-original-title\" =&gt; \"Tooltip on left\", \"data-placement\" =&gt; \"left\", \"data-toggle\" =&gt; \"tooltip\"}\n  %span.fa.fa-gear\n  Process\n</code></pre>\n\n<p>Is there possibility to refactor this template to set this:</p>\n\n<pre><code>{class: 'disabled',\"data-original-title\" =&gt; \"Tooltip on left\", \"data-placement\" =&gt; \"left\", \"data-toggle\" =&gt; \"tooltip\"}\n</code></pre>\n\n<p>only if for example 1+1 == 2?</p>\n\n<p>I was trying almost everything but it not works...</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1428489008, "post_id": 29510880, "comment_id": 47180007, "body": "First, add html, please"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1428490442, "post_id": 29510880, "comment_id": 47180974, "body": "Why html is needed for this? it&#39;s a normal select list. A page consist of many select list and I am choosing the first select_list using index 0 and I would like to store this a. That&#39;s what my question"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1428586299, "post_id": 29510880, "comment_id": 47231794, "body": "Given that the problem is performance related, it would help to give the HTML so that we can reproduce your problem. Without being able to reproduce the problem, we would be blindly guessing on what you could do."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428586370, "post_id": 29510880, "comment_id": 47231853, "body": "I would give you the two select list code below, &lt;select class=&quot;ng-valid ng-dirty&quot; style=&quot;&quot; ng-change=&quot;selectionsAgentType(AgentType)&quot; ng-model=&quot;AgentType&quot;&gt; &lt;select class=&quot;ng-valid ng-dirty&quot; ng-change=&quot;AgentCategorySelected(agentoptions)&quot; ng-model=&quot;agentoptions&quot;&gt; Is there any way could I access this select list?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1428640955, "post_id": 29510880, "comment_id": 47258008, "body": "Yes, there are lots of ways to access that select list. However, without the entire page, it is extremely difficult to suggest one that will have good performance."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428644274, "post_id": 29510880, "comment_id": 47259048, "body": "I know many ways are there,but many of them reduces the speed, for an instance b.select_lists[0].select(&quot;hi&quot;) or b.select_list(:index,0).select(&quot;hi&quot;) or b.select_list(:xpath=&gt;&#39;.//*[@ng-model=&quot;AgentType&quot;]&#39;).select(&zwnj;&#8203;&quot;hi&quot;) but all are reduces the speed of selection, the last one i have given takes 23 sec to for selection. that&#39;s what I asked is there anything is possible using ng-model?"}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428558871, "post_id": 29513454, "comment_id": 47215001, "body": "hi,Thanks,I know the idea you have stated here, if I use &#39;first&#39; function then it&#39;s faster, but I can&#39;t use the first function while I try to second element, then I need to go for select_lists[1],If I use this index to locate the select list, then it&#39;s very slower. My select_list code follows, If you could provide me any other way to point out this select list, that would be helpful for me  &quot;&lt;select class=&quot;ng-valid&quot; style=&quot;&quot; ng-change=&quot;AgentCategory(agentoptions)&quot; ng-model=&quot;agent&quot;&gt;&quot;"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428578816, "post_id": 29513454, "comment_id": 47226625, "body": "@RAJ There are all <code>select_lists</code> have <code>class=&quot;ng-valid&quot;</code> ?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428579122, "post_id": 29513454, "comment_id": 47226818, "body": "hi, I would give you the two select list code below,  &lt;select class=&quot;ng-valid ng-dirty&quot; style=&quot;&quot; ng-change=&quot;selectionsAgentType(AgentType)&quot; ng-model=&quot;AgentType&quot;&gt;  &lt;select class=&quot;ng-valid ng-dirty&quot; ng-change=&quot;AgentCategorySelected(agentoptions)&quot; ng-model=&quot;agentoptions&quot;&gt;  Is there any way could I access this select list?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428580123, "post_id": 29513454, "comment_id": 47227450, "body": "@RAJ You can try do it using <code>xpath</code> = <code>b.select_list(:xpath =&gt; &quot;(&#47;&#47;select)[index]&quot;)</code>  but, I think that <code>select_lists[index] </code> - much better"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428581000, "post_id": 29513454, "comment_id": 47227994, "body": "hi, I have written this code I hope something similar to what you say here,       b.text_field(:index,61).set agentcreation[&quot;Referred Name&quot;]  But it&#39;s taking too much time to select the item. Time become real concern here for me."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428583136, "post_id": 29513454, "comment_id": 47229449, "body": "@RAJ you also can select elements by unique name or id"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428585192, "post_id": 29513454, "comment_id": 47231020, "body": "Yes I know, I usually to write the code like this, b.select_list(:id,&#39;something&#39;).select(&#39;hi&#39;) but here id is not present and name is not present either instead I found ng-model but I couldn&#39;t use that because it throws the error that&#39;s because of the &#39;-&#39;."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428585334, "post_id": 29513454, "comment_id": 47231130, "body": "@RAJ try write <code>ng_model</code>"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428586308, "post_id": 29513454, "comment_id": 47231801, "body": "Yes, tried, it throws the following error  `rescue in match?&#39;: ng_model is an unknown way of finding a &lt;select&gt; element (AgentType) (Watir::Exception::MissingWayOfFindingObjectException)"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428586515, "post_id": 29513454, "comment_id": 47231963, "body": "@RAJ can you add your code with <code>ng-model</code> ?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428586670, "post_id": 29513454, "comment_id": 47232060, "body": "I don&#39;t understand what you are asking, I hope you are asking what I have written, here is the code   b.select_list(:ng_model,&#39;AgentType&#39;).select(&quot;SP&quot;)"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428586738, "post_id": 29513454, "comment_id": 47232116, "body": "Try this <code>b.select_list(:xpath =&gt;  &#39;.&#47;&#47;*[@ng-model=&quot;AgentType&quot;]&#39;) </code>"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1428587194, "post_id": 29513454, "comment_id": 47232516, "body": "hey hi, It works, beautiful, but it takes 23 sec to select an element. It takes too much time."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1430377702, "post_id": 29513454, "comment_id": 48042793, "body": "hi Alex, If I use the code &#39;b.option(:text,&#39;Agent&#39;).select&#39; it selects fine, but the same option Agent is present in two select_list in a single page, So it always selects in the first one, Is there any Can I modify the code to select the second select_list?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1430378819, "post_id": 29513454, "comment_id": 48043452, "body": "@RAJ If you know an index of the second <code>select-list</code> you can write someth like: <code>b.select_lists[index_of_it].option(:text, &#39;Agent&#39;).select</code>"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1430379172, "post_id": 29513454, "comment_id": 48043660, "body": "Yes I am aware of this coding, but I can&#39;t use index, because any change in the website would affect my coding. For an instance, If they insert a select_list then all index would change. That&#39;s what I asked, If same option comes from two different select_list, Can we successfully choose in two select_list?"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1428492856, "creation_date": 1428492856, "answer_id": 29513454, "question_id": 29510880, "link": "https://stackoverflow.com/questions/29510880/storing-the-object-of-select-list/29513454#29513454", "title": "Storing the object of Select_list", "body": "<p>If <code>option</code> with <code>text: 'Agent'</code> is unique on this page.</p>\n\n<p>If you need just simulate <code>select</code></p>\n\n<pre><code>b.option(:text, 'Agent').select\n</code></pre>\n\n<p>Also, if you need <code>value</code> of this <code>option</code> </p>\n\n<pre><code>a = b.option(:text, 'Agent').value\n</code></pre>\n\n<p>Else, </p>\n\n<pre><code>b.select_lists.first.option(:text, 'Agent').select\n\n\na =  b.select_lists.first.option(:text, 'Agent').value\n</code></pre>\n"}], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1428722147, "answer_count": 1, "score": -1, "last_activity_date": 1428775590, "creation_date": 1428485417, "last_edit_date": 1428775590, "question_id": 29510880, "link": "https://stackoverflow.com/questions/29510880/storing-the-object-of-select-list", "closed_reason": "Not suitable for this site", "title": "Storing the object of Select_list", "body": "<p>Please consider the below code </p>\n\n<pre><code>a=b.select_lists[0]\na.select(\"Agent\")\n</code></pre>\n\n<p>In the aforementioned code, the first line is taking so much time, So Can anyone tell me Is there any way to store value of \"a\" object for further use without getting from b.select_lists[0]? Or Is there anyway can we directly get the value of 'a'? </p>\n\n<p>The code which I am trying to write for the select list follows below</p>\n\n<pre><code>&lt;select class=\"ng-valid ng-dirty\" style=\"\" ng-change=\"selectionsAgentType(AgentType)\" ng-model=\"AgentType\"&gt; &lt;select class=\"ng-valid ng-dirty\" ng-change=\"AgentCategorySelected(agentoptions)\" ng-model=\"agentoptions\"&gt;\n</code></pre>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1428497273, "post_id": 29510137, "comment_id": 47185576, "body": "Can you please elaborate on how those lines of code do work? I would expect <code>$browser.image(:src =&gt; &#47;10&#47;).click</code> to work. What is the error that occurs when doing it?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1428641186, "post_id": 29510137, "comment_id": 47258072, "body": "Given that you are getting an unable to locate element error, there could be a number of different issues. Without seeing the entire page, it is difficult to debug. However I had written a <a href=\"https://jkotests.wordpress.com/unable-to-locate-element/\" rel=\"nofollow noreferrer\">list of some common problems</a>."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3568045, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SS2gV.png?s=128&g=1", "display_name": "Cantorion", "link": "https://stackoverflow.com/users/3568045/cantorion"}, "edited": false, "score": 0, "creation_date": 1428500624, "post_id": 29512017, "comment_id": 47188038, "body": "Hi Justin, the error I&#39;m getting (having also tried your suggestion) is; unable to locate element, using (:alt =&gt; &quot;Find Us&quot;, :tag_name=&gt;&quot;img&quot;)"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 47, "user_id": 3568045, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SS2gV.png?s=128&g=1", "display_name": "Cantorion", "link": "https://stackoverflow.com/users/3568045/cantorion"}, "edited": false, "score": 0, "creation_date": 1428501252, "post_id": 29512017, "comment_id": 47188542, "body": "@Cantorion it&#39;s strange, are this image inside the iframe?"}, {"owner": {"reputation": 47, "user_id": 3568045, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SS2gV.png?s=128&g=1", "display_name": "Cantorion", "link": "https://stackoverflow.com/users/3568045/cantorion"}, "edited": false, "score": 0, "creation_date": 1428502379, "post_id": 29512017, "comment_id": 47189497, "body": "it doesnt appear to be an i frame, all images are contained within cells inside; &lt;table class=&quot;table table-striped table-bordered&quot;&gt;"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 47, "user_id": 3568045, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SS2gV.png?s=128&g=1", "display_name": "Cantorion", "link": "https://stackoverflow.com/users/3568045/cantorion"}, "edited": false, "score": 2, "creation_date": 1428502484, "post_id": 29512017, "comment_id": 47189584, "body": "@Cantorion can you add html of this table or url of this page?"}, {"owner": {"reputation": 47, "user_id": 3568045, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SS2gV.png?s=128&g=1", "display_name": "Cantorion", "link": "https://stackoverflow.com/users/3568045/cantorion"}, "edited": false, "score": 0, "creation_date": 1428587183, "post_id": 29512017, "comment_id": 47232505, "body": "Alex, the html is;[&lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;width:20%&quot;&gt; &lt;div style=&quot;margin-bottom:10px; min-height:60px;&quot;&gt;Find Us&lt;/div&gt; &lt;div style=&quot;width:100%&quot;&gt; &lt;img src=&quot;/uploads/images/thumbs/10.png?8890&quot; alt=&quot;Find Us&quot; width=&quot;140&quot; onclick=&quot;$(&#39;#removeButton&#39;, window.opener.document).show();        $(&#39;#myImgId&#39;, window.opener.document).show();                          $(&#39;#imageHeadingID&#39;, window.opener.document).val(&#39;13&#39;);                        $(&#39;#myImgId&#39;, window.opener.document).attr(&#39;src&#39;, &#39;/uploads/images/thumbs/10.png&#39;);                                     window.close()&quot;&gt; &lt;/div&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;]"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1428489223, "last_edit_date": 1428489223, "creation_date": 1428488586, "answer_id": 29512017, "question_id": 29510137, "link": "https://stackoverflow.com/questions/29510137/calling-an-image-alt-text-with-ruby-watir/29512017#29512017", "title": "Calling an image alt text with Ruby Watir", "body": "<p>Try identify by <code>:alt</code> :</p>\n\n<pre><code>$browser.image(:alt =&gt; \"Find Us\").click\n</code></pre>\n\n<p>But, it's strange, cause, <code>$browser.image(:src =&gt; /10/).click</code> - must work also.</p>\n"}, {"tags": [], "owner": {"reputation": 1113, "user_id": 1250190, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42209a6704f712d1eadbc28a4f024c9e?s=128&d=identicon&r=PG", "display_name": "pjd", "link": "https://stackoverflow.com/users/1250190/pjd"}, "is_accepted": false, "score": 0, "last_activity_date": 1428504433, "creation_date": 1428504433, "answer_id": 29517991, "question_id": 29510137, "link": "https://stackoverflow.com/questions/29510137/calling-an-image-alt-text-with-ruby-watir/29517991#29517991", "title": "Calling an image alt text with Ruby Watir", "body": "<p>I agree with Alex and Justin that using <code>src</code> should work, but</p>\n\n<p>Have you tried using an XPath?</p>\n\n<p>Something like <code>browser.img(:xpath =&gt; \"/html/.../img\").click</code></p>\n\n<p>You can get the XPath to the image pretty easily with Chrome by right-clicking the image-->Inspect Element-->then right-click on the relevant line of HTML in the developer tools that have opened. If the image is always in the same place on the page (regardless of any change in the <code>src</code>), this method should work.</p>\n"}], "owner": {"reputation": 47, "user_id": 3568045, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SS2gV.png?s=128&g=1", "display_name": "Cantorion", "link": "https://stackoverflow.com/users/3568045/cantorion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428504433, "creation_date": 1428483301, "question_id": 29510137, "link": "https://stackoverflow.com/questions/29510137/calling-an-image-alt-text-with-ruby-watir", "title": "Calling an image alt text with Ruby Watir", "body": "<p>Ok, I'm trying to access an image stored in an image library which on click closes the image library pop up and inserts the image into the page.</p>\n\n<p>The html for the image is;</p>\n\n<pre><code>&lt;img src=\"/uploads/images/thumbs/10.png?504\" alt=\"Find Us\" width=\"140\" onclick=\"$('#removeButton', window.opener.document).show();\n                                $('#myImgId', window.opener.document).show();\n                                $('#imageHeadingID', window.opener.document).val('13');\n                                $('#myImgId', window.opener.document).attr('src', '/uploads/images/thumbs/10.png');\n                                window.close()\"&gt;\n</code></pre>\n\n<p>As a note, the ?504 is not static and changes each time the image library is open so I cant use it as an id value.</p>\n\n<p>I've tried the following lines of code in turn, all without success (gleaned from google and stack overflow).</p>\n\n<pre><code>find(\"img[@alt='Find Us']\").click\n$browser.cell(:text =&gt; \"Find Us\").click\n$browser.image(:src =&gt; /10/).click\n$browser.image(:src =&gt; \"/10.png\").click\n$browser.link(:text =&gt; \"Find Us\").click\n</code></pre>\n\n<p>any help would be appreciated</p>\n"}, {"tags": ["ruby", "cucumber", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1428494832, "post_id": 29510058, "comment_id": 47183833, "body": "@All what I have noticed is true, if there are multiple <code>visit</code> in one step def then it fails visit has to be separate in separate step defs. <b>But why and how to fix this?</b>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1428527639, "post_id": 29510058, "comment_id": 47205241, "body": "I do not see why using <code>visit</code> multiple times would cause an issue and was not able to reproduce it when I tried. It would help if you could share a minimal working example that shows the problem."}, {"owner": {"reputation": 505, "user_id": 1904740, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4f706fc49994f5194f5961f371f6723e?s=128&d=identicon&r=PG", "display_name": "Abe Heward", "link": "https://stackoverflow.com/users/1904740/abe-heward"}, "edited": false, "score": 0, "creation_date": 1452814454, "post_id": 29510058, "comment_id": 57346794, "body": "Can you be more explicit about what you mean by &quot;doesn&#39;t work&quot;?  What is your stack trace error?"}], "owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428498199, "creation_date": 1428483101, "last_edit_date": 1495540757, "question_id": 29510058, "link": "https://stackoverflow.com/questions/29510058/watir-how-to-use-two-or-multiple-visit-in-one-step-definition", "title": "WATIR: how to use two or multiple visit() in one step definition?", "body": "<pre><code>  Background:\n    Given the Seller has generated a coupon\n      | pre-requisite                        | status|\n      | Coupon generated                     | Yes   |\n      | Activate Coupon                      | Yes   |\n\n    And I login as a customer\n\n  Scenario: Customer can use coupon for shopping\n    When I am on an existing product created by Seller\n    When I click on insert coupon code\n    Then xyz abc qwert lorem ipsum\n</code></pre>\n\n<p>This is my <code>.feature</code> file and <code>scenario</code>. Here in this <code>.feature</code> file 3 user's login &amp; logout are needed. \nWhen 3rd time a user is asked to login(in a <code>scenario</code>) it doesnt go to login page using <code>visit</code>.</p>\n\n<p>These are the instances when login is required:</p>\n\n<ol>\n<li>Given the Seller has generated a coupon #Seller log in to generate coupon</li>\n<li>And I login as a customer # customer login</li>\n<li>When I am on an existing product created by Seller #<br>\nSeller login again to create the product and then customer logs in and goes to product page. In this step <code>visit</code> doesnt work.</li>\n</ol>\n\n<p>For login I am using:\n<code>visit(LoginPage).login_as_seller</code> and <code>visit(LoginPage).login_as_customer</code> these methods has written like this:</p>\n\n<pre><code>def login_as_seller\n    if $if_logged_in == true\n      sign_out\n    end\n    login(FigNewton.seller_userid, FigNewton.seller_password)\n  end\n</code></pre>\n\n<p>LoginPage rb file:</p>\n\n<pre><code>class LoginPage\n  include PageObject\n\n  page_url(\"#{FigNewton.base_url}/login\")\n\n def login_as_seller\n    if $if_logged_in == true\n          sign_out\n        end\n        login(FigNewton.seller_userid, FigNewton.seller_password)\n      end\nend\n</code></pre>\n\n<p>I have noticed that if method <code>login</code> is called in <code>Background</code> then it works but in <code>Scenario</code> its doesn't, but Why this is happening I don't know. Please help me out here. I read this <a href=\"https://stackoverflow.com/questions/19473510/page-object-gem-seems-not-working\">page-object gem seems not working</a> but no help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deployment", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 929, "user_id": 443389, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/02e6a10b891b1a77ee59ca366a9ddb05?s=128&d=identicon&r=PG", "display_name": "sajith", "link": "https://stackoverflow.com/users/443389/sajith"}, "is_accepted": true, "score": 1, "last_activity_date": 1428573652, "creation_date": 1428573652, "answer_id": 29535418, "question_id": 29508817, "link": "https://stackoverflow.com/questions/29508817/rails-capistrano-deploy-issue-malformed-version-number-string-capistrano/29535418#29535418", "title": "Rails capistrano deploy issue, Malformed version number string Capistrano", "body": "<p>I found the issue by myself. This might help someone else who came across same issue in the future.</p>\n\n<p>The  issue was with the bundler. I have used the latest version of bundler. Since this is a older project, I seems the bundler is not compatible with them. I downgrade the bundler to 1.0.10. everything works ok now. </p>\n\n<p>Commands used,</p>\n\n<pre><code>rvm @global do gem uninstall bundler\ngem install bundler -v \u20181.0.10'\n</code></pre>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 929, "user_id": 443389, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/02e6a10b891b1a77ee59ca366a9ddb05?s=128&d=identicon&r=PG", "display_name": "sajith", "link": "https://stackoverflow.com/users/443389/sajith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 29535418, "answer_count": 1, "score": 0, "last_activity_date": 1428573652, "creation_date": 1428479114, "question_id": 29508817, "link": "https://stackoverflow.com/questions/29508817/rails-capistrano-deploy-issue-malformed-version-number-string-capistrano", "title": "Rails capistrano deploy issue, Malformed version number string Capistrano", "body": "<p>I'm not very familiar with ruby. I'm trying to deploy existing project to the staging server.  </p>\n\n<p>Project uses followings,<br>\nruby 1.8.7<br>\nrails 2.3.5<br>\nrake 0.8.7<br>\ncapistrano 2.5.13<br>\ncapistrano-ext 1.2.1    </p>\n\n<p>When I run \u201ccap staging deploy\u201d in my project root, it fails with <strong>Malformed version number string Capistrano::Version (ArgumentError)</strong></p>\n\n<p>following is the console output,</p>\n\n<pre><code>/Users/sajithk/.rvm/rubies/ruby-1.8.7-head/lib/ruby/site_ruby/1.8/rubygems/version.rb:187:in `initialize': Malformed version number string Capistrano::Version (ArgumentError)\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head@global/gems/bundler-1.9.1/lib/bundler/capistrano.rb:8:in `new'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head@global/gems/bundler-1.9.1/lib/bundler/capistrano.rb:8\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:152:in `require'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:152:in `require'\nfrom ./config/deploy.rb:1:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:172:in `load_from_file'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:89:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:86:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:86:in `each'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:86:in `load'\nfrom Capfile:4:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:172:in `load_from_file'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:89:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:86:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:86:in `each'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/configuration/loading.rb:86:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/cli/execute.rb:64:in `load_recipes'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/cli/execute.rb:64:in `each'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/cli/execute.rb:64:in `load_recipes'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/cli/execute.rb:30:in `execute!'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/lib/capistrano/cli/execute.rb:14:in `execute'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/gems/capistrano-2.5.13/bin/cap:4\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/bin/cap:19:in `load'\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/bin/cap:19\nfrom /Users/sajithk/.rvm/gems/ruby-1.8.7-head/bin/ruby_executable_hooks:15\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays", "multidimensional-array", "hash"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1428478695, "post_id": 29508557, "comment_id": 47173679, "body": "for <code>id = 1</code> there are multiple hobbies. Which <code>hobby</code> will get precedence?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 2, "creation_date": 1428482269, "post_id": 29508557, "comment_id": 47175627, "body": "You need to add more information about your requirements: people are just guessing what you want since what you have asked for is not a valid data structure.  If I was you I would take a step back and describe the problem you are trying to solve rather than say &quot;how to i turn this data into that data?&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": false, "score": 2, "last_activity_date": 1428479884, "creation_date": 1428479884, "answer_id": 29509037, "question_id": 29508557, "link": "https://stackoverflow.com/questions/29508557/merge-multidimensional-array-of-hash-based-on-hash-key-and-value-in-ruby/29509037#29509037", "title": "Merge multidimensional array of hash based on hash key and value in ruby", "body": "<p>First of all - it is impossible to have two elements in a hash with the same key. When assigning the value to some key will make the next assignment of the same key with new value override the previous one.</p>\n\n<p>Let's consider the example:</p>\n\n<pre><code>hash = {}\nhash[\"id\"] = 1\nhash[\"id\"] = 3\nhash[\"id\"] = 5\n</code></pre>\n\n<p>What output for <code>hash[\"id\"]</code> would you expect? <code>1</code>, <code>3</code>, <code>5</code> or maybe <code>[1, 3, 5]</code>? <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html\" rel=\"nofollow\">The way the Hash in ruby works</a> it will output <code>5</code>, because this is the last assignment to unique key.</p>\n\n<p>Having said that, it is impossible to store multiple occurrences in your hash, but you can try processing it with something like:</p>\n\n<pre><code>input.flatten\n     .group_by { |h| h[\"id\"] }\n     .map do |k, a| \n       a.each_with_object({}) { |in_h, out_h| out_h.merge!(in_h) } \n     end\n</code></pre>\n\n<p>Which will result with hash like:</p>\n\n<pre><code>[{\"id\"=&gt;\"1\", \"name\"=&gt;\"a\", \"hoby\"=&gt;\"DD\", \"language\"=&gt;\"B\"}, \n {\"id\"=&gt;\"2\", \"name\"=&gt;\"b\", \"language\"=&gt;\"C\"}, \n {\"id\"=&gt;\"3\", \"name\"=&gt;\"c\", \"hoby\"=&gt;\"BB\"}, \n {\"id\"=&gt;\"4\", \"name\"=&gt;\"d\", \"hoby\"=&gt;\"EE\"}, \n {\"id\"=&gt;\"5\", \"name\"=&gt;\"e\"}, \n {\"id\"=&gt;\"6\", \"name\"=&gt;\"f\", \"language\"=&gt;\"D\"}]\n</code></pre>\n\n<p>Well, it is not the hash as you would expect, but at least it might put you in some direction.</p>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": true, "score": 1, "last_activity_date": 1428479890, "creation_date": 1428479890, "answer_id": 29509039, "question_id": 29508557, "link": "https://stackoverflow.com/questions/29508557/merge-multidimensional-array-of-hash-based-on-hash-key-and-value-in-ruby/29509039#29509039", "title": "Merge multidimensional array of hash based on hash key and value in ruby", "body": "<p>maybe this can help you.</p>\n\n<pre><code>input = [\n  [\n  {\"id\"=&gt;\"1\",\"name\"=&gt;\"a\"},\n  {\"id\"=&gt;\"2\",\"name\"=&gt;\"b\"},\n  {\"id\"=&gt;\"3\",\"name\"=&gt;\"c\"},\n  {\"id\"=&gt;\"4\",\"name\"=&gt;\"d\"},\n  {\"id\"=&gt;\"5\",\"name\"=&gt;\"e\"},\n  {\"id\"=&gt;\"6\",\"name\"=&gt;\"f\"}\n  ],\n  [\n  {\"id\"=&gt;\"3\",\"hoby\"=&gt;\"AA\"},\n  {\"id\"=&gt;\"3\",\"hoby\"=&gt;\"BB\"},\n  {\"id\"=&gt;\"1\",\"hoby\"=&gt;\"CC\"},\n  {\"id\"=&gt;\"1\",\"hoby\"=&gt;\"DD\"},\n  {\"id\"=&gt;\"4\",\"hoby\"=&gt;\"EE\"}\n  ],\n  [\n  {\"id\"=&gt;\"1\",\"language\"=&gt;\"A\"},\n  {\"id\"=&gt;\"1\",\"language\"=&gt;\"B\"},\n  {\"id\"=&gt;\"2\",\"language\"=&gt;\"B\"},\n  {\"id\"=&gt;\"2\",\"language\"=&gt;\"C\"},\n  {\"id\"=&gt;\"6\",\"language\"=&gt;\"D\"}\n  ]\n]\n</code></pre>\n\n<p>This way you can make your \"sort\" results.</p>\n\n<pre><code>output = {}\ninput.flatten.each do |h|\n  output[h[\"id\"]] = {} unless output[h[\"id\"]]\n  output[h[\"id\"]].merge!(h)\nend\n\noutput.values\n# =&gt; [\n# =&gt;   {\"id\"=&gt;\"1\", \"name\"=&gt;\"a\", \"hoby\"=&gt;\"DD\", \"language\"=&gt;\"B\"},\n# =&gt;   {\"id\"=&gt;\"2\", \"name\"=&gt;\"b\", \"language\"=&gt;\"C\"},\n# =&gt;   {\"id\"=&gt;\"3\", \"name\"=&gt;\"c\", \"hoby\"=&gt;\"BB\"},\n# =&gt;   {\"id\"=&gt;\"4\", \"name\"=&gt;\"d\", \"hoby\"=&gt;\"EE\"},\n# =&gt;   {\"id\"=&gt;\"5\", \"name\"=&gt;\"e\"},\n# =&gt;   {\"id\"=&gt;\"6\", \"name\"=&gt;\"f\", \"language\"=&gt;\"D\"}\n# =&gt; ]\n</code></pre>\n\n<p><strong>But the better way is use Hash in input. You can define input like hash and \"id\" like key so if you generate the data, you dont have problem to sort it.</strong></p>\n\n<p>Someting like this</p>\n\n<pre><code>{\n  \"1\" =&gt; {\"name\" =&gt; \"a\", \"hoby\" =&gt; \"DD\", \"language\" =&gt; \"B\"}\n}\n</code></pre>\n"}], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 29509039, "answer_count": 2, "score": -4, "last_activity_date": 1428482191, "creation_date": 1428478296, "last_edit_date": 1428482191, "question_id": 29508557, "link": "https://stackoverflow.com/questions/29508557/merge-multidimensional-array-of-hash-based-on-hash-key-and-value-in-ruby", "title": "Merge multidimensional array of hash based on hash key and value in ruby", "body": "<p>I have one array and i want to match value of <code>id</code> key with other array of hash in multidimensional array,</p>\n\n<pre><code>input = [ \n  [ {\"id\"=&gt;\"1\",\"name\"=&gt;\"a\"},\n    {\"id\"=&gt;\"2\",\"name\"=&gt;\"b\"},\n    {\"id\"=&gt;\"3\",\"name\"=&gt;\"c\"},\n    {\"id\"=&gt;\"4\",\"name\"=&gt;\"d\"},\n    {\"id\"=&gt;\"5\",\"name\"=&gt;\"e\"},\n    {\"id\"=&gt;\"6\",\"name\"=&gt;\"f\"}\n  ],\n  [ {\"id\"=&gt;\"3\",\"hoby\"=&gt;\"AA\"},\n    {\"id\"=&gt;\"3\",\"hoby\"=&gt;\"BB\"},\n    {\"id\"=&gt;\"1\",\"hoby\"=&gt;\"CC\"},\n    {\"id\"=&gt;\"1\",\"hoby\"=&gt;\"DD\"},\n    {\"id\"=&gt;\"4\",\"hoby\"=&gt;\"EE\"}\n  ],\n  [ {\"id\"=&gt;\"1\",\"language\"=&gt;\"A\"},\n    {\"id\"=&gt;\"1\",\"language\"=&gt;\"B\"},\n    {\"id\"=&gt;\"2\",\"language\"=&gt;\"B\"},\n    {\"id\"=&gt;\"2\",\"language\"=&gt;\"C\"},\n    {\"id\"=&gt;\"6\",\"language\"=&gt;\"D\"}\n  ] \n]\n</code></pre>\n\n<p>I need array output like,</p>\n\n<pre><code>output = [ \n  {\"id\"=&gt;\"1\",\"name\"=&gt;\"a\",\"id\"=&gt;\"1\",\"hoby\"=&gt;\"CC\",\"id\"=&gt;\"1\",\"language\"=&gt;\"A\",\"id\"=&gt;\"1\",\"language\"=&gt;\"B\"},\n  {\"id\"=&gt;\"2\",\"name\"=&gt;\"b\",\"id\"=&gt;\"2\",\"language\"=&gt;\"B\"},\n  {\"id\"=&gt;\"3\",\"name\"=&gt;\"c\",\"id\"=&gt;\"3\",\"hoby\"=&gt;\"AA\",\"id\"=&gt;\"3\",\"hoby\"=&gt;\"BB\"},\n  {\"id\"=&gt;\"4\",\"name\"=&gt;\"d\",\"id\"=&gt;\"4\",\"hoby\"=&gt;\"EE\"},\n  {\"id\"=&gt;\"5\",\"name\"=&gt;\"e\"},\n  {\"id\"=&gt;\"6\",\"name\"=&gt;\"f\",\"id\"=&gt;\"6\",\"language\"=&gt;\"D\"}\n]\n</code></pre>\n\n<p>I have wrote code for this,</p>\n\n<pre><code>len = input.length - 1\noutput = []\ninput[0].each do |value,index|\n  for i in 1..len\n    input[i].each do |j|\n      if value[\"id\"] == j[\"id\"]\n        output &lt;&lt; value.merge(j)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>But i am getting wrong output array.There might be any number of sub array in multidimensional array.</p>\n\n<p>Thank,</p>\n"}, {"tags": ["ruby", "arrays", "push"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 6, "creation_date": 1428476861, "post_id": 29508071, "comment_id": 47172666, "body": "It&#39;s about precedence. As you see, <code>&lt;&lt;</code> has higher precedence than ternary operator. <code>array &lt;&lt; (true ? &#39;0&#39; : &#39;X&#39;)</code> will work as you expect."}, {"owner": {"reputation": 151, "user_id": 518257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126415ea28edfeab04dfb2d640ee5e71?s=128&d=identicon&r=PG", "display_name": "hiphapis", "link": "https://stackoverflow.com/users/518257/hiphapis"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1428477038, "post_id": 29508071, "comment_id": 47172768, "body": "Huh! Thanks @MarekLipka"}, {"owner": {"reputation": 204, "user_id": 1205719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd7b88190b686aca282a8d8147792367?s=128&d=identicon&r=PG", "display_name": "beornborn", "link": "https://stackoverflow.com/users/1205719/beornborn"}, "edited": false, "score": 0, "creation_date": 1428485335, "post_id": 29508071, "comment_id": 47177590, "body": "<code>&lt;&lt;</code> is just a method. you can call it like that <code>array.&lt;&lt;(true ? &quot;O&quot; : &quot;X&quot;)</code>. difference between push is only that push can accept multiple arguments <code>push *args</code>, but <code>&lt;&lt;</code> only 1"}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 1, "last_activity_date": 1428486605, "creation_date": 1428486605, "answer_id": 29511317, "question_id": 29508071, "link": "https://stackoverflow.com/questions/29508071/what-is-diffrent-and-push-in-ruby-array/29511317#29511317", "title": "what is diffrent &#39;&lt;&lt;&#39; and &#39;push&#39; in Ruby Array", "body": "<p>You can visualize the how the Ruby parser is seeing your 2 expressions using <a href=\"https://github.com/seattlerb/ruby_parser\" rel=\"nofollow\">ruby_parser</a> gem.</p>\n\n<pre><code>require 'ruby_parser'\nrequire 'pp'\n\npp RubyParser.new.parse 'true ? \"O\" : \"X\"'\n# =&gt; s(:if, s(:true), s(:str, \"O\"), s(:str, \"X\"))\n</code></pre>\n\n<p>Now, based on the above parsing result, compare this :</p>\n\n<pre><code>pp RubyParser.new.parse '[] &lt;&lt; true ? \"O\" : \"X\"'\n# =&gt; s(:if, s(:call, s(:array), :&lt;&lt;, s(:true)), s(:str, \"O\"), s(:str, \"X\"))\n#                    &lt;-----------------------&gt; look this part\n</code></pre>\n\n<p>And then,</p>\n\n<pre><code>pp RubyParser.new.parse '[].push(true ? \"O\" : \"X\")'\n# =&gt; s(:call, s(:array), :push, s(:if, s(:true), s(:str, \"O\"), s(:str, \"X\")))\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 518257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126415ea28edfeab04dfb2d640ee5e71?s=128&d=identicon&r=PG", "display_name": "hiphapis", "link": "https://stackoverflow.com/users/518257/hiphapis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "closed_date": 1428491296, "answer_count": 1, "score": 1, "last_activity_date": 1428486605, "creation_date": 1428476703, "last_edit_date": 1428476973, "question_id": 29508071, "link": "https://stackoverflow.com/questions/29508071/what-is-diffrent-and-push-in-ruby-array", "closed_reason": "Duplicate", "title": "what is diffrent &#39;&lt;&lt;&#39; and &#39;push&#39; in Ruby Array", "body": "<pre class=\"lang-rb prettyprint-override\"><code>array = []\narray &lt;&lt; true ? \"O\" : \"X\"\n</code></pre>\n\n<p>i did expect to <code>[\"O\"]</code>.<br>\nbut <code>array</code> is <code>[true]</code>  </p>\n\n<p>and now i use <code>push</code>\n</p>\n\n<pre><code>array.push(true ? \"O\" : \"X\")\n</code></pre>\n\n<p>then result is <code>[\"O\"]</code>  </p>\n\n<p>actually <code>true ? \"O\" : \"X\"</code> return to <code>\"O\"</code><br>\nmy assumption was <code>[\"O\"]</code> if use <code>&lt;&lt;</code> and <code>push</code> both. but it's not.<br>\nanybody known why?</p>\n"}, {"tags": ["ruby", "excel", "rubyxl"], "answers": [{"tags": [], "owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "is_accepted": false, "score": 0, "last_activity_date": 1429037711, "creation_date": 1429037711, "answer_id": 29635275, "question_id": 29507841, "link": "https://stackoverflow.com/questions/29507841/create-multiple-sheets-that-uses-same-template-using-rubyxl/29635275#29635275", "title": "Create multiple sheets that uses same template using rubyxl", "body": "<pre><code>template = RubyXL::Parser.parse 'path/to/template.xlsx'\nsheet1 = template.worksheets[0]\nsheet2 = template.worksheets[0]\n#your code manipulating sheet1, sheet2 etc.\nreturn RubyXL::Workbook.new [sheet1, sheet2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 2240763, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9011f4631fca4a166b6d2c188667c1c7?s=128&d=identicon&r=PG", "display_name": "Szymon Rut", "link": "https://stackoverflow.com/users/2240763/szymon-rut"}, "is_accepted": false, "score": 1, "last_activity_date": 1550320020, "last_edit_date": 1550320020, "creation_date": 1550314824, "answer_id": 54722346, "question_id": 29507841, "link": "https://stackoverflow.com/questions/29507841/create-multiple-sheets-that-uses-same-template-using-rubyxl/54722346#54722346", "title": "Create multiple sheets that uses same template using rubyxl", "body": "<p>I was able to achieve this by following these steps:</p>\n\n<h1>1. parse xlsx/xlsm file</h1>\n\n<pre><code>workbook = RubyXL::Parser.parse(File.join(Rails.root, \"public\", \"template.xlsm\")\n</code></pre>\n\n<h1>2. take worksheet template</h1>\n\n<pre><code>template = workbook[0]\n</code></pre>\n\n<h1>3. add a new worksheet to the workbook</h1>\n\n<pre><code>worksheet = workbook.add_worksheet(\"Example\")\n</code></pre>\n\n<h1>4. duplicate sheet_data</h1>\n\n<pre><code>worksheet.sheet_data = template.sheet_data.dup\nworksheet.sheet_data.rows = template.sheet_data.rows.map do |row|\n  next unless row\n  new_row = row.dup\n  new_row.worksheet = worksheet\n  new_row.cells = row.cells.map{ |cell| next unless cell; new_cell = cell.dup; new_cell.worksheet = worksheet; new_cell }\n  new_row\nend\n</code></pre>\n\n<p>Unfortunately <code>Marshal.dump</code> return error <code>no _dump_data is defined for class Nokogiri::XML::Namespace</code> for sheet_data's cells, so I had to write this dirty workaround.</p>\n\n<h1>5. copy everything else you need</h1>\n\n<pre><code>worksheet.cols = Marshal.load(Marshal.dump(template.cols))\nworksheet.merged_cells = Marshal.load(Marshal.dump(template.merged_cells))\n</code></pre>\n\n<p>for more attributes inspect <code>template.instance_variables</code></p>\n\n<p>You can also remove the template</p>\n\n<pre><code>workbook.worksheets.delete(template)\n</code></pre>\n\n<p>And return workbook with a new worksheet(s) by</p>\n\n<pre><code>send_data workbook.stream.string, filename: \"example.xlsm\", disposition: \"attachment\"\n</code></pre>\n\n<p>...in Your Rails controller</p>\n\n<p>or just save it to file</p>\n\n<pre><code>workbook.write(\"path/to/desired/Excel/file.xlsx\")\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 1810505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c32fd61c155f244ce60e3aaa2fae0c4?s=128&d=identicon&r=PG&f=1", "display_name": "zoro", "link": "https://stackoverflow.com/users/1810505/zoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1550320020, "creation_date": 1428475994, "question_id": 29507841, "link": "https://stackoverflow.com/questions/29507841/create-multiple-sheets-that-uses-same-template-using-rubyxl", "title": "Create multiple sheets that uses same template using rubyxl", "body": "<p>I have an excel template which has only one sheet(Sheet1).Is it possible using rubyxl to generate multiple sheets that uses Sheet1 as template in my output file?</p>\n"}, {"tags": ["ruby", "url", "oauth-2.0", "authorization", "onedrive"], "answers": [{"tags": [], "owner": {"reputation": 764, "user_id": 3930758, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2d20d71ca93a31bf75a5fd36f302babe?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Radhakrishnan", "link": "https://stackoverflow.com/users/3930758/balaji-radhakrishnan"}, "is_accepted": true, "score": 0, "last_activity_date": 1428645940, "creation_date": 1428645940, "answer_id": 29554452, "question_id": 29507825, "link": "https://stackoverflow.com/questions/29507825/onedrive-file-picker-not-opening-when-using-authorization-code-flow/29554452#29554452", "title": "Onedrive File picker not opening when using authorization code flow", "body": "<p>The error is that we need to make the URL the same as the URL that would be obtained when Authorization token flow is used.</p>\n\n<p>Also, while making URL make sure its encoded and also response_type value should be URL not COOKIE</p>\n"}], "owner": {"reputation": 764, "user_id": 3930758, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2d20d71ca93a31bf75a5fd36f302babe?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Radhakrishnan", "link": "https://stackoverflow.com/users/3930758/balaji-radhakrishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 29554452, "answer_count": 1, "score": 0, "last_activity_date": 1428645940, "creation_date": 1428475959, "question_id": 29507825, "link": "https://stackoverflow.com/questions/29507825/onedrive-file-picker-not-opening-when-using-authorization-code-flow", "title": "Onedrive File picker not opening when using authorization code flow", "body": "<p>I am following the <a href=\"https://msdn.microsoft.com/en-us/library/office/dn631818.aspx#authcodegrant\" rel=\"nofollow\">Microsoft onedrive documentation</a>  authorization code flow to grant my user access to their onedrive files.</p>\n\n<p>I got the access_code and sent a POST request using ruby with access_code, client_id, clien_secret and got the access_token as a JSON response.</p>\n\n<p>when I try appending this access_token,scopes,state,.. along with My Redirect_url to access the Onedrive file Picker the window closes. The following is the sample URL of that</p>\n\n<pre><code> http://MY_REDIRECT_URL/onedrive#access_token=My_access_token&amp;token_type=bearer&amp;expires_in=3600&amp;scope=wl.skydrive%20wl.signin&amp;state=redirect_type%3dauth%26display%3dpage%26request_ts%3d1427963180884%26response_method%3durl%26secure_cookie%3dfalse&amp;user_id=My_USER_ID\n</code></pre>\n\n<p>when I used the same URL in Authorization token flow it's properly opening  the file picker.\nWhen I checked the wl_auth cookie value it's saying</p>\n\n<pre><code> error=invalid_cookie&amp;error_description=The%20'wl_auth'%20cookie%20has%20been%20modified%20incorrectly.%20Ensure%20that%20the%20redirect%20URI%20only%20modifies%20sub-keys%20for%20values%20received%20from%20the%20OAuth%20endpoint.&amp;status=connected\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "calabash", "calabash-android"], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 1899285, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/UCOAZ.jpg?s=128&g=1", "display_name": "Maury", "link": "https://stackoverflow.com/users/1899285/maury"}, "edited": false, "score": 0, "creation_date": 1428475819, "post_id": 29507655, "comment_id": 47172132, "body": "There sanjaykumar5115 only update gherkin-2.12.0-x86-mingw32 to gherkin-2.12.1-x86-mingw32, in my gems there is gherkin-2.12.2-x86-mingw32 i can&#39;t update higher :/"}, {"owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "reply_to_user": {"reputation": 574, "user_id": 1899285, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/UCOAZ.jpg?s=128&g=1", "display_name": "Maury", "link": "https://stackoverflow.com/users/1899285/maury"}, "edited": false, "score": 0, "creation_date": 1428476231, "post_id": 29507655, "comment_id": 47172325, "body": "Opss, Then leave your comment in git issue. Maybe they can help you."}, {"owner": {"reputation": 7030, "user_id": 3536342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGovx.png?s=128&g=1", "display_name": "DavidPostill", "link": "https://stackoverflow.com/users/3536342/davidpostill"}, "edited": false, "score": 0, "creation_date": 1428477089, "post_id": 29507655, "comment_id": 47172800, "body": "Please quote the essential parts of the answer from the reference link(s), as the answer can become invalid if the linked page(s) change."}, {"owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "reply_to_user": {"reputation": 7030, "user_id": 3536342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGovx.png?s=128&g=1", "display_name": "DavidPostill", "link": "https://stackoverflow.com/users/3536342/davidpostill"}, "edited": false, "score": 0, "creation_date": 1428477683, "post_id": 29507655, "comment_id": 47173153, "body": "@davidpostill, updated the answer and added essential."}], "tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": -1, "last_activity_date": 1428477610, "last_edit_date": 1428477610, "creation_date": 1428475256, "answer_id": 29507655, "question_id": 29507570, "link": "https://stackoverflow.com/questions/29507570/cannot-load-such-file-2-2-gherkin-lexer-en-how-to-fix/29507655#29507655", "title": "cannot load such file -- 2.2/gherkin_lexer_en, how to fix?", "body": "<p>This problem looks like <a href=\"https://github.com/cucumber/cucumber/issues/519\" rel=\"nofollow\">this issue</a>. Maybe you can resolve by following comments in it. (y)</p>\n\n<blockquote>\n  <p>sanjaykumar5115 commented,\n  my probelm have been solved after uninstalling gherkin and installing gherkin-2.12.1-x86-mingw32</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 20198, "user_id": 326370, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4bb78735000e374a6f0887b58347e7?s=128&d=identicon&r=PG", "display_name": "Ilya Kogan", "link": "https://stackoverflow.com/users/326370/ilya-kogan"}, "edited": false, "score": 0, "creation_date": 1435877588, "post_id": 29510484, "comment_id": 50396273, "body": "Thank you, downgrading from 2.2 to 2.0 worked. Thank you for the detailed instructions, I did exactly as you said."}], "tags": [], "owner": {"reputation": 574, "user_id": 1899285, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/UCOAZ.jpg?s=128&g=1", "display_name": "Maury", "link": "https://stackoverflow.com/users/1899285/maury"}, "is_accepted": true, "score": 1, "last_activity_date": 1428484343, "creation_date": 1428484343, "answer_id": 29510484, "question_id": 29507570, "link": "https://stackoverflow.com/questions/29507570/cannot-load-such-file-2-2-gherkin-lexer-en-how-to-fix/29510484#29510484", "title": "cannot load such file -- 2.2/gherkin_lexer_en, how to fix?", "body": "<ul>\n<li>I download Ruby 2.0 x86 from <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">http://rubyinstaller.org/downloads/</a></li>\n<li>Install exe</li>\n<li>Command in cmd: <code>gem install calabash-android</code></li>\n<li><code>ERROR:  Error installing calabash-android:\n    The 'json' native gem requires installed build tools.</code></li>\n<li>Download from <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">http://rubyinstaller.org/downloads/</a> DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe</li>\n<li>Extract DevKit to path C:\\Ruby200\\DevKit</li>\n<li>Run cd C:\\Ruby200\\DevKit</li>\n<li>Run ruby dk.rb init</li>\n<li>Run ruby dk.rb review</li>\n<li>Run ruby dk.rb install</li>\n<li>And again use command <code>gem install calabash-android</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "is_accepted": false, "score": 0, "last_activity_date": 1460978119, "creation_date": 1460978119, "answer_id": 36692396, "question_id": 29507570, "link": "https://stackoverflow.com/questions/29507570/cannot-load-such-file-2-2-gherkin-lexer-en-how-to-fix/36692396#36692396", "title": "cannot load such file -- 2.2/gherkin_lexer_en, how to fix?", "body": "<p>I have simply solved by removing <code>Gherkin</code> and reinstalling it by <code>bundle install</code></p>\n\n<pre><code>gem uninstall gherkin\n&gt;&gt; select all\nbundle install\n</code></pre>\n"}], "owner": {"reputation": 574, "user_id": 1899285, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/UCOAZ.jpg?s=128&g=1", "display_name": "Maury", "link": "https://stackoverflow.com/users/1899285/maury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2944, "favorite_count": 1, "accepted_answer_id": 29510484, "answer_count": 3, "score": 3, "last_activity_date": 1460978119, "creation_date": 1428474937, "last_edit_date": 1428654597, "question_id": 29507570, "link": "https://stackoverflow.com/questions/29507570/cannot-load-such-file-2-2-gherkin-lexer-en-how-to-fix", "title": "cannot load such file -- 2.2/gherkin_lexer_en, how to fix?", "body": "<p>I need a little help. How do I resolve this problem?</p>\n\n<p>When I call <code>cucumber</code> I get the following error:</p>\n\n<pre><code>  *** WARNING: You must use ANSICON 1.31 or higher (https://github.com/adoxa/ansic\non/) to get coloured output on Windows\nWARNING: cannot load such file -- 2.2/gherkin_lexer_en\nCouldn't load 2.2/gherkin_lexer_en\nThe $LOAD_PATH was:\nlib\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/cucumber-1.3.19/bin/../lib\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/builder-3.2.2/lib\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/diff-lcs-1.2.5/lib\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/multi_json-1.11.0/lib\nC:/Ruby22/lib/ruby/gems/2.2.0/gems/gherkin-2.12.2-x86-mingw32/lib\n[...]\n</code></pre>\n\n<p>System:</p>\n\n<ul>\n<li>Windows 8.1 x64</li>\n<li>Ruby 2.2.1 installer</li>\n</ul>\n\n<p>I got answer:\n<a href=\"https://github.com/cucumber/cucumber/issues/830#issuecomment-90837546\" rel=\"nofollow\">https://github.com/cucumber/cucumber/issues/830#issuecomment-90837546</a></p>\n\n<blockquote>\n  <p>I'm afraid Cucumber on Windows/Ruby requires ruby 2.0.0 (x86). The\n  reason is that the gherkin gem doesn't yet ship with compiled binaries\n  for more recent versions or Ruby, and not for x64.</p>\n  \n  <p>We're working on a Gherkin3 which will address this issue. See this\n  post for background. I cannot give you an ETA, but it's at least a few\n  months away.</p>\n</blockquote>\n"}, {"tags": ["ruby", "user-interface", "progress-bar", "shoes"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 4766357, "user_type": "registered", "profile_image": "https://graph.facebook.com/915898881791205/picture?type=large", "display_name": "Lam Nguyen", "link": "https://stackoverflow.com/users/4766357/lam-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1428532517, "creation_date": 1428532517, "answer_id": 29526530, "question_id": 29506985, "link": "https://stackoverflow.com/questions/29506985/execute-the-code-every-5-minutes-and-showing-progress-bar-in-ruby-shoes/29526530#29526530", "title": "Execute the code every 5 minutes and showing progress bar in Ruby Shoes", "body": "<p>I change your code, so that it's executed every 10 seconds. You can modify it yourself to every 5 minutes. Try it and thank me later ;) </p>\n\n<pre><code>Shoes.app do\nstack :margin =&gt; 0.1 do\ntitle \"Progress bar\"\n   @p = progress :width =&gt; 1.0\n   @animate = animate (1) do |i|\n     @p.fraction = (i % 10) / 10.0\n     @animate.stop if @p.fraction &gt; 0.9\n   end\n\n   every(10) do |p|\n         #main codes go here\n   end\n end\n end\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4762092, "user_type": "registered", "profile_image": "https://graph.facebook.com/974190029259131/picture?type=large", "display_name": "Long Potato", "link": "https://stackoverflow.com/users/4762092/long-potato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 1, "accepted_answer_id": 29526530, "answer_count": 1, "score": 0, "last_activity_date": 1428532517, "creation_date": 1428472468, "last_edit_date": 1428485134, "question_id": 29506985, "link": "https://stackoverflow.com/questions/29506985/execute-the-code-every-5-minutes-and-showing-progress-bar-in-ruby-shoes", "title": "Execute the code every 5 minutes and showing progress bar in Ruby Shoes", "body": "<p>I'm new to Ruby Shoes. I am doing a program that will fetch the information from the internet every 5 minutes. </p>\n\n<p>I am thinking of using the ruby shoes method <code>every()</code>. A progress bar will show how close until it approaches the 5 minutes mark, then the main code get executed then the method will wait for 5 min to loop again. However, with this code, the program will wait after 300 sec to do the first iteration, so the progress bar won't show up until then. I want to ask if you can show me a way to work around this?</p>\n\n<p>Right now,I can't even think about how to tweak the <code>animate</code> to work with my 300 seconds, so I have to set <code>every(100)</code> and <code>animate(1)</code> so basically every 1:40 minute not 5 min.</p>\n\n<p>Anyway, my top priority right now is to make the progress bar show up not only during the iteration but also before it</p>\n\n<p>Sorry for the long post. This is my pseudo code for the progress bar I hope you can get the idea:</p>\n\n<pre><code>Shoes.app do\n  stack :margin =&gt; 0.1 do\n   title \"Progress bar\"\n   @p = progress :width =&gt; 1.0\n\n   every(100) do |p|\n     @animate = animate (1) do |i|\n       @p.fraction = (i % 100) / 100.0\n       @animate.stop if i &gt; 99\n     end\n     #main codes go here\n   end\n\n  end\n end\n</code></pre>\n\n<p>I am new to this and still learning. I appreciate your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-1.9.3"], "comments": [{"owner": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "edited": false, "score": 0, "creation_date": 1428471477, "post_id": 29506580, "comment_id": 47170203, "body": "Sure it&#39;s not a difference in the versions of ruby being used?"}, {"owner": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "edited": false, "score": 0, "creation_date": 1428471760, "post_id": 29506580, "comment_id": 47170323, "body": "Hmm.. probably not. I get 112 in ruby 1.9, and 114 in ruby 2.2. Not sure where 201 could be coming from."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "edited": false, "score": 0, "creation_date": 1428472572, "post_id": 29506580, "comment_id": 47170647, "body": "I am using ruby 2.2.0, 1.9.3 and have found difference in both the version, but from where this 201 came ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428473059, "post_id": 29506580, "comment_id": 47170859, "body": "Where did you get 201? I don&#39;t see it at the Ruby Monk link. Note in v2.2, <code>1.0.methods.count #=&gt; 114</code>, but also   <code>1.0.private_methods.count #=&gt; 76</code>. <code>114+76 =&gt; 190</code>."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428473285, "post_id": 29506580, "comment_id": 47170947, "body": "@CarySwoveland I have already given link for page where the result is 201.  please scroll down in the page and you will find it"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428473817, "post_id": 29506580, "comment_id": 47171165, "body": "I see, I have to run some code to see it."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428473894, "post_id": 29506580, "comment_id": 47171210, "body": "@CarySwoveland  For you sir: <a href=\"https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/37-classes-inheritance/lessons/83-understanding-inheritance\" rel=\"nofollow noreferrer\">rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/&hellip;</a>"}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "edited": false, "score": 0, "creation_date": 1428474045, "post_id": 29506580, "comment_id": 47171277, "body": "I tweeted @jasim_ab who is the owner of that material. waiting for his reply as well"}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1428475096, "post_id": 29506580, "comment_id": 47171781, "body": "I have tried to explain, hope you get it. :)"}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1428482305, "post_id": 29506580, "comment_id": 47175656, "body": "@SharvyAhmed Thanks a lot, really appreciate your effort"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1428475334, "post_id": 29507391, "comment_id": 47171891, "body": "You are saying that the number is higher than what one would expect because Rails (or some parts thereof) had been loaded. That&#39;s a convincing explanation, but I would not go so far as saying &quot;there is no discrepancy&quot;.  After all, this course is called &quot;Ruby Primer&quot;, a course in pure Ruby.  It&#39;s reasonable to expect that the numbers of instance methods shown as being defined on Float would be for just Ruby, and that number does not vary greatly from one recent version to the next. cyborg, I suggest you pass that suggestion on to one of the course authors."}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428475921, "post_id": 29507391, "comment_id": 47172184, "body": "@CarySwoveland, Different Ruby versions may have a little difference between instance methods but not like 100. And I have checked instance methods of Float class in Rubymonk console, they showed all instance methods of Object class (Extended by ActiveSupport Core) along with instance methods of Float class (Defined in Ruby Core)."}, {"owner": {"reputation": 12784, "user_id": 1373987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bca7defe7b8087d8e261d32b29cf425e?s=128&d=identicon&r=PG", "display_name": "joshua.paling", "link": "https://stackoverflow.com/users/1373987/joshua-paling"}, "edited": false, "score": 0, "creation_date": 1428476515, "post_id": 29507391, "comment_id": 47172476, "body": "Yep, if you do &#39;puts ActiveSupport.to_s&#39; in the RubyMonk console, it is indeed defined. Silly - it probably shouldn&#39;t be there."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428476896, "post_id": 29507391, "comment_id": 47172682, "body": "We have first-hand evidence  in the form of the OP&#39;s question that saying <code>Float</code> has 201 instance methods is baffling to students who wish to check the calculations on their own computers.  Egad, it&#39;s baffling to many of us with a fair bit of experience. Should we expect newbies to conclude the difference is due to the fact that Rails is loaded, when the only rails they know about are made of steel? No, the course should display the number of instance methods defined on Float for (some recent version of) pure-Ruby. That&#39;s not difficult and to me it&#39;s a &quot;no-brainer&quot;."}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428477307, "post_id": 29507391, "comment_id": 47172934, "body": "@CarySwoveland, you are absolutely right, for a newbie it would be really hard and confusing. They should have exposed the Ruby console instead of Rails console."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428477444, "post_id": 29507391, "comment_id": 47173017, "body": "btw, I upvoted you answer even though I disagree with the &quot;no discrepancy&quot; assertion..."}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1428477665, "post_id": 29507391, "comment_id": 47173138, "body": "I appreciate your appreciation. :) You can edit my answer, if the answer sounds slightly incorrect or improper."}, {"owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1428481997, "post_id": 29507391, "comment_id": 47175480, "body": "Thanks @CarySwoveland and SharvyAhmed. I got what I want from this question. My doubt got cleared though I am trying to connect with author of that material as well. Let my learning grow and interest in ruby rise exponentially :)"}], "tags": [], "owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "is_accepted": false, "score": 2, "last_activity_date": 1428478338, "last_edit_date": 1428478338, "creation_date": 1428474249, "answer_id": 29507391, "question_id": 29506580, "link": "https://stackoverflow.com/questions/29506580/why-there-is-discrepanceis-in-number-of-instance-methods/29507391#29507391", "title": "Why there is discrepanceis in number of instance methods?", "body": "<p>There is no discrepancy in total number of instance methods of Ruby <code>Float</code> class (of same version). The number may vary based on Ruby version, but no two same Ruby versions will have different instance methods.</p>\n\n<blockquote>\n  <p>I have seen the count of Float instance methods as 201</p>\n</blockquote>\n\n<p>What you are seeing is the total number of instance methods of Extended Float class. The extension is done by Rails.</p>\n\n<p>For example, in Rubymonk terminal, instance methods list of Float class shows <code>duplicable?</code> in their list, which is obviously is not an instance method of Float class. It's implemented in <code>ActiveSupport</code> by extending the core <code>Object</code> class and is deprecated after Rails 3.2.13.</p>\n"}], "owner": {"reputation": 798, "user_id": 2699253, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/954236abb0d238d574bb1ca452406eb6?s=128&d=identicon&r=PG&f=1", "display_name": "cyborg", "link": "https://stackoverflow.com/users/2699253/cyborg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428478338, "creation_date": 1428470650, "question_id": 29506580, "link": "https://stackoverflow.com/questions/29506580/why-there-is-discrepanceis-in-number-of-instance-methods", "title": "Why there is discrepanceis in number of instance methods?", "body": "<p>While going through the <a href=\"https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/37-classes-inheritance/lessons/83-understanding-inheritance\" rel=\"nofollow\">ruby monk</a> I have seen the count of Float instance methods as 201 but when I tried in my irb it is showing just 114. It will be really helpful if someone make me understand why there is change in the number of count in instance methods and on what factors this instance methods depends on.</p>\n\n<pre><code>puts Float.instance_methods.count\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 5503, "user_id": 1004617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0a9d0eb893217c4b0de8278ce09f7b?s=128&d=identicon&r=PG", "display_name": "gotva", "link": "https://stackoverflow.com/users/1004617/gotva"}, "edited": false, "score": 0, "creation_date": 1428473780, "post_id": 29506246, "comment_id": 47171150, "body": "Do you use <code>git</code>? it looks like one machine has <code>spec_helper</code>, another doesn&#39;t. Maybe you added <code>spec_helper</code> to project and forgot to push it."}, {"owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 0, "creation_date": 1428477227, "post_id": 29506246, "comment_id": 47172883, "body": "Can you be a little more clear?  It sounds like what you&#39;re saying might be the case, I was trying to do a rspec tutorial then stopped, to study something else which ruined testing with rake and using rspec.  I checked git status and there&#39;s nothing to push."}, {"owner": {"reputation": 5503, "user_id": 1004617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0a9d0eb893217c4b0de8278ce09f7b?s=128&d=identicon&r=PG", "display_name": "gotva", "link": "https://stackoverflow.com/users/1004617/gotva"}, "edited": false, "score": 0, "creation_date": 1428481950, "post_id": 29506246, "comment_id": 47175451, "body": "Your problem is missed <code>spec_helper</code> on second machine. Check it"}, {"owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "edited": false, "score": 0, "creation_date": 1428507679, "post_id": 29506246, "comment_id": 47193524, "body": "Oh thanks guys, my bad all I had to do was type rspec --init I didn&#39;t think that because in this separate tutorial it didn&#39;t tell me that."}], "owner": {"reputation": 41, "user_id": 3904053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98b662c3314b9caf92910968a4a150e9?s=128&d=identicon&r=PG&f=1", "display_name": "Shu-Woon", "link": "https://stackoverflow.com/users/3904053/shu-woon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428468903, "creation_date": 1428468903, "question_id": 29506246, "link": "https://stackoverflow.com/questions/29506246/rspec-works-on-one-computer-but-not-the-other", "title": "Rspec works on one computer but not the other", "body": "<p><a href=\"http://i.gyazo.com/5cbfb4fc96bd9538a5ad619064654ac9.png\" rel=\"nofollow\">Desktop with rspec working</a></p>\n\n<p><a href=\"http://i.imgur.com/9C1BIr0.png\" rel=\"nofollow\">Laptop where rspec isn't working</a></p>\n\n<p>I'm pretty sure I installed stuff wrong on my laptop, I can't run tests on my laptop using rspec, it always blasts me with all this text, and doesn't tell me if anything is pending..failed or w.e.</p>\n\n<p>I'm trying to run tests through this ruby kick-start tutorial, and it's not working.  I have no clue what the problem could be. other than a path issue.</p>\n\n<p>When I type in    whereis ruby  it comes out as blank.\nWhile on my desktop it lists a bunch of paths where ruby is at.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 975, "user_id": 4760970, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202663280701768/picture?type=large", "display_name": "SteveK", "link": "https://stackoverflow.com/users/4760970/stevek"}, "edited": false, "score": 2, "creation_date": 1428468442, "post_id": 29506020, "comment_id": 47169189, "body": "I <i>think</i> I understand what you&#39;re asking, but could you provide a specific example with a couple sample rows of data and how you&#39;d like for it to look?"}, {"owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "edited": false, "score": 0, "creation_date": 1428471995, "post_id": 29506020, "comment_id": 47170420, "body": "May be following things may help you, User.find(:all, limit: &#39;10, 10000000000&#39;) And User.find(:all, limit: 10, offset: 10) also you can add <code>order</code> in it."}], "answers": [{"tags": [], "owner": {"reputation": 3558, "user_id": 2559490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/20wjg.jpg?s=128&g=1", "display_name": "Hardik", "link": "https://stackoverflow.com/users/2559490/hardik"}, "is_accepted": true, "score": 1, "last_activity_date": 1428468579, "creation_date": 1428468579, "answer_id": 29506168, "question_id": 29506020, "link": "https://stackoverflow.com/questions/29506020/rails-query-n-ids-before-and-after-some-id/29506168#29506168", "title": "Rails: Query n IDs before and after some ID", "body": "<p>Guessing that you want to query user by limiting ID(specific range of ID) i think following should work</p>\n\n<pre><code>user_id_min_range = 5\nuser_id_max_range = 10\nUser.where(id: (user_id_min_range..user_id_max_range))\n</code></pre>\n\n<p>Above code will return users whose ID are between 6-10</p>\n\n<p>Or you can also do like following</p>\n\n<pre><code>User.where(\"id &gt; ?\", 5).order(id: :asc).limit(5)\n</code></pre>\n\n<p>Above query will select users with id greater than 5 and order them in Ascending ID and return top 5 users.</p>\n"}, {"tags": [], "owner": {"reputation": 5014, "user_id": 3640770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HJBjs.jpg?s=128&g=1", "display_name": "IngoAlbers", "link": "https://stackoverflow.com/users/3640770/ingoalbers"}, "is_accepted": false, "score": 1, "last_activity_date": 1428479891, "creation_date": 1428479891, "answer_id": 29509040, "question_id": 29506020, "link": "https://stackoverflow.com/questions/29506020/rails-query-n-ids-before-and-after-some-id/29509040#29509040", "title": "Rails: Query n IDs before and after some ID", "body": "<p>If I understand your question correctly you could use this scopes:</p>\n\n<pre><code>scope :next_users, -&gt;(start_id, user_limit) {\n  order(id: :asc).where(\"id &gt; ?\", start_id).limit(user_limit)\n}\n\nscope :before_users, -&gt;(start_id, user_limit) {\n  order(id: :desc).where(\"id &lt; ?\", start_id).limit(user_limit)\n}\n</code></pre>\n\n<p>They will select n of the next or before users for a predefined user id.</p>\n"}], "owner": {"reputation": 811, "user_id": 2760406, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8c8ba0bfa80963047f72f43f8e0b7182?s=128&d=identicon&r=PG&f=1", "display_name": "gr8scott06", "link": "https://stackoverflow.com/users/2760406/gr8scott06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 29506168, "answer_count": 2, "score": 3, "last_activity_date": 1428508848, "creation_date": 1428467765, "last_edit_date": 1428508848, "question_id": 29506020, "link": "https://stackoverflow.com/questions/29506020/rails-query-n-ids-before-and-after-some-id", "title": "Rails: Query n IDs before and after some ID", "body": "<p>I would like to query n users before and after some user.</p>\n\n<p><strong>Edit:</strong> for clarity</p>\n\n<pre><code>def local_query(id, range)\n  local_min = id - range*0.5\n  local_max = id + range*0.5\n  local_users = User.where(id: [local_min..local_max])\n  return local_users\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 31446, "user_id": 18804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/058ed9c852869d7557262a8d2ce8783b?s=128&d=identicon&r=PG", "display_name": "philant", "link": "https://stackoverflow.com/users/18804/philant"}, "edited": false, "score": 0, "creation_date": 1428472535, "post_id": 29505941, "comment_id": 47170632, "body": "it is better to create one question \u2026 per question :)"}, {"owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "reply_to_user": {"reputation": 31446, "user_id": 18804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/058ed9c852869d7557262a8d2ce8783b?s=128&d=identicon&r=PG", "display_name": "philant", "link": "https://stackoverflow.com/users/18804/philant"}, "edited": false, "score": 0, "creation_date": 1428472813, "post_id": 29505941, "comment_id": 47170752, "body": "So, should I create another question? :/"}, {"owner": {"reputation": 576, "user_id": 4628440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3da493842e50c2fcfcf3805165065?s=128&d=identicon&r=PG", "display_name": "Santiago Su&#225;rez", "link": "https://stackoverflow.com/users/4628440/santiago-su%c3%a1rez"}, "edited": false, "score": 0, "creation_date": 1428474562, "post_id": 29505941, "comment_id": 47171534, "body": "you can just use a decimal instead of an integer"}, {"owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "edited": false, "score": 0, "creation_date": 1428501565, "post_id": 29505941, "comment_id": 47188776, "body": "Just for fun...   n = (@num.to_s.length - 1)/3.0; r = (@num[0...-(n.to_i*3)] + (&quot;,000&quot; * n.to_i) ).to_i"}], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1428468001, "answer_count": 0, "score": 0, "last_activity_date": 1428471295, "creation_date": 1428467250, "last_edit_date": 1592644375, "question_id": 29505941, "link": "https://stackoverflow.com/questions/29505941/how-to-add-commas-to-a-large-integer-number-and-add-zeros-after-first-comma", "closed_reason": "Duplicate", "title": "How to add commas to a large integer number and add zeros after first comma", "body": "<p>Consider  an integer number <code>@num = 27565</code>. I want to display it as <code>27,000</code></p>\n<p>I tried this in my rails console:</p>\n<pre><code>number_with_delimiter(12345678)   # =&gt; 12,345,678\n</code></pre>\n<p>But I am getting this error:</p>\n<pre><code>NoMethodError: undefined method `number_with_delimiter' for main:Object\n</code></pre>\n<p>Some of the examples are:</p>\n<pre><code>12345678   # =&gt; 12,000,000\n27565   # =&gt; 27,000\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<hr />\n<p>The <code>NoMethodError</code> was fixed by following:</p>\n<p><a href=\"https://stackoverflow.com/questions/4112050/how-to-use-all-view-and-helper-methods-inside-of-rails-console-for-rails-2-x-and\">How to use all view and helper methods inside of Rails console for Rails 2.x and 3.x?</a></p>\n<p>But my second question, i.e how to add zeros after first comma, was not answered.</p>\n"}, {"tags": ["ruby", "gem", "osx-mavericks"], "comments": [{"owner": {"reputation": 20350, "user_id": 411944, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7bf057b98d0652db34842d1817234853?s=128&d=identicon&r=PG", "display_name": "Reactormonk", "link": "https://stackoverflow.com/users/411944/reactormonk"}, "edited": false, "score": 0, "creation_date": 1428477992, "post_id": 29505792, "comment_id": 47173321, "body": "Got some more information? Pretty sure rubygems stores the backtrace somewhere."}, {"owner": {"reputation": 2664, "user_id": 787842, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/58ce85efba210120fb040e34cc445103?s=128&d=identicon&r=PG", "display_name": "cjauvin", "link": "https://stackoverflow.com/users/787842/cjauvin"}, "reply_to_user": {"reputation": 20350, "user_id": 411944, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7bf057b98d0652db34842d1817234853?s=128&d=identicon&r=PG", "display_name": "Reactormonk", "link": "https://stackoverflow.com/users/411944/reactormonk"}, "edited": false, "score": 0, "creation_date": 1428496188, "post_id": 29505792, "comment_id": 47184808, "body": "I have added some additional infos.. does that help?"}, {"owner": {"reputation": 2664, "user_id": 787842, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/58ce85efba210120fb040e34cc445103?s=128&d=identicon&r=PG", "display_name": "cjauvin", "link": "https://stackoverflow.com/users/787842/cjauvin"}, "reply_to_user": {"reputation": 20350, "user_id": 411944, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7bf057b98d0652db34842d1817234853?s=128&d=identicon&r=PG", "display_name": "Reactormonk", "link": "https://stackoverflow.com/users/411944/reactormonk"}, "edited": false, "score": 0, "creation_date": 1428496572, "post_id": 29505792, "comment_id": 47185067, "body": "Sorry I just realized that it does not help, as it&#39;s the same error message.."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 2439263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/75f2720fd85b9fb3d1d1d3918a5257de?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/2439263/scott"}, "is_accepted": false, "score": 0, "last_activity_date": 1444967380, "creation_date": 1444967380, "answer_id": 33162258, "question_id": 29505792, "link": "https://stackoverflow.com/questions/29505792/trouble-installing-bropages-on-osx/33162258#33162258", "title": "Trouble installing bropages on OSX", "body": "<p>Have you tried it with <code>sudo</code>, I am running into the same issues as you, but my errors mentioned permissions, so I am going to go with sudo.  It is strange, as I had it installed once before, and now it no longer seems to be there.</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 144121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fc6006769c6a24c3559272cdc162371?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/144121/sean"}, "is_accepted": false, "score": 0, "last_activity_date": 1452028646, "creation_date": 1452028646, "answer_id": 34621384, "question_id": 29505792, "link": "https://stackoverflow.com/questions/29505792/trouble-installing-bropages-on-osx/34621384#34621384", "title": "Trouble installing bropages on OSX", "body": "<p>Make sure you've installed the Xcode Command Line Tools, which brings with it a bunch of utilities, including what you need to build a gem module.</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>After you've installed the package, give the install another go.</p>\n"}, {"tags": [], "owner": {"reputation": 3889, "user_id": 414075, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9bd2fa005d80986390510518f00476e8?s=128&d=identicon&r=PG", "display_name": "white_gecko", "link": "https://stackoverflow.com/users/414075/white-gecko"}, "is_accepted": false, "score": 0, "last_activity_date": 1464352348, "creation_date": 1464352348, "answer_id": 37483698, "question_id": 29505792, "link": "https://stackoverflow.com/questions/29505792/trouble-installing-bropages-on-osx/37483698#37483698", "title": "Trouble installing bropages on OSX", "body": "<p>I guess you are using a <code>.gemrc</code> in your home directory, where you specify the <code>gemhome</code>. Instead of using a <code>~</code> for your home directory you should enter the complete path. In your example it should look as follow:</p>\n\n<pre><code>$ cat ~/.gemrc\ngemhome: /Users/christian/.gem/\n</code></pre>\n\n<p>There must be some inconsistency between the ruby/gem tools. If you use a <code>~</code> in <code>.gemrc</code>, a subdirectory called <code>/current/working/directory/~/.gem</code> is created, while the extensions are put into your homes <code>/home/user/.gem/</code> directory.</p>\n"}], "owner": {"reputation": 2664, "user_id": 787842, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/58ce85efba210120fb040e34cc445103?s=128&d=identicon&r=PG", "display_name": "cjauvin", "link": "https://stackoverflow.com/users/787842/cjauvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1464352348, "creation_date": 1428466288, "last_edit_date": 1428496148, "question_id": 29505792, "link": "https://stackoverflow.com/questions/29505792/trouble-installing-bropages-on-osx", "title": "Trouble installing bropages on OSX", "body": "<p>When I try to install bropages on Mavericks, I get:</p>\n\n<pre><code>$ gem install bropages\nBuilding native extensions.  This could take a while...\nERROR:  Error installing bropages:\nERROR: Failed to build gem native extension.\n\n    No such file or directory @ dir_chdir - /Users/christian/.gem/gems/unf_ext-0.0.6/ext/unf_ext\n\nGem files will remain installed in /Users/christian/.gem/gems/unf_ext-0.0.6 for inspection.\nResults logged to /Users/christian/.gem/extensions/x86_64-darwin-13/2.2.0- static/unf_ext-0.0.6/gem_make.out\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>$ cat /Users/christian/.gem/extensions/x86_64-darwin-13/2.2.0-static/unf_ext-0.0.6/gem_make.out\nNo such file or directory @ dir_chdir - /Users/christian/.gem/gems/unf_ext-0.0.6/ext/unf_ext\n</code></pre>\n\n<p>I'm using ruby 2.2.1 and gem 2.4.5, both managed with rbenv. Any idea what could cause this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strftime"], "comments": [{"owner": {"reputation": 149047, "user_id": 762073, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7fb6b9bc012cd839a99ba778c722c5a7?s=128&d=identicon&r=PG", "display_name": "xdazz", "link": "https://stackoverflow.com/users/762073/xdazz"}, "edited": false, "score": 0, "creation_date": 1428466137, "post_id": 29505744, "comment_id": 47168510, "body": "what is the input and expected output?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1428481101, "post_id": 29505744, "comment_id": 47174988, "body": "Please show your <code>time_object</code>"}, {"owner": {"reputation": 2661, "user_id": 3224822, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1eee17ab6ffceb707f75a21cb54f4ca4?s=128&d=identicon&r=PG&f=1", "display_name": "johnsorrentino", "link": "https://stackoverflow.com/users/3224822/johnsorrentino"}, "edited": false, "score": 0, "creation_date": 1428517054, "post_id": 29505744, "comment_id": 47199225, "body": "I updated my question with an example."}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 3, "last_activity_date": 1428466355, "creation_date": 1428466355, "answer_id": 29505803, "question_id": 29505744, "link": "https://stackoverflow.com/questions/29505744/ruby-whats-the-strftime-equivalent-of-hhhmmss/29505803#29505803", "title": "Ruby - What&#39;s the strftime equivalent of hhh:mm:ss?", "body": "<p>Ruby does not natively have a duration class, time objects only specify points in time. Thus, <code>Time#strftime</code> will always have hours in <code>0-23</code> range. Durations are expressed as numbers, with <code>1</code> being one second; and needless to say, <code>Float</code> does not have <code>strftime</code> method.</p>\n\n<p>If you need durations, you will need to make them yourself, or use a library that already does it for you (for example, <a href=\"https://github.com/peleteiro/ruby-duration\" rel=\"nofollow\">duration</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1428471324, "creation_date": 1428471324, "answer_id": 29506720, "question_id": 29505744, "link": "https://stackoverflow.com/questions/29505744/ruby-whats-the-strftime-equivalent-of-hhhmmss/29506720#29506720", "title": "Ruby - What&#39;s the strftime equivalent of hhh:mm:ss?", "body": "<p>Further to @Amadan's explanation, here's an easy way to compute time offsets for the time string format you wish to use:</p>\n\n<pre><code>require 'time'\n\ndef new_time(basetime, offset)\n  sign = (offset[0]=='-') ? - 1 : 1\n  str = (sign==1) ? offset : offset[1..-1] \n  hrs, mins, secs = str.split(':').map(&amp;:to_i)\n  basetime + sign*(60*(60*hrs + mins) + secs)\nend  \n\nbasetime = Time.parse('Apr 1, 2015') #=&gt; 2015-04-01 00:00:00 -0700\nnew_time(basetime,   \"8:22:34\")      #=&gt; 2015-04-01 08:22:34 -0700 \nnew_time(basetime,  \"38:22:34\")      #=&gt; 2015-04-02 14:22:34 -0700 \nnew_time(basetime, \"138:22:34\")      #=&gt; 2015-04-06 18:22:34 -0700 \nnew_time(basetime,  \"-8:22:34\")      #=&gt; 2015-03-31 15:37:26 -0700 \n</code></pre>\n"}], "owner": {"reputation": 2661, "user_id": 3224822, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1eee17ab6ffceb707f75a21cb54f4ca4?s=128&d=identicon&r=PG&f=1", "display_name": "johnsorrentino", "link": "https://stackoverflow.com/users/3224822/johnsorrentino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1428506360, "creation_date": 1428465983, "last_edit_date": 1428506360, "question_id": 29505744, "link": "https://stackoverflow.com/questions/29505744/ruby-whats-the-strftime-equivalent-of-hhhmmss", "title": "Ruby - What&#39;s the strftime equivalent of hhh:mm:ss?", "body": "<p>I know that hh:mm:ss is <code>time_object.strftime('%H:%M:%S')</code>. I'm using this formatting for a length of time that's over 24 hours so the hour portion overflows. What's the correct way to get hhh:mm:ss in strftime?</p>\n\n<p>EDIT: Example requested.</p>\n\n<p>What happens:</p>\n\n<pre><code>Time.at(90000).utc.strftime('%H:%M:%S')\n=&gt; \"01:00:00\"\n\nTime.at(432000).utc.strftime('%H:%M:%S')\n=&gt; \"00:00:00\"\n</code></pre>\n\n<p>What I want to happen:</p>\n\n<pre><code>Time.at(90000).utc.something_else\n=&gt; \"25:00:00\"\n\nTime.at(432000).utc.something_else\n=&gt; \"120:00:00\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "node.js", "meteor"], "comments": [{"owner": {"reputation": 10936, "user_id": 3961546, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/h74ga.jpg?s=128&g=1", "display_name": "Ethaan", "link": "https://stackoverflow.com/users/3961546/ethaan"}, "edited": false, "score": 0, "creation_date": 1428466300, "post_id": 29505672, "comment_id": 47168556, "body": "This is primarily opinion-based, but i will let you this link of meteorpedia named <a href=\"http://www.meteorpedia.com/read/Why_Meteor\" rel=\"nofollow noreferrer\">why Meteor?</a> it explains very well why should consider using app on future projects, take a look on it"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1428467047, "post_id": 29505672, "comment_id": 47168749, "body": "&quot;So far I&#39;ve eaten with fingers, but for my next meal I want to try an utensil, so should I use a spoon or a fork?&quot; It&#39;s not a matter of opinion - spoon for soup, fork for meat. What are you building? There are things Node can do that Rails can&#39;t, and there are things that are easy in Ruby that are painful in JavaScript. In particular, Node is great at holding a bunch of connections at the same time, and holding simultaneous communication between them. Rails can&#39;t do that."}, {"owner": {"reputation": 13407, "user_id": 291180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Crlpe.png?s=128&g=1", "display_name": "Travis Webb", "link": "https://stackoverflow.com/users/291180/travis-webb"}, "edited": false, "score": 0, "creation_date": 1428512266, "post_id": 29505672, "comment_id": 47196414, "body": "You should also take a good look at <a href=\"http://sailsjs.org\" rel=\"nofollow noreferrer\"><b>sails.js</b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 3367294, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dcfac0841da4d45166ca7cd366859bff?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/3367294/george"}, "edited": false, "score": 0, "creation_date": 1428466744, "post_id": 29505836, "comment_id": 47168663, "body": "Is Ruby on rails also cross platform?"}, {"owner": {"reputation": 800, "user_id": 1833177, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7145080805d78faef2c26efbb4b7ea11?s=128&d=identicon&r=PG", "display_name": "cmw2379", "link": "https://stackoverflow.com/users/1833177/cmw2379"}, "reply_to_user": {"reputation": 291, "user_id": 3367294, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dcfac0841da4d45166ca7cd366859bff?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/3367294/george"}, "edited": false, "score": 0, "creation_date": 1428466856, "post_id": 29505836, "comment_id": 47168699, "body": "It is supported on all major platforms, but development on Linux environments is a lot more enjoyable in my opinion. Also, IDE&#39;s such as Ruby Mine make development a breeze with built in servers and functionality."}], "tags": [], "owner": {"reputation": 800, "user_id": 1833177, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7145080805d78faef2c26efbb4b7ea11?s=128&d=identicon&r=PG", "display_name": "cmw2379", "link": "https://stackoverflow.com/users/1833177/cmw2379"}, "is_accepted": false, "score": 3, "last_activity_date": 1428466564, "creation_date": 1428466564, "answer_id": 29505836, "question_id": 29505672, "link": "https://stackoverflow.com/questions/29505672/should-i-make-my-next-app-in-ruby-on-rails-or-node-js-meteor/29505836#29505836", "title": "Should I make my next app in Ruby on Rails or Node.js (meteor)?", "body": "<p>So I'm quite biased towards Ruby On Rails since I've been developing in it for a while now, but I believe I have a bias for good reason. </p>\n\n<p>Before I explain more though, I have never developed in Node.js so take everything I say with a grain of salt between them.</p>\n\n<p>First, on future proofing, RoR has been around for a while now and holds some of the highest paying jobs on Web Development. Node.js has high paying jobs as well, but it's fairly new to the scene so RoR wins on reliability of high paying jobs. RoR also is seen as a specialty so the amount of people needing good RoR developers is amazing. I alone have been approached in my area since I'm one of few RoR developers with a lot of experience for my age. Now this doesn't say much about my skill exactly, but RoR developers are sought after a lot right now.</p>\n\n<p>Second, RoR is a joy to code in. It takes a bit to figure out, but once it all starts falling into place, it's amazing how enjoyable it is to work with. Also, RoR is all about designing the RoR way so once you get a few projects going, code reuse is huge. I can get a full blown site up in a few hours now due to how many database setups and models I have pretty baked. That alone is one of my favorite things about RoR.</p>\n\n<p>Finally, the RoR community online is booming. It's been around for a while so there is loads of documentation, but it's also gaining traction in the startup world so it's starting to become important to know a bit about. This means there is a whole new wave of RoR developers happening now that could result in some fantastic new developments for an already awesome framework. Only time will tell. </p>\n\n<p>All in all I would suggest RoR. </p>\n"}, {"tags": [], "owner": {"reputation": 6346, "user_id": 1626821, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d2ec30e55fdefdfba201cf408bb392d4?s=128&d=identicon&r=PG", "display_name": "imslavko", "link": "https://stackoverflow.com/users/1626821/imslavko"}, "is_accepted": false, "score": 4, "last_activity_date": 1428467143, "creation_date": 1428467143, "answer_id": 29505914, "question_id": 29505672, "link": "https://stackoverflow.com/questions/29505672/should-i-make-my-next-app-in-ruby-on-rails-or-node-js-meteor/29505914#29505914", "title": "Should I make my next app in Ruby on Rails or Node.js (meteor)?", "body": "<p>I think you should try a little bit of both and go with the one that gets easier to you or feels more natural. Also, take into consideration, if there are people around you who can help you with one or another.</p>\n\n<p>(There is a joke: the best Linux distro is the one that is running on the computer of your closest Linux-fan friend.)</p>\n\n<p>I must say that Meteor is much younger than Rails, which means a smaller community (but still very active and supportive) and less number of developed 3rd party modules (but Meteor still offers more than 4000 3rd party packages on Atmosphere).</p>\n\n<p>The development environment is very fleshed out for Meteor. Also tooling, like WebStorm, support Meteor. I personally developed multiple Meteor-related extensions for Vim and Sublime Text, too.</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 3188943, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/22bf7660c8ae7e7e5daa19f708f7f15e?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Kwong", "link": "https://stackoverflow.com/users/3188943/andy-kwong"}, "is_accepted": false, "score": 1, "last_activity_date": 1428468764, "creation_date": 1428468764, "answer_id": 29506212, "question_id": 29505672, "link": "https://stackoverflow.com/questions/29505672/should-i-make-my-next-app-in-ruby-on-rails-or-node-js-meteor/29506212#29506212", "title": "Should I make my next app in Ruby on Rails or Node.js (meteor)?", "body": "<p>I would definitely consider using MeteorJS if you want to focus on mobile apps.  It works ideally with Phonegap/Cordova. </p>\n"}, {"tags": [], "owner": {"reputation": 72659, "user_id": 950147, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/dBHHI.jpg?s=128&g=1", "display_name": "Akshat", "link": "https://stackoverflow.com/users/950147/akshat"}, "is_accepted": false, "score": 5, "last_activity_date": 1428476870, "last_edit_date": 1428476870, "creation_date": 1428476478, "answer_id": 29507991, "question_id": 29505672, "link": "https://stackoverflow.com/questions/29505672/should-i-make-my-next-app-in-ruby-on-rails-or-node-js-meteor/29507991#29507991", "title": "Should I make my next app in Ruby on Rails or Node.js (meteor)?", "body": "<p>I would put it down to what you want to achieve.</p>\n\n<p>If your priority is on SEO stick to RoR. Meteor is still young and isn't reliable when it comes to SEO. There is an option to use PhantomJS to render web pages but its not very reliable, in the sense PhantomJS will crash often. The alternative is server side rendering which isn't officially supported yet.</p>\n\n<p>That said, If your goal is to make a Company web app, or Mobile app or anything else really Meteor is the sure way to go. </p>\n\n<p>You can pretty much achieve the same apps as on RoR with the slightly better UX since everything is based on one page. Npm packages can be used on Meteor as well as the atmospherejs repository which unbounds most limitations you could seek to accomplish.</p>\n\n<p>Its also said that its fast to make apps on RoR. The same could be said for Meteor since its even faster (I've used both). The development experience is also smoother owing to </p>\n\n<ul>\n<li>Hot code reloads when you change files</li>\n<li>Reactive data sources (no meddling with ajax/get requests or sockets)</li>\n<li>Isomorphic code - helps you create server and client side data models with one file instead of a ruby server file and a js client file. The same file can be shared on the client &amp; the server</li>\n<li>An extension of the isomorphism: easier handling of data between the client and server since both sides are javascript. No serialising or deserialising data back and forth. Very helpful with dates in particular (as with other data types too)</li>\n<li>Easy user login system owing to the atmosphere packages.</li>\n<li>Can easily convert a Meteor app into a mobile app for Android or iOS due to the official cordova support.</li>\n<li>No trouble with setting up databases during the development phase as it runs together with the meteor dev environment per-app</li>\n<li>Easier to test in a collaborative environment due to the free <code>meteor deploy</code> infrastructure (could argue Heroku does the same for RoR on this one - but it does need a bit of setup with the SSH keys whereas the meteor one doesn't even need you to visit a website to set it up)</li>\n<li>Works on Windows, Linux and OS X. If you have a team project you can share code easily. Meteor also autoinstalls (no <code>gem install</code>) the packages and their dependencies automatically (yup no looking for libiconv as you would for certain gem headers). Most binaries are prebuilt on atmosphere.</li>\n<li>No 'callback-hell' on the server side with Meteor owing to it using fibers. So you can have asynchronous or synchronous code.</li>\n<li>Built on NodeJS so you can use NodeJS code/community support from answers like on Stackoverflow in your Meteor app. Best of both worlds.</li>\n</ul>\n\n<p>Ruby is certainly nice and clean &amp; easy to write. But so is Meteor. RoR is a bit more mature so more IDEs support it with autocompletion.</p>\n"}], "owner": {"reputation": 291, "user_id": 3367294, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dcfac0841da4d45166ca7cd366859bff?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/3367294/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4192, "favorite_count": 1, "closed_date": 1428482764, "answer_count": 4, "score": 4, "last_activity_date": 1428476870, "creation_date": 1428465503, "question_id": 29505672, "link": "https://stackoverflow.com/questions/29505672/should-i-make-my-next-app-in-ruby-on-rails-or-node-js-meteor", "closed_reason": "Opinion-based", "title": "Should I make my next app in Ruby on Rails or Node.js (meteor)?", "body": "<p>I am conflicted. I haven't worked very much with ruby on rails or node.js (meteor.js/express.js) in the past, but have primarily used php. I'm moving away from it gradually but don't know if i should focus on working with either node or ruby more. \nAny ideas/opinions if I were starting out which language will be the future or more prominent over time and easier to develop productively?\nMy apologies if i seem a bit rushed, but I am looking to make general web apps that can deploy to mobile as well. I see that meteor.js has this feature built in... but I am obviously open to recompiling for ruby on rails app to work on ios/android as well.\nPlease don't criticize me, i'm just starting out with these two!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "arrays"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1428464570, "post_id": 29505453, "comment_id": 47168126, "body": "Start with <code>elif</code> =&gt; <code>elsif</code>, and fix <code>if minesarray[row][col] = &#39;*&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 149047, "user_id": 762073, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7fb6b9bc012cd839a99ba778c722c5a7?s=128&d=identicon&r=PG", "display_name": "xdazz", "link": "https://stackoverflow.com/users/762073/xdazz"}, "is_accepted": false, "score": 2, "last_activity_date": 1428464663, "creation_date": 1428464663, "answer_id": 29505542, "question_id": 29505453, "link": "https://stackoverflow.com/questions/29505453/ruby-replacing-values-in-a-string-array-with-strings-ints/29505542#29505542", "title": "Ruby, replacing values in a string array with strings/ints", "body": "<p>The <code>row</code> and <code>col</code> is not the index of the array, but the element itself.</p>\n\n<p>You could do like below:</p>\n\n<pre><code>minesarray = [['*','.','.','.'],['.','.','*','.'],['.','.','.','.']]\n\ndef pp_board(board)\n    puts Array.new(board[0].size*2+1, '-').join('')\n    board.each do |row|\n        puts \"|\" + row.join(\"|\") + \"|\"\n        puts Array.new(row.size*2+1, '-').join('')\n    end\nend\n\npp_board(minesarray)\n\nminesarray = minesarray.map { |row|\n  row.map { |v|\n    if v == '*'\n      'a'\n    elsif v == '.'\n      '0'\n    end\n  }\n}\n\npp_board(minesarray)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21642, "user_id": 108105, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/05463d616d56d33fd6a61df100fbbb94?s=128&d=identicon&r=PG", "display_name": "Tom Dalling", "link": "https://stackoverflow.com/users/108105/tom-dalling"}, "is_accepted": false, "score": 1, "last_activity_date": 1428464687, "creation_date": 1428464687, "answer_id": 29505547, "question_id": 29505453, "link": "https://stackoverflow.com/questions/29505453/ruby-replacing-values-in-a-string-array-with-strings-ints/29505547#29505547", "title": "Ruby, replacing values in a string array with strings/ints", "body": "<p>The problem is that <code>row</code> and <code>col</code> are not indexes, they are the actual elements of the array.</p>\n\n<p>You also have a couple of other issues. \"elif\" should be <code>elsif</code> and you're using assignment (<code>=</code>) in your conditionals where you should be using an equality check (<code>==</code>).</p>\n"}], "owner": {"reputation": 35, "user_id": 4760790, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/518daf4e995dae8e2e0da60359a0c978?s=128&d=identicon&r=PG&f=1", "display_name": "EnduranceMan", "link": "https://stackoverflow.com/users/4760790/enduranceman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1428464687, "creation_date": 1428464090, "question_id": 29505453, "link": "https://stackoverflow.com/questions/29505453/ruby-replacing-values-in-a-string-array-with-strings-ints", "title": "Ruby, replacing values in a string array with strings/ints", "body": "<p>I'm trying to replace an array with a new array, replacing values as I go along.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>minesarray = [['*','.','.','.'],['.','.','*','.'],['.','.','.','.']]\n\ndef pp_board(board)\n    puts Array.new(board[0].size*2+1, '-').join('')\n    board.each do |row|\n        puts \"|\" + row.join(\"|\") + \"|\"\n        puts Array.new(row.size*2+1, '-').join('')\n    end\nend\n\npp_board(minesarray)\n\ncount = 0\n\nminesarray.map{ |row|\n    row.each { |col|\n        if minesarray[row][col] = '*'\n            minesarray[row][col]=\"a\"\n        elif minesarray[row][col] = '.'\n            minesarray[row][col] = 0\n        end\n    }\n}\n</code></pre>\n\n<p>I receive the following error:</p>\n\n<pre><code>mines2.rb:17:in '[]': can't convert Array into Integer (TypeError)\n   from mines2.rb:17:in 'block (2 levels) in (main)'\n   from mines2.rb:16:in 'each'\n   from mines2.rb:16:in 'block in (main)'\n   from mines2.rb:15:in 'map'\n   from mines2.rb:15:in '(main)'\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "chef-infra", "cookbook"], "answers": [{"tags": [], "owner": {"reputation": 6666, "user_id": 504685, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a3e57bc7970b15d66df2b983f4b6c0e?s=128&d=identicon&r=PG", "display_name": "Charlie", "link": "https://stackoverflow.com/users/504685/charlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1428462391, "creation_date": 1428462391, "answer_id": 29505219, "question_id": 29505082, "link": "https://stackoverflow.com/questions/29505082/chef-how-to-require-ruby-mysql-api-in-ruby-block/29505219#29505219", "title": "Chef: How to require ruby/mysql API in ruby_block?", "body": "<p>Chef runs in its own ruby instance (assuming you've installed using omnibus). You'll need to install the mysql gem into the Chef ruby using a <a href=\"https://docs.chef.io/resource_chef_gem.html\" rel=\"nofollow\">chef_gem</a> resource. Then you should be able to load the mysql ruby</p>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 3011757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d321596ac5bf5c962634bf2f688f1dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pubudu Perera", "link": "https://stackoverflow.com/users/3011757/pubudu-perera"}, "is_accepted": false, "score": 0, "last_activity_date": 1428477250, "creation_date": 1428477250, "answer_id": 29508228, "question_id": 29505082, "link": "https://stackoverflow.com/questions/29505082/chef-how-to-require-ruby-mysql-api-in-ruby-block/29508228#29508228", "title": "Chef: How to require ruby/mysql API in ruby_block?", "body": "<p>Add <code>chef_gem \"mysql2\"</code> at the top of your block before the require statement.</p>\n"}], "owner": {"reputation": 163, "user_id": 3732348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e587ad59f047df8f257d4245486d6d03?s=128&d=identicon&r=PG&f=1", "display_name": "talihsu", "link": "https://stackoverflow.com/users/3732348/talihsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 29505219, "answer_count": 2, "score": 1, "last_activity_date": 1428477250, "creation_date": 1428461506, "last_edit_date": 1428462121, "question_id": 29505082, "link": "https://stackoverflow.com/questions/29505082/chef-how-to-require-ruby-mysql-api-in-ruby-block", "title": "Chef: How to require ruby/mysql API in ruby_block?", "body": "<p>I'm new in ruby and chef. I built up a chef server and bootstrap a node successfully. I want to access Mysql on node through my cookbook without Mysql and database cookbook. I used ruby/mysql API. It worked well when was programmed in a single ruby file. The code is as follows.</p>\n\n<pre><code>require \"rubygems\"\nrequire \"mysql\"\n\nbegin\n    con = Mysql.new(\"localhost\", \"root\", \"123\")\n    res = con.query(\"create database abc\")\nrescue Mysql::Error =&gt; e\n    puts e.errno\n    puts e.error\nensure\n    con.close if con\nend\n</code></pre>\n\n<p>But when I added this code to a ruby_block in my cookbook and chef-client it, I got the error on node.</p>\n\n<pre><code>================================================================================\nError executing action `run` on resource 'ruby_block[test1]'\n================================================================================\n\nLoadError\n---------\ncannot load such file -- mysql\n\nCookbook Trace:\n---------------\n/var/chef/cache/cookbooks/db_test/recipes/default.rb:14:in `block (2 levels) in from_file'\n\nResource Declaration:\n---------------------\n# In /var/chef/cache/cookbooks/db_test/recipes/default.rb\n\n 11: ruby_block \"test1\" do\n 12:        block do\n 13:                require \"rubygems\"\n 14:                require \"mysql\"\n 15:\n 16:                begin\n 17:                        con = Mysql.new(\"localhost\", \"root\", \"123\")\n 18:                        res = con.query(\"create database abc\")\n 19:                rescue Mysql::Error =&gt; e\n 20:                        puts e.errno\n 21:                        puts e.error\n 22:                ensure\n 23:                        con.close if con\n 24:                end\n 25:        end\n 26: #      action :run\n\nCompiled Resource:\n------------------\n# Declared in /var/chef/cache/cookbooks/db_test/recipes/default.rb:11:in `from_file'\n\nruby_block(\"test1\") do\n  action \"run\"\n  retries 0\n  retry_delay 2\n  default_guard_interpreter :default\n  block_name \"test1\"\n  declared_type :ruby_block\n  cookbook_name \"db_test\"\n  recipe_name \"default\"\n  block #&lt;Proc:0x000000051907a8@/var/chef/cache/cookbooks/db_test/recipes/default.rb:12&gt;\nend\n\n\nRunning handlers:\n[2015-04-07T22:14:12-04:00] ERROR: Running exception handlers\nRunning handlers complete\n[2015-04-07T22:14:12-04:00] ERROR: Exception handlers complete\n[2015-04-07T22:14:12-04:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\nChef Client failed. 0 resources updated in 0.962999999 seconds\n[2015-04-07T22:14:12-04:00] ERROR: ruby_block[test1] (db_test::default line 11) had an error: LoadError: cannot load such file -- mysql\n[2015-04-07T22:14:12-04:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n</code></pre>\n\n<p>I couldn't figure out when the problem is. Could anyone help this?</p>\n"}, {"tags": ["ruby", "markdown", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 1966, "user_id": 3653668, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73cf2795c698c4b903cafb41a6a34bf6?s=128&d=identicon&r=PG&f=1", "display_name": "crowhill", "link": "https://stackoverflow.com/users/3653668/crowhill"}, "edited": false, "score": 0, "creation_date": 1428524974, "post_id": 29521247, "comment_id": 47203849, "body": "Yup. That&#39;s it. As a clarifying note to myself, I think a converter should only be dealing with markdown (or markdown-like) elements."}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 1, "last_activity_date": 1428513576, "creation_date": 1428513576, "answer_id": 29521247, "question_id": 29504952, "link": "https://stackoverflow.com/questions/29504952/access-site-or-post-variables-inside-a-jekyll-converter/29521247#29521247", "title": "Access site or post variables inside a jekyll converter", "body": "<h3>from a converter</h3>\n\n<p>No way. They are just converting content to hmtl.</p>\n\n<h3>from a generator</h3>\n\n<p>In the <code>Generate</code> method you receive the <code>site</code> object, you can then loop in <code>site.pages</code> and <code>site.posts</code>.</p>\n\n<h3>from a filter</h3>\n\n<p>Depending on what you pass to the filter you can get any page/post variable</p>\n\n<pre><code>module Jekyll\n  module MyFilters\n    def filter_name(page)\n      # do whatever with the page variables\n    end\n  end\nend\n\nLiquid::Template.register_filter(Jekyll::MyFilters)\n</code></pre>\n\n<p>Example call : <code>{{ page | filter_name }}</code></p>\n"}], "owner": {"reputation": 1966, "user_id": 3653668, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73cf2795c698c4b903cafb41a6a34bf6?s=128&d=identicon&r=PG&f=1", "display_name": "crowhill", "link": "https://stackoverflow.com/users/3653668/crowhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 1, "accepted_answer_id": 29521247, "answer_count": 1, "score": 1, "last_activity_date": 1428513576, "creation_date": 1428460742, "question_id": 29504952, "link": "https://stackoverflow.com/questions/29504952/access-site-or-post-variables-inside-a-jekyll-converter", "title": "Access site or post variables inside a jekyll converter", "body": "<p>In liquid, I can access, say, <code>{{ post.title }}</code> or any variables that are defined in the markdown. How can I get at the equivalent of <code>{{ post.title }}</code> from a converter or a generator or a filter?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 3540, "user_id": 131051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1b41d7397afdd0a922953945f1111e55?s=128&d=identicon&r=PG", "display_name": "GSP", "link": "https://stackoverflow.com/users/131051/gsp"}, "edited": false, "score": 0, "creation_date": 1428530492, "post_id": 29504946, "comment_id": 47206661, "body": "Normally a scope is used to return an AREL query object and are useful for chaining. It would be odd, IMHO, to see a scope that returned a boolean. I like your class method better. You could combine both: <code>scope :alternatives, -&gt;(apikey) { where(track_id: api_key) }</code> and <code>def any_alternatives?(apikey) Track.alternatives(apikey).count &gt; 0; end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1348, "user_id": 1180523, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52d6fb2e4b01dcbc7a23db19c6d442b3?s=128&d=identicon&r=PG", "display_name": "skplunkerin", "link": "https://stackoverflow.com/users/1180523/skplunkerin"}, "edited": false, "score": 0, "creation_date": 1428528507, "post_id": 29505247, "comment_id": 47205687, "body": "Good point @Austio, but no actually. We actually do the right model, the column happens to be called <code>track_id</code> even though we&#39;re not referencing another model called Track. I&#39;ll try your syntax to see if that helps, I&#39;ve never seen that syntax before... it&#39;s interesting that I need to specify the <code>api_key</code> variable twice?"}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "reply_to_user": {"reputation": 1348, "user_id": 1180523, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52d6fb2e4b01dcbc7a23db19c6d442b3?s=128&d=identicon&r=PG", "display_name": "skplunkerin", "link": "https://stackoverflow.com/users/1180523/skplunkerin"}, "edited": false, "score": 0, "creation_date": 1428538198, "post_id": 29505247, "comment_id": 47209172, "body": "If that syntax doesn&#39;t work then that means that their is something else happening.  To isolate start with going into your rails console and taking a known good api key and then doing a where.  Post the results here."}], "tags": [], "owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "is_accepted": false, "score": 0, "last_activity_date": 1428462931, "last_edit_date": 1428462931, "creation_date": 1428462569, "answer_id": 29505247, "question_id": 29504946, "link": "https://stackoverflow.com/questions/29504946/rails-why-cant-i-use-activerecord-exists-in-my-scope/29505247#29505247", "title": "Rails - why can&#39;t I use activerecord exists in my scope?", "body": "<p>Are you sure that you have the right search?  A Track having a track_id implies that there is a relation between Track and another track model which would be interesting.  </p>\n\n<p>Also the scope syntax is off.  A scope is just a query of the table, so traditionally it is only things associated with the current model.  </p>\n\n<pre><code>scope :any_alternates, -&gt;(api_key) { |api_key| where(track_id: api_key }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1348, "user_id": 1180523, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52d6fb2e4b01dcbc7a23db19c6d442b3?s=128&d=identicon&r=PG", "display_name": "skplunkerin", "link": "https://stackoverflow.com/users/1180523/skplunkerin"}, "edited": false, "score": 0, "creation_date": 1428528705, "post_id": 29505272, "comment_id": 47205786, "body": "I&#39;m passing in an actual value so I know it&#39;s not a nil issue... though I&#39;m interested to compare the generated statement using the scope versus defined method... I&#39;ll double check that to see if it&#39;s somehow interpreting as nil."}], "tags": [], "owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "is_accepted": false, "score": 0, "last_activity_date": 1428462717, "creation_date": 1428462717, "answer_id": 29505272, "question_id": 29504946, "link": "https://stackoverflow.com/questions/29504946/rails-why-cant-i-use-activerecord-exists-in-my-scope/29505272#29505272", "title": "Rails - why can&#39;t I use activerecord exists in my scope?", "body": "<p>Are you passing in nil?  That would cause all records to be returned.  You can drop the Track in the scope, like this:</p>\n\n<pre><code>scope :any_alternates,  lambda{|apikey| exists?(:track_id =&gt; apikey)}\n</code></pre>\n\n<p>Here is what happens when you pass in nil:</p>\n\n<pre><code>&gt; Track.any_alternates(nil).count\nTrack Exists (1.7ms)  SELECT  1 AS one FROM \"track\" WHERE \"tracks\".\"track_id\" IS NULL LIMIT 1\n</code></pre>\n\n<p>instead of passing in a value:</p>\n\n<pre><code>&gt; Track.any_alternates('X4DBA36gbtqgWl4F1')\nTrack Exists (0.4ms)  SELECT  1 AS one FROM \"tracks\" WHERE \"tracks\".\"track_id\" = $1 LIMIT 1  [[\"track_id\", \"X4DBA36gbtqgWl4F1\"]]\n</code></pre>\n"}], "owner": {"reputation": 1348, "user_id": 1180523, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/52d6fb2e4b01dcbc7a23db19c6d442b3?s=128&d=identicon&r=PG", "display_name": "skplunkerin", "link": "https://stackoverflow.com/users/1180523/skplunkerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428529979, "creation_date": 1428460716, "last_edit_date": 1428529979, "question_id": 29504946, "link": "https://stackoverflow.com/questions/29504946/rails-why-cant-i-use-activerecord-exists-in-my-scope", "title": "Rails - why can&#39;t I use activerecord exists in my scope?", "body": "<p>I'm trying to utilize <code>.exists?()</code> to return true or false, pretty simple. It would be nice to do the one-liner scope like so:</p>\n\n<pre><code>scope :any_alternates,  lambda{|apikey| Track.exists?(:track_id =&gt; apikey)}\n</code></pre>\n\n<p>Or even using this scope syntax:</p>\n\n<pre><code>scope :any_alternates,  -&gt;(apikey) {Track.exists?(:track_id =&gt; apikey)}\n</code></pre>\n\n<p>But for some reason, the above scopes will return all rows in my db table when there's not a match. It works how it should when it finds a match however, but breaks if none...</p>\n\n<p>I'm forced to create a method, which (to my knowledge) should be doing the same thing in the above scope:</p>\n\n<pre><code>def self.any_alternates(apikey)\n  return Track.exists?(:track_id =&gt; apikey)\nend\n</code></pre>\n\n<p>Any idea why <code>.exists?()</code> isn't working inside of my scope?</p>\n\n<h2>After some testing...</h2>\n\n<p>If there is no match, then the scope will return all rows in the DB... (I updated above to mention that). I checked the generated query on both the scope and method to see if there's a difference, but they're the same:</p>\n\n<pre><code>SELECT  1 AS one FROM `tracks`  WHERE `tracks`.`track_id` = '_btbd_uUmQT8hYUK3SrJ9Q' LIMIT 1\n</code></pre>\n\n<h2>Update:</h2>\n\n<p>even though I'm searching on a column called <code>track_id</code>, this column is not setup as a relationship to another model. I know this is confusing, but that's how this table got setup (for good reason, beyond this issue so not worth touching on here)</p>\n"}, {"tags": ["ruby", "paypal"], "answers": [{"comments": [{"owner": {"reputation": 25845, "user_id": 1133932, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5oN3M.jpg?s=128&g=1", "display_name": "Manish Shrivastava", "link": "https://stackoverflow.com/users/1133932/manish-shrivastava"}, "edited": false, "score": 0, "creation_date": 1439210263, "post_id": 29524749, "comment_id": 51751961, "body": "thanks for suggestion. I created an account and transferred money from there.It worked!"}], "tags": [], "owner": {"reputation": 3607, "user_id": 3253090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3FzLQ.jpg?s=128&g=1", "display_name": "Eshan", "link": "https://stackoverflow.com/users/3253090/eshan"}, "is_accepted": true, "score": 2, "last_activity_date": 1428524958, "creation_date": 1428524958, "answer_id": 29524749, "question_id": 29504824, "link": "https://stackoverflow.com/questions/29504824/paypal-payouts-sender-has-insufficient-funds-in-sandbox/29524749#29524749", "title": "PayPal Payouts &quot;Sender has insufficient funds&quot; in Sandbox", "body": "<p>For the mass payments you must have the PayPal balance . For the sandbox while creating the account it prompt you to specify the amount to show in the PayPal balance . But if you have missed that , you can create the new sandbox account and specifying the amount this time . </p>\n\n<p>Otherwise you can provide your sandbox email address I can transfer you the money from my sandbox account to continue with the same sandbox account . </p>\n"}, {"tags": [], "owner": {"reputation": 1126, "user_id": 2410689, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/d5pzE.jpg?s=128&g=1", "display_name": "Egbert Nierop", "link": "https://stackoverflow.com/users/2410689/egbert-nierop"}, "is_accepted": false, "score": 2, "last_activity_date": 1528883240, "creation_date": 1528883240, "answer_id": 50834132, "question_id": 29504824, "link": "https://stackoverflow.com/questions/29504824/paypal-payouts-sender-has-insufficient-funds-in-sandbox/50834132#50834132", "title": "PayPal Payouts &quot;Sender has insufficient funds&quot; in Sandbox", "body": "<p>The answer possibly could be, that you have several currencies, say, EUR and you have a EUR balance of 1000, but you are trying to payout in USD. \nSo, what you should do, is login to sandbox.paypal.com using the test account, and level the currencies, so, transfer EUROs to USDs and now retry the payment, and it should succeed.</p>\n"}], "owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 29524749, "answer_count": 2, "score": 3, "last_activity_date": 1528883240, "creation_date": 1428459861, "question_id": 29504824, "link": "https://stackoverflow.com/questions/29504824/paypal-payouts-sender-has-insufficient-funds-in-sandbox", "title": "PayPal Payouts &quot;Sender has insufficient funds&quot; in Sandbox", "body": "<p>I'm trying to setup a <code>PayPal Payout</code>. I've got my API calls going through but in the sandbox I keep getting: <code>Sender has insufficient funds</code>. How can I add funds to my application? I can't seem to find an option to specify an account to send from.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "edited": false, "score": 0, "creation_date": 1428458016, "post_id": 29504499, "comment_id": 47166449, "body": "If you put this test in <code>spec&#47;requests</code> you won&#39;t need to specify the <code>type</code> manually on the test."}, {"owner": {"reputation": 4088, "user_id": 31325, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e3a81c8d6a57cfefb13d66e248792eba?s=128&d=identicon&r=PG", "display_name": "baash05", "link": "https://stackoverflow.com/users/31325/baash05"}, "reply_to_user": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "edited": false, "score": 0, "creation_date": 1428458163, "post_id": 29504499, "comment_id": 47166490, "body": "Yeah..the problem is that I have it in a lib folder   spec/lib/payments And the filename is _full_integration_spec.rb   I don&#39;t think requests is specific enough.."}, {"owner": {"reputation": 4088, "user_id": 31325, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e3a81c8d6a57cfefb13d66e248792eba?s=128&d=identicon&r=PG", "display_name": "baash05", "link": "https://stackoverflow.com/users/31325/baash05"}, "reply_to_user": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "edited": false, "score": 0, "creation_date": 1428458223, "post_id": 29504499, "comment_id": 47166497, "body": "I also have the test tagged so it only runs when I specifically ask for it, but that&#39;s another question :)"}], "tags": [], "owner": {"reputation": 4088, "user_id": 31325, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e3a81c8d6a57cfefb13d66e248792eba?s=128&d=identicon&r=PG", "display_name": "baash05", "link": "https://stackoverflow.com/users/31325/baash05"}, "is_accepted": false, "score": 0, "last_activity_date": 1428457797, "creation_date": 1428457797, "answer_id": 29504499, "question_id": 29504498, "link": "https://stackoverflow.com/questions/29504498/rspec-how-can-i-have-many-controllers-in-one-test-how-can-i-change-controllers/29504499#29504499", "title": "Rspec: How can I have many controllers in one test? How can I change controllers in a test?", "body": "<p>Okay.. I figured this out, thanks to other answers.. I'm just writing it out simpler, for my own notes.. and for future hunters.</p>\n\n<pre><code>describe 'Payments Integration', :type =&gt; :request do\n  let(:attributes) { p 'blabla' }\n  it 'should create user and billing details'  do\n      expect{\n        post '/api/account', account: attributes\n      }.to change(User,:count).by(1)\n      user = User.find(json['account']['id'])\n      auth  = user.authentication_token\n\n      expect{ \n        post '/api/billing_details', auth_token: auth, credit_card: valid_card\n      }.to change(BillingDetail,:count).by(1)\n  end\nend\n</code></pre>\n\n<p>I had many posts and puts, but this code is enough to get anyone started.</p>\n"}], "owner": {"reputation": 4088, "user_id": 31325, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e3a81c8d6a57cfefb13d66e248792eba?s=128&d=identicon&r=PG", "display_name": "baash05", "link": "https://stackoverflow.com/users/31325/baash05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428457797, "creation_date": 1428457797, "last_edit_date": 1495542130, "question_id": 29504498, "link": "https://stackoverflow.com/questions/29504498/rspec-how-can-i-have-many-controllers-in-one-test-how-can-i-change-controllers", "title": "Rspec: How can I have many controllers in one test? How can I change controllers in a test?", "body": "<p>I'm running into an interesting issue when I try to write a full walk through test. </p>\n\n<p>First, I'd like to acknowledge that tests should be discrete and specific things. This fact I know.. but :)</p>\n\n<p>But as with a play and learning lines, I think it's a good idea to have a full walk through test before you open the doors. To this end I want to write a massive integration test, that hits a pile of controllers.  It will be super slow so I've already isolated it to run only when asked for. But now I'm stuck</p>\n\n<p>I can't seem to figure out how to \"hit\" the controllers. </p>\n\n<p>I've tried setting my test type to 'integration' and stipulating. I followed the steps outlined in this questions answer <a href=\"https://stackoverflow.com/questions/7290035/post-to-a-different-controller-in-an-rspec-test\">post to a different controller in an rspec test</a>\nAnd I threw in a 1/0 in the controller, and it never hit. </p>\n"}, {"tags": ["ruby", "arrays", "syntax", "hash"], "answers": [{"tags": [], "owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "is_accepted": false, "score": 0, "last_activity_date": 1428455790, "creation_date": 1428455790, "answer_id": 29504232, "question_id": 29504142, "link": "https://stackoverflow.com/questions/29504142/ruby-syntax-code-involving-hashes/29504232#29504232", "title": "ruby syntax code involving hashes", "body": "<p>The <code>inject</code> method acts like an accumulator. Here is a simpler example:</p>\n\n<pre><code>sum = [1,2,3].inject(0) { |current_tally, new_value| current_tally + new_value }\n</code></pre>\n\n<p>The 0 is the starting point.</p>\n\n<p>So after the first line, we have a hash that maps each number to the number of times it appears.</p>\n\n<p>The mode calls for the most frequent element, and that is what the next line does: selects only those who are equal to the maximum.</p>\n"}, {"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1428459160, "last_edit_date": 1428459160, "creation_date": 1428458853, "answer_id": 29504660, "question_id": 29504142, "link": "https://stackoverflow.com/questions/29504142/ruby-syntax-code-involving-hashes/29504660#29504660", "title": "ruby syntax code involving hashes", "body": "<p>Line by line:</p>\n\n<pre><code>answer = array.inject ({}) { |k, v| k[v]=array.count(v);k}\n</code></pre>\n\n<p>This assembles a hash of counts. I would not have called the variable <code>answer</code> because it is not the answer, it is an intermediary step. The <code>inject()</code> method (also known as <code>reduce()</code>) allows you to iterate over a collection, keeping an accumulator (e.g. a running total or in this case a hash collecting counts). It needs a starting value of <code>{}</code> so that the hash exists when attempting to store a value. Given the array <code>[1,2,2,2,3,4,5,6,6]</code> the counts would look like this: <code>{1=&gt;1, 2=&gt;3, 3=&gt;1, 4=&gt;1, 5=&gt;1, 6=&gt;2}</code>.</p>\n\n<pre><code>answer.select { |k,v| v == answer.values.max}.keys\n</code></pre>\n\n<p>This selects all elements in the above hash whose value is equal to the maximum value, in other words the highest. Then it identifies the <code>keys</code> associated with the maximum values. Note that it will list multiple values if they share the maximum value. </p>\n\n<p>An alternative: </p>\n\n<p>If you didn't care about returning multiple, you could use group_by as follows:     </p>\n\n<pre><code>array.group_by{|x|x}.values.max_by(&amp;:size).first\n</code></pre>\n\n<p>or, in Ruby 2.2+:</p>\n\n<pre><code>array.group_by{&amp;:itself}.values.max_by(&amp;:size).first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 1762229, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8a20ff0549452b8af407481f8319c383?s=128&d=identicon&r=PG", "display_name": "user1762229", "link": "https://stackoverflow.com/users/1762229/user1762229"}, "edited": false, "score": 0, "creation_date": 1428530623, "post_id": 29505698, "comment_id": 47206718, "body": "thank you for explaining this in such depth, it really helped me get a better understanding of the code"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1428466342, "last_edit_date": 1428466342, "creation_date": 1428465688, "answer_id": 29505698, "question_id": 29504142, "link": "https://stackoverflow.com/questions/29504142/ruby-syntax-code-involving-hashes/29505698#29505698", "title": "ruby syntax code involving hashes", "body": "<p>I believe your question has been answered, and @Mark mentioned different ways to do the calculations. I would like to just focus on other ways to improve the first line of code:</p>\n\n<pre><code>answer = array.inject ({}) { |k, v| k[v] = array.count(v); k }\n</code></pre>\n\n<p>First, let's create some data:</p>\n\n<pre><code>array = [1,2,1,4,3,2,1]\n</code></pre>\n\n<p><strong>Use <code>each_with_object</code> instead of <code>inject</code></strong></p>\n\n<p>My suspicion is that the code might be fairly old, as <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\">Enumerable#each_with_object</a>, which was introduced in v. 1.9, is arguably a better choice here than <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-inject\" rel=\"nofollow\">Enumerable#inject</a> (aka <code>reduce</code>). If we were to use <code>each_with_object</code>, the first line would be:</p>\n\n<pre><code>answer = array.each_with_object ({}) { |v,k| k[v] = array.count(v) }\n  #=&gt; {1=&gt;3, 2=&gt;2, 4=&gt;1, 3=&gt;1}\n</code></pre>\n\n<p><code>each_with_object</code> returns the object, a hash held by the block variable <code>v</code>.</p>\n\n<p>As you see, <code>each_with_object</code> is very similar to <code>inject</code>, the only differences being:</p>\n\n<ul>\n<li>it is not necessary to return <code>v</code> from the block to <code>each_with_object</code>, as it is with <code>inject</code> (the reason for that annoying <code>; v</code> at the end of <code>inject</code>'s block);</li>\n<li>the block variable for the object (<code>k</code>) follows <code>v</code> with <code>each_with_object</code>, whereas it proceeds <code>v</code> with <code>inject</code>; and</li>\n<li>when not given a block, <code>each_with_object</code> returns an enumerator, meaning it can be chained to other other methods (e.g., <code>arr.each_with_object.with_index ...</code>.</li>\n</ul>\n\n<p>Don't get me wrong, <code>inject</code> remains an extremely powerful method, and in many situations it has no peer.</p>\n\n<p><strong>Two more improvements</strong></p>\n\n<p>In addition to replacing <code>inject</code> with <code>each_with_object</code>, let me make two other changes:</p>\n\n<pre><code>answer = array.uniq.each_with_object ({}) { |k,h| h[k] = array.count(k) }\n  #=&gt; {1=&gt;3, 2=&gt;2, 4=&gt;1, 3=&gt;1} \n</code></pre>\n\n<p>In the original expression, the object returned by <code>inject</code> (sometimes called the \"memo\") was represented by the block variable <code>k</code>, which I am using to represent a hash key (\"k\" for \"key\"). Simlarly, as the object is a hash, I chose to use <code>h</code> for its block variable. Like many others, I prefer to keep the block variables short and use names that indicate object type (e.g., <code>a</code> for array, <code>h</code> for hash, <code>s</code> for string, <code>sym</code> for symbol, and so on).</p>\n\n<p>Now suppose:</p>\n\n<pre><code>array = [1,1]\n</code></pre>\n\n<p>then <code>inject</code> would pass the first <code>1</code> into the block and then compute <code>k[1] = array.count(1) #=&gt; 2</code>, so the hash <code>k</code> returned to <code>inject</code> would be <code>{1=&gt;2}</code>. It would then pass the second <code>1</code> into the block, again compute <code>k[1] = array.count(1) #=&gt; 2</code>, overwriting <code>1=&gt;1</code> in <code>k</code> with <code>1=&gt;1</code>; that is, not changing it at all. Doesn't it make more sense to just do this for the unique values of <code>array</code>? That's why I have: <code>array.uniq...</code>.</p>\n\n<p><strong>Even better: use a counting hash</strong></p>\n\n<p>This is still quite inefficient--all those <code>counts</code>. Here's a way that reads better and is probably more efficient:</p>\n\n<pre><code>array.each_with_object(Hash.new(0)) { |k,h| h[k] += 1 }\n  #=&gt; {1=&gt;3, 2=&gt;2, 4=&gt;1, 3=&gt;1} \n</code></pre>\n\n<p>Let's have a look at this in gory detail. Firstly, the docs for <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-c-new\" rel=\"nofollow\">Hash#new</a> read, \"If <code>obj</code> is specified [i.e., <code>Hash.new(obj)</code>], this single object will be used for all default values.\" This means that if:</p>\n\n<pre><code>h = Hash.new('cat')\n</code></pre>\n\n<p>and <code>h</code> does not have a key <code>dog</code>, then:</p>\n\n<pre><code>h['dog'] #=&gt; 'cat'\n</code></pre>\n\n<p>Important: The last expression is often misunderstood. It merely returns the default value. <code>str = \"It does *not* add the key-value pair 'dog'=&gt;'cat' to the hash.\"</code> Let me repeat that: <code>puts str</code>.</p>\n\n<p>Now let's see what's happening here:</p>\n\n<pre><code>enum = array.each_with_object(Hash.new(0))\n  #=&gt; #&lt;Enumerator: [1, 2, 1, 4, 3, 2, 1]:each_with_object({})&gt; \n</code></pre>\n\n<p>We can see the contents of the enumerator by converting it to an array:</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[1, {}], [2, {}], [1, {}], [4, {}], [3, {}], [2, {}], [1, {}]] \n</code></pre>\n\n<p>These seven elements are passed into the block by the method <code>each</code>:</p>\n\n<pre><code>enum.each { |k,h| h[k] += 1 }\n  =&gt; {1=&gt;3, 2=&gt;2, 4=&gt;1, 3=&gt;1}\n</code></pre>\n\n<p>Pretty cool, eh?</p>\n\n<p>We can simulate this using <a href=\"http://ruby-doc.org/core-2.1.5/Enumerator.html#method-i-next\" rel=\"nofollow\">Enumerator#next</a>. The first value of <code>enum</code> (<code>[1, {}]</code>) is passed to the block and assigned to the block variables:</p>\n\n<pre><code>k,h = enum.next\n  #=&gt; [1, {}] \nk #=&gt; 1 \nh #=&gt; {} \n</code></pre>\n\n<p>and we compute:</p>\n\n<pre><code>h[k] += 1\n  #=&gt; h[k] = h[k] + 1  (what '+=' means)\n  #        = 0 + 1 = 1 (h[k] on the right equals the default value\n  #                     of 1 since `h` has no key `k`) \n</code></pre>\n\n<p>so now:</p>\n\n<pre><code>h #=&gt; {1=&gt;1}\n</code></pre>\n\n<p>Next, <code>each</code> passes the second value of <code>enum</code> into the block and similar calculations are performed:</p>\n\n<pre><code>k,h = enum.next\n  #=&gt; [2, {1=&gt;1}] \nk #=&gt; 2 \nh #=&gt; {1=&gt;1} \nh[k] += 1\n  #=&gt; 1 \nh #=&gt; {1=&gt;1, 2=&gt;1} \n</code></pre>\n\n<p>Things are a little different when the third element of <code>enum</code> is passed in, because <code>h</code> now has a key <code>1</code>:</p>\n\n<pre><code>k,h = enum.next\n  #=&gt; [1, {1=&gt;1, 2=&gt;1}] \nk #=&gt; 1 \nh #=&gt; {1=&gt;1, 2=&gt;1} \nh[k] += 1\n  #=&gt; h[k] = h[k] + 1\n  #=&gt; h[1] = h[1] + 1  \n  #=&gt; h[1] = 1 + 1 =&gt; 2\nh #=&gt; {1=&gt;1, 2=&gt;1} \n</code></pre>\n\n<p>The remaining calculations are performed similarly.</p>\n"}], "owner": {"reputation": 71, "user_id": 1762229, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8a20ff0549452b8af407481f8319c383?s=128&d=identicon&r=PG", "display_name": "user1762229", "link": "https://stackoverflow.com/users/1762229/user1762229"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 29504660, "answer_count": 3, "score": 0, "last_activity_date": 1428466342, "creation_date": 1428455098, "question_id": 29504142, "link": "https://stackoverflow.com/questions/29504142/ruby-syntax-code-involving-hashes", "title": "ruby syntax code involving hashes", "body": "<p>I was looking at code regarding how to return a mode from an array and I ran into this code:</p>\n\n<pre><code>def mode(array)\n\n    answer = array.inject ({}) { |k, v| k[v]=array.count(v);k}\n\n    answer.select { |k,v| v == answer.values.max}.keys\n\n\nend\n</code></pre>\n\n<p>I'm trying to conceptualize what the syntax means behind it as I am fairly new to Ruby and don't exactly understand how hashes are being used here. Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested", "simple-form", "cocoon-gem"], "comments": [{"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1428456559, "post_id": 29504115, "comment_id": 47166119, "body": "I&#39;m not familiar with this environment, but does adding a <code>to_s</code> method to <code>CrewRole</code> change anything?"}, {"owner": {"reputation": 103, "user_id": 2556669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45d63a5e0d17732c1296672c3494471f?s=128&d=identicon&r=PG", "display_name": "Jabawack81", "link": "https://stackoverflow.com/users/2556669/jabawack81"}, "reply_to_user": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 0, "creation_date": 1428458141, "post_id": 29504115, "comment_id": 47166485, "body": "@itdoesntwork that didn&#39;t help because I think is already converted from cocoon internally."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 2556669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45d63a5e0d17732c1296672c3494471f?s=128&d=identicon&r=PG", "display_name": "Jabawack81", "link": "https://stackoverflow.com/users/2556669/jabawack81"}, "is_accepted": false, "score": 0, "last_activity_date": 1428458231, "creation_date": 1428458231, "answer_id": 29504555, "question_id": 29504115, "link": "https://stackoverflow.com/questions/29504115/cocoon-show-object-instead-value/29504555#29504555", "title": "Cocoon Show object instead value", "body": "<p>I have Absolutely no idea how but \"simply\" dropping and re creating  the database now everything works smoothly.</p>\n"}, {"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1428482415, "creation_date": 1428482415, "answer_id": 29509841, "question_id": 29504115, "link": "https://stackoverflow.com/questions/29504115/cocoon-show-object-instead-value/29509841#29509841", "title": "Cocoon Show object instead value", "body": "<p>You are using simple_form's <code>f.association</code> which will try to guess how to present the <code>CrewRole</code> object. It looks for <code>name</code>, <code>label</code> or plain old <code>to_s</code> ... In your case it is a non-standard field <code>role</code>, so it will just convert the model to string (giving the result you got). </p>\n\n<p>To solve this you would have to rename your column (a bit drastic, but maybe that is what you did when recreating the db?) or better, write something like</p>\n\n<pre><code>= f.association :crew_role, label_method: :role\n</code></pre>\n\n<p>See simple_form <a href=\"https://github.com/plataformatec/simple_form#associations\" rel=\"nofollow\">documentation</a> for more info.</p>\n"}], "owner": {"reputation": 103, "user_id": 2556669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45d63a5e0d17732c1296672c3494471f?s=128&d=identicon&r=PG", "display_name": "Jabawack81", "link": "https://stackoverflow.com/users/2556669/jabawack81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 29509841, "answer_count": 2, "score": 0, "last_activity_date": 1436913665, "creation_date": 1428454878, "last_edit_date": 1436913665, "question_id": 29504115, "link": "https://stackoverflow.com/questions/29504115/cocoon-show-object-instead-value", "title": "Cocoon Show object instead value", "body": "<p>My situation:</p>\n\n<p>\"app/models/aircraft.rb\"</p>\n\n<pre><code>class Aircraft &lt; ActiveRecord::Base\n  has_many :aircraft_crew_roles\n  has_many :crew_roles, through: :aircraft_crew_roles, class_name: 'CrewRole'\nend\n</code></pre>\n\n<p>\"app/models/aircraft_crew_role.rb\"</p>\n\n<pre><code>aircraft_id\ncrew_role_id\n\nclass AircraftCrewRole &lt; ActiveRecord::Base\n  belongs_to :aircraft\n  belongs_to :crew_role\n  accepts_nested_attributes_for :crew_role, reject_if: :all_blank\nend\n</code></pre>\n\n<p>\"app/models/crew_role.rb\"</p>\n\n<pre><code>name\n\nclass CrewRole &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>\"app/views/aircrafts/_form.html.haml\"</p>\n\n<pre><code>= simple_form_for(@aircraft) do |f|\n  = f.error_notification\n  = f.input :name\n  #crew\n    = f.simple_fields_for :aircraft_crew_roles do |cr|\n      = render 'aircrafts/aircraft_crew_role', :f =&gt; cr\n    = link_to_add_association 'add a Crew Role', f, :aircraft_crew_roles, partial: \"aircrafts/aircraft_crew_role\"\n\n  = f.button :submit\n</code></pre>\n\n<p>\"app/views/aircrafts/_aircraft_crew_role.html.haml\"</p>\n\n<pre><code>.nested-fields.crew-fields\n  #crew_from_list\n    = f.association :crew_role, as: :select, collection: CrewRole.all()\n  = link_to_add_association 'or create a new Role', f, :crew_role\n  = link_to_remove_association \"remove Role\", f\n</code></pre>\n\n<p>\"app/views/aircrafts/_crew_role_fields.html.haml\"</p>\n\n<pre><code>.nested-fields\n  = f.input :role\n</code></pre>\n\n<p>this is my current situation and almost everything work fine: I can add new crew members to the aircraft and this will create the corresponding entry in the aircraft_crew_role and crew_role tables and if I connect to the database I can see that all the entry are right ( I see all ID and the role in the crew_role table is the one I've used in the form) but if I try use the crew already saved with the previous aircraft the select is populated with object instead of string:</p>\n\n<pre><code>#&lt;CrewRole:0x007fa90d2f8df8&gt;\n#&lt;CrewRole:0x007fa90d2f8c90&gt;\n#&lt;CrewRole:0x007fa90d2f8b28&gt;\n</code></pre>\n\n<p>I've already used cocoon in many other places in the app and in all the other places it worked smoothly.\nI've compared my code with the example on the cocoon repo but I can't find the problem</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 1, "creation_date": 1428455229, "post_id": 29504043, "comment_id": 47165835, "body": "If you&#39;re trying to get the version for the currently running ruby, you probably should use RUBY_VERSION rather than shelling out to another ruby process. Note that the ruby version accessible from the shell may not be the same as the ruby used to run the script if the ruby interpreter is not in the PATH."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 0, "creation_date": 1428455605, "post_id": 29504043, "comment_id": 47165924, "body": "Good point, I knew there had to be something in Rails that would reference the version it is running under."}], "answers": [{"comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1428454896, "post_id": 29504087, "comment_id": 47165757, "body": "D&#39;OH! I started to try that one first and thought &quot;hmmm, probably bad form, better use <code>system()</code>. LOL I didn&#39;t know the bit about it returning success, so learned something! Thanks. I&#39;ll accept as soon as it lets me (5 more minutes)."}], "tags": [], "owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "is_accepted": true, "score": 2, "last_activity_date": 1428454675, "creation_date": 1428454675, "answer_id": 29504087, "question_id": 29504043, "link": "https://stackoverflow.com/questions/29504043/why-does-ruby-v-return-true-in-rails-rather-than-return-the-version/29504087#29504087", "title": "why does `ruby -v` return true in rails, rather than return the version?", "body": "<p><code>system</code> prints out the result of the command and returns whether it was a success or not. Try the `` syntax:</p>\n\n<pre><code>&lt;%= `ruby -v` %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": false, "score": 3, "last_activity_date": 1428454868, "creation_date": 1428454868, "answer_id": 29504114, "question_id": 29504043, "link": "https://stackoverflow.com/questions/29504043/why-does-ruby-v-return-true-in-rails-rather-than-return-the-version/29504114#29504114", "title": "why does `ruby -v` return true in rails, rather than return the version?", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-system\" rel=\"nofollow\"><code>system</code></a> executes the command and returns <code>true</code> if there was no error. So in this case the version is printed to the standard output and your program receives <code>true</code> which is included in your Erb output (check your log files, you might find the output of <code>ruby -v</code> in them.</p>\n\n<p>What you probably want is <code>`</code> (that\u2019s a backtick). This is a <a href=\"http://ruby-doc.org/core-2.2.1/Kernel.html#method-i-60\" rel=\"nofollow\">method</a>, but is called by using the backticks like quotes:</p>\n\n<pre><code>2.2.1 :001 &gt; `ruby -v`\n=&gt; \"ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin13]\\n\"\n</code></pre>\n\n<p>Note how this <em>returns</em> the output of the call to <code>ruby -v</code> rather than printing it.</p>\n"}], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 29504087, "answer_count": 2, "score": 0, "last_activity_date": 1428454868, "creation_date": 1428454357, "question_id": 29504043, "link": "https://stackoverflow.com/questions/29504043/why-does-ruby-v-return-true-in-rails-rather-than-return-the-version", "title": "why does `ruby -v` return true in rails, rather than return the version?", "body": "<p>This seems like a silly question, but it's got me stumped. If I do this in the rails console:</p>\n\n<pre><code>system('ruby -v')\nruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]\n=&gt; true\n</code></pre>\n\n<p>So it shows the version, but returns true. So I do this in an .erb file:</p>\n\n<pre><code>&lt;%= system('ruby -v') %&gt;\n</code></pre>\n\n<p>and it just prints \"true\" on the web page. I've searched google, though the words involved just make it harder since they are used in so many places I've found it hard to craft a query that will return what I want. Thus proving google is not an AI. :-)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1428455086, "post_id": 29504020, "comment_id": 47165803, "body": "f.text_field only works for single objects, like title and path. tags is a collection, so you have to use something else."}], "answers": [{"tags": [], "owner": {"reputation": 1617, "user_id": 3396175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5sIvf.jpg?s=128&g=1", "display_name": "samutamm", "link": "https://stackoverflow.com/users/3396175/samutamm"}, "is_accepted": true, "score": 0, "last_activity_date": 1428493310, "creation_date": 1428493310, "answer_id": 29513608, "question_id": 29504020, "link": "https://stackoverflow.com/questions/29504020/why-my-textbox-shows-activerecord-associations-collectionproxy-in-form/29513608#29513608", "title": "Why my textbox shows ActiveRecord_Associations_CollectionProxy in form", "body": "<p>You have multiple tags that you want show in form. Your controller could serve all tags for form where you could show them with <a href=\"http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select</a> for example.</p>\n"}], "owner": {"reputation": 10295, "user_id": 635162, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d85bfde9b50f115c66c80c79e2003341?s=128&d=identicon&r=PG&f=1", "display_name": "toy", "link": "https://stackoverflow.com/users/635162/toy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 29513608, "answer_count": 1, "score": 1, "last_activity_date": 1428493310, "creation_date": 1428454226, "last_edit_date": 1428454788, "question_id": 29504020, "link": "https://stackoverflow.com/questions/29504020/why-my-textbox-shows-activerecord-associations-collectionproxy-in-form", "title": "Why my textbox shows ActiveRecord_Associations_CollectionProxy in form", "body": "<p>I'm building rails application and I use <code>form_for</code> to render the form. Everything works fine works fine except one text field has <code>ActiveRecord_Associations_CollectionProxy</code> inside the text which I'm not sure where it's coming from. </p>\n\n<p>Here's my form</p>\n\n<pre><code>&lt;%= form_for(@video, html: { class: \"directUpload\" }, multipart: true) do |f| %&gt;\n  &lt;% if @video.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@video.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @video.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :title %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :path %&gt;&lt;br&gt;\n    &lt;%= f.file_field :path%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :tags %&gt;&lt;br&gt;\n    &lt;%= f.text_field :tags %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And here's my <code>Video</code> model</p>\n\n<pre><code>class Video &lt; ActiveRecord::Base\n  belongs_to :user\n\n  has_many :video_tags\n  has_many :tags, through: :video_tags\nend\n</code></pre>\n\n<p>Here's the screenshot<img src=\"https://i.stack.imgur.com/SCDWo.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "amazon-s3"], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1428477623, "post_id": 29507193, "comment_id": 47173118, "body": "Adding the :s3_host_name did it for me. Cheers. I had it in an initialiser as other tuts have stated."}], "tags": [], "owner": {"reputation": 356, "user_id": 3361996, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0d1c3dc3f55be6399c4413c448457a1?s=128&d=identicon&r=PG&f=1", "display_name": "user3361996", "link": "https://stackoverflow.com/users/3361996/user3361996"}, "is_accepted": true, "score": 3, "last_activity_date": 1428473301, "creation_date": 1428473301, "answer_id": 29507193, "question_id": 29503786, "link": "https://stackoverflow.com/questions/29503786/permission-denied-paperclip-and-s3-error/29507193#29507193", "title": "Permission denied Paperclip and s3 error", "body": "<p>Try putting the following code in your <em>/config/environments/production.rb</em> file and update ENV secret key names accordingly. The host name is dependent on your region, <em>us-west-1</em>, <em>eu-west-1</em>, etc.</p>\n\n<pre><code>config.paperclip_defaults = {\n    :storage =&gt; :s3,\n    :s3_credentials =&gt; {\n      :bucket =&gt; ENV['S3_BUCKET_NAME'],\n      :access_key_id =&gt; ENV['AWS_ACCESS_KEY_ID'],\n      :secret_access_key =&gt; ENV['AWS_SECRET_ACCESS_KEY'],\n      :s3_host_name =&gt; 's3-us-west-1.amazonaws.com'\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 29507193, "answer_count": 1, "score": 1, "last_activity_date": 1428473301, "creation_date": 1428452714, "question_id": 29503786, "link": "https://stackoverflow.com/questions/29503786/permission-denied-paperclip-and-s3-error", "title": "Permission denied Paperclip and s3 error", "body": "<p>I have a rails 4 app deployed on heroku. I'm using Amazon s3 bucket to host images (using paperclip gem), but when I try to upload an image to my articles controller i get this error:</p>\n\n<pre><code>Permission denied @ dir_s_mkdir - /articles\n</code></pre>\n\n<p>I have gone through the steps listed <a href=\"https://devcenter.heroku.com/articles/paperclip-s3#define-the-file-attribute-in-the-model\" rel=\"nofollow\">here</a>. As i understand this could be a folder permission issue, but not really to sure how to tackle the issue. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "activemerchant"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1428452165, "post_id": 29503647, "comment_id": 47165012, "body": "Here is a solution to this problem: <a href=\"https://gist.github.com/luislavena/f064211759ee0f806c88\" rel=\"nofollow noreferrer\">gist.github.com/luislavena/f064211759ee0f806c88</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1428457665, "post_id": 29503647, "comment_id": 47166364, "body": "Please post the exact URL you are using to connect to the server, and post the output of <code>openssl s_client -connect &lt;hostname&gt;:&lt;port&gt; -tls1 -servername &lt;hostname&gt; | openssl x509 -text -noout</code>. Do so by adding it to your question by clicking <i>Edit</i> (and don&#39;t post it as a comment). Otherwise, there&#39;s not enough information to troubleshoot it."}], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 1, "last_activity_date": 1450889013, "creation_date": 1450889013, "answer_id": 34440175, "question_id": 29503647, "link": "https://stackoverflow.com/questions/29503647/activemerchant-ssl-connect-returned-1-errno-0-state-sslv3/34440175#34440175", "title": "Activemerchant SSL_connect returned=1 errno=0 state=SSLv3", "body": "<p>Couple things:</p>\n\n<ol>\n<li><p>make sure your certificates are up to date on your machine. </p></li>\n<li><p>this has gotten me around this error before: <a href=\"https://github.com/stevegraham/certified\" rel=\"nofollow\">https://github.com/stevegraham/certified</a></p></li>\n</ol>\n\n<p>Good luck. Hope this helps.</p>\n"}], "owner": {"reputation": 1542, "user_id": 525717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/629c66393ea19b73d4624519b3e6b989?s=128&d=identicon&r=PG", "display_name": "user525717", "link": "https://stackoverflow.com/users/525717/user525717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450889013, "creation_date": 1428451878, "question_id": 29503647, "link": "https://stackoverflow.com/questions/29503647/activemerchant-ssl-connect-returned-1-errno-0-state-sslv3", "title": "Activemerchant SSL_connect returned=1 errno=0 state=SSLv3", "body": "<p>I'm getting this error when creating new Paypal notification with active merchant</p>\n\n<pre><code>class PaymentNotificationsController &lt; ApplicationController\n  include ActiveMerchant::Billing::Integrations\n\n  protect_from_forgery except: :create\n\n  def create\n    notify = Paypal::Notification.new(request.raw_post)\n</code></pre>\n\n<blockquote>\n  <p>A OpenSSL::SSL::SSLError occurred in payment_notifications#create:\n  SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B:\n  certificate verify failed\n  /home/user/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/net/http.rb:918:in\n  `connect'</p>\n</blockquote>\n\n<ul>\n<li>Activemerchant version: 1.47.0 </li>\n<li>Ruby version: ruby 2.0.0p598 (2014-11-13 revision 48408) [x86_64-linux]  </li>\n<li>Rails version: 3.2.16</li>\n<li>Ubuntu version: Ubuntu 14.04.2 LTS </li>\n<li>Openssl version: OpenSSL 1.0.1f 6 Jan 2014</li>\n</ul>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1428451260, "post_id": 29503525, "comment_id": 47164781, "body": "Im really not sure what your question is"}, {"owner": {"reputation": 199, "user_id": 2228598, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d32d2463f46bbbd976d8fbdb4ba973dd?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/2228598/akshay"}, "reply_to_user": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1428452867, "post_id": 29503525, "comment_id": 47165215, "body": "@ptiern I wanted to know how can you specify the line i mentioned above without specifying any require/include statement."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 2228598, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d32d2463f46bbbd976d8fbdb4ba973dd?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/2228598/akshay"}, "edited": false, "score": 0, "creation_date": 1428455874, "post_id": 29504128, "comment_id": 47165974, "body": "@itdoesnotwork well, that does not answer my question. In main.rb there is no require &quot;other.rb&quot;..will that still work. May be you can look at this line which will give you a better picture of my problem. <a href=\"https://github.com/agent462/sensu-cli/blob/master/lib/sensu-cli/base.rb#L4\" rel=\"nofollow noreferrer\">github.com/agent462/sensu-cli/blob/master/lib/sensu-cli/&hellip;</a>"}, {"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "reply_to_user": {"reputation": 199, "user_id": 2228598, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d32d2463f46bbbd976d8fbdb4ba973dd?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/2228598/akshay"}, "edited": false, "score": 0, "creation_date": 1428456139, "post_id": 29504128, "comment_id": 47166036, "body": "Ah, I think I see the issue now. I&#39;ll edit the answer. Tell me if it&#39;s any closer."}, {"owner": {"reputation": 199, "user_id": 2228598, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d32d2463f46bbbd976d8fbdb4ba973dd?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/2228598/akshay"}, "edited": false, "score": 0, "creation_date": 1428456984, "post_id": 29504128, "comment_id": 47166215, "body": "If it resolves when the method is called, i just checked-again to see if it&#39;s calling the method anywhere in the code but couldn&#39;t find anything of that sort. maybe i&#39;m missing out on the flow somewhere. If it is what you mention, then it should result in an error"}, {"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "reply_to_user": {"reputation": 199, "user_id": 2228598, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d32d2463f46bbbd976d8fbdb4ba973dd?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/2228598/akshay"}, "edited": false, "score": 0, "creation_date": 1428457103, "post_id": 29504128, "comment_id": 47166244, "body": "<a href=\"https://github.com/agent462/sensu-cli/blob/17775061ee71a5af85a8f31f72ddbbda0c0177ac/bin/sensu\" rel=\"nofollow noreferrer\">this</a> file calls setup after including &quot;sensu-cli&quot; which includes pretty much everything, so it should actually work."}], "tags": [], "owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "is_accepted": false, "score": 0, "last_activity_date": 1428456296, "last_edit_date": 1428456296, "creation_date": 1428455008, "answer_id": 29504128, "question_id": 29503525, "link": "https://stackoverflow.com/questions/29503525/missing-out-on-some-basic-ruby-concepts/29504128#29504128", "title": "missing out on some basic ruby concepts", "body": "<p>I was wrong in my original assumption on what was causing the confusion, so I've changed the entire answer.</p>\n\n<p>Because the supposedly undefined identifier (<code>Cli</code>) is inside a method definition (<code>X::base#setup</code>), it isn't resolved when the code is loaded. It is only resolved when the method is called. This allows a file to include <code>base.rb</code> without having defined <code>Cli</code>. The only time a real problem will arise is if <code>setup</code> is called AND <code>Cli</code> is not defined.</p>\n"}], "owner": {"reputation": 199, "user_id": 2228598, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d32d2463f46bbbd976d8fbdb4ba973dd?s=128&d=identicon&r=PG", "display_name": "Akshay", "link": "https://stackoverflow.com/users/2228598/akshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455472936, "creation_date": 1428451108, "last_edit_date": 1455472936, "question_id": 29503525, "link": "https://stackoverflow.com/questions/29503525/missing-out-on-some-basic-ruby-concepts", "title": "missing out on some basic ruby concepts", "body": "<p>I have a ruby project with the following structure </p>\n\n<pre><code>(root)\n-bin/\n-lib/\n-specs/\n  - base.rb\n  - cli.rb\n  - settings.rb\n</code></pre>\n\n<p>The code in cli.rb has the following,</p>\n\n<p><strong>This file contains a bunch of require stmts which are used in the file</strong></p>\n\n<pre><code>module X\n  class cli\n    #some-code\n  end\nend\n</code></pre>\n\n<p>The code in base.rb has this one line that i fail to understand,</p>\n\n<pre><code>module X\n  class Base\n    def setup\n     @cli = Cli.new.global --&gt; I don't understand this line as there is no require statement above that.\n     # more code\n    end\n  end\nend\n</code></pre>\n\n<p>I'm probably missing some basic concepts here as i'm pretty new to ruby.</p>\n\n<p>Thanks</p>\n\n<p>Adding the line in the code which makes me wonder about this issue, </p>\n\n<p><a href=\"https://github.com/agent462/sensu-cli/blob/master/lib/sensu-cli/base.rb#L4\" rel=\"nofollow\">https://github.com/agent462/sensu-cli/blob/master/lib/sensu-cli/base.rb#L4</a></p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "rails-activerecord", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 2302520, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/7xjbj.jpg?s=128&g=1", "display_name": "B. Bulpett", "link": "https://stackoverflow.com/users/2302520/b-bulpett"}, "edited": false, "score": 0, "creation_date": 1428453577, "post_id": 29503770, "comment_id": 47165409, "body": "Still getting the same error. Tried with single and double quotes."}, {"owner": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "reply_to_user": {"reputation": 736, "user_id": 2302520, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/7xjbj.jpg?s=128&g=1", "display_name": "B. Bulpett", "link": "https://stackoverflow.com/users/2302520/b-bulpett"}, "edited": false, "score": 0, "creation_date": 1428453729, "post_id": 29503770, "comment_id": 47165456, "body": "What are the vales of <code>params[:search]</code> and <code>params[:search_criteria]</code>?"}, {"owner": {"reputation": 736, "user_id": 2302520, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/7xjbj.jpg?s=128&g=1", "display_name": "B. Bulpett", "link": "https://stackoverflow.com/users/2302520/b-bulpett"}, "edited": false, "score": 0, "creation_date": 1428454055, "post_id": 29503770, "comment_id": 47165548, "body": "Yes I think this is the problem. The value of <code>params[:search]</code> is correct as what was entered on the text field. However, <code>params[:search_criteria]</code> is <b>nil</b>. Something is wrong, apparently with my <i>select</i> tag_. I don&#39;t know what it could be. I&#39;m not used to the form_tag way of doing this. Not sure but apparently nothing&#39;s being passed to controller from the select menu."}, {"owner": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "reply_to_user": {"reputation": 736, "user_id": 2302520, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/7xjbj.jpg?s=128&g=1", "display_name": "B. Bulpett", "link": "https://stackoverflow.com/users/2302520/b-bulpett"}, "edited": false, "score": 0, "creation_date": 1428454298, "post_id": 29503770, "comment_id": 47165606, "body": "If is not <code>1</code>, <code>2</code> nor <code>3</code>, <code>@criteria</code> will be <code>nil</code> and your SQL Query will me malformed."}, {"owner": {"reputation": 736, "user_id": 2302520, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/7xjbj.jpg?s=128&g=1", "display_name": "B. Bulpett", "link": "https://stackoverflow.com/users/2302520/b-bulpett"}, "edited": false, "score": 0, "creation_date": 1428460017, "post_id": 29503770, "comment_id": 47166937, "body": "I got it! Since my options for select_tag were in quotes (&#39;1&#39;, &#39;2&#39;, and &#39;3&#39;), the <i>when</i> parameters in my &quot;case&quot; block also needed quotes. For example, <code>when &#39;1&#39; .. @criteria = &quot;id&quot;</code>. Now everything works great! Thanks for your help with this noob mistake. Marking this as the correct answer."}], "tags": [], "owner": {"reputation": 2679, "user_id": 1812322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ab68ec41682314f87def370d3ddbac1f?s=128&d=identicon&r=PG", "display_name": "Bonifacio2", "link": "https://stackoverflow.com/users/1812322/bonifacio2"}, "is_accepted": true, "score": 1, "last_activity_date": 1428452980, "last_edit_date": 1428452980, "creation_date": 1428452639, "answer_id": 29503770, "question_id": 29503410, "link": "https://stackoverflow.com/questions/29503410/rails-4-safely-using-variables-in-where-method/29503770#29503770", "title": "Rails 4 safely using variables in &quot;Where&quot; method", "body": "<p>You forgot to surround your variables with quotes. When execution hits the line</p>\n\n<pre><code>@accounts = Account.where(\"#{@criteria} LIKE ?\", \"%#{params[:search]}%\").page(params[:page]).per(15)\n</code></pre>\n\n<p><code>@criteria</code> will still be <code>nil</code>. So the sql generated by activerecord will be <code>SELECT COUNT(*) FROM  accounts WHERE ( LIKE '%722586388%')</code> instead of <code>SELECT COUNT(*) FROM  accounts WHERE (id LIKE '%722586388%')</code>, for instance.</p>\n\n<p>So inside your case you will have to something like:</p>\n\n<pre><code>if params[:search]\n    case (params[:search_criteria])\n    when 1\n      @criteria = 'id'\n    when 2\n      @criteria = 'customer_id'\n    when 3 \n      @criteria = 'customer.firstname'\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "is_accepted": false, "score": 1, "last_activity_date": 1428452722, "creation_date": 1428452722, "answer_id": 29503788, "question_id": 29503410, "link": "https://stackoverflow.com/questions/29503410/rails-4-safely-using-variables-in-where-method/29503788#29503788", "title": "Rails 4 safely using variables in &quot;Where&quot; method", "body": "<pre><code>if params[:search]\n    case (params[:search_criteria])\n    when 1\n      @criteria = \"id\"\n    when 2\n      #assuming you have a customer_id column in your accounts table\n      @criteria = \"customer_id\"\n    when 3 \n      #assuming you have a customer_name column in your accounts table\n      @criteria = \"customer_name\"\n    end\n</code></pre>\n"}], "owner": {"reputation": 736, "user_id": 2302520, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/7xjbj.jpg?s=128&g=1", "display_name": "B. Bulpett", "link": "https://stackoverflow.com/users/2302520/b-bulpett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 29503770, "answer_count": 2, "score": 1, "last_activity_date": 1428452980, "creation_date": 1428450459, "question_id": 29503410, "link": "https://stackoverflow.com/questions/29503410/rails-4-safely-using-variables-in-where-method", "title": "Rails 4 safely using variables in &quot;Where&quot; method", "body": "<p>I've rolled my own search for a Rails 4 app. Now I need to offer the user different columns to search on. I've created a dropdown menu within the view's search form as follows:</p>\n\n<pre><code>&lt;%= form_tag manage_accounts_administrator_path, :method =&gt; 'get', :id =&gt; \"search-form\" do %&gt;\n      &lt;%= text_field_tag :search, params[:search], placeholder: 'Search Accounts' %&gt;\n      &lt;%= select_tag(\"search_criteria\", options_for_select([['by account number', '1'],['by customer id', '2'],['by customer name (ex: Jane Doe)', '3']])) %&gt;\n      &lt;%= submit_tag \"Search\", :name =&gt; nil %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And then in the corresponding controller method, I'm doing this:</p>\n\n<pre><code>  def manage_accounts\n    # criteria from the \"Search by\" select menu\n    if params[:search]\n        case (params[:search_criteria])\n        when 1\n          @criteria = id\n        when 2\n          @criteria = customer_id\n        when 3 \n          @criteria = customer.firstname + ' ' + customer.lastname\n        end\n\n        @accounts = Account.where(\"#{@criteria} LIKE ?\", \"%#{params[:search]}%\").page(params[:page]).per(15)\n        @table_heading = \"Account Search Results\"\n    else\n        @accounts = Account.order('id').page(params[:page]).per(15)\n        @table_heading = \"Listing All Accounts\"\n    end\n\n    respond_to do |format|\n      format.js\n      format.html {render 'manage_accounts'}\n    end\n  end\n</code></pre>\n\n<p>The three possible values for the @criteria variable in the case block above represent fields of the \"Account\" model. As you can see, what I'm expecting to happen is for a query to be conducted using the \"where\" method. This syntax is wrong, and I get the error:</p>\n\n<blockquote>\n  <p><strong>ActiveRecord::StatementInvalid in Administrators#manage_accounts</strong> Mysql2::Error: You have an error in your SQL syntax; check the manual\n  that corresponds to your MySQL server version for the right syntax to\n  use near 'LIKE '%722586388%')' at line 1: SELECT COUNT(*) FROM\n  <code>accounts</code>  WHERE ( LIKE '%722586388%')</p>\n</blockquote>\n\n<p>Clearly I'm doing this wrong. <strong>How can I interpolate the @criteria variable similar to how I interpolate the search param?</strong> What the error shows me is that the variable is being escaped completely. I've tried (guessed) dozens of different punctuation combinations to no avail. I feel like this will work if I just get the syntax right.</p>\n\n<p>Also, I've read that this is bad practice as it makes the app vulnerable to SQL injections. <strong>How, then, should I write this statement in a secure manner?</strong></p>\n\n<p>Thank you</p>\n\n<p>It's rails 4.1.8 with MySQL2 gem and I am noob.</p>\n"}]