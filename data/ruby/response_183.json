[{"tags": ["ruby-on-rails", "ruby", "activesupport-concern"], "comments": [{"owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "edited": false, "score": 0, "creation_date": 1531350598, "post_id": 51295193, "comment_id": 89568120, "body": "Could you set Boolean value and set it to true in the block and check the value to see if its set to true that would be your indicator of the block running."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1531360114, "post_id": 51295527, "comment_id": 89569949, "body": "<code>bulk_operation</code> is a module method of <code>WatchTower</code>. <code>Number</code> will not have access to these instance variables without a very tight binding of <code>WatchTower.instance_variable_get(:@block_op)</code> also this alters the return value of <code>bulk_operation</code>"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531360390, "post_id": 51295527, "comment_id": 89569995, "body": "The theory remains the same. I am not writing the code for OP, just displaying a concept."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1531352566, "creation_date": 1531352566, "answer_id": 51295527, "question_id": 51295193, "link": "https://stackoverflow.com/questions/51295193/determine-if-code-is-being-run-within-a-certain-block/51295527#51295527", "title": "Determine if code is being run within a certain block", "body": "<p>So long as you aren't calling from multiple threads, could something like this work:</p>\n\n<pre><code>def self.bulk_operation\n  @block_op = true\n  yield if block_given?\n  @block_op = false\nend\n</code></pre>\n\n<p>Then within your method calls, simply check for the <code>@block_op</code> flag.</p>\n"}], "owner": {"reputation": 1, "user_id": 10067451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hU4OBHsU7Hc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ro1sFxy4EBKOdQd76T75e17PbU-w/mo/photo.jpg?sz=128", "display_name": "Cristian", "link": "https://stackoverflow.com/users/10067451/cristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531361311, "creation_date": 1531349474, "last_edit_date": 1531361311, "question_id": 51295193, "link": "https://stackoverflow.com/questions/51295193/determine-if-code-is-being-run-within-a-certain-block", "title": "Determine if code is being run within a certain block", "body": "<p>Is it possible to determine if code is being run within a certain block? My use case is described below with some pseudo-code mixed in, which demonstrates my idea. Any suggestions are welcome! I want a block on the model to not run when any action on the model is called from within <code>WatchTower.bulk_operation do; end</code>.</p>\n\n<pre><code># watch_tower.rb\n\nmodule WatchTower\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def not_safe_for_bulk\n      yield if block_given? &amp;&amp; # not called from within bulk_operation block\n    end\n  end\n\n  def self.bulk_operation\n    yield if block_given?\n  end\nend\n\n\n# Inside some other file, callbacks on number shouldn't run\n\nWatchTower.bulk_operation do\n    5.times { Number.create }\nend\n\n\n# Inside some other file, callbacks on number SHOULD run\n\nNumber.create\n\n\n# number.rb\n\nclass Number &lt; ActiveRecord::Base\n  include WatchTower\n\n  not_safe_for_bulk do\n    after_commit :something_destructive\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 1, "last_activity_date": 1531346404, "creation_date": 1531346404, "answer_id": 51294753, "question_id": 51294720, "link": "https://stackoverflow.com/questions/51294720/rails-how-to-set-a-controller-to-not-use-devise/51294753#51294753", "title": "Rails : how to set a controller to NOT use devise", "body": "<p><a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"nofollow noreferrer\">Controller filters and helpers</a></p>\n\n<p>Assuming you've added <code>before_action :authenticate_user!</code> or similar to your application_controller.rb (and any subsequent base controllers),</p>\n\n<p><code>skip_before_action :authenticate_user!</code></p>\n"}], "owner": {"reputation": 19, "user_id": 2101376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da8b161d6356fbb2e86345a0ad031749?s=128&d=identicon&r=PG", "display_name": "DribeiroExp", "link": "https://stackoverflow.com/users/2101376/dribeiroexp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531346404, "creation_date": 1531346256, "question_id": 51294720, "link": "https://stackoverflow.com/questions/51294720/rails-how-to-set-a-controller-to-not-use-devise", "title": "Rails : how to set a controller to NOT use devise", "body": "<p>I'm building a website using Ruby on Rails and Devise and want to exclude some basic controllers from the access control, like home, about, contact, etc... how do I set a controller that I don't want that devise to apply access control on it?</p>\n"}, {"tags": ["ruby", "docker", "cucumber", "page-object-gem"], "comments": [{"owner": {"reputation": 15, "user_id": 941245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4e35e035ea921f387901c5c32dd9bd?s=128&d=identicon&r=PG", "display_name": "Mohsin Khan", "link": "https://stackoverflow.com/users/941245/mohsin-khan"}, "edited": false, "score": 0, "creation_date": 1531361766, "post_id": 51294696, "comment_id": 89570249, "body": "I think I know why this is happening. I&#39;m running these tests on BrowserStack remote system and I might need to use a &#39;file detector&#39; before I upload/find it."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 941245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4e35e035ea921f387901c5c32dd9bd?s=128&d=identicon&r=PG", "display_name": "Mohsin Khan", "link": "https://stackoverflow.com/users/941245/mohsin-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1531413375, "creation_date": 1531413375, "answer_id": 51310667, "question_id": 51294696, "link": "https://stackoverflow.com/questions/51294696/invalid-argument-file-not-found-using-page-object-gem-inside-docker/51310667#51310667", "title": "Invalid argument: File not found using page-object gem inside docker", "body": "<p>Indeed, I needed a file_detector that would allow the files to be uploaded on a remote system (BrowserStack)</p>\n\n<p>Here's the code in my hooks.rb that fixed it: </p>\n\n<pre><code>browser.driver.file_detector = lambda do |args|\n  str = args.first.to_s\n  str if File.exist?(str)\nend\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 941245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4e35e035ea921f387901c5c32dd9bd?s=128&d=identicon&r=PG", "display_name": "Mohsin Khan", "link": "https://stackoverflow.com/users/941245/mohsin-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531413375, "creation_date": 1531346120, "question_id": 51294696, "link": "https://stackoverflow.com/questions/51294696/invalid-argument-file-not-found-using-page-object-gem-inside-docker", "title": "Invalid argument: File not found using page-object gem inside docker", "body": "<p>I'm running some browser based UI tests inside a docker container using page-object gem by Cheezy.</p>\n\n<p>Here's the code in question that's not working: </p>\n\n<pre><code>file_field(:the_file, name: 'file_source')\n\ndef upload_file(csv_file)\n  puts \"CURRENT DIR: #{Dir.pwd}\"\n  self.the_file = Dir.pwd + \"/config/data/#{csv_file}\"\n  sleep(1)\n  upload_button\nend\n</code></pre>\n\n<p>Command:</p>\n\n<pre><code>docker run -v `pwd`:/app ruby:2.4 bash -c \"cd /app &amp;&amp; bundle install &amp;&amp; /app/cucumber-command.sh\"\n</code></pre>\n\n<p>cucumber-command.sh: </p>\n\n<pre><code>cucumber RUN_ON_BSTACK=true --tags @send_request --format pretty --format junit --out results\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>CURRENT DIR: /app\n...\ninvalid argument: File not found : /app/config/data/GDPR.csv\n</code></pre>\n\n<p>However, the file exists inside the container:</p>\n\n<pre><code># ls -l /app/config/data/GDPR.csv\n-rw-r--r-- 1 1000 staff 11602 Jul 11 03:05 /app/config/data/GDPR.csv\n</code></pre>\n\n<p>The problematic line is this one: </p>\n\n<pre><code>self.the_file = Dir.pwd + \"/config/data/#{csv_file}\"\n</code></pre>\n\n<p><strong>This works fine if I don't run it inside the docker container.</strong> </p>\n\n<p>One interesting thing that I found was that the Error was different when I gave it another path: </p>\n\n<pre><code>No such file or directory - /var/lib/jenkins/workspace/tests/config/data/GDPR.csv (Errno::ENOENT)\n(eval):1:in `process_watir_call'\n</code></pre>\n\n<p>Which seems like the real error of not finding a file. </p>\n\n<p><code>file_field</code> is not able to find the file when executed inside the container. Could someone help me understand what's going on and how to fix this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "security", "ruby-on-rails-5", "csrf"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1531344716, "post_id": 51294427, "comment_id": 89566424, "body": "99.9% of applications are also susceptible to this but it really doesn&#39;t happen all that often.  But you&#39;ll want to look into <a href=\"https://github.com/kickstarter/rack-attack\" rel=\"nofollow noreferrer\">Rack::Attack</a> or similar rate-limiting solutions."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1531346707, "post_id": 51294427, "comment_id": 89567142, "body": "Isn&#39;t your question about how to handle a denial of service attack? The title seems mis-matched."}], "answers": [{"tags": [], "owner": {"reputation": 943, "user_id": 546950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60de781d84a6767b10c5040c54180433?s=128&d=identicon&r=PG", "display_name": "robertoplancarte", "link": "https://stackoverflow.com/users/546950/robertoplancarte"}, "is_accepted": false, "score": 0, "last_activity_date": 1531353375, "creation_date": 1531353375, "answer_id": 51295612, "question_id": 51294427, "link": "https://stackoverflow.com/questions/51294427/how-can-i-send-post-requests-in-a-secure-manner-to-a-rails-application/51295612#51295612", "title": "How can I send POST requests in a secure manner to a Rails application?", "body": "<p>You could use the authenticity token rails automatically generates in its forms as a type of very basic captcha for your CLI scripts. Keep in mind that the point of authenticity tokens is to avoid CSRF attacks not DOS attacks so if you are worried about bots taking up bandwidth this wont help, but if your concern is that only 'authorized' requests get through you could use the tokens. Obviously the best solution for that would be to have full User authentication and authorization for your routes and have a user set up for your scripts and generating a JWT for the user. Once you have the authenticity token or a JWT you can just add them to your POST.</p>\n\n<p>You can read how the authenticity tokens work here <a href=\"http://guides.rubyonrails.org/security.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/security.html</a> and add the authenticity_token key to your POST. If your scripts are running in the rails environment creating a session and getting a valid token is easy</p>\n\n<p><code>app.get '/&lt;some_model&gt;s/new'</code></p>\n\n<p><code>token = app.session[:_csrf_token]</code></p>\n\n<p>then use that token in your post</p>\n\n<p><code>app.post '/&lt;some_model&gt;s', params: {authenticity_token: token}</code></p>\n"}], "owner": {"reputation": 35, "user_id": 8190515, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-bW8hqwAwTmk/AAAAAAAAAAI/AAAAAAAAAK8/ISRJZV_CSuQ/photo.jpg?sz=128", "display_name": "adnan hajar", "link": "https://stackoverflow.com/users/8190515/adnan-hajar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531353375, "creation_date": 1531344585, "question_id": 51294427, "link": "https://stackoverflow.com/questions/51294427/how-can-i-send-post-requests-in-a-secure-manner-to-a-rails-application", "title": "How can I send POST requests in a secure manner to a Rails application?", "body": "<p>I am trying to add a layer of security to my POST requests. </p>\n\n<p>I have multiple ruby script that doing Curl Post Request to my rails server. The concern here is having an attacker send a big batch of requests at the same time. Blocking our server and costing us lots of money.</p>\n\n<p>Any suggestion would be much appreciated.</p>\n"}, {"tags": ["angularjs", "ruby", "amazon-web-services", "amazon-s3", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10066903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a3922c5c29a5766820b32fccc7eaa6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Thorne", "link": "https://stackoverflow.com/users/10066903/a-thorne"}, "is_accepted": true, "score": 1, "last_activity_date": 1531500070, "creation_date": 1531500070, "answer_id": 51329562, "question_id": 51293432, "link": "https://stackoverflow.com/questions/51293432/how-to-stream-object-from-aws-s3-to-browser-using-sinatra-and-angularjs/51329562#51329562", "title": "How to stream object from AWS S3 to browser using Sinatra and AngularJS", "body": "<p>I got it working by using the following endpoint:</p>\n\n<pre><code>get '/api/s3/download' do\n  source = params[:source]\n  headers['Content-Type'] = 'application/octet-stream'\n  headers['Content-Disposition'] = \"attachment; filename=#{source}\"\n  stream do |out|\n    s3.client.get_object(bucket: 'my_bucket', key: source) do |chunk|\n      out &lt;&lt; chunk\n    end\n    out.flush\n  end\nend\n</code></pre>\n\n<p>And doing the following on the front end in Javascript opens a new tab in the browser that the download happens through:</p>\n\n<pre><code>$window.open('/api/s3/download?source=' + source), '_blank');\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10066903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a3922c5c29a5766820b32fccc7eaa6?s=128&d=identicon&r=PG&f=1", "display_name": "A. Thorne", "link": "https://stackoverflow.com/users/10066903/a-thorne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 51329562, "answer_count": 1, "score": 1, "last_activity_date": 1531500070, "creation_date": 1531339441, "last_edit_date": 1531394458, "question_id": 51293432, "link": "https://stackoverflow.com/questions/51293432/how-to-stream-object-from-aws-s3-to-browser-using-sinatra-and-angularjs", "title": "How to stream object from AWS S3 to browser using Sinatra and AngularJS", "body": "<p>I was able to stream an S3 object from disk to the browser using the following post request in Ruby:</p>\n\n<pre><code>post '/api/s3/download/?' do\n   filepath = \"/tmp/test.txt\"\n   send_file(filepath, :filename =&gt; File.basename(filepath))\nend\n</code></pre>\n\n<p>And the following AngularJS in the javascript:</p>\n\n<pre><code>$http.post('/api/s3/download/')\n  .then(function(response) {\n    var blob = new Blob([response.data]);\n    var objectUrl = URL.createObjectURL(blob);\n    const anchor = angular.element('&lt;a&gt;&lt;/a&gt;');\n    anchor.attr('href', objectUrl);\n    anchor.attr('download', source);\n    anchor.css('display', 'none');\n    angular.element(document.body).append(anchor);\n    anchor[0].click();\n  }, function(error_msg) {\n    console.log(error_msg);\n  });\n</code></pre>\n\n<p>I've tried the following in Ruby to get an S3 object as a <code>StringIO</code> where <code>source</code> is the S3 object key:</p>\n\n<pre><code>s3 = Aws::S3::Resource.new\nbucket = s3.bucket('my_bucket')\ndata = bucket.object(source).get\n</code></pre>\n\n<p>Then I tried returning <code>data.body</code> as the response to the javascript but that didn't work.</p>\n\n<p>How can I take a StringIO object and send it to the browser as an octet-stream without materializing the file to disk?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "wicked-pdf", "page-title"], "answers": [{"tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": false, "score": 0, "last_activity_date": 1531340186, "creation_date": 1531340186, "answer_id": 51293586, "question_id": 51293428, "link": "https://stackoverflow.com/questions/51293428/wicked-pdf-title-shows-correctly-locally-but-not-on-the-server/51293586#51293586", "title": "Wicked PDF title shows correctly locally but not on the server", "body": "<p>Your problem is likely the <code>Content-Disposition</code> with which your PDF is being rendered, and the browser's PDF viewer intercepting the PDF.</p>\n\n<p>Try </p>\n\n<pre><code>render pdf: \"Example\", title: \"Example\", disposition: \"attachment\"\n</code></pre>\n\n<p>This will force the browser to download the file for you, in which case the filename should be set.</p>\n"}], "owner": {"reputation": 1, "user_id": 10066984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dDmMDyHm3Rc/AAAAAAAAAAI/AAAAAAAAAE4/__0nJCpRXVA/photo.jpg?sz=128", "display_name": "Andrew Mason", "link": "https://stackoverflow.com/users/10066984/andrew-mason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531340186, "creation_date": 1531339420, "question_id": 51293428, "link": "https://stackoverflow.com/questions/51293428/wicked-pdf-title-shows-correctly-locally-but-not-on-the-server", "title": "Wicked PDF title shows correctly locally but not on the server", "body": "<p>I am having an issue that I hope someone has some knowledge about. I am using wicked_pdf to allow a user to download a report. I am running into an issue where when the pdf opens in your browser, the title is set as the index number of the pdf (e.g. 28.pdf). When I download the form, the file name is correct. However, <strong>this issue does not happen locally</strong>, only when the pdf is delivered by the server.</p>\n\n<p>I have tried multiple things and still cannot figure this out. In my example.pdf.haml file, I am using this:</p>\n\n<pre><code>!!!\n%html\n  %head\n    %title Example\n    = wicked_pdf_stylesheet_link_tag \"example_pdf\"\n  %body\n  ......\n</code></pre>\n\n<p>and have tried multiple variations of that like not including the top two lines.</p>\n\n<p>Here is the relevant part of my controller:</p>\n\n<pre><code>respond_to do |format|\n          format.pdf do\n            render pdf: \"Example\",\n                   title: \"Example\"\n          end\n          format.html do\n......\n</code></pre>\n\n<p>If anyone has suggestions, I would appreciate it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1531336287, "post_id": 51292531, "comment_id": 89562990, "body": "Good question.   Here&#39;s a reference to the ActiveRecord page that describes the variables you&#39;re talking about:  <a href=\"http://guides.rubyonrails.org/active_record_basics.html#schema-conventions\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> for those wanting to understand the behavior he&#39;s referencing."}], "answers": [{"comments": [{"owner": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1531336573, "post_id": 51292605, "comment_id": 89563115, "body": "I tend to agree with Sergio here.  I understand what it is you want to do, but you may just have to create the new columns yourself via Migrations.  There probably is some way to extend the base ActiveRecord behavior to do what you want, but in the end it might be more complicated than just adding the new columns yourself."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 1, "creation_date": 1531336684, "post_id": 51292605, "comment_id": 89563175, "body": "@TimHolt: to be honest, I don&#39;t see how any amount of tinkering with AR internals would help achieve persistence of new attributes. Something <i>has</i> to create the columns in the actual database."}, {"owner": {"reputation": 2886, "user_id": 821920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c45a01c04479939d009fbe05e65b982?s=128&d=identicon&r=PG", "display_name": "Tim Holt", "link": "https://stackoverflow.com/users/821920/tim-holt"}, "edited": false, "score": 0, "creation_date": 1531446632, "post_id": 51292605, "comment_id": 89609522, "body": "agreed.  It&#39;s sort of theoretically the right way to extend AR, but it would be a lot of work.  That said, it sounds like a great idea for a gem!"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1531336002, "creation_date": 1531336002, "answer_id": 51292605, "question_id": 51292531, "link": "https://stackoverflow.com/questions/51292531/how-to-create-an-attribute-which-will-be-persisted-in-all-activerecords-rails/51292605#51292605", "title": "How to create an attribute which will be persisted in all ActiveRecords (Rails)?", "body": "<p>You'll have to run a migration (or several) that will add the column to all needed models. No way around this. </p>\n\n<p>As for how to go about the migrations: you are limited only by your imagination. The simplest way is to simply write out all migrations manually, a migration per table.</p>\n\n<p>You also could write a script that will generate the migration files for you. Or do it all in the same migration: just call <code>add_column</code> in a loop.</p>\n"}, {"comments": [{"owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "edited": false, "score": 0, "creation_date": 1531339433, "post_id": 51293344, "comment_id": 89564357, "body": "Not all models necessarily have a corresponding database table, there can be tableless models."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "edited": false, "score": 1, "creation_date": 1531339549, "post_id": 51293344, "comment_id": 89564402, "body": "@ZohaibA.Butt: skipping non-AR models is a matter of adding a single conditional here. But good to be aware of this, yes."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "edited": false, "score": 1, "creation_date": 1531339596, "post_id": 51293344, "comment_id": 89564426, "body": "@ZohaibA.Butt this is an extremely simplified example for brevity. For any real world application you would need to add error handling and look up the ancestors to make sure they are ActiveRecord models."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1531340040, "post_id": 51293344, "comment_id": 89564605, "body": "An alternative way to do this that would work at least on postgres is to use <code>SELECT tablename FROM pg_tables WHERE schemaname=&#39;public&#39;;</code> to get the names of each table and then generate a migration for each."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1531340171, "post_id": 51293344, "comment_id": 89564659, "body": "@max: mysql can do this style of introspection equally well. <code>select * from information_schema.tables where database = &#39;mydb&#39;</code> or something like that."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1531340692, "last_edit_date": 1531340692, "creation_date": 1531339051, "answer_id": 51293344, "question_id": 51292531, "link": "https://stackoverflow.com/questions/51292531/how-to-create-an-attribute-which-will-be-persisted-in-all-activerecords-rails/51293344#51293344", "title": "How to create an attribute which will be persisted in all ActiveRecords (Rails)?", "body": "<p>For an existing project there is no way around generating the migrations for each model. You could possibly write a rake task to automate this by looping through the files in <code>app/models</code> and using a heuristic based  on the rails naming conventions to generate migrations.</p>\n\n<pre><code>names = Dir.glob(Rails.root.join('app', 'models', '*.rb')).map do |p|\n  Pathname.new(p).basename.to_s.chomp('.rb')\nend.reject {|p| p == \"application_record\"}\nmodels = names.map { |n| n.classify.constantize }\nmodels.each do |m|\n  next unless m.ancestors.include?(ActiveRecord::Base)\n  puts %x{ rails g migration add_foo_to_#{m.table_name} foo:string }\nend\n</code></pre>\n\n<p>This is a (very) simplified example that does not take \"namespaced\" models into account or handle errors.</p>\n\n<p>For a greenfield project or new models you can <a href=\"http://guides.rubyonrails.org/generators.html\" rel=\"nofollow noreferrer\">create your own generators</a> which would add the additional column when you run the standard rails generator commands such as <code>rails g model</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7815648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40556851fa28be3db92288ff3da6b272?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Agudelo", "link": "https://stackoverflow.com/users/7815648/carlos-agudelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 51292605, "answer_count": 2, "score": 1, "last_activity_date": 1531343132, "creation_date": 1531335705, "question_id": 51292531, "link": "https://stackoverflow.com/questions/51292531/how-to-create-an-attribute-which-will-be-persisted-in-all-activerecords-rails", "title": "How to create an attribute which will be persisted in all ActiveRecords (Rails)?", "body": "<p>I want to add an attribute, which will be persisted in my database, to all my models classes in a Ruby on Rails project. I want something just like the created_ad and updated_at attributes, but I don't know how this is possible, or even if it is.</p>\n\n<p>Do I have to add the attribute and column manually to all my models, or is there a better way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "foreman"], "answers": [{"tags": [], "owner": {"reputation": 9775, "user_id": 806956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LllHJ.jpg?s=128&g=1", "display_name": "Aaron Gray", "link": "https://stackoverflow.com/users/806956/aaron-gray"}, "is_accepted": true, "score": 0, "last_activity_date": 1531336382, "last_edit_date": 1531336382, "creation_date": 1531335605, "answer_id": 51292505, "question_id": 51292483, "link": "https://stackoverflow.com/questions/51292483/setting-rails-environment-with-foreman/51292505#51292505", "title": "Setting rails environment with Foreman", "body": "<p>The solution is <a href=\"https://ddollar.github.io/foreman/#ENVIRONMENT\" rel=\"nofollow noreferrer\">to use a <code>.env</code> file in your project's root directory</a>. Inside that file, add this line:</p>\n\n<pre><code>RAILS_ENV=production\n</code></pre>\n\n<p>Now, anytime you run Foreman locally, it will set the rails environment to production. So, if you run <code>bundle exec foreman run rake assets:precompile</code>, the environment will be production for that task. Don't forget to change it back when you're done! ;-)</p>\n"}], "owner": {"reputation": 9775, "user_id": 806956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LllHJ.jpg?s=128&g=1", "display_name": "Aaron Gray", "link": "https://stackoverflow.com/users/806956/aaron-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 51292505, "answer_count": 1, "score": 0, "last_activity_date": 1531336382, "creation_date": 1531335505, "question_id": 51292483, "link": "https://stackoverflow.com/questions/51292483/setting-rails-environment-with-foreman", "title": "Setting rails environment with Foreman", "body": "<p>How do you set the rails environment with Foreman?</p>\n\n<p>For example, if I wanted to run <code>bundle exec rake assets:precompile</code> on my development machine, but I wanted to set the rails environment to production so I could see exactly how this process would run on the production server - I could do this using vanilla rails by doing <code>RAILS_ENV=production bundle exec rake assets:precompile</code>.</p>\n\n<p>But how do I do this with Foreman? For example, I know I can do <code>bundle exec foreman run rake assets:precompile</code>, but that doesn't specify the rails environment as production.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1531336183, "post_id": 51291962, "comment_id": 89562935, "body": "does it need to be generic or just work for your exact case?"}, {"owner": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1531336556, "post_id": 51291962, "comment_id": 89563109, "body": "I want that to be generic as I have many such arrays which needs similar conversion required"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1531361398, "post_id": 51291962, "comment_id": 89570185, "body": "Your expected result is invalid."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1531363858, "post_id": 51291962, "comment_id": 89570638, "body": "In your desired result I count 6 left parentheses and 5 left parentheses (@sawa&#39;s point). I don&#39;t think your <code>json</code> tag should be there."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1531366134, "post_id": 51291962, "comment_id": 89571082, "body": "@CarySwoveland I actually missed that point. What I had in mind is the space between the <code>&#39;...&#39;</code> and the colon in the hash sugar notation."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531363157, "post_id": 51294207, "comment_id": 89570502, "body": "Novel! Clever! However, if <code>g</code> is the hash returned, <code>g[&#39;cat&#39;] #=&gt; {}</code>, <code>g[&#39;cat&#39;] #=&gt; {}</code>, <code>g[&#39;rule&#39;][&#39;cat&#39;] #=&gt; {}</code>, <code>g[&#39;rule&#39;][&#39;49&#39;][&#39;cat&#39;] #=&gt; {}</code> and <code>g[&#39;rule&#39;][&#39;49&#39;][&#39;destination&#39;][&#39;cat&#39;] #=&gt; {}</code>. That is, the default procs are still there. This could cause some debugging headaches. They could be effectively be removed (e.g., <code>g.default_proc = Proc.new { nil }</code>), but a few more steps would be required."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531371785, "post_id": 51294207, "comment_id": 89572277, "body": "Good point @Cary, I often forget about that because in my code, the setting of a default proc never really matters if it sticks around (ie, afterwords all I usually end up doing is iterating or I can check for a key with <code>has_key?</code> in the rare case I don&#39;t want to trigger the proc)...if you want to blow out this default proc, I think you end up needing to recurse anyway, to make sure it clear it out on all the sub hashes it ended up creating, so it won&#39;t save you having to do recursion...but if you&#39;re fine with that proc sticking around this is short and sweet and nice"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531374823, "post_id": 51294207, "comment_id": 89573432, "body": "As a general observation, I suppose if one wanted to effectively remove &quot;nested&quot; default procs one could do something like this: 1) define all the default procs in terms of the method  <code>def default(h,k) h[k] = {} end</code>; that is, <code>h.default_proc = Proc.new { |h,k|  default(h,k) }</code>. Later, when the default procs are no longer wanted, simply redefine <code>default</code>: <code>def default(h,k) nil end</code>. (<code>default</code> could of course be a proc instead of a method.) Yes?"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 2, "last_activity_date": 1531343432, "creation_date": 1531343432, "answer_id": 51294207, "question_id": 51291962, "link": "https://stackoverflow.com/questions/51291962/i-have-a-array-of-arrays-as-in-description-need-to-convert-it-to-formatted-hash/51294207#51294207", "title": "I have a array of arrays as in description need to convert it to formatted Hash in Ruby", "body": "<p>This makes use of passing a block to <a href=\"https://ruby-doc.org/core/Hash.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Hash::new</code></a> which keeps passing that same block to new sub hashes, via the <a href=\"https://ruby-doc.org/core/Hash.html#method-i-default_proc\" rel=\"nofollow noreferrer\"><code>default_proc</code></a>:</p>\n\n<pre><code>output = Hash.new { |hash, key| hash[key] = Hash.new(&amp;hash.default_proc) }\n</code></pre>\n\n<p>Now, we can just iterate the array, and we know the last value in each subarray becomes the final value (ie, not sub hashes off of it) and everything else needs to create a new sub-hash, which is done above, when we access a key without a value, so we can access all intermediate keys by use of <a href=\"https://ruby-doc.org/core/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a>, we also need to convert all the keys into symbols, and (it appears) remove single quotes from the beginning and end of the values:</p>\n\n<pre><code>array.each_with_object(output) do |(*nesting, key, value), hash|\n  hash = nesting.empty? ? hash : hash.dig(*nesting.map(&amp;:to_sym))\n\n  hash[key.to_sym] = value.gsub(/(\\A\\'|\\'\\z)/, '')\nend\n</code></pre>\n\n<p>Running that with <code>array</code> set to your input array we get the following out:</p>\n\n<pre><code>{\n  :default =&gt; \"drop\",\n  :rule =&gt; {\n    :\"49\" =&gt; {\n      :action =&gt; \"accept\",\n      :description =&gt; \"This one is for\",\n      :destination =&gt; {\n        :address =&gt; \"1.2.3.4/20\"\n      }\n    },\n    :\"50\" =&gt; {\n      :action =&gt; \"accept\",\n      :description =&gt; \"Once more\",\n      :destination =&gt; {\n        :address =&gt; \"1.2.3.5/20\"\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "is_accepted": false, "score": 2, "last_activity_date": 1531344018, "last_edit_date": 1531344018, "creation_date": 1531343440, "answer_id": 51294208, "question_id": 51291962, "link": "https://stackoverflow.com/questions/51291962/i-have-a-array-of-arrays-as-in-description-need-to-convert-it-to-formatted-hash/51294208#51294208", "title": "I have a array of arrays as in description need to convert it to formatted Hash in Ruby", "body": "<pre><code>class Hash\n  def deep_store(keys, value)\n    if keys.size &gt; 1\n      self[keys.first] ||= {}\n      self[keys.first].deep_store keys[1..-1], value\n    else\n      self[keys.first] = value\n    end\n    self\n  end\nend\n\ninput = [\n  [\"default\", \"'drop'\"],\n  [\"rule\", \"49\", \"action\", \"'accept'\"],\n  [\"rule\", \"49\", \"description\", \"'This one is for'\"],\n  [\"rule\", \"49\", \"destination\", \"address\", \"'1.2.3.4/20'\"],\n  [\"rule\", \"50\", \"action\", \"'accept'\"],\n  [\"rule\", \"50\", \"description\", \"'Once more'\"],\n  [\"rule\", \"50\", \"destination\", \"address\", \"'1.2.3.5/20'\"]\n]\n\nresult = input.each_with_object({}) do |(*keys, value), hash|\n  hash.deep_store keys, value\nend\n\nputs result\n\n# =&gt; {\"default\"=&gt;\"'drop'\", \"rule\"=&gt;{\"49\"=&gt;{\"action\"=&gt;\"'accept'\", \"description\"=&gt;\"'This one is for'\", \"destination\"=&gt;{\"address\"=&gt;\"'1.2.3.4/20'\"}}, \"50\"=&gt;{\"action\"=&gt;\"'accept'\", \"description\"=&gt;\"'Once more'\", \"destination\"=&gt;{\"address\"=&gt;\"'1.2.3.5/20'\"}}}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "edited": false, "score": 0, "creation_date": 1531365505, "post_id": 51296266, "comment_id": 89570969, "body": "When I tried this I&#39;m getting following error: undefined method `transform_values&#39; for #&lt;Hash:0x007fd3fb837558&gt; (NoMethodError). Can you correct me what is that I&#39;m missing."}, {"owner": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "edited": false, "score": 0, "creation_date": 1531366220, "post_id": 51296266, "comment_id": 89571092, "body": "I think thats because the version of Ruby I&#39;m using is 2.2.2. The support for this came later in 2.3 or later"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "edited": false, "score": 1, "creation_date": 1531373797, "post_id": 51296266, "comment_id": 89572985, "body": "Yes, I should have mentioned that. <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a> made it&#39;s debut in v2.4.0."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1531361185, "last_edit_date": 1531361185, "creation_date": 1531360035, "answer_id": 51296266, "question_id": 51291962, "link": "https://stackoverflow.com/questions/51291962/i-have-a-array-of-arrays-as-in-description-need-to-convert-it-to-formatted-hash/51296266#51296266", "title": "I have a array of arrays as in description need to convert it to formatted Hash in Ruby", "body": "<p>This is another recursive solution. One advantage of using recursion is that the array can be of arbitrary size.</p>\n\n<pre><code>arr = [\n  [\"default\", \"'drop'\"],\n  [\"rule\", \"49\", \"action\", \"'accept'\"],\n  [\"rule\", \"49\", \"description\", \"'This one is for'\"],\n  [\"rule\", \"49\", \"destination\", \"address\", \"'1.2.3.4/20'\"],\n  [\"rule\", \"50\", \"action\", \"'accept'\"],\n  [\"rule\", \"50\", \"description\", \"'Once more'\"], \n  [\"rule\", \"50\", \"destination\", \"address\", \"'1.2.3.5/20'\"]\n]\n\ndef recurse(arr)\n  arr.group_by(&amp;:first).transform_values do |a|\n    a.map! { |r| r.drop(1) }\n    a.size == 1 &amp;&amp; a[0].size == 1 ? a[0][0] : recurse(a)\n  end\nend\n\nrecurse arr\n  #=&gt; { \"default\"=&gt;\"'drop'\",\n  #     \"rule\"=&gt;{\n  #       \"49\"=&gt;{\n  #         \"action\"=&gt;\"'accept'\",\n  #         \"description\"=&gt;\"'This one is for'\",\n  #         \"destination\"=&gt;{\"address\"=&gt;\"'1.2.3.4/20'\"}\n  #       },\n  #       \"50\"=&gt;{\n  #         \"action\"=&gt;\"'accept'\",\n  #         \"description\"=&gt;\"'Once more'\",\n  #         \"destination\"=&gt;{\"address\"=&gt;\"'1.2.3.5/20'\"}\n  #       }\n  #     }\n  #   }\n</code></pre>\n\n<p>Note that the first step is as follows.</p>\n\n<pre><code>arr.group_by(&amp;:first)\n  #=&gt; {\"default\"=&gt;[[\"default\", \"'drop'\"]],\n  #    \"rule\"=&gt;[[\"rule\", \"49\", \"action\", \"'accept'\"],\n  #             [\"rule\", \"49\", \"description\", \"'This one is for'\"],\n  #             [\"rule\", \"49\", \"destination\", \"address\", \"'1.2.3.4/20'\"],\n  #             [\"rule\", \"50\", \"action\", \"'accept'\"],\n  #             [\"rule\", \"50\", \"description\", \"'Once more'\"],\n  #             [\"rule\", \"50\", \"destination\", \"address\", \"'1.2.3.5/20'\"]]}\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 8875057, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-it4zn4NFnZY/AAAAAAAAAAI/AAAAAAAAACA/H5CKtapyjuE/photo.jpg?sz=128", "display_name": "Bharath M", "link": "https://stackoverflow.com/users/8875057/bharath-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 51296266, "answer_count": 3, "score": 0, "last_activity_date": 1531404098, "creation_date": 1531333150, "last_edit_date": 1531404098, "question_id": 51291962, "link": "https://stackoverflow.com/questions/51291962/i-have-a-array-of-arrays-as-in-description-need-to-convert-it-to-formatted-hash", "title": "I have a array of arrays as in description need to convert it to formatted Hash in Ruby", "body": "<p>I have a file with many arrays as below:</p>\n\n<pre><code>[[\"default\", \"'drop'\"],\n[\"rule\", \"49\", \"action\", \"'accept'\"],\n[\"rule\", \"49\", \"description\", \"'This one is for'\"],\n[\"rule\", \"49\", \"destination\", \"address\", \"'1.2.3.4/20'\"],\n[\"rule\", \"50\", \"action\", \"'accept'\"],\n[\"rule\", \"50\", \"description\", \"'Once more'\"],\n[\"rule\", \"50\", \"destination\", \"address\", \"'1.2.3.5/20'\"]]\n</code></pre>\n\n<p>I want a ruby code which can make it look like following:</p>\n\n<pre><code>{\n  'default': 'drop',\n  'rule': { \n    '49': { \n      'destination': { \n        'address': '1.2.3.4/20' \n      },\n      'action': 'accept', \n      'description': 'This one is for' \n    },\n    '50': {\n      'destination': {\n        'address': '1.2.3.5/20'\n      },\n      'action': 'accept',\n      'description': 'Once more'\n    }\n  }\n}\n</code></pre>\n\n<p>I tried different approaches which is replacing and keeping only the last one or few keys are missing. Please help me in this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "associations"], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531405596, "post_id": 51293187, "comment_id": 89593007, "body": "Hello. Thank you very much for your help. How routes work as you said. But when adding the links to the items, type event_orcamentos_url I get the error: No route matches {:action=&gt;&quot;index&quot;, :controller=&gt;&quot;app/orcamentos&quot;, :id=&gt;&quot;teste-de-evento&quot;}, missing required keys: [:event_id]. Should I change someting in the controllers to get the id of event?"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531405724, "post_id": 51293187, "comment_id": 89593095, "body": "My controller its getting just the id of the especific items, like def set_orcamento         @orcamento = Orcamento.find(params[:id])       end"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531406212, "post_id": 51293187, "comment_id": 89593425, "body": "I tried to use event_orcamentos_url(@event) and it works, but when I go to link I get No route matches {:action=&gt;&quot;index&quot;, :controller=&gt;&quot;app/orcamentos&quot;, :event_id=&gt;nil}, missing required keys: [:event_id] in the path: &lt;%= event_orcamentos_url(@event) %&gt;"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531407999, "post_id": 51293187, "comment_id": 89594608, "body": "You should probably use <code>event_orcamentos_path(@event)</code>. Then, you need to make sure that your <code>@event</code> instance is set in your controller action. It looks like you&#39;re probably not setting <code>@event</code> which is why you&#39;re getting <code>:event_id=&gt;nil</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531408196, "post_id": 51293187, "comment_id": 89594739, "body": "Also, you need to decide if you&#39;re going to use <code>:id</code> or <code>:name</code> as your identifier. As you can see here: <code>No route matches {:action=&gt;&quot;index&quot;, :controller=&gt;&quot;app&#47;orcamentos&quot;, :id=&gt;&quot;teste-de-evento&quot;}</code>, it looks like you&#39;re trying to use the <code>name</code> as the <code>id</code>."}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531414964, "post_id": 51293187, "comment_id": 89598702, "body": "I&#39;m using id, because I&#39;m already using frindly_id gem. I tried set parammters <code>@event = Event.friendly.find(params[:id])</code>         <code>@orcamento = Orcamento.find(params[:id])</code> and then <code>{event_orcamentos_url(@event)</code>, but I still get the error: <code>{:action=&gt;&quot;index&quot;, :controller=&gt;&quot;app&#47;orcamentos&quot;, :event_id=&gt;nil}</code>"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531415199, "post_id": 51293187, "comment_id": 89598794, "body": "I&#39;m also tried put on the index funcion: <code>@event = Event.friendly.find(params[:id])</code> but I get <code>Couldn&#39;t find Event without an ID</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531415247, "post_id": 51293187, "comment_id": 89598815, "body": "Can you add your current <code>routes.rb</code>, your relevant controller action, your partial, and console output to your question?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1531415809, "post_id": 51293187, "comment_id": 89599068, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/174901/discussion-between-jvillian-and-fernando-aureliano\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1531338317, "creation_date": 1531338317, "answer_id": 51293187, "question_id": 51291453, "link": "https://stackoverflow.com/questions/51291453/rails-5-event-system/51293187#51293187", "title": "Rails 5: Event system", "body": "<p>First of all, you need <code>resources</code> in front of your nested items. Something like: </p>\n\n<pre><code>scope 'app', :module =&gt; \"app\" do\n  resources :events do\n    resources :roteiros, \n              :convidados, :lista_convidados,\n              :orcamentos, :orcamento_items, :providers, \n              :providers_items, :reports, :reports_items,\n              :modelos, :modelos_items, :arquivos, :arquivos_items\n  end\nend\n</code></pre>\n\n<p>Which, when you run <code>rake routes</code> in the console, will give you something like:</p>\n\n<pre><code>    event_roteiros GET    /app/events/:event_id/roteiros(.:format)              app/roteiros#index\n                   POST   /app/events/:event_id/roteiros(.:format)              app/roteiros#create\n new_event_roteiro GET    /app/events/:event_id/roteiros/new(.:format)          app/roteiros#new\nedit_event_roteiro GET    /app/events/:event_id/roteiros/:id/edit(.:format)     app/roteiros#edit\n     event_roteiro GET    /app/events/:event_id/roteiros/:id(.:format)          app/roteiros#show\n                   PATCH  /app/events/:event_id/roteiros/:id(.:format)          app/roteiros#update\n                   PUT    /app/events/:event_id/roteiros/:id(.:format)          app/roteiros#update\n                   DELETE /app/events/:event_id/roteiros/:id(.:format)          app/roteiros#destroy\n\n                   ... omitting a bunch of routes ...\n\n            events GET    /app/events(.:format)                                 app/events#index\n                   POST   /app/events(.:format)                                 app/events#create\n         new_event GET    /app/events/new(.:format)                             app/events#new\n        edit_event GET    /app/events/:id/edit(.:format)                        app/events#edit\n             event GET    /app/events/:id(.:format)                             app/events#show\n                   PATCH  /app/events/:id(.:format)                             app/events#update\n                   PUT    /app/events/:id(.:format)                             app/events#update\n                   DELETE /app/events/:id(.:format)                             app/events#destroy\n</code></pre>\n\n<p>As you can see, that will cause everything to be namespaced under <code>app</code>. That means your controllers would need to look like:</p>\n\n<pre><code>class App::RoteirosController &lt; ApplicationController \n  ...\nend\n</code></pre>\n\n<p>And that file would be under:</p>\n\n<pre><code>app\n |- controllers\n |   |- app\n |   |   |- roteiros_controller.rb\n</code></pre>\n\n<p>Which I suspect you don't want. So, it should be more like: </p>\n\n<pre><code>resources :events do\n  resources :roteiros, \n            :convidados, :lista_convidados,\n            :orcamentos, :orcamento_items, :providers, \n            :providers_items, :reports, :reports_items,\n            :modelos, :modelos_items, :arquivos, :arquivos_items\nend\n</code></pre>\n\n<p>As discussed in the <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">docs in section 2.7.2 Shallow Nesting</a>, you might consider doing something like: </p>\n\n<pre><code>resources :events do\n  resources :arquivos, \n            :arquivos_items,\n            :convidados, \n            :lista_convidados,\n            :modelos, \n            :modelos_items, \n            :orcamento_items, \n            :orcamentos, \n            :providers, \n            :providers_items, \n            :reports, \n            :reports_items,\n            :roteiros, \n            shallow: true\nend\n</code></pre>\n\n<p>In which case, you'll get something like:</p>\n\n<pre><code>    event_arquivos GET    /events/:event_id/arquivos(.:format)              arquivos#index\n                   POST   /events/:event_id/arquivos(.:format)              arquivos#create\n new_event_arquivo GET    /events/:event_id/arquivos/new(.:format)          arquivos#new\n      edit_arquivo GET    /arquivos/:id/edit(.:format)                      arquivos#edit\n           arquivo GET    /arquivos/:id(.:format)                           arquivos#show\n                   PATCH  /arquivos/:id(.:format)                           arquivos#update\n                   PUT    /arquivos/:id(.:format)                           arquivos#update\n                   DELETE /arquivos/:id(.:format)                           arquivos#destroy\n\n                   ... omitting a bunch of routes ...\n\n            events GET    /events(.:format)                                 events#index\n                   POST   /events(.:format)                                 events#create\n         new_event GET    /events/new(.:format)                             events#new\n        edit_event GET    /events/:id/edit(.:format)                        events#edit\n             event GET    /events/:id(.:format)                             events#show\n                   PATCH  /events/:id(.:format)                             events#update\n                   PUT    /events/:id(.:format)                             events#update\n                   DELETE /events/:id(.:format)                             events#destroy\n</code></pre>\n\n<p>According to your example, however, it looks like you want to use <code>:event_name</code> as the identifier instead of <code>:event_id</code>. In which case, you would do:</p>\n\n<pre><code>resources :events, param: :name do\n  resources :arquivos, \n            :arquivos_items,\n            :convidados, \n            :lista_convidados,\n            :modelos, \n            :modelos_items, \n            :orcamento_items, \n            :orcamentos, \n            :providers, \n            :providers_items, \n            :reports, \n            :reports_items,\n            :roteiros, \n            shallow: true\nend\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code>    event_arquivos GET    /events/:event_name/arquivos(.:format)            arquivos#index\n                   POST   /events/:event_name/arquivos(.:format)            arquivos#create\n new_event_arquivo GET    /events/:event_name/arquivos/new(.:format)        arquivos#new\n      edit_arquivo GET    /arquivos/:id/edit(.:format)                      arquivos#edit\n           arquivo GET    /arquivos/:id(.:format)                           arquivos#show\n                   PATCH  /arquivos/:id(.:format)                           arquivos#update\n                   PUT    /arquivos/:id(.:format)                           arquivos#update\n                   DELETE /arquivos/:id(.:format)                           arquivos#destroy\n\n                   ... omitting a bunch of routes ...\n\n            events GET    /events(.:format)                                 events#index\n                   POST   /events(.:format)                                 events#create\n         new_event GET    /events/new(.:format)                             events#new\n        edit_event GET    /events/:name/edit(.:format)                      events#edit\n             event GET    /events/:name(.:format)                           events#show\n                   PATCH  /events/:name(.:format)                           events#update\n                   PUT    /events/:name(.:format)                           events#update\n                   DELETE /events/:name(.:format)                           events#destroy\n</code></pre>\n\n<p>Which I think is what you're looking for.</p>\n"}], "owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 51293187, "answer_count": 1, "score": -1, "last_activity_date": 1531415694, "creation_date": 1531330990, "last_edit_date": 1531415694, "question_id": 51291453, "link": "https://stackoverflow.com/questions/51291453/rails-5-event-system", "title": "Rails 5: Event system", "body": "<p>I'm making an event system. I have a model Event, and each event will have files, reports, providers and so on.</p>\n\n<p>Here is my routes today:</p>\n\n<pre><code>  scope 'app', :module =&gt; \"app\" do\n    resources :events, :roteiros, \n              :convidados, :lista_convidados,\n              :orcamentos, :orcamento_items, :providers, \n              :providers_items, :reports, :reports_items,\n              :modelos, :modelos_items, :arquivos, :arquivos_items   \n    end\n</code></pre>\n\n<p>I'm looking for the best way to the others models, when edited or create new data, the new information is associated with the Event model, then each event will have the information associated with it.</p>\n\n<p>I think it should be something like that:</p>\n\n<pre><code>scope 'app', :module =&gt; \"app\" do\n    resources :events do\n\n              :roteiros, \n              :convidados, :lista_convidados,\n              :orcamentos, :orcamento_items, :providers, \n              :providers_items, :reports, :reports_items,\n              :modelos, :modelos_items, :arquivos, :arquivos_items\n\n    end\nend\n</code></pre>\n\n<p>Then the url would look like <code>/app/events/event-name/providers</code></p>\n\n<p>I would still need to get the event id so I can associate a new record with a specific event</p>\n\n<p>All models already have the <code>event_id</code> value to association</p>\n\n<p>Thank you for your help.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<blockquote>\n  <p>Current routes:</p>\n</blockquote>\n\n<pre><code>  scope 'app', :module =&gt; \"app\" do\n    resources :events do\n      resources :arquivos, \n                :arquivos_items,\n                :convidados, \n                :lista_convidados,\n                :modelos, \n                :modelos_items, \n                :orcamento_items, \n                :orcamentos, \n                :providers, \n                :providers_items, \n                :reports, \n                :reports_items,\n                :roteiros, shallow: true\n    end\n\n    resources :todo_lists do\n      member do\n        patch :complete\n      end\n\n      resources :todo_items do\n        member do\n          patch :complete\n        end\n      end\n    end\n\n\n  end\n</code></pre>\n\n<blockquote>\n  <p>Controller</p>\n</blockquote>\n\n<pre><code>module App\n  class OrcamentosController &lt; SuperAppController\n    before_action :set_orcamento, only: [:show, :edit, :update, :destroy]\n\n    # GET /orcamentos\n    # GET /orcamentos.json\n    def index\n      @orcamentos = Orcamento.all\n      @orcamento = Orcamento.new\n      @orcamento_item = OrcamentoItem.new\n    end\n\n    # GET /orcamentos/1\n    # GET /orcamentos/1.json\n    def show\n    end\n\n    # GET /orcamentos/new\n    def new\n      @orcamento = Orcamento.new\n    end\n\n    # GET /orcamentos/1/edit\n    def edit\n    end\n\n    # POST /orcamentos\n    # POST /orcamentos.json\n    def create\n      @orcamento = Orcamento.new(orcamento_params)\n\n      respond_to do |format|\n        if @orcamento.save\n          format.html { redirect_to orcamentos_path, notice: 'Orcamento inserido.' }\n          format.json { render :show, status: :created, location: @orcamento }\n        else\n          format.html { render :new }\n          format.json { render json: @orcamento.errors, status: :unprocessable_entity }\n        end\n      end\n    end\n\n    # PATCH/PUT /orcamentos/1\n    # PATCH/PUT /orcamentos/1.json\n    def update\n      respond_to do |format|\n        if @orcamento.update(orcamento_params)\n          format.html { redirect_to orcamentos_path, notice: 'Orcamento atualizado.' }\n          format.json { render :show, status: :ok, location: @orcamento }\n        else\n          format.html { render :edit }\n          format.json { render json: @orcamento.errors, status: :unprocessable_entity }\n        end\n      end\n    end\n\n    # DELETE /orcamentos/1\n    # DELETE /orcamentos/1.json\n    def destroy\n      @orcamento.destroy\n      respond_to do |format|\n        format.html { redirect_to orcamentos_url, notice: 'Orcamento removido.' }\n        format.json { head :no_content }\n      end\n    end\n\n    private\n      # Use callbacks to share common setup or constraints between actions.\n      def set_orcamento\n        @event = Event.friendly.find(params[:id])\n        @orcamento = Orcamento.find(params[:id])\n      end\n\n      # Never trust parameters from the scary internet, only allow the white list through.\n      def orcamento_params\n        params.require(:orcamento).permit(:title, orcamento_items_attributes: [:id, :desc, :estimado, :real, :pago, :pendente, :vencimento, :orcamento_id, :venc, :_destroy])\n      end\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>URL test</p>\n</blockquote>\n\n<pre><code>/app/events/teste-de-evento/orcamentos\n</code></pre>\n\n<blockquote>\n  <p>Partial</p>\n</blockquote>\n\n<pre><code>&lt;ul&gt;\n  &lt;li&gt;&lt;a href=\"/app/todo_lists\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'todo_lists' %&gt;\"&gt;CHECKLIST&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"&lt;%= event_orcamentos_url(@event) %&gt;\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'orcamentos' %&gt;\"&gt;OR\u00c7AMENTO&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"/app/lista_convidados\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'lista_convidados' %&gt;\"&gt;CONVIDADOS&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"\"&gt;\n      &lt;div class=\"itemMenu\"&gt;AGENDA&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"/app/providers/\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'providers' %&gt;\"&gt;FORNECEDORES&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"/app/roteiros/\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'roteiros' %&gt;\"&gt;ROTEIROS&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"/app/arquivos\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'arquivos' %&gt;\"&gt;ARQUIVOS&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;a href=\"/app/reports/\"&gt;\n      &lt;div class=\"itemMenu &lt;%= 'active' if controller_name == 'reports' %&gt;\"&gt;RELAT\u00d3RIOS&lt;/div&gt;\n    &lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<blockquote>\n  <p>View</p>\n</blockquote>\n\n<pre><code>&lt;section id=\"content\"&gt;\n    &lt;section class=\"row wrapContent\"&gt;\n      &lt;header class=\"sHeaderPagina column large-12 medium-12 small-12\"&gt;\n        &lt;a href=\"javascript:history.go(-1);\"&gt;\n          &lt;h2 class=\"backMenu\"&gt;&lt;div class=\"arrow\"&gt;&lt;/div&gt;Inicial&lt;/h2&gt;\n        &lt;/a&gt;\n        &lt;!-- END BACK MENU --&gt;\n\n        &lt;nav id=\"sMenuEventos\"&gt;\n          &lt;%= render 'sharedApp/navegacao' %&gt;\n\n          &lt;div class=\"acoesGerenciar\"&gt;\n            &lt;ul&gt;\n              &lt;li&gt;\n                &lt;a href=\"\"&gt;\n                  &lt;div class=\"AddUser\"&gt;&lt;/div&gt;\n                &lt;/a&gt;\n              &lt;/li&gt;\n\n              &lt;li&gt;\n                &lt;a href=\"\"&gt;\n                  &lt;div class=\"btPDF\"&gt;&lt;/div&gt;\n                &lt;/a&gt;\n              &lt;/li&gt;\n\n              &lt;li&gt;\n                &lt;a href=\"/app/events/teste-evento/edit\"&gt;\n                  &lt;div class=\"btConfigs\"&gt;&lt;/div&gt;\n                &lt;/a&gt;\n              &lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/div&gt;\n        &lt;/nav&gt;\n        &lt;!-- END NAV EVENTOS --&gt;\n\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"infoWidget column large-3 medium-6 small-12\"&gt;\n            &lt;div class=\"boxInfo\"&gt;\n              &lt;h3&gt;Custo Estimado&lt;/h3&gt;\n              &lt;h2&gt;R$ 0,00&lt;/h2&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;!-- END WIDGET --&gt;\n          &lt;div class=\"infoWidget column large-3 medium-6 small-12\"&gt;\n            &lt;div class=\"boxInfo\"&gt;\n              &lt;h3&gt;Custo Real&lt;/h3&gt;\n              &lt;h2&gt;R$ 0,00&lt;/h2&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;!-- END WIDGET --&gt;\n          &lt;div class=\"infoWidget column large-3 medium-6 small-12\"&gt;\n            &lt;div class=\"boxInfo\"&gt;\n              &lt;h3&gt;Valor Pago&lt;/h3&gt;\n              &lt;h2&gt;R$ 0,00&lt;/h2&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;!-- END WIDGET --&gt;\n          &lt;div class=\"infoWidget column large-3 medium-6 small-12\"&gt;\n            &lt;div class=\"boxInfo\"&gt;\n              &lt;h3&gt;Custo Pendente&lt;/h3&gt;\n              &lt;h2&gt;R$ 0,00&lt;/h2&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;!-- END WIDGET --&gt;\n        &lt;/div&gt;\n\n      &lt;/header&gt;\n      &lt;!-- END HEADER --&gt;\n\n      &lt;a id=\"addItemBt\" href=\"javascript:;\"&gt;&lt;span class=\"btAdd\"&gt;+&lt;/span&gt;&lt;/a&gt;\n\n&lt;% if @orcamentos.any? \n        @orcamentos.each do |orcamento| %&gt;\n      &lt;article class=\"sTable sTableActive column large-12 medium-12 small-12\"&gt;\n        &lt;a href=\"javascript:;\" class=\"openTable\"&gt;\n          &lt;header&gt;\n            &lt;h3&gt;&lt;%= orcamento.title %&gt;&lt;/h3&gt;\n            &lt;div class=\"arrow\"&gt;&lt;/div&gt;\n          &lt;/header&gt;\n        &lt;/a&gt;\n\n        &lt;div class=\"wrapTable \"&gt;\n          &lt;table class=\"hover\"&gt;\n            &lt;thead&gt;\n              &lt;tr&gt;\n                &lt;th width=\"200\"&gt;Descri\u00e7\u00e3o&lt;/th&gt;\n                &lt;th&gt;Custo Estimado&lt;/th&gt;\n                &lt;th width=\"150\"&gt;Custo Real&lt;/th&gt;\n                &lt;th width=\"150\"&gt;Valor Pago&lt;/th&gt;\n                &lt;th width=\"150\"&gt;Valor Pendente&lt;/th&gt;\n                &lt;th width=\"150\"&gt;Pr\u00f3ximo Vencimento&lt;/th&gt;\n              &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n\n              &lt;% orcamento.orcamento_items.each do |o| %&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;&lt;%= o.desc %&gt;&lt;/td&gt;\n                  &lt;td&gt;R$ &lt;%= o.estimado %&gt;&lt;/td&gt;\n                  &lt;td class=\"blue\"&gt;R$ &lt;%= o.real %&gt;&lt;/td&gt;\n                  &lt;td&gt;R$ &lt;%= o.pago %&gt;&lt;/td&gt;\n                  &lt;td&gt;R$ &lt;%= o.pendente %&gt;&lt;/td&gt;\n                  &lt;td&gt;\n                    &lt;%= o.vencimento %&gt;\n                  &lt;/td&gt;\n                &lt;/tr&gt;\n              &lt;% end %&gt;\n\n              &lt;tr&gt;\n                &lt;%#= form_for(new_convidado_path) do |f| %&gt;\n                &lt;%= form_for @orcamento_item, :url =&gt; { :controller =&gt; \"orcamento_items\", :action =&gt; \"create\" }, :html =&gt; {:method =&gt; :post} do |f| %&gt;\n                  &lt;td&gt;\n                    &lt;%= f.hidden_field :orcamento_id, value: orcamento.id, required: true %&gt;\n\n                    &lt;%= f.telephone_field :desc, placeholder: \"Descri\u00e7\u00e3o\", required: true %&gt;\n                  &lt;/td&gt;\n\n                  &lt;td&gt;\n                    &lt;%= f.telephone_field :estimado, placeholder: \"Estimado\", required: true, class: \"valor\" %&gt;\n                  &lt;/td&gt;\n\n                  &lt;td&gt;\n                    &lt;%= f.telephone_field :real, placeholder: \"Real\", required: true, class: \"valor\" %&gt;\n                  &lt;/td&gt;\n\n                  &lt;td&gt;\n                    &lt;%= f.telephone_field :pago, placeholder: \"Pago\", required: true, class: \"valor\" %&gt;\n\n                  &lt;/td&gt;\n\n                  &lt;td&gt;\n                    &lt;%= f.telephone_field :pendente, placeholder: \"Pendente\", required: true, class: \"valor\" %&gt;\n                  &lt;/td&gt;\n\n\n                  &lt;td&gt;\n                    &lt;%= f.text_field :vencimento, placeholder: \"Vencimento\", required: true, class: \"data\" %&gt;\n                    &lt;%= f.submit \"+\", class: \"plusSubmit\" %&gt;\n                  &lt;/td&gt;\n\n                &lt;% end %&gt;\n              &lt;/tr&gt;\n\n              &lt;tr class=\"total\"&gt;\n                &lt;td class=\"subtotal\"&gt;Sub-total&lt;/td&gt;\n                &lt;td&gt;R$ 0.000&lt;/td&gt;\n                &lt;td class=\"blue\"&gt;R$ 0.000&lt;/td&gt;\n                &lt;td&gt;R$ 0.000&lt;/td&gt;\n                &lt;td&gt;R$ 0.000&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n\n            &lt;/tbody&gt;\n          &lt;/table&gt;\n\n          &lt;ul class=\"acoes\"&gt;\n            &lt;% orcamento.orcamento_items.each do |c| %&gt;\n              &lt;li&gt;\n                  &lt;div class=\"btActions\"&gt;&lt;/div&gt;\n                  &lt;div class=\"opcoesCadastro\"&gt;\n                    &lt;a href=\"\"&gt;\n                      &lt;div class=\"editar\"&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                    &lt;a href=\"\"&gt;\n                      &lt;div class=\"excluir\"&gt;&lt;/div&gt;\n                    &lt;/a&gt;\n                  &lt;/div&gt;\n              &lt;/li&gt;\n              &lt;!-- END ITEM --&gt;\n            &lt;% end %&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n\n      &lt;/article&gt;\n      &lt;!-- END LISTA --&gt;\n&lt;% end else %&gt;\n  &lt;article class=\"sTable sTableSelect sTableActive column large-12 medium-12 small-12\"&gt;\n        &lt;a href=\"javascript:;\" class=\"openTable\"&gt;\n          &lt;header&gt;\n            &lt;h3&gt;Nenhuma or\u00e7amento ainda&lt;/h3&gt;\n            &lt;div class=\"arrow\"&gt;&lt;/div&gt;\n          &lt;/header&gt;\n        &lt;/a&gt;\n  &lt;/article&gt;\n&lt;% end %&gt;\n\n\n\n\n\n\n    &lt;/section&gt;\n  &lt;/section&gt;\n&lt;!-- ========================== END CONTENT --&gt;\n\n\n  &lt;section class=\"modal modalCadastro\" style=\"display: none;\"&gt;\n    &lt;section class=\"boxModal centerModal\"&gt;\n      &lt;header&gt;\n        &lt;h2&gt;Adicionar Tabela de Or\u00e7amento&lt;/h2&gt;\n        &lt;a class=\"fecharBt fecharModal\" href=\"javascript:;\"&gt;&lt;img src=\"./assets/images/icons/fechar.png\" alt=\"\" class=\"fechar\"&gt;&lt;/a&gt;\n      &lt;/header&gt;\n\n      &lt;%= form_with(model: @orcamento, local: true, html: { class: \"row\" }) do |f| %&gt;\n        &lt;div class=\"inputFormCadastro\"&gt;\n          &lt;label for=\"\"&gt;Nome da lista&lt;/label&gt;\n          &lt;%= f.text_field :title, required: true %&gt;\n        &lt;/div&gt;\n        &lt;!-- END ITEM --&gt;\n\n        &lt;h3 class=\"titleBoxExtras\"&gt;Adicionar Or\u00e7amento&lt;/h3&gt;\n        &lt;div id='boxCamposExtras'&gt;\n          &lt;%= f.fields_for :orcamento_items do |task| %&gt;\n            &lt;%= render 'orcamento_items_fields', :f =&gt; task %&gt;\n          &lt;% end %&gt;\n          &lt;div class='links'&gt;\n            &lt;%= link_to_add_association 'adicionar or\u00e7amento', f, :orcamento_items %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n\n\n        &lt;div class=\"botoes\"&gt;\n          &lt;%= f.submit \"CRIAR\", class: \"botao\" %&gt;\n          &lt;a href=\"#\" class=\"btLink fecharModal\"&gt;CANCELAR&lt;/a&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n\n    &lt;/section&gt;\n  &lt;/section&gt;\n  &lt;!-- END MODAL --&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/C7meD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C7meD.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "enums"], "comments": [{"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1531327754, "post_id": 51290533, "comment_id": 89558975, "body": "1. Did you set the default value for status in your migration?  2. Where are you setting the value for the status column in your <code>self.save_value</code> method?"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "reply_to_user": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1531328652, "post_id": 51290533, "comment_id": 89559391, "body": "@mokayode yes default value has been set in migration and self.save_value is called through a controller."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8208384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OfLd5.jpg?s=128&g=1", "display_name": "jay_dateer", "link": "https://stackoverflow.com/users/8208384/jay-dateer"}, "is_accepted": false, "score": 0, "last_activity_date": 1574239901, "creation_date": 1574239901, "answer_id": 58950197, "question_id": 51290533, "link": "https://stackoverflow.com/questions/51290533/enum-attribute-of-model-in-ror-sometime-have-a-value-of-nil/58950197#58950197", "title": "enum attribute of model in ROR sometime have a value of nil", "body": "<p>I am also facing a similar issue now, as I analysed one reason could be if the enum hash in model is updated(i.e. some key value is removed) and there were already some records in DB with those enum values, then its set to nil.</p>\n\n<p>And in such case my <code>Model.where(status: nil).count</code> or <code>Model.where(status: nil)</code> is also not fetching those records in rails console.</p>\n"}], "owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574239901, "creation_date": 1531327294, "last_edit_date": 1531327610, "question_id": 51290533, "link": "https://stackoverflow.com/questions/51290533/enum-attribute-of-model-in-ror-sometime-have-a-value-of-nil", "title": "enum attribute of model in ROR sometime have a value of nil", "body": "<p>I have a model </p>\n\n<pre><code>class Item &lt; ActiveRecord::Base\n  enum status: { requested: 0, received: 1, sent: 3 }\n  validates_presence_of :status\nend\n\ndef self.save_value(item_id, value\n  item = Item.find(item_id)\n  item.value = value\n  item.save!\nend\n</code></pre>\n\n<p>Sometimes (&lt; 1% of time) I receive error like <code>Validation failed: status can't be blank</code> on <code>item.save!</code></p>\n\n<p>Points to be noted</p>\n\n<ol>\n<li>Status has a default value of 0 i.e it is never blank.</li>\n<li>In database status is never empty (I have checked all of the entries).</li>\n</ol>\n\n<p>I am note sure what is problem, is that the problem of Enum?</p>\n\n<ul>\n<li>OS: Ubuntu</li>\n<li>WebServer: Puma [2 workers and 12 threads] </li>\n</ul>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "server"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1531326005, "post_id": 51290144, "comment_id": 89558053, "body": "Rails listens on port 3000 by default, you may have changed some setting to get it running on port 80 instead. Regular users cannot open ports below 1024."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1531327194, "post_id": 51290144, "comment_id": 89558696, "body": "You&#39;ll need to use <code>rvmsudo</code> or equivalent to bind to a port below 1024."}, {"owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "edited": false, "score": 0, "creation_date": 1531336940, "post_id": 51290144, "comment_id": 89563285, "body": "<code>rvmsudo rails s -p 80 rvmsudo: command not found</code>"}, {"owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "edited": false, "score": 0, "creation_date": 1531337144, "post_id": 51290144, "comment_id": 89563357, "body": "I think its because I installed with rbenv"}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "edited": false, "score": 0, "creation_date": 1531336837, "post_id": 51290829, "comment_id": 89563243, "body": "Hmm, adding that line into my config file didn&#39;t change the end result."}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "reply_to_user": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "edited": false, "score": 0, "creation_date": 1531351530, "post_id": 51290829, "comment_id": 89568369, "body": "Check your envirnoment variables eg. <code>::Rails.logger.info(&#39;My port is set to: &#39; + ENV[&#39;PORT&#39;])</code>"}], "tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": false, "score": 0, "last_activity_date": 1531328488, "creation_date": 1531328488, "answer_id": 51290829, "question_id": 51290144, "link": "https://stackoverflow.com/questions/51290144/ruby-on-rails-permission-denied-bind2-for-0-0-0-0-port-80-errnoeacces/51290829#51290829", "title": "Ruby on Rails: Permission denied - bind(2) for &quot;0.0.0.0&quot; port 80 (Errno::EACCES)", "body": "<p>Configure puma to use a different port.</p>\n\n<pre><code># config/puma.rb\nport(ENV.fetch('PORT', 3000))\n</code></pre>\n\n<p>In production set <code>PORT=80</code>, and in local development <code>unset PORT</code>.</p>\n\n<blockquote>\n  <p>Rails listens on port 3000 by default, you may have changed some setting to get it running on port 80 instead. Regular users cannot open ports below 1024. \u2013 meagar\u2666</p>\n</blockquote>\n\n<pre><code>Permission denied - bind(2) for \"0.0.0.0\" port 80 (Errno::EACCES) \n</code></pre>\n\n<p>Only <code>root</code> can bind ports below 1024. Do not run your local development server as <code>root</code>! Instead, configure a port above 1024.</p>\n"}], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531328488, "creation_date": 1531325902, "last_edit_date": 1531326063, "question_id": 51290144, "link": "https://stackoverflow.com/questions/51290144/ruby-on-rails-permission-denied-bind2-for-0-0-0-0-port-80-errnoeacces", "title": "Ruby on Rails: Permission denied - bind(2) for &quot;0.0.0.0&quot; port 80 (Errno::EACCES)", "body": "<h3>Steps to reproduce</h3>\n\n<ol>\n<li>I created my database and migrated.</li>\n<li>I ran <code>rails server</code>.</li>\n</ol>\n\n<p>This was the result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[3957] Puma starting in cluster mode...\n[3957] * Version 3.10.0 (ruby 2.5.1-p57), codename: Russell's Teapot\n[3957] * Min threads: 5, max threads: 5\n    [3957] * Environment: development\n    [3957] * Process workers: 4\n    [3957] * Preloading application\n    [3957] * Listening on tcp://0.0.0.0:80\n    Exiting\n    Traceback (most recent call last):\n            22: from bin/rails:4:in `&lt;main&gt;'\n            21: from bin/rails:4:in `require'\n            20: from /home/my_username/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n            19: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:46:in `invoke'\n            18: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command/base.rb:65:in `perform'\n            17: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n            16: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n            15: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n            14: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `perform'\n            13: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `tap'\n            12: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n            11: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:53:in `start'\n            10: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/server.rb:297:in `start'\n             9: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/rack/handler/puma.rb:69:in `run'\n             8: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/launcher.rb:183:in `run'\n             7: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/cluster.rb:397:in `run'\n             6: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/runner.rb:144:in `load_and_bind'\n             5: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/binder.rb:88:in `parse'\n             4: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/binder.rb:88:in `each'\n             3: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/binder.rb:105:in `block in parse'\n             2: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/binder.rb:270:in `add_tcp_listener'\n             1: from /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/binder.rb:270:in `new'\n    /home/my_usernam/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/puma-3.10.0/lib/puma/binder.rb:270:in `initialize': Permission denied - bind(2) for \"0.0.0.0\" port 80 (Errno::EACCES) \n</code></pre>\n"}, {"tags": ["ruby", "google-chrome", "safari", "sinatra", "atom-editor"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531326746, "post_id": 51290064, "comment_id": 89558442, "body": "You need to  require &quot;sinatra/reloader&quot;  in order for the application to change along with changes made in Atom. Here are the docs: <a href=\"http://sinatrarb.com/contrib/reloader\" rel=\"nofollow noreferrer\">sinatrarb.com/contrib/reloader</a>"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531327269, "post_id": 51290064, "comment_id": 89558744, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1247125/how-to-get-sinatra-to-auto-reload-the-file-after-each-change\">How to get Sinatra to auto-reload the file after each change?</a>"}, {"owner": {"reputation": 47, "user_id": 8115335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42ff71d9ca5de7b3adcf9292a8ebc36?s=128&d=identicon&r=PG&f=1", "display_name": "ZeeZee", "link": "https://stackoverflow.com/users/8115335/zeezee"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531329436, "post_id": 51290064, "comment_id": 89559805, "body": "Thank you @VIktor, but It worked before i updated some application on my laptop. I have had this issue since then. I added sinatra/reloader to my gem file but the issue is not resolved. I have just modified the erb/html file, so added a &lt;p&gt; and it appeared in my browser, but CSS modification does not work."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531330039, "post_id": 51290064, "comment_id": 89560130, "body": "Are changes visible in other browsers ?"}, {"owner": {"reputation": 47, "user_id": 8115335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42ff71d9ca5de7b3adcf9292a8ebc36?s=128&d=identicon&r=PG&f=1", "display_name": "ZeeZee", "link": "https://stackoverflow.com/users/8115335/zeezee"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531330421, "post_id": 51290064, "comment_id": 89560304, "body": "@VIktor ,I use Chrome and Safari. I can see the changes by modifying of the erb/html file. But the result is different in the browsers. :("}], "owner": {"reputation": 47, "user_id": 8115335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42ff71d9ca5de7b3adcf9292a8ebc36?s=128&d=identicon&r=PG&f=1", "display_name": "ZeeZee", "link": "https://stackoverflow.com/users/8115335/zeezee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531325624, "creation_date": 1531325624, "question_id": 51290064, "link": "https://stackoverflow.com/questions/51290064/browsers-do-not-show-the-latest-changes-sinatra-ruby-atom", "title": "Browsers do not show the latest changes (Sinatra, Ruby, ATOM)", "body": "<p>I am building a Sinatra (ruby) application by using ATOM- editor.\nAfter sometime Safari and Chrome do not show the latest html/erb changes what i make in Atom. To lunch the app I am using ruby \"filename\".rb and shotgun \"filename\".rb\nI tried \"clear browser data\" Sometimes it works sometimes not.\nCould you please give me an advice what to do in case of this error? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strftime"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1531325264, "post_id": 51289887, "comment_id": 89557702, "body": "Presumably, <code>meeting.starts_at</code> is nil. You probably want to put a <code>nil</code> check in to guard against calling <code>strftime</code> on a nil object."}], "answers": [{"tags": [], "owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "is_accepted": false, "score": 0, "last_activity_date": 1531325727, "creation_date": 1531325727, "answer_id": 51290093, "question_id": 51289887, "link": "https://stackoverflow.com/questions/51289887/undefined-method-whe-using-strftime/51290093#51290093", "title": "undefined method whe using strftime", "body": "<p>The problem is that <code>meeting.starts_at</code> is <code>nil</code>. Your other call work because <code>meeting.create_at</code> is a date, which responds to the <code>strftime</code> message, as opposed to <code>nil</code>, which does not.</p>\n\n<p>How to prevent <code>meeting.starts_at</code> from being <code>nil</code> depends on where the <code>meeting</code> value comes from. Maybe you want to add better validation so a meeting cannot be created without a <code>starts_at</code> date. Or, if having no starting date is valid, you should add an <code>&lt;% if meeting.starts_at %&gt;</code> <code>&lt;% end %&gt;</code> block around the part where you try to access <code>meeting.starts_at</code> so that nothing is rendered if there is no starting date. You could also add an <code>&lt;% else %&gt;</code> block to render something different if there is no meeting start date.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "is_accepted": false, "score": 0, "last_activity_date": 1531338464, "last_edit_date": 1531338464, "creation_date": 1531336767, "answer_id": 51292797, "question_id": 51289887, "link": "https://stackoverflow.com/questions/51289887/undefined-method-whe-using-strftime/51292797#51292797", "title": "undefined method whe using strftime", "body": "<p>Issue: <code>meeting.starts_at</code> is <code>nil</code>. You can not call that method on <code>nil</code>. </p>\n\n<p>Solution:</p>\n\n<ol>\n<li><p>Ensure that you have either a method that returns a non-nil value or an attribute with the name of <code>starts_at</code> in the Meeting model, with the validation <code>presence: true</code> to ensure that non-nil value is not stored in it.</p></li>\n<li><p>Use <code>meeting.starts_at&amp;.strftime(\"%B %e, %Y,%l:%M %p\")</code> to avoid crash in case if <code>starts_at</code> is <code>nil</code></p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 9230322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5970a4d937d61eb7c14249abca284c?s=128&d=identicon&r=PG&f=1", "display_name": "AlexF", "link": "https://stackoverflow.com/users/9230322/alexf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1531338464, "creation_date": 1531324936, "question_id": 51289887, "link": "https://stackoverflow.com/questions/51289887/undefined-method-whe-using-strftime", "title": "undefined method whe using strftime", "body": "<p>I'm new to rails and I stumbled upon an issue.</p>\n\n<p>I'm trying to build this note/meetings app and I'm getting <strong>undefined method `strftime' for nil:NilClass</strong> error when using strftime. I'm using simple_calendar.</p>\n\n<p>Here's where the error it's comming from:</p>\n\n<pre><code>&lt;div class=\"form-inputs\"&gt;\n  &lt;%= f.input :name %&gt;\n  &lt;%= meeting.starts_at.strftime(\"%B %e, %Y,%l:%M %p\") %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>On the flip side, the strftime method does work when called here for example:</p>\n\n<pre><code>&lt;li id=\"m-time\"&gt;&lt;%= meeting.created_at.strftime(\"%m/%d/%y\") %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>Help?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1531326456, "post_id": 51289734, "comment_id": 89558285, "body": "There is <code>&amp;&amp;=</code> but that, like <code>||=</code>, works with truthy and falsey values rather than just <code>nil</code>."}, {"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 3, "creation_date": 1531327077, "post_id": 51289734, "comment_id": 89558630, "body": "There should not be a gem for that, please don&#39;t make one :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1531330376, "post_id": 51289734, "comment_id": 89560287, "body": "Why should there be a gem for something you have clearly shown has a very simple implementation? Even if there were a gem what syntax would you have it use? Also you do realize in your miniscule example <code>foo</code> is now <code>nil</code> if <code>bar</code> is <code>nil</code> or <code>false</code> correct? So if <code>bar</code> is <code>nil</code> then <code>foo</code> is <code>nil</code> even though <code>foo</code> was not assigned <code>bar</code>."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1531334460, "post_id": 51289734, "comment_id": 89562103, "body": "<code>gem install YOUR_GEM; require &#39;YOUR_GEM&#39;</code> is already way more code than would be necessary to implement this everywhere in my code that needs it."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1531361853, "post_id": 51289734, "comment_id": 89570265, "body": "On top of what everyone is commenting, <code>||=</code> is syntax sugar, working at tokenization/parsing level, not evaluation. You cannot rewrite that in Ruby code. You need to dig deeper into C code to do that."}], "owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531440113, "creation_date": 1531324432, "last_edit_date": 1531341667, "question_id": 51289734, "link": "https://stackoverflow.com/questions/51289734/does-ruby-have-an-equals-or-operator", "title": "Does Ruby have an &quot;equals-or&quot; operator?", "body": "<p>Ruby has an \"or-equals\" operator, <code>||=</code>, that's useful for just initializing values. This works beautifully, but from what I can tell, there doesn't appear to be a reversed <code>||=</code> operator - that is, set the value IFF the value to be assigned is not <code>nil</code>.</p>\n\n<p>Currently the only way I know to do that is something like this:</p>\n\n<pre><code>foo = bar if bar\n</code></pre>\n\n<p>Does anyone know if something like this exists, maybe in the form of a gem? If not I'm tempted to make one.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1531323514, "post_id": 51289405, "comment_id": 89556693, "body": "<code>dup</code> is shallow, just like the docs say. <code>data</code> is local; you need to dupe the data <i>into</i> the new object."}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1531326120, "post_id": 51289405, "comment_id": 89558116, "body": "how do i do that, tried <code>new_page.data = page.data.clone</code> and <code>new_page.data = page.data.dup</code>"}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1531327104, "post_id": 51289405, "comment_id": 89558646, "body": "also, how come it affects .layout, but not .permalink?"}], "answers": [{"comments": [{"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531326605, "post_id": 51289636, "comment_id": 89558367, "body": "Is there a way to copy only that node, i tried  tried new_page.data = page.data.clone and new_page.data = page.data.dup"}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531327108, "post_id": 51289636, "comment_id": 89558652, "body": "also, how come it affects .layout, but not .permalink?"}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "reply_to_user": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531332437, "post_id": 51289636, "comment_id": 89561209, "body": "Your attempt to dup the deeper data structure fails because there is yet another layer below that one. The page.data is itself a hash, so dup only duplicates the topmost hash level. The contents of the hash remained shared references."}], "tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 1, "last_activity_date": 1531324115, "creation_date": 1531324115, "answer_id": 51289636, "question_id": 51289405, "link": "https://stackoverflow.com/questions/51289405/how-come-my-duplicate-also-affects-the-original/51289636#51289636", "title": "How come my duplicate also affects the original?", "body": "<p>The problem here is that dup is only a shallow copy. What this means that it creates a duplicate of the first layer, the array itself, but not any of the deeper layers. </p>\n\n<p>You might want to consider a gem like full_dup that adds the full_dup method that digs down as deep as needed to create a full duplicate of the data.</p>\n\n<p>Full disclosure: I wrote the full_dup gem. There may be other gems that would work just as well.</p>\n"}, {"comments": [{"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531329151, "post_id": 51290549, "comment_id": 89559655, "body": "This is a great answer but <code>new_data = new_page[&#39;data&#39;].dup</code> outputs <code>jekyll 3.7.3 | Error:  can&#39;t dup NilClass</code>"}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531329179, "post_id": 51290549, "comment_id": 89559669, "body": "I got it working with new_data = new_page[&#39;data&#39;].dup   but then <code>new_page[&#39;data&#39;] = new_data</code> outputs <code>jekyll 3.7.3 | Error:  undefined method []=&#39; for #&lt;Jekyll::Page @name=&quot;about_us.md&quot;&gt; Did you mean?  []</code>"}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531329412, "post_id": 51290549, "comment_id": 89559794, "body": "new_page[&#39;data&#39;] is empty but new_page.data is a hash."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531329915, "post_id": 51290549, "comment_id": 89560070, "body": "@Himmators That&#39;s why you need to be specific; as I said, I made up a data structure because there was no way to know what you were actually dealing with. You&#39;ll need to modify the example to fit the data structure(s)/instance(s)/etc. you&#39;re actually dealing with. The idea will be the same."}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531330221, "post_id": 51290549, "comment_id": 89560208, "body": "thanks, I&#39;m new to ruby so it&#39;s kind of hard to figure out where the errors are comming from."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1531330381, "post_id": 51290549, "comment_id": 89560289, "body": "@Himmators That one is pretty easy; you can&#39;t set data back into a Jekyll <code>Page</code> instance this way. I suspect there are a few problems going on at once here--you might want to take a short step back and figure out enough Ruby to know what&#39;s going on, and try to break the problem down into smaller chunks and tackle them one at a time."}], "tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 2, "last_activity_date": 1531327920, "last_edit_date": 1531327920, "creation_date": 1531327355, "answer_id": 51290549, "question_id": 51289405, "link": "https://stackoverflow.com/questions/51289405/how-come-my-duplicate-also-affects-the-original/51290549#51290549", "title": "How come my duplicate also affects the original?", "body": "<p>(Moved comment to answer for formatting.)</p>\n\n<p>Please provide an example of the data; I have zero issues working with a similar structure, e.g.,</p>\n\n<pre><code>pages = [\n  {\n    'name' =&gt; 'page 1',\n    'data' =&gt; {\n      'permalink' =&gt; 'p1 perma',\n      'layout'    =&gt; 'p1 layout'\n    }\n  },\n\n  {\n    'name' =&gt; 'page 2',\n    'data' =&gt; {\n      'permalink' =&gt; 'p2 perma',\n      'layout'    =&gt; 'p2 layout'\n    }\n  },\n]\n</code></pre>\n\n<p>If I use (essentially) your code, plus my comment:</p>\n\n<pre><code>pages.dup.each do |p|\n  new_page = p.dup\n\n  new_data = new_page['data'].dup\n\n  new_data['layout']    = 'app'\n  new_data['permalink'] = \"#{new_data['permalink']} whatever\"\n\n  new_page['data'] = new_data\n\n  pages &lt;&lt; new_page\nend\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>[{\"name\"=&gt;\"page 1\", \"data\"=&gt;{\"permalink\"=&gt;\"p1 perma\", \"layout\"=&gt;\"p1 layout\"}},\n {\"name\"=&gt;\"page 2\", \"data\"=&gt;{\"permalink\"=&gt;\"p2 perma\", \"layout\"=&gt;\"p2 layout\"}},\n {\"name\"=&gt;\"page 1\", \"data\"=&gt;{\"permalink\"=&gt;\"p1 perma whatever\", \"layout\"=&gt;\"app\"}},\n {\"name\"=&gt;\"page 2\", \"data\"=&gt;{\"permalink\"=&gt;\"p2 perma whatever\", \"layout\"=&gt;\"app\"}}]\n</code></pre>\n\n<p>Unrelated, but I'd separate the array concatenation; instead, consider <code>map</code>ping over pages and creating a new array with the original <code>pages</code> and the modified ones. Right now you're doing an extra <code>dup</code> that shouldn't be necessary, and it adds some confusion.</p>\n\n<p>I'd also break out the <code>data</code> dup/modification into a separate method (and possibly the entire dupe process altogether) to really keep things tight, roughly:</p>\n\n<pre><code>def modify_page_data(data)\n  new_data = data.dup\n\n  new_data['permalink'] = \"#{data['permalink']} whatever\"\n  new_data['layout'] = 'app'\n\n  new_data\nend\n\ndef dup_page(page)\n  new_page = page.dup\n  new_page['data'] = modify_page_data(page['data'])\n  new_page\nend\n\nnew_pages = pages.map(&amp;method(:dup_page))\n</code></pre>\n\n<p>Then you can <code>concat</code> or whatever you want with the original <code>pages</code> and the modified new pages.</p>\n\n<p><a href=\"https://github.com/davelnewton/stackoverflow/tree/master/ruby/51289405\" rel=\"nofollow noreferrer\">https://github.com/davelnewton/stackoverflow/tree/master/ruby/51289405</a></p>\n"}], "owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 51290549, "answer_count": 2, "score": 3, "last_activity_date": 1531327920, "creation_date": 1531323372, "last_edit_date": 1531324285, "question_id": 51289405, "link": "https://stackoverflow.com/questions/51289405/how-come-my-duplicate-also-affects-the-original", "title": "How come my duplicate also affects the original?", "body": "<p>I'm trying to add copies to an array with some modification:</p>\n\n<pre><code>  site.pages.dup.each do | page |\n    new_page = page.dup\n    data = new_page.data\n    data['permalink'] = File.join('/app', page.url)\n    data['layout'] = 'app'\n    site.pages &lt;&lt; new_page\n  end\n\n  site.pages.each do | page |\n    puts page.data\n  end \n</code></pre>\n\n<p>When I output page.data, the permalinks are different, but <code>data['layout']</code> is the same for all items in the array. I also tried data = <code>new_page.data.dup</code> and writing out <code>new_page.data</code> in each instance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "ip-address", "cidr"], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "edited": false, "score": 0, "creation_date": 1531327926, "post_id": 51290260, "comment_id": 89559050, "body": "Perfect.  Thank you.  I think your first suggestion is the one that I need to do.  (ip = IPAddr.new(&#39;213.32.165.239&#39;))"}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1531326346, "creation_date": 1531326346, "answer_id": 51290260, "question_id": 51289276, "link": "https://stackoverflow.com/questions/51289276/refer-to-a-hash-where-the-key-is-an-ip-address/51290260#51290260", "title": "Refer to a hash where the key is an ip_address", "body": "<p>This:</p>\n\n<pre><code>#&lt;IPAddr: IPv4:213.32.165.239/255.255.255.255&gt;\n</code></pre>\n\n<p>is the result of calling <code>#inspect</code> on an instance of <code>IPAddr</code>. So the keys are <code>IPAddr</code> instances and you can say:</p>\n\n<pre><code>ip = IPAddr.new('213.32.165.239')\n@count_hash[ip]\n# 127000\n</code></pre>\n\n<p>Or you could iterate over the hash:</p>\n\n<pre><code>@count_hash.each { |ip, n| ... }\n</code></pre>\n\n<p>or over its keys:</p>\n\n<pre><code>@count_hash.keys.each { |ip| ... }\n</code></pre>\n\n<p>depending on what you need to do. You could even convert the keys to strings if that's more convenient:</p>\n\n<pre><code>@count_hash = @count_hash.transform_keys(&amp;:to_s)\n# or\n@count_hash.transform_keys!(&amp;:to_s)\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 51290260, "answer_count": 1, "score": 1, "last_activity_date": 1531326346, "creation_date": 1531322983, "question_id": 51289276, "link": "https://stackoverflow.com/questions/51289276/refer-to-a-hash-where-the-key-is-an-ip-address", "title": "Refer to a hash where the key is an ip_address", "body": "<p>I've got a model that I need to group by the :sending_ip, which is a \"cidr\" column in the database.</p>\n\n<pre><code>@count_hash = Webhook.group('sending_ip').count\n</code></pre>\n\n<p>Resulting in this hash:</p>\n\n<pre><code>{#&lt;IPAddr: IPv4:213.32.165.239/255.255.255.255&gt;=&gt;127000, #&lt;IPAddr: IPv4:153.92.251.118/255.255.255.255&gt;=&gt;228000}\n</code></pre>\n\n<p>I cannot figure out how to reference this type of key.  Below are some examples of the ways that I've tried to call these keys.  All of them return nil or error.</p>\n\n<pre><code>@count_hash[#&lt;IPAddr: IPv4:213.32.165.239/255.255.255.255&gt;]\n\n@count_hash[\"#&lt;IPAddr: IPv4:213.32.165.239/255.255.255.255&gt;\"]\n\n@count_hash[&lt;IPAddr: IPv4:213.32.165.239/255.255.255.255&gt;]\n\n@count_hash[\"#&lt;IPAddr: IPv4:213.32.165.239/255.255.255.255&gt;\"]\n</code></pre>\n\n<p>Elsewhere in my app, I've got a simpler example that works great. The other example groups by esp, which results in this hash:</p>\n\n<pre><code>{\"hotmail\"=&gt;1000, \"gmail\"=&gt;354000}\n</code></pre>\n\n<p>The second hash, I can refer to easily</p>\n\n<pre><code>@count_hash[\"gmail\"]\n</code></pre>\n\n<p>To obtain the expected result of 354000</p>\n\n<p>How can I achieve this same functionality with the previous hash that was grouped by sending_ip?  Thank you in advance for your insight.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1531322324, "post_id": 51288952, "comment_id": 89555994, "body": "What&#39;s in your fundings_controller show action?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "reply_to_user": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1531322463, "post_id": 51288952, "comment_id": 89556076, "body": "@BenTrewern check the update"}, {"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1531322765, "post_id": 51288952, "comment_id": 89556280, "body": "So the only instance variable you have is <code>@funding</code>.  <code>@funding.organisation</code> is what your are looking for."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "reply_to_user": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1531323057, "post_id": 51288952, "comment_id": 89556452, "body": "@BenTrewern okay. Any idea how it will work?"}, {"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1531323346, "post_id": 51288952, "comment_id": 89556597, "body": "Well <code>&lt;%= @funding.organisation.name_of_organisation %&gt;</code> used in your view will show your organisation name.  I&#39;ll leave the rest to you. :-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "reply_to_user": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1531323727, "post_id": 51288952, "comment_id": 89556824, "body": "@BenTrewern I tried what you recommended. But I still get the error undefined method `funding&#39; for nil:NilClass. Please check the update above"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "edited": false, "score": 0, "creation_date": 1531336567, "post_id": 51290763, "comment_id": 89563113, "body": "on doing what u suggested. On the funding show page. Name of organisation repeats number of timings the same organisation is used."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "edited": false, "score": 0, "creation_date": 1531336664, "post_id": 51290763, "comment_id": 89563166, "body": "please check the image above"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531336781, "post_id": 51290763, "comment_id": 89563221, "body": "@NAVROOPSINGHSIDHU I couldn&#39;t get your question, if you want show only funding&#39;s organisation name than you don&#39;t need to go through loop. let me know what do you want to show at funding show page?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "edited": false, "score": 0, "creation_date": 1531336888, "post_id": 51290763, "comment_id": 89563265, "body": "I just want the name of organisation for which funding is applied. Just one organisation name"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531337054, "post_id": 51290763, "comment_id": 89563326, "body": "@NAVROOPSINGHSIDHU Then its more simple than before. i just did your code according to your association, please check the updated answer, it&#39;s what exactly you want."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531337286, "post_id": 51290763, "comment_id": 89563409, "body": "@NAVROOPSINGHSIDHU Hmm glad to know that, just a side note brother, you really need to work hard on basic of ruby and rails :) anyway feel free to ask any further help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "edited": false, "score": 0, "creation_date": 1531337469, "post_id": 51290763, "comment_id": 89563478, "body": "@Gabber I am just new to rails. Just few weeks i started learning."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531337559, "post_id": 51290763, "comment_id": 89563514, "body": "@NAVROOPSINGHSIDHU Alright! make sure you are learning by the help of SO. :)"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": true, "score": 0, "last_activity_date": 1531337050, "last_edit_date": 1531337050, "creation_date": 1531328260, "answer_id": 51290763, "question_id": 51288952, "link": "https://stackoverflow.com/questions/51288952/display-data-from-another-table-rails/51290763#51290763", "title": "Display data from another table rails", "body": "<p>Probably you are looking for this? \nFunding_controller</p>\n\n<pre><code>def show\n @funding = Funding.find(params[:id])\nend\n</code></pre>\n\n<p>show.html.erb (funding)</p>\n\n<pre><code>  &lt;%unless @funding.organisation.blank?%&gt;\n    &lt;p&gt;&lt;strong&gt;Name of the Organisation:&lt;/strong&gt;\n    &lt;%= @funding&amp;.organisation&amp;.name_of_organisation %&gt;&lt;/p&gt;&lt;br&gt;\n  &lt;%end%&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9899928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 51290763, "answer_count": 1, "score": 0, "last_activity_date": 1531337050, "creation_date": 1531321927, "last_edit_date": 1531336648, "question_id": 51288952, "link": "https://stackoverflow.com/questions/51288952/display-data-from-another-table-rails", "title": "Display data from another table rails", "body": "<p>I have a fundings table and organisations table.Funding table has organisation_id. In the funding form I have a field name_of_organisation which is a dropdown field which displays all organisations in organisations table. When I select an organisation from dropdown and after submit. I am not able to display the organisation details in funding show page. Kindly help</p>\n\n<p>funding.rb</p>\n\n<pre><code>class Funding &lt; ApplicationRecord\n    belongs_to :organisation\nend\n</code></pre>\n\n<p>organisation.rb</p>\n\n<pre><code>class Organisation &lt; ApplicationRecord\n  has_many :fundings\nend\n</code></pre>\n\n<p>show.html.erb (funding)</p>\n\n<pre><code>&lt;% @organisations.funding.each do |funding| %&gt;\n  &lt;p&gt;&lt;strong&gt;Name of the Organisation:&lt;/strong&gt;&lt;%= organisation.name_of_organisation %&gt;&lt;/p&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>error</p>\n\n<pre><code>undefined method `funding' for nil:NilClass\n</code></pre>\n\n<p>Funding_controller</p>\n\n<pre><code>def show\n @funding = Funding.find(params[:id])\nend\n</code></pre>\n\n<p>error continues</p>\n\n<p>undefined method `funding' for nil:NilClass</p>\n\n<pre><code>&lt;% @organisations.funding.each do |funding| %&gt;\n  &lt;p&gt;&lt;strong&gt;Name of the Organisation:&lt;/strong&gt;&lt;%= @funding.organisation.name_of_organisation %&gt;&lt;/p&gt;&lt;br&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Wb5RA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wb5RA.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1531321747, "post_id": 51288835, "comment_id": 89555595, "body": "What do you mean, &quot;not working&quot;? This is valid ruby and it even evaluates to true in certain conditions."}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531321798, "post_id": 51288835, "comment_id": 89555631, "body": "Hi @SergioTulentsev, it&#39;s a condition. If all this variables are equal to nil or false then run something"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1531321944, "post_id": 51288835, "comment_id": 89555720, "body": "I don&#39;t think he was asking what it&#39;s supposed to do, which is fairly obvious. I think he was asking what specifically isn&#39;t working (in general this is not how you&#39;d compare multiple values in Ruby). &quot;More elegantly&quot; meaning... what, exactly? I mean, if all you care about is truthy/falsey then stop using the redundant <code>== true</code> etc. It&#39;s readable and meaningful."}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1531322007, "post_id": 51288835, "comment_id": 89555759, "body": "I @DaveNewton, thanks for your answer. How you compare multiples variables ?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1531322062, "post_id": 51288835, "comment_id": 89555795, "body": "<code>if (@op.wash || !@op.wash) &amp;&amp; (@op.communication || !@op.communication)</code> which seems... completely pointless. Which makes it look like you&#39;re missing an abstraction, and this should be wrapped up in business rule helper methods."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1531322200, "post_id": 51288835, "comment_id": 89555884, "body": "@DaveNewton: yeah, they made up that line in a hurry, I think. Should be nil instead of true. But who knows... &#175;\\_(\u30c4)_/&#175;"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1531322550, "last_edit_date": 1531322550, "creation_date": 1531322033, "answer_id": 51288989, "question_id": 51288835, "link": "https://stackoverflow.com/questions/51288835/how-to-verify-many-variables/51288989#51288989", "title": "How to verify many variables", "body": "<blockquote>\n  <p>If all this variables are equal to nil or false then run something</p>\n</blockquote>\n\n<p>It's pretty straightforward</p>\n\n<pre><code>if [@op.wash, @op.communication].all?{|v| [false, nil].include?(v) }\n</code></pre>\n\n<p>or </p>\n\n<pre><code>if ([@op.wash, @op.communication] - [false, nil]).empty?\n</code></pre>\n\n<p>or maybe a few dozen other ways. Block-less <code>.none?</code> probably can't be beaten, in this exact scenario:</p>\n\n<pre><code>if [@op.wash, @op.communication].none?     \n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 1, "accepted_answer_id": 51288989, "answer_count": 1, "score": 0, "last_activity_date": 1531322550, "creation_date": 1531321562, "last_edit_date": 1531321927, "question_id": 51288835, "link": "https://stackoverflow.com/questions/51288835/how-to-verify-many-variables", "title": "How to verify many variables", "body": "<p>I would like to check the state of many variables in ruby.</p>\n\n<p>But more elegantly than </p>\n\n<pre><code>if (@op.wash == true || @op.wash == false) &amp;&amp; (@op.communication == true || @op.communication == false)\n</code></pre>\n\n<p>It should look like this :</p>\n\n<pre><code>if [@op.wash, @op.communication] == [false, nil]\n</code></pre>\n\n<p>But this is not working. Any ideas to do this ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 1, "creation_date": 1531320337, "post_id": 51288384, "comment_id": 89554611, "body": "Create a copy and add to that instead?"}, {"owner": {"reputation": 89, "user_id": 7497632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034a3a170972c07cb03d5f9564911dc6?s=128&d=identicon&r=PG&f=1", "display_name": "jon1467", "link": "https://stackoverflow.com/users/7497632/jon1467"}, "edited": false, "score": 3, "creation_date": 1531320413, "post_id": 51288384, "comment_id": 89554667, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12232788/adding-to-an-array-while-iterating\">Adding to an Array while Iterating</a>"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1531321632, "creation_date": 1531321632, "answer_id": 51288858, "question_id": 51288384, "link": "https://stackoverflow.com/questions/51288384/add-items-to-array-while-looping-without-causing-infinite-loop/51288858#51288858", "title": "Add items to array while looping without causing infinite loop?", "body": "<p>I would create all the duplicates first and then add them to the array in a second step.</p>\n\n<pre><code>new_pages = site.pages.map do |page|\n  new_page = page.dup\n  new_page.data['permalink'] = File.join('/app', page.url)\nend\nsite.pages += new_pages\n</code></pre>\n"}], "owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531321632, "creation_date": 1531320161, "question_id": 51288384, "link": "https://stackoverflow.com/questions/51288384/add-items-to-array-while-looping-without-causing-infinite-loop", "title": "Add items to array while looping without causing infinite loop?", "body": "<p>I' trying to add duplicate items to an array while looping through it:</p>\n\n<p>Adding it to the end causes an infitie loop:</p>\n\n<pre><code>  site.pages.each do |page|\n    new_page = page.dup\n    new_page.data['permalink'] = File.join('/app', page.url)\n    puts new_page.data['permalink']\n    puts ''\n    site.pages &lt;&lt; new_page\n  end\n</code></pre>\n\n<p>so does adding it to the beginning.</p>\n\n<pre><code>  site.pages.each do |page|\n    new_page = page.dup\n    new_page.data['permalink'] = File.join('/app', page.url)\n    puts new_page.data['permalink']\n    puts ''\n    site.pages.unshift(new_page)\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 79498, "user_id": 298624, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b84ccc2f7709bbb7105baeb40e0961b?s=128&d=identicon&r=PG", "display_name": "fl00r", "link": "https://stackoverflow.com/users/298624/fl00r"}, "edited": false, "score": 0, "creation_date": 1531319605, "post_id": 51287971, "comment_id": 89554039, "body": "Ok, what does <code>DateTime.now.zone</code> return? Show output of <code>DateTime.now</code> and <code>DateTime.now.in_time_zone(-4)</code>"}, {"owner": {"reputation": 65, "user_id": 8107564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fae16638d9690427f5812c26b18adabb?s=128&d=identicon&r=PG&f=1", "display_name": "pigusan", "link": "https://stackoverflow.com/users/8107564/pigusan"}, "edited": false, "score": 0, "creation_date": 1531319670, "post_id": 51287971, "comment_id": 89554094, "body": "<code>Wed, 11 Jul 2018 10:33:55 -0400</code> and <code>Wed, 11 Jul 2018 11:34:12 ADT -03:00</code> respectively"}], "answers": [{"tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": true, "score": 4, "last_activity_date": 1531319695, "creation_date": 1531319695, "answer_id": 51288219, "question_id": 51287971, "link": "https://stackoverflow.com/questions/51287971/why-do-i-get-the-same-output-for-datetime-now-in-time-zone-4-and-datetime-now/51288219#51288219", "title": "Why do I get the same output for DateTime.now.in_time_zone(-4) and DateTime.now.in_time_zone(-3)", "body": "<p>If you look at <a href=\"https://apidock.com/rails/DateAndTime/Zones/in_time_zone\" rel=\"nofollow noreferrer\"><code>in_time_zone</code></a> source code, it relies on <code>Time.find_zone!</code>:</p>\n\n<pre><code>Time.find_zone!(-3) #=&gt; \"Brasilia\"\nTime.find_zone!(-4) #=&gt; \"Atlantic Time (Canada)\"\n</code></pre>\n\n<p>Due to the wonders of time change (sarcasm?), this time of year, Brasilia and Atlantic Time share the same time at <code>-3</code>:</p>\n\n<p><a href=\"https://www.timeanddate.com/time/zone/brazil/brasilia\" rel=\"nofollow noreferrer\">https://www.timeanddate.com/time/zone/brazil/brasilia</a>\n<a href=\"https://i.stack.imgur.com/fgMvx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fgMvx.png\" alt=\"enter image description here\"></a>\n<a href=\"https://www.timeanddate.com/time/zone/canada/halifax\" rel=\"nofollow noreferrer\">https://www.timeanddate.com/time/zone/canada/halifax</a>\n<a href=\"https://i.stack.imgur.com/flBsY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/flBsY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 65, "user_id": 8107564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fae16638d9690427f5812c26b18adabb?s=128&d=identicon&r=PG&f=1", "display_name": "pigusan", "link": "https://stackoverflow.com/users/8107564/pigusan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 51288219, "answer_count": 1, "score": 1, "last_activity_date": 1531320331, "creation_date": 1531318953, "last_edit_date": 1531320331, "question_id": 51287971, "link": "https://stackoverflow.com/questions/51287971/why-do-i-get-the-same-output-for-datetime-now-in-time-zone-4-and-datetime-now", "title": "Why do I get the same output for DateTime.now.in_time_zone(-4) and DateTime.now.in_time_zone(-3)", "body": "<p>The result of this:</p>\n\n<pre><code>&gt; DateTime.now.in_time_zone(-3)\n=&gt; Wed, 11 Jul 2018 11:33:00 -03 -03:00 \n</code></pre>\n\n<p>appears to be the same as this:</p>\n\n<pre><code>&gt; DateTime.now.in_time_zone(-4)\n=&gt; Wed, 11 Jul 2018 11:33:02 ADT -03:00 \n</code></pre>\n\n<p>Why am I getting the same time for two different time zones?</p>\n"}, {"tags": ["ruby", "chatbot"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531318860, "post_id": 51287736, "comment_id": 89553436, "body": "Looks like you&#39;ll get help in their GH issues. <a href=\"https://github.com/hellostealth/stealth/issues/78\" rel=\"nofollow noreferrer\">github.com/hellostealth/stealth/issues/78</a>"}, {"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531318949, "post_id": 51287736, "comment_id": 89553514, "body": "@SergioTulentsev haha Yep, I open this issue too :P. thaanksss! :D"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1531319125, "post_id": 51287736, "comment_id": 89553649, "body": "If you get a response/help, I would post it here too, as an answer."}, {"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531319333, "post_id": 51287736, "comment_id": 89553804, "body": "@SergioTulentsev nice, I&#39;ll be this."}], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531318295, "creation_date": 1531318295, "question_id": 51287736, "link": "https://stackoverflow.com/questions/51287736/how-can-i-enable-typing-indicator-before-a-slow-task-send-replies-with-results", "title": "How can I enable typing indicator before a slow task, send replies with results and before stop typing indicator using Stealth?", "body": "<p>I'm using <a href=\"https://github.com/hellostealth/stealth\" rel=\"nofollow noreferrer\">Stealth</a> to make a chatbot to get information from a internal API.</p>\n\n<p>How can I enable typing indicator before a slow task, send replies with results and after to disable typing indicator? Something like this:</p>\n\n<pre><code>class HellosController &lt; BotController\n\n  def say_hello\n    # enable_typing_indicator\n    # Execute a expensive task\n    send_replies\n    # disable_typing_indicator\n  end\n\nend\n</code></pre>\n\n<p>It's possible? make sense? another way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 1578, "user_id": 522897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7bad61c729086a40e92e6d2bcd70a4e?s=128&d=identicon&r=PG", "display_name": "Onur Kucukkece", "link": "https://stackoverflow.com/users/522897/onur-kucukkece"}, "edited": false, "score": 0, "creation_date": 1531317714, "post_id": 51286871, "comment_id": 89552523, "body": "Can you also write the line number for the given error if it&#39;s in the controller."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1531317962, "post_id": 51286871, "comment_id": 89552734, "body": "Did you run <code>heroku run rake db:migrate</code> before <code>heroku restart</code>? Heroku doesn&#39;t execute migrations automatically."}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531317987, "post_id": 51286871, "comment_id": 89552757, "body": "it doesn&#39;t give me an error when I run it on localhost..... that&#39;s also why I am a bit lost and don&#39;t know where to look exactly... When I run the Heroku logs it gives me: 2018-07-11T13:57:02.233498+00:00 app[web.1]: F, [2018-07-11T13:57:02.233421 #4] FATAL -- : [978133b4-1604-436e-a9d9-7420d2dcb436] ActiveModel::MissingAttributeError (can&#39;t write unknown attribute <code>user_id</code>):"}, {"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1531318262, "post_id": 51286871, "comment_id": 89552986, "body": "Did you run <code>heroku run rake db:migrate</code> after initial deploy to migrate database?"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531318560, "post_id": 51286871, "comment_id": 89553220, "body": "yes I did. I also dropped the heroku and the local db and set it up new, but same same"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1531318795, "post_id": 51286871, "comment_id": 89553396, "body": "Try <a href=\"https://stackoverflow.com/questions/33611604/heroku-rails-activerecordunknownattributeerror-unknown-attribute-user-id\" title=\"heroku rails activerecordunknownattributeerror unknown attribute user id\">stackoverflow.com/questions/33611604/&hellip;</a>"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531321584, "post_id": 51286871, "comment_id": 89555479, "body": "ok I will try, thanks"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531321597, "post_id": 51286871, "comment_id": 89555488, "body": "please also see my edits"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1531322669, "post_id": 51286871, "comment_id": 89556213, "body": "@Micromegas, are you sure that migrations files are identical locally and on heroku? Maybe some accidental change somewhere?"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531323489, "post_id": 51286871, "comment_id": 89556682, "body": "no they were different. please read my answer below, I could fix it with your help. Thank you so much!!!"}], "answers": [{"comments": [{"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531318965, "post_id": 51287385, "comment_id": 89553532, "body": "I tried this and it still gives me an error. But interestingly when I try with the console it gives me the following:  =&gt; #&lt;Question id: nil, title: &quot;test&quot;, description: &quot;this is a description with more than 10 signs&quot;, created_at: nil, updated_at: nil, user_id: nil&gt;......  I don&#39;t quite understand why I can create a question on my app but not with the console???"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531319081, "post_id": 51287385, "comment_id": 89553620, "body": "to be more specific: 2.4.1 :001 &gt; Question.create(title:&quot;test&quot;, description:&quot;this is a description with more than 10 signs&quot;)    (0.3ms)  BEGIN    (3.1ms)  ROLLBACK  =&gt; #&lt;Question id: nil, title: &quot;test&quot;, description: &quot;this is a description with more than 10 signs&quot;, created_at: nil, updated_at: nil, user_id: nil&gt; 2.4.1 :002 &gt;"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1531320192, "post_id": 51287385, "comment_id": 89554526, "body": "You need to run <code>Question.create(title:&quot;test&quot;, description:&quot;this is a description with more than 10 signs&quot;, user: User.first)</code>. Question <code>belongs_to :user</code>, this association is validated by default"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "edited": false, "score": 0, "creation_date": 1531320363, "post_id": 51287385, "comment_id": 89554626, "body": "ahh of course, thank you!! ok with that command I can create questions just fine.... any more ideas what I could try?"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1531317398, "creation_date": 1531317398, "answer_id": 51287385, "question_id": 51286871, "link": "https://stackoverflow.com/questions/51286871/activemodelmissingattributeerror-cant-write-unknown-attribute-user-id-on/51287385#51287385", "title": "ActiveModel::MissingAttributeError (can&#39;t write unknown attribute `user_id`) on Heroku Deployment", "body": "<p>I guess maybe the error is getting thrown here?</p>\n\n<pre><code>def create\n  @question = Question.new(questions_params)\n  @question.user = current_user\n  if @question.save\n    flash[:success] = \"Fantastic #{@current_user.username} you posed a new question. Surely someone answers soon, stay tuned...\"\n    redirect_to root_path\n  else\n     render :new\n  end\nend\n</code></pre>\n\n<p>Out of curiosity, have you tried:</p>\n\n<pre><code>def create\n  @question = current_user.questions.build(questions_params)\n  if @question.save\n    flash[:success] = \"Fantastic #{@current_user.username} you posed a new question. Surely someone answers soon, stay tuned...\"\n    redirect_to root_path\n  else\n     render :new\n  end\nend\n</code></pre>\n\n<p>If that doesn't work, are you able to create a new record in console?</p>\n"}, {"comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1531327341, "post_id": 51289252, "comment_id": 89558789, "body": "The app is so nice! :)"}, {"owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1531384218, "post_id": 51289252, "comment_id": 89578392, "body": "thank you so much! That will keep me smiling for a long time. thank you"}], "tags": [], "owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "is_accepted": false, "score": 0, "last_activity_date": 1531331913, "last_edit_date": 1531331913, "creation_date": 1531322894, "answer_id": 51289252, "question_id": 51286871, "link": "https://stackoverflow.com/questions/51286871/activemodelmissingattributeerror-cant-write-unknown-attribute-user-id-on/51289252#51289252", "title": "ActiveModel::MissingAttributeError (can&#39;t write unknown attribute `user_id`) on Heroku Deployment", "body": "<p>I fixed it with your help. What I needed to do was:</p>\n\n<ol>\n<li>completely delete and rebuild my local database</li>\n<li>add again two migrations adding user to questions and answers, because the reset for some reason didn't do that</li>\n<li>delete the Heroku app and deployed it again</li>\n</ol>\n\n<p>Now it is working. Anyways, heress the link to the finished app in case you wanna check it out: <a href=\"https://rubyoncrack.herokuapp.com/\" rel=\"nofollow noreferrer\">https://rubyoncrack.herokuapp.com/</a></p>\n"}], "owner": {"reputation": 821, "user_id": 9893391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74a86b767c4b02d4fab64419e1597b6?s=128&d=identicon&r=PG&f=1", "display_name": "Micromegas", "link": "https://stackoverflow.com/users/9893391/micromegas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531331913, "creation_date": 1531316071, "last_edit_date": 1531321499, "question_id": 51286871, "link": "https://stackoverflow.com/questions/51286871/activemodelmissingattributeerror-cant-write-unknown-attribute-user-id-on", "title": "ActiveModel::MissingAttributeError (can&#39;t write unknown attribute `user_id`) on Heroku Deployment", "body": "<p>I have an app that works like a simplistic version of Stackoverflow (ask, answer, vote). It works perfectly fine on my computer but when I deploy it on Heroku I get this error in the Heroku logs: </p>\n\n<p>ActiveModel::MissingAttributeError (can't write unknown attribute <code>user_id</code>).</p>\n\n<p>On Heroku itself the app tells me \"Something went wrong, please check the logs\"</p>\n\n<p>My Problem is that the user_id indeed exists in my table. So I don't really know why it doesn't know this attribute. I can also log in and create users without a problem. But when I wat to create a new question I get this error.... </p>\n\n<p>Here the question controller: </p>\n\n<pre><code>class QuestionsController &lt; ApplicationController\n  before_action :private_access, except: [:index, :show]\n\n    def index\n      @questions = if params[:term]\n      Question.where(\"title iLIKE ? OR description iLIKE ?\" , \"%#{params[:term]}%\", \"%#{params[:term]}%\")\n      else \n      @questions = Question.all.order(\"updated_at DESC\")\n      end\n    end \n\n    def new\n      @question = Question.new\n    end\n\n     def create\n      @question = Question.new(questions_params)\n      @question.user = current_user\n      if @question.save\n        flash[:success] = \"Fantastic #{@current_user.username} you posed a new question. Surely someone answers soon, stay tuned...\"\n        redirect_to root_path\n      else\n         render :new\n      end\n    end\n\n     def show\n        @question = Question.find(params[:id])\n        @answer = Answer.new        \n        @comment = Comment.new\n        @vote = Vote.new\n     end \n\n    def edit\n      @question = Question.find(params[:id])\n    end\n\n    def update\n      @question = Question.find(params[:id])\n      if @question.update(questions_params)\n      flash[:success] = \"Bravo #{@current_user.username}, you updated your question!\"\n      redirect_to root_path\n      else\n      flash[:danger] = \"Ups, something went wrong. Please try again...\"\n      render :new\n      end\n    end\n\n\n    def destroy\n     @question = Question.find(params[:id])\n      if @question.destroy\n      flash[:danger] = \"Ok #{@current_user.username}, question was deleted!\"\n      redirect_to root_path\n      else \n      flash[:danger] = \"Ups, something went wrong. Please try again...\"\n      redirect_to root_path\n      end \n    end\n\n\n    def voteup\n      question = Question.find(params[:id])\n      question.votes.create(user: current_user)\n\n      flash[:success] = \"Thanks #{current_user.username} for voting!\"\n      redirect_to question_path\n    end \n\n\n    def votedown\n      question = Question.find(params[:id])\n      question.votes.where(user: current_user).take.try(:destroy)\n\n      flash[:danger] = \"Vote deleted!\"\n      redirect_to question_path\n\n    end \n\n\n\n    private\n        def questions_params\n            params.require(:question).permit(:title, :description, :answer_id, :user_id, :body, :votes, :term)\n        end \n\nend\n</code></pre>\n\n<p>and here my schema: </p>\n\n<pre><code>   create_table \"answers\", force: :cascade do |t|\n    t.text \"body\"\n    t.bigint \"question_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.bigint \"user_id\"\n    t.index [\"question_id\"], name: \"index_answers_on_question_id\"\n    t.index [\"user_id\"], name: \"index_answers_on_user_id\"\n  end\n\n  create_table \"comments\", force: :cascade do |t|\n    t.string \"commentable_type\"\n    t.integer \"commentable_id\"\n    t.integer \"user_id\"\n    t.text \"body\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"questions\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.bigint \"user_id\"\n    t.index [\"user_id\"], name: \"index_questions_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", limit: 100\n    t.string \"password_digest\"\n    t.string \"name\", limit: 100\n    t.string \"username\", limit: 50\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"votes\", force: :cascade do |t|\n    t.integer \"voteable_id\"\n    t.string \"voteable_type\"\n    t.string \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  add_foreign_key \"answers\", \"questions\"\nend\n</code></pre>\n\n<p>my model associations should be fine: </p>\n\n<pre><code>class User &lt; ApplicationRecord\nhas_secure_password validations: false \n\nhas_many :answers, dependent: :destroy\nhas_many :questions, dependent: :destroy\nhas_many :comments, dependent: :destroy\nhas_many :votes, dependent: :destroy\n\n\n\nvalidates :email, uniqueness: true, format: /@/\nvalidates :password, presence: true, on: :create\nvalidates :password, length: {in: 6..20 }, allow_nil: true\nvalidates :name, presence: true\nvalidates :username, presence: true\n</code></pre>\n\n<p>end</p>\n\n<pre><code>class Question &lt; ApplicationRecord\nvalidates :title, presence: true\nvalidates :description, presence: true, length: {minimum:10, maximum:10000}\n\nbelongs_to :user\nhas_many :comments, as: :commentable, dependent: :destroy\nhas_many :answers, dependent: :destroy\nhas_many :votes, as: :voteable, dependent: :destroy\n</code></pre>\n\n<p>what I tried so far: </p>\n\n<ul>\n<li>restart Heroku</li>\n<li>reload schema (db:schema:load)</li>\n<li>cried </li>\n</ul>\n\n<p>Any help is highly appreciated. Many thanks in advance</p>\n\n<p>EDIT: I tried resetting the database, deleted the app and migrated again....It seems like Heroku is not adding any user_id to questions, or am I wrong? it gives me the following</p>\n\n<pre><code>CREATE TABLE \"questions\" (\"id\" bigserial primary key, \"title\" character varying, \"description\" text, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n   -&gt; 0.0137s\n== 20180620183722 CreateQuestions: migrated (0.0138s) =========================\n\nD, [2018-07-11T14:56:58.545105 #4] DEBUG -- :   ActiveRecord::SchemaMigration Create (1.6ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20180620183722\"]]\nD, [2018-07-11T14:56:58.548517 #4] DEBUG -- :    (3.0ms)  COMMIT\nI, [2018-07-11T14:56:58.548687 #4]  INFO -- : Migrating to CreateAnswers (20180624115634)\nD, [2018-07-11T14:56:58.550810 #4] DEBUG -- :    (1.3ms)  BEGIN\n== 20180624115634 CreateAnswers: migrating ====================================\n-- create_table(:answers)\nD, [2018-07-11T14:56:58.562192 #4] DEBUG -- :    (10.4ms)  CREATE TABLE \"answers\" (\"id\" bigserial primary key, \"body\" text, \"question_id\" bigint, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL, CONSTRAINT \"fk_rails_3d5ed4418f\"\nFOREIGN KEY (\"question_id\")\n  REFERENCES \"questions\" (\"id\")\n)\nD, [2018-07-11T14:56:58.573617 #4] DEBUG -- :    (4.7ms)  CREATE  INDEX  \"index_answers_on_question_id\" ON \"answers\"  (\"question_id\")\n   -&gt; 0.0228s\n== 20180624115634 CreateAnswers: migrated (0.0229s) ===========================\n\nD, [2018-07-11T14:56:58.577497 #4] DEBUG -- :   ActiveRecord::SchemaMigration Create (2.6ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20180624115634\"]]\nD, [2018-07-11T14:56:58.580639 #4] DEBUG -- :    (2.6ms)  COMMIT\nI, [2018-07-11T14:56:58.580776 #4]  INFO -- : Migrating to CreateUsers (20180705164230)\nD, [2018-07-11T14:56:58.582856 #4] DEBUG -- :    (1.3ms)  BEGIN\n== 20180705164230 CreateUsers: migrating ======================================\n-- create_table(:users)\nD, [2018-07-11T14:56:58.596461 #4] DEBUG -- :    (12.6ms)  CREATE TABLE \"users\" (\"id\" bigserial primary key, \"email\" character varying(100), \"password_digest\" character varying, \"name\" character varying(100), \"username\" character varying(50), \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n   -&gt; 0.0135s\n== 20180705164230 CreateUsers: migrated (0.0137s) =============================\n\nD, [2018-07-11T14:56:58.603402 #4] DEBUG -- :   ActiveRecord::SchemaMigration Create (1.5ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20180705164230\"]]\nD, [2018-07-11T14:56:58.606167 #4] DEBUG -- :    (2.1ms)  COMMIT\nI, [2018-07-11T14:56:58.606393 #4]  INFO -- : Migrating to CreateComments (20180708124323)\nD, [2018-07-11T14:56:58.609250 #4] DEBUG -- :    (1.4ms)  BEGIN\n== 20180708124323 CreateComments: migrating ===================================\n-- create_table(:comments)\nD, [2018-07-11T14:56:58.622279 #4] DEBUG -- :    (9.5ms)  CREATE TABLE \"comments\" (\"id\" bigserial primary key, \"commentable_type\" character varying,\"commentable_id\" integer, \"user_id\" integer, \"body\" text, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n   -&gt; 0.0129s\n== 20180708124323 CreateComments: migrated (0.0130s) ==========================\n\nD, [2018-07-11T14:56:58.624708 #4] DEBUG -- :   ActiveRecord::SchemaMigration Create (1.4ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20180708124323\"]]\nD, [2018-07-11T14:56:58.627539 #4] DEBUG -- :    (2.5ms)  COMMIT\nI, [2018-07-11T14:56:58.627685 #4]  INFO -- : Migrating to CreateVotes (20180709152735)\nD, [2018-07-11T14:56:58.629887 #4] DEBUG -- :    (1.3ms)  BEGIN\n== 20180709152735 CreateVotes: migrating ======================================\n-- create_table(:votes)\nD, [2018-07-11T14:56:58.639342 #4] DEBUG -- :    (8.6ms)  CREATE TABLE \"votes\" (\"id\" bigserial primary key, \"voteable_id\" integer, \"voteable_type\" character varying, \"user_id\" character varying, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n   -&gt; 0.0094s\n== 20180709152735 CreateVotes: migrated (0.0095s) =============================\n\nD, [2018-07-11T14:56:58.642138 #4] DEBUG -- :   ActiveRecord::SchemaMigration Create (1.4ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20180709152735\"]]\nD, [2018-07-11T14:56:58.644622 #4] DEBUG -- :    (2.1ms)  COMMIT\nD, [2018-07-11T14:56:58.656312 #4] DEBUG -- :   ActiveRecord::InternalMetadata Load (1.5ms)  SELECT  \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2  [[\"key\", \"environment\"], [\"LIMIT\", 1]]\nD, [2018-07-11T14:56:58.671265 #4] DEBUG -- :    (5.5ms)  BEGIN\nD, [2018-07-11T14:56:58.674884 #4] DEBUG -- :   ActiveRecord::InternalMetadata Create (1.7ms)  INSERT INTO \"ar_internal_metadata\" (\"key\", \"value\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"key\"  [[\"key\", \"environment\"], [\"value\", \"production\"], [\"created_at\", \"2018-07-11 14:56:58.671911\"], [\"updated_at\", \"2018-07-11 14:56:58.671911\"]]\nD, [2018-07-11T14:56:58.677921 #4] DEBUG -- :    (2.6ms)  COMMIT\nD, [2018-07-11T14:56:58.680372 #4] DEBUG -- :    (2.1ms)  SELECT pg_advisory_unlock(2612648823889037010)\n\u279c  RubyOnCrack git:(master) \u2717\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1531326957, "post_id": 51286550, "comment_id": 89558568, "body": "Also, <code>select { .. }[0]</code> =&gt; <code>detect { .. }</code>...<code>detect</code> will stop once it finds the first value that matches, <code>select</code> returns all matching elements in the array and so has to look at every element regardless of if the match is the first element, and then you discard everything but the first"}], "answers": [{"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 3, "last_activity_date": 1531316980, "last_edit_date": 1531316980, "creation_date": 1531315619, "answer_id": 51286694, "question_id": 51286550, "link": "https://stackoverflow.com/questions/51286550/find-and-replace-specific-hash-and-its-values-within-array/51286694#51286694", "title": "Find and replace specific hash and it&#39;s values within array", "body": "<p>This will do what you're after looping through the records only once:</p>\n\n<pre><code>array.each { |hash| hash[:parameters][:omg] = \"triple omg\" if hash[:id] == 1 }\n</code></pre>\n\n<p>You could always expand the block to handle other conditions:</p>\n\n<pre><code>array.each do |hash| \n  hash[:parameters][:omg] = \"triple omg\" if hash[:id] == 1\n  hash[:parameters][:omg] = \"quadruple omg\" if hash[:id] == 2\n  # etc\nend\n</code></pre>\n\n<p>And it'll remain iterating over the elements just the once.</p>\n\n<p>It might also be you'd be better suited adjusting your data into a single hash. Generally speaking, searching a hash will be faster than using an array, particularly if you've got unique identifier as here. Something like:</p>\n\n<pre><code>{ \n  1 =&gt; {\n    parameters: {\n      omg: \"lol\"\n    },\n    options: {\n      lol: \"omg\"\n    }\n  },\n  2 =&gt; {\n    parameters: {\n      omg: \"double lol\"\n    },\n    options: {\n      lol: \"double omg\"\n    }\n  } \n}\n</code></pre>\n\n<p>This way, you could just call the following to achieve what you're after:</p>\n\n<pre><code>hash[1][:parameters][:omg] = \"triple omg\"\n</code></pre>\n\n<p>Hope that helps - let me know how you get on with it or if you have any questions.</p>\n"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 51286694, "answer_count": 1, "score": 2, "last_activity_date": 1531316980, "creation_date": 1531315254, "question_id": 51286550, "link": "https://stackoverflow.com/questions/51286550/find-and-replace-specific-hash-and-its-values-within-array", "title": "Find and replace specific hash and it&#39;s values within array", "body": "<p>What is the most efficient method to find specific hash within array and replace its values in-place, so array get changed as well?</p>\n\n<p>I've got this code so far, but in a real-world application with loads of data, this becomes the slowest part of application, which probably leaks memory, as unbounded memory grows constantly when I perform this operation on each websocket message.</p>\n\n<pre><code>array = \n  [ \n    { id: 1,\n      parameters: {\n        omg: \"lol\"\n     },\n     options: {\n         lol: \"omg\"\n      }\n    },\n    { id: 2,\n      parameters: {\n        omg: \"double lol\"\n      },\n      options: {\n        lol: \"double omg\"\n      }\n    }\n  ]\n\nselection = array.select { |a| a[:id] == 1 }[0]\nselection[:parameters][:omg] = \"triple omg\"\np array\n# =&gt; [{:id=&gt;1, :parameters=&gt;{:omg=&gt;\"triple omg\"}, :options=&gt;{:lol=&gt;\"omg\"}}, {:id=&gt;2, :parameters=&gt;{:omg=&gt;\"double lol\"}, :options=&gt;{:lol=&gt;\"double omg\"}}]\n</code></pre>\n"}, {"tags": ["ruby", "command-line", "error-handling", "command-line-interface"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1531321282, "post_id": 51286356, "comment_id": 89555287, "body": "Commander does not support formatting the error message output. You could file a ticket for a feature request. Monkey-patching the code yourself is another option."}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1531322005, "post_id": 51286356, "comment_id": 89555757, "body": "@Casper That&#39;s a shame - thanks."}], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531314644, "creation_date": 1531314644, "question_id": 51286356, "link": "https://stackoverflow.com/questions/51286356/handle-commander-errors-manually-in-ruby", "title": "Handle Commander errors manually in Ruby", "body": "<p>I'm writing a simple Commander CLI as part of a project I'm working on.</p>\n\n<p>Commander has its own method of handling errors. For example, if the user enters an invalid command, then Commander will print a user-friendly message:</p>\n\n<pre><code>$ my-commander-program some-invalid-command\ninvalid command. Use --help for more information.\n</code></pre>\n\n<p>I would like to replace this message with my own, so that the output is more consistent with the rest of my program. For example:</p>\n\n<pre><code>$ my-commander-program some-invalid-command\n[ERR ] 'some-invalid-command' is not a known command.\n       Use --help to see a list of valid commands.\n</code></pre>\n\n<p>I've looked at Commander's README.md, which contains plenty of examples of how to use Commander, but I can't find how to do this from there.</p>\n\n<p>My program is written using Commander's 'classic' style, where one imports <code>commander/import</code> and uses methods like <code>program</code> and <code>command</code> from the top-level, rather than creating a class which includes <code>Commander::Methods</code>. For example:</p>\n\n<pre><code>require 'commander/import'\n\nprogram :name, 'my-commander-program'\nprogram :version, '1.0.0'\nprogram :description, 'Example'\n\ncommand :example do |c|\n  c.action do |args, options|\n    puts \"Invoked!\"\n  end\nend\n</code></pre>\n\n<p>How can I go about replacing this error message? I'm using Commander 4.4.5.</p>\n"}, {"tags": ["ruby", "popen3"], "owner": {"reputation": 11, "user_id": 10061702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0-Eqn8skIMg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pFa8FyRn2aFSiwlLO865WNY8Y2gg/mo/photo.jpg?sz=128", "display_name": "John Tikis", "link": "https://stackoverflow.com/users/10061702/john-tikis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531362089, "creation_date": 1531312058, "last_edit_date": 1531362089, "question_id": 51285490, "link": "https://stackoverflow.com/questions/51285490/passing-next-argument-to-stdin", "title": "Passing next argument to &#39;STDIN&#39;", "body": "<p>I am using open3 to pass <code>STDIN</code> to a program, and then read and parse <code>STDOUT</code>. My program expects an argument in the form of <code>e0</code>, <code>e1 e2</code>, etc.</p>\n\n<p>Everytime a new argument is given, the <code>STDOUT</code> changes. I don't know how to pass the next argument after parsing the first result which will give the next number to pass as an argument. Here is my code:</p>\n\n<pre><code>require 'open3'\nrequire 'state_machines'\n\n#this is for the first command  e0 only \n\ncmd = ('./pos.tx')\nstatus1 = ''\n\nputs \"Step 1: #{cmd}\"\nOpen3.pipeline_rw(cmd) {|stdin, stdout, wait_thrs|\n  stdin.write \"e0\\n\"\n  stdin.close \n  #\n  status1 = stdout.read  \n  lines3 = status1.match(/Ee\\s+(.*)\\s+/)\n    @next_states = status1.match(/\\d+/)\n    event = status1.match(/\\s+\\D+\\s+\\n/)\n\n    #puts lines3\n    puts @next_states\n    puts event\n}\n</code></pre>\n\n<p>The next argument is stored in <code>@next_states</code>, and can be one number or many numbers. How can I use the elements of this array to continue to the next part of the program and parse again?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "tagging"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531312954, "post_id": 51285403, "comment_id": 89548931, "body": "I have this in my questions_controller now   <code>def new     @question = current_user.questions.build     @kategories = Kategory.all     @kategories = Kategory.all.map{ |k| [k.name, k.id] }   end</code>  I still see the same error."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 1, "creation_date": 1531313648, "post_id": 51285403, "comment_id": 89549413, "body": "The problem is <code>Kategory.all</code> doesn&#39;t seem to be returning any records. Have you confirmed this in the console? Updating your code as in the comment won&#39;t do anything: <code>@kategories</code> gets overwritten by the same code as your existing project. I&#39;ve updated my answer to remove the <code>...</code> that seems to have cause confusion here."}, {"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531313886, "post_id": 51285403, "comment_id": 89549571, "body": "Everything was working well before I started the tagging thing."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531314008, "post_id": 51285403, "comment_id": 89549656, "body": "That&#39;s not to say this isn&#39;t the cause - might be the <code>Kategory</code> model got wiped at some point. Either way, some data is missing somewhere in there. Have you tried my updated code, including <code>options_from_collection_for_select</code> in the view?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 1, "creation_date": 1531314119, "post_id": 51285403, "comment_id": 89549748, "body": "If you look at the source of <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select\" rel=\"nofollow noreferrer\"><code>options_for_select</code></a>, it calls <code>map</code> a couple of times. Therefore, if you&#39;re feeding it bad / missing data (e.g. <code>name</code> is <code>nil</code>), you&#39;ll get the error you&#39;re seeing."}, {"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531317262, "post_id": 51285403, "comment_id": 89552150, "body": "Yes, I have tried your updated code... <code>NoMethodError - undefined method </code>map&#39; for nil:NilClass Did you mean?  tap:   app/views/questions/_form.html.erb:16:in <code>block in _app_views_questions__form_ html_erb___939972431_105699312&#39;   app&#47;views&#47;questions&#47;_form.html.erb:1:in </code>_app_views_questions__form_html_erb__ _939972431_105699312&#39;   app/views/questions/new.html.erb:5:in <code>_app_views_questions_new_html_erb___153 577014_106108056&#39;   app&#47;controllers&#47;questions_controller.rb:48:in </code>block (2 levels) in create&#39;   app/controllers/questions_controller.rb:42:in <code>create&#39;</code>"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1531314433, "last_edit_date": 1531314433, "creation_date": 1531311812, "answer_id": 51285403, "question_id": 51285259, "link": "https://stackoverflow.com/questions/51285259/error-while-setting-up-tagging-for-multiple-models/51285403#51285403", "title": "Error while setting up tagging for multiple models", "body": "<p>Looks to me like your <code>@kategories</code>, or something within there (perhaps a <code>name</code>), is nil, hence the error :) (Hopefully this is a good thing, as all may be well with your tagging.)</p>\n\n<p>Ensure <code>Kategory.all.map { |k| [k.name, k.id] }</code> in your <code>new</code> action is returning records and this error should go away.</p>\n\n<p>N.B. you can also use <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select\" rel=\"nofollow noreferrer\"><code>options_from_collection_for_select</code></a> here. </p>\n\n<pre><code># in the controller\ndef new\n  @question = current_user.questions.build\n  @kategories = Kategory.all\nend\n\n#\u00a0and the view\n&lt;%= select_tag(:kategory_id, options_from_collection_for_select(@kategories, :name, :id), prompt: \"Select Category\", class: \"form-control\") %&gt;\n</code></pre>\n\n<p>This way, if you don't have any categories, you won't get an error - instead, you just won't have any options available.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531320114, "post_id": 51287938, "comment_id": 89554466, "body": "After adding <code>@kategories = Kategory.all.map{ |k| [k.name, k.id] }</code> to create action it somehow worked but display a form error <code>Taggings is invalid</code> which actually should have been in this topic if I had discovered it before. I entered tags like <code>lifestyle, choice</code>. Tags code is pasted in the question."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531404797, "post_id": 51287938, "comment_id": 89592435, "body": "@Lashe, I think there is some problem in your <code>tag_list=(tags_string)</code> method, but I need the <b>full</b> server log to find the issue"}, {"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531431895, "post_id": 51287938, "comment_id": 89606413, "body": "Oh... Full server log? From development.log?"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531447274, "post_id": 51287938, "comment_id": 89609637, "body": "@Lashe, no :) Log for create action, when you have an error about taggings"}, {"owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531464735, "post_id": 51287938, "comment_id": 89614199, "body": "I&#39;ve added the log as part of the question."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "reply_to_user": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "edited": false, "score": 0, "creation_date": 1531470152, "post_id": 51287938, "comment_id": 89616959, "body": "@Lashe, and where is the error in the log? Log should start from &#39;Processing by QuestionsController#action_name as HTML&#39;, contain the error (if you still have it) and finish with &#39;Completed status_code in some_number ms (Views: some_number ms | ActiveRecord: some_number ms)&#39;"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 1, "last_activity_date": 1531318820, "creation_date": 1531318820, "answer_id": 51287938, "question_id": 51285259, "link": "https://stackoverflow.com/questions/51285259/error-while-setting-up-tagging-for-multiple-models/51287938#51287938", "title": "Error while setting up tagging for multiple models", "body": "<p>You need to define <code>@kategories = Kategory.all.map{ |k| [k.name, k.id] }</code> in create and update actions. This actions rerender new/edit actions if they can't save the question, and they need @kategories for rerendering</p>\n\n<p>If you provide the full server log for create action I can try to help you to figure out - why @question can not be saved</p>\n"}], "owner": {"reputation": 31, "user_id": 7686710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKUPv.jpg?s=128&g=1", "display_name": "Lashe", "link": "https://stackoverflow.com/users/7686710/lashe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 51287938, "answer_count": 2, "score": 1, "last_activity_date": 1531479778, "creation_date": 1531311387, "last_edit_date": 1531479778, "question_id": 51285259, "link": "https://stackoverflow.com/questions/51285259/error-while-setting-up-tagging-for-multiple-models", "title": "Error while setting up tagging for multiple models", "body": "<p>I'm trying to setup multiple tagging in my app. I have used a single tag and tagging model which works fine for tagging a single model.</p>\n\n<p>However, after setting up the association, i got this error when i wanted to create a new question <code>undefined method map for nil:NilClass</code> which actually points to <code>&lt;%= select_tag(:kategory_id, options_for_select(@kategories), :prompt =&gt; \"Select Category\", class: \"form-control\") %&gt;</code>. I don't know why it's pointing to this since it has nothing to do with the tagging. I might have made a mistake somewhere which i could not figure out.</p>\n\n<p>Here is how i do the setup.</p>\n\n<p>I added taggable_id and taggable_type to taggings table.</p>\n\n<pre><code>class AddAttributesToTaggings &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_column :taggings, :taggable_id, :integer\n    add_column :taggings, :taggable_type, :string\n\n    add_index :taggings, [:taggable_type, :taggable_id]\n  end\nend\n</code></pre>\n\n<p>Tag.rb</p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n    has_many :taggings\n\n    has_many :posts, through: :taggings, source: :taggable, source_type: Post\n    has_many :questions, through: :taggings, source: :taggable, source_type: Question\n\n    has_many :user_tags, dependent: :destroy\n    has_many :users, through: :user_tags\n\n    extend FriendlyId\n    friendly_id :name, use: :slugged\n\n    def should_generate_new_friendly_id?\n      name_changed?\n    end\nend\n</code></pre>\n\n<p>tagging.rb</p>\n\n<pre><code>class Tagging &lt; ApplicationRecord\n  belongs_to :tag\n  belongs_to :taggable, :polymorphic =&gt; true\nend\n</code></pre>\n\n<p>Question.rb</p>\n\n<pre><code>class Question &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :kategory\n\n  validates :title, :content, presence: true\n  is_impressionable counter_cache: true, unique: :all\n  Question.order('impressions_count DESC')\n  scope :most_recent, -&gt; { order(created_at: :desc) }\n\n  extend FriendlyId\n    friendly_id :title, use: :slugged\n\n    def should_generate_new_friendly_id?\n        title_changed?\n    end\n\n  include Taggable\n\n  def related_questions\n      Question.joins(:tags).where(tags: { id: self.tags.pluck(:id) }).where.not(id: self.id)\n  end\nend\n</code></pre>\n\n<p>models/concerns/taggable.rb</p>\n\n<pre><code>module Taggable\n  extend ActiveSupport::Concern\n\n  included do\n    has_many :taggings, :as =&gt; :taggable\n    has_many :tags, :through =&gt; :taggings\n  end  \n\n  def tag_list\n    self.tags.collect do |tag|\n      tag.name\n    end.join(\", \")\n  end\n\n  def tag_list=(tags_string)\n    tag_names = tags_string.split(\",\").collect{|s| s.strip.downcase}.uniq\n    new_or_found_tags = tag_names.collect { |name| Tag.friendly.find_or_create_by(name: name) }\n    self.tags = new_or_found_tags\n  end\n\nend\n</code></pre>\n\n<p>tags and taggings table in schema.rb</p>\n\n<pre><code>create_table \"taggings\", force: :cascade do |t|\n    t.bigint \"tag_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"taggable_id\"\n    t.string \"taggable_type\"\n    t.index [\"tag_id\"], name: \"index_taggings_on_tag_id\"\n    t.index [\"taggable_type\", \"taggable_id\"], name: \"index_taggings_on_taggable_type_and_taggable_id\"\n  end\n\n  create_table \"tags\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"slug\"\n    t.index [\"slug\"], name: \"index_tags_on_slug\", unique: true\n  end\n</code></pre>\n\n<p>questions/_form</p>\n\n<pre><code>&lt;%= form_with(model: question, local: true) do |form| %&gt;\n  &lt;% if question.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(question.errors.count, \"error\") %&gt; prohibited this question from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% question.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;b&gt;&lt;%= form.label \"Category\" %&gt;&lt;/b&gt;\n    &lt;%= select_tag(:kategory_id, options_for_select(@kategories), :prompt =&gt; \"Select Category\", class: \"form-control\") %&gt;\n  &lt;/div&gt;\n\n  &lt;br&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;b&gt;&lt;%= form.label :title %&gt;&lt;/b&gt;\n    &lt;%= form.text_field :title, id: :question_title, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n  &lt;br&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :content %&gt;\n    &lt;%= form.text_area :content, id: :question_content, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n\n  &lt;br&gt;\n\n  &lt;div&gt;\n    &lt;%= form.label :tag_list %&gt;\n    &lt;%= form.text_field :tag_list %&gt;\n  &lt;/div&gt;\n\n    &lt;br&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>questions_controller.rb</p>\n\n<pre><code>class QuestionsController &lt; ApplicationController\n  before_action :set_question, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!\n  before_action :find_contacts\n  before_action :find_kategory\n  impressionist :actions=&gt;[:show,:index]\n\n  # GET /questions\n  # GET /questions.json\n  def index\n    if params[:kategory].blank?\n      @questions = Question.most_recent\n    else\n      @kategory_id = Kategory.find_by(name: params[:kategory]).id\n      @questions = Question.where(:kategory_id =&gt; @kategory_id).most_recent\n    end\n  end\n\n  # GET /questions/1\n  # GET /questions/1.json\n  def show\n    impressionist(@question)\n    @most_viewed = Question.order('impressions_count DESC').take(20)\n  end\n\n  # GET /questions/new\n  def new\n    @question = current_user.questions.build\n    @kategories = Kategory.all.map{ |k| [k.name, k.id] }\n  end\n\n  # GET /questions/1/edit\n  def edit\n    @kategories = Kategory.all.map{ |k| [k.name, k.id] }\n  end\n\n  # POST /questions\n  # POST /questions.json\n  def create\n    @question = current_user.questions.build(question_params)\n    @question.kategory_id = params[:kategory_id]\n\n    respond_to do |format|\n      if @question.save\n        flash[:success] = 'Your question was successfully posted.'\n        format.html { redirect_to @question }\n        format.json { render :show, status: :created, location: @question }\n      else\n        format.html { render :new }\n        format.json { render json: @question.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /questions/1\n  # PATCH/PUT /questions/1.json\n  def update\n    respond_to do |format|\n      if @question.update(question_params)\n        flash[:success] = 'Your question was successfully updated.'\n        format.html { redirect_to @question }\n        format.json { render :show, status: :ok, location: @question }\n      else\n        format.html { render :edit }\n        format.json { render json: @question.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /questions/1\n  # DELETE /questions/1.json\n  def destroy\n    @question.destroy\n    respond_to do |format|\n      flash[:success] = 'Your question has been deleted.'\n      format.html { redirect_to questions_url }\n      format.json { head :no_content }\n    end\n  end\n\n  def most_viewed\n    @questions = Question.order('impressions_count DESC').take(20)\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_question\n      @question = Question.friendly.includes(:tags).find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def question_params\n      params.require(:question).permit(:title, :content, :kategory_id, :tag_list)\n    end\n\n    def find_contacts\n      @contacts = user_signed_in? ? current_user.all_active_contacts : ''\n    end\n\n    def find_kategory\n      @questions = Kategory.where(:kategory_id =&gt; @kategory_id)\n    end\nend\n</code></pre>\n\n<p><strong>UPDATE:**I'm now able to save a question without adding any tag but with tags added, I get a form error that <code>tagging is invalid</code>. **Tags are properly loaded when I edit a question.</strong></p>\n\n<p>Error Log:</p>\n\n<pre><code>Started POST \"/questions\" for 127.0.0.1 at 2018-07-13 12:01:01 +0100\nProcessing by QuestionsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u221a\", \"authenticity_token\"=&gt;\"hgLn8bzd6fVSzCIPtRd3P0Jp/LEso\n/h5cKNBY0a80x3i4RF6tpLlRyqmls3xRFryqyP1/s/rLDVIt9C1/uK+qw==\", \"kategory_id\"=&gt;\"1\"\n, \"question\"=&gt;{\"title\"=&gt;\"Help!!! My Dell Inspiron 6400 is hanging\", \"content\"=&gt;\"\nLorem ipsum dolor amet seitan offal ethical, beard viral lo-fi put a bird on it\nsalvia actually yr. Ethical ennui pitchfork fanny pack, gentrify seitan sartoria\nl bespoke. Viral 90's church-key swag, you probably haven't heard of them banh m\ni intelligentsia brunch DIY iceland wolf pitchfork. Everyday carry photo booth n\normcore XOXO tumblr portland.\\r\\n\\r\\nBrooklyn heirloom kombucha, edison bulb leg\ngings hell of DIY chartreuse austin tacos bitters. Blog hexagon copper mug blue\nbottle cray. Post-ironic direct trade kale chips mumblecore. Craft beer squid cr\nonut vape, hoodie bitters succulents ramps snackwave vegan small batch brunch ch\nia food truck umami. Chillwave blue bottle viral raclette authentic health goth\nvape coloring book cardigan 3 wolf moon taxidermy. Gluten-free tote bag hella, l\nomo pinterest direct trade gastropub tattooed. Iceland hammock post-ironic, bush\nwick cornhole tumeric dreamcatcher blog palo santo chartreuse 90's food truck sy\nnth chicharrones.\", \"tag_list\"=&gt;\"hardware\"}, \"commit\"=&gt;\"Create Question\"}\n  User Load (2.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDE\nR BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 3], [\"LIMIT\", 1]]\n  Private::Conversation Load (2.9ms)  SELECT \"private_conversations\".* FROM \"pri\nvate_conversations\" WHERE (\"private_conversations\".\"recipient_id\" = $1 OR \"priva\nte_conversations\".\"sender_id\" = $2)  [[\"recipient_id\", 3], [\"sender_id\", 3]]\n  Private::Message Load (2.0ms)  SELECT \"private_messages\".* FROM \"private_messa\nges\" WHERE \"private_messages\".\"conversation_id\" IN (2, 3, 4, 6)\n  Group::Conversation Load (3.9ms)  SELECT \"group_conversations\".* FROM \"group_c\nonversations\" INNER JOIN \"group_conversations_users\" ON \"group_conversations\".\"i\nd\" = \"group_conversations_users\".\"conversation_id\" WHERE \"group_conversations_us\ners\".\"user_id\" = $1  [[\"user_id\", 3]]\n  Group::Message Load (2.0ms)  SELECT \"group_messages\".* FROM \"group_messages\" W\nHERE \"group_messages\".\"conversation_id\" = 1\n  User Load (2.0ms)  SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" IN (2, 3,\n5)\n   (40.0ms)  SELECT \"group_conversations\".\"id\" FROM \"group_conversations\" INNER\nJOIN \"group_conversations_users\" ON \"group_conversations\".\"id\" = \"group_conversa\ntions_users\".\"conversation_id\" WHERE \"group_conversations_users\".\"user_id\" = $1\n [[\"user_id\", 3]]\n  CACHE  (0.0ms)  SELECT \"group_conversations\".\"id\" FROM \"group_conversations\" I\nNNER JOIN \"group_conversations_users\" ON \"group_conversations\".\"id\" = \"group_con\nversations_users\".\"conversation_id\" WHERE \"group_conversations_users\".\"user_id\"\n= $1  [[\"user_id\", 3]]\n  User Load (2.9ms)  SELECT \"users\".* FROM \"users\" INNER JOIN \"contacts\" ON \"use\nrs\".\"id\" = \"contacts\".\"contact_id\" WHERE \"contacts\".\"user_id\" = $1 AND \"contacts\n\".\"accepted\" = $2  [[\"user_id\", 3], [\"accepted\", \"t\"]]\n  User Load (4.9ms)  SELECT \"users\".* FROM \"users\" INNER JOIN \"contacts\" ON \"use\nrs\".\"id\" = \"contacts\".\"user_id\" WHERE \"contacts\".\"contact_id\" = $1 AND \"contacts\n\".\"accepted\" = $2 ORDER BY \"users\".\"created_at\" ASC  [[\"contact_id\", 3], [\"accep\nted\", \"t\"]]\n  Tag Load (2.0ms)  SELECT  \"tags\".* FROM \"tags\" WHERE \"tags\".\"name\" = $1 LIMIT\n$2  [[\"name\", \"hardware\"], [\"LIMIT\", 1]]\n  Kategory Load (10.7ms)  SELECT \"kategories\".* FROM \"kategories\"\n   (1.0ms)  BEGIN\n  Question Exists (4.9ms)  SELECT  1 AS one FROM \"questions\" WHERE (\"questions\".\n\"id\" IS NOT NULL) AND \"questions\".\"slug\" = $1 LIMIT $2  [[\"slug\", \"help-my-dell-\ninspiron-6400-is-hanging\"], [\"LIMIT\", 1]]\n  Kategory Load (5.9ms)  SELECT  \"kategories\".* FROM \"kategories\" WHERE \"kategor\nies\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n   (0.0ms)  ROLLBACK\n  Rendering questions/new.html.erb within layouts/application\n  Rendered questions/_form.html.erb (17.6ms)\n  Rendered questions/new.html.erb within layouts/application (141.6ms)\n  Rendered layouts/navigation/header/_toggle_button.html.erb (1.0ms)\n  Rendered layouts/navigation/header/_home_button.html.erb (30.3ms)\n  User Load (28.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIM\nIT $2  [[\"id\", 5], [\"LIMIT\", 1]]\n  Rendered layouts/navigation/header/dropdowns/conversations/_private.html.erb (\n73.2ms)\n  User Load (2.9ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMI\nT $2  [[\"id\", 3], [\"LIMIT\", 1]]\n  CACHE User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $\n1 LIMIT $2  [[\"id\", 5], [\"LIMIT\", 1]]\n  Rendered layouts/navigation/header/dropdowns/conversations/_private.html.erb (\n109.4ms)\n  Rendered layouts/navigation/header/dropdowns/conversations/_group.html.erb (3.\n9ms)\n  User Load (30.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIM\nIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Rendered layouts/navigation/header/dropdowns/conversations/_private.html.erb (\n40.0ms)\n  CACHE User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $\n1 LIMIT $2  [[\"id\", 3], [\"LIMIT\", 1]]\n  User Load (2.9ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMI\nT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  Rendered layouts/navigation/header/dropdowns/conversations/_private.html.erb (\n100.6ms)\n  Rendered layouts/navigation/header/dropdowns/_conversations.html.erb (983.4ms)\n\n  User Load (2.0ms)  SELECT \"users\".* FROM \"users\" INNER JOIN \"contacts\" ON \"use\nrs\".\"id\" = \"contacts\".\"user_id\" WHERE \"contacts\".\"contact_id\" = $1 AND \"contacts\n\".\"accepted\" = $2  [[\"contact_id\", 3], [\"accepted\", \"f\"]]\n  Rendered layouts/navigation/header/dropdowns/contact_requests/_no_requests.htm\nl.erb (1.0ms)\n  Rendered layouts/navigation/header/dropdowns/_contact_requests.html.erb (374.0\nms)\n  Rendered layouts/navigation/header/_dropdowns.html.erb (1713.9ms)\n  Rendered layouts/navigation/_header.html.erb (2485.4ms)\n  Kategory Load (2.9ms)  SELECT \"kategories\".* FROM \"kategories\"\n  Rendered layouts/navigation/collapsible_elements/_constant_links.html.erb (2.0\nms)\n   (2.0ms)  SELECT COUNT(*) FROM \"questions\" INNER JOIN \"save_questions\" ON \"que\nstions\".\"id\" = \"save_questions\".\"question_id\" WHERE \"save_questions\".\"user_id\" =\n $1  [[\"user_id\", 3]]\n  Rendered layouts/navigation/collapsible_elements/_signed_in_links.html.erb (21\n.5ms)\n  Rendered layouts/navigation/_collapsible_elements.html.erb (543.0ms)\n  Rendered layouts/_navigation.html.erb (3323.2ms)\n  Rendered layouts/application/_private_conversations_windows.html.erb (1.0ms)\n  Rendered layouts/application/_group_conversations_windows.html.erb (2.0ms)\nCompleted 200 OK in 22203ms (Views: 21796.6ms | ActiveRecord: 158.2ms)\n</code></pre>\n"}, {"tags": ["ruby", "appium"], "answers": [{"tags": [], "owner": {"reputation": 3036, "user_id": 4103101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wg02v.jpg?s=128&g=1", "display_name": "dmle", "link": "https://stackoverflow.com/users/4103101/dmle"}, "is_accepted": false, "score": 4, "last_activity_date": 1531343616, "creation_date": 1531343616, "answer_id": 51294236, "question_id": 51285124, "link": "https://stackoverflow.com/questions/51285124/getting-text-color-in-appium/51294236#51294236", "title": "Getting text color in appium", "body": "<p>There is <strong>no way to get text color in Appium</strong> for native iOS/Android apps, simply because UIAutomator2/XCUITest do not expose this type of data.</p>\n\n<p>Appium is not a tool for visual testing, but is for functional testing.</p>\n"}], "owner": {"reputation": 51, "user_id": 9941366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0e0670a4acf4f350cac9c19a57aa599?s=128&d=identicon&r=PG&f=1", "display_name": "ramesh", "link": "https://stackoverflow.com/users/9941366/ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531343616, "creation_date": 1531310922, "question_id": 51285124, "link": "https://stackoverflow.com/questions/51285124/getting-text-color-in-appium", "title": "Getting text color in appium", "body": "<p>Is there any method to get text color in appium (lets say android apps). And also I want to assert that the text color is red/blue/green in color.\nI use ruby to write the scripts.</p>\n"}, {"tags": ["ruby", "iframe", "amazon-s3", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 1031, "user_id": 744586, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/3ed23b9d66bfa4c40bdd637c5e2bfdd6?s=128&d=identicon&r=PG", "display_name": "Venomoustoad", "link": "https://stackoverflow.com/users/744586/venomoustoad"}, "edited": false, "score": 0, "creation_date": 1531433834, "post_id": 51286074, "comment_id": 89606996, "body": "do embed and object tags only work for a specific set of file types. I tried going through the docs to try and get the right type . My files are in various different sub-formats from doc, docx, pdf. <a href=\"http://www.iana.org/assignments/media-types/media-types.xhtml\" rel=\"nofollow noreferrer\">iana.org/assignments/media-types/media-types.xhtml</a>"}, {"owner": {"reputation": 1031, "user_id": 744586, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/3ed23b9d66bfa4c40bdd637c5e2bfdd6?s=128&d=identicon&r=PG", "display_name": "Venomoustoad", "link": "https://stackoverflow.com/users/744586/venomoustoad"}, "edited": false, "score": 0, "creation_date": 1531433921, "post_id": 51286074, "comment_id": 89607021, "body": "i am currently consistently getting an error- saying plugin is not supported for some of these formats. It seems to work for simple img/ jpeg formats."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 1031, "user_id": 744586, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/3ed23b9d66bfa4c40bdd637c5e2bfdd6?s=128&d=identicon&r=PG", "display_name": "Venomoustoad", "link": "https://stackoverflow.com/users/744586/venomoustoad"}, "edited": false, "score": 0, "creation_date": 1531479529, "post_id": 51286074, "comment_id": 89622185, "body": "There is no any universal solution to do that in frontend. When you need support multiple formats and be sure that shall be displayed in a page, you must find solution convert that object to HTML format."}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1531313873, "creation_date": 1531313873, "answer_id": 51286074, "question_id": 51284745, "link": "https://stackoverflow.com/questions/51284745/how-to-load-expiring-url-on-iframe-in-ruby-app/51286074#51286074", "title": "How to load expiring url on iframe in Ruby app", "body": "<p><code>&lt;iframe&gt;</code> is not the best way to display files. Use <code>object</code> where you can provide an error message when a file can't be displayed. Browser displaying file inside <code>iframe</code> only when there is installed a required plugin for displaying relevant format, otherwise start downloading. That is not Ruby issue.</p>\n\n<p>Read this stackoverflow post <a href=\"https://stackoverflow.com/questions/19654577/html-embedded-pdf-iframe\">HTML embedded PDF iframe</a> for more information.</p>\n"}], "owner": {"reputation": 1031, "user_id": 744586, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/3ed23b9d66bfa4c40bdd637c5e2bfdd6?s=128&d=identicon&r=PG", "display_name": "Venomoustoad", "link": "https://stackoverflow.com/users/744586/venomoustoad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531313873, "creation_date": 1531309682, "question_id": 51284745, "link": "https://stackoverflow.com/questions/51284745/how-to-load-expiring-url-on-iframe-in-ruby-app", "title": "How to load expiring url on iframe in Ruby app", "body": "<p>I am trying to connect to my S3(privately- using access key) and load a document file for display on iframe. However when i add the following html code to my front end, it ends up downloading the file to my computer instead for loading it within the iframe. How do I make it display within the iframe?</p>\n\n<pre><code>&lt;!--index.html.erb--&gt;\n&lt;!-- image is the attachment done through paperclip gem--&gt;\n&lt;iframe src=\"&lt;%= @file.image.expiring_url(50)%&gt;\" width=\"100%\" height=\"800\" &gt;\n</code></pre>\n"}, {"tags": ["sql", "ruby", "sqlite", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1531314664, "post_id": 51284642, "comment_id": 89550179, "body": "Seems likely that you need to add the executable to your <a href=\"https://www.howtogeek.com/118594/how-to-edit-your-system-path-for-easy-command-line-access/\" rel=\"nofollow noreferrer\">PATH</a>"}], "answers": [{"tags": [], "owner": {"reputation": 282, "user_id": 9206962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a463369008c395c14b569267e3c4f3e?s=128&d=identicon&r=PG&f=1", "display_name": "emijune", "link": "https://stackoverflow.com/users/9206962/emijune"}, "is_accepted": true, "score": 0, "last_activity_date": 1531316631, "creation_date": 1531316631, "answer_id": 51287096, "question_id": 51284642, "link": "https://stackoverflow.com/questions/51284642/setting-up-sqlite-without-copying-and-pasting-application-file-to-every-project/51287096#51287096", "title": "Setting up SQLite without copying and pasting application file to every project directory", "body": "<p>Solved by adding the C:\\sqlite directory to the Path variable in advanced system settings.</p>\n"}], "owner": {"reputation": 282, "user_id": 9206962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a463369008c395c14b569267e3c4f3e?s=128&d=identicon&r=PG&f=1", "display_name": "emijune", "link": "https://stackoverflow.com/users/9206962/emijune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 51287096, "answer_count": 1, "score": 0, "last_activity_date": 1531316631, "creation_date": 1531309329, "question_id": 51284642, "link": "https://stackoverflow.com/questions/51284642/setting-up-sqlite-without-copying-and-pasting-application-file-to-every-project", "title": "Setting up SQLite without copying and pasting application file to every project directory", "body": "<p>I am revisiting an old bootcamp course to refresh my memory and doing things locally vs. on the Cloud9 development environment. I'm confused because I've downloaded SQLite per the downloads page <a href=\"https://i.stack.imgur.com/OELx0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OELx0.png\" alt=\"for Windows\"></a> and saved it to a folder under C:\\sqlite. I can load the shell and run it if I save a db file in the same root as the folder I downloaded the shell to, but if I open different project directories elsewhere on my computer for different projects/exercises it doesn't work unless I copy and paste the sqlite application into the same folder and open it separately from the command prompt I'm using to control my Ruby applications. </p>\n\n<p>Am I missing something, or is there no way to download sqlite as something that integrates itself into the windows command prompt without having to copy the sqlite application file into every project directory that has a db? </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531314894, "post_id": 51284581, "comment_id": 89550348, "body": "I provided a gist with many examples: <a href=\"https://gist.github.com/coorasse/8e3b2e9620b2b376afce6b8d274ec6e2\" rel=\"nofollow noreferrer\">gist.github.com/coorasse/8e3b2e9620b2b376afce6b8d274ec6e2</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1531334960, "post_id": 51286877, "comment_id": 89562354, "body": "I didn&#39;t know about <code>drop_while</code>. Nice solution!"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1531329833, "last_edit_date": 1531329833, "creation_date": 1531316092, "answer_id": 51286877, "question_id": 51284581, "link": "https://stackoverflow.com/questions/51284581/remove-next-elements-in-array-with-ruby/51286877#51286877", "title": "Remove next elements in array with ruby", "body": "<p>Here is how I would solve the problem:</p>\n\n<pre><code>def compress(arr)\n  return arr unless idx = arr.rindex {|e| e == 0 || e == 1}\n  value = arr[idx]\n  method_options = [:even?,:odd?]\n  arr[idx..-1].drop_while do |n| \n    n.public_send(method_options[value])\n  end.tap {|a| a.unshift(value) if value.zero? }\nend\n</code></pre>\n\n<p>First we find index of the last occurrence of 0 or 1 using <code>Array#rindex</code>. If none then return the <code>Array</code>. </p>\n\n<p>Then we get the value at that index. </p>\n\n<p>Then we use <code>Array#[]</code> to slice off the tail end of the <code>Array</code> starting at the index.</p>\n\n<p>Then drop all the consecutive adjacent <code>:even?</code> or <code>:odd?</code> numbers respective to the <code>value</code> (<code>0</code> or <code>1</code>) using <code>Array#drop_while</code>. </p>\n\n<p>Finally if the <code>value</code> is <code>0</code> we place it back into the front of the <code>Array</code> before returning. </p>\n\n<p>Examples</p>\n\n<pre><code>compress([3, 2, 0]) \n#=&gt; [0]\ncompress([2, 0, 4, 6, 7]) \n#=&gt; [0,7]\ncompress([2, 0, 4, 1, 3, 6]) \n#=&gt; [6]\ncompress([3, 2, 0, 4, 1, 3, 6, 8, 5]) \n#=&gt; [6,8,5]\ncompress([4, 5, 6])\n#=&gt; [4,5,6]\ncompress([0])\n#=&gt; [0]\ncompress([1])\n#=&gt; []\n</code></pre>\n\n<p>If your goal was to be mutative, as your question and gist seem to suggest, I honestly would not change what I have but rather go with:</p>\n\n<pre><code>def compress!(arr)\n  arr.replace(compress(arr))\nend\n</code></pre>\n\n<p>For example </p>\n\n<pre><code>a = [3, 2, 0, 4, 1, 3, 6, 8, 5]\na == compress!(a)\n#=&gt; true\na \n#=&gt; [6,8,5]\n</code></pre>\n"}], "owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 51286877, "answer_count": 1, "score": 3, "last_activity_date": 1531332769, "creation_date": 1531309151, "last_edit_date": 1531332769, "question_id": 51284581, "link": "https://stackoverflow.com/questions/51284581/remove-next-elements-in-array-with-ruby", "title": "Remove next elements in array with ruby", "body": "<p>Given an array containing numbers the following rules apply:</p>\n\n<ul>\n<li>a <code>0</code> removes all previous numbers and all subsequent adjacent even numbers.</li>\n<li>a <code>1</code> removes all previous numbers and all subsequent adjacent odd numbers.</li>\n<li>if the first element of the array is <code>1</code> it can be removed</li>\n</ul>\n\n<p>I am trying to write an algorithm to reduce the array but I could come up only with a bad looking solution:</p>\n\n<pre><code>def compress(array)\n  zero_or_one_index = array.rindex { |element| [0,1].include? element }\n  array.slice!(0, zero_or_one_index) if zero_or_one_index\n  deleting = true\n  while deleting\n    deleting = false\n    array.each_with_index do |element, index|\n      next if index.zero?\n      previous_element = array[index - 1]\n      if (previous_element == 0 &amp;&amp; element.even?) || \n         (previous_element == 1 &amp;&amp; element.odd?)\n        array.delete_at(index)\n        deleting = true\n        break\n      end\n    end\n  end\n  array.shift if array[0] == 1\nend\n</code></pre>\n\n<p>The problem is that <code>delete_if</code> and similar, start messing up the result, if I delete elements while iterating on the array, therefore I am forced to use a while loop.</p>\n\n<p>Examples: </p>\n\n<pre><code>compress([3, 2, 0]) #=&gt; [0]\ncompress([2, 0, 4, 6, 7]) #=&gt; [0,7]\ncompress([2, 0, 4, 1, 3, 6]) #=&gt; [6]\ncompress([3, 2, 0, 4, 1, 3, 6, 8, 5]) #=&gt; [6,8,5]\n</code></pre>\n\n<p>This problem arises in the context of some refactorings I am performing on cancancan to optimize the rules definition.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531311879, "post_id": 51284457, "comment_id": 89548124, "body": "&quot;Why do I need explicit return for case statements?&quot; - you don&#39;t. In fact, it&#39;s a bad practice. Unfortunately, you didn&#39;t provide enough code to let us reproduce the problem, so we can&#39;t say for sure what you are doing wrong. But you definitely do [something wrong]."}, {"owner": {"reputation": 3352, "user_id": 4565485, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/8lpRH.jpg?s=128&g=1", "display_name": "ogirginc", "link": "https://stackoverflow.com/users/4565485/ogirginc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531316173, "post_id": 51284457, "comment_id": 89551282, "body": "@SergioTulentsev thanks for the feedback. I added the whole class."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531317170, "post_id": 51284457, "comment_id": 89552065, "body": "That&#39;s better, but this  is not enough code to reproduce the problem (and too much irrelevant code). Please see this page: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531317910, "post_id": 51284457, "comment_id": 89552687, "body": "For example, all this sidekiq stuff is completely unrelated to the problem. You&#39;re not using any of it in the test anyway. But, in absence of explicit returns, result of that <code>perform</code> is whatever <code>Api.authenticate(1)</code> returns (which you didn&#39;t provide). That&#39;s why behaviour changes when you remove the returns."}, {"owner": {"reputation": 3352, "user_id": 4565485, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/8lpRH.jpg?s=128&g=1", "display_name": "ogirginc", "link": "https://stackoverflow.com/users/4565485/ogirginc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531330888, "post_id": 51284457, "comment_id": 89560505, "body": "@SergioTulentsev didn&#39;t think <code>Api.authenticate(1)</code> might be the reason until you mentioned it. Cleaned &amp; updated the code! \ud83d\ude4c\ud83c\udffb"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1531331859, "post_id": 51284457, "comment_id": 89560951, "body": "&quot;Cleaned &amp; updated the code!&quot; - \ud83d\udc4d aaaand now the problem does not reproduce (when running your code, not the test). I don&#39;t know minitest, but I think it&#39;s how you stub <code>Api.authenticate</code>. This way it returns nil always (because you didn&#39;t provide a return value when you stubbed it)."}], "owner": {"reputation": 3352, "user_id": 4565485, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/8lpRH.jpg?s=128&g=1", "display_name": "ogirginc", "link": "https://stackoverflow.com/users/4565485/ogirginc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531330814, "creation_date": 1531308811, "last_edit_date": 1531330814, "question_id": 51284457, "link": "https://stackoverflow.com/questions/51284457/need-of-explicit-return-in-then-for-case-statement", "title": "Need of explicit return in `then` for case statement", "body": "<p>I have a Sidekiq worker and in it using a case statement:</p>\n\n<pre><code>module Api\n  def self.authenticate(company_id)\n    Thread.current['api_company_id'] = company_id\n    yield if block_given?\n  ensure\n    Thread.current['api_company_id'] = nil\n  end\nend\n\nmodule Apis\n  class PollTrackableJobWorker\n    include Sidekiq::Worker\n\n    class EDocumentNotDoneError &lt; StandardError; end\n    class UnhandledCaseError &lt; StandardError; end\n\n    def perform(job_id, _invoice_id)\n      Api.authenticate(1) do\n        response = Api::TrackableJob.find(job_id).first\n\n        case response['status']\n        when 'done' then return true\n        when 'error' then return handle_error(response['errors'])\n        when 'pending' || 'running' then return raise EDocumentNotDoneError\n        else raise UnhandledCaseError, response\n        end\n      end\n    end\n\n    private\n\n    def handle_error(exception)\n      Bugsnag.notify(exception) if defined?(Bugsnag)\n    end\n  end\nend\n</code></pre>\n\n<p><code>#perform</code> method is tested for all possible outcomes. Below, is a case for <code>done</code>:</p>\n\n<pre><code>class PollTrackableJobWorkerTest &lt; ActiveSupport::TestCase\n  test 'status is done' do\n    response = {\n      'type'       =&gt; 'trackable_jobs',\n      'id'         =&gt; 'xxxxx',\n      'status'     =&gt; 'done',\n      'errors'     =&gt; nil\n    }\n\n    Api.expects(:authenticate).with(1).yields\n    Api::TrackableJob.stubs(:find).with('xxxxx').returns([response])\n\n    assert_equal(true, Apis::PollTrackableJobWorker.new.perform('xxxxx', 123))\n  end\nend\n</code></pre>\n\n<p>The test passes perfectly.</p>\n\n<p>However, when I use implicit <code>return</code>, it keeps failing (returns <code>nil</code>). </p>\n\n<p>For example, using a private method with an explicit <code>return</code> statement fails</p>\n\n<pre><code>case response['status']\nwhen 'done' then returns_true\n# code omitted\nend\n\nprivate\n\ndef returns_true\n  return true\nend\n</code></pre>\n\n<p>or using implicit <code>return</code> fails too</p>\n\n<pre><code>when 'done' then true\n</code></pre>\n\n<p>Why do I need explicit <code>return</code> for case statements?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refinerycms"], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 1, "last_activity_date": 1531312928, "creation_date": 1531312928, "answer_id": 51285755, "question_id": 51283529, "link": "https://stackoverflow.com/questions/51283529/refinery-cms-how-to-resize-a-resource-image/51285755#51285755", "title": "Refinery CMS - How to resize a resource image?", "body": "<blockquote>\n  <p>Dragonfly stores an image once and produces image variations (thumbnails, formats and enhancements) on-the-fly.</p>\n</blockquote>\n\n<p>So, all related methods are available only to the image model. That means you can't run those methods on everything, but you have a link or local address to the image. So, you can always build a thumb manually:</p>\n\n<pre><code>require \"mini_magick\"\n\nimage = MiniMagick::Image.open(\"input.jpg\")\nimage.resize \"400x400\"\nimage.format \"png\"\nimage.write \"output.png\"\n</code></pre>\n\n<p>For the existing <a href=\"https://github.com/refinery/refinerycms/blob/master/images/app/helpers/refinery/admin/images_helper.rb\" rel=\"nofollow noreferrer\">image object</a>:</p>\n\n<pre><code>image.thumbnail(:geometry =&gt; '400x400#c').url\n</code></pre>\n"}], "owner": {"reputation": 5933, "user_id": 3501228, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6ocDo.jpg?s=128&g=1", "display_name": "Noman Ur Rehman", "link": "https://stackoverflow.com/users/3501228/noman-ur-rehman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1531312928, "creation_date": 1531306030, "question_id": 51283529, "link": "https://stackoverflow.com/questions/51283529/refinery-cms-how-to-resize-a-resource-image", "title": "Refinery CMS - How to resize a resource image?", "body": "<p>I have a <code>TestimonialResource</code> model which has a <code>resource</code> field type. The backend works okay where I am able to pick a file to upload as a <code>resource</code> to the testimonial.</p>\n\n<p>However, I am unable to generate a thumbnail of the resource(if it is an image). I know it works with an <code>image</code> field type and have done it in the past.</p>\n\n<p>I have also looked at the available methods in the Rails console and it does list <code>thumb</code> as a method.</p>\n\n<p>However, the following does not work in the front-end view.</p>\n\n<pre><code>&lt;%= testimonial_resource.content.thumb('400x400#').url %&gt;\n</code></pre>\n\n<p>Content is the RefineryCMS resource.</p>\n\n<p>Can someone point me in the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 2240558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/776be712b686de44bd8e0837bbcd55eb?s=128&d=identicon&r=PG", "display_name": "Pyos", "link": "https://stackoverflow.com/users/2240558/pyos"}, "edited": false, "score": 0, "creation_date": 1531387901, "post_id": 51286959, "comment_id": 89580842, "body": "The policy_scope method inside Scope classes is just a helper that calls Pundit.policy_scope! to allow chaining but I do feel it is sort of anti-pattern."}, {"owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "reply_to_user": {"reputation": 99, "user_id": 2240558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/776be712b686de44bd8e0837bbcd55eb?s=128&d=identicon&r=PG", "display_name": "Pyos", "link": "https://stackoverflow.com/users/2240558/pyos"}, "edited": false, "score": 0, "creation_date": 1531388258, "post_id": 51286959, "comment_id": 89581084, "body": "I understand your point about Pundit&#39;s <code>policy_scope</code> method. But in my opinion we should take into consideration the usage intention with which a specific method is implemented and exposed publicly. Otherwise nothing restricts us from using any method anywhere."}, {"owner": {"reputation": 99, "user_id": 2240558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/776be712b686de44bd8e0837bbcd55eb?s=128&d=identicon&r=PG", "display_name": "Pyos", "link": "https://stackoverflow.com/users/2240558/pyos"}, "edited": false, "score": 0, "creation_date": 1531388434, "post_id": 51286959, "comment_id": 89581210, "body": "Thanks for the reply, I wanted to put a new line but it published the comment instead. Here&#39;s the follow up:  The way you described in your first example of StudentPolicy::Scope doesn&#39;t suit me because I wan&#39;t to enforce scope dependencies so that changing a users&#39; scope for a parent model automatically trickles down to child scopes.  I do feel it makes sense to have some sort of &#39;inheritance&#39; at the query level, I just can&#39;t figure out how to implement it. I&#39;ll try and implement your second example to get a better feel of it though."}, {"owner": {"reputation": 99, "user_id": 2240558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/776be712b686de44bd8e0837bbcd55eb?s=128&d=identicon&r=PG", "display_name": "Pyos", "link": "https://stackoverflow.com/users/2240558/pyos"}, "edited": false, "score": 0, "creation_date": 1531388856, "post_id": 51286959, "comment_id": 89581497, "body": "I guess in simpler terms, in you first example, if I say a reviewer has access to a new range of classroom, say <code>type: :catchup_exams</code>, I can&#39;t be sure a developer will add access to students &amp; exams from those added rooms. The change could be done without knowledge of the exams mechanics and association, which is why I want it to be done automatically."}], "tags": [], "owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "is_accepted": false, "score": 2, "last_activity_date": 1531316289, "creation_date": 1531316289, "answer_id": 51286959, "question_id": 51283064, "link": "https://stackoverflow.com/questions/51283064/pundit-and-activerecord-merged-joins/51286959#51286959", "title": "Pundit and ActiveRecord merged joins", "body": "<p><code>policy_scope</code> is intended to be used from Controllers. For e.g. refer the examples given in section <a href=\"https://github.com/varvet/pundit#scopes\" rel=\"nofollow noreferrer\">https://github.com/varvet/pundit#scopes</a> and you should find that this method is being demonstrated to be used either from controllers or views.</p>\n\n<p>However as per your code you are trying to use <code>policy_scope</code> in your scope classes (i.e classes extending <code>ApplicationPolicy::Scope</code> class) themselves. And I think I am understanding the intention behind doing so to reuse the already defined scopes. But in my opinion that's a wrong way to think about it.</p>\n\n<p>Once inside <code>YourScopeClass#resolve</code> method you should use normal querying mechanism like you do elsewhere in your Rails application.</p>\n\n<p>I don't have a complete know-how of the fields you have in your model. But based on the comments you have added in <code>resolve</code> method for a reviewer, you should do something like:</p>\n\n<pre><code>class StudentPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see students from classes he's allowed in\n      arel = scope.joins(:classroom)\n      arel = arel.where(classrooms: { type: : exam, reviewer_id: user.id })\n      arel\n    end\n  end\nend\n</code></pre>\n\n<p>Then use it from controller like <code>policy_scope(Student)</code></p>\n\n<p>Similarly</p>\n\n<pre><code>class ExamPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see/grade exams from students he supervised\n      arel = arel.joins(student: [ :classroom ])\n      arel = arel.where(classrooms: { type: : exam, reviewer_id: user.id })\n      arel\n    end\n  end\nend\n</code></pre>\n\n<p>Then use it from controller like <code>policy_scope(Exam)</code></p>\n\n<p>And if you want to reuse some queries then try creating some generic methods which can be passed the query represented by Pundit Policy Scope.</p>\n\n<p>For e.g.</p>\n\n<pre><code>class MyClass\n  class &lt;&lt; self\n    def accessible_students(arel:, user_id:)\n      arel.where(classrooms: { type: : exam, reviewer_id: user_id })\n    end\n  end\nend\n\nclass StudentPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see students from classes he's allowed in\n\n      arel = scope.joins(:classroom)\n      arel = MyClass.accessible_students(arel: arel, user_id: user.id)\n      arel\n    end\n  end\nend\n\nclass ExamPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see/grade exams from students he supervised\n      arel = arel.joins(student: [ :classroom ])\n      arel = MyClass.accessible_students(arel: arel, user_id: user.id)\n      arel\n    end\n  end\nend\n</code></pre>\n\n<p>I hope you find this helpful.</p>\n"}], "owner": {"reputation": 99, "user_id": 2240558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/776be712b686de44bd8e0837bbcd55eb?s=128&d=identicon&r=PG", "display_name": "Pyos", "link": "https://stackoverflow.com/users/2240558/pyos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531316289, "creation_date": 1531304677, "question_id": 51283064, "link": "https://stackoverflow.com/questions/51283064/pundit-and-activerecord-merged-joins", "title": "Pundit and ActiveRecord merged joins", "body": "<p>I am using the Pundit gem to role scope my application and have found some difficulties merging ActiveRecord queries. I am working with Rails 5.1.4.</p>\n\n<p>See I have three models, lets say Classroom, Student and Exam with:</p>\n\n<ul>\n<li>Classroom has_many :students &amp; has_many :exams, through: :students</li>\n<li>Student belongs_to: :classroom &amp; has_many :exams</li>\n<li>Exam belongs_to: :student</li>\n</ul>\n\n<p>Each have a policy scope with varying queries that I want to merge together to ensure a user has access to the Exam model that's within the Student scope, that's also within the Classroom scope.</p>\n\n<p>Pundit let us do that by passing whatever ActiveRecord relationship from the controller to the Scope class inside a scope variable.</p>\n\n<p>With that in mind, my scope classes appear as follow:</p>\n\n<pre><code>class ClassroomPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see specific classes\n      scope.where(type: :exam).where(reviewer_id: user.id)\n    end\n  end\nend\n\nclass StudentPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see students from classes he's allowed in\n      scope.joins(:classroom).merge(policy_scope(Classroom))\n    end\n  end\nend\n\nclass ExamPolicy::Scope\n  def resolve\n    if user.reviewer?\n      # A reviewer can only see/grade exams from students he supervised\n      scope.joins(:student).merge(policy_scope(Student))\n    end\n  end\nend\n</code></pre>\n\n<p>All works well, if I do <code>policy_scope(Exam)</code>, I do get all exams from students who where inside a reviewer's classroom.</p>\n\n<p>The issue arises when passing an already joined query such as <code>policy_scope(Classroom.find(params[:classroom_id]).exams)</code>.<br>\nActiveRecord effectively generates a strange query which is unusable because both a_classroom.exams and our scope do a join on :student.</p>\n\n<p>In addition, removing <code>joins</code> from our exam scope, giving us <code>scope.merge(policy_scope(Student))</code>, makes our call <code>policy_scope(Classroom.find(params[:classroom_id]).exams)</code> work while breaking <code>policy_scope(Exam)</code>.</p>\n\n<p>Is there a way to work around this so that both use cases work ?<br>\nOr is my approach to Pundit wrong ?<br>\nIs this the limit of ActiveRecord ?<br>\nAny help regarding this would be appreciated !</p>\n"}, {"tags": ["ruby", "eval", "nokogiri"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531298940, "post_id": 51280721, "comment_id": 89539459, "body": "Re-encode the string or use proper encoding. That is some type of emoticon or something."}, {"owner": {"reputation": 3, "user_id": 9229605, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211139626861979/picture?type=large", "display_name": "Dan Dunclace", "link": "https://stackoverflow.com/users/9229605/dan-dunclace"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531301126, "post_id": 51280721, "comment_id": 89541011, "body": "@ForeverZer0 I have re- endoced myText using scrip.force_encoding(Encoding::UTF_8) but still I get the same error. Yes,they are emoticons. What could I be doing wrong?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531301756, "post_id": 51280721, "comment_id": 89541458, "body": "<code>force_encoding</code> doesn&#39;t encode the string, it just forces the string to be interpreted as whatever encoding you set, useful if you have a code that Ruby may assume as ASCII or something, but is actually UTF-8, you can tell to it treat it as UTF-8. <code>encode</code> will actually convert the bytes.String encoding in Ruby can be bothersome compared to other languages..."}, {"owner": {"reputation": 3, "user_id": 9229605, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211139626861979/picture?type=large", "display_name": "Dan Dunclace", "link": "https://stackoverflow.com/users/9229605/dan-dunclace"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531304467, "post_id": 51280721, "comment_id": 89543201, "body": "Got the answer I needed from. Thanks for your assistance. Check the answer below"}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1531299391, "creation_date": 1531299391, "answer_id": 51281244, "question_id": 51280721, "link": "https://stackoverflow.com/questions/51280721/i-am-getting-eval1-invalid-unicode-codepoint-error-while-trying-to-scrape-in/51281244#51281244", "title": "I am getting (eval):1: invalid Unicode codepoint error while trying to scrape instagram", "body": "<p>JSON, like JavaScript, uses UCS2 encoding, which Ruby chokes on.</p>\n\n<p>Do not use <code>evil</code>. For one thing, Ruby will detect <code>\\ud83d\\ude0a</code> as invalid codepoints, as it should; for another, it is a security hole; and lastly, it slows down your code.</p>\n\n<p>Use <code>JSON.parse</code>, which is safer, faster, and knows how to deal with UCS2:</p>\n\n<pre><code>require 'json'\njson_str = '\"usinessmen #beautiful #smile\\ud83d\\ude0a #teambringit #shebr\"'\nJSON.parse(json_str)\n# =&gt; \"usinessmen #beautiful #smile\ud83d\ude0a #teambringit #shebr\" \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9229605, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211139626861979/picture?type=large", "display_name": "Dan Dunclace", "link": "https://stackoverflow.com/users/9229605/dan-dunclace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 51281244, "answer_count": 1, "score": 0, "last_activity_date": 1531299391, "creation_date": 1531297778, "last_edit_date": 1531298657, "question_id": 51280721, "link": "https://stackoverflow.com/questions/51280721/i-am-getting-eval1-invalid-unicode-codepoint-error-while-trying-to-scrape-in", "title": "I am getting (eval):1: invalid Unicode codepoint error while trying to scrape instagram", "body": "<p>I am trying to scrape data from instagram. Here is my code</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\nrequire 'json'\nrequire \"unicode/emoji\"\n\ndef get_html\n    url = 'https://www.instagram.com/muriithi_kabogo/'\n    html = open(url)\n\nend\n\ndef pass_data\n    html = get_html\n    doc = Nokogiri::HTML(html)\nend\n\ndef get_data\n    profiles = []\n    body  = pass_data.at('body')\n    script = body.at('script').text\n    myText = script\n    json_object_data = eval(myText)\n\nend\n\n\nget_data()\n</code></pre>\n\n<p>When I try to change the text into json format, I get an error:</p>\n\n<pre><code>(eval):1: invalid Unicode codepoint (SyntaxError)\nusinessmen #beautiful #smile\\ud83d\\ude0a #teambringit #shebr\n</code></pre>\n\n<p>How do I move past this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1531301533, "post_id": 51281086, "comment_id": 89541293, "body": "@amdruid: Is there any method like array flatten method. I went thru the array of hash Ruby docs. but I couldn&#39;t exactly locate the same, thanks."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1531301699, "post_id": 51281086, "comment_id": 89541422, "body": "There is, but before we proceed I think it&#39;ll be better to show how you process the log file. Maybe we can find a quick trick to create the correct structure from there"}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 1, "creation_date": 1531302521, "post_id": 51281086, "comment_id": 89542013, "body": "Thanks for your time here !! I have edited my question with the Log entries and the code.."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1531304856, "post_id": 51281086, "comment_id": 89543422, "body": "Thank you for providing more context, I updated my answer. And good job with parsing part of the log! You can even do better than I suggested in there I believe"}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1531306880, "post_id": 51281086, "comment_id": 89544805, "body": "@amrduid: Really appreciate your help here, many thanks.. Got an issue, following line <code>sheet.add_row [ val[:VM], val[:data][0][:id] ], :style =&gt;[style2, nil]</code>  prints only the 1st id. say it prints only OLFTB51 and not OLFTB10 or the following ids.."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1531307154, "post_id": 51281086, "comment_id": 89545015, "body": "You got the rest of the ids in each <code>record</code>, you can print them it here <code>sheet &lt;&lt; [record[:id], &quot;&quot;,  k, v]</code> . Let me know if this works"}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1531307652, "post_id": 51281086, "comment_id": 89545329, "body": "It prints the remaining ids as hash in the excel sheet"}], "tags": [], "owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "is_accepted": false, "score": 1, "last_activity_date": 1531304794, "last_edit_date": 1531304794, "creation_date": 1531298884, "answer_id": 51281086, "question_id": 51279315, "link": "https://stackoverflow.com/questions/51279315/ruby-transform-a-data-structure-into-an-excel-sheet/51281086#51281086", "title": "Ruby: transform a data structure into an excel sheet", "body": "<p>The problem is with the structure of your data. Try to change to have the values of your array in this structure</p>\n\n<p><code>{:VM=&gt;\"VM_US_OLA_1\", :id=&gt;\"OLFTB51\", :datum=&gt;{\"LAP\"=&gt;\"6.93817\", \"YCC_OWER\"=&gt;\"1.0391\"}</code></p>\n\n<p>What's happening is <code>VM</code> is one record in your array, and the other data is another record in the array, you need to merge them so you access them in the same loop iteration</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I guess how we parse the log file is a bit tricky, so I am going to leave it but I am sure that this part I am going to introduce can be done in the log file parsing </p>\n\n<p>First, we can change the structure of the array like that (before <code>p.workbook.add_worksheet</code>)</p>\n\n<pre><code>dataset = []\nvalues.each_with_index do |value|\n    if value[:VM].present? # or :vm, not sure about the key\n        dataset &lt;&lt; value\n        dataset.last[:data] = []\n    else \n        dataset.last[:data] &lt;&lt; value\n    end\nend\n</code></pre>\n\n<p>Then this loop: <code>values.each do |val|</code></p>\n\n<p>Can be changed to <code>dataset.each do |val|</code></p>\n\n<p>Then you can continue with the rest of your logic: </p>\n\n<pre><code>  sheet.add_row [ val[:VM], val[:data][0][:id] ], :style =&gt;[style2, nil]\n  val[data].each do |record|\n    record[:datanum].each do |k, v|\n</code></pre>\n\n<p>The problem with your previous code is, you used to add a new row <code>sheet.add_row</code> at the end of each iteration, so this was messing things up as you were expecting the data you need to be just right after your <code>VM</code> but a new line has already been inserted</p>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531304794, "creation_date": 1531293103, "last_edit_date": 1531302482, "question_id": 51279315, "link": "https://stackoverflow.com/questions/51279315/ruby-transform-a-data-structure-into-an-excel-sheet", "title": "Ruby: transform a data structure into an excel sheet", "body": "<p>I have processed  a log file and created a data structure of below format</p>\n\n<pre><code>values = [ {:VM=&gt;\"VM_US_OLA_1\"}\n{:id=&gt;\"OLFTB51\", :datum=&gt;{\"LAP\"=&gt;\"6.93817\", \"YCC_OWER\"=&gt;\"1.0391\"}}\n{:id=&gt;\"OLFTB10\", :datum=&gt;{\"LAP_2\"=&gt;\"2.72646\", \"CFG_ON\"=&gt;\"15.9489746\", \"YCC_ON\"=&gt;\".401794\"}}\n\n{:VM=&gt;\"VM_ASIA_FLO_1\"}\n{:id=&gt;\"LOPMLAP\", :datum=&gt;{\"LAP\"=&gt;\"1.81048584\", \"FM_ON\"=&gt;\".00\"} ]\n</code></pre>\n\n<p>values is an array.</p>\n\n<p>I'm trying to create a spreadsheet of below format where only the VM column gets highlighted in green and for every VM set, a blank line highlighted in 'yellow' should be inserted. I tried multiple approaches and went thru the axlsx documentation too but unable to get the desired format.</p>\n\n<p>My excel snippet below:</p>\n\n<pre><code>require 'axlsx'\np = Axlsx::Package.new\n\np.workbook.add_worksheet(:name =&gt; \"Statistics\") do |sheet|\n    style1 = sheet.styles.add_style(:bg_color =&gt; \"EF0920\", :fg_color =&gt; \"FFFFFF\", b:true)\n    style2 = sheet.styles.add_style(:bg_color =&gt; \"00FF00\", :fg_color =&gt; \"FFFFFF\", b:true)\n    sheet.add_row [\"VM\", \"NAME\", \"DETAILS\", \"OCC\"], :style =&gt; style1\n    values.each do |val|\n      sheet.add_row [ val[:VM], val[:id] ], :style =&gt;[style2, nil]\n      val[:datum].each do |k, v|\n        sheet &lt;&lt; [\"\", \"\",  k, v]        \n       end \n         end\n    sheet.add_row\nend\n\np.serialize 'Stat.xlsx'\n</code></pre>\n\n<p>Any suggestions should be really helpful here, many thanks.</p>\n\n<p><strong>Expected Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/UxhkM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UxhkM.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Current Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/2JPOA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2JPOA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Adding Log file and my code</p>\n\n<p>Log</p>\n\n<pre><code>        ---- vm name ----\n        VM_US_OLA_1\n\n        OLFTB51\n\n\n        OWNER                   IN_GB\n        ------------------------------ ----------\n        LAP                    6.93817\n        YCC_OWER               1.0391\n\n        =========================================\n\n\n        ---- vm name ----\n\n\n        OLFTB10\n\n\n        OWNER                   IN_GB\n        ------------------------------ ----------\n        LAP_2                  2.7266846\n        CFG_ON                 15.9489746\n        YCC_ON                .401794\n\n\n        =========================================\n\n\n        ---- vm name ----\n        VM_ASIA_FLO_1\n\n        LOPMLAP\n\n\n        OWNER                   IN_GB\n        ------------------------------ ----------\n        LAP                1.81048584\n        FM_ON              .00\n\n\n        =========================================\n\n\n        ---- vm name ----\n\n        INGTY_2\n\n\n        OWNER                   IN_GB\n        ------------------------------ ----------\n\n  =========================================\n\n    so on of the same format\n</code></pre>\n\n<p>Code to process the logs</p>\n\n<pre><code>require 'csv'\n\nvalues = []\n\ntotal = File.read(\"final.log\")\ntotal.each_line do |line|\n  line.strip!\n  next if line.empty?\n  next if line.include?('selected') || line.include?('IN_GB')\n  next if ['-','='].include? line[0]\n  parts = line.split ' '\n   if parts.size == 1 and line.start_with?('size')\n    values[current += 1] = {vm: line.strip}\n    next\n  elsif parts.size == 1 and parts = /^(?!.*size_).*$/\n    values[current += 1] = {id: line, datum: {}}\n    next\n  end\n\n  parts.each_cons(2) do |key, value|\n    values[current][:datum][key] = value \n    end\nend\n\nputs values\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 2, "creation_date": 1531292601, "post_id": 51278902, "comment_id": 89535747, "body": "Unrelated to your problem: <code>TRUE</code> and <code>FALSE</code> have been spelled <code>true</code> and <code>false</code> in Ruby for as long as I can remember. My interpreter gives a warning if I use the uppercase versions."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 1, "creation_date": 1531292689, "post_id": 51278902, "comment_id": 89535784, "body": "And take advantage of the mighty boolean: <code>if x return true else return false</code> is exactly the same as <code>return x</code> (assuming <code>x</code> is already a boolean). Similarly, <code>while x == false</code> is more commonly written <code>while not x</code>."}, {"owner": {"reputation": 469, "user_id": 4933446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cddb61a578ce2805e2f1ce9ef4cf1fe?s=128&d=identicon&r=PG", "display_name": "quazar", "link": "https://stackoverflow.com/users/4933446/quazar"}, "edited": false, "score": 0, "creation_date": 1531302186, "post_id": 51278902, "comment_id": 89541776, "body": "Just a suggestion, use short circuit evaluation when possible, they are easy to."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1531303732, "post_id": 51278902, "comment_id": 89542754, "body": "@Thomas: Or, in Ruby, <code>until x</code> (as long as the condition is not too complex)."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1531328279, "post_id": 51278902, "comment_id": 89559206, "body": "@Thomas it might be more commonly written as <code>while !x</code> but I wouldn&#39;t say it&#39;s more commonly written as <code>while not x</code>...for me, <code>not</code> is most commonly seen in code when I&#39;m fixing the bug someone introduced by using <code>not</code> instead of <code>!</code>"}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1531331470, "post_id": 51278902, "comment_id": 89560771, "body": "@SimpleLime Pardon me, you&#39;re right of course, had my head stuck in Python today :)"}], "answers": [{"comments": [{"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 1, "creation_date": 1531308864, "post_id": 51279036, "comment_id": 89546036, "body": "<code>break if valid_move?(board, index)</code> - not need to compare a boolean with true."}, {"owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "reply_to_user": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1531312460, "post_id": 51279036, "comment_id": 89548561, "body": "@LarsHaugseth - true, but I kept to the original question format."}], "tags": [], "owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "is_accepted": false, "score": 0, "last_activity_date": 1531292100, "creation_date": 1531292100, "answer_id": 51279036, "question_id": 51278902, "link": "https://stackoverflow.com/questions/51278902/stuck-in-while-loop-even-though-condition-has-been-met/51279036#51279036", "title": "Stuck in while loop even though condition has been met", "body": "<p>Because you call \"turn\" (internal) from \"turn\" (external) and then the internal \"turn\" called is valid but the <code>board</code> and <code>index</code> on the external \n\"turn\" didn't change.</p>\n\n<p>try this:</p>\n\n<pre><code>def turn(board)\n    loop do\n        puts \"Please enter 1-9:\"\n        user_input = gets.strip\n        index = input_to_index(user_input)\n        if valid_move?(board,index) == TRUE\n            break\n        end\n        puts \"invalid\"\n    end\n    move(board, index, character = \"X\")\n    display_board(board)\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10063010, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z44GnmiYNoU/AAAAAAAAAAI/AAAAAAAAAQ8/-2EPMJmPu-k/photo.jpg?sz=128", "display_name": "Alison Shin", "link": "https://stackoverflow.com/users/10063010/alison-shin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531295779, "creation_date": 1531291638, "last_edit_date": 1531295779, "question_id": 51278902, "link": "https://stackoverflow.com/questions/51278902/stuck-in-while-loop-even-though-condition-has-been-met", "title": "Stuck in while loop even though condition has been met", "body": "<p>I'm writing this script to build a tic-tac-toe game. This is only the beginning (no turns yet). I want to let the user input again if the previous input is invalid.</p>\n\n<pre><code>def display_board(board)\n    first_row = \" #{board[0]} | #{board[1]} | #{board[2]} \"\n    second_row = \" #{board[3]} | #{board[4]} | #{board[5]} \"\n    third_row = \" #{board[6]} | #{board[7]} | #{board[8]} \"\n    row_divider = \"-----------\"\n    puts first_row\n    puts row_divider\n    puts second_row\n    puts row_divider\n    puts third_row\nend  \n\ndef valid_move?(board,index)\n    if (index &gt;= 0) &amp;&amp; (index &lt;= board.length - 1) &amp;&amp; (position_taken?(board,index) != FALSE)\n        return TRUE\n    else\n        return FALSE\n    end\nend\n\ndef input_to_index(user_input)\n    index = user_input.to_i - 1\n    return index\nend\n\ndef move(board, index, character = \"X\")\n    board[index] = character\nend\n\ndef position_taken?(board,index)\n    if (board[index] == \"X\") || (board[index]==\"O\")\n      return FALSE\n    end\nend\n\ndef turn(board)\n    puts \"Please enter 1-9:\"\n    user_input = gets.strip\n    index = input_to_index(user_input)\n    while valid_move?(board,index) == FALSE\n        puts \"invalid\"\n        turn(board)\n    end\n    move(board, index, character = \"X\")\n    display_board(board)\nend\n</code></pre>\n\n<p>I am stuck on the while loop. If I input an invalid input and then a valid input, it runs through the while loop instead of ending the program. It should be true. The problem is fixed if I use an if statement instead of a while loop, but I want to learn to use while loops better.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1531290534, "post_id": 51278604, "comment_id": 89534688, "body": "What is your question?"}, {"owner": {"reputation": 11900, "user_id": 303347, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/508b6e7bd360b4096447ffe8545f4878?s=128&d=identicon&r=PG", "display_name": "Arunabh Das", "link": "https://stackoverflow.com/users/303347/arunabh-das"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1531290626, "post_id": 51278604, "comment_id": 89534729, "body": "Updated to add question."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531290803, "post_id": 51278604, "comment_id": 89534812, "body": "Maybe place explicit <code>()</code> around your calls and see if it persists? Possible interpreter getting confused? I don&#39;t personally see any syntax errors."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1531293093, "post_id": 51278604, "comment_id": 89536002, "body": "Whitespace is (sometimes) significant in Ruby. In particular, <code>m(a, b)</code> and <code>m (a, b)</code> are different: the parentheses in the first are method-calling parentheses, the second are interpreted as expression-grouping parentheses. And Ruby doesn&#39;t have a comma operator so <code>m (a, b)</code> is a syntax error. You want to say <code>resource(</code>, not <code>resource (</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "is_accepted": false, "score": 0, "last_activity_date": 1531291269, "creation_date": 1531291269, "answer_id": 51278802, "question_id": 51278604, "link": "https://stackoverflow.com/questions/51278604/application-rb-syntax-error-unexpected-expecting/51278802#51278802", "title": "application.rb syntax error, unexpected &#39;,&#39;, expecting &#39;)&#39;", "body": "<p>Syntax is wrong here</p>\n\n<p>Do this, tested.</p>\n\n<pre><code>config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins '*'\n    resource '*',\n      headers: :any,\n      methods: [:get, :patch, :put, :delete, :post, :options]\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1531294891, "post_id": 51278817, "comment_id": 89536954, "body": "Alternatively, keep the parentheses, but do not add a space before opening one."}], "tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": true, "score": 1, "last_activity_date": 1531291862, "last_edit_date": 1531291862, "creation_date": 1531291330, "answer_id": 51278817, "question_id": 51278604, "link": "https://stackoverflow.com/questions/51278604/application-rb-syntax-error-unexpected-expecting/51278817#51278817", "title": "application.rb syntax error, unexpected &#39;,&#39;, expecting &#39;)&#39;", "body": "<p>You are getting that error because you added parenthesis, remove the parenthesis and do not put new line <code>'*'</code> after <code>resource</code>  it should work:</p>\n\n<p>It should be like this:</p>\n\n<pre><code>config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins '*'\n    resource '*', headers: :any, methods: [:get, :patch, :put, :delete, :post, :options]\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11900, "user_id": 303347, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/508b6e7bd360b4096447ffe8545f4878?s=128&d=identicon&r=PG", "display_name": "Arunabh Das", "link": "https://stackoverflow.com/users/303347/arunabh-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1531294738, "creation_date": 1531294738, "answer_id": 51279766, "question_id": 51278604, "link": "https://stackoverflow.com/questions/51278604/application-rb-syntax-error-unexpected-expecting/51279766#51279766", "title": "application.rb syntax error, unexpected &#39;,&#39;, expecting &#39;)&#39;", "body": "<p>I fixed this by changing the resource line to make it a single-liner as follows :</p>\n\n<pre><code>resource '*', headers: :any, methods: [:get, :patch, :put, :delete, :post, :options]\n</code></pre>\n"}], "owner": {"reputation": 11900, "user_id": 303347, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/508b6e7bd360b4096447ffe8545f4878?s=128&d=identicon&r=PG", "display_name": "Arunabh Das", "link": "https://stackoverflow.com/users/303347/arunabh-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 51278817, "answer_count": 3, "score": -4, "last_activity_date": 1531294738, "creation_date": 1531290482, "last_edit_date": 1531290607, "question_id": 51278604, "link": "https://stackoverflow.com/questions/51278604/application-rb-syntax-error-unexpected-expecting", "title": "application.rb syntax error, unexpected &#39;,&#39;, expecting &#39;)&#39;", "body": "<p>I have a rails5 api-only mode app.</p>\n\n<p>My config/application.rb looks like this :</p>\n\n<p>Added application.rb</p>\n\n<pre><code>  module Myapi\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.1\n\n\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n\n    # Only loads a smaller set of middleware suitable for API only apps.\n    # Middleware like session, flash, cookies can be added back manually.\n    # Skip views, helpers and assets when generating a new resource.\n    config.api_only = true\n    config.middleware.insert_before 0, Rack::Cors do\n      allow do\n        origins '*'\n        resource (\n          '*', \n          headers: :any, \n          methods: [:get, :patch, :put, :delete, :post, :options]\n        )\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>But I'm getting the following error :</p>\n\n<pre><code>.gem/ruby/2.5.1/gems/railties-5.1.6/lib/rails/commands/server/server_command.rb:133:in `require': \n\n\nndflo-api/goforfloapi/config/application.rb:38: syntax error, unexpected ',', expecting ')' (SyntaxError)\n          '*', \n</code></pre>\n\n<p>What's wrong with the syntax of line 38 that is causing this syntax error?</p>\n\n<p>Line 38 looks like this :</p>\n\n<pre><code>'*', \n</code></pre>\n"}, {"tags": ["ruby", "fastlane"], "answers": [{"comments": [{"owner": {"reputation": 2199, "user_id": 4268574, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DIMLY.jpg?s=128&g=1", "display_name": "General Failure", "link": "https://stackoverflow.com/users/4268574/general-failure"}, "edited": false, "score": 0, "creation_date": 1531293661, "post_id": 51279137, "comment_id": 89536304, "body": "I updated code in question - now you can look that <code>platform</code> is defined. It contains in default <code>fastlane</code> script and I did not change it. Also error message does not contain anything about <code>all_build_train_numbers</code>."}, {"owner": {"reputation": 2199, "user_id": 4268574, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DIMLY.jpg?s=128&g=1", "display_name": "General Failure", "link": "https://stackoverflow.com/users/4268574/general-failure"}, "edited": false, "score": 0, "creation_date": 1531294018, "post_id": 51279137, "comment_id": 89536476, "body": "Hm... Strange but when I set <code>platform</code> value directly (<code>app.all_build_train_numbers(platform: :ios)</code>) script start working. Thanks, I will go to further learn fastlane."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 2199, "user_id": 4268574, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DIMLY.jpg?s=128&g=1", "display_name": "General Failure", "link": "https://stackoverflow.com/users/4268574/general-failure"}, "edited": false, "score": 2, "creation_date": 1531294158, "post_id": 51279137, "comment_id": 89536535, "body": "It&#39;s not &#39;defined&#39;, it&#39;s called with <code>:ios</code> argument. This doesn&#39;t mean you can refer its &#39;value&#39; (whatever it is) by using <code>platform</code> call."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1531292457, "creation_date": 1531292457, "answer_id": 51279137, "question_id": 51277973, "link": "https://stackoverflow.com/questions/51277973/wrong-number-of-arguments-given-0-expected-1-argumenterror-at-fastlane-scri/51279137#51279137", "title": "Wrong number of arguments (given 0, expected 1) (ArgumentError) at fastlane script", "body": "<p>Your error message says that you should pass argument to <code>platform</code> method call, which happens in this line:</p>\n\n<pre><code>train_numbers = app.all_build_train_numbers(platform: platform)\n</code></pre>\n"}], "owner": {"reputation": 2199, "user_id": 4268574, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DIMLY.jpg?s=128&g=1", "display_name": "General Failure", "link": "https://stackoverflow.com/users/4268574/general-failure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 51279137, "answer_count": 1, "score": 0, "last_activity_date": 1531293562, "creation_date": 1531287791, "last_edit_date": 1531293562, "question_id": 51277973, "link": "https://stackoverflow.com/questions/51277973/wrong-number-of-arguments-given-0-expected-1-argumenterror-at-fastlane-scri", "title": "Wrong number of arguments (given 0, expected 1) (ArgumentError) at fastlane script", "body": "<p>\nI did add method to my <a href=\"https://fastlane.tools\" rel=\"nofollow noreferrer\">fastlane</a> script:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># This is the minimum version number required.\n# Update this, if you use features of a newer version\nfastlane_version \"2.28.2\"\n\ndefault_platform :ios\n\nplatform :ios do\n\n    # some code was copied from fastlane/app_store_build_number\n    def get_last_app_version(app_identifier)\n\n        Spaceship::Tunes.login('some-user@icloud.com')\n        Spaceship::Tunes.select_team\n\n        app = Spaceship::Tunes::Application.find(app_identifier)\n\n        train_numbers = app.all_build_train_numbers(platform: platform)\n        self.order_versions(train_numbers).last\n    end\n\n    def self.order_versions(versions)\n        versions.map(&amp;:to_s).sort_by { |v| Gem::Version.new(v) }\n    end\n\n    # ....\n\nend\n</code></pre>\n\n<p>And calls it in my fastlane action:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>lane :get_ver do\n\n    get_certificates(\n        username: 'some-user@icloud.com',\n        team_name: 'Our team name'\n        )\n\n    app_version = get_last_app_version('com.some-app.ios')\n\n    # further actions\nend\n</code></pre>\n\n<p>When I runs <code>get_ver</code> action, I get error <code>wrong number of arguments (given 0, expected 1)</code> and can't understand what's wrong</p>\n\n<p>Method defined with one argument and calling has one argument too, what a reason?</p>\n\n<p>Also I did try to add argument name:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>get_last_app_version(app_identifier: 'com.some-app.ios')\n</code></pre>\n\n<p>remove brackets:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>get_last_app_version 'com.some-app.ios'\n</code></pre>\n\n<p>But result is same</p>\n\n<p>Full error output:</p>\n\n<pre>Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/fast_file.rb:112:in `platform': [!] wrong number of arguments (given 0, expected 1) (ArgumentError)\n        from Fastfile:22:in `get_last_app_version'\n        from Fastfile:58:in `block (2 levels) in parsing_binding'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/lane.rb:33:in `call'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/runner.rb:49:in `block in execute'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/runner.rb:45:in `chdir'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/runner.rb:45:in `execute'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/lane_manager.rb:56:in `cruise_lane'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/command_line_handler.rb:36:in `handle'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/commands_generator.rb:108:in `block (2 levels) in run'\n        from /Library/Ruby/Gems/2.3.0/gems/commander-fastlane-4.4.6/lib/commander/command.rb:178:in `call'\n        from /Library/Ruby/Gems/2.3.0/gems/commander-fastlane-4.4.6/lib/commander/command.rb:153:in `run'\n        from /Library/Ruby/Gems/2.3.0/gems/commander-fastlane-4.4.6/lib/commander/runner.rb:476:in `run_active_command'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane_core/lib/fastlane_core/ui/fastlane_runner.rb:74:in `run!'\n        from /Library/Ruby/Gems/2.3.0/gems/commander-fastlane-4.4.6/lib/commander/delegates.rb:15:in `run!'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/commands_generator.rb:333:in `run'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/commands_generator.rb:41:in `start'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/fastlane/lib/fastlane/cli_tools_distributor.rb:108:in `take_off'\n        from /Library/Ruby/Gems/2.3.0/gems/fastlane-2.99.0/bin/fastlane:20:in `'\n        from /usr/local/bin/fastlane:22:in `load'\n        from /usr/local/bin/fastlane:22:in `'\n</pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1531283457, "post_id": 51277263, "comment_id": 89532133, "body": "show your script"}, {"owner": {"reputation": 11328, "user_id": 37231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c52d89d43f28ca1195e6409a5280361?s=128&d=identicon&r=PG", "display_name": "jdigital", "link": "https://stackoverflow.com/users/37231/jdigital"}, "edited": false, "score": 3, "creation_date": 1531283487, "post_id": 51277263, "comment_id": 89532140, "body": "perhaps you&#39;re asking how to persist a variable so that it will be remembered between script invocations.  the usual approach is to read the value from a file (or database), increment it, and then write it back out."}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1531289230, "post_id": 51277374, "comment_id": 89534075, "body": "I think that in addition to what you proposed, the file holding the counter needs to be locked during processing, to avoid a race condition, if two instances of the script run in parallel."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1531289537, "post_id": 51277374, "comment_id": 89534200, "body": "Probably not a bad idea at all, but I have no clue what OP&#39;s intentions are, and am assuming by the nature of the question those types added complexities wouldn&#39;t be beneficial to understanding the basic question of reading/writing a persistent value. Most would agree that there are naturally better ways to do what I proposed, but I assume OP is learning the ropes, no need to make it more complex than it needs to be."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": true, "score": 1, "last_activity_date": 1531284007, "creation_date": 1531284007, "answer_id": 51277374, "question_id": 51277263, "link": "https://stackoverflow.com/questions/51277263/how-to-increment-variable-every-time-script-is-run-in-ruby/51277374#51277374", "title": "How to increment variable every time script is run in Ruby?", "body": "<p>Once Ruby closes, all the memory it contained is obviously lost, so the only way to make a value persist between runs is to store it externally. The obvious place is a file. </p>\n\n<p>There are many different ways to output data, and different ways of storing, such as Ruby's Marshal format, XML, simple text, and JSON just to name a few common ways.</p>\n\n<p>If all you need is a single simple number, then simple text will be the easiest to demonstrate.</p>\n\n<p>To store the number:</p>\n\n<pre><code>$global = 10\nFile.open('global.txt', 'wb') { |file| file.write($global.to_s) }\n</code></pre>\n\n<p>To load it:</p>\n\n<pre><code>File.open('global.txt', 'rb') { |file|  $global = file.read.to_i }\n</code></pre>\n\n<p>This code is untested, just demonstrates the simplest way to go about this, not necessarily the best. I will leave it up to you to increment that variable and re-save it each run.</p>\n\n<p>Reading could be simplified to not use a block, but I am maintaining similar style just for the example.</p>\n"}], "owner": {"reputation": 41, "user_id": 8994552, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fuz2c3oi-Wg/AAAAAAAAAAI/AAAAAAAAAPg/GlrkZXwhwTw/photo.jpg?sz=128", "display_name": "sajeesh krishnan", "link": "https://stackoverflow.com/users/8994552/sajeesh-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 51277374, "answer_count": 1, "score": -2, "last_activity_date": 1531284007, "creation_date": 1531283246, "question_id": 51277263, "link": "https://stackoverflow.com/questions/51277263/how-to-increment-variable-every-time-script-is-run-in-ruby", "title": "How to increment variable every time script is run in Ruby?", "body": "<p>I have a Ruby script that I want to increment a global variable every time it is run. Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "mysql2"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1531285958, "post_id": 51277007, "comment_id": 89532835, "body": "which command you used to install mysql. $brew install mysql. if you are using rails 4, i would suggest to use mysql2 gem with 0.4 series. specifically enter the version in your gemfile and then do bundle"}, {"owner": {"reputation": 140, "user_id": 2683883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/expf8.jpg?s=128&g=1", "display_name": "CFitz", "link": "https://stackoverflow.com/users/2683883/cfitz"}, "edited": false, "score": 0, "creation_date": 1553193949, "post_id": 51277007, "comment_id": 97304236, "body": "For what it&#39;s worth, I ran into this error when installing a NEW version of MySQL (8.0.15) on macOS (10.14.3) via Homebrew. Regardless, Korayem&#39;s solution below worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "edited": false, "score": 2, "creation_date": 1531364648, "post_id": 51277781, "comment_id": 89570800, "body": "Is the gem &quot;mysql&quot;, or &quot;mysql2&quot;?"}, {"owner": {"reputation": 2742, "user_id": 484689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/057611f189a711cc823f75e31477f3be?s=128&d=identicon&r=PG", "display_name": "genkilabs", "link": "https://stackoverflow.com/users/484689/genkilabs"}, "edited": false, "score": 0, "creation_date": 1538442539, "post_id": 51277781, "comment_id": 92135911, "body": "Ya, that should read <code>gem install mysql2 -- \u2014\u2013with-mysql-config=&#47;usr&#47;whatever</code>. confirmed on fresh install osx 10.13.6 Ruby 2.5.1."}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": true, "score": 8, "last_activity_date": 1572893792, "last_edit_date": 1572893792, "creation_date": 1531286612, "answer_id": 51277781, "question_id": 51277007, "link": "https://stackoverflow.com/questions/51277007/failure-to-install-old-mysql2-gem/51277781#51277781", "title": "Failure to install old mysql2 gem", "body": "<p>As per the description shared it seems like the mysql dependencies are unable to install.</p>\n\n<p>First we need to \u2018locate mysql_config\u2019 and then replace the path in the following command with where that file is.</p>\n\n<pre><code>gem install mysql2 -- --with-mysql-config=/usr/local/mysql/bin/mysql_config\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 557317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a826b46b1e737c3f40d8dd2a220943c6?s=128&d=identicon&r=PG", "display_name": "bxiong", "link": "https://stackoverflow.com/users/557317/bxiong"}, "edited": false, "score": 3, "creation_date": 1547215509, "post_id": 53961099, "comment_id": 95127135, "body": "This works for me on OSX 10.14.2 with MySQL 8.0.13 installed through brew. Wasted 3 hrs before finding this command. Thanks!"}, {"owner": {"reputation": 10619, "user_id": 80434, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/54f7e39b54c125b935a516ef080fcb94?s=128&d=identicon&r=PG", "display_name": "Korayem", "link": "https://stackoverflow.com/users/80434/korayem"}, "reply_to_user": {"reputation": 181, "user_id": 557317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a826b46b1e737c3f40d8dd2a220943c6?s=128&d=identicon&r=PG", "display_name": "bxiong", "link": "https://stackoverflow.com/users/557317/bxiong"}, "edited": false, "score": 3, "creation_date": 1547251524, "post_id": 53961099, "comment_id": 95142144, "body": "@bxiong same here! I wasted countless hours traversing the corners of the internet for a solution. I told myself I must get back to SO to share this to save other people&#39;s time. Glad it helped. Happy coding :)"}, {"owner": {"reputation": 140, "user_id": 2683883, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/expf8.jpg?s=128&g=1", "display_name": "CFitz", "link": "https://stackoverflow.com/users/2683883/cfitz"}, "edited": false, "score": 0, "creation_date": 1553193459, "post_id": 53961099, "comment_id": 97304029, "body": "Worked for me on macOS 10.14.3 with MySQL 8.0.15 installed through Homebrew (ultimately for a Rails project utilizing the mysql2 gem v0.5.2). Recommended if you are on recent macOS and MySQL versions and you also installed openssl via Homebrew. Otherwise, I don&#39;t believe this command would do much for you."}, {"owner": {"reputation": 79, "user_id": 1239542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5552b7b85c53c1634a91194d3ad5af?s=128&d=identicon&r=PG", "display_name": "ASabourin", "link": "https://stackoverflow.com/users/1239542/asabourin"}, "edited": false, "score": 5, "creation_date": 1554439709, "post_id": 53961099, "comment_id": 97760399, "body": "Another one to try: <code>gem install mysql2 -- --with-opt-dir=&quot;$(brew --prefix openssl)&quot;</code> worked for me when the compiler error was <code>ld: library not found for -lssl</code>"}, {"owner": {"reputation": 193, "user_id": 784584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369df16ccc7491e8b96c6f576ba91213?s=128&d=identicon&r=PG", "display_name": "Reidsy", "link": "https://stackoverflow.com/users/784584/reidsy"}, "reply_to_user": {"reputation": 79, "user_id": 1239542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5552b7b85c53c1634a91194d3ad5af?s=128&d=identicon&r=PG", "display_name": "ASabourin", "link": "https://stackoverflow.com/users/1239542/asabourin"}, "edited": false, "score": 0, "creation_date": 1554557315, "post_id": 53961099, "comment_id": 97800531, "body": "@ASabourin you should post that as an answer"}, {"owner": {"reputation": 814, "user_id": 2197413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6403eff8babdfd0b83b8008974206f97?s=128&d=identicon&r=PG", "display_name": "bryanus", "link": "https://stackoverflow.com/users/2197413/bryanus"}, "reply_to_user": {"reputation": 79, "user_id": 1239542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5552b7b85c53c1634a91194d3ad5af?s=128&d=identicon&r=PG", "display_name": "ASabourin", "link": "https://stackoverflow.com/users/1239542/asabourin"}, "edited": false, "score": 0, "creation_date": 1554929507, "post_id": 53961099, "comment_id": 97935225, "body": "@ASabourin Agreed! This was the solution for my <code>library not found for -lssl</code> error as well after updating XCode on Mojave"}], "tags": [], "owner": {"reputation": 10619, "user_id": 80434, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/54f7e39b54c125b935a516ef080fcb94?s=128&d=identicon&r=PG", "display_name": "Korayem", "link": "https://stackoverflow.com/users/80434/korayem"}, "is_accepted": false, "score": 48, "last_activity_date": 1546012474, "creation_date": 1546012474, "answer_id": 53961099, "question_id": 51277007, "link": "https://stackoverflow.com/questions/51277007/failure-to-install-old-mysql2-gem/53961099#53961099", "title": "Failure to install old mysql2 gem", "body": "<p>This fixed it for me</p>\n\n<pre><code>gem install mysql2 -v '0.3.21' -- --with-cflags=\\\"-I/usr/local/opt/openssl/include\\\" --with-ldflags=\\\"-L/usr/local/opt/openssl/lib\\\"\n</code></pre>\n\n<p>after installing openssl</p>\n\n<pre><code>brew install openssl\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5562895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1059632810724272/picture?type=large", "display_name": "Alec Hayden", "link": "https://stackoverflow.com/users/5562895/alec-hayden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4436, "favorite_count": 4, "accepted_answer_id": 51277781, "answer_count": 2, "score": 11, "last_activity_date": 1572893792, "creation_date": 1531281249, "question_id": 51277007, "link": "https://stackoverflow.com/questions/51277007/failure-to-install-old-mysql2-gem", "title": "Failure to install old mysql2 gem", "body": "<p>I am using Mac High Sierra. I am using Ruby 2.2.1 with RVM. I need to use mysql2 with this Ruby on Rails app. I do have mysql 5.7 installed. I do have xcode installed along with the command-line tools.</p>\n\n<p>I am simply trying to get this company app working on my local machine. I know that I am very close but I have one final error when I do bundle install I receive the following error when I get to the mysql2 gem:</p>\n\n<pre><code>Fetching mysql2 0.3.18\nInstalling mysql2 0.3.18 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/ahayden/.rvm/gems/ruby-2.2.1/gems/mysql2-0.3.18/ext/mysql2\n/Users/ahayden/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20180710-52515-2hjll8.rb extconf.rb\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\n-----\nUsing mysql_config at /usr/local/bin/mysql_config\n-----\nchecking for mysql.h... yes\nchecking for errmsg.h... yes\nchecking for mysqld_error.h... yes\n-----\nDon't know how to set rpath on your system, if MySQL libraries are not in path mysql2 may not load\n-----\n-----\nSetting libpath to /usr/local/Cellar/mysql-connector-c/6.1.11/lib\n-----\ncreating Makefile\n\ncurrent directory: /Users/ahayden/.rvm/gems/ruby-2.2.1/gems/mysql2-0.3.18/ext/mysql2\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/ahayden/.rvm/gems/ruby-2.2.1/gems/mysql2-0.3.18/ext/mysql2\nmake \"DESTDIR=\"\ncompiling infile.c\ncompiling client.c\nclient.c:359:33: warning: implicit conversion loses integer precision: 'long' to 'unsigned int' [-Wshorten-64-to-32]\n        elapsed_time = end_time - start_time;\n                     ~ ~~~~~~~~~^~~~~~~~~~~~\nclient.c:1163:56: warning: implicit conversion loses integer precision: 'size_t' (aka 'unsigned long') to 'unsigned int' [-Wshorten-64-to-32]\n  mysql2rb = mysql2_mysql_enc_name_to_rb(charset_name, charset_name_len);\n             ~~~~~~~~~~~~~~~~~~~~~~~~~~~               ^~~~~~~~~~~~~~~~\n2 warnings generated.\ncompiling mysql2_ext.c\ncompiling result.c\nresult.c:186:17: warning: comparison of integers of different signs: 'int' and 'unsigned long' [-Wsign-compare]\n  for (i = 0; i &lt; (len - 1); i++) {\n              ~ ^  ~~~~~~~\n1 warning generated.\nlinking shared-object mysql2/mysql2.bundle\nld: library not found for -l-lpthread\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [mysql2.bundle] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/ahayden/.rvm/gems/ruby-2.2.1/gems/mysql2-0.3.18 for inspection.\nResults logged to /Users/ahayden/.rvm/gems/ruby-2.2.1/extensions/x86_64-darwin-17/2.2.0/mysql2-0.3.18/gem_make.out\n\nAn error occurred while installing mysql2 (0.3.18), and Bundler cannot continue.\nMake sure that `gem install mysql2 -v '0.3.18'` succeeds before bundling.\n\nIn Gemfile:\n  mysql2\n</code></pre>\n\n<p>I've tried just installing mysql2 without the specific gem version and it works, but it did not fix my problem.  It seems to boil down to the bottom of the traceback where it cannot find library <code>-l-lpthread</code>.  Please help, I've been trying to do this all day.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "comments": [{"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 2, "creation_date": 1531281573, "post_id": 51276991, "comment_id": 89531649, "body": "you can look into <a href=\"https://github.com/travisjeffery/timecop\" rel=\"nofollow noreferrer\">timecop</a> gem"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 2, "creation_date": 1531294548, "post_id": 51276991, "comment_id": 89536741, "body": "Change fixtures to factories and create users with needed attributes easily. Like <code>let(:old_user) { create :user, created_at: Time.now - 3.years }</code>"}], "owner": {"reputation": 897, "user_id": 3504731, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fFyHM.jpg?s=128&g=1", "display_name": "Ccyan", "link": "https://stackoverflow.com/users/3504731/ccyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531281093, "creation_date": 1531281093, "question_id": 51276991, "link": "https://stackoverflow.com/questions/51276991/dynamically-adjust-fixture-value-in-ruby-tests", "title": "Dynamically adjust fixture value in ruby tests", "body": "<p>I'm testing my Rails application and a specific part of the project looks at how long ago a user was created. If I write a fixture for this, the only way I can think of right now is to define multiple users with different <code>created_at</code> values.</p>\n\n<p>Is there a way to dynamically define the <code>created_at</code> value per test? I'd like to just define one user and each test will pass in a different value for <code>created_at</code>. If this is not possible, is there a better way I can test this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 2, "creation_date": 1531281098, "post_id": 51276923, "comment_id": 89531540, "body": "Don&#39;t use <code>assert_equal</code> on an entire email body. Use <code>assert_match</code> to spot-check the parts that might be fragile, such as the current year."}, {"owner": {"reputation": 897, "user_id": 3504731, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fFyHM.jpg?s=128&g=1", "display_name": "Ccyan", "link": "https://stackoverflow.com/users/3504731/ccyan"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1531281340, "post_id": 51276923, "comment_id": 89531597, "body": "I&#39;ll think about your approach. I would probably need multiple <code>assert_match</code> to test this? If you don&#39;t mind, can you give me an example of how you would use <code>assert_match</code> to test this?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1531302057, "post_id": 51276923, "comment_id": 89541678, "body": "What is your question?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1531310658, "post_id": 51276923, "comment_id": 89547207, "body": "There&#39;s nothing wrong with using multiple <code>assert_match</code> statements - it&#39;ll make it clear, readable and easy to change in future."}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 3504731, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fFyHM.jpg?s=128&g=1", "display_name": "Ccyan", "link": "https://stackoverflow.com/users/3504731/ccyan"}, "edited": false, "score": 0, "creation_date": 1531324283, "post_id": 51283868, "comment_id": 89557150, "body": "Do you mind explaining the <code>nil, &quot;%&quot;</code> part? I&#39;m not sure what those would do"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 897, "user_id": 3504731, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fFyHM.jpg?s=128&g=1", "display_name": "Ccyan", "link": "https://stackoverflow.com/users/3504731/ccyan"}, "edited": false, "score": 1, "creation_date": 1531325005, "post_id": 51283868, "comment_id": 89557574, "body": "nil - safe_mode, % - enables Ruby code processing for lines beginning with %. <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/erb/rdoc/ERB.html#method-c-new\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.1/libdoc/erb/rdoc/ERB.html#method-c-&zwnj;&#8203;new</a>"}, {"owner": {"reputation": 897, "user_id": 3504731, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fFyHM.jpg?s=128&g=1", "display_name": "Ccyan", "link": "https://stackoverflow.com/users/3504731/ccyan"}, "edited": false, "score": 0, "creation_date": 1531326031, "post_id": 51283868, "comment_id": 89558071, "body": "Thank you! I never knew you could manually execute ERB in text files like that!"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": true, "score": 3, "last_activity_date": 1531306991, "creation_date": 1531306991, "answer_id": 51283868, "question_id": 51276923, "link": "https://stackoverflow.com/questions/51276923/embedded-ruby-in-text-fixture/51283868#51283868", "title": "Embedded Ruby in text fixture", "body": "<p>When you use rails fixtures you can mix ERB in with your YAML fixtures(don't need to add \"erb\" extension to the filename):</p>\n\n<pre><code># fixtere_name.yml\none:\n  column: &lt;%= DateTime.now %&gt;\n</code></pre>\n\n<p>When you use own fixtures or similar files you can manually execute ruby parts. For example:</p>\n\n<pre><code># fixtere.txt\nsome text &lt;%= DateTime.now.year %&gt;\n\n# load this fixture\nfixture = ERB.new File.read(\"path/to/fixture.txt\"), nil, \"%\"\nfixture.result(binding) # =&gt; \"some text 2018\\n\"\n</code></pre>\n"}], "owner": {"reputation": 897, "user_id": 3504731, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fFyHM.jpg?s=128&g=1", "display_name": "Ccyan", "link": "https://stackoverflow.com/users/3504731/ccyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 51283868, "answer_count": 1, "score": 1, "last_activity_date": 1531306991, "creation_date": 1531280629, "question_id": 51276923, "link": "https://stackoverflow.com/questions/51276923/embedded-ruby-in-text-fixture", "title": "Embedded Ruby in text fixture", "body": "<p>I'm testing the text part of an email in my Rails application and I have a text fixture to test against. The fixture is not a <code>.yml</code> file since it's just text to test against. However, the email contains the current year (like 2010-2018) and I'm trying to see if I can use erb in that text fixture so I can test my email without having to update it every year.</p>\n\n<p>This is how I'm currently using the textfile:</p>\n\n<p>textfile</p>\n\n<pre><code>...\nCopyright 2006-2018\n</code></pre>\n\n<p>test file:</p>\n\n<pre><code>assert_equal read_fixture('textfile').join, email.text_part.body.to_s\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1531289528, "post_id": 51275782, "comment_id": 89534193, "body": "You need a precise definition of &quot;feature&quot; in your opening sentence. Presumably this includes the introduction of new modules and methods, but what about changes to the functionality of methods (e.g., giving <code>Emerable#min</code> an optional argument in v2.2 or the overhaul of <code>Refinements</code>in v2.1), deprecating objects (e.g, <code>Fixnum</code> in v2.4), changing properties of objects (e.g., maintaining key insertion order for hashes in v1.9.1), removing bugs, changing explanations of exceptions, making methods more efficient and so on?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531289800, "post_id": 51275782, "comment_id": 89534325, "body": "No, I intend to keep it defined exactly as it is, because that is exactly how I mean it. I mean a way to know when any &quot;feature&quot; is added, removed, altered... anything. This included methods, classes, syntax changes. I know how to find these things, but it is not as simple as I believe it should be. I intend for the word &quot;feature&quot; to be broad and encompass nearly anything, do not want it to be more specific."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531292668, "post_id": 51275782, "comment_id": 89535774, "body": "Perhaps I misunderstood the question. I thought you wanted to effectively construct a method <code>m</code> such that <code>m(f)</code> returns the version of (MRI, say) Ruby in which feature <code>f</code> appeared. That would obviously require an ambiguous way of specifying features. That could be done for, say, instance methods (e.g., <code>Array#sum</code>) but would would be problematic for &quot;features&quot; in general. For example, how would one identify a bug, much less determine when it was fixed? I&#39;m now thinking you are instead just asking for suggestions on how certain features might be traced to a particular Ruby version. (cont.)"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531292890, "post_id": 51275782, "comment_id": 89535894, "body": "Yes, exactly, not actual getting version information from within Ruby code, but a more detailed or easier to way to track changes in the language other than burrowing through tons of history files and news on each release. I was hoping there existed a more comprehensive and user-friendly way of tracking changes to the actual Ruby language. It is quite possible nothing exists, and this is all just hopes and dreams, lol."}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531275700, "post_id": 51276309, "comment_id": 89530505, "body": "Yeah, the closet I have gotten is searching feature, and browsing the &quot;NEWS&quot; articles on GitHub where it mentions it... Still not ideal."}], "tags": [], "owner": {"reputation": 21499, "user_id": 19839, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/971cfac6afb23c0f0fd3623284a02a81?s=128&d=identicon&r=PG", "display_name": "csexton", "link": "https://stackoverflow.com/users/19839/csexton"}, "is_accepted": false, "score": 1, "last_activity_date": 1531275457, "creation_date": 1531275457, "answer_id": 51276309, "question_id": 51275782, "link": "https://stackoverflow.com/questions/51275782/getting-version-of-ruby-when-a-feature-was-added/51276309#51276309", "title": "Getting version of Ruby when a feature was added", "body": "<p>I was just doing this, unfortunately my answer is what you were <em>hoping</em> to avoid.</p>\n\n<p>I was looking through history, but able to use GitHub's handy Blame feature to help track down when a specific line was edited. With this I could open the file in question click \"Blame\" and see when it was last edited/created.</p>\n\n<p>Was a great way to track down when <code>Exception2MessageMapper</code> was added to the <a href=\"https://github.com/ruby/ruby/tree/trunk/lib\" rel=\"nofollow noreferrer\">standard library</a>. It was 17 years ago, as part of v1.4.0:</p>\n\n<p><a href=\"https://github.com/ruby/ruby/blame/trunk/lib/e2mmap.rb#L55\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blame/trunk/lib/e2mmap.rb#L55</a></p>\n"}], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531289895, "creation_date": 1531270498, "last_edit_date": 1531289895, "question_id": 51275782, "link": "https://stackoverflow.com/questions/51275782/getting-version-of-ruby-when-a-feature-was-added", "title": "Getting version of Ruby when a feature was added", "body": "<p>Is anyone aware of how to retrieve the exact version (major, minor, patch) that a specific feature was added/removed/altered to the Ruby language? </p>\n\n<p>Obviously one could comb through the history to find out, which is not ideal, and can be cumbersome to navigate. Was curious if anyone might know a better way to do it, as the documentation doesn't state when a method, class, etc. was added. </p>\n\n<p>When documenting my own gems with YARD, it is easy to just add a <code>@since</code> tag to clearly show when something was added, but the Ruby API doesn't seem to have any such mechanism in its own documentation. </p>\n\n<p>When writing gems, it is obviously handy to know such details when managing dependencies, and I was hoping there was a simpler solution, such as simply typing a method name into a website, and seeing the exact version it was added.</p>\n\n<p>To clarify, basically a \"changelog\" for any item. For example, type in method name, see log of when it was added, changed, deprecated, removed, etc.</p>\n\n<p>A prime example would be something akin to .NET Core's <a href=\"https://packagesearch.azurewebsites.net\" rel=\"nofollow noreferrer\">Reverse Package Search</a>. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531271458, "post_id": 51275772, "comment_id": 89529636, "body": "If first splitting on word boundaries, is the <code>^</code> anchor even necessary?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1531289391, "post_id": 51275772, "comment_id": 89534140, "body": "@RubyG : You usage of <code>^</code> means that the pattern has to match the start of the scipt."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1531295363, "post_id": 51275772, "comment_id": 89537244, "body": "@user1934428: No, <code>^</code> means &quot;start-of-line&quot;, not &quot;start-of-script&quot; (whatever that means). Are you thinking of <code>\\A</code> which means &quot;start-of-string&quot;?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1531311446, "post_id": 51275772, "comment_id": 89547790, "body": "I wanted to say &quot;start of string&quot; (it was a typo). You are also right that start-of-line is correct. I&#39;m too sloppy with this, because I rarely grep accross line boundaries."}], "answers": [{"comments": [{"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1531309378, "post_id": 51275831, "comment_id": 89546388, "body": "If you use <code>&#47;[^[:word:]]&#47;</code> (or <code>&#47;[^[:alpha:]]&#47;</code> to exclude digits and underscores) it will even work with accented letters. I&#39;d also use <code>scan(&#47;[[:word:]]+&#47;)</code> to get a list of words instead of splitting on space and removing non-word characters manually."}, {"owner": {"reputation": 13, "user_id": 8529611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e279dd8e89d9ab16577d89391ac371?s=128&d=identicon&r=PG&f=1", "display_name": "RubyG", "link": "https://stackoverflow.com/users/8529611/rubyg"}, "edited": false, "score": 0, "creation_date": 1585159939, "post_id": 51275831, "comment_id": 107668321, "body": "That&#39;s helpful. Thanks a bunch!"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": true, "score": 3, "last_activity_date": 1531271039, "creation_date": 1531271039, "answer_id": 51275831, "question_id": 51275772, "link": "https://stackoverflow.com/questions/51275772/weird-gsub-function/51275831#51275831", "title": "Weird gsub function", "body": "<p>This should work,</p>\n\n<pre><code>word.gsub(/[^a-z]/i, '')\n</code></pre>\n\n<p>you just got the <code>^</code> (caret) syntax in wrong place</p>\n"}], "owner": {"reputation": 13, "user_id": 8529611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e279dd8e89d9ab16577d89391ac371?s=128&d=identicon&r=PG&f=1", "display_name": "RubyG", "link": "https://stackoverflow.com/users/8529611/rubyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 51275831, "answer_count": 1, "score": 0, "last_activity_date": 1531271114, "creation_date": 1531270417, "question_id": 51275772, "link": "https://stackoverflow.com/questions/51275772/weird-gsub-function", "title": "Weird gsub function", "body": "<p>I have the following code:</p>\n\n<pre><code>def word_sizes(sentence)\n  sizes = Hash.new(0)\n  sentence.split(' ').each do |word|\n   p \"#{word} =&gt; #{word.gsub(/^[a-z]/i, '')}\"\n  end\nend\n\nword_sizes(\"Four score and seven.\")\n</code></pre>\n\n<p>The results I'm expecting is that the <code>gsub</code> function deletes all the non-alphabetical characters in each word. However, my output looks like this:</p>\n\n<pre><code>\"Four =&gt; our\"\n\"score =&gt; core\"\n\"and =&gt; nd\"\n\"seven. =&gt; even.\"\n</code></pre>\n\n<p>It seems like <code>gsub</code> only takes out the first character of each word. This is so confusing. Any ideas why?</p>\n"}, {"tags": ["ruby", "regex", "sed"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 6, "creation_date": 1531260491, "post_id": 51274477, "comment_id": 89527311, "body": "You could also also Ruby itself for its version number with <code>ruby -e &quot;puts RUBY_VERSION&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 5290011, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-chNcM5sNnmU/AAAAAAAAAAI/AAAAAAAAAIA/K0oQdb41DQc/photo.jpg?sz=128", "display_name": "Nicholas Adamou", "link": "https://stackoverflow.com/users/5290011/nicholas-adamou"}, "edited": false, "score": 0, "creation_date": 1531261315, "post_id": 51274549, "comment_id": 89527549, "body": "What does <code>awk -F</code> specify?"}, {"owner": {"reputation": 3731, "user_id": 3438276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d936bbca4445305c07f2292689d271c1?s=128&d=identicon&r=PG", "display_name": "vikas027", "link": "https://stackoverflow.com/users/3438276/vikas027"}, "reply_to_user": {"reputation": 591, "user_id": 5290011, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-chNcM5sNnmU/AAAAAAAAAAI/AAAAAAAAAIA/K0oQdb41DQc/photo.jpg?sz=128", "display_name": "Nicholas Adamou", "link": "https://stackoverflow.com/users/5290011/nicholas-adamou"}, "edited": false, "score": 0, "creation_date": 1531261437, "post_id": 51274549, "comment_id": 89527569, "body": "<code>awk -F</code> acts as a delimiter separator, in this case it was <code>p</code>"}, {"owner": {"reputation": 20407, "user_id": 1017941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yocPw.jpg?s=128&g=1", "display_name": "Hauleth", "link": "https://stackoverflow.com/users/1017941/hauleth"}, "edited": false, "score": 0, "creation_date": 1531312296, "post_id": 51274549, "comment_id": 89548427, "body": "Why call <code>awk</code> twice when you can do it in one go: <code>awk &#39;{ split($2, vsn, &quot;p&quot;); print vsn[1] }&#39;</code>. If you want patch version then it is stored in <code>vsn[2]</code>."}], "tags": [], "owner": {"reputation": 3731, "user_id": 3438276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d936bbca4445305c07f2292689d271c1?s=128&d=identicon&r=PG", "display_name": "vikas027", "link": "https://stackoverflow.com/users/3438276/vikas027"}, "is_accepted": false, "score": 1, "last_activity_date": 1531260438, "creation_date": 1531260438, "answer_id": 51274549, "question_id": 51274477, "link": "https://stackoverflow.com/questions/51274477/how-to-format-a-ruby-version-string-using-sed-and-regular-expressions/51274549#51274549", "title": "How to format a ruby version string using sed and regular expressions?", "body": "<p>As per my understanding, you are looking to have <code>2.33</code> in your final result. If yes, this is what you can do.</p>\n\n<pre><code>$ ruby -v | awk '{ print $2 }' | awk -F'p' '{ print $1 }'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "is_accepted": true, "score": 1, "last_activity_date": 1531311144, "last_edit_date": 1531311144, "creation_date": 1531310690, "answer_id": 51285042, "question_id": 51274477, "link": "https://stackoverflow.com/questions/51274477/how-to-format-a-ruby-version-string-using-sed-and-regular-expressions/51285042#51285042", "title": "How to format a ruby version string using sed and regular expressions?", "body": "<p>You can use grep for this:</p>\n\n<pre><code>$ ruby -v | grep -Po '\\d+(\\.\\d+){2}'\n2.5.1\n</code></pre>\n\n<p>Or just use ruby itself:</p>\n\n<pre><code>$ ruby -e 'puts RUBY_VERSION'\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 5290011, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-chNcM5sNnmU/AAAAAAAAAAI/AAAAAAAAAIA/K0oQdb41DQc/photo.jpg?sz=128", "display_name": "Nicholas Adamou", "link": "https://stackoverflow.com/users/5290011/nicholas-adamou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 51285042, "answer_count": 2, "score": 0, "last_activity_date": 1531311144, "creation_date": 1531259961, "question_id": 51274477, "link": "https://stackoverflow.com/questions/51274477/how-to-format-a-ruby-version-string-using-sed-and-regular-expressions", "title": "How to format a ruby version string using sed and regular expressions?", "body": "<h2>Background</h2>\n\n<p>I would like to format the string returned by <code>ruby -v</code>.</p>\n\n<h2>Code</h2>\n\n<pre><code>pattern=\"\" # what do I put in here?\nruby -v | cut -d \" \" -f2 | sed 's/$pattern/g'\n</code></pre>\n\n<h2>Output</h2>\n\n<p><code>ruby -v</code> => <code>ruby 2.3.3p222 (2016-11-21 revision 56859) [universal.x86_64-darwin17]</code></p>\n\n<p><code>ruby -v | cut -d \" \" -f2</code> => <code>2.3.3p222</code></p>\n\n<h2>Expected</h2>\n\n<p>What I want to be outputted by piping <code>ruby -v | cut -d \" \" -f2</code> to <code>sed</code>: <code>2.3.3</code>.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1531266966, "post_id": 51274453, "comment_id": 89528768, "body": "Divide by 5, add 1 and multiply by 5? For negatives don&#39;t add the 1."}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1531260805, "post_id": 51274515, "comment_id": 89527398, "body": "Should probably use <code>.ceil</code> instead of round, and multiply by <code>5</code>, not <code>5.0</code>. There is no indication OP wants a float."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1531261652, "post_id": 51274515, "comment_id": 89527638, "body": "Edit your post, and add your version with <code>.ceil</code> and your error message."}, {"owner": {"reputation": 41, "user_id": 10032438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KZ8QxHfWeeg/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3Ojx5Pl_W53Qv73kVEz2f7GUF_-g/mo/photo.jpg?sz=128", "display_name": "PKP 007", "link": "https://stackoverflow.com/users/10032438/pkp-007"}, "edited": false, "score": 0, "creation_date": 1531881322, "post_id": 51274515, "comment_id": 89757297, "body": "Perfect, I&#39;ll have a look"}, {"owner": {"reputation": 142412, "user_id": 165673, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e43e620f96a26bf6ee7fa70750c0302a?s=128&d=identicon&r=PG", "display_name": "Yarin", "link": "https://stackoverflow.com/users/165673/yarin"}, "edited": false, "score": 0, "creation_date": 1547735263, "post_id": 51274515, "comment_id": 95300599, "body": "This is wrong. OP wanted 21 -&gt; 25, this gives 21 -&gt; 20.0"}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 2, "last_activity_date": 1531260161, "creation_date": 1531260161, "answer_id": 51274515, "question_id": 51274453, "link": "https://stackoverflow.com/questions/51274453/ruby-round-integer-to-nearest-multiple-of-5/51274515#51274515", "title": "ruby round integer to nearest multiple of 5", "body": "<p>Build your method out of this expression: <code>(44 / 5.0).round(0) * 5.0</code>. It returns <code>45.0</code> for me.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 12, "last_activity_date": 1595961247, "last_edit_date": 1595961247, "creation_date": 1531270083, "answer_id": 51275735, "question_id": 51274453, "link": "https://stackoverflow.com/questions/51274453/ruby-round-integer-to-nearest-multiple-of-5/51275735#51275735", "title": "ruby round integer to nearest multiple of 5", "body": "<p>One could write <code>(16/5.0).ceil * 5 #=&gt; 20</code> but round-off is a problem for large integers:</p>\n<pre><code>(1000000000000001/5.0).ceil * 5\n  #=&gt; 1000000000000005   # correct\n(10000000000000001/5.0).ceil * 5\n  #=&gt; 10000000000000000  # incorrect\n</code></pre>\n<p>For that reason I'd prefer to stick with integer operations.</p>\n<pre><code>def round_up(n, increment)\n  increment * (( n + increment - 1) / increment)\nend\n\n(-10..15).each { |n| puts &quot;%s=&gt;%s&quot; % [n, round_up(n,5)] }\n\n-10=&gt;-10\n -9=&gt; -5  -8=&gt;-5  -7=&gt;-5  -6=&gt;-5  -5=&gt;-5\n -4=&gt;  0  -3=&gt; 0  -2=&gt; 0  -1=&gt; 0   0=&gt; 0\n  1=&gt;  5   2=&gt; 5   3=&gt; 5   4=&gt; 5   5=&gt; 5\n  6=&gt; 10   7=&gt;10   8=&gt;10   9=&gt;10  10=&gt;10\n 11=&gt; 15  12=&gt;15  13=&gt;15  14=&gt;15  15=&gt;15\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 10032438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KZ8QxHfWeeg/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3Ojx5Pl_W53Qv73kVEz2f7GUF_-g/mo/photo.jpg?sz=128", "display_name": "PKP 007", "link": "https://stackoverflow.com/users/10032438/pkp-007"}, "edited": false, "score": 0, "creation_date": 1531882131, "post_id": 51292434, "comment_id": 89757478, "body": "Oh wow, I didn&#39;t even think about using rounded + 5, it makes it easier for sure"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 8, "last_activity_date": 1531341014, "last_edit_date": 1531341014, "creation_date": 1531335241, "answer_id": 51292434, "question_id": 51274453, "link": "https://stackoverflow.com/questions/51274453/ruby-round-integer-to-nearest-multiple-of-5/51292434#51292434", "title": "ruby round integer to nearest multiple of 5", "body": "<p>This is the simplest solution I can come up with (and very much like your implementation) </p>\n\n<pre><code>def up_to_nearest_5(n)\n  return n if n % 5 == 0\n  rounded = n.round(-1)\n  rounded &gt; n ? rounded : rounded + 5\nend\n</code></pre>\n\n<p>When <code>Integer#round</code> is given a negative number it rounds the nth (<code>1</code> in this case) least significant digit as if it were the decimal value. eg</p>\n\n<pre><code>1254.round(-1) \n#=&gt; 1250\n1254.round(-2)\n#=&gt; 1300\n</code></pre>\n\n<p>So we just see if the number is a factor of 5 if so return it otherwise, if it rounded up then return the rounded number or if it rounded down return the rounded number + 5. </p>\n\n<p>However you can also use the <code>BigDecimal</code> standard library for precision math such that the method would look like </p>\n\n<pre><code>require 'bigdecimal'\ndef up_to_nearest_5(n)\n  BigDecimal(n)./(5).ceil * 5\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11629439, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFjceZMbBzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcjqhi027DApE1ysT4AZj9vfZNS9g/mo/photo.jpg?sz=128", "display_name": "ReallyImOneOh", "link": "https://stackoverflow.com/users/11629439/reallyimoneoh"}, "is_accepted": false, "score": 0, "last_activity_date": 1596656411, "last_edit_date": 1596656411, "creation_date": 1596656059, "answer_id": 63272370, "question_id": 51274453, "link": "https://stackoverflow.com/questions/51274453/ruby-round-integer-to-nearest-multiple-of-5/63272370#63272370", "title": "ruby round integer to nearest multiple of 5", "body": "<p>Here's my code for solving this:</p>\n<pre><code>def to_nearest_5(int)\n    until -int%5 == 0\n        int += 1\n    end\n    return int\nend\n</code></pre>\n<p>For an array of integers:</p>\n<pre><code>def to_nearest_5(arr)\n    arr.each do |int|\n        until -int%5 == 0\n            int += 1\n        end\n        return int\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "is_accepted": false, "score": 0, "last_activity_date": 1613049280, "creation_date": 1613049280, "answer_id": 66155494, "question_id": 51274453, "link": "https://stackoverflow.com/questions/51274453/ruby-round-integer-to-nearest-multiple-of-5/66155494#66155494", "title": "ruby round integer to nearest multiple of 5", "body": "<p>There are a few correct solutions already posted, but here's mine which does no multiplication/division - only one modulo (should in theory run faster, but that wasn't my goal):</p>\n<pre class=\"lang-rb prettyprint-override\"><code>def round_up_to_multiple_of(n, m)\n  (n - 1) + m - (n - 1) % m\nend\n\np [0, 2, 3, 12, 21, 30, -2, -5].map { |n| [n, round_up_to_multiple_of(n, 5)] }\n#=&gt; [[0, 0], [2, 5], [3, 5], [12, 15], [21, 25], [30, 30], [-2, 0], [-5, -5]]\n</code></pre>\n<p>Here's how to round down to the nearest multiple (which is what I was trying to do and found this question):</p>\n<pre class=\"lang-rb prettyprint-override\"><code>def round_down_to_multiple_of(n, m)\n  (n + 1) - (n + 1) % m\nend\n\np [0, 2, 3, 12, 21, 30, -2, -5].map { |n| [n, round_down_to_multiple_of(n, 5)] }\n#=&gt; [[0, 0], [2, 0], [3, 0], [12, 10], [21, 20], [30, 30], [-2, -5], [-5, -5]]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10032438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KZ8QxHfWeeg/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3Ojx5Pl_W53Qv73kVEz2f7GUF_-g/mo/photo.jpg?sz=128", "display_name": "PKP 007", "link": "https://stackoverflow.com/users/10032438/pkp-007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4067, "favorite_count": 0, "answer_count": 5, "score": 4, "last_activity_date": 1613049280, "creation_date": 1531259872, "question_id": 51274453, "link": "https://stackoverflow.com/questions/51274453/ruby-round-integer-to-nearest-multiple-of-5", "title": "ruby round integer to nearest multiple of 5", "body": "<p>I want to take an integer and round it up to the next multiple of 5. Like such:</p>\n\n<pre><code>input:    output:\n0    -&gt;   0\n2    -&gt;   5\n3    -&gt;   5\n12   -&gt;   15\n21   -&gt;   25\n30   -&gt;   30\n-2   -&gt;   0\n-5   -&gt;   -5\netc.\n</code></pre>\n\n<p>My function below accounts for the numbers that are divisible by 10, but I have no idea how to do it for the numbers divisible by 5. This is what I have so far;</p>\n\n<pre><code>    def round_to_next_5(n)\n      if n % 5 == 0\n        return n\n      else \n        return n.round(-1)\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "automation", "rubygems", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8593289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggah3.jpg?s=128&g=1", "display_name": "Utsav", "link": "https://stackoverflow.com/users/8593289/utsav"}, "is_accepted": false, "score": 0, "last_activity_date": 1561054524, "creation_date": 1561054524, "answer_id": 56691750, "question_id": 51273843, "link": "https://stackoverflow.com/questions/51273843/ruby-cucumber-framework-fig-newton-gem-not-redirecting-to-environment-url-when/56691750#56691750", "title": "Ruby Cucumber Framework - Fig Newton Gem not redirecting to environment url when running", "body": "<p>You need to load the qa.yml file. In your <code>env.rb</code> insert this line of code -  </p>\n\n<p><code>FigNewton.load('qa.yml')</code></p>\n"}], "owner": {"reputation": 21, "user_id": 2262944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351c1f877c8173113bb927205b07838b?s=128&d=identicon&r=PG", "display_name": "sam2013", "link": "https://stackoverflow.com/users/2262944/sam2013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561054524, "creation_date": 1531256533, "question_id": 51273843, "link": "https://stackoverflow.com/questions/51273843/ruby-cucumber-framework-fig-newton-gem-not-redirecting-to-environment-url-when", "title": "Ruby Cucumber Framework - Fig Newton Gem not redirecting to environment url when running", "body": "<p>Trying to parameterize environments for the Ruby Cucumber framework. When I run the test, the browser appears but does not redirect to the url in the yml file. This is what I've done so far:</p>\n\n<ul>\n<li>I put fig_newton in the gemfile and ran a bundle install</li>\n<li>In the config directory, I have an environments directory containing a qa.yml file. </li>\n<li>In the qa.yml file I have something like base_url: www.google.com</li>\n<li><p>In the cucumber.yml file I have qa: FIG_NEWTON_FILE=qa.yml --no-source --color --format pretty</p></li>\n<li><p>On my page class, I have something like:</p>\n\n<pre><code>class LoginPage\ninclude PageObject\ninclude FigNewton\n\npage_url FigNewton.base_url\n</code></pre></li>\n<li><p>In my step definitions I have:\n    Given(\"I am on the login page\") do\n    visit_page(LoginPage)\n    end</p></li>\n<li>My runner options have (I'm using Rubymine IDE): --color -p qa</li>\n</ul>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1531257269, "post_id": 51273673, "comment_id": 89526140, "body": "Where do those other fields come from? It&#39;s always best if you at least try to solve this, and even better, that you express it all in Ruby code as much as possible."}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1531268785, "last_edit_date": 1531268785, "creation_date": 1531258349, "answer_id": 51274192, "question_id": 51273673, "link": "https://stackoverflow.com/questions/51273673/merge-two-hash-as-sub-hashes-in-ruby/51274192#51274192", "title": "Merge two hash as sub-hashes in ruby", "body": "<p>You can use <a href=\"https://ruby-doc.org/core/Hash.html#method-i-slice\" rel=\"nofollow noreferrer\"><code>Hash#slice</code></a> and <a href=\"https://ruby-doc.org/core/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a> to get what you want:</p>\n\n<pre><code>hash = {\n  :url=&gt;\"http://localhost:something\",\n  :platformName=&gt;\"Windows\",\n  :foodName=&gt;\"taco\",\n  :Version=&gt;\"1\",\n  :browser=&gt;\"Edge\"\n}\n\noutput = hash.slice(:url).merge(SubHash: hash)\n# =&gt; {\n#   :url=&gt;\"http://localhost:something\",\n#   :SubHash=&gt;{\n#     :url=&gt;\"http://localhost:something\",\n#     :platformName=&gt;\"Windows\",\n#     :foodName=&gt;\"taco\",\n#     :Version=&gt;\"1\",\n#     :browser=&gt;\"Edge\"\n#   }\n# }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7111330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WzwDHmb_JGo/AAAAAAAAAAI/AAAAAAAAAC4/PdIFHKN7mzE/photo.jpg?sz=128", "display_name": "Daniel Dobrick", "link": "https://stackoverflow.com/users/7111330/daniel-dobrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1531270198, "creation_date": 1531270198, "answer_id": 51275752, "question_id": 51273673, "link": "https://stackoverflow.com/questions/51273673/merge-two-hash-as-sub-hashes-in-ruby/51275752#51275752", "title": "Merge two hash as sub-hashes in ruby", "body": "<p>Why not simply do </p>\n\n<pre><code>hash_a = { foo: bar }\nhash_b = { a: 1, b: 2, c: 3 }\n\nhash_a[:sub_hash] = hash_b\n</code></pre>\n\n<p>which will result in </p>\n\n<pre><code>{\n  foo: bar\n  sub_hash:\n    { a: 1, b: 2, c: 3}\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8743387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6acc0a85c4b2d807b466b700130a0595?s=128&d=identicon&r=PG&f=1", "display_name": "SylverEspeon", "link": "https://stackoverflow.com/users/8743387/sylverespeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1531270198, "creation_date": 1531255700, "last_edit_date": 1531259538, "question_id": 51273673, "link": "https://stackoverflow.com/questions/51273673/merge-two-hash-as-sub-hashes-in-ruby", "title": "Merge two hash as sub-hashes in ruby", "body": "<p>What I have:</p>\n\n<pre><code>{\n  :url=&gt;\"http://localhost:something\",\n  :platformName=&gt;\"Windows\",\n  :foodName=&gt;\"taco\",\n  :Version=&gt;\"1\",\n  :browser=&gt;\"Edge\"\n}\n</code></pre>\n\n<p>These values were entered by the user in different HashMaps so I just made the input into a single hash for the ease, but the method called is like this:</p>\n\n<pre><code>def initialize(opts)\n     @object = super Class::SuperClass.for(:remote,hash)\n    end\n</code></pre>\n\n<p>What I want the hash to look like is some thing like this:</p>\n\n<pre><code>hash =   {\n          :url=&gt;\"http://localhost:something\", \n          :SubHash=&gt; {\n              :url=&gt;\"http://localhost:something\",\n              :platformName=&gt;\"Windows\",\n              :foodName=&gt;\"taco\",\n              :Version=&gt;\"1\",\n              :browser=&gt;\"Edge\"\n          }\n        }\n</code></pre>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 8699, "user_id": 3519009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHxtF.jpg?s=128&g=1", "display_name": "Narendra Jadhav", "link": "https://stackoverflow.com/users/3519009/narendra-jadhav"}, "edited": false, "score": 3, "creation_date": 1531247670, "post_id": 51271755, "comment_id": 89522095, "body": "Please visit the <a href=\"https://stackoverflow.com/help\">help center</a>, take the <a href=\"https://stackoverflow.com/tour\">tour</a> to see what and <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>. Do some research, search for related topics on SO; if you get stuck, post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> of your attempt, noting input and expected output."}, {"owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "edited": false, "score": 1, "creation_date": 1531250999, "post_id": 51271755, "comment_id": 89523565, "body": "Please, post your text as (formatted) text, not as an image."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1531272212, "post_id": 51271755, "comment_id": 89529790, "body": "Maybe your firewall or A/V is blocking that?"}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1531362913, "post_id": 51288719, "comment_id": 89570460, "body": "Don&#39;t use IE Driver ever when you tend to automate IE, please prefer watir-classic that would do the wonderful Job."}], "tags": [], "owner": {"reputation": 1, "user_id": 10060743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CUpr7pN0fOo/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qzTL5jv8CrlzGBVUHGsqpTtGmgNA/mo/photo.jpg?sz=128", "display_name": "GauriKuwar", "link": "https://stackoverflow.com/users/10060743/gaurikuwar"}, "is_accepted": false, "score": 0, "last_activity_date": 1531321169, "creation_date": 1531321169, "answer_id": 51288719, "question_id": 51271755, "link": "https://stackoverflow.com/questions/51271755/ruby-unable-to-click-on-button-using-watir-click/51288719#51288719", "title": "ruby :- Unable to click on button using Watir click", "body": "<p>Thanks for your input. Apologies as the images were not available. I was getting the below error while I was trying to click on the login button of a web application.<br>\nError ==\n\"Failed to open a TCP connection to 127.0.0.1:5555(No connection could be made because the target machine actively refused it.- connect(2) for \"127.0.0.1\" port 5555) (Error::ECONNREFUSED)</p>\n\n<p>However, when I downgraded the existing IEdriver version to 2.52.0.0 this problem got resolved and was able to click on the login button.</p>\n"}], "owner": {"reputation": 1, "user_id": 10060743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CUpr7pN0fOo/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qzTL5jv8CrlzGBVUHGsqpTtGmgNA/mo/photo.jpg?sz=128", "display_name": "GauriKuwar", "link": "https://stackoverflow.com/users/10060743/gaurikuwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531321169, "creation_date": 1531246537, "last_edit_date": 1531260124, "question_id": 51271755, "link": "https://stackoverflow.com/questions/51271755/ruby-unable-to-click-on-button-using-watir-click", "title": "ruby :- Unable to click on button using Watir click", "body": "<p>I have been trying to click on login button of a web application. But somehow get connection refused error for .click method. Sharing the code and the output. Can anyone please help in resolving the issue /pointing out the mistake?</p>\n\n<p><img src=\"https://i.stack.imgur.com/GLuss.png\" alt=\"the Element details\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/xNNmQ.png\" alt=\"Code\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/xQjX5.png\" alt=\"output\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "initializing"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6043966, "user_type": "registered", "profile_image": "https://graph.facebook.com/1135813779815308/picture?type=large", "display_name": "Soubridge Monish", "link": "https://stackoverflow.com/users/6043966/soubridge-monish"}, "edited": false, "score": 0, "creation_date": 1531247792, "post_id": 51271807, "comment_id": 89522157, "body": "so arrays is a hash now, I need it as an array, how can I do that?"}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1531247985, "post_id": 51271807, "comment_id": 89522232, "body": "If it can be an array, just declare it as one up front and set the new arrays based on the index of |n| in your iterator.  I read your original post to mean &quot;how do I give arbitrary dynamic names to a group of things&quot;, but if the names aren&#39;t arbitrary and what you really want is a[0], a[1], a[2], then it&#39;s a much simpler question (and doesn&#39;t need the hash in the middle)"}, {"owner": {"reputation": 1, "user_id": 6043966, "user_type": "registered", "profile_image": "https://graph.facebook.com/1135813779815308/picture?type=large", "display_name": "Soubridge Monish", "link": "https://stackoverflow.com/users/6043966/soubridge-monish"}, "edited": false, "score": 0, "creation_date": 1531248277, "post_id": 51271807, "comment_id": 89522361, "body": "puts &#39;enter number of 2d arrays&#39; arrays = [] n = gets.chomp.to_i  n.times { |n|   puts &quot;enter number of rows and columns for #{n} array&quot;   rows = gets.to_i   cols = gets.to_i   arrays.push Array.new(rows,&quot;#{n}&quot;){Array.new(cols,&quot;#{n}&quot;)}  } . thanks, this worked"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1531248696, "post_id": 51271807, "comment_id": 89522534, "body": "if <code>arrays</code> should just be an array of the elements you could also use <code>arrays = n.times.map { ...; Array.new(rows,&#39;w&#39;) {Array.new(cols,&#39;w&#39;)} }</code> (also this is throwing a lot of warnings, might want to just change it to <code>Array.new(rows) {Array.new(cols,&#39;w&#39;)</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531250717, "post_id": 51271807, "comment_id": 89523407, "body": "Since Ruby v1.8.7 it has not been possible to create local variables dynamically. In v1.8.7 and earlier versions that could be done using <code>eval</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531252600, "post_id": 51271807, "comment_id": 89524214, "body": "Since this code represents an array of arrays, it&#39;s probably better to use a straight array (<code>arrays[1]</code>) instead of some kind of hash (<code>arrays[&#39;a1&#39;]</code>) which confuses what&#39;s going on."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 2, "last_activity_date": 1531246747, "creation_date": 1531246747, "answer_id": 51271807, "question_id": 51271722, "link": "https://stackoverflow.com/questions/51271722/initializing-variable-using-iterators-inside-loop-ruby/51271807#51271807", "title": "initializing variable using iterators inside loop ruby", "body": "<p>While it's generally possible to create dynamically named local variables in Ruby, this is usually not necessary and is usually a sign of bad software design.</p>\n\n<p>Instead, you should use normal data strictures to hold your data. In your case, you can use a Hash, e.g.</p>\n\n<pre><code>arrays = {}\nn.times do |n|\n  puts \"enter number of rows and columns for #{n} array\"\n  rows = gets.to_i\n  cols = gets.to_i\n  arrays[\"a#{n}\"] = Array.new(rows,'w') {Array.new(cols,'w')}\nend\n</code></pre>\n\n<p>You can then access the defined arrays as <code>arrays[\"a1\"]</code> or a specific cell in your nested arrays as <code>arrays[\"a1\"][1][3]</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6043966, "user_type": "registered", "profile_image": "https://graph.facebook.com/1135813779815308/picture?type=large", "display_name": "Soubridge Monish", "link": "https://stackoverflow.com/users/6043966/soubridge-monish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "closed_date": 1531255627, "answer_count": 1, "score": -1, "last_activity_date": 1531246808, "creation_date": 1531246386, "last_edit_date": 1531246808, "question_id": 51271722, "link": "https://stackoverflow.com/questions/51271722/initializing-variable-using-iterators-inside-loop-ruby", "closed_reason": "Duplicate", "title": "initializing variable using iterators inside loop ruby", "body": "<p>I want to create variable names like like a1, a2..</p>\n\n<pre><code> n.times { |n|\n  puts \"enter number of rows and columns for #{n} array\"\n  rows = gets.to_i\n  cols = gets.to_i\n  a+\"#{n}\" = Array.new(rows,'w') {Array.new(cols,'w')}\n }\n</code></pre>\n\n<blockquote>\n  <p>Error:</p>\n  \n  <p>syntax error, unexpected '=', expecting '}'   \"a#{n}\" =\n  Array.new(rows,'w') {Array.new(cols,'w')}</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "google-sheets-api", "google-api-client"], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 4780761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fKBof-K7IWw/AAAAAAAAAAI/AAAAAAAAAaU/MbThUrIht3k/photo.jpg?sz=128", "display_name": "C.J. Coffey", "link": "https://stackoverflow.com/users/4780761/c-j-coffey"}, "edited": false, "score": 0, "creation_date": 1531407805, "post_id": 51282895, "comment_id": 89594491, "body": "I tried this method at your suggestion, but got <code>can&#39;t activate google-api-client (= 0.23.3), already activated google-api-client-0.4.7.</code> It sounds like it can&#39;t run multiple versions of the same gem concurrently."}], "tags": [], "owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "is_accepted": false, "score": 0, "last_activity_date": 1531304197, "creation_date": 1531304197, "answer_id": 51282895, "question_id": 51271393, "link": "https://stackoverflow.com/questions/51271393/cannot-load-such-file-google-apis-sheets-v4-loaderror/51282895#51282895", "title": "cannot load such file -- google/apis/sheets_v4 (LoadError)", "body": "<p>Try the solution from <a href=\"https://github.com/google/google-api-ruby-client/issues/132\" rel=\"nofollow noreferrer\">this github forum</a> to use the version you want:</p>\n\n<blockquote>\n  <p>I had to do</p>\n\n<pre><code>gem 'google-api-client', '~&gt; 0.7.1'\n</code></pre>\n  \n  <p>then bundle update google-api-client addressable faraday and that let\n  me figure out which other gems to update for me to be able to use that\n  newer gem version. Because of dependencies by default bundle was\n  installing older version for me.</p>\n</blockquote>\n"}], "owner": {"reputation": 50, "user_id": 4780761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fKBof-K7IWw/AAAAAAAAAAI/AAAAAAAAAaU/MbThUrIht3k/photo.jpg?sz=128", "display_name": "C.J. Coffey", "link": "https://stackoverflow.com/users/4780761/c-j-coffey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 821, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531304197, "creation_date": 1531244967, "question_id": 51271393, "link": "https://stackoverflow.com/questions/51271393/cannot-load-such-file-google-apis-sheets-v4-loaderror", "title": "cannot load such file -- google/apis/sheets_v4 (LoadError)", "body": "<p>I'm writing an app that accesses and edits google sheets. I have the same code working in a ruby test file, but when I copy the code line for line to the rails model it throws an error: <code>cannot load such file -- google/apis/sheets_v4 (LoadError)</code> </p>\n\n<p>I have made sure to require <code>google/apis/sheets_v4</code> and that I'm up to date on 'google-api-client' Both of my files are in the same folder, so they should have access to the same libraries. </p>\n\n<p>The only potential source of error that I have so far is that some part of the app relies on a legacy version of <code>google-api-client</code>, so both 0.4.7 and 0.23.3 are installed. Is there a way to force utilization of one over the other?</p>\n\n<p>The app was developed before my arrival at the company, so I don't know the reasoning for the use of a legacy api (yet).</p>\n"}, {"tags": ["ruby", "http", "append", "httparty"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7111330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WzwDHmb_JGo/AAAAAAAAAAI/AAAAAAAAAC4/PdIFHKN7mzE/photo.jpg?sz=128", "display_name": "Daniel Dobrick", "link": "https://stackoverflow.com/users/7111330/daniel-dobrick"}, "is_accepted": false, "score": 1, "last_activity_date": 1531250167, "creation_date": 1531250167, "answer_id": 51272589, "question_id": 51271271, "link": "https://stackoverflow.com/questions/51271271/httparty-appending-to-url-and-adding-headers-to-get-request-via-ruby-class/51272589#51272589", "title": "Httparty - appending to url and adding headers to get request via Ruby class", "body": "<p>If I understand what you're asking correctly, you would write a method like:</p>\n\n<pre><code>def create_form\n  get(\"/form/#{form_id}/elements\", headers)\nend\n</code></pre>\n\n<p>Which you can then call like:</p>\n\n<pre><code>@form = SeamlessGov.new(params, headers).create_form\n</code></pre>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531250167, "creation_date": 1531244416, "question_id": 51271271, "link": "https://stackoverflow.com/questions/51271271/httparty-appending-to-url-and-adding-headers-to-get-request-via-ruby-class", "title": "Httparty - appending to url and adding headers to get request via Ruby class", "body": "<p>I'm currently working with <code>Httparty</code> to make a <code>GET</code> Seamless.giv API which returns field from a form. In the requests there are Authentication headers that need to be passed in order to access the API. But the request has to be made to a specific form. Thats where the issue lays should this be in the base URI or appended?</p>\n\n<p>Here is the <code>curl</code> example of the request:</p>\n\n<pre><code>curl -X GET -H \"AuthDate: 1531236159\"\\\n -H \"Authorization: HMAC-SHA256 api_key=XXXXXXXX nonce=12345 Signature=XXXXXXXXXXX\"\\\n -d 'false' https://nycopp.seamlessdocs.com/api/form/:form_id/elements\n</code></pre>\n\n<p>and this is the approach im currently taking:</p>\n\n<pre><code>class SeamlessGov\n  include HTTParty\n  base_uri \"https://nycopp.seamlessdocs.com/api\"\n\n  def initialize(args={})\n    @api_key = args[:api_key]\n    @nonce = args[:nonce]\n    @signature = generate_signature\n  end\n\n  def form(form_id)\n    @form = form_id \n  end\n\n  def headers(headers={})\n    @headers = headers\n  end\n\n  def generate_signature\n    # bash command\n  end\n\nend\n</code></pre>\n\n<p>Is the best practice to append it or put it in the <code>base_uri</code> for example:\n<code>base_uri \"https://nycopp.seamlessdocs.com/api/form/:form_id/elements\"</code> or created a method to append to the <code>base_uri</code> for example:</p>\n\n<pre><code>def append_form(form)\n  \"/form/#{form}/elements\"\nend\n</code></pre>\n\n<p>What would the best approach be? So that when I call\n<code>@form = SeamlessGov.new(params, headers)</code> works.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "elasticsearch", "elasticsearch-5"], "answers": [{"tags": [], "owner": {"reputation": 1770, "user_id": 697816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/g2TUV.jpg?s=128&g=1", "display_name": "Maged Makled", "link": "https://stackoverflow.com/users/697816/maged-makled"}, "is_accepted": true, "score": 0, "last_activity_date": 1531316877, "creation_date": 1531316877, "answer_id": 51287184, "question_id": 51271212, "link": "https://stackoverflow.com/questions/51271212/elasticsearch-nested-query-is-returned-all-the-nested-list/51287184#51287184", "title": "Elasticsearch nested query is returned all the nested list", "body": "<p>Used <code>elasticsearch-api</code> gem to get it working\n<code>https://github.com/elastic/elasticsearch-ruby/tree/master/elasticsearch-api</code></p>\n\n<pre><code>response = client.search index: 'index_name',\n                           body: {\n                             \"_source\": false,\n                              \"query\": {\n                                \"nested\": {\n                                  \"path\": \"events\",\n                                  \"query\": {\n                                    \"bool\": {\n                                      \"must\":[\n                                        {\"match\": {\"events.team_id\": \"xyz\"}},\n                                        {\"match\": {\"_id\": \"sdlfjslasdfj\"}}\n                                      ]\n                                    }\n                                   },\n                                   \"inner_hits\": {\n                                     \"size\": 10,\n                                     \"from\": 0,\n                                     \"sort\": [{ \"events.starts_at\": \"asc\" }]\n                                   }\n                                  }\n                                }\n                              }\n</code></pre>\n"}], "owner": {"reputation": 1770, "user_id": 697816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/g2TUV.jpg?s=128&g=1", "display_name": "Maged Makled", "link": "https://stackoverflow.com/users/697816/maged-makled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 51287184, "answer_count": 1, "score": 0, "last_activity_date": 1531316877, "creation_date": 1531244152, "question_id": 51271212, "link": "https://stackoverflow.com/questions/51271212/elasticsearch-nested-query-is-returned-all-the-nested-list", "title": "Elasticsearch nested query is returned all the nested list", "body": "<p>I have a model with that have a nested field <code>events</code> with a field <code>team_id</code>. These nested events could be huge and I would like to do few things on it. </p>\n\n<ol>\n<li><p>Return only events with a specific <code>team_id</code> which is not doing with the query below which returns all the events</p></li>\n<li><p>Use <code>inner_hits</code> to sort, limit the size and offset, also tried by sending the <code>size</code> and <code>from</code> params with no luck</p></li>\n</ol>\n\n<p>I'm using <code>elasticsearch 5</code> in Ruby </p>\n\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-request-inner-hits.html#nested-inner-hits\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/5.0/search-request-inner-hits.html#nested-inner-hits</a></p>\n\n<pre><code>Model.search(\n        query: {\n          bool:{\n            must: [\n              { match: { \"_id\":  \"zzzzzzz\" }},\n              nested: {\n                path: \"events\",\n                query: {\n                          match: { \"events.team_id\":  \"sdlfjslasdfj\" }\n                },\n                inner_hits: {}\n              }\n            ]\n          }\n        }\n      )\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1531244336, "post_id": 51270984, "comment_id": 89520617, "body": "I&#39;d say lexical sorting is <i>way</i> more common. I&#39;d also argue it&#39;s pretty irrelevant if the sort code is readable; there are times code is just gross. I might use <code>empty?</code> and <code>if</code> instead to lose the nested tertiary, document and spec it, and then never think about it again."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531247954, "post_id": 51270984, "comment_id": 89522221, "body": "<i>&quot;it&#39;s quite common&quot;</i> -- I&#39;d have to disagree with you there. Interesting question nonetheless."}, {"owner": {"reputation": 195, "user_id": 7971210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969765814a12b2d241c6bc39b1356edc?s=128&d=identicon&r=PG&f=1", "display_name": "dgsan", "link": "https://stackoverflow.com/users/7971210/dgsan"}, "edited": false, "score": 0, "creation_date": 1531248207, "post_id": 51270984, "comment_id": 89522337, "body": "I did a benchmark using 1000 random 8 char strings + 75 spaces, then shuffling as the input data to sort (10000x).  SortBy: <b>29.5s</b>, Map: <b>4.5s</b>, Rotate: <b>2.6s</b>, UglyTernary: <b>24.7s</b>, PartitionV1: <b>2.9s</b>, PartitionV2:  <b>2.8s</b>, ReverseCompare: <b>9.2s</b>.  The rotate and partition based methods seem substantially faster than the rest."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531248313, "post_id": 51270984, "comment_id": 89522377, "body": "@dgsan post the benchmarks and the code as we have no idea what the implementations you used are"}, {"owner": {"reputation": 195, "user_id": 7971210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969765814a12b2d241c6bc39b1356edc?s=128&d=identicon&r=PG&f=1", "display_name": "dgsan", "link": "https://stackoverflow.com/users/7971210/dgsan"}, "edited": false, "score": 0, "creation_date": 1531249363, "post_id": 51270984, "comment_id": 89522856, "body": "Here&#39;s what I used for comparing: <a href=\"https://hastebin.com/ayunudezud.rb\" rel=\"nofollow noreferrer\">hastebin.com/ayunudezud.rb</a> (Should probably note I didn&#39;t validate the results, just timed them.)"}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 4, "last_activity_date": 1531244317, "last_edit_date": 1531244317, "creation_date": 1531243546, "answer_id": 51271064, "question_id": 51270984, "link": "https://stackoverflow.com/questions/51270984/whats-a-good-way-to-sort-strings-in-ruby-so-that-empty-strings-are-at-the-end/51271064#51271064", "title": "What&#39;s a good way to sort strings in ruby so that empty strings are at the end?", "body": "<p>The simplest solution I can think of is </p>\n\n<pre><code>a = ['', 'g', 'z', 'a', 'r', 'u', '', 'n']\na.sort.rotate(a.count(''))\n#=&gt; [\"a\", \"g\", \"n\", \"r\", \"u\", \"z\", \"\", \"\"]\n</code></pre>\n\n<p><code>Array#rotate</code>: Returns a new array by rotating self so that the element at count is the first element of the new array. </p>\n\n<p>So we just rotate by the count of empty strings (<code>\"\"</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 7971210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969765814a12b2d241c6bc39b1356edc?s=128&d=identicon&r=PG&f=1", "display_name": "dgsan", "link": "https://stackoverflow.com/users/7971210/dgsan"}, "edited": false, "score": 0, "creation_date": 1531244256, "post_id": 51271122, "comment_id": 89520578, "body": "Is there any reason that&#39;s better or worse than:      <code>empty = a.count &amp;:empty?</code>       <code>a = a.select(&amp;:present?).sort</code>       <code>empty.times { a.push &#39;&#39; }</code>   ?"}, {"owner": {"reputation": 8276, "user_id": 327038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e17117063f64ef47f36ab4ee45bf3d4b?s=128&d=identicon&r=PG", "display_name": "asthasr", "link": "https://stackoverflow.com/users/327038/asthasr"}, "reply_to_user": {"reputation": 195, "user_id": 7971210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969765814a12b2d241c6bc39b1356edc?s=128&d=identicon&r=PG&f=1", "display_name": "dgsan", "link": "https://stackoverflow.com/users/7971210/dgsan"}, "edited": false, "score": 0, "creation_date": 1531245287, "post_id": 51271122, "comment_id": 89521045, "body": "I&#39;m not sure without benchmarking, but my gut feeling is that it does fewer traversals and allocations."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 195, "user_id": 7971210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969765814a12b2d241c6bc39b1356edc?s=128&d=identicon&r=PG&f=1", "display_name": "dgsan", "link": "https://stackoverflow.com/users/7971210/dgsan"}, "edited": false, "score": 1, "creation_date": 1531246411, "post_id": 51271122, "comment_id": 89521537, "body": "@dgsan, note that Ruby does not have a method <code>String#present?</code> and there is no Rails tag."}], "tags": [], "owner": {"reputation": 8276, "user_id": 327038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e17117063f64ef47f36ab4ee45bf3d4b?s=128&d=identicon&r=PG", "display_name": "asthasr", "link": "https://stackoverflow.com/users/327038/asthasr"}, "is_accepted": false, "score": 2, "last_activity_date": 1531243773, "creation_date": 1531243773, "answer_id": 51271122, "question_id": 51270984, "link": "https://stackoverflow.com/questions/51270984/whats-a-good-way-to-sort-strings-in-ruby-so-that-empty-strings-are-at-the-end/51271122#51271122", "title": "What&#39;s a good way to sort strings in ruby so that empty strings are at the end?", "body": "<p>Just count the number of blanks and then use <code>#rotate</code> to move them to the end:</p>\n\n<pre><code>sorted = ['', 'g', 'z', 'a', 'r', 'u', '', 'n'].sort\nblank_count = sorted.count &amp;:empty?\nsorted.rotate! blank_count\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531246934, "post_id": 51271433, "comment_id": 89521784, "body": "We could also go with <code>arr.sort.partition(&amp;:empty?).reverse.reduce(&amp;:concat)</code> or <code>arr.sort.partition {|s| !s.empty?}.reduce(&amp;:concat)</code> :) but honestly I think your first solution is the best as it needs the fewest methods and transpositions  of the <code>Array</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1531247708, "post_id": 51271433, "comment_id": 89522114, "body": "@engineersmnky, there seem to be umpteen permutations. I also had <code>arr.partition {  |s| !s.empty? }.flat_map(&amp;:sort)</code> but could not bear the inefficiency of sorting an array of empty strings."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531248034, "post_id": 51271433, "comment_id": 89522250, "body": "I agree because I also considered <code>arr.sort_by { |s| s.ord rescue Float::INFINITY }</code> but it seems convoluted"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531248317, "post_id": 51271433, "comment_id": 89522380, "body": "<code>s.ord rescue Float::INFINITY</code> wouldn&#39;t work properly for 2+ character strings. Also, your second solution is a little dubious - for instance, what happens if <code>arr = [&quot;a&quot;, &quot;\\xFF\\xFF&quot;, &quot;&quot;]</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531248868, "post_id": 51271433, "comment_id": 89522620, "body": "@engineersmnky, did you add something special to your Corn Flakes this morning? (Addressed to your now-deleted last comment.)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531249177, "post_id": 51271433, "comment_id": 89522780, "body": "@TomLord very well <code>arr.sort_by {|a| a.each_char.map(&amp;:ord) &lt;&lt; Float::INFINITY}</code> (fixed from the deleted version)"}, {"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1531255298, "post_id": 51271433, "comment_id": 89525332, "body": "Tried using just <code>#sort</code>, best I&#39;ve been able to come up with yet is <code>arr.sort { |a, b| a.empty? != b.empty? ? b &lt;=&gt; a : a &lt;=&gt; b }</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1531256489, "post_id": 51271433, "comment_id": 89525835, "body": "What about <code>arr.sort_by { |c| [-c.size, c] }</code>"}, {"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1531256586, "post_id": 51271433, "comment_id": 89525873, "body": "@SagarPandya That breaks when non-empty strings are of various lengths."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 7, "last_activity_date": 1531247328, "last_edit_date": 1531247328, "creation_date": 1531245118, "answer_id": 51271433, "question_id": 51270984, "link": "https://stackoverflow.com/questions/51270984/whats-a-good-way-to-sort-strings-in-ruby-so-that-empty-strings-are-at-the-end/51271433#51271433", "title": "What&#39;s a good way to sort strings in ruby so that empty strings are at the end?", "body": "<pre><code>arr = [\"g\", \"u\", \"\", \"a\", \"\", \"r\", \"n\", \"z\"]\n\narr.sort_by { |s| [s.empty? ? 1 : 0, s] }\n  #=&gt; [\"a\", \"g\", \"n\", \"r\", \"u\", \"z\", \"\", \"\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr.sort_by { |s| s.empty? ? 255.chr : s }\n  # =&gt; [\"a\", \"g\", \"n\", \"r\", \"u\", \"z\", \"\", \"\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>empty, non_empty = arr.partition(&amp;:empty?)\n  #=&gt; [[\"\", \"\"], [\"g\", \"u\", \"a\", \"r\", \"n\", \"z\"]]\nnon_empty.sort.concat empty\n  #=&gt; [\"a\", \"g\", \"n\", \"r\", \"u\", \"z\", \"\", \"\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531247358, "post_id": 51271942, "comment_id": 89521968, "body": "I do not get the same result <code>[&quot;a&quot;, &quot;&quot;, &quot;g&quot;, &quot;n&quot;, &quot;r&quot;, &quot;u&quot;, &quot;&quot;, &quot;z&quot;]</code> because this was my first thought but it does not appear to work"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531247471, "post_id": 51271942, "comment_id": 89522007, "body": "@engineersmnky Really?? Are you sure you copied it correctly? I&#39;ve just tried this on ruby <code>2.4.4</code> and <code>2.5.1</code>, and get the same result."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531247535, "post_id": 51271942, "comment_id": 89522045, "body": "Tried on <code>2.3.3</code> and <a href=\"https://repl.it/@engineersmnky/Arraysort\" rel=\"nofollow noreferrer\">Repl.it 2.5.1</a> (copied directly)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531247733, "post_id": 51271942, "comment_id": 89522128, "body": "@engineersmnky Hmm, interesting... I reckon it&#39;s because of how the <code>sort</code> algorithm works - i.e. I was making a false assumption about how all elements always get compared. But I don&#39;t <i>really</i> know why -- I may even post that as a new SO question! See my updated answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1531248321, "post_id": 51271942, "comment_id": 89522381, "body": "With the original solution (Ruby 2.51): <code>[&quot;g&quot;, &quot;&quot;, &quot;a&quot;].sort { |s1, s2| puts &quot;s1=#{s1}, s2=#{s2}&quot;; s2.empty? ? (s2 &lt;=&gt; s1) : (s1 &lt;=&gt; s2) } =&gt; [&quot;g&quot;, &quot;&quot;, &quot;.a&quot;]</code> and prints <code>s1=, s2=a</code>, <code>s1=g, s2=</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531248574, "post_id": 51271942, "comment_id": 89522476, "body": "@CarySwoveland Not on my machine! I get: <code>s1=g, s2=</code>, <code>s1=, s2=a</code>. So ruby is using a different algorithm depending on the machine it runs on?!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531248706, "post_id": 51271942, "comment_id": 89522546, "body": "At a complete guess, maybe one of our machines is running the algorithm &quot;backwards&quot;, due to the order in which the array has been stored in memory?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531248754, "post_id": 51271942, "comment_id": 89522566, "body": "@Tom, what machine are you using? Mine&#39;s an Apple II+."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531248872, "post_id": 51271942, "comment_id": 89522622, "body": "@CarySwoveland Macbook Pro i7 (2017)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1531247746, "last_edit_date": 1531247746, "creation_date": 1531247289, "answer_id": 51271942, "question_id": 51270984, "link": "https://stackoverflow.com/questions/51270984/whats-a-good-way-to-sort-strings-in-ruby-so-that-empty-strings-are-at-the-end/51271942#51271942", "title": "What&#39;s a good way to sort strings in ruby so that empty strings are at the end?", "body": "<p>Here's another variation, defining a custom <code>sort</code> comparison:</p>\n\n<pre><code>arr = [\"g\", \"u\", \"\", \"a\", \"\", \"r\", \"n\", \"z\"]\n\narr.sort { |s1, s2| (s1.empty? || s2.empty?) ? (s2 &lt;=&gt; s1) : (s1 &lt;=&gt; s2) }\n  #=&gt; [\"a\", \"g\", \"n\", \"r\", \"u\", \"z\", \"\", \"\"]\n</code></pre>\n\n<p>Using <code>s2 &lt;=&gt; s1</code> is essentially a \"reverse sort\" - so in cases where an empty string is being compared against, this orders it at the end of the result rather than the beginning.</p>\n"}], "owner": {"reputation": 195, "user_id": 7971210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/969765814a12b2d241c6bc39b1356edc?s=128&d=identicon&r=PG&f=1", "display_name": "dgsan", "link": "https://stackoverflow.com/users/7971210/dgsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1531247746, "creation_date": 1531243209, "question_id": 51270984, "link": "https://stackoverflow.com/questions/51270984/whats-a-good-way-to-sort-strings-in-ruby-so-that-empty-strings-are-at-the-end", "title": "What&#39;s a good way to sort strings in ruby so that empty strings are at the end?", "body": "<p>In Ruby the default sort puts empty strings first.</p>\n\n<pre><code>['', 'g', 'z', 'a', 'r', 'u', '', 'n'].sort\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>[\"\", \"\", \"a\", \"g\", \"n\", \"r\", \"u\", \"z\"]\n</code></pre>\n\n<p>However, it's quite common to want empty strings at the <em>end</em> instead.</p>\n\n<p>Doing something like:</p>\n\n<pre><code>['', 'g', 'z', 'a', 'r', 'u', '', 'n'].sort { |a, b| a[0] &amp;&amp; b[0] ?  a &lt;=&gt; b : a[0] ? -1 : b[0] ? 1 : 0 }\n</code></pre>\n\n<p>works and gives:</p>\n\n<pre><code>[\"a\", \"g\", \"n\", \"r\", \"u\", \"z\", \"\", \"\"]\n</code></pre>\n\n<p>However, this isn't very readable and is not very flexible.</p>\n\n<p>Is there a reasonable and clean way to get <code>sort</code> in Ruby to put empty strings last? Would it be better to just map to an array with no empty strings, sort, and then pad on the empty strings at the end? Are there other approaches?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "select"], "comments": [{"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1531243001, "post_id": 51270919, "comment_id": 89519932, "body": "post rails stack trace"}, {"owner": {"reputation": 105, "user_id": 9852976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e25a8501d8ffcac2d597a97d9e5149?s=128&d=identicon&r=PG&f=1", "display_name": "NathanB", "link": "https://stackoverflow.com/users/9852976/nathanb"}, "reply_to_user": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1531243421, "post_id": 51270919, "comment_id": 89520152, "body": "@Nithin, to be clear, this isn&#39;t producing an error, it simply isn&#39;t selecting the correct dropdown option when a user goes to edit. I could post the results of <code>Thread.current.backtrace</code> but it looks normal."}, {"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1531243501, "post_id": 51270919, "comment_id": 89520193, "body": "You mean to say, the save is happening properly?"}, {"owner": {"reputation": 105, "user_id": 9852976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e25a8501d8ffcac2d597a97d9e5149?s=128&d=identicon&r=PG&f=1", "display_name": "NathanB", "link": "https://stackoverflow.com/users/9852976/nathanb"}, "reply_to_user": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1531243743, "post_id": 51270919, "comment_id": 89520314, "body": "@Nithin, yes the save is happening properly. Actually, now you say that, I think I have found the issue, however, I&#39;m not sure how to solve it. When it&#39;s saved, the colors are saved like: <code>blue\\\\r\\\\n</code>, leading it to not match the array in simple form. How would I get it to save without the returns?"}, {"owner": {"reputation": 105, "user_id": 9852976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e25a8501d8ffcac2d597a97d9e5149?s=128&d=identicon&r=PG&f=1", "display_name": "NathanB", "link": "https://stackoverflow.com/users/9852976/nathanb"}, "reply_to_user": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1531244033, "post_id": 51270919, "comment_id": 89520472, "body": "@Nithin, sorry it&#39;s actually saving <code>blue\\r\\n</code> not what i posted before. But same issue I believe."}, {"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1531244067, "post_id": 51270919, "comment_id": 89520485, "body": "I guess the fix should come from collection object, I guess that&#39;s what is appending additional chars and stored into db."}], "answers": [{"tags": [], "owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "is_accepted": true, "score": 0, "last_activity_date": 1531244582, "creation_date": 1531244582, "answer_id": 51271307, "question_id": 51270919, "link": "https://stackoverflow.com/questions/51270919/select-options-with-new-lines-issue/51271307#51271307", "title": "Select options with new lines issue", "body": "<p>Try this in your form.</p>\n\n<pre><code>&lt;%= f.input :color, collection: custom_colors.split(/\\n/).map(&amp;:strip).reject(&amp;:empty?) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9852976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e25a8501d8ffcac2d597a97d9e5149?s=128&d=identicon&r=PG&f=1", "display_name": "NathanB", "link": "https://stackoverflow.com/users/9852976/nathanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51271307, "answer_count": 1, "score": 0, "last_activity_date": 1531244582, "creation_date": 1531242918, "last_edit_date": 1531244277, "question_id": 51270919, "link": "https://stackoverflow.com/questions/51270919/select-options-with-new-lines-issue", "title": "Select options with new lines issue", "body": "<p>I have the following rails code (it uses simple form):</p>\n\n<p><code>&lt;%= f.input :color, collection: custom_colors.split(/\\n/).reject(&amp;:empty?) %&gt;</code></p>\n\n<p><code>custom_colors</code> comes from a text area where users are asked to enter entries seperated by new lines.</p>\n\n<p><strong>The issue:</strong> This displays correctly, however, when a user goes to edit, the color is not saved and the select is empty. I'm using a typical rails scaffold.</p>\n\n<p><strong>The issue (continued)</strong>: The reason I believe this is not working, is that when saved, the color looks like <code>blue\\r\\n</code>. However, when I do:</p>\n\n<p><code>&lt;%= field.options.split(/\\n/).reject(&amp;:empty?) %&gt;</code> it returns <code>blue\\r</code>, which means the input won't match, as <code>blue\\r\\n</code> clearly does not equal <code>blue\\r</code></p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "cocoon-gem"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1531489608, "post_id": 51270170, "comment_id": 89628340, "body": "Can you show us what is posted to the controller? Small remarks: your strong-parameters should at least contain <code>[:id, :avatar, :_destroy]</code>, your <code>_photo_fields</code> partial should have a surrounding div with class <code>nested-fields</code> (for the remove to work)."}, {"owner": {"reputation": 408, "user_id": 370845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbYfz.jpg?s=128&g=1", "display_name": "Will Mavis", "link": "https://stackoverflow.com/users/370845/will-mavis"}, "edited": false, "score": 0, "creation_date": 1531612387, "post_id": 51270170, "comment_id": 89661773, "body": "I started this repo to reproduce your issue: <a href=\"https://github.com/wmavis/so_cocoon_multi_photo\" rel=\"nofollow noreferrer\">github.com/wmavis/so_cocoon_multi_photo</a>  Are you using a specific gem for file uploads?"}], "owner": {"reputation": 21, "user_id": 9634696, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZHWjaCR-A0E/AAAAAAAAAAI/AAAAAAAAACw/nk-TYGNek9c/photo.jpg?sz=128", "display_name": "Name No", "link": "https://stackoverflow.com/users/9634696/name-no"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531239994, "creation_date": 1531239994, "question_id": 51270170, "link": "https://stackoverflow.com/questions/51270170/upload-muti-photo-use-gem-cocoon", "title": "Upload muti photo use gem cocoon", "body": "<p>i have a product.rb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class Product &lt; ApplicationRecord\r\n  belongs_to :category\r\n  has_many :comments,dependent: :destroy \r\n  has_many :photos,inverse_of: :product\r\n  accepts_nested_attributes_for :photos ,reject_if: :all_blank, allow_destroy: true\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>product_controller.rb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> def new \r\n        @product=Product.new\r\n        @product.photos.new\r\n end</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def product_params \r\n        params.require(:product).permit(:name,:price,:decription,:category_id,photos_attributes: [:avatar])\r\n    end</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>product/new.html.erb </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= simple_form_for @product do |f| %&gt;\r\n  &lt;%= f.input :name %&gt;\r\n  &lt;%= f.input :price %&gt;\r\n  &lt;%= f.input :decription, as: :text%&gt;\r\n  &lt;%= f.select :category_id , @categorys.collect{|c|[c.name,c.id]},include_blank:false %&gt;&lt;/br&gt;\r\n  &lt;h2&gt; photo&lt;/h2&gt;\r\n  &lt;%= f.simple_fields_for :photos do |photo|%&gt;\r\n    &lt;%= render 'photo_fields', f:photo %&gt;\r\n    &lt;%=link_to_add_association 'add photo', f, :photos%&gt; \r\n &lt;%end%&gt;\r\n  &lt;%=f.submit%&gt;\r\n&lt;% end %&gt;\r\n&lt;%= link_to 'Back', products_path %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>_photo_fields.html.erb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= f.input :avatar , as: :file%&gt; \r\n  &lt;%= link_to_remove_association \"remove photo\", f %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and i uploaded muti photo for product . but when i show all photo of product , the product only saved a single photo\n <strong>image</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;strong&gt;image&lt;/strong&gt;\r\n  &lt;% @product.photos.each do |p| %&gt;\r\n  &lt;%= image_tag p.avatar.url(:medium) %&gt;\r\n  &lt;% end %&gt;%&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I would like a product have many photo ( association 1 -n ). sorry i'm not good english. please help me !!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "nested", "radio-button"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9986009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec404e78ba34c11439924d992d3a5e20?s=128&d=identicon&r=PG&f=1", "display_name": "R.lOOp", "link": "https://stackoverflow.com/users/9986009/r-loop"}, "edited": false, "score": 0, "creation_date": 1531240715, "post_id": 51269667, "comment_id": 89518823, "body": "Thanks this makes sense but then how do I pass on the parameters:  ` params[:exam_questions].each do |exam_question_params|                 parameters = ActionController::Parameters.new(exam_question_params)                 exam_question = ExamQuestion.new(parameters.permit(:question, :correct_answers, :question_no, :options, :question_type, :exam_id))                 exam_question.save             end `"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 15, "user_id": 9986009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec404e78ba34c11439924d992d3a5e20?s=128&d=identicon&r=PG&f=1", "display_name": "R.lOOp", "link": "https://stackoverflow.com/users/9986009/r-loop"}, "edited": false, "score": 0, "creation_date": 1531240907, "post_id": 51269667, "comment_id": 89518921, "body": "I&#39;d suggest a new question asking that - it&#39;s a little hard to make out in a comment :) Get the radio buttons working, then add a question showing the params as you want them and how they&#39;re currently coming in, and it&#39;ll be nice and clear to answer. That good? Feel free to &#39;@&#39; me in there if you like. Hope this helped here - if so and you think it resolves this specific issue, please tick the question to accept it as an answer."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1531238651, "last_edit_date": 1531238651, "creation_date": 1531238154, "answer_id": 51269667, "question_id": 51269221, "link": "https://stackoverflow.com/questions/51269221/ruby-on-rails-nested-radio-buttons-issue-when-one-is-selected-other-is-desel/51269667#51269667", "title": "Ruby on Rails -- Nested radio buttons issue (When one is selected other is deselected)", "body": "<p>Your issue is using the same name for each set of radio buttons (<code>exam_answers[][answer_mcq]</code>).</p>\n\n<p>If you update your code to use <a href=\"https://apidock.com/ruby/Enumerator/each_with_index\" rel=\"nofollow noreferrer\"><code>each_with_index</code></a> or the question's ID (or whatever you like really) and add this on to the <code>radio_button_tag</code> name, this will work for you.</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;% @exam.exam_questions.each_with_index do |question, i|%&gt;\n  ...\n  &lt;%= radio_button_tag :exam_answer_answer_mcq, option_position_to_answer(question.options.split(',').find_index(option)), false, :name =&gt; \"exam_answers[][answer_mcq_#{i}]\"%&gt;\n  ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>&lt;%= radio_button_tag \"exam_answer_answer_mcq_#{i}\", option_position_to_answer(question.options.split(',').find_index(option)), false, :name =&gt; \"exam_answers[][answer_mcq_#{question.id}]\"%&gt;\n</code></pre>\n\n<p>Using the same name groups all the options together, meaning only one can be selected per group. Updating to use an approach as above will overcome this by differentiating the groups.</p>\n\n<p>Hope that helps - let me know how you get on or if you have any questions.</p>\n"}], "owner": {"reputation": 15, "user_id": 9986009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec404e78ba34c11439924d992d3a5e20?s=128&d=identicon&r=PG&f=1", "display_name": "R.lOOp", "link": "https://stackoverflow.com/users/9986009/r-loop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 51269667, "answer_count": 1, "score": 1, "last_activity_date": 1531238651, "creation_date": 1531236784, "question_id": 51269221, "link": "https://stackoverflow.com/questions/51269221/ruby-on-rails-nested-radio-buttons-issue-when-one-is-selected-other-is-desel", "title": "Ruby on Rails -- Nested radio buttons issue (When one is selected other is deselected)", "body": "<p>So I have a form in which each question has different options and one of the options in each question needs to be selected:</p>\n\n<pre><code>&lt;% @exam.exam_questions.each do |question|%&gt;\n                            &lt;div class=\"item\"&gt;\n                                &lt;div class=\"individual_question_container\"&gt;\n                                    &lt;div class=\"header\"&gt;\n                                      &lt;h3&gt;Question: &lt;%= question.question_no %&gt; / &lt;%= @exam.exam_questions.count %&gt;&lt;/h3&gt;\n                                    &lt;/div&gt;  \n                                    &lt;div class=\"container_body\"&gt;\n                                      &lt;br /&gt;\n                                      &lt;h4&gt;&lt;%= question.question%&gt;&lt;/h4&gt;\n                                      &lt;br /&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"footer\"&gt;\n                                        &lt;br /&gt;\n                                        &lt;% if question.question_type == 1%&gt;\n                                            &lt;% if question.correct_answers.split(',').count == 1 %&gt;\n                                                &lt;% question.options.split(',').each do |option| %&gt;\n                                                    &lt;%= radio_button_tag :exam_answer_answer_mcq, option_position_to_answer(question.options.split(',').find_index(option)), false, :name =&gt; \"exam_answers[][answer_mcq]\"%&gt; &lt;!-- RADIO BUTTON TAG HERE --&gt;\n                                                    &lt;label&gt;&lt;%= option %&gt;&lt;/label&gt;\n                                                    &lt;br /&gt;\n                                                &lt;% end %&gt;\n                                            &lt;% else %&gt;\n                                                &lt;% question.options.split(',').each do |option| %&gt;\n                                                    &lt;input type=\"checkbox\" name =\"&lt;%=question.id%&gt;--&lt;%=question.options.split(',').find_index(option)%&gt;--name\" value=\"&lt;%=option_position_to_answer(question.options.split(',').find_index(option))%&gt;\" id=\"&lt;%=question.id%&gt;--&lt;%=question.options.split(',').find_index(option)%&gt;--id\" onclick=\"add_to_textbox('&lt;%=question.id%&gt;--&lt;%=question.options.split(',').find_index(option)%&gt;--id','&lt;%=question.id%&gt;--mainTextBox')\"&gt;\n                                                    &lt;label&gt;&lt;%= option %&gt;&lt;/label&gt;\n                                                    &lt;br /&gt;\n                                                &lt;% end %&gt;\n                                                &lt;%= hidden_field_tag :exam_answer_answer_mcq, '', :name =&gt; \"exam_answers[][answer_mcq]\", id:\"#{question.id}--mainTextBox\"%&gt;\n                                            &lt;% end %&gt;\n                                        &lt;% elsif question.question_type == 2 %&gt;\n                                            &lt;%= text_area_tag :exam_answer_answer_seq, '', :name =&gt; \"exam_answers[][answer_seq]\", :class =&gt; \"form-control\", :rows =&gt; 15, :placeholder =&gt; \"Answer....\"%&gt;\n                                        &lt;% end %&gt;\n                                        &lt;br /&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;br /&gt;\n                            &lt;br /&gt;\n                        &lt;%= hidden_field_tag :exam_answer_exam_question_id, question.id, :name =&gt; \"exam_answers[][exam_question_id]\"%&gt;\n                        &lt;%= hidden_field_tag :exam_answer_student_id, current_student.id, :name =&gt; \"exam_answers[][student_id]\"%&gt;\n                        &lt;%= hidden_field_tag :exam_answer_exam_id, question.exam_id, :name =&gt; \"exam_answers[][exam_id]\"%&gt;\n                        &lt;% end %&gt;\n</code></pre>\n\n<p>Suppose I select an option from one question( radio button ), when I move on to the next question and select another option the option I selected from the previous question becomes unselected. Can anyone tell em how to fix that?</p>\n"}, {"tags": ["ruby", "rubygems", "puppet"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 1, "creation_date": 1531243437, "post_id": 51269219, "comment_id": 89520161, "body": "Why use this when <code>file_line</code> from <code>stdlib</code> exists?"}, {"owner": {"reputation": 1, "user_id": 10059601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d2e7130155c41d02baf1a29df446f1?s=128&d=identicon&r=PG&f=1", "display_name": "ilans", "link": "https://stackoverflow.com/users/10059601/ilans"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1531296112, "post_id": 51269219, "comment_id": 89537727, "body": "Hey, thanks for your response. I&#39;m going to check it :)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1531333380, "post_id": 51269219, "comment_id": 89561617, "body": "But if you do want to proceed with your own custom type, then you should consider reading <a href=\"https://puppet.com/docs/puppet/5.5/custom_types.html\" rel=\"nofollow noreferrer\">the documentation</a> about how to do that."}], "owner": {"reputation": 1, "user_id": 10059601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d2e7130155c41d02baf1a29df446f1?s=128&d=identicon&r=PG&f=1", "display_name": "ilans", "link": "https://stackoverflow.com/users/10059601/ilans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531236778, "creation_date": 1531236778, "question_id": 51269219, "link": "https://stackoverflow.com/questions/51269219/puppet-ensure-line-in-specific-order", "title": "puppet: ensure line in specific order", "body": "<p>i am newbie to puppet, have requirement to define new parameter to the attached code.\nI want to have the option to add order line to the attached code.</p>\n\n<p>can someone help me with some examples please ?</p>\n\n<pre><code>module Puppet\n        newtype(:ensureline) do\n                @doc = \"ensureline doc\"\n                newparam(:name) do\n                        desc \"The name of the resource\"\n                end\n                newparam(:file) do\n                        desc \"file to edit\"\n                end\n                newparam(:line) do\n                        desc \"line to ensure\"\n                end\n                newproperty(:ensure) do\n                        desc 'Whether the line present or not?'\n                        defaultto :present\n                        def retrieve\n                                File.readlines(resource[:file]).map {\n                                        |line|\n                                        line.chomp\n                                }.include?(resource[:line]) ? :present : :absent\n                        end\n                        newvalue :absent do\n                                # This block of code will make the :line absent in :file\n                                data = File.readlines(resource[:file])\n                                data.map! {\n                                        |line|\n                                        line.chomp\n                                }.delete(resource[:line])\n                                File.open(resource[:file], 'w') {\n                                        |fd|\n                                        fd.puts data\n                                }\n                        end\n                        newvalue :present do\n                                # This block of code will make the :line present in :file\n                                File.open(resource[:file], 'a') {\n                                        |fd|\n                                        fd.puts resource[:line] + \"\\n\"\n                                }\n                       end\n                end\n        end\nend\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron"], "comments": [{"owner": {"reputation": 692, "user_id": 4256719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ESoCR.jpg?s=128&g=1", "display_name": "Jagdish", "link": "https://stackoverflow.com/users/4256719/jagdish"}, "edited": false, "score": 0, "creation_date": 1531244032, "post_id": 51269000, "comment_id": 89520471, "body": "Have you tried without double quote for User.create line?"}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "reply_to_user": {"reputation": 692, "user_id": 4256719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ESoCR.jpg?s=128&g=1", "display_name": "Jagdish", "link": "https://stackoverflow.com/users/4256719/jagdish"}, "edited": false, "score": 0, "creation_date": 1531247617, "post_id": 51269000, "comment_id": 89522072, "body": "@JagdishN Yes, it gives me a syntax error"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531247747, "post_id": 51269222, "comment_id": 89522135, "body": "Hi @Sergio Tuluntsev, no I don&#39;t know <code>runner</code>, can you tell me more please ?  It doesn&#39;t create any log file at the Path I specified."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531251301, "post_id": 51269222, "comment_id": 89523711, "body": "@MaxPuissant: &quot;no I don&#39;t know runner, can you tell me more please &quot; - take a look at whenever&#39;s readme."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531251410, "post_id": 51269222, "comment_id": 89523769, "body": "@MaxPuissant &quot;It doesn&#39;t create any log file at the Path I specified&quot; - does your user have permissions to write to that location?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531293515, "post_id": 51269222, "comment_id": 89536217, "body": "@MaxPuissant: how do you know? Show me."}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531296292, "post_id": 51269222, "comment_id": 89537848, "body": "you mean this <code>-rwxrwx--x  1 harri harri      0 juil. 10 17:10 cron_log.log</code> ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531296511, "post_id": 51269222, "comment_id": 89537969, "body": "@MaxPuissant: yes, and the command itself, just to be sure. Also, output says &quot;harri&quot;, but you&#39;re &quot;Max&quot;. :)"}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531297289, "post_id": 51269222, "comment_id": 89538405, "body": "I just used the command <code>ls -la</code> in my log folder. Max is my nickname"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531297868, "post_id": 51269222, "comment_id": 89538775, "body": "@MaxPuissant: which &quot;my log folder&quot; is that exactly, is what I&#39;m asking. Is it really a top level folder? If so, it would be.... unusual. Normally people don&#39;t do that and instead keep logs in respective project folders."}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531298117, "post_id": 51269222, "comment_id": 89538943, "body": "The log folder path is <code>my_project&#47;log</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531298949, "post_id": 51269222, "comment_id": 89539466, "body": "@MaxPuissant yeah, that&#39;s what I thought, 13 hours ago. Your cron task attemps to write to somewhere else (and likely doesn&#39;t have permissions to do that)"}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531299805, "post_id": 51269222, "comment_id": 89540066, "body": "It is not enough to set output like that : <code>set :output, &quot;&#47;log&#47;cron_log.log&quot; </code> ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531300516, "post_id": 51269222, "comment_id": 89540585, "body": "@MaxPuissant: read up on the difference between absolute and relative paths."}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531302601, "post_id": 51269222, "comment_id": 89542070, "body": "ookay thanks..  Now I see error in my log file : <code>&#47;bin&#47;bash: bundle: command not found</code>. How can I create a user instance with a rake command ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531303321, "post_id": 51269222, "comment_id": 89542508, "body": "@MaxPuissant: out of scope of the question."}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531303739, "post_id": 51269222, "comment_id": 89542762, "body": "not really : <code>I would like to create a User instance every minute. </code> I just forgot to precise that I want to do it with a rake command"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531303822, "post_id": 51269222, "comment_id": 89542816, "body": "@MaxPuissant: in this case, create a rake task which does that and simply reference it. You can&#39;t just throw random ruby code at <code>rake</code> command line tool. And how to create rake tasks <i>is</i> out of scope. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531303882, "post_id": 51269222, "comment_id": 89542867, "body": "@MaxPuissant: you did find and read whenever&#39;s readme, right?"}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531307087, "post_id": 51269222, "comment_id": 89544974, "body": "Yes sure, but did not found rake command examples to manipulate model instances."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531307672, "post_id": 51269222, "comment_id": 89545342, "body": "@MaxPuissant: that&#39;s because for running ad-hoc snippets of ruby they use another thing. And if you absolutely <i>need</i> to run your code as a rake task (for whatever reason), you&#39;re supposed to have it already or know how to make it."}, {"owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "edited": false, "score": 0, "creation_date": 1531311569, "post_id": 51269222, "comment_id": 89547884, "body": "No I don&#39;t absolutely need to run it as a rake task, all I need is just to create a new instance of my model every minute, or hour, or day :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1531236787, "creation_date": 1531236787, "answer_id": 51269222, "question_id": 51269000, "link": "https://stackoverflow.com/questions/51269000/rails-cron-task-development-environment/51269222#51269222", "title": "Rails cron task development environment", "body": "<blockquote>\n  <p>I'm trying to figure out how Whenever gem is working.</p>\n</blockquote>\n\n<p>It works by generating a crontab file with your commands. Then OS/crond take over.</p>\n\n<blockquote>\n  <p>Then I start my localhost and nothing happens, nothing in the log and it doesn't create any User instance.</p>\n</blockquote>\n\n<p>Well, that's not a valid rake command you have there. Check cron logs, you'll see an error there. Did you mean to use <code>runner</code>?</p>\n"}], "owner": {"reputation": 21, "user_id": 4780437, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOYIMwi6NDU/AAAAAAAAAAI/AAAAAAAAAC0/B7iHy3kl9C4/photo.jpg?sz=128", "display_name": "Max Puissant", "link": "https://stackoverflow.com/users/4780437/max-puissant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 51269222, "answer_count": 1, "score": 0, "last_activity_date": 1531236787, "creation_date": 1531236221, "question_id": 51269000, "link": "https://stackoverflow.com/questions/51269000/rails-cron-task-development-environment", "title": "Rails cron task development environment", "body": "<p>Im' trying to figure out how Whenever gem is working. </p>\n\n<p>I would like to create a User instance every minute. </p>\n\n<p>I put the following in my schedule.rb file : </p>\n\n<pre><code>set :output, \"/log/cron_log.log\"\nset :environment, 'development'\n\nevery 1.minute do\n  rake \"User.create!(nni: 'TEST0',\n              password: '123123',\n              password_confirmation: '123123',\n              nomprenom: 'user')\"\nend\n</code></pre>\n\n<p>Then I typed <code>whenever --update-crontab</code> and checked with <code>crontab -l</code> and get the following </p>\n\n<pre><code># Begin Whenever generated tasks for: /home/harri/Documents/argia/config/schedule.rb at: 2018-07-10 17:19:18 +0200\n* * * * * /bin/bash -l -c 'cd /home/harri/Documents/argia &amp;&amp; RAILS_ENV=development bundle exec rake User.create!(nni: '\\''TEST0'\\'', password: '\\''123123'\\'', password_confirmation: '\\''123123'\\'', nomprenom: '\\''user'\\'') --silent &gt;&gt; /log/cron_log.log 2&gt;&amp;1'\n# End Whenever generated tasks for: /home/harri/Documents/argia/config/schedule.rb at: 2018-07-10 17:19:18 +0200\n</code></pre>\n\n<p>Then I start my localhost and nothing happens, nothing in the log and it doesn't create any User instance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 2, "creation_date": 1531234574, "post_id": 51267924, "comment_id": 89515054, "body": "It doesn&#39;t really make sense to use <code>has_and_belongs_to_many</code> with <code>through</code>. If you have a join model (in your case, <code>regions_orders</code>), you should simply use <code>has_many</code> with <code>through</code>, which might fix your problem. (See <a href=\"http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>)"}, {"owner": {"reputation": 4358, "user_id": 1887927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6bf7057571f780bb62a62817fe8820c3?s=128&d=identicon&r=PG", "display_name": "Yann Chabot", "link": "https://stackoverflow.com/users/1887927/yann-chabot"}, "reply_to_user": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 0, "creation_date": 1531234953, "post_id": 51267924, "comment_id": 89515315, "body": "It&#39;s a many to many relationship"}, {"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 3, "creation_date": 1531235428, "post_id": 51267924, "comment_id": 89515635, "body": "Yes, but the <code>has_and_belongs_to_many</code> method is for cases when you don&#39;t want a join model, so you never use the <code>through</code>option.   When you do have a join model (like your case), you should use <code>has_many :regions, through: :regions_orders</code> in your <code>order</code> model, and <code>has_many :orders, through :regions_orders</code> in your <code>region</code> model.   Check the link I posted in my previous comment, it explains the difference more clearly."}, {"owner": {"reputation": 4358, "user_id": 1887927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6bf7057571f780bb62a62817fe8820c3?s=128&d=identicon&r=PG", "display_name": "Yann Chabot", "link": "https://stackoverflow.com/users/1887927/yann-chabot"}, "reply_to_user": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 0, "creation_date": 1531235718, "post_id": 51267924, "comment_id": 89515874, "body": "I agree, I removed the :through and it still does not work tho"}, {"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 1, "creation_date": 1531236493, "post_id": 51267924, "comment_id": 89516395, "body": "Rather than removing the <code>through</code> (and keeping <code>has_and_belongs_to_many</code>) you should do it the other way round, if you have the <code>regions_orders</code> model as suggested. So try <code>has_many :regions, :trough =&gt; :regions_orders</code> and maybe also update your question."}, {"owner": {"reputation": 4358, "user_id": 1887927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6bf7057571f780bb62a62817fe8820c3?s=128&d=identicon&r=PG", "display_name": "Yann Chabot", "link": "https://stackoverflow.com/users/1887927/yann-chabot"}, "edited": false, "score": 0, "creation_date": 1531244991, "post_id": 51267924, "comment_id": 89520926, "body": "I understand what you say, it does not work, it says that regions.order_id does not exsits, because it,s a many to many relationship"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 9731909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a7fa77b0f155cfe3130d550be5e6c30?s=128&d=identicon&r=PG", "display_name": "user9731909", "link": "https://stackoverflow.com/users/9731909/user9731909"}, "is_accepted": false, "score": 0, "last_activity_date": 1531252461, "creation_date": 1531252461, "answer_id": 51273061, "question_id": 51267924, "link": "https://stackoverflow.com/questions/51267924/ruby-on-rails-access-children-relation-from-has-and-belongs-to/51273061#51273061", "title": "Ruby on Rails - Access Children Relation from has_and_belongs_to", "body": "<p>Here is how you can set this up explicitly:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  has_many :regions_orders\n  has_many :regions, through: :regions_orders\nend\n\nclass RegionsOrder &lt; ApplicationRecord\n  belongs_to :order\n  belongs_to :region\nend\n\nclass Region &lt; ApplicationRecord\n  has_many :regions_orders\n  has_many :orders, through: :regions_orders\nend\n</code></pre>\n\n<p>The regions_orders table is the join table and will have the order_id and region_id columns, along with any other columns you wish to put in it. These additional columns should reflect some entity that is a combination of the region and order for that row. For example, you may have an additional column called quantity, which would represent the quantity of units sold for the order in that region. So one row of your join table could look like this for order_id, region_id and quantity respectively: 22, 12, 1000. Which means that 1000 units were sold in region 12 (this is the id for the region in the regions table) for order 22 (this is the id for the order in the orders table). I don't know what you are trying to model, but I hope this helps.</p>\n"}], "owner": {"reputation": 4358, "user_id": 1887927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6bf7057571f780bb62a62817fe8820c3?s=128&d=identicon&r=PG", "display_name": "Yann Chabot", "link": "https://stackoverflow.com/users/1887927/yann-chabot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531252461, "creation_date": 1531233147, "question_id": 51267924, "link": "https://stackoverflow.com/questions/51267924/ruby-on-rails-access-children-relation-from-has-and-belongs-to", "title": "Ruby on Rails - Access Children Relation from has_and_belongs_to", "body": "<p>I'm having a problem with this one, and I cannot find the answer anywhere on the Internet.</p>\n\n<p>Here is the error I'm getting:</p>\n\n<pre><code>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"region_translations\"\nLINE 1: ...ions\".\"id\" = \"orders_regions\".\"region_id\" WHERE ((region_tra...\n</code></pre>\n\n<p>So I have the class Order, that has this relation:</p>\n\n<pre><code>has_and_belongs_to_many :regions, :trough =&gt; :regions_orders\n</code></pre>\n\n<p>Then, I have this method in the rails admin section:</p>\n\n<pre><code>rails_admin do\n    parent Booklet\n\n    list do\n\n      field :first_name\n      field :last_name\n      field :sent\n      field :address\n      field :state\n      field :city\n      field :postal_code\n\n      field :booklets_orders\n      field :regions\n      field :language\n\n      field :regions do\n          searchable ({Region::Translation =&gt; :title})\n          sortable({:region_translations =&gt; :title})\n          filterable true\n          queryable true\n      end\n</code></pre>\n\n<p>Then, I see the region appearing in the possible filter, but if I try a request, I get the error mentionned above. From what I understand, it's because it is not doing a left join between the table <code>orders_regions.region_id</code> and the <code>region_translation</code>. But I am honestly not sure how to access it, the relation is properly set between <code>region</code> and <code>region_translation</code> (it works everywhere in the site), so I'm stucked there... Any clues ?</p>\n"}, {"tags": ["ruby", "pdf", "prawn", "cmyk"], "answers": [{"tags": [], "owner": {"reputation": 12442, "user_id": 849697, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0c91f58ffa7bbf4151cae13b5c8b9ccd?s=128&d=identicon&r=PG", "display_name": "xxjjnn", "link": "https://stackoverflow.com/users/849697/xxjjnn"}, "is_accepted": true, "score": 0, "last_activity_date": 1531232527, "creation_date": 1531232527, "answer_id": 51267703, "question_id": 51267702, "link": "https://stackoverflow.com/questions/51267702/prawnpdf-text-as-cmyk-color/51267703#51267703", "title": "PrawnPDF text as CMYK color", "body": "<p>Setting the <code>fill_color</code> and the <code>stroke_color</code> won't affect the visual appearance in the PDF, but it will mean that there are no longer any pesky RGB references in the PDF</p>\n\n<pre><code>d = Prawn::Document.new( page_size: [595,842] )\nd.fill_color [3, 89, 86, 0]\nd.stroke_color [3, 89, 86, 0]\nd.text( 'hello world', color: [3, 89, 86, 0] )\nd.render\n</code></pre>\n"}], "owner": {"reputation": 12442, "user_id": 849697, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0c91f58ffa7bbf4151cae13b5c8b9ccd?s=128&d=identicon&r=PG", "display_name": "xxjjnn", "link": "https://stackoverflow.com/users/849697/xxjjnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 51267703, "answer_count": 1, "score": 1, "last_activity_date": 1531232527, "creation_date": 1531232527, "question_id": 51267702, "link": "https://stackoverflow.com/questions/51267702/prawnpdf-text-as-cmyk-color", "title": "PrawnPDF text as CMYK color", "body": "<p>When creating a PDF using PrawnPDF with code:</p>\n\n<pre><code>d = Prawn::Document.new( page_size: [595,842] )\nd.text( 'hello world', color: [3, 89, 86, 0] )\nd.render\n</code></pre>\n\n<p>And then <a href=\"https://stackoverflow.com/a/30106866/849697\">decompressing</a> the PDF and inspecting the contents, there should only be <code>/DeviceCMYK CS</code> in there but there are also <code>/DeviceRGB CS</code> in there also.</p>\n\n<p>Trying to get everything CMYK</p>\n"}, {"tags": ["ruby", "post", "sinatra", "shopify", "webhooks"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1531231716, "post_id": 51267168, "comment_id": 89513001, "body": "Take a look at Sidekiq, ActiveJob and similar."}], "answers": [{"tags": [], "owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "is_accepted": true, "score": 0, "last_activity_date": 1531240166, "creation_date": 1531240166, "answer_id": 51270205, "question_id": 51267168, "link": "https://stackoverflow.com/questions/51267168/run-code-in-sinatra-after-the-response-has-been-sent/51270205#51270205", "title": "Run code in sinatra after the response has been sent", "body": "<p>You can use any <a href=\"https://www.ruby-toolbox.com/categories/Background_Jobs\" rel=\"nofollow noreferrer\">solution for background jobs processing</a>. <a href=\"https://github.com/mperham/sidekiq/blob/master/examples/sinkiq.rb\" rel=\"nofollow noreferrer\">Here</a> is example for Sidekiq usage with Sinatra.</p>\n\n<p>You can try to use Threads as well:</p>\n\n<pre><code>set :threaded, true\n\npost '/' do\n    request.body.rewind\n    data = request.body.read\n    Thread.new do\n      # data processing staff goes here\n    end\n    # here goes response\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10059535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f99434192b3bf51534984e9996c03d48?s=128&d=identicon&r=PG&f=1", "display_name": "BobKerman", "link": "https://stackoverflow.com/users/10059535/bobkerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 51270205, "answer_count": 1, "score": 0, "last_activity_date": 1531240166, "creation_date": 1531230973, "question_id": 51267168, "link": "https://stackoverflow.com/questions/51267168/run-code-in-sinatra-after-the-response-has-been-sent", "title": "Run code in sinatra after the response has been sent", "body": "<p>I'm pretty new to Ruby and Sinatra and I'm trying to set up a basic sinatra server to listen for HTTP post requests, and then process the data.</p>\n\n<p>I need to send the response within 5 seconds or the server (shopify) which sends the POST thinks that the request has failed and sends it again. To avoid that, Shopify advises to defer processing until after the response has been sent.</p>\n\n<p>I'm not sure how to trigger my processing once Sinatra has sent the response.</p>\n\n<p>Will this work ?</p>\n\n<pre><code>require 'sinatra'\nrequire 'json'\n\nwebhook_data = Order.new\npost '/' do\n    request.body.rewind\n    data = request.body.read\n    webhook_data.parsed_json = JSON.parse(data)\n    puts \"My response gets sent here, right ?\"\nend\n\nafter do\n    #DO MY PROCESSING HERE\nend\n</code></pre>\n\n<p>Is there any better way to do this ?</p>\n"}, {"tags": ["ruby", "user-controls"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1531230494, "post_id": 51266709, "comment_id": 89511964, "body": "wrap everything in a method/class/lambda"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1531242053, "post_id": 51266709, "comment_id": 89519475, "body": "Erm... Rather than asking users to copy+paste a chunk of code, and modify some parts of it (e.g. a <code>token</code>), why not make this a method/rake task/whatever and add a required parameter(s) (or <code>ENV</code> variable)? Copy-pasting code directly into the terminal is not a good user experience!"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1531248139, "post_id": 51266709, "comment_id": 89522305, "body": "The particular use case here, is a documentation with almost-ready-to-copy-paste code examples that explains how to use a given service from the console (so the documentation and the examples to copy-paste are already very high level). We need flexibility, not hardcoded code, and often those scripts are scripts you&#39;ll run once of twice in the life of the whole application."}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531248563, "creation_date": 1531229693, "last_edit_date": 1531248563, "question_id": 51266709, "link": "https://stackoverflow.com/questions/51266709/ruby-shell-how-to-stop-a-repl-copy-paste-from-executing", "title": "Ruby shell : how to stop a REPL copy-paste from executing?", "body": "<p>I have some quite long script that I want users to slightly adapt to their scenario before they can copy paste in in some IRB or pry shell. </p>\n\n<p>Most people would, unless paying attention, blindly copy-paste the script in some console. I'd like to stop parsing/executing the rest of the code and (for example) require a user to explicitely validate that he wants to continue running the script (for example via a simple gets that force the user to type <code>enter</code>)</p>\n\n<p>I was thinking of something like (imagine this is the code of a wiki that one would copy paste)</p>\n\n<pre><code># Start script\n[...] # Some stuff\n# Copy paste the autorization code you receive from the internet in the `token` variable\nstring = (\"Do not blindly copy-paste, Did you do what was written in the command just above ? We need the token in the `token` variable. If you did it, just press enter. Otherwise abort with CTRL+C and restart the script\".purple)\nputs string\ngets\nService.call(token)\n</code></pre>\n\n<p>The problem is that the gets/coloration seems to break further execution of the copy pasted script.</p>\n\n<p>My question is, assuming you have a chunk of code that you copy paste using REPL, is there a way to abort/pause the automatic Read-Evaluate print loop via some code contained in the chunk that is copied ?</p>\n\n<p>Basically I'm writing some test procedure that testers can just copy paste in their terminal to check a feature is working. 99% of the time, is is enough to just set some variables and copy-paste the code provided in the examples. But sometimes, there are some (optional) manual steps to be done in the middle of the execution of the code that is copy pasted (like copying a token, retrieving the automatically generated ID, etc.)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531227579, "post_id": 51265715, "comment_id": 89509711, "body": "See the source code at <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html#method-c-base64\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/&hellip;</a> and <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html#method-c-hex\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/&hellip;</a> ?"}, {"owner": {"reputation": 724, "user_id": 1669346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18af6213366086ea2517bb00cce8de1d?s=128&d=identicon&r=PG", "display_name": "Seed", "link": "https://stackoverflow.com/users/1669346/seed"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531228964, "post_id": 51265715, "comment_id": 89510837, "body": "Thanks but that doesn&#39;t help. I already looked at the source code and did not understand, hence the question."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1531229404, "post_id": 51265715, "comment_id": 89511154, "body": "These are not Ruby concepts, you should learn what <a href=\"https://en.wikipedia.org/wiki/Base64\" rel=\"nofollow noreferrer\">Base64</a> and <a href=\"https://en.wikipedia.org/wiki/Hexadecimal\" rel=\"nofollow noreferrer\">Hexadecimal</a> are. The question as asked doesn&#39;t really make it clear what you&#39;re asking. Do you want to know what the difference is between these two functions, or which is better suited to generating random passwords?"}, {"owner": {"reputation": 724, "user_id": 1669346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18af6213366086ea2517bb00cce8de1d?s=128&d=identicon&r=PG", "display_name": "Seed", "link": "https://stackoverflow.com/users/1669346/seed"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1531237632, "post_id": 51265715, "comment_id": 89517140, "body": "Thanks for the explanation @meagar. Feedback like that is much more conducive to refining my question. Just plainly listing documentation and down voting without feedback is poor etiquette."}], "answers": [{"comments": [{"owner": {"reputation": 724, "user_id": 1669346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18af6213366086ea2517bb00cce8de1d?s=128&d=identicon&r=PG", "display_name": "Seed", "link": "https://stackoverflow.com/users/1669346/seed"}, "edited": false, "score": 0, "creation_date": 1531228304, "post_id": 51266158, "comment_id": 89510303, "body": "Thanks for the simple breakdown!"}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": true, "score": 4, "last_activity_date": 1531228178, "creation_date": 1531228178, "answer_id": 51266158, "question_id": 51265715, "link": "https://stackoverflow.com/questions/51265715/what-are-use-cases-to-use-securerandom-base64-over-securerandom-hex/51266158#51266158", "title": "What are use cases to use `SecureRandom.base64` over `SecureRandom.hex`?", "body": "<p>The difference between Base64 and hex is really just how bytes are represented. Hex is another way of saying \"Base16\". Hex will take two characters for each byte - Base64 takes 4 characters for every 3 bytes, so it's more efficient than hex. ... If it does matter, then clearly Base64 is better on that front.</p>\n"}], "owner": {"reputation": 724, "user_id": 1669346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18af6213366086ea2517bb00cce8de1d?s=128&d=identicon&r=PG", "display_name": "Seed", "link": "https://stackoverflow.com/users/1669346/seed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "closed_date": 1531229441, "accepted_answer_id": 51266158, "answer_count": 1, "score": 0, "last_activity_date": 1531238238, "creation_date": 1531227013, "last_edit_date": 1531238238, "question_id": 51265715, "link": "https://stackoverflow.com/questions/51265715/what-are-use-cases-to-use-securerandom-base64-over-securerandom-hex", "closed_reason": "Needs details or clarity", "title": "What are use cases to use `SecureRandom.base64` over `SecureRandom.hex`?", "body": "<p><strong>Objective</strong> is to create a random encoded string. But I'm not a computer science major, any explanation in layman terms would be much appreciated.</p>\n\n<pre><code>irb(main):002:0&gt; SecureRandom.base64\n=&gt; \"9VpzpvCR4ww/ZQc9lN148A==\"\nirb(main):003:0&gt; SecureRandom.hex\n=&gt; \"29b6cd61ec3e58959b006b6d98550b97\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "group-by"], "comments": [{"owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1531230746, "post_id": 51265549, "comment_id": 89512155, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12097844/group-users-by-age-range-in-ruby\">Group Users by Age Range in ruby</a>"}, {"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "reply_to_user": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1531237845, "post_id": 51265549, "comment_id": 89517285, "body": "It can be solved in the same way, I don&#39;t think it is a duplicate though. @Sixty4Bit"}, {"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "edited": false, "score": 0, "creation_date": 1531238094, "post_id": 51265549, "comment_id": 89517449, "body": "Can you mention a sample output you want please?"}], "answers": [{"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": -1, "last_activity_date": 1531229327, "creation_date": 1531229327, "answer_id": 51266579, "question_id": 51265549, "link": "https://stackoverflow.com/questions/51265549/rails-custom-group-by/51266579#51266579", "title": "Rails custom group_by", "body": "<p>As per the description given in the post, something done as below could help you group the data:</p>\n\n<pre><code>result_array_0_40 = [];result_array_40_60 = [];result_array_60_90 = [];result_array_90 = [];\nresult_json = {}\n</code></pre>\n\n<p>Now, we need to iterate over values and manually group them into dynamic key value pairs</p>\n\n<pre><code>PARTITION.each do |x|\n    result_array_0_40.push(x) if (0..40).include?(x)\n    result_array_40_60.push(x) if (40..60).include?(x)\n    result_array_60_90.push(x) if (60..90).include?(x)\n    result_array_90.push(x) if x &gt; 90\n    result_json[\"0..40\"]  = result_array_0_40\n    result_json[\"40..60\"] = result_array_40_60\n    result_json[\"60..90\"] = result_array_60_90\n    result_json[\"90+\"]    = result_array_90\nend\n</code></pre>\n\n<p>Hope it Helps!!</p>\n"}, {"tags": [], "owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1531239949, "creation_date": 1531239949, "answer_id": 51270155, "question_id": 51265549, "link": "https://stackoverflow.com/questions/51265549/rails-custom-group-by/51270155#51270155", "title": "Rails custom group_by", "body": "<h2>Assumptions:</h2>\n\n<ol>\n<li>This partitioning is for display purposes.</li>\n<li>The attribute you want to group by is <code>days</code></li>\n<li>You want to the result a hash</li>\n</ol>\n\n<p><code>{ 0 =&gt; [&lt;Post1&gt;], 40 =&gt; [&lt;Post12&gt;], 60 =&gt; [&lt;Post41&gt;], 90 =&gt; [&lt;Post101&gt;] }</code></p>\n\n<hr>\n\n<p>add these methods to your model</p>\n\n<pre><code># post.rb\n\ndef self.age_partitioned\n  group_by(&amp;:age_partition)\nend\n\ndef age_partition\n  [90, 60, 40, 0].find(days) # replace days by the correct attribute name\nend\n\n# Now to use it\n\nPost.where(filters).includes(:all_what_you_want).age_partitioned\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1531297715, "post_id": 51270216, "comment_id": 89538674, "body": "Did this help at all @UmeshMalhotra?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1531306143, "last_edit_date": 1531306143, "creation_date": 1531240198, "answer_id": 51270216, "question_id": 51265549, "link": "https://stackoverflow.com/questions/51265549/rails-custom-group-by/51270216#51270216", "title": "Rails custom group_by", "body": "<p>Here's a simple approach:</p>\n\n<pre><code>posts.each_with_object(Hash.new { |h, k| h[k] = [] }) do |post, hash|\n  days_old = (Date.today - post.created_at.to_date).to_i\n  case days_old\n  when 0..39\n    hash[0] &lt;&lt; post\n  when 40..59\n    hash[40] &lt;&lt; post\n  when 60..89\n    hash[60] &lt;&lt; post\n  when 90..Float::INFINITY # or 90.. in the newest Ruby versions\n    hash[90] &lt;&lt; post\n  end\nend\n</code></pre>\n\n<p>This iterates through the posts, along with a hash which has a <a href=\"https://stackoverflow.com/questions/30367487/creating-a-hash-with-values-as-arrays-and-default-value-as-empty-array#answer-30371153\">default value of an empty array</a>.</p>\n\n<p>Then, we simply check how many days ago a post was created and add it to relevant key of the hash.</p>\n\n<p>This hash is then returned when all posts have been processed.</p>\n\n<p>You can use whatever you want for the keys (e.g. <code>hash[\"&lt; 40\"]</code>), though I've used your partitions for illustrative purposes.</p>\n\n<p>The result will be something akin to the following:</p>\n\n<pre><code>{ 0:  [post_1, post_3, etc],\n  40: [etc],\n  60: [etc],\n  90: [etc] }\n</code></pre>\n\n<p>Hope this helps - let me know if you've got any questions.</p>\n\n<hr>\n\n<p>Edit: it's a little trickier if your <code>PARTITIONS</code> are coming from an external source, though the following would work:</p>\n\n<pre><code># transform the PARTITIONS into an array of ranges\nranges = PARTITIONS.map.with_index do |p, i|\n  return 0..(p - 1) if i == 0 # first range is 0..partition minus 1\n  return i..Float::INFINITY if i + 1 == PARTITIONS.length # last range is partition to infinity\n  p..(PARTITIONS[i + 1] - 1)\nend\n\n#\u00a0loop through the posts with a hash with arrays as the default value\nposts.each_with_object(Hash.new { |h, k| h[k] = [] }) do |post, hash|\n  # loop through the new ranges\n  ranges.each do |range|\n    days_old = Date.today - post.created_at.to_date\n    hash[range] &lt;&lt; post if range.include?(days_old) # add the post to the hash key for the range if it's present within the range\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>A final edit:</p>\n\n<p>Bit silly using <code>each_with_object</code> when <a href=\"https://apidock.com/rails/Enumerable/group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> will handle this perfectly. Example below:</p>\n\n<pre><code>posts.group_by |post|\n  days_old = (Date.today - post.created_at.to_date).to_i\n  case days_old\n  when 0..39\n    0\n  when 40..59\n    40\n  when 60..89\n    60\n  when 90..Float::INFINITY # or 90.. in the newest Ruby versions\n    90\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 6046641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c716b970d2d8e6ca81ed19a4b0c26fb1?s=128&d=identicon&r=PG", "display_name": "Umesh Malhotra", "link": "https://stackoverflow.com/users/6046641/umesh-malhotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1531306143, "creation_date": 1531226580, "last_edit_date": 1531241691, "question_id": 51265549, "link": "https://stackoverflow.com/questions/51265549/rails-custom-group-by", "title": "Rails custom group_by", "body": "<p>I have an array <code>PARTITION</code> which stores days. </p>\n\n<p>I want to <code>group_by</code> my <code>posts</code> (<code>ActiveRecord::Relation</code>) according to how old are they and in which partition they lie.</p>\n\n<p>Example: <code>PARTITION = [0, 40, 60, 90]</code></p>\n\n<p>I want to group posts which are 0 to 40 days old, 40 to 60 days old, 60 to 90 days old and older than 90 days. </p>\n\n<p>Please note that I will get array data from an external source and I don't want to use a <code>where</code> clause because I am using <code>includes</code> and <code>where</code> fires db query making includes useless. </p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 2, "creation_date": 1531226722, "post_id": 51265500, "comment_id": 89509049, "body": "you can&#39;t change login route to <code>&#47;users</code> because its already defined . as you write this route in route file, try to visit <code>&#47;users&#47;login</code>, it will work. let me know if you get any error"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531231355, "post_id": 51265500, "comment_id": 89512680, "body": "<code>undefined method devise_scope</code> I also have no idea what&#39;s wrong. According to the official documentation, if you have installed <code>devise</code> properly then that should work. Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Did you run <code>bundle install</code>? How are you running the server? (For example, could the gem not be loaded due to some cacheing?) Can you reproduce it on a brand new app?"}, {"owner": {"reputation": 1, "user_id": 10053456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786d5243734fa7a959057aed998d7f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tony L", "link": "https://stackoverflow.com/users/10053456/tony-l"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1531239596, "post_id": 51265500, "comment_id": 89518263, "body": "@Vishal apologies, what I meant is I am trying to change &quot;the users/sign_in&quot; route to &quot;/login&quot;. The issue is &quot;devise_scope&quot; is not recognized. Thanks :)"}, {"owner": {"reputation": 1, "user_id": 10053456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786d5243734fa7a959057aed998d7f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tony L", "link": "https://stackoverflow.com/users/10053456/tony-l"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531239879, "post_id": 51265500, "comment_id": 89518396, "body": "@TomLord I included gem &#39;devise&#39; in my Gemfile. Saved it and then ran &quot;bundle install&quot; in the terminal. The gem seemed to be well installed, because I could successfully  &quot;rails generate devise User&quot; and &quot;rails generate devise:views&quot;- both the routes and the views were successfully generated. My server is Puma and my current Rails version is 5.2.0. I&#180;m going to try in a new app. Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531241717, "post_id": 51270285, "comment_id": 89519306, "body": "Ohhh... Yeah, this is why I asked for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I wouldn&#39;t have guessed that &quot;typing in the following into my routes.rb&quot; (on line 6) would be outside of the <code>Rails.application.routes.draw</code> block!  ;)"}], "tags": [], "owner": {"reputation": 1, "user_id": 10053456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786d5243734fa7a959057aed998d7f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tony L", "link": "https://stackoverflow.com/users/10053456/tony-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1552410081, "last_edit_date": 1552410081, "creation_date": 1531240467, "answer_id": 51270285, "question_id": 51265500, "link": "https://stackoverflow.com/questions/51265500/devise-scope-no-object-error-ruby-on-rails/51270285#51270285", "title": "devise_scope no object error, Ruby On Rails", "body": "<p>It turns out that within config/routes.rb, the code must be as follows;</p>\n\n<pre><code>Rails.application.routes.draw do\n    devise_scope :user do\n        get 'login', to: 'devise/sessions#new'\n    end \nend \n</code></pre>\n\n<p>I was previously only inserting the following;</p>\n\n<pre><code>devise_scope :user do\n    get 'login', to: 'devise/sessions#new'\nend \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10053456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786d5243734fa7a959057aed998d7f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tony L", "link": "https://stackoverflow.com/users/10053456/tony-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552410081, "creation_date": 1531226429, "last_edit_date": 1531228273, "question_id": 51265500, "link": "https://stackoverflow.com/questions/51265500/devise-scope-no-object-error-ruby-on-rails", "title": "devise_scope no object error, Ruby On Rails", "body": "<p>I\u00b4ve installed <code>gem 'devise'</code> into a basic Ruby On Rails app and when trying to change my \"/users/sign_in\" route to \"/users\" by typing in the following into my routes.rb file; </p>\n\n<pre><code>devise_scope :user do\n  get 'login', to: 'devise/sessions#new'\nend\n</code></pre>\n\n<p>I get the following error, when trying to initiate the server;</p>\n\n<blockquote>\n  <p>/Users/tony/projects/collabfield/config/routes.rb:6:in <code>&lt;main&gt;':\n  undefined method</code>devise_scope' for main:Object (NoMethodError)</p>\n</blockquote>\n\n<p>I have no idea what\u00b4s wrong. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rake", "mysql2"], "comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531226423, "post_id": 51264240, "comment_id": 89508811, "body": "Can you show us code sample, what have you tried so far?"}, {"owner": {"reputation": 855, "user_id": 6013582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGso5.png?s=128&g=1", "display_name": "s89_", "link": "https://stackoverflow.com/users/6013582/s89"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531226684, "post_id": 51264240, "comment_id": 89509020, "body": "So far I have tried most solutions on stackoverflow - 1) adding mysql to PATH 2) installing newer gem version of mysql2 (0.4.10) since my installation instructions asked for 0.4.5 3) and lastly, this solution - <a href=\"https://afshinm.name/2016/02/05/how-to-fix-library-not-loaded-libmysqlclient-18-dylib-in-mac-os-x/\" rel=\"nofollow noreferrer\">afshinm.name/2016/02/05/&hellip;</a>"}, {"owner": {"reputation": 855, "user_id": 6013582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGso5.png?s=128&g=1", "display_name": "s89_", "link": "https://stackoverflow.com/users/6013582/s89"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531226742, "post_id": 51264240, "comment_id": 89509061, "body": "@Gabbar what code sample would you like, and how would that help?  I&#39;m installing a Rails App from github which I&#39;d like to contribute to."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1531231866, "post_id": 51264240, "comment_id": 89513106, "body": "Are you on Mac? Maybe use <code>brew</code>, or your preferred package manager to install libssl."}, {"owner": {"reputation": 855, "user_id": 6013582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGso5.png?s=128&g=1", "display_name": "s89_", "link": "https://stackoverflow.com/users/6013582/s89"}, "edited": false, "score": 0, "creation_date": 1531236038, "post_id": 51264240, "comment_id": 89516101, "body": "Yeah on a Mac.  Tried that also, didn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 651, "user_id": 7644846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131da3dcef0f01ebd7ed9cd22214b297?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/7644846/victor"}, "edited": false, "score": 0, "creation_date": 1617049983, "post_id": 51269245, "comment_id": 118188771, "body": "NO! :(. I followed these commands and it installed here the MySQL 8.0 locally, but my project need to be with MySQL 5.7 version. Therefore, these commands completely messes up my project and <b>it was required to reinstall the mysql completely</b>."}], "tags": [], "owner": {"reputation": 855, "user_id": 6013582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGso5.png?s=128&g=1", "display_name": "s89_", "link": "https://stackoverflow.com/users/6013582/s89"}, "is_accepted": true, "score": 1, "last_activity_date": 1531236852, "creation_date": 1531236852, "answer_id": 51269245, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib/51269245#51269245", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>So the answer to my own question was the following - out of the 5 or so other solutions on stackoverflow, this is the only one that worked:</p>\n\n<pre><code>brew install openssl\n\ncd /usr/local/Cellar/openssl/1.0.1f/lib\n\nsudo cp libssl.1.0.0.dylib libcrypto.1.0.0.dylib /usr/lib/\n</code></pre>\n\n<p>Full solution here - <a href=\"https://mithun.co/hacks/library-not-loaded-libcrypto-1-0-0-dylib-issue-in-mac/\" rel=\"nofollow noreferrer\">https://mithun.co/hacks/library-not-loaded-libcrypto-1-0-0-dylib-issue-in-mac/</a></p>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 6888060, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10154451453058950/picture?type=large", "display_name": "Mickey Mahoney", "link": "https://stackoverflow.com/users/6888060/mickey-mahoney"}, "edited": false, "score": 1, "creation_date": 1535586615, "post_id": 51819305, "comment_id": 91125282, "body": "Thanks, @michael. I was trying to fix a bug for weeks now and the solution you provided is the one that worked. What a relief, man!"}, {"owner": {"reputation": 139, "user_id": 2187161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w4jEg.png?s=128&g=1", "display_name": "Trevor Elwell", "link": "https://stackoverflow.com/users/2187161/trevor-elwell"}, "edited": false, "score": 0, "creation_date": 1554187419, "post_id": 51819305, "comment_id": 97647953, "body": "This is the correct answer, though I had to run <code>brew reinstall openssl</code> to see these notes since I already had it installed."}, {"owner": {"reputation": 355, "user_id": 1150701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eyYPI.jpg?s=128&g=1", "display_name": "xsdf", "link": "https://stackoverflow.com/users/1150701/xsdf"}, "edited": false, "score": 1, "creation_date": 1587769785, "post_id": 51819305, "comment_id": 108649939, "body": "This is almost right answer for me. After installing check the output: <code>For compilers to find openssl@1.1 you may need to set:   export LDFLAGS=&quot;-L&#47;usr&#47;local&#47;opt&#47;openssl@1.1&#47;lib&quot;   export CPPFLAGS=&quot;-I&#47;usr&#47;local&#47;opt&#47;openssl@1.1&#47;include&quot; </code> use those flags listed in output when installing mysql2 gem"}], "tags": [], "owner": {"reputation": 271, "user_id": 4450710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0UFH2sPReUY/AAAAAAAAAAI/AAAAAAAAAkw/FtVDeHS9Yig/photo.jpg?sz=128", "display_name": "Michael Erb", "link": "https://stackoverflow.com/users/4450710/michael-erb"}, "is_accepted": false, "score": 27, "last_activity_date": 1534152871, "creation_date": 1534152871, "answer_id": 51819305, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib/51819305#51819305", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>First uninstall the mysql2 gem:</p>\n\n<pre><code>gem uninstall mysql2\n</code></pre>\n\n<p>Make sure you installed openssl:</p>\n\n<pre><code>brew install openssl\n</code></pre>\n\n<p>It will print out some notes. We are interested in this part:</p>\n\n<pre><code>For compilers to find this software you may need to set:\nLDFLAGS:  -L/usr/local/opt/openssl/lib\nCPPFLAGS: -I/usr/local/opt/openssl/include\n</code></pre>\n\n<p>Then you can re-install mysql2 gem like this:</p>\n\n<pre><code>gem install mysql2 -v 0.4.10 -- --with-cppflags=-I/usr/local/opt/openssl/include --with-ldflags=-L/usr/local/opt/openssl/lib\n</code></pre>\n\n<p>You should be good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 11900, "user_id": 303347, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/508b6e7bd360b4096447ffe8545f4878?s=128&d=identicon&r=PG", "display_name": "Arunabh Das", "link": "https://stackoverflow.com/users/303347/arunabh-das"}, "is_accepted": false, "score": 8, "last_activity_date": 1568044687, "creation_date": 1568044687, "answer_id": 57857442, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib/57857442#57857442", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>Following fix solves the issue </p>\n\n<pre><code>   ==&gt; cd /usr/local/Cellar/openssl/1.0.2s/lib/\n\n==&gt; sudo cp libssl.1.0.0.dylib libcrypto.1.0.0.dylib /usr/local/lib\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24853, "user_id": 446681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBjgR.jpg?s=128&g=1", "display_name": "Hector Correa", "link": "https://stackoverflow.com/users/446681/hector-correa"}, "is_accepted": false, "score": 1, "last_activity_date": 1573575722, "creation_date": 1573575722, "answer_id": 58822721, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib/58822721#58822721", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>In my case just uninstalling and installing the mysql2 gem did the trick </p>\n\n<pre><code>$ gem uninstall mysql2\n</code></pre>\n\n<pre><code>$ bundle install \n&gt; Fetching mysql2 0.4.10\n&gt; Installing mysql2 0.4.10 with native extensions\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 651, "user_id": 7644846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131da3dcef0f01ebd7ed9cd22214b297?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/7644846/victor"}, "edited": false, "score": 0, "creation_date": 1615263152, "post_id": 58909764, "comment_id": 117630674, "body": "Well, it worked here! This should be marked as the right answer. Simple, but effective, like ALL things SHOULD be. Thanks."}, {"owner": {"reputation": 651, "user_id": 7644846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131da3dcef0f01ebd7ed9cd22214b297?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/7644846/victor"}, "edited": false, "score": 0, "creation_date": 1617049551, "post_id": 58909764, "comment_id": 118188606, "body": "Well... I remove my words, this installed MySQL version 8.0 here and bugged everything. On my case I still need to keep with the MySQL version 5.7."}], "tags": [], "owner": {"reputation": 2451, "user_id": 10866236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nC1W.jpg?s=128&g=1", "display_name": "Cool.wen", "link": "https://stackoverflow.com/users/10866236/cool-wen"}, "is_accepted": false, "score": 1, "last_activity_date": 1574062158, "creation_date": 1574062158, "answer_id": 58909764, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib/58909764#58909764", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>just one command: </p>\n\n<p><code>gem pristine mysql2</code></p>\n\n<p>then i fix this problem</p>\n"}, {"tags": [], "owner": {"reputation": 1562, "user_id": 6432429, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6Horz.png?s=128&g=1", "display_name": "Matthew Hinea", "link": "https://stackoverflow.com/users/6432429/matthew-hinea"}, "is_accepted": false, "score": 0, "last_activity_date": 1601323534, "creation_date": 1601323534, "answer_id": 64108926, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib/64108926#64108926", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>For users of <code>rbenv</code>:</p>\n<pre><code> brew uninstall openssl\n brew install rbenv/tap/openssl@1.0\n\n gem uninstall mysql2\n gem install mysql2 -v '0.4.10' -- --with-opt-dir=&quot;$(brew --prefix rbenv/tap/openssl@1.0)&quot;\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 6013582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGso5.png?s=128&g=1", "display_name": "s89_", "link": "https://stackoverflow.com/users/6013582/s89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5271, "favorite_count": 5, "accepted_answer_id": 51269245, "answer_count": 6, "score": 11, "last_activity_date": 1601323534, "creation_date": 1531222758, "question_id": 51264240, "link": "https://stackoverflow.com/questions/51264240/rake-dbmigrate-error-with-mysql2-gem-library-not-loaded-libssl-1-0-0-dylib", "title": "rake db:migrate error with mysql2 gem - Library not loaded: libssl.1.0.0.dylib", "body": "<p>Getting the following error after running rake db:migrate</p>\n\n<pre><code>rake aborted!\nLoadError: dlopen(/Users/scott/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10/lib/mysql2/mysql2.bundle, 9): Library not loaded: libssl.1.0.0.dylib\n  Referenced from: /Users/scott/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10/lib/mysql2/mysql2.bundle\n  Reason: image not found - /Users/scott/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/mysql2-0.4.10/lib/mysql2/mysql2.bundle\n/Users/scott/Google Drive/playground/myApp/myApp/config/application.rb:21:in `&lt;top (required)&gt;'\n/Users/scott/Google Drive/playground/myApp/myApp/Rakefile:4:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>What does the libssl refer to? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531222091, "post_id": 51263877, "comment_id": 89505834, "body": "In your models, you have specified a string to <code>if:</code> or <code>unless:</code> in one or more callbacks e.g. <code>before_save :do_something, if: &#39;2 + 3 &gt; 0&#39;</code>. Instead, use a symbol (if the string part is a method) or a proc e.g. <code>before_save :do_something, if: -&gt; { 2 + 3 &gt; 0 }</code>. This is the best i can explain with no code in your question. :)"}, {"owner": {"reputation": 89, "user_id": 9136318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba32997bd40a5a809cab469bb731d16?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9136318/rahul"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531287106, "post_id": 51263877, "comment_id": 89533221, "body": "@JagdeepSingh this is where I have if block. How I need to change this"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531287607, "post_id": 51263877, "comment_id": 89533406, "body": "Anywhere in your models?"}, {"owner": {"reputation": 89, "user_id": 9136318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba32997bd40a5a809cab469bb731d16?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9136318/rahul"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531292042, "post_id": 51263877, "comment_id": 89535441, "body": "@JagdeepSingh initial the project was developed using rails 5 afterward we have upgraded to 5.2. is this dependencies issues?"}, {"owner": {"reputation": 89, "user_id": 9136318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba32997bd40a5a809cab469bb731d16?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9136318/rahul"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531299055, "post_id": 51263877, "comment_id": 89539546, "body": "hi jagdeep I have used gem invoicing as per there docs, I have used act_as method when I removed that method it is working"}], "owner": {"reputation": 89, "user_id": 9136318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba32997bd40a5a809cab469bb731d16?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9136318/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 717, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531286940, "creation_date": 1531221643, "last_edit_date": 1531286940, "question_id": 51263877, "link": "https://stackoverflow.com/questions/51263877/check-conditionals-passing-string-to-be-evaluated-in-if-and-unless-conditio", "title": "`check_conditionals&#39;: Passing string to be evaluated in :if and :unless conditional options is not supported (ArgumentError)", "body": "<p>when I run rails server in development mode it will run. But if I tried to run RAILS_ENV=production rails server it is showing some errors I am unable to resolve it.\nThis is my error logs:-</p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 5.2.0 application starting in production \n=&gt; Run `rails server -h` for more startup options\nExiting\n/home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:355:in `check_conditionals': Passing string to be evaluated in :if and :unless conditional options is not supported. Pass a symbol for an instance method, or a lambda, proc or block, instead. (ArgumentError)\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:301:in `initialize'\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:289:in `new'\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:289:in `build'\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:672:in `block in set_callback'\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:671:in `map'\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:671:in `set_callback'\n    from /home/sharat/.rvm/gems/ruby-2.4.3/gems/activemodel-5.2.0/lib/active_model/callbacks.rb:131:in `block in _define_before_model_callback'\n</code></pre>\n\n<p>My Application controller look </p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  self.responder = ApplicationResponder\n  respond_to :html\n  before_action :configure_permitted_parameters, if: :devise_controller?\n  rescue_from ActiveRecord::RecordNotFound do\n    flash[:warning] = 'Resource not found.'\n    redirect_back_or root_path\n  end\n  rescue_from CanCan::AccessDenied do |exception|\n    redirect_to role_based_path, :alert =&gt; exception.message\n  end\n\n def redirect_back_or(path)\n    redirect_to request.referer || path\n  end\n\n  def after_sign_in_path_for(resource)\n    role_based_path\n  end\n\n  protect_from_forgery with: :exception\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:username])\n      devise_parameter_sanitizer.permit(:account_update, keys: [:username, :role])\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos", "macos-mojave"], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 3185183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xNLSM.png?s=128&g=1", "display_name": "Eugenio", "link": "https://stackoverflow.com/users/3185183/eugenio"}, "edited": false, "score": 0, "creation_date": 1543924831, "post_id": 51267506, "comment_id": 94085783, "body": "In my case I needed to re-install Xcode command line tools, I think it was because I updated Xcode. This post gave me the correct hint: <a href=\"https://github.com/flori/json/issues/255\" rel=\"nofollow noreferrer\">github.com/flori/json/issues/255</a>"}, {"owner": {"reputation": 101, "user_id": 11385151, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xo4EookNqwM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNxtDrvFYQnC2YqD4zjWEsZkXcqA/mo/photo.jpg?sz=128", "display_name": "Caleb Hensley", "link": "https://stackoverflow.com/users/11385151/caleb-hensley"}, "edited": false, "score": 0, "creation_date": 1605304835, "post_id": 51267506, "comment_id": 114619468, "body": "Please provide explanations for your suggestion, describing what this command does. Thank you!"}, {"owner": {"reputation": 61, "user_id": 3988398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2908dcba6d6ae9782570a6b42239dff6?s=128&d=identicon&r=PG&f=1", "display_name": "Zaheer Moola", "link": "https://stackoverflow.com/users/3988398/zaheer-moola"}, "edited": false, "score": 1, "creation_date": 1606420357, "post_id": 51267506, "comment_id": 114965067, "body": "I had a similar issue with Xcode 12.2. This worked for me!"}, {"owner": {"reputation": 358, "user_id": 360930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e5ad1906919bf3228a3458ec4fd700?s=128&d=identicon&r=PG", "display_name": "Roger Sodr&#233;", "link": "https://stackoverflow.com/users/360930/roger-sodr%c3%a9"}, "edited": false, "score": 3, "creation_date": 1609719596, "post_id": 51267506, "comment_id": 115903902, "body": "Confirm, XCode 12 is causing the problem Switching xcode-select to XCode 11.7 works too."}], "tags": [], "owner": {"reputation": 4247, "user_id": 314546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8b43c7a0cf76fe64f2307321ace5d66?s=128&d=identicon&r=PG", "display_name": "valexa", "link": "https://stackoverflow.com/users/314546/valexa"}, "is_accepted": true, "score": 10, "last_activity_date": 1531231945, "creation_date": 1531231945, "answer_id": 51267506, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/51267506#51267506", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p>If you have the Xcode 10 beta running this might fix it</p>\n\n<pre><code>sudo xcode-select -s /Applications/Xcode-beta.app/Contents/Developer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 521, "user_id": 4517653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ba146bec57cb0df848ce6083092192?s=128&d=identicon&r=PG&f=1", "display_name": "gatkin", "link": "https://stackoverflow.com/users/4517653/gatkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1545926711, "creation_date": 1545926711, "answer_id": 53947765, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/53947765#53947765", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p>I was having this same issue where I could not install native extensions due to a failure when including \"ruby/config.h\".</p>\n\n<p>I believe the cause of this issue was because I was using the ruby version installed with Homebrew. After upgrading to a new version of Ruby with Homebrew, I saw the following helpful message from Homebrew:</p>\n\n<pre><code>ruby is keg-only, which means it was not symlinked into /usr/local,\nbecause macOS already provides this software and installing another version in\nparallel can cause all kinds of trouble.\n\nIf you need to have ruby first in your PATH run:\n echo 'export PATH=\"/usr/local/opt/ruby/bin:$PATH\"' &gt;&gt; ~/.bash_profile\n\nFor compilers to find ruby you may need to set:\n export LDFLAGS=\"-L/usr/local/opt/ruby/lib\"\n export CPPFLAGS=\"-I/usr/local/opt/ruby/include\"\n\nFor pkg-config to find ruby you may need to set:\n export PKG_CONFIG_PATH=\"/usr/local/opt/ruby/lib/pkgconfig\"\n</code></pre>\n\n<p>Adding the following lines to my ~/.bash_profile fixed the issue for me:</p>\n\n<pre><code>export LDFLAGS=\"-L/usr/local/opt/ruby/lib\"\nexport CPPFLAGS=\"-I/usr/local/opt/ruby/include\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42915, "user_id": 89484, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfbd373bb1dd5f26c066c1fc7e68288?s=128&d=identicon&r=PG", "display_name": "Paul Irish", "link": "https://stackoverflow.com/users/89484/paul-irish"}, "edited": false, "score": 1, "creation_date": 1552496629, "post_id": 54691879, "comment_id": 97035424, "body": "Thank you! All other suggestions here (and on other SO threads) failed. This was the ticket."}], "tags": [], "owner": {"reputation": 663, "user_id": 1399267, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0f5b37ac57edbd4100f175afebbcb4be?s=128&d=identicon&r=PG", "display_name": "karolszafranski", "link": "https://stackoverflow.com/users/1399267/karolszafranski"}, "is_accepted": false, "score": 6, "last_activity_date": 1550151879, "creation_date": 1550151879, "answer_id": 54691879, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/54691879#54691879", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p>I got into this issue when trying to install fastlane with homebrew. None of the suggestions mentioned earlier helped me. Manually installing the <code>macOS_SDK_headers_for_macOS_10.14.pkg</code> fixed it.</p>\n\n<pre><code>sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1405, "user_id": 270421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0cfb78b3e81ce10ac5d207abe93bd74?s=128&d=identicon&r=PG", "display_name": "f0rz", "link": "https://stackoverflow.com/users/270421/f0rz"}, "edited": false, "score": 0, "creation_date": 1606944887, "post_id": 65095576, "comment_id": 115120728, "body": "Thanks, I had similar issue with xcode 12 update. This approach helped me."}, {"owner": {"reputation": 997, "user_id": 201134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aabdb9a333b4473c2a1ca04d1072b2c3?s=128&d=identicon&r=PG", "display_name": "jonnysamps", "link": "https://stackoverflow.com/users/201134/jonnysamps"}, "edited": false, "score": 0, "creation_date": 1609174110, "post_id": 65095576, "comment_id": 115767717, "body": "I had to change the paths to point to my rbenv installation but otherwise it worked. Thanks!"}], "tags": [], "owner": {"reputation": 768, "user_id": 240942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3c56304d6e3adb7658889af56cd171?s=128&d=identicon&r=PG", "display_name": "3h4x", "link": "https://stackoverflow.com/users/240942/3h4x"}, "is_accepted": false, "score": 12, "last_activity_date": 1615802027, "last_edit_date": 1615802027, "creation_date": 1606844247, "answer_id": 65095576, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/65095576#65095576", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p>Xcode 12 upgrade messed this up for me.</p>\n<p>I installed <code>ruby</code> from <code>brew</code> and added this to my .zshrc</p>\n<pre><code>export PATH=&quot;/usr/local/opt/ruby/bin:$PATH&quot;\nexport LDFLAGS=&quot;-L/usr/local/opt/ruby/lib&quot;\nexport CPPFLAGS=&quot;-I/usr/local/opt/ruby/include&quot;\nexport PKG_CONFIG_PATH=&quot;/usr/local/opt/ruby/lib/pkgconfig&quot;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 434, "user_id": 299377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/624cd0ba478d38bd411373aa1c8593c5?s=128&d=identicon&r=PG&f=1", "display_name": "Riana", "link": "https://stackoverflow.com/users/299377/riana"}, "edited": false, "score": 3, "creation_date": 1609635094, "post_id": 65479841, "comment_id": 115884395, "body": "running Catalina - this fixed failed attempts to run &#39;gem update&#39; and &#39;gem install &lt;gems&gt;&#39;"}, {"owner": {"reputation": 37028, "user_id": 59198, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6448b40e7037dd0fda767f2370c31809?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/59198/chris"}, "edited": false, "score": 2, "creation_date": 1609821040, "post_id": 65479841, "comment_id": 115935399, "body": "Thanks so much, that helped. Appreciate that it&#39;s a &#39;clean&#39; solution."}, {"owner": {"reputation": 388, "user_id": 8202189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09abf211eb52564b5a259cb045cf1271?s=128&d=identicon&r=PG&f=1", "display_name": "Awais", "link": "https://stackoverflow.com/users/8202189/awais"}, "edited": false, "score": 1, "creation_date": 1610736370, "post_id": 65479841, "comment_id": 116235693, "body": "Thanks a lot for this solution."}, {"owner": {"reputation": 376, "user_id": 4844397, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000064623042/picture?type=large", "display_name": "Ting Yi Shih", "link": "https://stackoverflow.com/users/4844397/ting-yi-shih"}, "edited": false, "score": 0, "creation_date": 1612249310, "post_id": 65479841, "comment_id": 116700401, "body": "This saves my life!"}], "tags": [], "owner": {"reputation": 1475, "user_id": 5219866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4804c581341c317aac64fd37d9289?s=128&d=identicon&r=PG", "display_name": "Cristina De Rito", "link": "https://stackoverflow.com/users/5219866/cristina-de-rito"}, "is_accepted": false, "score": 26, "last_activity_date": 1615817729, "last_edit_date": 1615817729, "creation_date": 1609168670, "answer_id": 65479841, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/65479841#65479841", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<h2>Update 15/03/2021</h2>\n<p><a href=\"https://developer.apple.com/documentation/macos-release-notes/macos-catalina-10_15-release-notes\" rel=\"noreferrer\">According to Apple</a>, Ruby won't be included anymore in future versions of the system, so using a Ruby version manager will be the only way to go once this will actually happen.</p>\n<hr>\n<h2>Original answer</h2>\n<p>After hours and hours of trial and errors I wanted to go deeper into the reasons of this error and I finally found this that I think is the clean way to go around this issue:</p>\n<blockquote>\n<p>Catalina (NdMe: I think this started earlier, on Mojave) no longer supports including macOS headers in command line\ntools, they have to be explicitly used through Xcode SDK. You can do\nso by running <code>gem</code> through the <code>xcrun</code> tool like:</p>\n<p><code>xcrun gem install &lt;your_gem&gt;</code></p>\n</blockquote>\n<p>Quoted from a <a href=\"https://github.com/fastlane/fastlane/issues/15183#issuecomment-543844264\" rel=\"noreferrer\">Github issue comment</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 720, "user_id": 175254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01lhH.png?s=128&g=1", "display_name": "David Gish", "link": "https://stackoverflow.com/users/175254/david-gish"}, "is_accepted": false, "score": 2, "last_activity_date": 1611624368, "creation_date": 1611624368, "answer_id": 65894689, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/65894689#65894689", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p><code>xcrun gem install &lt;your_gem&gt;</code> worked for me, but I had to do it multiple times \u2014 every time <code>bundle install</code> failed.</p>\n<p>The best solution is probably to set the same vars as <code>xcrun</code> in your <code>.zshrc</code> file. <code>xcrun env</code> on my system adds:</p>\n<pre><code>SDKROOT=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\nCPATH=/usr/local/include\nLIBRARY_PATH=/usr/local/lib\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 776, "user_id": 1575228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89807cf9c2c3b7d61a63fafa97d01b74?s=128&d=identicon&r=PG", "display_name": "Litehouse", "link": "https://stackoverflow.com/users/1575228/litehouse"}, "is_accepted": false, "score": 0, "last_activity_date": 1613086181, "creation_date": 1613086181, "answer_id": 66164497, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave/66164497#66164497", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p>I had this problem after installing Big Sur. I found the file ruby/config.h was not present in the Xcode Packages in the Xcode versions I had installed prior to upgrading. I was able to correct it by uninstalling the Xcode versions and reinstalling them.</p>\n"}], "owner": {"reputation": 355, "user_id": 2487058, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8ccc74dda9e503931df948cef5e805b9?s=128&d=identicon&r=PG&f=1", "display_name": "SpaceX", "link": "https://stackoverflow.com/users/2487058/spacex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13343, "favorite_count": 1, "accepted_answer_id": 51267506, "answer_count": 7, "score": 19, "last_activity_date": 1615817729, "creation_date": 1531221313, "last_edit_date": 1531223520, "question_id": 51263768, "link": "https://stackoverflow.com/questions/51263768/gem-install-fatal-error-ruby-config-h-file-not-found-in-mojave", "title": "gem install - fatal error: &#39;ruby/config.h&#39; file not found in Mojave", "body": "<p>gem install is failing in MacOs Mojave. Anything that can help me solve this? My ruby version is <code>ruby 2.3.7p456</code>.      </p>\n\n<pre><code>\u279c sudo gem install json -v '1.8.3'\n\n\n\ncurrent directory: /Library/Ruby/Gems/2.3.0/gems/json-1.8.3/ext/json/ext/generator\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:\nIn file included from ./../fbuffer/fbuffer.h:5:\nIn file included from /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/ruby.h:33:\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/ruby/ruby.h:24:10: fatal error: 'ruby/config.h' file not found\n#include \"ruby/config.h\"\n         ^~~~~~~~~~~~~~~\n1 error generated.\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job"], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1531225068, "last_edit_date": 1531225068, "creation_date": 1531223267, "answer_id": 51264394, "question_id": 51263228, "link": "https://stackoverflow.com/questions/51263228/call-hooks-after-the-main-delayed-job-completed/51264394#51264394", "title": "Call hooks after the main delayed job completed", "body": "<p>Hooks from this gem provide callbacks to the job, but not to the model. But you can define custom callback in the model. That callback will be called after the delayed method:</p>\n\n<pre><code>class DoMaintenance &lt; ApplicationRecord\n  extend ActiveModel::Callbacks\n\n  define_model_callbacks :change_all_parts, :only =&gt; [:after]\n\n  after_change_all_parts :notify\n\n  def change_all_parts\n    run_callbacks :change_all_parts do\n      #your delayed method\n    end\n  end\n  handle_asynchronously :change_all_parts\n\n  def notify\n    #your code\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531225068, "creation_date": 1531219513, "question_id": 51263228, "link": "https://stackoverflow.com/questions/51263228/call-hooks-after-the-main-delayed-job-completed", "title": "Call hooks after the main delayed job completed", "body": "<p>I have been using delayed_job_active_record gem in my application, in one of my use-case i have to use one hook to send an other email after the delayed job done. <a href=\"https://github.com/collectiveidea/delayed_job#hooks\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/delayed_job#hooks</a>, how can i override that in my application?.</p>\n\n<p>Currently i am calling in this way</p>\n\n<pre><code>do_maintenance.delay(run_at: time).change_all_parts(batch_no)\n</code></pre>\n\n<p>do_maintenance is the model</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "backend", "server-side"], "comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 1, "creation_date": 1531216462, "post_id": 51261992, "comment_id": 89502381, "body": "Could you post your thesis model? Please add this info to your question."}, {"owner": {"reputation": 13, "user_id": 10058403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb365e3329530a545358e5381635a858?s=128&d=identicon&r=PG", "display_name": "andresca", "link": "https://stackoverflow.com/users/10058403/andresca"}, "reply_to_user": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1531216812, "post_id": 51261992, "comment_id": 89502634, "body": "@mbuechmann ok i added it."}, {"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1531216893, "post_id": 51261992, "comment_id": 89502684, "body": "This looks like recursion. Do the images have a reference to the thesis?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1531216895, "post_id": 51261992, "comment_id": 89502686, "body": "do you have img model ?"}, {"owner": {"reputation": 13, "user_id": 10058403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb365e3329530a545358e5381635a858?s=128&d=identicon&r=PG", "display_name": "andresca", "link": "https://stackoverflow.com/users/10058403/andresca"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1531217235, "post_id": 51261992, "comment_id": 89502878, "body": "@Vishal img is an Attachment, insert like string in Thesis model. Now is set nil for all Thesis records."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 1, "creation_date": 1531217934, "post_id": 51261992, "comment_id": 89503348, "body": "Please provide a full controller."}, {"owner": {"reputation": 13, "user_id": 10058403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb365e3329530a545358e5381635a858?s=128&d=identicon&r=PG", "display_name": "andresca", "link": "https://stackoverflow.com/users/10058403/andresca"}, "edited": false, "score": 0, "creation_date": 1531218491, "post_id": 51261992, "comment_id": 89503719, "body": "No ok i&#39;ve resolved, deleting: has_many_attached :img ti works."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1531218778, "post_id": 51261992, "comment_id": 89503887, "body": "Interesting. If you leave in place <code>has_many_attached :img</code>, does the error raises also if you call <code>Thesis.all</code> from console?"}], "answers": [{"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": true, "score": 0, "last_activity_date": 1531305039, "last_edit_date": 1531305039, "creation_date": 1531219435, "answer_id": 51263200, "question_id": 51261992, "link": "https://stackoverflow.com/questions/51261992/systemstackerror-using-ruby-on-rails/51263200#51263200", "title": "systemStackError using ruby on rails", "body": "<p>In your model is a wrong attribute: has_many means that there can be many images, but the parameter is 'img' that means there can be only one image. This error belongs to ActiveStorage and raised when attached reference name is the same as the model attribute.</p>\n\n<p>Use next to solve this error:</p>\n\n<pre><code>has_many_attached :imgs #for multiple images\nhas_one_attached :img #for one image per object\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10058403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb365e3329530a545358e5381635a858?s=128&d=identicon&r=PG", "display_name": "andresca", "link": "https://stackoverflow.com/users/10058403/andresca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 51263200, "answer_count": 1, "score": 1, "last_activity_date": 1531305039, "creation_date": 1531215825, "last_edit_date": 1531216693, "question_id": 51261992, "link": "https://stackoverflow.com/questions/51261992/systemstackerror-using-ruby-on-rails", "title": "systemStackError using ruby on rails", "body": "<p>i created a little project using ruby on rails 5. I want to create an index page for show Thesis records. So i wrote:</p>\n\n<pre><code>def index\n    respond_to do |format|\n      format.html \n      format.json {\n       render :json =&gt; Thesis.all\n      }\n    end\nend\n</code></pre>\n\n<p>this method should show thesis records like html and like json, but while like html it works, when i ask localhost:3000/theses.json i received from puma server this error:</p>\n\n<pre><code>SystemStackError (stack level too deep):\n\napp/controllers/theses_controller.rb:12:in `block (2 levels) in index'\napp/controllers/theses_controller.rb:9:in `index'\n</code></pre>\n\n<p>Do you have any idea about this error?</p>\n\n<p>This is my Thesis model:</p>\n\n<pre><code>class Thesis &lt; ApplicationRecord\n  has_many_attached :img  \nend\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1531215738, "post_id": 51261946, "comment_id": 89501932, "body": "use <code>split(&quot;\\&quot;).first</code>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1531215938, "post_id": 51261946, "comment_id": 89502057, "body": "You should double the backslashes to define literal backslashes. And then <a href=\"https://ideone.com/Isc1pw\" rel=\"nofollow noreferrer\"><code>&quot;test@test.com\\\\test@gmail.com\\\\12345678\\\\&quot;.split(&quot;\\\\&quot;).firs&zwnj;&#8203;t</code></a> will work."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1531231800, "post_id": 51261946, "comment_id": 89513052, "body": "If you are going to <code>split</code> and only need the first element, you should <a href=\"https://ideone.com/sSs8iH\" rel=\"nofollow noreferrer\">pass a limit to it</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1531225806, "post_id": 51262247, "comment_id": 89508362, "body": "This would return an incorrect result, if the backslash is the first character in the string and you have another backslash further down. Also, I don&#39;t think you need the <code>,1</code> part, and the grouping. I would write it as <code>string[&#47;[^\\\\]*&#47;]</code>."}], "tags": [], "owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "is_accepted": true, "score": 2, "last_activity_date": 1531216563, "creation_date": 1531216563, "answer_id": 51262247, "question_id": 51261946, "link": "https://stackoverflow.com/questions/51261946/find-characters-up-to-first-occurrence-of-in-string/51262247#51262247", "title": "Find characters up to first occurrence of &#39;\\&#39; in string", "body": "<p>You can do this also with regular expression. </p>\n\n<p><code>\nstring[/([^\\\\]+)/, 1]\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1531217880, "creation_date": 1531217880, "answer_id": 51262696, "question_id": 51261946, "link": "https://stackoverflow.com/questions/51261946/find-characters-up-to-first-occurrence-of-in-string/51262696#51262696", "title": "Find characters up to first occurrence of &#39;\\&#39; in string", "body": "<pre><code>\"test@test.com\\\\test@gmail.com\\\\12345678\\\\\"[/[^\\\\]+/]\n# =&gt; \"test@test.com\"\n\n\"1236784464\\\\test@test.com\\\\test@gmail.com\\\\12345678\\\\\"[/[^\\\\]+/]\n# =&gt; \"1236784464\"\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 51262247, "answer_count": 2, "score": -2, "last_activity_date": 1531217880, "creation_date": 1531215679, "last_edit_date": 1531216310, "question_id": 51261946, "link": "https://stackoverflow.com/questions/51261946/find-characters-up-to-first-occurrence-of-in-string", "title": "Find characters up to first occurrence of &#39;\\&#39; in string", "body": "<p>I have a string with emails/numbers that is separated by <code>\\</code>. I am trying to get the first full email or number at the beginning of the string.</p>\n\n<pre><code>string = \"test@test.com\\test@gmail.com\\12345678\\\"\nresult # =&gt; \"test@test.com\"\n\nstring = \"1236784464\\test@test.com\\test@gmail.com\\12345678\\\"\nresult # =&gt; \"1236784464\"\n</code></pre>\n\n<p>I have been trying to do index of the first <code>\\</code> or match, but am not getting the regex right. Any help would be appreciated.</p>\n"}, {"tags": ["ruby", "google-chrome", "rspec", "capybara", "selenium-chromedriver"], "owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1531232508, "creation_date": 1531215178, "last_edit_date": 1531232508, "question_id": 51261796, "link": "https://stackoverflow.com/questions/51261796/cant-open-new-chrome-instance-if-headless-chrome-is-running", "title": "Can&#39;t open new Chrome instance if headless_chrome is running", "body": "<p>Is there a way to open a new Google Chrome window when running <code>headless_chrome</code> with no previously opened browser windows?</p>\n\n<p><strong>NOT WORKING SCENARIO</strong><br></p>\n\n<ul>\n<li>No Google Chrome instances opened.<br></li>\n<li>Running <code>rspec some_spec.rb</code> with <code>headless_chrome</code>.<br></li>\n</ul>\n\n<p>I can't run a new instance of Google Chrome: clicking on the app icon just doesn't work, and right-clicking on it doesn't propose the option \"Open a new window\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/vKxRG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vKxRG.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>WORKING SCENARIO</strong><br></p>\n\n<ul>\n<li>One or multiple Google Chrome instances previously opened.<br></li>\n<li>Running <code>rspec some_spec.rb</code> with <code>headless_chrome</code>.<br></li>\n</ul>\n\n<p>I'm able to open new instances of Google Chrome.</p>\n\n<p><a href=\"https://i.stack.imgur.com/paXIp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/paXIp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "excel", "xlsx", "rubyxl"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1560207828, "creation_date": 1560207828, "answer_id": 56534519, "question_id": 51261261, "link": "https://stackoverflow.com/questions/51261261/how-can-we-protect-some-parts-of-a-sheet-using-rubyxl/56534519#56534519", "title": "How can we protect some parts of a sheet using rubyXL?", "body": "<p>Perhaps you figured this out already, but this worked for me...</p>\n\n<p>Given a <code>worksheet</code> and a <code>cell</code>, I did:</p>\n\n<pre><code>worksheet.\n  workbook.\n  cell_xfs[cell.style_index || 0].\n  protection = RubyXL::Protection.new(\n    locked: false,\n    hidden: false\n  )\n</code></pre>\n\n<p>Then I did:</p>\n\n<pre><code>worksheet.sheet_protection = RubyXL::WorksheetProtection.new(\n  sheet:          true,\n  objects:        true,\n  scenarios:      true,\n  format_cells:   true,\n  format_columns: true,\n  insert_columns: true,\n  delete_columns: true,\n  insert_rows:    true,\n  delete_rows:    true\n)\n</code></pre>\n\n<p>Which protected the entire <code>worksheet</code> except for the <code>cell</code>.</p>\n"}], "owner": {"reputation": 443, "user_id": 5399719, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K5w2LVidDhM/AAAAAAAAAAI/AAAAAAAAABY/Uem4aXd-mvE/photo.jpg?sz=128", "display_name": "Junjie", "link": "https://stackoverflow.com/users/5399719/junjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1560207828, "creation_date": 1531213652, "last_edit_date": 1539950336, "question_id": 51261261, "link": "https://stackoverflow.com/questions/51261261/how-can-we-protect-some-parts-of-a-sheet-using-rubyxl", "title": "How can we protect some parts of a sheet using rubyXL?", "body": "<p>I'd like the user of my xlsx spreadsheet to edit some parts of a sheet but not the most of it. Or in other words, <strong>I'd like only some parts of the sheet to be protected</strong>.</p>\n\n<p>I <a href=\"https://github.com/weshatheleopard/rubyXL/issues/289\" rel=\"nofollow noreferrer\">learned</a> how to protect the sheet using rubyXL with the code below:</p>\n\n<pre><code>sheetProtection = RubyXL::WorksheetProtection.new(\n    password: hashedPass,\n    sheet: true,\n    objects: true,\n    scenarios: true,\n    format_cells: true,\n    format_columns: true,\n    insert_columns: true,\n    delete_columns: true,\n    insert_rows: true,\n    delete_rows: true\n);\nwsData = workbook['data'];\nwsData.sheet_protection = sheetProtection;\n</code></pre>\n\n<p>Say, I'd like the user to only edit the cell range <code>C2:C13</code> of the said sheet.</p>\n\n<p>I can't find the syntax on how to do that from the <a href=\"https://www.rubydoc.info/gems/rubyXL/3.3.29\" rel=\"nofollow noreferrer\">documentation of the rubyXL</a> nor how to use that documentation (please forgive my ignorance). I'm at a loss when I click any link on the side of that page, because for me, it seems the only friendly one is the main page. Google is not helping. In the above code, I don't know how they get the <code>sheet_protection</code> property of the worksheet as available for use.</p>\n\n<p>In the <a href=\"https://github.com/weshatheleopard/rubyXL/issues/145\" rel=\"nofollow noreferrer\">closest clue</a> I found, I learned that \"unprotection\" of a cell can be achieved by a cell style. So I tried creating a style and putting that one in a cell, but that one too proved to be difficult due to lack of guides.</p>\n\n<p>In the <a href=\"https://github.com/weshatheleopard/rubyXL/blob/master/lib/rubyXL/objects/cell_style.rb\" rel=\"nofollow noreferrer\">cell_style.rb</a> of the github repo, I found something about <code>Protection</code> and <code>CellStyle</code> classes.</p>\n\n<pre><code>unprotected = RubyXL::Protection.new(\n    locked: false,\n    hidden: false\n);\n\nunprotecStyle = RubyXL::CellStyle.new(\n    name: 'unprotected style'\n);\n</code></pre>\n\n<p>I can't find in the docs how to put them together, or even apply a style on a cell:</p>\n\n<pre><code>wsData[1][2].cell_style = unprotecStyle;\n# undefined method `cell_style=' for #&lt;RubyXL::Cell(1,2): \"cell-content\", datatype=\"str\", style_index=8&gt;\n</code></pre>\n\n<p>I'm not even sure if I'm on the right track. Please help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "checkbox", "twilio"], "comments": [{"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1531205118, "post_id": 51258651, "comment_id": 89495866, "body": "Check your <code>params[:calls_check]</code> if you are getting the correct value that you are comparing with 1."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531205730, "post_id": 51258651, "comment_id": 89496174, "body": "Show the server log for request 1. with checkbox checked 2. with checkbox unchecked."}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531216974, "post_id": 51262012, "comment_id": 89502732, "body": "<code>params[:calls_check].present? &amp;&amp; params[:calls_check].eql?(&#39;1&#39;)</code> is same as <code>params[:calls_check].eql?(&#39;1&#39;)</code>"}, {"owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531235002, "post_id": 51262012, "comment_id": 89515338, "body": "Thanks for the help! When I am running it <code>if params[:calls_check].eql?(&#39;1&#39;)</code> keeps returning false no matter what so it never makes the calls... any idea?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531236369, "post_id": 51262012, "comment_id": 89516322, "body": "Can you show the Params log by using debugger ? Make sure you are using <code>check_box_tag</code>? Not <code>check_box</code>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531236828, "post_id": 51262012, "comment_id": 89516620, "body": "@DylanPatch Ohh i got it, you have to bind <code>check_box_tag</code> with <code>button</code>  i.e wrap it in form , check the update answer."}, {"owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531238346, "post_id": 51262012, "comment_id": 89517584, "body": "Sorry i&#39;m still really struggling with Ruby, the make_calls_path doesn&#39;t exist. What do I have to do to fix that?"}, {"owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531238720, "post_id": 51262012, "comment_id": 89517806, "body": "Oh wait @Gabbar I just had to make it landing_make_calls_path. But I am still not able to get it to get the params for the checkbox"}, {"owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531239427, "post_id": 51262012, "comment_id": 89518178, "body": "<code>[4] pry(#&lt;LandingController&gt;)&gt; params[:calls_check].eql?(&#39;1&#39;) =&gt; false [5] pry(#&lt;LandingController&gt;)&gt; params[:calls_check] =&gt; &lt;ActionController::Parameters {&quot;{:id=&gt;\\&quot;calls_check\\&quot;}&quot;=&gt;&quot;1&quot;} permitted: false&gt;</code>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1531240767, "post_id": 51262012, "comment_id": 89518854, "body": "Well it seems you didn&#39;t use the code I have provided.seem you are still using <code>check_box</code> and I have mentioned <code>check_box_tag</code>. Please use the latest code and let me know for any further guidance."}, {"owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531324700, "post_id": 51262012, "comment_id": 89557399, "body": "Sorry I had tried the <code>check_box_tag</code> unsuccessfully, when I have that my pry shows even less... <code>[3] pry(#&lt;LandingController&gt;)&gt; params[:calls_check] =&gt; &quot;{:id=&gt;\\&quot;calls_check\\&quot;}&quot; [4] pry(#&lt;LandingController&gt;)&gt; params[:calls_check].eql?(&#39;1&#39;) =&gt; false</code> @Gabbar"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531326054, "post_id": 51262012, "comment_id": 89558083, "body": "@DylanPatch Could you try latest update code also don&#39;t forget to use <code>chekbox_tag</code> inside a <code>form_tag</code> as suggested in answer.?"}, {"owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531328969, "post_id": 51262012, "comment_id": 89559557, "body": "That is with the updated code :( I am having no luck on this at all. @Gabbar"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "edited": false, "score": 0, "creation_date": 1531330688, "post_id": 51262012, "comment_id": 89560413, "body": "@DylanPatch Actually i have tried this code myself, before write the answer, i believe you are still using check_box not check_box_tag cause check_box sends param as like your  <code>params[:calls_check] =&gt; &quot;{:id=&gt;\\&quot;calls_check\\&quot;}&quot;</code> ."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 1, "last_activity_date": 1531325991, "last_edit_date": 1531325991, "creation_date": 1531215902, "answer_id": 51262012, "question_id": 51258651, "link": "https://stackoverflow.com/questions/51258651/checking-to-see-if-checkbox-is-checked-rails/51262012#51262012", "title": "checking to see if checkbox is checked rails", "body": "<p>You should use <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag\" rel=\"nofollow noreferrer\">check_box_tag</a> Instead of <a href=\"https://apidock.com/rails/ActionView/Helpers/FormHelper/check_box\" rel=\"nofollow noreferrer\">check_box</a></p>\n\n<p>Reason being <code>check_box</code> accepts 2nd parameters as a method (<em>It\u2019s intended that method returns an integer and if that integer is above zero, then the checkbox is checked</em>)</p>\n\n<p>Using <code>check_box_tag</code></p>\n\n<pre><code>&lt;%= check_box_tag :calls_check, 1, false %&gt;\n</code></pre>\n\n<p>Which means that once checkbox will be checked it will send parameter as <code>'1'</code> and by default it will be <code>unchecked</code>, In case of unchecked it won't send parameter of <code>calls_check</code>(i.e <code>params[:calls_check] = nil</code>)</p>\n\n<p>At controller side</p>\n\n<pre><code># called from inside make_calls method\ndef individual_call(to_phone, xml_url)\n\ncall = @client.calls.create(\n                           url: xml_url,\n                           to: to_phone,\n                           from: '+13474275841',\n                           timeout: 20\n                         ) if params[:calls_check].eql?('1')\n    puts call.sid\nend\n</code></pre>\n\n<p>Wrap check_box with form so that it send data on button click,</p>\n\n<p>replace <code>make_calls_path</code> with the make_call action path and also its <code>method</code> <code>get</code> or <code>post</code>. according to your defined routes</p>\n\n<pre><code>&lt;body&gt;\n  &lt;div class=\"buttonDiv w3-display-middle\"&gt;\n    &lt;%=form_tag make_calls_path, method: :get do %&gt;\n      &lt;%= check_box_tag :calls_check, id: \"calls_check\" %&gt;Make Calls\n      &lt;%= submit_tag \"Start Call Sequence\"%&gt;\n    &lt;%end%&gt;\n  &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6383623, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209298664726068/picture?type=large", "display_name": "Dylan Patch", "link": "https://stackoverflow.com/users/6383623/dylan-patch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2516, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531325991, "creation_date": 1531204734, "question_id": 51258651, "link": "https://stackoverflow.com/questions/51258651/checking-to-see-if-checkbox-is-checked-rails", "title": "checking to see if checkbox is checked rails", "body": "<p>I am trying to create my first rails app from scratch but I don't think I should have used rails for this after all. I have a button that uses a method make_calls and within make calls I have it making a bunch of different calls seperated by sleep statements, however I need these to only execute if the calls_check checkbox is checked. Here is what I have:<br>\nIn my Controller:</p>\n\n<pre><code># called from inside make_calls method\ndef individual_call(to_phone, xml_url)\n\ncall = @client.calls.create(\n                           url: xml_url,\n                           to: to_phone,\n                           from: '+13474275841',\n                           timeout: 20\n                         )\nif params[:calls_check] == '1'\n    puts call.sid\nend\n</code></pre>\n\n<p><br>\nIn my View:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;div class=\"buttonDiv w3-display-middle\"&gt;\n         &lt;%= check_box :calls_check, id: \"calls_check\" %&gt;Make Calls\n         &lt;%= button_to \"Start Call Sequence\", action: \"make_calls\" %&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>But even when the checkbox is unchecked it is still making the calls. Any advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1531203811, "post_id": 51258291, "comment_id": 89495293, "body": "Why you downgraded your ruby version ? did you push the your latest code on master branch ?"}, {"owner": {"reputation": 81, "user_id": 1284958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/58bfc8eac6bfa7b11f3faf1ddb6d4222?s=128&d=identicon&r=PG", "display_name": "Srividhya", "link": "https://stackoverflow.com/users/1284958/srividhya"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1531203984, "post_id": 51258291, "comment_id": 89495366, "body": "yes. I did push the code. As referred to this link and downgraded the Ruby Version - <a href=\"https://stackoverflow.com/questions/28635918/error-installing-json-1-8-1-via-rubygems\" title=\"error installing json 1 8 1 via rubygems\">stackoverflow.com/questions/28635918/&hellip;</a>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1531204344, "post_id": 51258291, "comment_id": 89495527, "body": "the question was asked in Feb 2015 . in 2018 you don&#39;t need to downgrade you ruby version. downgrading your ruby version will create lots of problems. can you please try to use your previous and stable version of ruby ?"}], "answers": [{"tags": [], "owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "is_accepted": true, "score": 0, "last_activity_date": 1531213936, "last_edit_date": 1531213936, "creation_date": 1531204713, "answer_id": 51258646, "question_id": 51258291, "link": "https://stackoverflow.com/questions/51258291/heroku-deploy-failed-gem-install-json-v-1-8-1/51258646#51258646", "title": "Heroku Deploy Failed | gem install json -v &#39;1.8.1&#39;", "body": "<p>It is reverting to Ruby 2.4.4 because that is the current default version used by Heroku. This suggests that Ruby 2.3.0 is no longer supported. Check out Heroku's <a href=\"https://devcenter.heroku.com/articles/ruby-support#ruby-versions\" rel=\"nofollow noreferrer\">ruby version support</a> page for more information. </p>\n\n<p>Revert back to the Ruby version you were using and run</p>\n\n<p><code>$ bundle update &amp;&amp; bundle install</code></p>\n\n<p>Then try pushing to heroku</p>\n"}, {"tags": [], "owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "is_accepted": false, "score": 0, "last_activity_date": 1531212649, "creation_date": 1531212649, "answer_id": 51260945, "question_id": 51258291, "link": "https://stackoverflow.com/questions/51258291/heroku-deploy-failed-gem-install-json-v-1-8-1/51260945#51260945", "title": "Heroku Deploy Failed | gem install json -v &#39;1.8.1&#39;", "body": "<p>To check what your ruby in now</p>\n\n<pre><code>$Ruby -v\n</code></pre>\n\n<p>Update it to the newest ruby version 2.3.7</p>\n\n<pre><code>$rvm list known\n$rvm install 2.3.7\n$rvm use 2.3.7 --default\n$gem install bundler\n</code></pre>\n\n<p>Check out this video <a href=\"https://www.youtube.com/watch?v=lsNXc3uQ2AA&amp;lc=z22pvls4asawvhi5004t1aokgq0e4p2vb1qpp3w3z252bk0h00410.1528974099408204\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=lsNXc3uQ2AA&amp;lc=z22pvls4asawvhi5004t1aokgq0e4p2vb1qpp3w3z252bk0h00410.1528974099408204</a>\nLet me know if does that help!</p>\n"}], "owner": {"reputation": 81, "user_id": 1284958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/58bfc8eac6bfa7b11f3faf1ddb6d4222?s=128&d=identicon&r=PG", "display_name": "Srividhya", "link": "https://stackoverflow.com/users/1284958/srividhya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 51258646, "answer_count": 2, "score": 0, "last_activity_date": 1531213936, "creation_date": 1531203214, "question_id": 51258291, "link": "https://stackoverflow.com/questions/51258291/heroku-deploy-failed-gem-install-json-v-1-8-1", "title": "Heroku Deploy Failed | gem install json -v &#39;1.8.1&#39;", "body": "<p>I am trying to deploy my ROR application to heroku, but getting this error constantly. I downgraded my Ruby version to 2.3.0. This is what I have on my Gemfile.lock</p>\n\n<p>RUBY VERSION\n   ruby 2.3.0p0</p>\n\n<p>BUNDLED WITH</p>\n\n<h2>   1.16.2</h2>\n\n<p>But I still get the below error and also heroku always trying to use the Ruby version 2.4.4 and bundler 1.15.2 even though my lock file has the different version.</p>\n\n<p>remote: -----> Using Ruby version: ruby-2.4.4\nremote: -----> Installing dependencies using bundler 1.15.2</p>\n\n<p>An error occurred while installing json (1.8.1), and Bundler cannot continue.\nremote:        Make sure that <code>gem install json -v '1.8.1'</code> succeeds before bundling.\nremote:<br>\nremote:        In Gemfile:\nremote:          dropzonejs-rails was resolved to 0.7.0, which depends on\nremote:            rails was resolved to 4.1.7, which depends on\nremote:              actionmailer was resolved to 4.1.7, which depends on\nremote:                actionpack was resolved to 4.1.7, which depends on\nremote:                  actionview was resolved to 4.1.7, which depends on\nremote:                    activesupport was resolved to 4.1.7, which depends on\nremote:                      json</p>\n\n<p>Any help on this would be appreciated.\nThanks in advance.</p>\n"}, {"tags": ["ruby", "elasticsearch", "logstash", "kibana", "elastic-stack"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1531202506, "post_id": 51257345, "comment_id": 89494829, "body": "Where is the code which is performing the operation?"}], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 5252581, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7c5172b819057de36d2db9636712d2c5?s=128&d=identicon&r=PG&f=1", "display_name": "jojo", "link": "https://stackoverflow.com/users/5252581/jojo"}, "is_accepted": false, "score": 0, "last_activity_date": 1531205321, "creation_date": 1531205321, "answer_id": 51258790, "question_id": 51257345, "link": "https://stackoverflow.com/questions/51257345/ruby-filter-plugin-creates-two-records-for-a-single-input-json/51258790#51258790", "title": "Ruby filter plugin creates two records for a single input json", "body": "<p>Defining a mapping relationship in elastic search solved the issue. This is the way to define the relationship </p>\n\n<pre><code>    PUT fulfillmentorder\n{\n  \"mappings\": {\n    \"doc\": {\n      \"properties\": {\n        \"my_join_field\": { \n          \"type\": \"join\",\n          \"relations\": {\n            \"fulfillmentorders\": \"orderlineitems\" \n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 5252581, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7c5172b819057de36d2db9636712d2c5?s=128&d=identicon&r=PG&f=1", "display_name": "jojo", "link": "https://stackoverflow.com/users/5252581/jojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531205321, "creation_date": 1531197420, "question_id": 51257345, "link": "https://stackoverflow.com/questions/51257345/ruby-filter-plugin-creates-two-records-for-a-single-input-json", "title": "Ruby filter plugin creates two records for a single input json", "body": "<p>There are two conf files used to load data from 2 json files,testOrders and testItems, each containing only one document, into same index. I am trying to create parent child relationship between two documents.</p>\n\n<p>Below is my conf for testorders </p>\n\n<pre><code>  input{\n         file{\n        path =&gt; [\"/path_data/testOrders.json\"]\n        type =&gt; \"json\"\n        start_position =&gt; \"beginning\"\n        sincedb_path =&gt; \"/dev/null\"\n      }\n    }\n\n    filter {\n      json {\n        source =&gt; \"message\"\n        target =&gt; \"testorders_collection\"\n        remove_field =&gt; [ \"message\" ]\n         }\n           ruby {\n        code =&gt; \"\n          event.set('[my_join_field][name]', 'testorders')\n        \"\n      }\n    }\n\n\n    output { \n        elasticsearch { \n        hosts =&gt; [\"localhost:9200\"]\n        index =&gt; \"testorder\"\n        document_id =&gt; \"%{[testorders_collection][eId]}\"\n        routing =&gt; \"%{[testorders_collection][eId]}\"\n      }\n    }\n</code></pre>\n\n<p>Below is the conf for testItems</p>\n\n<pre><code>input{\n     file{\n    path =&gt; [\"/path_to_data/testItems.json\"]\n    type =&gt; \"json\"\n    start_position =&gt; \"beginning\"\n    sincedb_path =&gt; \"/dev/null\"\n  }\n}\n\nfilter {\n  json {\n    source =&gt; \"message\"\n    target =&gt; \"test_collection\"\n    remove_field =&gt; [ \"message\" ]\n  }\n}\nfilter {\n ruby {\n    code =&gt; \"\n      event.set('[my_join_field][name]', 'testItems')\n      event.set('[my_join_field][parent]', event.get('[test_collection][foreignKeyId]'))\n    \"\n  }\n  }\n\noutput { \n    elasticsearch { \n    hosts =&gt; [\"localhost:9200\"]\n    index =&gt; \"testorder\"\n    document_id =&gt; \"%{[test_collection][eId]}\"\n    routing =&gt; \"%{[test_collection][foreignKeyId]}\"\n  }\n}\n</code></pre>\n\n<p>As expected the logstash creates 1 record for testOrders but creates 2 records for testItems given 1 json document each for testOrders and testItems. One document is created properly with data but other is created as duplicate and there seems to be no data. The document that is created with data not parsed looks like as follows</p>\n\n<pre><code> {\n        \"_index\": \"testorder\",\n        \"_type\": \"doc\",\n        \"_id\": \"%{[test_collection][eId]}\",\n        \"_score\": 1,\n        \"_routing\": \"%{[test_collection][foreignKeyId]}\",\n        \"_source\": {\n          \"type\": \"json\",\n          \"@timestamp\": \"2018-07-10T04:15:58.494Z\",\n          \"host\": \"&lt;hidden&gt;\",\n          \"test_collection\": null,\n          \"my_join_field\": {\n            \"name\": \"testItems\",\n            \"parent\": null\n          },\n          \"path\": \"/path_to_data/testItems.json\",\n          \"@version\": \"1\"\n        }\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "xero-api", "xeroizer"], "comments": [{"owner": {"reputation": 61, "user_id": 9792289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d43f2fbe86dd12651dd63127a60acc8?s=128&d=identicon&r=PG&f=1", "display_name": "M.Umer", "link": "https://stackoverflow.com/users/9792289/m-umer"}, "edited": false, "score": 0, "creation_date": 1534333456, "post_id": 51257316, "comment_id": 90668175, "body": "Solved there was error on my code."}, {"owner": {"reputation": 61, "user_id": 9792289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d43f2fbe86dd12651dd63127a60acc8?s=128&d=identicon&r=PG&f=1", "display_name": "M.Umer", "link": "https://stackoverflow.com/users/9792289/m-umer"}, "edited": false, "score": 0, "creation_date": 1534333637, "post_id": 51257316, "comment_id": 90668264, "body": "I was showing status based on time and I was not updating that time field in my database, so it was renewing actually."}], "owner": {"reputation": 61, "user_id": 9792289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d43f2fbe86dd12651dd63127a60acc8?s=128&d=identicon&r=PG&f=1", "display_name": "M.Umer", "link": "https://stackoverflow.com/users/9792289/m-umer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531197220, "creation_date": 1531197220, "question_id": 51257316, "link": "https://stackoverflow.com/questions/51257316/xeroizer-partner-application-renew-access-token-not-working-rails-4-2-0-ruby-2", "title": "Xeroizer partner application: renew access token not working Rails 4.2.0 Ruby 2.2.9", "body": "<p>I am using a ruby gem Xeroizer and partner application <a href=\"https://github.com/waynerobinson/xeroizer\" rel=\"nofollow noreferrer\">https://github.com/waynerobinson/xeroizer</a> and generated pem file as instructed in this link. when I renew access token to obtain long term connection then upon token renewal everything sets up \"@expires_at\" also shows extended expiry on xero side but session got disconnected after 30 minutes.New returned token and secret are not same and I am saving these new ones in the database also. Here is my code below.</p>\n\n<p>//////// connecting</p>\n\n<pre><code>def connect_xero_organisation  \n  @xeroizer = Xeroizer::PartnerApplication.new(ENV[\"XERO_GATEWAY_CONSUMER_KEY\"], ENV[\"XERO_GATEWAY_CONSUMER_SECRET\"], \"#{Rails.root}/config/certs/privatekey.pem\")\n  request_token = @xeroizer.request_token(oauth_callback: \"https://{ENV['HOST_NAME']}/companies/#{@company.slug}/xero\")\n  session[:request_token]  = request_token.token\n  session[:request_secret] = request_token.secret\n  redirect_to request_token.authorize_url\nend\n</code></pre>\n\n<p>///////// callback method</p>\n\n<pre><code> def xero_organisation_detail\n\n   if params[:oauth_verifier].present? \n     @xeroizer = Xeroizer::PartnerApplication.new(ENV[\"XERO_GATEWAY_CONSUMER_KEY\"], ENV[\"XERO_GATEWAY_CONSUMER_SECRET\"], \"#{Rails.root}/config/certs/privatekey.pem\")\n     begin\n      @xeroizer.authorize_from_request(session[:request_token], session[:request_secret], oauth_verifier: params[:oauth_verifier])\n      session[:xero_auth] = { access_token:   @xeroizer.access_token.token,access_secret:  @xeroizer.access_token.secret }\n      session.delete(:request_token)\n      session.delete(:request_secret)\n      xero_organisation_create_update(@xeroizer)\n      redirect_to edit_company_path(@company, xero: 'xero'), notice: \"Settings have been saved\"\n    rescue Exception =&gt; e\n      redirect_to edit_company_path(@company)   \n    end\n  else\n    @organisation_detail = @company.xero_organisation\n    @xero_organisation_accounts_details = @company.xero_organisation_accounts\n  end\n\nend\n</code></pre>\n\n<p>///////// @company is simply setting in before_filter :set_company</p>\n\n<pre><code>def xero_organisation_create_update(xeroizer)\n\n  organisation = xeroizer.Organisation.all(:find =&gt; {organisation_id: params[:org]})\n\n  connection_expires_at = xeroizer.client.expires_at\n  token = xeroizer.access_token.token\n  secret = xeroizer.access_token.secret\n  session_handle = xeroizer.session_handle\n  organisation_name = organisation.last.name\n  code = organisation.last.short_code  \n\n  if @company.xero_organisation.present?\n    @company.xero_organisation.update_attributes(name: organisation_name, connection_expires_at: connection_expires_at, short_code: code, xero_token: token, xero_secret: secret, conn_handle: session_handle)\n    @organisation_detail = @company.xero_organisation\n  else\n    @organisation_detail = XeroOrganisation.create(name: organisation_name,connection_expires_at: connection_expires_at,company_id: @company.id,short_code: code, xero_token: token, xero_secret: secret, conn_handle: session_handle)\n  end\n\nend\n</code></pre>\n\n<p>////// renewal</p>\n\n<p>cronjob method for renewal</p>\n\n<pre><code>def self.conn_renewel\n\n  XeroOrganisation.where(\"connection_expires_at is not NULL\").each do |xo|  \n    client = Xeroizer::PartnerApplication.new(ENV[\"XERO_GATEWAY_CONSUMER_KEY\"], ENV[\"XERO_GATEWAY_CONSUMER_SECRET\"], \"#{Rails.root}/config/certs/privatekey.pem\")\n    conn = client.renew_access_token(xo.access_token,xo.access_secret,xo.session_handle)\n    xo.update_attributes(:xero_token=&gt;conn.first, :xero_secret=&gt;conn.last)  \n  end\n\nend\n</code></pre>\n\n<p>Special thanks! in advance.</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1531203943, "last_edit_date": 1531203943, "creation_date": 1531202898, "answer_id": 51258228, "question_id": 51257241, "link": "https://stackoverflow.com/questions/51257241/why-will-gem-build-gemspec-succeed-when-the-dependency-gems-is-not-installed/51258228#51258228", "title": "Why will gem build .gemspec succeed when the dependency gem(s) is not installed yet", "body": "<p>Dependent gems are installed as remote dependency and are installed when the gem is being installed or during bundle in case of rails. You cannot make it local dependent since it cannot be accessed by others.So your mention of </p>\n\n<pre><code> spec.add_dependency \"activesupport\", \"~&gt; 4.2.0\" \n</code></pre>\n\n<p>in .gemspec file is correct.</p>\n\n<p><strong>.gemspec:</strong> Gem build information is stored here. It is a standard format for describing all of the information that gets packed with gems then deployed to rubygems.org. </p>\n\n<blockquote>\n  <p>gem build hola.gemspec</p>\n</blockquote>\n\n<p>It's just used to build and you need to run gem install to test it.</p>\n"}], "owner": {"reputation": 5585, "user_id": 301513, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0461c42f412ae4d88bd5722cde72c84e?s=128&d=identicon&r=PG", "display_name": "Qiulang", "link": "https://stackoverflow.com/users/301513/qiulang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531222014, "creation_date": 1531196594, "last_edit_date": 1531222014, "question_id": 51257241, "link": "https://stackoverflow.com/questions/51257241/why-will-gem-build-gemspec-succeed-when-the-dependency-gems-is-not-installed", "title": "Why will gem build .gemspec succeed when the dependency gem(s) is not installed yet", "body": "<p>I tried to build a local gem and was surprised to find that even the dependency gems were not installed I can still run <code>gem build .gemspec</code> successfully.</p>\n\n<p>For example, my <code>.gemspec</code> has declared the following dependency and I am sure they are not installed yet. But <code>gem build</code> succeeded and only after I run <code>gem install</code> to install my local gem will those gems be installed as well.</p>\n\n<pre><code>  spec.add_runtime_dependency \"terminal-notifier-guard\"\n  spec.add_dependency \"activesupport\", \"~&gt; 4.2.0\"\n</code></pre>\n\n<p>From c/c++ background, I find that is a bit confusing. I know ruby is interpreted/dynamic (whatever that means) language, the script will be interpreted when I actually run it. But what does <code>gem build .gemspec</code> build then? What criteria will it use to determine the build is successful (e.g. except for syntax error in codes)?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": true, "score": 0, "last_activity_date": 1531207023, "creation_date": 1531207023, "answer_id": 51259276, "question_id": 51257157, "link": "https://stackoverflow.com/questions/51257157/httppersistent-and-proxy/51259276#51259276", "title": "HTTP::persistent and proxy?", "body": "<p>On the <a href=\"https://github.com/httprb/http/wiki/Persistent-Connections-%28keep-alive%29\" rel=\"nofollow noreferrer\">wiki page of the HTTP gem</a> there is mention of <code>.persistent</code>. There's also a page dedicated to proxy support.</p>\n"}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "accepted_answer_id": 51259276, "answer_count": 1, "score": 0, "last_activity_date": 1531207023, "creation_date": 1531195969, "question_id": 51257157, "link": "https://stackoverflow.com/questions/51257157/httppersistent-and-proxy", "title": "HTTP::persistent and proxy?", "body": "<p>I have source code that uses the 'http' gem, and the line of code to initialize the connection is:</p>\n\n<p><code>HTTP.persistent(endpoint).headers(...).timeout(...)</code></p>\n\n<p>It looks a bit weird to me, and I can't find any mention of an actual <code>.persistent</code> method in HTTP. Has anyone seen this? If so, is there a way to use a proxy?</p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 140, "user_id": 5352336, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6RLTwkqarwM/AAAAAAAAAAI/AAAAAAAAAFI/ly_x_XfWWls/photo.jpg?sz=128", "display_name": "getfugu", "link": "https://stackoverflow.com/users/5352336/getfugu"}, "edited": false, "score": 0, "creation_date": 1531189662, "post_id": 51256401, "comment_id": 89491692, "body": "This seems relevant. <a href=\"https://stackoverflow.com/questions/983267/\">stackoverflow.com/questions/983267</a> Worth mentioning that this will be somewhat performance-taxing if your object is very large/has many properties."}, {"owner": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "reply_to_user": {"reputation": 140, "user_id": 5352336, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6RLTwkqarwM/AAAAAAAAAAI/AAAAAAAAAFI/ly_x_XfWWls/photo.jpg?sz=128", "display_name": "getfugu", "link": "https://stackoverflow.com/users/5352336/getfugu"}, "edited": false, "score": 0, "creation_date": 1531189892, "post_id": 51256401, "comment_id": 89491734, "body": "Thanks for that, I&#39;ve looked at that question, however it doesn&#39;t help me that much as I&#39;m parsing it with rails. Using the index of [0], returns nothing."}], "answers": [{"comments": [{"owner": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1531190732, "post_id": 51256531, "comment_id": 89491894, "body": "Syntax error?  @result = @parse_result[&quot;Time Series (Daily)&quot;]values.first[&quot;1. open&quot;]"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1531192000, "post_id": 51256531, "comment_id": 89492122, "body": "@Crashtor Sorry, missed a period before <code>values</code>. Fixed."}, {"owner": {"reputation": 140, "user_id": 5352336, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6RLTwkqarwM/AAAAAAAAAAI/AAAAAAAAAFI/ly_x_XfWWls/photo.jpg?sz=128", "display_name": "getfugu", "link": "https://stackoverflow.com/users/5352336/getfugu"}, "edited": false, "score": 0, "creation_date": 1531192890, "post_id": 51256531, "comment_id": 89492278, "body": "This answer solves this specific case, but it does not handle retrieving properties other than the first one of the object."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1531192018, "last_edit_date": 1531192018, "creation_date": 1531190498, "answer_id": 51256531, "question_id": 51256401, "link": "https://stackoverflow.com/questions/51256401/parse-json-where-object-is-variable/51256531#51256531", "title": "Parse JSON where object is variable", "body": "<pre><code>ruby_hash[\"Time Series (Daily)\"].values.first[\"1. open\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1531191502, "post_id": 51256572, "comment_id": 89492027, "body": "This only gets me to where I would before, ( [&quot;2018-07-09&quot;] ) - I need to go 1 step down. I feel like such a noob."}, {"owner": {"reputation": 140, "user_id": 5352336, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6RLTwkqarwM/AAAAAAAAAAI/AAAAAAAAAFI/ly_x_XfWWls/photo.jpg?sz=128", "display_name": "getfugu", "link": "https://stackoverflow.com/users/5352336/getfugu"}, "reply_to_user": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1531192165, "post_id": 51256572, "comment_id": 89492147, "body": "Use <code>keys</code> again on the next object within json.  <a href=\"https://repl.it/repls/SophisticatedFavorableRobodoc\" rel=\"nofollow noreferrer\">repl.it/repls/SophisticatedFavorableRobodoc</a>. Worth noting that my answer can get properties other than the first property, which cannot be done with the accepted answer."}], "tags": [], "owner": {"reputation": 140, "user_id": 5352336, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6RLTwkqarwM/AAAAAAAAAAI/AAAAAAAAAFI/ly_x_XfWWls/photo.jpg?sz=128", "display_name": "getfugu", "link": "https://stackoverflow.com/users/5352336/getfugu"}, "is_accepted": false, "score": 1, "last_activity_date": 1531192657, "last_edit_date": 1531192657, "creation_date": 1531190846, "answer_id": 51256572, "question_id": 51256401, "link": "https://stackoverflow.com/questions/51256401/parse-json-where-object-is-variable/51256572#51256572", "title": "Parse JSON where object is variable", "body": "<p>Adapted from <a href=\"https://stackoverflow.com/q/32759742/5352336\">How can I get the key Values in a JSON array in ruby?</a><br>\n</p>\n\n<pre><code>require 'json'\nmyData = JSON.parse('{\"A\": {\"B\": {\"C\": {\"D\": \"open sesame\"}}}}')\n\ndef getProperty(index, parsedData)\n  return parsedData[parsedData.keys[index]]\nend  \n\nmyDataFirstProperty = getProperty(0, myData) # =&gt; {\"B\"=&gt;{\"C\"=&gt;{\"D\"=&gt;\"open sesame\"}}}\n\nevenDeeper = getProperty(0, myDataFirstProperty) # =&gt; {\"C\"=&gt;{\"D\"=&gt;\"open sesame\"}}\n</code></pre>\n\n<p>This answer can also get the Nth property of the JSON, unlike the accepted answer which can only get the first.</p>\n"}], "owner": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51256531, "answer_count": 2, "score": 1, "last_activity_date": 1531192657, "creation_date": 1531189296, "last_edit_date": 1531192036, "question_id": 51256401, "link": "https://stackoverflow.com/questions/51256401/parse-json-where-object-is-variable", "title": "Parse JSON where object is variable", "body": "<p>I get the following JSON response for Alpha vantage Stock API:</p>\n\n<pre><code>    \"Time Series (Daily)\": {\n        \"2018-07-09\": {\n            \"1. open\": \"142.6000\",\n             ...\n        },\n</code></pre>\n\n<p>I get different dates depending on the location of the stock exchange. On some, it might say <code>\"2018-07-09\"</code>, and on others <code>\"2018-07-10\"</code>.</p>\n\n<p>Is there a way to reach the attributes of an object without typing the object, something along the lines of:</p>\n\n<pre><code>[\"Time Series (Daily)\"][\"first_child\"][\"1. open\"]\n</code></pre>\n\n<p>Using:</p>\n\n<pre><code>[\"Time Series (Daily)\"][0][\"1. open\"]\n</code></pre>\n\n<p>doesn't work.</p>\n"}, {"tags": ["arrays", "ruby", "list", "ruby-on-rails-3", "hash"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 3, "creation_date": 1531184404, "post_id": 51255804, "comment_id": 89490698, "body": "<code>.flat_map(&amp;:keys) # =&gt; [:&quot;1boy&quot;, :solo, :male, :&quot;black hair&quot;]</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1531187660, "post_id": 51255804, "comment_id": 89491315, "body": "You wrote &quot;the string&quot;, but there is no string in your array of hashes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1531202188, "post_id": 51255804, "comment_id": 89494740, "body": "Do you wish to extract the keys (as an array) or print them? If the former it&#39;s unnecessary and confusing to stipulate how they &quot;display as a list&quot; (especially with the bullets). Just ask how to create the array of  keys, period. If you want to display the keys in a particular format (with bullets, for example). ask for that. Because of the key-colon-value format you used in the hash, all keys are symbols. A symbol must be expressed as a quoted string following the colon only if the string contains spaces or does not begin with a letter. Here, for example, <code>&quot;solo&quot;</code>: can be written <code>solo:</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1531193770, "creation_date": 1531193770, "answer_id": 51256886, "question_id": 51255804, "link": "https://stackoverflow.com/questions/51255804/how-to-extract-keys-from-an-array/51256886#51256886", "title": "How to extract keys from an array", "body": "<p>As SimpleLime posted in a comment, the most elegant way is using <code>flat_map</code>.</p>\n\n<pre><code>.flat_map(&amp;:keys)\n</code></pre>\n\n<p>In your question you referred to the keys as \"strings\", but in your example, they are symbols. The syntax you are using for the hash is converting your \"strings\" to symbols.</p>\n\n<pre><code>\"1boy\": 0.9390615820884703\n</code></pre>\n\n<p>This makes a symbol for key that looks like a string, but is not. Ruby allow for creating symbols using strings, which is useful for creating symbols with characters that aren't typically allowed, such as punctuation or spaces.</p>\n\n<pre><code>:\"some string?!\".class\n=&gt; Symbol\n</code></pre>\n\n<p>If you truly want strings for the keys, you must use the \"old\" syntax with a <code>=&gt;</code> operator:</p>\n\n<pre><code>\"1boy\" =&gt; 0.9390615820884703\n</code></pre>\n\n<p>So to return actual strings, you would also need to convert them. One possible way would be:</p>\n\n<pre><code>.flat_map(&amp;:keys).map(&amp;:to_s)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531205349, "post_id": 51257812, "comment_id": 89495983, "body": "A better option would be <code>ary.map(&amp;:keys).flatten</code> to include all keys and not just the first one."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531205805, "post_id": 51257812, "comment_id": 89496221, "body": "I agree, but the best solution for this is <code>.flat_map(&amp;:keys)</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1531206081, "post_id": 51257812, "comment_id": 89496376, "body": "<code>flat_map</code> does the same thing as <code>map().flatten</code>, only faster. <a href=\"https://apidock.com/ruby/Enumerable/flat_map#1203-Alternative-definition\" rel=\"nofollow noreferrer\">apidock.com/ruby/Enumerable/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1531200631, "creation_date": 1531200631, "answer_id": 51257812, "question_id": 51255804, "link": "https://stackoverflow.com/questions/51255804/how-to-extract-keys-from-an-array/51257812#51257812", "title": "How to extract keys from an array", "body": "<p>If you don't have nested structures or want just the keys of the first level:</p>\n\n<pre><code>.map{ |h| h.keys.first.to_s }\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10028625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjIpL.jpg?s=128&g=1", "display_name": "JimmyC003", "link": "https://stackoverflow.com/users/10028625/jimmyc003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1531200631, "creation_date": 1531183599, "last_edit_date": 1531185804, "question_id": 51255804, "link": "https://stackoverflow.com/questions/51255804/how-to-extract-keys-from-an-array", "title": "How to extract keys from an array", "body": "<p>I have an array of tags</p>\n\n<pre><code>[\n{\"1boy\": 0.9390615820884703},\n{\"solo\": 0.9158311486244202},\n{\"male\": 0.6592671275138855},\n{\"black hair\": 0.4281844198703766},\n] \n</code></pre>\n\n<p>How do I extract the string from this array of hashes so that they display as a list:</p>\n\n<ul>\n<li>1boy </li>\n<li>solo</li>\n<li>male</li>\n<li>black hair</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "http"], "comments": [{"owner": {"reputation": 161, "user_id": 3085470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9H44t.jpg?s=128&g=1", "display_name": "Batbayar", "link": "https://stackoverflow.com/users/3085470/batbayar"}, "edited": false, "score": 0, "creation_date": 1531186374, "post_id": 51255573, "comment_id": 89491082, "body": "You can add rescue_from in your application_controller to catch every single error <a href=\"https://apidock.com/rails/ActiveSupport/Rescuable/ClassMethods/rescue_from\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveSupport/Rescuable/ClassMethods/&hellip;</a>"}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "reply_to_user": {"reputation": 161, "user_id": 3085470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9H44t.jpg?s=128&g=1", "display_name": "Batbayar", "link": "https://stackoverflow.com/users/3085470/batbayar"}, "edited": false, "score": 0, "creation_date": 1531189007, "post_id": 51255573, "comment_id": 89491558, "body": "If I do that I won&#39;t have the status that I would normally receive... how is this not built in already??"}, {"owner": {"reputation": 161, "user_id": 3085470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9H44t.jpg?s=128&g=1", "display_name": "Batbayar", "link": "https://stackoverflow.com/users/3085470/batbayar"}, "edited": false, "score": 0, "creation_date": 1531279148, "post_id": 51255573, "comment_id": 89531180, "body": "Hmm, I do not totally get what you really want. But if you want to render with different message and status depends on Exception, then you can set multiple rescue_from.   Or you could define multiple error_render methods and sort it in the one big rescue_from.   PS: also please do not rescue Exception. change it to StandardError."}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "reply_to_user": {"reputation": 161, "user_id": 3085470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9H44t.jpg?s=128&g=1", "display_name": "Batbayar", "link": "https://stackoverflow.com/users/3085470/batbayar"}, "edited": false, "score": 0, "creation_date": 1531357898, "post_id": 51255573, "comment_id": 89569542, "body": "I added  defaults: { format: :json }  to my route and it converted it - I&#39;m still after a default format change for all routes however so any suggestions to the configuration would be appreciated :)"}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 1, "creation_date": 1531288442, "post_id": 51257146, "comment_id": 89533745, "body": "But since the --api flag was introduced, surely they would have changed the the default response to json? Isn&#39;t there an easy config that can be changed? I&#39;m surprised it&#39;s not built in...your code above is adding code to what I thought would have been added to the rails framework..."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 0, "creation_date": 1531288685, "post_id": 51257146, "comment_id": 89533850, "body": "yes, i am sture because i done it in many applications. its not built in , you have to mention there for response to json and for json request you need to specify format  in route"}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 0, "creation_date": 1531357825, "post_id": 51257146, "comment_id": 89569531, "body": "Thanks Vishal, specifying the format in the routes (which means I will have to add it to all routes) sorted the problem out. I added ``` defaults: { format: :json } ``` to my route"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "edited": false, "score": 1, "creation_date": 1531368581, "post_id": 51257146, "comment_id": 89571478, "body": "Yes. you can also do that."}, {"owner": {"reputation": 87, "user_id": 5072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ef63457490cbeafe1ad5291f6b52a05?s=128&d=identicon&r=PG", "display_name": "Christopher Elliott", "link": "https://stackoverflow.com/users/5072/christopher-elliott"}, "edited": false, "score": 0, "creation_date": 1567176528, "post_id": 51257146, "comment_id": 101898184, "body": "Wanted to add many people coming to this answer will be looking for debug_exception_response_format"}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": true, "score": 4, "last_activity_date": 1531195856, "creation_date": 1531195856, "answer_id": 51257146, "question_id": 51255573, "link": "https://stackoverflow.com/questions/51255573/rails-5-api-app-with-json-error-response-instead-of-html-error-response/51257146#51257146", "title": "rails 5 api app with json error response instead of html error response", "body": "<p>you can add format as json in routes so it will always accept request in json format like below</p>\n\n<pre><code>namespace :api, as: nil, defaults: { format: :json } do\n     devise_for :users, controllers: {\n        registrations: \"api/v1/users/registrations\",\n        passwords: \"api/v1/users/passwords\"\n      }\n\n      resources :products, only: [:show,:index] do\n        get \"check_product_avaibility\"\n        get \"filter\", on: :collection\n      end\nend\n</code></pre>\n\n<p>For handling errors globally, you can add around_action in application controller file</p>\n\n<pre><code>around_action :handle_exceptions, if: proc { request.path.include?('/api') }\n\n# Catch exception and return JSON-formatted error\n  def handle_exceptions\n    begin\n      yield\n    rescue ActiveRecord::RecordNotFound =&gt; e\n      @status = 404\n      @message = 'Record not found'\n    rescue ActiveRecord::RecordInvalid =&gt; e\n      render_unprocessable_entity_response(e.record) &amp;&amp; return\n    rescue ArgumentError =&gt; e\n      @status = 400\n    rescue StandardError =&gt; e\n      @status = 500\n    end\n    json_response({ success: false, message: @message || e.class.to_s, errors: [{ detail: e.message }] }, @status) unless e.class == NilClass\n  end\n</code></pre>\n\n<p><strong>NOTE: render_unprocessable_entity_response and json_response are custom methods , you can add your own methods to render json response.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 5908592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/k2qVE.jpg?s=128&g=1", "display_name": "James Stonehill", "link": "https://stackoverflow.com/users/5908592/james-stonehill"}, "is_accepted": false, "score": 0, "last_activity_date": 1612908578, "creation_date": 1612908578, "answer_id": 66127966, "question_id": 51255573, "link": "https://stackoverflow.com/questions/51255573/rails-5-api-app-with-json-error-response-instead-of-html-error-response/66127966#66127966", "title": "rails 5 api app with json error response instead of html error response", "body": "<p>You can use the <a href=\"https://github.com/jamesstonehill/api_error_handler\" rel=\"nofollow noreferrer\">api_error_handler gem</a>.</p>\n<p>Include it in your bundler file:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>gem &quot;api_error_handler&quot;, &quot;~&gt; 0.2.0&quot;\n</code></pre>\n<p>The in your application controller, invoke the library.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>class ApplicationController &lt; ActionController::API\n  handle_api_errors(\n    # Error handling options go here if you want to override any defaults.\n  )\n\n  # ...\nend\n\n</code></pre>\n<p>Now if you have a controller like this:</p>\n<pre><code>\nclass UsersController &lt; ApplicationController\n  def index\n    raise 'SOMETHING WENT WRONG!!!'\n  end\nend\n</code></pre>\n<p>When you hit this endpoint you will see this response</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;error&quot;: {\n    &quot;title&quot;: &quot;Internal Server Error&quot;,\n    &quot;detail&quot;: &quot;SOMETHING WENT WRONG!!!&quot;\n  }\n}\n</code></pre>\n<p>And the status code will be set to an appropriate status code based on the type of error you had.</p>\n<p>See the gem's <a href=\"https://github.com/jamesstonehill/api_error_handler\" rel=\"nofollow noreferrer\">README</a> for more info on how to configure the error response.</p>\n"}], "owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4684, "favorite_count": 0, "accepted_answer_id": 51257146, "answer_count": 2, "score": 2, "last_activity_date": 1612908578, "creation_date": 1531181467, "last_edit_date": 1531191345, "question_id": 51255573, "link": "https://stackoverflow.com/questions/51255573/rails-5-api-app-with-json-error-response-instead-of-html-error-response", "title": "rails 5 api app with json error response instead of html error response", "body": "<p>If I create an app in rails using the --api flag my error responses are in html rather than json.</p>\n\n<p>How am I able to change the default error handler so that whenever an error is thrown in a controller action, I receive a json only response with the error and http status?</p>\n\n<p>right now I am using the code below in every custom action</p>\n\n<pre><code>rescue =&gt; e\n    response.status = 422\n    render json: { error: e.message }\n</code></pre>\n\n<p>I'd rather not have to add this each time...</p>\n\n<p>UPDATE: \nI used the rescue_from method in the application controller</p>\n\n<pre><code>rescue_from Exception do |exception|\n    render json: exception, status: 500\nend\n</code></pre>\n\n<p>But I feel this is very wrong and the status will always be hard coded as 500</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531180191, "post_id": 51255369, "comment_id": 89489817, "body": "Do you mean that the file gets saved if someone clicks on it, but not in the &quot;downloads&quot; folder of the computer? Or that it doesn&#39;t show up in the list of downloads in the browser menu drop down? What browsers have you tested with?"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531180321, "post_id": 51255369, "comment_id": 89489843, "body": "Do you mean something like this: <a href=\"https://stackoverflow.com/questions/4868945/force-browser-to-download-file-instead-of-opening-it\" title=\"force browser to download file instead of opening it\">stackoverflow.com/questions/4868945/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 9761177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1o9K2.jpg?s=128&g=1", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/9761177/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531180872, "post_id": 51255369, "comment_id": 89489973, "body": "I have tasted with Chrome and Safari, what I am trying to say is that the xlsx file exits, but I don&#39;t know how to send it to the browser downloads. With the send_file I get a red screen that says <b>no implicit conversion of XlsxWriter into String</b>"}, {"owner": {"reputation": 3, "user_id": 9761177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1o9K2.jpg?s=128&g=1", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/9761177/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531245879, "post_id": 51255369, "comment_id": 89521288, "body": "@Beartech I believe send_file does not work with XlsxWriter"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531354247, "post_id": 51255369, "comment_id": 89568877, "body": "Still unclear what you mean by: &quot;I am trying to say is that the xlsx file exits, but I don&#39;t know how to send it to the browser downloads&quot;."}, {"owner": {"reputation": 3, "user_id": 9761177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1o9K2.jpg?s=128&g=1", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/9761177/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531775115, "post_id": 51255369, "comment_id": 89712431, "body": "When working on local, I get to save the file in the root folder of my app with FileUtilities::mv, and It has all the data I requested, the problem is that I can&#39;t find a way to send it to the browser downloads when clicking the button"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531790139, "post_id": 51255369, "comment_id": 89715812, "body": "You say you think send_file doesn&#39;t work with XlsxWriter but you are using it. Have you tried changing that line to <code>send_file doc, :disposition =&gt; &#39;attachment&#39;, :filename =&gt; &quot;bitacora.xlsx&quot;</code>"}, {"owner": {"reputation": 3, "user_id": 9761177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1o9K2.jpg?s=128&g=1", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/9761177/luis-arturo-nieto-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1531853996, "post_id": 51255369, "comment_id": 89748931, "body": "Yes, I put it there because I don&#39;t know what else to use, I have already tried your line and Im still getting the same error <b>No implicit conversion of XlsxWriter into String</b>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9761177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1o9K2.jpg?s=128&g=1", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/9761177/luis-arturo-nieto-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1532485045, "post_id": 51468631, "comment_id": 89988856, "body": "Thanks I am using the axlsx gem now and it works perfect!"}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": true, "score": 1, "last_activity_date": 1532288061, "creation_date": 1532288061, "answer_id": 51468631, "question_id": 51255369, "link": "https://stackoverflow.com/questions/51255369/download-xlsx-file-created-by-xlsxwriter-in-rails/51468631#51468631", "title": "Download XLSX file created by XlsxWriter in rails", "body": "<p>After looking at the docs for <code>send_file</code> and XlsxWriter, the error tells you that it is expecting a String but you are passing it an object of type XlsxWriter. You can try the <code>path</code> method to tell <code>sendfile</code> where the file is at...</p>\n\n<pre><code>send_file(doc.path, :disposition =&gt; 'attachment', :filename =&gt; \"bitacora.xlsx\", type: \"application/xml\")\n</code></pre>\n\n<p>You don't indicate any structure of your rails app so I'm assuming this is a controller method. You could probably do something along the lines of:</p>\n\n<pre><code>def trip_bit\n@car = Car.find(params[:id])\n@t = @car.trips.all\n@trips = @t.order(:started_at)\n\nif @trips then\n  doc = XlsxWriter.new\n  doc.quiet_booleans!\n  sheet = doc.add_sheet(\"Vit\u00e1cora de Viajes \"+@car.model+' '+@car.year.to_s)\n  sheet.freeze_top_left = 'A2'\n  sheet.add_row(['Salida', 'Llegada', 'Origen', 'Destino', 'Distancia', 'Duraci\u00f3n', 'Score'])\n  @trips.each do |trip|\n    sheet.add_row([trip.started_at.to_s, trip.finished_at.to_s, if trip.origin then trip.origin.address end, if trip.destination then trip.destination.address end, trip.distance.to_s+'km', trip.duration.to_s+'min', trip.grade])\n  end\n  sheet.add_row([\"\",\"\",\"\",\"Total\", @trips.map { |trip| trip.distance }.sum.to_s+\"km\", @trips.map { |trip| trip.duration}.sum.to_s+\"min\", \"\"])\nelse\n  redirect_to my_car_details_path\n  flash.now[:alert] = 'Este coche no tiene viajes registrados'\nend\n\nrespond_to do |format|\n    format.xlsx\n  end\n\nend\n</code></pre>\n\n<p>The code above is a straight up guess as XlsxWriter is a binding of a C library and the documentation from a Rails perspective is really thin and pretty much useless to me. I have been using the axlsx_rails gem. It allows you to define a template and just hand that template a Rails data structure. I highly encourage you to check it out at: <a href=\"https://github.com/straydogstudio/axlsx_rails\" rel=\"nofollow noreferrer\">https://github.com/straydogstudio/axlsx_rails</a> </p>\n\n<p>It allows you to keep working in a Rails-ish way. When I want to export a spreadsheet of users to xlsx I just do this in my controller:</p>\n\n<pre><code>  def index\n    @users = User.active\n    respond_to do |format|\n      format.html\n      format.xlsx\n    end\n  end\n</code></pre>\n\n<p>Then in my views alongside my <code>index.html.erb</code> I have a file called <code>index.xlsx.axlsx</code> that looks like:</p>\n\n<pre><code>wb = xlsx_package.workbook\nwb.add_worksheet(name: \"Users\") do |sheet|\nsheet.add_row ['User', 'User Access Role']\n  @users.each do |user|\n    sheet.add_row [user.email, user.role.name]\n  end\nend\n</code></pre>\n\n<p>As you can see you have your logic for spreadsheet creation in the template. The way you are doing it is very hack-is and messy. </p>\n"}], "owner": {"reputation": 3, "user_id": 9761177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1o9K2.jpg?s=128&g=1", "display_name": "Luis Arturo Nieto Hern&#225;ndez", "link": "https://stackoverflow.com/users/9761177/luis-arturo-nieto-hern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 51468631, "answer_count": 1, "score": 0, "last_activity_date": 1532288223, "creation_date": 1531179507, "last_edit_date": 1532288223, "question_id": 51255369, "link": "https://stackoverflow.com/questions/51255369/download-xlsx-file-created-by-xlsxwriter-in-rails", "title": "Download XLSX file created by XlsxWriter in rails", "body": "<p>I am trying to save an xlsx file to the browser downloads, the following functions gets activated when clicking a browser button</p>\n\n<pre><code>def trip_bit\n@car = Car.find(params[:id])\n@t = @car.trips.all\n@trips = @t.order(:started_at)\n\nif @trips then\n  doc = XlsxWriter.new\n  doc.quiet_booleans!\n  sheet = doc.add_sheet(\"Vit\u00e1cora de Viajes \"+@car.model+' '+@car.year.to_s)\n  sheet.freeze_top_left = 'A2'\n  sheet.add_row(['Salida', 'Llegada', 'Origen', 'Destino', 'Distancia', 'Duraci\u00f3n', 'Score'])\n  @trips.each do |trip|\n    sheet.add_row([trip.started_at.to_s, trip.finished_at.to_s, if trip.origin then trip.origin.address end, if trip.destination then trip.destination.address end, trip.distance.to_s+'km', trip.duration.to_s+'min', trip.grade])\n  end\n  sheet.add_row([\"\",\"\",\"\",\"Total\", @trips.map { |trip| trip.distance }.sum.to_s+\"km\", @trips.map { |trip| trip.duration}.sum.to_s+\"min\", \"\"])\nelse\n  redirect_to my_car_details_path\n  flash.now[:alert] = 'Este coche no tiene viajes registrados'\nend\n\nsend_file doc, :filename =&gt; \"bitacora.xlsx\"\n\nend\n</code></pre>\n\n<p>The xlsx file <code>doc</code> gets created and saved to the local filesystem, but I can't find a way to send it to the browser downloads.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 5568045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e61e6cb6006fa4bf4bb5d2c449d37e4?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/5568045/bogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1531176423, "creation_date": 1531176423, "answer_id": 51255017, "question_id": 51254361, "link": "https://stackoverflow.com/questions/51254361/view-doesnt-display-after-method-is-called/51255017#51255017", "title": "View Doesn&#39;t Display After Method Is Called", "body": "<p>Here <code>tasks/#{:id}/completed</code> - you put <code>id</code> as a <code>symbol</code> while you need to pass real <code>id</code>. You should use Rails routes  helper instead of <code>tasks/#{:id}/completed</code> and it will make your life easier. </p>\n\n<ul>\n<li>In terminal: <code>rails routes</code> or <code>rake routes</code>.</li>\n<li>Find the route you need</li>\n<li>Replace your link with something like this <code>link_to('My link', task_complete_path(task.id))</code></li>\n</ul>\n\n<p>If this not helps you, please reply and provide also your route definition.</p>\n"}, {"comments": [{"owner": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531233393, "post_id": 51255100, "comment_id": 89514272, "body": "Thank you for your help. I&#39;ve added your changes, but my tasks_compelted_path is a GET request and not PATCH.  &lt;%= link_to &quot;Mark Complete&quot;, task_completed_path(@task.id) %&gt;  Returns: &quot;ActiveRecord::RecordNotFound in TasksController#update Couldn&#39;t find Task with &#39;id&#39;=:id(&quot;"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531234161, "post_id": 51255100, "comment_id": 89514782, "body": "Did you add <code>method: :patch</code> as I indicated?"}, {"owner": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531238821, "post_id": 51255100, "comment_id": 89517863, "body": "I had that originally, unfortunately it didn&#39;t work. Getting the same error."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531239359, "post_id": 51255100, "comment_id": 89518139, "body": "Your routes.rb file is incorrect. You&#39;re double defining <code>resources :tasks</code> (line 21 and 28). You&#39;re also double defining <code>resources :projects</code> (line 22 and 27)."}, {"owner": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531239871, "post_id": 51255100, "comment_id": 89518392, "body": "I appreciate your help. When I remove my routes, however, I get a new error. I currently have the routes you gave me commented out, which brings me back to my initial error"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531240468, "post_id": 51255100, "comment_id": 89518692, "body": "See my update. I&#39;m not sure what&#39;s wrong on your end. Perhaps you should add your <code>link_to</code> code as it currently stands, the resulting HTML, and the entire console output (beginning with <code>Started ...</code>) to your original question."}, {"owner": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531268541, "post_id": 51255100, "comment_id": 89529023, "body": "Changed the approach and went with an enumerable."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "edited": false, "score": 0, "creation_date": 1531268773, "post_id": 51255100, "comment_id": 89529061, "body": "Not sure what that means. But, you may want to add an answer with your working approach so that future searches can see how you did it."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1531240319, "last_edit_date": 1531240319, "creation_date": 1531177256, "answer_id": 51255100, "question_id": 51254361, "link": "https://stackoverflow.com/questions/51254361/view-doesnt-display-after-method-is-called/51255100#51255100", "title": "View Doesn&#39;t Display After Method Is Called", "body": "<p>First of all, consider defining your routes like this:</p>\n\n<pre><code>resources :projects do \n  resources :tasks, shallow: true do \n    member do \n      patch :completed\n    end\n  end\nend\n</code></pre>\n\n<p>(You can read more about <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">nesting resources</a> and <a href=\"http://guides.rubyonrails.org/routing.html#adding-more-restful-actions\" rel=\"nofollow noreferrer\">adding more RESTful actions</a> in the docs.)</p>\n\n<p>Which will give you:</p>\n\n<pre><code>  completed_task PATCH  /tasks/:id/completed(.:format)                 tasks#completed\n   project_tasks GET    /projects/:project_id/tasks(.:format)          tasks#index\n                 POST   /projects/:project_id/tasks(.:format)          tasks#create\nnew_project_task GET    /projects/:project_id/tasks/new(.:format)      tasks#new\n       edit_task GET    /tasks/:id/edit(.:format)                      tasks#edit\n            task GET    /tasks/:id(.:format)                           tasks#show\n                 PATCH  /tasks/:id(.:format)                           tasks#update\n                 PUT    /tasks/:id(.:format)                           tasks#update\n                 DELETE /tasks/:id(.:format)                           tasks#destroy\n        projects GET    /projects(.:format)                            projects#index\n                 POST   /projects(.:format)                            projects#create\n     new_project GET    /projects/new(.:format)                        projects#new\n    edit_project GET    /projects/:id/edit(.:format)                   projects#edit\n         project GET    /projects/:id(.:format)                        projects#show\n                 PATCH  /projects/:id(.:format)                        projects#update\n                 PUT    /projects/:id(.:format)                        projects#update\n                 DELETE /projects/:id(.:format)                        projects#destroy\n</code></pre>\n\n<p>Notice that you now have a named path for <code>completed_task</code> that responds to the <code>PATCH</code> HTTP verb.</p>\n\n<p>Then, update <code>app/views/projects/show.html.erb</code> to include:</p>\n\n<pre><code>&lt;% if @project.tasks.any? %&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Task&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;% @project.tasks.each do |task| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;\n          &lt;%= task.notes %&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n          &lt;% unless task.completed %&gt;\n            &lt;%= link_to \"Mark Complete\", completed_task_path(task), method: :patch %&gt;\n          &lt;% end %&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It looks to me like your table is malformed, so I tried to fix it. You may need to fiddle with that. </p>\n\n<p>Your TasksController#completed action is also malformed. You try to redirect to <code>project_path(@project)</code>, but you never define <code>@project</code>. It should look more like:</p>\n\n<pre><code>def completed\n  @task = Task.find(params[:id])\n  @task.update(completed: true)\n  redirect_to @task.project\nend\n</code></pre>\n\n<p>This, naturally, assumes you've set up your Task and Project association correctly, something like:</p>\n\n<pre><code>class Task &lt; ActiveRecord::Base\n  belongs_to :project \nend\n</code></pre>\n\n<p>FYI, I just cloned your projects and added this to <code>views/static/index.html.erb</code> (naturally, '1' is just a dummy ID since I don't have any records in the DB):</p>\n\n<pre><code>&lt;%= link_to \"Test\", completed_task_path(1), method: :patch %&gt;\n</code></pre>\n\n<p>Which gave me:</p>\n\n<pre><code>&lt;a rel=\"nofollow\" data-method=\"patch\" href=\"/tasks/1/completed\"&gt;Test&lt;/a&gt;\n</code></pre>\n\n<p>When I click on it, I get: </p>\n\n<pre><code>Started PATCH \"/tasks/1/completed\" for 127.0.0.1 at 2018-07-10 09:28:01 -0700\nProcessing by TasksController#completed as HTML\n  Parameters: {\"authenticity_token\"=&gt;\"euLDameHwkrCCMfTsPg5Znk2Mwuh7v6/O2wZFt6zGaRJzE9F1XMgGR1Uz2oYfpeQL//v/L1QtAEo7TDqsphIFw==\", \"id\"=&gt;\"1\"}    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1531412335, "creation_date": 1531412335, "answer_id": 51310394, "question_id": 51254361, "link": "https://stackoverflow.com/questions/51254361/view-doesnt-display-after-method-is-called/51310394#51310394", "title": "View Doesn&#39;t Display After Method Is Called", "body": "<p>Figured it out, thanks @jvillian for your help.</p>\n\n<p>Instead of using a method in my tasks controller to change the Task.completed attribute (originally a string), I created an enumerable (similar to a boolean in that it's binary) that can be switched from \"incomplete\" to \"complete\" whenever the method is called.</p>\n\n<p>app/controllers/tasks_controller:</p>\n\n<pre><code>include ProjectsHelper\n\nclass TasksController &lt; ApplicationController\n\ndef create\n    t = Task.new(task_params)\n    t.save\n    redirect_to project_path(t.project)\nend\n\ndef update\n    t = Task.find(params[:id])\n    if t.user == current_user\n        t.update(completion_status: 'complete', completion_date: DateTime.now, completed: true)\n        t.project.update(last_completed: DateTime.now)\n    end\n    redirect_to :back\nend\n\ndef toggle_status\n    @task = Task.find(params[:id])\n\n    if @task.incomplete?\n        @task.complete!\n    elsif @task.complete?\n        @task.incomplete!\n    end\n\n    redirect_to @task.project\n  end\n\n\nprivate\n\ndef task_params\n    params.require(:task).permit(:user_id, :project_id, :notes)\nend\n</code></pre>\n\n<p>Then for my model:</p>\n\n<pre><code>class Task &lt; ApplicationRecord\n    enum status: [ :incomplete, :complete ]\n\nbelongs_to :user\nbelongs_to :project\n\nvalidates :notes, presence: true\n\nscope :completed, -&gt; { where(completed: true) }\n\ndef self.completed\n    Task.completed\nend\nend\n</code></pre>\n\n<p>The enum status serves as a binary option, much like a boolean. Formerly a string, I was able to change method to simply 'flip' the value of the enumerable, and write the proper controller action in my project/show:</p>\n\n<pre><code>&lt;% if @project.tasks.any? %&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Task&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;% @project.tasks.each do |task| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;\n          &lt;%= task.notes %&gt;\n          &lt;%= task.status %&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n        &lt;% if !task.id.nil? %&gt;\n\n            &lt;%= link_to \"Change Status\", toggle_status_task_path(task) %&gt;\n        &lt;% end %&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n\n  &lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 8222907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hEAnG.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8222907/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1531412335, "creation_date": 1531172216, "question_id": 51254361, "link": "https://stackoverflow.com/questions/51254361/view-doesnt-display-after-method-is-called", "title": "View Doesn&#39;t Display After Method Is Called", "body": "<p>I have a projects.show.html page which shows a project and it's given tasks. The tasks are shown if their <em>completed</em> attribute is set to <em>false</em> (default). I have a method that converts the attribute to <em>true</em>, but when it loads the page, I get an error: </p>\n\n<p>\"ActiveRecord::RecordNotFound in ProjectsController#show\nCouldn't find Project with 'id'=tasks    </p>\n\n<pre><code>def show\n        @project = Project.find(params[:id])\n        @task = @project.tasks.build\n    end\n</code></pre>\n\n<p>\"</p>\n\n<p>Here's my code:\n<em>projects_controller</em></p>\n\n<pre><code>   def show\n    @project = Project.find(params[:id])\n    @task = @project.tasks.build\n   end\n</code></pre>\n\n<p><em>Tasks_controller</em></p>\n\n<pre><code>def completed\n    @task = Task.find(params[:id])\n    @task.completed = true\n    @task.save\n    redirect_to project_path(@project)\nend\n</code></pre>\n\n<p><em>Projects/show.html.erb</em></p>\n\n<pre><code>&lt;% if @project.tasks.size &gt; 0 %&gt;\n&lt;table class=\"table\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;Task&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;% @project.tasks.each do |task| %&gt;\n    &lt;tr&gt;\n    &lt;td&gt;&lt;%= task.notes %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;% if !task.completed %&gt;&lt;%= link_to \"Mark Complete\", 'tasks/#{:id}/completed' %&gt;&lt;/td&gt;\n    &lt;% end %&gt;\n    &lt;% end %&gt;\n    &lt;% end %&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 9938680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96662d2f2ce85567235b8066b85ce87?s=128&d=identicon&r=PG&f=1", "display_name": "LLBrettK", "link": "https://stackoverflow.com/users/9938680/llbrettk"}, "edited": false, "score": 0, "creation_date": 1531172483, "post_id": 51254289, "comment_id": 89487715, "body": "I get what your saying, but specifically adding quotes where the follow_up_date is not today&#39;s date is still a little tricky for me. If I do something like this <code>notToDay = Date.today()</code> and then <code>:follow_up_date =&gt; notToDay</code>, how do I get it so <code>notToDay</code> is everyday but today?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 103, "user_id": 9938680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96662d2f2ce85567235b8066b85ce87?s=128&d=identicon&r=PG&f=1", "display_name": "LLBrettK", "link": "https://stackoverflow.com/users/9938680/llbrettk"}, "edited": false, "score": 0, "creation_date": 1531172681, "post_id": 51254289, "comment_id": 89487779, "body": "You literally want it to be equal to every day but today? I don&#39;t think the RAM can hold all those days. Would perhaps a simple boolean if it is today or not suffice? If so just check if <code>Date.today != some_other_date</code>"}, {"owner": {"reputation": 103, "user_id": 9938680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96662d2f2ce85567235b8066b85ce87?s=128&d=identicon&r=PG&f=1", "display_name": "LLBrettK", "link": "https://stackoverflow.com/users/9938680/llbrettk"}, "edited": false, "score": 0, "creation_date": 1531173114, "post_id": 51254289, "comment_id": 89487914, "body": "Yeah, but I think the issue is still here <code>:follow_up_date =&gt; NOT Date.today()</code>. I don&#39;t think a boolean can be used in this notation and I wasn&#39;t sure what syntax could be used to check for not today."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1531171762, "creation_date": 1531171762, "answer_id": 51254289, "question_id": 51254203, "link": "https://stackoverflow.com/questions/51254203/creating-an-array-of-something-by-not-todays-date/51254289#51254289", "title": "Creating an array of something by not today&#39;s date?", "body": "<p>You can simply use equality operators</p>\n\n<pre><code>today = Date.today\ntoday == some_other_date\n</code></pre>\n\n<p>Can also use <code>&lt;</code> and <code>&gt;</code> to check if date is earlier or later than another.</p>\n\n<pre><code>today &lt; some_other_date\n</code></pre>\n\n<p>If using <code>Date.today</code>, it does not compare the exact time like it would if using <code>Time.now</code> from other time/date related built-ins.  </p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 9938680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96662d2f2ce85567235b8066b85ce87?s=128&d=identicon&r=PG&f=1", "display_name": "LLBrettK", "link": "https://stackoverflow.com/users/9938680/llbrettk"}, "edited": false, "score": 0, "creation_date": 1531173248, "post_id": 51254463, "comment_id": 89487963, "body": "Thanks for your help! Do you happen to know of a way to check for future days and days past?"}, {"owner": {"reputation": 1459, "user_id": 4875295, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/676f153e67fffed6c41698f68353b9b5?s=128&d=identicon&r=PG", "display_name": "cameck", "link": "https://stackoverflow.com/users/4875295/cameck"}, "reply_to_user": {"reputation": 103, "user_id": 9938680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96662d2f2ce85567235b8066b85ce87?s=128&d=identicon&r=PG&f=1", "display_name": "LLBrettK", "link": "https://stackoverflow.com/users/9938680/llbrettk"}, "edited": false, "score": 1, "creation_date": 1531178205, "post_id": 51254463, "comment_id": 89489356, "body": "@LLBrettK No problem!  You could probably do something like <code>.where(&#39;follow_up_date &lt; ?&#39;, 60.days.ago)</code> (or <code>60.days.from_now </code>) -- <a href=\"http://api.rubyonrails.org/classes/Numeric.html#method-i-days\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/Numeric.html#method-i-days</a>"}], "tags": [], "owner": {"reputation": 1459, "user_id": 4875295, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/676f153e67fffed6c41698f68353b9b5?s=128&d=identicon&r=PG", "display_name": "cameck", "link": "https://stackoverflow.com/users/4875295/cameck"}, "is_accepted": true, "score": 3, "last_activity_date": 1531172720, "creation_date": 1531172720, "answer_id": 51254463, "question_id": 51254203, "link": "https://stackoverflow.com/questions/51254203/creating-an-array-of-something-by-not-todays-date/51254463#51254463", "title": "Creating an array of something by not today&#39;s date?", "body": "<p>You can use <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/WhereChain/not\" rel=\"nofollow noreferrer\"><code>where.not</code></a> to get that negation:</p>\n\n<pre><code>@upcomingTasks = Quote.where(follow_up: 1).where.not(follow_up_date: Date.today())\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9938680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96662d2f2ce85567235b8066b85ce87?s=128&d=identicon&r=PG&f=1", "display_name": "LLBrettK", "link": "https://stackoverflow.com/users/9938680/llbrettk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 51254463, "answer_count": 2, "score": 1, "last_activity_date": 1531172720, "creation_date": 1531171308, "last_edit_date": 1531172214, "question_id": 51254203, "link": "https://stackoverflow.com/questions/51254203/creating-an-array-of-something-by-not-todays-date", "title": "Creating an array of something by not today&#39;s date?", "body": "<p>I have two arrays I'm trying to make. The first one is all the \"quotes\" with a \"follow_up_date\" that is today's date. My code looks like:</p>\n\n<pre><code>@dailyTasks = Quote.where(:follow_up =&gt; 1,:follow_up_date =&gt; Date.today())\n</code></pre>\n\n<p>This works perfectly for me and is not the issue.</p>\n\n<p>My next array is the same concept but all the quotes to be added are quotes with a follow_up_date that is not today's date. Something like this is what I'm looking for:</p>\n\n<pre><code>@upcomingTasks = Quote.where(:follow_up =&gt; 1, :follow_up_date =&gt; NOT Date.today())\n</code></pre>\n\n<p>Does anyone know the proper syntax I should be using to add quotes whose date is <strong>NOT</strong> today's date?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1531172666, "creation_date": 1531172666, "answer_id": 51254457, "question_id": 51254137, "link": "https://stackoverflow.com/questions/51254137/finding-missing-records-from-db/51254457#51254457", "title": "Finding missing records from db", "body": "<p>You could <code>pluck</code> the keys from that query, and compare it to the expected set:</p>\n\n<pre><code>required_keys = ['a', 'b', 'c']\nactual_keys = ConfigurationAttribute.where(key: required_keys).pluck(:key)\n\nif actual_keys != required_keys\n  # This could be a model validation, or whatever. But for example:\n  raise \"Whoops! You configuration contains the keys: #{actual_keys}. Should contain: #{required_keys}\"\nend\n</code></pre>\n\n<p>The exact implementation details may vary slightly -- for example, maybe there can be multiple <code>ConfigurationAttribute</code>s for the same key? Maybe there <em>cannot</em> be any <code>ConfigurationAttribute</code>s for different keys? Maybe the <code>required_keys</code> varies depending on some condition (in which case, that could be a method call rather than a variable)? ...</p>\n\n<p>... In which case, you may wish to modify that query, or the <code>if</code> statement, or add an additional validation, or whatever.</p>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 51254457, "answer_count": 1, "score": 0, "last_activity_date": 1531173807, "creation_date": 1531170919, "question_id": 51254137, "link": "https://stackoverflow.com/questions/51254137/finding-missing-records-from-db", "title": "Finding missing records from db", "body": "<p>I am trying to validate my configuration. So I have a piece of code like :</p>\n\n<pre><code>ConfigurationAttribute.where(key: [\n    'a', 'b', 'c'\n  ])\n</code></pre>\n\n<p>If someone forgets to set key a, on the configuration or b, I want to be able to find the missing ones. Now I realize the record doesn't actually exists in the db, so there is nothing to find and instantiate the <code>ConfigurationAttribute</code> record from.</p>\n\n<p>How would you solve a problem like this? </p>\n\n<p>I can check if the count of attributes is equal to 3, that will make sure if all keys are set or not. But then again if I was troubleshooting this error, I would be frustrated because I don't know which one is missing and I would have to go and look one by one who is missing.</p>\n"}, {"tags": ["ruby", "bash", "macos", "terminal", "path"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 786574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25478e34dabcb54a1cd61a01ed9e0b6a?s=128&d=identicon&r=PG", "display_name": "Anna", "link": "https://stackoverflow.com/users/786574/anna"}, "edited": false, "score": 0, "creation_date": 1531253214, "post_id": 51255762, "comment_id": 89524476, "body": "Hmm, I couldn&#39;t get that to work actually, and I can&#39;t figure out how to get a helpful google search. When I just typed <code>hash</code> I got <code>&#47;usr&#47;bin&#47;which</code> and <code>&#47;usr&#47;bin&#47;whereis</code> as my hits, if that&#39;s more informative?"}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1531183212, "creation_date": 1531183212, "answer_id": 51255762, "question_id": 51254026, "link": "https://stackoverflow.com/questions/51254026/which-ruby-points-to-a-non-existent-directory-how-do-i-get-it-to-point-to-the/51255762#51255762", "title": "&quot;which ruby&quot; points to a non-existent directory, how do i get it to point to the same directory as &quot;whereis ruby&quot;?", "body": "<p>If \"which ruby\" is returning an obsolete location, that is probably because you have it aliased to <strong><code>type</code></strong>, and because the information <em>exists</em> only in your shell's <strong><em>hash</em></strong>.  You can clear that with</p>\n\n<pre><code>hash -r\n</code></pre>\n\n<p>The <code>whereis</code> program does not use the hashed information, but mainly relies upon <strong><code>$PATH</code></strong> (and eliminating the obsolete information, bash will give consistent results).</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 786574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25478e34dabcb54a1cd61a01ed9e0b6a?s=128&d=identicon&r=PG", "display_name": "Anna", "link": "https://stackoverflow.com/users/786574/anna"}, "is_accepted": true, "score": 0, "last_activity_date": 1534112074, "creation_date": 1534112074, "answer_id": 51813281, "question_id": 51254026, "link": "https://stackoverflow.com/questions/51254026/which-ruby-points-to-a-non-existent-directory-how-do-i-get-it-to-point-to-the/51813281#51813281", "title": "&quot;which ruby&quot; points to a non-existent directory, how do i get it to point to the same directory as &quot;whereis ruby&quot;?", "body": "<p>This might not be helpful to anyone else, but it turned out I still had MacPorts installed, which was also using that opt/local directory and I had to clean that up to make everything point correctly.</p>\n"}], "owner": {"reputation": 39, "user_id": 786574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25478e34dabcb54a1cd61a01ed9e0b6a?s=128&d=identicon&r=PG", "display_name": "Anna", "link": "https://stackoverflow.com/users/786574/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 51813281, "answer_count": 2, "score": 0, "last_activity_date": 1534112074, "creation_date": 1531170358, "last_edit_date": 1532018377, "question_id": 51254026, "link": "https://stackoverflow.com/questions/51254026/which-ruby-points-to-a-non-existent-directory-how-do-i-get-it-to-point-to-the", "title": "&quot;which ruby&quot; points to a non-existent directory, how do i get it to point to the same directory as &quot;whereis ruby&quot;?", "body": "<p>I'm using a bash shell in Terminal on my MacBook running 10.21.1</p>\n\n<p>When I type the command <code>which ruby</code> I get the result of <code>/opt/local/bin/ruby</code>, which no longer exists. My Ruby environment got messed up years ago and now I want to start from scratch, so I deleted the extra version.</p>\n\n<p>However, when I type <code>whereis ruby</code> I get the result of <code>/usr/bin/ruby</code>, the default directory for Ruby on OSX.</p>\n\n<p><code>/opt/local/bin/ruby</code> is not in <code>/etc/paths</code>, but <code>/usr/bin/ruby</code> is.</p>\n\n<p>How do I get them to point to the same place? Is it better to just install a version manager and let it do that work for me?</p>\n\n<p>After a lot more poking around, and trying to determine if it was actually something with hash, I don't think it is.</p>\n\n<p>Looking at ~/.bashrc, it has the following line:</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n</code></pre>\n\n<p>And ~/.bashprofile has:</p>\n\n<pre><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n</code></pre>\n\n<p>Could that be why <code>echo $PATH</code> includes <code>/opt/local/bin</code> and is that safe to remove?</p>\n"}, {"tags": ["ruby", "jekyll", "github-pages", "jekyll-theme"], "answers": [{"tags": [], "owner": {"reputation": 1530, "user_id": 3357235, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b8Ays.jpg?s=128&g=1", "display_name": "Keith Mifsud", "link": "https://stackoverflow.com/users/3357235/keith-mifsud"}, "is_accepted": false, "score": 0, "last_activity_date": 1531195687, "creation_date": 1531195687, "answer_id": 51257122, "question_id": 51253614, "link": "https://stackoverflow.com/questions/51253614/home-layout-missing-in-layouts-folder-but-works/51257122#51257122", "title": "Home layout missing in _layouts folder, but works", "body": "<p>this issue can be caused by several factors but it is possible there's no issue at all :)</p>\n\n<p>1) Stop Jekyll serve/watch.\n2) Delete the <code>_site</code> directory.\n3) Rebuild and serve the site</p>\n\n<p><code>jekyll serve</code>.</p>\n\n<p>Keep an eye on the terminal to see if Jekyll warns you about the missing layout file. </p>\n\n<p>It is possible, albeit unlikely that the theme or a plugin id building layouts on the fly. To override this (whether it is the case or not), create a <code>home</code> layout as usual and include in a page/post's front-matter. Just keep the layout basic with something like a red background so that you can easily test if it is loaded or not.</p>\n\n<p>I think deleting the <code>_site</code> folder will fix this but if not, try the other option and let me know. </p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 7096638, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b6eb1433f9d911153ee8b062a251d969?s=128&d=identicon&r=PG&f=1", "display_name": "Jinmo Chong", "link": "https://stackoverflow.com/users/7096638/jinmo-chong"}, "edited": false, "score": 0, "creation_date": 1531232896, "post_id": 51257558, "comment_id": 89513943, "body": "Thanks David! Had no Idea theme:minima was guilty for this!"}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 5, "last_activity_date": 1531238026, "last_edit_date": 1531238026, "creation_date": 1531198972, "answer_id": 51257558, "question_id": 51253614, "link": "https://stackoverflow.com/questions/51253614/home-layout-missing-in-layouts-folder-but-works/51257558#51257558", "title": "Home layout missing in _layouts folder, but works", "body": "<p>In <strong><em>_config.yml</em></strong>, we can see that you are using (<code>theme: minima</code>) the <em>minima</em> gem based theme (<a href=\"https://jekyllrb.com/docs/themes/\" rel=\"nofollow noreferrer\">documentation</a>). That means that by default, all your <em>_includes</em>, <em>_layouts</em> and <em>assets</em> are hidden somewhere on you computer. You can use the <code>bundle show minima</code> command to find out where they are stored.</p>\n\n<p>As <em>home</em> layout exists in <em>minima</em> theme, is it used.</p>\n\n<p>If you want to use your own home layout you can copy it from <em>minima</em> to your <em>_layouts</em> folder and modify it to suits your needs.</p>\n\n<pre><code>cd your/root\ncp `echo \"$(bundle show minima)/_layouts/home.html\" _layouts/home.html`\n</code></pre>\n\n<p>If you want to be sure not to use hidden resources, you can delete the <code>theme: minima</code> directive from your <em>_config.yml</em> file.</p>\n"}], "owner": {"reputation": 71, "user_id": 7096638, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b6eb1433f9d911153ee8b062a251d969?s=128&d=identicon&r=PG&f=1", "display_name": "Jinmo Chong", "link": "https://stackoverflow.com/users/7096638/jinmo-chong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 1, "accepted_answer_id": 51257558, "answer_count": 2, "score": 3, "last_activity_date": 1607937019, "creation_date": 1531168475, "last_edit_date": 1607937019, "question_id": 51253614, "link": "https://stackoverflow.com/questions/51253614/home-layout-missing-in-layouts-folder-but-works", "title": "Home layout missing in _layouts folder, but works", "body": "<p>I started to make my blog with jekyll and github pages.</p>\n<p>I was doing fine with the basic theme,\nBut I wanted to apply the side bar property,\nso I downloaded the theme which has the sidebar, from <a href=\"https://idratherbewriting.com/documentation-theme-jekyll/\" rel=\"nofollow noreferrer\">https://idratherbewriting.com/documentation-theme-jekyll/</a></p>\n<p>So I downloaded the proejct and overrided.\nI don't know much about how this works,\nbut the strangest thing is that\nin index.md file</p>\n<p>if I put</p>\n<pre><code>---\nlayout:home\nsidebar:mydoc_sidebar\n----\n</code></pre>\n<p>it happens to show the basic theme layout\nand the posts as it should be, but if I change the layout to\nsomething else which is inside the _layout folder such as post, default,\nthe posts disappear and I have no idea why Jekyll does this.</p>\n<p>Even when I erase the layout, it returns empty screen\nso I'm sure it's doing something with the\nhome layout but I couldn't find anywhere how the home layout is rendered.</p>\n"}, {"tags": ["ruby", "docker", "rabbitmq", "amqp", "bunny"], "comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1531172750, "post_id": 51253455, "comment_id": 89487807, "body": "Using 127.0.0.1 or <code>localhost</code> in a Docker context is almost always wrong; you need to configure some other name for the AMQP broker, depending on if it&#39;s running in another Docker container or somewhere else."}, {"owner": {"reputation": 821, "user_id": 2510165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1ac62cb336029440d39950b9045408d4?s=128&d=identicon&r=PG", "display_name": "Cherry", "link": "https://stackoverflow.com/users/2510165/cherry"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1531228707, "post_id": 51253455, "comment_id": 89510627, "body": "It&#39;s NOT running in another docker container. It&#39;s running in my local machine. I added this as environmental variable <code>AMQP_RECEIVE_URL=amqp:&#47;&#47;guest:guest@rabbitmq</code>. But it does nothing. Do you have any idea? Thanks for your repsonse"}], "answers": [{"tags": [], "owner": {"reputation": 821, "user_id": 2510165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1ac62cb336029440d39950b9045408d4?s=128&d=identicon&r=PG", "display_name": "Cherry", "link": "https://stackoverflow.com/users/2510165/cherry"}, "is_accepted": false, "score": 0, "last_activity_date": 1531412358, "creation_date": 1531412358, "answer_id": 51310399, "question_id": 51253455, "link": "https://stackoverflow.com/questions/51253455/amqp-rabbitmq-configuration-to-run-a-ruby-script-by-using-docker-run-command/51310399#51310399", "title": "amqp rabbitmq configuration to run a ruby script by using docker run command", "body": "<p>It's working fine for me. All I had to do is:\nadd this command <code>CMD [\"bundle\", \"exec\", \"ruby\",\"filename\"]</code> into Dockerfile and \nadd the envFile where I have added the <code>AMQP</code> variable value in docker run command</p>\n"}], "owner": {"reputation": 821, "user_id": 2510165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1ac62cb336029440d39950b9045408d4?s=128&d=identicon&r=PG", "display_name": "Cherry", "link": "https://stackoverflow.com/users/2510165/cherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531412358, "creation_date": 1531167685, "question_id": 51253455, "link": "https://stackoverflow.com/questions/51253455/amqp-rabbitmq-configuration-to-run-a-ruby-script-by-using-docker-run-command", "title": "amqp rabbitmq configuration to run a ruby script by using docker run command", "body": "<p>I am trying to run a ruby script for backend services by using <code>docker run</code> command.</p>\n\n<ul>\n<li>Adding <code>CMD [\"./bin/ruby_code_name\"]</code> in Dockerfile</li>\n<li>Running <code>docker run -it --name=containerName --rm testimage</code> command after building the image.</li>\n</ul>\n\n<p>it shows the following error:</p>\n\n<p><code>\nE, [2018-07-09T20:09:25.039697 #1] ERROR -- : [amqp] Detected TCP connection failure: Errno::ECONNREFUSED\n/usr/local/rvm/gems/ruby-2.1.9/gems/amqp-1.6.0/lib/amqp/session.rb:182:in `block in initialize': Could not establish TCP connection to 127.0.0.1:5672 (AMQP::TCPConnectionFailed)\n    from /usr/local/rvm/gems/ruby-2.1.9/gems/amqp-1.6.0/lib/amqp/session.rb:796:in `call'\n    from /usr/local/rvm/gems/ruby-2.1.9/gems/amqp-1.6.0/lib/amqp/session.rb:796:in `tcp_connection_failed'\n    from /usr/local/rvm/gems/ruby-2.1.9/gems/amqp-1.6.0/lib/amqp/session.rb:639:in `unbind'\n    from /usr/local/rvm/gems/ruby-2.1.9/gems/eventmachine-1.0.9/lib/eventmachine.rb:1468:in `event_callback'\n    from /usr/local/rvm/gems/ruby-2.1.9/gems/eventmachine-1.0.9/lib/eventmachine.rb:193:in `run_machine'\n    from /usr/local/rvm/gems/ruby-2.1.9/gems/eventmachine-1.0.9/lib/eventmachine.rb:193:in `run'\n    from ./bin/ruby_code_name:216:in `&lt;main&gt;'\n</code></p>\n\n<p>How can I configure amqp or rabbitmq or bunny to run the ruby script?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 7, "creation_date": 1531166386, "post_id": 51253114, "comment_id": 89485227, "body": "<a href=\"https://ruby-doc.org/core-2.4.0/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> take a look I am sure you can figure it out :)"}, {"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 1, "creation_date": 1531169393, "post_id": 51253114, "comment_id": 89486561, "body": "you can just do <code>string[0..8]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 1, "creation_date": 1531169765, "post_id": 51253243, "comment_id": 89486730, "body": "@SaraTibbetts it&#39;ll output <code>123456798</code> .. notice 8 and 9"}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 2, "last_activity_date": 1531169933, "last_edit_date": 1531169933, "creation_date": 1531166680, "answer_id": 51253243, "question_id": 51253114, "link": "https://stackoverflow.com/questions/51253114/ruby-string-not-longer-than-n-number-of-characters/51253243#51253243", "title": "Ruby string not longer than n number of characters", "body": "<p>You can use functionality built into the <code>String</code> class. </p>\n\n<pre><code>string = \"1234567980987654321\"\n\nnew_string = string[0, 9] #=&gt; \"123456798\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 505, "user_id": 3571257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f374e7909c6b2c2ffbbadfdefdf9f11?s=128&d=identicon&r=PG&f=1", "display_name": "jemonsanto", "link": "https://stackoverflow.com/users/3571257/jemonsanto"}, "is_accepted": false, "score": 2, "last_activity_date": 1531205949, "creation_date": 1531205949, "answer_id": 51258972, "question_id": 51253114, "link": "https://stackoverflow.com/questions/51253114/ruby-string-not-longer-than-n-number-of-characters/51258972#51258972", "title": "Ruby string not longer than n number of characters", "body": "<p>To add on for Rails (since it was tagged for Rails too),</p>\n\n<p>You can use <code>String#first</code></p>\n\n<pre><code>string = \"1234567980987654321\"\nstring.first(9) #=&gt; \"123456798\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1531258027, "creation_date": 1531258027, "answer_id": 51274134, "question_id": 51253114, "link": "https://stackoverflow.com/questions/51253114/ruby-string-not-longer-than-n-number-of-characters/51274134#51274134", "title": "Ruby string not longer than n number of characters", "body": "<p>In Ruby or Rails, another way do achieve your result would be by using <code>range</code>: </p>\n\n<pre><code>string = \"1234567980987654321\"\nnew_string = string[0..8] #=&gt; \"123456798\"\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7152208, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/48d024f18f00d66927e89d11abe594d1?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandro Navarro", "link": "https://stackoverflow.com/users/7152208/alexandro-navarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 51253243, "answer_count": 3, "score": -3, "last_activity_date": 1531258027, "creation_date": 1531166157, "question_id": 51253114, "link": "https://stackoverflow.com/questions/51253114/ruby-string-not-longer-than-n-number-of-characters", "title": "Ruby string not longer than n number of characters", "body": "<p>This is probably something very simple, but is there a way to make a string shorter. Something like:</p>\n\n<pre><code>string = \"1234567980987654321\";\n</code></pre>\n\n<p>From this string above I want only the first 9 characters.</p>\n\n<pre><code>new_string = \"123456789\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1531159584, "post_id": 51251549, "comment_id": 89482046, "body": "There&#39;s nothing wrong with that loop. Are you using ActiveRecord?"}, {"owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1531159635, "post_id": 51251549, "comment_id": 89482069, "body": "Yep, ActiveRecord. As I add more users, this loop will take longer. And since I&#39;ll be ajax-ing it, I wanna keep it pretty fast."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1531160008, "post_id": 51251549, "comment_id": 89482233, "body": "At the end of the day, no matter how you write it, something\u2014be it your code or a library function\u2014is going to have to loop through the records in the resultset to build the hash. There&#39;s simply no way around it."}, {"owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1531160113, "post_id": 51251549, "comment_id": 89482284, "body": "Fair point. I just prefer to keep loops out of my code if possible (and it is with <code>:pluck</code>)"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1531160265, "post_id": 51251549, "comment_id": 89482357, "body": "@Chiperific That&#39;s not really how software works. You can&#39;t make anything faster just by avoiding loops, they&#39;re a fundamentally important part of software development, and code that uses loops isn&#39;t inherently slow. In this case, <code>pluck</code> and your loop will perform more or less identically, you&#39;re just hiding the complexity in Rails."}, {"owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1531210699, "post_id": 51251549, "comment_id": 89498787, "body": "Updated my answer to reflect that"}], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "is_accepted": true, "score": 2, "last_activity_date": 1531210620, "last_edit_date": 1531210620, "creation_date": 1531159729, "answer_id": 51251621, "question_id": 51251549, "link": "https://stackoverflow.com/questions/51251549/ruby-hash-use-one-record-attribute-as-key-and-another-as-value/51251621#51251621", "title": "Ruby: Hash: use one record attribute as key and another as value", "body": "<p>This will give the desired output</p>\n\n<p><code>User.pluck(:name, :badge_number).to_h</code></p>\n\n<p><strong>Edit</strong></p>\n\n<p>Though above code is one liner, it still have loop internally. Offloading such loops to database may improve the performance when dealing with too many rows. But there is no database agnostic way to achieve this in active record. Follow <a href=\"https://stackoverflow.com/a/51251832/1116381\">this answer</a> for achieving this in Postgres  </p>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 1, "last_activity_date": 1531161228, "last_edit_date": 1531161228, "creation_date": 1531160528, "answer_id": 51251832, "question_id": 51251549, "link": "https://stackoverflow.com/questions/51251549/ruby-hash-use-one-record-attribute-as-key-and-another-as-value/51251832#51251832", "title": "Ruby: Hash: use one record attribute as key and another as value", "body": "<p>If your RDBMS is Postgresql, you can use Postgresql function <a href=\"https://www.postgresql.org/docs/9.5/static/functions-json.html\" rel=\"nofollow noreferrer\"><code>json_build_object</code></a> for this specific case.</p>\n\n<pre><code>User.select(\"json_build_object(name, badge_number) as json_col\")\n    .map(&amp;:json_col)\n</code></pre>\n\n<p>The whole json can be build using Postgresql supplied functions too.</p>\n\n<pre><code>User.select(\"array_to_json(array_agg(json_build_object(name, badge_number))) as json_col\")\n    .limit(1)[0]\n    .json_col\n</code></pre>\n"}], "owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 51251621, "answer_count": 2, "score": 0, "last_activity_date": 1531210620, "creation_date": 1531159443, "question_id": 51251549, "link": "https://stackoverflow.com/questions/51251549/ruby-hash-use-one-record-attribute-as-key-and-another-as-value", "title": "Ruby: Hash: use one record attribute as key and another as value", "body": "<p>Let's say I have a <code>User</code> with attributes <code>name</code> and <code>badge_number</code></p>\n\n<p>For a JavaScript autocomplete field I want the user to be able to start typing the user's name and get a select list.</p>\n\n<p>I'm using <a href=\"https://materializecss.com/autocomplete.html\" rel=\"nofollow noreferrer\">Materialize</a> which offers the JS needed, I just need to provide it the data in this format:</p>\n\n<pre><code>data: { \"Sarah Person\": 13241, \"Billiam Gregory\": 54665, \"Stephan Stevenston\": 98332 }\n</code></pre>\n\n<p>This won't do:</p>\n\n<pre><code>User.select(:name, :badge_number) =&gt; { name: \"Sarah Person\", badge_number: 13241, ... }\n</code></pre>\n\n<p>And this feels repetitive, icky and redundant (and repetitive):</p>\n\n<pre><code>user_list = User.select(:name, :badge_number)\nhsh = {}\nuser_list.each do |user|\n  hsh[user.name] = user.badge_number\nend\nhsh\n</code></pre>\n\n<p>...though it does give me my intended result, performance will suck over time.</p>\n\n<p>Any better ways than this weird, slimy loop?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1531160362, "post_id": 51251208, "comment_id": 89482398, "body": "I think you&#39;d be better off leaving <code>as_json</code> alone and switching to jbuilder or something like that for building your JSON (or equivalently, don&#39;t override <code>as_json</code> and write <code>as_json</code> calls tailored for your controller&#39;s needs in the controllers). The root of your problem is that you&#39;re mixing controller/view concerns into your models."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1531161094, "post_id": 51251208, "comment_id": 89482785, "body": "Please note <code>def as_json(options = {})</code> where <code>options</code> is an argument. However in your method body you do not reference this at all. Thus it has no impact when you pass a new <code>Hash</code> though. However <code>default = {only: [:id, :number, :code, :item, :idbilling,                       :total, :status, :explanation                     ]}; super(default.merge(options))</code> would work accordingly"}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 3589799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2eee47e029f07a4c79c52ea377e27?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3589799/vlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1531158384, "creation_date": 1531158384, "answer_id": 51251307, "question_id": 51251208, "link": "https://stackoverflow.com/questions/51251208/needs-a-different-set-of-data-when-override-as-json-rails-5-2/51251307#51251307", "title": "Needs a different set of data when override as json rails 5.2", "body": "<p>That's what <code>super</code> does. If you want to overwride <code>super</code>, you could pass an extra param to your <code>as_json</code> method which will tell super to just use what you passed and not include any additional information.</p>\n\n<pre><code>def as_json(options = {}, default: true)\n  json = {}\n\n  if default\n    json[:only] = [:id, :number, :code, :item, :idbilling, :total, :status, :explanation]\n  end\n\n  super json\nend\n\ndef some_action\n  widget = Widget.find(params[:id])\n  render json: widget.as_json(only: [:id, :idbilling], default: false), status: :ok\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8973, "user_id": 831564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b7b5cb565edb37aac67f053f64f0324f?s=128&d=identicon&r=PG", "display_name": "Marlin Pierce", "link": "https://stackoverflow.com/users/831564/marlin-pierce"}, "is_accepted": false, "score": 0, "last_activity_date": 1531169645, "creation_date": 1531169645, "answer_id": 51253864, "question_id": 51251208, "link": "https://stackoverflow.com/questions/51251208/needs-a-different-set-of-data-when-override-as-json-rails-5-2/51253864#51253864", "title": "Needs a different set of data when override as json rails 5.2", "body": "<pre><code>class Widget &lt; ApplicationController\n    def as_json(options = { only: [:id, :number, :code, :item, :idbilling, \n                                   :total, :status, :explanation] })\n        super\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 10055107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pm3MD.jpg?s=128&g=1", "display_name": "KSD Putra", "link": "https://stackoverflow.com/users/10055107/ksd-putra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531169645, "creation_date": 1531157973, "question_id": 51251208, "link": "https://stackoverflow.com/questions/51251208/needs-a-different-set-of-data-when-override-as-json-rails-5-2", "title": "Needs a different set of data when override as json rails 5.2", "body": "<p>I have override as_json in model, looks like this:</p>\n\n<pre><code>class Widget &lt; ApplicationController\n    def as_json(options = {})\n        super(only: [:id, :number, :code, :item, :idbilling, \n                     :total, :status, :explanation\n                    ])\n    end\nend\n</code></pre>\n\n<p>And I want to use as json for Widget to show different set of data. So I use this in a controller:</p>\n\n<pre><code>def some_action\n    widget = Widget.find(params[:id])\n    render json: widget.as_json(only: [:id, :idbilling]), status: :ok\nend\n</code></pre>\n\n<p>But I get the same result as the override method: the result show not only id and idbilling, but also number, code, and so on.</p>\n\n<p>How can I show the set of data that I want to show?</p>\n\n<p>I have read tutorials, search in stackoverflow, but they only wrote to just pass in my options like I normally would into the as_json method like I wrote in some_action method. But it did not work.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["ruby", "centos7"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531156927, "post_id": 51250785, "comment_id": 89480706, "body": "Looks like you have to rebuild that gem as the shared library went missing or can&#39;t be loaded. You shouldn&#39;t be able to <code>vi</code> a shared library, it&#39;s binary data. Uninstall the gem, and reinstall it."}, {"owner": {"reputation": 171, "user_id": 437107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/34319949/picture?type=large", "display_name": "jeremiah", "link": "https://stackoverflow.com/users/437107/jeremiah"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531161170, "post_id": 51250785, "comment_id": 89482831, "body": "Just did that and same result.   When I open it with VI it is all gibberish, and does appear to be compiled."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531161883, "post_id": 51250785, "comment_id": 89483197, "body": "<code>.so</code> should be shared library, so the idea is those are compiled extensions. Those can break during OS updates, so the best recovery method is to just uninstall and reinstall which forces recompilation."}, {"owner": {"reputation": 171, "user_id": 437107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/34319949/picture?type=large", "display_name": "jeremiah", "link": "https://stackoverflow.com/users/437107/jeremiah"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531239814, "post_id": 51250785, "comment_id": 89518364, "body": "I am on my fourth install, and it still doesn&#39;t work.  Any other suggestions about what might be causing this?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531242798, "post_id": 51250785, "comment_id": 89519836, "body": "Can you reproduce the problem on another CentOS install? Or with another gem?"}, {"owner": {"reputation": 171, "user_id": 437107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/34319949/picture?type=large", "display_name": "jeremiah", "link": "https://stackoverflow.com/users/437107/jeremiah"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531246726, "post_id": 51250785, "comment_id": 89521698, "body": "No, I can&#39;t i have it working on a centos 6 server, all the same code everything.   The server configurations are nearly identical."}], "owner": {"reputation": 171, "user_id": 437107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/34319949/picture?type=large", "display_name": "jeremiah", "link": "https://stackoverflow.com/users/437107/jeremiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531156396, "creation_date": 1531156396, "question_id": 51250785, "link": "https://stackoverflow.com/questions/51250785/cannot-open-shared-object-file-no-such-file-or-directory-yet-file-directory-and", "title": "cannot open shared object file: No such file or directory yet file directory and everything exists (ruby project)", "body": "<p>Error: The application encountered the following error: libicudata.so.48: cannot open shared object file: No such file or directory - /usr/local/rvm/gems/ruby-2.3.1/gems/charlock_holmes-0.7.6/lib/charlock_holmes/charlock_holmes.so (LoadError)</p>\n\n<p>yet vi /usr/local/rvm/gems/ruby-2.3.1/gems/charlock_holmes-0.7.6/lib/charlock_holmes/charlock_holmes.so opens it right up...</p>\n\n<p>I am on centos 7 using ruby 2.3.1</p>\n\n<p>Any idea why this is doing this</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "has-many", "has-one"], "answers": [{"comments": [{"owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "edited": false, "score": 0, "creation_date": 1531155340, "post_id": 51250496, "comment_id": 89479888, "body": "is this the actual behaviour of rails?"}, {"owner": {"reputation": 8973, "user_id": 831564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b7b5cb565edb37aac67f053f64f0324f?s=128&d=identicon&r=PG", "display_name": "Marlin Pierce", "link": "https://stackoverflow.com/users/831564/marlin-pierce"}, "edited": false, "score": 0, "creation_date": 1531156688, "post_id": 51250496, "comment_id": 89480569, "body": "Additional documentation worth reading is <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a>"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 4, "last_activity_date": 1531155427, "last_edit_date": 1531155427, "creation_date": 1531155125, "answer_id": 51250496, "question_id": 51250451, "link": "https://stackoverflow.com/questions/51250451/rails-has-one-vs-has-many-association/51250496#51250496", "title": "Rails has_one vs has_many association", "body": "<p>The reason of this behaviour is that <code>Rails</code> creates \nmethods in a form of <code>create_#{association_name}</code> for every <code>has_one association_name</code>. There are <a href=\"https://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_one\" rel=\"nofollow noreferrer\">docs</a> for this, if you need extra information.</p>\n\n<p>Thus, to create a <code>title</code> for a <code>book</code>, you'll need something like:</p>\n\n<pre><code>book.create_title\n</code></pre>\n\n<p>It will perform the trick, you're expecting</p>\n"}], "owner": {"reputation": 1015, "user_id": 6773669, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9471cd591c8e6d426534832c0804cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Pragun", "link": "https://stackoverflow.com/users/6773669/pragun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 51250496, "answer_count": 1, "score": 1, "last_activity_date": 1531155427, "creation_date": 1531154945, "last_edit_date": 1531155326, "question_id": 51250451, "link": "https://stackoverflow.com/questions/51250451/rails-has-one-vs-has-many-association", "title": "Rails has_one vs has_many association", "body": "<p>I've a model say <code>Book</code> and another model named say <code>Title</code>. The associations are simply defined below.</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n    has_one :title\nend\n\nclass Title &lt; ApplicationRecord\n    belongs_to :book\nend\n</code></pre>\n\n<p>Now, if I generate a schema with a foreign key of <code>book_id</code> in <code>Title</code> and create a new record for <code>Book</code>, I am not being able to create a new <code>Title</code>  record via <code>book.title.create!</code> as <code>book.title</code> returns <code>nil</code>.</p>\n\n<p>But, if I change the association to </p>\n\n<pre><code> class Book &lt; ApplicationRecord\n    has_many :titles\n end\n</code></pre>\n\n<p>then I am clearly able to create a new <code>Title</code> record using <code>book.title.create!</code>. So, what I have to do to make it work with the <code>has_one</code> association is do something like <code>book.title = Title.create!(foo: \"bar\", book_id: book.id)</code>.</p>\n\n<p>When I checked the values for <code>book.title</code> in the latter case, the console returns <code>&lt;ActiveRecord::Associations::CollectionProxy []&gt;</code> but for the former, <code>book.title</code> returns <code>nil</code> and hence the <code>NoMethod Error for nil class</code>.</p>\n\n<p>I tried following the official docs and some other posts in stack regarding this. But somehow, its still unclear to me.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531155089, "post_id": 51250319, "comment_id": 89479766, "body": "Why not just remove all empty array items? Consecutive matches when splitting always produce empty array items. Rather than switch to <i>matching</i> rather than splitting, use <code>rarr = arr.reject { |c| c.empty? }</code>"}, {"owner": {"reputation": 862, "user_id": 5269447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d355fcfdfb38bfec218c4239da62f2?s=128&d=identicon&r=PG&f=1", "display_name": "0x777C", "link": "https://stackoverflow.com/users/5269447/0x777c"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531155348, "post_id": 51250319, "comment_id": 89479891, "body": "I&#39;d like to consider all possibilities before opting for the obvious, because that doesn&#39;t seem like the cleanest solution possible"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531155403, "post_id": 51250319, "comment_id": 89479922, "body": "And do you think re-vamping totally the pattern is a &quot;clean&quot; approach? Then please share what you have done so far."}, {"owner": {"reputation": 862, "user_id": 5269447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d355fcfdfb38bfec218c4239da62f2?s=128&d=identicon&r=PG&f=1", "display_name": "0x777C", "link": "https://stackoverflow.com/users/5269447/0x777c"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531155683, "post_id": 51250319, "comment_id": 89480070, "body": "I just came up with <code>@unformated.scan(&#47;(?    x)(\\*\\*|\\*|\\n|[^\\*\\*|\\*|\\n]+)&#47;)</code> but I really dislike the redundancy"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531155814, "post_id": 51250319, "comment_id": 89480131, "body": "Ok, it is &quot;close&quot;, but what you call redundancy is unavoidable. However, correct pattern is <a href=\"https://regex101.com/r/g2oFXC/2\" rel=\"nofollow noreferrer\"><code>.scan(&#47;(?x)\\*{2}|[*\\n.]|(?:(?!\\*{2})[^*\\n.])+&#47;)</code></a>. As you see, removing empty array items is much cleaner."}, {"owner": {"reputation": 862, "user_id": 5269447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d355fcfdfb38bfec218c4239da62f2?s=128&d=identicon&r=PG&f=1", "display_name": "0x777C", "link": "https://stackoverflow.com/users/5269447/0x777c"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531156015, "post_id": 51250319, "comment_id": 89480227, "body": "I see what you mean, that said answer with that regex so I can mark it as the answer anyway (since it is the appropriate answer to what I asked)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531242724, "post_id": 51250319, "comment_id": 89519800, "body": "It&#39;s an interesting question but clarification is required (preferably with an edit). Your question is framed around a specific string (example). At issue is how the string might differ from the one given and for each variant what is the desired result? For example, can there be more than three asterisks in a row and if so, are they to be grouped in pairs, possibly with a single asterisk in the last group? Can there be more than one newlines (<code>&quot;\\n&quot;</code>) in a row, in which case are they to be grouped together or split up? And so on."}, {"owner": {"reputation": 862, "user_id": 5269447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d355fcfdfb38bfec218c4239da62f2?s=128&d=identicon&r=PG&f=1", "display_name": "0x777C", "link": "https://stackoverflow.com/users/5269447/0x777c"}, "edited": false, "score": 0, "creation_date": 1531247970, "post_id": 51250319, "comment_id": 89522226, "body": "They are to be split up, I know of no way to make it clearer."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1531156661, "creation_date": 1531156661, "answer_id": 51250844, "question_id": 51250319, "link": "https://stackoverflow.com/questions/51250319/ignore-empty-captures-when-splitting-string/51250844#51250844", "title": "Ignore empty captures when splitting string", "body": "<p>When splitting with a regex containing capturing groups, <em>consecutive matches</em> always produce empty array items. </p>\n\n<p>Rather than switch to a <em>matching</em> approach, use </p>\n\n<pre><code>arr = arr.reject { |c| c.empty? }\n</code></pre>\n\n<p>Or any other method, see <a href=\"https://stackoverflow.com/questions/5878697/how-do-i-remove-blank-elements-from-an-array\">How do I remove blank elements from an array?</a></p>\n\n<p>Else, you will have to <em>match</em> the substrings using a regex that will match the deilimiters first and then any text that does not start the delimiter texts (that is, you will need to build a <a href=\"https://stackoverflow.com/questions/30900794/tempered-greedy-token-what-is-different-about-placing-the-dot-before-the-negat\"><em>tempered greedy token</em></a>):</p>\n\n<pre><code>arr = s.scan(/(?x)\\*{2}|[*\\n.]|(?:(?!\\*{2})[^*\\n.])+/)\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/g2oFXC/2\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>Here,</p>\n\n<ul>\n<li><code>(?x)</code> - a freespacing/comment modifier</li>\n<li><code>\\*{2}</code> - <code>**</code> substring</li>\n<li><code>|</code> - or</li>\n<li><code>[*\\n.]</code> - a char that is either <code>*</code>, newline LF or a <code>.</code></li>\n<li><code>|</code> - or</li>\n<li><code>(?:(?!\\*{2})[^*\\n.])+</code> - 1 or more (<code>+</code>) chars that are not <code>*</code>, LF or <code>.</code> (<code>[^*\\n.]</code>) that do not start a <code>**</code> substring.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1531200268, "post_id": 51250874, "comment_id": 89494113, "body": "I don&#39;t think think the extra step of removing empty strings is essential when using <code>split</code>. See my answer."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 5, "last_activity_date": 1531157125, "last_edit_date": 1531157125, "creation_date": 1531156762, "answer_id": 51250874, "question_id": 51250319, "link": "https://stackoverflow.com/questions/51250319/ignore-empty-captures-when-splitting-string/51250874#51250874", "title": "Ignore empty captures when splitting string", "body": "<p>Here is a simplified version of your regex, chained with a method to remove empty strings -- which is inevitably necessary here when using <code>String#split</code>, since there is an 'empty result' in the middle of '***':</p>\n\n<pre><code>string = \"Ayy ***lol* m8\\nlol\"\n\n\nstring.split(/(\\*{1,2}|\\n|\\.)/).reject(&amp;:empty?)\n  #=&gt; [\"Ayy \", \"**\", \"*\", \"lol\", \"*\", \" m8\", \"\\n\", \"lol\"] \n</code></pre>\n\n<p>A few differences from your pattern:</p>\n\n<ul>\n<li>I have removed the <code>(?x)</code>; this served no purpose. <a href=\"https://ruby-doc.org/core/Regexp.html#class-Regexp-label-Options\" rel=\"nofollow noreferrer\">Extended patterns</a> are useful for ignoring spaces and comments within the regex - neither of which you are doing here.</li>\n<li><code>\\*\\*|\\*</code> can be simplified to <code>\\*{1,2}</code> (or <code>\\*\\*?</code> if you prefer).</li>\n<li><code>[.]</code> is technically fine, but <code>\\.</code> is one character shorter and in my opinion shows clearer intent.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531205221, "post_id": 51257675, "comment_id": 89495928, "body": "This solution does not guarantee there won&#39;t be empty items in the resulting array. See <a href=\"https://ideone.com/gcKh1q\" rel=\"nofollow noreferrer\">this Ruby demo</a>. Also, I understand <code>(\\*)[ ]*(?!\\*)</code> is used to match any<code>*</code> that is not followed with <code>*</code> that may have any amount of spaces in between, right? If so, you need <code>(\\*)[ ]*+(?!\\*)</code> to avoid backtracking into <code>[ ]+</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531215492, "post_id": 51257675, "comment_id": 89501755, "body": "What happens if there are more than 3 consecutive <code>*</code>s? For example, if <code>str = &quot;Ayy ******lol* m8\\nlol&quot;</code> then: <code>str.split r #=&gt; [&quot;Ayy&quot;, &quot;*****&quot;, &quot;*&quot;, &quot;lol&quot;, &quot;*&quot;, &quot;m8&quot;, &quot;\\n&quot;, &quot;lol&quot;]</code>. Is that the desired behaviour? I&#39;m not sure, but it&#39;s different to how OP&#39;s version would behave."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531243394, "post_id": 51257675, "comment_id": 89520140, "body": "@Wiktor, I&#39;ve asked for clarification of the question. Regardless, can you elaborate on the need to change <code>[ ]*</code> to <code>[ ]*+</code>? (<code>x*+</code> is new to me.) Also, omitting the plus sign seems to work here. Can you give an example where  <code>[ ]*+</code> works but <code>[ ]*</code> doesn&#39;t?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1531243434, "post_id": 51257675, "comment_id": 89520160, "body": "@Tom, I&#39;ve asked for clarification of the question."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1531290553, "post_id": 51257675, "comment_id": 89534697, "body": "@CarySwoveland <code>\\* *(?!\\*)</code> will backtrack sooner or later, thus you should use possessive quantifiers in these cases. Or include the space into the lookahead, <code>\\* *(?![* ])</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1531200029, "last_edit_date": 1531200029, "creation_date": 1531199717, "answer_id": 51257675, "question_id": 51250319, "link": "https://stackoverflow.com/questions/51250319/ignore-empty-captures-when-splitting-string/51257675#51257675", "title": "Ignore empty captures when splitting string", "body": "<pre><code>r = /\n    [ ]+    # match one or more spaces\n    |       # or\n    (\\*)    # match one asterisk in capture group 1\n    [ ]*    # match zero or more spaces\n    (?!\\*)  # not to be followed by an asterisk (negative lookahead)\n    |       # or\n    (\\n)    # match \"\\n\" in capture group 2\n    /x      # free-spacing regex definition mode\n\nstr = \"Ayy ***lol* m8\\nlol\"\n\nstr.split r\n  #=&gt; [\"Ayy\", \"**\", \"*\", \"lol\", \"*\", \"m8\", \"\\n\", \"lol\"]\n</code></pre>\n"}], "owner": {"reputation": 862, "user_id": 5269447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d355fcfdfb38bfec218c4239da62f2?s=128&d=identicon&r=PG&f=1", "display_name": "0x777C", "link": "https://stackoverflow.com/users/5269447/0x777c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 51250844, "answer_count": 3, "score": 3, "last_activity_date": 1531200029, "creation_date": 1531154478, "last_edit_date": 1531187863, "question_id": 51250319, "link": "https://stackoverflow.com/questions/51250319/ignore-empty-captures-when-splitting-string", "title": "Ignore empty captures when splitting string", "body": "<p>I have a string:</p>\n\n<pre><code>Ayy ***lol* m8\\nlol\"\n</code></pre>\n\n<p>I would like to not include the empty capture and produce:</p>\n\n<pre><code>[\"Ayy \", \"**\", \"*\", \"lol\", \"*\", \" m8\", \"\\n\", \"lol\"]\n</code></pre>\n\n<p>I am splitting the string by this regex:</p>\n\n<pre><code>/(?x)(\\*\\*|\\*|\\n|[.])/\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>[\"Ayy \", \"**\", \"\", \"*\", \"lol\", \"*\", \" m8\", \"\\n\", \"lol\"]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531154408, "post_id": 51250198, "comment_id": 89479438, "body": "Your question is not very clear. Can you post part of the text you&#39;re extracting from and the expected result of the function you&#39;re looking for?"}, {"owner": {"reputation": 21, "user_id": 10054873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe57f3c7ae395bddfb8610f0f9c9844?s=128&d=identicon&r=PG&f=1", "display_name": "pizu", "link": "https://stackoverflow.com/users/10054873/pizu"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531154642, "post_id": 51250198, "comment_id": 89479561, "body": "Thanks for the feedback. So, I have a string that looks similar to this:  &quot;blahblahblahblahSOMETEXTHERE,&quot;shortcode&quot;:&quot;Bk5z5Lgn1234&quot;,bla&zwnj;&#8203;hblahblablhaSOMEMORE&zwnj;&#8203;TEXTHERE...,&quot;shortco&zwnj;&#8203;de&quot;:&quot;Wuipsz5Lgn1234&quot;&zwnj;&#8203;,blahblahblablhEVEN MORETEXT&quot;  I would like to get the following (can be in an array): [&quot;Bk5z5Lgn1234&quot;,&quot;Wuipsz5Lgn1234&quot;]"}, {"owner": {"reputation": 4620, "user_id": 5130652, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3rnqy.jpg?s=128&g=1", "display_name": "GreensterRox", "link": "https://stackoverflow.com/users/5130652/greensterrox"}, "edited": false, "score": 0, "creation_date": 1531154864, "post_id": 51250198, "comment_id": 89479657, "body": "It may help if you add the code that you have tried so far, to the question."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1531155442, "post_id": 51250198, "comment_id": 89479939, "body": "You&#39;re searching a string for certain substrings but there are no rules whatsoever, at least you didn&#39;t mention any. How are those 11 characters different from the rest of the text. There must be a pattern in the text by which those &#39;shortcode values&#39; occur, that&#39;s why I asked for the real string(text) but you keep posting &#39;blahblahblahblahSOMETEXTHERE&#39;."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1531157183, "post_id": 51250198, "comment_id": 89480823, "body": "This looks vaguely like JSON. Is it actually JSON? If so, parse it as JSON and do not use a regular expression."}, {"owner": {"reputation": 21, "user_id": 10054873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe57f3c7ae395bddfb8610f0f9c9844?s=128&d=identicon&r=PG&f=1", "display_name": "pizu", "link": "https://stackoverflow.com/users/10054873/pizu"}, "edited": false, "score": 0, "creation_date": 1531161261, "post_id": 51250198, "comment_id": 89482877, "body": "OK. You&#39;ve asked for the real example: Open Chrome, type in: view-source:<a href=\"https://www.instagram.com/madona/\" rel=\"nofollow noreferrer\">instagram.com/madona</a>  Now look for &quot;shortcode&quot;:&quot;BjRndHbH7M5&quot; What you have is (I believe) 10 of those on the page, they correspond to parts of URL of each instagram post. I&#39;m trying to get those 10 URLs.   I still think my original post was clear enough...you have a lot of text with a few of these &quot;shortcode&quot; patterns that I&#39;ve described. I&#39;m trying to extract all shortcode values from this text that fit this pattern: &quot;shortcode&quot;:&quot;Bk5z5Lgn1234&quot;. I dunno...to me that&#39;s super clear."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1531164190, "post_id": 51250198, "comment_id": 89484222, "body": "<i>&quot;It can be assumed that the values are of constant length (say 11 characters).&quot;</i> This seems like a poor assumption given that the examples provided are 12 and 14 characters long respectively"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10054873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe57f3c7ae395bddfb8610f0f9c9844?s=128&d=identicon&r=PG&f=1", "display_name": "pizu", "link": "https://stackoverflow.com/users/10054873/pizu"}, "edited": false, "score": 0, "creation_date": 1531169339, "post_id": 51252487, "comment_id": 89486539, "body": "So simple. So brilliant. More than efficient enough. Thank you."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 2, "last_activity_date": 1531163265, "creation_date": 1531163265, "answer_id": 51252487, "question_id": 51250198, "link": "https://stackoverflow.com/questions/51250198/extract-substrings-values-from-a-long-text/51252487#51252487", "title": "Extract substrings/values from a long text", "body": "<p>If the code is always in the exact format that you specified, and 11 characters long, this regular expression will find them:</p>\n\n<pre><code>\"shortcode\":\"(.{11})\"\n</code></pre>\n\n<p>The following will return all the matches:</p>\n\n<pre><code>text.scan(/\"shortcode\":\"(.{11})\"/)\n</code></pre>\n\n<p>This is admittedly likely not to be the most efficient solution, but simple and easy to use. Parsing HTML with regular expressions is never the best idea.</p>\n"}], "owner": {"reputation": 21, "user_id": 10054873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe57f3c7ae395bddfb8610f0f9c9844?s=128&d=identicon&r=PG&f=1", "display_name": "pizu", "link": "https://stackoverflow.com/users/10054873/pizu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531188034, "creation_date": 1531153957, "last_edit_date": 1531188034, "question_id": 51250198, "link": "https://stackoverflow.com/questions/51250198/extract-substrings-values-from-a-long-text", "title": "Extract substrings/values from a long text", "body": "<p>I have a long string/text, e.g. </p>\n\n<p><code>...blahblahblahblah,\"shortcode\":\"Bk5z5Lgn1234\",blahblahblablha...,\"shortcode\":\"Wuipsz5Lgn1234\",blahblahblablh...</code></p>\n\n<p>I'm looking to extract all substrings of the following pattern:</p>\n\n<p><code>\"shortcode\":\"Bk5z5Lgn1234\"</code>\n<code>\"shortcode\":\"Wuipsz5Lgn1234\"</code></p>\n\n<p>The values of the shortcodes, i.e. <code>Bk5z5Lgn1234</code> and <code>Wuipsz5Lgn1234</code>, are of constant length (11 characters). Just getting the values will be fine. If getting all the occurrences of shortcode values is complicated, just getting the first value will be sufficient.</p>\n\n<p>I know how to find the substrings (using the scan method), but I have no idea how to traverse the string and pull out the shortcode values.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1531164563, "post_id": 51252590, "comment_id": 89484371, "body": "You could do this slightly more hackily by just adding <code>2**32</code> to the number: <code>-1771632774 + (2**32) # =&gt; 2523334522</code>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 5, "creation_date": 1531168888, "post_id": 51252590, "comment_id": 89486357, "body": "Bitwise AND (<code>-1771632774 &amp; 0xFFFF_FFFF</code>) is a non-hacky way."}], "tags": [], "owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "is_accepted": false, "score": 5, "last_activity_date": 1531163643, "creation_date": 1531163643, "answer_id": 51252590, "question_id": 51250086, "link": "https://stackoverflow.com/questions/51250086/how-to-convert-a-signed-integer-to-an-unsigned-integer-in-ruby/51252590#51252590", "title": "How to convert a signed integer to an unsigned integer in Ruby?", "body": "<p>Put the negative integer in an array. Call <code>pack</code> with an argument of <code>'L'</code> which represents \"32-bit unsigned, native endian (uint32_t)\". Call unpack with the same argument. Finally, get the number out of the array.</p>\n\n<pre><code>[-1771632774].pack('L').unpack('L').first\n#=&gt; 2523334522\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-pack\" rel=\"noreferrer\">http://ruby-doc.org/core-2.4.0/Array.html#method-i-pack</a></p>\n"}], "owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1531163643, "creation_date": 1531153489, "question_id": 51250086, "link": "https://stackoverflow.com/questions/51250086/how-to-convert-a-signed-integer-to-an-unsigned-integer-in-ruby", "title": "How to convert a signed integer to an unsigned integer in Ruby?", "body": "<p>I have a number that I received from a C program that came to me as a negative number:</p>\n\n<pre><code>-1771632774\n</code></pre>\n\n<p>It's supposed to be this number:</p>\n\n<pre><code>2523334522\n</code></pre>\n\n<p>I realized that this must be due to some conversion from an signed integer to an unsigned integer. Now that I have this negative number in Ruby, how can I convert it back to the unsigned version?</p>\n"}, {"tags": ["ruby", "redmine", "redmine-plugins"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1531152524, "post_id": 51249681, "comment_id": 89478466, "body": "where are you calling it. Can you show the code?"}, {"owner": {"reputation": 83, "user_id": 4921408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025795ed4c430d1548e96f76576b35ee?s=128&d=identicon&r=PG&f=1", "display_name": "ctindex", "link": "https://stackoverflow.com/users/4921408/ctindex"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1531210822, "post_id": 51249681, "comment_id": 89498846, "body": "@uday I added the code, its inside a plugin."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 4921408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025795ed4c430d1548e96f76576b35ee?s=128&d=identicon&r=PG&f=1", "display_name": "ctindex", "link": "https://stackoverflow.com/users/4921408/ctindex"}, "is_accepted": true, "score": 0, "last_activity_date": 1532112955, "creation_date": 1532112955, "answer_id": 51448819, "question_id": 51249681, "link": "https://stackoverflow.com/questions/51249681/how-to-fetch-the-possible-values-of-a-custom-field/51448819#51448819", "title": "How to fetch the possible values of a custom field?", "body": "<p>Okay I found it (<code>CustomField.find(ID_OF_FIELD).enumerations.each_with_index</code>).</p>\n\n<pre><code>module My_Plugin\n  class Hooks &lt; Redmine::Hook::ViewListener\n    def controller_issues_new_before_save(context={ })\n\n      issue = context[:issue]\n      project = Project.find(issue[:project_id].to_i)\n      if project.name === \"MyProjectName\"\n          CustomField.find(4).enumerations.each_with_index do |value, position|\n              File.write('/tmp/redmine_'+value.id.to_s, value.name)\n          end\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4921408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025795ed4c430d1548e96f76576b35ee?s=128&d=identicon&r=PG&f=1", "display_name": "ctindex", "link": "https://stackoverflow.com/users/4921408/ctindex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 51448819, "answer_count": 1, "score": 0, "last_activity_date": 1532112955, "creation_date": 1531152059, "last_edit_date": 1531210778, "question_id": 51249681, "link": "https://stackoverflow.com/questions/51249681/how-to-fetch-the-possible-values-of-a-custom-field", "title": "How to fetch the possible values of a custom field?", "body": "<p>I created a key/value-pair-typed custom field and added some values to it. I now need to write a plugin that hooks into the creation of a new issue, checks the subject and finds a match in the possible values of that field - and if one found, assings that value to the issue.<br>\nI'm still struggling to simply get <strong>all the possible values of that field</strong> in my plugin. I found <code>CustomField.find(id).possible_values</code> and tried to log it with the correct id of my field, but it just shows <code>[]</code>.  </p>\n\n<p>My code so far:</p>\n\n<pre><code>module My_Plugin\n  class Hooks &lt; Redmine::Hook::ViewListener\n    def controller_issues_new_before_save(context={ })\n      issue = context[:issue]\n      project = Project.find(issue[:project_id].to_i)\n      if project.name === \"MyProjectName\"\n        File.write('/tmp/redmine', CustomField.find(4).possible_values)            \n      end\n    end\n  end\nend\n</code></pre>\n\n<p>What am I doing wrong? If I call <code>/custom_fields/4/enumerations</code> I can see plenty of active field values.</p>\n"}]