[{"tags": ["ruby", "selenium", "cucumber", "capybara", "project-structure"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1500510849, "post_id": 45202812, "comment_id": 77373289, "body": "Create a directory/folder, open a cmd/terminal, and navigate to the newly-created directory.  Then run <code>cucumber --init</code>, and a features directory (containing step_definitions and support directories) will be created.  Then it&#39;s time to <a href=\"https://github.com/cucumber/cucumber/wiki/A-Table-Of-Content\" rel=\"nofollow noreferrer\">RTM</a>."}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 0, "last_activity_date": 1500509065, "creation_date": 1500509065, "answer_id": 45203001, "question_id": 45202812, "link": "https://stackoverflow.com/questions/45202812/ruby-and-cucumber-project-structure/45203001#45203001", "title": "Ruby and Cucumber Project Structure", "body": "<p>You can easily set up cucumber for use with rails by using the cucumber-rails gem <a href=\"https://github.com/cucumber/cucumber-rails\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-rails</a></p>\n\n<p>Then in your Gemfile add</p>\n\n<pre><code>group :test do\n  gem 'cucumber-rails', :require =&gt; false\nend\n</code></pre>\n\n<p>Next you'll want to</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>And then use the generator to set up cucumber in your rails app</p>\n\n<pre><code>rails generate cucumber:install\n</code></pre>\n\n<p>This will set up your cucumber code under the <code>features</code> directory in your app.</p>\n\n<p>Then you can run your cucumber using</p>\n\n<pre><code> ./script/cucumber\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2166582, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/569ed048da1a63f24b5158ceced4ea24?s=128&d=identicon&r=PG", "display_name": "shah", "link": "https://stackoverflow.com/users/2166582/shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 45203001, "answer_count": 1, "score": 1, "last_activity_date": 1500509065, "creation_date": 1500507763, "question_id": 45202812, "link": "https://stackoverflow.com/questions/45202812/ruby-and-cucumber-project-structure", "title": "Ruby and Cucumber Project Structure", "body": "<p>How to structure ruby cucumber project such that actual code resides in one folder and test suite resides in another with single point of entry to invoke entire test suite. And to achieve that what other factors do I need to consider.  </p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1500505317, "post_id": 45202037, "comment_id": 77371851, "body": "Keep in mind hashes are intended to be un-ordered containers. Ruby supports only one method of ordering: Insertion order."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1500505263, "post_id": 45202076, "comment_id": 77371833, "body": "Close, but you need to reassemble those back into a Hash if that&#39;s the goal."}, {"owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500505709, "post_id": 45202076, "comment_id": 77371990, "body": "I only noticed this after the fact. By then others had already done it."}], "tags": [], "owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "is_accepted": true, "score": 5, "last_activity_date": 1500524510, "last_edit_date": 1500524510, "creation_date": 1500503344, "answer_id": 45202076, "question_id": 45202037, "link": "https://stackoverflow.com/questions/45202037/is-it-possible-to-sort-multidimensional-hashes-by-child-hash-values/45202076#45202076", "title": "Is it possible to sort multidimensional hashes by child hash values?", "body": "<p>You can convert it to an array of pairs, use <a href=\"https://apidock.com/ruby/Enumerable/sort_by\" rel=\"nofollow noreferrer\"><code>sort_by</code></a> method to target the value you want to sort by, and then convert it back to a hash:</p>\n\n<pre><code>h = {\n    :a =&gt; \n        {:order =&gt; 3},\n    :b =&gt;\n        {:order =&gt; 1},\n    :c =&gt;\n        {:order =&gt; 2}\n}\n\nh.sort_by {|k,v| v[:order]}.to_h\n=&gt; {:b=&gt;{:order=&gt;1}, :c=&gt;{:order=&gt;2}, :a=&gt;{:order=&gt;3}} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 4, "last_activity_date": 1500507158, "last_edit_date": 1500507158, "creation_date": 1500503558, "answer_id": 45202117, "question_id": 45202037, "link": "https://stackoverflow.com/questions/45202037/is-it-possible-to-sort-multidimensional-hashes-by-child-hash-values/45202117#45202117", "title": "Is it possible to sort multidimensional hashes by child hash values?", "body": "<p>Keep in mind that the only order that a Ruby hash can have is based on insertion order. You need to create a new hash (no <code>sort!</code>) and create the new hash element by element in the order you wish it to have. </p>\n\n<p>Given:</p>\n\n<pre><code>&gt; hash\n=&gt; {:a=&gt;{:order=&gt;3}, :b=&gt;{:order=&gt;1}, :c=&gt;{:order=&gt;2}}\n</code></pre>\n\n<p>You can use <code>.sort_by</code> to do:</p>\n\n<pre><code>&gt; hash.sort_by {|k, h| h[:order]}.to_h\n=&gt; {:b=&gt;{:order=&gt;1}, :c=&gt;{:order=&gt;2}, :a=&gt;{:order=&gt;3}}\n</code></pre>\n\n<p>You can also use the more classic <code>.sort</code> with the spaceship <code>&lt;=&gt;</code> by unpacking the arguments associated with the usual <code>a,b</code>:</p>\n\n<pre><code>&gt; hash.sort {|(a,ha),(b,hb)| ha[:order] &lt;=&gt; hb[:order] }.to_h\n=&gt; {:b=&gt;{:order=&gt;1}, :c=&gt;{:order=&gt;2}, :a=&gt;{:order=&gt;3}}\n</code></pre>\n\n<p>In either case, the <code>.to_h</code> method creates a new hash based on the sorted key, value pairs from the source hash. </p>\n\n<p>Best </p>\n"}], "owner": {"reputation": 2473, "user_id": 148179, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2ba47de2bae19ec7471848aadd78f7da?s=128&d=identicon&r=PG", "display_name": "nipponese", "link": "https://stackoverflow.com/users/148179/nipponese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 1, "accepted_answer_id": 45202076, "answer_count": 2, "score": 4, "last_activity_date": 1500524510, "creation_date": 1500503092, "question_id": 45202037, "link": "https://stackoverflow.com/questions/45202037/is-it-possible-to-sort-multidimensional-hashes-by-child-hash-values", "title": "Is it possible to sort multidimensional hashes by child hash values?", "body": "<p>Is is possible to sort parent hashes by values of children keys?</p>\n\n<p>For example:</p>\n\n<pre><code>{\n    :a =&gt; \n        {:order =&gt; 3},\n    :b =&gt;\n        {:order =&gt; 1},\n    :c =&gt;\n        {:order =&gt; 2}\n}\n</code></pre>\n\n<p>resorted as</p>\n\n<pre><code>{\n    :b =&gt; \n        {:order =&gt; 1},\n    :c =&gt;\n        {:order =&gt; 2},\n    :a =&gt;\n        {:order =&gt; 3}\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1500510697, "post_id": 45202100, "comment_id": 77373262, "body": "I don&#39;t think that&#39;s it. ActiveRecord callbacks don&#39;t care if the method is private or not, and it certainly wouldn&#39;t raise the error message that&#39;s being raised"}], "tags": [], "owner": {"reputation": 407, "user_id": 8328756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4decaa38fd995e3b68d6024f8beb3b94?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Van Deuren", "link": "https://stackoverflow.com/users/8328756/leo-van-deuren"}, "is_accepted": false, "score": 0, "last_activity_date": 1611130856, "last_edit_date": 1611130856, "creation_date": 1500503469, "answer_id": 45202100, "question_id": 45201670, "link": "https://stackoverflow.com/questions/45201670/activerecordactiverecorderror-cannot-touch-on-a-new-record-object-rails-4/45202100#45202100", "title": "ActiveRecord::ActiveRecordError (cannot touch on a new record object) rails 4", "body": "<p>It is because your function that is before save needs to be private. And you can restructure it like this for readability.</p>\n<pre><code>class Test &lt; ActiveRecord::Base\n  has_many  :assignments, :dependent =&gt; :destroy\n  before_save :before_save_function\n        \n  private\n\n  def before_save_function\n    if code_changed? \n      self.assignments.each{|a| a.touch}\n    end\n  end\nend\n</code></pre>\n<p>Cheers! Hope it Helps.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "edited": false, "score": 0, "creation_date": 1500559974, "post_id": 45203072, "comment_id": 77400829, "body": "Thank you for the response. I tried this approach and it doesn&#39;t give me any error but I am wondering why this code doesn&#39;t give any error in rails3."}, {"owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "edited": false, "score": 0, "creation_date": 1500564859, "post_id": 45203072, "comment_id": 77404715, "body": "I checked from rails3 console rails4 console and it behaves differently in both places.                                                                                                rails 3: t = Test.new t.touch  ## returns false. rails4: t = Test.new  t.touch  ## returns ActiveRecord::ActiveRecordError: cannot touch on a new record object"}], "tags": [], "owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "is_accepted": false, "score": 3, "last_activity_date": 1500509620, "creation_date": 1500509620, "answer_id": 45203072, "question_id": 45201670, "link": "https://stackoverflow.com/questions/45201670/activerecordactiverecorderror-cannot-touch-on-a-new-record-object-rails-4/45203072#45203072", "title": "ActiveRecord::ActiveRecordError (cannot touch on a new record object) rails 4", "body": "<p>The error is raised because there is a new assignment object and not saved in the database. The touch can not be called on new record. </p>\n\n<p>Just check for new_record? before calling touch. </p>\n\n<pre><code>before_save do\n if code_changed? \n     self.assignments.each{|a| a.touch unless a.new_record?}\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1611130856, "creation_date": 1500501159, "last_edit_date": 1611047200, "question_id": 45201670, "link": "https://stackoverflow.com/questions/45201670/activerecordactiverecorderror-cannot-touch-on-a-new-record-object-rails-4", "title": "ActiveRecord::ActiveRecordError (cannot touch on a new record object) rails 4", "body": "<p>I recently upgraded a rails 3 application to rails 4. When I am trying to create a new Test, below code from before_save fails to execute. The same code works fine with rails 3.</p>\n<pre><code>class Test &lt; ActiveRecord::Base\n  has_many  :assignments, :dependent =&gt; :destroy\n\n  before_save do\n    if code_changed? \n      self.assignments.each{|a| a.touch}\n    end\n  end\nend\n\nclass Assignment &lt; ActiveRecord::Base\n  belongs_to :test, :touch =&gt; true\nend\n</code></pre>\n<p>I see the below error when I create a new test.</p>\n<pre><code>ActiveRecord::ActiveRecordError (cannot touch on a new record object):\napp/models/test.rb:6:in `block (2 levels) in &lt;class:Test&gt;'\napp/models/test.rb:6:in `block in &lt;class:Test&gt;'\napp/controllers/tests_controller.rb:423:in `create'\n</code></pre>\n<p>Any suggestions to resolve this issue ??</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500505394, "post_id": 45201063, "comment_id": 77371875, "body": "That&#39;s some code. What&#39;s the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 120655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7GuG.jpg?s=128&g=1", "display_name": "tobybot", "link": "https://stackoverflow.com/users/120655/tobybot"}, "edited": false, "score": 0, "creation_date": 1500587742, "post_id": 45211507, "comment_id": 77417941, "body": "Liked this for academic explanation, informative without just handing over a functioning answer"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1500544931, "creation_date": 1500544931, "answer_id": 45211507, "question_id": 45201063, "link": "https://stackoverflow.com/questions/45201063/recursively-generate-non-overlapping-schedule/45211507#45211507", "title": "Recursively generate non-overlapping schedule", "body": "<p>This problem is an <a href=\"https://en.m.wikipedia.org/wiki/Assignment_problem\" rel=\"nofollow noreferrer\">assignment problem</a>, which is a special case of the <a href=\"https://en.m.wikipedia.org/wiki/Transportation_theory_(mathematics)\" rel=\"nofollow noreferrer\">transportation problem</a>, which in turn is a special type of <a href=\"https://en.m.wikipedia.org/wiki/Linear_programming\" rel=\"nofollow noreferrer\">linear programming problem</a>.</p>\n\n<p>The variables are of the form x<sub>ij</sub>, which equals <code>1</code> if movie <code>i</code> is assigned to timeslot <code>j</code> and equal to <code>0</code> otherwise. There are two sets of constraints, one that ensures that each movie is assigned to exactly one timeslot and the other that permits at most one movie to be assigned to each timeslot. The objective function (to be maximized or minimized) is arbitrary (all variable coefficients are set equal to zero, for example) as we are seeking any <em>feasible</em> solution.</p>\n\n<p>It follows that the problem could be solved with a general-purpose LP code (one that implements the <em>Simplex</em> algorithm, for example) or with a specialized algorithm for solving assignment or transportation problems. (See the links for details.) Regardless of the algorithm selected, it will produce a feasible schedule if one exists.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1500646329, "last_edit_date": 1500646329, "creation_date": 1500587498, "answer_id": 45225808, "question_id": 45201063, "link": "https://stackoverflow.com/questions/45201063/recursively-generate-non-overlapping-schedule/45225808#45225808", "title": "Recursively generate non-overlapping schedule", "body": "<p>I won't solve it all, but give you some hints.</p>\n\n<p>Given:</p>\n\n<pre><code>movies = { \"Shining\" =&gt; [14, 15, 16], \n     \"kill bill\" =&gt; [14, 15], \n     \"Pulp fiction\" =&gt; [14, 15] }\n</code></pre>\n\n<p>You can invert that hash into a hash of each time with an array of movies:</p>\n\n<pre><code>&gt; times=movies.each_with_object(Hash.new { |h,k| h[k]=[] }) {|(k,v), h| \n                  v.map {|t| h[t] &lt;&lt; k}\n                  }.sort_by {|k, v| k}.to_h\n=&gt; {14=&gt;[\"Shining\", \"kill bill\", \"Pulp fiction\"], 15=&gt;[\"Shining\", \"kill bill\", \"Pulp fiction\"], 16=&gt;[\"Shining\"]}\n</code></pre>\n\n<p>Then you can take a <a href=\"https://en.wikipedia.org/wiki/Cartesian_product\" rel=\"nofollow noreferrer\">cartesian product</a> of the values arrays and keep the uniques to deduce what the order has to be:</p>\n\n<pre><code>&gt; schedules=times.values[0].product(*times.values[1..-1])\n                  .select {|arr| arr.uniq.length == arr.length}\n=&gt; [[\"kill bill\", \"Pulp fiction\", \"Shining\"], [\"Pulp fiction\", \"kill bill\", \"Shining\"]]\n</code></pre>\n\n<p>(Hint: Taking an Cartesian Product can be expressed recursively -- I just used Ruby's built in method as a shortcut)</p>\n\n<p>So your result will be one of those two schedules.</p>\n\n<p>Finally:</p>\n\n<pre><code>&gt; times.keys.zip(schedules.transpose).map {|t,m| [t, m.uniq.join(' or ')]}.to_h\n{14=&gt;\"kill bill or Pulp fiction\", 15=&gt;\"Pulp fiction or kill bill\", 16=&gt;\"Shining\"}\n</code></pre>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 1, "user_id": 4067877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b774c31cf1ed6dafc917cffe170356a6?s=128&d=identicon&r=PG&f=1", "display_name": "JazzHands", "link": "https://stackoverflow.com/users/4067877/jazzhands"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1500646329, "creation_date": 1500498618, "last_edit_date": 1500520228, "question_id": 45201063, "link": "https://stackoverflow.com/questions/45201063/recursively-generate-non-overlapping-schedule", "title": "Recursively generate non-overlapping schedule", "body": "<p>I'm working through some careercup.com questions and I'm stumped on <a href=\"https://www.careercup.com/question?id=5682055978418176\" rel=\"nofollow noreferrer\">this one</a> in trying to recursively implement it in Ruby.  Basically, the goal is to generate non-overlapping schedules given a set of hour long movies and their showtimes.</p>\n\n<pre><code>def recursive_scheduler(movies, schedule = {})\n  movie, showtimes = movies.first\n\n  showtimes.each do |showtime|\n    if !schedule.has_key?(showtime)\n      schedule[showtime] = movie\n      if movies.length &gt; 1\n        if recursive_scheduler((movies.reject { |m| m==movie }), schedule)\n          return true\n        end\n      else\n        puts \"found schedule: #{schedule}\"\n        return true\n      end\n    end\n  end\n  return false\nend\n\nmovies = { \"The Shining\" =&gt; [14, 15, 16],\n           \"Kill Bill\"  =&gt; [14, 15],\n           \"Pulp Fiction\" =&gt; [14, 15] }\n\nrecursive_scheduler(movies)\n</code></pre>\n"}, {"tags": ["ruby", "enumerator"], "answers": [{"tags": [], "owner": {"reputation": 2705, "user_id": 386665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e948c99df9521afa577e2f7e59c05b?s=128&d=identicon&r=PG", "display_name": "jimworm", "link": "https://stackoverflow.com/users/386665/jimworm"}, "is_accepted": false, "score": 1, "last_activity_date": 1500500658, "last_edit_date": 1500500658, "creation_date": 1500499106, "answer_id": 45201191, "question_id": 45200982, "link": "https://stackoverflow.com/questions/45200982/how-are-values-actually-fetched-from-an-enumerator-object-in-ruby/45201191#45201191", "title": "How are values actually fetched from an Enumerator object in Ruby?", "body": "<p>Calling <code>#next</code> moves the internal position forward, while <code>#to_a</code> doesn't consider the internal position at all. Try calling <code>next</code> once, then <code>to_a</code>, then <code>next</code> again to experiment.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-next</a></p>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-to_a\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-to_a</a></p>\n"}, {"comments": [{"owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 0, "creation_date": 1500504612, "post_id": 45201663, "comment_id": 77371652, "body": "What exactly do you mean by &quot;a copy of the enumerator&quot;? Is a new copy created from something like <code>enum.dup</code> or <code>enum.clone</code>?"}, {"owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "reply_to_user": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 0, "creation_date": 1500510628, "post_id": 45201663, "comment_id": 77373246, "body": "@AsadMoosvi I edited my answer. &quot;Copying the enumerator&quot; was indeed misleading. I hope it is clearer now."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1500519335, "post_id": 45201663, "comment_id": 77375263, "body": "Though peripheral to this question, I suggest you discuss the roll of the instance method <code>each</code> that is defined on every class that includes <code>Enumerable</code>. If, for example, we write <code>[1,2,3].map { |n| 2*n }</code>, we might ask how this works, considering that <code>map</code> is an <code>Enumerable</code> method, and all <code>Enumerable</code> methods have receivers that are enumerators, yet the array <code>[1,2,3]</code> is not an enumerator. As you know, when Ruby encounters this she inserts <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\">Array#each</a> after the array to convert it to an enumerator: <code>[1,2,3].each.map { |n| 2*n }</code>."}, {"owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 0, "creation_date": 1500546386, "post_id": 45201663, "comment_id": 77390045, "body": "I still don&#39;t get what you mean by &quot;a copy of the enumerator in its original state.&quot;"}], "tags": [], "owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "is_accepted": true, "score": 7, "last_activity_date": 1501443301, "last_edit_date": 1592644375, "creation_date": 1500501141, "answer_id": 45201663, "question_id": 45200982, "link": "https://stackoverflow.com/questions/45200982/how-are-values-actually-fetched-from-an-enumerator-object-in-ruby/45201663#45201663", "title": "How are values actually fetched from an Enumerator object in Ruby?", "body": "<p>Short answer: <code>to_a</code> always iterates over all elements and does not advance the position of the iterator. That is why <a href=\"https://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a> will start with the first element even if you have called <code>to_a</code> before. Calling <code>to_a</code> does not modify the enumerator object.</p>\n<hr />\n<p>Here are the details:</p>\n<h3>Terms: internal vs external iteration</h3>\n<p>When discussing iterators in Ruby, two terms come up:</p>\n<ol>\n<li><a href=\"https://en.wikipedia.org/wiki/Iterator#Implicit_iterators\" rel=\"nofollow noreferrer\">internal iteration</a> (also called implicit iteration)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Iterator#External_iterators_and_the_iterator_pattern\" rel=\"nofollow noreferrer\">external iteration</a></li>\n</ol>\n<p>In your question, <code>enum.to_a</code> is an example for <code>enum</code> being used for internal iteration, while <code>enum.next</code> is an example of external iteration.</p>\n<p>External iteration provides more control but is a more low-level operation. Internal iteration is often more elegant. The difference is that external iteration makes the state explicit (the current position), while the internal iteration implicitly applies to all elements.</p>\n<h3>Internal iteration: to_a</h3>\n<p><code>to_a</code> will call <a href=\"https://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-each\" rel=\"nofollow noreferrer\">Enumerator#each</a>, which iterates over the block <strong>according to how this Enumerator was constructed</strong>.</p>\n<p>That is the critical point. As it does not operate on the internal state (the position) of the enumerator object from which it is called,\nit does not interfere with the calls to <code>next</code> (the external iteration operation).</p>\n<h3>External iteration: next</h3>\n<p>When you create the Enumerator object, its state is initialized to point to the first object. You can modify the internal state by calling <code>next</code>, which will advance the position. Once all elements were consumed, it will raise a <code>StopIteration</code> exception.</p>\n<p>Note that the state is only relevant when you are using the enumerator object for external iteration. That explains why you can safely call <code>to_a</code> on an enumerator that already consumed all elements, and it will still return a list of all elements. All internal iteration operations (e.g, <code>each</code>, <code>to_a, </code>map`) do not interfere with the external iteration.</p>\n<h3>Implementation in Rubinius</h3>\n<p>I looked at the <a href=\"https://github.com/rubinius/rubinius\" rel=\"nofollow noreferrer\">Rubinius</a> source code to understand how it implemented there. Although it is not a language specification, it should be relatively close to the truth. Entry points:</p>\n<ul>\n<li><a href=\"https://github.com/rubinius/rubinius/blob/master/core/enumerable.rb#L220\" rel=\"nofollow noreferrer\">Enumerable#to_a</a> (arg will be empty)</li>\n<li><a href=\"https://github.com/rubinius/rubinius/blob/master/core/enumerator.rb#L98\" rel=\"nofollow noreferrer\">Enumerator#next</a></li>\n<li><a href=\"https://github.com/rubinius/rubinius/blob/master/core/enumerator.rb#L49\" rel=\"nofollow noreferrer\">Enumerator#each</a></li>\n</ul>\n<p>Note that Enumerator includes <a href=\"https://ruby-doc.org/core-2.4.0/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> as a mixin.</p>\n"}], "owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 45201663, "answer_count": 2, "score": 3, "last_activity_date": 1501443301, "creation_date": 1500498314, "last_edit_date": 1500524624, "question_id": 45200982, "link": "https://stackoverflow.com/questions/45200982/how-are-values-actually-fetched-from-an-enumerator-object-in-ruby", "title": "How are values actually fetched from an Enumerator object in Ruby?", "body": "<p>I'm interested in how values are fetched from an <code>Enumerator</code> object. In the following piece of code, I was expecting the first <code>enum.next</code> call to raise an exception as all values had already been received from <code>enum</code> after the call to <code>enum.to_a</code>.</p>\n\n<pre><code>enum = Enumerator.new do |yielder|\n  yielder.yield 1\n  yielder.yield 2\n  yielder.yield 3\nend\n\np enum.to_a # =&gt; [1, 2, 3]\n\nputs enum.next # Expected StopIteration here\nputs enum.next\nputs enum.next\nputs enum.next # =&gt; StopIteration exception raised\n</code></pre>\n\n<p>What's the difference between calling <code>next</code> vs an iterator method like <code>to_a</code> on an instance of <code>Enumerator</code>?</p>\n"}, {"tags": ["arrays", "ruby", "sorting", "multiple-conditions"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1500505697, "post_id": 45200749, "comment_id": 77371986, "body": "What do you mean with second sort is not correct? What&#39;s the expected output?"}, {"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1500509470, "post_id": 45200749, "comment_id": 77373012, "body": "Please see my 2nd update. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1500517037, "post_id": 45201337, "comment_id": 77374692, "body": "Just work exactly like I was looking for. Your 2nd update even sorts numeric values! Muchas Gracias Sebasti&#225;n."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1500509848, "last_edit_date": 1500509848, "creation_date": 1500499679, "answer_id": 45201337, "question_id": 45200749, "link": "https://stackoverflow.com/questions/45200749/print-array-values-based-in-sorting-list-and-ascending-order/45201337#45201337", "title": "Print array values based in sorting list and ascending order", "body": "<p>Looking at your code, what you could do is to create an empty array, and then inside your <code>values.each</code> iteration, to push each element to your empty array if that element include the element from the <code>sortlist</code></p>\n\n<pre><code>new_list = []\nsortlist.each{ |s|\n  values.each{ |v|\n    new_list &lt;&lt; v if v.include?(s)\n  }\n}\n</code></pre>\n\n<p>Then use <code>group_by</code> to group them by its first character:</p>\n\n<pre><code>p new_list.group_by{|e| e[0]}\n#\u00a0=&gt; {\"H\"=&gt;[\"Hom_2\", \"Hom_1\"], \"V\"=&gt;[\"Vep_3\", \"Vep_1\", \"Vep_2\"], \"G\"=&gt;[\"Ghu_1\"], \"P\"=&gt;[\"Prw_1\", \"Prw_3\", \"Prw_5\", \"Prw_2\", \"Prw_4\"]}\n</code></pre>\n\n<p>Then use <code>flat_map</code> to get a \"plain\" array with all your values, but inside the iteration sort each values for each key in the hash:</p>\n\n<pre><code>p new_list.group_by{|e| e[0]}.flat_map{|_,v| v.sort}\n#\u00a0=&gt; [\"Hom_1\", \"Hom_2\", \"Vep_1\", \"Vep_2\", \"Vep_3\", \"Ghu_1\", \"Prw_1\", \"Prw_2\", \"Prw_3\", \"Prw_4\", \"Prw_5\"]\n</code></pre>\n\n<p>Or a <code>flat_map</code>, <code>select</code> and <code>sort_by</code> combination (2nd update):</p>\n\n<pre><code>values = [ \"Ghu_Klca\",\"Prw_Rkdg\",\"Prw_Ceteu\",\"Prw_Eriir\",\"Vep_Msas23\",\"Hom_Ttgr5\",\"Vep_Qsccas\",\"Hom_Ftjh\",\"Prw_jpolq\",\"Vep_Szbqh\",\"Prw_Lmnajh\" ]\nsortlist = [ \"Hom\",\"Vep\",\"Ghu\",\"Prw\" ]\n\np sortlist.flat_map{ |s|\n  values.select{ |v|\n    v if v.include?(s)\n  }.sort_by(&amp;:downcase)\n}\n#\u00a0=&gt; [\"Hom_Ftjh\", \"Hom_Ttgr5\", \"Vep_Msas23\", \"Vep_Qsccas\", \"Vep_Szbqh\", \"Ghu_Klca\", \"Prw_Ceteu\", \"Prw_Eriir\", \"Prw_jpolq\", \"Prw_Lmnajh\", \"Prw_Rkdg\"]\n</code></pre>\n\n<p>Use <code>sort_by(&amp;:downcase)</code> to \"ignore\" case when sorting.</p>\n"}, {"comments": [{"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1500509643, "post_id": 45202619, "comment_id": 77373052, "body": "Thanks Amadan for your explanation. Do you know how could be fixed the sorting within each group of similar values? I call it the second sort."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1500545645, "post_id": 45202619, "comment_id": 77389496, "body": "Based on your clarification, you want case-insensitive sort. This can be done by a <code>downcase</code> in the sorting criterion.  Answer changed accordingly."}, {"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1500576109, "post_id": 45202619, "comment_id": 77411801, "body": "Thanks so much Amadan. It works just fine your updated solution."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1500545573, "last_edit_date": 1500545573, "creation_date": 1500506543, "answer_id": 45202619, "question_id": 45200749, "link": "https://stackoverflow.com/questions/45200749/print-array-values-based-in-sorting-list-and-ascending-order/45202619#45202619", "title": "Print array values based in sorting list and ascending order", "body": "<pre><code>values.sort_by { |val|\n  front, back = val.split('_')\n  [sortlist.index(front), back.downcase]\n}\n# =&gt; [\"Hom_1\", \"Hom_2\", \"Vep_1\", \"Vep_2\", \"Vep_3\", \"Ghu_1\", \"Prw_1\", \"Prw_2\", \"Prw_3\", \"Prw_4\", \"Prw_5\"]\n# or\n# =&gt; [\"Hom_Ftjh\", \"Hom_Ttgr5\", \"Vep_Msas23\", \"Vep_Qsccas\", \"Vep_Szbqh\", \"Ghu_Klca\", \"Prw_Ceteu\", \"Prw_Eriir\", \"Prw_Lmnajh\", \"Prw_Rkdg\", \"Prw_jpolq\"]\n</code></pre>\n\n<p>This works because arrays compare by comparing the first element, then comparing the next element if the previous is equal. Currently I'm comparing the <code>back</code> as if it were a string (<code>10</code> comes before <code>2</code>); if you want numeric ordering (<code>2</code> comes before <code>10</code>), use <code>back.to_i</code> or <code>back.to_f</code> (but that won't work with the second example).</p>\n"}], "owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 45201337, "answer_count": 2, "score": 3, "last_activity_date": 1500545573, "creation_date": 1500497408, "last_edit_date": 1500509307, "question_id": 45200749, "link": "https://stackoverflow.com/questions/45200749/print-array-values-based-in-sorting-list-and-ascending-order", "title": "Print array values based in sorting list and ascending order", "body": "<p>Please your help. I have the array \"values\" that I want to sort by 2 conditions.</p>\n\n<p>First condition: Using the sort list defined in array \"sortlist\".\nSecond condition: From smallest to largest. </p>\n\n<p>With my current script I've been able to print the values in correct order for first condition (sort list), but I don't have an idea how to apply the second sorting condition (smallest to largest).</p>\n\n<pre><code>ruby -e'\nvalues = [ \"Ghu_1\",\"Prw_1\",\"Prw_3\",\"Prw_5\",\"Vep_3\",\"Hom_2\",\"Vep_1\",\"Hom_1\",\"Prw_2\",\"Vep_2\",\"Prw_4\" ]\nsortlist = [ \"Hom\",\"Vep\",\"Ghu\",\"Prw\" ]\n\nsortlist.each{ |s| \n values.each{ |v| \n     puts v if v.include?(s)\n }\n}'\n\n\n\n\nCurrent Ouput  #  Desired output\n   Hom_2       #      Hom_1\n   Hom_1       #      Hom_2\n   Vep_3       #      Vep_1\n   Vep_1       #      Vep_2\n   Vep_2       #      Vep_3\n   Ghu_1       #      Ghu_1\n   Prw_1       #      Prw_1\n   Prw_3       #      Prw_2\n   Prw_5       #      Prw_3\n   Prw_2       #      Prw_4\n   Prw_4       #      Prw_5\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>Thank Sebastian. Excellent. </p>\n\n<p>It almost work since I noticed that if the characters after \"_\" are not numbers the second sort is not correct. For example below output is incorrect for values of Pwr_XXX</p>\n\n<pre><code> ruby -e'\n values = [ \"Ghu_Klca\",\"Prw_Rkdg\",\"Prw_Ceteu\",\"Prw_Eriir\",\"Vep_Msas23\",\"Hom_Ttgr5\",\"Vep_Qsccas\",\"Hom_Ftjh\",\"Prw_jpolq\",\"Vep_Szbqh\",\"Prw_Lmnajh\" ]\n sortlist = [ \"Hom\",\"Vep\",\"Ghu\",\"Prw\" ]\n\n puts sortlist.flat_map{ |s|\n   values.select{ |v|\n     v if v.include?(s)\n   }.sort\n }'\n</code></pre>\n\n<p>2nd Update</p>\n\n<p>I mean that the first sort is based on sortlist array. The second sort is ascending based in characters after \"_\". In this case the firt letter for Prw values are\nC, E, j, L and R. But the current output is C, E, L, R and j. So, j is at the end and should be after L. I hope make sense.</p>\n\n<pre><code>Current output        Expected output\nHom_Ftjh          #      Hom_Ftjh \nHom_Ttgr5         #      Hom_Ttgr5 \nVep_Msas23        #      Vep_Msas23 \nVep_Qsccas        #      Vep_Qsccas \nVep_Szbqh         #      Vep_Szbqh \nGhu_Klca          #      Ghu_Klca \nPrw_Ceteu         #      Prw_Ceteu \nPrw_Eriir         #      Prw_Eriir \nPrw_Lmnajh        #      Prw_jpolq \nPrw_Rkdg          #      Prw_Lmnajh \nPrw_jpolq         #      Prw_Rkdg\n</code></pre>\n"}, {"tags": ["ruby", "linux", "shell"], "comments": [{"owner": {"reputation": 393, "user_id": 2653671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5f7af7f0f845e4effa9c4a5ef8b47f?s=128&d=identicon&r=PG", "display_name": "rodsoars", "link": "https://stackoverflow.com/users/2653671/rodsoars"}, "edited": false, "score": 0, "creation_date": 1500497289, "post_id": 45200662, "comment_id": 77368668, "body": "How the array should be? An example of an expected array would be helpful."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1500497587, "post_id": 45200662, "comment_id": 77368798, "body": "Can you show us the code using <code>split</code> that doesn&#39;t work? Because I just tried <code>tcpPorts.split</code> and it worked perfectly, so I&#39;m not entirely sure what you&#39;re trying to do."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1500498224, "post_id": 45200662, "comment_id": 77369129, "body": "I you like that all people who know ruby but do not know awk will help you, pleasse add you pronlem description in normal english."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1500505159, "post_id": 45200662, "comment_id": 77371804, "body": "If you&#39;re using Ruby it&#39;s really <i>not</i> necessary to employ <code>awk</code> as well. Do that in Ruby code."}], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1500497547, "creation_date": 1500497547, "answer_id": 45200787, "question_id": 45200662, "link": "https://stackoverflow.com/questions/45200662/shell-script-into-an-array-in-ruby/45200787#45200787", "title": "Shell script into an array in ruby", "body": "<p>Not easy at all. But have a look at the standard lib <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/shellwords/rdoc/Shellwords.html\" rel=\"nofollow noreferrer\">Shellwords</a>, which has a custom <code>split</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 0, "last_activity_date": 1500510921, "creation_date": 1500510921, "answer_id": 45203233, "question_id": 45200662, "link": "https://stackoverflow.com/questions/45200662/shell-script-into-an-array-in-ruby/45203233#45203233", "title": "Shell script into an array in ruby", "body": "<p>Using <code>split(\"\\n\")</code> works.</p>\n\n<p>This works correctly on my linux virtual machine:</p>\n\n<pre><code>irb(main):002:0&gt; `sudo netstat -ntpl |awk '{ if(NR &gt; 2) print \" \"$4\" \"}' | awk -F: '{print $NF}'`.split(\"\\n\")\n=&gt; [\"22 \", \"5432 \", \"25 \", \"38880 \", \"6379 \", \"111 \", \"80 \", \"51187 \", \"22 \", \"5432 \", \"25 \", \"3306 \", \"111 \"]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6058800, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4c8b794724e7264af1f6d81537f36d6?s=128&d=identicon&r=PG&f=1", "display_name": "InsertNameHere", "link": "https://stackoverflow.com/users/6058800/insertnamehere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 45203233, "answer_count": 2, "score": 1, "last_activity_date": 1500510921, "creation_date": 1500496992, "question_id": 45200662, "link": "https://stackoverflow.com/questions/45200662/shell-script-into-an-array-in-ruby", "title": "Shell script into an array in ruby", "body": "<p>I am having difficulty changing this string into an array. This should be really easy but im pretty new to using ruby and I can't seem to get it, I was trying to use .split.</p>\n\n<pre><code> tcpPorts = %x(sudo netstat -ntpl |awk '{ if(NR &gt; 2) print \" \"$4\" \"}' | awk -F: '{print $NF}')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1500506054, "post_id": 45200507, "comment_id": 77372087, "body": "is <code>Rails.application.assets</code> nil?"}, {"owner": {"reputation": 416, "user_id": 4381225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aec91934b189d3d6738211b322cf2acb?s=128&d=identicon&r=PG&f=1", "display_name": "mycellius", "link": "https://stackoverflow.com/users/4381225/mycellius"}, "reply_to_user": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1500510653, "post_id": 45200507, "comment_id": 77373253, "body": "Nope. The code in the first bit of the if statement fires, so it <code>is_a</code> (Sprockets::Index). Rails.application.assets is not nil, however using the method instance_variable_get with @environment returns nil."}], "answers": [{"comments": [{"owner": {"reputation": 416, "user_id": 4381225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aec91934b189d3d6738211b322cf2acb?s=128&d=identicon&r=PG&f=1", "display_name": "mycellius", "link": "https://stackoverflow.com/users/4381225/mycellius"}, "edited": false, "score": 0, "creation_date": 1500557053, "post_id": 45203319, "comment_id": 77398273, "body": "Could you explain how that line of code would be used in my example?"}, {"owner": {"reputation": 416, "user_id": 4381225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aec91934b189d3d6738211b322cf2acb?s=128&d=identicon&r=PG&f=1", "display_name": "mycellius", "link": "https://stackoverflow.com/users/4381225/mycellius"}, "edited": false, "score": 0, "creation_date": 1500559787, "post_id": 45203319, "comment_id": 77400652, "body": "Thank you that works great. How would one run a conditional to check if the test env is being used? In order to use <code>find_asset</code> in dev, and <code>find(file).first</code> in test"}, {"owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "reply_to_user": {"reputation": 416, "user_id": 4381225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aec91934b189d3d6738211b322cf2acb?s=128&d=identicon&r=PG&f=1", "display_name": "mycellius", "link": "https://stackoverflow.com/users/4381225/mycellius"}, "edited": false, "score": 1, "creation_date": 1500560478, "post_id": 45203319, "comment_id": 77401234, "body": "@mycellius <code>Rails.env.test?</code>"}], "tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 1, "last_activity_date": 1500557366, "last_edit_date": 1500557366, "creation_date": 1500511491, "answer_id": 45203319, "question_id": 45200507, "link": "https://stackoverflow.com/questions/45200507/rails-5-unable-to-use-env-find-asset-in-tests/45203319#45203319", "title": "Rails 5: unable to use env.find_asset in tests", "body": "<p>When <code>assets.compile = false</code> sprockets is disabled</p>\n\n<p>In test environment you can use:</p>\n\n<pre><code>Rails.application.assets_manifest.find('cable.js').first\n=&gt; #&lt;Sprockets::Asset:3ff35fce4248 \"file:///\" ... &gt;\n</code></pre>\n\n<p>In place of:</p>\n\n<pre><code># asset = env.find_asset(tmp_asset_name)\nasset = Rails.application.assets_manifest.find(tmp_asset_name).first\n</code></pre>\n"}], "owner": {"reputation": 416, "user_id": 4381225, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aec91934b189d3d6738211b322cf2acb?s=128&d=identicon&r=PG&f=1", "display_name": "mycellius", "link": "https://stackoverflow.com/users/4381225/mycellius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 45203319, "answer_count": 1, "score": 0, "last_activity_date": 1500557366, "creation_date": 1500496453, "question_id": 45200507, "link": "https://stackoverflow.com/questions/45200507/rails-5-unable-to-use-env-find-asset-in-tests", "title": "Rails 5: unable to use env.find_asset in tests", "body": "<p>I've followed along with the tutorial found <a href=\"http://matteodepalo.github.io/blog/2013/01/31/how-to-create-custom-stylesheets-dynamically-with-rails-and-sass/\" rel=\"nofollow noreferrer\">here</a> but am unable to get any tests related to the new code to work. Specifically, this is where Rails complains: </p>\n\n<pre><code>env = if Rails.application.assets.is_a?(Sprockets::Index)\n  Rails.application.assets.instance_variable_get('@environment')\nelse\n  Rails.application.assets\nend\n\nasset = env.find_asset(tmp_asset_name)\n</code></pre>\n\n<p>The exact error I get is: </p>\n\n<pre><code>undefined method `find_asset' for nil:NilClass\n</code></pre>\n\n<p>What's the reason behind `env being nil in test environments? (note: I am using minitest_rails)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1500499010, "post_id": 45200735, "comment_id": 77369491, "body": "True this works. I realized that I missed important information in my original post: everytime a user plays a card this is stored in user_card. The table holds a boolean called &quot;success&quot; - if a user wins this is &quot;true&quot; else it is &quot;false&quot;. I updated my original post."}, {"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1500500129, "post_id": 45200735, "comment_id": 77370062, "body": "Awesome! Your update works! Last question: how can I now order this descending by the sum of score? (In the leaderboard I want a list with all users and points in descending order)"}, {"owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "edited": false, "score": 0, "creation_date": 1500500514, "post_id": 45200735, "comment_id": 77370249, "body": "That&#39;s it! You saved me a lot of time! Thanks!"}], "tags": [], "owner": {"reputation": 2705, "user_id": 386665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e948c99df9521afa577e2f7e59c05b?s=128&d=identicon&r=PG", "display_name": "jimworm", "link": "https://stackoverflow.com/users/386665/jimworm"}, "is_accepted": true, "score": 2, "last_activity_date": 1500500457, "last_edit_date": 1500500457, "creation_date": 1500497348, "answer_id": 45200735, "question_id": 45200325, "link": "https://stackoverflow.com/questions/45200325/group-and-sum-in-rails/45200735#45200735", "title": "Group and sum in Rails", "body": "<pre><code>users = User.joins(:cards).\n             select(:username, 'sum(cards.score) as score').\n             where(user_cards: {success: true}).\n             group(:id).\n             order('score desc')\n#=&gt; #&lt;ActiveRecord::Relation [#&lt;User username: 'bob'&gt;]&gt;\n\nusers.first.username\n#=&gt; \"bob\"\n\nusers.first.score\n#=&gt; 15\n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 45200735, "answer_count": 1, "score": 2, "last_activity_date": 1500500457, "creation_date": 1500495792, "last_edit_date": 1500498923, "question_id": 45200325, "link": "https://stackoverflow.com/questions/45200325/group-and-sum-in-rails", "title": "Group and sum in Rails", "body": "<p>I am developing an app which is a card game. Each card is stored in a table (cards) and has a certain number of points. If a user wins a card he earns the points of this card. In this case a record is saved in the user_card table holding <code>card_id</code>, <code>user_id</code> and <code>success = true</code> (if he loses the card it is <code>success = false</code>).</p>\n\n<p><strong>card.rb</strong></p>\n\n<pre><code>class Card &lt; ActiveRecord::Base\n  has_many :user_cards\n  has_many :users, through: :user_cards\nend\n</code></pre>\n\n<p><strong>user_card.rb</strong></p>\n\n<pre><code>class UserCard &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :card\nend\n</code></pre>\n\n<p>What I want to do now is to create a leaderboard. Therefore I need to:</p>\n\n<ol>\n<li>Group all user_cards where success = true by user_id</li>\n<li>Sum all points (which are stored in the card table) for successful user_cards by user</li>\n<li>Display username (from user table) and sum of points for this user</li>\n</ol>\n\n<p>I tried some approaches like group_by(&amp;:something), joins etc. However, I cannot make it work. I don't have problems when I have to group and sum stuff from a single table. However, I don't know how to get the username from the one and the points from the other table summed up based on the user_card table.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "indexing", "benchmarking"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1500492933, "post_id": 45199534, "comment_id": 77366249, "body": "I find <a href=\"https://github.com/marcandre/fruity\" rel=\"nofollow noreferrer\"><code>fruity</code></a> gem much more readable."}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": false, "score": 1, "last_activity_date": 1500493720, "last_edit_date": 1500493720, "creation_date": 1500493357, "answer_id": 45199684, "question_id": 45199534, "link": "https://stackoverflow.com/questions/45199534/in-ruby-how-do-i-properly-read-the-results-of-benchmark/45199684#45199684", "title": "In Ruby, how do I properly read the results of benchmark?", "body": "<p>You can use the total column. That time is not an average but instead is the elapsed time for that block to execute</p>\n\n<ul>\n<li>real: difference between time you started it and it stopped - the wall clock time.</li>\n<li>user: CPU time spent executing your process</li>\n<li>sys: CPU time spent executing operating system services on behalf of your process</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "is_accepted": false, "score": 0, "last_activity_date": 1580971027, "creation_date": 1580971027, "answer_id": 60089042, "question_id": 45199534, "link": "https://stackoverflow.com/questions/45199534/in-ruby-how-do-i-properly-read-the-results-of-benchmark/60089042#60089042", "title": "In Ruby, how do I properly read the results of benchmark?", "body": "<p>\"real\" is the most simple and (probably) relevant thing to look at. It's simple the amount of time that has passed on the clock. <code>t = Time.now; do_things; real=Time.now-t</code>.</p>\n\n<p>You can ignore the other columns.</p>\n\n<p>you said \"an average of\" - it's not an average, it's the amount of time that it takes to do your code 50,000 times. So the average time to do it once is <code>real/50_000</code>. (but you don't need to calculate this to know that index is faster).</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1580971027, "creation_date": 1500492849, "question_id": 45199534, "link": "https://stackoverflow.com/questions/45199534/in-ruby-how-do-i-properly-read-the-results-of-benchmark", "title": "In Ruby, how do I properly read the results of benchmark?", "body": "<p>I'm using Rials 5.0.1.  With the rails console, I would like to figure out what is the fastest way to get the index of the first regular expression occurrence in a string.  So I have tried the below</p>\n\n<pre><code>2.4.0 :004 &gt; Benchmark.bm do |x|\n2.4.0 :005 &gt;     x.report { 50000.times { a = 'a@b.c'.index(/\\@/) } }\n2.4.0 :006?&gt;     x.report { 50000.times { a = 'a@b.c'.match(/\\@/)[0] } }\n2.4.0 :007?&gt;   end\n       user     system      total        real\n   0.030000   0.000000   0.030000 (  0.026763)\n   0.060000   0.000000   0.060000 (  0.064986)\n =&gt; [#&lt;Benchmark::Tms:0x007fe974e13f88 @label=\"\", @real=0.026763000059872866, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.03000000000000025, @total=0.03000000000000025&gt;, #&lt;Benchmark::Tms:0x007fe973c9e9d8 @label=\"\", @real=0.06498600030317903, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.06000000000000005, @total=0.06000000000000005&gt;]\n</code></pre>\n\n<p>I'm confused about how to read the results.  I \"think\" its telling me the first method takes an average of \".02\" seconds while the second requires \".06\" seconds, so I should stick with \"index\".  Am I reading this right?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine", "google-cloud-datastore"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1500491469, "post_id": 45199071, "comment_id": 77365403, "body": "Please post the full error message including the filename and line number in which the error occurred. The stack trace might be helpful too."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500491823, "post_id": 45199164, "comment_id": 77365592, "body": "Well actually I don&#39;t I can use ActiveRecord because it conflicts nosql database setups. So I didn&#39;t include it when I created the app."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500492033, "post_id": 45199164, "comment_id": 77365696, "body": "I edited my response now that you posted a stack trace"}, {"owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500492484, "post_id": 45199164, "comment_id": 77365961, "body": "NameError (undefined local variable or method <code>id&#39; for #&lt;Post:0x9d5d9f8&gt;):  app&#47;models&#47;post.rb:40:in </code>to_entity&#39; app/models/post.rb:80:in <code>save&#39; app&#47;controllers&#47;posts_controller.rb:16:in </code>create&#39;"}, {"owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500492735, "post_id": 45199164, "comment_id": 77366108, "body": "That was the new error I got, but I&#39;m assuming your answer is putting me in the right direction."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500492788, "post_id": 45199164, "comment_id": 77366143, "body": "You will want to add an <code>id</code> to the attr_accessors in your model. i.e. <code>attr_accessor :id, :title, :body</code>"}, {"owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500492976, "post_id": 45199164, "comment_id": 77366278, "body": "Thank you! It worked! I think looking at the screen all the time made me miss these errors."}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": true, "score": 1, "last_activity_date": 1500491919, "last_edit_date": 1500491919, "creation_date": 1500491451, "answer_id": 45199164, "question_id": 45199071, "link": "https://stackoverflow.com/questions/45199071/nameerror-in-postscontrollercreate/45199164#45199164", "title": "NameError in PostsController#create", "body": "<p>Okay, it looks like you are missing a <code>to_entity</code> method. Try adding something similar to this for your post model. I slightly modified the code from the <code>Book</code> documentation example <a href=\"https://github.com/GoogleCloudPlatform/getting-started-ruby/blob/master/2-cloud-datastore/app/models/book.rb#L95\" rel=\"nofollow noreferrer\">here</a>. You will want to read that entire file to see what their Book model looks like with all of the code.</p>\n\n<pre><code>def to_entity\n  entity                 = Google::Cloud::Datastore::Entity.new\n  entity.key             = Google::Cloud::Datastore::Key.new \"Post\", id\n  entity[\"title\"]        = title\n  entity[\"body\"]         = body\n  entity\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 45199164, "answer_count": 1, "score": 1, "last_activity_date": 1500491919, "creation_date": 1500491096, "last_edit_date": 1500491590, "question_id": 45199071, "link": "https://stackoverflow.com/questions/45199071/nameerror-in-postscontrollercreate", "title": "NameError in PostsController#create", "body": "<p>So I'm working on a web app using rails and the google cloud datastore. I'm relatively new at coding web apps. Most of the errors I'm running into come from trying to integrate the datastore with the rails MVC model. For further context most of my code is based of the Google Datastore Bookshelf tutorial found on the datastore information page. <a href=\"https://cloud.google.com/ruby/getting-started/using-cloud-datastore\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/getting-started/using-cloud-datastore</a></p>\n\n<p>So recently I ran into a NameError in PostsController#create when I was trying to save a post to the datastore database. I can't seem to find the cause of this issue so hopefully someone can be my new set of eyes or provide some insight. </p>\n\n<p>Also if you know any places where I can find helpful documentation using datastore and rails. That would be appreciated </p>\n\n<p><strong>So this is my post_controller.rb file</strong></p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  PER_PAGE = 10\n\n  def index\n     @post, @cursor = Post.query limit: PER_PAGE, cursor: params[:cursor]\n  end\n\n  def new\n    @post = Post.new\n  end\n\n  def create\n    @post = Post.new post_params\n\n    if @post.save\n      flash[:success] = \"Posted\"\n      redirect_to posts_path(@post)\n    else\n      render :new\n      end\n  end\n\n  def edit\n    @post = Post.find(params[:id])\n  end\n\n  def update\n    @post = Post.find(params[:id])\n\n    if @post.update(post_params)\n      redirect_to @post\n    else\n      render 'edit'\n      end\n  end\n\n  def show\n    @post = Post.find(params[:id])\n  end\n\n  def destroy\n    @post = Post.find(params[:id])\n    @post.destroy\n\n    redirect_to posts_path\n  end\n\n  private\n    def post_params\n        params.require(:post).permit(:title, :body)\n      end\n\nend\n</code></pre>\n\n<p><strong>This is my model for the post post_rb</strong></p>\n\n<pre><code>require \"google/cloud/datastore\"\n\nclass Post\n    include ActiveModel::Model\n    attr_accessor :title, :body\n\n    # Return a Google::Cloud::Datastore::Dataset for the configured dataset.\n     # The dataset is used to create, read, update, and delete entity objects.\n        def self.dataset\n        @dataset ||= Google::Cloud::Datastore.new(\n        project: Rails.application.config.\n                     database_configuration[Rails.env][\"dataset_id\"]\n    )\n\n\nend\n\n# Query Book entities from Cloud Datastore.\n#\n# returns an array of Book query results and a cursor\n# that can be used to query for additional results.\ndef self.query options = {}\n  query = Google::Cloud::Datastore::Query.new\n  query.kind \"Post\"\n  query.limit options[:limit]   if options[:limit]\n  query.cursor options[:cursor] if options[:cursor]\n\n  results = dataset.run query\n  posts   = results.map {|entity| Post.from_entity entity }\n\n  if options[:limit] &amp;&amp; results.size == options[:limit]\n    next_cursor = results.cursor\n  end\n\n  return posts, next_cursor\nend\n\n  # [START from_entity]\ndef self.from_entity entity\n  post = Post.new\n  post.id = entity.key.id\n  entity.properties.to_hash.each do |name, value|\n    post.send \"#{name}=\", value if post.respond_to? \"#{name}=\"\n  end\n  post\nend\n # [END from_entity]\n\n  # [START find]\n  # Lookup Book by ID.  Returns Book or nil.\n  def self.find id\n    query    = Google::Cloud::Datastore::Key.new \"Post\", id.to_i\n    entities = dataset.lookup query\n\n    from_entity entities.first if entities.any?\n  end\n  # [END find]\n\n\n # [START validations]\n  # Add Active Model validation support to Book class.\n  include ActiveModel::Validations\n\n  validates :title, presence: true\n\n  # [END validations]\n\n  # Save the book to Datastore.\n# @return true if valid and saved successfully, otherwise false.\ndef save\n  if valid?\n    entity = to_entity\n    Post.dataset.save entity\n    self.id = entity.key.id\n    true\n  else\n    false\n  end\nend\n\nend\n</code></pre>\n\n<p><strong>This is my new.html.erb file that i use to call the save method in datastore</strong></p>\n\n<pre><code>&lt;h1&gt;Create Post&lt;/h1&gt;\n&lt;%= form_for @post do |f| %&gt;\n    &lt;% if @post.errors.any? %&gt;\n        &lt;% @post.errors.full_messages.each do |msg| %&gt;\n            &lt;div class=\"alert alert danger\"&gt;&lt;%= msg %&gt;&lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label:title %&gt;&lt;br&gt;\n        &lt;%= f.text_field(:title, {:class =&gt; 'form-control'}) %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label:body %&gt;&lt;br&gt;\n        &lt;%= f.text_area(:body, {:class =&gt; 'form-control'}) %&gt;\n    &lt;/div&gt;\n    &lt;p&gt;\n    &lt;%= f.submit({:class =&gt; 'btn btn-primary'}) %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>This is my routes.rb file</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'auth/:provider/callback', to: 'sessions#create'\n  get 'auth/failure', to: redirect('/')\n  get 'signout', to: 'sessions#destroy', as: 'signout'\n\n  resources :sessions, only: [:create, :destroy]\n  resource :main, only: [:show]\n\n  resources :posts\n\n  root to: 'posts#index', as: \"home\"\n\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>EDIT: Forgot to include the error message log</p>\n\n<pre><code>NameError (undefined local variable or method `to_entity' for #&lt;Post:0x65b0d70&gt;\nDid you mean?  to_key):\n\napp/models/post.rb:72:in `save'\napp/controllers/posts_controller.rb:16:in `create'\n</code></pre>\n\n<p>NOTE: The create.html.erb is blank so I choose not to include it</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 1, "creation_date": 1500486040, "post_id": 45197394, "comment_id": 77362226, "body": "Have you seen <a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html\" rel=\"nofollow noreferrer\">this tutorial</a>? I found it by googling for &quot;nokogiri find element by name&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "edited": false, "score": 0, "creation_date": 1500486612, "post_id": 45197517, "comment_id": 77362573, "body": "Thanks, <code>.at_xpath</code> was exactly what I was looking for."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1500511576, "post_id": 45197517, "comment_id": 77373434, "body": "FWIW, you can also use CSS-style selectors (e.g. <code>doc.css(&#39;conclusion&#39;)</code> or <code>doc.at_css(&#39;conclusion&#39;)</code>."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1500534740, "post_id": 45197517, "comment_id": 77381421, "body": "Thanks @orde, very nice"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1509531205, "last_edit_date": 1509531205, "creation_date": 1500486093, "answer_id": 45197517, "question_id": 45197394, "link": "https://stackoverflow.com/questions/45197394/getting-a-single-child-element-with-a-given-name-with-nokogiri/45197517#45197517", "title": "Getting a single child element with a given name with Nokogiri", "body": "<p>Try with <code>xpath</code> method. </p>\n\n<pre><code>node = doc.xpath(\"//conclusion\")[0]\n</code></pre>\n\n<p>or, if you know is just one</p>\n\n<pre><code>node = doc.at_xpath(\"//conclusion\")\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 45197517, "answer_count": 1, "score": 1, "last_activity_date": 1509531205, "creation_date": 1500485687, "question_id": 45197394, "link": "https://stackoverflow.com/questions/45197394/getting-a-single-child-element-with-a-given-name-with-nokogiri", "title": "Getting a single child element with a given name with Nokogiri", "body": "<p>Let's say I have XML which looks like this:</p>\n\n<pre><code>&lt;paper&gt;\n    &lt;header&gt;\n    &lt;/header&gt;\n    &lt;body&gt;\n        &lt;paragraph&gt;\n        &lt;/paragraph&gt;\n    &lt;/body&gt;\n    &lt;conclusion&gt;\n    &lt;/conclusion&gt;\n&lt;/paper&gt;\n</code></pre>\n\n<p>Is there a way I can just get <code>conclusion</code>, without making an ugly loop like:</p>\n\n<pre><code>for child in paper.children do\n    if child.name == \"conclusion\"\n        conclusion = child\n    end\nend\n\nputs conclusion\n</code></pre>\n\n<p>Ideally something like python's <code>Element.find('conclusion')</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "square-connect"], "answers": [{"comments": [{"owner": {"reputation": 2062, "user_id": 596793, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c50c51424d7bd9e5cf63915ac6ffb07c?s=128&d=identicon&r=PG", "display_name": "Kieran Klaassen", "link": "https://stackoverflow.com/users/596793/kieran-klaassen"}, "edited": false, "score": 0, "creation_date": 1500486327, "post_id": 45197413, "comment_id": 77362393, "body": "Sweet, makes sense!"}], "tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": true, "score": 2, "last_activity_date": 1500485744, "creation_date": 1500485744, "answer_id": 45197413, "question_id": 45197268, "link": "https://stackoverflow.com/questions/45197268/how-to-use-a-gem-with-different-config-settings-for-my-users/45197413#45197413", "title": "How to use a Gem with different config settings for my users", "body": "<p>After briefly looking into the code of the gem, I think you should be able to create instances <em>ad hoc</em> as you need them. For example:</p>\n\n<pre><code>config = SquareConnect::Configuration.new do |config|\n  config.access_token = 'some token'\nend\napi_client = SquareConnect::ApiClient.new(config)\napi_instance = SquareConnect::CatalogApi.new(api_client)\n</code></pre>\n"}], "owner": {"reputation": 2062, "user_id": 596793, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c50c51424d7bd9e5cf63915ac6ffb07c?s=128&d=identicon&r=PG", "display_name": "Kieran Klaassen", "link": "https://stackoverflow.com/users/596793/kieran-klaassen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 45197413, "answer_count": 1, "score": 1, "last_activity_date": 1500485744, "creation_date": 1500485275, "question_id": 45197268, "link": "https://stackoverflow.com/questions/45197268/how-to-use-a-gem-with-different-config-settings-for-my-users", "title": "How to use a Gem with different config settings for my users", "body": "<p>I am trying to use the square Connect gem but have a problem setting it up with a merchant scope.</p>\n\n<p>This is what the documentation says: (<a href=\"https://github.com/square/connect-ruby-sdk\" rel=\"nofollow noreferrer\">https://github.com/square/connect-ruby-sdk</a>)</p>\n\n<pre><code># Load the gem\nrequire 'square_connect'\n\n# Setup authorization\nSquareConnect.configure do |config|\n  # Configure OAuth2 access token for authorization: oauth2\n  config.access_token = 'YOUR ACCESS TOKEN'\nend\n\napi_instance = SquareConnect::CatalogApi.new\n</code></pre>\n\n<p>The problem is that I need an <code>api_instance</code> per user I have with their own access token. What would the most appropriate solution be? Resetting the access token every time with some kind of lock, or setting multiple <code>api_instance</code> some way. </p>\n\n<p>thanks!</p>\n\n<p>Ideally I would have: </p>\n\n<pre><code>class User \n  def api_instance\n    # the user scoped instance\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1502252621, "post_id": 45205313, "comment_id": 78122509, "body": "@Andr&#233;s Da Vi&#225; if you satisfied with my answer then make it correct and vote up."}], "tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1500900126, "last_edit_date": 1500900126, "creation_date": 1500525652, "answer_id": 45205313, "question_id": 45197246, "link": "https://stackoverflow.com/questions/45197246/rails-parsing-nested-form-association-errors/45205313#45205313", "title": "Rails - Parsing nested form association errors", "body": "<blockquote>\n  <p>Parsing nested form association errors</p>\n</blockquote>\n\n<p>Not Sure, but You can remove default error messages by:</p>\n\n<ol>\n<li>Clear all the errors with <code>self.errors.clear</code>.</li>\n<li>Put all the error messages back in the right/desired places using <code>self.errors.add</code>.</li>\n</ol>\n"}], "owner": {"reputation": 536, "user_id": 2266777, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QgXTg.png?s=128&g=1", "display_name": "Andr&#233;s Da Vi&#225;", "link": "https://stackoverflow.com/users/2266777/andr%c3%a9s-da-vi%c3%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500900126, "creation_date": 1500485165, "question_id": 45197246, "link": "https://stackoverflow.com/questions/45197246/rails-parsing-nested-form-association-errors", "title": "Rails - Parsing nested form association errors", "body": "<p>I am trying to display association errors using an index key object with the following format:</p>\n\n<pre><code>:errors=&gt;{\n  :questions=&gt;{\n     0=&gt;{:title=&gt;\"can't be blank\"},\n     1=&gt;{:title=&gt;\"can't be blank\"}\n  }\n}\n</code></pre>\n\n<p>Rails 5 provides a way to display error indexes but using a format like:</p>\n\n<pre><code>questions[0].title, \nquestions[1].title\n</code></pre>\n\n<p>My solution which is a bit nasty, is parsing the error response like this</p>\n\n<pre><code>def parse_errors\n  {\n    errors: {\n      questions: @post.questions.enum_for(:each_with_index).collect { |question, index|\n        {\n           index =&gt; question.errors.messages\n        } unless question.valid?\n      }.inject({}, :merge).transform_values {|v| v.transform_values &amp;:first }\n   }.merge!(@post.errors.messages)\n  }\n end\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>{\n  :errors=&gt;{\n    :questions=&gt;{\n      0=&gt;{\n        :title=&gt;\"can't be blank\"\n      },\n      1=&gt;{\n        :title=&gt;\"can't be blank\"\n      }\n    }, \n    :\"questions.title\"=&gt;[\"can't be blank\"], \n    :title=&gt;[\"can't be blank\"]\n  }\n}\n</code></pre>\n\n<p>But i expect the following result omitting the default question error message :\"questions.title\"=>[\"can't be blank\"],\nLike this:</p>\n\n<pre><code>{\n  :errors=&gt;{\n    :questions=&gt;{\n      0=&gt;{\n        :title=&gt;\"can't be blank\"\n      },\n      1=&gt;{\n        :title=&gt;\"can't be blank\"\n      }\n    },  \n    :title=&gt;[\"can't be blank\"]\n  }\n}\n</code></pre>\n\n<p>So, is there any way to clean up this code in order to show errors for post and questions with the expected format?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "c", "ruby", "heroku"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1500518579, "post_id": 45197132, "comment_id": 77375084, "body": "The usual way to do this would be to create a Gem containing the C extension, which would then be compiled when it is installed during deployment."}], "answers": [{"comments": [{"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 1, "creation_date": 1500507575, "post_id": 45197423, "comment_id": 77372503, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/16764489\">From Review</a>"}, {"owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "reply_to_user": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1500508535, "post_id": 45197423, "comment_id": 77372791, "body": "I edited the comment to include more instructions in case the link changes"}], "tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 3, "last_activity_date": 1500508472, "last_edit_date": 1500508472, "creation_date": 1500485772, "answer_id": 45197423, "question_id": 45197132, "link": "https://stackoverflow.com/questions/45197132/is-there-any-support-for-extending-ruby-using-c-on-heroku/45197423#45197423", "title": "Is there any support for extending Ruby using C on Heroku?", "body": "<p>You can use Heroku Buildpacks to solve this <a href=\"https://blog.heroku.com/buildpacks\" rel=\"nofollow noreferrer\">https://blog.heroku.com/buildpacks</a></p>\n\n<p>I did some work with the linguist gem which required C extensions to work and solved it by using the correct buildpack.</p>\n\n<p>You can either use a prebuilt buildpack or build your own</p>\n"}], "owner": {"reputation": 123, "user_id": 4196243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-Ih2-y04fww4/AAAAAAAAAAI/AAAAAAAAABo/zYo6kU9Vmic/photo.jpg?sz=128", "display_name": "computergorl", "link": "https://stackoverflow.com/users/4196243/computergorl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 45197423, "answer_count": 1, "score": 1, "last_activity_date": 1500508472, "creation_date": 1500484822, "question_id": 45197132, "link": "https://stackoverflow.com/questions/45197132/is-there-any-support-for-extending-ruby-using-c-on-heroku", "title": "Is there any support for extending Ruby using C on Heroku?", "body": "<p>I am trying to quickly calculate the hamming distance between two 64 bit integers in Ruby. I quickly discovered that even with Ruby's optimized string functions etc. it wouldn't be enough, so I turned to C extensions. For comparison, Pure Ruby benchmarked at about 350,000 comparisons per second and C extensions benchmarked at around 4,000,000. </p>\n\n<p>I used the implementation <a href=\"https://stackoverflow.com/a/6397116/4196243\">here</a> and compiled it on my computer where it worked fine. The problem I have is using it on Heroku. I tried <code>ruby extconf.rb make</code> to create the makefile, which worked, and then <code>make</code> to compile it which failed with <code>make: gcc: Command not found</code>. It doesn't matter to me if I do this on deploy or not, but I don't know how to run code automatically at deploy. This has vexed me - if anyone could help it would be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 3231224, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/42485bc80d9ecb7750c701effe3ef609?s=128&d=identicon&r=PG", "display_name": "S.ork", "link": "https://stackoverflow.com/users/3231224/s-ork"}, "edited": false, "score": 0, "creation_date": 1500483056, "post_id": 45196466, "comment_id": 77360480, "body": "Thank you man, it works!!!!! if you&#39;&#39;ll be so kind - put my nose into piece of documentation that will clarify this for me."}, {"owner": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "reply_to_user": {"reputation": 219, "user_id": 3231224, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/42485bc80d9ecb7750c701effe3ef609?s=128&d=identicon&r=PG", "display_name": "S.ork", "link": "https://stackoverflow.com/users/3231224/s-ork"}, "edited": false, "score": 1, "creation_date": 1500483128, "post_id": 45196466, "comment_id": 77360529, "body": "@S.ork From <a href=\"http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-case\" rel=\"nofollow noreferrer\">the docs</a>: &quot;The first when clause to match the condition (or to evaluate to Boolean truth, if the condition is null) \u201cwins\u201d, and its code stanza is executed&quot;"}, {"owner": {"reputation": 219, "user_id": 3231224, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/42485bc80d9ecb7750c701effe3ef609?s=128&d=identicon&r=PG", "display_name": "S.ork", "link": "https://stackoverflow.com/users/3231224/s-ork"}, "reply_to_user": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 0, "creation_date": 1500483406, "post_id": 45196466, "comment_id": 77360700, "body": "@AndrewPiliser this doesn&#39;t help, in my case only third clause evaluated to true, but it never execute."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 1, "creation_date": 1500483583, "post_id": 45196466, "comment_id": 77360805, "body": "@AndrewPiliser Try to link through to the current version of the docs whenever possible. That&#39;s a 1.9 link."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1500483874, "post_id": 45196466, "comment_id": 77360992, "body": "The <a href=\"https://ruby-doc.org/core-2.4.1/doc/syntax/control_expressions_rdoc.html#label-case+Expression\" rel=\"nofollow noreferrer\">official docs</a> do cover it, though not as in-depth as they probably should. I&#39;ve added some code here that shows how your example is interpreted."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1500485764, "post_id": 45196466, "comment_id": 77362048, "body": "I never though about how the OP&#39;s code would be interpreted. Thanks"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1500485964, "post_id": 45196466, "comment_id": 77362185, "body": "So one stupid solution would be to replace <code>case org</code> by <code>case true</code> :D"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 7, "last_activity_date": 1500483768, "last_edit_date": 1500483768, "creation_date": 1500482786, "answer_id": 45196466, "question_id": 45196405, "link": "https://stackoverflow.com/questions/45196405/unexpected-case-behaviour-in-ruby/45196466#45196466", "title": "Unexpected case behaviour in Ruby", "body": "<p>This is a classic Ruby blunder. <code>case</code> has two methods of being called, one where you pass in a thing to branch based on, and one where you don't.</p>\n\n<p>If you <em>do</em> specify an expression in the <code>case</code> statement then all the other conditions are evaluated and compared with <code>===</code>. In this case <code>org &lt;= 1</code> evaluates down to <code>false</code> and <code>org === false</code> is obviously not true. The same goes for all other cases, they're either true or false. That means none of them match.</p>\n\n<p>If you don't specify an expression then <code>case</code> behaves like a fancy <code>if</code>. </p>\n\n<p>Switch <code>case org</code> to <code>case</code> and it works. You can also switch to ranges:</p>\n\n<pre><code>val =\n  case org\n  when 0..1\n    'L'\n  when 2..3\n    'M'\n  else\n    'H'\n  end\n</code></pre>\n\n<p>The way your original code executes is as if it were:</p>\n\n<pre><code>org = 4\nif (org &lt;= 1) === org\n  val = 'L'\nelsif (2..3) === org\n  val = 'M'\nelsif (org &gt;= 4) === org\n  val = 'H'\nend\n</code></pre>\n\n<p>Which is not what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1500537951, "last_edit_date": 1500537951, "creation_date": 1500485528, "answer_id": 45197355, "question_id": 45196405, "link": "https://stackoverflow.com/questions/45196405/unexpected-case-behaviour-in-ruby/45197355#45197355", "title": "Unexpected case behaviour in Ruby", "body": "<p>As an alternative, you could write:</p>\n\n<pre><code>letters = %w(L L M M H)\nval = letters[org.clamp(0,4)]\n</code></pre>\n\n<p>It uses <a href=\"https://ruby-doc.org/core-2.4.0/Comparable.html#method-i-clamp\" rel=\"nofollow noreferrer\"><code>Comparable#clamp</code></a>, which comes with Ruby 2.4.</p>\n\n<p>For Ruby 2.3 and older, you can use :</p>\n\n<pre><code>val = letters[[0, org, 4].sort[1]]\n</code></pre>\n\n<p>This way, it's fine if <code>org</code> is smaller than <code>0</code> or larger than <code>4</code>.</p>\n"}], "owner": {"reputation": 219, "user_id": 3231224, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/42485bc80d9ecb7750c701effe3ef609?s=128&d=identicon&r=PG", "display_name": "S.ork", "link": "https://stackoverflow.com/users/3231224/s-ork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 45196466, "answer_count": 2, "score": 5, "last_activity_date": 1500537951, "creation_date": 1500482584, "question_id": 45196405, "link": "https://stackoverflow.com/questions/45196405/unexpected-case-behaviour-in-ruby", "title": "Unexpected case behaviour in Ruby", "body": "<p>I got a wrong value in a very simple piece (as I thought) of code:</p>\n\n<pre><code>org = 4\ncase org\nwhen org &lt;= 1\n  val = 'L'\nwhen 2..3\n  val = 'M'\nwhen org &gt;= 4\n  val = 'H'\nend\n\nputs val\n=&gt; nil\n</code></pre>\n\n<p>Please, don't be angry, I expect that I missed something very obvious, but I really can't figure it out.\nThanks.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 4, "creation_date": 1500481811, "post_id": 45196062, "comment_id": 77359710, "body": "stackoverflow is specifically for technical problems (bugs, code that isn&#39;t doing what it&#39;s supposed to, etc). If you&#39;re looking for opinions on the best way to organize your code, you should try the <a href=\"https://codereview.stackexchange.com/\">codereview stackexchange</a>"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1500482385, "post_id": 45196062, "comment_id": 77360046, "body": "that being said, it looks like you&#39;re on the right track. Trying to make a different function for each type of object which contains a <code>one_call_center</code> doesn&#39;t scale."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1500482589, "creation_date": 1500482589, "answer_id": 45196407, "question_id": 45196062, "link": "https://stackoverflow.com/questions/45196062/combining-two-methods-into-one/45196407#45196407", "title": "Combining two methods into one", "body": "<p>The primary difference between these two methods seems to be this one part:</p>\n\n<pre><code>k['code'] == code\nk['code'] == ticket_response.code\n</code></pre>\n\n<p>So in other words you either compare to the argument directly, or the <code>code</code> method called on the argument. Address that problem by making the argument adaptive:</p>\n\n<pre><code>def to_description(code)\n  code = code.code if (code.respond_to?(:code))\n  # ... Rest of code presuming `code` is the thing to compare against.\nend\n</code></pre>\n\n<p>This eliminates the difference between the two.</p>\n\n<p>I'd strongly encourage you to revisit the names used in your code here s they are unreasonably verbose.</p>\n"}], "owner": {"reputation": 29, "user_id": 8333007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2540c32b172abf1b6422f3471d9bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Garbin", "link": "https://stackoverflow.com/users/8333007/artem-garbin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45196407, "answer_count": 1, "score": -4, "last_activity_date": 1500482589, "creation_date": 1500481444, "question_id": 45196062, "link": "https://stackoverflow.com/questions/45196062/combining-two-methods-into-one", "title": "Combining two methods into one", "body": "<p>I have two methods.</p>\n\n<pre><code>def response_code_description(code)\n  @response_code_description ||= current_account.one_call_center.response_codes_repository_class.new.to_api_collection\n  @response_code_description.find {|k| k['code'] == code}.try(:[], 'description')\nend\n\ndef ticket_response_code_with_description(ticket_response)\n  @ticket_response_code_with_description ||= ticket_response.ticket.one_call_center.response_codes_repository_class.new.to_api_collection\n  @ticket_response_code_with_description.find { |k| k['code'] == ticket_response.code }.try(:[], 'description')\n end\n</code></pre>\n\n<p>I think I can combine them.\nSo.</p>\n\n<pre><code>def response_code_with_description(one_call_center, code)\n  @ticket_response_code_with_description ||= one_call_center.response_codes_repository_class.new.to_api_collection\n  @ticket_response_code_with_description.find { |k| k['code'] == code }.try(:[], 'description')\n end\n</code></pre>\n\n<p>and call this method so</p>\n\n<pre><code> response_code_with_description(current_account.one_call_center, ticket_response.code)\n response_code_with_description(ticket_response.ticket.one_call_center, code)\n</code></pre>\n\n<p>what do you think?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1500481948, "post_id": 45196048, "comment_id": 77359778, "body": "I am using codewars so it is automatic."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1500481959, "post_id": 45196048, "comment_id": 77359791, "body": "<a href=\"https://www.codewars.com/kata/all-star-code-challenge-number-13/train/ruby\" rel=\"nofollow noreferrer\">codewars.com/kata/all-star-code-challenge-number-13/train/ru&zwnj;&#8203;by</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1500524899, "post_id": 45196048, "comment_id": 77376789, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500482158, "post_id": 45196228, "comment_id": 77359906, "body": "Thank you for your reply and advice. Unfortunately one of the tests are still failing."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500482192, "post_id": 45196228, "comment_id": 77359920, "body": "@Benjamints Which test?"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500482327, "post_id": 45196228, "comment_id": 77360017, "body": "Expected: &#39;efay&#39; - Expected: &quot;efay&quot;, instead got: &quot;ef&quot;"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500482702, "post_id": 45196228, "comment_id": 77360236, "body": "@Benjamints That&#39;s odd, it should output <code>efayay</code>, check it in action <a href=\"https://repl.it/J9Jo\" rel=\"nofollow noreferrer\">here</a>. And the output <code>efay</code> doesn&#39;t match the initial conditions (i.e. _3. Then add &quot;ay&quot;)."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500483105, "post_id": 45196228, "comment_id": 77360514, "body": "I know it is strange. I have been using repl.it all day and it was working just fine on that."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500483127, "post_id": 45196228, "comment_id": 77360528, "body": "However, sebastian&#39;s code below passed for codewars. Still trying to understand why."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500483155, "post_id": 45196228, "comment_id": 77360546, "body": "Thank you very much for your time though."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500483607, "post_id": 45196228, "comment_id": 77360819, "body": "@Benjamints I see my error now: The provided word was not <code>efay</code> (as i understood), it was <code>ef</code> and should output <code>efay</code>; so when checking <code>word.size &lt;= 2</code> the word <code>ef</code> is <code>= 2</code>, so it just returned it without any processing. Sebastian did noticed that problem and fixed to be <code>word.size &lt; 2</code>."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500484791, "post_id": 45196228, "comment_id": 77361523, "body": "Ahh okay. Thanks!"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 2, "last_activity_date": 1500482172, "last_edit_date": 1500482172, "creation_date": 1500482010, "answer_id": 45196228, "question_id": 45196048, "link": "https://stackoverflow.com/questions/45196048/start-with-method-not-recognizing-substring-a/45196228#45196228", "title": ".start_with? method not recognizing substring &#39;a&#39;", "body": "<p>Your code fails because it doesn't really evaluates if the word begins with a constant, you are only checking it but doing nothing about it, its just an isolated line:</p>\n\n<pre><code>!word.start_with?('a', 'e', 'i', 'o', 'u')\n</code></pre>\n\n<p>Try including that line <strong>inside</strong> an <code>if</code> condition, like this:</p>\n\n<pre><code>def translate(word)\n  if word.size &lt;= 2\n    word\n  else\n    if !word.start_with?('a', 'e', 'i', 'o', 'u')\n      x = word.reverse.chop.reverse\n      x.insert(-1, word[0])\n      x &lt;&lt; \"ay\"\n    else\n      word &lt;&lt; \"ay\"\n    end\n  end\nend\n</code></pre>\n\n<p>Also notice that i removed the <code>if word.size &gt; 2</code>, it is not necessary since you are already checking for <code>word.size &lt;= 2</code>, so anything other than that is <code>&gt; 2</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500483012, "post_id": 45196471, "comment_id": 77360443, "body": "I understand now that I over complicated my method! All my tests have gone green as well so thank you for correcting me Sebastian!"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1500483728, "post_id": 45196471, "comment_id": 77360894, "body": "Good catch in <code>word.size &lt; 2</code>."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1500482794, "creation_date": 1500482794, "answer_id": 45196471, "question_id": 45196048, "link": "https://stackoverflow.com/questions/45196048/start-with-method-not-recognizing-substring-a/45196471#45196471", "title": ".start_with? method not recognizing substring &#39;a&#39;", "body": "<p>If the length of <code>word</code> is greather or equal to 2 return word, if not then do the <code>start_with</code> step, but when would your <code>else</code> statement work?</p>\n\n<p>Try modifying your length validation just to less than 2, then check if the word \"start_with\" a vowel, and return just the word plus <code>ay</code>, and if not the do the first character rotate step then adding the <code>ay</code> part, something like:</p>\n\n<pre><code>def translate(word)\n  if word.size &lt; 2\n    word\n  elsif word.start_with?('a', 'e', 'i', 'o', 'u')\n    word &lt;&lt; \"ay\"\n  else\n    x = word.reverse.chop.reverse\n    x.insert(-1, word[0])\n    x &lt;&lt; \"ay\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 45196471, "answer_count": 2, "score": 3, "last_activity_date": 1500524887, "creation_date": 1500481379, "last_edit_date": 1500524887, "question_id": 45196048, "link": "https://stackoverflow.com/questions/45196048/start-with-method-not-recognizing-substring-a", "title": ".start_with? method not recognizing substring &#39;a&#39;", "body": "<p>I want to translate a string into pig latin. The rules are as following:</p>\n\n<ol>\n<li>Valid words are two or more letters long.</li>\n<li>If a word begins with a consonant (a letter other than <code>'a'</code>, <code>'e'</code>, <code>'i'</code>, <code>'o'</code>, or <code>'u'</code>), then that first letter is shifted to the end of the word.</li>\n<li>Then add <code>'ay'</code>.</li>\n</ol>\n\n<p>I managed to come up with the method:</p>\n\n<pre><code> def translate(word)\n      if word.size &lt;= 2\n         word\n      elsif\n          word.size &gt; 2\n         !word.start_with?('a', 'e', 'i', 'o', 'u')\n          x = word.reverse.chop.reverse\n          x.insert(-1, word[0])\n          x &lt;&lt; \"ay\"\n      else\n          word &lt;&lt; \"ay\"\n      end\n    end\n</code></pre>\n\n<p>However, my test does not pass for certain strings,</p>\n\n<pre><code>Test Passed: Value == \"c\"\nTest Passed: Value == \"pklqfay\"\nTest Passed: Value == \"yykay\"\nTest Passed: Value == \"fqhzcbjay\"\nTest Passed: Value == \"ndnrzzrhgtay\"\nTest Passed: Value == \"dsvjray\"\nTest Passed: Value == \"qnrgdfay\"\nTest Passed: Value == \"npfay\"\nTest Passed: Value == \"ldyuqpewypay\"\nTest Passed: Value == \"arqokudmuxay\"\nTest Passed: Value == \"spvhxay\"\nTest Passed: Value == \"firvmanxay\"\nExpected: 'aeijezpbay' - Expected: \"aeijezpbay\", instead got: \"eijezpbaay\"\nExpected: 'etafhuay' - Expected: \"etafhuay\", instead got: \"tafhueay\"\n</code></pre>\n\n<p>These tests passes:</p>\n\n<pre><code>Test.assert_equals(translate(\"billy\"),\"illybay\",\"Expected: 'illybay'\")\nTest.assert_equals(translate(\"emily\"),\"emilyay\",\"Expected: 'emilyay'\")\n</code></pre>\n\n<p>I am not sure why.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "devise", "token"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1500481267, "post_id": 45195745, "comment_id": 77359406, "body": "The Admin seems to not be signed in. Did you follow the step described in Devise&#39;s doc? <a href=\"https://github.com/plataformatec/devise#configuring-multiple-models\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise#configuring-multiple-models</a>"}, {"owner": {"reputation": 15, "user_id": 5332292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda236fd943ecb4a8d6feab04234ed16?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/5332292/leo"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1500489432, "post_id": 45195745, "comment_id": 77364184, "body": "i follow this <a href=\"https://github.com/plataformatec/devise/wiki/How-to-Setup-Multiple-Devise-User-Models\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>"}], "owner": {"reputation": 15, "user_id": 5332292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda236fd943ecb4a8d6feab04234ed16?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/5332292/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500480436, "creation_date": 1500480436, "question_id": 45195745, "link": "https://stackoverflow.com/questions/45195745/rails-devise-current-admin-nil-when-passing-headers", "title": "Rails Devise current_admin nil when passing headers", "body": "<p>i am currently developing an API with rails api, i'm having some issue with multiple devise user models. I am also utilizing simple_token_authentication\ngem to help generating a token for authentication. </p>\n\n<p>So currently i've created this 2 user model for devise.\n<strong>User</strong> and\n<strong>Admin</strong></p>\n\n<p>my controllers for this 2 devise model is very identical,  this is my database attributes for both user&amp;admin devise, basically my destroy method will reset my token_authentication from my database.</p>\n\n<pre><code>=&gt; [\"id\", \"email\", \"encrypted_password\", \"reset_password_token\", \"reset_password_sent_at\", \"remember_created_at\", \"sign_in_count\", \"current_sign_in_at\", \"last_sign_in_at\", \"current_sign_in_ip\", \"last_sign_in_ip\", \"created_at\", \"updated_at\", \"authentication_token\"]\n</code></pre>\n\n<p>This is a admin account sample entry in database</p>\n\n<pre><code>=&gt; &lt;Admin id: 1, email: \"admin@gmail.com\", created_at: \"2017-07-19 15:05:49\", updated_at: \"2017-07-19 15:05:49\", authentication_token: \"UAUK6JngFVbRr5QYeeFo\"&gt;\n</code></pre>\n\n<p>My problem is now, i keep getting Error with my DELETE #destroy method on my admin controller, but my user controller destroy method is working fine.</p>\n\n<pre><code>{\"status\":500,\"error\":\"Internal Server Error\",\"exception\":\"#\\u003cNoMethodError: undefined method `save' for nil:NilClass\\u003e\",\"traces\":{\"Application Trace\":[{\"id\":0,\"trace\":\"app/controllers/v1/adminsessions_controller.rb:20:in `destroy'\"}],\"Framework Trace\":[{\"id\":1,\"trace\":\"actionpack (5.1.2) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\"},{\"id\":2,\"trace\":\"actionpack (5.1.2) lib/abstract_controller/base.rb:186:in `process_action'\"},\n</code></pre>\n\n<p>Here is both of how my controller looks like</p>\n\n<p>Admin sessions Controller</p>\n\n<pre><code>class V1::AdminsessionsController &lt; ApplicationController\n  def show\n    current_admin ? head(:ok) : head(:unauthorized)\n  end\n\n  def create\n    @admin = Admin.where(email: params[:email]).first\n\n    if @admin&amp;.valid_password?(params[:password])\n      render :create, status: :created\n    else\n      render json: {\n        message: \"Wrong password or email\"\n      }.to_json, status: :unauthorized\n    end\n  end\n\n  def destroy\n    current_admin&amp;.authentication_token = nil\n    if current_admin.save\n      head(:ok)\n    else\n      head(:unauthorized)\n    end\n  end\nend\n</code></pre>\n\n<p>User Sessions Controller</p>\n\n<pre><code>    class V1::SessionsController &lt; ApplicationController\n  def show\n    current_user ? head(:ok) : head(:unauthorized)\n  end\n\n  def create\n    @user = User.where(email: params[:email]).first\n\n    if @user&amp;.valid_password?(params[:password])\n      render :create, status: :created\n    else\n      render json: {\n        message: \"Wrong password or email\"\n      }.to_json, status: :unauthorized\n    end\n  end\n\n  def destroy\n    current_user&amp;.authentication_token = nil\n    if current_user.save\n      head(:ok)\n    else\n      head(:unauthorized)\n    end\n  end\n\n\nend\n</code></pre>\n\n<p>it kept saying undefined method `save' so i went and byebug, i realize current_admin is nil, i can't figure out why it is always nil. i've passed the token and email in the headers. Please help guys. thanks!</p>\n"}, {"tags": ["ruby", "heroku", "sinatra", "rack", "puma"], "answers": [{"comments": [{"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1500484454, "post_id": 45195972, "comment_id": 77361353, "body": "I get &#39;application error&#39; when I do that but it doesnt print out to production log whats wrong"}], "tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": false, "score": 1, "last_activity_date": 1500481098, "creation_date": 1500481098, "answer_id": 45195972, "question_id": 45195708, "link": "https://stackoverflow.com/questions/45195708/how-to-pass-config-file-to-puma-sinatra/45195972#45195972", "title": "How to pass config file to Puma &amp; Sinatra?", "body": "<p>try upcase <code>C</code> and not <code>c</code></p>\n\n<pre><code>bundle exec puma -C puma.rb\n</code></pre>\n\n<p><a href=\"https://github.com/puma/puma#clustered-mode\" rel=\"nofollow noreferrer\">https://github.com/puma/puma#clustered-mode</a></p>\n"}, {"tags": [], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "is_accepted": true, "score": 2, "last_activity_date": 1500485336, "creation_date": 1500485336, "answer_id": 45197288, "question_id": 45195708, "link": "https://stackoverflow.com/questions/45195708/how-to-pass-config-file-to-puma-sinatra/45197288#45197288", "title": "How to pass config file to Puma &amp; Sinatra?", "body": "<p>I solved the problem as such (the problem was I was missing the rest of the code in <code>puma.rb</code> config)</p>\n\n<p><strong>Procfile</strong></p>\n\n<pre><code>web: bundle exec puma -C puma.rb\n</code></pre>\n\n<p><strong>puma.rb</strong></p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)\nthreads_count = Integer(ENV['THREAD_COUNT'] || 5)\nthreads threads_count, threads_count\n\nrackup      DefaultRackup\nport        ENV['PORT']     || 3000\nenvironment ENV['RACK_ENV'] || 'development'\n</code></pre>\n\n<p><strong>config.ru</strong></p>\n\n<pre><code>require './app'\nrun Sinatra::Application\n</code></pre>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2564, "favorite_count": 1, "accepted_answer_id": 45197288, "answer_count": 2, "score": 1, "last_activity_date": 1500485336, "creation_date": 1500480271, "last_edit_date": 1500480789, "question_id": 45195708, "link": "https://stackoverflow.com/questions/45195708/how-to-pass-config-file-to-puma-sinatra", "title": "How to pass config file to Puma &amp; Sinatra?", "body": "<p>I have a Sinatra app that's deployed to Heroku.</p>\n\n<p>I want to configure Puma via a <code>puma.rb</code> config file to have multiple workers, but both examples from the readme only show how to pass a 'server name' to the <code>Procfile</code>, but it doesn't show how to pass a config:</p>\n\n<p><strong>Method 1</strong></p>\n\n<pre><code>bundle exec ruby app.rb -s puma\n</code></pre>\n\n<p><strong>Method 2</strong></p>\n\n<pre><code>require 'sinatra'\nconfigure { set :server, :puma }\n</code></pre>\n\n<p>There's all the methods listed here which all suffer the same problem: <a href=\"https://github.com/puma/puma/issues/13#issuecomment-7391148\" rel=\"nofollow noreferrer\">https://github.com/puma/puma/issues/13#issuecomment-7391148</a></p>\n\n<hr>\n\n<p>I have my configuration here in <code>puma.rb</code>:</p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)\nthreads_count = Integer(ENV['THREAD_COUNT'] || 5)\n\nthreads threads_count, threads_count\n</code></pre>\n\n<p>Here's my <code>config.ru</code> if that helps:</p>\n\n<pre><code>require './app'\nrun Sinatra::Application\n</code></pre>\n\n<p>I actually tried doing this instead in <code>Procfile</code>:</p>\n\n<pre><code>bundle exec puma -c puma.rb\n</code></pre>\n\n<p>Which works perfect locally but then dies in production, but no logs are generated so I have no idea what's wrong.</p>\n"}, {"tags": ["ruby", "graphql"], "comments": [{"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "edited": false, "score": 0, "creation_date": 1517097767, "post_id": 45195216, "comment_id": 83956659, "body": "any update on how you eventually accomplished this?"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "edited": false, "score": 1, "creation_date": 1517427054, "post_id": 45195216, "comment_id": 84096037, "body": "@maverick5 as shown above, verifying in the resolver; as it is more or less the way to go (see his comment below). You can pass your current user in the context (see the <code>execute</code> method here <a href=\"https://gist.github.com/benbonnet/5c8b90eaabf2a3cbf71a6c7f910bade0\" rel=\"nofollow noreferrer\">gist.github.com/benbonnet/5c8b90eaabf2a3cbf71a6c7f910bade0</a>). That said, I ended up going into postgraphql (postgraphile) for those needs; a huge time-saver that dramatically reduces your graphql code boilerplate, and a real enlightment about many things rails &quot;hides&quot; due to its nature"}], "answers": [{"tags": [], "owner": {"reputation": 3245, "user_id": 856873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjmhP.jpg?s=128&g=1", "display_name": "Baer", "link": "https://stackoverflow.com/users/856873/baer"}, "is_accepted": true, "score": 1, "last_activity_date": 1500482749, "creation_date": 1500482749, "answer_id": 45196457, "question_id": 45195216, "link": "https://stackoverflow.com/questions/45195216/authorizations-on-graphql-ruby-mutations/45196457#45196457", "title": "Authorizations on GraphQL ruby mutations", "body": "<p>As of the time of this writing, the GraphQL spec does not define anything having to do with authz/authn. Generally speaking, people put their GraphQL layer behind a gateway of some sort and pass the auth token in with the query. How to do this will depend on your implementation. In the JavaScript GraphQL server, there is a \"context\" that will is passed to all resolvers.</p>\n\n<p>In other words, securing queries and mutations at the resolver level is currently the best practice in GraphQL.</p>\n\n<p>Specific to Ruby, however, it does look like there is a paid version of the software that has some nice auth features built in.</p>\n\n<p><a href=\"http://graphql-ruby.org/pro/authorization\" rel=\"nofollow noreferrer\">http://graphql-ruby.org/pro/authorization</a></p>\n"}], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 45196457, "answer_count": 1, "score": 1, "last_activity_date": 1500482749, "creation_date": 1500478747, "last_edit_date": 1500479412, "question_id": 45195216, "link": "https://stackoverflow.com/questions/45195216/authorizations-on-graphql-ruby-mutations", "title": "Authorizations on GraphQL ruby mutations", "body": "<p>Still quite new to GraphQL,</p>\n\n<p>The idea is to 'secure' mutations, meaning restricting those to the current user passed in the context. Basic one :</p>\n\n<pre><code>Create = GraphQL::Relay::Mutation.define do\n\n    name \"AddItem\"\n\n    input_field :title, !types.String\n    return_field :item, Types::ItemType\n    return_field :errors, types[types.String]\n\n    resolve -&gt; (object, inputs, ctx) {\n      if ctx[:current_user]\n        ... do the stuff...\n      else\n         ...returns an error...\n      end\n    }\nend\n</code></pre>\n\n<p>Let's say for one having multiple mutations\u2026 this very same conditions would have to be repeated everytime needed.</p>\n\n<p>I'm obviously biased by <code>before_action</code> available in rails; is there something similar available in graphql-ruby ? (like, <em>'protected mutations'</em>, in any case looking to selectively protect specific parts of the available output, in a centralized setup)</p>\n\n<p>Or should the approach be completely different ?</p>\n"}, {"tags": ["ruby", "cucumber", "visual-studio-code", "gherkin"], "answers": [{"comments": [{"owner": {"reputation": 2375, "user_id": 8271318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6mkLkp9IpPc/AAAAAAAAAAI/AAAAAAAAAvA/nJCyxctBOnQ/photo.jpg?sz=128", "display_name": "Daniel Fintinariu", "link": "https://stackoverflow.com/users/8271318/daniel-fintinariu"}, "reply_to_user": {"reputation": 2048, "user_id": 2310411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JrQvD.jpg?s=128&g=1", "display_name": "Vignesh Paramasivam", "link": "https://stackoverflow.com/users/2310411/vignesh-paramasivam"}, "edited": false, "score": 1, "creation_date": 1500904821, "post_id": 45281180, "comment_id": 77527676, "body": "Do you see the warning <code>[cucumberautocomplete] was unable to find step for ...</code> while hovering over a step in the feature files? If that is the case, then I think the path must be specified in a different way."}, {"owner": {"reputation": 1894, "user_id": 1284914, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3f42257d127b717e4cfdbf40941f66de?s=128&d=identicon&r=PG", "display_name": "theog", "link": "https://stackoverflow.com/users/1284914/theog"}, "edited": false, "score": 0, "creation_date": 1515720255, "post_id": 45281180, "comment_id": 83418521, "body": "The above did not work for me. I have [cucumberautocomplete] was unable to find step for ... error on every line. I confirmed the folders are correct."}, {"owner": {"reputation": 4062, "user_id": 316729, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9249736dae1898d537770886061c06f9?s=128&d=identicon&r=PG", "display_name": "Sam Joseph", "link": "https://stackoverflow.com/users/316729/sam-joseph"}, "edited": false, "score": 2, "creation_date": 1520853586, "post_id": 45281180, "comment_id": 85470911, "body": "sort of partially works for me - some step definitions correctly navigated to - others not ... :-/"}, {"owner": {"reputation": 3521, "user_id": 4300608, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YSsa5.png?s=128&g=1", "display_name": "ViqMontana", "link": "https://stackoverflow.com/users/4300608/viqmontana"}, "edited": false, "score": 1, "creation_date": 1530609032, "post_id": 45281180, "comment_id": 89284900, "body": "I have many steps all over the place in my test folder, so would recommend using something like <code>&quot;cucumberautocomplete.steps&quot;: [         &quot;test&#47;**&#47;*.steps.ts&quot;     ]</code> to include all step files."}, {"owner": {"reputation": 66, "user_id": 1102728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bac1e0f5445c8d92cf844b83edb3748?s=128&d=identicon&r=PG", "display_name": "HakunaM", "link": "https://stackoverflow.com/users/1102728/hakunam"}, "edited": false, "score": 0, "creation_date": 1549399176, "post_id": 45281180, "comment_id": 95886451, "body": "Thanks so much, this helped a lot!"}, {"owner": {"reputation": 2039, "user_id": 2303693, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/487bcf3f579431d32b06aebf66e3c39d?s=128&d=identicon&r=PG", "display_name": "SMPH", "link": "https://stackoverflow.com/users/2303693/smph"}, "edited": false, "score": 0, "creation_date": 1579084644, "post_id": 45281180, "comment_id": 105645803, "body": "Had to add <code>**&#47;</code> at the beginning of the path as the add-on installed in user profile path"}, {"owner": {"reputation": 523, "user_id": 7012085, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/84f538cd4a6483f4e700fea448fc3d3f?s=128&d=identicon&r=PG&f=1", "display_name": "chick3n0x07CC", "link": "https://stackoverflow.com/users/7012085/chick3n0x07cc"}, "edited": false, "score": 2, "creation_date": 1588672457, "post_id": 45281180, "comment_id": 108981632, "body": "I had some problems with the paths of features and steps. The reason was that I was skipping the creation of a <code>.vscode&#47;</code> folder mentioned in the extension docs. Just in case this can help someone like it did for me: <a href=\"https://stackoverflow.com/a/61610271/7012085\">stackoverflow.com/a/61610271/7012085</a>"}, {"owner": {"reputation": 808, "user_id": 4197679, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oUQG0.jpg?s=128&g=1", "display_name": "Ashok kumar Ganesan", "link": "https://stackoverflow.com/users/4197679/ashok-kumar-ganesan"}, "edited": false, "score": 0, "creation_date": 1591611437, "post_id": 45281180, "comment_id": 110111589, "body": "How to create steps automatically?"}, {"owner": {"reputation": 451, "user_id": 9892120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c810b8434bd19c3d18aaacafaef5738?s=128&d=identicon&r=PG&f=1", "display_name": "koushick", "link": "https://stackoverflow.com/users/9892120/koushick"}, "edited": false, "score": 0, "creation_date": 1598805605, "post_id": 45281180, "comment_id": 112571020, "body": "Awesome! Thanks! , i was facing same problem. Thanks for the Solution"}, {"owner": {"reputation": 680, "user_id": 2464815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c891f43027f1269de0c547c69abfdb?s=128&d=identicon&r=PG", "display_name": "Sasha Bond", "link": "https://stackoverflow.com/users/2464815/sasha-bond"}, "edited": false, "score": 1, "creation_date": 1600379353, "post_id": 45281180, "comment_id": 113077986, "body": "i set up my feature files to be inside cypress/integration/, say cypress/integration/google.feature - having that js file would be in cypress/integration/google/google.js  and vscode setting for navigation is:  &quot;cucumberautocomplete.steps&quot;: [         &quot;cypress/integration/**/*.js&quot;,          ],"}, {"owner": {"reputation": 68, "user_id": 2955080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f441248dfb60e946f9fab5f4127a6f2a?s=128&d=identicon&r=PG&f=1", "display_name": "ReubenTellis", "link": "https://stackoverflow.com/users/2955080/reubentellis"}, "edited": false, "score": 0, "creation_date": 1610591220, "post_id": 45281180, "comment_id": 116184448, "body": "how do you detect nested steps in vscode? I have some steps being called inside other step definitions. Eg <code>And(&#47;^I&#39;ve a step inside the step definition$&#47;) do   step &#39;I am calling this step&#39; end</code>"}], "tags": [], "owner": {"reputation": 2375, "user_id": 8271318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6mkLkp9IpPc/AAAAAAAAAAI/AAAAAAAAAvA/nJCyxctBOnQ/photo.jpg?sz=128", "display_name": "Daniel Fintinariu", "link": "https://stackoverflow.com/users/8271318/daniel-fintinariu"}, "is_accepted": true, "score": 27, "last_activity_date": 1504387325, "last_edit_date": 1504387325, "creation_date": 1500900767, "answer_id": 45281180, "question_id": 45194685, "link": "https://stackoverflow.com/questions/45194685/is-it-possible-to-navigate-from-feature-file-to-step-definition-in-vscode/45281180#45281180", "title": "Is it possible to navigate from feature file to step definition in VSCode", "body": "<p>You can install <a href=\"https://marketplace.visualstudio.com/items?itemName=alexkrechik.cucumberautocomplete\" rel=\"noreferrer\"><strong>Cucumber Full Language Support</strong></a> extension from the VSCode Marketplace:</p>\n\n<p>After install is finished, reload VSCode.\nNow in order to make it work for Ruby, you need to:</p>\n\n<ul>\n<li>Press <code>Ctrl + ,</code> to open <em>User Settings</em></li>\n<li>Scroll down to <em>Cucumber Auto Complete</em></li>\n<li><p>On the right side you need to modify these settings (you can find 2 examples of how to do this on the extension page). In my case, I added the following:</p>\n\n<pre><code>\"cucumberautocomplete.steps\": [\n    \"features/step_definitions/*.rb\"\n],\n\"cucumberautocomplete.syncfeatures\": \"features/*feature\"\n</code></pre></li>\n<li><p>Reload <em>VSCode</em></p></li>\n<li>Open a <code>.feature</code> file and right click any step, you should have <strong><em>Go To Definition</em></strong> and <strong><em>Peek Definition</em></strong> working.</li>\n</ul>\n\n<p>Hope you get it working!</p>\n"}], "owner": {"reputation": 2048, "user_id": 2310411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JrQvD.jpg?s=128&g=1", "display_name": "Vignesh Paramasivam", "link": "https://stackoverflow.com/users/2310411/vignesh-paramasivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12948, "favorite_count": 6, "accepted_answer_id": 45281180, "answer_count": 1, "score": 16, "last_activity_date": 1553593056, "creation_date": 1500477315, "last_edit_date": 1500909253, "question_id": 45194685, "link": "https://stackoverflow.com/questions/45194685/is-it-possible-to-navigate-from-feature-file-to-step-definition-in-vscode", "title": "Is it possible to navigate from feature file to step definition in VSCode", "body": "<p>I am primarily using RubyMine for Cucumber/Ruby, and now, I'm getting my hands on VSCode, with which I'm able to run and debug test cases. </p>\n\n<p>I can't find a way to navigate from feature to step definition. I tried searching for extensions and <em>cucumber-step-mapper</em> doesn't help.</p>\n\n<p>Is there any config which enables navigation from feature to step definition?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500476148, "post_id": 45194176, "comment_id": 77355770, "body": "Update the question with full form code and schema"}, {"owner": {"reputation": 123, "user_id": 3735223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Jcn2o.jpg?s=128&g=1", "display_name": "AlexQuezada", "link": "https://stackoverflow.com/users/3735223/alexquezada"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500477852, "post_id": 45194176, "comment_id": 77357135, "body": "I solved it, so damm easy that I never though something like even exists: f.object.impresa"}], "owner": {"reputation": 123, "user_id": 3735223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Jcn2o.jpg?s=128&g=1", "display_name": "AlexQuezada", "link": "https://stackoverflow.com/users/3735223/alexquezada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500476654, "creation_date": 1500475942, "last_edit_date": 1500476654, "question_id": 45194176, "link": "https://stackoverflow.com/questions/45194176/how-can-i-access-to-nested-fields-attributes-using-nested-forms-gem", "title": "How can I access to nested fields attributes using nested_forms gem", "body": "<p>I am using nested_forms  gem in my project, nested_forms uses a partial view to render the line with my nested object attributes, here is my partial view code:</p>\n\n<pre><code>&lt;tr class=\"fields\"&gt;\n&lt;td&gt;\n    &lt;%= f.text_field :nombre, class: 'form-control craf' %&gt;\n&lt;/td&gt;\n&lt;td&gt;\n    &lt;% \n        concat f.select :idtipodocumento, CrTipoDocumento.all.collect {|p| [ p.nombre, p.id ] }, {prompt: 'Seleccione el tipo de documento'}, :class=&gt;'form-control'\n    %&gt;\n&lt;/td&gt;\n&lt;td&gt;\n    &lt;%= f.text_field :documento, class: 'form-control', maxlength: '50' %&gt;\n&lt;/td&gt;\n&lt;% if current_user.email.include? '@cifco.gob.sv' %&gt;\n&lt;td&gt;\n    &lt;%= f.check_box :activo %&gt;\n&lt;/td&gt;\n&lt;td&gt;\n    &lt;%= f.check_box :impresa %&gt;\n&lt;/td&gt;\n&lt;td&gt;\n    &lt;%= f.check_box :extra %&gt;\n&lt;/td&gt;\n&lt;% end %&gt;\n&lt;td&gt;\n    &lt;%= f.link_to_remove raw('&lt;i class=\"fa fa-minus-circle\" aria-hidden=\"true\"&gt;&lt;/i&gt;'), :class =&gt;'btn btn-danger hidden-print' %&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p></p>\n\n<p>And here is the code block of the view where this partial is rendering:</p>\n\n<pre><code>        &lt;tbody&gt;\n            &lt;fieldset id=\"acreditados\"&gt;\n              &lt;%= f.fields_for :cr_acreditados, :wrapper =&gt; false %&gt;\n            &lt;/fieldset&gt;\n        &lt;/tbody&gt;\n</code></pre>\n\n<p>So, what I want to do is evaluate if 'impresa' == false and only then render it, but if try f.impresa it says the method 'impresa' doesnt exist for f</p>\n\n<p>Here is the form full code:</p>\n\n<pre><code>  &lt;%= nested_form_for(@cr_acreditacion_cliente, :validate =&gt; true) do |f| %&gt;\n\n    &lt;% if @cr_acreditacion_cliente.acreditaciones == nil %&gt;\n    &lt;% else %&gt;\n      &lt;table class=\"table table-striped table-bordered table-hover\" id=\"AC\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;Evento&lt;/th&gt;\n            &lt;th&gt;Cliente&lt;/th&gt;\n            &lt;th&gt;Stand&lt;/th&gt;\n            &lt;th&gt;Acreditaciones&lt;/th&gt;\n            &lt;th&gt;Acreditaciones Disponibles&lt;/th&gt;\n            &lt;th&gt;Tipo de Acreditacion&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n\n        &lt;tbody&gt;\n          &lt;td&gt;&lt;%= @cr_acreditacion_cliente.cr_evento.nombre %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= @cr_acreditacion_cliente.cr_cliente.nombre %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= @cr_acreditacion_cliente.cr_stand.codigo %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= @cr_acreditacion_cliente.acreditaciones %&gt;&lt;/td&gt;\n          &lt;td&gt;\n            &lt;p hidden id=\"cnt\"&gt;&lt;%= @cr_acreditacion_cliente.acreditaciones %&gt;&lt;/p&gt;\n            &lt;p id=\"acd\"&gt;\n              &lt;%= @counter = @cr_acreditacion_cliente.acreditaciones - @cr_acreditacion_cliente.cr_acreditados.count %&gt;\n            &lt;/p&gt;\n          &lt;/td&gt;\n          &lt;td&gt;&lt;%= @cr_acreditacion_cliente.cr_tipocre.tipo %&gt;&lt;/td&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n\n\n      &lt;table class=\"table table-striped table-bordered table-hover\" id=\"DAC\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;Nombre&lt;/th&gt;\n            &lt;th&gt;Tipo de Documento&lt;/th&gt;\n            &lt;th&gt;Documento&lt;/th&gt;\n            &lt;% if current_user.email.include? '@cifco.gob.sv' %&gt;\n              &lt;th&gt;Activo&lt;/th&gt;\n              &lt;th&gt;Impresa&lt;/th&gt;\n              &lt;th&gt;Extra&lt;/th&gt;\n            &lt;% end %&gt;\n            &lt;th class=\"hidden-print\"&gt;Acciones&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n\n        &lt;tbody&gt;\n            &lt;fieldset id=\"acreditados\"&gt;\n              &lt;%= f.fields_for :cr_acreditados, :wrapper =&gt; false %&gt;\n            &lt;/fieldset&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n\n      &lt;div id=\"addBtn\"&gt;\n        &lt;% if @counter &gt;= 1 %&gt;\n          &lt;p&gt;&lt;%= f.link_to_add raw('&lt;i class=\"fa fa-plus-circle\" aria-hidden=\"true\"&gt;&lt;/i&gt;'), :cr_acreditados, id: 'btna', :class =&gt; 'btn btn-primary lta hidden-print', \"data-target\" =&gt; \"#DAC\" %&gt;&lt;/p&gt;\n        &lt;% else %&gt;\n          &lt;p class=\"text-center\"&gt;&lt;h3&gt;No dispone de mas acreditaciones&lt;/h3&gt;&lt;/p&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;div class=\"actions text-center\"&gt;\n      &lt;%= f.submit \"Guardar Credenciales\", :class =&gt; 'btn btn-success hidden-print', data: { confirm: 'Favor verifique los datos antes de almacenarlos' }%&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth", "saml"], "answers": [{"tags": [], "owner": {"reputation": 684, "user_id": 2755649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07949fed3b1168425027bb9423c665ff?s=128&d=identicon&r=PG", "display_name": "waratuman", "link": "https://stackoverflow.com/users/2755649/waratuman"}, "is_accepted": false, "score": 1, "last_activity_date": 1520103363, "creation_date": 1520103363, "answer_id": 49087979, "question_id": 45193627, "link": "https://stackoverflow.com/questions/45193627/no-providerid-parameter-given-in-shibboleth-sso-authentication-request-from-te/49087979#49087979", "title": "&quot;No providerId parameter given in Shibboleth SSO authentication request&quot; from TestShib with ruby-saml", "body": "<p>So this took forever to figure out. Essentially I tracked down all the docs (<a href=\"https://wiki.shibboleth.net/confluence/display/IDP30/UnsolicitedSSOConfiguration\" rel=\"nofollow noreferrer\">https://wiki.shibboleth.net/confluence/display/IDP30/UnsolicitedSSOConfiguration</a>) and looked on a few email list. What you are missing is part of the redirect query. It usually looks something like this:</p>\n\n<pre><code>https://idp.testshib.org/idp/profile/Shibboleth/SSO?SAMLRequest=rVbZjqraFv0Vk3rwoWLRSGt2VbJoRFAoEGn05YZmgSh9I8rXX7T2rlTt3HPOPslNgLDmms1Ycwxm%2BNF4WVouQNce8y2sOti0E9A0sG6TIueLvOkyWJuwviQBtLab1%2BmxbcsFgtAsOidRwnvJ47o4vyQF4o0pYN4mgdcWNXJP2yARDsN5RPkzCoXUjAiZYOZBhp6xDO7hlBdQvg8RL2imE2EsnOTevepHjWYskoTlSztuNMfEfynq%2BG5AyrqIkhQi5mj0ixS2R8Q036cTWXid%2FgfHGRYPCXZGs%2BxYEGXImc8Q1AwlUHKOURTlz4PRtWk6KOdN6%2BXt6xRHMWaGzsdrhzELnFwQ2GE6sWHdPMDgL%2Bh0cs3SvFncD%2FU67ep8UXhN0ixyL4PNog0WJlA3i9Fx4f1q3deQ8u9jxgO1RVCk07cfd%2B%2FFA1399v9vdAZbL%2FRa7wfytc6PsFmYSTz2vqvhT9Rh80l03%2Fcv%2FfzRfRxFUQRlkdEnbJL4afoZC0M5j4rHkvfyIh%2BxpcnwYFMdCSrCCUjjok7aY%2FYXiTEEQ%2B%2BJZ%2FAazAKMyJ%2BmyHdof5wIJX4hnGVFDZ%2Fqxps1Rw8nqZ8ptzCCNcwDOLG28uv06c9U8wjd1V7eREWdNd%2BX%2FwjrW%2BNgfoFpUcJw1vw63U9of57wfzTs7QcMFnIepF2TXKB2F1rpBbCZ6DWMkusmaUa1P4Uw8rq0nTyU%2BXhOwmZyvV%2FJJAt%2FCRcG%2F4op5Cv435YfvRKSePyU%2FyWLI0tP37j7yGJ7aQfffN5ruVMeZwxtiih%2BHALOu5FzYEUEurvN5VgPhk0Vn4ud%2BPpA9DX4YfhUwsfyNyl%2FSu8jwpL2MUkjc9fM3RKLKHGX09aOZXmS3wXVcy2bO9pAXS6Iap2rDrVZHjz5ue1xpmSYTDEdWVxqYd4RxlElt32L6VTGz0%2BRTtC2uVkbMdyfcQQO%2FiWudzxOgURyFBe7WcQh0s6I05nVHCN1YdDcYmV6HWosuQGcIj%2F18VpQZNYzLvPoGFMAXXXbqvZrN0LtQD7vQmoXr1iJVZYKonr6VTzIbteZZMdG7np9q8qodXcWajIxq6YuchouzwGWEx2tVHvdw5PkiCEszdnDDkOWfCojzloMD41mn4kW4gi%2BJYtVD07qXMHI1aHsd%2F5%2BYDeRRq1v6ZZ%2FllHc1CkqEchMwp8pfcA02UD3eByoTsi8frb%2BS6%2Fv7V%2FD2ycVLomywji6Phf8fcxG9xkI31RZFsyB58FpHYNe5kA83gLQuPhcHc%2BJxPYoBwx0OdoQ1Wh63tgLtmFIYq9gwSBuVHCWAGaJPBi3UPEqDPdYzeZAoXJn7Oi52sU%2FiabKgYcf6HvFd5ZlgLPdJksvKke4wk4kVEHt1ZM8aMK%2B19LibiN%2Fs%2FX6l3rcUeVDV73yA1A%2B6sXjlsapBtMLHxjXAjhoeycdfJy4iidgfPipKu%2F8xJWQpX8%2Fu6neY5R1cZCPl0ADhshxBhDiWByf477R8OM7DzYyOSA3rYJ%2BSmLdymPnLiJl8RVsZTkA66Y6bJF3t77qKH0SyVtsLW03mp8LpY%2FE3L8dFO66YtPKMvd4KIVicHWuWvS%2BucVcxG5ORYqY3ZXul5mmHND1yS1BrUBCj3NOqsvj4Ah0xaxXQxQkz0tSKqB%2Bs6juQjmSldjpRlAPwU1IV%2FZ%2BGXT8jQA8ZSFHWwfMBvDPfWYIZr8MzrfW57j1LuHXbVMMkdG6zC12SoVhpRAXElNmjvFpX5E%2Bm5wk%2BG7N4d5sWYplx3NG7fWm1gpN6VrV505o8RGjV1bA4umNLuGAGVSxZ89W5514iyYNszTryr2RiGOpV9X31EOJvFOxLYEz0HZgxdz06xz1R%2Bo4AKSTJXDvKofe%2BQ2F2HA4bqustrpTYZDD825F2yh9QCU54dPjZQDRnc%2BVqYqSAJz4733Vh%2B9WFbndqGRjhagAlXizkkzZnwsj34JhAUDc9Q%2FsxCW4XIRYwbXOgAeBJMAz7W9VlaaqWAijYNtzYTRnrBjNZNNymF0dO4aj7wgG898vVSR1V%2Ffc0s%2Fp%2B8Zfque9uxGP%2BEqPOgV6g8hvrJV7SVvIHHzcDxo4pouu20E6HBMpjny0EFaHpjtBcXtaLyXHrJGMcZYktBpaRjohEE7hka6y8rk%2FJYrKYmJWqBuFLDcVla4pXtHzuGyIrK7qK2Zbz1pCWUJMWHRN81q5MRr5lriHXhMVWpN71E82zfwmtKTeZ1Z3tXd2viF0y1kvyz1txrZgryFydMeGBZIUD%2FoKQMOihEaUIqBuSTjKRzS9wi7ld687WDaTL7UUnqhbtPbOMhKlvcUQGGW8fgyr3wfQp%2FFjRCFfh9e34fb28ev1%2FX%2F77b8%3D\n</code></pre>\n\n<p>What is missing is part of the query string in the params. The method you are using is SAML 1.x. Simple include your providerId, shire, and target as part of the redirect URL. The result should look something like this:</p>\n\n<p><a href=\"https://idp.testshib.org/idp/profile/Shibboleth/SSO?SAMLRequest=xxx&amp;providerId=xxx&amp;shire=xxx&amp;target=xxx\" rel=\"nofollow noreferrer\">https://idp.testshib.org/idp/profile/Shibboleth/SSO?SAMLRequest=xxx&amp;providerId=xxx&amp;shire=xxx&amp;target=xxx</a></p>\n\n<p>Alternately you could use the SAML 2 endpoint <code>https://idp.testshib.org/idp/profile/SAML2/Redirect/SSO</code> which requires less of these parameters.</p>\n"}], "owner": {"reputation": 552, "user_id": 1941519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c056e7677c157248af7f91a2c118a7d?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1941519/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520103363, "creation_date": 1500474522, "question_id": 45193627, "link": "https://stackoverflow.com/questions/45193627/no-providerid-parameter-given-in-shibboleth-sso-authentication-request-from-te", "title": "&quot;No providerId parameter given in Shibboleth SSO authentication request&quot; from TestShib with ruby-saml", "body": "<p>I am trying to implement OmniAuth SSO-only authentication in a Rails 5 app with Devise. I am trying to use TestShib to test before using our organisations in-house IdP.</p>\n\n<p>This is my current configuration in <code>config/initializers/devise.rb</code>:</p>\n\n<pre><code>idp_meta_parser = OneLogin::RubySaml::IdpMetadataParser.new\nidp_meta = idp_meta_parser.parse_remote_to_hash('https://idp.testshib.org/idp/shibboleth')\nconfig.omniauth :saml,\n    issuer: 'https://localhost:3000/shibboleth',\n    **idp_meta\n</code></pre>\n\n<p>When navigating to the auth URL (<code>/users/auth/saml</code>) I'm redirected to an error page on TestShib, and the log says this:</p>\n\n<pre><code>10:01:19.187 - DEBUG [edu.internet2.middleware.shibboleth.idp.profile.IdPProfileHandlerManager:86] - shibboleth.HandlerManager: Looking up profile handler for request path: /Shibboleth/SSO\n10:01:19.188 - DEBUG [edu.internet2.middleware.shibboleth.idp.profile.IdPProfileHandlerManager:97] - shibboleth.HandlerManager: Located profile handler of the following type for the request path: edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler\n10:01:19.188 - DEBUG [edu.internet2.middleware.shibboleth.idp.util.HttpServletHelper:339] - LoginContext key cookie was not present in request\n10:01:19.188 - DEBUG [edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler:152] - Incoming request does not contain a login context, processing as first leg of request\n10:01:19.188 - DEBUG [edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler:218] - Decoding message with decoder binding urn:mace:shibboleth:1.0:profiles:AuthnRequest\n10:01:19.188 - WARN [edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSODecoder:72] - No providerId parameter given in Shibboleth SSO authentication request.\n10:01:19.188 - WARN [edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler:247] - Error decoding Shibboleth SSO request\norg.opensaml.ws.message.decoder.MessageDecodingException: No providerId parameter given in Shibboleth SSO authentication request.\n    at edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSODecoder.doDecode(ShibbolethSSODecoder.java:73) ~[shibboleth-identityprovider-2.4.0.jar:na]\n    at org.opensaml.ws.message.decoder.BaseMessageDecoder.decode(BaseMessageDecoder.java:79) ~[openws-1.5.0.jar:na]\n    at org.opensaml.saml1.binding.decoding.BaseSAML1MessageDecoder.decode(BaseSAML1MessageDecoder.java:109) ~[opensaml-2.6.0.jar:na]\n    at edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler.decodeRequest(ShibbolethSSOProfileHandler.java:240) [shibboleth-identityprovider-2.4.0.jar:na]\n    at edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler.performAuthentication(ShibbolethSSOProfileHandler.java:174) [shibboleth-identityprovider-2.4.0.jar:na]\n    at edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler.processRequest(ShibbolethSSOProfileHandler.java:153) [shibboleth-identityprovider-2.4.0.jar:na]\n    at edu.internet2.middleware.shibboleth.idp.profile.saml1.ShibbolethSSOProfileHandler.processRequest(ShibbolethSSOProfileHandler.java:70) [shibboleth-identityprovider-2.4.0.jar:na]\n    at edu.internet2.middleware.shibboleth.common.profile.ProfileRequestDispatcherServlet.service(ProfileRequestDispatcherServlet.java:83) [shibboleth-common-1.4.0.jar:na]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) [servlet-api.jar:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.36]\n    at edu.internet2.middleware.shibboleth.idp.util.NoCacheFilter.doFilter(NoCacheFilter.java:50) [shibboleth-identityprovider-2.4.0.jar:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.36]\n    at edu.internet2.middleware.shibboleth.idp.session.IdPSessionFilter.doFilter(IdPSessionFilter.java:87) [shibboleth-identityprovider-2.4.0.jar:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.36]\n    at edu.internet2.middleware.shibboleth.common.log.SLF4JMDCCleanupFilter.doFilter(SLF4JMDCCleanupFilter.java:52) [shibboleth-common-1.4.0.jar:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [catalina.jar:6.0.36]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [catalina.jar:6.0.36]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) [catalina.jar:6.0.36]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [catalina.jar:6.0.36]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) [catalina.jar:6.0.36]\n    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190) [tomcat-coyote.jar:6.0.36]\n    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:311) [tomcat-coyote.jar:6.0.36]\n    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776) [tomcat-coyote.jar:6.0.36]\n    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705) [tomcat-coyote.jar:6.0.36]\n    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898) [tomcat-coyote.jar:6.0.36]\n    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690) [tomcat-coyote.jar:6.0.36]\n    at java.lang.Thread.run(Thread.java:745) [na:1.7.0_55]\n</code></pre>\n\n<p>I have found nothing really relevant online, and the only documentation I can find that mentions providerId is <a href=\"https://wiki.shibboleth.net/confluence/display/SHIB2/IdPUnsolicitedSSO\" rel=\"nofollow noreferrer\">this on the Shibboleth Wiki</a>.</p>\n\n<p>What exactly is the <code>providerId</code> and how can I specify it with OmniAuth and RubySaml?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "zeus", "rails-spring"], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 4226382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2671364c55060f3a996e267202447a2e?s=128&d=identicon&r=PG", "display_name": "\u0160tefan Barto\u0161", "link": "https://stackoverflow.com/users/4226382/%c5%a0tefan-barto%c5%a1"}, "is_accepted": true, "score": 0, "last_activity_date": 1500969303, "creation_date": 1500969303, "answer_id": 45297179, "question_id": 45192734, "link": "https://stackoverflow.com/questions/45192734/rails-spring-configuration-similar-like-in-zeus/45297179#45297179", "title": "Rails Spring configuration similar like in Zeus?", "body": "<p>Best solution what I came up for this moment:</p>\n\n<pre><code># config/spring.rb\nSpring.after_fork do\n  `killall -v -9 rots &amp; bundle exec rots 1&gt; log/rots.log &amp;`\n  `killall -v -9 stripe-mock-server &amp; bundle exec stripe-mock-server 1&gt; log/stripe-mock-server.log &amp;`\nend\n</code></pre>\n\n<p>For first I kill all <code>rots</code> and <code>stripe-mock-server</code> if exists and run it again. If you find a better solution, let me know to comment. Thanks.</p>\n"}], "owner": {"reputation": 441, "user_id": 4226382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2671364c55060f3a996e267202447a2e?s=128&d=identicon&r=PG", "display_name": "\u0160tefan Barto\u0161", "link": "https://stackoverflow.com/users/4226382/%c5%a0tefan-barto%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 45297179, "answer_count": 1, "score": 0, "last_activity_date": 1500969303, "creation_date": 1500472504, "last_edit_date": 1500641972, "question_id": 45192734, "link": "https://stackoverflow.com/questions/45192734/rails-spring-configuration-similar-like-in-zeus", "title": "Rails Spring configuration similar like in Zeus?", "body": "<p>I have something like this in Zeus custom plan, where I run some rake tasks:</p>\n\n<pre><code>require 'zeus/rails'\n\nclass CustomPlan &lt; Zeus::Rails\n  def rots\n    `bundle exec rots 1&gt; log/rots.log &amp;`\n  end\n\n  def stripe_mock\n    `bundle exec stripe-mock-server 1&gt; log/stripe-mock-server.log &amp;`\n  end\nend\n\nZeus.plan = CustomPlan.new\n</code></pre>\n\n<p>And Zeus config:</p>\n\n<pre><code>{\n    \"command\": \"ruby -rubygems -r./custom_plan -eZeus.go\",\n\n    \"plan\": {\n      \"boot\": {\n        \"default_bundle\": {\n        \"development_environment\": {\n        \"prerake\": {\"rake\": []},\n        \"console\": [\"c\"]\n      },\n      \"test_environment\": {\n        \"test_helper\": {\"test\": [\"rspec\"]}\n      }\n    },\n    \"rots\": {},\n    \"stripe_mock\": {}\n    }\n  }\n}\n</code></pre>\n\n<p>And I found this link: <a href=\"https://github.com/rails/spring#configuration\" rel=\"nofollow noreferrer\">https://github.com/rails/spring#configuration</a>, but I don't exactly understand how I can run and stop my custom rake tasks.</p>\n\n<p>I try it something like this:</p>\n\n<pre><code>class CustomPlan\n  def initialize\n    `bundle exec rots 1&gt; log/rots.log &amp;`\n    `bundle exec stripe-mock-server 1&gt; log/stripe-mock-server.log &amp;`\n  end\nend\nCustomPlan.new\n</code></pre>\n\n<p>This works, but when I stop spring by <code>spring stop</code>, <code>stripe-mock-server</code> is not shutting down.</p>\n\n<p>Is it some clever solution for running and stopping custom rake in spring?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1500471342, "post_id": 45191902, "comment_id": 77351675, "body": "Can you provide an example input and desired output. And what do you mean by vector?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1500471461, "post_id": 45192101, "comment_id": 77351801, "body": "This. Since this answer is going to be the best here, please remove <code>return</code> from the last line, it\u2019s considered to be a code smell."}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 1, "creation_date": 1500473241, "post_id": 45192101, "comment_id": 77353363, "body": "This works too <code>x.gsub(&#47;&#47;, &#39;***&#39;).sub(&#47;\\A\\*\\*\\*&#47;, &#39;&#39;).sub(&#47;\\*\\*\\*\\z&#47;, &#39;&#39;)</code>. Not sure which would be more performant for a large string, but it uses only <code>sub || gsub</code> and regex as was originally asked"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 2, "creation_date": 1500473415, "post_id": 45192101, "comment_id": 77353512, "body": "You could use <code>chars</code> instead of <code>split(&#47;&#47;)</code>."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1500473428, "post_id": 45192101, "comment_id": 77353520, "body": "@m.simonborg I suspect yours works better for large strings. Splitting requires a lot of allocations for small strings."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1500484692, "post_id": 45192101, "comment_id": 77361459, "body": "If you just want to strip three characters from the beginning and end of <code>x.sub(&#47;&#47;,&#39;***&#39;)</code>, <code>x.sub(&#47;&#47;,&#39;***&#39;)[3..-4]</code> is simple and clear."}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 3, "last_activity_date": 1500537401, "last_edit_date": 1592644375, "creation_date": 1500470924, "answer_id": 45192101, "question_id": 45191902, "link": "https://stackoverflow.com/questions/45191902/method-gsub-not-returning-desired-string/45192101#45192101", "title": "method .gsub not returning desired string", "body": "<p>One way to solve it is to <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-split\" rel=\"nofollow noreferrer\">split</a> <code>x</code> into characters then <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-join\" rel=\"nofollow noreferrer\">join</a> them back using <code>'***'</code> as separator:</p>\n<pre><code>def two_sort(s)\n  x = s.split.sort_by(&amp;:downcase).first\n  x.split(//).join('***')\nend\n</code></pre>\n<p>You can even combine the two lines and get rid of the temporary variable <code>x</code> to let it be more in the spirit of Ruby:</p>\n<pre><code>def two_sort(s)\n  s.split.sort_by(&amp;:downcase).first.split(//).join('***')\nend\n</code></pre>\n<p>As @gerry suggests in a comment, <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-chars\" rel=\"nofollow noreferrer\"><code>String#chars</code></a> can be used instead of <code>split(//)</code>. I think it is slightly faster and it looks even easier to read:</p>\n<pre><code>def two_sort(s)\n  s.split.sort_by(&amp;:downcase).first.chars.join('***')\nend\n</code></pre>\n<p>But for large input strings, <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-chars\" rel=\"nofollow noreferrer\"><code>String#chars</code></a> requires a lot of allocations for 1-char strings and it is probably slower and requires more memory than <code>x.gsub(//, '***').sub(/\\A\\*\\*\\*/, '').sub(/\\*\\*\\*\\z/, '')</code> (suggested by @m-simon-borg).</p>\n<p>@cary-swoveland kept his mind clear and suggested the cleanest and fastest way to remove the leading and trailing <code>***</code>: <code>x.sub(//,'***')[3..-4]</code>.</p>\n<h3>Conclusion</h3>\n<p>I think the fastest solution (that also uses the smallest amount of memory) is:</p>\n<pre><code>def two_sort(s)\n  s.split.sort_by(&amp;:downcase).first.gsub(//, '***')[3...-3]\nend\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 45192101, "answer_count": 1, "score": -1, "last_activity_date": 1500537401, "creation_date": 1500470443, "last_edit_date": 1500471351, "question_id": 45191902, "link": "https://stackoverflow.com/questions/45191902/method-gsub-not-returning-desired-string", "title": "method .gsub not returning desired string", "body": "<p>I have a method that sorts a vector of strings alphabetically and returns the first string with \"***\" inbetween each substring. </p>\n\n<pre><code>def two_sort(s)\n  x = s.split.sort_by(&amp;:downcase).first\n  return x.gsub(//, '***')  \nend\n</code></pre>\n\n<ol>\n<li><p>The problem the '***' is appearing before the string and after the string. I only want it inbetween the letters. How is this done with regex?</p></li>\n<li><p>Also, Why am I getting this error undefined method split when it works in my terminal?</p></li>\n</ol>\n\n<p>.</p>\n\n<pre><code>`two_sort': undefined method `split' for #&lt;Array:0x005635bb9bdb78&gt; (NoMethodError)\nfrom `block in &lt;main&gt;'\nfrom `block in describe'\nfrom  `measure'\nfrom  `describe'\nfrom  `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "devise"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500468377, "post_id": 45190856, "comment_id": 77349082, "body": "Hi, Thanks so much. emm it doesn&#39;t seem to like that, it isn&#39;t reading the &#39;end&#39;"}, {"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "reply_to_user": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500468481, "post_id": 45190856, "comment_id": 77349176, "body": "you answer got cut off, did it work, what is emm, what is the new error?"}, {"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500468719, "post_id": 45190856, "comment_id": 77349418, "body": "Hey, sorry about that. I&#39;m not sure what happened. I am getting &#39;unterminated string meets end of file - syntax error, unexpected end of imput, expecting keyword end. Everything is right, all indented. For some reason its not reading the &#39;end&#39;"}, {"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "reply_to_user": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500468761, "post_id": 45190856, "comment_id": 77349463, "body": "your not closing off something, your maybe missing a actual &#39;end&#39; keyword. of you left off a &quot; on end of say a class or something. Usually that is easy to locate as the code will be colored differently after the spot the &quot; is missing. Paste more code if you want me to help debug it with you."}, {"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500469095, "post_id": 45190856, "comment_id": 77349760, "body": "Hey, thanks a million, I pasted it above. I marked the error with [x]"}, {"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500469538, "post_id": 45190856, "comment_id": 77350138, "body": "Thanks you so much, it is still unresponsive though."}, {"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "reply_to_user": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500469599, "post_id": 45190856, "comment_id": 77350186, "body": "you restarted the server, after that whats the error message?"}, {"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500469718, "post_id": 45190856, "comment_id": 77350287, "body": "there is no error message, when i enter username and pasword or whn i sign up as a new user and pres sign up nothing happens. The log is the same as above. I will include an example of a log for a different app that is working above."}, {"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "reply_to_user": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500470085, "post_id": 45190856, "comment_id": 77350610, "body": "how did you install bootstrap? gem, files or cdn?"}, {"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500470502, "post_id": 45190856, "comment_id": 77350964, "body": "i used the gem &#39;bootstrap-sass&#39;, &#39;~&gt; 3.3.6 and then took content from the bootstrap example &#39;jumbotron&#39;. I created a partials folder in views and put the jumbotron in a _jumbotron.html.erb file. Then I rendered that to my index page and used a condition to only render it to my index page"}, {"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "reply_to_user": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500472730, "post_id": 45190856, "comment_id": 77352926, "body": "sorry for no replay, was trying to replicate the error"}, {"owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "reply_to_user": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500475927, "post_id": 45190856, "comment_id": 77355589, "body": "im going on a flyer, here cause very confused after looking, only thing is i saw issues with turbolinks in past? remove turbolinks and see if that works, if not im sorry and hope you solve it. <a href=\"https://github.com/twbs/bootstrap-sass/issues/396\" rel=\"nofollow noreferrer\">github.com/twbs/bootstrap-sass/issues/396</a>"}], "tags": [], "owner": {"reputation": 171, "user_id": 5223394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/399f169b3d4dedcfb231303869583d0a?s=128&d=identicon&r=PG&f=1", "display_name": "maverick5", "link": "https://stackoverflow.com/users/5223394/maverick5"}, "is_accepted": false, "score": 0, "last_activity_date": 1500470034, "last_edit_date": 1500470034, "creation_date": 1500467850, "answer_id": 45190856, "question_id": 45190422, "link": "https://stackoverflow.com/questions/45190422/rails-bootstrap-broke-devise/45190856#45190856", "title": "Rails Bootstrap broke Devise", "body": "<p>you need to whitelist that ip in application.rb or in config/environments/development.rb</p>\n\n<pre><code>class Application &lt; Rails::Application\n  config.web_console.whitelisted_ips = \"10.240.1.18\"\nend\n</code></pre>\n\n<p>this document might help\n<a href=\"https://github.com/rails/web-console#configweb_consolewhitelisted_ips\" rel=\"nofollow noreferrer\">https://github.com/rails/web-console#configweb_consolewhitelisted_ips</a></p>\n"}], "owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500470034, "creation_date": 1500466832, "last_edit_date": 1500469862, "question_id": 45190422, "link": "https://stackoverflow.com/questions/45190422/rails-bootstrap-broke-devise", "title": "Rails Bootstrap broke Devise", "body": "<p>Im building a rails news app, Im using Devise for authentication. - I just installed twitter bootstrap - (twbs/bootstrrap-sass) Now when I try and login in or create a new user nothing happens. Here is a copy of my log. Any suggestions?</p>\n\n<pre><code>    Started GET \"/users/sign_in?\nutf8=%E2%9C%93&amp;authenticity_token=aVBlvsx4myc%2BP91qvVF4OENxrq5RMMtXqZyZD%2Bk3USROHJxoQ5LHfiuRwUGKzypB178miOD5pcrUpXOwkDeAYg%3D%3D&amp;user%5Bemail%5D=david%40email.com&amp;user%5Bpassword%5D=[FILTERED]&amp;user%5Bremember_me%5D=0&amp;commit=Log+in\" for 10.240.1.18 at 2017-07-19 11:56:18 +0000\nCannot render console from 10.240.1.18! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\nProcessing by Devise::SessionsController#new as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"aVBlvsx4myc+P91qvVF4OENxrq5RMMtXqZyZD+k3USROHJxoQ5LHfiuRwUGKzypB178miOD5pcrUpXOwkDeAYg==\", \"user\"=&gt;{\"email\"=&gt;\"david@email.com\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\n  Rendering devise/sessions/new.html.erb within layouts/application\n  Rendered devise/shared/_links.html.erb (1.2ms)\n  Rendered devise/sessions/new.html.erb within layouts/application (5.5ms)\n  Rendered partials/_jumbotron.html.erb (0.7ms)\nCompleted 200 OK in 325ms (Views: 74.3ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>Here is my application.rb</p>\n\n<pre><code>require_relative 'boot'\n\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Newsroom\n    class Application &lt; Rails::Application\n[x] config.web_console.whitelisted_ips = '10.240.1.18\"\n\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.1\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n\n    end\n  end\nend\n</code></pre>\n\n<p>Here is a log for a different app that is working:</p>\n\n<pre><code>Started GET \"/\" for 10.240.1.4 at 2017-07-19 12:35:47 +0000\nCannot render console from 10.240.1.4! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\nProcessing by SiteController#home as HTML\n  Rendering site/home.html.erb within layouts/application\n  Rendered site/home.html.erb within layouts/application (0.4ms)\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"id\", 2], [\"LIMIT\", 1]]\nCompleted 200 OK in 30ms (Views: 28.9ms | ActiveRecord: 0.3ms)\n</code></pre>\n\n<p>for some reason when I try and sign up on my new app its not running any sql</p>\n"}, {"tags": ["ruby", "heroku", "sinatra"], "comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1500469095, "post_id": 45190168, "comment_id": 77349761, "body": "Is there a chance that <code>timeout</code> gem have broken Ruby&#39;s <code>Timeout</code> module where <code>Timeout::Error</code> defined?"}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1500472639, "post_id": 45190168, "comment_id": 77352831, "body": "@PavelMikhailyuk I suspect that&#39;s exactly what is happening. Any idea how to fix that?"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1500479250, "post_id": 45190168, "comment_id": 77358186, "body": "Try to change gem &#39;timeout&#39; to gem &#39;timeout-extensions&#39;. Won&#39;t help - throw it out. You need no 0.0.1 gem with 9 stars, Luke :)"}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1500483893, "post_id": 45190168, "comment_id": 77361009, "body": "@PavelMikhailyuk that was it, replaced it with <code>timeout-extensions</code> and the problem disappeared. Thanks! Feel free to post an answer, I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": true, "score": 3, "last_activity_date": 1500491864, "creation_date": 1500491864, "answer_id": 45199265, "question_id": 45190168, "link": "https://stackoverflow.com/questions/45190168/uninitialized-constant-timeouterror-at-heroku/45199265#45199265", "title": "uninitialized constant Timeout::Error at Heroku", "body": "<p>Originally, gem name is <a href=\"https://github.com/celluloid/timeout-extensions\" rel=\"nofollow noreferrer\">timeout-extensions</a>. RubyGems has allowed to publish it also as <a href=\"https://rubygems.org/search?utf8=%E2%9C%93&amp;query=timeout\" rel=\"nofollow noreferrer\">timeout</a> for unknown reasons.</p>\n\n<p>Therefore when included in <code>Gemfile</code> as <code>timeout</code>, it brakes Ruby's native <code>timeout</code> module which defines <code>Timeout::Error</code>.</p>\n\n<p>So, line in <code>Gemfile</code> should be</p>\n\n<pre><code>gem 'timeout-extensions'\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>gem 'timeout'\n</code></pre>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 45199265, "answer_count": 1, "score": 1, "last_activity_date": 1500491864, "creation_date": 1500466261, "question_id": 45190168, "link": "https://stackoverflow.com/questions/45190168/uninitialized-constant-timeouterror-at-heroku", "title": "uninitialized constant Timeout::Error at Heroku", "body": "<p>This is what I see in my Heroku logs:</p>\n\n<pre><code>heroku[web.1]: Starting process with command `bundle exec rackup config.ru -p 44765`\napp[web.1]: bundler: failed to load command: rackup (/app/vendor/bundle/ruby/2.3.0/bin/rackup)\napp[web.1]: NameError: uninitialized constant Timeout::Error\napp[web.1]: Did you mean?  KeyError\napp[web.1]:                IOError\napp[web.1]:                Errno\napp[web.1]:   /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/resolv.rb:164:in `&lt;class:Resolv&gt;'\napp[web.1]:   /app/vendor/ruby-2.3.3/lib/ruby/2.3.0/resolv.rb:39:in `&lt;top (required)&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require_with_backports'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/twitter-6.1.0/lib/twitter/streaming/connection.rb:3:in `&lt;top (required)&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require_with_backports'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/twitter-6.1.0/lib/twitter/streaming/client.rb:5:in `&lt;top (required)&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require_with_backports'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/twitter-6.1.0/lib/twitter.rb:26:in `&lt;top (required)&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/backports-3.8.0/lib/backports/std_lib.rb:9:in `require_with_backports'\napp[web.1]:   /app/sixnines.rb:34:in `&lt;top (required)&gt;'\napp[web.1]:   /app/config.ru:23:in `require_relative'\napp[web.1]:   /app/config.ru:23:in `block in &lt;main&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/builder.rb:55:in `instance_eval'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/builder.rb:55:in `initialize'\napp[web.1]:   /app/config.ru:in `new'\napp[web.1]:   /app/config.ru:in `&lt;main&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/builder.rb:49:in `eval'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/builder.rb:49:in `new_from_string'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/builder.rb:40:in `parse_file'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/server.rb:300:in `build_app_and_options_from_config'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/server.rb:209:in `app'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/server.rb:337:in `wrapped_app'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/server.rb:273:in `start'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/lib/rack/server.rb:148:in `start'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/gems/rack-1.6.8/bin/rackup:4:in `&lt;top (required)&gt;'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/bin/rackup:22:in `load'\napp[web.1]:   /app/vendor/bundle/ruby/2.3.0/bin/rackup:22:in `&lt;top (required)&gt;'\nheroku[web.1]: Process exited with status 1\n</code></pre>\n\n<p>I tried everything and can't really understand why <code>timeout</code> is not found. Any hints? This is the source: <a href=\"https://github.com/yegor256/sixnines\" rel=\"nofollow noreferrer\">https://github.com/yegor256/sixnines</a></p>\n"}, {"tags": ["ruby", "pdf", "tags", "export", "redmine"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1500466127, "post_id": 45189676, "comment_id": 77347233, "body": "StackOverflow is for discussing specific code; see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. This will likely be closed. I recommend that you experiment with the <a href=\"https://github.com/naitoh/rbpdf\" rel=\"nofollow noreferrer\">RBPDF</a> gem, which Redmine uses, and see if you can add text to a PDF. If you have trouble, post the specific code you&#39;re having problems with."}], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 5168428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764a5341adf1bf8bbb7e5e9273ef58ec?s=128&d=identicon&r=PG&f=1", "display_name": "Geff", "link": "https://stackoverflow.com/users/5168428/geff"}, "is_accepted": true, "score": 1, "last_activity_date": 1500636123, "creation_date": 1500636123, "answer_id": 45236375, "question_id": 45189676, "link": "https://stackoverflow.com/questions/45189676/exporting-redmine-issue-tags-into-pdf/45236375#45236375", "title": "Exporting Redmine issue tags into PDF", "body": "<p>Finally I solved the problem this way:</p>\n\n<pre><code>    context = TaggingPlugin::ContextHelper.context_for(@project)   \n    affected_issue = Issue.find(issue.id)\n    issue_tags = affected_issue.tag_list_on(context)\n    tagsString = \"\"\n    issue_tags.each do |x|\n        tagsString += \" \" + x.to_s\n    end\n\n    left &lt;&lt; [:Tags, tagsString]\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 5168428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764a5341adf1bf8bbb7e5e9273ef58ec?s=128&d=identicon&r=PG&f=1", "display_name": "Geff", "link": "https://stackoverflow.com/users/5168428/geff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 45236375, "answer_count": 1, "score": 1, "last_activity_date": 1500636123, "creation_date": 1500464974, "last_edit_date": 1500473972, "question_id": 45189676, "link": "https://stackoverflow.com/questions/45189676/exporting-redmine-issue-tags-into-pdf", "title": "Exporting Redmine issue tags into PDF", "body": "<p>I'm using Redmine with <a href=\"https://github.com/Restream/redmine_tagging\" rel=\"nofollow noreferrer\">redmine_tagging</a> plugin. There is an option for creating PDFs in issue's view. I would like to customize the exported PDF to show the tags of the issue.\nI've already found out the helper class for exporting PDFs, so I can now customize most of output fields but not the tags. <a href=\"https://insight.io/github.com/redmine/redmine/blob/master/lib/redmine/export/pdf/issues_pdf_helper.rb\" rel=\"nofollow noreferrer\">Here</a> is the ruby source code of a general Redmine's helper.\nFor example this is how I write out the status:</p>\n\n<pre><code>left &lt;&lt; [l(:field_status), issue.status]\n</code></pre>\n\n<p>I've found out how to show label for tags:</p>\n\n<pre><code>left &lt;&lt; [:Tags, ???]\n</code></pre>\n\n<p>However, the values of tags are 'missing'. I assume it should be some kind of array, as if I make a query on issues with a rest client I get json like this:</p>\n\n<pre><code>{\n\"issues\": [\n  {\n   ...\n   \"tags\": [],\n   },\n   ...\n}\n</code></pre>\n\n<p>Any idea?\nThank you!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "google-maps", "gmaps4rails"], "answers": [{"tags": [], "owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "is_accepted": true, "score": 1, "last_activity_date": 1500896280, "last_edit_date": 1500896280, "creation_date": 1500467892, "answer_id": 45190872, "question_id": 45189631, "link": "https://stackoverflow.com/questions/45189631/use-geocode-autocomplete-in-a-form-so-users-dont-need-to-type-in-where-they-are/45190872#45190872", "title": "use geocode autocomplete in a form so users don&#39;t need to type in where they are", "body": "<p>What you are looking for is HTML 5's geolocation feature. </p>\n\n<p><a href=\"https://www.w3schools.com/html/html5_geolocation.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/html/html5_geolocation.asp</a></p>\n\n<p>Do note that the user can decline this option or the browser may not support it which will make your button nonfunctional. It is best to only show the option (button in your case) if geolocation is available.</p>\n\n<p><strong>EDIT</strong></p>\n\n<blockquote>\n  <p>Using HTML Geolocation The getCurrentPosition() method is used to\n  return the user's position.</p>\n  \n  <p>The example below returns the latitude and longitude of the user's\n  position:</p>\n</blockquote>\n\n<p>Example</p>\n\n<pre><code>var x = document.getElementById(\"demo\");\nfunction getLocation() {\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(showPosition);\n    } else {\n        x.innerHTML = \"Geolocation is not supported by this browser.\";\n    }\n}\nfunction showPosition(position) {\n    x.innerHTML = \"Latitude: \" + position.coords.latitude + \n    \"&lt;br&gt;Longitude: \" + position.coords.longitude; \n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 5759806, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7d0a09cf74f9d4b98b3521779d77ee26?s=128&d=identicon&r=PG&f=1", "display_name": "gcr828", "link": "https://stackoverflow.com/users/5759806/gcr828"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 45190872, "answer_count": 1, "score": 0, "last_activity_date": 1500896280, "creation_date": 1500464851, "question_id": 45189631, "link": "https://stackoverflow.com/questions/45189631/use-geocode-autocomplete-in-a-form-so-users-dont-need-to-type-in-where-they-are", "title": "use geocode autocomplete in a form so users don&#39;t need to type in where they are", "body": "<p>Users will have a simple form where they can enter 3 address. the first address is most likely going to be where they currently are. so i would like to have a button right next to it that says \"my current location\" that will automatically fill in that input with their current location but im not entirely sure how to go about doing this. here is the code for my form:</p>\n\n<pre><code>      &lt;div class=\"main-container z-depth-5\"&gt;\n       &lt;h3 class=\"txt-primary\"&gt;Equidestined&lt;/h3&gt;\n         &lt;p class=\"home-instructions\"&gt;Enter two or three addresses to find the optimal meeting spot!&lt;/p&gt;\n            &lt;%= form_for @search do |search_form| %&gt;\n            &lt;% @search.locations.each do |location| %&gt;\n              &lt;div class=\"input-field col s12\"&gt;\n              &lt;%= search_form.fields_for location, index: location.id do |location_form|%&gt;\n              &lt;%= location_form.text_field :address %&gt;\n               &lt;%= location_form.label :address%&gt;\n                &lt;% end %&gt;\n              &lt;/div&gt;\n             &lt;% end %&gt;\n            &lt;br&gt;&lt;%= submit_tag('Get Midpoint!', :class=&gt;\"waves-effect waves-light btn\") %&gt;\n         &lt;% end %&gt;\n         &lt;/div&gt;\n</code></pre>\n\n<p>can anyone point me in the right direction? thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1500479284, "post_id": 45187919, "comment_id": 77358205, "body": "Consider using a hash: <code>h = { &quot;rock&quot;=&gt;&quot;scissors&quot;, &quot;paper&quot;=&gt;&quot;rock&quot;, &quot;scissors&quot;=&gt;&quot;paper&quot; }</code>.  Then player wins if <code>h[player_choice) == computer_choice</code>, computer wins if <code>h[computer_choice] == player_choice</code>, else it&#39;s a tie."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1500479762, "post_id": 45187919, "comment_id": 77358503, "body": "Try a structure like this. <code>loop do; puts &quot;keep playin&#39;?&quot;; break if &quot;gets.chomp.downcase == &quot;n&quot;; loop do; puts &quot;what&#39;s your choice?&quot;; player_choice = gets.chomp; if h.has_key?(player_choice); &lt;see if win, lose or tie&gt;; break; else; puts &quot;&#39;#{player_choice}&#39; is invalid, try again&quot;; end; end</code>."}, {"owner": {"reputation": 19, "user_id": 8184114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11905f0e6f4ae33414bbe3fe2f19063?s=128&d=identicon&r=PG&f=1", "display_name": "Julin", "link": "https://stackoverflow.com/users/8184114/julin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1500796208, "post_id": 45187919, "comment_id": 77488667, "body": "Thanks, your ideas taught me a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8184114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11905f0e6f4ae33414bbe3fe2f19063?s=128&d=identicon&r=PG&f=1", "display_name": "Julin", "link": "https://stackoverflow.com/users/8184114/julin"}, "edited": false, "score": 0, "creation_date": 1500796176, "post_id": 45190888, "comment_id": 77488657, "body": "Thanks a lot for the suggestions! I tried your several ideas and learned a lot, thank you!"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 3, "last_activity_date": 1500467931, "creation_date": 1500467931, "answer_id": 45190888, "question_id": 45187919, "link": "https://stackoverflow.com/questions/45187919/rock-scissors-paper-game-with-ruby-def-compare-does-not-work/45190888#45190888", "title": "Rock-scissors-paper-game with ruby def compare does not work", "body": "<p>Let's break this into three parts. First, let's write the main loop for playing the game:</p>\n\n<pre><code>puts \"Welcome to our Rock, Paper, Scissors Game\"\n\nloop do\n  puts \"Do you want to play? (yes/no)\"\n  answer = gets.chomp.downcase\n  if answer == \"yes\"\n    play_game\n  elsif answer == \"no\"\n    puts \"Bye!\"\n    break\n  elsif\n    puts \"Invalid answer (must be 'yes' or 'no')\"\n  end\nend\n</code></pre>\n\n<p>This fixes your first issue, where the \"do you want to play\" is not actually being looped.</p>\n\n<p>Now, let's define the <code>play_game</code> method:</p>\n\n<pre><code>def play_game\n  options = [\"rock\", \"paper\", \"scissors\"]\n  computer_choice = options.sample\n\n  loop do\n    puts \"Please choose Rock, Paper or Scissors!\"\n    player_choice = gets.chomp.downcase\n    if options.include?(player_choice)\n      compare(player_choice, computer_choice)\n      break\n    else\n      puts \"Invalid answer (must be 'rock', 'paper' or 'scissors')\"\n    end\n  end\nend\n</code></pre>\n\n<p>This fixes your second issue, there the player got stuck in an infinite loop within each game.</p>\n\n<p>Now finally, let's define the <code>compare</code> method:</p>\n\n<pre><code>def compare(player_choice, computer_choice)\n  puts \"Computer choice is: \" + computer_choice + \". \"\n\n  if(player_choice == \"rock\" &amp;&amp; computer_choice == \"scissors\")\n    puts \"You win! :)\"\n  elsif(player_choice == \"rock\" &amp;&amp; computer_choice == \"paper\")\n    puts \"Computer wins :(\"\n  elsif(player_choice == \"paper\" &amp;&amp; computer_choice == \"scissors\")\n    puts \"Computer wins :(\"\n  elsif(player_choice == \"paper\" &amp;&amp; computer_choice == \"rock\")\n    puts \"You win! :)\"\n  elsif(player_choice == \"scissors\" &amp;&amp; computer_choice == \"rock\")\n    puts \"Computer wins :(\"\n  elsif(player_choice == \"scissors\" &amp;&amp; computer_choice == \"paper\")\n    puts \"You win! :)\"\n  else\n    puts \"It's a tie!\"\n  end\nend\n</code></pre>\n\n<p>You could probably improve that method further, but I have at least removed the biggest duplication between <code>puts</code> statements.</p>\n\n<p>Put this all together, and here is a fully working version of the game:</p>\n\n<pre><code>def play_game \n  options = [\"rock\", \"paper\", \"scissors\"] \n  computer_choice = options.sample \n\n  loop do \n    puts \"Please choose Rock, Paper or Scissors!\" \n    player_choice = gets.chomp.downcase \n    if options.include?(player_choice) \n      compare(player_choice, computer_choice) \n      break \n    else \n      puts \"Invalid answer (must be 'rock', 'paper' or 'scissors')\" \n    end \n  end \nend \n\ndef compare(player_choice, computer_choice) \n  puts \"Computer choice is: \" + computer_choice + \". \" \n\n  if(player_choice == \"rock\" &amp;&amp; computer_choice == \"scissors\") \n    puts \"You win! :)\" \n  elsif(player_choice == \"rock\" &amp;&amp; computer_choice == \"paper\") \n    puts \"Computer wins :(\" \n  elsif(player_choice == \"paper\" &amp;&amp; computer_choice == \"scissors\") \n    puts \"Computer wins :(\" \n  elsif(player_choice == \"paper\" &amp;&amp; computer_choice == \"rock\") \n    puts \"You win! :)\" \n  elsif(player_choice == \"scissors\" &amp;&amp; computer_choice == \"rock\") \n    puts \"Computer wins :(\" \n  elsif(player_choice == \"scissors\" &amp;&amp; computer_choice == \"paper\") \n    puts \"You win! :)\" \n  else \n    puts \"It's a tie!\" \n  end \nend \n\n\nputs \"Welcome to our Rock, Paper, Scissors Game\" \n\nloop do \n  puts \"Do you want to play? (yes/no)\" \n  answer = gets.chomp.downcase \n  if answer == \"yes\" \n    play_game \n  elsif answer == \"no\" \n    puts \"Bye!\" \n    break \n  elsif \n    puts \"Invalid answer (must be 'yes' or 'no')\" \n  end \nend\n</code></pre>\n\n<p>There are many ways that this could be improved further, but I'll leave that up to you.</p>\n"}], "owner": {"reputation": 19, "user_id": 8184114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11905f0e6f4ae33414bbe3fe2f19063?s=128&d=identicon&r=PG&f=1", "display_name": "Julin", "link": "https://stackoverflow.com/users/8184114/julin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500525046, "creation_date": 1500460289, "last_edit_date": 1500525046, "question_id": 45187919, "link": "https://stackoverflow.com/questions/45187919/rock-scissors-paper-game-with-ruby-def-compare-does-not-work", "title": "Rock-scissors-paper-game with ruby def compare does not work", "body": "<p>I tried to create the game. Here is my code:</p>\n\n<pre><code>puts \"Welcome to our Rock, Paper, Scissors Game\"\n\nputs \"Do you want to play? (yes/no)\"\nanswer = gets.chomp.downcase\nwhile answer == \"yes\" do\n\noptions = [\"rock\", \"paper\", \"scissors\"]\ncomputer_choice = options[rand(options.length)]\n\nputs \"Please choose Rock, Paper or Scissors!\"\nplayer_choice = gets.chomp.downcase\n\ndef compare\n  if (player_choice == \"rock\" &amp;&amp; computer_choice == \"scissors\")\n    puts \"computer choice is: \" + computer_choice + \" , you win! :)\"\n  elsif (player_choice == \"rock\" &amp;&amp; computer_choice == \"paper\")\n    puts \"computer choice is: \" + computer_choice + \" ,computer wins :(\"\n  elsif (player_choice == \"paper\" &amp;&amp; computer_choice == \"scissors\")\n    puts \"computer choice is: \" + computer_choice + \" ,computer wins :(\"\n  elsif (player_choice == \"paper\" &amp;&amp; computer_choice == \"rock\")\n    puts \"computer choice is: \" + computer_choice + \" , you win! :)\"\n  elsif (player_choice == \"scissors\" &amp;&amp; computer_choice == \"rock\")\n    puts \"computer choice is: \" + computer_choice + \" ,computer wins :(\"\n  elsif (player_choice == \"scissors\" &amp;&amp; computer_choice == \"paper\")\n    puts \"computer choice is: \" + computer_choice + \" , you win! :)\"\n  elsif (player_choice === computer_choice)\n    puts \"It's a tie!\"\n  else\n    puts \"Error\"\n  end\nend\nend\n</code></pre>\n\n<p>It repeats asking me my choice, and does not proceed to my def compare. What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5", "sti"], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": false, "score": 0, "last_activity_date": 1500486355, "creation_date": 1500486355, "answer_id": 45197593, "question_id": 45187825, "link": "https://stackoverflow.com/questions/45187825/rails-sti-in-devise-with-different-attributes-for-each-user-type/45197593#45197593", "title": "Rails: STI in Devise with different attributes for each user type", "body": "<p>Set up your rails application with the devise gem for authentication.</p>\n\n<p>It can handle authentication for multiple user roles as specified in the documentation here <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6669012, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6b1e0c1ba6f6c80761244b3c8c6fa7ae?s=128&d=identicon&r=PG&f=1", "display_name": "AR Khan", "link": "https://stackoverflow.com/users/6669012/ar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1500486355, "creation_date": 1500460037, "last_edit_date": 1500463008, "question_id": 45187825, "link": "https://stackoverflow.com/questions/45187825/rails-sti-in-devise-with-different-attributes-for-each-user-type", "title": "Rails: STI in Devise with different attributes for each user type", "body": "<p>I am going start a project in Ruby on Rails, where I have three types of users</p>\n\n<ol>\n<li>Single User </li>\n<li>Admin User</li>\n<li>Business User</li>\n</ol>\n\n<p>Single and Admin User have attributes: </p>\n\n<ul>\n<li>name</li>\n<li>email</li>\n<li>password</li>\n</ul>\n\n<p>Business users have attributes: </p>\n\n<ul>\n<li>business name </li>\n<li>address </li>\n<li>postal code </li>\n<li>email </li>\n<li>password </li>\n</ul>\n\n<p>Now, what I want to achieve is how can users login with single form and signup with different attributes.(do I need separate forms for signup?)\nIs STI solution better to use here or you recommend other solution? If yes to STI, than is it ok to have empty fields for user 1 and 2 in database.</p>\n\n<p>I am beginner rails guy so I really don't understand what to do. A step wise solution will help me understand alot.\nA tutorial may also help alot.\nLooking forward to your help\nThanks once again</p>\n"}, {"tags": ["ruby", "mongodb", "jruby"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4603202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0031dd8033af4c21a5997b8252a98d53?s=128&d=identicon&r=PG&f=1", "display_name": "albatross", "link": "https://stackoverflow.com/users/4603202/albatross"}, "edited": false, "score": 0, "creation_date": 1500461705, "post_id": 45188112, "comment_id": 77343928, "body": "I don&#39;t believe there are any pure ruby Mongo drivers are there? I have tried JMongo but cannot get that to run and it has not been updated since 2011."}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "reply_to_user": {"reputation": 81, "user_id": 4603202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0031dd8033af4c21a5997b8252a98d53?s=128&d=identicon&r=PG&f=1", "display_name": "albatross", "link": "https://stackoverflow.com/users/4603202/albatross"}, "edited": false, "score": 0, "creation_date": 1500470398, "post_id": 45188112, "comment_id": 77350874, "body": "then your best bet is to download a java mongodb driver, wrap it in ruby, and use it as such."}], "tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 0, "last_activity_date": 1500460790, "creation_date": 1500460790, "answer_id": 45188112, "question_id": 45187537, "link": "https://stackoverflow.com/questions/45187537/jruby-cannot-install-mongo-gem/45188112#45188112", "title": "Jruby - cannot install Mongo gem", "body": "<p>You're trying to use a MRI gem that depends on native extensions in JRuby - this isn't going to work (easily).</p>\n\n<p>Your options are:</p>\n\n<ol>\n<li>find a pure-ruby mongo driver that doesn't depend on native extensions</li>\n<li>find a java mongodb driver that you can wrap in ruby code and load as a dependency in your jruby application</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 4603202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0031dd8033af4c21a5997b8252a98d53?s=128&d=identicon&r=PG&f=1", "display_name": "albatross", "link": "https://stackoverflow.com/users/4603202/albatross"}, "edited": false, "score": 0, "creation_date": 1500486474, "post_id": 45193664, "comment_id": 77362487, "body": "Thanks for this. I had been flummoxed for a full day with this problem. I followed your steps to the letter and it now works fine."}], "tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": true, "score": 1, "last_activity_date": 1500474591, "creation_date": 1500474591, "answer_id": 45193664, "question_id": 45187537, "link": "https://stackoverflow.com/questions/45187537/jruby-cannot-install-mongo-gem/45193664#45193664", "title": "Jruby - cannot install Mongo gem", "body": "<p>this should work, maybe do a clean <code>bundle install</code>\n... so that you install the latest gems :</p>\n\n<pre><code>$ jruby -S gem install mongo\nFetching: bson-4.2.2-java.gem (100%)\nSuccessfully installed bson-4.2.2-java\nFetching: mongo-2.4.2.gem (100%)\nSuccessfully installed mongo-2.4.2\n2 gems installed\n</code></pre>\n\n<h3>#</h3>\n\n<pre><code>$ jruby -v\njruby 9.1.8.0 (2.3.1) 2017-03-06 90fc7ab Java HotSpot(TM) 64-Bit Server VM 25.121-b13 on 1.8.0_121-b13 +jit [linux-x86_64]\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4603202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0031dd8033af4c21a5997b8252a98d53?s=128&d=identicon&r=PG&f=1", "display_name": "albatross", "link": "https://stackoverflow.com/users/4603202/albatross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 45193664, "answer_count": 2, "score": 0, "last_activity_date": 1500474591, "creation_date": 1500459342, "question_id": 45187537, "link": "https://stackoverflow.com/questions/45187537/jruby-cannot-install-mongo-gem", "title": "Jruby - cannot install Mongo gem", "body": "<p>JRuby 9.1.12.0 (2.3.3)\nRubygem 2.6.11\nWin 7\nMongo 2.3.2\nBson-4.2.2</p>\n\n<p>I have moved over to JRuby to enable me to use some Java based libraries and I have managed to install all of my original gems cucumber/Rspec/Watir etc but I cannot seem to install the Mongo Gem. I get the following error message:</p>\n\n<pre><code>C:\\Ruby\\gem&gt;jruby -S gem install mongo\nBuilding native extensions. This could take a while...\nC:/jruby-9.1.12.0/lib/ruby/stdlib/rubygems/ext/ext_conf_builder.rb:58:  warning: Tempfile#unlink or delete called on open file\n; ignoring\nERROR:  Error installing mongo:\nERROR: Failed to build gem native extension.\n\ncurrent directory: C:/jruby-9.1.12.0/lib/ruby/gems/shared/gems/bson-4.2.2/ext/bson\nC:/jruby-9.1.12.0/bin/jruby.exe -r ./siteconf20170719-4116-mhpj6s.rb extconf.rb\ncreating Makefile\n\ncurrent directory:  C:/jruby-9.1.12.0/lib/ruby/gems/shared/gems/bson-4.2.2/ext/bson\nmake \"DESTDIR=\" clean\n\ncurrent directory:   C:/jruby-9.1.12.0/lib/ruby/gems/shared/gems/bson-4.2.2/ext/bson\nmake \"DESTDIR=\"\nmake: *** No rule to make target    `C:/jruby-9.1.12.0/lib/ruby/include/ruby/ruby.h', needed by `bson_native.o'.       Stop.\n\nmake failed, exit code 2\n\nGem files will remain installed in   C:/jruby-9.1.12.0/lib/ruby/gems/shared/gems/bson-4.2.2 for inspection.\nResults logged to    C:/jruby-9.1.12.0/lib/ruby/gems/shared/extensions/universal-java-1.8/2.3.0/bson-4.2.2/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "data-structures", "tree", "trie"], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1500543868, "post_id": 45204862, "comment_id": 77388165, "body": "It works. I had to do both changes(new variable and using + operator). I only tried these solutions separately."}], "tags": [], "owner": {"reputation": 496, "user_id": 4424209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ee23ec04247063b29c51c094d821dd?s=128&d=identicon&r=PG&f=1", "display_name": "sindux", "link": "https://stackoverflow.com/users/4424209/sindux"}, "is_accepted": true, "score": 1, "last_activity_date": 1500522948, "creation_date": 1500522948, "answer_id": 45204862, "question_id": 45187515, "link": "https://stackoverflow.com/questions/45187515/ruby-trie-implementation-reference-issue/45204862#45204862", "title": "ruby trie implementation reference issue", "body": "<p>Ruby's <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-concat\" rel=\"nofollow noreferrer\">string concat</a> mutates the string and doesn't return a new string. You may want the <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-2B\" rel=\"nofollow noreferrer\">+ operator</a> instead. So basically change the 2 lines inside collect's for-loop as per below:</p>\n\n<pre><code>stringn = string + letter\ncollect(node.hash[letter], stringn)\n</code></pre>\n\n<p>Also, you probably want to either always initialize <code>@words</code> to empty in <code>print</code> before calling <code>collect</code>, or make it a local variable in <code>print</code> and pass it to <code>collect</code>.</p>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 45204862, "answer_count": 1, "score": 0, "last_activity_date": 1500522948, "creation_date": 1500459271, "question_id": 45187515, "link": "https://stackoverflow.com/questions/45187515/ruby-trie-implementation-reference-issue", "title": "ruby trie implementation reference issue", "body": "<p>I am trying to implement a trie in Ruby but can't figure out what the problem is with my <code>print</code> + <code>collect</code> methods.</p>\n\n<p>I just implemented the same in JS and <strong>working fine</strong>. I guess the issue could be that Ruby is passed by reference (unlike JS) and how variable assignment works in Ruby.</p>\n\n<p>So if I run the code with <code>string.clone</code> as argument when I recursively call the <code>collect</code> function then I get:</p>\n\n<pre><code>[\"peter\", \"peter\", \"petera\", \"pdanny\", \"pdjane\", \"pdjanck\"]\n</code></pre>\n\n<p>and if I pass <code>string</code> then:</p>\n\n<pre><code>[\"peterradannyjaneck\", \"peterradannyjaneck\", \"peterradannyjaneck\", \"peterradannyjaneck\", \"peterradannyjaneck\", \"peterradannyjaneck\"]\n</code></pre>\n\n<p>Any ideas how to fix this?</p>\n\n<p>the code:</p>\n\n<pre><code>class Node\n  attr_accessor :hash, :end_node, :data\n\n  def initialize\n    @hash = {}\n    @end_node = false\n    @data = data\n  end\n\n  def end_node?\n    end_node\n  end\nend\n\nclass Trie\n  def initialize\n    @root = Node.new\n    @words = []\n  end\n\n  def add(input, data, node = @root)\n    if input.empty?\n      node.data = data\n      node.end_node = true\n    elsif node.hash.keys.include?(input[0])\n      add(input[1..-1], data, node.hash[input[0]])\n    else\n      node.hash[input[0]] = Node.new\n      add(input[1..-1], data, node.hash[input[0]])\n    end\n  end\n\n  def print(node = @root)\n    collect(node, '')\n    @words\n  end\n\n  private\n\n  def collect(node, string)\n    if node.hash.size &gt; 0\n      for letter in node.hash.keys\n        string = string.concat(letter)\n        collect(node.hash[letter], string.clone)\n      end\n\n      @words &lt;&lt; string if node.end_node?\n    else\n      string.length &gt; 0 ? @words &lt;&lt; string : nil\n    end \n  end\nend\n\ntrie = Trie.new\ntrie.add('peter', date: '1988-02-26')\ntrie.add('petra', date: '1977-02-12')\ntrie.add('danny', date: '1998-04-21')\ntrie.add('jane', date: '1985-05-08')\ntrie.add('jack', date: '1994-11-04')\ntrie.add('pete', date: '1977-12-18')\nprint trie.print\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "makefile", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1500458906, "creation_date": 1500458906, "answer_id": 45187387, "question_id": 45187301, "link": "https://stackoverflow.com/questions/45187301/cant-install-mongo-gem-make-failed-exit-code-1/45187387#45187387", "title": "Can&#39;t install Mongo gem - make failed, exit code 1", "body": "<p>Installing this gem apparently needs a working C compiler and supporting programs (including make).  You probably have to install <a href=\"http://mingw-w64.org/\" rel=\"nofollow noreferrer\">mingw-w64</a> or <a href=\"https://cygwin.com/\" rel=\"nofollow noreferrer\">Cygwin</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 4743028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abc11c007a3a284272d261b2dae6376e?s=128&d=identicon&r=PG", "display_name": "Lars Kanis", "link": "https://stackoverflow.com/users/4743028/lars-kanis"}, "is_accepted": false, "score": 1, "last_activity_date": 1501770306, "creation_date": 1501770306, "answer_id": 45487053, "question_id": 45187301, "link": "https://stackoverflow.com/questions/45187301/cant-install-mongo-gem-make-failed-exit-code-1/45487053#45487053", "title": "Can&#39;t install Mongo gem - make failed, exit code 1", "body": "<p>The bson gem is a dependency of mongo, which requires a working build environment to install. The officially supported build environment for RubyInstaller-2.4 and newer is <a href=\"http://msys2.org\" rel=\"nofollow noreferrer\">MSYS2</a>. It can be installed on the last page of the installer or later per <code>ridk install</code> command. It's best to use the default options there.</p>\n"}], "owner": {"reputation": 2049, "user_id": 2246700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/63ae5300336319b5b03e0008130b27b6?s=128&d=identicon&r=PG&f=1", "display_name": "narzero", "link": "https://stackoverflow.com/users/2246700/narzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501770306, "creation_date": 1500458688, "question_id": 45187301, "link": "https://stackoverflow.com/questions/45187301/cant-install-mongo-gem-make-failed-exit-code-1", "title": "Can&#39;t install Mongo gem - make failed, exit code 1", "body": "<p>I've installed Ruby 2.4.0 on Windows via the <a href=\"https://rubyinstaller.org/\" rel=\"nofollow noreferrer\">RubyInstaller</a>. Ruby works fine and I've been able to install all the gems I've wanted so far. </p>\n\n<p>But I'm having issues installing the <a href=\"https://github.com/mongodb/mongo-ruby-driver\" rel=\"nofollow noreferrer\">mongo</a> gem. When I do <code>gem install mongo --no-rdoc --no-ri</code> I get the following error:</p>\n\n<pre><code>current directory: C:/Ruby24/lib/ruby/gems/2.4.0/gems/bson-4.2.2/ext/bson\nC:/Ruby24/bin/ruby.exe -r ./siteconf20170719-13960-1i1n5nq.rb extconf.rb\ncreating Makefile\n\ncurrent directory: C:/Ruby24/lib/ruby/gems/2.4.0/gems/bson-4.2.2/ext/bson\nmake \"DESTDIR=\" clean\n'make' is not recognized as an internal or external command,\noperable program or batch file.\n\ncurrent directory: C:/Ruby24/lib/ruby/gems/2.4.0/gems/bson-4.2.2/ext/bson\nmake \"DESTDIR=\"\n'make' is not recognized as an internal or external command,\noperable program or batch file.\n\nmake failed, exit code 1\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "devise"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500459356, "post_id": 45187374, "comment_id": 77342311, "body": "Great, how did I not notice that, I have been looking at it for the last 2 days. Any Idea about the other Issue above? Thanks a million."}, {"owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "edited": false, "score": 0, "creation_date": 1500459881, "post_id": 45187374, "comment_id": 77342663, "body": "Apologies - I though I was doing the right thing. I seem to get voted down for not changing the question after it is answered."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1500459183, "last_edit_date": 1500459183, "creation_date": 1500458872, "answer_id": 45187374, "question_id": 45187005, "link": "https://stackoverflow.com/questions/45187005/bootstrap-sass-broke-devise/45187374#45187374", "title": "Bootstrap Sass broke devise", "body": "<p>Looks like you have an extra <code>if user_signed_in?</code> tag</p>\n\n<pre><code>Hey, your logged in as &lt;strong&gt;&lt;%= current_user.email %&gt;&lt;/strong&gt;.\n&lt;% if user_signed_in? %&gt;\n</code></pre>\n\n<p>and that is messing up your <code>&lt;% else %&gt;</code> (which now matches the extra <code>if</code> and is now nested within the first <code>if user_signed_in?</code> and will never be rendered.</p>\n\n<p>Also, unrelated, but it should be \"...you're logged in as...\" and the <code>div class=\"index_log\"</code> isn't closed</p>\n"}], "owner": {"reputation": 103, "user_id": 7581671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5mLd.jpg?s=128&g=1", "display_name": "LiffeyD", "link": "https://stackoverflow.com/users/7581671/liffeyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500466892, "creation_date": 1500457979, "last_edit_date": 1500466892, "question_id": 45187005, "link": "https://stackoverflow.com/questions/45187005/bootstrap-sass-broke-devise", "title": "Bootstrap Sass broke devise", "body": "<p>Hi I hope someone can help. I i'm building a news application on rails. I installed devise and act-as-votable for posts. I then installed bootstrap-sass (twbs/bootstrap-sass) and devise wont render to the screen.</p>\n\n<pre><code>&lt;% if user_signed_in? %&gt;       \n    &lt;div class=\"index_log\"&gt;\n      Hey, your logged in as &lt;strong&gt;&lt;%= current_user.email %&gt;&lt;/strong&gt;.\n  &lt;% if user_signed_in? %&gt;     \n        &lt;%= button_to \"Log Out\", destroy_user_session_path, method: :delete, class: 'btn btn-default navbar-btn' %&gt;\n  &lt;% else %&gt;\n    &lt;%= link_to \"Log In\", new_user_session_path, class: 'btn btn-default navbar-btn', method: :get %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>When I go go to the login page, enter my username and password, nothing happens.\nOr else I create a new user, again nothing happens.\nAny Ideas - I would add code below but I'm not sure what to add.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1500456807, "creation_date": 1500456807, "answer_id": 45186537, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length/45186537#45186537", "title": "Find the last occurence of a string being a certain length", "body": "<p>Simply <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-reverse\" rel=\"nofollow noreferrer\">reverse</a> your words array before applying <code>max_by</code>.</p>\n\n<p>The first longest word from the reversed array will be the last one in your sentence.</p>\n"}, {"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500457423, "post_id": 45186542, "comment_id": 77340902, "body": "I am slightly confused how the &#39;reverse&#39; method would find the last instance of the word with the longest length?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500457469, "post_id": 45186542, "comment_id": 77340941, "body": "<code>max_by</code> finds that. But the first one. So, first, we reverse the array"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1503908846, "last_edit_date": 1503908846, "creation_date": 1500456821, "answer_id": 45186542, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length/45186542#45186542", "title": "Find the last occurence of a string being a certain length", "body": "<p>What if we took advantage of <code>reverse</code>?</p>\n\n<pre><code>\"asd qweewe lol qwerty df qwsazx\".split.reverse_each.max_by(&amp;:length)\n=&gt; \"qwsazx\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1504148317, "last_edit_date": 1504148317, "creation_date": 1500459943, "answer_id": 45187784, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length/45187784#45187784", "title": "Find the last occurence of a string being a certain length", "body": "<p>You can use <code>inject</code> which will replace the maximum only if (via <code>&lt;=</code>) it's matched or improved upon. By default <code>inject</code> takes the first element of its receiver.</p>\n\n<pre><code>str.split.inject { |m,s| m.size &lt;= s.size ?  s : m }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1500472598, "post_id": 45188672, "comment_id": 77352791, "body": "Also, this works because <code>sort_by</code> is a stable sort."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1500471333, "last_edit_date": 1500471333, "creation_date": 1500462197, "answer_id": 45188672, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length/45188672#45188672", "title": "Find the last occurence of a string being a certain length", "body": "<p>can do this way also:</p>\n\n<pre><code> &gt; \"asd qweewe lol qwerty df qwsazx\".split.sort_by(&amp;:length).last\n #=&gt; \"qwsazx\"\n</code></pre>\n\n<p><strong>Note:</strong> You can <code>split</code> words and <code>sort</code> by <code>length</code> in <strong>ascending</strong>(default) order and take the <code>last</code> word</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1500535477, "post_id": 45205252, "comment_id": 77381984, "body": "This doesn&#39;t work. For example, try with the string <code>&quot;asd qweewe lol qwerty df qwsazx hellos&quot;</code>."}, {"owner": {"reputation": 3204, "user_id": 4165377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xT7vO.png?s=128&g=1", "display_name": "Massimiliano Kraus", "link": "https://stackoverflow.com/users/4165377/massimiliano-kraus"}, "edited": false, "score": 0, "creation_date": 1500562988, "post_id": 45205252, "comment_id": 77403284, "body": "In order to make your answer feasible for this site, you better <i>explain</i> your solution, instead of just posting code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1503898972, "post_id": 45205252, "comment_id": 78783258, "body": "I believe sawa meant to replace <code>max_by(&amp;:length)</code> in the OP&#39;s code with <code>max_by.with_index{|e, i| [e.length, i]}</code>. (sawa note the omission.) That way, should two words have the same length, the tie goes to the one with the greater index. (See the third paragraph of the doc for <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\">Array#&lt;=&gt;</a> for an explanation of how Ruby orders arrays.)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1500525286, "creation_date": 1500525286, "answer_id": 45205252, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length/45205252#45205252", "title": "Find the last occurence of a string being a certain length", "body": "<pre><code>max_by.with_index{|e, i| [e, i]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1503898584, "creation_date": 1503898584, "answer_id": 45912306, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length/45912306#45912306", "title": "Find the last occurence of a string being a certain length", "body": "<p>There's no need to convert the string to an array.</p>\n\n<pre><code>def longest_word(str)\n  str.gsub(/[[:alpha:]]+/).\n      each_with_object('') {|s,longest| longest.replace(s) if s.size &gt;= longest.size}\nend\n\nlongest_word \"Many dogs love to swim in the sea\"\n  #=&gt; \"swim\"\n</code></pre>\n\n<p>Two points.</p>\n\n<ul>\n<li>I've used <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> to create an enumerator that will feed words to <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable.#each_with_object</a>. The string argument is not modified. This is an usual use of <code>gsub</code> that I've been able to use to advantage in several situations.</li>\n<li>Within the block it's necessary to use <code>longest.replace(s)</code> rather than <code>longest = s</code>. That's because <code>each_with_object</code> returns the originally given object (usually modified by the block), but does not update that object on each iteration. <code>longest = s</code> merely returns <code>s</code> (is equivalent to just <code>s</code>) but does not alter the value of the block variable. By contrast, <code>longest.replace(s)</code> modifies the original object. </li>\n</ul>\n\n<p>With regard to the second of these two points, it is interesting to contrast the use of <code>each_with_object</code> with <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">Enumerable#reduce</a> (aka <code>inject</code>).</p>\n\n<pre><code>  str.gsub(/[[:alpha:]]+/).\n      reduce('') {|longest,s| s.size &gt;= longest.size ? s : longest }\n    #=&gt; \"swim\"\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 45186542, "answer_count": 6, "score": 1, "last_activity_date": 1504148317, "creation_date": 1500456608, "question_id": 45186449, "link": "https://stackoverflow.com/questions/45186449/find-the-last-occurence-of-a-string-being-a-certain-length", "title": "Find the last occurence of a string being a certain length", "body": "<p>I know there is a method to find the largest string in an array</p>\n\n<pre><code>def longest_word(string_of_words)\n  x = string_of_words.split(\" \").max_by(&amp;:length)\nend\n</code></pre>\n\n<p>However, if there are multiple words with the longest length, how do i return the last instance of the word with the longest length? Is there a method and do I use indexing?</p>\n\n<p>Benjamin</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-datastore"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1500456542, "post_id": 45186077, "comment_id": 77340215, "body": "Please post the error log"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1500458863, "post_id": 45186077, "comment_id": 77341965, "body": "There is a lot of unrelated code here. I suggest you try to find a simpler example that produces the same error."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500456332, "post_id": 45186135, "comment_id": 77340091, "body": "I&#39;m assuming you meant changing posts in the index method to post. post is the same in the controller and the new.html.erb file. I&#39;m still getting the same error"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500456408, "post_id": 45186135, "comment_id": 77340141, "body": "@KaodilichiNwuda Can you update the question with full error message?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500456855, "post_id": 45186135, "comment_id": 77340469, "body": "@KaodilichiNwuda You have <code>@posts</code> in <code>new</code> method. Change it to <code>@post</code> and check again"}, {"owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500457017, "post_id": 45186135, "comment_id": 77340571, "body": "sorry I forget to update the controller code. I&#39;m still getting the same error"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500457081, "post_id": 45186135, "comment_id": 77340618, "body": "@KaodilichiNwuda Try restarting the server"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500457793, "post_id": 45186135, "comment_id": 77341184, "body": "@KaodilichiNwuda Update the question with <code>routes.rb</code>"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1500455859, "creation_date": 1500455859, "answer_id": 45186135, "question_id": 45186077, "link": "https://stackoverflow.com/questions/45186077/ror-nomethoderror-in-postsnew/45186135#45186135", "title": "RoR NoMethodError in Posts#new", "body": "<p>You have defined <code>@posts</code> in <code>new</code> method but you are using <code>@post</code> in the <code>new.html.erb</code>. Which is the reason for the error. Keep the same name either <code>@posts</code> or <code>@post</code></p>\n"}, {"comments": [{"owner": {"reputation": 1319, "user_id": 511209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6b25434aee590d1acee954558528aa?s=128&d=identicon&r=PG", "display_name": "Shadow Radiance", "link": "https://stackoverflow.com/users/511209/shadow-radiance"}, "reply_to_user": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "edited": false, "score": 0, "creation_date": 1500466012, "post_id": 45187351, "comment_id": 77347148, "body": "@KaodilichiNwuda If the answer solves your problem, please mark it as the accepted answer for your question."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1500458807, "creation_date": 1500458807, "answer_id": 45187351, "question_id": 45186077, "link": "https://stackoverflow.com/questions/45186077/ror-nomethoderror-in-postsnew/45187351#45187351", "title": "RoR NoMethodError in Posts#new", "body": "<p>Your <code>Post</code> Model is a plain ruby object but you treat it like an ActiveModel/ActiveRecord object.</p>\n\n<p>Try adding </p>\n\n<p><code>include ActiveModel::Model</code> inside the <code>Post</code> model like so:</p>\n\n<pre><code>class Post\n  include ActiveModel::Model\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7590131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d14de87fc6471db5c13d5124b3cf7434?s=128&d=identicon&r=PG&f=1", "display_name": "Kaodilichi Nwuda", "link": "https://stackoverflow.com/users/7590131/kaodilichi-nwuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 45187351, "answer_count": 2, "score": -1, "last_activity_date": 1500458807, "creation_date": 1500455728, "last_edit_date": 1500457956, "question_id": 45186077, "link": "https://stackoverflow.com/questions/45186077/ror-nomethoderror-in-postsnew", "title": "RoR NoMethodError in Posts#new", "body": "<p>So I've been building an app using rails and the google datastore. I keep encountering an error in my new.html.erb file where I get the NoMethodError. </p>\n\n<p>I've scoured looking for a solution to my problem and it's most likely a simple typo somewhere in my code. I've been staring at the code for hours so maybe some fresh new eyes can help me figure it out</p>\n\n<p><strong>This is my posts_controller.rb</strong></p>\n\n<pre><code>    class PostsController &lt; ApplicationController\n\n  PER_PAGE = 10\n\n  def index\n     @post, @cursor = Post.query limit: PER_PAGE, cursor: params[:cursor]\n  end\n\n  def new\n    @post = Post.new\n  end\n\n  def create\n    @post = Post.new post_params\n\n    if @post.save\n      flash[:success] = \"Posted\"\n      redirect_to posts_path(@post)\n    else\n      render :new\n      end\n  end\n\n  def edit\n    @post = Post.find(params[:id])\n  end\n\n  def update\n    @post = Post.find(params[:id])\n\n    if @post.update(post_params)\n      redirect_to @post\n    else\n      render 'edit'\n      end\n  end\n\n  def show\n    @post = Post.find(params[:id])\n  end\n\n  def destroy\n    @post = Post.find(params[:id])\n    @post.destroy\n\n    redirect_to posts_path\n  end\n\n  private\n    def post_params\n        params.require(:post).permit(:title, :body)\n      end\n\nend\n</code></pre>\n\n<p><strong>This is my new.html.erb</strong></p>\n\n<pre><code>     &lt;h1&gt;Create Post&lt;/h1&gt;\n    &lt;%= form_for @post do |f| %&gt;\n    &lt;% if @post.errors.any? %&gt;\n        &lt;% @post.errors.full_messages.each do |msg| %&gt;\n            &lt;div class=\"alert alert danger\"&gt;&lt;%= msg %&gt;&lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label:title %&gt;&lt;br&gt;\n        &lt;%= f.text_field(:title, {:class =&gt; 'form-control'}) %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label:body %&gt;&lt;br&gt;\n        &lt;%= f.text_area(:body, {:class =&gt; 'form-control'}) %&gt;\n    &lt;/div&gt;\n    &lt;p&gt;\n    &lt;%= f.submit({:class =&gt; 'btn btn-primary'}) %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>This is my model post.rb</strong></p>\n\n<pre><code>class Post\n    attr_accessor :title, :body\n\n    # Return a Google::Cloud::Datastore::Dataset for the configured dataset.\n     # The dataset is used to create, read, update, and delete entity objects.\n        def self.dataset\n        @dataset ||= Google::Cloud::Datastore.new(\n        project: Rails.application.config.\n                     database_configuration[Rails.env][\"dataset_id\"]\n    )\n\n\nend\n\n# Query Book entities from Cloud Datastore.\n#\n# returns an array of Book query results and a cursor\n# that can be used to query for additional results.\ndef self.query options = {}\n  query = Google::Cloud::Datastore::Query.new\n  query.kind \"Post\"\n  query.limit options[:limit]   if options[:limit]\n  query.cursor options[:cursor] if options[:cursor]\n\n  results = dataset.run query\n  posts   = results.map {|entity| Book.from_entity entity }\n\n  if options[:limit] &amp;&amp; results.size == options[:limit]\n    next_cursor = results.cursor\n  end\n\n  return posts, next_cursor\nend\n\n  # [START from_entity]\ndef self.from_entity entity\n  post = Post.new\n  post.id = entity.key.id\n  entity.properties.to_hash.each do |name, value|\n    post.send \"#{name}=\", value if post.respond_to? \"#{name}=\"\n  end\n  post\nend\n # [END from_entity]\n\n  # [START find]\n  # Lookup Book by ID.  Returns Book or nil.\n  def self.find id\n    query    = Google::Cloud::Datastore::Key.new \"Post\", id.to_i\n    entities = dataset.lookup query\n\n    from_entity entities.first if entities.any?\n  end\n  # [END find]\n\n\n # [START validations]\n  # Add Active Model validation support to Book class.\n  include ActiveModel::Validations\n\n  validates :title, presence: true\n\n  # [END validations]\n\n  # Save the book to Datastore.\n# @return true if valid and saved successfully, otherwise false.\ndef save\n  if valid?\n    entity = to_entity\n    Post.dataset.save entity\n    self.id = entity.key.id\n    true\n  else\n    false\n  end\nend\n\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'auth/:provider/callback', to: 'sessions#create'\n  get 'auth/failure', to: redirect('/')\n  get 'signout', to: 'sessions#destroy', as: 'signout'\n\n  resources :sessions, only: [:create, :destroy]\n  resource :main, only: [:show]\n\n  resources :posts\n\n  root to: 'posts#index', as: \"home\"\n\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p><strong>EDIT: This is the error log that I'm getting</strong></p>\n\n<pre><code> ActionView::Template::Error (undefined method `to_key' for #&lt;Post:0x2ae2c68&gt;\nDid you mean?  to_query):\n    1: &lt;h1&gt;Create Post&lt;/h1&gt;\n    2: &lt;%= form_for @post do |f| %&gt;\n    3:     &lt;% if @post.errors.any? %&gt;\n    4:         &lt;% @post.errors.full_messages.each do |msg| %&gt;\n    5:             &lt;div class=\"alert alert danger\"&gt;&lt;%= msg %&gt;&lt;/div&gt;\n\napp/views/posts/new.html.erb:2:in `_app_views_posts_new_html_erb__241418705_22466964'\n</code></pre>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1500455527, "post_id": 45185925, "comment_id": 77339523, "body": "you spelled &quot;Default&quot; as &quot;Deafult&quot; in your console example"}, {"owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1500455873, "post_id": 45185925, "comment_id": 77339771, "body": "@SimpleLime That was a typo in question - it is corrected now. Thanks for spotting it. ;)"}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1500457724, "last_edit_date": 1500457724, "creation_date": 1500456417, "answer_id": 45186376, "question_id": 45185925, "link": "https://stackoverflow.com/questions/45185925/cant-find-any-node-using-nokogiri/45186376#45186376", "title": "Can&#39;t find any node using Nokogiri", "body": "<p>On the <a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html\" rel=\"nofollow noreferrer\">\"Searching a XML/HTML document\"</a> page on the Nokogiri site, there's an ATOM example</p>\n\n<blockquote>\n  <p>Let\u2019s take this atom feed for example:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;feed xmlns=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;title&gt;Example Feed&lt;/title&gt;\n  &lt;link href=\"http://example.org/\"/&gt;\n  &lt;updated&gt;2003-12-13T18:30:02Z&lt;/updated&gt;\n  &lt;author&gt;\n    &lt;name&gt;John Doe&lt;/name&gt;\n  &lt;/author&gt;\n  &lt;id&gt;urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6&lt;/id&gt;\n  &lt;entry&gt;\n    &lt;title&gt;Atom-Powered Robots Run Amok&lt;/title&gt;\n    &lt;link href=\"http://example.org/2003/12/13/atom03\"/&gt;\n    &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a&lt;/id&gt;\n    &lt;updated&gt;2003-12-13T18:30:02Z&lt;/updated&gt;\n    &lt;summary&gt;Some text.&lt;/summary&gt;\n  &lt;/entry&gt;\n&lt;/feed&gt;\n</code></pre>\n  \n  <p>If we stick to the convention, we can grab all title tags like this</p>\n\n<pre><code>@doc.xpath('//xmlns:title') # =&gt; [\"&lt;title&gt;Example Feed&lt;/title&gt;\", \"&lt;title&gt;Atom-Powered Robots Run Amok&lt;/title&gt;\"]\n</code></pre>\n</blockquote>\n\n<p>Since your example input has</p>\n\n<pre><code>&lt;Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt;\n</code></pre>\n\n<p>It should work to do</p>\n\n<pre><code>puts doc.xpath(\"//xmlns:Default[@Extension='png']\")\n# &lt;Default Extension=\"png\" ContentType=\"image/png\"/&gt;\n</code></pre>\n\n<p>Alternatively, you can use <code>css</code> instead</p>\n\n<pre><code>puts doc.css(\"Types Default[Extension='png']\")\n# &lt;Default Extension=\"png\" ContentType=\"image/png\"/&gt;\n</code></pre>\n\n<p>There's also a section on the page about <a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html#but_i_m_lazy_and_don_t_want_to_deal_with_namespaces_\" rel=\"nofollow noreferrer\">not dealing with namespaces</a> if you're interested</p>\n"}], "owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 45186376, "answer_count": 1, "score": 1, "last_activity_date": 1500457724, "creation_date": 1500455333, "last_edit_date": 1500455830, "question_id": 45185925, "link": "https://stackoverflow.com/questions/45185925/cant-find-any-node-using-nokogiri", "title": "Can&#39;t find any node using Nokogiri", "body": "<p>I have <code>[Content_Types].xml</code> file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt;\n  &lt;Default Extension=\"xml\" ContentType=\"application/xml\"/&gt;\n  &lt;Default Extension=\"jpeg\" ContentType=\"image/jpeg\"/&gt;\n  &lt;Default Extension=\"png\" ContentType=\"image/png\"/&gt;\n  &lt;Default Extension=\"jpg\" ContentType=\"image/jpeg\"/&gt;\n  &lt;Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/&gt;\n  &lt;Override PartName=\"/word/document.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml\"/&gt;\n  &lt;Override PartName=\"/customXml/itemProps1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.customXmlProperties+xml\"/&gt;\n  &lt;Override PartName=\"/word/numbering.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml\"/&gt;\n  &lt;Override PartName=\"/word/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml\"/&gt;\n  &lt;Override PartName=\"/word/settings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml\"/&gt;\n  &lt;Override PartName=\"/word/webSettings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.webSettings+xml\"/&gt;\n  &lt;Override PartName=\"/word/footnotes.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml\"/&gt;\n  &lt;Override PartName=\"/word/endnotes.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml\"/&gt;\n  &lt;Override PartName=\"/word/header1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml\"/&gt;\n  &lt;Override PartName=\"/word/footer1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml\"/&gt;\n  &lt;Override PartName=\"/word/header2.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml\"/&gt;\n  &lt;Override PartName=\"/word/footer2.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml\"/&gt;\n  &lt;Override PartName=\"/word/fontTable.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml\"/&gt;\n  &lt;Override PartName=\"/word/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/&gt;\n  &lt;Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/&gt;\n  &lt;Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/&gt;\n&lt;/Types&gt;\n</code></pre>\n\n<p>I've loaded it using Nokogiri:</p>\n\n<pre><code>doc = File.open(\"[Content_Types].xml\") { |f| Nokogiri::XML(f) }\n</code></pre>\n\n<p>I want to find the <code>&lt;Default Extension=\"png\" ContentType=\"image/png\"/&gt;</code> node but I can't find anything:</p>\n\n<pre><code>irb(main):048:0&gt; doc.xpath('//Default')\n=&gt; []\nirb(main):049:0&gt; doc.xpath('//Override')\n=&gt; []\nirb(main):050:0&gt; doc.xpath('//Types')\n=&gt; []\nirb(main):051:0&gt; doc.xpath('Types')\n=&gt; []\n</code></pre>\n\n<p>Why?</p>\n\n<p>The xml is loaded correctly:</p>\n\n<pre><code>irb(main):003:0&gt; doc\n=&gt;\n#&lt;Nokogiri::XML::Document:0x3fcddd413ad0 name=\"document\" children=[#&lt;Nokogiri::XML::Element:0x3fcddd41347c name=\"Types\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; children=[#&lt;Nokogiri::XML::Text:0x3fcddd412f18 \"\\n\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd412e14 name=\"Default\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd412d9c name=\"Extension\" value=\"xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd412d88 name=\"ContentType\" value=\"application/xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd4126bc \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd413558 name=\"Default\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd40ffac name=\"Extension\" value=\"rels\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd40ff84 name=\"ContentType\" value=\"application/vnd.openxmlformats-package.relationships+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd40ef08 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd40eddc name=\"Default\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd40ecec name=\"Extension\" value=\"jpeg\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd40ecc4 name=\"ContentType\" value=\"image/jpeg\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd40bca4 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd40bb78 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd40bac4 name=\"PartName\" value=\"/word/document.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd40ba88 name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd40a8cc \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd40a7f0 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd40a778 name=\"PartName\" value=\"/word/styles.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd40a764 name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd099d00 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd099bc0 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd099b34 name=\"PartName\" value=\"/word/settings.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd099b20 name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd098e8c \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd098d60 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd098cc0 name=\"PartName\" value=\"/word/webSettings.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd098cac name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.wordprocessingml.webSettings+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd08ded8 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd08dd98 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd08dce4 name=\"PartName\" value=\"/word/fontTable.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd08dca8 name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd08cdf8 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd08cd1c name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd08cc54 name=\"PartName\" value=\"/word/theme/theme1.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd08cc40 name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.theme+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd08c0d8 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd08c010 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd089fa4 name=\"PartName\" value=\"/docProps/core.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd089f90 name=\"ContentType\" value=\"application/vnd.openxmlformats-package.core-properties+xml\"&gt;]&gt;, #&lt;Nokogiri::XML::Text:0x3fcddd089388 \"\\n  \"&gt;, #&lt;Nokogiri::XML::Element:0x3fcddd089248 name=\"Override\" namespace=#&lt;Nokogiri::XML::Namespace:0x3fcddd4133b4 href=\"http://schemas.openxmlformats.org/package/2006/content-types\"&gt; attributes=[#&lt;Nokogiri::XML::Attr:0x3fcddd089144 name=\"PartName\" value=\"/docProps/app.xml\"&gt;, #&lt;Nokogiri::XML::Attr:0x3fcddd089130 name=\"ContentType\" value=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"&gt;]&gt;]&gt;]&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500454787, "post_id": 45185632, "comment_id": 77339015, "body": "Update your question with the form and params hash that appears in th log"}, {"owner": {"reputation": 145, "user_id": 6274382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p5SjvoHPqr4/AAAAAAAAAAI/AAAAAAAAAIQ/wAnLsFhIc5I/photo.jpg?sz=128", "display_name": "Raounak Sharma", "link": "https://stackoverflow.com/users/6274382/raounak-sharma"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500455363, "post_id": 45185632, "comment_id": 77339397, "body": "Done, please review now."}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 145, "user_id": 6274382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p5SjvoHPqr4/AAAAAAAAAAI/AAAAAAAAAIQ/wAnLsFhIc5I/photo.jpg?sz=128", "display_name": "Raounak Sharma", "link": "https://stackoverflow.com/users/6274382/raounak-sharma"}, "edited": false, "score": 0, "creation_date": 1500456354, "post_id": 45185987, "comment_id": 77340106, "body": "@RaounaqSharma Glad to help :) Mark the answer as accepted :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1500455487, "creation_date": 1500455487, "answer_id": 45185987, "question_id": 45185632, "link": "https://stackoverflow.com/questions/45185632/nested-form-in-rails-in-many-to-many-relation-via-through-table-not-saving-attri/45185987#45185987", "title": "Nested form in rails in many-to-many relation via through table not saving attributes", "body": "<blockquote>\n  <p>I am getting tags_attributes in params. But when I save the blog\n  object it does save the tag object to it but it does save it by name =\n  nil.</p>\n</blockquote>\n\n<p>As per the <code>params</code> hash, you are sending multiple values for the <code>name</code>, so you need to modify <code>blog_params</code> to accept multiple values for the <code>name</code>.</p>\n\n<pre><code>def blog_params\n  params.require(:blog).permit(:blog,\n                               :title,\n                               :slugurl,\n                               tags_attributes: [name: []]\n  )\nend\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6274382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p5SjvoHPqr4/AAAAAAAAAAI/AAAAAAAAAIQ/wAnLsFhIc5I/photo.jpg?sz=128", "display_name": "Raounak Sharma", "link": "https://stackoverflow.com/users/6274382/raounak-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 45185987, "answer_count": 1, "score": 0, "last_activity_date": 1500455487, "creation_date": 1500454605, "last_edit_date": 1500455321, "question_id": 45185632, "link": "https://stackoverflow.com/questions/45185632/nested-form-in-rails-in-many-to-many-relation-via-through-table-not-saving-attri", "title": "Nested form in rails in many-to-many relation via through table not saving attributes", "body": "<p>I have a Blog model and a Tag model which are having a many-to-many association via through table (model : BlogTag) blog_tags. I have implemented a nested form in blogs to add tags to them. </p>\n\n<p>I am getting tags_attributes in params. But when I save the blog object it does save the tag object to it but it does save it by name = nil.</p>\n\n<blockquote>\n  <p>Blog model</p>\n</blockquote>\n\n<pre><code>class Blog &lt; ActiveRecord::Base\n\n  extend FriendlyId\n  friendly_id :slugurl, use: :slugged, slug_column: :slugurl\n\n  has_many :blog_tags, dependent: :destroy\n  has_many :tags, through: :blog_tags\n\n  accepts_nested_attributes_for :tags\n\n  def self.search(search)\n    words = search.to_s.downcase.strip.split.uniq\n    words.map! { |word| \"tag ~* '\\\\y#{word}\\\\y'\" }\n    psql = words.join(\" OR \")\n    self.where(psql)\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>Tag model</p>\n</blockquote>\n\n<pre><code>class Tag &lt; ActiveRecord::Base\n  has_many :blog_tags, dependent: :destroy\n  has_many :blogs, through: :blog_tags\nend\n</code></pre>\n\n<blockquote>\n  <p>BlogTag model</p>\n</blockquote>\n\n<pre><code>class BlogTag &lt; ActiveRecord::Base\n  belongs_to :blog\n  belongs_to :tag\nend\n</code></pre>\n\n<blockquote>\n  <p>blog_controller</p>\n</blockquote>\n\n<pre><code>  def new\n    @blog = Blog.new\n    @blog.tags.build\n  end\n\n  def create\n    @blog = Blog.new(blog_params)\n    save_tag_for\n    byebug\n    respond_to do |format|\n      if @blog.save\n        format.html { redirect_to blogs_path, notice: 'Blog was successfully created.' }\n        format.json { render :index, status: :created, location: @blog}\n      else\n        format.html { render :new }\n        format.json { render json: @blog.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\ndef blog_params\n  params.require(:blog).permit(:blog,\n                               :title,\n                               :slugurl,\n                               tags_attributes: [:name]\n  )\nend\n</code></pre>\n\n<p>Below you can see that in insert command of table tag, name field does not get value hence become nil.</p>\n\n<blockquote>\n  <p>Server logs</p>\n</blockquote>\n\n<pre><code>  (1.2ms)  BEGIN\n  SQL (0.9ms)  INSERT INTO \"blogs\" (\"blog\", \"title\", \"slugurl\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5) RETURNING \"id\"  [[\"blog\", \"&lt;p&gt;adsfadsfdfas&lt;/p&gt;\\r\\n\"], [\"title\", \"test 11\"], [\"slugurl\", \"asdfdf\"], [\"created_at\", \"2017-07-19 08:31:32.677338\"], [\"updated_at\", \"2017-07-19 08:31:32.677338\"]]\n  SQL (0.6ms)  INSERT INTO \"tags\" (\"created_at\", \"updated_at\") VALUES ($1, $2) RETURNING \"id\"  [[\"created_at\", \"2017-07-19 08:31:32.684302\"], [\"updated_at\", \"2017-07-19 08:31:32.684302\"]]\n  SQL (1.1ms)  INSERT INTO \"blog_tags\" (\"blog_id\", \"tag_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"blog_id\", 20], [\"tag_id\", 18], [\"created_at\", \"2017-07-19 08:31:32.706957\"], [\"updated_at\", \"2017-07-19 08:31:32.706957\"]]\n   (8.3ms)  COMMIT\nRedirected to http://localhost:3000/blogs\nCompleted 302 Found in 33792ms (ActiveRecord: 15.8ms)\n</code></pre>\n\n<blockquote>\n  <p>Params </p>\n</blockquote>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"+1ZLYPJkQCVOkOSt6dmy9z12XgOMP+OYu0XOOzKUlv+xldd5fkB2RR/oA7qpn53YE+82FDjVeO2ylHkPIEWfVw==\", \"blog\"=&gt;{\"title\"=&gt;\"Programming Languages\", \"tags_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;[\"Python\", \"C#\", \".NET\"]}}, \"slugurl\"=&gt;\"pro-lang\", \"blog\"=&gt;\"&lt;p&gt;asdfasdfasdf afaadf&lt;/p&gt;\\r\\n\"}, \"commit\"=&gt;\"Submit\", \"controller\"=&gt;\"blogs\", \"action\"=&gt;\"create\"}\n</code></pre>\n\n<blockquote>\n  <p>Form (view)</p>\n</blockquote>\n\n<pre><code>&lt;%= form_for(@blog) do |f| %&gt;\n  &lt;% if @blog.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@blog.errors.count, \"error\") %&gt; prohibited this blog from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @blog.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"form-group\"&gt;\n            &lt;%= f.label :title ,class: 'control-label' %&gt;&lt;br&gt;\n            &lt;%= f.text_field :title ,class: 'form-control' %&gt;\n\n            &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"form-group\"&gt;\n              &lt;%= f.fields_for :tags do |tag_builder| %&gt;\n                  &lt;%= tag_builder.label :name, \"Tag\", class: 'control-label' %&gt;&lt;br&gt;\n                  &lt;%= tag_builder.select :name, Tag.all.pluck(:name,:name), {}, {multiple: true, class: \"selectize\" } %&gt;\n              &lt;%end%&gt;\n              &lt;%#= form.select :category_id, Category.all.pluck(:name,:id), {}, {multiple: true, class: \"selectize\"} %&gt;\n              &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n              &lt;/div&gt;\n          &lt;div class=\"row\"&gt;\n            &lt;div class=\"form-group\"&gt;\n            &lt;%= f.label :slugurl ,class: 'control-label' %&gt;&lt;br&gt;\n            &lt;%= f.text_field :slugurl ,class: 'form-control' %&gt;\n\n            &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n\n          &lt;div class=\"row\"&gt;\n            &lt;div class='form-group'&gt;\n             &lt;%= f.label :blog ,class:'control-label'%&gt;&lt;br&gt;\n             &lt;%= f.cktext_area :blog, rows: 10,class:'form-control' %&gt;\n            &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n              &lt;div class=\"form-actions mg-t-lg\"&gt;\n                &lt;div class=\"row\"&gt;\n                  &lt;div class=\"col-sm-7 col-sm-offset-5\"&gt;\n                    &lt;div class=\"text-center-xs\"&gt;\n                      &lt;input type=\"submit\" name=\"commit\" value=\"Submit\" class=\"btn btn-contrast\" /&gt;\n                    &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500452546, "post_id": 45184811, "comment_id": 77337426, "body": "Try replacing <code>video</code> with <code>self</code>"}, {"owner": {"reputation": 56, "user_id": 7320797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06z01.jpg?s=128&g=1", "display_name": "Matija Munjakovic", "link": "https://stackoverflow.com/users/7320797/matija-munjakovic"}, "edited": false, "score": 0, "creation_date": 1500452888, "post_id": 45184811, "comment_id": 77337648, "body": "If what you&#39;re attempting to do is replicate the same structure from the post you&#39;re following, then your Video model should also have       <code>belongs_to :some_model</code>  and then you&#39;d check for the number of videos on that particular models with      <code>self.some_model.video(:reload).count</code> (although the <code>self</code> part is not necessary).  The way you&#39;re doing it now doesn&#39;t make much sense."}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500453115, "post_id": 45184811, "comment_id": 77337807, "body": "I understand that, I was just trying to do it in one model. Is there another way using just the Video model? Thankyou pavan I did try that before with no luck."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500454037, "post_id": 45185136, "comment_id": 77338460, "body": "Hi. It is giving me error <code>ActiveRecord::RecordNotFound in VideosController#create Couldn&#39;t find Video without an ID</code> I actually am not sure what that means, I have two videos in database with id: 1 and id: 2?"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "reply_to_user": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500454518, "post_id": 45185136, "comment_id": 77338829, "body": "But you&#39;re using it in #create action so I suppose your video is still not persisted. Seems you&#39;re on wrong way, as post you&#39;re following actually check videos as references and that&#39;s true. You&#39;re trying to check <code>count</code> on your instantiated object which is wrong !"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500454947, "post_id": 45185136, "comment_id": 77339106, "body": "I dont understand the difference if it is to a user or to a specific model, shouldnt the count count the amount of records in the db? So before create validate runs and returns the errors?"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "reply_to_user": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500455624, "post_id": 45185136, "comment_id": 77339580, "body": "Maybe you can just tell what exactly do you want to achieve, it would be much easier to help you ;)"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500456222, "post_id": 45185136, "comment_id": 77340011, "body": "Yes completely clear. I just wanted to check the count of the videos on the video model before create so that people can not add any more than 9 videos?"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500456269, "post_id": 45185136, "comment_id": 77340050, "body": "To be clear this is a test app, my &#39;real&#39; app has a association, but was doing some testing on one model.."}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "reply_to_user": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1500456697, "post_id": 45185136, "comment_id": 77340336, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149571/discussion-between-zauzaj-and-lee-eather\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "is_accepted": true, "score": 1, "last_activity_date": 1500455057, "last_edit_date": 1500455057, "creation_date": 1500453258, "answer_id": 45185136, "question_id": 45184811, "link": "https://stackoverflow.com/questions/45184811/getting-undefined-method-ruby-on-rails-on-validation-creating-new-object/45185136#45185136", "title": "Getting `undefined method` ruby on rails on validation creating new object?", "body": "<p>as <code>video</code> method actually doesn't exists on your model, and based on post you're following it's actually a reference you should just simple replace <code>video</code> with <code>self</code>. Something like this: if self.reload.count >= 9 errors.add(:base, \"Exceeded video limit of 9 videos\") end Let me know if this works for you ! Regards</p>\n\n<hr>\n\n<p><strong>New Answer :</strong> </p>\n\n<p>On post you're following, they are checking <code>videos</code> as association and then checking if its count bigger then 9. </p>\n\n<p>How it works is actually is that the main object which is referenced to the <code>videos</code> is not stored to DB but it has <code>videos</code> association so you can check length/count of that. </p>\n\n<p>In your case, if you're trying to do that on your main object ( <code>Video</code> ) you will get an error that it couldn't be find as it's not persisted but just instantiated as well as your validation method is called before <code>create</code>.</p>\n\n<p>This way you're trying to achieve, it's logical only for validating creating some referenced model, which can't be stored has more then 9 videos. </p>\n\n<p>Hope it's clear enough ? </p>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 45185136, "answer_count": 1, "score": 0, "last_activity_date": 1500455057, "creation_date": 1500452391, "question_id": 45184811, "link": "https://stackoverflow.com/questions/45184811/getting-undefined-method-ruby-on-rails-on-validation-creating-new-object", "title": "Getting `undefined method` ruby on rails on validation creating new object?", "body": "<p>I am following this <a href=\"https://stackoverflow.com/questions/7863618/rails-3-1-limit-user-created-objects\">post</a> and trying to add a validate method before object creation. I keep getting <code>undefined method 'video' for #&lt;Video:0xbe430a0&gt;</code> I am reading this article here <a href=\"http://ruby-for-beginners.rubymonstas.org/\" rel=\"nofollow noreferrer\">http://ruby-for-beginners.rubymonstas.org/</a> getting to know how ruby works but cannot figure out why I get this error.</p>\n\n<p><a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveModel/Validations/ClassMethods.html#method-i-validate\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/v5.1/classes/ActiveModel/Validations/ClassMethods.html#method-i-validate</a></p>\n\n<p>If I call new on a ruby object and save it with a validation what do I need to do to the video variable to not get <code>undefined method</code>?</p>\n\n<pre><code>class Video &lt; ApplicationRecord\n\n  validate :video_count_within_limit, on: :create\n\n  def video_count_within_limit\n    if video(:reload).count &gt;= 9\n      errors.add(:base, \"Exceeded video limit of 9 videos\")\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "answers": [{"tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500453142, "last_edit_date": 1500453142, "creation_date": 1500452549, "answer_id": 45184873, "question_id": 45184659, "link": "https://stackoverflow.com/questions/45184659/get-and-display-all-values-from-database-based-on-option-select-rails/45184873#45184873", "title": "Get and display all values from database based on option select (Rails)", "body": "<p>Look into the <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">Ransack gem</a>.</p>\n\n<p>Heres an example:</p>\n\n<p>After installing the gem in your index controller set it like this:</p>\n\n<pre><code>def index\n  ingredients = Ingredient.where(user_id: current_user)\n  @q = ingredients.ransack(params[:q])\n  @ingredients = @q.result(distinct: true)\nend\n</code></pre>\n\n<p>Now in your view you can set up a search field or dropdown which will filter as required:</p>\n\n<pre><code>&lt;%= search_form_for @q do |f| %&gt;\n\n  # Search if the name field contains...\n  &lt;%= f.label :Name_cont %&gt;\n  &lt;%= f.search_field :Name_cont %&gt;\n\n\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You will need to modify this depending on the fields in your database</p>\n"}], "owner": {"reputation": 1, "user_id": 7733914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd230e2cba575c712a141e1d71f369f8?s=128&d=identicon&r=PG&f=1", "display_name": "Malik", "link": "https://stackoverflow.com/users/7733914/malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500453142, "creation_date": 1500451995, "question_id": 45184659, "link": "https://stackoverflow.com/questions/45184659/get-and-display-all-values-from-database-based-on-option-select-rails", "title": "Get and display all values from database based on option select (Rails)", "body": "<p>Hello i need help on my Kitchen inventory website on Ruby on rails. I am facing the issue is.\nI have a table name  <code>Ingredient</code> and its attributes are <code>Name, Image, Description</code>. When i save data in my <code>Ingredient</code> table then i want to display the saved data on my <strong>index view</strong>, AS LIKE when i select option from the option select. Then data will show.</p>\n\n<blockquote>\n  <p>In Simple words on my <strong>Index view</strong> when i select option \"APPLE\" from\n  option select menu then the data is related to \"APPLE\" display on my\n  <strong>index view</strong>. Other wise it does not display.</p>\n</blockquote>\n\n<p>This is my <strong>Index View</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;%= select_tag 'choose ingredient', options_from_collection_for_select(current_user.ingredients.all, 'user_id', 'Name'), id: \"choose ingredient\" %&gt;\n\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Quantity&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @ingredients.each do |ingredient| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= ingredient.Name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= ingredient.Quantity %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Show', ingredient %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Edit', edit_ingredient_path(ingredient) %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Destroy', ingredient, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n\n\n<p>This is my <strong>controller</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class IngredientsController &lt; ApplicationController\r\n  before_action :set_ingredient, only: [:show, :edit, :update, :destroy]\r\n\r\n  # GET /ingredients\r\n  # GET /ingredients.json\r\n  def index\r\n    @ingredients = Ingredient.where(user_id: current_user)\r\n  end\r\n\r\n  # GET /ingredients/1\r\n  # GET /ingredients/1.json\r\n  def show\r\n  end\r\n\r\n  # GET /ingredients/new\r\n  def new\r\n    @ingredient = current_user.ingredients.build\r\n  end\r\n\r\n  # GET /ingredients/1/edit\r\n  def edit\r\n  end\r\n\r\n  # POST /ingredients\r\n  # POST /ingredients.json\r\n  def create\r\n    @ingredient = current_user.ingredients.build(ingredient_params)\r\n\r\n    respond_to do |format|\r\n      if @ingredient.save\r\n        format.html { redirect_to @ingredient, notice: 'Ingredient was successfully created.' }\r\n        format.json { render :show, status: :created, location: @ingredient }\r\n      else\r\n        format.html { render :new }\r\n        format.json { render json: @ingredient.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # PATCH/PUT /ingredients/1\r\n  # PATCH/PUT /ingredients/1.json\r\n  def update\r\n    respond_to do |format|\r\n      if @ingredient.update(ingredient_params)\r\n        format.html { redirect_to @ingredient, notice: 'Ingredient was successfully updated.' }\r\n        format.json { render :show, status: :ok, location: @ingredient }\r\n      else\r\n        format.html { render :edit }\r\n        format.json { render json: @ingredient.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # DELETE /ingredients/1\r\n  # DELETE /ingredients/1.json\r\n  def destroy\r\n    @ingredient.destroy\r\n    respond_to do |format|\r\n      format.html { redirect_to ingredients_url, notice: 'Ingredient was successfully destroyed.' }\r\n      format.json { head :no_content }\r\n    end\r\n  end\r\n\r\n  private\r\n    # Use callbacks to share common setup or constraints between actions.\r\n    def set_ingredient\r\n      @ingredient = Ingredient.find(params[:id])\r\n    end\r\n\r\n    # Never trust parameters from the scary internet, only allow the white list through.\r\n    def ingredient_params\r\n      params.require(:ingredient).permit(:Name, :Quantity)\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><a href=\"https://stackoverflow.com/questions/40061008/get-and-display-all-values-from-database-row-separately-based-on-select-rails\">I try to find the solution on stack overflow but i don't know how i use this for me.</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1500451516, "post_id": 45184163, "comment_id": 77336803, "body": "You need an <code>outer join</code> here, since <code>inner join</code> won\u2019t return orphans."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 4, "creation_date": 1500451955, "post_id": 45184495, "comment_id": 77337056, "body": "Rails 5 has also added a <code>left_outer_joins</code> method -- <a href=\"https://github.com/rails/rails/pull/12071\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/12071</a>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 8, "last_activity_date": 1500451926, "last_edit_date": 1500451926, "creation_date": 1500451527, "answer_id": 45184495, "question_id": 45184163, "link": "https://stackoverflow.com/questions/45184163/activerecord-find-records-that-its-association-count-is-0/45184495#45184495", "title": "ActiveRecord - find records that its association count is 0", "body": "<p>You're using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-joins\" rel=\"noreferrer\"><code>joins</code></a>, which is <code>INNER JOIN</code>, whereas what you need is an <code>OUTER JOIN</code> -\n <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-includes\" rel=\"noreferrer\"><code>includes</code></a>:</p>\n\n<pre><code>SlideGroup.includes(:surveys).group(\"slide_groups.id, surveys.id\").having(\"count(surveys.id) = ?\",0)\n</code></pre>\n\n<p>A bit cleaner query:</p>\n\n<pre><code>SlideGroup.includes(:surveys).where(surveys: { id: nil })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1500458365, "creation_date": 1500458365, "answer_id": 45187153, "question_id": 45184163, "link": "https://stackoverflow.com/questions/45184163/activerecord-find-records-that-its-association-count-is-0/45187153#45187153", "title": "ActiveRecord - find records that its association count is 0", "body": "<p>Finding orphan records has been explained by others.</p>\n\n<p>I see problems with this approach:</p>\n\n<ul>\n<li>There should not be any orphan in the first place</li>\n<li>The presence of a <code>survey.id</code> does not guarantee the presence of a <code>Survey</code></li>\n<li>What about <code>SurveyGroupList</code> that are orphan?</li>\n</ul>\n\n<p>So the proper solution would be to ensure that no orphans are left in the DB. By implementing the proper logic <strong>AND</strong> adding foreign keys with <em>on delete cascade</em> to the DB. You can also add <code>dependent: :destroy</code> option to your associations but this only works if you use <code>#destroy</code> on your models (not <code>delete</code>) and of course does not work if you delete directly via SQL.</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "accepted_answer_id": 45184495, "answer_count": 2, "score": 4, "last_activity_date": 1500471405, "creation_date": 1500450553, "last_edit_date": 1500471405, "question_id": 45184163, "link": "https://stackoverflow.com/questions/45184163/activerecord-find-records-that-its-association-count-is-0", "title": "ActiveRecord - find records that its association count is 0", "body": "<p>In my Ruby on Rails app I have the following model:</p>\n\n<pre><code>class SlideGroup &lt; ApplicationRecord\n  has_many :survey_group_lists, foreign_key: 'group_id'\n  has_many :surveys, through: :survey_group_lists\nend\n</code></pre>\n\n<p>I want to find all orphaned slide groups. Orphaned slide group is slide group which is not connected to any survey. I've been trying following query but it does not return anything and I'm sure that I have orphaned records in my test database:</p>\n\n<pre><code>SlideGroup.joins(:surveys).group(\"slide_groups.id, surveys.id\").having(\"count(surveys.id) = ?\",0)\n</code></pre>\n\n<p>this generates following sql query:</p>\n\n<pre><code>SlideGroup Load (9.3ms)  SELECT \"slide_groups\".* FROM \"slide_groups\" INNER JOIN \"survey_group_lists\" ON \"survey_group_lists\".\"group_id\" = \"slide_groups\".\"id\" INNER JOIN \"surveys\" ON \"surveys\".\"id\" = \"survey_group_lists\".\"survey_id\" GROUP BY slide_groups.id, surveys.id HAVING (count(surveys.id) = 0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1500475858, "post_id": 45183568, "comment_id": 77355528, "body": "What is your question - decoding the PKCS-8 representation of your private key, or signing the data using SHA-256? What have you tried? Please show your code."}, {"owner": {"reputation": 1, "user_id": 8329762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49cce785f7bd3e00c6c90656bdcce93d?s=128&d=identicon&r=PG&f=1", "display_name": "steevan", "link": "https://stackoverflow.com/users/8329762/steevan"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1500875028, "post_id": 45183568, "comment_id": 77509293, "body": "I am new to ruby on rails. I am not sure how to achieve this one. Requirement from <a href=\"https://developer.walmart.com/#/apicenter/contentProvider#authentication\" rel=\"nofollow noreferrer\">developer.walmart.com/#/apicenter/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 8329762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49cce785f7bd3e00c6c90656bdcce93d?s=128&d=identicon&r=PG&f=1", "display_name": "steevan", "link": "https://stackoverflow.com/users/8329762/steevan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500448924, "creation_date": 1500448924, "question_id": 45183568, "link": "https://stackoverflow.com/questions/45183568/how-to-sign-a-request-in-ruby-using-pkcs-8", "title": "How to sign a request in ruby using PKCS-8", "body": "<ol><li><p>Assemble the following information:</p><ul><li><p>The full URL you wish to call, including any path and query parameters.</p></li><p></p><li>Your Consumer ID (for example, 9a4d7659-100c-4d5e-a6b0-26faad4c9132).<p></p></li><p></p><li>Your Base 64-encoded Private Key.<p></p></li><p></p><li>Your request method in all capitals (for example, GET).<p></p></li></ul></li><li>Construct input for the signature (NOTE: The order of the parameters and the line returns \\n are important to generate the signature properly):<br><strong>the Consumer ID issued to you_</strong> + \"\\n\" + <strong>the url of the call you are making</strong> + \"\\n\" + <strong>the request method of the call you are making in all capitals</strong> + \"\\n\" + <strong>the Epoch timestamp now (in milliseconds since Jan 01 1970 UTC)</strong> + \"\\n\"</li><li><p>Sign the byte array representation of this data by:</p></li><p>Decoding the Base-64, PKCS-8 representation of your Private Key. Note that the key is encoded using PKCS-8. Libraries in various languages offer the ability to specify that the key is in this format and not in other conflicting formats such as PKCS-1.</p><p>Use this byte representation of your key to sign the data using SHA-256 with RSA.</p><p>Encode the resulting signature using Base-64.</p><li>Use the generated signature and the timestamp to make your API call.</li></ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "mechanize", "mechanize-ruby"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500445214, "post_id": 45182322, "comment_id": 77332700, "body": "Thanks for the quick reply, Aidan. The complete error message is as below &quot;Exception caught: NoMethodError. Exiting. Message: undefined method `button_with&#39; for nil:NilClass&quot;"}, {"owner": {"reputation": 8546, "user_id": 71062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6dc7e281ace4555f3a8f5a85d4d4f849?s=128&d=identicon&r=PG", "display_name": "aidan", "link": "https://stackoverflow.com/users/71062/aidan"}, "reply_to_user": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500445281, "post_id": 45182322, "comment_id": 77332737, "body": "Yep, sounds like <code>form_with()</code> is returning <code>nil</code> instead of the form you&#39;re looking for."}, {"owner": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500445307, "post_id": 45182322, "comment_id": 77332750, "body": "I see what you are saying - but I am looking at the website and I see the form with the name &quot;form-name&quot;. What could I be missing?"}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "reply_to_user": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500445753, "post_id": 45182322, "comment_id": 77332960, "body": "@user3588980 -- Did you say that the name of the form is <code>form-name</code> but you&#39;re finding it with <code>id</code>?"}, {"owner": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500445831, "post_id": 45182322, "comment_id": 77333013, "body": "My bad in using the wrong jargon. The id of the form is &quot;form-name&quot;."}, {"owner": {"reputation": 8546, "user_id": 71062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6dc7e281ace4555f3a8f5a85d4d4f849?s=128&d=identicon&r=PG", "display_name": "aidan", "link": "https://stackoverflow.com/users/71062/aidan"}, "edited": false, "score": 0, "creation_date": 1500445911, "post_id": 45182322, "comment_id": 77333059, "body": "Is the ID definitely on the <code>form</code> element, and not something like a parent <code>div</code>? No iframes are involved? Maybe run irb or pry and try the lines of code one-by-one. Or dump out the contents of <code>page.form</code> to try and get an idea of what&#39;s going on."}, {"owner": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500446243, "post_id": 45182322, "comment_id": 77333251, "body": "@aidan   I updated my original post with the HTML for the form."}, {"owner": {"reputation": 8546, "user_id": 71062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6dc7e281ace4555f3a8f5a85d4d4f849?s=128&d=identicon&r=PG", "display_name": "aidan", "link": "https://stackoverflow.com/users/71062/aidan"}, "edited": false, "score": 0, "creation_date": 1500446911, "post_id": 45182322, "comment_id": 77333671, "body": "The HTML looks fine to me. Without any more information I think you&#39;re on your own. Try <code>a.page.forms.count</code> to see if mechanize is finding <i>any</i> forms."}, {"owner": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "edited": false, "score": 0, "creation_date": 1500447592, "post_id": 45182322, "comment_id": 77334122, "body": "Cool! Thanks so much for all the help, @aidan.  I will try taking the dump of page.form and doing the forms.count and see whats going on."}, {"owner": {"reputation": 8546, "user_id": 71062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6dc7e281ace4555f3a8f5a85d4d4f849?s=128&d=identicon&r=PG", "display_name": "aidan", "link": "https://stackoverflow.com/users/71062/aidan"}, "edited": false, "score": 0, "creation_date": 1500447909, "post_id": 45182322, "comment_id": 77334325, "body": "Good luck! If you can, use <code>irb</code> (or even better, <code>pry</code>), it should help you investigate the problem faster."}], "tags": [], "owner": {"reputation": 8546, "user_id": 71062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6dc7e281ace4555f3a8f5a85d4d4f849?s=128&d=identicon&r=PG", "display_name": "aidan", "link": "https://stackoverflow.com/users/71062/aidan"}, "is_accepted": true, "score": 0, "last_activity_date": 1500445022, "creation_date": 1500445022, "answer_id": 45182322, "question_id": 45182200, "link": "https://stackoverflow.com/questions/45182200/ruby-mechanize-undefined-method-button-with/45182322#45182322", "title": "Ruby-Mechanize: undefined method `button_with&#39;", "body": "<p>Does it say <code>NoMethodError: undefined method 'button_with' for nil:NilClass</code>?</p>\n\n<p>It means <code>form</code> is <code>nil</code> because <code>form_with(:id =&gt; \"form-name\")</code> couldn't find your form.</p>\n"}], "owner": {"reputation": 57, "user_id": 3588980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6915ad043d67e33ab51349d4e43bf5?s=128&d=identicon&r=PG", "display_name": "Anoorag Saxena", "link": "https://stackoverflow.com/users/3588980/anoorag-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 45182322, "answer_count": 1, "score": 0, "last_activity_date": 1500446214, "creation_date": 1500444529, "last_edit_date": 1500446214, "question_id": 45182200, "link": "https://stackoverflow.com/questions/45182200/ruby-mechanize-undefined-method-button-with", "title": "Ruby-Mechanize: undefined method `button_with&#39;", "body": "<p>My ruby script is throwing an error : undefined method `button_with'.\nThe ruby version is 1.9.3-p484 and the Mechanize version is 2.5.1.\nI checked Mechanize help and v2.5.1 is compatible with Ruby v1.9.3.</p>\n\n<pre><code>form = a.page.form_with(:id =&gt; \"form-name\")\nbutton = form.button_with(:value =&gt; \"Submit Request\")\na.submit(form, button)\n</code></pre>\n\n<p>a - is the Mechanize agent I initialized earlier</p>\n\n<p>Could someone guide me as to what may be the issue or how to debug it?</p>\n\n<p>Thank you!</p>\n\n<pre><code>&lt;form id=\"form-name\" action=\"/xyz_ajax\" method=\"POST\" onsubmit=\"return false;\"&gt;\n    &lt;div class=\"form-footer\"&gt;\n          &lt;button class=\"button button-size-default button-default\" type=\"submit\" onclick=\";return true;\" id=\"export-csv\"&gt;&lt;span class=\"button-content\"&gt;Export report&lt;/span&gt;&lt;/button&gt;\n      &lt;span class=\"csv-status\" id=\"status-text\"&gt;\n          &amp;nbsp;CSV export is finished.\n      &lt;/span&gt;\n       &amp;nbsp;&lt;a id=\"download-url\" href=\"/url/sample/abc.htm\"&gt;Submit Request&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;input type=\"hidden\" name=\"session_token\" value=\"abcde1234\"&gt;\n      &lt;input type=\"hidden\" name=\"csv_export\" value=\"1\"&gt;\n      &lt;input type=\"hidden\" name=\"report\" value=\"True\"&gt;\n  &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "concurrent-ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1500922381, "post_id": 45181922, "comment_id": 77538382, "body": "In which Rails environments have you tried this and experienced the error? What are the <code>eager_load_paths</code> and <code>autoload_paths</code> for those environments? (usually found in <code>config&#47;application.rb</code> and <code>config&#47;environments&#47;*.rb</code>)"}, {"owner": {"reputation": 13459, "user_id": 550349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QSyCs.jpg?s=128&g=1", "display_name": "stef", "link": "https://stackoverflow.com/users/550349/stef"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1501101102, "post_id": 45181922, "comment_id": 77635724, "body": "Ah - I was about to ask the same questions as @anothermh. In your application.rb I suspect you have one of these two set, which should not be the case in production. Disabling autoloading with ` config.enable_dependency_loading = false` should help."}, {"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1501106609, "post_id": 45181922, "comment_id": 77638358, "body": "@anothermh please see modified answer. The path&#39;s I autoload, should I not do that for production (e.g. put this setting in development.rb and not in application.rb)? Do note that the the constants included in the circular dependency error message are not defined in those <code>autoload_paths</code>."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1503351070, "post_id": 45181922, "comment_id": 78569480, "body": "Are you using spring? Try disabling spring with <code>DISABLE_SPRING=1</code> in your environment."}], "answers": [{"comments": [{"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1500821203, "post_id": 45260877, "comment_id": 77495539, "body": "Thank you. This might work in non Rails contexts, but in Rails I do not really manually require anything but all Rails classes are autoloaded instead."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1500855215, "post_id": 45260877, "comment_id": 77504950, "body": "@edwardmp My apologies, I assumed you were requiring stuff in your <code>rake</code> task, so that when you called <code>bundle exec rake</code> it was conflicting with autoloading symbols."}, {"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1501106713, "post_id": 45260877, "comment_id": 77638404, "body": "no problem, appreciate your input. Your answer would be helpful for all people encountering the same issue in non-Rails contexts."}, {"owner": {"reputation": 953, "user_id": 3027848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/povDg.jpg?s=128&g=1", "display_name": "aledustet", "link": "https://stackoverflow.com/users/3027848/aledustet"}, "edited": false, "score": 0, "creation_date": 1520453639, "post_id": 45260877, "comment_id": 85326336, "body": "This actually works on the context you describe, in my case i am using threads on a delayed job rake worker and i was getting the same circular dependencies errors but doing this approach was crazy since the code had a bunch of dependencies like that. If i just put the constants names before the thread spawn does the trick for me. This answer inspired my solution so thanks!!!"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 953, "user_id": 3027848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/povDg.jpg?s=128&g=1", "display_name": "aledustet", "link": "https://stackoverflow.com/users/3027848/aledustet"}, "edited": false, "score": 0, "creation_date": 1520457162, "post_id": 45260877, "comment_id": 85328174, "body": "@aledustet - Happy to help :-)"}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 4, "last_activity_date": 1500775038, "creation_date": 1500775038, "answer_id": 45260877, "question_id": 45181922, "link": "https://stackoverflow.com/questions/45181922/multithreading-in-rails-circular-dependency-detected-while-autoloading-constant/45260877#45260877", "title": "Multithreading in Rails: Circular dependency detected while autoloading constant", "body": "<p>In my gems (i.e., in <code>plezi</code> and <code>iodine</code>) I solve this with <code>if</code> statements, mostly.</p>\n\n<p>You'll find code such as:</p>\n\n<pre><code>require 'uri' unless defined?(::URI)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>begin\n  require 'rack/handler' unless defined?(Rack::Handler)\n  Rack::Handler::WEBrick = ::Iodine::Rack # Rack::Handler.get(:iodine)\nrescue Exception\n\nend\n</code></pre>\n\n<p>I used these snippets because of <code>Circular dependency detected</code> warnings and errors.</p>\n\n<p>I don't know if this helps, but I thought you might want to try it.</p>\n"}, {"comments": [{"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1501234259, "post_id": 45357284, "comment_id": 77700200, "body": "I just figured, since I only load custom subdirectories of /app, is eager loading even required? I think I just read they are loaded by default as descendants of /app"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1501270679, "post_id": 45357284, "comment_id": 77723948, "body": "Updated answer to respond. Short answer: no, they are not loaded by default."}, {"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1503350437, "post_id": 45357284, "comment_id": 78569226, "body": "Sadly the issue has resurfaced. I don&#39;t think this really is the solution in this case."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1503350634, "post_id": 45357284, "comment_id": 78569313, "body": "You&#39;re welcome to post a link to the repository, if possible."}, {"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1503350732, "post_id": 45357284, "comment_id": 78569352, "body": "Thanks for the quick reply. Unfortunately I can&#39;t share this project. I think I should use any of the methods mentioned in my opening post supplied by rails but I don&#39;t know in which capacity. Maybe I will try to open an issue on GitHub for the Rails project."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1504121103, "post_id": 45357284, "comment_id": 78895663, "body": "@edwardmp Can you post your full <code>application.rb</code> and the full <code>production.rb</code> environment file? You can redact any sensitive info."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": false, "score": 8, "last_activity_date": 1501270644, "last_edit_date": 1501270644, "creation_date": 1501176191, "answer_id": 45357284, "question_id": 45181922, "link": "https://stackoverflow.com/questions/45181922/multithreading-in-rails-circular-dependency-detected-while-autoloading-constant/45357284#45357284", "title": "Multithreading in Rails: Circular dependency detected while autoloading constant", "body": "<p>You likely need to change your <code>eager_load_paths</code> to include the path to the classes or modules that are raising the errors. <code>eager_load_paths</code> is documented <a href=\"http://guides.rubyonrails.org/configuring.html\" rel=\"noreferrer\">in the Rails Guides</a>.</p>\n\n<p>The problem you're running into is that <a href=\"https://stackoverflow.com/a/19852844/3784008\">Rails is not loading these constants</a> when the app starts; it automatically loads them when they are called by some other piece of code. In a multithreaded Rails app, two threads may have a race condition when they try to load these constants.</p>\n\n<p>Telling Rails to eagerly load these constants means they will be loaded once when the Rails app is started. It's not enough to say <code>eager_load = true</code>; you have to specify the paths to the class or module definitions as well. In the Rails application configuration, this is an <code>Array</code> under <code>eager_load_paths</code>. For example, to eager load <code>ActiveJob</code> classes:</p>\n\n<pre><code>config.eager_load_paths += [\"#{config.root}/app/jobs\"]\n</code></pre>\n\n<p>Or to load a custom module from <code>lib/</code>:</p>\n\n<pre><code>config.eager_load_paths += [\"#{config.root}/lib/custom_module\"]\n</code></pre>\n\n<p>Changing your eager load settings will affect the behavior of Rails. For example, in the Rails <code>development</code> environment, you're probably used to running <code>rails server</code> once, and every time you reload one of the endpoints it will reflect any changes to code you've made. That will not work with <code>config.eager_load = true</code>, because the classes are loaded once, at startup. Therefore, you will typically only change your <code>eager_load</code> settings for <code>production</code>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>You can check your existing <code>eager_load_paths</code> from the <code>rails console</code>. For example, these are the default values for a new Rails 5 app. As you can see, it does not load <code>app/**/*.rb</code>; it loads the specific paths that Rails is expected to know about.</p>\n\n<pre><code>Rails.application.config.eager_load_paths\n=&gt; [\"/app/assets\",\n \"/app/channels\",\n \"/app/controllers\",\n \"/app/controllers/concerns\",\n \"/app/helpers\",\n \"/app/jobs\",\n \"/app/mailers\",\n \"/app/models\",\n \"/app/models/concerns\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5135939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55184b20ec83396460d1017665fc249?s=128&d=identicon&r=PG&f=1", "display_name": "supzann3", "link": "https://stackoverflow.com/users/5135939/supzann3"}, "is_accepted": false, "score": 4, "last_activity_date": 1527782673, "creation_date": 1527782673, "answer_id": 50628464, "question_id": 45181922, "link": "https://stackoverflow.com/questions/45181922/multithreading-in-rails-circular-dependency-detected-while-autoloading-constant/50628464#50628464", "title": "Multithreading in Rails: Circular dependency detected while autoloading constant", "body": "<p>I had this issue while trying out two gems that handles parallel processing;</p>\n\n<ol>\n<li><a href=\"https://github.com/bruceadams/pmap\" rel=\"nofollow noreferrer\">pmap gem</a></li>\n<li><a href=\"https://github.com/grosser/parallel\" rel=\"nofollow noreferrer\">parallel gem</a></li>\n</ol>\n\n<p>For pmap I kept getting an error related to Celluloid::TaskTerminated and for parallel I was getting a Circular dependency detected while autoloading constant for when I ran it with more than 1 thread. I knew this issue was related to how my classes and modules were eager loading and race to be placed on a thread. I try enabling both of the configs to true <code>config.cache_classes = true</code> and <code>config.eager_load = true</code> in the development env and that did the trick for me.</p>\n"}], "owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5063, "favorite_count": 2, "answer_count": 3, "score": 18, "last_activity_date": 1527782673, "creation_date": 1500443404, "last_edit_date": 1501107278, "question_id": 45181922, "link": "https://stackoverflow.com/questions/45181922/multithreading-in-rails-circular-dependency-detected-while-autoloading-constant", "title": "Multithreading in Rails: Circular dependency detected while autoloading constant", "body": "<p>I have a Rails app in which I have a Rake task that uses multithreading functions supplied by the concurrent-ruby gem.</p>\n\n<p>From time to time I encounter <code>Circular dependency detected while autoloading constant</code> errors.</p>\n\n<p>After Googling for a bit I found this to be related to using threading in combination with loading Rails constants.</p>\n\n<p>I stumbled upon the following GitHub issues: <a href=\"https://github.com/ruby-concurrency/concurrent-ruby/issues/585\" rel=\"noreferrer\">https://github.com/ruby-concurrency/concurrent-ruby/issues/585</a> and <a href=\"https://github.com/rails/rails/issues/26847\" rel=\"noreferrer\">https://github.com/rails/rails/issues/26847</a></p>\n\n<p>As explained here you need to wrap any code that is called from a new thread in a <code>Rails.application.reloader.wrap do</code> or <code>Rails.application.executor.wrap do</code> block, which is what I did. However, this leads to deadlock.</p>\n\n<p>The recommendation is then to use <code>ActiveSupport::Dependencies.interlock.permit_concurrent_loads</code> to wrap another blocking call on the main thread. However, I am unsure which code I should wrap with this.</p>\n\n<p>Here's what I tried, however this still leads to a deadlock:</p>\n\n<pre><code>@beanstalk = Beaneater.new(\"#{ENV.fetch(\"HOST\", \"host\")}:#{ENV.fetch(\"BEANSTALK_PORT\", \"11300\")}\")\ntube_name = ENV.fetch(\"BEANSTALK_QUEUE_NAME\", \"queue\")\n\npool = Concurrent::FixedThreadPool.new(Concurrent.processor_count * 2)\n\n# Process jobs from tube, the body of this block gets executed on each message received\n@beanstalk.jobs.register(tube_name) do |job|\n    ActiveSupport::Dependencies.interlock.permit_concurrent_loads do\n      @logger.info \"Received job: #{job.id}\"\n      Concurrent::Future.execute(executor: pool) do\n        Rails.application.reloader.wrap do\n          # Stuff that references Rails constants etc\n          process_beanstalk_message(job.body)\n        end\n      end\n    end\nend\n\n@beanstalk.jobs.process!(reserve_timeout: 10)\n</code></pre>\n\n<p>Can anyone shed a light as to how I should solve this? The odd thing is I encounter this in production while other information on this topic seems to imply it should normally only occur in development.</p>\n\n<p>In production I use the following settings:</p>\n\n<p><code>config.eager_load = true</code></p>\n\n<p><code>config.cache_classes = true</code>. </p>\n\n<p>Autoload paths for all environments are Rails default plus two specific folders (\"models/validators\" &amp; \"jobs/concerns\"). </p>\n\n<p><code>eager_load_paths</code> is not modified or set in any of my configs so must be equal to the Rails default.</p>\n\n<p>I am using Rails 5 so <code>enable_dependency_loading</code> should equal to <code>false</code> in production.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1500441861, "post_id": 45181334, "comment_id": 77331178, "body": "@Ronert Can you post the server log when you click on log in with facebook ?"}, {"owner": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1500446604, "post_id": 45181334, "comment_id": 77333467, "body": "@Vishal Oh sorry, I should have pasted that from the start. Updated post so that my server log is there."}, {"owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "edited": false, "score": 0, "creation_date": 1500467263, "post_id": 45181334, "comment_id": 77348191, "body": "i think facebook is not getting email id so that it&#39;s not saving the user info"}], "owner": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500446627, "creation_date": 1500440407, "last_edit_date": 1500446627, "question_id": 45181334, "link": "https://stackoverflow.com/questions/45181334/what-is-the-reason-my-omniauth-facebook-login-is-not-working", "title": "What is the reason my omniauth facebook login is not working?", "body": "<p>I created a facebook omniauth login but the authentication does not seem to be working.</p>\n\n<p>First time signing in, the webpage changed to the facebook webpage and it seemed to work but the redirect went back to my web app login page for some reason. When I clicked on the sign-in button again, my web app does not change the web page but stays there.</p>\n\n<p>However, I see that my URL address changes to <a href=\"http://localhost:3000/users/sign_up#_=_\" rel=\"nofollow noreferrer\">http://localhost:3000/users/sign_up#<em>=</em></a>\nright after I click on the sign up button so I was wondering what is going on with my app.</p>\n\n<p><code>&lt;%= link_to \"Facebook sign in\", user_facebook_omniauth_authorize_path %&gt;</code> is my code for sign in.</p>\n\n<p>My user.rb is</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable,\n         :omniauthable, :omniauth_providers =&gt; [:facebook]\n\n         def self.from_omniauth(auth)\n  where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n    user.email = auth.info.email\n    user.password = Devise.friendly_token[0,20]\n    # If you are using confirmable and the provider(s) you use validate emails, \n    # uncomment the line below to skip the confirmation emails.\n    # user.skip_confirmation!\n  end\nend\nend\n</code></pre>\n\n<p>routes.rb is</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"users/omniauth_callbacks\" }\n  devise_for :admins, path: 'admins'\n  root 'home#index'\n  get '/' =&gt; \"courses#index\", as: :user_root\n    resources :courses, :lessons\nend\n</code></pre>\n\n<p>My server log is:</p>\n\n<pre><code>Started GET \"/users/auth/facebook\" for 127.0.0.1 at 2017-07-19 12:23:43 +0900\nI, [2017-07-19T12:23:43.560740 #16988]  INFO -- omniauth: (facebook) Request phase initiated.\nStarted GET \"/users/auth/facebook\" for 127.0.0.1 at 2017-07-19 12:23:43 +0900\nI, [2017-07-19T12:23:43.693460 #16988]  INFO -- omniauth: (facebook) Request phase initiated.\nStarted GET \"/users/auth/facebook/callback?code=AQD_R5wWm1l62YTZ0RwwruKmlCSoSHtUseMhG_aah_xpDLOWuupBN8giG6qVfIhHvfy8g-gfNtT4rAbZ8AfoWqgfNKRhzjihjibgyPayVlpvWPd_OGUY_q52B_K6w5YK-COk5wSHbyeYxc04MzQsXknD7x7oHbHHdF51I9QLkyKY_NwXFYVwadlZKUJgG_4mOm-bw76QDqLVbVDO8M7APKvmk3Aw4fyRj-71R2GsnVYN_jrDr1sz4zf47Ac5CQTa6R5480m59fZtgpups3W1p4cDIsAnZKZiXuOuFZQ_knIDEKrosH4MmSBRqmlKt900nb_VDnVAhY3WFx8lHIgERkSz&amp;state=e45fcf66f73f4c827eae9dfba1130744b91262fd0422486a\" for 127.0.0.1 at 2017-07-19 12:23:43 +0900\nI, [2017-07-19T12:23:43.848249 #16988]  INFO -- omniauth: (facebook) Callback phase initiated.\nProcessing by Users::OmniauthCallbacksController#facebook as HTML\n  Parameters: {\"code\"=&gt;\"AQD_R5wWm1l62YTZ0RwwruKmlCSoSHtUseMhG_aah_xpDLOWuupBN8giG6qVfIhHvfy8g-gfNtT4rAbZ8AfoWqgfNKRhzjihjibgyPayVlpvWPd_OGUY_q52B_K6w5YK-COk5wSHbyeYxc04MzQsXknD7x7oHbHHdF51I9QLkyKY_NwXFYVwadlZKUJgG_4mOm-bw76QDqLVbVDO8M7APKvmk3Aw4fyRj-71R2GsnVYN_jrDr1sz4zf47Ac5CQTa6R5480m59fZtgpups3W1p4cDIsAnZKZiXuOuFZQ_knIDEKrosH4MmSBRqmlKt900nb_VDnVAhY3WFx8lHIgERkSz\", \"state\"=&gt;\"e45fcf66f73f4c827eae9dfba1130744b91262fd0422486a\"}\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"provider\" = ? AND \"users\".\"uid\" = ? ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"provider\", \"facebook\"], [\"uid\", \"1332495676858509\"], [\"LIMIT\", 1]]\n   (0.1ms)  begin transaction\n   (0.0ms)  rollback transaction\nRedirected to http://localhost:3000/users/sign_up\nCompleted 302 Found in 140ms (ActiveRecord: 0.5ms)\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 6067, "user_id": 181902, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/04b9238a7f9d2c25e22913f0126da1c4?s=128&d=identicon&r=PG", "display_name": "thornomad", "link": "https://stackoverflow.com/users/181902/thornomad"}, "edited": false, "score": 0, "creation_date": 1500440000, "post_id": 45181125, "comment_id": 77330536, "body": "Oh goodness - I feel a little silly.  Thanks.  Naming conventions in Rails/Ruby trip me up all the time.  Sigh.  I&#39;d like to say it&#39;s just that I am tired but your quick response has saved me! Thank you!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1500439251, "creation_date": 1500439251, "answer_id": 45181125, "question_id": 45181022, "link": "https://stackoverflow.com/questions/45181022/how-to-test-non-activerecord-models-in-rails/45181125#45181125", "title": "How to test non-ActiveRecord models in rails?", "body": "<p>I am surprised that it even runs. You declare the class <code>CalendarEvent</code> in the test suit. Which obviously has no <code>test</code> method. Why would you name it <em>the exact same way</em> as the tested class? Just give it another name:</p>\n\n<pre><code>#                  \u21d3\u21d3\u21d3\u21d3 HERE\nclass CalendarEventTest &lt; ActiveSupport::TestCase\n  include TestApiHelperPackage\n\n  test 'validate hello world' do\n    cal_event = CalendarEvent.new\n    assert_equal cal_event.test, 'Hello world'\n  end\nend\n</code></pre>\n\n<p>And everything should go fine. Possible you want to <code>require 'calender_event'</code> in your <code>test_heler.rb</code> as well.</p>\n"}], "owner": {"reputation": 6067, "user_id": 181902, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/04b9238a7f9d2c25e22913f0126da1c4?s=128&d=identicon&r=PG", "display_name": "thornomad", "link": "https://stackoverflow.com/users/181902/thornomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 45181125, "answer_count": 1, "score": 1, "last_activity_date": 1500439251, "creation_date": 1500438732, "question_id": 45181022, "link": "https://stackoverflow.com/questions/45181022/how-to-test-non-activerecord-models-in-rails", "title": "How to test non-ActiveRecord models in rails?", "body": "<p>How do I test a non-ActiveRecord model class in Rails?  The code that works in the console does not seem to translate to the test suite.  Methods are not available and the whole thing just doesn't seem to work!</p>\n\n<pre><code>class CalendarEvent\n\n  def test\n    'Hello World'\n  end\n\nend\n</code></pre>\n\n<p>When I fire up the console, this works:</p>\n\n<pre><code>irb&gt; cal_event = CalendarEvent.new\n=&gt; #&lt;CalendarEvent:0x007fb5e3ee9fd0&gt;\nirb&gt; cal_event.test\n=&gt; \"Hello World\"\n</code></pre>\n\n<p>However, when I write a test it seems the model is not loading.  None of the functions are available.</p>\n\n<pre><code>class CalendarEvent &lt; ActiveSupport::TestCase\n  include TestApiHelperPackage\n\n  test 'validate hello world' do\n    cal_event = CalendarEvent.new\n    assert_equal cal_event.test, 'Hello world'\n  end\nend\n</code></pre>\n\n<p>Seems like it isn't grabbing the model.  Do I have to <em>not</em> inherit from <code>ActiveSupport::TestCase</code> ?</p>\n"}, {"tags": ["ruby", "recursion", "nomethoderror"], "comments": [{"owner": {"reputation": 4017, "user_id": 3131537, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/mOOLT.jpg?s=128&g=1", "display_name": "Darshan Patel", "link": "https://stackoverflow.com/users/3131537/darshan-patel"}, "edited": false, "score": 0, "creation_date": 1500438447, "post_id": 45180898, "comment_id": 77330028, "body": "use <code>Array.sort</code> method to sort an Array...In your case <code>list_one.sort</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 4017, "user_id": 3131537, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/mOOLT.jpg?s=128&g=1", "display_name": "Darshan Patel", "link": "https://stackoverflow.com/users/3131537/darshan-patel"}, "edited": false, "score": 0, "creation_date": 1500438526, "post_id": 45180898, "comment_id": 77330052, "body": "@DarshanPatel using <code>Array.sort</code> from the scratch instead of implementing an algorithm youself gives a born to copy-pasters-from-stack-overflow instead of good developers."}], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 4073708, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5fc9bc081d93bff93c1442a7d90695b1?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/4073708/nathan"}, "edited": false, "score": 0, "creation_date": 1500439563, "post_id": 45180950, "comment_id": 77330368, "body": "Thanks mate. I overlooked how I wrote that array.index function, and changing that to its correct format fixed my program.   I also updated my program with the improvements you mentioned (mostly with my styling). I&#39;m still new to Ruby, and I also make mistakes with wanting to style the way I do with JavaScript"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1500438326, "creation_date": 1500438326, "answer_id": 45180950, "question_id": 45180898, "link": "https://stackoverflow.com/questions/45180898/ruby-nomethoderror-undefined-method-for-enumerator0x007f8683922870/45180950#45180950", "title": "Ruby: NoMethodError: undefined method `[]&#39; for #&lt;Enumerator:0x007f8683922870&gt;", "body": "<p>The problem is here:</p>\n\n<pre><code>sorted_array.push(array_list.index[array_list.min])\n</code></pre>\n\n<p>Either use <a href=\"https://ruby-doc.org/core/Array.html#method-i-index\" rel=\"nofollow noreferrer\"><code>Array#index</code></a> or <a href=\"https://ruby-doc.org/core/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>Array#[]</code></a>:</p>\n\n<pre><code>sorted_array.push(array_list.index(array_list.min))\n# or sorted_array.push(array_list[array_list.min])\n</code></pre>\n\n<hr>\n\n<p>There are two (or more) glitches with this code:</p>\n\n<pre><code>sorted_array = sorted_array\n</code></pre>\n\n<p>is a noop. What did you want to accomplish with that?</p>\n\n<p>And, in general, <strong>never ever</strong> put a space between a method name and an opening parenthesis starting a list of it\u2019s parameters. It might not work as expected in some cases.</p>\n"}], "owner": {"reputation": 271, "user_id": 4073708, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5fc9bc081d93bff93c1442a7d90695b1?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/4073708/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 45180950, "answer_count": 1, "score": 0, "last_activity_date": 1500439947, "creation_date": 1500437999, "last_edit_date": 1500439947, "question_id": 45180898, "link": "https://stackoverflow.com/questions/45180898/ruby-nomethoderror-undefined-method-for-enumerator0x007f8683922870", "title": "Ruby: NoMethodError: undefined method `[]&#39; for #&lt;Enumerator:0x007f8683922870&gt;", "body": "<p><strong>EDIT TWO</strong> </p>\n\n<p>I noticed that while running the program, it was also returning <code>nil</code> as the last item in the array. To fix this I changed my condition.</p>\n\n<pre><code>if array_list.empty? ----&gt; if array_list.length == 1\n</code></pre>\n\n<p>This returns the array without <code>nil</code></p>\n\n<p><strong>EDIT</strong>\nThanks to @mudasobwa for his help.</p>\n\n<p>He pointed out a couple things wrong with my program: one with how I wrote array.index using [ ] instead of the required ( )</p>\n\n<p>Also learned that I shouldn't put spaces between the method name and its parameters. </p>\n\n<p>Updated code here, look at original to see how it had changed.</p>\n\n<pre><code>list_one = [\"apple\", \"anna\", \"banana\", \"peach\", \"cherry\", \"kiwi\", \"pineapple\"]\n\ndef sort_array(array_list, sorted_array=[])\n\n  sorted_array.push(array_list.min)\n  if array_list.empty? || array_list.nil?\n    return sorted_array\n  else\n    array_list.delete_at(array_list.index(array_list.min))\n  return sort_array(array_list, sorted_array)\nend\n\nend\n\nsort_array(list_one)\n</code></pre>\n\n<p>If anyone has other improvements or suggestions, please let me know. As it is, this recursive function seems to work flawlessly, although I still have a lot to learn on how to implement recursive functions in the future. It can be hard to get my brain wrapped around it.</p>\n\n<p><strong>END EDIT, ORIGINAL BELOW</strong></p>\n\n<p>I'm reading through Chris Pine's book Learn to Program, and one of the exercises is to make a recursive sorting method to sort through a list of items.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>list_one = [\"apple\", \"anna\", \"banana\", \"peach\", \"cherry\", \"kiwi\", \"pineapple\"]\n\ndef sort_array (array_list, sorted_array=[])\n  sorted_array = sorted_array\n  sorted_array.push(array_list.index[array_list.min])\n  if array_list.empty?\n    return sorted_array\n  else\n    array_list.delete_at(array_list.index[array_list.min])\n    return sort_array(array_list, sorted_array)\nend\n\nend\n\nsort_array (list_one)\n</code></pre>\n\n<p>Now, Chris's book calls for using a wrapper function, which I tried incorporating, but it doesn't make any difference in this case. Just coming up with this has been a bit of a mind-boggler, and I needed to read up more on recursive functions to get to this point.</p>\n\n<p>When running this, I get the error listed in the title. I haven't had any luck yet figuring this out, so I'm hoping someone here can shed some light on what I might be doing wrong.</p>\n\n<p>If I incorporate Chris's wrapper function:</p>\n\n<pre><code>def sortme (some_array)\n  sort_array(some_array, [])\nend\n</code></pre>\n\n<p>the error remains the same, which makes sense considering that the wrapper function is just calling the sort_array function. I really don't see the need for it in this case.</p>\n\n<p>Any thoughts? Why am I getting this error? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth"], "answers": [{"tags": [], "owner": {"reputation": 521, "user_id": 5636401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fl3o9.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5636401/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1500433925, "creation_date": 1500433925, "answer_id": 45180317, "question_id": 45180058, "link": "https://stackoverflow.com/questions/45180058/where-can-i-get-the-css-for-a-facebook-sign-in-log-in-button/45180317#45180317", "title": "Where can I get the css for a facebook sign-in/log-in button?", "body": "<p>It looks like you're trying to use <a href=\"http://fontawesome.io/\" rel=\"nofollow noreferrer\">Font Awesome</a>. There's a <a href=\"https://github.com/bokmann/font-awesome-rails\" rel=\"nofollow noreferrer\">Font Awesome Rails gem</a> that'll let you use the Facebook icon.</p>\n\n<p>Add the gem to your <code>Gemfile</code> and <code>bundle</code> it. </p>\n\n<p>If you're using plain css, add this to your <code>application.css</code> file:</p>\n\n<pre><code>/*\n *= require font-awesome\n */\n</code></pre>\n\n<p>If you prefer Sass, change your <code>application.css</code> file to <code>application.css.scss</code> and add the line:</p>\n\n<pre><code>@import 'font-awesome';\n</code></pre>\n\n<p>Then you can use the <code>fa_icon</code> helper method. </p>\n\n<pre><code>&lt;%= link_to fa_icon('facebook', text: \"Sign in with Facebook\"), user_facebook_omniauth_authorize_path %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1822, "user_id": 7323769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4db3b141cd04bf90e031a84ce639864b?s=128&d=identicon&r=PG", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/7323769/jeremie"}, "is_accepted": true, "score": 2, "last_activity_date": 1500435519, "creation_date": 1500435519, "answer_id": 45180551, "question_id": 45180058, "link": "https://stackoverflow.com/questions/45180058/where-can-i-get-the-css-for-a-facebook-sign-in-log-in-button/45180551#45180551", "title": "Where can I get the css for a facebook sign-in/log-in button?", "body": "<p>I think this will be helpful :</p>\n\n<p><strong>css</strong></p>\n\n<pre><code>/* Shared */\n.loginBtn {\n  box-sizing: border-box;\n  position: relative;\n  /* width: 13em;  - apply for fixed size */\n  margin: 0.2em;\n  padding: 0 15px 0 46px;\n  border: none;\n  text-align: left;\n  line-height: 34px;\n  white-space: nowrap;\n  border-radius: 0.2em;\n  font-size: 16px;\n  color: #FFF;\n}\n.loginBtn:before {\n  content: \"\";\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 34px;\n  height: 100%;\n}\n.loginBtn:focus {\n  outline: none;\n}\n.loginBtn:active {\n  box-shadow: inset 0 0 0 32px rgba(0,0,0,0.1);\n}\n\n\n/* Facebook */\n.loginBtn--facebook {\n  background-color: #4C69BA;\n  background-image: linear-gradient(#4C69BA, #3B55A0);\n  /*font-family: \"Helvetica neue\", Helvetica Neue, Helvetica, Arial, sans-serif;*/\n  text-shadow: 0 -1px 0 #354C8C;\n}\n.loginBtn--facebook:before {\n  border-right: #364e92 1px solid;\n  background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png') 6px 6px no-repeat;\n}\n.loginBtn--facebook:hover,\n.loginBtn--facebook:focus {\n  background-color: #5B7BD5;\n  background-image: linear-gradient(#5B7BD5, #4864B1);\n}\n</code></pre>\n\n<p><strong>html</strong></p>\n\n<pre><code>&lt;button class=\"loginBtn loginBtn--facebook\"&gt;\n  Sign in with Facebook\n&lt;/button&gt;\n</code></pre>\n\n<p>You can try on this <a href=\"https://codepen.io/davidelrizzo/pen/vEYvyv\" rel=\"nofollow noreferrer\">codepen</a>.</p>\n\n<p>So your rails link would be</p>\n\n<pre><code>&lt;%= link_to \"Sign in with Facebook\", user_facebook_omniauth_authorize_path, class: 'loginBtn loginBtn--facebook' %&gt;\n</code></pre>\n\n<p>I hope it helps</p>\n"}], "owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 45180551, "answer_count": 2, "score": 0, "last_activity_date": 1500435519, "creation_date": 1500432182, "question_id": 45180058, "link": "https://stackoverflow.com/questions/45180058/where-can-i-get-the-css-for-a-facebook-sign-in-log-in-button", "title": "Where can I get the css for a facebook sign-in/log-in button?", "body": "<p>I am using RoR and I've used omniauth and created a facebook sign in link. I want to make the link a facebook button, those you see on websites that uses social logins. </p>\n\n<p>Currently, I just have </p>\n\n<pre><code>&lt;%= link_to \"Sign in with Facebook\",user_facebook_omniauth_authorize_path %&gt;\n</code></pre>\n\n<p>I've tried using <code>&lt;i class=\"fa fa-facebook fa-2x\"&gt;&lt;/i&gt;</code> but it does not seem to work.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 3, "creation_date": 1500427097, "post_id": 45179448, "comment_id": 77327419, "body": "Have you tried using <code>SportDB::Model::Team.new</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1500449899, "creation_date": 1500449899, "answer_id": 45183946, "question_id": 45179448, "link": "https://stackoverflow.com/questions/45179448/how-to-instantiate-a-class-from-a-external-gem-in-ruby/45183946#45183946", "title": "How to instantiate a class from a external gem in Ruby", "body": "<p>In ruby you can put modules and classes inside a <strong>namespace</strong>. A namespace can help to organize classes into logical groups and avoid collision. For example when you use a gem that provides a class with a common name (like <code>Team</code>) that could clash with your own classes or with classes from another gem.</p>\n\n<p>The <code>Team</code> class is inside the module <code>Model</code>, which in turn is inside the module <code>SprtDb</code>. So the full class name that you should use is: <code>SportDb::Model::Team</code> and not just <code>Team</code></p>\n"}], "owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500449899, "creation_date": 1500426710, "last_edit_date": 1500427744, "question_id": 45179448, "link": "https://stackoverflow.com/questions/45179448/how-to-instantiate-a-class-from-a-external-gem-in-ruby", "title": "How to instantiate a class from a external gem in Ruby", "body": "<p>How can I instantiate a class inside my controller from a external gem in Ruby?</p>\n\n<p>Example: I put on my Gemfile this gem. <a href=\"https://github.com/sportdb/sport.db/tree/master/sportdb-models/lib/sportdb/models\" rel=\"nofollow noreferrer\">https://github.com/sportdb/sport.db/tree/master/sportdb-models/lib/sportdb/models</a></p>\n\n<p>And I want to put on my controller, for example, a <code>Team</code> from the model.</p>\n\n<p><a href=\"https://github.com/sportdb/sport.db/blob/master/sportdb-models/lib/sportdb/models/team.rb\" rel=\"nofollow noreferrer\">https://github.com/sportdb/sport.db/blob/master/sportdb-models/lib/sportdb/models/team.rb</a></p>\n\n<p>If i try to do like this:</p>\n\n<pre><code>def index\n  @foo = Team.first\nend\n</code></pre>\n\n<p>This message is outputed:</p>\n\n<blockquote>\n  <p>uninitialized constant Team</p>\n</blockquote>\n\n<p>So, what is the right way of instantiate this class <em>team.rb</em> on my controller?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 0, "creation_date": 1500425591, "post_id": 45179187, "comment_id": 77327001, "body": "the problem comes fron <code>post &quot;&#47;v1&#47;devices&#47;#{device.serial_number}&#47;scans.json&quot;,</code> you need give it a mapped route symbol."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 0, "creation_date": 1500425677, "post_id": 45179187, "comment_id": 77327031, "body": "what do you mean?  something like <code>post :create, params: { device_serial_number: device.serial_number }</code>"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 0, "creation_date": 1500425782, "post_id": 45179187, "comment_id": 77327064, "body": "@MathewP.Jones it does seem building the url the way I did the <code>device.serial_number</code> does actually get put into the string though."}, {"owner": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 0, "creation_date": 1500425900, "post_id": 45179187, "comment_id": 77327106, "body": "yes, usually we put that <code>action method name</code> as a symbol there, just try."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 0, "creation_date": 1500425988, "post_id": 45179187, "comment_id": 77327125, "body": "pretty much the same thing: <code>No route matches {:action=&gt;&quot;create&quot;, :controller=&gt;&quot;v1&#47;devices&quot;, :data=&gt;#&lt;Rack::Test::UploadedFile:0x0055e05d093380 @content_type=&quot;application&#47;gzip&quot;, @original_filename=&quot;sample_test.gz&quot;, @tempfile=#&lt;Tempfile:&#47;tmp&#47;sample_test.gz20170719-109-5v46iw&gt;&zwnj;&#8203;&gt;, :device_serial_number=&gt;&quot;da512d2b15de4bd887161d6cb83e79b2&quot;}</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1500426675, "post_id": 45179187, "comment_id": 77327312, "body": "Try dropping the <code>.json</code> from your request in <code>post &quot;&#47;v1&#47;devices&#47;#{device.serial_number}&#47;scans.json&quot;, params: { data: scan }</code>; then set the headers to request for <code>json</code>. <a href=\"https://stackoverflow.com/questions/9576756/using-rspec-how-do-i-test-the-json-format-of-my-controller-in-rails-3-0-11\">This question</a> may be useful."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1500426845, "post_id": 45179187, "comment_id": 77327366, "body": "@Gerry dropped <code>.json</code> still the same error message.  What do you mean about the headers?"}], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 1, "creation_date": 1500428444, "post_id": 45179542, "comment_id": 77327748, "body": "Great! I think we mixed two kinds of params,  we need this <code>device_serial_number</code> to route to right action, then we need <code>data</code> to give it to action."}], "tags": [], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "is_accepted": false, "score": 1, "last_activity_date": 1500427618, "creation_date": 1500427618, "answer_id": 45179542, "question_id": 45179187, "link": "https://stackoverflow.com/questions/45179187/routing-to-nested-rails-route/45179542#45179542", "title": "routing to nested rails route", "body": "<p>Using a mixture of Mathew and Gerry's ideas I was able to get past the <code>no route</code> issue with:</p>\n\n<pre><code>post :create, params: { device_serial_number: device.serial_number, scan: { data: scan } }\n</code></pre>\n\n<p>Since my controller has this method, I ended up needing to nest the additional attributes in the <code>params</code> hash:</p>\n\n<pre><code>  def scan_params\n    params.require(:scan).permit(:device_serial_number, :data)\n  end\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500445812, "creation_date": 1500424720, "last_edit_date": 1500445812, "question_id": 45179187, "link": "https://stackoverflow.com/questions/45179187/routing-to-nested-rails-route", "title": "routing to nested rails route", "body": "<p>I'm trying to create an rspec to route to a nested resource but I keep getting a <code>No route matches</code> error.</p>\n\n<pre><code>1) V1::DevicesController scan submitted to #create\n     Failure/Error: post \"/v1/devices/#{device.serial_number}/scans.json\", params: { data: scan }\n\n     ActionController::UrlGenerationError:\n       No route matches {:action=&gt;\"/v1/devices/7929e287466c493ba03947c189cadc81/scans.json\", :controller=&gt;\"v1/devices\", :data=&gt;#&lt;Rack::Test::UploadedFile:0x00556f7c423808 @content_type=\"application/gzip\", @original_filename=\"sample_test.gz\", @tempfile=#&lt;Tempfile:/tmp/sample_test.gz20170719-65-sdfczl&gt;&gt;}\n</code></pre>\n\n<p>My spec is pretty simple right now:</p>\n\n<p><strong>require 'rails_helper'</strong></p>\n\n<pre><code>RSpec.describe V1::DevicesController, type: :controller do\n  it \"scan submitted to #create\" do\n    company = Company.create(name: \"Test Company\", domain: \"testcompany.com\")\n    device = Device.create(name: \"Test Device\", company_id: company.id)\n    scan = fixture_file_upload( \"#{Rails.root}/spec/assets/sample_test.gz\", 'application/gzip')\n    post \"/v1/devices/#{device.serial_number}/scans.json\", params: { data: scan }\n    expect(response).to be_successful\n  end    \nend\n</code></pre>\n\n<p><strong>My controller is relatively basic as well:</strong></p>\n\n<pre><code>class V1::ScansController &lt; ApplicationController\n  skip_before_action :authenticate_user_from_token!, only: [:create]\n  skip_before_action :authenticate_user!, only: [:create]\n  skip_before_filter :verify_authenticity_token, :if =&gt; Proc.new { |c| c.request.format == 'application/json' }, only: [:create]\n\n  def create\n    @scan = Scan.new(scan_params)\n\n    respond_to do |format|\n      if @scan.save\n        # GenerateReport.perform_async(@scan.id)\n        format.json { render json: @scan, status: :created }\n      else\n        format.json { render json: @scan.errors, status: :unprocessable_entity }\n      end\n    end\n\n  end\n\n\n  private\n\n  def set_device\n    @device = Device.find_by!(serial_number: params[:device_serial_number])\n  end\n\n  def scan_params\n    params.require(:scan).permit(:device_serial_number, :data)\n  end\n\nend\n</code></pre>\n\n<p><strong>and my routes file has:</strong></p>\n\n<pre><code>api_version(:module =&gt; \"V1\", :path =&gt; {:value =&gt; \"v1\"}) do\n  resources :devices, only: [:show, :update], param: :serial_number do\n    resources :scans, only: [:create]\n  end\nend\n</code></pre>\n\n<p>Which yields the following route:</p>\n\n<pre><code>v1_device_scans POST   /v1/devices/:device_serial_number/scans(.:format) v1/scans#create\n</code></pre>\n\n<p>So, clearly my route is there... what am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1500423044, "creation_date": 1500423044, "answer_id": 45178973, "question_id": 45178844, "link": "https://stackoverflow.com/questions/45178844/create-new-record-of-a-nested-resource-from-the-index/45178973#45178973", "title": "Create new record of a nested resource from the index", "body": "<p>You'll need to have an un-nested resource, something like:</p>\n\n<pre><code>resources :clientes do\n  resources :projects, except: [:new, :create]\nend\n\nresources :projects, only: [:new, :create]\n</code></pre>\n\n<p>Which will give you (notice that your <code>new_projects</code> and <code>projects</code> paths will no longer require <code>cliente_id</code>):</p>\n\n<pre><code>    cliente_projects GET    /clientes/:cliente_id/projects(.:format)              projects#index\nedit_cliente_project GET    /clientes/:cliente_id/projects/:id/edit(.:format)     projects#edit\n     cliente_project GET    /clientes/:cliente_id/projects/:id(.:format)          projects#show\n                     PATCH  /clientes/:cliente_id/projects/:id(.:format)          projects#update\n                     PUT    /clientes/:cliente_id/projects/:id(.:format)          projects#update\n                     DELETE /clientes/:cliente_id/projects/:id(.:format)          projects#destroy\n            clientes GET    /clientes(.:format)                                   clientes#index\n                     POST   /clientes(.:format)                                   clientes#create\n         new_cliente GET    /clientes/new(.:format)                               clientes#new\n        edit_cliente GET    /clientes/:id/edit(.:format)                          clientes#edit\n             cliente GET    /clientes/:id(.:format)                               clientes#show\n                     PATCH  /clientes/:id(.:format)                               clientes#update\n                     PUT    /clientes/:id(.:format)                               clientes#update\n                     DELETE /clientes/:id(.:format)                               clientes#destroy\n            projects POST   /projects(.:format)                                   projects#create\n         new_project GET    /projects/new(.:format)                               projects#new\n</code></pre>\n\n<p>Then, instead of: </p>\n\n<pre><code>&lt;%= link_to \"Nuevo Projecto\", new_cliente_project_path() %&gt;\n</code></pre>\n\n<p>You'll need to do something like:</p>\n\n<pre><code>&lt;%= link_to \"Nuevo Projecto\", new_project_path %&gt;\n</code></pre>\n\n<p>On your new project form, you will need a clients select or something like that, so when you submit your form you will have the <code>client_id</code> available for creating the association.</p>\n"}], "owner": {"reputation": 1863, "user_id": 2777118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/1063240573/picture?type=large", "display_name": "Gibson", "link": "https://stackoverflow.com/users/2777118/gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 45178973, "answer_count": 1, "score": 0, "last_activity_date": 1500423044, "creation_date": 1500421997, "question_id": 45178844, "link": "https://stackoverflow.com/questions/45178844/create-new-record-of-a-nested-resource-from-the-index", "title": "Create new record of a nested resource from the index", "body": "<p>I have 2 resources which are nested:</p>\n\n<pre><code>  resources :clientes do\n    resources :projects\n  end\n</code></pre>\n\n<p>I need 2 buttons on my index page, one for creating Clients and the other one to create projects.</p>\n\n<pre><code>&lt;%= link_to \"Nuevo Cliente\", new_cliente_path %&gt;\n&lt;%= link_to \"Nuevo Projecto\", new_cliente_project_path() %&gt;\n</code></pre>\n\n<p>The problem:\nWhen clicking on new project, the <strong>new_cliente_project_path</strong> needs the client id passed in a parameter.</p>\n\n<p>I still don't have that parameter because the new project to create has no client assigned still.</p>\n\n<p>I would like to have the project's client selected from the new project form.</p>\n\n<p>How can I proceed?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailchimp", "bulk", "mailchimp-api-v3.0"], "comments": [{"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1500419871, "post_id": 45178538, "comment_id": 77325645, "body": "Do you mean how can you do it without making one call for each email + list combination? If that isn&#39;t an option, why not? If it is, why not give that a shot (with maybe a delayed job thing to do it in batches)? (I suspect there is a reason, I&#39;m just curious about what it is.)"}, {"owner": {"reputation": 874, "user_id": 426845, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/SyfEr.jpg?s=128&g=1", "display_name": "Brary", "link": "https://stackoverflow.com/users/426845/brary"}, "reply_to_user": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1500429022, "post_id": 45178538, "comment_id": 77327881, "body": "@alexanderbird I updated the question, is it clear now?"}, {"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1500438926, "post_id": 45178538, "comment_id": 77330157, "body": "Yup, thanks for clarifying."}], "owner": {"reputation": 874, "user_id": 426845, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/SyfEr.jpg?s=128&g=1", "display_name": "Brary", "link": "https://stackoverflow.com/users/426845/brary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505015939, "creation_date": 1500419510, "last_edit_date": 1505015939, "question_id": 45178538, "link": "https://stackoverflow.com/questions/45178538/bulk-unsubscribing-emails-from-lists", "title": "Bulk Unsubscribing Emails From Lists", "body": "<p>I am using <a href=\"https://github.com/envygeeks/feralchimp\" rel=\"nofollow noreferrer\">feralchimp</a> gem as a ruby API wrapper for the Mailchimp API in my Rails (4) application.</p>\n\n<p>What I need is to unsubscribe a large amount of emails from different lists through Mailchimp API, does anyone have an idea how to do so using this gem?</p>\n\n<p>Currently we unsubscribe one email, from one list, using one API call, with this code:</p>\n\n<pre><code>Feralchimp.new.lists_unsubscribe(id: list_id, email: { email: email_to_unsubscribe })\n</code></pre>\n\n<p>But Mailchimp API <a href=\"https://developer.mailchimp.com/documentation/mailchimp/guides/how-to-use-batch-operations/\" rel=\"nofollow noreferrer\">supports bulk operations</a>, and I can't find enough documentation for both the API and feralchimp the gem, and it would be just much efficient to unsubscribe a bulk of emails at once.</p>\n"}, {"tags": ["ruby", "node.js", "variables", "bots", "sharing"], "comments": [{"owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1500417099, "post_id": 45178167, "comment_id": 77324843, "body": "Have you considered writing a server or using a file?"}, {"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "reply_to_user": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1500418291, "post_id": 45178167, "comment_id": 77325165, "body": "I&#39;ve attempted,  &lt;%= include_gon %&gt; is the go to for applying gon in your .js file. Something to do with an views/application.erb which does not exist. I&#39;m new to .js."}, {"owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 1, "creation_date": 1500418437, "post_id": 45178167, "comment_id": 77325218, "body": "Looks like you&#39;re new to programming. Welcome! People are reluctant to help if you don&#39;t show what you have tried, if you write about what you&#39;ve tried and why it isn&#39;t working, that can make it much easier for the volunteers here to intelligently comment on your issue."}, {"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "reply_to_user": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1500420352, "post_id": 45178167, "comment_id": 77325761, "body": "Edited the main question , yeah sorry I should of added the code. I got another error saying gon.method was not defined in ruby with just using gon."}, {"owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1500425150, "post_id": 45178167, "comment_id": 77326899, "body": "Hey Sam, no worries. It&#39;s not possible to directly use Ruby code from Node.js (and vice versa). A really popular way to do this sort of thing is to write what is called an &quot;API&quot; or &quot;Web Service&quot;. You can check this out online but it is pretty simple. If you are using sinatra, all you have to do is make a URL where you put <code>gon.price</code> inside a JSON response and write a Node.JS client to connect to it (either using <code>require(&#39;net&#39;)</code> or <code>fetch()</code>)."}, {"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "reply_to_user": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1500462684, "post_id": 45178167, "comment_id": 77344613, "body": "Sweet i&#39;ll have a shot tonight and let you know it goes!"}], "owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500420277, "creation_date": 1500416998, "last_edit_date": 1500420277, "question_id": 45178167, "link": "https://stackoverflow.com/questions/45178167/passing-variables-from-ruby-file-to-a-node-js-script", "title": "Passing variables from ruby file to a node.js script", "body": "<p>Was looking at gon and gon-sinatra and attempted to use them, but to no avail. Seems like it's for javascript files and not node.js files, if anyone could help it would be much appreciated! </p>\n\n<p>Command.rb</p>\n\n<pre><code>        #!/usr/bin/ruby\n        require 'bitcoin-client'\n        require 'net/http'\n        require 'sinatra'\n        require 'json'\n        require 'gon-sinatra'\n        Sinatra::register Gon::Sinatra\n\n   class MySinatraApplication &lt; Sinatra::Base\n          register Gon::Sinatra\n\n    @price = `ruby fiat.rb `\n    gon.price = @price\n\n    end\n</code></pre>\n\n<p>Variable.js</p>\n\n<pre><code>alert(gon.price)\n</code></pre>\n\n<p>Error: Cannot find module 'gon-sinatra' from node.js file.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "is_accepted": false, "score": 2, "last_activity_date": 1507626727, "last_edit_date": 1507626727, "creation_date": 1500447821, "answer_id": 45183172, "question_id": 45178145, "link": "https://stackoverflow.com/questions/45178145/mp3-uploads-with-paperclip-gem/45183172#45183172", "title": "mp3 uploads with paperclip gem", "body": "<p>May be your jp player seeks for absolute path, Instead</p>\n\n<pre><code>&lt;%=  @cafe.mp3.url %&gt;\n</code></pre>\n\n<p>Try this</p>\n\n<p><code>&lt;%= URI.join(request.url, @cafe.mp3.url) %&gt;</code></p>\n\n<p>in your mp3 path, </p>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507626727, "creation_date": 1500416851, "question_id": 45178145, "link": "https://stackoverflow.com/questions/45178145/mp3-uploads-with-paperclip-gem", "title": "mp3 uploads with paperclip gem", "body": "<p>I'm having some trouble getting a specific mp3 that i've uploaded to play. </p>\n\n<p>I have a Ruby on Rails app and I'm using paperclip to upload the actual mp3.  I'm using a Javascript library (called jp-player). I'm at the point where I know the mp3 file has been uploaded, but i'm not getting it to officially play.  If I hit the <code>play</code> button, nothing happens. </p>\n\n<p>My model looks like this: </p>\n\n<pre><code>has_attached_file :mp3\n  validates_attachment :mp3, :content_type =&gt; { :content_type =&gt; [\"audio/mpeg\", \"audio/mp3\"] }, :file_name =&gt; { :matches =&gt; [/mp3\\Z/] }\n</code></pre>\n\n<p>My controller looks like </p>\n\n<pre><code>def create\n @cafe = current_user.cafes.build(cafe_params)\n\n  if @cafe.save\n    redirect_to @cafe\n  else\n    render 'new'\n  end\nend\n\ndef cafe_params\n  params.require(:cafe).permit(:name, :description, :street_address, :state, :editors_note, :website, :image, :mp3)\nend\n</code></pre>\n\n<p>My view (I have this as a partial that i'm calling in a different view)</p>\n\n<pre><code>#cafe_content\n  #jquery_jplayer_1.jp-jplayer\n  #jp_container_1.jp-audio\n    .jp-type-single\n      .jp-gui.jp-interface\n        %ul.jp-controls\n          %li\n            %a.jp-play{:href =&gt; \"javascript:;\", :tabindex =&gt; \"1\"} \uf04b\n          %li\n            %a.jp-pause{:href =&gt; \"javascript:;\", :tabindex =&gt; \"1\"} \uf04c\n          %li\n            %a.jp-mute{:href =&gt; \"javascript:;\", :tabindex =&gt; \"1\", :title =&gt; \"mute\"} \uf028\n          %li\n            %a.jp-unmute{:href =&gt; \"javascript:;\", :tabindex =&gt; \"1\", :title =&gt; \"unmute\"} \uf026\n        .jp-progress\n          .jp-seek-bar\n            .jp-play-bar\n        .jp-time-holder\n          .jp-current-time\n        .jp-volume-bar\n          .jp-volume-bar-value\n        .jp-no-solution\n          %span Update Required\n          To play the media you will need to either update your browser to a recent version or update your\n          = succeed \".\" do\n            %a{:href =&gt; \"http://get.adobe.com/flashplayer/\", :target =&gt; \"_blank\"} Flash plugin\n\n\n:javascript\n  $(document).ready(function(){\n    $(\"#jquery_jplayer_1\").jPlayer({\n      ready: function () {\n        $(this).jPlayer(\"setMedia\", {\n          mp3: \"&lt;%= @cafe.mp3.url %&gt;\",\n        });\n      },\n      swfPath: \"/js\",\n      supplied: \"mp3\"\n    });\n  });\n</code></pre>\n\n<p>Does anyone know if there is anything that I am missing that could get this to properly run?</p>\n"}, {"tags": ["ruby", "binary", "hex"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1501326476, "post_id": 45178173, "comment_id": 77737674, "body": "<code>to_i(2)</code> doesn&#39;t convert to decimal. It converts to an integer. Integers aren&#39;t decimal or binary or hexadecimal, they just <i>are</i>. Only string interpretations of numbers have a base, numbers themselves don&#39;t."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1501411491, "post_id": 45178173, "comment_id": 77758475, "body": "@J&#246;rgWMittag clarified the answer. WDYT?"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 3, "last_activity_date": 1501411470, "last_edit_date": 1501411470, "creation_date": 1500417039, "answer_id": 45178173, "question_id": 45178121, "link": "https://stackoverflow.com/questions/45178121/convert-binary-string-to-hexadecimal-in-ruby/45178173#45178173", "title": "Convert binary string to hexadecimal in Ruby", "body": "<p>You can convert it to an integer first, hinting that the string is binary (<code>to_i(2)</code>), then to hexadecimal (<code>to_s(16)</code></p>\n\n<pre><code>\"1010\".to_i(2).to_s(16) # =&gt; 'a'\n</code></pre>\n\n<p>If you need it in uppercase, you can call <code>upcase</code> on the resulting string.</p>\n"}], "owner": {"reputation": 39, "user_id": 8204760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4061dd2467a2db0293a9cd4c168f329?s=128&d=identicon&r=PG&f=1", "display_name": "Fleur", "link": "https://stackoverflow.com/users/8204760/fleur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "accepted_answer_id": 45178173, "answer_count": 1, "score": 0, "last_activity_date": 1501411470, "creation_date": 1500416737, "question_id": 45178121, "link": "https://stackoverflow.com/questions/45178121/convert-binary-string-to-hexadecimal-in-ruby", "title": "Convert binary string to hexadecimal in Ruby", "body": "<p>What is the most efficient way to convert a binary string into hexadecimal? I'm trying to do something like this:</p>\n\n<pre><code>a = '1010'    #Binary\n</code></pre>\n\n<p>and then to become </p>\n\n<pre><code>a = 'A'       #Hexa\n</code></pre>\n"}, {"tags": ["ruby", "zipfile"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 3, "last_activity_date": 1500414794, "last_edit_date": 1500414794, "creation_date": 1500414281, "answer_id": 45177624, "question_id": 45177521, "link": "https://stackoverflow.com/questions/45177521/trying-to-read-files-in-a-zip-archive-without-extracting-them/45177624#45177624", "title": "Trying to read files in a zip archive without extracting them", "body": "<p>According to the <a href=\"https://github.com/rubyzip/rubyzip#reading-a-zip-file\" rel=\"nofollow noreferrer\">rubyzip documentation</a> (and the question you linked) <code>mZip</code> should be of class <code>String</code> and contain the <strong>path to a file</strong> rather than <code>File</code> or <code>Zip::Entry</code>.</p>\n\n<pre><code>mZip = './folder/file.zip'\ndef read_file\n  Zip::File.open(myZip) do |zip_file|\n  #...\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4415249, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MGbcj7fU24U/AAAAAAAAAAI/AAAAAAAAABg/2MX-aBAoago/photo.jpg?sz=128", "display_name": "Fikayo Olatunji", "link": "https://stackoverflow.com/users/4415249/fikayo-olatunji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 45177624, "answer_count": 1, "score": 1, "last_activity_date": 1500414794, "creation_date": 1500413778, "question_id": 45177521, "link": "https://stackoverflow.com/questions/45177521/trying-to-read-files-in-a-zip-archive-without-extracting-them", "title": "Trying to read files in a zip archive without extracting them", "body": "<p>I've been trying to read the contents of a zipped file for the sake of data comparison, similar to the person from this thread: <a href=\"https://stackoverflow.com/questions/28100888/reading-files-in-a-zip-archive-without-unzipping-the-archive\">Reading files in a zip archive, without unzipping the archive</a></p>\n\n<p>I tried the accepted code there exactly, but I'm still getting the error\n<code>/home/fikayo/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rubyzip-1.2.0/lib/zip/file.rb:73:in `size?': no implicit conversion of Zip::Entry into String (TypeError)</code></p>\n\n<p>For reference, here is my code:</p>\n\n<pre><code> require 'rubygems'\n require 'zip'\n\n      def read_file\n        Zip::File.open(myZip) do |zip_file|\n          zip_file.each do |entry|\n            if entry.directory?\n              puts \"#{entry.name} is a folder!\"\n            elsif entry.symlink?\n              puts \"#{entry.name} is a symlink!\"\n            elsif entry.file?\n              puts \"#{entry.name} is a regular file!\"\n\n              # Read into memory\n              content = entry.get_input_stream.read\n\n              # Output\n              puts content\n            else\n              puts \"No sell\"\n            end\n          end\n        end\n      end\n</code></pre>\n\n<p><code>myZip</code> is the variable that I stored the zip file inside. I checked to make sure and its type is listed as <code>Zip::Entry</code></p>\n"}, {"tags": ["java", "ruby", "angular", "http", "ionic-framework"], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 0, "last_activity_date": 1500410225, "creation_date": 1500410225, "answer_id": 45176604, "question_id": 45176421, "link": "https://stackoverflow.com/questions/45176421/how-do-i-call-an-api-with-java-ruby-and-use-it-on-my-ionic-3-mobile-app/45176604#45176604", "title": "How do I call an API with Java/Ruby and use it on my Ionic 3 mobile app?", "body": "<p>You can submit server requests to the API, but not requests through a web browser because of CORS, so what you can do is essentially proxy requests through a server you run. For instance, your Ionic app will send a request to your server, which will then submit an appropriate request to the API and then an appropriate response to your Ionic app.</p>\n\n<p>Any web library can handle communicating with the API, using HTTP requests. For ruby things like Httparty, the included Net::HTTP library, or the gem the API owner mentions could all work. In java it looks like you can use HttpUrlConnection to make simple http requests.</p>\n"}], "owner": {"reputation": 15, "user_id": 8304994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ecf7c01a6823dac8e60f7bf79f4e1d?s=128&d=identicon&r=PG&f=1", "display_name": "B. Wayne", "link": "https://stackoverflow.com/users/8304994/b-wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1500410225, "creation_date": 1500409499, "question_id": 45176421, "link": "https://stackoverflow.com/questions/45176421/how-do-i-call-an-api-with-java-ruby-and-use-it-on-my-ionic-3-mobile-app", "title": "How do I call an API with Java/Ruby and use it on my Ionic 3 mobile app?", "body": "<p>I have been trying to access a RESTful API for an app that I am currently building and I have been coming across countless CORS issues.</p>\n\n<p>I eventually emailed the site that I am using the API from and he told me they do not support CORS and to call the API using a server side language. He also told me that a Ruby Gem exists.</p>\n\n<p>I have some basic experience in Java and Ruby, however I can not find any help on how I can use either to access an API that I can use in my Ionic app.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "edited": false, "score": 0, "creation_date": 1500409752, "post_id": 45176365, "comment_id": 77321517, "body": "You&#39;ve flipped else and elsif."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "edited": false, "score": 0, "creation_date": 1500409805, "post_id": 45176365, "comment_id": 77321550, "body": "Sorry wrong code, I have changed."}, {"owner": {"reputation": 3131, "user_id": 2056448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ee46b8bbaa7a18cb68e55bb0e25ff194?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/2056448/casey"}, "edited": false, "score": 0, "creation_date": 1500409921, "post_id": 45176365, "comment_id": 77321623, "body": "It&#39;s still wrong."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1500411645, "post_id": 45176365, "comment_id": 77322506, "body": "There is no <code>return</code> statement to force the function returns before reaching the  <code>s.count(&quot;e&quot;).to_s</code> statement. It always executes and, because it is the last value computed by the function, it is also the value returned by the function"}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500409889, "post_id": 45176465, "comment_id": 77321603, "body": "If I want the count method to be included I have to use it in my &#39;if&#39; statement?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1500410054, "post_id": 45176465, "comment_id": 77321688, "body": "More accurate will be: <i>&quot;Ruby returns the last evaluated expression when no explicit return is provided&quot;</i>."}], "tags": [], "owner": {"reputation": 357162, "user_id": 28804, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/015c999a9db79ffb3030b3cc207d0be8?s=128&d=identicon&r=PG", "display_name": "mipadi", "link": "https://stackoverflow.com/users/28804/mipadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1500413866, "last_edit_date": 1500413866, "creation_date": 1500409660, "answer_id": 45176465, "question_id": 45176365, "link": "https://stackoverflow.com/questions/45176365/calling-method-isnt-returning-string/45176465#45176465", "title": "Calling method isn&#39;t returning string", "body": "<p>In Ruby, methods return the last statement in their body. Your method's last statement is always <code>s.count(\"e\").to_s</code>, since that lies outside of the <code>if</code> statements.</p>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1500409832, "creation_date": 1500409832, "answer_id": 45176508, "question_id": 45176365, "link": "https://stackoverflow.com/questions/45176365/calling-method-isnt-returning-string/45176508#45176508", "title": "Calling method isn&#39;t returning string", "body": "<p>To achieve what you want you could move your <code>string.count</code> to the <code>else</code> statement in your <code>if</code>, because actually you're making your method return the quantity of <code>e</code> passed in the <code>count</code> method over your string, but what happens inside the <code>if</code> isn't being used:</p>\n\n<pre><code>def find_e(s)\n  if s.nil?\n    nil\n  elsif s.empty?\n    ''\n  elsif !s.include?(\"e\")\n    \"There is no \\\"e\\\".\"\n  else\n    s.count(\"e\").to_s\n  end\nend\n\np find_e(\"Bnjamin\") #\u00a0=&gt; \"There is no \\\"e\\\".\"\np find_e(\"Benjamin\") #\u00a0=&gt; \"1\"\np find_e(nil) #\u00a0=&gt; nil\np find_e('') #\u00a0=&gt; \"\"\n</code></pre>\n\n<p>And also your validations must be in order, first check <code>nil</code> values, then empty values, and then the rest, if you don't then you'll get some <code>undefined method ___ for nil:NilClass</code> errors.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1500411086, "creation_date": 1500411086, "answer_id": 45176827, "question_id": 45176365, "link": "https://stackoverflow.com/questions/45176365/calling-method-isnt-returning-string/45176827#45176827", "title": "Calling method isn&#39;t returning string", "body": "<p>You might have a hard time using the method you wrote. In the next method, you'll need a new <code>case</code> statement to test if <code>find_e</code> returned <code>nil</code>, an empty string, a string with a number or <code>\"no e\"</code>.</p>\n\n<p>This method would be a bit more consistent:</p>\n\n<pre><code>def count_e(string_or_nil)\n  count = string_or_nil.to_s.count(\"e\")\n  if count == 0\n    \"There is no \\\"e\\\".\"\n  else\n    count\n  end\nend\n\nputs count_e(\"Covfefe\")\n# 2\nputs count_e(\"Bnjamin\")\n# There is no \"e\".\nputs count_e(\"\")\n# There is no \"e\".\nputs count_e(nil)\n# There is no \"e\".\n</code></pre>\n\n<p>But really, if there's no <code>e</code> in the input, just returning <code>0</code> would be the most logical behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": false, "score": 1, "last_activity_date": 1500413246, "last_edit_date": 1500413246, "creation_date": 1500412930, "answer_id": 45177337, "question_id": 45176365, "link": "https://stackoverflow.com/questions/45176365/calling-method-isnt-returning-string/45177337#45177337", "title": "Calling method isn&#39;t returning string", "body": "<p>You need to put your count method in a branch of the <code>if/else</code> statement, or else it will be evaluated last every time. Without an explicit return statement Ruby will return the last statement, so putting the method outside the <code>if/else</code> branch on the last line guarantees it will always be hit. Also, <code>nil</code> can be converted to an empty string by calling <code>#to_s</code>, so you can remove one of your branches by converting <code>s.to_s</code>, calling <code>empty?</code> and returning <code>s</code></p>\n\n<pre><code>def find_e(s)\n  if s.to_s.empty?\n    s\n  elsif !s.include?(\"e\")\n    \"There is no \\\"e\\\".\"\n  else\n    s.count(\"e\").to_s\n  end\nend\n</code></pre>\n\n<p>If you just return <code>0</code> whether you get <code>nil</code>, an empty string, or a string without <code>e</code>, you can make it one line</p>\n\n<pre><code>def find_e(s)\n  s.to_s.count(\"e\").to_s\nend\n</code></pre>\n\n<p>If it were me I'd probably return an Integer, which can always be converted to a String later. <code>puts</code> and <code>\"#{}\"</code> will implicitly call <code>to_s</code> for you anway. Then you can use that integer return in your presentation logic.</p>\n\n<pre><code>def count_e(input)\n  input.to_s.count(\"e\")\nend\n\ndef check_for_e(input)\n  count = count_e(input)\n  count &gt; 0 ? count.to_s : \"There's no \\\"e\\\".\"\nend\n\ncheck_for_e(\"Covfefe\") # =&gt; \"2\"\ncheck_for_e(\"Bnjamin\") # =&gt; \"There's no \\\"e\\\".\"\ncheck_for_e(nil) # =&gt; \"There's no \\\"e\\\".\"\ncheck_for_e(\"\") # =&gt; \"There's no \\\"e\\\".\"\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 45176508, "answer_count": 4, "score": 2, "last_activity_date": 1500450422, "creation_date": 1500409289, "last_edit_date": 1500450422, "question_id": 45176365, "link": "https://stackoverflow.com/questions/45176365/calling-method-isnt-returning-string", "title": "Calling method isn&#39;t returning string", "body": "<p>I created a method to count a substring <code>'e'</code> in a string passed as an argument. If there isn't a substring <code>'e'</code> in the string, it should return <code>\"There is no \\\"e\\\".\"</code> I am trying to achieve this:</p>\n\n<ul>\n<li>How many times <code>'e'</code> is in a string.</li>\n<li>If given string doesn't contain any <code>\"e\"</code>, return <code>\"There is no \"e\".\"</code></li>\n<li>if given string is empty, return empty string.</li>\n<li>if given string is <code>nil</code>, return <code>nil</code>.</li>\n</ul>\n\n<p>This is my code:</p>\n\n<pre><code>def find_e(s)\n  if !s.include?(\"e\")\n    \"There is no \\\"e\\\".\"\n  elsif s.empty?\n     \"\"\n  else s.nil?\n     nil\n  end\n  s.count(\"e\").to_s\nend\n\nfind_e(\"Bnjamin\")\n</code></pre>\n\n<p>It skips the <code>if</code> statement and it still uses the method <code>count</code>. Why is this?</p>\n"}, {"tags": ["ruby", "garbage-collection", "finalizer"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1500406341, "post_id": 45175422, "comment_id": 77319479, "body": "I&#39;m seeing <code>dead</code> print if I close your code using control+c as well as if I replace the <code>while true end</code> with <code>exit</code>. I&#39;m on Ruby 2.5.0-dev fwiw. What platform are you on?"}, {"owner": {"reputation": 275, "user_id": 8290567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa590aab15fc7312dd5def5cff195b5?s=128&d=identicon&r=PG&f=1", "display_name": "aoiee", "link": "https://stackoverflow.com/users/8290567/aoiee"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1500406393, "post_id": 45175422, "comment_id": 77319517, "body": "I&#39;m on eclipse using Ruby 2.4.0"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1500406453, "post_id": 45175422, "comment_id": 77319552, "body": "oh, and does the finalizer work without the GC.start?"}, {"owner": {"reputation": 275, "user_id": 8290567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa590aab15fc7312dd5def5cff195b5?s=128&d=identicon&r=PG&f=1", "display_name": "aoiee", "link": "https://stackoverflow.com/users/8290567/aoiee"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1500406569, "post_id": 45175422, "comment_id": 77319627, "body": "I&#39;m wondering why the <code>dead</code> does not print right when I call <code>GC.start</code>. I put a while loop there to show that the program does not terminate."}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 8290567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa590aab15fc7312dd5def5cff195b5?s=128&d=identicon&r=PG&f=1", "display_name": "aoiee", "link": "https://stackoverflow.com/users/8290567/aoiee"}, "edited": false, "score": 0, "creation_date": 1500408077, "post_id": 45175937, "comment_id": 77320549, "body": "Thank you very much for the explanation! I tried it and it even worked without the extra <code>puts &quot;object id = #{ex.object_id}&quot;</code>."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 275, "user_id": 8290567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa590aab15fc7312dd5def5cff195b5?s=128&d=identicon&r=PG&f=1", "display_name": "aoiee", "link": "https://stackoverflow.com/users/8290567/aoiee"}, "edited": false, "score": 1, "creation_date": 1500408256, "post_id": 45175937, "comment_id": 77320643, "body": "Ah, yeah I don&#39;t remember needing it previously, but it wasn&#39;t running for me without it, so something in my ruby implementation, I guess, but I mean, in real examples you&#39;re probably using the object for something anyway, not just instantiating things so that we can get a finalizer to run."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1500407791, "creation_date": 1500407791, "answer_id": 45175937, "question_id": 45175422, "link": "https://stackoverflow.com/questions/45175422/ruby-forcing-garbage-collection-not-working-as-expected/45175937#45175937", "title": "Ruby forcing garbage collection not working as expected", "body": "<p>I believe that when you create a new <a href=\"https://ruby-doc.org/core-2.4.0/Proc.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Proc</code></a> (<code>proc</code> just calls <code>Proc.new</code>, in <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-proc\" rel=\"nofollow noreferrer\"><code>Kernel</code></a>)</p>\n\n<blockquote>\n  <p>Creates a new Proc object, bound to the current context.</p>\n</blockquote>\n\n<p>Means that it's saving a reference to the <code>self</code> object and thus can never be de-referenced for the garbage collector to collect it. You should create the <code>proc</code> inside a class method instead so that the context becomes the class not the instance you're trying to destroy.</p>\n\n<pre><code>class ExampleClass\n  def initialize\n    ObjectSpace.define_finalizer(self, self.class.finalize)\n  end\n\n  def self.finalize\n    proc { puts \"dead\" }\n  end\n\nend\n\n\nex = ExampleClass.new\n# needed to do something with the object as well, not sure why,\n# but it won't work without this line either\nputs \"object id = #{ex.object_id}\"\nex = nil\n\nGC.start\nwhile true\nend\n</code></pre>\n\n<p>and this outputs</p>\n\n<pre><code>object id = 70223915005060\ndead\n^Cexample.rb:20:in `&lt;main&gt;': Interrupt\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 8290567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa590aab15fc7312dd5def5cff195b5?s=128&d=identicon&r=PG&f=1", "display_name": "aoiee", "link": "https://stackoverflow.com/users/8290567/aoiee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 1, "accepted_answer_id": 45175937, "answer_count": 1, "score": 3, "last_activity_date": 1500407791, "creation_date": 1500405893, "last_edit_date": 1500407032, "question_id": 45175422, "link": "https://stackoverflow.com/questions/45175422/ruby-forcing-garbage-collection-not-working-as-expected", "title": "Ruby forcing garbage collection not working as expected", "body": "<p>In the following code:</p>\n\n<pre><code>class ExampleClass\n  def initialize\n    ObjectSpace.define_finalizer(self, proc{puts 'dead'})\n  end\nend\n\nex = ExampleClass.new\nex = nil\n\nGC.start\n\nwhile true\n  # the while loop is to prevent the program from terminate\n  # if the program does terminate, the finalizer gets called in the end like expected\nend\n</code></pre>\n\n<p>The finalizer here is never called and there is no output. I would have expected the garbage collector to collect <code>ex</code> since it has been dereferenced. Why is <code>GC.start</code> not forcing <code>ex</code> to be collected and causing the <code>finalizer to be called</code> immediately?</p>\n"}, {"tags": ["ruby", "rubygems", "cucumber", "aruba"], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 0, "last_activity_date": 1500414372, "creation_date": 1500414372, "answer_id": 45177647, "question_id": 45175002, "link": "https://stackoverflow.com/questions/45175002/ruby-aruba-testing-cant-find-command-in-path-variable/45177647#45177647", "title": "Ruby Aruba testing can&#39;t find command in PATH-variable", "body": "<p>The error you are seeing is equivalent to the <code>sh: foodie: command not found</code> error found in the guide you are using. The difference is you are using a windows machine, and the guide is using a *nix machine.</p>\n\n<p>The cucumber tests are testing running a command from the shell, and the shell is not able to find the command to run. If you add the directory your program is in to your PATH, or move your program to a directory in your path, cucumber should be able to run it.</p>\n"}], "owner": {"reputation": 275, "user_id": 8016360, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a30be4c216a1d7c1546ea2bd5db83c77?s=128&d=identicon&r=PG&f=1", "display_name": "RedOster", "link": "https://stackoverflow.com/users/8016360/redoster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500414372, "creation_date": 1500404332, "question_id": 45175002, "link": "https://stackoverflow.com/questions/45175002/ruby-aruba-testing-cant-find-command-in-path-variable", "title": "Ruby Aruba testing can&#39;t find command in PATH-variable", "body": "<p>I'm teaching myself the basics of how to make my own Ruby Gem using Bundler's <a href=\"https://bundler.io/v1.15/guides/creating_gem.html\" rel=\"nofollow noreferrer\">guide</a>. However when I get to setting up CLI tests with aruba/cucumber I keep running into a problem:</p>\n\n<pre><code>Command \"co2domain\" not found in PATH-variable \"C:/.../PATH variables\". (Aruba::LaunchError)\n</code></pre>\n\n<p>The only differences I made is to change some of the names of the example as I'd eventually like to build a gem that converts company names to their proper domains.</p>\n\n<p>Here is my company.feature file:</p>\n\n<pre><code>Feature: Company\n  In order to portray Company\n  As a CLI\n  I want to be as objective as possible\n\n  Scenario: Positive number\n    When I run `co2domain portray --num 2`\n    Then the output should contain \"positive\"\n\n  Scenario: Negative number\n    When I run `co2domain portray --num -22`\n    Then the output should contain \"negative\"\n</code></pre>\n\n<p>This is my company.rb file:</p>\n\n<pre><code>module Co2domain\n  class Company\n    def self.portray(num)\n      if num &gt; 0\n        \"positive\"\n      else\n        \"negative\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>As I am a beginner and the guide is for beginners I feel like I'm missing something small but important. Help appreciated.</p>\n"}, {"tags": ["ruby", "algorithm", "knights-tour"], "answers": [{"comments": [{"owner": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "edited": false, "score": 0, "creation_date": 1500405279, "post_id": 45174947, "comment_id": 77318842, "body": "Thank you so much! I can&#39;t believe I forgot that 8th move considering I have all 8 written down in front of me. After making your changes the program successfully executes in the blink of an eye."}], "tags": [], "owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "is_accepted": true, "score": 3, "last_activity_date": 1500404739, "last_edit_date": 1500404739, "creation_date": 1500404180, "answer_id": 45174947, "question_id": 45174774, "link": "https://stackoverflow.com/questions/45174774/solving-knights-tour-using-warnsdorffs-rule/45174947#45174947", "title": "Solving Knights Tour using Warnsdorff&#39;s Rule", "body": "<h2>Optimisation</h2>\n\n<p>I would be suspicious of the time spent in:</p>\n\n<pre><code>Marshal.load(Marshal.dump board)\n</code></pre>\n\n<p>An alternative to this is to use a single copy of the board.</p>\n\n<p>At the start of tour you set:</p>\n\n<pre><code>board[x][y] = current_move\n</code></pre>\n\n<p>so if at the end of tour you clear it with:</p>\n\n<pre><code>board[x][y] = 0\n</code></pre>\n\n<p>then you should not need to make copies of board.</p>\n\n<h2>Bug</h2>\n\n<p>Note that a Knight has 8 legal moves!</p>\n\n<p>Try adding:</p>\n\n<pre><code>{x: x+2, y: y+1}\n</code></pre>\n"}], "owner": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 45174947, "answer_count": 1, "score": 1, "last_activity_date": 1500404739, "creation_date": 1500403578, "question_id": 45174774, "link": "https://stackoverflow.com/questions/45174774/solving-knights-tour-using-warnsdorffs-rule", "title": "Solving Knights Tour using Warnsdorff&#39;s Rule", "body": "<p>I'm currently trying to improve upon a brute force implementation of Knight's Tour by using Warnsdorff's Rule, however I feel as though I'm not understanding the algorithm, as the execution of the script is taking very long. I'm mainly looking for hints to point me in the right direction so that I can figure as much of this out on my own as possible. Thanks!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>class KnightsTour\n    def initialize\n        board = [nil, nil, nil, nil, nil, nil, nil, nil]\n        8.times do |i|\n            board[i] = [0, 0, 0, 0, 0, 0, 0, 0]\n        end\n        tour(0,0,board)\n    end\n\n    def tour(x,y,board,current_move=0)\n        current_move +=1\n        board[x][y] = current_move\n\n        puts board if current_move == 64\n        exit if current_move == 64\n\n        ordered_neighbors = \n            neighbors(x,y,board).sort_by { |m| m[:weight] }\n\n        ordered_neighbors.each do |move|\n            tour(move[:x], move[:y], Marshal.load(Marshal.dump board), current_move)\n        end\n        false\n    end\n\n    def weight(x,y,board)\n        possible = 0\n        moves(x,y).each do |move|\n            next unless valid_move?(move, board)\n            possible +=1\n        end\n        possible\n    end\n\n    def neighbors(x,y,board)\n        neighbors = []\n        moves(x,y).each do |move|\n            next unless valid_move?(move, board)\n            neighbors &lt;&lt; { weight: weight(move[:x], move[:y], board), \n                                x: move[:x], y: move[:y] }\n        end\n        neighbors\n    end\n\n    def valid_move?(move,board)\n        x = move[:x]\n        y = move[:y]\n        !(board[x] == nil || board[x][y] == nil || \n          board[x][y] != 0 || x &lt; 0 || y &lt; 0)\n    end\n\n    def moves(x,y)\n        [{x: x+2, y: y-1}, \n         {x: x+1, y: y-2}, \n         {x: x-1, y: y-2}, \n         {x: x-1, y: y+2}, \n         {x: x+1, y: y+2}, \n         {x: x-2, y: y+1}, \n         {x: x-2, y: y-1}]\n    end\nend\n\nKnightsTour.new\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ldap"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 2, "creation_date": 1500404378, "post_id": 45174649, "comment_id": 77318285, "body": "Fails how? Error messages? Anything? Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 5555763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eb87355752449437c3755e0f791d13d?s=128&d=identicon&r=PG&f=1", "display_name": "WMG", "link": "https://stackoverflow.com/users/5555763/wmg"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1500407931, "post_id": 45174649, "comment_id": 77320465, "body": "It fails on the ldap.bind statement, going to the last else clause."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1500414214, "post_id": 45174649, "comment_id": 77323778, "body": "And what&#39;s the error (i.e. <code>ldap.get_operation_result</code> output)?"}], "owner": {"reputation": 1, "user_id": 5555763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eb87355752449437c3755e0f791d13d?s=128&d=identicon&r=PG&f=1", "display_name": "WMG", "link": "https://stackoverflow.com/users/5555763/wmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500403186, "creation_date": 1500403186, "question_id": 45174649, "link": "https://stackoverflow.com/questions/45174649/connecting-to-a-new-ldap-server-in-ruby-on-rails", "title": "Connecting to a new LDAP Server in Ruby on Rails", "body": "<p>I inherited an internal Rails 2 app, which I just try to keep working for the time being, as I'm not very Rails proficient.  It does user authentication using net/ldap.  This week, our LDAP server has been moved from a Linux machine to a Windows one.  Now authentication fails for everyone.</p>\n\n<p>I have 2 variables:  <strong><em>username</em></strong> is the user's network ID, and <strong><em>password</em></strong> is the password s/he entered.  Here's the code:</p>\n\n<pre><code>ldap = Net::LDAP.new\nldap.host = 'new_server.mycompany.org'\nldap.auth 'cn=' + username + ',ou=active,ou=employees,ou=users,o=mycompany', password\nattrs = [\"sn\", \"givenname\", \"commonname\", \"workforceid\"]\nfilter = Net::LDAP::Filter.eq( \"cn\", username )\nif ldap.bind\n  ldap.search( :base =&gt; 'ou=active,ou=employees,ou=users,o=mycompany', :filter =&gt; filter, :attributes =&gt; attrs, :return_result =&gt; false ) do |entry|\n    if User.find_by_login(entry[\"commonname\"], :conditions =&gt; [\"is_deleted = 0\"]) != nil\n      session[:user_id] = entry[\"givenname\"].to_s.capitalize + \" \" + entry[\"sn\"].to_s.capitalize\n      session[:login] = entry[\"commonname\"].to_s\n      session[:staff_id] = entry[\"workforceid\"].to_s\n      return true\n    else\n      flash[:notice] = \"User does not have the proper rights to use this application\"\n      return false\n    end\n  end\n  return true\nelse\n  flash[:notice] = ldap.get_operation_result.code.to_s + ' - ' + ldap.get_operation_result.message\n  return false\nend\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["arrays", "ruby", "inject"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1500410070, "post_id": 45174603, "comment_id": 77321703, "body": "It has nothing to do with Ruby specifically, <a href=\"https://en.wikipedia.org/wiki/Fold_(higher-order_function)\" rel=\"nofollow noreferrer\">BTW</a>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1500425492, "post_id": 45174603, "comment_id": 77326972, "body": "Trivial answer: because its main parent, Smalltalk, called it so. (actually, <code>inject:into:</code>)"}, {"owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1500456528, "post_id": 45174603, "comment_id": 77340208, "body": "@Amadan what did inject mean in smalltalk? Does it mean injecting the accumulator back into the block?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1500457010, "post_id": 45174603, "comment_id": 77340565, "body": "Who knows. The syntax is <code>ary inject: init into: block</code>."}], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 1, "creation_date": 1500403946, "post_id": 45174781, "comment_id": 77318008, "body": "What about thinking of it in terms of the accumulator? Like injecting the accumulator back into the block upon each iteration?"}, {"owner": {"reputation": 393, "user_id": 2653671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5f7af7f0f845e4effa9c4a5ef8b47f?s=128&d=identicon&r=PG", "display_name": "rodsoars", "link": "https://stackoverflow.com/users/2653671/rodsoars"}, "reply_to_user": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 1, "creation_date": 1500404434, "post_id": 45174781, "comment_id": 77318313, "body": "Yes, because it iterates over each item in the array/enumerator and applies the operation between the current item and the accumulator, &quot;rewriting&quot; the accumulator afterwards for the next iteration. The name <code>inject</code> is confusing, so I prefer to think of it like this."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1500408483, "post_id": 45174781, "comment_id": 77320751, "body": "Also one can &quot;inject&quot; and initial object (or value) e.g. <code>(1..5).inject(10,&amp;:+) #=&gt; 25</code>"}, {"owner": {"reputation": 465, "user_id": 5925094, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MbtVD.png?s=128&g=1", "display_name": "Rich Steinmetz", "link": "https://stackoverflow.com/users/5925094/rich-steinmetz"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1613417871, "post_id": 45174781, "comment_id": 117064108, "body": "I found @rodsoars approach of thinking about <code>inject</code> very interesting. I&#39;ve visualized it in my <a href=\"https://richstone.io/ruby-inject-and-ruby-reduce-2/\" rel=\"nofollow noreferrer\">article on Ruby&#39;s inject/reduce method</a>. I used to think of it as @engineersmnky (there&#39;s also a simple visualization for that)."}], "tags": [], "owner": {"reputation": 393, "user_id": 2653671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5f7af7f0f845e4effa9c4a5ef8b47f?s=128&d=identicon&r=PG", "display_name": "rodsoars", "link": "https://stackoverflow.com/users/2653671/rodsoars"}, "is_accepted": true, "score": 7, "last_activity_date": 1500403611, "creation_date": 1500403611, "answer_id": 45174781, "question_id": 45174603, "link": "https://stackoverflow.com/questions/45174603/why-is-arrayinject-called-inject/45174781#45174781", "title": "Why is Array#inject called inject?", "body": "<p>I prefer to think of <code>inject</code> as \"injecting\" an operation among the items inside the given array and returning the final result of the calculation.</p>\n\n<pre><code>(1..5).inject(:+)  #=&gt; 15\n</code></pre>\n\n<p>In my example, it takes the number 1 to 5 and \"injects\" a sum operation among them, resulting in <code>1 + 2 + 3 + 4 + 5 = 15</code>.</p>\n\n<p>Also, it is aliased by <code>reduce</code>, as stated with details in <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-inject\" rel=\"noreferrer\">https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-inject</a>.</p>\n"}], "owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "closed_date": 1500441648, "accepted_answer_id": 45174781, "answer_count": 1, "score": 1, "last_activity_date": 1500403611, "creation_date": 1500403014, "question_id": 45174603, "link": "https://stackoverflow.com/questions/45174603/why-is-arrayinject-called-inject", "closed_reason": "Opinion-based", "title": "Why is Array#inject called inject?", "body": "<p>I understand the usage and purpose of <code>Array#inject</code> but why is it called <code>inject</code>? I don't understand what's being injected where.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagick"], "answers": [{"comments": [{"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "reply_to_user": {"reputation": 4312, "user_id": 166034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/311eb5cf1152752fafbed2a2c85aff5d?s=128&d=identicon&r=PG", "display_name": "Kerby82", "link": "https://stackoverflow.com/users/166034/kerby82"}, "edited": false, "score": 0, "creation_date": 1500411829, "post_id": 45175651, "comment_id": 77322604, "body": "@Kerby82 ok then"}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": 0, "last_activity_date": 1500406733, "creation_date": 1500406733, "answer_id": 45175651, "question_id": 45174276, "link": "https://stackoverflow.com/questions/45174276/imagemagick-rails-image-composition-adding-unwanted-white-background/45175651#45175651", "title": "Imagemagick rails image composition adding unwanted white background", "body": "<p>You could do something like:</p>\n\n<pre><code>manipulate! do |img|\n  img.combine_options do |c|\n    c.background    \"transparent\"\n    c.gravity       \"center\"\n    c.extent        \"450x401\"\n  end\nend\n</code></pre>\n\n<p>This is for RMagick if I'm not mistaken, the names might be slightly different (although I think combine options is using mongrifies methods?).</p>\n"}], "owner": {"reputation": 4312, "user_id": 166034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/311eb5cf1152752fafbed2a2c85aff5d?s=128&d=identicon&r=PG", "display_name": "Kerby82", "link": "https://stackoverflow.com/users/166034/kerby82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500406733, "creation_date": 1500401791, "question_id": 45174276, "link": "https://stackoverflow.com/questions/45174276/imagemagick-rails-image-composition-adding-unwanted-white-background", "title": "Imagemagick rails image composition adding unwanted white background", "body": "<p>I have the following code:</p>\n\n<pre><code> begin\n\n      big_image = Magick::ImageList.new\n\n      #this is an image containing first row of images\n      first_row = Magick::ImageList.new\n\n\n\n\n      #adding images to the first row (Image.read returns an Array, this is why .first is needed)\n      first_row.push(Magick::Image.read(Rails.root.join(\"app\",\"assets\",\"images\",\"logo.png\")).first)\n\n      if @model.avatar.exists?\n        image = Magick::Image.read(@model.avatar.path).first\n\n        image = image.resize_to_fit(\"450\", \"401\")\n\n\n        first_row.push(image)\n\n      end\n\n\n      #adding first row to big image and specify that we want images in first row to be appended in a single image on the same row - argument false on append does that\n      big_image.push (first_row.append(false))\n\n\n      fileName = @model.id.to_s + \".png\"\n      big_image.append(true).write(Rails.root.join(\"app\",\"assets\",\"images\",\"shared_logo\",fileName))\n\n\n\n    rescue =&gt; e\n      puts \"Errors! -- #{e.inspect}\"\n    end\n</code></pre>\n\n<p>The codes puts two image on the same row. The images are png. The problem is that the second image has an height less than the first one. Image magick fill the remaining part with an unwanted white background. I want to keep the transparency on the combined image.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activescaffold"], "comments": [{"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1500404265, "post_id": 45174150, "comment_id": 77318229, "body": "But why do you need to sort them?  Please google XY problem so we will be able to provide good help."}, {"owner": {"reputation": 41, "user_id": 8214920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7575e8f93127cb487d69e6098e073c3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish.S", "link": "https://stackoverflow.com/users/8214920/ashish-s"}, "reply_to_user": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1500440518, "post_id": 45174150, "comment_id": 77330702, "body": "When the tables were created, it generated in alphabetical order when I run the rails server. For this to show in the desired format, I was told there is a way I can list the columns in the structure."}, {"owner": {"reputation": 41, "user_id": 8214920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7575e8f93127cb487d69e6098e073c3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish.S", "link": "https://stackoverflow.com/users/8214920/ashish-s"}, "reply_to_user": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1500534791, "post_id": 45174150, "comment_id": 77381448, "body": "After doing some research, I&#39;ve managed to figure it out."}], "owner": {"reputation": 41, "user_id": 8214920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7575e8f93127cb487d69e6098e073c3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish.S", "link": "https://stackoverflow.com/users/8214920/ashish-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1504266129, "creation_date": 1500401312, "last_edit_date": 1504266129, "question_id": 45174150, "link": "https://stackoverflow.com/questions/45174150/sort-columns-active-scaffold", "title": "Sort columns active scaffold", "body": "<p>I am trying to list/order my columns in a custom order with active scaffold, Rails 5.1.2 and Ruby 2.3.3p222.</p>\n\n<p>Migration as follows:</p>\n\n<pre><code>class CreateResources &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :resources do |t|\n      t.string :firstname\n      t.string :surname\n      t.date :date_of_birth\n      t.string :identity_number\n      t.string :nationality\n      t.string :state_province\n      t.date :interview_date\n      t.string :available\n      t.string :home_phone\n      t.string :mobile_phone\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>And I have added columns, the migration is as follows:</p>\n\n<pre><code>class AddColumnsToResources &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_column :resources, :expected_salary, :string\n    add_column :resources, :current_ctc, :string\n    add_column :resources, :years_of_experience, :string\n    add_column :resources, :notice_period, :string\n  end\nend\n</code></pre>\n\n<p>I then used paperclip to add an attachment to the table:</p>\n\n<pre><code>class AddAttachmentAttachmentToResources &lt; ActiveRecord::Migration[5.1]\n  def self.up\n    change_table :resources do |t|\n      t.attachment :attachment\n    end\n  end\n\n  def self.down\n    remove_attachment :resources, :attachment\n  end\nend\n</code></pre>\n\n<p>I need to sort my columns so they appear in the following order:</p>\n\n<ol>\n<li>firstame </li>\n<li>surname </li>\n<li>identity number  </li>\n<li>...</li>\n</ol>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "cloud66"], "comments": [{"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1500513642, "post_id": 45174080, "comment_id": 77373917, "body": "&quot;can a process be multiple connections?&quot; Generally the Rails process can use as many connections as are specified in database.yml pool, that&#39;s the upper limit as they are created on demand and added to the pool."}, {"owner": {"reputation": 479, "user_id": 141140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fdec6fbaee7217ed882221f23f5e3ee?s=128&d=identicon&r=PG", "display_name": "Davis Z. Cabral", "link": "https://stackoverflow.com/users/141140/davis-z-cabral"}, "edited": false, "score": 0, "creation_date": 1501750775, "post_id": 45174080, "comment_id": 77919389, "body": "which version of mysql2 gem are you using?"}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1501766958, "post_id": 45174080, "comment_id": 77931939, "body": "Were running Version 0.4.8"}], "answers": [{"comments": [{"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1500439968, "post_id": 45177807, "comment_id": 77330525, "body": "my database.yml has no configuration line for max connections. do you know if there is a way to figure out what the default is in this case?"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1500450856, "post_id": 45177807, "comment_id": 77336347, "body": "You can run <code>show global variables like &#39;max_connections&#39;;</code> on the mysql console."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1500473739, "post_id": 45177807, "comment_id": 77353796, "body": "Thanks for your response, I&#39;ve tried your suggestion but I&#39;m still losing connections, I&#39;ve updated my question with a description of exactly what I did."}], "tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 2, "last_activity_date": 1500450822, "last_edit_date": 1500450822, "creation_date": 1500415094, "answer_id": 45177807, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45177807#45177807", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>This indicates a timeout error. It's usually a general resource or connection error.</p>\n\n<p>I would check your MySQL config for max connections on MySQL console:</p>\n\n<pre><code>show global variables like 'max_connections';\n</code></pre>\n\n<p>And ensure the number of pooled connections used by Rails database.yml is less than that:</p>\n\n<pre><code>pool: 10\n</code></pre>\n\n<p>Note that database.yml reflects number of connections that will be pooled by a single Rails process. If you have multiple processes or other servers like Sidekiq, you'll need to add them together.</p>\n\n<p>Increase max_connections if necessary in your MySQL server config (my.cnf), assuming your kit can handle it.</p>\n\n<pre><code>[mysqld]\nmax_connections = 100\n</code></pre>\n\n<p>Note other things might be blocking too, e.g. open files, but looking at connections is a good starting point.</p>\n\n<p>You can also monitor active queries:</p>\n\n<pre><code>select * from information_schema.processlist;\n</code></pre>\n\n<p>as well as monitoring the MySQL slow log.</p>\n\n<p>One issue may be a long-running update command. If you have a slow-running command that affects a lot of records (e.g. a whole table), it might be blocking even the simplest queries. This means you could see random queries timeout, but if you check MySQL status, the real cause is another long-running query.</p>\n"}, {"comments": [{"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1501708586, "post_id": 45469928, "comment_id": 77903294, "body": "how do I find this out?"}], "tags": [], "owner": {"reputation": 71, "user_id": 8332304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kRGaZ.png?s=128&g=1", "display_name": "Legi Smith", "link": "https://stackoverflow.com/users/8332304/legi-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1501710420, "last_edit_date": 1501710420, "creation_date": 1501704011, "answer_id": 45469928, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45469928#45469928", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>Find out if your database is limited in terms of multiple connections.  Because normally a SQL database is supposed to have more than one active connection.\n(Contact your network provider) </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8413260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEc07.jpg?s=128&g=1", "display_name": "sloth-jr", "link": "https://stackoverflow.com/users/8413260/sloth-jr"}, "is_accepted": false, "score": 0, "last_activity_date": 1501787038, "creation_date": 1501787038, "answer_id": 45492557, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45492557#45492557", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>Would you mind posting some of your queries? The MySQL documentation has this to say about it:\n<a href=\"https://dev.mysql.com/doc/refman/5.7/en/error-lost-connection.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/5.7/en/error-lost-connection.html</a>\nTL;DR: </p>\n\n<ol>\n<li>Network problems; are any of your boxes renewing leases\nperiodically, or experiencing other network connection errors\n(netstat / ss), firewall timeouts, etc. Not sure how managed your\nhosts are by cloud66....   </li>\n<li>Query timed out. This can happen if you've got commands backed up\n    behind blocking statements (eg, alters/locking backups on MyISAM\n    tables). How simple are your queries? No cartesian products in-play?\n    EXPLAIN query could help.</li>\n<li>Exceeding MAX_PACKET_SIZE. Are you storing pictures, video content, etc.?</li>\n</ol>\n\n<p>There are lots of possibilities here, and without more information, will be difficult to pinpoint this.</p>\n\n<p>Would look first at mysql_error.log, then work your way from the DB server back to your application.</p>\n"}, {"comments": [{"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1502206747, "post_id": 45513136, "comment_id": 78104642, "body": "I don&#39;t believe I&#39;m using unicorn, as I don&#39;t know what unicorn is. reconnect: true is set in my database.yml."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1502241256, "post_id": 45513136, "comment_id": 78119793, "body": "@denodster <code>unicorn</code> is a web application server. If you&#39;re not sure which server you&#39;re using, you&#39;re probably using <code>puma</code>. However, <code>puma</code> is also a multi-process server, so you might be exposed to similar concerns."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1502251942, "post_id": 45513136, "comment_id": 78122318, "body": "I&#39;m using nginix, and thin on my local"}], "tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": false, "score": 1, "last_activity_date": 1501870395, "creation_date": 1501870395, "answer_id": 45513136, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45513136#45513136", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>Things you did not mention but you should take a look:</p>\n\n<ul>\n<li>Are you using unicorn? If so, are your reconnecting and disconnecting in your <code>after_fork</code> and <code>before_fork</code>?</li>\n<li>Is <code>reconnect: true</code> set in your <em>database.yml</em> configuration?</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 713, "user_id": 831532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71049b98985d44f2382c77e25c5954af?s=128&d=identicon&r=PG", "display_name": "snitch182", "link": "https://stackoverflow.com/users/831532/snitch182"}, "is_accepted": false, "score": 1, "last_activity_date": 1502369895, "last_edit_date": 1502369895, "creation_date": 1502126696, "answer_id": 45552481, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45552481#45552481", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>Well,at first glance this sounds like your webserver is keeping the mysql sessions open and sometimes a user runs into a timeout. Try disabling the keep mysql sessions alive.\nIt will be a hog but you only use 5% ...</p>\n\n<p>other tipps:</p>\n\n<ul>\n<li><p>Enable the mysql \"Slow Query Log\" and take a look. </p></li>\n<li><p>write a short script which pulls and logs the mysql processlist every minute and cross check the log with timeouts </p></li>\n<li><p>look at the pool size in your db connection or set one!\n<a href=\"http://guides.rubyonrails.org/configuring.html#database-pooling\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/configuring.html#database-pooling</a>\nshould be equal to the max-connections mysql likes to have!</p></li>\n</ul>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1502303080, "post_id": 45570999, "comment_id": 78155653, "body": "is there a way to query a database for a list of active connections? rather than active processes?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 1, "creation_date": 1502333640, "post_id": 45570999, "comment_id": 78166643, "body": "@denodster I apologize for mis-writing I blanked out and though the data was the Ruby application process count.The MySQL query actually provides the open connection data (36 connections)."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 1, "creation_date": 1503347301, "post_id": 45570999, "comment_id": 78567945, "body": "either way I believe this put me on the right track, I was forking in a few places to spawn child processes, and I found out that it can interfere with database connections, so I rewrote those portions of our app, and I&#39;m going to be going live with that fix tonight, We&#39;ll see if it works."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1503518988, "post_id": 45570999, "comment_id": 78655139, "body": "So far so good, I haven&#39;t seen any database connection failures yet today, I&#39;ll give it a few more days and do a writeup on exactly what I did to fix."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 1, "creation_date": 1503519214, "post_id": 45570999, "comment_id": 78655234, "body": "@denodster I&#39;m happy I could help by pointing out the concern regarding <code>fork</code> and database connections."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1504192561, "post_id": 45570999, "comment_id": 78929545, "body": "Thanks again, if you are interested I posted my actual solution as an answer."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 5, "last_activity_date": 1502334198, "last_edit_date": 1502334198, "creation_date": 1502202308, "answer_id": 45570999, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45570999#45570999", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>The connection to MySQL can be disrupted by a number of means, but I would recommend revisiting Mario Carrion's answer since it's a very wise answer.</p>\n\n<p>It seems likely that connection is disrupted because it's being shared with the other processes, causing communication protocol errors...</p>\n\n<p>...this could easily happen if the connection pool is process bound, which I believe it is, in ActiveRecord, meaning that the same connection could be \"checked-out\" a number of times simultaneously in different processes.</p>\n\n<p>The solution is that database connections must be established only AFTER the <code>fork</code> statement in the application server.</p>\n\n<p>I'm not sure which server you're using, but if you're using a <code>warmup</code> feature - don't.</p>\n\n<p>If you're running any database calls before the first network request - don't.</p>\n\n<p>Either of these actions could potentially initialize the connection pool before <code>fork</code>ing occurs, causing the MySQL connection pool to be shared between processes while the locking system isn't.</p>\n\n<p>I'm not saying this is the only possible reason for the issue, as stated by @sloth-jr, there are other options... but most of them seem less likely according to your description.</p>\n\n<p>Sidenote:</p>\n\n<blockquote>\n  <p>I ran select * from information_schema.processlist; and I got 36 rows back. Does this mean my app servers were running 36 connections at that moment? or can a process be multiple connections?</p>\n</blockquote>\n\n<p><strike>Each process could hold a number of connections. In your case, you might have up to 500X36 connections</strike>. <em>(see edit)</em></p>\n\n<p>In general, the number of connections in the pool can often be the same as the number of threads in each process (it shouldn't be less than the number of thread, or contention will slow you down). Sometimes it's good to add a few more depending on your application.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I apologize for ignoring the fact that the process count was referencing the MySQL data and not the application data.</p>\n\n<p>The process count you showed is the MySQL server data, which <a href=\"https://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html\" rel=\"nofollow noreferrer\">seems to use a thread per connection IO scheme</a>. <a href=\"https://dev.mysql.com/doc/refman/5.7/en/show-processlist.html\" rel=\"nofollow noreferrer\">The \"Process\" data actually counts active connections</a> and not actual processes or threads (although it should translate to the number of threads as well).</p>\n\n<p>This means that out of possible 500 connections per application processes (i.e., if you're using 8 processes for your application, that would be 8X500=4,000 allowed connections) your application only opened 36 connections so far.</p>\n"}, {"tags": [], "owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "is_accepted": false, "score": 0, "last_activity_date": 1587475440, "last_edit_date": 1587475440, "creation_date": 1504192481, "answer_id": 45984855, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/45984855#45984855", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>UPDATE: this didn't work.</p>\n\n<p>Heres the solution, special thanks to @Myst for pointing out that forking can cause issues, I had no idea to look at this particular code. As the errors seemed random because we forked in this fashion in several places.</p>\n\n<p>It turns out that when I was forking processes, rails was using the same database connection for all forked processes, This created a situation where when one of the processes (the parent process?) terminated the database connection, the remaining process would have its connection interrupted.</p>\n\n<p>The solution was to change this code:</p>\n\n<pre><code>  def recalculate_completion\n    Process.fork do\n      if self.course\n        self.course.user_groups.includes(user:[:events]).each do |ug|\n          ug.recalculate_completion\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>into this code:</p>\n\n<pre><code>  def recalculate_completion\n    ActiveRecord::Base.remove_connection\n    Process.fork do\n      ActiveRecord::Base.establish_connection\n      if self.course\n        self.course.user_groups.includes(user:[:events]).each do |ug|\n          ug.recalculate_completion\n        end\n      end\n      ActiveRecord::Base.remove_connection\n    end\n    ActiveRecord::Base.establish_connection\n  end\n</code></pre>\n\n<p>Making this change stopped the errors from our servers and everything appears to be working well now. If anyone has any more info as to why this worked I would be happy to hear it, as I would like to have a deeper understanding of this. </p>\n\n<p>Edit: it turns out this didn't work either.... we still got dropped connections but not as often.</p>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 2088079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a7253fd33541f0d9cdd53f67bf1ec0?s=128&d=identicon&r=PG&f=1", "display_name": "Charan", "link": "https://stackoverflow.com/users/2088079/charan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556682285, "creation_date": 1556682285, "answer_id": 55931362, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries/55931362#55931362", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>If you have query cache enabled, please reset it and it should work. </p>\n\n<p>RESET QUERY CACHE;</p>\n"}], "owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9577, "favorite_count": 2, "accepted_answer_id": 45570999, "answer_count": 8, "score": 5, "last_activity_date": 1587475440, "creation_date": 1500401047, "last_edit_date": 1548449496, "question_id": 45174080, "link": "https://stackoverflow.com/questions/45174080/lost-connection-to-mysql-server-during-query-on-random-simple-queries", "title": "Lost connection to MySQL server during query on random simple queries", "body": "<p>FINAL UPDATE: We fixed this problem by finding a way to accomplish our goals without forking. But forking was the cause of the problem.</p>\n\n<p>---Original Post---</p>\n\n<p>I'm running a ruby on rails stack, our mysql server is separate, but housed at the same site as our app servers. (we've tried swapping it out for a different mysql server with double the specs, but no improvement was seen.</p>\n\n<p>during business hours we get a handful of these from no particular query.</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: Lost connection to MySQL server during query\n</code></pre>\n\n<p>most of the queries that fail are really simple, and there seems to be no pattern between one query and another. This all started when I upgraded from Rails 4.1 to 4.2.</p>\n\n<p>I'm at a loss as to what to try. Our database server is less than 5% CPU throughout the day. I do get bug reports from users who have random interactions fail due to this, so it's not queries that have been running for hours or anything like that, of course when they retry the exact same thing it works.</p>\n\n<p>Our servers are configured by cloud66.</p>\n\n<p>So in short: our mysql server is going away for some reason, but it's not because of lack of resources, it's also a brand new server as we migrated from another server when this problem started.</p>\n\n<p>this also happens to me on localhost while developing features sometimes, so I don't believe it's a load issue.</p>\n\n<p>We're running the following:</p>\n\n<ul>\n<li>ruby 2.2.5</li>\n<li>rails 4.2.6</li>\n<li>mysql2 0.4.8</li>\n</ul>\n\n<p>UPDATE: per the first answer below I increased our max_connections variable to 500 last night, and confirmed the increase via\n<code>show global variables like 'max_connections';</code></p>\n\n<p>I'm still getting dropped connection, the first one today was dropped only a few minutes ago....\n<code>ActiveRecord::StatementInvalid: Mysql2::Error: Lost connection to MySQL server during query</code></p>\n\n<p>I ran <code>select * from information_schema.processlist;</code> and I got 36 rows back. Does this mean my app servers were running 36 connections at that moment? or can a process be multiple connections?</p>\n\n<p>UPDATE: I just set net_read_timeout = 60 (it was 30 before) I'll see if that helps</p>\n\n<p>UPDATE: It didn't help, I'm still looking for a solution...</p>\n\n<p>Heres my Database.yml with credentials removed.</p>\n\n<pre><code>production:\n  adapter: mysql2\n  encoding: utf8\n  host: localhost\n  database:\n  username: \n  password: \n  port: 3306\n  reconnect: true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 1, "creation_date": 1500404616, "post_id": 45174140, "comment_id": 77318438, "body": "Never monkeypatch NilClass especially with metods from other classes. It&#39;s very error prone and you would not even be informed about this error."}], "tags": [], "owner": {"reputation": 393, "user_id": 2653671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a5f7af7f0f845e4effa9c4a5ef8b47f?s=128&d=identicon&r=PG", "display_name": "rodsoars", "link": "https://stackoverflow.com/users/2653671/rodsoars"}, "is_accepted": false, "score": 1, "last_activity_date": 1500401875, "last_edit_date": 1500401875, "creation_date": 1500401266, "answer_id": 45174140, "question_id": 45174007, "link": "https://stackoverflow.com/questions/45174007/alter-all-attributes-printed-in-views-on-ruby-on-rails/45174140#45174140", "title": "Alter all attributes printed in views on ruby on rails", "body": "<p>You can monkeypatch <code>NilClass</code>.</p>\n\n<pre><code>class NilClass\n  def to_s\n    '-'\n  end\nend\n</code></pre>\n\n<p>Everytime you invoke, say, <code>nil.to_s</code>, it will print <code>'-'</code>. If you type <code>puts nil</code> in the console, will print <code>-</code>. Try the following example:</p>\n\n<pre><code>class NilClass\n  def to_s\n    '-'\n  end\nend\n\nfoo = nil\nfoo.to_s  #=&gt; '-'\nputs foo  #=&gt; -\n</code></pre>\n\n<p>In your case, all occurrences of empty (<code>nil</code>) attributes will output <code>-</code> in the view when trying to print (and, be warned, in other parts of your application too).</p>\n\n<p>PS.: <code>#to_s</code> returns a string representing the instance object.</p>\n"}, {"comments": [{"owner": {"reputation": 122, "user_id": 3877210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0992a19f2603d5962b8e2333c843c83e?s=128&d=identicon&r=PG", "display_name": "Helio Borges", "link": "https://stackoverflow.com/users/3877210/helio-borges"}, "edited": false, "score": 0, "creation_date": 1500405843, "post_id": 45174626, "comment_id": 77319162, "body": "This seems exactly what I was looking for, but it&#39;s not working. I&#39;m not sure if it&#39;s because I&#39;m on an oracle database.  It&#39;s giving me this error when calling self.column_names:  ActiveRecord::ConnectionAdapters::OracleEnhancedConnectionEx&zwnj;&#8203;ception at /gestao_pessoas/membros/membros_ativos &quot;DESC gestao_pessoas_tb_membro_ativos&quot; failed; does it exist?   . If I remove your module, it returns correctly an array with the column names. So it&#39;s probably the module that is bugging it  I&#39;m using Rails 4 and the gems: &#39;ruby-oci8&#39; and &#39;activerecord-oracle_enhanced-adapter&#39;, &#39;~&gt; 1.5.6&#39;"}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 122, "user_id": 3877210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0992a19f2603d5962b8e2333c843c83e?s=128&d=identicon&r=PG", "display_name": "Helio Borges", "link": "https://stackoverflow.com/users/3877210/helio-borges"}, "edited": false, "score": 1, "creation_date": 1500443191, "post_id": 45174626, "comment_id": 77331740, "body": "@HelioBorges I&#39;ve tested that in rails 3 &amp; PostgreSQL. Never used Oracle though. Can you provide the details of <code>self</code> inside <code>included</code> block? Some details like, the value of <code>self</code> and <code>self.class</code>. Information of error backtrace will also be helpful. You can provide backtrace in GitHub gist."}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 122, "user_id": 3877210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0992a19f2603d5962b8e2333c843c83e?s=128&d=identicon&r=PG", "display_name": "Helio Borges", "link": "https://stackoverflow.com/users/3877210/helio-borges"}, "edited": false, "score": 1, "creation_date": 1500443211, "post_id": 45174626, "comment_id": 77331750, "body": "Also, try including this module in some other model, and check if it works there."}, {"owner": {"reputation": 122, "user_id": 3877210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0992a19f2603d5962b8e2333c843c83e?s=128&d=identicon&r=PG", "display_name": "Helio Borges", "link": "https://stackoverflow.com/users/3877210/helio-borges"}, "edited": false, "score": 0, "creation_date": 1500464013, "post_id": 45174626, "comment_id": 77345526, "body": "I managed to get it working  The describe method inside OracleEnhancedConnection class from module ActiveRecord and module ConnectionAdapters was getting the wrong tablename. The actual table name is &#39;tb_membro_ativo&#39; not &#39;gestao_pessoas_tb_membro_ativos&#39;. &#39;gestao_pessoas&#39; is my module where the class &#39;tb_membro_ativo&#39; is in.  So I used the power of ruby&#39;s meta-programming to fix that :). Thank you so much for your help"}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 122, "user_id": 3877210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0992a19f2603d5962b8e2333c843c83e?s=128&d=identicon&r=PG", "display_name": "Helio Borges", "link": "https://stackoverflow.com/users/3877210/helio-borges"}, "edited": false, "score": 1, "creation_date": 1500470065, "post_id": 45174626, "comment_id": 77350595, "body": "Good to know that."}], "tags": [], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "is_accepted": true, "score": 2, "last_activity_date": 1500404093, "last_edit_date": 1500404093, "creation_date": 1500403069, "answer_id": 45174626, "question_id": 45174007, "link": "https://stackoverflow.com/questions/45174007/alter-all-attributes-printed-in-views-on-ruby-on-rails/45174626#45174626", "title": "Alter all attributes printed in views on ruby on rails", "body": "<p>You can use the power of ruby's meta-programming and <code>ActiveSupport::Concern</code>.</p>\n\n<p>Create a model extension module to overwrite the <code>getter</code> of all columns dynamically. Below code can do that:</p>\n\n<pre><code>module ModelExtension\n  extend ActiveSupport::Concern\n\n  # To exclude some columns\n  EXCLUDE_COLUMNS = ['id', 'created_at', 'updated_at']\n\n  included do\n    (self.column_names - EXCLUDE_COLUMNS).each do |col|\n      define_method col do\n        self[col].blank? ? '-' : self[col]\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Include this module in each model to get '-' instead of blank or nil. To include model, you can do:</p>\n\n<pre><code>class MyModel\n  include ModelExtension\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 2133208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6ad1d9b863e61c73a31d1a92f679da?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Carlos Ottobboni", "link": "https://stackoverflow.com/users/2133208/jo%c3%a3o-carlos-ottobboni"}, "is_accepted": false, "score": 1, "last_activity_date": 1500660546, "creation_date": 1500660546, "answer_id": 45244128, "question_id": 45174007, "link": "https://stackoverflow.com/questions/45174007/alter-all-attributes-printed-in-views-on-ruby-on-rails/45244128#45244128", "title": "Alter all attributes printed in views on ruby on rails", "body": "<p>A solution maybe\nThe Null Object Pattern</p>\n\n<p>Null Object is an object with some default behavior that implements the same interface as an other object that might be used in a given case. Ok, cool, but how can we apply it to the example below? Let's start with the user method:</p>\n\n<pre><code> def user\n   @user ||= User.find_by(email: email) || NullUser.new\n end\n</code></pre>\n\n<p>And now we can implement NullUser:</p>\n\n<pre><code>class NullUser\n  def name\n    \"Anonymous user\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 3877210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0992a19f2603d5962b8e2333c843c83e?s=128&d=identicon&r=PG", "display_name": "Helio Borges", "link": "https://stackoverflow.com/users/3877210/helio-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 45174626, "answer_count": 3, "score": 1, "last_activity_date": 1500660546, "creation_date": 1500400790, "question_id": 45174007, "link": "https://stackoverflow.com/questions/45174007/alter-all-attributes-printed-in-views-on-ruby-on-rails", "title": "Alter all attributes printed in views on ruby on rails", "body": "<p>My rails application only reads data on it's database. There's no save. \nMostly all my views are a form with a few fields to filter my search and a table printing every column's value. Something like that:</p>\n\n<pre><code>&lt;table&gt;\n &lt;tr&gt;\n  &lt;th&gt; Col1 &lt;/th&gt;\n  &lt;th&gt; Col2 &lt;/th&gt;\n  &lt;th&gt; Col3 &lt;/th&gt;\n  ...\n &lt;/tr&gt;\n&lt;% Model.all.each do |model| %&gt;\n &lt;tr&gt;\n  &lt;td&gt; &lt;%= model.col1 %&gt; &lt;/td&gt;\n  &lt;td&gt; &lt;%= model.col2 %&gt; &lt;/td&gt;\n  &lt;td&gt; &lt;%= model.col3 %&gt; &lt;/td&gt;\n  ...\n &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>There's over 50 models each with 10-20 fields, almost 100 tables. It's all very straightforward.</p>\n\n<p>Now my client asked me that when any cell is empty (the data is null or '') he wants it to print '-' instead of the blank cell on the table</p>\n\n<p>At first I thought about something like this on my application_helper.rb:</p>\n\n<pre><code>def avoid_empty(object)\n if object == nil or object == \"\" \n   return \"-\"\n else\n   return object\n end\nend\n</code></pre>\n\n<p>and everywhere on my views I would just change</p>\n\n<pre><code> &lt;%= model.col1 %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code> &lt;%= avoid_empty(model.col1) %&gt;\n</code></pre>\n\n<p>but I actually have 2659 lines like that. I'm not sure it's the healthier approach.</p>\n\n<p>Is there any way I can change it everytime I try to print any value from those models that I could go through that method or something similar first, without having to change every single one of my 2659 lines?</p>\n"}, {"tags": ["ruby", "mongoid", "grape"], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "is_accepted": false, "score": 0, "last_activity_date": 1500401752, "creation_date": 1500401752, "answer_id": 45174268, "question_id": 45173828, "link": "https://stackoverflow.com/questions/45173828/enforce-that-a-grape-entity-always-returns-an-array/45174268#45174268", "title": "Enforce that a Grape Entity always returns an array?", "body": "<p>a coworker and I came up with a solution with a helper, create a helper method that always returns an array:</p>\n\n<pre><code>def present_array(key, data, entity)\n  d = (data.class.respond_to? :count) ? [data] : data\n  d = [] if d.nil?\n  present key, d, entity\nend\n</code></pre>\n"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500401752, "creation_date": 1500400189, "last_edit_date": 1500400649, "question_id": 45173828, "link": "https://stackoverflow.com/questions/45173828/enforce-that-a-grape-entity-always-returns-an-array", "title": "Enforce that a Grape Entity always returns an array?", "body": "<p>How can I enforce that my Grape Entity always returns an array (collection) even if its just a singular object? I have heard that some people create a helper method that gets called inside their endpoint, but I have not found any examples of anyone doing that, online.</p>\n\n<p>The default functionality of an Entity is that it returns an object if only a single document (mongoid object) is returned. If a collection of documents is returned then it returns an array, I dont want my client application having to do a check every time to see if an object or an array got returned from my API.</p>\n\n<pre><code>## Resource (HTTP Endpoint)\ndesc 'List departments a user can and cannot access'\nparams do\n  requires :user_id\nend\nget :department_access do\n  @user = BACKBONE::User.find(@access_key.user_id)\n  requires_admin!\n  user = BACKBONE::User.find(params[:user_id])\n  can_access = BACKBONE::Department.user_can_access(user)\n  no_access = BACKBONE::Department.user_cannot_access(user)\n  present_success can_access\n  present :can_access, can_access, with: BACKBONE::Entities::DepartmentBase\n  present :no_access, no_access, with: BACKBONE::Entities::DepartmentBase\nend\n</code></pre>\n\n<p>-</p>\n\n<pre><code>## Entity\nmodule BACKBONE\n  module Entities\n    class DepartmentBase &lt; BACKBONE::Entities::Mongoid\n      expose :name\n      expose :prefix\n      with_options(format_with: :mongo_id) do\n        expose :company_id\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>JSON Response</p>\n\n<pre><code>{\n    \"status\": \"success\",\n    \"request_time\": 0.009812,\n    \"records\": 1,\n    \"can_access\": {\n        \"id\": \"59699d1a78cee4f8d07528fc\",\n        \"created_at\": \"2017-07-14T21:42:02.666-07:00\",\n        \"updated_at\": \"2017-07-14T21:42:02.666-07:00\",\n        \"name\": \"Tenant Improvement\",\n        \"prefix\": \"CACC\",\n        \"company_id\": \"596927fb670f6eec21c4f409\"\n    },\n    \"no_access\": {\n        \"id\": \"59699cca78cee4f8d07528fb\",\n        \"created_at\": \"2017-07-14T21:40:42.005-07:00\",\n        \"updated_at\": \"2017-07-14T21:40:42.005-07:00\",\n        \"name\": \"Field Operations\",\n        \"prefix\": \"CACC\",\n        \"company_id\": \"596927fb670f6eec21c4f409\"\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "bundler"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1500402711, "post_id": 45173782, "comment_id": 77317223, "body": "What is the exact output of the <code>bundle</code> command? Are you specifying the version Adhoc, for example <code>gem &#39;adhoq&#39;, &#39;0.1.2&#39;</code>?. 0.1.2 is compatible with Rails 5+."}, {"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1500403387, "post_id": 45173782, "comment_id": 77317623, "body": "yes  0.1.2 is compatible with Rails 5+ ."}], "answers": [{"tags": [], "owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "is_accepted": true, "score": 2, "last_activity_date": 1500403304, "creation_date": 1500403304, "answer_id": 45174685, "question_id": 45173782, "link": "https://stackoverflow.com/questions/45173782/rails-5-with-adhoq-gem-unable-to-resolve-bundler-dependencies/45174685#45174685", "title": "Rails 5 with Adhoq gem. Unable to resolve bundler dependencies", "body": "<p>Do this: </p>\n\n<ol>\n<li>Add <code>gem 'adhoq', '0.1.2'</code> into Gemfile. (0.1.2 is latest)</li>\n<li>before <code>bundle install</code> check the dependencies of other gems with <code>adhoq</code>. To check <strong>runtime dependencies</strong> please refer this website. <a href=\"https://rubygems.org/gems/adhoq\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/adhoq</a>.</li>\n<li>Execute <code>bundle install</code>. You will not receive any errors if all runtime dependencies satisfied for the <code>adhoq</code> gem.</li>\n<li>Still If you are not able to execute <code>bundle install</code> than Remove <code>Gemfile.lock</code>. and once again execute <code>bundle install</code>. Hope this will work.</li>\n</ol>\n\n<p><strong>Note: To avoid step 4 you can update particular gem one by one to satisfied runtime dependencies.</strong> </p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 679, "user_id": 1580021, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95c100dda8b56b01970a751c1af1a317?s=128&d=identicon&r=PG", "display_name": "Romuloux", "link": "https://stackoverflow.com/users/1580021/romuloux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 45174685, "answer_count": 1, "score": 0, "last_activity_date": 1500424542, "creation_date": 1500400035, "last_edit_date": 1500424542, "question_id": 45173782, "link": "https://stackoverflow.com/questions/45173782/rails-5-with-adhoq-gem-unable-to-resolve-bundler-dependencies", "title": "Rails 5 with Adhoq gem. Unable to resolve bundler dependencies", "body": "<p>OK, so I am trying to install the <a href=\"https://github.com/esminc/adhoq\" rel=\"nofollow noreferrer\">Adhoq</a> gem into my Rails 5 project.</p>\n\n<p>When I add it like usual (<code>gem 'adhoq'</code>) it fails as the default dependencies are for rails 4 with a few other outdated libraries of which I have more recent versions.</p>\n\n<p>I can see <code>gemfiles/Gemfile-rails-5.0x</code> exists but I have never seen this design pattern before.</p>\n\n<p>I know I could fork it and manually update the dependencies but that presents a whole host of other issues and since this gemfile exists it leads me to something I currently don't know about Bundler or gems as a whole.</p>\n\n<p>A glance at the Bundler docs wasn't helpful, but I will keep digging.</p>\n\n<p>What is it that I am missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1500402138, "post_id": 45172801, "comment_id": 77316901, "body": "Can you please also add snippet of <code>ProjectRequestsController</code> as well?"}, {"owner": {"reputation": 33, "user_id": 7160990, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5892d6231ade267e23bd8c70e68db12f?s=128&d=identicon&r=PG&f=1", "display_name": "Boris SB", "link": "https://stackoverflow.com/users/7160990/boris-sb"}, "reply_to_user": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1500403709, "post_id": 45172801, "comment_id": 77317848, "body": "Right on. Just posted it. Basically, based on each <code>PagesController</code> action, I should be able to pass a different <code>ProjectRequest</code> instance variable with an attribute corresponding to that page&#39;s  action."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7160990, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5892d6231ade267e23bd8c70e68db12f?s=128&d=identicon&r=PG&f=1", "display_name": "Boris SB", "link": "https://stackoverflow.com/users/7160990/boris-sb"}, "edited": false, "score": 0, "creation_date": 1500400839, "post_id": 45173363, "comment_id": 77316134, "body": "Thanks Amit, confirming my thoughts. What I did realize nevertheless is that instantiating @new_project in <code>PagesController</code> is useless here as it comes from the <code>new</code> method in <code>ProjectRequestsController</code>. Thus, it is instantiated once in this controller and I can&#39;t pass different new instances of project_requests to my form."}], "tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1500398552, "creation_date": 1500398552, "answer_id": 45173363, "question_id": 45172801, "link": "https://stackoverflow.com/questions/45172801/how-to-make-different-use-of-a-contact-form-model-with-a-static-pages-controller/45173363#45173363", "title": "How to make different use of a contact form model with a static pages controller?", "body": "<p>You are almost there.</p>\n\n<p>First off set the flag in the action itself about the source of the form</p>\n\n<pre><code>def home\n  @new_project = ProjectRequest.new(home: true)\nend\n</code></pre>\n\n<p>Here we are setting <code>home: true</code> in case of form is rendering on home page.</p>\n\n<p>Now in your form use hidden variables for each landing page flag</p>\n\n<pre><code>&lt;%= form_for @new_project do |f| %&gt;\n  &lt;%= f.hidden_field :home %&gt;\n  &lt;%= f.hidden_field :landing_one %&gt;\n  &lt;%= f.hidden_field :landing_two %&gt;\n  ....and your other fields....\n&lt;% end %&gt;\n</code></pre>\n\n<p>When you submit form and pass the the parameters in <code>create</code> action, it would automatically set the page flags.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 7160990, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5892d6231ade267e23bd8c70e68db12f?s=128&d=identicon&r=PG&f=1", "display_name": "Boris SB", "link": "https://stackoverflow.com/users/7160990/boris-sb"}, "is_accepted": true, "score": 0, "last_activity_date": 1500490848, "creation_date": 1500490848, "answer_id": 45198993, "question_id": 45172801, "link": "https://stackoverflow.com/questions/45172801/how-to-make-different-use-of-a-contact-form-model-with-a-static-pages-controller/45198993#45198993", "title": "How to make different use of a contact form model with a static pages controller?", "body": "<p>Got the solution,</p>\n\n<p>I simply created the following helper and used it in my <code>create</code> <code>ProjectRequestsController</code> method.</p>\n\n<p><code>referrer</code> allows me to get the ancestor's URL of my new_project_request_path, and thus, get what <code>PagesController</code> method is being used.</p>\n\n<pre><code>  def set_new_project_instance\n    project = @new_project\n    if request.referrer.include? \u2018home\u2019\n      project.landing_one = true\n    elsif request.referrer.include? \u2018travel\u2019\n      project.landing_two = true\n    end\n    project.save\n  end\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7160990, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5892d6231ade267e23bd8c70e68db12f?s=128&d=identicon&r=PG&f=1", "display_name": "Boris SB", "link": "https://stackoverflow.com/users/7160990/boris-sb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 45198993, "answer_count": 2, "score": 0, "last_activity_date": 1500490848, "creation_date": 1500396618, "last_edit_date": 1500485426, "question_id": 45172801, "link": "https://stackoverflow.com/questions/45172801/how-to-make-different-use-of-a-contact-form-model-with-a-static-pages-controller", "title": "How to make different use of a contact form model with a static pages controller?", "body": "<p>I have a static <code>PagesController</code> and a <code>ProjectRequestsController</code>, as shown below. Pretty basic. The <code>ProjectRequestsController</code> acts as a simple contact form.</p>\n\n<p>I'd like to be able to identify if a project_request form has been submitted whether from one page or another, e.g, set to <code>true</code> or <code>false</code> an attribute to each project_request record when persisted. </p>\n\n<p>Ex: if a form is submitted from home, set <code>home = true</code>, etc...</p>\n\n<p>I tried nesting project requests resources under pages, but doesn't work as my pages do not have any ID. </p>\n\n<p>I thought about passing <code>hidden_field</code> values from the form to my controller, but don't know exactly how to proceed or event if I should go down that road.</p>\n\n<p>Is the best way to achieve this?</p>\n\n<p>PagesController</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n\n  def home\n  end\n\n  # Landing pages\n  def landing_one\n    render 'pages/landings/landing_one/landing_home'\n  end\n\n  def landing_two\n    render 'pages/landings/landing_two/landing_home'\n  end  \n  .... \nend\n</code></pre>\n\n<p>ProjectRequests table:</p>\n\n<pre><code>create_table \"project_requests\", force: :cascade do |t|\n    t.string \"name\"\n    t.string \"last_name\"\n    t.string \"email\"\n    t.string \"title\"\n    t.boolean \"home\", default: false\n    t.boolean \"landing_one\", default: false\n    t.boolean \"landing_two\", default: false\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p><strong>EDITED</strong>\nAdd ProjectRequestsController snippet. \nFor now, it looks like this. I am rendering in a modal the form., escape JS.\nSo my <code>new</code> action is bound to my <code>new.js.erb</code> through which I am passing my empty shell <code>@new_project</code>.</p>\n\n<pre><code>class ProjectRequestsController &lt; ApplicationController\n  skip_before_action :authenticate_user!, only: [ :new, :create ]\n  before_action :set_project, only: [:edit]\n\n  def new\n    @new_project = ProjectRequest.new\n  end\n\n  def create\n    @new_project = ProjectRequest.new project_requests_params\n    respond_to do |format|\n      if @new_project.save\n        format.html { redirect_to root_path }\n        format.js\n        flash[:notice] = t('controllers.projects.success')\n        AdminNotificationMailer.new_project_notification(@new_project).deliver\n      else\n        format.html { render 'edit' }\n        format.js\n        flash[:alert] = t('controllers.projects.fail')\n      end\n    end\n  end\n\n  def edit\n  end\n\n  private\n\n  def project_requests_params\n    params.require(:project_request).permit(:name,\n                                             :email,\n                                             :description,\n                                             :travel,\n                                             :home)\n  end\n\n  def set_project\n    @project = ProjectRequest.find(params[:id])\n  end\nend\n</code></pre>\n"}, {"tags": ["json", "ruby", "gsub"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1500397427, "post_id": 45172787, "comment_id": 77314141, "body": "What specifically is in <code>tag</code>? What ends up in <code>tag_json</code>? Are you sure you&#39;re using <code>tag_json</code>? <code>gsub(&#47;\\s+&#47;, &#39;&#39;)</code> should remove newlines so something is going on that you&#39;re not showing us, a minimal example would be useful for everyone. BTW, there&#39;s nothing wrong with newlines (or other whitespace) in JSON."}, {"owner": {"reputation": 2092, "user_id": 2395694, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TZz1I.jpg?s=128&g=1", "display_name": "Rome_Leader", "link": "https://stackoverflow.com/users/2395694/rome-leader"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1500397570, "post_id": 45172787, "comment_id": 77314229, "body": "Tag is what you see there, but in plain text form before. I&#39;ll add a more complete example to the original post."}, {"owner": {"reputation": 2092, "user_id": 2395694, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TZz1I.jpg?s=128&g=1", "display_name": "Rome_Leader", "link": "https://stackoverflow.com/users/2395694/rome-leader"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1500398748, "post_id": 45172787, "comment_id": 77314947, "body": "Updated original post with full context. As you can see, it&#39;s not much different."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1500399447, "post_id": 45172787, "comment_id": 77315334, "body": "<code>gsub(&#47;\\s+&#47;,&quot;&quot;)</code> will replace newlines. Perhaps you have literal <code>\\n</code> (two characters) rather than the actual <code>\\n</code> (single character)?"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1500400296, "post_id": 45172787, "comment_id": 77315830, "body": "<a href=\"http://rubular.com/r/SVjRyvIfjT\" rel=\"nofollow noreferrer\">Demo</a> (Click &#39;Show Invisibles&#39;)"}, {"owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "edited": false, "score": 0, "creation_date": 1500408033, "post_id": 45172787, "comment_id": 77320517, "body": "Try <code>tag_json.gsub(&#47;[\\s\\p{]&#47;, &#39;&#39;)</code> - also, you don&#39;t need the <code>+</code> in the regex because <code>gsub</code> will match every occurence anyway"}], "answers": [{"comments": [{"owner": {"reputation": 2092, "user_id": 2395694, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TZz1I.jpg?s=128&g=1", "display_name": "Rome_Leader", "link": "https://stackoverflow.com/users/2395694/rome-leader"}, "edited": false, "score": 0, "creation_date": 1500462089, "post_id": 45177822, "comment_id": 77344221, "body": "This worked for me, so I suspect an encoding issue was at fault. I was running this from a Chef cookbook which makes it seem likely it was something like that."}], "tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": true, "score": 1, "last_activity_date": 1500415178, "creation_date": 1500415178, "answer_id": 45177822, "question_id": 45172787, "link": "https://stackoverflow.com/questions/45172787/does-rubys-gsub-not-treat-n-as-a-whitespace-character/45177822#45177822", "title": "Does Ruby&#39;s gsub not treat \\n as a whitespace character?", "body": "<p>Maybe it's an encoding issue. Try <code>tag_json = tag.to_json.gsub(/[\\s\\p{]/, \"\")</code></p>\n\n<p>You don't need the <code>+</code> in your expression because <code>gsub</code> removes all occurrences of a single character anyway.</p>\n\n<p>Consider <code>\"aaaaaa\".gsub(/a/, '') # =&gt; \"\"</code></p>\n"}], "owner": {"reputation": 2092, "user_id": 2395694, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TZz1I.jpg?s=128&g=1", "display_name": "Rome_Leader", "link": "https://stackoverflow.com/users/2395694/rome-leader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 45177822, "answer_count": 1, "score": -1, "last_activity_date": 1500415178, "creation_date": 1500396544, "last_edit_date": 1500398732, "question_id": 45172787, "link": "https://stackoverflow.com/questions/45172787/does-rubys-gsub-not-treat-n-as-a-whitespace-character", "title": "Does Ruby&#39;s gsub not treat \\n as a whitespace character?", "body": "<p>I'm trying to perform a simple operation - turn some input text into JSON, process it, and use it further. </p>\n\n<pre><code>require 'json'\n\naws_region = \"us-east-1\"\n\ntag = `sudo aws ec2 describe-tags --region=\"#{aws_region}\" --\nfilters \"Name=resource-type,Values=instance\" \"Name=key,Values=Group\" \n\"Name=resource-id,Values=$(ec2metadata --instance-id)\"`\n\nputs tag\n\ntag_json = tag.to_json.gsub(/\\s+/, \"\")\n#tag_json = tag.gsub(\"\\n\", \"\")\n\nputs tag_json\n\nobj = JSON.parse(tag_json)\n\ndesired_value = obj[\"Tags\"][0][\"Value\"]\n\nputs desired_value\n</code></pre>\n\n<p>I expected the above to strip out all whitespace including newlines, but to my surprise, the output still has newlines in it. The JSON.parse fails with the below error because the newlines are still present. With the additional tag_json assignment above uncommented, it removes the newlines and succeeds.</p>\n\n<pre><code>JSON::ParserError\n-----------------\n746: unexpected token at '\"{\\n\\\"Tags\\\": [\\n{\\n\\\"ResourceType\\\": \n\\\"instance\\\", \\n\\\"ResourceId\\\": \\\"i-XXXXXX\\\", \\n\\\"Value\\\": \n\\\"groupA\\\", \\n\\\"Key\\\": \\\"Group\\\"\\n}\\n]\\n}\\n\"'\n</code></pre>\n\n<p>I end up having to have a separate case for newlines. Why does gsub treat newline characters as non-whitespace? Is there any other expression that will combine all of whitespace, tabs and newlines so I can strip them out?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396410, "post_id": 45172663, "comment_id": 77313524, "body": "So what is <code>n</code> supposed to be in your case? Is it a hash, or a key? You need both, naturally."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396461, "post_id": 45172663, "comment_id": 77313556, "body": "I am passing n in as a hash, containing keys and values."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396511, "post_id": 45172663, "comment_id": 77313598, "body": "What about &quot;For example count_arara(3) should result in  &#39;adak anane&#39;&quot;?"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396550, "post_id": 45172663, "comment_id": 77313624, "body": "count_arara(3) # -&gt; &#39;adak anane&#39;  count_arara(8) # -&gt; &#39;adak adak adak adak&#39;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396576, "post_id": 45172663, "comment_id": 77313642, "body": "I see that. But here you&#39;re passing only the key, no hash."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396610, "post_id": 45172663, "comment_id": 77313664, "body": "calling the method count_arara and passing the corresponding number in will print the value associated with it"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1500396652, "post_id": 45172663, "comment_id": 77313688, "body": "<code>puts hash[3] </code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396677, "post_id": 45172663, "comment_id": 77313698, "body": "&quot;will print the value associated with it&quot; - but how do you define the associations?"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500396871, "post_id": 45172663, "comment_id": 77313798, "body": "So should I define the hash inside the method?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1500396916, "post_id": 45172663, "comment_id": 77313830, "body": "@Benjamints: I really can&#39;t say. If that makes sense for your problem, then go ahead."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 1, "creation_date": 1500396938, "post_id": 45172663, "comment_id": 77313847, "body": "Appreciate your time."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1500397665, "post_id": 45172663, "comment_id": 77314285, "body": "I think you want <code>def count_arara(h, n)</code>, where <code>h</code> is the hash. That body of the method is then quite simple."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500398765, "post_id": 45172663, "comment_id": 77314953, "body": "I have updated my code."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500398842, "post_id": 45172663, "comment_id": 77314997, "body": "Thank you for your response Cary, it helped."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1500401703, "post_id": 45172663, "comment_id": 77316665, "body": "Could you kindly help to see why passing the argument 3 in isn&#39;t printing &#39;adak anane&#39;?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1500402181, "post_id": 45172663, "comment_id": 77316918, "body": "The method name <code>count_arara</code> is inscrutable, but unless I&#39;m missing something, don&#39;t you just want <code>def count_arara(n, h={}); h[n]; end</code>?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1500408763, "post_id": 45172663, "comment_id": 77320918, "body": "<i>&quot;Could you kindly help to see why passing the argument 3 in isn&#39;t printing &#39;adak anane&#39;&quot;</i> because <code>n</code> will never equal <code>h[k]</code> because <code>h[k]</code> returns a value for a key and none of your values are <code>3</code> what you actually want is <code>if n == k then puts(v)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 0, "last_activity_date": 1500418113, "creation_date": 1500418113, "answer_id": 45178321, "question_id": 45172663, "link": "https://stackoverflow.com/questions/45172663/passing-hash-key-as-parameter-to-print-out-value-of-hash/45178321#45178321", "title": "Passing hash key as parameter to print out value of hash", "body": "<p>A hash is a structure that keeps <em>keys</em> and <em>values</em> associated.</p>\n\n<pre><code>CODE_TO_NAME = {\n  'CH' =&gt; 'SWITZERLAND',\n  'DE' =&gt; 'GERMANY',\n  ...\n}\n</code></pre>\n\n<p>Here the country code (the two letter string) is the key to <strong>lookup</strong> the full country name. 'CH' is the key to 'Switzerland' and so on.</p>\n\n<p>To print the long country name for a two letter code you can do:</p>\n\n<pre><code>puts CODE_TO_NAME['CH']\n</code></pre>\n\n<p>This will print \"SWITZERLAND\".</p>\n\n<p>Now in your example you are looping through all key/value pairs. If the key (<code>3</code> matches the value associated with that key.</p>\n\n<p>Your probably would want to do something like:</p>\n\n<pre><code>hash.each do |key, value|\n  if key == number\n    puts \"value: #{value}\"\n  end\nend\n</code></pre>\n\n<p>but that is overly complicated and there is a much easier way to find the value associated with a specific key (which is what a hash is intended for): </p>\n\n<pre><code>puts hash[key]\n</code></pre>\n\n<p>I think this should be enough to rethink your method. Also you should probably give the method and the parameters more descriptive names.</p>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 45178321, "answer_count": 1, "score": 0, "last_activity_date": 1500418113, "creation_date": 1500396154, "last_edit_date": 1500401661, "question_id": 45172663, "link": "https://stackoverflow.com/questions/45172663/passing-hash-key-as-parameter-to-print-out-value-of-hash", "title": "Passing hash key as parameter to print out value of hash", "body": "<p>I am trying to print out the value of the key of the hash when passed into the method as an argument.</p>\n\n<p>For example count_arara(3) would result in 'adak anane'</p>\n\n<pre><code>def count_arara(n, h = {})\n h.each do |k, v| \n  if n == h[k]\n    h[v]\n   end\n  end\nend\n\n\ncount_arara(3, {\n\n  1 =&gt; 'anane',\n  2 =&gt; 'adak',\n  3 =&gt;'adak anane',\n  4 =&gt;'adak adak',\n  5 =&gt;'adak adak anane',\n  6 =&gt;'adak adak adak',\n  7 =&gt;'adak adak adak anane',\n  8 =&gt;'adak adak adak adak'\n\n})\n</code></pre>\n\n<p>Could anyone kindly push me into the right direction without telling me the answer?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "test-kitchen"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1500397056, "post_id": 45172620, "comment_id": 77313914, "body": "This error means that one of the intended <code>Hash</code>es e.g. either <code>node</code> or <code>node[&#39;apache&#39;]</code>  is actually an <code>Array</code> (or maybe a <code>Fixnum</code>) instead of a <code>Hash</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4775, "user_id": 241005, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b3bfdaba1474efed5ef2e99b512821ba?s=128&d=identicon&r=PG", "display_name": "veilig", "link": "https://stackoverflow.com/users/241005/veilig"}, "edited": false, "score": 0, "creation_date": 1500408204, "post_id": 45174249, "comment_id": 77320612, "body": "this is in test kitchen, so its no roles or env causing an issue and I&#39;ve commented out every line in my attributes/default.rb.  Still not sure whats causing it?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 4775, "user_id": 241005, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b3bfdaba1474efed5ef2e99b512821ba?s=128&d=identicon&r=PG", "display_name": "veilig", "link": "https://stackoverflow.com/users/241005/veilig"}, "edited": false, "score": 0, "creation_date": 1500417886, "post_id": 45174249, "comment_id": 77325049, "body": "Gist your attributes file."}, {"owner": {"reputation": 4775, "user_id": 241005, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b3bfdaba1474efed5ef2e99b512821ba?s=128&d=identicon&r=PG", "display_name": "veilig", "link": "https://stackoverflow.com/users/241005/veilig"}, "edited": false, "score": 0, "creation_date": 1500474465, "post_id": 45174249, "comment_id": 77354376, "body": "I think I see the problem.  in my .kitchen.yml file I set an apache attribute so that must be affecting it.  I don&#39;t get that error if comment thost .kitchen.yml lines out, I&#39;ll find another way to test that"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1500401669, "creation_date": 1500401669, "answer_id": 45174249, "question_id": 45172620, "link": "https://stackoverflow.com/questions/45172620/ruby-implicit-conversion-of-string-into-integer-in-chef-recipe/45174249#45174249", "title": "ruby implicit conversion of String into integer in chef recipe", "body": "<p>As engineersmnky mentioned, check the override and normal level attributes (or defaults coming from roles/envs). The sneaky one is usually normal, check via <code>knife node edit</code>. The likely case is <code>node['apache']</code> being set to an Array.</p>\n"}], "owner": {"reputation": 4775, "user_id": 241005, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b3bfdaba1474efed5ef2e99b512821ba?s=128&d=identicon&r=PG", "display_name": "veilig", "link": "https://stackoverflow.com/users/241005/veilig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 45174249, "answer_count": 1, "score": 0, "last_activity_date": 1500401669, "creation_date": 1500396015, "question_id": 45172620, "link": "https://stackoverflow.com/questions/45172620/ruby-implicit-conversion-of-string-into-integer-in-chef-recipe", "title": "ruby implicit conversion of String into integer in chef recipe", "body": "<p>I'm using the latest <a href=\"https://supermarket.chef.io/cookbooks/apache2\" rel=\"nofollow noreferrer\">apache2</a> cookbook (v5.0.0) in a wrapper file.  my wrapper recipe is just including the apache2 recipe so I'm not sure what is causing this error in my kitchen test when I try to setup the test suite???</p>\n\n<p><strong>Wrapper Recipe</strong></p>\n\n<pre><code>   include_recipe 'apache2'\n</code></pre>\n\n<p><strong>kitchen setup Error</strong></p>\n\n<pre><code>   ...\n   Synchronizing Cookbooks:\n     - my-webapp (2.0.0)\n     - apache2 (5.0.0)\n   Installing Cookbook Gems:\n   Compiling Cookbooks...\n\n   ================================================================================\n   Recipe Compile Error in /tmp/kitchen/cache/cookbooks/apache2/attributes/default.rb\n   ================================================================================\n\n   TypeError\n   ---------\n   no implicit conversion of String into Integer\n\n   Cookbook Trace:\n   ---------------\n     /tmp/kitchen/cache/cookbooks/apache2/attributes/default.rb:90:in `from_file'\n\n   Relevant File Content:\n   ----------------------\n   /tmp/kitchen/cache/cookbooks/apache2/attributes/default.rb:\n\n    83:    default['apache']['pid_file']    = '/var/run/httpd2.pid'\n    84:    default['apache']['lib_dir']     = node['kernel']['machine'] =~ /^i[36]86$/ ? '/usr/lib/apache2' : '/usr/lib64/apache2'\n    85:    default['apache']['libexec_dir'] = node['apache']['lib_dir']\n    86:  when 'debian'\n    87:    default['apache']['package']     = 'apache2'\n    88:    default['apache']['perl_pkg']    = 'perl'\n    89:    default['apache']['devel_package'] =\n    90&gt;&gt;     if node['apache']['mpm'] == 'prefork'\n    91:        'apache2-prefork-dev'\n    92:      else\n    93:        'apache2-dev'\n    94:      end\n    95:    default['apache']['apachectl']   = '/usr/sbin/apache2ctl'\n    96:    default['apache']['dir']         = '/etc/apache2'\n    97:    default['apache']['log_dir']     = '/var/log/apache2'\n    98:    default['apache']['error_log']   = 'error.log'\n    99:    default['apache']['access_log']  = 'access.log'\n\n   System Info:\n   ------------\n   chef_version=13.0.118\n   platform=ubuntu\n   platform_version=16.04\n   ruby=ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]\n   program_name=chef-client worker: ppid=3084;start=16:38:30;\n   executable=/opt/chef/bin/chef-client\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1500395765, "post_id": 45172493, "comment_id": 77313078, "body": "It worked but new error came up now <code>Could not find table &#39;puppies&#39;</code> any help on that  :)"}, {"owner": {"reputation": 41, "user_id": 7690449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiDw9.jpg?s=128&g=1", "display_name": "CaioEPS", "link": "https://stackoverflow.com/users/7690449/caioeps"}, "reply_to_user": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 1, "creation_date": 1500396072, "post_id": 45172493, "comment_id": 77313271, "body": "You didn&#39;t setup the project properly.  The standard procedure after downloading a Rails project is to run the following commands: <code>bundle &amp;&amp; rake db:create &amp;&amp; rake db:migrate</code>. Which will install gem dependencies, create your database and then add table definitions into it. This project also has seed data. You can seed your project&#39;s database with: <code>rake db:seed</code>."}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1500396673, "post_id": 45172493, "comment_id": 77313695, "body": "awesome it worked. I did rails s after successfully executing <code>bundle &amp;&amp; rake db:create &amp;&amp; rake db:migrate</code>. What <code>rake db:seed</code> does?"}, {"owner": {"reputation": 41, "user_id": 7690449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiDw9.jpg?s=128&g=1", "display_name": "CaioEPS", "link": "https://stackoverflow.com/users/7690449/caioeps"}, "reply_to_user": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 1, "creation_date": 1500396925, "post_id": 45172493, "comment_id": 77313837, "body": "Basically, it runs db/seeds.rb for you. This file is used for seeding initial data into your application. Usually you&#39;ll create records and create associations between them."}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1500397131, "post_id": 45172493, "comment_id": 77313961, "body": "that also worked now I can see puppies and details but can&#39;t complete an order it says <code>undefined method </code>name&#39; for nil:NilClass`"}, {"owner": {"reputation": 41, "user_id": 7690449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiDw9.jpg?s=128&g=1", "display_name": "CaioEPS", "link": "https://stackoverflow.com/users/7690449/caioeps"}, "reply_to_user": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "edited": false, "score": 0, "creation_date": 1500397759, "post_id": 45172493, "comment_id": 77314353, "body": "I can&#39;t really tell you what it is since this error message is too generic. Probably it isn&#39;t loading your record in the controller. It&#39;s just a guess, though. However, this project is quite old. I really suggest you to find a newer one. You&#39;ll be able to find some here: <a href=\"https://github.com/ekremkaraca/awesome-rails\" rel=\"nofollow noreferrer\">github.com/ekremkaraca/awesome-rails</a>."}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "reply_to_user": {"reputation": 41, "user_id": 7690449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiDw9.jpg?s=128&g=1", "display_name": "CaioEPS", "link": "https://stackoverflow.com/users/7690449/caioeps"}, "edited": false, "score": 0, "creation_date": 1500397836, "post_id": 45172493, "comment_id": 77314399, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149509/discussion-between-paul-and-caioeps\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 41, "user_id": 7690449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiDw9.jpg?s=128&g=1", "display_name": "CaioEPS", "link": "https://stackoverflow.com/users/7690449/caioeps"}, "is_accepted": true, "score": 1, "last_activity_date": 1500395536, "creation_date": 1500395536, "answer_id": 45172493, "question_id": 45172411, "link": "https://stackoverflow.com/questions/45172411/ruby-unsupported-parameters-order/45172493#45172493", "title": "ruby : unsupported parameters: :order", "body": "<p>I think that's because you are passing <code>:order</code> into the <code>paginate</code> method.</p>\n\n<p>The correct query should be:</p>\n\n<p><code>@puppies = Puppy.order(:name).paginate(page: params[:page], per_page: 4)\n</code></p>\n"}], "owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 45172493, "answer_count": 1, "score": 0, "last_activity_date": 1500395536, "creation_date": 1500395242, "question_id": 45172411, "link": "https://stackoverflow.com/questions/45172411/ruby-unsupported-parameters-order", "title": "ruby : unsupported parameters: :order", "body": "<p>I am able to install this app on my windows 7 laptop <a href=\"https://github.com/cheezy/puppies\" rel=\"nofollow noreferrer\">https://github.com/cheezy/puppies</a></p>\n\n<p>But now when I am trying to access it at <code>localhost:3000</code> it is giving me error:\n<code>unsupported parameters: :order</code>\n<a href=\"https://i.stack.imgur.com/iv6nz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iv6nz.png\" alt=\"enter image description here\"></a></p>\n\n<p>I went to the file in this app and found this code:</p>\n\n<p><strong>app/controllers/agency_controller.rb</strong></p>\n\n<pre><code>class AgencyController &lt; ApplicationController\n  skip_before_filter :authorize\n\n  def index\n    @puppies = Puppy.paginate :page =&gt; params[:page], :order =&gt; 'name', :per_page =&gt; 4\n  end\n\nend\n</code></pre>\n\n<p>While looking for a fix on this error I found a fix here <a href=\"https://github.com/mislav/will_paginate/issues/500\" rel=\"nofollow noreferrer\">https://github.com/mislav/will_paginate/issues/500</a></p>\n\n<p>Where a comment by \"mislav\" says that \"Active Record doesn't support <code>:xyz</code> formatting and it need to be written in <code>User.where(conditions).order('title').per_page(per_page).page(page)</code> format. </p>\n\n<p>So, if it is a fix how to write <code>@puppies = Puppy.paginate :page =&gt; params[:page], :order =&gt; 'name', :per_page =&gt; 4</code> in suggested format?</p>\n\n<p>But if its not actual fix how to fix it?</p>\n"}, {"tags": ["ruby", "google-analytics", "google-analytics-api", "google-analytics-firebase"], "comments": [{"owner": {"reputation": 4487, "user_id": 3791516, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CaaX7.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3791516/matt"}, "edited": false, "score": 0, "creation_date": 1500398199, "post_id": 45172279, "comment_id": 77314602, "body": "From your question it is not clear what value you are looking for, it could be as simple as making a regular request with <code>ga:userType</code>, or if you are after user&#39;s who came on a certain date you could set up a segment <code>users::sequence::^ga:sessionCount==1;dateOfSession&lt;&gt;2014-05-&zwnj;&#8203;20_2014-05-30</code> to get at the particular start date, and then just use the regular date range field for the full date range you are interested in."}], "owner": {"reputation": 225, "user_id": 6830113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sfdJJ.png?s=128&g=1", "display_name": "Philipp Hansch", "link": "https://stackoverflow.com/users/6830113/philipp-hansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500394794, "creation_date": 1500394794, "last_edit_date": 1592644375, "question_id": 45172279, "link": "https://stackoverflow.com/questions/45172279/how-to-get-the-number-of-returning-users-over-a-custom-date-range-using-the-v4-r", "title": "How to get the number of returning users over a custom date range using the V4 Reporting API", "body": "<p>I am trying to figure out how to get the number of returning users over a custom date range using the V4 Reporting API.</p>\n<p><a href=\"https://i.stack.imgur.com/8Nwjb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Nwjb.png\" alt=\"enter image description here\" /></a>\nLike the 'All Users' row in this screenshot, but instead of the last 14 days, it should be any date range.</p>\n<p>After reading through the documentation, the only thing I came up with, was to create cohorts for every day I want to query, and then sum up the values for each day to get the totals:</p>\n<pre><code>&quot;reportRequests&quot;: [\n  {\n   &quot;viewId&quot;: &quot;147125344&quot;,\n   &quot;dimensions&quot;: [\n    {\n     &quot;name&quot;: &quot;ga:cohort&quot;\n    },\n    {\n     &quot;name&quot;: &quot;ga:cohortNthDay&quot;\n    }\n   ],\n   &quot;metrics&quot;: [\n    {\n     &quot;expression&quot;: &quot;ga:cohortActiveUsers&quot;\n    }\n   ],\n   &quot;cohortGroup&quot;: {\n    &quot;cohorts&quot;: [\n     {\n      &quot;name&quot;: &quot;date 1&quot;,\n      &quot;type&quot;: &quot;FIRST_VISIT_DATE&quot;,\n      &quot;dateRange&quot;: {\n       &quot;endDate&quot;: &quot;2017-07-08&quot;,\n       &quot;startDate&quot;: &quot;2017-07-08&quot;\n      }\n     },\n     {\n      &quot;name&quot;: &quot;date 2&quot;,\n      &quot;type&quot;: &quot;FIRST_VISIT_DATE&quot;,\n      &quot;dateRange&quot;: {\n       &quot;endDate&quot;: &quot;2017-07-09&quot;,\n       &quot;startDate&quot;: &quot;2017-07-09&quot;\n      },\n      {\n       &quot;name&quot;: &quot;more days&quot;,\n       &quot;type&quot;: &quot;FIRST_VISIT_DATE&quot;,\n       &quot;dateRange&quot;: {\n       &quot;endDate&quot;: &quot;next day&quot;,\n       &quot;startDate&quot;: &quot;next day&quot;\n      }\n     }\n    ]\n   }\n  }\n ]\n}\n</code></pre>\n<p>However, this is limited by the fact that there can only be 12 cohorts in total, so I could not query more than 12 days at once.</p>\n<p>Is there any way to get this data directly through the API?</p>\n"}, {"tags": ["arrays", "ruby", "ruby-1.9"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1500393172, "post_id": 45171416, "comment_id": 77311454, "body": "Note that Ruby 1.9 is no longer supported by the core Ruby team. If it&#39;s at all possible, migrate to something in the 2.x series. 2.4.1 is current."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1500394313, "post_id": 45171416, "comment_id": 77312195, "body": "Simply put, you are asking for a non-destructive version of <code>delete</code>."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1500398656, "post_id": 45171416, "comment_id": 77314890, "body": "@engineersmnky oops, I didn&#39;t read the documentation of <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>Array#delete</code></a> carefully and I ignored its return value. You are right."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1500425466, "post_id": 45171416, "comment_id": 77326965, "body": "<code>grep_v</code> may be useful but uses <code>===</code> instead of <code>==</code> so it&#39;s not the same thing."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500447897, "post_id": 45171416, "comment_id": 77334322, "body": "@tadman: I would love to. It&#39;s not my decision..."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1500447955, "post_id": 45171416, "comment_id": 77334355, "body": "@sagarpandya82 : In my case, === would work equally well, but <code>grep_v</code> is not in Ruby 1.9.3"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1500394745, "post_id": 45171593, "comment_id": 77312474, "body": "@MarkThomas Let me guess: <code>Array#-</code>? :)"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 2, "creation_date": 1500394935, "post_id": 45171593, "comment_id": 77312584, "body": "Hint: I&#39;m considering putting it on a list of things to reject in a code review :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1500395395, "post_id": 45171593, "comment_id": 77312867, "body": "@MarkThomas yeah, the censorship, we know how it happens when the democracy to use shortcuts suffers under the yoke of the senior dictators!"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1500395665, "post_id": 45171593, "comment_id": 77313014, "body": "It all starts when the proletariat starts using &quot;shortcuts&quot; that are neither shorter to type nor to grok!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 3, "creation_date": 1500396459, "post_id": 45171593, "comment_id": 77313553, "body": "@MarkThomas <b>Liberty or Death</b> <code>.reject(&amp;:==.to_proc.curry(2).call(4))</code> :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1500406097, "post_id": 45171593, "comment_id": 77319338, "body": "I predict we will see more of #2 in the days to come. Another recent answer used something like that--perhaps authored by mudsie as well. The sad fact is that <code>&amp;4.method(:==)</code> contains 5 characters more than <code>{|n|n==4}</code>."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1500408530, "post_id": 45171593, "comment_id": 77320781, "body": "...and an extra set of parens for a total of 7 more!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1500410206, "post_id": 45171593, "comment_id": 77321785, "body": "@MarkThomas the first set is optional though so can you really count them?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1500410399, "post_id": 45171593, "comment_id": 77321870, "body": "That is why I have monkeypatched <code>Object</code> to alias <code>method</code> as <code>m</code> in all my projects. Once for all saving 5 chars!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1500410624, "post_id": 45171593, "comment_id": 77321981, "body": "@engineersmnky they lied about characters count increase last year, I knew that."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 9, "last_activity_date": 1500392817, "creation_date": 1500392817, "answer_id": 45171593, "question_id": 45171416, "link": "https://stackoverflow.com/questions/45171416/removing-elements-from-an-array-non-destructively/45171593#45171593", "title": "Removing elements from an array non-destructively", "body": "<pre><code>[1, 2, 3, 4, 4, 5, 5] - [4]\n#\u21d2\u00a0[1, 2, 3, 5, 5]\n</code></pre>\n\n<p>If this is too cumbersome for you too, use:</p>\n\n<pre><code>[1, 2, 3, 4, 4, 5, 5].reject(&amp;4.method(:==))\n#\u21d2\u00a0[1, 2, 3, 5, 5]\n</code></pre>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 45171593, "answer_count": 1, "score": 0, "last_activity_date": 1500394562, "creation_date": 1500392342, "last_edit_date": 1500394562, "question_id": 45171416, "link": "https://stackoverflow.com/questions/45171416/removing-elements-from-an-array-non-destructively", "title": "Removing elements from an array non-destructively", "body": "<p>Given an array <code>arr</code> and an object <code>v</code>, I want a copy of <code>arr</code> without the elements equal to <code>v</code>.</p>\n\n<p>I found these two solutions:</p>\n\n<pre><code>newarr = arr.dup\nnewarr.delete(v)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>newarr = arr.reject {|a| a == v}\n</code></pre>\n\n<p>Is there an easier way to do it?</p>\n\n<p>I wonder whether Ruby already has something like:</p>\n\n<pre><code>newarr = arr.without(v)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xcode", "rvm"], "comments": [{"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1500392222, "post_id": 45170930, "comment_id": 77310793, "body": "Maybe try some of the suggestions in <a href=\"https://stackoverflow.com/questions/19594719/install-any-version-of-ruby-with-rvm-on-mavericks\" title=\"install any version of ruby with rvm on mavericks\">stackoverflow.com/questions/19594719/&hellip;</a>. It sounds like specifying <code>--with-gcc=clang</code> might help."}, {"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1500397121, "post_id": 45170930, "comment_id": 77313954, "body": "Please try this. <a href=\"https://stackoverflow.com/questions/19594719/install-any-version-of-ruby-with-rvm-on-mavericks\" title=\"install any version of ruby with rvm on mavericks\">stackoverflow.com/questions/19594719/&hellip;</a>"}, {"owner": {"reputation": 2136, "user_id": 939636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/58fbcebf5b8e4fc95260f18e2a8dc490?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/939636/thomas"}, "reply_to_user": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1500405500, "post_id": 45170930, "comment_id": 77318965, "body": "@Puhlze I tired installing using the --with-gcc=clang but no luck. Please look at my edited answer"}, {"owner": {"reputation": 2136, "user_id": 939636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/58fbcebf5b8e4fc95260f18e2a8dc490?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/939636/thomas"}, "reply_to_user": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1500405529, "post_id": 45170930, "comment_id": 77318979, "body": "@AjayBarot, are you referring to the --with-gcc=clang command? I tried but no luck. Please refer to my edited answer"}, {"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1500405976, "post_id": 45170930, "comment_id": 77319268, "body": "@Thomas: Please join me in this chat room. <a href=\"https://chat.stackoverflow.com/rooms/149523/room-for-abprime-and-thomas\">chat.stackoverflow.com/rooms/149523/room-for-abprime-and-tho&zwnj;&#8203;mas</a>"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 1, "creation_date": 1500409604, "post_id": 45170930, "comment_id": 77321430, "body": "Did you install xcode commandline tools( <code>$ xcode-select --install </code>) before installing ruby ?"}], "owner": {"reputation": 2136, "user_id": 939636, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/58fbcebf5b8e4fc95260f18e2a8dc490?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/939636/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500405472, "creation_date": 1500391130, "last_edit_date": 1500405472, "question_id": 45170930, "link": "https://stackoverflow.com/questions/45170930/unable-to-install-ruby-2-2-0-or-any-version-with-rvm", "title": "Unable to install ruby 2.2.0 (or any version) with rvm", "body": "<p>I'm trying to install ruby 2.2.0 but I'm getting this error. I've tried install ruby 2.3.3 doing <code>rvm install 2.3.3</code> and get a similar error. I'm currently running xCode 8.3.3 and have done <code>xcode-select install</code> and everything is up to date.</p>\n\n<p>Here are my logs from the terminal:</p>\n\n<pre><code>rvm reinstall 2.2.0 --disable-binary\nChecking requirements for osx.\nCertificates in '/usr/local/etc/openssl/cert.pem' are already up to date.\nRequirements installation successful.\nInstalling Ruby from source to: /Users/thomasbaldwin/.rvm/rubies/ruby-2.2.0, this may take a while depending on your cpu(s)...\nruby-2.2.0 - #downloading ruby-2.2.0, this may take a while depending on your connection...\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 12.6M  100 12.6M    0     0  7616k      0  0:00:01  0:00:01 --:--:-- 7615k\nruby-2.2.0 - #extracting ruby-2.2.0 to /Users/thomasbaldwin/.rvm/src/ruby-2.2.0....\nruby-2.2.0 - #applying patch /Users/thomasbaldwin/.rvm/patches/ruby/2.2.0/fix_installing_bundled_gems.patch.\nruby-2.2.0 - #applying patch /Users/thomasbaldwin/.rvm/patches/ruby/2.2.0/openssl3.patch.\nruby-2.2.0 - #configuring..\nError running './configure --prefix=/Users/thomasbaldwin/.rvm/rubies/ruby-2.2.0 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl --disable-install-doc --enable-shared',\nshowing last 15 lines of /Users/thomasbaldwin/.rvm/log/1500390685_ruby-2.2.0/configure.log\n</code></pre>\n\n<p>And here are my logs from the config file:</p>\n\n<pre><code>[2017-07-18 11:11:33] ./configure\ncurrent path: /Users/thomasbaldwin/.rvm/src/ruby-2.2.0\nGEM_HOME=/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5\nPATH=/usr/local/opt/coreutils/bin:/usr/local/opt/pkg-config/bin:/usr/local/opt/libtool/bin:/usr/local/opt/automake/bin:/usr/local/opt/autoconf/bin:/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5/bin:/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5@global/bin:/Users/thomasbaldwin/.rvm/rubies/ruby-2.1.5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/local/share/npm/bin:/Users/thomasbaldwin/dev/adt-bundle-mac/sdk/tools:/Users/thomasbaldwin/dev/adt-bundle-mac/sdk/platform-tools:/Library/Java/JavaVirtualMachines/jdk1.8.0_111.jdk/Contents/Home/bin:/Users/thomasbaldwin/.rvm/bin\nGEM_PATH=/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5:/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5@global\ncommand(5): ./configure --prefix=/Users/thomasbaldwin/.rvm/rubies/ruby-2.2.0 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl --disable-install-doc --enable-shared\nconfig.guess already exists\nconfig.sub already exists\nchecking build system type... x86_64-apple-darwin16.6.0\nchecking host system type... x86_64-apple-darwin16.6.0\nchecking target system type... x86_64-apple-darwin16.6.0\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... configure: error: in `/Users/thomasbaldwin/.rvm/src/ruby-2.2.0':\nconfigure: error: cannot run C compiled programs.\nIf you meant to cross compile, use `--host'.\nSee `config.log' for more details\n</code></pre>\n\n<p>Any ideas as to what I'm doing wrong..? Thanks!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I tried installing using the --with-gcc=clang but no luck</p>\n\n<pre><code>Thomass-MacBook-Pro:maharam thomasbaldwin$ rvm reinstall 2.2.0 --disable-binary --with-gcc=clang\nruby-2.2.0 - #removing src/ruby-2.2.0..\nChecking requirements for osx.\nCertificates in '/usr/local/etc/openssl/cert.pem' are already up to date.\nRequirements installation successful.\nWarning: found user selected compiler 'clang', this will suppress RVM auto detection mechanisms.\nInstalling Ruby from source to: /Users/thomasbaldwin/.rvm/rubies/ruby-2.2.0, this may take a while depending on your cpu(s)...\nruby-2.2.0 - #downloading ruby-2.2.0, this may take a while depending on your connection...\nruby-2.2.0 - #extracting ruby-2.2.0 to /Users/thomasbaldwin/.rvm/src/ruby-2.2.0....\nruby-2.2.0 - #applying patch /Users/thomasbaldwin/.rvm/patches/ruby/2.2.0/fix_installing_bundled_gems.patch.\nruby-2.2.0 - #applying patch /Users/thomasbaldwin/.rvm/patches/ruby/2.2.0/openssl3.patch.\nruby-2.2.0 - #configuring..\nError running './configure --prefix=/Users/thomasbaldwin/.rvm/rubies/ruby-2.2.0 --with-gcc=clang --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl --disable-install-doc --enable-shared',\nshowing last 15 lines of /Users/thomasbaldwin/.rvm/log/1500405359_ruby-2.2.0/configure.log\nPATH=/usr/local/opt/coreutils/bin:/usr/local/opt/pkg-config/bin:/usr/local/opt/libtool/bin:/usr/local/opt/automake/bin:/usr/local/opt/autoconf/bin:/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5/bin:/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5@global/bin:/Users/thomasbaldwin/.rvm/rubies/ruby-2.1.5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/local/share/npm/bin:/Users/thomasbaldwin/dev/adt-bundle-mac/sdk/tools:/Users/thomasbaldwin/dev/adt-bundle-mac/sdk/platform-tools:/Library/Java/JavaVirtualMachines/jdk1.8.0_111.jdk/Contents/Home/bin:/Users/thomasbaldwin/.rvm/bin\nGEM_PATH=/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5:/Users/thomasbaldwin/.rvm/gems/ruby-2.1.5@global\ncommand(6): ./configure --prefix=/Users/thomasbaldwin/.rvm/rubies/ruby-2.2.0 --with-gcc=clang --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl --disable-install-doc --enable-shared\nconfig.guess already exists\nconfig.sub already exists\nchecking build system type... x86_64-apple-darwin16.6.0\nchecking host system type... x86_64-apple-darwin16.6.0\nchecking target system type... x86_64-apple-darwin16.6.0\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... configure: error: in `/Users/thomasbaldwin/.rvm/src/ruby-2.2.0':\nconfigure: error: cannot run C compiled programs.\nIf you meant to cross compile, use `--host'.\nSee `config.log' for more details\nThere has been an error while running configure. Halting the installation.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": true, "score": 2, "last_activity_date": 1500399905, "last_edit_date": 1500399905, "creation_date": 1500390110, "answer_id": 45170485, "question_id": 45170266, "link": "https://stackoverflow.com/questions/45170266/get-and-pass-value-of-input-by-url/45170485#45170485", "title": "Get and pass value of input by url", "body": "<p>I don't think it's possible the way you're trying to do that. I would suggest to 2 another approachs:</p>\n\n<ul>\n<li>Send that form to an particular action, and there, you get the value of phone number input, and delete it</li>\n<li>You could use jquery to get the input value and send a http request to that <code>\"/admin/clinics/\"+PHONE_NUMBER+\"/delete-phone\"</code> URL, so you could replace the PHONE_NUMBER with the value you just got. </li>\n</ul>\n\n<p>Anyway, since that value is being inputed by the user, you should do some checks and validations. It's not quite simple.\nHope this helps you. Good luck!</p>\n"}], "owner": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 45170485, "answer_count": 1, "score": -2, "last_activity_date": 1500399905, "creation_date": 1500389588, "question_id": 45170266, "link": "https://stackoverflow.com/questions/45170266/get-and-pass-value-of-input-by-url", "title": "Get and pass value of input by url", "body": "<p>I'm trying get a value of phone from <code>input</code> and pass it by url for so call a method to delete it. I have:</p>\n\n<pre><code>&lt;div class=\"telefones\"&gt;\n&lt;%= f.fields_for :phones do |p| %&gt;\n  &lt;div class=\"control-group\"&gt;\n    &lt;div class=\"controls\"&gt;\n\n      &lt;%= p.text_field :number, :name =&gt; 'phone', :class =&gt; 'text_field', :type =&gt; \"text\", :data =&gt; { :mask =&gt; \"99 9999.9999\"} %&gt;\n\n      &lt;%= link_to 'Delete Phone', \"/admin/clinics/\"+PHONE_NUMBER+\"/delete-phone\" %&gt;\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p></p>\n\n<p>In <code>PHONE_NUMBER</code>, will be where I will spend the number of this input. Any idei how to fix it?</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1500456811, "post_id": 45169906, "comment_id": 77340433, "body": "Please use legacy firefox driver, geckodriver has many problem."}], "owner": {"reputation": 132, "user_id": 2979453, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001965143770/picture?type=large", "display_name": "Oleksandr Husiev", "link": "https://stackoverflow.com/users/2979453/oleksandr-husiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500388645, "creation_date": 1500388645, "question_id": 45169906, "link": "https://stackoverflow.com/questions/45169906/issue-with-w3ccapabilities-in-geckodriver", "title": "Issue with W3CCapabilities in geckodriver", "body": "<p>I have an issue while adding custom capabilities to my browser. Right now I use next code:</p>\n\n<pre><code>capabilities = Selenium::WebDriver::Remote::W3CCapabilities.firefox(accept_insecure_certs: true)\nb = Watir::Browser.new( :firefox, :desired_capabilities =&gt; capabilities)\n</code></pre>\n\n<p>This code outputs a deprecation warning:</p>\n\n<pre><code>2017-07-18 16:13:05 WARN Selenium [DEPRECATION] Selenium::WebDriver::Remote::W3CCapabilities is deprecated. Use Selenium::WebDriver::Remote::Capabilities instead.\n</code></pre>\n\n<p>But when I try to use Selenium::WebDriver::Remote::Capabilities as suggested, project fails with:</p>\n\n<pre><code>Selenium::WebDriver::Error::SessionNotCreatedError: Unable to find a matching set of capabilities\n</code></pre>\n\n<p>I need the capabilities to ignore unsigned certificates warning, how do I get rid of this deprecation warning?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 9968, "user_id": 114900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZGjf9.jpg?s=128&g=1", "display_name": "msanford", "link": "https://stackoverflow.com/users/114900/msanford"}, "edited": false, "score": 1, "creation_date": 1500388800, "post_id": 45169897, "comment_id": 77307936, "body": "Do you have the <a href=\"https://devcenter.heroku.com/articles/heroku-cli\" rel=\"nofollow noreferrer\">heroku toolbelt</a> installed?"}, {"owner": {"reputation": 9968, "user_id": 114900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZGjf9.jpg?s=128&g=1", "display_name": "msanford", "link": "https://stackoverflow.com/users/114900/msanford"}, "edited": false, "score": 0, "creation_date": 1500388885, "post_id": 45169897, "comment_id": 77308022, "body": "That aside, why are you using <code>heroku create</code> to <i>publish</i> your app to Heroku? That&#39;s used to initialize a new application."}, {"owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "reply_to_user": {"reputation": 9968, "user_id": 114900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZGjf9.jpg?s=128&g=1", "display_name": "msanford", "link": "https://stackoverflow.com/users/114900/msanford"}, "edited": false, "score": 0, "creation_date": 1500389951, "post_id": 45169897, "comment_id": 77308947, "body": "yes i want to initialize a new application so that I can push on  that but anytime   I type heroku create the above error appears"}, {"owner": {"reputation": 9968, "user_id": 114900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZGjf9.jpg?s=128&g=1", "display_name": "msanford", "link": "https://stackoverflow.com/users/114900/msanford"}, "edited": false, "score": 0, "creation_date": 1500390008, "post_id": 45169897, "comment_id": 77308997, "body": "Ok, see my first comment."}], "owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500389988, "creation_date": 1500388620, "last_edit_date": 1500389988, "question_id": 45169897, "link": "https://stackoverflow.com/questions/45169897/hosting-on-heroku-from-cloud9", "title": "Hosting on heroku from cloud9", "body": "<p>I am trying to create a new app and then push my application to heroku but any time I type <code>heroku create</code> the following error appears. Any help would be appreciated.</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/dependency.rb:308:in `to_specs': Could not find 'heroku' (&gt;= 0.a) among 392 total gem(s) (Gem::MissingSpecError)\nChecked in 'GEM_PATH=/usr/local/rvm/gems/ruby-2.3.0:/usr/local/rvm/gems/ruby-2.3.0@global', execute `gem env` for more information\n        from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/dependency.rb:320:in `to_spec'\n        from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/heroku:22:in `&lt;main&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500388272, "post_id": 45169398, "comment_id": 77307483, "body": "Is <code>godzilla_handler</code> here a local variable or a method call to a mutator <code>godzilla_handler=</code>?"}, {"owner": {"reputation": 1809, "user_id": 2908793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c8af77fbf1b7c58c923d1c80fce2097a?s=128&d=identicon&r=PG", "display_name": "Etki", "link": "https://stackoverflow.com/users/2908793/etki"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500389014, "post_id": 45169398, "comment_id": 77308124, "body": "@tadman a mutator, will clarify in a second"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500389544, "post_id": 45169398, "comment_id": 77308582, "body": "If this is an API you control it might be worth re-thinking how you define these handlers. If it&#39;s beyond your control then it depends on your documentation system. Rdoc, RI and Yard all have different ideas."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1500396115, "post_id": 45169398, "comment_id": 77313308, "body": "There doesn&#39;t seem to be any reason your method should need to take a lamba/proc, and not a block as well. In yard there is a <a href=\"http://www.rubydoc.info/gems/yard/file/docs/Tags.md#yield\" rel=\"nofollow noreferrer\">yield</a> label you can use, and the functionality here seems to be the same as <code>yield</code>."}, {"owner": {"reputation": 1809, "user_id": 2908793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c8af77fbf1b7c58c923d1c80fce2097a?s=128&d=identicon&r=PG", "display_name": "Etki", "link": "https://stackoverflow.com/users/2908793/etki"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1500952467, "post_id": 45169398, "comment_id": 77548377, "body": "@maxpleaner missed that one, thank you"}], "owner": {"reputation": 1809, "user_id": 2908793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c8af77fbf1b7c58c923d1c80fce2097a?s=128&d=identicon&r=PG", "display_name": "Etki", "link": "https://stackoverflow.com/users/2908793/etki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500389080, "creation_date": 1500387435, "last_edit_date": 1500389080, "question_id": 45169398, "link": "https://stackoverflow.com/questions/45169398/how-to-describe-proc-in-rubydoc", "title": "How to describe Proc in RubyDoc?", "body": "<p>I'm writing a gem that adds some special capabilities to user classes with ability to override it by supplying lambdas/procs:</p>\n\n<pre><code>class EndUserClass\n  include SpecificDSL\n\n  set_godzilla_handler(\n    lambda do |godzilla, megatron, &amp;scream_generator|\n      godzilla.attac\n      megatron.protec\n      scream_generator.call('AAAAAAAAAA')\n    end\n  )\nend\n</code></pre>\n\n<p>I need to clearly document what parameters are fed in to user-supplied Proc and what value library expects Proc to return. How can i do that via RubyDoc?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1500387557, "post_id": 45169391, "comment_id": 77306855, "body": "Put a print in the loop and see what the values are vs what you expect them to be. Have you done any debugging?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1500387885, "post_id": 45169391, "comment_id": 77307153, "body": "Instead of using a loop, why not do the math and divide to determine how many intervals you can fit in?"}, {"owner": {"reputation": 9, "user_id": 8320699, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213784972646669/picture?type=large", "display_name": "Karen Roberts", "link": "https://stackoverflow.com/users/8320699/karen-roberts"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500388762, "post_id": 45169391, "comment_id": 77307904, "body": "@tadman - the lesson is on loops, so I need to use one"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500388806, "post_id": 45169391, "comment_id": 77307945, "body": "Beware of lessons that enforce using <code>while</code> and/or <code>until</code> loops in Ruby. They are plain evil."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1500388906, "post_id": 45169391, "comment_id": 77308040, "body": "I&#39;m with mudasowba here. Ruby has a variety of tools for avoiding this, just like how <code>for</code> is hardly ever used yet it&#39;s the backbone of code in other languages. If you want to learn Ruby there&#39;s probably better ways to do it, but if you need to do this to pass a course that&#39;s understandable, it&#39;s just a different objective."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500388926, "post_id": 45169391, "comment_id": 77308060, "body": "What you are actually trying to achieve with <code>workout = (run+walk)*i+=1 + warm_cool</code>?!"}, {"owner": {"reputation": 9, "user_id": 8320699, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213784972646669/picture?type=large", "display_name": "Karen Roberts", "link": "https://stackoverflow.com/users/8320699/karen-roberts"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500389335, "post_id": 45169391, "comment_id": 77308401, "body": "@mudasobwa - Let&#39;s say I have a min workout of 30 minutes, and a max workout of 40 minutes, and I want to do a run/walk combo of 3 min/2 min. So I want to start with 1 repeat (13 minutes total - 8 min warmup/cool down, 3 min run, 2 min walk) which would fail the &gt;=30 &lt;=40 test, so it would try 2 repeats (18 minutes total) which would fail again, and so on until it reaches the number of repeats that will put the total between 30 and 40 minutes"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500541930, "post_id": 45169391, "comment_id": 77386721, "body": "@mudasobwa It depends on the goal of the course. If it&#39;s about learning <i>programming</i> in general and not Ruby per se then <code>for</code>, <code>while</code> et al are important concepts and will be useful later on in other languages."}], "answers": [{"tags": [], "owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "is_accepted": false, "score": 0, "last_activity_date": 1500389426, "creation_date": 1500389426, "answer_id": 45170197, "question_id": 45169391, "link": "https://stackoverflow.com/questions/45169391/infinite-loop-in-ruby/45170197#45170197", "title": "Infinite loop in Ruby", "body": "<p>I believe you problem is that you have reached an invalid state with your <code>until</code> loop and it just keeps going out of bounds.  Your logic makes sense for a <code>while</code> type scenario because you want it to stop whenever both of those are <code>true</code>.  However with an <code>until</code> it will break from the loop when your condition equals true.  </p>\n\n<p>So if <code>workout</code> is more than the <code>max_workout</code> it will keep incrementing since it will never satisfy the conditional and the <code>until</code> will keep going.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1500389446, "creation_date": 1500389446, "answer_id": 45170210, "question_id": 45169391, "link": "https://stackoverflow.com/questions/45169391/infinite-loop-in-ruby/45170210#45170210", "title": "Infinite loop in Ruby", "body": "<p>There's a few little slips here that have had some pretty dramatic consequences. First of all is using <code>+=</code> in the middle of a statement. That's generally bad form and it's caused absolute chaos here.</p>\n\n<p>The reason for this is your code is evaluated as this:</p>\n\n<pre><code>workout = (run + walk) * i += (1 + warm_cool)\n</code></pre>\n\n<p>Since <code>warm_cool</code> is 8 then it increments by 9 each time and you can easily skip past the end of your range. This is why it's generally best to limit how many times you try things to a reasonable count. Wrapping it in a simple method also helps contain things and makes managing flow easier:</p>\n\n<pre><code>def intervals_required(run, walk, warm_cool, range)\n  10.times do |i|\n    workout = (run + walk) * i + warm_cool\n\n    return i if range.include?(workout)\n  end\n\n  # Couldn't find a matching interval\n  nil\nend\n</code></pre>\n\n<p>Where you call it like this:</p>\n\n<pre><code>if (intervals = intervals_required(run, walk, (min_workout..max_workout))\n  puts \"...\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2216, "user_id": 7165275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8ad41f944f38348a30791dc7f7d02c?s=128&d=identicon&r=PG&f=1", "display_name": "m. simon borg", "link": "https://stackoverflow.com/users/7165275/m-simon-borg"}, "is_accepted": false, "score": 1, "last_activity_date": 1500392585, "last_edit_date": 1500392585, "creation_date": 1500392100, "answer_id": 45171312, "question_id": 45169391, "link": "https://stackoverflow.com/questions/45169391/infinite-loop-in-ruby/45171312#45171312", "title": "Infinite loop in Ruby", "body": "<p>You're probably thinking that your first iteration is yielding the expression</p>\n\n<pre><code>(3 + 2) * 0 + 1 + 8\n</code></pre>\n\n<p>which would evaluate correctly, but you need to understand the way <code>+=</code> works under the hood.</p>\n\n<p>Underneath the syntax conveniences of <code>+=</code> given to you by Ruby, you're actually doing a few things at once. <code>+=</code> is an assignment method, and everything to the right of it is an argument to the method and wrapped in implicit parentheses, as in <code>i += (1 + 8)</code>. It's actually two method calls in one, adding the receiver to the argument before assignment, like so</p>\n\n<pre><code>i = i + (1 + 8)\n</code></pre>\n\n<p>Underneath all the syntactic sugar it really looks like this with dot notation and parentheses</p>\n\n<pre><code>i.=(i.+(1 + 8))\n</code></pre>\n\n<p>So instead of</p>\n\n<pre><code>(3 + 2) * 1 + 8\n5 * 1 + 8 \n5 + 8\n13\n</code></pre>\n\n<p>on the first pass you're actually getting</p>\n\n<pre><code>(3 + 2) * (i = 0 + (1 + 8))\n(3 + 2) * 9\n5 * 9\n45\n</code></pre>\n\n<p>and skipping your upper condition of <code>40</code>, so it just keeps going. <code>i</code> is now set to <code>9</code>, and <code>i</code> increases by 9 on each pass, so your next result is <code>90</code>, then <code>135</code>, and so on.</p>\n\n<p>Try wrapping the assignment in parentheses, like this</p>\n\n<pre><code>(run + walk) * (i += 1) + 8\n</code></pre>\n\n<p>Also consider adding a guard clause inside your loop to prevent infinite repetition, something like <code>break if workout &gt; max_workout</code></p>\n"}], "owner": {"reputation": 9, "user_id": 8320699, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213784972646669/picture?type=large", "display_name": "Karen Roberts", "link": "https://stackoverflow.com/users/8320699/karen-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1500394820, "creation_date": 1500387391, "last_edit_date": 1500394820, "question_id": 45169391, "link": "https://stackoverflow.com/questions/45169391/infinite-loop-in-ruby", "title": "Infinite loop in Ruby", "body": "<p>I am trying to increase the number of sets until <code>workout</code> is at least as long as <code>min_workout but not longer than</code>max_workout<code>. I am testing with values</code>min<code></code>30<code>,</code>max<code></code>40<code>,</code>run<code></code>3<code>, and</code>walk<code></code>2`. It should stop at 5 repeats and total of 33 minutes.</p>\n\n<pre><code>warm_cool = 8\n\nputs \"What is the least amount of time you want to work out?\"\nmin_workout = gets.chomp.to_i\n\nputs \"What is the longest time you want to work out?\"\nmax_workout = gets.chomp.to_i\n\nputs \"How many minutes per set do you want to run?\" \nrun = gets.chomp.to_i\n\nputs \"How many minutes do you want to walk each set?\"\nwalk = gets.chomp.to_i \n\ni = 0  \nworkout = (run+walk)*i + warm_cool\n\nuntil workout &gt;=min_workout &amp;&amp; workout &lt;=max_workout do\nworkout = (run+walk)*i+=1 + warm_cool\n\nputs \"You need to perform  #{i} repeats and your workout time will be #\n{workout} minutes, including a 4 minute warmup and cooldown \"\n\nend    \n</code></pre>\n\n<p>I can't figure out why I am getting an infinite loop here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "microservices"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1500385767, "post_id": 45168622, "comment_id": 77305383, "body": "I personally find the json api solution being insanely overdesigned. Everybody implements the shared functionality with gems."}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1500385813, "post_id": 45168622, "comment_id": 77305429, "body": "Seems like you want something similar to this: <a href=\"https://github.com/spring-cloud/spring-cloud-config\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-config</a> a config server. But I never saw such thing in Ruby"}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1500385823, "post_id": 45168622, "comment_id": 77305438, "body": "I&#39;m curious why you don&#39;t just have a User object with a <code>name</code> property living in a shared database schema.  This sounds massively overengineered."}, {"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "reply_to_user": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1500387069, "post_id": 45168622, "comment_id": 77306495, "body": "@mcfinnigan We have many apps connected to this main app. Some of them are in Ruby, some in PHP and Java. We now use few databases per app and I think it was just too hard to connect all of them, but I haven&#39;t been building this infrastructure."}], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1500387342, "post_id": 45168754, "comment_id": 77306705, "body": "Thanks for your answer! I also do not like the gem idea too much, but I can&#39;t find solution how to provide those constants to test suite when using api. Hardcoding them in tests is the same as hardcoding them anywhere else in app."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "reply_to_user": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "edited": false, "score": 0, "creation_date": 1500457421, "post_id": 45168754, "comment_id": 77340899, "body": "In your tests you could use something like Webmock or MockServer or VCR to mock the web service (VCR will call and cache the response from a real web service). So real data is used, but it is fast for test since it is cached."}], "tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 1, "last_activity_date": 1500385809, "creation_date": 1500385809, "answer_id": 45168754, "question_id": 45168622, "link": "https://stackoverflow.com/questions/45168622/how-to-share-constans-between-rails-microservices/45168754#45168754", "title": "How to share constans between Rails microservices?", "body": "<p>I'm not sure if there might be a better solution in terms of structure of the services themselves, for example one of the two services could have an API which returns the constants for the other to use.</p>\n\n<p>But to answer the question you could use an engine, or more likely for simple sharing of constants, a gem. You can create a new gem with <code>bundle gem &lt;GEM NAME&gt;</code> and then add it to the Gemfile of both apps.</p>\n\n<p>You will need to either have a gem server (e.g. <a href=\"https://github.com/geminabox/geminabox\" rel=\"nofollow noreferrer\">geminabox</a>) or just point directly to your code repo, e.g.</p>\n\n<pre><code>gem 'my-gem', git: 'git@my-server.com:git/my-gem`\n</code></pre>\n\n<p>Personally speaking I'd go with the API returning the constants because you might want to rewrite one service in another language in which case sharing a gem falls down.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2851412, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/hx1Ox.jpg?s=128&g=1", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/2851412/amit-liber"}, "is_accepted": false, "score": 0, "last_activity_date": 1500386491, "creation_date": 1500386491, "answer_id": 45169030, "question_id": 45168622, "link": "https://stackoverflow.com/questions/45168622/how-to-share-constans-between-rails-microservices/45169030#45169030", "title": "How to share constans between Rails microservices?", "body": "<ol>\n<li>write a gem and include it in the different services.</li>\n<li>if they run on the same machines, another possibility is env vars.</li>\n<li>Keep it in a DB/storage, i.e. memchache/redi. Load the relevant constants on each service init.</li>\n</ol>\n"}], "owner": {"reputation": 646, "user_id": 6695861, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/845e32a9576a6670db748fb456c089e8?s=128&d=identicon&r=PG&f=1", "display_name": "P. Boro", "link": "https://stackoverflow.com/users/6695861/p-boro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1500386491, "creation_date": 1500385506, "question_id": 45168622, "link": "https://stackoverflow.com/questions/45168622/how-to-share-constans-between-rails-microservices", "title": "How to share constans between Rails microservices?", "body": "<p>I have my main app and admin app built as a microservice, they are communicating via api. I want to share some constants between those two apps.</p>\n\n<p>For example I have User model that can have role Owner or Regular. In admin app I can search Users and in this search I have dropdown with hardcoded user type (Owner, Regular). This is okay, but when I change naming (e.g. Regular -> Standard) I have to update my Admin app also.</p>\n\n<p>To avoid changing admin app every time I change some core naming in my main app I want to somehow share those constants, so every change in main app will change Admin at the same time.</p>\n\n<p>For now I found 2 solutions, both with pros and cons:</p>\n\n<p>First is sending constants from main app to admin via json api. I have build a class that will fetch and store all constants in class variable, so it's available from every part of the the app. The good thing about this solution is performance (thanks to memoization it's only one api request) and it's easy to use later. The bad thing is I have no idea how to handle tests in this case. Of course I cannot let my tests make request to main app and stubbing this request makes the whole idea pointless, because after every change of constants in main app I will need to change tests in admin app. </p>\n\n<p>Second approach I thought of is building a gem that will store all constants. It's very easy to implement, but this means I will need to make changes to this repo every time I want to change constants in main app. Also I work with big team and they won't be happy that they have to work on 2 repos at the same time.</p>\n\n<p>What do you think about those solutions? First one seems to be perfect for me except tests, so maybe you have some ideas how to stub those constants without real values? I haven't tried gem solution yet so if you see some obstacles please let me know.\nMaybe there is another better solution to this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "printers", "thermal-printer"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1500386328, "post_id": 45167849, "comment_id": 77305891, "body": "If you mean print on the users printer without a dialog this will not be possible for security reasons. If you want to print on a printer you own then you would need some web service which the browser can talk to, the web service could communicate with the locally attached printer. So basically you are going to want to run your Rails app on the same computer as the printer."}, {"owner": {"reputation": 133, "user_id": 8289201, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-LDB3LHrv_yg/AAAAAAAAAAI/AAAAAAAABYQ/_krE7YRbrys/photo.jpg?sz=128", "display_name": "Bistaff", "link": "https://stackoverflow.com/users/8289201/bistaff"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1500449444, "post_id": 45167849, "comment_id": 77335372, "body": "@Kris Thank you very much for the explanation."}], "owner": {"reputation": 133, "user_id": 8289201, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-LDB3LHrv_yg/AAAAAAAAAAI/AAAAAAAABYQ/_krE7YRbrys/photo.jpg?sz=128", "display_name": "Bistaff", "link": "https://stackoverflow.com/users/8289201/bistaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500383576, "creation_date": 1500383576, "question_id": 45167849, "link": "https://stackoverflow.com/questions/45167849/ruby-on-rails-print-plain-text-from-web-app-to-my-locale-printer-directly", "title": "ruby on rails: print plain text from web app to my locale printer directly", "body": "<p>I claim that I searched for weeks without found an answer.</p>\n\n<p>I'm developing a web app in rails located in a web server and I need to print some text to my home thermal printer. I want to do this directly without open browser dialog and the app should do this on all the browser. </p>\n\n<p>I know that I can do it with <strong>Google Cloud Print</strong> but it will only works with Chrome. ( I can add this printer only in <strong>classic printer</strong> mode, because Cloud Print does not support it as cloud printer ).</p>\n\n<p>There is a way to do this?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500383473, "post_id": 45167734, "comment_id": 77303435, "body": "Can you post the full error stacktrace?"}, {"owner": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500384068, "post_id": 45167734, "comment_id": 77303913, "body": "Here man: <a href=\"https://uploaddeimagens.com.br/imagens/image-png--479\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "edited": false, "score": 0, "creation_date": 1500384837, "post_id": 45168131, "comment_id": 77304553, "body": "I get <code>Missing template admin</code> error. <a href=\"https://uploaddeimagens.com.br/imagens/image2-png--14\" rel=\"nofollow noreferrer\">Check out</a>."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "edited": false, "score": 1, "creation_date": 1500384877, "post_id": 45168131, "comment_id": 77304595, "body": "I&#39;ll leave this one to Gerry."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1500385377, "post_id": 45168131, "comment_id": 77305027, "body": "Ohh :/ just noticed we answered at the same time (actually i did 1 min later)."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1500385438, "post_id": 45168131, "comment_id": 77305070, "body": "You beat me to answering the second question so fair is fair :D"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 2, "last_activity_date": 1500384326, "creation_date": 1500384326, "answer_id": 45168131, "question_id": 45167734, "link": "https://stackoverflow.com/questions/45167734/uninitialized-constant-adminadmin/45168131#45168131", "title": "Uninitialized constant Admin::Admin", "body": "<p>According to the error log you're looking for a controller namespaced under admin/admin/clinics (it says that in the controller part of the params). </p>\n\n<p>Change the bottom route to not include admin (it's already namespaced and you're effectively namespacing it twice):</p>\n\n<pre><code>get 'clinics/:id/demo', to: 'clinics#demo', as: 'demo'\n</code></pre>\n\n<p>This will route to the correct controller, admin/clinics, instead of admin/admin/clinics</p>\n"}, {"comments": [{"owner": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "edited": false, "score": 0, "creation_date": 1500384702, "post_id": 45168172, "comment_id": 77304447, "body": "I get <code>Missing template admin</code> error. <a href=\"https://uploaddeimagens.com.br/imagens/image2-png--14\" rel=\"nofollow noreferrer\">Check out</a>."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "edited": false, "score": 2, "creation_date": 1500384829, "post_id": 45168172, "comment_id": 77304547, "body": "@ThiagoAnderson That is because you don&#39;t have a view called <code>demo.html.erb</code> in <code>app&#47;views&#47;admin&#47;clinics</code>; you must add that template. Or, if you just want to print <code>hello</code> in your browser, then change <code>print &quot;hello&quot;</code> to <code>render inline: &quot;hello&quot;</code>."}, {"owner": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "edited": false, "score": 1, "creation_date": 1500385010, "post_id": 45168172, "comment_id": 77304715, "body": "Nice @Gerry! Thats it. Thanks!"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1500384427, "creation_date": 1500384427, "answer_id": 45168172, "question_id": 45167734, "link": "https://stackoverflow.com/questions/45167734/uninitialized-constant-adminadmin/45168172#45168172", "title": "Uninitialized constant Admin::Admin", "body": "<p>Since you are already defining your <code>demo</code> route inside a namespace there is no need to specify <code>admin/clinics#demo</code>, just <code>clinics#demo</code> will be necessary:</p>\n\n<pre><code>namespace :admin do\n    resources :admin_users\n    resources :health_plan_tables\n    resources :health_aid_tables\n    resources :clients\n    resources :clinics\n    resources :specialties\n    resources :qualifications\n    resources :profissionals\n    resources :addresses\n    resources :documents\n    resources :banners\n    root :to =&gt; 'banners#index'\n    get 'logout' =&gt; 'devise/sessions#destroy'\n\n    get 'clinics/:id/demo', to: 'clinics#demo', as: 'demo'\nend\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 7852128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1267563646685185/picture?type=large", "display_name": "Thiago Anderson", "link": "https://stackoverflow.com/users/7852128/thiago-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2877, "favorite_count": 0, "accepted_answer_id": 45168172, "answer_count": 2, "score": 0, "last_activity_date": 1500384427, "creation_date": 1500383262, "question_id": 45167734, "link": "https://stackoverflow.com/questions/45167734/uninitialized-constant-adminadmin", "title": "Uninitialized constant Admin::Admin", "body": "<p>Using Ruby: <code>2.3.1p112</code> and Rails: <code>3.2.12</code>\n<br><br> </p>\n\n<p>I'm trying call a demo method in my controller. So, in my <code>_form.html.erb</code> I have:</p>\n\n<pre><code>&lt;%= link_to 'Demo', \"/admin/clinics/\"+@clinic.id.to_s+\"/demo\" %&gt;\n</code></pre>\n\n<p>In my <code>routes.rb</code>:</p>\n\n<pre><code>match \"/admin\" =&gt; \"admin#index\", :as =&gt; :admin\n\nnamespace :admin do\n    resources :admin_users\n    resources :health_plan_tables\n    resources :health_aid_tables\n    resources :clients\n    resources :clinics\n    resources :specialties\n    resources :qualifications\n    resources :profissionals\n    resources :addresses\n    resources :documents\n    resources :banners\n    root :to =&gt; 'banners#index'\n    get 'logout' =&gt; 'devise/sessions#destroy'\n\n    get 'clinics/:id/demo', to: 'admin/clinics#demo', as: 'demo'\nend\n</code></pre>\n\n<p>My <code>clinics_controller.rb</code> is inside the folder <code>controllers/admin</code>, and I just have:</p>\n\n<pre><code>def demo\n    print \"hello\"\nend \n</code></pre>\n\n<p>So, when I click on link, error message appears <code>Uninitialized constant Admin::Admin</code>.\nAny ideia how to fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500384025, "post_id": 45167671, "comment_id": 77303876, "body": "please check my question update.  even thou defining action didnt help. still routes.rb not working."}], "tags": [], "owner": {"reputation": 3377, "user_id": 3438405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bacfe7cf1712f9858bebaf738438718?s=128&d=identicon&r=PG&f=1", "display_name": "The F", "link": "https://stackoverflow.com/users/3438405/the-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1500383113, "creation_date": 1500383113, "answer_id": 45167671, "question_id": 45167626, "link": "https://stackoverflow.com/questions/45167626/ruby-on-rails-default-route-on-2-3/45167671#45167671", "title": "Ruby on rails default route on 2.3", "body": "<p>For Rails 2, I believe it must be:</p>\n\n<pre><code>map.root :controller =&gt; \"home\", :action =&gt; \"index\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500383350, "post_id": 45167676, "comment_id": 77303339, "body": "still the same <code>http:&#47;&#47;ctsdemo.com&#47;demos&#47;taurus&#47;old&#47;demoapp&#47;public&#47;</code>  Shows the same page, i specified the action as you asked. copied your line and replaced with mine line."}, {"owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500383429, "post_id": 45167676, "comment_id": 77303400, "body": "do this also needs some sort of .htaccess file? like in apache??"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500383478, "post_id": 45167676, "comment_id": 77303439, "body": "You need to make sure nginix is set up properly"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500383516, "post_id": 45167676, "comment_id": 77303473, "body": "Because what i can see is the directory structure which I should not"}, {"owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500383781, "post_id": 45167676, "comment_id": 77303688, "body": "i have hostgator hosting. what can be the fix?"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1500383122, "creation_date": 1500383122, "answer_id": 45167676, "question_id": 45167626, "link": "https://stackoverflow.com/questions/45167626/ruby-on-rails-default-route-on-2-3/45167676#45167676", "title": "Ruby on rails default route on 2.3", "body": "<p>You should pass the action as well which in your case is <code>\"index\"</code></p>\n\n<pre><code>map.root :controller =&gt; \"home\", :action =&gt; \"index\"\n</code></pre>\n\n<p>For more details you should refer <a href=\"http://guides.rubyonrails.org/v2.3/routing.html#using-maproot\" rel=\"nofollow noreferrer\"><strong>Rails 2.3 routing</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500384901, "post_id": 45168186, "comment_id": 77304622, "body": "actually its the new project created in hostgator using command <code>rails new</code> and edited the routes files with creating a controller file.  and removed the index.html from public. as explained in the documentation of 2.3 <a href=\"http://guides.rubyonrails.org/v2.3/getting_started.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/v2.3/getting_started.html</a>"}, {"owner": {"reputation": 1686, "user_id": 8271939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qqYLi.jpg?s=128&g=1", "display_name": "Clemens Kofler", "link": "https://stackoverflow.com/users/8271939/clemens-kofler"}, "reply_to_user": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500390687, "post_id": 45168186, "comment_id": 77309548, "body": "Then take a note what I wrote about route priority and order the routes accordingly. :) Also, if it&#39;s a new project, I STRONGLY suggest going with Rails 5.1 (or at least Rails 5.0). There&#39;s really no reason to use Rails 2.3 unless you have a legacy app that uses it."}, {"owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "edited": false, "score": 0, "creation_date": 1500443111, "post_id": 45168186, "comment_id": 77331709, "body": "im using Rails 2.3, because another project has been built on 2.3. and Ruby on Rails is very new to me. i don&#39;t even understand the coding.  However there is certain code that i need to understand and convert it to php. But to understand rails i created a new project to understand on its MVC."}], "tags": [], "owner": {"reputation": 1686, "user_id": 8271939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qqYLi.jpg?s=128&g=1", "display_name": "Clemens Kofler", "link": "https://stackoverflow.com/users/8271939/clemens-kofler"}, "is_accepted": false, "score": 0, "last_activity_date": 1500384469, "creation_date": 1500384469, "answer_id": 45168186, "question_id": 45167626, "link": "https://stackoverflow.com/questions/45167626/ruby-on-rails-default-route-on-2-3/45168186#45168186", "title": "Ruby on rails default route on 2.3", "body": "<p>If you look at <a href=\"https://github.com/rails/rails/blob/2-3-stable/railties/configs/routes.rb#L2\" rel=\"nofollow noreferrer\">the comment right on top of the default <code>routes.rb</code> file</a>, it tells you what you're doing wrong: \"The priority is based upon order of creation: first created -> highest priority\". In other words: You need to declare the root before the fallback URLs.</p>\n\n<p>Another note: If you care about security, consider removing the fallback URLs altogether (as <a href=\"https://github.com/rails/rails/blob/2-3-stable/railties/configs/routes.rb#L39-L40\" rel=\"nofollow noreferrer\">the other comment in the default <code>routes.rb</code> file</a> suggests).</p>\n\n<p>Last but not least: If this is an app that's running in production, consider upgrading to a current Rails version or use <a href=\"https://railslts.com\" rel=\"nofollow noreferrer\">Rails LTS</a> if you aren't already. And while you're at it, you should also upgrade to a supported Ruby version. IMO it's highly risky to run such an outdated stack in production.</p>\n"}], "owner": {"reputation": 5213, "user_id": 1204003, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1536020ffdc812093bbdb207bf76f031?s=128&d=identicon&r=PG", "display_name": "Sizzling Code", "link": "https://stackoverflow.com/users/1204003/sizzling-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1500384469, "creation_date": 1500382972, "last_edit_date": 1500383591, "question_id": 45167626, "link": "https://stackoverflow.com/questions/45167626/ruby-on-rails-default-route-on-2-3", "title": "Ruby on rails default route on 2.3", "body": "<p>Current version i am using is</p>\n\n<p><code>Ruby = 1.8.7</code>, \n <code>rails = 2.3.18</code></p>\n\n<p>and i have this <code>routes.rb</code> file in config directory</p>\n\n<pre><code>ActionController::Routing::Routes.draw do |map|\n\n  map.connect ':controller/:action/:id'\n  map.connect ':controller/:action/:id.:format'\n\n  map.root :controller =&gt; \"home\"\nend\n</code></pre>\n\n<p>and i have created a file in <code>app/controllers</code> directory with name of <code>home_controller.rb</code></p>\n\n<p>with the below contents</p>\n\n<pre><code>class Home &lt; ApplicationController\n  def index\n    puts 'Hello World';\n  end\nend\n</code></pre>\n\n<p>This is the url i have created this new rails project on.</p>\n\n<p><code>http://ctsdemo.com/demos/taurus/old/demoapp/public/</code></p>\n\n<p>but its not redirecting me to the home controller?</p>\n\n<p>=-=-=-=-=-=-</p>\n\n<p><strong>Update :</strong></p>\n\n<p>I have updated the routes.rb file and specified the action as well.</p>\n\n<pre><code>ActionController::Routing::Routes.draw do |map|\n\n  map.connect ':controller/:action/:id'\n  map.connect ':controller/:action/:id.:format'\n\n  map.root :controller =&gt; \"home\", :action =&gt; \"index\"\nend\n</code></pre>\n\n<p>Still same old page i am getting. its like routes file never gets accessed by rails??</p>\n\n<p>what am i missing here?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "roo-gem"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1500448667, "post_id": 45166720, "comment_id": 77334790, "body": "How does the params look? can you post them?"}], "answers": [{"tags": [], "owner": {"reputation": 224, "user_id": 5041882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76a72a658a7a8aee14ca5842fdd4d7d?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Martinez", "link": "https://stackoverflow.com/users/5041882/federico-martinez"}, "is_accepted": false, "score": 2, "last_activity_date": 1548446898, "creation_date": 1548446898, "answer_id": 54372125, "question_id": 45166720, "link": "https://stackoverflow.com/questions/45166720/argumenterror-string-contains-null-byte-when-uploading-file-in-rails/54372125#54372125", "title": "ArgumentError (string contains null byte) when uploading file in rails", "body": "<p>This happened to me. Apparently it is an encoding issue.\nTry specifying encoding to 'ASCII-8BIT' when you read the file.</p>\n\n<pre><code>file = File.read(params[\"Team Changes\"][\"document\"].path, encoding: 'ASCII-8BIT')\nspreadsheet = Roo::Excelx.new(file)\n</code></pre>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2211, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548446898, "creation_date": 1500380609, "last_edit_date": 1509371045, "question_id": 45166720, "link": "https://stackoverflow.com/questions/45166720/argumenterror-string-contains-null-byte-when-uploading-file-in-rails", "title": "ArgumentError (string contains null byte) when uploading file in rails", "body": "<p>I am trying to use the roo gem to run some operations on an excel File.  This works perfectly when I do it manually:</p>\n\n<pre><code>file = File.join(Rails.root, 'october_data.xlsx')\nspreadsheet = Roo::Excelx.new(file)\n</code></pre>\n\n<p>However, this does not work when I upload the file via a form:</p>\n\n<pre><code>file = File.read params[\"Team Changes\"][\"document\"].path\nspreadsheet = Roo::Excelx.new(file)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code> ArgumentError (string contains null byte)\n</code></pre>\n\n<p>There seems to be a lot written about <code>string contains null byte</code> but nothing I've seen seems relevant to what I'm working on.  How do I fix this?</p>\n"}, {"tags": ["ruby", "algorithm", "knights-tour"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500380702, "post_id": 45166471, "comment_id": 77301254, "body": "<code>tour(x+2, y-1, board, current_move)</code> will try the cell <code>2, 6</code> assiming <code>[x,y] == [0,0]</code> because ruby allows the \u201csecond from the end\u201d element to be addressed as <code>array[-2]</code>."}, {"owner": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500382147, "post_id": 45166471, "comment_id": 77302335, "body": "Nice catch, thanks! Updating the return statement to account for that looks to be getting me 1 more move to 57."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500380760, "post_id": 45166670, "comment_id": 77301304, "body": "Starting with 3&#215;3 board and tracking what happens would be another good advice."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500381060, "post_id": 45166670, "comment_id": 77301533, "body": "@mudasobwa: It&#39;s not possible to solve a 3x3 board : how would you land in the middle square?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500381310, "post_id": 45166670, "comment_id": 77301726, "body": "It should not matter, first 10 problems with this approach would arise already on 3&#215;3 :)"}, {"owner": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "edited": false, "score": 0, "creation_date": 1500382230, "post_id": 45166670, "comment_id": 77302394, "body": "Thanks! I was misunderstanding how Ruby&#39;s parameter passing words, I&#39;m now duping the board when I pass it. I&#39;m hoping to get the brute force solution down, then work to improve its efficiency."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "edited": false, "score": 0, "creation_date": 1500382523, "post_id": 45166670, "comment_id": 77302608, "body": "@xxyyxx: <code>dup</code> isn&#39;t enough: <code>a = [[0,0],[0,0]]; b=a.dup; b[0][0]=1; a</code>"}, {"owner": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "edited": false, "score": 0, "creation_date": 1500389436, "post_id": 45166670, "comment_id": 77308479, "body": "Thanks Eric, I appreciate you pointing me in the right direction rather than just offering up the solution. I&#39;m now using Marshal.load(Marshal.dump board) and that seems to work considering how long the script has been executing for. Now I&#39;ll work on turning the brute force approach into something more efficient."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1500382516, "last_edit_date": 1500382516, "creation_date": 1500380482, "answer_id": 45166670, "question_id": 45166471, "link": "https://stackoverflow.com/questions/45166471/having-trouble-with-knights-tour-in-ruby/45166670#45166670", "title": "Having trouble with Knights Tour in Ruby", "body": "<p>The main problem is that you only use one <code>board</code> object for all the recursions. You should use a copy of <code>board</code> anytime you try a move. <code>dup</code> produces a shallow copy, and isn't enough to duplicate the board.</p>\n\n<p>Another problem might be that the bruteforce approach is too slow because of exponential growth (8 moves at every iteration, even if you stop early for some).</p>\n\n<p>The usual approach is to pick the cell having the fewest possibilities as the next move.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13273809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AgiPJ6jKyMU/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJMOxgNuMkt2zYB-10glh70sL5ciwQ/photo.jpg?sz=128", "display_name": "caiyun liu", "link": "https://stackoverflow.com/users/13273809/caiyun-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1599937916, "creation_date": 1599937916, "answer_id": 63863990, "question_id": 45166471, "link": "https://stackoverflow.com/questions/45166471/having-trouble-with-knights-tour-in-ruby/63863990#63863990", "title": "Having trouble with Knights Tour in Ruby", "body": "<pre><code>def is_safe?(solution, x, y)\n   x &gt;= 0 &amp;&amp; x &lt; solution.length &amp;&amp; y&gt;= 0 &amp;&amp; y &lt; solution.length &amp;&amp; solution[x][y] == -1\nend\n\ndef solve_nt_helper(size, solution, curr_x, curr_y, num, xmoves, ymoves)\n    return true if num == size * size\n    size.times.each do |i|\n        # p &quot;i:#{i}&quot;\n        next_x = curr_x + xmoves[i]\n        next_y = curr_y + ymoves[i]\n        if is_safe?(solution, next_x, next_y)\n            solution[next_x][next_y] = num\n            return true if solve_nt_helper(size, solution, next_x, next_y, num + 1, xmoves, ymoves)\n  \n            solution[next_x][next_y] = -1\n        end\n    end\n    # p &quot;failed at num #{num}&quot;\n    false\nend\n\ndef solve_nt(n)\n    xmoves = [2, 1, -1, -2, -2, -1, 1, 2]\n    ymoves = [1, 2, 2, 1, -1, -2, -2, -1]\n    solution = Array.new(n) { Array.new(n) { -1 } }\n    solution[0][0] = 0\n    solution.each do |row|\n      p row\n    end\n    return 'invalid' unless solve_nt_helper(n, solution, 0, 0, 1, xmoves, ymoves)\n    solution.each do |row|\n      p row\n    end\n    solution\nend\n\nn = 8\nrequire 'memory_profiler'\nreport = MemoryProfiler.report do\nsolve_nt(n)\nend\nreport.pretty_print\n</code></pre>\n<p>here is a ruby version that works. The trick of this solution is</p>\n<ol>\n<li>don't put any debugging message in the recursive method.</li>\n<li>pass xmoves, and ymoves as variable to the recursive method.don't define a constant\nKNIGHTS_MOVES = [[2, 1],[2, -1], [-2, 1],[-2, -1],[1, 2],[1, -2], [-1, 2], [-1, -2]]\nand iterate over it in solve_nt_helper. sizes.each would generate a lot of Enumerator objects, but iterater over constant  seems slows the whole process down.</li>\n</ol>\n<p>trick 1 also seems to applicalbe to java and python.did not try item2 for java and python. The algorithm is borrowed from <a href=\"https://www.geeksforgeeks.org/the-knights-tour-problem-backtracking-1/\" rel=\"nofollow noreferrer\">geekstogeeks</a></p>\n"}], "owner": {"reputation": 2116, "user_id": 1534892, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/575a0c7ca184fe892dadc16ab653fd53?s=128&d=identicon&r=PG", "display_name": "xxyyxx", "link": "https://stackoverflow.com/users/1534892/xxyyxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 45166670, "answer_count": 2, "score": 1, "last_activity_date": 1599937916, "creation_date": 1500379963, "last_edit_date": 1500381913, "question_id": 45166471, "link": "https://stackoverflow.com/questions/45166471/having-trouble-with-knights-tour-in-ruby", "title": "Having trouble with Knights Tour in Ruby", "body": "<p>I'm trying to the knights tour problem as an exercise in recursion since I have not used it in awhile, but my script does not seem to find a solution and only goes as high as 56 moves. Any tips to point me in the right direction would be appreciated.</p>\n\n<pre><code>class KnightsTour\ndef initialize\n    board = [nil, nil, nil, nil, nil, nil, nil, nil]\n    8.times do |i|\n        board[i] = [0, 0, 0, 0, 0, 0, 0, 0]\n    end\n    tour(0,0,board)\nend\n\ndef tour(x,y,board,current_move=0)\n    puts board if current_move == 64\n\n    return if board[x] == nil || \n              board[x][y] == nil || \n              board[x][y] != 0 || \n              x &lt; 0 ||\n              y &lt; 0 ||\n              current_move == 64\n\n    current_move +=1\n    board[x][y] = current_move\n\n    tour(x+2, y+1, board.dup, current_move)\n    tour(x+2, y-1, board.dup, current_move)\n    tour(x+1, y-2, board.dup, current_move)\n    tour(x-1, y-2, board.dup, current_move)\n    tour(x-1, y+2, board.dup, current_move)\n    tour(x+1, y+2, board.dup, current_move)\n    tour(x-2, y+1, board.dup, current_move)\n    tour(x-2, y-1, board.dup, current_move)\nend\nend\n\nKnightsTour.new\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging"], "comments": [{"owner": {"reputation": 1301, "user_id": 3243040, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9eppL.jpg?s=128&g=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/3243040/srikanth"}, "edited": false, "score": 0, "creation_date": 1500380050, "post_id": 45166308, "comment_id": 77300754, "body": "You can use something like this. logger.debug {&quot;Person attributes hash: #{@person.attributes.inspect}&quot;}"}], "answers": [{"comments": [{"owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "edited": false, "score": 0, "creation_date": 1542958246, "post_id": 45166912, "comment_id": 93757494, "body": "isn&#39;t working for me: ` syntax error, unexpected tIDENTIFIER (SyntaxError)  def log(level: :info, payload)`"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "edited": false, "score": 0, "creation_date": 1542961817, "post_id": 45166912, "comment_id": 93758930, "body": "Check your Ruby version. That syntax will not work with old versions of Ruby. If that&#39;s the case try <code>def log(level, payload)</code> and then use <code>LocalLogger.log :warn, {foo: :bar}</code>"}, {"owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "edited": false, "score": 0, "creation_date": 1543067431, "post_id": 45166912, "comment_id": 93789226, "body": "<code>ruby -v</code> =&gt; <code>ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]</code>"}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1500381107, "creation_date": 1500381107, "answer_id": 45166912, "question_id": 45166308, "link": "https://stackoverflow.com/questions/45166308/custom-rails-logger-creation/45166912#45166912", "title": "Custom Rails logger creation", "body": "<p>Create you own wrapper:</p>\n\n<pre><code>class LocalLogger\n\n  def self.log(*args)\n    new.log(*args)\n  end\n\n  def logger\n    Rails.logger\n  end\n  delegate :info, :debug, :warn, :error, to: :logger\n\n  def log(level: :info, payload)\n    send(level, payload.inspect)\n  end\nend\n\nLocalLogger.log level: :warn, {foo: bar}\n</code></pre>\n\n<p>Modify the <code>log</code> method to behave as you want.</p>\n\n<p>However, avoid the temptation to be too clever with this - the default logger behaviour is pretty good and will behave as most other devs expect it to.</p>\n"}, {"comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1500386521, "post_id": 45166971, "comment_id": 77306064, "body": "Will this not break if Rails.logger changes its implementation?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1500388657, "post_id": 45166971, "comment_id": 77307797, "body": "@Kris It obviously will. Relying on Rails means everything could break when Rails changes their implementation. Even <code>Rails.logger</code> might stop to exist."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1500457603, "post_id": 45166971, "comment_id": 77341037, "body": "It would not break, in the same major version, if you used their public API. Which is why I&#39;d go with wrapping Rails.logger using <code>SimpleDelegator</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1500381266, "creation_date": 1500381266, "answer_id": 45166971, "question_id": 45166308, "link": "https://stackoverflow.com/questions/45166308/custom-rails-logger-creation/45166971#45166971", "title": "Custom Rails logger creation", "body": "<p>The best solution would be to declare your own <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Format\" rel=\"nofollow noreferrer\"><code>Logger#formatter</code></a>:</p>\n\n<pre><code>Rails.logger.      \n      instance_variable_get(:@logger).\n      instance_variable_get(:@log).\n      formatter = proc do |severity, datetime, progname, msg|\n                    DO WHATEVER YOU WANT HERE\n                  end\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2231831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1500381266, "creation_date": 1500379504, "question_id": 45166308, "link": "https://stackoverflow.com/questions/45166308/custom-rails-logger-creation", "title": "Custom Rails logger creation", "body": "<p>I'm using Rails 5 and need to create a custom Rails logger.</p>\n\n<p>For instance in some places of the controllers I want to have this logging calls:</p>\n\n<pre><code>Rails.logger.info('Event happened',\n  { event_id: '...', email: '...', ...}\n)\n</code></pre>\n\n<p>And latter on in my log file I want to see something like this:</p>\n\n<pre><code>{\n  \"level\": \"info\",\n  \"ts\": 1507972311.8043,\n  \"caller\": \"controller/api/v2/news.rb:101\",\n  \"msg\": \"Event happened\",\n  \"app\": \"My App\",\n  \"env\": \"production\",\n  \"context\": {\n    \"event_id\": \"1234567\",\n    \"email\": \"example@gmail.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\"\n  }\n}\n</code></pre>\n\n<p>Is this possible? How to do this for all log levels (info/debug/error) at the same time?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rails-admin", "cancancan"], "answers": [{"tags": [], "owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "is_accepted": false, "score": 0, "last_activity_date": 1500449314, "creation_date": 1500449314, "answer_id": 45183700, "question_id": 45165358, "link": "https://stackoverflow.com/questions/45165358/railsadmin-devise-cancancan-role-not-works-without-manage-all/45183700#45183700", "title": "RailsAdmin + Devise + CanCanCan role not works without :manage :all", "body": "<p>cancancan2 needs a different adapter for RailsAdmin. Please look at this issue: <a href=\"https://github.com/CanCanCommunity/cancancan/issues/413\" rel=\"nofollow noreferrer\">https://github.com/CanCanCommunity/cancancan/issues/413</a> and this issue: <a href=\"https://github.com/sferik/rails_admin/issues/2901\" rel=\"nofollow noreferrer\">https://github.com/sferik/rails_admin/issues/2901</a>.</p>\n\n<p>On the first link you will find the code needed to create an adapter.</p>\n"}], "owner": {"reputation": 1, "user_id": 8324871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49dfce855fb8114abccd3b41b6e59260?s=128&d=identicon&r=PG", "display_name": "Alexander Kshnyakin", "link": "https://stackoverflow.com/users/8324871/alexander-kshnyakin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500449314, "creation_date": 1500376868, "last_edit_date": 1500377274, "question_id": 45165358, "link": "https://stackoverflow.com/questions/45165358/railsadmin-devise-cancancan-role-not-works-without-manage-all", "title": "RailsAdmin + Devise + CanCanCan role not works without :manage :all", "body": "<p>I apologize in advance for my English and knowledge of ruby :)\nI making admin panel with <strong>RailsAdmin</strong>, authentication with <strong>Devise</strong>, authorisation with <strong>CanCanCan</strong>, so, I have three boolean fields in User:</p>\n\n<pre><code>add_column :users, :superadmin_role, :boolean, default: false\nenter code hereadd_column :users, :manager_role, :boolean, default:\n</code></pre>\n\n<p>So, in <strong>ability.rb</strong> i have this:</p>\n\n<pre><code>class Ability\n\n  include CanCan::Ability\n\n  def initialize(user)\n    user ||= User.new # guest user (not logged in)\n    can :access, :dashboard    # allow access to dashboard\n    can :access, :rails_admin  # access Rails Admin for Admin-users\n\n    if user.superadmin_role?\n      can :manage, :all\n    end # role works correct\n\n    if user.manager_role?\n      can :read, :all   \n    end #role works incorrect\n\n  end\nend\n</code></pre>\n\n<p>SUPERADMIN_ROLE works correct and allow to enter to RailsAdmin and etc., but MANAGER_ROLE is doesn't work - when user try enter in Dashboard, there is an Access Denied error message is showing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Mj6YA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mj6YA.png\" alt=\"Dashboard Access Denied Error\"></a></p>\n\n<p>How to provide access for manager_role to dashboard and RailsAdmin interface - have broke the whole brain.</p>\n\n<p>I will be glad to any help (ready code, links @where to read and etc) and constructive criticism</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 895, "user_id": 5780189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0edd103c68c4ed3b24902809589ab35?s=128&d=identicon&r=PG&f=1", "display_name": "Tinus Wagner", "link": "https://stackoverflow.com/users/5780189/tinus-wagner"}, "edited": false, "score": 0, "creation_date": 1500375250, "post_id": 45164688, "comment_id": 77297260, "body": "pretty sure you can use the rails method <code>url_for</code> <a href=\"https://apidock.com/rails/ActionView/RoutingUrlFor/url_for\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/RoutingUrlFor/url_for</a>"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "reply_to_user": {"reputation": 895, "user_id": 5780189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0edd103c68c4ed3b24902809589ab35?s=128&d=identicon&r=PG&f=1", "display_name": "Tinus Wagner", "link": "https://stackoverflow.com/users/5780189/tinus-wagner"}, "edited": false, "score": 0, "creation_date": 1500375306, "post_id": 45164688, "comment_id": 77297303, "body": "What you mean ? The first one (link_to) instead of transform it ?"}, {"owner": {"reputation": 895, "user_id": 5780189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0edd103c68c4ed3b24902809589ab35?s=128&d=identicon&r=PG&f=1", "display_name": "Tinus Wagner", "link": "https://stackoverflow.com/users/5780189/tinus-wagner"}, "edited": false, "score": 0, "creation_date": 1500375487, "post_id": 45164688, "comment_id": 77297420, "body": "yup, take a look at the examples in the link I attached"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1500375559, "post_id": 45164688, "comment_id": 77297470, "body": "you should do like this :<code>&lt;%= link_to &#39;Project Request&#39;, new_request_path(project: true) %&gt;</code> which would produce a link like <a href=\"http://127.0.0.1:3000/request?project=true\" rel=\"nofollow noreferrer\">127.0.0.1:3000/request?project=true</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1500375611, "post_id": 45164688, "comment_id": 77297507, "body": "How does your definition for <code>rem_admin_group_path</code> in your <code>config&#47;routes.rb</code> look like?"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1500376297, "post_id": 45164688, "comment_id": 77297993, "body": "If I follow my url path, it&#39;s something like this   &lt;a href=&quot;groups/&lt;%=group.id%&gt;/rem_admin?idz=#{admin.id}&quot;,  data-method=&quot;patch&quot; data-remote=&quot;true&quot;&gt;  But is not working like that"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1500376958, "post_id": 45164688, "comment_id": 77298468, "body": "Rails just outputs HTML. Look at your markup, find the <code>&lt;a&gt;</code> tag you&#39;re generating, and copy it. Sub in your dynamic values for the static values exactly like you&#39;re doing with <code>&lt;%= group.id %&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "is_accepted": true, "score": 1, "last_activity_date": 1500376808, "creation_date": 1500376808, "answer_id": 45165337, "question_id": 45164688, "link": "https://stackoverflow.com/questions/45164688/how-to-pass-data-into-a-a-tag-like-link-to-rails/45165337#45165337", "title": "How to pass data into a &lt;a&gt; tag like link_to rails", "body": "<p>You can try something like this </p>\n\n<pre><code>&lt;a href=\"groups/&lt;%=group.id%&gt;/rem_admin?idz=&lt;%=admin.id%&gt;\",  data-method=\"patch\" data-remote=\"true\"&gt;\n  &lt;div class=\"btn btn-danger pull-right\"style='margin-left: 10px;'&gt;\n    &lt;i class=\"fa fa-close\" aria-hidden=\"true\" &gt;&lt;/i&gt;\n  &lt;/div&gt;\n&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 45165337, "answer_count": 1, "score": 0, "last_activity_date": 1500376808, "creation_date": 1500375082, "question_id": 45164688, "link": "https://stackoverflow.com/questions/45164688/how-to-pass-data-into-a-a-tag-like-link-to-rails", "title": "How to pass data into a &lt;a&gt; tag like link_to rails", "body": "<p>I'm trying to transform this ruby link_to method into a classic  tag. And before i'd use to pass some value (idz) into the parse after the link tag.</p>\n\n<p>Is it possible to do the same with  tags. Is because I need this value (idz) to run my controller method </p>\n\n<p>Before :</p>\n\n<pre><code>&lt;%= link_to rem_admin_group_path(group, idz: admin.id), method: :patch, remote: true do %&gt;\n  &lt;div class=\"btn btn-danger pull-right\"style='margin-left: 10px;'&gt;\n    &lt;i class=\"fa fa-close\" aria-hidden=\"true\" &gt;&lt;/i&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>After (without the value idz):</p>\n\n<pre><code>&lt;a href=\"groups/&lt;%=group.id%&gt;/rem_admin\",  data-method=\"patch\" data-remote=\"true\"&gt;\n  &lt;div class=\"btn btn-danger pull-right\"style='margin-left: 10px;'&gt;\n    &lt;i class=\"fa fa-close\" aria-hidden=\"true\" &gt;&lt;/i&gt;\n  &lt;/div&gt;\n&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "watir", "page-object-gem"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4603202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0031dd8033af4c21a5997b8252a98d53?s=128&d=identicon&r=PG&f=1", "display_name": "albatross", "link": "https://stackoverflow.com/users/4603202/albatross"}, "edited": false, "score": 0, "creation_date": 1500393639, "post_id": 45167610, "comment_id": 77311789, "body": "Thanks Justin, I was listening to a Watir podcast featuring you this morning on the train. I am using the latest Watir 6. I will start to trust Watir and take out some of the wait_until_presents and see how I get along."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1500382931, "creation_date": 1500382931, "answer_id": 45167610, "question_id": 45164657, "link": "https://stackoverflow.com/questions/45164657/page-object-gem-how-to-implement-wait-until-present/45167610#45167610", "title": "Page-object gem - how to implement wait_until_present", "body": "<p>Assuming you are using the latest version of Watir, you can simply do:</p>\n\n<pre><code>class HomePage\n  include PageObject\n  text_field(:user_name, name: 'username')\nend\n\nhome_page = HomePage.new\nhome_page.user_name = 'Mickey'\n</code></pre>\n\n<p>In other words, you do not need to explicitly wait for the text field to be present before setting it.</p>\n\n<p>Watir has had a number of improvements including automatically waiting for elements to be present before setting them. As a result, you should rarely (never?) need to call <code>wait_until_present</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 4603202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0031dd8033af4c21a5997b8252a98d53?s=128&d=identicon&r=PG&f=1", "display_name": "albatross", "link": "https://stackoverflow.com/users/4603202/albatross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 45167610, "answer_count": 1, "score": 0, "last_activity_date": 1500382931, "creation_date": 1500375016, "question_id": 45164657, "link": "https://stackoverflow.com/questions/45164657/page-object-gem-how-to-implement-wait-until-present", "title": "Page-object gem - how to implement wait_until_present", "body": "<p>I am taking my first steps with the page-object gem working with Cucumber and Watir. My present step definition file has commands like the following:</p>\n\n<pre><code>@browser.text_field(:name =&gt; 'Username').wait_until_present.set username\n</code></pre>\n\n<p>Using page-object I am testing the watir (sorry) with the following code:</p>\n\n<pre><code>class HomePage\n  include PageObject\n  text_field(:user_name, name: 'username').wait_until_present\n}\nend\n\nhome_page = HomePage.new\nhome_page.user_name = 'Mickey'\n</code></pre>\n\n<p>This does not work as I get a 'no method error'</p>\n\n<p>A bit of googling reveals I can do this. but it is using when_visible instead of wait_until_present</p>\n\n<pre><code>class HomePage\n  include PageObject\n  text_field(:user_name){\n      text_field_element(:name =&gt; 'username').when_visible\n}\nend\n\nhome_page = HomePage.new\nhome_page.user_name = 'Mickey'\n</code></pre>\n\n<p>What is the best of using wait_until or when_visible with page-object? I don't want to put lots of sleeps in my step files if possible.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500378597, "post_id": 45164588, "comment_id": 77299703, "body": "<code>numbers.each_with_object([0.0]) { |number, accu| accu &lt;&lt; accu.last += number }</code> ?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500384764, "post_id": 45164588, "comment_id": 77304502, "body": "@mudasobwa i had this solution first. but it shifts the indexes so i went for the nil check."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1500385534, "post_id": 45164588, "comment_id": 77305166, "body": "<code>numbers.each_with_object([0.0]) { |number, accu| accu &lt;&lt; accu.last += number }.drop(1)</code> if you care about indices."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500409894, "post_id": 45164588, "comment_id": 77321607, "body": "@mudasobwa I know. But I prefer this solution over the other one. I added a comment to explain why the <code>|| 0</code> is there though."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 4, "last_activity_date": 1500409915, "last_edit_date": 1500409915, "creation_date": 1500374814, "answer_id": 45164588, "question_id": 45164493, "link": "https://stackoverflow.com/questions/45164493/sum-of-the-previous-elements-in-an-array/45164588#45164588", "title": "Sum of the previous elements in an array", "body": "<p>You can iterate with <code>each_with_object</code></p>\n\n<p>numbers = [3.0, 3.0, 2.0, 5.0, 6.0, 10.0]</p>\n\n<pre><code>sum_of_repvious = numbers.each_with_object([]) do |number, accu|\n  previous = accu.last || 0 # on the first iteration, there is no previous, initialize to 0\n  accu &lt;&lt; previous += number\nend\n\np sum_of_repvious #&gt; [3.0, 6.0, 8.0, 13.0, 19.0, 29.0]\n</code></pre>\n\n<p>Let me explain a bit more in detail what is going on here:</p>\n\n<p>With <code>each_with_object</code> you iterate the array and have an additional object that is passed to each iteration. I chose it to be an empty array (the <code>[]</code>).</p>\n\n<p>I call this <strong>accumlator</strong> or <strong>accu</strong> for short.</p>\n\n<p>In this array i store the sum of the previous numbers. On the first step, there is no previous sum, hence the <code>|| 0</code> to make sure that we have <code>0</code> instead of <code>nil</code>.</p>\n\n<p>Now you have an array that has the sum of the numbers in your original array up to the respective index.</p>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1500375001, "post_id": 45164601, "comment_id": 77297096, "body": "no need to call <code>to_f</code> on the numbers."}], "tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 2, "last_activity_date": 1500374852, "creation_date": 1500374852, "answer_id": 45164601, "question_id": 45164493, "link": "https://stackoverflow.com/questions/45164493/sum-of-the-previous-elements-in-an-array/45164601#45164601", "title": "Sum of the previous elements in an array", "body": "<pre><code>def sum_array_of_last_elements(array)\n  array.reduce([]) { |memo, itm| memo &lt;&lt; itm.to_f + memo.last.to_f }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1500385567, "post_id": 45167077, "comment_id": 77305197, "body": "Dumb local variable declared upfront is a code smell."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500389268, "post_id": 45167077, "comment_id": 77308340, "body": "@mudasobwa: I find this code much easier to read than the accepted answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500445252, "post_id": 45167077, "comment_id": 77332718, "body": "The block <code>a.map</code> is that way producing side effects, which is a bad practice in general. Also, local variables, specifically used as closure parameters, are GC\u2019ed worse and might in some cases lead to memory leaks in MRI. I did not say, BTW, that is wrong; I said it is a code smell. I personally don\u2019t like when my code looks like PHP."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500446125, "post_id": 45167077, "comment_id": 77333178, "body": "I found that you do not understand the difference between blocks and lambdas. Also, I did not introduce anything there, I answered the question about passing <i>local variable</i> to closure."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500446401, "post_id": 45167077, "comment_id": 77333349, "body": "@mudasobwa : updated answer with note"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1500446501, "post_id": 45167077, "comment_id": 77333403, "body": "Please, don\u2019t get me wrong: I am not an expert by any means and I never insisted on setting my point of view: I am just sharing it."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1500446899, "post_id": 45167077, "comment_id": 77333658, "body": "yes I appreciate and always welcome new ideas and good suggestions for self improvements  :)"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 3, "last_activity_date": 1500446379, "last_edit_date": 1500446379, "creation_date": 1500381562, "answer_id": 45167077, "question_id": 45164493, "link": "https://stackoverflow.com/questions/45164493/sum-of-the-previous-elements-in-an-array/45167077#45167077", "title": "Sum of the previous elements in an array", "body": "<p>for Simple and easy way try <strong><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">Array#map</a></strong></p>\n\n<pre><code>&gt; sum = 0\n&gt; a.map{|x| sum += x}\n#=&gt; [3.0, 6.0, 8.0, 13.0, 19.0, 29.0] \n</code></pre>\n\n<p><strong>Note:</strong> As per experts this is not good practice, just alternate solution </p>\n"}], "owner": {"reputation": 49, "user_id": 7701988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5b92d1c26e432e91cb1a8eaca210669?s=128&d=identicon&r=PG&f=1", "display_name": "Wako", "link": "https://stackoverflow.com/users/7701988/wako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "closed_date": 1500479400, "accepted_answer_id": 45164588, "answer_count": 3, "score": 2, "last_activity_date": 1500446379, "creation_date": 1500374576, "last_edit_date": 1500382437, "question_id": 45164493, "link": "https://stackoverflow.com/questions/45164493/sum-of-the-previous-elements-in-an-array", "closed_reason": "Duplicate", "title": "Sum of the previous elements in an array", "body": "<p>I have a array</p>\n\n<pre><code>[3.0, 3.0, 2.0, 5.0, 6.0, 10.0]\n</code></pre>\n\n<p>For each element of the array, I need the sum of its previous elements.</p>\n\n<p>I know how get the previous element but not all the previous elements.</p>\n\n<pre><code>last = mytab[index - 1] //change here \nres = (e + last) / (index + 1)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8088921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30082d36629d203543d693617046e4b?s=128&d=identicon&r=PG&f=1", "display_name": "Katy Jones", "link": "https://stackoverflow.com/users/8088921/katy-jones"}, "edited": false, "score": 0, "creation_date": 1500374009, "post_id": 45163983, "comment_id": 77296343, "body": "Makes sense! Any thoughts on the best place to require the file?"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 0, "last_activity_date": 1500376581, "last_edit_date": 1500376581, "creation_date": 1500373363, "answer_id": 45163983, "question_id": 45163837, "link": "https://stackoverflow.com/questions/45163837/rails-autoloader-not-loading-module/45163983#45163983", "title": "Rails autoloader not loading module", "body": "<p>The whole point of the autoloader is that it loads <strong>missing</strong> constants by turning a module/class hierarchy into a path. As you've defined your constant in two files, it will never automatically load the second file.</p>\n\n<p>You need to manually require your <code>foo.rb</code>.</p>\n"}], "owner": {"reputation": 125, "user_id": 8088921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30082d36629d203543d693617046e4b?s=128&d=identicon&r=PG&f=1", "display_name": "Katy Jones", "link": "https://stackoverflow.com/users/8088921/katy-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 45163983, "answer_count": 1, "score": 0, "last_activity_date": 1500376581, "creation_date": 1500372975, "last_edit_date": 1500373332, "question_id": 45163837, "link": "https://stackoverflow.com/questions/45163837/rails-autoloader-not-loading-module", "title": "Rails autoloader not loading module", "body": "<p>I have the following structure in my /lib folder</p>\n\n<pre><code>/lib\n   /example\n      /foo\n         bar.rb\n      foo.rb\n</code></pre>\n\n<p><strong>foo.rb</strong></p>\n\n<pre><code>module Example\n   module Foo\n      def self.some_methods\n      end\n   end\nend\n</code></pre>\n\n<p><strong>bar.rb</strong></p>\n\n<pre><code>module Example\n    module Foo\n        class Bar\n           ...\n        end\n    end\nend\n</code></pre>\n\n<p>I then have in <strong>application.rb</strong></p>\n\n<pre><code>config.autoload_paths &lt;&lt; Rails.root.join('lib')\n</code></pre>\n\n<p>and in an initializer</p>\n\n<pre><code>...\nExample::Foo.some_methods\n...\n</code></pre>\n\n<p>I'm running into problems when trying to run my test suite in that it seems to be failing when setting up the Rails environment. It's complaining that <code>some_methods</code> does not exist on <code>Example::Foo</code>. I can boot a local development server up without any errors, however.</p>\n\n<p>Digging into the problem using a breakpoint, the <code>Example::Foo</code> module is defined at the point of failure, but it's empty. I am assuming that the autoloader is loading <code>bar.rb</code> first (I can access that class in the initializer no problems)? It seems to be the case that Rails doesn't try to load <code>foo.rb</code> as <code>Example::Foo</code> has already been defined by <code>bar.rb</code>?</p>\n\n<p>What's happening? If I require <code>foo.rb</code> in the initializer it works, but it feels like a bad solution. Also, any idea why this problem would only surface when running <code>rake spec</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 0, "creation_date": 1500380332, "post_id": 45163817, "comment_id": 77300976, "body": "try <code>bundle update</code>"}], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 2272894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585567178822f3c3997fabdeffbca8bf?s=128&d=identicon&r=PG", "display_name": "Michael Brawn", "link": "https://stackoverflow.com/users/2272894/michael-brawn"}, "is_accepted": true, "score": 0, "last_activity_date": 1526842283, "creation_date": 1526842283, "answer_id": 50438318, "question_id": 45163817, "link": "https://stackoverflow.com/questions/45163817/rails-cannot-create-new-rails-application/50438318#50438318", "title": "Rails - Cannot create New rails Application", "body": "<p>If you're trying to create a new rails application, try setting it up in a new folder. </p>\n\n<p>If you're trying to update the rails version of your current project update the rails version in your <code>Gemfile</code> and run <code>bundle update rails</code>. </p>\n\n<p>Prepending the command that's giving you</p>\n\n<pre><code>Could not find proper version of railties (4.2.7.1) in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>with <code>bundle exec</code> may solve your problem. </p>\n\n<p>If you're using something like <code>rbenv</code> to manage your ruby version, you may have to update your <code>.ruby-version</code> file, and then run </p>\n\n<pre><code>rbenv install\ngem install bundler\nbundle install\n</code></pre>\n\n<p>to install that new version of ruby, bundler and your gems.</p>\n"}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 50438318, "answer_count": 1, "score": 0, "last_activity_date": 1526842283, "creation_date": 1500372925, "question_id": 45163817, "link": "https://stackoverflow.com/questions/45163817/rails-cannot-create-new-rails-application", "title": "Rails - Cannot create New rails Application", "body": "<p>I already have a live Rails application which is running in rails 5.0.1. Now, when I try to create new rails version I get the following error</p>\n\n<pre><code>Could not find proper version of railties (4.2.7.1) in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>When I run 'bundle install' I get the following error</p>\n\n<pre><code>Could not find spork-1.0.0rc4 in any of the sources\n</code></pre>\n\n<p>How can I solve this error? </p>\n\n<p>My System only have Rails 5.0.1 version and Ruby version 2.3.1.</p>\n\n<p>PS: When I keep Ruby version in 2.2.5, I am able to create my rails app successfully.</p>\n"}, {"tags": ["ruby", "string", "replace"], "answers": [{"comments": [{"owner": {"reputation": 1609, "user_id": 2698341, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/483f9eb419f9f31ede6b9ffec853c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Aryan Firouzian", "link": "https://stackoverflow.com/users/2698341/aryan-firouzian"}, "edited": false, "score": 2, "creation_date": 1500373647, "post_id": 45163863, "comment_id": 77296061, "body": "You need to scape the dash, or carefully use it  str.tr(&quot;-0123456789._&quot;, &quot;_..........;-&quot;)"}, {"owner": {"reputation": 53, "user_id": 8322336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f81936cee8981155ba442495538d61?s=128&d=identicon&r=PG&f=1", "display_name": "negams", "link": "https://stackoverflow.com/users/8322336/negams"}, "edited": false, "score": 0, "creation_date": 1500374811, "post_id": 45163863, "comment_id": 77296949, "body": "Thanks, these solved my problem. I cannot use number range without dash scape; so I think I have to go with one of these."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 4, "last_activity_date": 1500373039, "creation_date": 1500373039, "answer_id": 45163863, "question_id": 45163533, "link": "https://stackoverflow.com/questions/45163533/replacing-and-substituting-characters-of-the-the-string-in-ruby/45163863#45163863", "title": "Replacing and substituting characters of the the string in Ruby", "body": "<p>You have to escape the dash:</p>\n\n<pre><code>print \"abc123.-_def.456\".tr('-_.0-9', '_\\-;.')\n//                              here ___^\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>abc...;_-def;...\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 8322336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f81936cee8981155ba442495538d61?s=128&d=identicon&r=PG&f=1", "display_name": "negams", "link": "https://stackoverflow.com/users/8322336/negams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 45163863, "answer_count": 1, "score": 0, "last_activity_date": 1500382604, "creation_date": 1500372197, "last_edit_date": 1500382604, "question_id": 45163533, "link": "https://stackoverflow.com/questions/45163533/replacing-and-substituting-characters-of-the-the-string-in-ruby", "title": "Replacing and substituting characters of the the string in Ruby", "body": "<p>What is the best way to replace all characters in the string?</p>\n\n<ol>\n<li>numbers to <code>'.'</code></li>\n<li><code>'.'</code> to <code>';'</code></li>\n<li><code>'-'</code> to <code>'_'</code></li>\n<li><code>'_'</code> to <code>'-'</code></li>\n</ol>\n\n<p>I used temporary characters to do it. But it is messed up when the temp character itself appeared in the first string.</p>\n\n<p>I also tried <code>tr</code> method, and it doesn't work for dash and underline.</p>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 881, "user_id": 3010879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000951369051/picture?type=large", "display_name": "medik", "link": "https://stackoverflow.com/users/3010879/medik"}, "edited": false, "score": 0, "creation_date": 1500376786, "post_id": 45163066, "comment_id": 77298349, "body": "How would you like it to behave? Please paste the test."}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 2, "last_activity_date": 1500375881, "creation_date": 1500375881, "answer_id": 45164976, "question_id": 45163066, "link": "https://stackoverflow.com/questions/45163066/minitest-should-not-skip-functions-on-assert-fail/45164976#45164976", "title": "MiniTest : Should not skip functions on assert fail", "body": "<p>In short: You can not.</p>\n\n<p>I assume you have something like this:</p>\n\n<pre><code>def test_foo\n  assert_equal 0, Foo.calculate(nil)\n  assert_equal 0, Foo.calculate()\n  assert_equal 12, Foo.calculate(8, 4)\n  assert_equal 0, Foo.calculate(4, -4)\n  ...\nend\n</code></pre>\n\n<p>A lot of assertions inside a single test method. What you could do is to split this into multiple test methods:</p>\n\n<pre><code>def test_result_when_input_is_nil\n  assert 0, Foo.calculate(nil)\nend\n\ndef test_result_when_no_input\n  assert 0, Foo.calculate()\nend\n\ndef test_calculates_result\n  assert 12, Foo.calculate(8, 4)\nend\n\ndef test_can_handle_negative_numbers\n  assert 0, Foo.calculate(4, -4)\nend\n</code></pre>\n\n<p>You get better error messages from this as it is clear when something breaks and where it broke.</p>\n"}], "owner": {"reputation": 1448, "user_id": 1652185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eAfTP.png?s=128&g=1", "display_name": "Codeformer", "link": "https://stackoverflow.com/users/1652185/codeformer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500375881, "creation_date": 1500371035, "question_id": 45163066, "link": "https://stackoverflow.com/questions/45163066/minitest-should-not-skip-functions-on-assert-fail", "title": "MiniTest : Should not skip functions on assert fail", "body": "<p>Currently, one of my test functions has 8 assertions. If the first one fails, It skips the remaining assertions and goes to the next function. How can this behaviour be changed?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "edited": false, "score": 1, "creation_date": 1500370286, "post_id": 45162284, "comment_id": 77293706, "body": "Have you tried to set <code>Content-Type</code> header to <code>application&#47;octet-stream</code> and send your file via form-data? Also, AFAIK, there&#39;re some troubles with file upload with Postman, <a href=\"https://github.com/postmanlabs/postman-app-support/issues/1991\" rel=\"nofollow noreferrer\">github issue</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1500370917, "creation_date": 1500370917, "answer_id": 45163016, "question_id": 45162284, "link": "https://stackoverflow.com/questions/45162284/how-can-i-parse-ruby-json-request/45163016#45163016", "title": "How can I parse ruby json request", "body": "<p><a href=\"http://3dml.free.fr/rubyhashconverter/\" rel=\"nofollow noreferrer\">http://3dml.free.fr/rubyhashconverter/</a></p>\n\n<p>I don't know if you need to do it within your code or not, but the above is an online converter, takes ruby hash syntax (old and new) and gives valid JSON.</p>\n"}, {"tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1500372727, "creation_date": 1500372727, "answer_id": 45163742, "question_id": 45162284, "link": "https://stackoverflow.com/questions/45162284/how-can-i-parse-ruby-json-request/45163742#45163742", "title": "How can I parse ruby json request", "body": "<p>JSON doesn't support binary data(images). So in order to pass the image, you need to convert image to base64 string and use it in JSON.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QVW9B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QVW9B.png\" alt=\"Example API Uploading an image\"></a></p>\n"}], "owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1500372727, "creation_date": 1500368986, "question_id": 45162284, "link": "https://stackoverflow.com/questions/45162284/how-can-i-parse-ruby-json-request", "title": "How can I parse ruby json request", "body": "<p>I'm using api request/response on my rails app. To update avatar i've got this request(i took it from development.log file)</p>\n\n<pre><code>Started PUT \"/user/avatars.json\" for 127.0.0.1 at 2017-07-18 11:47:57 +0300\nProcessing by AvatarsController#update as JSON\n  Parameters: {\"avatar\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007fe6cbedae18 @tempfile=#&lt;Tempfile:/var/folders/n3/5_nb_zks2k91r5ngcmb4fm9r0000gn/T/RackMultipart20170718-26576-1vss7hh.png&gt;, @original_filename=\"\u0421\u043d\u0438\u043c\u043e\u043a \u044d\u043a\u0440\u0430\u043d\u0430 2017-07-16 \u0432 21.55.05.png\", @content_type=\"image/png\", @headers=\"Content-Disposition: form-data; name=\\\"avatar\\\"; filename=\\\"\\xD0\\xA1\\xD0\\xBD\\xD0\\xB8\\xD0\\xBC\\xD0\\xBE\\xD0\\xBA \\xD1\\x8D\\xD0\\xBA\\xD1\\x80\\xD0\\xB0\\xD0\\xBD\\xD0\\xB0 2017-07-16 \\xD0\\xB2 21.55.05.png\\\"\\r\\nContent-Type: image/png\\r\\n\"&gt;}\n</code></pre>\n\n<p>Now, I need to send this request from POSTMAN application. But it uses ruby syntax like <strong><em>=></em></strong>. How can I convert it to json to use in POSTMAN?</p>\n"}]