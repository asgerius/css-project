[{"tags": ["ruby-on-rails", "ruby", "nginx", "thin", "proxypass"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "edited": false, "score": 0, "creation_date": 1446132710, "post_id": 33403631, "comment_id": 54626406, "body": "Yes, I agree with you, but this is &quot;just&quot; a best practice right? I&#39;m just trying to make it work for now. I still don&#39;t know what&#39;s the issue here."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446144560, "post_id": 33403631, "comment_id": 54633980, "body": "It is just a best practice.  As far as your particular issue is concerned, I think you are configuring it wrong.  That is why I gave you the link.  Mainly, setup an upstream, and set your root."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446145938, "post_id": 33403631, "comment_id": 54634711, "body": "I guess  you can make  yours work too the way you described.  I assume your website1 worked because you were just passing the requests to your  thin server running on port 3000.  Do you have another thin server running on port 8082?"}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446146617, "post_id": 33403631, "comment_id": 54635076, "body": "Okay, updated my answer to kind of mix the configs of a working server I have with your config.  If it works, you can mess with it to clean up what you don&#39;t need."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446151561, "post_id": 33403631, "comment_id": 54637727, "body": "Never mind, I removed the update after reading other answer.  Basically did the same thing but didn&#39;t need to add anything else.  All you need to do was add the / at the end of the proxy_pass.  Your config will still be broken.  But your site will be up and running.  You need to set root so your static resources will get served correctly.  I still say take a look at that blog post to fix other issues you may see after the website is up and running."}, {"owner": {"reputation": 557, "user_id": 726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d6560a3be1496450d3165ece15c6e5?s=128&d=identicon&r=PG", "display_name": "Paul Nicholson", "link": "https://stackoverflow.com/users/726149/paul-nicholson"}, "edited": false, "score": 0, "creation_date": 1446169104, "post_id": 33403631, "comment_id": 54643984, "body": "Yes, its not typical for rails apps but it will work just fine. You don&#39;t always have the ability to place things under subdomains and sometimes you end up with configurations like this to support old urls or whatever. I have used this type of thing to port a portion of a rails json api to another language for performance reasons. You can still separate the two location directives into separate files if you want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "edited": false, "score": 0, "creation_date": 1446180050, "post_id": 33403631, "comment_id": 54646181, "body": "Thank you for your help. I&#39;ll try to do that the &quot;right&quot; way whenever I get a better grasp of NGINX."}], "tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": false, "score": 0, "last_activity_date": 1446151822, "last_edit_date": 1446151822, "creation_date": 1446076533, "answer_id": 33403631, "question_id": 33403358, "link": "https://stackoverflow.com/questions/33403358/multiple-rails-apps-over-nginx-reverse-proxy/33403631#33403631", "title": "Multiple Rails apps over NGINX (reverse proxy)", "body": "<p>I don't like putting multiple configs in one file, also, you are better off using virtual hosts.  Just add the fake domains to yours hosts file.  Here is how you go about that:</p>\n\n<p><a href=\"http://articles.slicehost.com/2009/4/17/centos-nginx-rails-and-thin\" rel=\"nofollow\">http://articles.slicehost.com/2009/4/17/centos-nginx-rails-and-thin</a></p>\n\n<p>I will add to that that I like to put each server config in its own file and call it something like domain1.com_server.conf  </p>\n\n<p>Update:</p>\n\n<p>I tried your config and it works.  The only part I changed was added / at the end as other answer suggested.  You may still have other problems.  That is why I pointed you to the blog post.  There are problems the way you are doing it, but it will be okay if you fix them.  For example, you need to tell Rails that you are not running on the root domain but at /website1 or /blog.  You also need to fix any html links that assume resource paths start at the root.  That is why virtual hosts offer a cleaner solution.  </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "edited": false, "score": 0, "creation_date": 1446179839, "post_id": 33423039, "comment_id": 54646127, "body": "Thank you! That works way better! I would have never found out that a trailing slash was missing. To make it work, I also added <code>config.action_controller.relative_url_root = &#39;&#47;blog&#39;</code>  So when I got to <a href=\"http://HOST/blog\" rel=\"nofollow noreferrer\">HOST/blog</a> my root page is displayed. However whenever I click on a link, the prefix is ignored, it goes to <a href=\"http://HOST/posts/1\" rel=\"nofollow noreferrer\">HOST/posts/1</a>. Do you have any idea? I&#39;m sorry for asking such stupid questions but I really don&#39;t know anything about production environment !"}, {"owner": {"reputation": 557, "user_id": 726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d6560a3be1496450d3165ece15c6e5?s=128&d=identicon&r=PG", "display_name": "Paul Nicholson", "link": "https://stackoverflow.com/users/726149/paul-nicholson"}, "edited": false, "score": 0, "creation_date": 1446230637, "post_id": 33423039, "comment_id": 54673943, "body": "If you set <code>config.action_controller.relative_url_root</code> then I think you do not need the trailing slash. relative_url_root should take care of url generation as well."}], "tags": [], "owner": {"reputation": 557, "user_id": 726149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d6560a3be1496450d3165ece15c6e5?s=128&d=identicon&r=PG", "display_name": "Paul Nicholson", "link": "https://stackoverflow.com/users/726149/paul-nicholson"}, "is_accepted": true, "score": 2, "last_activity_date": 1446163550, "last_edit_date": 1446163550, "creation_date": 1446146975, "answer_id": 33423039, "question_id": 33403358, "link": "https://stackoverflow.com/questions/33403358/multiple-rails-apps-over-nginx-reverse-proxy/33423039#33423039", "title": "Multiple Rails apps over NGINX (reverse proxy)", "body": "<p>Try adding a trailing slash to proxy pass. Like:</p>\n\n<pre><code>proxy_pass http://127.0.0.1:8082/;\nproxy_pass http://127.0.0.1:3000/;\n</code></pre>\n\n<p>from (A request URI is passed to the server as follows): <a href=\"http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass\" rel=\"nofollow\">http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass</a></p>\n\n<p>To further explain why you are getting 404s, rails is seeing the full path when the trailing slash is excluded (eg. <a href=\"http://HOST/website1\" rel=\"nofollow\">http://HOST/website1</a> -> /website1 &amp; <a href=\"http://HOST/blog\" rel=\"nofollow\">http://HOST/blog</a> -> /blog). It sounds like the rails routing for both apps is not expecting a prefix. By including the trailing slash in the proxy pass line, your urls will get transform such that <a href=\"http://HOST/website1/\" rel=\"nofollow\">http://HOST/website1/</a> becomes the root path(/) on the rails side. You may also need <code>proxy_redirect default;</code> if you have issues with rails redirects not working. See: <a href=\"http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect\" rel=\"nofollow\">http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1961, "favorite_count": 0, "accepted_answer_id": 33423039, "answer_count": 2, "score": 0, "last_activity_date": 1446163550, "creation_date": 1446074860, "question_id": 33403358, "link": "https://stackoverflow.com/questions/33403358/multiple-rails-apps-over-nginx-reverse-proxy", "title": "Multiple Rails apps over NGINX (reverse proxy)", "body": "<p>I have two rails apps on my server. Each of them is running on a Thin server. I am also using NGINX. This is my NGINX configuration file:</p>\n\n<pre><code>server{\n\nlocation /blog {\n   proxy_pass http://127.0.0.1:8082;\n    proxy_set_header Host $host;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n\n}\nlocation /website1 {\n    proxy_pass http://127.0.0.1:3000;\n    proxy_set_header Host $host;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n}\n}\n</code></pre>\n\n<p>\"<a href=\"http://HOST/blog\" rel=\"nofollow\">http://HOST/blog</a>\" => I get a 404 error (blank page)</p>\n\n<p>\"<a href=\"http://[HOST]/website1\" rel=\"nofollow\">http://[HOST]/website1</a>\" => I get a 404 error from my Rails app, and on my app logs I get:</p>\n\n<pre><code> INFO -- : Started GET \"/website1\"\n FATAL -- : ActionController::RoutingError (No route matches [GET] \"/website1\")\n</code></pre>\n\n<p>What is happening??? </p>\n\n<p>I tried setting the location of website 1 on \"/\" and blog on \"/blog\". In this case website1 works perfectly, but I still get a 404 on blog (blank page, not a rails one).</p>\n\n<p>Any idea? Thank you for you help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror", "shoulda"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1446075281, "post_id": 33403298, "comment_id": 54598341, "body": "get rid of <code>require: false</code>"}], "answers": [{"tags": [], "owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "is_accepted": false, "score": 1, "last_activity_date": 1446075187, "creation_date": 1446075187, "answer_id": 33403411, "question_id": 33403298, "link": "https://stackoverflow.com/questions/33403298/what-am-i-doing-wrong-in-shoulda-matchers/33403411#33403411", "title": "What am I doing wrong in Shoulda Matchers?", "body": "<p>Change your Gemfile to use two different groups for test like this:</p>\n\n<pre><code>group :test, :development do\n  gem 'rspec-rails'\n  gem 'factory_girl'\nend\n\ngroup :test do\n  gem 'shoulda-matchers', require: false\nend</code></pre>\n\n<p>This <em>used</em> to be caused when <code>shoulda</code> would load with Test::Unit instead of RSpec, but I thought that was fixed.</p>\n"}, {"tags": [], "owner": {"reputation": 2276, "user_id": 260771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e852b18079792bc5f4ec52b8e37c53?s=128&d=identicon&r=PG", "display_name": "Elliot Winkler", "link": "https://stackoverflow.com/users/260771/elliot-winkler"}, "is_accepted": true, "score": 1, "last_activity_date": 1446141731, "creation_date": 1446141731, "answer_id": 33421495, "question_id": 33403298, "link": "https://stackoverflow.com/questions/33403298/what-am-i-doing-wrong-in-shoulda-matchers/33421495#33421495", "title": "What am I doing wrong in Shoulda Matchers?", "body": "<p>Sorry you're having trouble. You need to load Rails before you require shoulda-matchers. The gem will only make model matchers available if it can see that ActiveRecord is available; if not, then you won't get them.</p>\n\n<p>It appears that you have rails_helper and spec_helper swapped. Typically in a fresh project with rspec-rails installed, rails_helper will load Rails and then require spec_helper. I would remove both files (or move them aside so you still have them) and then re-run <code>rails g rspec:install</code> to regenerate them. You'll still want to add the shoulda-matchers configuration block to rails_helper as you have done, but by that point ActiveRecord (and the rest of Rails) should be loaded.</p>\n"}], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 1, "accepted_answer_id": 33421495, "answer_count": 2, "score": 1, "last_activity_date": 1446141731, "creation_date": 1446074453, "question_id": 33403298, "link": "https://stackoverflow.com/questions/33403298/what-am-i-doing-wrong-in-shoulda-matchers", "title": "What am I doing wrong in Shoulda Matchers?", "body": "<p>In gem file I write this:</p>\n\n<pre><code>group :test do\n  gem 'rspec-rails'\n  gem 'shoulda-matchers', require: false\n  gem 'factory_girl'\nend\n</code></pre>\n\n<p>My rails_helper</p>\n\n<pre><code>require 'rspec/rails'\nrequire 'shoulda/matchers'\n</code></pre>\n\n<p>My spec_helper</p>\n\n<pre><code>require 'rails_helper'\n\n\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.include FactoryGirl::Syntax::Methods\n\n\n\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\n\n\n  Shoulda::Matchers.configure do |config|\n\n    config.integrate do |with|\n      # Choose a test framework:\n      with.test_framework :rspec\n\n      # Choose one or more libraries:\n      with.library :active_record\n      with.library :active_model\n      with.library :action_controller\n    end\n  end\n</code></pre>\n\n<p>And finally my test:</p>\n\n<pre><code>require 'spec_helper'\ndescribe Person do\n\n  it {should validate_presence_of(:identifier)}\nend\n</code></pre>\n\n<p>And I get nomethoderror</p>\n\n<pre><code>     Failure/Error: it {should validate_presence_of(:identifier)}\n NoMethodError:\n   undefined method `validate_presence_of' for #&lt;RSpec::ExampleGroups::Person:0x007fe58d13ca20&gt;\n</code></pre>\n\n<p>I simply don't get it. In other project the same way works. Here it doesn't. I have spent two days to fix this problem. Are there better alternatives of Shoulda Matchers in rails?</p>\n"}, {"tags": ["ruby", "resque", "resque-scheduler"], "answers": [{"tags": [], "owner": {"reputation": 8384, "user_id": 627408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/GO0oW.png?s=128&g=1", "display_name": "kreek", "link": "https://stackoverflow.com/users/627408/kreek"}, "is_accepted": false, "score": 1, "last_activity_date": 1446241893, "creation_date": 1446241893, "answer_id": 33445449, "question_id": 33402888, "link": "https://stackoverflow.com/questions/33402888/resque-scheduler-set-dynamic-to-first-run-at-a-specific-time/33445449#33445449", "title": "Resque scheduler set dynamic to first run at a specific time", "body": "<p>Didn't read the docs close enough :) you can set a <code>:cron</code> in dynamic schedules too:</p>\n\n<pre><code>name = 'send_emails'\nconfig = {}\nconfig[:class] = 'SendEmail'\nconfig[:args] = 'POC email subject'\nconfig[:cron] = '*/15 * * * *'\nconfig[:persist] = true\nResque.set_schedule(name, config)\n</code></pre>\n"}], "owner": {"reputation": 8384, "user_id": 627408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/GO0oW.png?s=128&g=1", "display_name": "kreek", "link": "https://stackoverflow.com/users/627408/kreek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446241893, "creation_date": 1446072391, "question_id": 33402888, "link": "https://stackoverflow.com/questions/33402888/resque-scheduler-set-dynamic-to-first-run-at-a-specific-time", "title": "Resque scheduler set dynamic to first run at a specific time", "body": "<p>You can schedule dynamically as below:</p>\n\n<pre><code>name = 'send_emails'\nconfig = {}\nconfig[:class] = 'SendEmail'\nconfig[:args] = 'POC email subject'\nconfig[:every] = ['1h', {first_in: 5.minutes}]\nconfig[:persist] = true\nResque.set_schedule(name, config)\n</code></pre>\n\n<p>What I'd like to do is schedule the first to run say at midnight (without having to calculate a first_in offset).</p>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "denormalization"], "comments": [{"owner": {"reputation": 158, "user_id": 4060938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FgcjK.jpg?s=128&g=1", "display_name": "Dan Myasnikov", "link": "https://stackoverflow.com/users/4060938/dan-myasnikov"}, "edited": false, "score": 0, "creation_date": 1446068964, "post_id": 33402149, "comment_id": 54595727, "body": "Have tried to look at service objects? You might want to create a service class that receives <code>post</code> as a parameter, and on <code>#export</code> action loops through it&#39;s comments.   Have a look at point #2: <a href=\"http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/\" rel=\"nofollow noreferrer\">blog.codeclimate.com/blog/2012/10/17/&hellip;</a>, it&#39;s pretty similar case to your application, just instead of web-view, you are going to use CSV-view"}], "answers": [{"comments": [{"owner": {"reputation": 10843, "user_id": 1439143, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/RxFne.png?s=128&g=1", "display_name": "Joshua Muheim", "link": "https://stackoverflow.com/users/1439143/joshua-muheim"}, "edited": false, "score": 0, "creation_date": 1446110290, "post_id": 33402289, "comment_id": 54610683, "body": "That&#39;s perfect. Thank you."}], "tags": [], "owner": {"reputation": 158, "user_id": 4060938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FgcjK.jpg?s=128&g=1", "display_name": "Dan Myasnikov", "link": "https://stackoverflow.com/users/4060938/dan-myasnikov"}, "is_accepted": true, "score": 1, "last_activity_date": 1446069272, "creation_date": 1446069272, "answer_id": 33402289, "question_id": 33402149, "link": "https://stackoverflow.com/questions/33402149/denormalize-rails-resource-with-associated-items-to-export-them-as-2-dimensional/33402289#33402289", "title": "Denormalize Rails resource with associated items to export them as 2-dimensional table (csv or xls)", "body": "<p>Actually I thought about a better approach. You can use comma gem: <a href=\"https://github.com/comma-csv/comma\" rel=\"nofollow\">https://github.com/comma-csv/comma</a>, - where you can specify has many relationship.</p>\n\n<pre><code># ... an association returning an array\n</code></pre>\n\n<p>All you need to do is to call:</p>\n\n<pre><code>Post.to_comma\n</code></pre>\n"}], "owner": {"reputation": 10843, "user_id": 1439143, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/RxFne.png?s=128&g=1", "display_name": "Joshua Muheim", "link": "https://stackoverflow.com/users/1439143/joshua-muheim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 33402289, "answer_count": 1, "score": 0, "last_activity_date": 1446069272, "creation_date": 1446068691, "question_id": 33402149, "link": "https://stackoverflow.com/questions/33402149/denormalize-rails-resource-with-associated-items-to-export-them-as-2-dimensional", "title": "Denormalize Rails resource with associated items to export them as 2-dimensional table (csv or xls)", "body": "<p>I have the following models:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :comments\n\n  # Fields title, body\nend\n\nclass Comment &lt; ActiveRecord::Base\n  belongs_to :post\n\n  # Fields name, content\nend\n</code></pre>\n\n<p>I need to export this to CSV, so I have to denormalize it, so for each comment, I have a data row with all the comment's fields, and all the associated post's fields, too. Or in other words: I want to make a multi-dimensional object two-dimensional (approving the fact that the associated data will be denormalized).</p>\n\n<p>The result would look something like this:</p>\n\n<pre><code>post_id, post_title,     post_body,         comment_id, comment_name, comment_content\n1,       the first post, some nice info..., 1,          tom,          cool stuff!\n1,       the first post, some nice info..., 2,          paul,         i hate it\n1,       the first post, some nice info..., 3,          vanessa,      are you serious?\n2,       the 2nd post,   other info,        4,          josh,         yeah very cool!\n2,       the 2nd post,   other info,        5,          eva,          whatever\n</code></pre>\n\n<p>What's the easiest way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "scope"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 2917386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443bde473849d58880b6c414e30172dc?s=128&d=identicon&r=PG", "display_name": "pgarber", "link": "https://stackoverflow.com/users/2917386/pgarber"}, "edited": false, "score": 0, "creation_date": 1446068565, "post_id": 33401956, "comment_id": 54595504, "body": "Thanks. Yes, using the contacts_new_path helper fixed the problem. Any ideas on why my old { controller: ..., action: ...} format causes problems?  Also, thanks for the advice on the routes format, and how it affects my path helper"}, {"owner": {"reputation": 8548, "user_id": 234944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/92fe0217757590fcb9600a253cb76277?s=128&d=identicon&r=PG", "display_name": "Benjamin Manns", "link": "https://stackoverflow.com/users/234944/benjamin-manns"}, "reply_to_user": {"reputation": 7, "user_id": 2917386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443bde473849d58880b6c414e30172dc?s=128&d=identicon&r=PG", "display_name": "pgarber", "link": "https://stackoverflow.com/users/2917386/pgarber"}, "edited": false, "score": 0, "creation_date": 1446068811, "post_id": 33401956, "comment_id": 54595635, "body": "I&#39;m not sure. Using <code>{ controller: ..., action: ... }</code> invokes <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing/UrlFor.html#method-i-url_for\" rel=\"nofollow noreferrer\">url_for</a>. Perhaps that plus some namespacing logic is affecting the namespace that&#39;s used for your URL. Unfortunately, I&#39;m not familiar enough to speak definitively."}], "tags": [], "owner": {"reputation": 8548, "user_id": 234944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/92fe0217757590fcb9600a253cb76277?s=128&d=identicon&r=PG", "display_name": "Benjamin Manns", "link": "https://stackoverflow.com/users/234944/benjamin-manns"}, "is_accepted": true, "score": 0, "last_activity_date": 1446067916, "creation_date": 1446067916, "answer_id": 33401956, "question_id": 33401831, "link": "https://stackoverflow.com/questions/33401831/rails-link-changes-another-link/33401956#33401956", "title": "Rails link changes another link", "body": "<p>I'm not 100% sure why this is happening, but I would suggest dropping <code>method: :get</code> from your link. I'd also suggest using the <code>contacts_new_path</code> helper instead of using <code>{ controller: ..., action: ... }</code>. Finally, you can define your route using the more standard <code>resource :contacts, only: :new</code> (which will change the method to <code>new_contact_path</code>).</p>\n\n<p>So, routes.rb</p>\n\n<pre><code>resource :contacts, only: :new\n</code></pre>\n\n<p>In your_template.html.erb</p>\n\n<pre><code>&lt;%= link_to 'GET STARTED', new_contact_path %&gt;\n&lt;%= link_to 'Sign in'.upcase, new_user_session_path %&gt;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 2917386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443bde473849d58880b6c414e30172dc?s=128&d=identicon&r=PG", "display_name": "pgarber", "link": "https://stackoverflow.com/users/2917386/pgarber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "accepted_answer_id": 33401956, "answer_count": 1, "score": 0, "last_activity_date": 1446067916, "creation_date": 1446067339, "last_edit_date": 1495541038, "question_id": 33401831, "link": "https://stackoverflow.com/questions/33401831/rails-link-changes-another-link", "title": "Rails link changes another link", "body": "<p>I have a Rails 4.1.6 application and use Devise for the 'user' model. The link to my sign in page works fine:</p>\n\n<pre><code>&lt;%= link_to 'Sign in'.upcase, new_user_session_path %&gt;\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>&lt;a href=\"/users/sign_in\"&gt;SIGN IN&lt;/a&gt;\n</code></pre>\n\n<p>However, adding a link to an action on another controller breaks the link to sign_in:</p>\n\n<pre><code>&lt;%= link_to( 'GET STARTED', {controller: :contacts, action: :new}, method: :get) %&gt;\n&lt;%= link_to 'Sign in'.upcase, new_user_session_path %&gt;\n</code></pre>\n\n<p>still produces the same HTML: </p>\n\n<pre><code>&lt;a data-method=\"get\" href=\"/contacts/new\"&gt;GET STARTED&lt;/a&gt; \n&lt;a href=\"/users/sign_in\"&gt;SIGN IN&lt;/a&gt;\n</code></pre>\n\n<p>But, the 'SIGN IN' link no longer works, with this error:</p>\n\n<pre><code>ActionController::UrlGenerationError at /users/sign_in\nNo route matches {:action=&gt;\"new\", :controller=&gt;\"devise/contacts\"}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/13675360/2917386\">This answer</a> is for a similar situation and tells me that 'Rails is looking for a partial scoped under Devise since this is the one under which you're rendering.' But, my scope understanding is weak and I'm still struggling with how to fix this.</p>\n\n<pre><code># relevant portion of routes.rb:\ndevise_for :users, :controllers =&gt; { registrations: 'registrations' }\nresources :users\nmatch '/contacts/new', to: 'contacts#new', via: 'get'\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1446066149, "post_id": 33401464, "comment_id": 54594347, "body": "How you style it depends upon what you want to do with style. Do you mean you want to add a class to the <code>form</code> element? Also, I don&#39;t think you need, <code>:html =&gt; { :class =&gt; &#39;title&#39; }</code>, for example, but simply, <code>:class =&gt; &#39;title&#39;</code> should suffice."}, {"owner": {"reputation": 353, "user_id": 4970776, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2d14085575df6f8b2d7af23434106cb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Gagne", "link": "https://stackoverflow.com/users/4970776/taylor-gagne"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1446066206, "post_id": 33401464, "comment_id": 54594379, "body": "Yes I want to add a class to the form element?"}, {"owner": {"reputation": 353, "user_id": 4970776, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2d14085575df6f8b2d7af23434106cb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Gagne", "link": "https://stackoverflow.com/users/4970776/taylor-gagne"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1446066279, "post_id": 33401464, "comment_id": 54594409, "body": "No I have not, but i&#39;ll give it a try now."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1446066364, "post_id": 33401464, "comment_id": 54594444, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/25557044/class-to-form-for-ruby-on-rails\">Class to form_for Ruby on Rails</a>"}, {"owner": {"reputation": 353, "user_id": 4970776, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2d14085575df6f8b2d7af23434106cb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Gagne", "link": "https://stackoverflow.com/users/4970776/taylor-gagne"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1446066546, "post_id": 33401464, "comment_id": 54594525, "body": "I tried that and it gave me an error message"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1446066642, "post_id": 33401464, "comment_id": 54594578, "body": "See the link I provided"}, {"owner": {"reputation": 353, "user_id": 4970776, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2d14085575df6f8b2d7af23434106cb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Gagne", "link": "https://stackoverflow.com/users/4970776/taylor-gagne"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1446066796, "post_id": 33401464, "comment_id": 54594646, "body": "Now I have the class on the form"}, {"owner": {"reputation": 353, "user_id": 4970776, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2d14085575df6f8b2d7af23434106cb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Gagne", "link": "https://stackoverflow.com/users/4970776/taylor-gagne"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1446067100, "post_id": 33401464, "comment_id": 54594779, "body": "How come I access the tags on the specific form components ? Like title or body"}], "answers": [{"tags": [], "owner": {"reputation": 241, "user_id": 4322949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8vYl.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/4322949/erica"}, "is_accepted": true, "score": 4, "last_activity_date": 1446094401, "creation_date": 1446094401, "answer_id": 33406183, "question_id": 33401464, "link": "https://stackoverflow.com/questions/33401464/how-to-style-a-form-for-in-rails/33406183#33406183", "title": "How to style a form_for in rails", "body": "<p>You can do something like this</p>\n\n<p><code>&lt;%= form_for @article do |t| %&gt;\n    &lt;%= t.text_field :title, :class =&gt; 'class_name' %&gt;</code></p>\n"}], "owner": {"reputation": 353, "user_id": 4970776, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b2d14085575df6f8b2d7af23434106cb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Gagne", "link": "https://stackoverflow.com/users/4970776/taylor-gagne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "closed_date": 1446113313, "accepted_answer_id": 33406183, "answer_count": 1, "score": 0, "last_activity_date": 1446094621, "creation_date": 1446065817, "last_edit_date": 1446094621, "question_id": 33401464, "link": "https://stackoverflow.com/questions/33401464/how-to-style-a-form-for-in-rails", "closed_reason": "Needs details or clarity", "title": "How to style a form_for in rails", "body": "<p>I'm new to ruby on rails and I need some help figuring out how to style a form I made.\nThis is the code for the form inside of my html file:</p>\n\n<pre><code> &lt;%= form_for @article do |t| %&gt;\n    &lt;%= t.text_field :title, :html =&gt; { :class =&gt; 'title' } %&gt;\n    &lt;%= t.text_area :body, :html =&gt; { :class =&gt; 'body' } %&gt;\n    &lt;%= t.submit 'Create', :html =&gt; { :class =&gt; 'create' } %&gt;\n</code></pre>\n\n\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise"], "comments": [{"owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "edited": false, "score": 0, "creation_date": 1446081834, "post_id": 33401384, "comment_id": 54600319, "body": "A simple solution may be to store a user&#39;s session token as a column on your users table, refreshing the session token any time a login event occurs. This way, a fresh login from the same user account will end the previous session and log them out."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "edited": false, "score": 0, "creation_date": 1446153864, "post_id": 33401384, "comment_id": 54638853, "body": "hmm thank you i might actually implement that!"}], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446065460, "creation_date": 1446065460, "question_id": 33401384, "link": "https://stackoverflow.com/questions/33401384/how-to-restrict-two-people-log-in-with-the-same-user-credentials-at-any-given-ti", "title": "How to restrict two people log in with the same user credentials at any given time - Rails", "body": "<p>I am researching on how to add protection to an existing rails app. The protection i need is to restrict two people log in with the same user credentials at any given time.</p>\n\n<p>What would be the best approach around this?</p>\n\n<p>I haven't seem to find any gem or something in particular.</p>\n\n<p>Note that i am not using Devise but custom user authentication so please do not suggest anything related to devise.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "rolify", "searchkick"], "answers": [{"comments": [{"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 1, "creation_date": 1511216087, "post_id": 33401735, "comment_id": 81757773, "body": "FYI, <code>records</code> loses Elasticsearch&#39;s <a href=\"https://github.com/ankane/searchkick/issues/480#issuecomment-127899183\" rel=\"nofollow noreferrer\">scoring</a>"}], "tags": [], "owner": {"reputation": 8548, "user_id": 234944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/92fe0217757590fcb9600a253cb76277?s=128&d=identicon&r=PG", "display_name": "Benjamin Manns", "link": "https://stackoverflow.com/users/234944/benjamin-manns"}, "is_accepted": true, "score": 0, "last_activity_date": 1446067038, "creation_date": 1446067038, "answer_id": 33401735, "question_id": 33401339, "link": "https://stackoverflow.com/questions/33401339/searchkick-with-rolify/33401735#33401735", "title": "Searchkick with Rolify", "body": "<p>Try using Searchkick/elaticsearch-rails's <code>records</code> feature to do this.</p>\n\n<pre><code>Task.search(\"foo\").records.with_role(:viewer, current_user)\n</code></pre>\n\n<p><code>records</code> converts the results into essentially a <code>where(id: [ids, matching, the, elasticsearch, query])</code> scope that you can add other queries onto.</p>\n"}], "owner": {"reputation": 17, "user_id": 5334509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ImLy.jpg?s=128&g=1", "display_name": "ionylion", "link": "https://stackoverflow.com/users/5334509/ionylion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33401735, "answer_count": 1, "score": 0, "last_activity_date": 1446067038, "creation_date": 1446065282, "question_id": 33401339, "link": "https://stackoverflow.com/questions/33401339/searchkick-with-rolify", "title": "Searchkick with Rolify", "body": "<p>I have a Rails 4 app and I am trying to search my Task model using the <a href=\"http://github.com/ankane/searchkick\" rel=\"nofollow\">Searchkick</a> gem. But, I only want the search results to include Tasks that the current user has a certain <a href=\"http://github.com/RolifyCommunity/rolify\" rel=\"nofollow\">Rolify</a> role for. Basically, the user can't search for other user's Tasks.</p>\n\n<p>The Rolify gem has a method for getting the Tasks that the current user has a certain role for. </p>\n\n<pre><code>Task.with_role(:viewer, current_user) #=&gt; Tasks where the current user has a viewer role.\n</code></pre>\n\n<p>I cannot figure out how to filter the Searchkick results to only search the Tasks returned in the code above. I want to do something like this,</p>\n\n<pre><code>Task.with_role(:viewer, current_user).search(\"foo\") #=&gt; Returns all Tasks that match foo\n</code></pre>\n\n<p>But, it includes all Tasks that match <em>foo</em> instead of just the current user's Tasks that match <em>foo</em>. I know that there is a UsersRoles table that Rolify uses to relate the users and roles, but I don't know how to relate that to the Task model's roles.</p>\n\n<p>Is it possible to search the Task model's roles for a certain role that belongs to the current user all in a Searchkick query?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "comments": [{"owner": {"reputation": 3226, "user_id": 4449035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-cDrTIBwolm0/AAAAAAAAAAI/AAAAAAAANmE/OK9Bjdfpl7g/photo.jpg?sz=128", "display_name": "Brady Dowling", "link": "https://stackoverflow.com/users/4449035/brady-dowling"}, "edited": false, "score": 0, "creation_date": 1446065018, "post_id": 33401157, "comment_id": 54593694, "body": "There are some issues with C9 in the US right now. For updates on that situation, see <a href=\"http://status.c9.io\" rel=\"nofollow noreferrer\">status.c9.io</a>. This may or may not be related."}, {"owner": {"reputation": 1, "user_id": 5500175, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156231137470204/picture?type=large", "display_name": "Andre-Ivor Wills", "link": "https://stackoverflow.com/users/5500175/andre-ivor-wills"}, "reply_to_user": {"reputation": 3226, "user_id": 4449035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-cDrTIBwolm0/AAAAAAAAAAI/AAAAAAAANmE/OK9Bjdfpl7g/photo.jpg?sz=128", "display_name": "Brady Dowling", "link": "https://stackoverflow.com/users/4449035/brady-dowling"}, "edited": false, "score": 0, "creation_date": 1446065373, "post_id": 33401157, "comment_id": 54593892, "body": "I just tweeted at you, asking if about how the VM&#39;s cache code. I love using your dev environment, and would continue if this is resolved quickly. Hopefully it is. Thank you for the response"}, {"owner": {"reputation": 3226, "user_id": 4449035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-cDrTIBwolm0/AAAAAAAAAAI/AAAAAAAANmE/OK9Bjdfpl7g/photo.jpg?sz=128", "display_name": "Brady Dowling", "link": "https://stackoverflow.com/users/4449035/brady-dowling"}, "edited": false, "score": 0, "creation_date": 1446151732, "post_id": 33401157, "comment_id": 54637796, "body": "This should be fixed now. If it is not, please contact support@c9.io :)"}], "owner": {"reputation": 1, "user_id": 5500175, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156231137470204/picture?type=large", "display_name": "Andre-Ivor Wills", "link": "https://stackoverflow.com/users/5500175/andre-ivor-wills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446064634, "creation_date": 1446064634, "question_id": 33401157, "link": "https://stackoverflow.com/questions/33401157/rails-routing-issue-using-c9-io-as-dev", "title": "Rails Routing Issue (using c9.io as dev)", "body": "<p>So I have a weird routing issue that I cannot seem to solve, any advice would be great.</p>\n\n<p>This is the process:</p>\n\n<ol>\n<li><p>Create new account</p></li>\n<li><p>Submit: Username, email, password, password confirmation</p></li>\n</ol>\n\n<p>Now two things have happened, and I cant tell why the difference occurs.\nFirst; This is what it should do.</p>\n\n<ol start=\"3\">\n<li>Routes to the next stage of capturing more User related details, Busines Name, Contact No, etc.\n\n<ul>\n<li>the 2nd page is users/id/edit (so i can finish the user account details)</li>\n<li>this is correct, and works</li>\n</ul></li>\n</ol>\n\n<p>Sometimes, with the same user details for stage one. It does this:\nRoutes to users/show/id</p>\n\n<p>So what I understand at the moment, when it fails on step 2, the account creation, the controller tells the system to render /users/show</p>\n\n<p>Now that's not meant to happen, as  I have the controller setup that if @users.save fails (in the Create method for user controller), the system should render 'new' (users/new) with an error message being displayed. (Like, password doesn't meet the validation requirements). But, it doesn't do this, its routing to users/show. </p>\n\n<p>Once upon a time, at the early stage, @users.save if successful, would route to users/show (used as a test, to view the created account details) but this was in version 1. And that route hasn't existed in weeks. But, even then, if i check the database for the saved user details, its not there. So the route to users/show on success, isn't being pulled when the save is a success. Meaning its rendering on the failure.</p>\n\n<p>It gets more interesting though, with the fact that I can enter the EXACT SAME details (Name, Email, Password) and it works, but then sometimes it doesn't.</p>\n\n<p>Also, I reset the migration database when trying to create the same account to test it. So its not breaking at the Unique validation. And even when I do break it with that, I get an error saying \"Email already in use\" - which is exactly what I want it to do.</p>\n\n<p>More information:\nI'm using a Cloud Based dev environment (www.c9.io).\nThe problem happens 1 in 3 times - without changing the input data.</p>\n\n<p>Suspicions: The VM being hosted to support my environment (By c9) is not pulling the live code through as it should, and some old controller code is being initialized instead. So it's operating on 50% new 50% old code.</p>\n\n<p>Or, am I missing something with how Rails uses REST/Nested routing.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446066679, "post_id": 33400821, "comment_id": 54594599, "body": "Assuming that a regex is required makes this what is referred to as an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-Y problem</a>. There may be non-regex solutions, so just say you want to extract the city names."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446066768, "post_id": 33400821, "comment_id": 54594633, "body": "Of crucial importance is the line format. You said &quot;Here&#39;s how the strings are formatted&quot;. If all of the strings have two commas per line, with the city name and nothing else between (or if the last two commas in the line surround the city name), the solution is easy, so you should state whether that&#39;s the case. If it isn&#39;t, you need to be precise in describing the possible variations in line format. Please elaborate by editing, rather than trying to explain in comments."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1446065923, "last_edit_date": 1446065923, "creation_date": 1446064830, "answer_id": 33401212, "question_id": 33400821, "link": "https://stackoverflow.com/questions/33400821/ruby-use-regex-to-find-city-name-in-string/33401212#33401212", "title": "Ruby - Use Regex to find city name in string", "body": "<p>If:</p>\n\n<ul>\n<li>city names are always bracketed by commas and</li>\n<li>the comma following the city name is the last comma in the line </li>\n</ul>\n\n<p>then you can write:</p>\n\n<pre><code>str.split(',')[-2].strip\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>str = \"City of Covina Police Department, Covina, CA 91728\"\nstr.split(',')[-2].strip #=&gt; \"Covina\" \n\nstr = \"City of Covina, Police Department, Covina, CA 91728\"\nstr.split(',')[-2].strip #=&gt; \"Covina\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446065217, "post_id": 33401268, "comment_id": 54593815, "body": "I don&#39;t live in the US either, but I think the zip codes can be <code>98230</code> or <code>98230-1234</code>, so you might want to add <code>(?:-\\d{4})?</code>. Also, the state abbreviations are always two uppercase letters, so maybe <code>[A-Z]{2}</code>."}], "tags": [], "owner": {"reputation": 3976, "user_id": 2232045, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/M3GGC.jpg?s=128&g=1", "display_name": "webduvet", "link": "https://stackoverflow.com/users/2232045/webduvet"}, "is_accepted": false, "score": 0, "last_activity_date": 1446065024, "creation_date": 1446065024, "answer_id": 33401268, "question_id": 33400821, "link": "https://stackoverflow.com/questions/33400821/ruby-use-regex-to-find-city-name-in-string/33401268#33401268", "title": "Ruby - Use Regex to find city name in string", "body": "<p>I'm not from US so I have no idea wether the state code is always in format XX and zip code alway 5 digits, but based on that assumption. here it is</p>\n\n<pre><code>/\\w+(?=, \\w{2} \\d{5}$)/\n</code></pre>\n\n<p><code>(?=...$)</code> is positive lookahead for the end of the string</p>\n\n<p><code>\\w{2}</code> state code</p>\n\n<p><code>\\d{5}</code> zip code</p>\n"}], "owner": {"reputation": 279, "user_id": 2511012, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/BKNgi.jpg?s=128&g=1", "display_name": "Eli", "link": "https://stackoverflow.com/users/2511012/eli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 33401212, "answer_count": 2, "score": 0, "last_activity_date": 1446065923, "creation_date": 1446063432, "question_id": 33400821, "link": "https://stackoverflow.com/questions/33400821/ruby-use-regex-to-find-city-name-in-string", "title": "Ruby - Use Regex to find city name in string", "body": "<p>I'm trying to figure out how to use regex to pull city names from an array of strings. Here's how the strings are formatted:</p>\n\n<pre><code>City of Covina Police Department, Covina, CA 91728\n</code></pre>\n\n<p>Right now I'm pulling state abbreviations by looping through each string, then looping through an array of US state abbreviations to see if the string includes one of them, like so:</p>\n\n<pre><code>states = [my array of states]\nstring = the current string from the array\nstates.each do |state|\n    if string.include?(state)\n        counter[state] += 1\n    end\nend\n</code></pre>\n\n<p>Based on how the strings are formatted, how would I use Regex to find the city in each string? I'm thinking that because I've found the state, and because the city is always immediately preceding the state, I should be able to use this to find it, but I'm not that well versed in Regex so I'm having trouble with the answer. Any ideas?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 8486, "user_id": 239816, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ecdb231117dda838340bfcbb8873d28e?s=128&d=identicon&r=PG", "display_name": "Paul Cantrell", "link": "https://stackoverflow.com/users/239816/paul-cantrell"}, "edited": false, "score": 0, "creation_date": 1446064324, "post_id": 33400570, "comment_id": 54593333, "body": "Note that it is impossible (in the strict mathematical sense!) to handle <i>nested</i> parentheses using regular expressions. <a href=\"http://stackoverflow.com/a/133684/239816\">stackoverflow.com/a/133684/239816</a>"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 8486, "user_id": 239816, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ecdb231117dda838340bfcbb8873d28e?s=128&d=identicon&r=PG", "display_name": "Paul Cantrell", "link": "https://stackoverflow.com/users/239816/paul-cantrell"}, "edited": false, "score": 0, "creation_date": 1446064567, "post_id": 33400570, "comment_id": 54593466, "body": "@PaulCantrell: what is commonly called &quot;regular expression&quot; or &quot;regex&quot; is different of what is called &quot;regular expression&quot; in computer science, and this tool doesn&#39;t have this kind of limitations (in particular in ruby)."}, {"owner": {"reputation": 8486, "user_id": 239816, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ecdb231117dda838340bfcbb8873d28e?s=128&d=identicon&r=PG", "display_name": "Paul Cantrell", "link": "https://stackoverflow.com/users/239816/paul-cantrell"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1446064852, "post_id": 33400570, "comment_id": 54593600, "body": "@CasimiretHippolyte: You\u2019re right: since the questioner did specify Ruby, which I didn\u2019t notice at first, they can use the <code>\\g</code> extension."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446067225, "post_id": 33400570, "comment_id": 54594839, "body": "Your example string needs to be bracketed by single or double quotes. Everybody knows what you mean, of course, but you should know that some will downvote for such an omission.  Also, whenever you give an example it&#39;s helpful to assign each input object to a variable (e.g., <code>str = &quot;foo,...goodbye&quot;</code>). That way, readers can refer to the variables (<code>str</code>) in answers and comments without having to define them."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1490997398, "post_id": 33400570, "comment_id": 73377577, "body": "If you found either answer helpful please consider selecting one."}], "answers": [{"comments": [{"owner": {"reputation": 772, "user_id": 1555302, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8572c8f26f2029b3dfbe590706b5c666?s=128&d=identicon&r=PG", "display_name": "bjlevine", "link": "https://stackoverflow.com/users/1555302/bjlevine"}, "edited": false, "score": 0, "creation_date": 1446482233, "post_id": 33400740, "comment_id": 54749880, "body": "This seems to work in that it matches the pattern.  However, I&#39;m having trouble defining the capture groups such that I can capture the fields (as mentioned in my original post)"}], "tags": [], "owner": {"reputation": 105827, "user_id": 3037257, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nq6Zo.jpg?s=128&g=1", "display_name": "Pranav C Balan", "link": "https://stackoverflow.com/users/3037257/pranav-c-balan"}, "is_accepted": true, "score": 2, "last_activity_date": 1491112485, "last_edit_date": 1491112485, "creation_date": 1446063173, "answer_id": 33400740, "question_id": 33400570, "link": "https://stackoverflow.com/questions/33400570/regex-to-parse-a-comma-separated-list-excluding-content-within-parentheses/33400740#33400740", "title": "Regex to parse a comma-separated list excluding content within parentheses", "body": "<p>Use regex </p>\n\n<pre><code>[^,(]*(?:\\([^)]*\\))*[^,]*\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/eA8mX2/1\" rel=\"nofollow noreferrer\">Regex explanation here</a></strong></p>\n\n<p><img src=\"https://www.debuggex.com/i/-YyGN9j92phaMEjg.png\" alt=\"Regular expression visualization\"></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1455159560, "last_edit_date": 1455159560, "creation_date": 1446069511, "answer_id": 33402339, "question_id": 33400570, "link": "https://stackoverflow.com/questions/33400570/regex-to-parse-a-comma-separated-list-excluding-content-within-parentheses/33402339#33402339", "title": "Regex to parse a comma-separated list excluding content within parentheses", "body": "<p>Here's a non-regex solution that makes use of Ruby's little-used <a href=\"http://nithinbekal.com/posts/ruby-flip-flop\" rel=\"nofollow\">flip-flop operator</a>:</p>\n\n<pre><code>str = \"foo,baz(some,other,stuff),hello,goodbye\"\n\nstr.split(',').chunk { |s| s.include?('(') .. s.include?(')') ? true : false }.\n               flat_map { |tf, a| tf ? a.join(' ') : a }\n  #=&gt; [\"foo\", \"baz(some\", \"other\", \"stuff)\", \"hello\", \"goodbye\"]\n</code></pre>\n\n<p>The steps:</p>\n\n<pre><code>arr = str.split(',')\n  #=&gt; [\"foo\", \"baz(some\", \"other\", \"stuff)\", \"hello\", \"goodbye\"] \n\nenum = arr.chunk { |s| s.include?('(') .. s.include?(')') ? true : false }\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x007fdf9d01d2e8&gt;:each&gt; \n</code></pre>\n\n<p>Aside: the <code>flip-flop</code> operator must be within an <code>if</code> statement, so this cannot be simplified to:</p>\n\n<pre><code>enum = arr.chunk { |s| s.include?('(') .. s.include?(')') }\n</code></pre>\n\n<p>We can convert this enumerator to an array to see the values it will pass on to <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow\">Enumerable#flat_map</a>:</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[false, [\"foo\"]], [true, [\"baz(some\", \"other\", \"stuff)\"]],\n  #    [false, [\"hello\", \"goodbye\"]]] \n</code></pre>\n\n<p>Lastly:</p>\n\n<pre><code>enum.flat_map { |tf, a| tf ? a.join(' ') : a }\n  #=&gt; [\"foo\", \"baz(some\", \"other\", \"stuff)\", \"hello\", \"goodbye\"]\n</code></pre>\n"}], "owner": {"reputation": 772, "user_id": 1555302, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8572c8f26f2029b3dfbe590706b5c666?s=128&d=identicon&r=PG", "display_name": "bjlevine", "link": "https://stackoverflow.com/users/1555302/bjlevine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 33400740, "answer_count": 2, "score": 2, "last_activity_date": 1491112485, "creation_date": 1446062568, "last_edit_date": 1446159715, "question_id": 33400570, "link": "https://stackoverflow.com/questions/33400570/regex-to-parse-a-comma-separated-list-excluding-content-within-parentheses", "title": "Regex to parse a comma-separated list excluding content within parentheses", "body": "<p>In Ruby:</p>\n\n<p>Given the following example string:</p>\n\n<pre><code>str = 'foo,baz(some,other,stuff),hello,goodbye'\n</code></pre>\n\n<p>I would like to parse the string such that the commas appearing with the parens are not considered to be delimiters. So the following fields would be captured given this example:</p>\n\n<ol>\n<li>foo</li>\n<li>baz(some,other,stuff)</li>\n<li>hello</li>\n<li>goodbye</li>\n</ol>\n\n<p>Help much appreciated!</p>\n"}, {"tags": ["ruby", "fog"], "answers": [{"comments": [{"owner": {"reputation": 1393, "user_id": 1118848, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bIbcR.jpg?s=128&g=1", "display_name": "jer-k", "link": "https://stackoverflow.com/users/1118848/jer-k"}, "edited": false, "score": 0, "creation_date": 1484256774, "post_id": 35900739, "comment_id": 70448166, "body": "This is very poorly documented. You&#39;re a lifesaver!"}], "tags": [], "owner": {"reputation": 23, "user_id": 2674302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afba7a5f1afed2e86fed4431d0ae4c8?s=128&d=identicon&r=PG", "display_name": "Jonny-W", "link": "https://stackoverflow.com/users/2674302/jonny-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1457551321, "creation_date": 1457551321, "answer_id": 35900739, "question_id": 33400207, "link": "https://stackoverflow.com/questions/33400207/setting-acl-for-a-pre-signed-object-url-with-fog/35900739#35900739", "title": "Setting ACL for a Pre Signed Object URL with Fog", "body": "<p>You have to list these extra parameters (eg. x-amz-acl, Content-Type) under the \"query\" key of the options hash.</p>\n\n<p>So your example would be.</p>\n\n<pre><code>bucket = \"...\"\nobject = \"demo.jpg\"\nexpires = Integer(Time.now + 4.hours)\nheaders = {}\nquery = {\"x-amz-acl\" =&gt; \"public-read\"}\noptions = { path_style: true, query: query }\nfog.put_object_url(bucket, object, expires, headers, options)\n</code></pre>\n\n<p>You have probably solved this by now but incase anyone else is stuck on this, as the lack of surrounding documentation does not make it very straight forward to implement.</p>\n"}], "owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457551321, "creation_date": 1446061362, "question_id": 33400207, "link": "https://stackoverflow.com/questions/33400207/setting-acl-for-a-pre-signed-object-url-with-fog", "title": "Setting ACL for a Pre Signed Object URL with Fog", "body": "<p>I'm generating a fog pre-signed URL for AWS using the following snippet:</p>\n\n<pre><code>bucket = \"...\"\nobject = \"demo.jpg\"\nexpires = Integer(Time.now + 4.hours)\nheaders = {}\noptions = { path_style: true }\nfog.put_object_url(bucket, object, expires, headers, options)\n</code></pre>\n\n<p>This works great - except that the uploaded objects aren't accessible to the public. How can a public-read access control list (ACL) be applied to the upload path?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1446060473, "post_id": 33399852, "comment_id": 54591221, "body": "They&#39;re instance vars of the environment they&#39;re running in, here Selenium. Selenium scripts don&#39;t run in isolation: <a href=\"http://elementalselenium.com/tips/7-use-a-page-object\" rel=\"nofollow noreferrer\">elementalselenium.com/tips/7-use-a-page-object</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41223, "user_id": 175836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3b5a5015d8459c645abe6e906b9e77b?s=128&d=identicon&r=PG", "display_name": "randombits", "link": "https://stackoverflow.com/users/175836/randombits"}, "edited": false, "score": 0, "creation_date": 1446060537, "post_id": 33399898, "comment_id": 54591265, "body": "cool, I see. so the author is simply taking advantage of scoping it within the entire <code>main</code> object as a way of using a global variable across the rest of his script I guess."}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "reply_to_user": {"reputation": 41223, "user_id": 175836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3b5a5015d8459c645abe6e906b9e77b?s=128&d=identicon&r=PG", "display_name": "randombits", "link": "https://stackoverflow.com/users/175836/randombits"}, "edited": false, "score": 0, "creation_date": 1446060580, "post_id": 33399898, "comment_id": 54591290, "body": "Yes. These are definitely global vars in sheep&#39;s clothing."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 4, "last_activity_date": 1446060935, "last_edit_date": 1446060935, "creation_date": 1446060456, "answer_id": 33399898, "question_id": 33399852, "link": "https://stackoverflow.com/questions/33399852/symbol-before-var-name-in-ruby-script/33399898#33399898", "title": "@ symbol before var name in Ruby script", "body": "<p>Those variables become instance variables in the scope of the <code>main</code> object. They will be available inside other methods also defined at the global scope. Local variables defined within methods at the global scope would go out of scope as soon as the method returned.</p>\n\n<p>Illustration:</p>\n\n<pre><code>def foo\n  lvar = 1\n  @ivar = 2\nend\n\ndef bar\n  puts @ivar # will print 2 after foo() is called\n  puts lvar  # will throw NameError\nend\n\n@ivar # =&gt; nil\nfoo   # initializes @ivar\n@ivar # =&gt; 2\nbar   # prints 2, throws NameError\nlvar  # throws NameError\n</code></pre>\n"}], "owner": {"reputation": 41223, "user_id": 175836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3b5a5015d8459c645abe6e906b9e77b?s=128&d=identicon&r=PG", "display_name": "randombits", "link": "https://stackoverflow.com/users/175836/randombits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 33399898, "answer_count": 1, "score": 2, "last_activity_date": 1446060935, "creation_date": 1446060303, "question_id": 33399852, "link": "https://stackoverflow.com/questions/33399852/symbol-before-var-name-in-ruby-script", "title": "@ symbol before var name in Ruby script", "body": "<p>I'm not entirely sure how to Google this question, so I come here with an example. I'm looking at a selenium script that has an excerpt like the following:</p>\n\n<pre><code>def setup\n  @starting_url = \"https://www.example.com\"\n  @restricted_url = \"https://www.example.com/restricted\"\n  @user_email = \"foo@bar.com\"\n  @user_password = \"notarealpassword\"\n  @headless_mode = false\n  @page_timeout = 15 # seconds\n  @log_file = 'log/development.log'\n  @lineup_file = 'data/lineup1.csv'\n  ... more code\nend\n</code></pre>\n\n<p>My question is, why does every variable here get prefixed with an <code>@</code> symbol? This method is not part of a class. It is being written in the global scope. I understand the variables have significance in with an <code>@</code> symbol in the case of an explicit class, but what about here?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "redis", "sidekiq"], "comments": [{"owner": {"reputation": 1889, "user_id": 2658162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cAOBQ.png?s=128&g=1", "display_name": "JRD", "link": "https://stackoverflow.com/users/2658162/jrd"}, "edited": false, "score": 0, "creation_date": 1446060252, "post_id": 33399617, "comment_id": 54591101, "body": "This seems like it could be done in 1 insert statement, bypassing all that other architecture. <code>INSERT INTO report_helper SELECT ... FROM auto_parts JOIN stats ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1446060007, "creation_date": 1446060007, "answer_id": 33399763, "question_id": 33399617, "link": "https://stackoverflow.com/questions/33399617/scaling-a-ruby-script-to-store-data-in-mysql-using-sidekiq/33399763#33399763", "title": "Scaling a ruby script to store data in MySQL using sidekiq?", "body": "<blockquote>\n  <p>I figure that a simple flagging with a 1 or 0 could work but adding a last modified_date or added_date is probably more effective?</p>\n</blockquote>\n\n<p>You're micro-optimizing here. Prematurely, I might add.</p>\n\n<blockquote>\n  <p>I access sales stats via an API provided by the company</p>\n</blockquote>\n\n<p>Any possible performance gains from those SQL tweaks are nothing compared to cost of those API calls.</p>\n"}], "owner": {"reputation": 1627, "user_id": 1114330, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/be3675761e226b08eced3d347f6708a1?s=128&d=identicon&r=PG", "display_name": "lcm", "link": "https://stackoverflow.com/users/1114330/lcm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446060007, "creation_date": 1446059524, "question_id": 33399617, "link": "https://stackoverflow.com/questions/33399617/scaling-a-ruby-script-to-store-data-in-mysql-using-sidekiq", "title": "Scaling a ruby script to store data in MySQL using sidekiq?", "body": "<p>I have a script that works fine on a few thousand records and I am starting to learn sidekiq to help run it on millions of records periodically. </p>\n\n<p>I have two tables; a table full of auto parts and another table with sales stats in it. I access sales stats via an API provided by the company, my script grabs a line from the auto parts table and requests data from the parts stats API and stores it in another table used for reporting alongside another dataset. </p>\n\n<p>What I am wondering is, when using sidekiq, what would be the best way to flag records in my auto parts table to know that they have been processed?</p>\n\n<p>I figure that a simple flagging with a 1 or 0 could work but adding a last modified_date or added_date is probably more effective?</p>\n\n<p>Which option would be best to process all records as quickly as possible  using Ruby, Sidekiq and MySQL?</p>\n\n<p>I know that running into insert issues is MySQL is one thing that we have been looking into but would love some advice or links to help us out. </p>\n\n<p>I hope all is clear. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1446059414, "post_id": 33399347, "comment_id": 54590606, "body": "you have to check the &#39;Content-Type&#39; in <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-headers\" rel=\"nofollow noreferrer\">request headers</a>."}], "answers": [{"comments": [{"owner": {"reputation": 6882, "user_id": 2567859, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/kJ7FA.jpg?s=128&g=1", "display_name": "Dreams", "link": "https://stackoverflow.com/users/2567859/dreams"}, "edited": false, "score": 0, "creation_date": 1446088025, "post_id": 33399645, "comment_id": 54601867, "body": "Thanks for better method. Now I know there is a request object under action controller so we can use it, right?"}], "tags": [], "owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "is_accepted": false, "score": 3, "last_activity_date": 1446059595, "creation_date": 1446059595, "answer_id": 33399645, "question_id": 33399347, "link": "https://stackoverflow.com/questions/33399347/how-this-syntax-to-check-the-request-format/33399645#33399645", "title": "How this syntax to check the request format?", "body": "<p>try something like:</p>\n\n<pre><code>protect_from_forgery with: :null_session, if: :json_request?\n\nprotected\n\ndef json_request?\n  request.format.json?\nend\n</code></pre>\n"}], "owner": {"reputation": 6882, "user_id": 2567859, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/kJ7FA.jpg?s=128&g=1", "display_name": "Dreams", "link": "https://stackoverflow.com/users/2567859/dreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1696, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446059595, "creation_date": 1446058520, "question_id": 33399347, "link": "https://stackoverflow.com/questions/33399347/how-this-syntax-to-check-the-request-format", "title": "How this syntax to check the request format?", "body": "<p>For my rails API, I need to put some code as blow to make post request successfully.(I google it).</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception \n  protect_from_forgery with: :null_session, :if =&gt; Proc.new { |c| c.request.format == 'application/json' }\nend\n</code></pre>\n\n<p>My question is, how \"c.request.format\" know the format is json or not?\nWhere did it check?Something relate to Proc.new??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446059163, "post_id": 33399193, "comment_id": 54590457, "body": "Only use quote formatting for content you are copying from some other source. If you are quoting someone you need to provide appropriate attribute information."}, {"owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446059295, "post_id": 33399193, "comment_id": 54590536, "body": "@theTinMan Oops, I&#39;ve now removed the quote formatting"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1446060086, "post_id": 33399193, "comment_id": 54591001, "body": "I don&#39;t think believe associations support the use of array columns like this"}], "answers": [{"tags": [], "owner": {"reputation": 19544, "user_id": 317989, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cc8d0c8db8ad0ff2ed65ff3f5a56dd6?s=128&d=identicon&r=PG", "display_name": "house9", "link": "https://stackoverflow.com/users/317989/house9"}, "is_accepted": true, "score": 0, "last_activity_date": 1446060618, "creation_date": 1446060618, "answer_id": 33399955, "question_id": 33399193, "link": "https://stackoverflow.com/questions/33399193/selecting-from-array-of-ids-via-includes/33399955#33399955", "title": "Selecting from array of id&#39;s via includes", "body": "<p>Don't use an array data type for prices product_id, just use an integer and have a separate record for each store/product combo</p>\n\n<p>Then try using has_one through for price</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  belongs_to :store\n  has_one :price, through: :store\n</code></pre>\n\n<p>In your controller try preloads instead of includes, this should generate 2 queries, one for products and one for prices with the correct where clause</p>\n\n<pre><code>@products = Product.where(store_id: params[:id]).preload(:price)\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 2922050, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3b61e298d4e2244a8283daa61a311b4?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Girard", "link": "https://stackoverflow.com/users/2922050/jon-girard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 33399955, "answer_count": 1, "score": 2, "last_activity_date": 1446060618, "creation_date": 1446058039, "last_edit_date": 1446059394, "question_id": 33399193, "link": "https://stackoverflow.com/questions/33399193/selecting-from-array-of-ids-via-includes", "title": "Selecting from array of id&#39;s via includes", "body": "<p>Not sure how to fix an issue I'm having with selecting an individual\nid from an array.</p>\n\n<p>I have a model for stores, products, and prices. Stores have many\n(has_many) products, and products have one (has_one) price per store.\nI'm seeding the DB with CSV data. My app primarily functions as an API only.</p>\n\n<p>Prices.csv (where products with ids: 7 and 8 both share the same price\nof $4.25 in store 3):</p>\n\n<pre><code>amount,product_id,store_id\n\"3.49\",\"{6}\",\"3\"\n\"4.25\",\"{7,8}\",\"3\"\n</code></pre>\n\n<p>create_prices.rb:</p>\n\n<pre><code>create_table :prices do |t|\n...\n     t.integer :product_id, array: true, default: []\n... etc\nend\n</code></pre>\n\n<p>The problem comes in my query when I attempt to include the price\nassociation, I get an error stating:</p>\n\n<pre><code>ActiveRecord::StatementInvalid\n(PG::UndefinedFunction: ERROR:  operator does not exist: integer[] =\ninteger LINE 1: ...LEFT OUTER JOIN \"prices\" ON \"prices\".\"product_id\" =\n\"product...\n</code></pre>\n\n<p>I believe the problem has something to do with the includes for prices not being formatted properly to handle the array?</p>\n\n<p>Products Controller:</p>\n\n<pre><code>class API::ProductsController &lt; ApplicationController\n@products = Product.where(\"products.store_id @&gt; '{?}'\", params[:id].to_i).includes(:price).where('prices.store_id = ?', params[:id]).references(:prices).limit(params[:max])\nend\n</code></pre>\n\n<p>Product.rb model:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n    belongs_to :store\n  has_one :price\n\ndef as_json(options)\n    super(:only =&gt; [:id, :name, :description, :image, :weight, :store_id],\n      :include =&gt; {\n            :price =&gt; {:only =&gt; [:amount, :store_id]}\n          }\n    )\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "edited": false, "score": 0, "creation_date": 1446058706, "post_id": 33399059, "comment_id": 54590189, "body": "Replace <code>puts a</code> with another <code>.each</code> call, this time with <code>a.each</code> instead of <code>array.each</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446072921, "post_id": 33399219, "comment_id": 54597431, "body": "I initially missed your comment, <code>#or just: p a</code>. That would seem to be the better (and more conventional) way, as it does not require the creation of a new object."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446073907, "post_id": 33399219, "comment_id": 54597861, "body": "@CarySwoveland <code>p</code> just calls <code>inspect</code>. AFAIK it creates a new String."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 3, "last_activity_date": 1446058910, "last_edit_date": 1446058910, "creation_date": 1446058149, "answer_id": 33399219, "question_id": 33399059, "link": "https://stackoverflow.com/questions/33399059/iterating-through-each-array-in-array-of-arrays/33399219#33399219", "title": "Iterating through each array in array of arrays", "body": "<p>The <code>to_s</code> method of Array gives a string representation. </p>\n\n<pre><code>array = [ [1,2,3],\n          [4,5,6],\n          [7,8,9]]\n\narray.each do |a|  \n  puts a.to_s  #or just: p a\nend\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>[1, 2, 3]\n[4, 5, 6]\n[7, 8, 9]\n</code></pre>\n"}], "owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446059012, "creation_date": 1446057597, "last_edit_date": 1446059012, "question_id": 33399059, "link": "https://stackoverflow.com/questions/33399059/iterating-through-each-array-in-array-of-arrays", "title": "Iterating through each array in array of arrays", "body": "<p>I have an array of arrays:</p>\n\n<pre><code>array = [\n          [1,2,3],\n          [4,5,6],\n          [7,8,9]\n        ]\n</code></pre>\n\n<p>How would I iterate over each array and print them out individually, without using <code>map</code>?</p>\n\n<p>Something like </p>\n\n<pre><code>array.each do |a|  \n  puts a\nend\n\n&gt; [1,2,3]\n&gt; [4,5,6]\n&gt; [7,8,9]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "mocking"], "comments": [{"owner": {"reputation": 146, "user_id": 3099251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff16bf0603f536486ed3804c7c40c63?s=128&d=identicon&r=PG", "display_name": "chanakya devraj", "link": "https://stackoverflow.com/users/3099251/chanakya-devraj"}, "edited": false, "score": 0, "creation_date": 1446057992, "post_id": 33399015, "comment_id": 54589733, "body": "have you tried to stub any instance of the class <code>Slack</code>, i;e <code>allow_any_instance_of(Slack).to receive(:channels_join).and_return(true)</code>"}, {"owner": {"reputation": 15962, "user_id": 472768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/L6pgx.png?s=128&g=1", "display_name": "FeifanZ", "link": "https://stackoverflow.com/users/472768/feifanz"}, "reply_to_user": {"reputation": 146, "user_id": 3099251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff16bf0603f536486ed3804c7c40c63?s=128&d=identicon&r=PG", "display_name": "chanakya devraj", "link": "https://stackoverflow.com/users/3099251/chanakya-devraj"}, "edited": false, "score": 0, "creation_date": 1446059433, "post_id": 33399015, "comment_id": 54590617, "body": "Turns out <code>allow_any_instance_of(Slack::Client)</code> and <code>expect_any_instance_of(Slack::Client</code> fixes this issue. If you&#39;d like to post that as an answer I&#39;ll accept it"}, {"owner": {"reputation": 146, "user_id": 3099251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff16bf0603f536486ed3804c7c40c63?s=128&d=identicon&r=PG", "display_name": "chanakya devraj", "link": "https://stackoverflow.com/users/3099251/chanakya-devraj"}, "edited": false, "score": 0, "creation_date": 1446059611, "post_id": 33399015, "comment_id": 54590713, "body": "Glad it worked .. :)"}, {"owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "edited": false, "score": 0, "creation_date": 1446060122, "post_id": 33399015, "comment_id": 54591020, "body": "I recommend you don&#39;t use <code>allow_any_instance_of</code>.  It has many problems.  We recommend against its use: <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-3/docs/working-with-legacy-code/any-instance\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-mocks/v/3-3/docs/&hellip;</a> Instead, see my suggested fix below."}], "answers": [{"comments": [{"owner": {"reputation": 15962, "user_id": 472768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/L6pgx.png?s=128&g=1", "display_name": "FeifanZ", "link": "https://stackoverflow.com/users/472768/feifanz"}, "edited": false, "score": 0, "creation_date": 1446064504, "post_id": 33399784, "comment_id": 54593428, "body": "Thanks for pointing that out! PR opened and good to know about <code>-b</code>."}, {"owner": {"reputation": 2655, "user_id": 1633753, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b8dc4b76792ff3c8cd993aa4c9c467f6?s=128&d=identicon&r=PG", "display_name": "Isaac Betesh", "link": "https://stackoverflow.com/users/1633753/isaac-betesh"}, "edited": false, "score": 0, "creation_date": 1464381563, "post_id": 33399784, "comment_id": 62480193, "body": "I&#39;m upgrading RSpec in a jruby 1.9 app and running into this problem.  I suspect somewhere in JRuby there&#39;s a similar bug.  This explanation made it clear to me exactly what to look for.  Now I just need to look for it."}], "tags": [], "owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "is_accepted": true, "score": 6, "last_activity_date": 1446060060, "creation_date": 1446060060, "answer_id": 33399784, "question_id": 33399015, "link": "https://stackoverflow.com/questions/33399015/rspec-stub-throws-wrong-number-of-arguments-error/33399784#33399784", "title": "RSpec stub throws wrong number of arguments error", "body": "<p>If you have enabled the <code>verify_partial_doubles</code> option than RSpec will check if <code>Slack</code> responds to <code>:channels_join</code> when you stub it.  Unfortunately, <code>Slack.respond_to?</code> is <a href=\"https://github.com/aki017/slack-ruby-gem/blob/v1.1.6/lib/slack.rb#L24-L26\" rel=\"noreferrer\">implemented incorrectly</a>:</p>\n\n<pre><code>def self.respond_to?(method)\n  return client.respond_to?(method) || super\nend\n</code></pre>\n\n<p>The problem is that <code>Object#respond_to?</code> <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-respond_to-3F\" rel=\"noreferrer\">accepts two arguments</a> (and has for years, since at least 1.8.7, if not sooner!), and RSpec passes a 2nd arg, expecting that <code>respond_to?</code> will accept two arguments since it is supposed to.</p>\n\n<p>To fix it, you can (temporarily) monkey patch the slack gem:</p>\n\n<pre><code>module Slack\n  def self.respond_to?(method, include_all=false)\n    return client.respond_to?(method, include_all) || super\n  end\nend\n</code></pre>\n\n<p>This should really be fixed in the slack gem, though, so I'd encourage you to open a PR with the maintainers with this fix.</p>\n\n<p>More broadly, when you run into this kind of error, you can learn more about the problem by passing <code>rspec</code> the <code>-b</code> (or <code>--backtrace</code>) flag, which will print the full backtrace.  In your situation I would have expected it to show both the <code>respond_to?</code> call site within RSpec and the line where Slack defines <code>respond_to?</code> accepting only one argument.  Then you could look at those lines to figure out what's going on.</p>\n"}], "owner": {"reputation": 15962, "user_id": 472768, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/L6pgx.png?s=128&g=1", "display_name": "FeifanZ", "link": "https://stackoverflow.com/users/472768/feifanz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 0, "accepted_answer_id": 33399784, "answer_count": 1, "score": 0, "last_activity_date": 1446060060, "creation_date": 1446057444, "question_id": 33399015, "link": "https://stackoverflow.com/questions/33399015/rspec-stub-throws-wrong-number-of-arguments-error", "title": "RSpec stub throws wrong number of arguments error", "body": "<p>I'm try to stub the <a href=\"https://github.com/aki017/slack-ruby-gem\" rel=\"nofollow\">Slack gem</a> with the new syntax (old syntax throws the same error): </p>\n\n<pre><code>before :each do\n    allow(Slack).to receive(:channels_join).and_return(true)\nend\n</code></pre>\n\n<p>This line throws <code>wrong number of arguments (2 for 1)</code>. Breaking up the line into pieces, it seems like the call to <code>.to</code> is throwing the error:</p>\n\n<pre><code>a = allow(Slack)\nb = receive(:channels_join)\nc = b.and_return(true)\na.to(c)\n</code></pre>\n\n<p>Changing the arguments to <code>.to</code> didn't change anything:</p>\n\n<pre><code>a.to(c, c)\n</code></pre>\n\n<p>throws the same <code>2 for 1</code> error.</p>\n\n<pre><code>a.to(5)\n</code></pre>\n\n<p>throws a reasonable error: <code>only the receive or receive_messages matchers are supported with allow(...).to, but you have provided: 5</code></p>\n\n<p>Why is the <code>2 for 1</code> error being thrown?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "devise", "rolify"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5424287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMYx1HADws8/AAAAAAAAAAI/AAAAAAAAAN4/VaLpO8V7vqE/photo.jpg?sz=128", "display_name": "Chris Bryant", "link": "https://stackoverflow.com/users/5424287/chris-bryant"}, "edited": false, "score": 0, "creation_date": 1446139119, "post_id": 33404269, "comment_id": 54630865, "body": "Thank you for the help! I&#39;m now getting a new error, I&#39;ve updated the post to reflect the error and pasted in relevant files (I think?).  I appreciate the help, would you happen to know what&#39;s giving me an error now?"}, {"owner": {"reputation": 2970, "user_id": 2511083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aelTt.jpg?s=128&g=1", "display_name": "Subtletree", "link": "https://stackoverflow.com/users/2511083/subtletree"}, "reply_to_user": {"reputation": 3, "user_id": 5424287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMYx1HADws8/AAAAAAAAAAI/AAAAAAAAAN4/VaLpO8V7vqE/photo.jpg?sz=128", "display_name": "Chris Bryant", "link": "https://stackoverflow.com/users/5424287/chris-bryant"}, "edited": false, "score": 0, "creation_date": 1446201085, "post_id": 33404269, "comment_id": 54655763, "body": "The code you have included in your controller e.g <code>get &#39;pages&#47;videolibrary&#39; =&gt; &quot;pages#videolibrary&quot;, as: :retail_page</code> is only for the routes.rb file. That code defines a route and basically says if someone asks for www.mysite.com/pages/videolibrary point them to the videolibrary action in the pages controller. It then makes a variable (named_route) called retail_page_path that links to that url.  If you remove the routes code from the controller and replace it with each corresponding named route it should hopefully work!"}, {"owner": {"reputation": 2970, "user_id": 2511083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aelTt.jpg?s=128&g=1", "display_name": "Subtletree", "link": "https://stackoverflow.com/users/2511083/subtletree"}, "reply_to_user": {"reputation": 3, "user_id": 5424287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMYx1HADws8/AAAAAAAAAAI/AAAAAAAAAN4/VaLpO8V7vqE/photo.jpg?sz=128", "display_name": "Chris Bryant", "link": "https://stackoverflow.com/users/5424287/chris-bryant"}, "edited": false, "score": 0, "creation_date": 1446201469, "post_id": 33404269, "comment_id": 54655977, "body": "So just to clarify, in my answer above when I wrote <code>commercial_page_path</code> for example I don&#39;t mean to replace that with the commercial page path I mean keep <code>commercial_page_path</code> there as it is a  named route which inserts the correct path itself. Try just copying that whole method."}, {"owner": {"reputation": 3, "user_id": 5424287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMYx1HADws8/AAAAAAAAAAI/AAAAAAAAAN4/VaLpO8V7vqE/photo.jpg?sz=128", "display_name": "Chris Bryant", "link": "https://stackoverflow.com/users/5424287/chris-bryant"}, "edited": false, "score": 1, "creation_date": 1446226371, "post_id": 33404269, "comment_id": 54671695, "body": "Thank you, this fixed it!"}], "tags": [], "owner": {"reputation": 2970, "user_id": 2511083, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aelTt.jpg?s=128&g=1", "display_name": "Subtletree", "link": "https://stackoverflow.com/users/2511083/subtletree"}, "is_accepted": true, "score": 1, "last_activity_date": 1446201582, "last_edit_date": 1446201582, "creation_date": 1446080592, "answer_id": 33404269, "question_id": 33398785, "link": "https://stackoverflow.com/questions/33398785/redirecting-to-specific-homepages-based-on-sign-in-with-user-role-in-rails/33404269#33404269", "title": "Redirecting to specific homepages based on sign in with user role in rails", "body": "<p>Devise has a controller method you can override called <code>after_sign_in_path_for</code> this is talked about in the devise docs <a href=\"https://github.com/plataformatec/devise/wiki/How-To%3A-Redirect-to-a-specific-page-on-successful-sign-in-and-sign-out\" rel=\"nofollow\">here</a>. (The <a href=\"https://github.com/plataformatec/devise/wiki\" rel=\"nofollow\">devise wiki</a> and especially the how to examples are really helpful)</p>\n\n<p>In your application controller</p>\n\n<pre><code>def after_sign_in_path_for(resource)\n  # Here you can write logic based on roles to return different after sign in paths\n  if current_user.has_role? :admin\n    videolibrary_path\n  elsif current_user.has_role? :retail\n    retail_page_path\n  elsif current_user.has_role? :commercial\n    commercial_page_path\n  elsif current_user.has_role? :business\n    business_page_path\n  elsif current_user.has_role? :manager\n    videolibrary_path\n  else\n    new_user_path\n  end\nend\n</code></pre>\n\n<p>You will need to add the routes for the pages e.g</p>\n\n<pre><code>get 'pages/retail =&gt; \"pages#retail\", as: :retail_page # this sets up a named link 'retail_page_path' which you can use in controllers and views\n</code></pre>\n\n<p>Check out the <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">rails routing guide</a> for more info. Also once you have written your routes you can run <code>rake routes</code> in the console to output all your apps routes as well as their named routes (like <code>retail_page_path</code>)</p>\n"}], "owner": {"reputation": 3, "user_id": 5424287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMYx1HADws8/AAAAAAAAAAI/AAAAAAAAAN4/VaLpO8V7vqE/photo.jpg?sz=128", "display_name": "Chris Bryant", "link": "https://stackoverflow.com/users/5424287/chris-bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2274, "favorite_count": 0, "accepted_answer_id": 33404269, "answer_count": 1, "score": 0, "last_activity_date": 1446201582, "creation_date": 1446056667, "last_edit_date": 1495540716, "question_id": 33398785, "link": "https://stackoverflow.com/questions/33398785/redirecting-to-specific-homepages-based-on-sign-in-with-user-role-in-rails", "title": "Redirecting to specific homepages based on sign in with user role in rails", "body": "<p>First off, I'm very new to Ruby and Ruby on Rails having only worked with them for a few days.  I'm currently trying to redirect the page a user lands on after signing in to a specific page based on their role and I'm not quite sure how to do it.  Does anyone know how I might approach this?  I've used the following links but can't get them to work.  </p>\n\n<p>I'm using Devise for authentication and Rolify for my roles.</p>\n\n<p>This is my routes.rb file:</p>\n\n<pre><code>    Rails.application.routes.draw do\n    mount RailsAdmin::Engine =&gt; '/admin', as: 'rails_admin'\n    devise_for :admins\n    devise_for :users, path_names: {sign_in: \"login\", sign_out: \"logout\"}\n    devise_scope :user do\n      authenticated :user do\n        root :to =&gt; 'pages#videolibrary'\n      end\n\n  unauthenticated :user do\n    root :to =&gt; 'devise/registrations#new', as: :unauthenticated_root\n  end\nend\n</code></pre>\n\n<p>I've made a Passthrough controller but I don't know how to link the controller so that it's used.  Or even if this is the right way to approach this.</p>\n\n<p>Here's the passthroughcontroller.rb:</p>\n\n<pre><code>class PassthroughController &lt; ApplicationController\n  def index\n    if current_user.has_role? :admin\n      redirect_to 'pages#videolibrary'\n    elsif current_user.has_role? :retail\n      redirect_to 'pages#retail'\n    elsif current_user.has_role? :commercial\n      redirect_to 'pages#commercial'\n    elsif current_user.has_role? :business\n      redirect_to 'pages#business'\n    elsif current_user.has_role? :manager\n      redirect_to 'pages#videolibrary'\n    else\n      redirect_to 'devise/registrations#new'\n    end\n  end\nend\n</code></pre>\n\n<p>I've tried following these posts but have can't get it to work:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/32020473/devise-redirects-to-specific-page-based-on-user-role-on-login\">Devise Redirects to specific page based on User Role on Login</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/4753871/how-can-i-redirect-a-users-home-root-path-based-on-their-role-using-devise\">How can I redirect a user's home (root) path based on their role using Devise?</a></p>\n\n<p><a href=\"http://minhajuddin.com/2011/10/24/how-to-change-the-rails-root-url-based-on-the-user-or-role\" rel=\"nofollow noreferrer\">how to change the rails root url based on the current user or role</a></p>\n\n<p>Whit this link I don't have a role_constraint.rb file in my lib directory.</p>\n\n<p>Maybe someone here has an idea on how to approach this?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I've updated my application controller to now read:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n      # Prevent CSRF attacks by raising an exception.\n      # For APIs, you may want to use :null_session instead.\n      protect_from_forgery with: :exception\n\n        before_action :configure_permitted_parameters, if: :devise_controller?\n      protected\n      def configure_permitted_parameters\n        devise_parameter_sanitizer.for(:sign_up)  { |u| u.permit(  :email, :password, :password_confirmation, role: []  ) }\n      end\n\n    def after_sign_in_path_for(resource)\n      # Here you can write logic based on roles to return different after sign in paths\n      if current_user.has_role? :admin\n        get 'pages/videolibrary' =&gt; \"pages#videolibrary\", as: :retail_page\n      elsif current_user.has_role? :retail\n        get 'pages/retail' =&gt; \"pages#commercial\", as: :retail_page\n      elsif current_user.has_role? :commercial\n        get 'pages/commercial' =&gt; \"pages#commercial\", as: :commercial_page\n      elsif current_user.has_role? :business\n        get 'pages/business' =&gt; \"pages#business\", as: :business_page\n      elsif current_user.has_role? :manager\n        get 'pages/manager' =&gt; \"pages#manager\", as: :manager_page\n      else\n        get 'devise/registrations' =&gt; \"devise/registrations#new\"\n      end\n    end\nend\n</code></pre>\n\n<p>And this is my routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  mount RailsAdmin::Engine =&gt; '/admin', as: 'rails_admin'\n  devise_for :admins\ndevise_for :users, path_names: {sign_in: \"login\", sign_out: \"logout\"}\ndevise_scope :user do\n  authenticated :user do\n    root :to =&gt; 'pages#videolibrary'\n  end\n  unauthenticated :user do\n    root :to =&gt; 'devise/registrations#new', as: :unauthenticated_root\n  end\n    get 'pages/welcome'\n    get 'pages/home' =&gt; \"pages#videolibrary\"\n    get 'videolibrary' =&gt; \"pages#videolibrary\"\n    get 'pages/*page' =&gt; \"pages#show\"\n    get 'pages/retail' =&gt; \"pages#retail\"\n    get 'pages/commercial' =&gt; \"pages#commercial\"\n    get 'pages/business' =&gt; \"pages#business\"\n    get 'pages/manager' =&gt; \"pages#manager\"\n  end\nend\n</code></pre>\n\n<p>Here is my user.rb file if needed:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  rolify\n  resourcify\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  ROLES = %w[admin retail commercial business manager]\n\nend\n</code></pre>\n\n<p>And these are the revelant routes with rake routes:</p>\n\n<pre><code>                 root GET    /                               pages#videolibrary\n unauthenticated_root GET    /                               devise/registrations#new\n        pages_welcome GET    /pages/welcome(.:format)        pages#welcome\n           pages_home GET    /pages/home(.:format)           pages#home\n         videolibrary GET    /videolibrary(.:format)         pages#videolibrary\n                      GET    /pages/*page(.:format)          pages#show\n          retail_page GET    /pages/retail(.:format)         pages#retail\n      commercial_page GET    /pages/commercial(.:format)     pages#commercial\n        business_page GET    /pages/business(.:format)       pages#business\n         manager_page GET    /pages/manager(.:format)        pages#manager\n</code></pre>\n\n<p>I'm now getting a NoMethodError in Devise::SessionsController#create</p>\n\n<p>undefined method `get' for #Devise::SessionsController:0x9879660</p>\n\n<pre><code>    get 'pages/manager' =&gt; \"pages#manager\", as: :manager_page\n  else\n    get 'devise/registrations' =&gt; \"devise/registrations#new\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "openstruct"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1446056177, "post_id": 33398528, "comment_id": 54588607, "body": "Your question isn&#39;t clear. What is your goal? What is the output you&#39;re expecting, and what is the output you&#39;re getting instead?"}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1446056293, "post_id": 33398528, "comment_id": 54588681, "body": "I want <code>temp.place</code> to return a hash rather than a <code>MyOpenConstruct</code> object. Overriding is not helping. The input hash can be a lot deeper then the one given. Every access should return a hash"}, {"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 1, "creation_date": 1446056545, "post_id": 33398528, "comment_id": 54588834, "body": "Why do you want create a nested OpenStruct if you are returning it as a hash?"}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 0, "creation_date": 1446056665, "post_id": 33398528, "comment_id": 54588905, "body": "@Doguita How will I get a dot access to values? I mean <code>temp.name</code> and <code>temp[:name]</code> are not going to be same. As of now both are working. Its just I need a hash from both. <code>temp.name</code> returns an object but <code>temp[:name]</code> returns a hash"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446056950, "post_id": 33398528, "comment_id": 54589081, "body": "If you want <code>place</code> to return something different, then you need to override it in your subclass. Likewise for <code>name</code>."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446058206, "post_id": 33398528, "comment_id": 54589851, "body": "@J&#246;rgWMittag According to OpenStruct&#39;s <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/ostruct/rdoc/OpenStruct.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">docs</a> <code>[]</code> should word both for brackets as well as dots."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446058455, "post_id": 33398528, "comment_id": 54590030, "body": "It doesn&#39;t say that <code>foo.bar</code> is based on <code>foo[:bar]</code>. Quite the opposite, actually: <i>iff</i> you want to construe that simple one-line sentence as any part of official guarantee <i>at all</i>, then all that it says is that <code>foo[:bar]</code> is based on <code>foo.bar</code>. But I doubt that that&#39;s what that sentence means. Maybe, if you&#39;re lucky, you&#39;ll find a conformance test in the <a href=\"https://github.com/ruby/ruby/blob/trunk/test/ostruct/test_ostruct.rb#L96-L109\" rel=\"nofollow noreferrer\">YARV test suite</a>, which tells you exactly what kind of guarantees <code>OpenStruct</code> makes, but I doubt it. Test coverage is very spotty for the stdlib."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446058728, "post_id": 33398528, "comment_id": 54590203, "body": "@J&#246;rgWMittag So is there no way to get it working? I am actually stuck at only at this part and I need both <code>.</code> &amp; <code>[]</code> to return me the same thing i.e. a hash! Is there a function using which I can override <code>.</code>?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446059000, "post_id": 33398528, "comment_id": 54590357, "body": "If you want to override <code>foo.name</code>, you have to implement a <code>name</code> method. If you want to override <code>foo.place</code>, you need to implement a <code>place</code> method, and so on."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446060831, "post_id": 33398528, "comment_id": 54591463, "body": "@J&#246;rgWMittag If that&#39;s not possible then can I print a hash of the whole object <code>temp</code>? without using <code>to_h</code>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 0, "creation_date": 1446066379, "post_id": 33398528, "comment_id": 54594456, "body": "As @Doguita explained below, there&#39;s no good way to make <code>temp.place</code> return a Hash and to also be able to do <code>temp.place.animal</code>. I suspect you have an <a href=\"http://meta.stackexchange.com/a/66378/140350\">XY problem</a>. Can you edit your question to explain <i>why</i> you want these methods to return a Hash? What problem are you trying to solve?"}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1446065913, "post_id": 33400811, "comment_id": 54594197, "body": "@AnimeshPandey Doguita spent the first two paragraphs explaining why that would happen. Go back and read them. If <code>struct.place</code> returns a Hash, you can&#39;t do <code>struct.place.animal</code>, because the Hash won&#39;t have an <code>animal</code> method. There&#39;s no way around that."}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": false, "score": 2, "last_activity_date": 1446063402, "creation_date": 1446063402, "answer_id": 33400811, "question_id": 33398528, "link": "https://stackoverflow.com/questions/33398528/overriding-getter-of-openstruct-in-order-to-print-it-as-a-hash/33400811#33400811", "title": "Overriding getter of OpenStruct in order to print it as a Hash", "body": "<p>I don't believe create a nested OpenStruct makes sense if you are returning it as a Hash. That's the way OpenStruct works:</p>\n\n<pre><code>require 'ostruct'\nstruct = OpenStruct.new(name: 'first', place: { animal: 'thing' })\nstruct.place\n# =&gt; {:animal=&gt;\"thing\"}\nstruct.place[:animal]\n# =&gt; \"thing\"\nstruct.place.animal\n# =&gt; NoMethodError: undefined method `animal' for {:animal=&gt;\"thing\"}:Hash\n</code></pre>\n\n<p>So, if you want to use the dot notation to get <code>struct.place.animal</code>, you need to create nested OpenStruct objects like you did.\nBut, as I said, you don't need to override the <code>[]</code> method. Using your class without override the <code>[]</code> I get this:</p>\n\n<pre><code>struct = MyOpenStruct.new(name: 'first', place: { animal: 'thing' })\n# =&gt; #&lt;MyOpenStruct name=\"first\", place=#&lt;MyOpenStruct animal=\"thing\"&gt;&gt; \nstruct.place\n# =&gt; #&lt;MyOpenStruct animal=\"thing\"&gt; \nstruct.place.animal\n# =&gt; \"thing\" \n</code></pre>\n\n<p>Anyway, if you really want to make the dot notation work as you asked, you can override the <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/ostruct/rdoc/OpenStruct.html#method-i-new_ostruct_member\" rel=\"nofollow\"><code>new_ostruct_member</code></a> method, which is used internally to create dynamic attributes when setting the OpenStruct object.\nYou can try something like this, but <strong>I don't recommend</strong>:</p>\n\n<pre><code>class MyOpenStruct &lt; OpenStruct\n  def initialize(object=nil)\n    @table = {}\n    @hash_table = {}\n\n    if object\n      object.each do |k,v|\n        if v.is_a?(Array)\n          other = Array.new()\n          v.each { |e| other.push(self.class.new(entry)) }\n          v = other\n        end\n        @table[k.to_sym] = (v.is_a?(Hash) ? self.class.new(v) : v)\n        @hash_table[k.to_sym] = v\n        new_ostruct_member(k)\n      end\n    end\n  end\n\n  def [](val)\n    @hash_table[val.to_sym]\n  end\n\n  protected\n\n  def new_ostruct_member(name)\n    name = name.to_sym\n    unless respond_to?(name)\n      # use the overrided `[]` method, to return a hash\n      define_singleton_method(name) { self[name] }\n      define_singleton_method(\"#{name}=\") { |x| modifiable[name] = x }\n    end\n    name\n  end\nend\n\nstruct = MyOpenStruct.new(name: 'first', place: { animal: 'thing' })\n# =&gt; #&lt;MyOpenStruct name=\"first\", place=#&lt;MyOpenStruct animal=\"thing\"&gt;&gt; \nstruct.place\n# =&gt; {:animal=&gt;\"thing\"} \nstruct.place[:animal]\n# =&gt; \"thing\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1446065849, "post_id": 33401366, "comment_id": 54594168, "body": "Yes, @Doguita&#39;s ans seems correct but <code>struct.place.animal</code> raises a <code>NoMethodError</code>!!!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 1, "creation_date": 1446065959, "post_id": 33401366, "comment_id": 54594225, "body": "@AnimeshPandey @Doguita spent the first two paragraphs explaining exactly why that would happen. Go back and read them. If <code>struct.place</code> returns a Hash, you can&#39;t do <code>struct.place.animal</code>, because the Hash won&#39;t have an <code>animal</code> method. There&#39;s no way around that."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1446066565, "post_id": 33401366, "comment_id": 54594532, "body": "Yeah, okay I get the point. and he is right as well. It is what it is!!"}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1446067138, "post_id": 33401366, "comment_id": 54594798, "body": "The answers are a great source of information for me. I think as of now I am satisfied with the whatever has been suggested."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1446065792, "last_edit_date": 1446065792, "creation_date": 1446065386, "answer_id": 33401366, "question_id": 33398528, "link": "https://stackoverflow.com/questions/33398528/overriding-getter-of-openstruct-in-order-to-print-it-as-a-hash/33401366#33401366", "title": "Overriding getter of OpenStruct in order to print it as a Hash", "body": "<p>@Doguita's answer is correct in all respects. I just wanted to answer your question \"If that's not possible then can I print a hash of the whole object <code>temp</code>?\" Yes, you can. You just need to override <code>to_h</code> to recursively walk your keys and values and convert instances of MyOpenStruct to a Hash:</p>\n\n<pre><code>def to_h\n  @table.each_with_object({}) do |(key, val), table|\n    table[key] = to_h_convert(val)\n  end\nend\n\nprivate\ndef to_h_convert(val)\n  case val\n  when self.class\n    val.to_h\n  when Hash\n    val.each_with_object({}) do |(key, val), hsh|\n      hsh[key] = to_h_convert(val)\n    end\n  when Array\n    val.map {|item| to_h_convert(item) }\n  else\n    val\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446065792, "creation_date": 1446055849, "last_edit_date": 1446056565, "question_id": 33398528, "link": "https://stackoverflow.com/questions/33398528/overriding-getter-of-openstruct-in-order-to-print-it-as-a-hash", "title": "Overriding getter of OpenStruct in order to print it as a Hash", "body": "<p>GOAL: Values of an OpenStruct object should be printed as a hash rather than an object</p>\n\n<p>POSSIBLE SOLUTION: Override getter of the OpenStruct class</p>\n\n<p><code>MyOpenStruct</code> overrides <code>new</code>, <code>to_h</code> and <code>[]</code> of <code>OpenStruct</code>.</p>\n\n<pre><code>class MyOpenStruct &lt; OpenStruct\n    def initialize(object=nil)\n        @table = {}\n        @hash_table = {}\n\n        if object\n            object.each do |k,v|\n                if v.is_a?(Array)\n                    other = Array.new()\n                    v.each { |e| other.push(self.class.new(entry)) }\n                    v = other\n                end\n                @table[k.to_sym] = (v.is_a?(Hash) ? self.class.new(v) : v)\n                @hash_table[k.to_sym] = v\n                new_ostruct_member(k)\n            end\n        end\n    end\n\n    def [](val)\n        @hash_table[val.to_sym]\n    end\nend\n</code></pre>\n\n<p>But overriding <code>[]</code> is not making any difference. E.g.</p>\n\n<pre><code>irb(main):007:0&gt; temp = MyOpenStruct.new({\"name\"=&gt;\"first\", \"place\"=&gt;{\"animal\"=&gt;\"thing\"}})\n=&gt; #&lt;MyOpenStruct name=\"first\", place=#&lt;MyOpenStruct animal=\"thing\"&gt;&gt;\nirb(main):008:0&gt; temp.name\n=&gt; \"first\"\nirb(main):009:0&gt; temp.place\n=&gt; #&lt;MyOpenStruct animal=\"thing\"&gt;\nirb(main):010:0&gt; temp[\"place\"]\n=&gt; {\"animal\"=&gt;\"thing\"}\nirb(main):011:0&gt; temp[:place]\n=&gt; {\"animal\"=&gt;\"thing\"}\nirb(main):012:0&gt; temp\n=&gt; #&lt;MyOpenStruct name=\"first\", place=#&lt;MyOpenStruct animal=\"thing\"&gt;&gt;\n</code></pre>\n\n<p>Only when I access the keys using <code>[]</code> a hash is returned!!</p>\n\n<p>How can I correct this??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "actioncable"], "answers": [{"tags": [], "owner": {"reputation": 24753, "user_id": 489765, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bdc5163fd78b041c9d4a405204c5ad9a?s=128&d=identicon&r=PG", "display_name": "aromero", "link": "https://stackoverflow.com/users/489765/aromero"}, "is_accepted": true, "score": 1, "last_activity_date": 1447601364, "creation_date": 1447601364, "answer_id": 33721410, "question_id": 33398505, "link": "https://stackoverflow.com/questions/33398505/actioncable-cant-connect-to-websocket/33721410#33721410", "title": "actioncable can&#39;t connect to websocket", "body": "<p>Your <code>find_verified_user</code> method makes no sense, it will always fail. Change it to find a user based on the presence of some (signed) cookie.</p>\n\n<pre><code>def find_verified_user\n  if user = User.find_by(id: cookies.signed[:user_id])\n    user\n  else\n    reject_unauthorized_connection\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 906, "user_id": 2029643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a4649859518d4d636423b788d7538624?s=128&d=identicon&r=PG", "display_name": "Evolutio", "link": "https://stackoverflow.com/users/2029643/evolutio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2519, "favorite_count": 1, "accepted_answer_id": 33721410, "answer_count": 1, "score": 3, "last_activity_date": 1447601364, "creation_date": 1446055762, "question_id": 33398505, "link": "https://stackoverflow.com/questions/33398505/actioncable-cant-connect-to-websocket", "title": "actioncable can&#39;t connect to websocket", "body": "<p>I can't connect to the actioncable websocket.</p>\n\n<p>I added this line to my routes.rb</p>\n\n<pre><code>match \"/websocket\", :to =&gt; ActionCable.server, via: [:get, :post]\n</code></pre>\n\n<p>and I added this files to my app path:\ncable/config.ru</p>\n\n<pre><code># cable/config.ru\nrequire ::File.expand_path('../../config/environment',  __FILE__)\nRails.application.eager_load!\n\nrequire 'action_cable/process/logging'\n\nrun ActionCable.server\n</code></pre>\n\n<p>channels/application_cable/channel.rb</p>\n\n<pre><code>module ApplicationCable\n  class Channel &lt; ActionCable::Channel::Base\n  end\nend\n</code></pre>\n\n<p>channels/application_cable/connection.rb</p>\n\n<pre><code>module ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n    end\n\n    protected\n      def find_verified_user\n        if current_user\n          current_user\n        else\n          reject_unauthorized_connection\n        end\n      end\n  end\nend\n</code></pre>\n\n<p>and my javascriptfiles under\nassets/javascript/channels/index.coffee</p>\n\n<pre><code>#= require cable\n#= require_self\n#= require_tree .\n\n@App = {}\n# App.cable = Cable.createConsumer 'ws://localhost:28080'\n# App.cable = Cable.createConsumer 'ws://localhost/websocket'\n</code></pre>\n\n<p>then I started my rails app with:</p>\n\n<pre><code>TRUSTED_IP=192.168.0.0/16 rails s -b 192.168.56.101 Puma\n</code></pre>\n\n<p>and my ActionCalbe-Server with:</p>\n\n<pre><code>bundle exec puma -p 28080 cable/config.ru\n</code></pre>\n\n<p>When I opened my Application in the browser I get this errors:</p>\n\n<pre><code>Firefox kann keine Verbindung zu dem Server unter ws://localhost:28080/ aufbauen.\nFirefox kann keine Verbindung zu dem Server unter ws://localhost/websocket aufbauen.\n</code></pre>\n\n<p>How I can solve my problem? I didn't find the mistake :/ </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1446055907, "post_id": 33398381, "comment_id": 54588439, "body": "Please try to refrain from requesting urgent or special attention from volunteers here. All questions are of equal importance. Have you tried searching for this error?"}, {"owner": {"reputation": 178, "user_id": 2487677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bYuWK.jpg?s=128&g=1", "display_name": "KyleHodgetts", "link": "https://stackoverflow.com/users/2487677/kylehodgetts"}, "edited": false, "score": 0, "creation_date": 1446055916, "post_id": 33398381, "comment_id": 54588447, "body": "First line of the error, it asks you to append &#39;bundle exec&#39; to your rake commands. So have you tried:   1) <code>Bundle install</code>  2) <code>bundle exec rake db:create</code>  3) <code>bundle exec rake db:migrate</code>   ?"}, {"owner": {"reputation": 2060, "user_id": 3625058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEy9i.jpg?s=128&g=1", "display_name": "matanco", "link": "https://stackoverflow.com/users/3625058/matanco"}, "edited": false, "score": 0, "creation_date": 1446056649, "post_id": 33398381, "comment_id": 54588893, "body": "just add <code>bundle exec</code> it will solve this problem"}], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 3099251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff16bf0603f536486ed3804c7c40c63?s=128&d=identicon&r=PG", "display_name": "chanakya devraj", "link": "https://stackoverflow.com/users/3099251/chanakya-devraj"}, "is_accepted": false, "score": 2, "last_activity_date": 1448708364, "last_edit_date": 1448708364, "creation_date": 1446056387, "answer_id": 33398689, "question_id": 33398381, "link": "https://stackoverflow.com/questions/33398381/replicating-rails-app/33398689#33398689", "title": "Replicating Rails App", "body": "<h2>The cause</h2>\n\n<p>Your gem  <code>rake</code> has a conflicts in the version you have installed i.e. the gem <code>rake</code> your <code>Gemfile</code> requires is of version <code>10.3.2</code> while the gem you have on your machine has got version <code>10.4.2</code> and <code>10.3.2</code>.</p>\n\n<h2>Solution</h2>\n\n<ol>\n<li>uninstall the gem of version <code>10.4.2</code>. <code>gem uninstall rake</code> would ask you for the version that has to be uninstalled, please select <code>10.4.2</code></li>\n<li>you may run the commands with <code>bundle exec</code> eg:- <code>bundle exec rake db:migrate</code> or <code>bundle exec rake db:create</code></li>\n<li>you may want to use <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">RVM</a> and use <a href=\"https://rvm.io/gemsets/basics\" rel=\"nofollow\">Gemsets</a> as per the projects and its dependency gems. (I would personally prefer this way so that the projects of different version of gems would be clear and no need to worry about the conflicts gem versions)</li>\n</ol>\n"}], "owner": {"reputation": 83, "user_id": 3914956, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40b95f1cf398fd72f5f13d4efa854287?s=128&d=identicon&r=PG&f=1", "display_name": "user3914956", "link": "https://stackoverflow.com/users/3914956/user3914956"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1448708364, "creation_date": 1446055385, "last_edit_date": 1446055878, "question_id": 33398381, "link": "https://stackoverflow.com/questions/33398381/replicating-rails-app", "title": "Replicating Rails App", "body": "<p>I am trying to download a Rails app from github and that make it work on my PC. I have read other posts that say you have to run <code>bundle install</code>, <code>rake db:create</code> and then <code>rake db:migrate</code>, I do everything but when I try to run <code>rake db:create</code> I get this error:</p>\n\n<pre><code>rake aborted!\nGem::LoadError: You have already activated rake 10.4.2, but your Gemfile requires rake 10.3.2. Prepending `bundle exec` to your command may solve this.\nD:/art-website/config/boot.rb:4:in `&lt;top (required)&gt;'\nD:/art-website/config/application.rb:1:in `&lt;top (required)&gt;'\nD:/art-website/Rakefile:4:in `&lt;top (required)&gt;'\nLoadError: cannot load such file -- bundler/setup\nD:/art-website/config/boot.rb:4:in `&lt;top (required)&gt;'\nD:/art-website/config/application.rb:1:in `&lt;top (required)&gt;'\nD:/art-website/Rakefile:4:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 2148528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLQKa.png?s=128&g=1", "display_name": "David Ambler", "link": "https://stackoverflow.com/users/2148528/david-ambler"}, "is_accepted": false, "score": 0, "last_activity_date": 1446062079, "creation_date": 1446062079, "answer_id": 33400423, "question_id": 33397615, "link": "https://stackoverflow.com/questions/33397615/rspec-selenium-passing-variable-using-through-command-and-use-that-variable-in-t/33400423#33400423", "title": "Rspec Selenium passing variable using through command and use that variable in test case", "body": "<p>Your best bet (if you really want to go down this route) will be to look into using a rake file because as far as I know, without customising the rspec command (I wouldn't recommend this) you won't be able to pass in a variable.</p>\n\n<p>The other cleaner solution will be to keep things like test email addresses inside some sort of config which can then be consumed by your test. For example you could have a test data module:</p>\n\n<pre><code>module TestData\n  module Users\n    def known_user\n      { email: 'email@example.com', password: 'password' }\n    end\n  end\nend\n</code></pre>\n\n<p>This can then be accessed in your test with <code>TestData::Users.known_user</code> and appending <code>[:email]</code> or <code>[:password]</code> depending on which bit of data you're trying to get at. The benefit of this is you're not having to pass variables into tests. After all, surely you're going to want to eventually run a whole test suite and having to provide arguments for each test will become a nightmare.</p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 4470094, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000857022300/picture?type=large", "display_name": "Ali Hassan Mirza", "link": "https://stackoverflow.com/users/4470094/ali-hassan-mirza"}, "is_accepted": true, "score": 1, "last_activity_date": 1448001308, "creation_date": 1448001308, "answer_id": 33820392, "question_id": 33397615, "link": "https://stackoverflow.com/questions/33397615/rspec-selenium-passing-variable-using-through-command-and-use-that-variable-in-t/33820392#33820392", "title": "Rspec Selenium passing variable using through command and use that variable in test case", "body": "<p>I solved this by adding the all of the test cases in rake task and I am calling it via.</p>\n\n<pre><code>email=\"abcAgmail.com,password\" rake task:task\n</code></pre>\n\n<p>and its working fine for me.</p>\n"}], "owner": {"reputation": 508, "user_id": 4470094, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000857022300/picture?type=large", "display_name": "Ali Hassan Mirza", "link": "https://stackoverflow.com/users/4470094/ali-hassan-mirza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 33820392, "answer_count": 2, "score": 0, "last_activity_date": 1448001308, "creation_date": 1446053165, "question_id": 33397615, "link": "https://stackoverflow.com/questions/33397615/rspec-selenium-passing-variable-using-through-command-and-use-that-variable-in-t", "title": "Rspec Selenium passing variable using through command and use that variable in test case", "body": "<p>I have a test case like this.</p>\n\n<pre><code>  describe \"City Sports\" do\ncontext 'xyz cases' do\n  it 'checks the xyz signin' do\n    visit \"https://secure-xyz/\"\n    fill_in 'emailAddress', with: email\n    fill_in 'password', with: \"password1\"\n    find_button('signInButton').trigger('click')\n    if current_url == \"https://secure-xyz.do\"\n      #click_button 'Register'\n      fill_in 'newEmailAddress', with: email\n      find_button('registerButton').trigger('click')\n      fill_in 'password', with: 'password1'\n      find_button('registrationSubmitButton').trigger('click')\n    end\n  end\nend\n</code></pre>\n\n<p>I have this test case and the variable email which I am being use in the test case I want to pass through command line like \nrspec spec/users:#{email}/sign_in.rb</p>\n\n<p>how can In pass email variable through command line and how can I get this variable in test case.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "hash", "in-memory-database"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1446051531, "post_id": 33397047, "comment_id": 54585533, "body": "Any cache server with sufficient storage space. If not Redis, there&#39;s also memcached. You&#39;ll need some sort of caching anyway."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446053304, "post_id": 33397047, "comment_id": 54586728, "body": "Rails isn&#39;t the place to cache that information. Do it with a separate server designed for it. Avoiding dependencies, when those things are designed to do what you need, isn&#39;t a good use of your time or your resources. Pick and choose wisely, instead of arbitrarily avoiding something simply because it &quot;wasn&#39;t invented here&quot;, which is what you&#39;re doing."}, {"owner": {"reputation": 1751, "user_id": 156166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/663120570/picture?type=large", "display_name": "Rich Seviora", "link": "https://stackoverflow.com/users/156166/rich-seviora"}, "edited": false, "score": 0, "creation_date": 1446053524, "post_id": 33397047, "comment_id": 54586893, "body": "the Tin Man - I don&#39;t agree with this statement. I think you&#39;d want to consider whether adding an external dependency (and requisite operational overhead) is a good use of your time or not.  If it&#39;s a trivial data set relative to his available memory, then using in memory store will fit his needs."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1446053890, "post_id": 33397047, "comment_id": 54587150, "body": "Rails already relies on a server, the DB, to handle data caching. The problem is, we have no idea what his data objects are, nor his server capability, or whether his DB design is correct (returning 1,000 records shouldn&#39;t take 1,000 queries). As is, the question is very nebulous and poorly defined and without that information it&#39;s hard to give any sort of usable answer accept that it&#39;s possible, but we don&#39;t know if it&#39;s a good idea."}, {"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446058070, "post_id": 33397047, "comment_id": 54589775, "body": "@theTinMan The question isn&#39;t poorly defined - nor I am trying to use something because it &#39;wasn&#39;t invented here&#39;. The question is a 10,000 foot design question of &quot;Is there a way to avoid redis/external cache if we can fit a relatively small hash somewhere in memory&quot;. Its a rails design question. I know about these caches and trade offs etc. What I wanted to avoid is to implement redis and then later come across this nifty rails feature that does the same thing. It seems there isn&#39;t any such nifty feature (yet) so looks like external cache it is. Thanks for your comments."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 1, "creation_date": 1446058521, "post_id": 33397158, "comment_id": 54590085, "body": "2.5 ActiveSupport::Cache::MemCacheStore This cache store uses Danga&#39;s memcached server to provide a centralized cache for your application. Rails uses the bundled dalli gem by default. This is currently the most popular cache store for production websites.  This is great, I think I&#39;ll be able to do what I want with rails in built memory store. Thank you"}], "tags": [], "owner": {"reputation": 1751, "user_id": 156166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/663120570/picture?type=large", "display_name": "Rich Seviora", "link": "https://stackoverflow.com/users/156166/rich-seviora"}, "is_accepted": true, "score": 0, "last_activity_date": 1446051727, "creation_date": 1446051727, "answer_id": 33397158, "question_id": 33397047, "link": "https://stackoverflow.com/questions/33397047/best-way-to-have-a-persistent-in-memory-hash-in-rails/33397158#33397158", "title": "Best way to have a persistent in-memory hash in rails?", "body": "<p>It sounds like you need caching, you're just trying to avoid an external server. I've used Rails' built-in memory store cache solution for large calculations that are globally valid but I don't want to make a roundtrip to an external cache for.</p>\n\n<p>Use and adapt this setting in your environment.\n<code>config.cache_store = :memory_store, { size: 64.megabytes }</code></p>\n\n<p>And of course, the <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-memorystore\" rel=\"nofollow\">Rails Caching Guide</a> has all the details.</p>\n"}], "owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 33397158, "answer_count": 1, "score": 0, "last_activity_date": 1446051727, "creation_date": 1446051360, "question_id": 33397047, "link": "https://stackoverflow.com/questions/33397047/best-way-to-have-a-persistent-in-memory-hash-in-rails", "title": "Best way to have a persistent in-memory hash in rails?", "body": "<p>Say I have a table of 100000 cities (id, city) and my application is laid out in a way that I require the id->city mapping for many searches. Running a SQL record for each such translation is prohibitory. Say a search result page displays 1000 records, I don't want to add 1000 SQL queries on top of the existing query.</p>\n\n<p>I've read about the eager loading primitive (:includes) and that doesn't' exactly fit my need. I want to have this table of 100000 cities resident in memory. At present I am trying to avoid something like redis to save myself from one dependency.</p>\n\n<p>Is there a shared memory area where I can shove in this hash table when rails/passenger starts and then all incoming requests can lookup this persistent hash from there.</p>\n\n<p>I believe if I create such an hash in my application_controller, this hash will be initialized every time a request comes in which will make things worse than what I have now ( or will it not ?)</p>\n\n<p>What is the rails way of instantiating a shared persistent memory which all requests can share ?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1446050987, "post_id": 33396861, "comment_id": 54585164, "body": "So...why doesn&#39;t <code>IPAddr.new(str).to_i</code> work for you?  That seems to be <i>the</i> most straightforward way to get it done..."}, {"owner": {"reputation": 153, "user_id": 1865337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4fa9afe0326c05f72d99e36dc503f0a?s=128&d=identicon&r=PG", "display_name": "Zephyr Dodolee", "link": "https://stackoverflow.com/users/1865337/zephyr-dodolee"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1446051574, "post_id": 33396861, "comment_id": 54585565, "body": "I will use this script to process some large log files, so the performance really matters and I wonder why Python is so fast in this situation."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1446051730, "post_id": 33396861, "comment_id": 54585659, "body": "If you only have a million why does it really matter? The conversion itself is clocking for me at 4.5e-05 times a million is like 45s."}, {"owner": {"reputation": 153, "user_id": 1865337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4fa9afe0326c05f72d99e36dc503f0a?s=128&d=identicon&r=PG", "display_name": "Zephyr Dodolee", "link": "https://stackoverflow.com/users/1865337/zephyr-dodolee"}, "edited": false, "score": 0, "creation_date": 1446053201, "post_id": 33396861, "comment_id": 54586660, "body": "I have many files like this and I have to process one file at a time on demand (It&#39;s impossible to pre-process all the files). So I have to wait one minute to get a result each time I run the script while Python can process a million addresses in 5s."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446054365, "post_id": 33396861, "comment_id": 54587472, "body": "Will your IPs repeat so memoization is an option?"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 1, "creation_date": 1446054648, "post_id": 33396861, "comment_id": 54587662, "body": "How do you prove that the Ruby methods are at least 10 times slower than the Python one? Can you show the code?"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1446055007, "post_id": 33396861, "comment_id": 54587891, "body": "#2 is the most analogous to the Python example, and indeed, benchmarking shows it to be about 4X faster than #1. I was able to speed it up a bit by using a pack format of <code>N</code> instead of <code>L&gt;</code> or <code>L!</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1446056270, "post_id": 33396861, "comment_id": 54588668, "body": "We need a lot more information about your entire process. How are you reading the files, slurping them or using line-by-line I/O? How do you identify the IP address in the line, is the line only the IP or do you parse it? The problem with statements like &quot;language x is faster than y&quot; is you haven&#39;t shown your proof. When people are more familiar with on language they tend to write better code so we can&#39;t tell what you&#39;ve done and whether it&#39;s a good practice for Ruby, resulting in a very broad question."}], "answers": [{"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1446056122, "post_id": 33398268, "comment_id": 54588579, "body": "Your benchmarks would be more meaningful if run against more than one IP address. <code>ipaddrs = 500_000.times.map { IPAddr.new(rand(2**32), Socket::AF_INET).to_s }</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1446056897, "post_id": 33398268, "comment_id": 54589048, "body": "My benchmarks are to show the OP that it&#39;s easy to benchmark and obtain usable results. The deltas show significant differences in speed due to the expressions used, and parsing one address vs another isn&#39;t going to change that."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1446058117, "post_id": 33398268, "comment_id": 54589794, "body": "Your first point is fair. To your second point, it&#39;s not about parsing performance between different IP addresses, it&#39;s about performance of the different methods in aggregate. The OP is asking about handling millions of IP addresses, so any benchmarking should take that into consideration. A benchmark of a single line of Ruby run one time is nearly meaningless."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1446058193, "post_id": 33398268, "comment_id": 54589842, "body": "Fruity doesn&#39;t run &quot;one time&quot;. It&#39;s more sophisticated than that. And, you are more than welcome to add a more sophisticated benchmarking example."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1446058542, "post_id": 33398268, "comment_id": 54590095, "body": "Ah, interesting. I&#39;ll have to start using fruity!"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 2, "last_activity_date": 1446055479, "last_edit_date": 1446055479, "creation_date": 1446055011, "answer_id": 33398268, "question_id": 33396861, "link": "https://stackoverflow.com/questions/33396861/what-is-the-fastest-way-to-convert-an-ipv4-address-to-an-integer-in-ruby/33398268#33398268", "title": "What is the fastest way to convert an IPv4 address to an integer in Ruby?", "body": "<p>It's really difficult to help you as we don't necessarily have access to Python or your Ruby vs. Python code benchmarking both, and us writing both would be invalid as then you'd have to shoehorn anything we do into your code, potentially slowing or breaking it. However, here's something that might be useful to begin honing your code to improve its speed:</p>\n\n<pre><code>require 'fruity'\nrequire 'ipaddr'\n\nSTR = '192.168.0.0'\ncompare do\n  ipaddr_new { IPAddr.new(STR).to_i }\n  sockaddr_in { Socket.sockaddr_in(0, STR)[4,4].unpack('L&gt;')[0] }\n  pack1 { STR.split('.').map(&amp;:to_i).pack('CCCC').unpack('L&gt;')[0] }\n  pack2  { STR.split('.').map(&amp;:to_i).inject(0) { |sum, v| (sum &lt;&lt; 8) + v } }\nend\n</code></pre>\n\n<p>Running that results in:</p>\n\n<pre><code># &gt;&gt; Running each test 512 times. Test will take about 1 second.\n# &gt;&gt; sockaddr_in is faster than pack2 by 30.000000000000004% \u00b1 1.0%\n# &gt;&gt; pack2 is faster than pack1 by 19.999999999999996% \u00b1 1.0%\n# &gt;&gt; pack1 is faster than ipaddr_new by 2.9x \u00b1 0.1\n</code></pre>\n\n<p>Comparing your <code>N</code> change to <code>L&gt;</code> or <code>L!</code> shows:</p>\n\n<pre><code>Socket.sockaddr_in(0, STR)[4,4].unpack('L&gt;')[0] # =&gt; 3232235520\nSocket.sockaddr_in(0, STR)[4,4].unpack('L!')[0] # =&gt; nil\nSocket.sockaddr_in(0, STR)[4,4].unpack('N')[0] # =&gt; 3232235520\n</code></pre>\n\n<p>So <code>L!</code> is invalid.</p>\n\n<pre><code>compare do\n  sockaddr_in1 { Socket.sockaddr_in(0, STR)[4,4].unpack('L&gt;')[0] }\n  sockaddr_in2 { Socket.sockaddr_in(0, STR)[4,4].unpack('L!')[0] }\n  sockaddr_in3 { Socket.sockaddr_in(0, STR)[4,4].unpack('N')[0] }\nend\n\n# &gt;&gt; Running each test 1024 times. Test will take about 1 second.\n# &gt;&gt; sockaddr_in2 is faster than sockaddr_in1 by 10.000000000000009% \u00b1 10.0% (results differ:  vs 3232235520)\n# &gt;&gt; sockaddr_in1 is similar to sockaddr_in3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1446059645, "post_id": 33399502, "comment_id": 54590739, "body": "You left out an obvious one: <code>x.report(&#39;gsub:&#39;) { ipaddrs.map { |str| str.sub!(&#39;.&#39;, &#39;&#39;).to_i } }</code> ... it&#39;s destructive and isn&#39;t as fast as Socket, but it&#39;s not far behind..."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1446059750, "post_id": 33399502, "comment_id": 54590818, "body": "That&#39;s not what we&#39;re talking about here. :-) Removing the periods from an IP address and concatenating the octets is not the same as converting it to a binary integer. Play around with an IP address calculator and note the binary/decimal forms. <a href=\"http://www.csgnetwork.com/ipaddconv.html\" rel=\"nofollow noreferrer\">csgnetwork.com/ipaddconv.html</a>"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1446059926, "last_edit_date": 1446059926, "creation_date": 1446059039, "answer_id": 33399502, "question_id": 33396861, "link": "https://stackoverflow.com/questions/33396861/what-is-the-fastest-way-to-convert-an-ipv4-address-to-an-integer-in-ruby/33399502#33399502", "title": "What is the fastest way to convert an IPv4 address to an integer in Ruby?", "body": "<p>Here are benchmark results using a large selection of randomly-generated IPv4 addresses:</p>\n\n<pre><code>       user     system      total        real\nIPAddr:  3.240000   0.000000   3.240000 (  3.242000)\nSocket:  0.760000   0.000000   0.760000 (  0.759157)\npack:    1.790000   0.010000   1.800000 (  1.797654)\nreduce:  1.570000   0.010000   1.580000 (  1.579099)\nipgem:   4.060000   0.000000   4.060000 (  4.061129)\n</code></pre>\n\n<p>As I mentioned in my comment above, the <code>Socket.sockaddr_in</code> technique seems to be the fastest. I'll attach the benchmarking code below.</p>\n\n<p>One thing that occurred to me as I was working on this was that most of these techniques are IPv4-specific. Considering the <a href=\"http://www.networkworld.com/article/2985340/ipv6/arin-finally-runs-out-of-ipv4-addresses.html\" rel=\"nofollow\">impending</a> switch to IPv6, it's probably unwise to limit your code to IPv4. If this were a one-off, fine, but considering your performance concerns I'm guessing this is meant to be reusable.</p>\n\n<p>If you really want to crush the benchmark, you should look into processing the log(s) in parallel using something like <a href=\"https://github.com/grosser/parallel\" rel=\"nofollow\">Parallel</a> or <a href=\"https://github.com/ahoward/forkoff\" rel=\"nofollow\">forkoff</a>. Use all of the cores. </p>\n\n<pre><code>require 'benchmark'\nrequire 'ipaddr'\nrequire 'ipaddress'\n\nn = 500_000\nfamily = Socket::AF_INET # IPv4\nipaddrs = n.times.map { IPAddr.new(rand(2**32), family).to_s }\n\nBenchmark.bm do |x|\n  x.report('IPAddr:') { ipaddrs.map { |str| IPAddr.new(str).to_i } }\n  x.report('Socket:') { ipaddrs.map { |str| Socket.sockaddr_in(0, str).byteslice(4, 4).unpack('N').first } }\n  x.report('pack:  ') { ipaddrs.map { |str| str.split('.').map(&amp;:to_i).pack('CCCC').unpack('L&gt;').first } }\n  x.report('reduce:') { ipaddrs.map { |str| str.split('.').map(&amp;:to_i).reduce(0) { |sum, v| (sum &lt;&lt; 8) + v } } }\n  x.report('ipgem: ') { ipaddrs.map { |str| IPAddress.parse(str).to_u32 } }\nend\n</code></pre>\n\n<p>Running a similar benchmark in Python3 (using the snippet you provided as a starting point) yields a time of about 0.242 seconds on the same machine, so about three times faster than the fastest Ruby version. </p>\n\n<pre><code>import time, struct, socket, random\n\nn = 500000\nipaddrs = [socket.inet_ntoa(struct.pack('&gt;I', random.randint(1, 0xffffffff))) for i in range(n)]\n\nt1 = time.time()\nfor ipaddr in ipaddrs:\n    struct.unpack('!L', socket.inet_aton(ipaddr))[0]\nt2 = time.time()\nprint(t2 - t1)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 1865337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4fa9afe0326c05f72d99e36dc503f0a?s=128&d=identicon&r=PG", "display_name": "Zephyr Dodolee", "link": "https://stackoverflow.com/users/1865337/zephyr-dodolee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 33398268, "answer_count": 2, "score": 0, "last_activity_date": 1446059926, "creation_date": 1446050812, "last_edit_date": 1446059186, "question_id": 33396861, "link": "https://stackoverflow.com/questions/33396861/what-is-the-fastest-way-to-convert-an-ipv4-address-to-an-integer-in-ruby", "title": "What is the fastest way to convert an IPv4 address to an integer in Ruby?", "body": "<p>I have about 1,000,000 IPv4 addresses, and I need to convert them to integers.</p>\n\n<p>The methods I have tried:</p>\n\n<ol>\n<li><code>IPAddr.new(str).to_i</code></li>\n<li><code>Socket.sockaddr_in(0, str)[4,4].unpack('L&gt;')[0]</code></li>\n<li><code>str.split('.').map(&amp;:to_i).pack('CCCC').unpack('L&gt;')[0]</code></li>\n<li><code>str.split('.').map(&amp;:to_i).inject(0) { |sum, v| (sum &lt;&lt; 8) + v }</code></li>\n</ol>\n\n<p>However, all of them are at least 10x slower than this Python method:</p>\n\n<pre><code>struct.unpack('!L', socket.inet_aton(str))[0]\n</code></pre>\n\n<p>Is there any way other than write a C-Extension that is as fast as Python?</p>\n\n<p>Here is the simple benchmark, in this benchmark, Python is 2x faster than Ruby, I'll see if the result will get bigger when processing random IPs.</p>\n\n<p>Ruby:</p>\n\n<pre><code>require 'socket'\nt1 = Time.now\n10000000.times do\n    Socket.sockaddr_in(0, '192.168.1.1')[4,4].unpack('L&gt;')[0]\nend\nt2 = Time.now\nputs t2 - t1\n</code></pre>\n\n<p>Python:</p>\n\n<pre><code>import time, struct, socket\nt1 = time.time()\nfor i in xrange(10000000):\n    struct.unpack('!L', socket.inet_aton('192.168.1.1'))[0]\nt2 = time.time()\nprint t2 - t1\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "rack", "gridfs"], "owner": {"reputation": 53, "user_id": 5209543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd4476b0cdf2c5c053913eabee4ce18?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoshin U", "link": "https://stackoverflow.com/users/5209543/jaoshin-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446050586, "creation_date": 1446050586, "question_id": 33396763, "link": "https://stackoverflow.com/questions/33396763/uninitialized-constant-bsoninvalidobjectid-error-for-rack-gridfs-gem", "title": "uninitialized constant BSON::InvalidObjectId Error for rack-gridfs gem", "body": "<p>I have some images stored in GridFs of Mongodb and I would like to get the url of the image. I installed rack-gridfs gem and here is the link to the gem: <a href=\"https://github.com/skinandbones/rack-gridfs/\" rel=\"nofollow\">https://github.com/skinandbones/rack-gridfs/</a></p>\n\n<p>I am currently using Rails 4.0.0 so I edited the config/routes.rb only as following: </p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :admin_users, ActiveAdmin::Devise.config\n  ActiveAdmin.routes(self)\n\n  namespace :admin do\n    resources :users do    \n      resources :annotations\n    end\n    mount Rack::GridFS::Endpoint.new(:db =&gt;Mongoid::Config.sessions[:default]), :at =&gt; \"gridfs\"\n  end\nend\n</code></pre>\n\n<p>But when I tried <a href=\"http://localhost:3000/admin/gridfs/54f5ece4e4b0e8f8dcce15d0\" rel=\"nofollow\">http://localhost:3000/admin/gridfs/54f5ece4e4b0e8f8dcce15d0</a>, an error came up as \"<strong>uninitialized constant BSON::InvalidObjectId</strong>\". The same error came up when I tried <a href=\"http://localhost:3000/admin/gridfs\" rel=\"nofollow\">http://localhost:3000/admin/gridfs</a>. I got the id from the fs.files collection of the Mongodb. </p>\n\n<p>Here is an example of an image in fs.files: </p>\n\n<pre><code>{ \"_id\" : ObjectId(\"55314ad2e4b08b15f51ddf65\"), \"metadata\" : { \"_id\" :  \"ced7ca7f-e287-45b5-a58b-70b9f397a253\", \"media_id\" : \"2ED3539B-E62B-4EA1-8224-3EE0DA8386E8.jpg\", \"data_point_id\" : \"1A48F01F-725F-49FD-A2A2-347D71910693\", \"size\" : NumberLong(354010), \"content_type\" : \"image/jpeg\"}, \"filename\" : \"ced7ca7f-e287-45b5-a58b-70b9f397a253\", \"aliases\" : null, \"chunkSize\" : NumberLong(261120), \"uploadDate\" : ISODate(\"2015-04-17T18:02:58.880Z\"), \"length\" : NumberLong(354010), \"contentType\" : \"image/jpeg\", \"md5\" : \"e01669ddc1b26b48086ec1c700004f00\" }\n</code></pre>\n\n<p>Any help is appreciated and thank you very much!!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1446047458, "post_id": 33395141, "comment_id": 54582530, "body": "Is this breaking law of demeter? This might suggest that <code>blog</code> knows to grab the <code>city</code> through <code>user</code> as opposed to <code>blog</code> just knowing that <code>user</code> can handle getting the <code>city</code>. If so: is there another way to do it so that it doesn&#39;t break law of demeter?  This might not be the case, so I&#39;m just checking."}], "tags": [], "owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "is_accepted": true, "score": 5, "last_activity_date": 1446046136, "creation_date": 1446046136, "answer_id": 33395141, "question_id": 33395082, "link": "https://stackoverflow.com/questions/33395082/eager-load-with-includes-two-levels-or-more-deep/33395141#33395141", "title": "Eager Load with #includes two levels or more deep", "body": "<p>Use hash syntax to show the nested includes</p>\n\n<pre><code>@blogs = Blog.all.includes(:user =&gt; :city)\n</code></pre>\n\n<p>You can read a bit more about it in the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations\" rel=\"noreferrer\">ActiveRecord Query Interface guide</a></p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 33395141, "answer_count": 1, "score": 2, "last_activity_date": 1446046136, "creation_date": 1446045976, "question_id": 33395082, "link": "https://stackoverflow.com/questions/33395082/eager-load-with-includes-two-levels-or-more-deep", "title": "Eager Load with #includes two levels or more deep", "body": "<p>How do you eager load with <code>includes</code> deeper than one level?  Eager Loading one level deep is straight forward:</p>\n\n<p>Ex:</p>\n\n<pre><code>@blogs = Blog.all.includes(:user)\n</code></pre>\n\n<p>Given that each <code>blog</code> has a <code>belongs_to</code> association to a <code>user</code>.  Thus: each <code>blog</code> record has a <code>user_id</code> attribute.</p>\n\n<p>Now: What if the <code>user</code> has a <code>belongs_to</code> association to the <code>city</code> where they are from.  So: each <code>user</code> record has a <code>city_id</code> attribute.</p>\n\n<p>What I want to do is </p>\n\n<ul>\n<li>Grab all the <code>blogs</code></li>\n<li>Eager load the associated <code>user</code> with <code>includes</code></li>\n<li>Eager load the blog's <code>city</code>, which is grabbed by going through the blog's associated <code>user</code>.  (maybe this is done with <code>includes</code> as well but I don't know the syntax.</li>\n</ul>\n\n<p>Here would be the models:</p>\n\n<pre><code># app/models/blog.rb\nclass Blog &lt; ActiveRecord::Base\n  belongs_to :user\nend\n\n# app/models/user.rb\nclass User &lt; ActiveRecord::Base\n  has_many :blogs\n  belongs_to :city\nend\n\n# app/models/city.rb\nclass City &lt; ActiveRecord::Base\n  has_many :users\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446045694, "post_id": 33394938, "comment_id": 54581232, "body": "Not sure what you meant by <code>input.include? != false</code>, but <code>include?</code> requires a parameter."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446045778, "post_id": 33394938, "comment_id": 54581294, "body": "@Sergio Tulentsev Would you mind elaborating a little more? Could I do <code>.include?(false)</code> to return it as non existent?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446045976, "post_id": 33394938, "comment_id": 54581442, "body": "@SergioTulentsev this should be a new operator syntax, that will be introduced in Ruby3: <code>?!=</code>, meaning \u201cnot sure if it is equal to.\u201d :)"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446046464, "post_id": 33394938, "comment_id": 54581768, "body": "@mudasobwa  lol, I updated the post, I realized I was being an idiot :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446046770, "post_id": 33394938, "comment_id": 54582017, "body": "Please specify a condition you want to use to print \u201cInvalid ...\u201d in plain English. <code>input</code> is always a string, since it came from <code>stdin</code>, it makes no sense to compare it against <code>false</code>."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446046863, "post_id": 33394938, "comment_id": 54582069, "body": "@mudasobwa So would I compare it to the hash instead?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446046946, "post_id": 33394938, "comment_id": 54582133, "body": "Comparison of string object against hash object makes no sense either. Please just describe what do you want to achieve."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446057041, "post_id": 33394938, "comment_id": 54589139, "body": "It isn&#39;t necessary, or particularly desirable to add &quot;Update #1...&quot; comments. Instead, add the needed information inline, as if it was part of the original document to maintain the readability of the question. If necessary we can see when and where something was changed."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446061446, "post_id": 33394938, "comment_id": 54591792, "body": "@the Tin Man I am sorry, I was just trying to keep the post updated"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446084987, "post_id": 33394938, "comment_id": 54601111, "body": "We appreciate the idea, but, like I said, it&#39;s possible for us to tell when there&#39;s been a change, and even see what changed. Stack Overflow isn&#39;t a forum or discussion group. Instead, we are helping create an online book of programming questions and answers. Think of how you see text books written; SO is a little less formal, but it&#39;s still similar."}], "answers": [{"comments": [{"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 0, "creation_date": 1446048632, "post_id": 33395831, "comment_id": 54583442, "body": "Just wondering: why would you use a regex for matching a single letter q, instead of simply <code>input == &#39;q&#39;</code>? In terms of readability it&#39;s worse (hence the need for a comment). What&#39;s the advantage?"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 0, "creation_date": 1446049912, "post_id": 33395831, "comment_id": 54584412, "body": "@Mischa Because that way it will not matter about how the letter is spelt, you could also just do:  <code>when input =~ &#47;q&#47;i</code>  It will make it so that they can put in &quot;q&quot; or &quot;Q&quot;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1446057292, "post_id": 33395831, "comment_id": 54589284, "body": "It&#39;s not &quot;ruby guys&quot; who use YAML, it&#39;s anyone who wants an easily read, serialized representation of that object/data that can be reused by multiple languages. &quot;ruby guys&quot; are just like &quot;python guys&quot;, &quot;perl guys&quot; or &quot;java guys&quot; that way."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1446057194, "last_edit_date": 1446057194, "creation_date": 1446047905, "answer_id": 33395831, "question_id": 33394938, "link": "https://stackoverflow.com/questions/33394938/making-translator-able-to-translate-more-then-one-language/33395831#33395831", "title": "Making translator able to translate more then one language", "body": "<p>First of all, one probably should not put a hash, written with Ruby syntax, in text files. Ruby guys commonly use <a href=\"http://yaml.org/\" rel=\"nofollow\">YAML</a> for that:</p>\n\n<p>es_en.yml:</p>\n\n<pre><code>a: to\nabajo: down\nel_abanico: fan\n</code></pre>\n\n<p>Then one might load this file into a hash:</p>\n\n<pre><code>require 'yaml'\ntranslations = YAML.load_file 'es_en.yml'\n#\u21d2 {  \n#    \"a\" =&gt; \"to\"\n#    \"abajo\" =&gt; \"down\"\n#    \"el_abanico\" =&gt; \"fan\"\n# }\n</code></pre>\n\n<p>It\u2019s time now to deal with <code>input</code>:</p>\n\n<pre><code>input = gets.chomp\ncase\nwhen translations[input]\n  puts \"The translation is: #{translations[input]}\"\nwhen input =~ /^q$/i # input is a single \u201cq\u201d letter\n  exit\nelse \"Translation not found\"\nend\n</code></pre>\n\n<p>You might want to put this in the loop.</p>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 33395831, "answer_count": 1, "score": -1, "last_activity_date": 1446057194, "creation_date": 1446045591, "last_edit_date": 1446057110, "question_id": 33394938, "link": "https://stackoverflow.com/questions/33394938/making-translator-able-to-translate-more-then-one-language", "title": "Making translator able to translate more then one language", "body": "<p><strong>UPDATE: Fixed the argument error, by removing <code>elsif input.include? != false</code> on elsif and replacing with <code>elsif input == false</code></strong></p>\n\n<p><strong>UPDATE2: Code is working perfectly, translates precisely and gives correct translations to phrases</strong></p>\n\n<pre><code>require 'yaml'\n\ndef translate\n    translations = YAML.load_file 'spanish.yml'\n\n    puts \"Enter word or phrase to be translated to English, press 'Q' to quit:\"\n    input = gets.chomp\n    case\n    when translations[input]\n        puts \"The translation to English is: #{translations[input]}\"\n    when input =~ /q/i\n        exit\n    else\n        puts \"Invalid word or phrase redirecting...\"\n        translate\n    end\nend\ntranslate\n</code></pre>\n\n<p>Is there a way I could make the translator also be able to translate from Russian? Here's the Russian YAML file:</p>\n\n<pre><code>\u0438: and, though\n\u0432: in, at\n\u043d\u0435: not\n\u043e\u043d: he\n\u043d\u0430: on, it, at, to\n\u044f: I\n\u0447\u0442\u043e: what, that, why\n\u0442\u043e\u0442: that \n\u0431\u044b\u0442\u044c: to be\n\u0441: with and, from, of\n\u0430: while, and, but \n\u0432\u0435\u0441\u044c: all, everything\n\u044d\u0442\u043e: that, this, it \n\u043a\u0430\u043a: how, what, as, like \n</code></pre>\n\n<p>Would I do the same thing as translating from Spanish but instead of loading Spanish would I load <code>russian.yaml</code> or would I have to make another definition such as:</p>\n\n<pre><code>def russian_translate\n  translations = YAML.load_file 'russian.yml'\n  puts \"Please enter the phrase to translate\"\n  etc...\n</code></pre>\n"}, {"tags": ["ruby", "thinking-sphinx"], "answers": [{"tags": [], "owner": {"reputation": 568, "user_id": 1491929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c804b3e0f1c1cbb4c6e6c6d633d19c46?s=128&d=identicon&r=PG&f=1", "display_name": "user1491929", "link": "https://stackoverflow.com/users/1491929/user1491929"}, "is_accepted": true, "score": 0, "last_activity_date": 1446568183, "last_edit_date": 1446568183, "creation_date": 1446499346, "answer_id": 33487193, "question_id": 33394874, "link": "https://stackoverflow.com/questions/33394874/thinkingsphinx-with-all-or-query/33487193#33487193", "title": "ThinkingSphinx with_all OR query", "body": "<p>After much non Rock related head banging I found a working solution.</p>\n\n<pre><code>srange  = date_range[:start].to_datetime.utc.beginning_of_day.to_i\nerange  = date_range[:end].to_datetime.utc.end_of_day.to_i\n\n# * full range falls within start_date &amp; end_date\n# * start_date &amp; end_date is within the full range\n# * end range is within start_date &amp; end_date\n# * start range is within start_date &amp; end_date\n\nsphinx_select = \"\n*, (IF(\n#{srange} &gt;= start_date AND\n#{srange} &lt;= end_date AND\n#{erange} &gt;= start_date AND\n#{erange} &lt;= end_date, 1, 0) +\n\nIF(\nstart_date &gt;= #{srange} AND\nstart_date &lt;= #{erange} AND\nend_date   &gt;= #{srange} AND\nend_date   &lt;= #{erange}, 1, 0) +\n\nIF(\n#{srange} &lt;= start_date AND\n#{srange} &lt;= end_date AND\n#{erange} &gt;= start_date AND\n#{erange} &lt;= end_date, 1, 0) +\n\nIF(\n#{srange} &gt;= start_date AND\n#{srange} &lt;= end_date AND\n#{erange} &gt;= start_date AND\n#{erange} &gt;= end_date, 1, 0)) as in_date_range\"\n\nMyModel.search('',\n               select: select,\n               where: {\"in_date_range\" =&gt; [1,2,3,4]})\n</code></pre>\n"}], "owner": {"reputation": 568, "user_id": 1491929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c804b3e0f1c1cbb4c6e6c6d633d19c46?s=128&d=identicon&r=PG&f=1", "display_name": "user1491929", "link": "https://stackoverflow.com/users/1491929/user1491929"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 33487193, "answer_count": 1, "score": 0, "last_activity_date": 1446568183, "creation_date": 1446045430, "question_id": 33394874, "link": "https://stackoverflow.com/questions/33394874/thinkingsphinx-with-all-or-query", "title": "ThinkingSphinx with_all OR query", "body": "<p>I'm trying to return results who's <code>start_date</code> <strong>or</strong> <code>end_date</code> fall within a date range. I'm using <code>with_all</code> in my TS query like such:</p>\n\n<pre><code>range = (start_date..end_date)\nwith_all = { start_date: [range], end_date: [range] }\n</code></pre>\n\n<p>However, this does not work because I believe this will require <em>both</em> the <code>start_date</code> and <code>end_date</code> to fall within the range. </p>\n\n<p>What do I need to do so that it will return results if <strong>either</strong> the <code>start_date</code> or <code>end_date</code> fall within the range?</p>\n"}, {"tags": ["ruby", "gem", "bundler", "ruby-2.0", "fluentd"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446045136, "post_id": 33394721, "comment_id": 54580788, "body": "Can you show us your ruby version by command <code>ruby -v</code>?"}, {"owner": {"reputation": 459, "user_id": 2715348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DFWO9.png?s=128&g=1", "display_name": "reza.safiyat", "link": "https://stackoverflow.com/users/2715348/reza-safiyat"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446046017, "post_id": 33394721, "comment_id": 54581476, "body": "<code>ruby -v</code> gives the output <code>ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]</code> while <code>ruby2.0 -v</code> gives the output <code>ruby 2.0.0p384 (2014-01-12) [x86_64-linux-gnu]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 2615, "user_id": 855809, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OmFej.jpg?s=128&g=1", "display_name": "Knight71", "link": "https://stackoverflow.com/users/855809/knight71"}, "edited": false, "score": 0, "creation_date": 1469691101, "post_id": 33395499, "comment_id": 64643696, "body": "Did you install rbenv successfully?"}, {"owner": {"reputation": 238, "user_id": 3188479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ly0by.png?s=128&g=1", "display_name": "swsmith", "link": "https://stackoverflow.com/users/3188479/swsmith"}, "edited": false, "score": 0, "creation_date": 1472003539, "post_id": 33395499, "comment_id": 65573640, "body": "To get <code>rbenv install</code> working you need to install the <code>ruby-build</code> plugin. It does not come by default. Installation instructions here: <a href=\"https://github.com/rbenv/ruby-build\" rel=\"nofollow noreferrer\">github.com/rbenv/ruby-build</a>"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1453991809, "last_edit_date": 1453991809, "creation_date": 1446047059, "answer_id": 33395499, "question_id": 33394721, "link": "https://stackoverflow.com/questions/33394721/geminstallerror-strptime-requires-ruby-version-2-0-even-after-installin/33395499#33395499", "title": "&quot;Gem::InstallError: strptime requires Ruby version ~&gt; 2.0.&quot; even after installing the requirements", "body": "<p>your current ruby version is 1.9.3, you should change it to ~> 2.0. I suggest you use <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow\">rbenv</a> to install ruby. <code>rbenv</code> is a simple tool for managing multiple ruby versions.</p>\n\n<p>Installation:</p>\n\n<pre><code>$ git clone https://github.com/sstephenson/rbenv.git ~/.rbenv\n$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc\n$ echo 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\n</code></pre>\n\n<p>then install ruby:</p>\n\n<pre><code>rbenv install -v 2.0.0\nrbenv global 2.0.0\n</code></pre>\n\n<p>check your ruby version:</p>\n\n<pre><code>ruby -v\n</code></pre>\n\n<p>then you can install fluentd correctly.</p>\n"}], "owner": {"reputation": 459, "user_id": 2715348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DFWO9.png?s=128&g=1", "display_name": "reza.safiyat", "link": "https://stackoverflow.com/users/2715348/reza-safiyat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2061, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453991809, "creation_date": 1446045007, "question_id": 33394721, "link": "https://stackoverflow.com/questions/33394721/geminstallerror-strptime-requires-ruby-version-2-0-even-after-installin", "title": "&quot;Gem::InstallError: strptime requires Ruby version ~&gt; 2.0.&quot; even after installing the requirements", "body": "<p>I was trying to install <a href=\"https://github.com/fluent/fluentd\" rel=\"nofollow\">fluentd</a> on a ubuntu-server from source and followed the procedure given <a href=\"http://docs.fluentd.org/articles/install-from-source\" rel=\"nofollow\">here</a>.<br/></p>\n\n<p>I ran the following commands to setup the ruby environment:</p>\n\n<pre><code>sudo apt-get -y install ruby2.0 ruby2.0-dev\nsudo apt-get -y install bundler\nsudo gem2.0 install rdoc\n</code></pre>\n\n<p>Then I ran the following commands:</p>\n\n<pre><code># Download the latest code from github\ncurl -O https://codeload.github.com/fluent/fluentd/zip/master\nmv master fluentd-master.zip\n\nunzip -o fluentd-master.zip\ncd fluentd-master\nbundle install\n</code></pre>\n\n<p>Running this last command <code>bundle install</code> gives the following output, culminating into error.</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/.........\nResolving dependencies...\nUsing rake (10.4.2) \nUsing cool.io (1.4.1) \nUsing flexmock (1.3.3) \nUsing http_parser.rb (0.6.0) \nUsing json (1.8.3) \nUsing msgpack (0.7.0) \nUsing sigdump (0.2.3) \nInstalling strptime (0.1.4) \nGem::InstallError: strptime requires Ruby version ~&gt; 2.0.\nAn error occurred while installing strptime (0.1.4), and Bundler cannot continue.\nMake sure that `gem install strptime -v '0.1.4'` succeeds before bundling.\n</code></pre>\n\n<p>I sym-linked <code>gem</code> to point to <code>gem2.0</code> and was able to run <code>gem install strptime -v '0.1.4'</code> successfully after that, but running <code>bundle install</code> still gives the same error.<br/>\n<br/>\nHow do I fix the problem?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "mysql2"], "comments": [{"owner": {"reputation": 119223, "user_id": 5070879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7534153a9cc70ad4e20680d6ca1b09ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lukasz Szozda", "link": "https://stackoverflow.com/users/5070879/lukasz-szozda"}, "edited": false, "score": 0, "creation_date": 1446044635, "post_id": 33394570, "comment_id": 54580402, "body": "Probably you try to concatenate string with NULL"}, {"owner": {"reputation": 1, "user_id": 4106621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d43b7ce489139ed4f15392f48d33c1?s=128&d=identicon&r=PG&f=1", "display_name": "camiseta22", "link": "https://stackoverflow.com/users/4106621/camiseta22"}, "reply_to_user": {"reputation": 119223, "user_id": 5070879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7534153a9cc70ad4e20680d6ca1b09ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lukasz Szozda", "link": "https://stackoverflow.com/users/5070879/lukasz-szozda"}, "edited": false, "score": 0, "creation_date": 1446044822, "post_id": 33394570, "comment_id": 54580550, "body": "But I m not concatenating values, I m just searching for a value and it retuns empty when having &quot; (quotation) on database."}, {"owner": {"reputation": 1, "user_id": 4106621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d43b7ce489139ed4f15392f48d33c1?s=128&d=identicon&r=PG&f=1", "display_name": "camiseta22", "link": "https://stackoverflow.com/users/4106621/camiseta22"}, "reply_to_user": {"reputation": 119223, "user_id": 5070879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7534153a9cc70ad4e20680d6ca1b09ff?s=128&d=identicon&r=PG&f=1", "display_name": "Lukasz Szozda", "link": "https://stackoverflow.com/users/5070879/lukasz-szozda"}, "edited": false, "score": 0, "creation_date": 1446044950, "post_id": 33394570, "comment_id": 54580657, "body": "The quotation is on database, I do not want to find specific values with quotations. I am making queries like &quot;SELECT * FROM table_name&quot;"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1446045779, "post_id": 33394570, "comment_id": 54581295, "body": "When you say &quot;it returns an empty string&quot;, what do you mean?  I&#39;d expect this to return an instance of your Model class, or <code>nil</code>."}, {"owner": {"reputation": 1, "user_id": 4106621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d43b7ce489139ed4f15392f48d33c1?s=128&d=identicon&r=PG&f=1", "display_name": "camiseta22", "link": "https://stackoverflow.com/users/4106621/camiseta22"}, "edited": false, "score": 0, "creation_date": 1446049678, "post_id": 33394570, "comment_id": 54584232, "body": "On <code>query.first</code> it returns a instance of a model, but it has a attribute that is string, and this string returns empty if the value comes with quotes."}], "owner": {"reputation": 1, "user_id": 4106621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d43b7ce489139ed4f15392f48d33c1?s=128&d=identicon&r=PG&f=1", "display_name": "camiseta22", "link": "https://stackoverflow.com/users/4106621/camiseta22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446044988, "creation_date": 1446044580, "last_edit_date": 1446044988, "question_id": 33394570, "link": "https://stackoverflow.com/questions/33394570/returning-blank-string-when-having-quotation", "title": "Returning blank string when having quotation (&quot;)", "body": "<p>I`m trying to find values that contains quotation marks (\"). But when they returns, it comes with a empty string. This is happening with this piece code:</p>\n\n<pre><code>query = Model.where(position: position + 1).in_area(area).of_type(area_type).order('id DESC').includes(:recipe, :category)\nquery = query.where(category_id: ((category)? category : nil))\nthis_area &lt;&lt; query.first\n</code></pre>\n\n<p>It is expected to return values like: 'My name is \"Jean Paul\"'\nBut it returns only a empty string.\nI`m using ruby on rails with mysql2 gem.</p>\n\n<p>I don`t want to find specific values with quotation, but when they come with quotation, it returns empty.</p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5801535, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BCSinFxjd6s/AAAAAAAAAAI/AAAAAAAAABY/UnGl0UryT0w/photo.jpg?sz=128", "display_name": "Lorenzo Angelini", "link": "https://stackoverflow.com/users/5801535/lorenzo-angelini"}, "is_accepted": false, "score": -1, "last_activity_date": 1469388988, "last_edit_date": 1469388988, "creation_date": 1469386372, "answer_id": 38555609, "question_id": 33394317, "link": "https://stackoverflow.com/questions/33394317/how-to-verify-if-an-embedded-field-changed-on-before-save/38555609#38555609", "title": "How to verify if an embedded field changed on before_save?", "body": "<p>Adding these two methods to your Model and calling <code>get_embedded_document_changes</code> should provide you an hash with the changes to all its embedded documents:</p>\n\n<pre><code>def get_embedded_document_changes\n  data = {}\n\n  relations.each do |name, relation|\n    next unless [:embeds_one, :embeds_many].include? relation.macro.to_sym\n\n    # only if changes are present\n    child = send(name.to_sym)\n    next unless child\n    next if child.previous_changes.empty?\n\n    child_data = get_previous_changes_for_model(child)\n    data[name] = child_data\n  end\n\n  data\nend\n\ndef get_previous_changes_for_model(model)\n  data = {}\n  model.previous_changes.each do |key, change|\n    data[key] = {:from =&gt; change[0], :to =&gt; change[1]}\n  end\n  data\nend\n</code></pre>\n\n<p>[ source: <a href=\"https://gist.github.com/derickbailey/1049304\" rel=\"nofollow\">https://gist.github.com/derickbailey/1049304</a> ]</p>\n"}], "owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1469388988, "creation_date": 1446043865, "last_edit_date": 1446044403, "question_id": 33394317, "link": "https://stackoverflow.com/questions/33394317/how-to-verify-if-an-embedded-field-changed-on-before-save", "title": "How to verify if an embedded field changed on before_save?", "body": "<p>I am running Ruby 2.1 and Mongoid 5.0 (no Rails).</p>\n\n<p>I want to track on a <code>before_save</code> callback whether or not an embedded field has changed.</p>\n\n<p>I can use the <code>document.attribute_changed?</code> or <code>document.changed</code> methods to check normal fields, but somehow these don't work on relations (embed_one, has_one, etc).</p>\n\n<p>Is there a way of detecting these changes before saving the document?</p>\n\n<p>My model is something like this</p>\n\n<pre><code>class Company\n   include Mongoid::Document\n   include Mongoid::Attributes::Dynamic\n\n   field   :name,    type: String\n   #...\n\n   embeds_one :address, class_name: 'Address', inverse_of: :address\n   #...\n\n   before_save :activate_flags\n   def activate_flags \n      if self.changes.include? 'address'\n         #self.changes never includes \"address\"\n      end\n\n      if self.address_changed?\n         #This throws an exception\n      end\n   end  \n</code></pre>\n\n<p>One example of how I save my document is:</p>\n\n<pre><code>#...\ncompany.address = AddressUtilities.parse address\ncompany.save\n#After this, the callback is triggered, but self.changes is empty...\n#...\n</code></pre>\n\n<p>I have read the documentation and Google the hell out of it, but I can't find a solution?</p>\n\n<p>I have found <a href=\"https://github.com/versative/mongoid_relations_dirty_tracking\" rel=\"nofollow\">this gem</a>, but it's old and doesn't work with the newer versions of Mongoid. I want to check if there is another way of doing it before considering on trying to fix/pull request the gem...</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1446044071, "post_id": 33394378, "comment_id": 54579994, "body": "hey.. this looks promising.. but this wouldn&#39;t be going through the model, this would be going through an ActiveRecordAssociation.  I think it&#39;s probably &quot;not possible&quot; from a model itself?"}, {"owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "reply_to_user": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1446044307, "post_id": 33394378, "comment_id": 54580169, "body": "You can execute raw SQL. I&#39;ll update my answer to show that."}, {"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1446044481, "post_id": 33394378, "comment_id": 54580285, "body": "no, definitely - i understand that.   is it possible to execute that on the model itself, FROM the model?  i&#39;m thinking something like: <code>c.update_attribute_raw(:time_started, &#39;TIME_TO_SEC(TIMEDIFF(NOW(), time_started))&#39;)</code>  I just don&#39;t think this is possible - but i&#39;d love to hear a definitive yes or no"}, {"owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1446044596, "post_id": 33394378, "comment_id": 54580377, "body": "sircapsalot do you mean the instance of the model?"}, {"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "reply_to_user": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1446044648, "post_id": 33394378, "comment_id": 54580413, "body": "yes @user3334690 .. sorry I didn&#39;t disambiguate that :)"}, {"owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "reply_to_user": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "edited": false, "score": 0, "creation_date": 1446045959, "post_id": 33394378, "comment_id": 54581425, "body": "@sircapsalot to my best knowledge what you are asking is not possible with ActiveRecord. I believe that it is possible with <a href=\"https://github.com/rails/arel\" rel=\"nofollow noreferrer\">ARel</a>, however that would add quite a bit of complexity into the code."}, {"owner": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "edited": false, "score": 0, "creation_date": 1575371357, "post_id": 33394378, "comment_id": 104535767, "body": "We can&#39;t use this on creation of objects, can we?"}], "tags": [], "owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "is_accepted": true, "score": 5, "last_activity_date": 1446044190, "last_edit_date": 1446044190, "creation_date": 1446044029, "answer_id": 33394378, "question_id": 33394132, "link": "https://stackoverflow.com/questions/33394132/update-activerecord-attribute-with-sql-function/33394378#33394378", "title": "Update ActiveRecord attribute with SQL function", "body": "<p>You can use <code>#update_all</code> to do this</p>\n\n<pre><code>c.class.where(id: c.id).update_all(\"time_to_execute = TIME_TO_SEC(TIMEDIFF(NOW(), time_started))\")\n</code></pre>\n\n<p>Note that you can replace <code>c.class</code> with the actual class name of your model (not currently shown in the answer).</p>\n\n<h3>Update to show raw SQL implementation</h3>\n\n<pre><code>c.class.connection.execute \"update table set time_to_execute = TIME_TO_SEC(TIMEDIFF(NOW(), time_started)) WHERE id = #{ c.id }\"\n</code></pre>\n"}], "owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 1, "accepted_answer_id": 33394378, "answer_count": 1, "score": 2, "last_activity_date": 1446044190, "creation_date": 1446043370, "last_edit_date": 1446043688, "question_id": 33394132, "link": "https://stackoverflow.com/questions/33394132/update-activerecord-attribute-with-sql-function", "title": "Update ActiveRecord attribute with SQL function", "body": "<p>In rails, are you able to update a record's attribute with an evaluation of a SQL function?</p>\n\n<p>MySQL Table</p>\n\n<pre><code>| time_started        | time_to_execute |\n|---------------------------------------|\n| 2015-10-28 14:13:58 |      NULL       |\n</code></pre>\n\n<p>What I am trying to do:</p>\n\n<pre><code>update table set time_to_execute = TIME_TO_SEC(TIMEDIFF(NOW(), time_started))\n</code></pre>\n\n<p>through a model.</p>\n\n<hr>\n\n<p>I've tried to do this using the common attribute update methods to no avail.</p>\n\n<pre><code>c.update_attribute(:time_to_execute, 'TIME_TO_SEC(TIMEDIFF(NOW(), time_started))')\nc.update({:time_to_execute =&gt; 'TIME_TO_SEC(TIMEDIFF(NOW(), time_started))'})\n</code></pre>\n\n<h3>Is it possible to update attributes of an ActiveRecord model using SQL functions?</h3>\n\n<p>I know that I can accomplish this executing arbitrary SQL, or calculating diff between two <code>DateTime</code> ruby objects, but I'm wondering if this is possible via a model method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "partial-views", "onchange", "partial"], "answers": [{"comments": [{"owner": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "edited": false, "score": 1, "creation_date": 1446050955, "post_id": 33394222, "comment_id": 54585136, "body": "I wouldn&#39;t do this in a form, because the inputs in the hidden div will <b>still</b> be passed as parameters when the form is submitted. It is much better to load/remove/replace the contents of the div within the <code>change</code> event handler (rather than show/hide)."}, {"owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "reply_to_user": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "edited": false, "score": 0, "creation_date": 1446080133, "post_id": 33394222, "comment_id": 54599856, "body": "Hidden <code>input</code> tag values will be passed but just <code>div</code>"}], "tags": [], "owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "is_accepted": false, "score": 2, "last_activity_date": 1446045462, "last_edit_date": 1446045462, "creation_date": 1446043600, "answer_id": 33394222, "question_id": 33394068, "link": "https://stackoverflow.com/questions/33394068/render-partial-after-change-select/33394222#33394222", "title": "Render partial after change select", "body": "<p>Easiest way is render the partial with <code>display:none</code></p>\n\n<pre><code>&lt;div id='foo' style='display:none'&gt;\n  &lt;%= render :foobar %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And when a user select something, show it by JS(jQuery).</p>\n\n<pre><code>$('[name=question_type]').change(function() {\n  $('#foo').show();\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 5388185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb692828a762c49569ae76522393874b?s=128&d=identicon&r=PG&f=1", "display_name": "rob.d", "link": "https://stackoverflow.com/users/5388185/rob-d"}, "edited": false, "score": 0, "creation_date": 1446102732, "post_id": 33394613, "comment_id": 54606667, "body": "Could you explain me what i have to write in the controller that i can render _radio.html.erb file? Or which data i have to pass the variable data?"}, {"owner": {"reputation": 163, "user_id": 5388185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb692828a762c49569ae76522393874b?s=128&d=identicon&r=PG&f=1", "display_name": "rob.d", "link": "https://stackoverflow.com/users/5388185/rob-d"}, "edited": false, "score": 0, "creation_date": 1446116046, "post_id": 33394613, "comment_id": 54614485, "body": "I don&#39;t know what iam doing wrong.i have the  function someFunction(url){     jQuery.ajax({url: url, data: {some_data: &quot;data_value&quot;}, success: function(data) { jQuery(&quot;#some_div&quot;).html(data); } }); }   it doesn&#39;t work and i dont know why :("}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 163, "user_id": 5388185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb692828a762c49569ae76522393874b?s=128&d=identicon&r=PG&f=1", "display_name": "rob.d", "link": "https://stackoverflow.com/users/5388185/rob-d"}, "edited": false, "score": 0, "creation_date": 1446116340, "post_id": 33394613, "comment_id": 54614663, "body": "Then rob, it&#39;s really hard to tell you what&#39;s wrong until I see the error logs."}, {"owner": {"reputation": 163, "user_id": 5388185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb692828a762c49569ae76522393874b?s=128&d=identicon&r=PG&f=1", "display_name": "rob.d", "link": "https://stackoverflow.com/users/5388185/rob-d"}, "edited": false, "score": 0, "creation_date": 1446117135, "post_id": 33394613, "comment_id": 54615121, "body": "could you may tell me an tutorial or something like this which explain a solution for my problem?"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 163, "user_id": 5388185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb692828a762c49569ae76522393874b?s=128&d=identicon&r=PG&f=1", "display_name": "rob.d", "link": "https://stackoverflow.com/users/5388185/rob-d"}, "edited": false, "score": 0, "creation_date": 1446117749, "post_id": 33394613, "comment_id": 54615499, "body": "Seems like <a href=\"http://stackoverflow.com/a/11142247/2968762\">THIS</a> post says the exact same thing I&#39;m trying to explain. Just don&#39;t go for hide/show option as it has performance issues. Go with ajax call solution."}], "tags": [], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1446103300, "last_edit_date": 1446103300, "creation_date": 1446044716, "answer_id": 33394613, "question_id": 33394068, "link": "https://stackoverflow.com/questions/33394068/render-partial-after-change-select/33394613#33394613", "title": "Render partial after change select", "body": "<p>If you are using jQuery, then try this:</p>\n\n<p><strong>VIEW</strong></p>\n\n<pre><code>&lt;%= select_tag(\"qustion_type\",options_for_select([[\"Radio\", \"radio\", {:onclick =&gt; \"someFunction(#{controller_path})\"}],[\"Checkbox\", \"check\", {:onclick =&gt; \"someFunction(#{controller_path})\"}]])) %&gt;\n</code></pre>\n\n<p><strong>JAVASCRIPT</strong></p>\n\n<pre><code>function someFunction(url) {\n  jQuery.ajax({\n    url: url,\n    data: {some_data: \"data_value\"},\n    success: function(data) {\n      //data has the html code that you render in controller\n    }\n  });\n}\n</code></pre>\n\n<p><strong>EDIT</strong> (See Comments)</p>\n\n<p>As you asked that you need to render a partial on each option select. So, for each option select you need to hit a controller method. In my example <code>url</code> is that controller end point(eg:- <strong>render_radio_some_controller_path</strong>).</p>\n\n<pre><code>def render_radio\n  render :partial =&gt; \"radio\"\nend\n</code></pre>\n\n<p>After this, it will go to the success block of Ajax call and <strong>data</strong> will have the html defined in <code>radio.html.erb</code>. Now, you just have to use <code>jQuery</code> to update the desired div html with <strong>data</strong>(Eg:- <code>jQuery(\"#some_div\").html(data);</code>)</p>\n"}], "owner": {"reputation": 163, "user_id": 5388185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb692828a762c49569ae76522393874b?s=128&d=identicon&r=PG&f=1", "display_name": "rob.d", "link": "https://stackoverflow.com/users/5388185/rob-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1352, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1446103300, "creation_date": 1446043235, "last_edit_date": 1446045401, "question_id": 33394068, "link": "https://stackoverflow.com/questions/33394068/render-partial-after-change-select", "title": "Render partial after change select", "body": "<p>I have the following view</p>\n\n<pre><code>&lt;%= form_for @survey do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :title %&gt; &lt;br&gt;&lt;br&gt;\n    &lt;%= f.label :description %&gt;&lt;br&gt;\n    &lt;%= f.text_field :description %&gt;&lt;br&gt;&lt;br&gt;\n  &lt;/div&gt;\n\n  &lt;%= f.fields_for :survey_sections do |builder| %&gt;\n    &lt;%= builder.text_field :title, :placeholder =&gt; \"Abschnittsbeschreibung\" %&gt;&lt;br&gt;\n    &lt;%= builder.fields_for :questions do |quest| %&gt;\n      &lt;%= quest.text_field :text, :placeholder =&gt; \"Frage\" %&gt; &lt;br&gt;\n      &lt;%= quest.fields_for :answers do |ans| %&gt;\n        &lt;%= ans.text_field :text, :placeholder =&gt; \"Antwort\" %&gt; &lt;br&gt;\n      &lt;%end%&gt;\n    &lt;%end%&gt;\n    &lt;%= select_tag(\"question_type\",options_for_select([[\"Radio\", \"radio\"],[\"Checkbox\", \"check\"]])) %&gt;\n  &lt;% end %&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I want to render a partial in this view after selecting one of the options.\nHow can i do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "swagger", "rails-api"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1446048821, "post_id": 33396040, "comment_id": 54583568, "body": "Is it a gem or either js file, Kindly just clear only this. Thanks :)"}, {"owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "edited": false, "score": 0, "creation_date": 1446050173, "post_id": 33396040, "comment_id": 54584611, "body": "it&#39;s javascript. you also gonna need to include css, images and additional js libraries."}], "tags": [], "owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "is_accepted": false, "score": 0, "last_activity_date": 1446048467, "creation_date": 1446048467, "answer_id": 33396040, "question_id": 33393717, "link": "https://stackoverflow.com/questions/33393717/swagger-not-working-in-rails-api/33396040#33396040", "title": "Swagger not working in Rails Api", "body": "<p>Returning JSON is the default behaviour of <code>swagger-docs</code>. If you want to see the layout from this <a href=\"https://github.com/richhollis/swagger-docs-sample/blob/master/swagger-docs-screenshot-1.png\" rel=\"nofollow\">screenshot</a> you need to use <code>swagger-ui</code> as well. See the example here <a href=\"https://github.com/richhollis/swagger-docs-sample/tree/c33e1e788b8ef5a71c86610fffbb145b243a725b/public/api\" rel=\"nofollow\">https://github.com/richhollis/swagger-docs-sample/tree/c33e1e788b8ef5a71c86610fffbb145b243a725b/public/api</a></p>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446048467, "creation_date": 1446042416, "question_id": 33393717, "link": "https://stackoverflow.com/questions/33393717/swagger-not-working-in-rails-api", "title": "Swagger not working in Rails Api", "body": "<p>gem 'swagger-docs'</p>\n\n<p>rake swagger:docs</p>\n\n<p>rails server</p>\n\n<p>My controller is in app/controller/API/user_controller.rb</p>\n\n<pre><code>    module Api\n    class UserController &lt; ApplicationController\n\n    swagger_controller :users, \"Users\"\n    swagger_api :create do\n        summary \"Creates a new User\"\n        param :form, :name, :string, :required, \"Name\"\n        response :unauthorized\n        response :not_acceptable\n    end\n\n    def create\n            render json: {message: \"success\"},status: 401\n    end\n\nend\n</code></pre>\n\n<p>end</p>\n\n<p>But when I enter </p>\n\n<pre><code>http://localhost:3000/api-docs.json\n</code></pre>\n\n<p>It can't work properly. It cant show proper layout.Rather than that it gives json code of that.</p>\n\n<pre><code>{\n\"apiVersion\": \"1.0\",\n\"swaggerVersion\": \"1.2\",\n\"basePath\": \"/\",\n\"apis\": [\n {\n   \"path\": \"api/user.{format}\",\n  \"description\": \"Users\"\n }\n]\n }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1446042549, "post_id": 33393661, "comment_id": 54578810, "body": "Instance method, of course. The question is, on which object? :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446042635, "post_id": 33393661, "comment_id": 54578882, "body": "In case you didn&#39;t know, classes are objects in ruby and they have instance methods too (what you probably think of as &quot;class methods&quot;, but there is no such thing in ruby)"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446044020, "post_id": 33393661, "comment_id": 54579950, "body": "@SergioTulentsev I&#39;d say that I was less-confused before. :) Would you like to refer me any article or resource to get this thing further?"}], "answers": [{"comments": [{"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1446044082, "post_id": 33393884, "comment_id": 54579998, "body": "I&#39;ve accepted your answer, but I think I <i>really</i> need to go deep down into the <i>class-object-stuff</i> to really understand this thing."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 2, "creation_date": 1446044205, "post_id": 33393884, "comment_id": 54580085, "body": "@ArslanAli: read a book called &quot;metaprogramming ruby&quot;, it should help"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 1, "creation_date": 1446044302, "post_id": 33393884, "comment_id": 54580166, "body": "@ArslanAli see the edit and yeah! Metaprogramming Ruby is also great tool to understand what you need"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 5, "last_activity_date": 1548745101, "last_edit_date": 1548745101, "creation_date": 1446042791, "answer_id": 33393884, "question_id": 33393661, "link": "https://stackoverflow.com/questions/33393661/is-validates-a-class-method-or-an-instance-method-in-rails/33393884#33393884", "title": "Is `validates` a class method or an instance method in Rails?", "body": "<p>This is a <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates\" rel=\"nofollow noreferrer\"><em>class instance</em> method</a> :)</p>\n\n<p>As Sergio points in the comments, since every class in Ruby is an object (instance of class <a href=\"http://ruby-doc.org/core-2.2.0/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a>), <code>validates</code> is a method of <code>Class</code>'s instance.</p>\n\n<p>Your <code>User</code> class inherits bunch of stuff from <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/base.rb#L277\" rel=\"nofollow noreferrer\"><code>ActiveRecord::Base</code></a>. Among this inherited stuff there is <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/base.rb#L303\" rel=\"nofollow noreferrer\">Validations</a> module.</p>\n\n<hr>\n\n<p><strong>Sidenote:</strong>\nWatch this <a href=\"https://www.youtube.com/watch?v=X2sgQ38UDVY\" rel=\"nofollow noreferrer\">coolest video</a> about <strong>Ruby object model</strong> by <a href=\"https://en.wikipedia.org/wiki/Dave_Thomas_(programmer)\" rel=\"nofollow noreferrer\">Dave Thomas</a> - things will become much-much more clear!</p>\n"}], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 33393884, "answer_count": 1, "score": 0, "last_activity_date": 1581576925, "creation_date": 1446042272, "last_edit_date": 1453903935, "question_id": 33393661, "link": "https://stackoverflow.com/questions/33393661/is-validates-a-class-method-or-an-instance-method-in-rails", "title": "Is `validates` a class method or an instance method in Rails?", "body": "<p>I'm having a hard time understanding how we are able to write the following line:</p>\n\n<pre><code>validates :email, presence: true\n</code></pre>\n\n<p>What I think is that this is the class method since the following code executes perfectly in Rails. </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  self.validates :email, presence: true\nend\n</code></pre>\n\n<p>But when I go to Rails' source code, I come to know that <code>validates</code> is an instance method, not a class method, and writing <code>self.validates</code> in class definition gives me an impression that it is class method.</p>\n\n<p>This is how it has been defined in Rails:</p>\n\n<pre><code>def validates(*attributes)\n    defaults = attributes.extract_options!.dup\n    validations = defaults.slice!(*_validates_default_keys)\n\n    raise ArgumentError, \"You need to supply at least one attribute\" if attributes.empty?\n    raise ArgumentError, \"You need to supply at least one validation\" if validations.empty?\n\n    defaults[:attributes] = attributes\n\n    validations.each do |key, options|\n      next unless options\n      key = \"#{key.to_s.camelize}Validator\"\n\n      begin\n        validator = key.include?('::') ? key.constantize : const_get(key)\n      rescue NameError\n        raise ArgumentError, \"Unknown validator: '#{key}'\"\n      end\n\n      validates_with(validator, defaults.merge(_parse_validates_options(options)))\n    end\nend\n</code></pre>\n\n<p>What actually it is?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1446042211, "post_id": 33393551, "comment_id": 54578534, "body": "some examples would be good..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446186900, "post_id": 33393551, "comment_id": 54648406, "body": "What&#39;s the point of your edit? Didn&#39;t my post answer your question? This exact syntax will work in rspec."}], "answers": [{"comments": [{"owner": {"reputation": 5338, "user_id": 48310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2f8d64945b3ebd2705950a9775f2232a?s=128&d=identicon&r=PG", "display_name": "Chris Kimpton", "link": "https://stackoverflow.com/users/48310/chris-kimpton"}, "edited": false, "score": 0, "creation_date": 1446235318, "post_id": 33393655, "comment_id": 54676201, "body": "Many Thanks for this - my edit was for those who wanted an example.  Would love a pure ruby solution. Annoying getting gems through our work firewall :("}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5338, "user_id": 48310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2f8d64945b3ebd2705950a9775f2232a?s=128&d=identicon&r=PG", "display_name": "Chris Kimpton", "link": "https://stackoverflow.com/users/48310/chris-kimpton"}, "edited": false, "score": 1, "creation_date": 1446235500, "post_id": 33393655, "comment_id": 54676293, "body": "@ChrisKimpton: Not sure what you mean. Rspec is &quot;pure ruby&quot;. If you can&#39;t install gems, then you&#39;re restricted to reinventing wheels until the end of time. In which case, why don&#39;t you just go and implement this for your testing framework, which you presumably have written already (out of necessity)? :)"}, {"owner": {"reputation": 5338, "user_id": 48310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2f8d64945b3ebd2705950a9775f2232a?s=128&d=identicon&r=PG", "display_name": "Chris Kimpton", "link": "https://stackoverflow.com/users/48310/chris-kimpton"}, "edited": false, "score": 0, "creation_date": 1446450054, "post_id": 33393655, "comment_id": 54730963, "body": "Sorry, wasn&#39;t very clear - we are using JRuby, via the &quot;complete&quot; jar which includes some gems. We can get additional gems, its just not a standard workflow. Currently using test-unit"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1446042251, "creation_date": 1446042251, "answer_id": 33393655, "question_id": 33393551, "link": "https://stackoverflow.com/questions/33393551/in-ruby-testing-is-there-a-way-to-check-several-fields-but-only-raise-exception/33393655#33393655", "title": "In Ruby testing, is there a way to check several fields but only raise exception afterwards covering all mismatches", "body": "<p>If you're using RSpec, it has that ability in the current version (v3 at the moment).</p>\n\n<pre><code>it 'does not stop on the first failure' do\n  aggregate_failures do\n    expect(1).to eq 2\n    expect(2).to eq 3\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1446043542, "post_id": 33394029, "comment_id": 54579587, "body": "This is not always practical. Sometimes setup is expensive."}, {"owner": {"reputation": 22618, "user_id": 1555312, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/12c03a0fc2ac25d234882cf93f1d3052?s=128&d=identicon&r=PG", "display_name": "bigpotato", "link": "https://stackoverflow.com/users/1555312/bigpotato"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446149874, "post_id": 33394029, "comment_id": 54636879, "body": "Reliability should not be sacrificed for the convenience of speed"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446150116, "post_id": 33394029, "comment_id": 54637001, "body": "In Rspec you can have both :)"}], "tags": [], "owner": {"reputation": 22618, "user_id": 1555312, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/12c03a0fc2ac25d234882cf93f1d3052?s=128&d=identicon&r=PG", "display_name": "bigpotato", "link": "https://stackoverflow.com/users/1555312/bigpotato"}, "is_accepted": false, "score": 1, "last_activity_date": 1446043144, "creation_date": 1446043144, "answer_id": 33394029, "question_id": 33393551, "link": "https://stackoverflow.com/questions/33393551/in-ruby-testing-is-there-a-way-to-check-several-fields-but-only-raise-exception/33394029#33394029", "title": "In Ruby testing, is there a way to check several fields but only raise exception afterwards covering all mismatches", "body": "<p>You should generally have one assertion per example. The point of that is what you pointed out, which is so that it doesn't skip any assertions, and shows all failures at the end.</p>\n"}], "owner": {"reputation": 5338, "user_id": 48310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2f8d64945b3ebd2705950a9775f2232a?s=128&d=identicon&r=PG", "display_name": "Chris Kimpton", "link": "https://stackoverflow.com/users/48310/chris-kimpton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 33393655, "answer_count": 2, "score": 0, "last_activity_date": 1446134507, "creation_date": 1446041980, "last_edit_date": 1446134507, "question_id": 33393551, "link": "https://stackoverflow.com/questions/33393551/in-ruby-testing-is-there-a-way-to-check-several-fields-but-only-raise-exception", "title": "In Ruby testing, is there a way to check several fields but only raise exception afterwards covering all mismatches", "body": "<p>For example, say I am comparing many values via assertions, it might fail on the first, but also have an issue with some others.  Rather than fixing/re-running per issue, it would seem to be handier to check all values and then if any mismatch, raise an assertion failure at the end highlighting all mismatches.</p>\n\n<p>Then again, perhaps I am attacking this problem in the wrong way...</p>\n\n<p>Hope that makes sense - thanks in advance for all advice.</p>\n\n<p>For example:</p>\n\n<pre><code>it 'expensive to run and does not stop on the first failure' do\n  aggregate_failures do\n    expect(1).to eq 2\n    expect(2).to eq 3\n    expect(3).to eq 4\n    expect(4).to eq 5\n    expect(5).to eq 6\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1446041895, "post_id": 33393408, "comment_id": 54578321, "body": "Did you try just return <code>www.google.com</code> in <code>after_sign_out_path_for</code> method?"}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5320734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vnRwv.jpg?s=128&g=1", "display_name": "ZebThan", "link": "https://stackoverflow.com/users/5320734/zebthan"}, "edited": false, "score": 0, "creation_date": 1446042555, "post_id": 33393668, "comment_id": 54578813, "body": "Thank you kind sir. I was trying everything, but somehow forgot about trying the full adress with http and stuff. That helped. Thanks again."}], "tags": [], "owner": {"reputation": 7046, "user_id": 221612, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/10a836ff08ac1d4082339e6cde68a084?s=128&d=identicon&r=PG", "display_name": "Kenny Meyer", "link": "https://stackoverflow.com/users/221612/kenny-meyer"}, "is_accepted": true, "score": 1, "last_activity_date": 1446042603, "last_edit_date": 1446042603, "creation_date": 1446042290, "answer_id": 33393668, "question_id": 33393408, "link": "https://stackoverflow.com/questions/33393408/redirecting-to-external-site-on-logout-with-devise/33393668#33393668", "title": "Redirecting to external site on logout with devise", "body": "<p>Return a full URL like this:</p>\n\n<pre><code>def after_sign_out_path_for(resource_or_scope)\n  'http://www.google.com'     \nend\n</code></pre>\n\n<p>The method expects you to return a string value.</p>\n\n<p>Optionally, I recommend you to read through to <a href=\"https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb#L190\" rel=\"nofollow\">the code</a> to make sure you understand what's happening under the hood.</p>\n"}], "owner": {"reputation": 245, "user_id": 5320734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vnRwv.jpg?s=128&g=1", "display_name": "ZebThan", "link": "https://stackoverflow.com/users/5320734/zebthan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 33393668, "answer_count": 1, "score": 1, "last_activity_date": 1446042603, "creation_date": 1446041624, "question_id": 33393408, "link": "https://stackoverflow.com/questions/33393408/redirecting-to-external-site-on-logout-with-devise", "title": "Redirecting to external site on logout with devise", "body": "<p>I'm trying to change the page that the user is being redirected to after logging out. The thing is, I want to redirect user to the external site, so I can't use something like users_path.\nI would like to be able to do something like this:</p>\n\n<pre><code>def after_sign_out_path_for(resource_or_scope)\n    redirect_to 'www.google.com'     \nend\n</code></pre>\n\n<p>In that case user should end up being redirected to google after logging out. And yeah, I know it seems like a weird idea. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1446041298, "post_id": 33393233, "comment_id": 54577869, "body": "The route is fine, go look at your controllers and see if <code>WebshoppagesController</code> exists. Hint: it doesn&#39;t. If it does, your second part of the question leads me to believe you&#39;ve namespaced it."}, {"owner": {"reputation": 4744, "user_id": 2301092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1pBf.jpg?s=128&g=1", "display_name": "Bruno Paulino", "link": "https://stackoverflow.com/users/2301092/bruno-paulino"}, "edited": false, "score": 0, "creation_date": 1446041415, "post_id": 33393233, "comment_id": 54577961, "body": "have you tried to remove the &quot;/&quot; from the &quot;post &#39;/voucher&#39;&quot; in the routes.rb file?"}, {"owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "edited": false, "score": 0, "creation_date": 1446041418, "post_id": 33393233, "comment_id": 54577966, "body": "Typically class name typo or file name typo"}, {"owner": {"reputation": 2094, "user_id": 4444642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/19c1553c16a518fddd0831ed37e85a3c?s=128&d=identicon&r=PG&f=1", "display_name": "jbehrens94", "link": "https://stackoverflow.com/users/4444642/jbehrens94"}, "edited": false, "score": 0, "creation_date": 1446041471, "post_id": 33393233, "comment_id": 54578002, "body": "I do have <code>app&#47;controllers&#47;webshop_flow&#47;webshoppages_controller.rb</code> with declaration <code>class WebshopFlow::WebshoppagesController &lt; ContentpagesController</code>."}, {"owner": {"reputation": 2094, "user_id": 4444642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/19c1553c16a518fddd0831ed37e85a3c?s=128&d=identicon&r=PG&f=1", "display_name": "jbehrens94", "link": "https://stackoverflow.com/users/4444642/jbehrens94"}, "edited": false, "score": 0, "creation_date": 1446041578, "post_id": 33393233, "comment_id": 54578087, "body": "When removing the <code>&#47;</code>, I receive the same error."}, {"owner": {"reputation": 967, "user_id": 4136098, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oTWY6F0D_7I/AAAAAAAAAAI/AAAAAAAAAPQ/ZN-g-XyjLw0/photo.jpg?sz=128", "display_name": "Kh Ammad", "link": "https://stackoverflow.com/users/4136098/kh-ammad"}, "edited": false, "score": 0, "creation_date": 1446043076, "post_id": 33393233, "comment_id": 54579213, "body": "Do the following: 1) <code>post &#39;&#47;voucher&#39;, to: &#39;webshoppages#webshop_voucher_post&#39;, as: voucher</code> 2) Update your url in form like: <code>form_for :vouchers, as: :post, url: voucher_path</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2094, "user_id": 4444642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/19c1553c16a518fddd0831ed37e85a3c?s=128&d=identicon&r=PG&f=1", "display_name": "jbehrens94", "link": "https://stackoverflow.com/users/4444642/jbehrens94"}, "edited": false, "score": 0, "creation_date": 1446043568, "post_id": 33394071, "comment_id": 54579608, "body": "I am now receiving <code>wrong number of arguments (0 for 1)</code>, what is wrong?"}, {"owner": {"reputation": 4744, "user_id": 2301092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1pBf.jpg?s=128&g=1", "display_name": "Bruno Paulino", "link": "https://stackoverflow.com/users/2301092/bruno-paulino"}, "reply_to_user": {"reputation": 2094, "user_id": 4444642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/19c1553c16a518fddd0831ed37e85a3c?s=128&d=identicon&r=PG&f=1", "display_name": "jbehrens94", "link": "https://stackoverflow.com/users/4444642/jbehrens94"}, "edited": false, "score": 0, "creation_date": 1446043773, "post_id": 33394071, "comment_id": 54579762, "body": "sorry, I forgot the :voucher param. fixed"}], "tags": [], "owner": {"reputation": 4744, "user_id": 2301092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1pBf.jpg?s=128&g=1", "display_name": "Bruno Paulino", "link": "https://stackoverflow.com/users/2301092/bruno-paulino"}, "is_accepted": false, "score": 0, "last_activity_date": 1446043756, "last_edit_date": 1446043756, "creation_date": 1446043238, "answer_id": 33394071, "question_id": 33393233, "link": "https://stackoverflow.com/questions/33393233/rails-route-not-working-correctly/33394071#33394071", "title": "Rails route not working correctly", "body": "<p>I got it. You namespaced your controller. you should use the namespace block in the routes.rb file like that:</p>\n\n<pre><code>namespace :webshop_flow, path: '/' do\n    post 'voucher', to: webshoppages#action\nend\n</code></pre>\n\n<p>in your form, you try:</p>\n\n<pre><code>form_for :voucher, webshop_flow_voucher_url do |f|\n    # your form here\nend\n</code></pre>\n"}], "owner": {"reputation": 2094, "user_id": 4444642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/19c1553c16a518fddd0831ed37e85a3c?s=128&d=identicon&r=PG&f=1", "display_name": "jbehrens94", "link": "https://stackoverflow.com/users/4444642/jbehrens94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446043756, "creation_date": 1446041176, "question_id": 33393233, "link": "https://stackoverflow.com/questions/33393233/rails-route-not-working-correctly", "title": "Rails route not working correctly", "body": "<p>I have this form:</p>\n\n<pre><code>= form_for :vouchers, as: :post, url: '/voucher' do |f|\n    = text_field_tag 'code'\n    = button_tag I18n.t('activation_code'), class: 'btn', type: 'submit'\n</code></pre>\n\n<p>This route:</p>\n\n<p><code>post '/voucher', to: 'webshoppages#webshop_voucher_post'</code></p>\n\n<p>And this error: <code>uninitialized constant WebshoppagesController</code></p>\n\n<p>== </p>\n\n<p>When I place the route declaration within a <code>namespace :webshop_flow do ... end</code> block, it errors out telling me: <code>Route [POST] /nl/bestellen/voucher</code> does not exist.</p>\n\n<p><code>rake routes</code> actually mentions <code>voucher POST /voucher(.:format)                                     webshoppages#webshop_voucher_post</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "search"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5497532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88e12bd2045a6378edcf12533a38b480?s=128&d=identicon&r=PG&f=1", "display_name": "sweetjesus", "link": "https://stackoverflow.com/users/5497532/sweetjesus"}, "edited": false, "score": 0, "creation_date": 1446042399, "post_id": 33393221, "comment_id": 54578689, "body": "Thanks for the quick response Wizard of Ogz. Your solution worked for the most part, but how would I make it not case sensitive. If I enter <code>New york</code> it will not find records with <code>New York</code>"}, {"owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "reply_to_user": {"reputation": 55, "user_id": 5497532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88e12bd2045a6378edcf12533a38b480?s=128&d=identicon&r=PG&f=1", "display_name": "sweetjesus", "link": "https://stackoverflow.com/users/5497532/sweetjesus"}, "edited": false, "score": 0, "creation_date": 1446043488, "post_id": 33393221, "comment_id": 54579540, "body": "See the update in my answer about the case sensitivity."}, {"owner": {"reputation": 55, "user_id": 5497532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88e12bd2045a6378edcf12533a38b480?s=128&d=identicon&r=PG&f=1", "display_name": "sweetjesus", "link": "https://stackoverflow.com/users/5497532/sweetjesus"}, "edited": false, "score": 0, "creation_date": 1446043970, "post_id": 33393221, "comment_id": 54579910, "body": "Lifesaver, thanks a bunch! I felt like I was overlooking something while trying to build a massive string of binds...."}], "tags": [], "owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "is_accepted": true, "score": 1, "last_activity_date": 1446043126, "last_edit_date": 1446043126, "creation_date": 1446041160, "answer_id": 33393221, "question_id": 33393063, "link": "https://stackoverflow.com/questions/33393063/ruby-on-rails-dynamic-where-search/33393221#33393221", "title": "Ruby On Rails Dynamic Where Search", "body": "<p>Iterate over the tokens parsed from the query string to build up your query with ActiveRecord. Note that this will result in a SQL query many AND conditions.</p>\n\n<pre><code>@service_addresses = ServiceAddress.where(\"customer_id =?\" , params[:customer_id])\nparsed_query.each do |token|\n  @service_addresses = @service_addresses.search(token)\nend\n</code></pre>\n\n<h3>Update for case-insensitivity</h3>\n\n<p>To ignore case you can convert all strings to either uppercase or lowercase.</p>\n\n<pre><code># Service Address Model Method: \ndef self.search(query)\n    where(\"upper(street) LIKE ? OR upper(city) LIKE ?\", \"%#{query.to_s.upcase}%\",\"%{query.to_s.upcase}%\")\nend\n</code></pre>\n\n<h3>Alternative</h3>\n\n<p>You may wish to look into document matching (full-text search). Postgres has some nice support for this. The topic is too much to cover here, but there are many resources online. A good place to start is the <a href=\"http://www.postgresql.org/docs/9.4/static/textsearch-intro.html\" rel=\"nofollow\">Postgres documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 1623391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BGvSs.png?s=128&g=1", "display_name": "RafalG.", "link": "https://stackoverflow.com/users/1623391/rafalg"}, "is_accepted": false, "score": 0, "last_activity_date": 1446042737, "creation_date": 1446042737, "answer_id": 33393869, "question_id": 33393063, "link": "https://stackoverflow.com/questions/33393063/ruby-on-rails-dynamic-where-search/33393869#33393869", "title": "Ruby On Rails Dynamic Where Search", "body": "<p>If I understand you problem, try this:</p>\n\n<pre><code>def self.search(keyword)\n  keyword_search = \"%#{keyword.downcase}%\"\n  where('lower(city) LIKE :search OR lower(street) LIKE :search', search: keyword_search)\nend\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5497532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88e12bd2045a6378edcf12533a38b480?s=128&d=identicon&r=PG&f=1", "display_name": "sweetjesus", "link": "https://stackoverflow.com/users/5497532/sweetjesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 33393221, "answer_count": 2, "score": 0, "last_activity_date": 1446043126, "creation_date": 1446040771, "question_id": 33393063, "link": "https://stackoverflow.com/questions/33393063/ruby-on-rails-dynamic-where-search", "title": "Ruby On Rails Dynamic Where Search", "body": "<p>I am using postgres for the db.</p>\n\n<p>Service Address Controller contains this line</p>\n\n<p><code>@service_addresses = ServiceAddress.where(\"customer_id =?\" , params[:customer_id]).search(params[:search])\n</code></p>\n\n<p>Service Address Model Method:\n<code>\ndef self.search(query)\n    where(\"street LIKE ? OR city LIKE ?\", \"%#{query.to_s}%\",\"%{query.to_s}%\")\nend\n</code></p>\n\n<p>In my view I have a search bar that sends params</p>\n\n<p><code>service_addresses?utf8=\u2713&amp;search=123+Echo+Dr+New+York</code></p>\n\n<p>Lets assume I have two columns on my view <code>Street</code> &amp; <code>City</code> </p>\n\n<p>If I search <code>123 Echo Dr. New York</code> it will NOT return a record where <code>Street = 123 Echo Dr. and the City = New York</code></p>\n\n<p>However, if I simply search <code>123 Echo Dr.</code> or <code>123</code> it will return all records that have that in the <code>Street</code> or <code>City</code> column. Similairly if I search <code>New York</code> it will return records that contain <code>New York</code> </p>\n\n<p>I tried parsing out the search param into an array (successfully) and then using a loop to essentially build a string of <code>\"%#{parsed_query[i]}%\"</code> However when I tried to pass the string of binds to my <code>where</code> statement, but I got an error stating I have the wrong number of binds. It was treating my string variable as one bind. </p>\n\n<p>Not able to use Data Tables gem!</p>\n\n<p>Thank you SOF community.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "treeview", "erb"], "comments": [{"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "edited": false, "score": 0, "creation_date": 1446048089, "post_id": 33393050, "comment_id": 54583034, "body": "I&#39;m not sure it&#39;s such a good idea to give users such access to your server. Nevertheless, if I were you I&#39;d probably explore javascript based solutions for this. See this link for example: <a href=\"http://thejackalofjavascript.com/file-browser-with-jstree-angularjs-and-expressjs/\" rel=\"nofollow noreferrer\">thejackalofjavascript.com/&hellip;</a>"}, {"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "reply_to_user": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "edited": false, "score": 0, "creation_date": 1446053800, "post_id": 33393050, "comment_id": 54587103, "body": "@DaniG2k it is an administrative system, therefore only the admin will be able to access this page.  Do you have any better idea to show him the logs?"}], "owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446040745, "creation_date": 1446040745, "question_id": 33393050, "link": "https://stackoverflow.com/questions/33393050/list-all-files-in-directory-and-make-it-navigatable-in-rails", "title": "List all files in directory and make it navigatable in Rails", "body": "<p>In my public/ I have a log folder, which contains others folders.\nThese folders by its time contains some files.</p>\n\n<p>What I want to do is make this log folder accessible to public in a way that they cant click in the sub-folders name and see whats inside, being able to open the .txt files.</p>\n\n<p>My structure is like this:</p>\n\n<pre><code>- public\n   - log\n     1. element1\n        - file1.txt\n        - file2.txt\n     2. element2\n        - file1.txt\n        - file2.txt\n</code></pre>\n\n<p>I haven't found a way to do this. I came close with this piece of code:</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;% Dir.entries(\"public/log/girlbcn\")[2..-1].each do |file_name| \n      &lt;li&gt;&lt;%= link_to file_name, \"/#{URI.escape(file_name)}\" %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>But it would not let me navigate though the structure nor open files (I think it is because of the routes config, which I don't have much knowledge about) <br>\n<br></p>\n\n<p>I'm using Rails 4.1.2</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication"], "comments": [{"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1446040280, "post_id": 33392731, "comment_id": 54577051, "body": "Need to see your User modal?"}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 0, "creation_date": 1446040394, "post_id": 33392731, "comment_id": 54577120, "body": "this is a gem? prob just need to restart your server."}, {"owner": {"reputation": 877, "user_id": 3034720, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ts6vP.jpg?s=128&g=1", "display_name": "Chris Mendla", "link": "https://stackoverflow.com/users/3034720/chris-mendla"}, "edited": false, "score": 0, "creation_date": 1446040554, "post_id": 33392731, "comment_id": 54577255, "body": "Pardeep - The user model is empty      class User &lt; ActiveRecord::Base     end"}, {"owner": {"reputation": 877, "user_id": 3034720, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ts6vP.jpg?s=128&g=1", "display_name": "Chris Mendla", "link": "https://stackoverflow.com/users/3034720/chris-mendla"}, "edited": false, "score": 0, "creation_date": 1446040599, "post_id": 33392731, "comment_id": 54577297, "body": "justin - Restarted and have the same error"}], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 3034720, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ts6vP.jpg?s=128&g=1", "display_name": "Chris Mendla", "link": "https://stackoverflow.com/users/3034720/chris-mendla"}, "edited": false, "score": 0, "creation_date": 1446041823, "post_id": 33393041, "comment_id": 54578263, "body": "I changed to the from_adauth  statement and rebooted the server and am getting the same error. I added my routes.rb  data as I was having an issue with the match statement so I used get/post statements."}], "tags": [], "owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "is_accepted": true, "score": 2, "last_activity_date": 1535446688, "last_edit_date": 1535446688, "creation_date": 1446040729, "answer_id": 33393041, "question_id": 33392731, "link": "https://stackoverflow.com/questions/33392731/adauth-undefined-method-return-and-create-from-adauth-for/33393041#33393041", "title": "adauth undefined method `return_and_create_from_adauth&#39; for", "body": "<p>You need to change the method name from <code>return_and_create_with_adauth</code> to <code>return_and_create_from_adauth</code>. The correction would be:</p>\n\n<pre><code>user = User.return_and_create_from_adauth(ldap_user)\n</code></pre>\n\n<p>Here's a link to the new model:</p>\n\n<p><a href=\"https://github.com/Arcath/Adauth/blob/master/lib/adauth/rails/model_bridge.rb\" rel=\"nofollow noreferrer\">https://github.com/Arcath/Adauth/blob/master/lib/adauth/rails/model_bridge.rb</a></p>\n"}, {"tags": [], "owner": {"reputation": 369, "user_id": 1681612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010cb6ab987bd664ff4b8bdacc3e04e0?s=128&d=identicon&r=PG", "display_name": "Stephen Lujan", "link": "https://stackoverflow.com/users/1681612/stephen-lujan"}, "is_accepted": false, "score": 0, "last_activity_date": 1449673790, "creation_date": 1449673790, "answer_id": 34182208, "question_id": 33392731, "link": "https://stackoverflow.com/questions/33392731/adauth-undefined-method-return-and-create-from-adauth-for/34182208#34182208", "title": "adauth undefined method `return_and_create_from_adauth&#39; for", "body": "<p>You did not show your User model. I believe you may have omitted <code>include Adauth::Rails::ModelBridge</code></p>\n"}], "owner": {"reputation": 877, "user_id": 3034720, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Ts6vP.jpg?s=128&g=1", "display_name": "Chris Mendla", "link": "https://stackoverflow.com/users/3034720/chris-mendla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 33393041, "answer_count": 2, "score": 0, "last_activity_date": 1535446688, "creation_date": 1446039879, "last_edit_date": 1446041713, "question_id": 33392731, "link": "https://stackoverflow.com/questions/33392731/adauth-undefined-method-return-and-create-from-adauth-for", "title": "adauth undefined method `return_and_create_from_adauth&#39; for", "body": "<p>i am trying to use adauth to integrate a rails app with active directory. I am getting </p>\n\n<blockquote>\n  <p>undefined method `return_and_create_from_adauth' for  #</p>\n  \n  <p>app/controllers/sessions_controller.rb:9:in `create'</p>\n</blockquote>\n\n<pre><code>class SessionsController &lt; ApplicationController\ndef new\n    redirect_to 'home' if current_user # home was /adauth\nend\ndef create\n    ldap_user = Adauth.authenticate(params[:username], params[:password])\n    if ldap_user\n    #   user = User.return_and_create_with_adauth(ldap_user)\n        user = User.return_and_create_from_adauth(ldap_user)\n        session[:user_id] = user.id\n        redirect_to 'home'\n    else\n        redirect_to '/sessions/new', :error =&gt; \"Invalid Login\"\n    end\nend\n\ndef destroy\n    session[:user_id] = nil\n    redirect_to '/sessions/new'\nend\nend\n</code></pre>\n\n<p>Note - I saw a post that said use create_from_adauth instead of create_with_adauth so I tried it both ways and got the same error. </p>\n\n<p>Note \nIf I login with good active directory credentials, I get the error. If I log in with bad active directory credentials, I get redirected to the login screen. That seems to indicate that the problem might be with the user model? </p>\n\n<p>schema for users:</p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\nt.string   \"login\"\nt.text     \"group_strings\"\nt.string   \"name\"\nt.string   \"ou_strings\"\nt.datetime \"created_at\",    null: false\nt.datetime \"updated_at\",    null: false\nend\n</code></pre>\n\n<p>Server Log</p>\n\n<pre><code>Started POST \"/adauth\" for 127.0.0.1 at 2015-10-28 09:29:00 -0400\nProcessing by SessionsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u221a\",         \"authenticity_token\"=&gt; j  \nREMOVED BY    MEQ==\",        \n\"username\"=&gt;\"cmendla\", \"password\"=&gt;\"[FILTERED]\", \"commit\"=&gt;\"Login!\"}\nCompleted 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms)\n\nNoMethodError (undefined method `return_and_create_with_adauth' \nfor #      &lt;Class:0x5163510&gt;):\n app/controllers/sessions_controller.rb:8:in `create'\n</code></pre>\n\n<p>I want to add that I was having problems with the match lines so I used separate get/put lines in routes.rb. I'm not sure if that could be an issue here. The match statements that were throwing errors are commented out here. </p>\n\n<pre><code>  resources :users\n# match \\\"/adauth\\\" =&gt; \\\"sessions#create\\\"\n#  match \\\"/signout\\\" =&gt; \\\"sessions#destroy\\\"\nget   \"/adauth\"   =&gt; \"sessions#create\"\n post  \"/adauth\"   =&gt; \"sessions#create\"\nget   \"/signout\"  =&gt; \"sessions#destroy\"\npost  \"/signout\"  =&gt; \"sessions#destroy\"\n\n#  #match \"/signout\" =&gt; \"sessions#destroy, via: [:get, :post]\"\n#  #match \"/adauth\" =&gt; \"sessions#create, via: [:get, :post]\"\nresources :sessions\n#  match \"/signout\" =&gt; \"sessions#destroy\"\n#  match \"/adauth\" =&gt; \"sessions#create\"\n#  resources :sessions\nresources :searches\nresources :attachments\nmount Ckeditor::Engine =&gt; '/ckeditor'\nresources :documents\nresources :reviewers\nresources :tags\nresources :authors\nresources :tags\nresources :categories\nresources :help_requests\n\n\nget 'home' =&gt; 'home_page#home'\nget 'help/uploads' =&gt; 'about_and_help#upload_help'\nget 'about' =&gt; 'about_and_help#about'\nget 'attachments' =&gt; 'attachments#index'\n# get 'login' =&gt; 'sessions#create'\n# post 'login' =&gt; 'sessions#create'\nget 'login' =&gt; 'sessions#new'\npost 'login' =&gt; 'sessions#new'\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 46199, "user_id": 1654265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ad106352f4025af8fb0aff6a27fe1d2?s=128&d=identicon&r=PG", "display_name": "Andrea Ligios", "link": "https://stackoverflow.com/users/1654265/andrea-ligios"}, "edited": false, "score": 0, "creation_date": 1446038712, "post_id": 33392226, "comment_id": 54575892, "body": "what about cache? its the first time i have this sort of error."}, {"owner": {"reputation": 46199, "user_id": 1654265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ad106352f4025af8fb0aff6a27fe1d2?s=128&d=identicon&r=PG", "display_name": "Andrea Ligios", "link": "https://stackoverflow.com/users/1654265/andrea-ligios"}, "edited": false, "score": 0, "creation_date": 1446038765, "post_id": 33392226, "comment_id": 54575936, "body": "If you&#39;ve changed something locally, then deployed (no matter if in the clouds, locally or wherever),but you still see the old version of the output, then the output is probably cached."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 46199, "user_id": 1654265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ad106352f4025af8fb0aff6a27fe1d2?s=128&d=identicon&r=PG", "display_name": "Andrea Ligios", "link": "https://stackoverflow.com/users/1654265/andrea-ligios"}, "edited": false, "score": 0, "creation_date": 1446038957, "post_id": 33392226, "comment_id": 54576088, "body": "@AndreaLigios updated my answer. cache is not the culprit it seems."}, {"owner": {"reputation": 46199, "user_id": 1654265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ad106352f4025af8fb0aff6a27fe1d2?s=128&d=identicon&r=PG", "display_name": "Andrea Ligios", "link": "https://stackoverflow.com/users/1654265/andrea-ligios"}, "edited": false, "score": 0, "creation_date": 1446039241, "post_id": 33392226, "comment_id": 54576319, "body": "I was meaning client-side caching (or proxy caching, but that&#39;s more rare). If you changed eg. a CSS, the CSS could be cached by the browser. Press CTRL+F5 or try with another browser to ensure it&#39;s not that."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1446039376, "post_id": 33392226, "comment_id": 54576402, "body": "If you have <a href=\"https://devcenter.heroku.com/articles/rails-asset-pipeline\" rel=\"nofollow noreferrer\">setup your rails app correctly</a> Heroku will automatically compile your assets after you push. If not you actually have to compile the assets locally - check them in and push. But I don&#39;t really recommend it since it adds tons of noise to the git changelog. Rails uses a figerprinting mechanism to bust the client cache - so you should not need to refresh your browser cache or clean out the cache on heroku."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1446039578, "post_id": 33392226, "comment_id": 54576565, "body": "@max seems Andrea Ligios was semi correct. In other browsers i can see the changes but even after clearing the chrome cache that was not the problem. A browser restart of chrome is what pulled the changes through. thats really weird. Even though i tried with Incognito i again saw the new changes. Maybe its a chrome plugin?"}, {"owner": {"reputation": 46199, "user_id": 1654265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ad106352f4025af8fb0aff6a27fe1d2?s=128&d=identicon&r=PG", "display_name": "Andrea Ligios", "link": "https://stackoverflow.com/users/1654265/andrea-ligios"}, "edited": false, "score": 0, "creation_date": 1446039718, "post_id": 33392226, "comment_id": 54576657, "body": "&quot;Semi correct&quot; ? It IS the cache, period :) just google how to clear Chrome cache (I use Firefox so I can&#39;t help, sorry)."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 46199, "user_id": 1654265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ad106352f4025af8fb0aff6a27fe1d2?s=128&d=identicon&r=PG", "display_name": "Andrea Ligios", "link": "https://stackoverflow.com/users/1654265/andrea-ligios"}, "edited": false, "score": 0, "creation_date": 1446039790, "post_id": 33392226, "comment_id": 54576707, "body": "@AndreaLigios oh well i wont argue you helped me enough ;p but Max said that cache should not be a problem because of the rails mechanism but anyhow thanks :)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1446040021, "post_id": 33392226, "comment_id": 54576873, "body": "Rails appends a digest to the filename for the assets file - so you don&#39;t actually need to remove the CSS file from the browser cache since the HTML link tag will actually point to another file after your push. That said if you for whatever reason are getting a stale HTML response the browser will still download the old version of the asset. This happens if you have fragment caching or a reverse proxy. Can&#39;t say that it has really happened to me on heroku."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1446040177, "post_id": 33392226, "comment_id": 54576973, "body": "@max  well i do not have fragment caching and i have no idea what reverse proxy is so i do not think i have any of those. thanks for the help thought!"}], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446038941, "creation_date": 1446038603, "last_edit_date": 1446038941, "question_id": 33392226, "link": "https://stackoverflow.com/questions/33392226/css-different-locally-and-bit-different-on-heroku-rails", "title": "CSS different locally and bit different on heroku - Rails", "body": "<p>I have noticed that some styling is different on heroku and its different on my local environment. Basically on my local env i changed something aligned it properly but on heroku its the old version. I thought it was something that needed assets compilation again and used the below command but nothing.</p>\n\n<p><code>rake assets:precompile</code></p>\n\n<p>i have also cleared my cache on heroku</p>\n\n<p><code>heroku run rake tmp:cache:clear</code></p>\n\n<p>but it still does not work</p>\n\n<p>any clues?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "testing", "rspec"], "comments": [{"owner": {"reputation": 5503, "user_id": 1004617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0a9d0eb893217c4b0de8278ce09f7b?s=128&d=identicon&r=PG", "display_name": "gotva", "link": "https://stackoverflow.com/users/1004617/gotva"}, "edited": false, "score": 0, "creation_date": 1446037448, "post_id": 33391579, "comment_id": 54574988, "body": "Try to add <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/2-1/docs/controller-specs/render-views\" rel=\"nofollow noreferrer\"><code>render_views</code></a> because RSpec <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/2-1/docs/controller-specs/do-not-render-views\" rel=\"nofollow noreferrer\">does not render views</a> by default"}, {"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1446039048, "post_id": 33391579, "comment_id": 54576151, "body": "RSpec seems to use <code>response.body == &#39;Hellow&#39;</code> in this <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/anonymous-controller#anonymous-controllers-only-create-resource-routes\" rel=\"nofollow noreferrer\">example</a>"}, {"owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "edited": false, "score": 0, "creation_date": 1446041249, "post_id": 33391579, "comment_id": 54577829, "body": "<a href=\"https://github.com/rspec/rspec-rails/issues/1482\" rel=\"nofollow noreferrer\">github.com/rspec/rspec-rails/issues/1482</a> :/"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1446041351, "last_edit_date": 1495541674, "creation_date": 1446041351, "answer_id": 33393300, "question_id": 33391579, "link": "https://stackoverflow.com/questions/33391579/rspec-matcher-for-request-rendering-text/33393300#33393300", "title": "RSpec matcher for request rendering text", "body": "<p>Testing <code>expect(response.body).to eq('Hellow')</code> is totally appropriate.</p>\n\n<p>The reason <code>is_expected.to render_template</code> isn't working is you aren't rendering a template. If your controller omitted an explicit <code>render</code> call, Rails would render the <code>index</code> template for you, and you could test <code>render_template(:index)</code>. You could also <code>render template: :foo</code> and then test <code>render_template(:foo)</code> if you wanted to render a nonstandard template. But when you <code>render text: 'Hellow'</code>, you aren't using templates; you're explicitly setting the response body to the text you specify.</p>\n\n<p>If you do render a template, and you want to test the content rendered by that template, that's when <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-3/docs/controller-specs/render-views\" rel=\"nofollow noreferrer\"><code>render_views</code></a> comes into play, as <a href=\"https://stackoverflow.com/questions/33391579/rspec-matcher-for-request-rendering-text#comment54574988_33391579\">gotva mentioned</a>. Even then, you'd be checking for content in <code>response.body</code>, as you can see in RSpec's own examples. As your templates get complicated, the controller specs aren't the appropriate place for this and you should start writing <a href=\"http://guides.rubyonrails.org/testing.html#testing-views\" rel=\"nofollow noreferrer\">view specs</a> using <code>assert_select</code> or something similar.</p>\n"}], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 33393300, "answer_count": 1, "score": 1, "last_activity_date": 1446041351, "creation_date": 1446036722, "last_edit_date": 1446039824, "question_id": 33391579, "link": "https://stackoverflow.com/questions/33391579/rspec-matcher-for-request-rendering-text", "title": "RSpec matcher for request rendering text", "body": "<p>Is it possible to examine if <code>get</code> request rendered text?</p>\n\n<p>I know there are hacks like <code>response.body == 'any string'</code> but it does not interest me. I'm just wondering if there is \"RSpec\u2122\" way to do it.</p>\n\n<p>Having this rspec:</p>\n\n<pre><code>RSpec.describe MyController, type: :controller do\n  controller do\n    def index\n      render text: 'Hellow'\n    end\n  end\n\n  describe 'rendering' do\n    subject { get :index }\n    it { is_expected.to render_template(text: 'Hellow')}\n  end\nend\n</code></pre>\n\n<p>I would love to be able to call <code>it { is_expected.to render_template(text: 'Hellow')}</code>. It raises:</p>\n\n<pre><code> Failure/Error: it { is_expected.to render_template(text: 'Hellow') }\n ArgumentError:\n   Unknown key: :text. Valid keys are: :layout, :partial, :locals, :count, :file\n</code></pre>\n\n<p>or maybe <code>it { is_expected.to render_template('Hellow')}</code></p>\n\n<pre><code> Failure/Error: it { is_expected.to render_template('Hellow') }\n   expecting &lt;\"Hellow\"&gt; but rendering with &lt;[]&gt;\n</code></pre>\n\n<p>Is there any RSpec\u2122 way to accomplish it?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446037290, "post_id": 33391321, "comment_id": 54574878, "body": "Pro Tip: if you think you found a bug in a compiler/interpreter/whatever, you didn&#39;t. The bug is in your code. :)"}, {"owner": {"reputation": 624, "user_id": 756172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/332b7450963cc9b6c461b5a6c7324b9c?s=128&d=identicon&r=PG", "display_name": "Antonio", "link": "https://stackoverflow.com/users/756172/antonio"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446037573, "post_id": 33391321, "comment_id": 54575084, "body": "I know indeed I marked the question &quot;basic&quot; because I just started learnig ruby as my original question stated"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446037988, "post_id": 33391321, "comment_id": 54575376, "body": "This was a joke, btw. Not an insult or something."}], "answers": [{"comments": [{"owner": {"reputation": 624, "user_id": 756172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/332b7450963cc9b6c461b5a6c7324b9c?s=128&d=identicon&r=PG", "display_name": "Antonio", "link": "https://stackoverflow.com/users/756172/antonio"}, "edited": false, "score": 0, "creation_date": 1446037435, "post_id": 33391433, "comment_id": 54574978, "body": "Anyway is different from java code     int i=0;     System.out.print(String.format(&quot;testing %d %d&quot;,i,++i)); and has the opposite behavior of      System.out.print(String.format(&quot;testing %d %d&quot;,i,i++));"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 624, "user_id": 756172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/332b7450963cc9b6c461b5a6c7324b9c?s=128&d=identicon&r=PG", "display_name": "Antonio", "link": "https://stackoverflow.com/users/756172/antonio"}, "edited": false, "score": 0, "creation_date": 1446037877, "post_id": 33391433, "comment_id": 54575290, "body": "@Antonio: these java examples are irrelevant. Try ones where you mutate a string in place, you&#39;ll see the same thing. (hint: primitive value vs object reference)"}, {"owner": {"reputation": 624, "user_id": 756172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/332b7450963cc9b6c461b5a6c7324b9c?s=128&d=identicon&r=PG", "display_name": "Antonio", "link": "https://stackoverflow.com/users/756172/antonio"}, "edited": false, "score": 0, "creation_date": 1446038380, "post_id": 33391433, "comment_id": 54575665, "body": "String test = &quot;are you sure?&quot;; System.out.println(String.format(&quot;%s %s&quot;,test,test.substring(0,7))); But no bang operation :("}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1446036935, "last_edit_date": 1446036935, "creation_date": 1446036325, "answer_id": 33391433, "question_id": 33391321, "link": "https://stackoverflow.com/questions/33391321/ruby-bang-strange-behaviour/33391433#33391433", "title": "Ruby bang strange behaviour", "body": "<p>It's a feature, not a bug.</p>\n\n<p>String interpolation (the <code>\"#{}\"</code> operator) works by finding all the dynamic parts, evaluating them and then glueing static and dynamic parts together into one string. Since all dynamic parts are evaluated prior to concatenation, <code>gsub!</code> mutates the object which <code>user_input</code> points to. So the first appearance of <code>inner_page</code> in that string will see the updated value.</p>\n\n<p>Solution: don't use dangerous <code>gsub!</code>, use safe <code>gsub</code>.</p>\n\n<p>You can observe here, how it <em>really</em> happens (VM instructions). This will probably be Chinese to you at the moment, but in a few years you'll understand. :)</p>\n\n<pre><code>code = &lt;&lt;-RUBY\n  user_input = 'blah'\n  print \"Changing \\#{user_input} to \\#{user_input.gsub!(/s/,'th')}\"\nRUBY\n\nputs RubyVM::InstructionSequence.new(code).disasm\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iFxqY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iFxqY.png\" alt=\"disasm\"></a></p>\n"}], "owner": {"reputation": 624, "user_id": 756172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/332b7450963cc9b6c461b5a6c7324b9c?s=128&d=identicon&r=PG", "display_name": "Antonio", "link": "https://stackoverflow.com/users/756172/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33391433, "answer_count": 1, "score": 0, "last_activity_date": 1446036935, "creation_date": 1446035934, "last_edit_date": 1446036380, "question_id": 33391321, "link": "https://stackoverflow.com/questions/33391321/ruby-bang-strange-behaviour", "title": "Ruby bang strange behaviour", "body": "<p>I wrote  the following code:</p>\n\n<pre><code>print \"Please enter a string\"\nuser_input = gets.chomp\nuser_input.downcase!\nif user_input.include? \"s\"\n  print \"Changing #{user_input} to #{user_input.gsub!(/s/,'th')}\"\nelse\n  print \"No s in the string\"\nend\n</code></pre>\n\n<p>and I found that <code>user_input</code> and <code>user_input.gsub!(/s/,'th')</code> contain the same value. This happens because of the bang operation on <code>gsub</code> and because they are part of the same string.</p>\n\n<p>Splitting the print in two lines changes the behavior:</p>\n\n<pre><code>print \"Changing #{user_input} to \"\nprint \"#{user_input.gsub!(/s/,'th')}\"\n</code></pre>\n\n<p>I wonder if this is a bug.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1446036018, "post_id": 33391267, "comment_id": 54574023, "body": "Looks good. The question is what&#39;s &quot;empty&quot;? <code>nil</code> or <code>&#39;&#39;</code>?"}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1446036062, "post_id": 33391267, "comment_id": 54574046, "body": "Huh? Is there any difference?"}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1446036122, "post_id": 33391267, "comment_id": 54574083, "body": "In Ruby, the empty string <code>&#39;&#39;</code> does not compare equal to <code>nil</code>. They are even different classes."}, {"owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "edited": false, "score": 0, "creation_date": 1446036171, "post_id": 33391267, "comment_id": 54574114, "body": "1 more thing, 28th element is row[27]. Please make sure again"}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "edited": false, "score": 0, "creation_date": 1446036256, "post_id": 33391267, "comment_id": 54574169, "body": "@shirakia Yeah, I have kept track of that."}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1446036341, "post_id": 33391267, "comment_id": 54574219, "body": "@undur_gongor Oh! Ok, so I ran the code with the single quotes now. Still no change, identical result."}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1446037192, "post_id": 33391267, "comment_id": 54574812, "body": "@undur_gongor Are you there? I tried with double quotes too. Same result."}, {"owner": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446038240, "post_id": 33391267, "comment_id": 54575546, "body": "Try changing &quot;if row[28]!=nil&quot; to &quot;if row[28].empty?&quot;"}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446038305, "post_id": 33391267, "comment_id": 54575598, "body": "@vlasits Done. Same result."}, {"owner": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446038606, "post_id": 33391267, "comment_id": 54575826, "body": "So, what does row[28] actually contain in the situation where it is returning the wrong result?  Put <code>puts row[28]</code> in your code."}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446038936, "post_id": 33391267, "comment_id": 54576066, "body": "@vlasits Ok, I put <code>puts</code> and checked what row[28] displays. It displays what was basically row[29] - i.e., it copied everything from the next row without checking the <code>if</code> condition. I don&#39;t know what sorcery is this!"}, {"owner": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446039133, "post_id": 33391267, "comment_id": 54576225, "body": "I&#39;m in a chat channel:  <a href=\"http://chat.stackoverflow.com/rooms/93596/row28\">chat.stackoverflow.com/rooms/93596/row28</a>"}, {"owner": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446039566, "post_id": 33391267, "comment_id": 54576555, "body": "Well, I wouldn&#39;t say &quot; it copied everything from the next row without checking the if condition.&quot;  I think it checked the condition and evaluated it as true.  I think you need to figure out how to write the if statement so that it is actually checking what you want it to check."}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 1, "creation_date": 1446041609, "post_id": 33391267, "comment_id": 54578110, "body": "@vlasits You&#39;re right. It turns out that what I thought was empty, i.e., <code>&quot;&quot;</code>, was actually a space, i.e., <code>&quot; &quot;</code>. Funny how this stupid thing took 2 hours of my time."}, {"owner": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "edited": false, "score": 0, "creation_date": 1446043418, "post_id": 33391267, "comment_id": 54579471, "body": "I modified my answer.  I think it deals with your question correctly.  Mind accepting it?"}], "answers": [{"comments": [{"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 1, "creation_date": 1446038604, "post_id": 33392206, "comment_id": 54575823, "body": "Tried that too, good sir, as I said in one of the comments. Still the same result."}], "tags": [], "owner": {"reputation": 2160, "user_id": 347293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ad8d4636dd0b8fcceff22d01adedc787?s=128&d=identicon&r=PG", "display_name": "vlasits", "link": "https://stackoverflow.com/users/347293/vlasits"}, "is_accepted": true, "score": 0, "last_activity_date": 1446043280, "last_edit_date": 1446043280, "creation_date": 1446038526, "answer_id": 33392206, "question_id": 33391267, "link": "https://stackoverflow.com/questions/33391267/how-do-i-copy-certain-elements-of-an-array-to-a-location-before-it-in-ruby/33392206#33392206", "title": "How do I copy certain elements of an array to a location before it in Ruby?", "body": "<p>It certainly looks as though <code>if row[28]!=nil</code> is evaluating as false when you don't expect it to.  There are a few possible reasons for that:</p>\n\n<p>As commenter undur_gongor wrote:\n\"In Ruby, the empty string '' does not compare equal to nil. They are even different classes\"</p>\n\n<p><strong>Therefore</strong>: \n<code>if row[28]!=nil</code> will evaluate to <code>true</code> unless row[28] actually contains the <code>nil</code> object.  If it contains an empty string (e.g. <code>''</code> or <code>\"\"</code>) it will evaluate to <code>false</code>.</p>\n\n<p><strong>Solution</strong>:\nMake sure that your \"if\" statement is actually evaluating as you expect it to.  My guess is that you want something like <code>row[28].empty?</code> or <code>row[28].strip.empty?</code> if it turns out the problem is you have a few white spaces.</p>\n"}], "owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 33392206, "answer_count": 1, "score": 0, "last_activity_date": 1446043280, "creation_date": 1446035759, "last_edit_date": 1446042230, "question_id": 33391267, "link": "https://stackoverflow.com/questions/33391267/how-do-i-copy-certain-elements-of-an-array-to-a-location-before-it-in-ruby", "title": "How do I copy certain elements of an array to a location before it in Ruby?", "body": "<p>I have a CSV file, <code>Original.csv</code>, where I am checking all the rows to see if the element in the 28th column is empty. If it is not empty, I want to copy the 28th, 31st, 33rd and 34th elements to their previous positions; if it is empty, then I don't want to do anything. And then, I want to store the content in a new file, <code>New.csv</code>. This is my code:</p>\n\n<pre><code>require 'csv'\nCSV.open('New.csv', \"wb\") do |csv|\n   CSV.foreach('Original.csv') do |row|\n       if row[28]!=nil\n            row[27]=row[28]\n            row[30]=row[31]\n            row[32]=row[33]\n            row[33]=row[34]\n        end\n        csv&lt;&lt;row\n   end\nend\n</code></pre>\n\n<p>But, the program copies the columns without checking the condition! What is wrong?</p>\n\n<p><strong>EDIT:</strong> I figured out the bug. Turns out, what I thought was empty, i.e., <code>\"\"</code>, was actually a space, i.e., <code>\" \"</code>. This stupid thing took 4 hours of my time! So, if anyone is facing a similar issue, the takeaway is - what something appears as is not necessarily what it actually is. So beware. And one way to do that is not open the file in MS Excel, but rather in some primitive application like Notepad, Sublime, etc.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "is_accepted": true, "score": 2, "last_activity_date": 1446035091, "creation_date": 1446035091, "answer_id": 33390996, "question_id": 33390897, "link": "https://stackoverflow.com/questions/33390897/devise-model-does-not-allow-association/33390996#33390996", "title": "Devise Model does not allow Association", "body": "<p>That error indicates this employee object doesn't have actor. <code>employee.actor</code> outputs nil. </p>\n\n<p>Just check your employee object is loaded correctly. It is not a Devise problem.</p>\n"}], "owner": {"reputation": 447, "user_id": 1234493, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/14f226b69f045058db0cbcde53b9d5d6?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1234493/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 33390996, "answer_count": 1, "score": 0, "last_activity_date": 1446035091, "creation_date": 1446034759, "question_id": 33390897, "link": "https://stackoverflow.com/questions/33390897/devise-model-does-not-allow-association", "title": "Devise Model does not allow Association", "body": "<p>I recently downloaded and installed Devise for Rails 4. I used it on the model \"actors\"; which have a subset model called \"employee\"</p>\n\n<p>For the class \"Actor\"</p>\n\n<pre><code>class Actor &lt; ActiveRecord::Base\n# Include default devise modules. Others available are:\n# :confirmable, :lockable, :timeoutable and :omniauthable\ndevise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\n\ninclude UUIDHelper\n\nhas_one :access, autosave: true\nhas_one :employee, autosave: true\nhas_many :contact_detail, autosave: true\nhas_many :file_set\nhas_many :link_set\n\nmount_uploader :logo, AvatarUploader\nvalidates :name, uniqueness: true\nvalidates_presence_of :name\nvalidates_length_of :description, maximum: 256\n\ndef actor_name\n  actor.name\nend\n\nvalidates :logo,\n          :file_size =&gt; {\n              :maximum =&gt; 25.megabytes.to_i\n          }\n\nend\n</code></pre>\n\n<p>For the class \"Employee\"</p>\n\n<pre><code>class Employee &lt; ActiveRecord::Base\ninclude UUIDHelper\nbelongs_to :actor\nhas_one :status\nhas_many :restdays\nhas_one :regular_work_period\n\nvalidates_presence_of :actor\nend\n</code></pre>\n\n<p>I previously had this relation unto a view:</p>\n\n<pre><code>&lt;td&gt;&lt;%= employee.actor.name %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>Now it spews out an error:</p>\n\n<p>undefined method `name' for nil:NilClass</p>\n\n<p>What did I do wrong? Did Devise do something?</p>\n"}, {"tags": ["ruby", "database", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446034664, "post_id": 33390631, "comment_id": 54573181, "body": "You could run that task every minute. Is this not accurate enough?"}, {"owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1446034991, "post_id": 33390631, "comment_id": 54573385, "body": "@SergioTulentsev I would like to integrate ajax and have them appear and disappear in real time (in the future). That&#39;s why i&#39;m looking for alternatives."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5412340"}, "is_accepted": false, "score": 0, "last_activity_date": 1446041065, "creation_date": 1446041065, "answer_id": 33393185, "question_id": 33390631, "link": "https://stackoverflow.com/questions/33390631/removing-a-database-entry-after-certain-amount-of-time-with-rails/33393185#33393185", "title": "Removing a database entry after certain amount of time with Rails", "body": "<p>Use <code>delayed_job</code> gem. After installing delayed_job gem do the following:</p>\n\n<pre><code>class Model &lt; ActiveRecord::Base\n\n    after_create :set_delete_timer\n\n    # register the timer\n    def set_delete_timer\n      delay(:run_at =&gt; your_delete_time).expire\n    end\n\n    def expire\n       delete_your_things_here  \n    end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446041065, "creation_date": 1446034035, "question_id": 33390631, "link": "https://stackoverflow.com/questions/33390631/removing-a-database-entry-after-certain-amount-of-time-with-rails", "title": "Removing a database entry after certain amount of time with Rails", "body": "<p>I'm working on a webapp which allows you to create a lobby with a link to join an external game (CSGO) The actual lobby isn't anything special but a scss styled &lt;\\div> tag with associated database entry which i want to appear for a certain amount of time.</p>\n\n<p><strong>My question is:</strong> How do i automatically destroy/remove the lobby &lt;\\div> tag along with the database entry after certain amount of time since its creation?</p>\n\n<p>One of the options i found out is setting a cron task with whenever gem, but to my limited understanding it would work only in certain intervals and not certain time since lobby's creation.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs", "react-jsx"], "comments": [{"owner": {"reputation": 409, "user_id": 3495715, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/8d20ea5b9e9aa18509e83bda1a646a82?s=128&d=identicon&r=PG&f=1", "display_name": "Ativ", "link": "https://stackoverflow.com/users/3495715/ativ"}, "edited": false, "score": 0, "creation_date": 1446045198, "post_id": 33390333, "comment_id": 54580845, "body": "If you run the installation script provided by <code>react-rails</code>, ( <code>rails g react:install</code>) you&#39;ll notice it creates a components folder under assets/javascripts for your react components. This is for organizational purposes but anywhere in assets/javascripts should be fine."}], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 3104482, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/eba56a5e77760fda84007b41540fe1a0?s=128&d=identicon&r=PG&f=1", "display_name": "X0r0N", "link": "https://stackoverflow.com/users/3104482/x0r0n"}, "edited": false, "score": 0, "creation_date": 1446034722, "post_id": 33390402, "comment_id": 54573210, "body": "i am using the React-Rails gem."}], "tags": [], "owner": {"reputation": 182, "user_id": 2088092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc24425893e446ac1db249a844494420?s=128&d=identicon&r=PG", "display_name": "Philipp Antar", "link": "https://stackoverflow.com/users/2088092/philipp-antar"}, "is_accepted": false, "score": 0, "last_activity_date": 1446033345, "creation_date": 1446033345, "answer_id": 33390402, "question_id": 33390333, "link": "https://stackoverflow.com/questions/33390333/rails-jsx-file-not-working/33390402#33390402", "title": "Rails JSX file not working", "body": "<p>JSX files can't be interpreted natively by browsers. You'd have to compile them to plain JavaScript before.</p>\n\n<p>A popular choice is to use <a href=\"http://gruntjs.com/\" rel=\"nofollow\">Grunt</a> together with <a href=\"https://babeljs.io/docs/usage/jsx/\" rel=\"nofollow\">Babel</a>. There is also the <a href=\"https://github.com/reactjs/react-rails\" rel=\"nofollow\">React-Rails</a> gem, which may offer a better integration in the Rails asset pipeline</p>\n"}], "owner": {"reputation": 1306, "user_id": 3104482, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/eba56a5e77760fda84007b41540fe1a0?s=128&d=identicon&r=PG&f=1", "display_name": "X0r0N", "link": "https://stackoverflow.com/users/3104482/x0r0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454205576, "creation_date": 1446033163, "last_edit_date": 1454205576, "question_id": 33390333, "link": "https://stackoverflow.com/questions/33390333/rails-jsx-file-not-working", "title": "Rails JSX file not working", "body": "<p>I'm new to ruby-on-rails, can someone tell where i am supposed to put the JSX file so that it renders the content into the DOM?</p>\n\n<p>i have 2 separate views, one for 'home' and another for 'details'. in the 'views' directory in rails, there is a separate folder for the different views, but they all sit inside the same javascript directory.</p>\n\n<p>if i call the files home.js.jsx and details.js.jsx... rails won't do any thing for react.</p>\n\n<p>if i call them home-templates.js.jsx and details-templates.js.jsx, rails will only render the jsx for details.</p>\n\n<p>I then put my code at the bottom of 'html.html.erb' insides a <code>&lt;script type='text/jsx'&gt;</code> tag, but still not working.</p>\n\n<p>Where am i going wrong?</p>\n"}, {"tags": ["ruby", "facebook-graph-api", "sinatra", "koala"], "answers": [{"comments": [{"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1446188069, "post_id": 33391779, "comment_id": 54648941, "body": "Wow, thanks it did work! Where can I read about this, I don&#39;t see documentation explaining this?"}], "tags": [], "owner": {"reputation": 185, "user_id": 2546939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36183d073a1e7df25a08233638dad527?s=128&d=identicon&r=PG", "display_name": "maringan", "link": "https://stackoverflow.com/users/2546939/maringan"}, "is_accepted": true, "score": 2, "last_activity_date": 1446037286, "creation_date": 1446037286, "answer_id": 33391779, "question_id": 33390153, "link": "https://stackoverflow.com/questions/33390153/facebook-graph-api-for-websites-using-ruby-koala-gem-in-sinatra/33391779#33391779", "title": "Facebook Graph API for websites using Ruby Koala gem in Sinatra", "body": "<p>You should add <code>fields</code> parameter.</p>\n\n<p>Something like this:\n<code>\ngraph.get_object('me', { fields: 'id,first_name,last_name,gender,birthday,photos,email' })\n</code></p>\n"}], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 33391779, "answer_count": 1, "score": 2, "last_activity_date": 1446037286, "creation_date": 1446032642, "question_id": 33390153, "link": "https://stackoverflow.com/questions/33390153/facebook-graph-api-for-websites-using-ruby-koala-gem-in-sinatra", "title": "Facebook Graph API for websites using Ruby Koala gem in Sinatra", "body": "<p>I want to implement Facebook login for web apps. All I need is the basic public information of a user for the account creation steps.</p>\n\n<p>This is what I have done:</p>\n\n<ol>\n<li>Created a basic Facebook app with nearly no custom permissions.</li>\n<li>Used the <code>APP_ID</code> and <code>APP_SECRET</code> in <code>Koala</code> to get <code>access_token</code>.</li>\n<li>Everything worked perfectly, I am able to login/logout.</li>\n<li>Just that the only information I am able to get back when I do: <code>graph.get_object('me')</code> is the logged in user's name and an <code>id</code> (It doesn't look like the default Facebook id).</li>\n<li>Surprised whether something changed in the new API, I tested the gem in the console using the <code>access_token</code> from graph explorer (where all permissions are enabled by default). And I get all data using the same method call.</li>\n<li>When I review what all the app gets while signing up; I see that the user's basic information, profile pic and other public data will be accessible to the app.</li>\n</ol>\n\n<p>Any idea why this is so? It seems I am missing something obvious. The code is available in <a href=\"http://github.com/JikkuJose/banana_app\" rel=\"nofollow\">Github</a>. But this is pretty much everything to it:</p>\n\n<pre><code>require 'bundler'\nBundler.require :default\nDotenv.load '.env'\nrequire_relative './app/constants.rb'\n\nmodule Banana\n  class App &lt; Sinatra::Base\n    use Rack::Session::Cookie, secret: COOKIE_SECRET\n    set :public_folder, File.dirname(__FILE__) + '/bower_components'\n\n    get '/' do\n      if logged_in?\n        haml :welcome_in, layout: :layout\n      else\n        haml :log_in, layout: :layout\n      end\n    end\n\n    get '/log_out' do\n      session['oauth'] = nil\n      session['access_token'] = nil\n\n      redirect '/'\n    end\n\n    get '/log_in' do\n      session['oauth'] = Koala::Facebook::OAuth.new(APP_ID, APP_SECRET, \"#{request.base_url}/call_back\")\n      redirect session['oauth'].url_for_oauth_code()\n    end\n\n    get '/call_back' do\n      begin\n        session['access_token'] = session['oauth'].get_access_token(params[:code])\n      rescue\n        redirect '/?error=user_denied'\n      end\n      redirect '/'\n    end\n\n    get '/test' do\n      if logged_in?\n        p graph.get_object(\"rakeshbs\")\n        \"e\"\n      else\n        redirect '/'\n      end\n    end\n\n    def logged_in?\n      !session['access_token'].nil?\n    end\n\n    def toggle_access\n      logged_in? ? '/log_out' : '/log_in'\n    end\n\n    def graph\n      @graph ||= Koala::Facebook::API.new(session['access_token'])\n    end\n\n    def errored?\n      !params[\"error\"].nil?\n    end\n\n    def user\n      p graph.get_connections(:me, :photos) # This is just nil\n      @user ||= OpenStruct.new(\n        name: graph.get_object(\"me\")[\"name\"], # All I get here is just a hash with the name and an id!\n        photo: 'http://semantic-ui.com/images/avatar/small/elliot.jpg'\n      )\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["php", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "edited": false, "score": 0, "creation_date": 1446032236, "post_id": 33389988, "comment_id": 54571651, "body": "can you explain why this is required? I&#39;m just trying to understand the concepts. Also, if my initializer does other things (such as set other instance variables), will I need to call the parent initializer from inherited classes?"}, {"owner": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "edited": false, "score": 0, "creation_date": 1446032279, "post_id": 33389988, "comment_id": 54571671, "body": "I see, so I set my initial instance properties via a method rather than a property directly on the class"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "edited": false, "score": 0, "creation_date": 1446032288, "post_id": 33389988, "comment_id": 54571675, "body": "Because what you do in the question is setting <code>@quality</code> on the class object (<code>Item</code> itself, not a possible future instance of it)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "edited": false, "score": 0, "creation_date": 1446040611, "post_id": 33389988, "comment_id": 54577308, "body": "@harryg: You can set your instance variables however you like, but instance variables always belong to the instance, i.e. <code>self</code>, and in a class declaration body, <code>self</code> is the class. (Remember, classes are objects just like any other object, they are instances of class <code>Class</code>, and they can have instance variables just like any other object.)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1446032124, "creation_date": 1446032124, "answer_id": 33389988, "question_id": 33389946, "link": "https://stackoverflow.com/questions/33389946/ruby-class-instance-variables-vs-php-properties/33389988#33389988", "title": "Ruby class instance variables vs php properties", "body": "<p>Set value in the initializer.</p>\n\n<pre><code>class Item\n\n  attr_reader :quality\n\n  def initialize\n    @quality = default_quality\n  end\n\n  def reduce_quality\n    @quality -= 1\n  end\n\n  def default_quality\n    1\n  end\nend\n\nclass SuperItem &lt; Item\n  def default_quality\n    50\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 33389988, "answer_count": 1, "score": 2, "last_activity_date": 1446032694, "creation_date": 1446031981, "last_edit_date": 1446032143, "question_id": 33389946, "link": "https://stackoverflow.com/questions/33389946/ruby-class-instance-variables-vs-php-properties", "title": "Ruby class instance variables vs php properties", "body": "<p>In php I might have a class like so:</p>\n\n<pre><code>class Item\n    public $quality = 10\n\n    public function reduceQuality()\n    {\n        $this-&gt;quality -= 1;\n    }\n}\n\n$item = new Item;\n$item-&gt;reduceQuality();\nprint $item-&gt;quality; // outputs 9\n</code></pre>\n\n<p>How would I achieve similar in ruby? I have something like:</p>\n\n<pre><code>class Item\n\n    attr_reader :quality\n\n    @quality = 10\n\n    def reduce_quality()\n        @quality -= 1\n    end\nend\n\nitem = Item.new\nitem.reduce_quality # `reduce_quality': undefined method `-' for nil:NilClass (NoMethodError)\nitem.quality \n</code></pre>\n\n<p>I understand Ruby has instance variables and class variables. I am trying to define an instance variable on the object when it's created. What's best practice to do something like this, bearing in mind I might extend the class and I want the <code>quality</code> property to be inherited or overridable?</p>\n\n<p>e.g.</p>\n\n<pre><code>class SuperItem &lt; Item\n    @quality = 50\nend\n</code></pre>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1446032901, "post_id": 33389632, "comment_id": 54572047, "body": "So, have you installed <code>jekyll-sitemap</code>? Try <code>gem install jekyll-sitemap</code> and repeat."}, {"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1446033079, "post_id": 33389632, "comment_id": 54572151, "body": "@YevgeniyAnfilofyev Thanks. If you submit that as an answer, I can mark it as resolved."}], "answers": [{"tags": [], "owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "is_accepted": true, "score": 2, "last_activity_date": 1446033224, "creation_date": 1446033224, "answer_id": 33390353, "question_id": 33389632, "link": "https://stackoverflow.com/questions/33389632/jekyll-serve-error/33390353#33390353", "title": "&#39;Jekyll Serve&#39; Error", "body": "<p>Seems like you have to install <code>jekyll-sitemap</code> Try to install it by <code>gem install jekyll-sitemap</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3164, "user_id": 733092, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DAX12.png?s=128&g=1", "display_name": "Noumenon", "link": "https://stackoverflow.com/users/733092/noumenon"}, "is_accepted": false, "score": 1, "last_activity_date": 1454519867, "creation_date": 1454519867, "answer_id": 35183568, "question_id": 33389632, "link": "https://stackoverflow.com/questions/33389632/jekyll-serve-error/35183568#35183568", "title": "&#39;Jekyll Serve&#39; Error", "body": "<p>For people Googling this problem, also try <code>bundle update</code> if you're using bundle.</p>\n"}], "owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 33390353, "answer_count": 2, "score": 2, "last_activity_date": 1454519867, "creation_date": 1446031111, "question_id": 33389632, "link": "https://stackoverflow.com/questions/33389632/jekyll-serve-error", "title": "&#39;Jekyll Serve&#39; Error", "body": "<p>I'm trying to run my jekyll site locally but when executing the command:</p>\n\n<pre><code>jekyll serve\n</code></pre>\n\n<p>I receive the following error message:</p>\n\n<pre><code>bhavik-imac:dhokes.github.io bhavikdhokia$ jekyll serve\nConfiguration file: /Users/bhavikdhokia/Development/git/dhokes.github.io/_config.yml\n/Users/bhavikdhokia/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- jekyll-sitemap (LoadError)\nfrom /Users/bhavikdhokia/.rvm/rubies/ruby-2.2.1/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/plugin_manager.rb:29:in `block in require_gems'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/plugin_manager.rb:26:in `each'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/plugin_manager.rb:26:in `require_gems'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/plugin_manager.rb:19:in `conscientious_require'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/site.rb:79:in `setup'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/site.rb:41:in `initialize'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/commands/build.rb:29:in `new'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/commands/build.rb:29:in `process'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/lib/jekyll/commands/serve.rb:26:in `block (2 levels) in init_with_program'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1@global/gems/mercenary-0.3.5/lib/mercenary/command.rb:220:in `call'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1@global/gems/mercenary-0.3.5/lib/mercenary/command.rb:220:in `block in execute'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1@global/gems/mercenary-0.3.5/lib/mercenary/command.rb:220:in `each'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1@global/gems/mercenary-0.3.5/lib/mercenary/command.rb:220:in `execute'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1@global/gems/mercenary-0.3.5/lib/mercenary/program.rb:42:in `go'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1@global/gems/mercenary-0.3.5/lib/mercenary.rb:19:in `program'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/gems/jekyll-2.5.3/bin/jekyll:20:in `&lt;top (required)&gt;'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/bin/jekyll:23:in `load'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/bin/jekyll:23:in `&lt;main&gt;'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `eval'\nfrom /Users/bhavikdhokia/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any suggestions as to why this is and how to resolve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docx"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1446029555, "post_id": 33388873, "comment_id": 54570015, "body": "It&#39;s unreliable for any but Microsoft&#39;s solutions that can use Office formats&#39; specifications (if they exist, which I sincerely hope, jk). The format is really tricky and converting to PDF (or anything else really) is a major risk of data/formatting loss. Given a choice of having to download files or viewing corrupted documents without downloading, I&#39;d choose the former. PDFs would essentially make documents read-only anyway."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1446030738, "post_id": 33388873, "comment_id": 54570733, "body": "<code>.docx</code> and <code>.xlsx</code> are open ISO standards (ISO Office OpenXML)."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446370931, "post_id": 33388873, "comment_id": 54707865, "body": "@J&#246;rgWMittag good to know that my info is a bit outdated! Rendering differences are still there though, so at present that makes the situation better, but not good enough."}], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 5306523, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153531647040874/picture?type=large", "display_name": "Stephan Bakkelund Valois", "link": "https://stackoverflow.com/users/5306523/stephan-bakkelund-valois"}, "edited": false, "score": 0, "creation_date": 1446030039, "post_id": 33389176, "comment_id": 54570292, "body": "This may actually be what I need. I|m gonna check it out and play around with it for a bit to see if it suits my needs. Much appreciated!"}, {"owner": {"reputation": 15480, "user_id": 229688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FVcL0.jpg?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/229688/arnaud"}, "reply_to_user": {"reputation": 513, "user_id": 5306523, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153531647040874/picture?type=large", "display_name": "Stephan Bakkelund Valois", "link": "https://stackoverflow.com/users/5306523/stephan-bakkelund-valois"}, "edited": false, "score": 0, "creation_date": 1446197670, "post_id": 33389176, "comment_id": 54653560, "body": "@StephanBakkelundValois pleasure to help. Don&#39;t forget to accept the answer if it turns out to fit your use case :)"}], "tags": [], "owner": {"reputation": 15480, "user_id": 229688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FVcL0.jpg?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/229688/arnaud"}, "is_accepted": false, "score": 2, "last_activity_date": 1446029766, "creation_date": 1446029766, "answer_id": 33389176, "question_id": 33388873, "link": "https://stackoverflow.com/questions/33388873/display-docx-or-ppt-in-browser-with-ruby/33389176#33389176", "title": "Display docx or ppt in browser with ruby", "body": "<p>It feels like what you actually want/need is a javascript document viewer (only) such as <a href=\"http://viewerjs.org/\" rel=\"nofollow\">http://viewerjs.org/</a>.</p>\n"}], "owner": {"reputation": 513, "user_id": 5306523, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153531647040874/picture?type=large", "display_name": "Stephan Bakkelund Valois", "link": "https://stackoverflow.com/users/5306523/stephan-bakkelund-valois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1446029766, "creation_date": 1446028887, "question_id": 33388873, "link": "https://stackoverflow.com/questions/33388873/display-docx-or-ppt-in-browser-with-ruby", "title": "Display docx or ppt in browser with ruby", "body": "<p>I'm currently working on a intranet webapp for a company.<br>\nI've created it so the administrators of the site are able to upload files \n(.docx, .pdf, .xlsx, .ppt etc)<br> up to the webapp, to provide easier access \nto documents for the employees.<br> It works very well, however my client wasn't\ntoo fond of having to download the files,<br> and wanted it to pop up in the browser, \nor open up the file-spesific program instead of download. </p>\n\n<p>I was playing with some ideas:<br>\n1. Somehow parse the files to JSON at upload, and then show the content in browser with html.<br>\n2. Generate a pdf from the uploaded file (which automatically launches in the browser).<br>\n3. Somehow use a previewer to show the filecontent in the browser<br>\n4. Clients computer launches the uploaded file automatically on download, however I think this is a bit more tricky...</p>\n\n<p>What would be the best and most time-efficient way to go about this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "minitest", "grape"], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 1, "last_activity_date": 1446027027, "last_edit_date": 1446027027, "creation_date": 1446026501, "answer_id": 33387999, "question_id": 33387719, "link": "https://stackoverflow.com/questions/33387719/testing-grape-returns-uninitialized-constant-v1-with-minitest/33387999#33387999", "title": "testing grape returns uninitialized constant V1 with minitest", "body": "<p>The error message shows that <code>V1</code> is not defined at the point that Ruby loads the test file. You have to load (or <code>require</code>) the relevant app code that you are testing, and that <code>require</code> must run before you can refer <code>V1</code> directly. </p>\n\n<p>Yes the test helper is usually a good place to do that. You may also need to <code>require</code> the test helper file from your test if you are not already.</p>\n\n<p>If you are already requiring the app code in order to test it, later, then this can be treated as a simpler problem of the namespace not existing yet. Either define it in the helper:</p>\n\n<pre><code>module V1\nend\n</code></pre>\n\n<p>Or change your test code from the question to fully nest the namespace:</p>\n\n<pre><code>module V1\n  class ApiAuthTest &lt; ActiveSupport::TestCase\n  # Etc.\n</code></pre>\n\n<p>Which approach to take depends on how you want to organise your dependencies. If anything else in the test file which runs at the time it is loaded depends on definitions elsewhere (e.g. <code>Rack::Test::Methods</code> has to be defined in order to <code>include</code> it), then it needs to be loaded <em>before</em> the test file references it. </p>\n\n<p>You don't usually need to worry about things defined inside the <code>test</code> blocks until they are run, so you can often load the test code and then the app code in that order, and everything will work just fine. In this case it could just be the missing namespace that has caused you to need to notice load order of the files.</p>\n"}], "owner": {"reputation": 1471, "user_id": 1213904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QKy0Q.jpg?s=128&g=1", "display_name": "user1213904", "link": "https://stackoverflow.com/users/1213904/user1213904"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 1, "accepted_answer_id": 33387999, "answer_count": 1, "score": 0, "last_activity_date": 1446027027, "creation_date": 1446025692, "question_id": 33387719, "link": "https://stackoverflow.com/questions/33387719/testing-grape-returns-uninitialized-constant-v1-with-minitest", "title": "testing grape returns uninitialized constant V1 with minitest", "body": "<p>I currently have defined an auth class using grape as below:</p>\n\n<pre><code>module V1\n  class ApiAuth &lt; Grape::API\n    resource :auth do\n      desc \"Creates and returns access_token if valid login\"\n        post ...\n</code></pre>\n\n<p>this class resides in the app/api/v1 directory. My test looks like the following:</p>\n\n<pre><code>class V1::ApiAuthTest &lt; ActiveSupport::TestCase\n  include Rack::Test::Methods\n\n  def app\n    Rails.application\n  end\n\n  def setup\n    @candidate = create(:candidate_with_encrypted_password)\n  end\n\n  test 'returns status 201 when logged in' do\n    ...\n</code></pre>\n\n<p>When I run the test with \"rake test test/api/v1/api_auth_test.rb\" the test runs fine. However if I run all tests with \"rake test\" or \"rake test test/api/v1/*\" I get the following error:</p>\n\n<pre><code>rake aborted!\nNameError: uninitialized constant V1\n/Users/user/Projects/learning/test/api/v1/api_auth_test.rb:1:in `&lt;top (required)&gt;'\nTasks: TOP =&gt; test:run\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>What am I doing wrong, do I have to load the V1 module in the test_helper?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "internationalization", "rails-i18n"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446024534, "post_id": 33387140, "comment_id": 54566756, "body": "You should check the value of <code>@categories</code> ."}, {"owner": {"reputation": 131, "user_id": 4837841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HDDY3twZ71g/AAAAAAAAAAI/AAAAAAAACn8/79QPHqcXg_8/photo.jpg?sz=128", "display_name": "Maria-Christina Rus", "link": "https://stackoverflow.com/users/4837841/maria-christina-rus"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446024886, "post_id": 33387140, "comment_id": 54567004, "body": "Many thanks for your quick answer. @categories is defined by category collection. I have tried I18n.t(:meeting_rooms) but doesn&#39;t work :("}, {"owner": {"reputation": 131, "user_id": 4837841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HDDY3twZ71g/AAAAAAAAAAI/AAAAAAAACn8/79QPHqcXg_8/photo.jpg?sz=128", "display_name": "Maria-Christina Rus", "link": "https://stackoverflow.com/users/4837841/maria-christina-rus"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446024945, "post_id": 33387140, "comment_id": 54567030, "body": "Production website: www.spaces-on.com What is really strange is that it doesn&#39;t give an error, it takes the word in Spanish..."}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446025354, "post_id": 33387140, "comment_id": 54567306, "body": "Did you set the correct locale? Try to pass the locale params: for example: <code>I18n.t(&#39;meeting_rooms&#39;, locale: &#39;en&#39;)</code>"}, {"owner": {"reputation": 131, "user_id": 4837841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HDDY3twZ71g/AAAAAAAAAAI/AAAAAAAACn8/79QPHqcXg_8/photo.jpg?sz=128", "display_name": "Maria-Christina Rus", "link": "https://stackoverflow.com/users/4837841/maria-christina-rus"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1446027624, "post_id": 33387140, "comment_id": 54568774, "body": "If I do this, it works indeed but when I set the language to other, it stays with the locale"}, {"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1446124480, "post_id": 33387140, "comment_id": 54620069, "body": "Your dropdown getting values from <code>CATEGORY_COLLECTION</code> hash. when you use @categories.key ,this get all the keys i.e.( Aula de formaci&#243;n,Sala para entrevistas) and when you use @categories.values, this get all the values i.e. (aula-de-formacion,sala-para-entrevistas) . Try this and reply to me."}, {"owner": {"reputation": 131, "user_id": 4837841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HDDY3twZ71g/AAAAAAAAAAI/AAAAAAAACn8/79QPHqcXg_8/photo.jpg?sz=128", "display_name": "Maria-Christina Rus", "link": "https://stackoverflow.com/users/4837841/maria-christina-rus"}, "edited": false, "score": 0, "creation_date": 1446397480, "post_id": 33387140, "comment_id": 54715122, "body": "Hi Pardeep, if use categories.key, it gives me error. If I use categories.keys, it happens the same as before (all in Spanish). I am sure if it was what you meant? Thanks!!"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4837841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HDDY3twZ71g/AAAAAAAAAAI/AAAAAAAACn8/79QPHqcXg_8/photo.jpg?sz=128", "display_name": "Maria-Christina Rus", "link": "https://stackoverflow.com/users/4837841/maria-christina-rus"}, "edited": false, "score": 0, "creation_date": 1446027328, "post_id": 33387742, "comment_id": 54568572, "body": "Many thanks for your answer!! If I put category.values, I have the value of the category (ie sala-de-reuniones, event-space...) not the user-friendly category name..."}], "tags": [], "owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "is_accepted": false, "score": 0, "last_activity_date": 1446028820, "last_edit_date": 1446028820, "creation_date": 1446025775, "answer_id": 33387742, "question_id": 33387140, "link": "https://stackoverflow.com/questions/33387140/i18n-in-rails-for-filter/33387742#33387742", "title": "I18n in Rails for filter", "body": "<pre><code>&lt;%= f.select :categories_name_in, options_for_select(@categories.values, @category_selected), { include_blank: t('all_categories') }, { class: 'selectbox' } %&gt;\n</code></pre>\n\n<p>You need to use <strong>@categories.values</strong> insteadof <strong>@categoties</strong></p>\n"}], "owner": {"reputation": 131, "user_id": 4837841, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HDDY3twZ71g/AAAAAAAAAAI/AAAAAAAACn8/79QPHqcXg_8/photo.jpg?sz=128", "display_name": "Maria-Christina Rus", "link": "https://stackoverflow.com/users/4837841/maria-christina-rus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1446041105, "creation_date": 1446024075, "last_edit_date": 1446041105, "question_id": 33387140, "link": "https://stackoverflow.com/questions/33387140/i18n-in-rails-for-filter", "title": "I18n in Rails for filter", "body": "<p>I have a problem I am unable to solve with internationalization in Rails. I am completely newbie in Rails.</p>\n\n<p>I have a collection of categories defined in room.rb:</p>\n\n<pre><code>  CATEGORY_COLLECTION =  {\n                  I18n.t('meeting_rooms') =&gt; \"sala-de-reuniones\",\n                  \"Aula de formaci\u00f3n\" =&gt; \"aula-de-formacion\",\n                  \"Sala para entrevistas\" =&gt; \"sala-para-entrevistas\",\n                  \"Espacio para Eventos de Empresa\" =&gt; \"corporate-events\",\n                  \"Showroom\" =&gt; \"showroom\",\n                  \"Despacho\" =&gt; \"office\",\n                  \"Sala multiusos\" =&gt; \"sala-multiusos\",\n                  \"Puesto de Coworking\" =&gt; \"puesto-de-trabajo\",\n                  \"Sala para conferencias\" =&gt; \"sala-para-conferencias\",\n                  \"Sala de terapias\" =&gt;\"sala-de-terapias\",\n                  \"Otras salas\" =&gt; \"otras-salas\",\n                  \"Espacio para rodaje\" =&gt; \"espacio-para-rodaje\",\n                  \"Multiespacio\" =&gt; \"multiespacio\",\n                  \"Fiesta de Navidad\" =&gt; \"christmas-events\",\n                  \"Presentaci\u00f3n de producto\" =&gt; \"product-presentation\",\n                  \"Pop-up Stores\" =&gt; \"pop-up-stores\",\n                  \"Show cooking\" =&gt; \"kitchen-studio\",\n                  \"Shooting\" =&gt; \"shooting\",\n                  \"Teatro\" =&gt; \"theater\",\n                  \"Baile\" =&gt; \"dance-practice\",\n                  \"Yoga\" =&gt; \"yoga\",\n                  \"Performance\" =&gt; \"performance\",\n                  \"Sala para fiestas particulares\" =&gt; \"sala-para-eventos\"\n</code></pre>\n\n<p>As you can see, I have put the internationalization in the model, but when I want a dropdown with this, no internationalization.</p>\n\n<p>Helper:</p>\n\n<pre><code>def categories\n  @categories = Room::CATEGORY_COLLECTION\n  @category_selected = Room::FILTER_CATEGORY_COLLECTION\nend\n</code></pre>\n\n<p>Dropdown:</p>\n\n<pre><code>&lt;%= f.select :categories_name_in, options_for_select(@categories, @category_selected), { include_blank: t('all_categories') }, { class: 'selectbox' } %&gt;\n</code></pre>\n\n<p>The dropdown always appears in Spanish...</p>\n\n<h2>Thanks!</h2>\n\n<p>EDIT:\nI have tried with more categories with no translation and it seems that the dropdown puts spanish as default language (screenshot from english locale website):\n<a href=\"https://i.stack.imgur.com/eTdcB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eTdcB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any clue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid", "rails-admin"], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1446084993, "creation_date": 1446020828, "last_edit_date": 1446084993, "question_id": 33386100, "link": "https://stackoverflow.com/questions/33386100/rails-admin-adding-model-that-embeds-itself-causes-infinite-loop", "title": "Rails_admin, Adding model that embeds itself causes infinite loop", "body": "<p>I have created Mongoid model:</p>\n\n<pre><code>class Profile\n   include Mongoid::Document\n   include Mongoid::Timestamps\n\n   embeds_many :sub_profiles, class_name: 'Profile', cyclic: true, inverse_of: :profile\n\n   accepts_nested_attributes_for :sub_profiles\n\nend\n</code></pre>\n\n<p>When I open page where I can create or edit <code>Profile</code> my application just hangs. When I opened logs, it shows me that It tries to <strong>load html templates infinitely and just hangs.</strong></p>\n\n<p>I just wanted to dynamically add new <code>:sub_profiles</code> inside profile. What do I need to do?</p>\n\n<p>When I try to access to my <code>sub_profiles</code> via rails console it works fine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorization", "instagram", "omniauth"], "comments": [{"owner": {"reputation": 799, "user_id": 1679747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/33774bfe0488310a8a471adc7ec4617b?s=128&d=identicon&r=PG", "display_name": "cpk", "link": "https://stackoverflow.com/users/1679747/cpk"}, "edited": false, "score": 0, "creation_date": 1461697278, "post_id": 33386076, "comment_id": 61313740, "body": "<a href=\"http://stackoverflow.com/questions/35618343/unable-to-authenticate-with-omniauth-instagram-client-id-missing/36873557#36873557\" title=\"unable to authenticate with omniauth instagram client id missing\">stackoverflow.com/questions/35618343/&hellip;</a>"}], "owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470194876, "creation_date": 1446020708, "question_id": 33386076, "link": "https://stackoverflow.com/questions/33386076/omniauth-instagram-wont-include-my-client-id-as-part-of-the-authorization-url", "title": "omniauth-instagram won&#39;t include my client-id as part of the authorization url", "body": "<p>So I'm trying to make an app where I want to allow users to login using their Instagram accounts. This is a Rails app. I'm mostly following <a href=\"https://www.youtube.com/watch?v=KOnRf1K6Eg8\" rel=\"nofollow\">Railscast 241</a> for doing this except that I use Instagram API instead of Twitter API. I'm not using devise.</p>\n\n<p>I installed the gem 'omniauth-instagram' and I have the following in one of my initializers - </p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :developer unless Rails.env.production?\n  provider :instagram, ENV['MY_CLIENT_ID'], ENV['MY_CLIENT_SECRET']\nend\n</code></pre>\n\n<p>The problem is that when I direct the user to the 'auth/instagram' path the request does not contain my client-id (I check the Chrome debugging tools > Network to make sure of this). And as a result, although it takes the user to the login page, but then it fails and gives the following response - </p>\n\n<pre><code>{\"code\": 400, \n \"error_type\": \"OAuthException\", \n  \"error_message\": \"You must include a valid client_id, response_type, and redirect_uri parameters\"}\n</code></pre>\n\n<p>So instead of making the request o 'auth/instagram' path I direct the user to the actual autorization URL i.e.</p>\n\n<pre><code>https://api.instagram.com/oauth/authorize/?client_id=CLIENT-ID&amp;redirect_uri=REDIRECT-URI&amp;response_type=code\n</code></pre>\n\n<p>And all goes according to the plan. Except that I don't get the user information as a part of request.env['omniauth.auth'] inside my controller method (after being successfully redirected to the right URL). Infact request.env hash does not have omniauth.auth as one of its keys. The fix to this is that I'll manually have to write a curl -F query to the API to get the user information.</p>\n\n<p>But that sounds like too much work and I feel there must be something that I might have been doing wrong. Why isn't the gem making the correct request with my provided client_id? and why isn't 'omniauth.auth' get properly populated as part of the params?</p>\n\n<p>Some relevant resources - </p>\n\n<p><a href=\"https://instagram.com/developer/authentication/\" rel=\"nofollow\">Instagram API authentication page</a></p>\n\n<p><a href=\"https://github.com/ropiku/omniauth-instagram\" rel=\"nofollow\">omniauth-instagram gem</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1446018484, "post_id": 33385492, "comment_id": 54563559, "body": "Ok, so I found that it&#39;s not an invalid URI... what if I do want it to be an error? Can I raise it manually?"}], "answers": [{"tags": [], "owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1446018549, "creation_date": 1446018549, "answer_id": 33385560, "question_id": 33385492, "link": "https://stackoverflow.com/questions/33385492/my-uri-parse-is-not-returning-an-uriinvalidurierror-on-an-invalid-string/33385560#33385560", "title": "My URI.parse is not returning an URI::InvalidURIError on an invalid string", "body": "<pre><code>require 'uri'\n\nif url =~ URI::regexp\n    # Correct URL\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 4938780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyo7t0WiJO0/AAAAAAAAAAI/AAAAAAAAAC4/K9qbGRiv2j0/photo.jpg?sz=128", "display_name": "ta1k0tme", "link": "https://stackoverflow.com/users/4938780/ta1k0tme"}, "edited": false, "score": 0, "creation_date": 1446022191, "post_id": 33386441, "comment_id": 54565307, "body": "Exactly, Object is that  <code>Object.respond_to?(:to_str)</code> returns false."}], "tags": [], "owner": {"reputation": 66, "user_id": 4938780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyo7t0WiJO0/AAAAAAAAAAI/AAAAAAAAAC4/K9qbGRiv2j0/photo.jpg?sz=128", "display_name": "ta1k0tme", "link": "https://stackoverflow.com/users/4938780/ta1k0tme"}, "is_accepted": false, "score": 2, "last_activity_date": 1446022036, "creation_date": 1446022036, "answer_id": 33386441, "question_id": 33385492, "link": "https://stackoverflow.com/questions/33385492/my-uri-parse-is-not-returning-an-uriinvalidurierror-on-an-invalid-string/33386441#33386441", "title": "My URI.parse is not returning an URI::InvalidURIError on an invalid string", "body": "<p><code>URI::InvalidURIError</code> is raised when it can't parse a argument as Object or multibyte characters.</p>\n\n<pre><code>irb(main):001:0&gt; url = URI.parse(Object.new)\nURI::InvalidURIError: bad URI(is not URI?): #&lt;Object:0x007fcb7c2097a8&gt; \n\nirb(main):002:0&gt; url = URI.parse('\ud83c\udf63')\nURI::InvalidURIError: URI must be ascii only \"\\u{1f363}\"\n</code></pre>\n\n<p>In this case, <code>invalid</code> is regarded as <code>path</code>.</p>\n\n<pre><code>irb(main):003:0&gt; URI.parse('invalid').path\n=&gt; \"invalid\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1446026850, "post_id": 33386662, "comment_id": 54568285, "body": "I&#39;m getting an error also for valid links... URI::InvalidURIError: bad URI(is not URI?):"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5412340"}, "reply_to_user": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1446118164, "post_id": 33386662, "comment_id": 54615763, "body": "My bad mainly <code>URI::InvalidURIError</code> only fires when you are giving some wrong input in URI. look at the following example  <code>URI(&#39;inva lid&#39;)</code> this will fire <code>URI::InvalidURIError</code>  but if you provide <code>URI(&#39;invalid&#39;)</code> in that case <code>URI::InvalidURIError</code> will not fire   @bo-oz let me know"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1446124896, "post_id": 33386662, "comment_id": 54620373, "body": "True, I fixed it by explicitly checking if the returned object is either URI::HTTP or URI::HTTPS, otherwise raising the error manually."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5412340"}, "is_accepted": false, "score": 1, "last_activity_date": 1446022667, "creation_date": 1446022667, "answer_id": 33386662, "question_id": 33385492, "link": "https://stackoverflow.com/questions/33385492/my-uri-parse-is-not-returning-an-uriinvalidurierror-on-an-invalid-string/33386662#33386662", "title": "My URI.parse is not returning an URI::InvalidURIError on an invalid string", "body": "<p><code>URI.Parse</code> works in different way \nIf you say <code>u = URI.parse('http://google.com')</code>,\nyou'll get URI::HTTP and the u.port which will be 80 by default. </p>\n\n<p>If you say <code>u = URI.parse('google.com')</code>, you'll get a <code>URI::Generic</code> back with the <code>u.port</code> will be nil.</p>\n\n<p>as a result these will not raise any error</p>\n\n<p>to rais <code>URI::InvalidURIError</code> you will have to pass URI as argument of URI.parse</p>\n\n<p>so following code will raise the error </p>\n\n<pre><code>require 'uri'\nURI.parse(URI('invalid'))\n</code></pre>\n"}], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1421, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1446124949, "creation_date": 1446018282, "last_edit_date": 1446124949, "question_id": 33385492, "link": "https://stackoverflow.com/questions/33385492/my-uri-parse-is-not-returning-an-uriinvalidurierror-on-an-invalid-string", "title": "My URI.parse is not returning an URI::InvalidURIError on an invalid string", "body": "<p>I'm trying to validate a URL, but my URI.parse is accepting any string without raising an <code>URI::InvalidURIError</code> error. Am I doing something wrong?</p>\n\n<pre><code>require 'uri'\nURI.parse('invalid')\n =&gt; #&lt;URI::Generic invalid&gt;\n</code></pre>\n\n<p><strong>Solution</strong>\nI fixed this by checking for the class of the returned object. In the case it's URI::Generic I raise my own error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1446017594, "post_id": 33385228, "comment_id": 54563148, "body": "Do you have <code>remember_me</code> in <code>users</code> table?"}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "edited": false, "score": 1, "creation_date": 1487347611, "post_id": 33385228, "comment_id": 71759525, "body": "Did the exact same mistake!"}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 524659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ced8bdd4078b140688188cc795b492d?s=128&d=identicon&r=PG", "display_name": "aguynamedloren", "link": "https://stackoverflow.com/users/524659/aguynamedloren"}, "is_accepted": true, "score": 4, "last_activity_date": 1450246293, "last_edit_date": 1450246293, "creation_date": 1446021464, "answer_id": 33386269, "question_id": 33385228, "link": "https://stackoverflow.com/questions/33385228/undefined-method-remember-me-in-nested-form-for/33386269#33386269", "title": "Undefined method `remember_me&#39; in nested form for", "body": "<p>The form in Listing 8.47 is for a session:</p>\n\n<p><code>&lt;%= form_for(:session, url: login_path) do |f| %&gt;</code></p>\n\n<p>but your form is for a user:</p>\n\n<p><code>&lt;%= form_for(@user) do |f| %&gt;</code></p>\n\n<p>The <code>form_for</code> helper <a href=\"http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object\" rel=\"nofollow\">binds a form to an object</a>.  When that object is an instance of a model, like <code>@user</code>, rails expects each label and field to be an attribute of that model.  Since <code>remember_me</code> is not an attribute on User, you get an error.  You can fix this by adding a virtual attribute to your User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessor :remember_me\n  ...\n</code></pre>\n\n<p>This allows you to use <code>remember_me</code> in your user form, and sends <code>params[:user][:remember_me]</code> to your users controller when the form is submitted.</p>\n"}, {"tags": [], "owner": {"reputation": 229, "user_id": 4887818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ygZj.jpg?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/4887818/anton-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1501366941, "creation_date": 1501366941, "answer_id": 45394612, "question_id": 33385228, "link": "https://stackoverflow.com/questions/33385228/undefined-method-remember-me-in-nested-form-for/45394612#45394612", "title": "Undefined method `remember_me&#39; in nested form for", "body": "<p>You're placing the 'check box' code into the <code>app/views/users/new.html.erb</code>, which is a view template for the <em>Sign Up</em>, not Login.</p>\n\n<p>To make the code working, place the <code>check box</code> code into the <strong>Login</strong> view template, i.e., <code>app/views/sessions/new.html.erb</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 5496979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S1zSF.jpg?s=128&g=1", "display_name": "Shaundavin13", "link": "https://stackoverflow.com/users/5496979/shaundavin13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 1, "accepted_answer_id": 33386269, "answer_count": 2, "score": 0, "last_activity_date": 1554315018, "creation_date": 1446017356, "question_id": 33385228, "link": "https://stackoverflow.com/questions/33385228/undefined-method-remember-me-in-nested-form-for", "title": "Undefined method `remember_me&#39; in nested form for", "body": "<p>I'm following Michael Hartl's tutorial but I'm getting this error when I run the bundle exec rake test: </p>\n\n<pre><code>1) Error:\nUsersControllerTest#test_should_get_new:\nActionView::Template::Error: undefined method `remember_me' for #&lt;User:0x000000058544b8&gt;\n    app/views/users/new.html.erb:25:in `block (2 levels) in _app_views_users_new_html_erb__1810619291483938060_46219160'\n    app/views/users/new.html.erb:24:in `block in _app_views_users_new_html_erb__1810619291483938060_46219160'\n    app/views/users/new.html.erb:6:in `_app_views_users_new_html_erb__1810619291483938060_46219160'\n    test/controllers/users_controller_test.rb:6:in `block in &lt;class:UsersControllerTest&gt;'\n\n\n  2) Error:\nUsersSignupTest#test_invalid_signup_information:\nActionView::Template::Error: undefined method `remember_me' for #&lt;User:0x00000006acef08&gt;\n    app/views/users/new.html.erb:25:in `block (2 levels) in _app_views_users_new_html_erb__1810619291483938060_46219160'\n    app/views/users/new.html.erb:24:in `block in _app_views_users_new_html_erb__1810619291483938060_46219160'\n    app/views/users/new.html.erb:6:in `_app_views_users_new_html_erb__1810619291483938060_46219160'\n    test/integration/users_signup_test.rb:6:in `block in &lt;class:UsersSignupTest&gt;'\n\n\n  3) Error:\nUsersSignupTest#test_valid_signup_information:\nActionView::Template::Error: undefined method `remember_me' for #&lt;User:0x000000074f6ff8&gt;\n    app/views/users/new.html.erb:25:in `block (2 levels) in _app_views_users_new_html_erb__1810619291483938060_46219160'\n    app/views/users/new.html.erb:24:in `block in _app_views_users_new_html_erb__1810619291483938060_46219160'\n    app/views/users/new.html.erb:6:in `_app_views_users_new_html_erb__1810619291483938060_46219160'\n    test/integration/users_signup_test.rb:17:in `block in &lt;class:UsersSignupTest&gt;'\n</code></pre>\n\n<p>This is the new.html.erb file:</p>\n\n<pre><code>&lt;% provide(:title, 'Sign up') %&gt;\n&lt;h1&gt;Sign up&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@user) do |f| %&gt;\n      &lt;%= render 'shared/error_messages' %&gt;\n\n      &lt;%= f.label :name %&gt;\n      &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n      &lt;%= f.label :email %&gt;\n      &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password %&gt;\n      &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n      &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n\n      &lt;%= f.label :remember_me, class: \"checkbox inline\" do %&gt;\n        &lt;%= f.check_box :remember_me %&gt;\n        &lt;span&gt;Remember me on this computer&lt;/span&gt;\n      &lt;% end %&gt;\n\n      &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>^Just like listing 8.47 in the rails tutorial <a href=\"https://www.railstutorial.org/book/log_in_log_out\" rel=\"nofollow\">https://www.railstutorial.org/book/log_in_log_out</a></p>\n\n<p>It seems rails thinks :remember_me is a method, but why??? Why is :remember_me thought to be a method when all the other labels aren't??? I don't fkcing get it. </p>\n\n<p>Background: I've went through half a ruby tutorial and entered this rails tutorial. i have very basic html and css abilities. Never touched ruby before. And I don't really understand half of the concepts in this chapter. I mostly just followed the instructions. So please, explain in noob terms :) </p>\n"}, {"tags": ["ruby", "list", "variables", "global-variables"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5496975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aAMyu.jpg?s=128&g=1", "display_name": "bshock84", "link": "https://stackoverflow.com/users/5496975/bshock84"}, "edited": false, "score": 0, "creation_date": 1446018087, "post_id": 33385090, "comment_id": 54563379, "body": "Okay cool.  That makes a lot of sense.  I didn&#39;t even think about having it read a list of words from a file, that would probably make things a lot easier in the future.  Thanks for reply, that helped a lot."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 147, "user_id": 5496975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aAMyu.jpg?s=128&g=1", "display_name": "bshock84", "link": "https://stackoverflow.com/users/5496975/bshock84"}, "edited": false, "score": 0, "creation_date": 1446018274, "post_id": 33385090, "comment_id": 54563468, "body": "@bshock84: btw, you should accept the most helpful answer to your question (in this case, mine :) ). To do that, tick a checkmark to the left of the answer."}, {"owner": {"reputation": 147, "user_id": 5496975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aAMyu.jpg?s=128&g=1", "display_name": "bshock84", "link": "https://stackoverflow.com/users/5496975/bshock84"}, "edited": false, "score": 0, "creation_date": 1446018668, "post_id": 33385090, "comment_id": 54563642, "body": "Got it, thanks.  I&#39;m new posting here, been reading for a while.  I have a feeling I&quot;ll be around a lot though."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 147, "user_id": 5496975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aAMyu.jpg?s=128&g=1", "display_name": "bshock84", "link": "https://stackoverflow.com/users/5496975/bshock84"}, "edited": false, "score": 0, "creation_date": 1446019206, "post_id": 33385090, "comment_id": 54563882, "body": "@bshock84: I started posting after two years of lurking :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1446018391, "last_edit_date": 1446018391, "creation_date": 1446016748, "answer_id": 33385090, "question_id": 33385015, "link": "https://stackoverflow.com/questions/33385015/is-a-global-list-variable-okay-in-my-app-or-should-i-use-an-alternative/33385090#33385090", "title": "Is a global list variable okay in my app, or should I use an alternative?", "body": "<p>Global <em>variables</em> are generally bad. Global <em>constants</em> (which you seem to have) are a bit better.</p>\n\n<p>Just use the proper syntax:</p>\n\n<pre><code>$words = %w(foo bar) # bad, global var syntax\nWORDS = %w(foo bar) # good, syntax for constants\n</code></pre>\n\n<p>Although I would scope that constant to some module or class, to not pollute the global namespace. You don't need it to be really global, right? Something like this:</p>\n\n<pre><code>class Game\n  WORDS = %(foo bar)\nend\n\n# then\nGame::WORDS\n</code></pre>\n\n<p>Better yet, hide this constant in a method:</p>\n\n<pre><code>class Game\n  def self.words\n    %(foo bar)\n  end\nend\n\n# then \nGame.words\n</code></pre>\n\n<p>This way, if later you need to read the list of words from, say, file, you just change implementation of the method and the rest of the code doesn't need to be touched.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1446019991, "last_edit_date": 1446019991, "creation_date": 1446019629, "answer_id": 33385813, "question_id": 33385015, "link": "https://stackoverflow.com/questions/33385015/is-a-global-list-variable-okay-in-my-app-or-should-i-use-an-alternative/33385813#33385813", "title": "Is a global list variable okay in my app, or should I use an alternative?", "body": "<p>I agree with Sergio and in addition I use a technique to store that kind of variables in a configuration file, easy when you want to test values or distribute and separate from your code. I herefor use the yaml gem.\nIn addition I use Structs to hold the constants or variables, they are designed for this kind of data.</p>\n\n<p>Here an example of such a file</p>\n\n<pre><code>--- !ruby/struct\n  DEBUG_LEVEL: DEBUG #example of a constant\n  database: !ruby/struct\n    development: !ruby/struct\n      tablename: tablename\n      sequence: seq_osgn_rowversion\n      connection:\n        adapter: oracle_enhanced\n        database: (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (COMMUNITY = ORATCP.world)(PROTOCOL = TCP)(Host = hostname)(Port = 1526)))(CONNECT_DATA = (SID = SIDID)))\n        username: user\n        password: pass\n</code></pre>\n\n<p>You load them like this:</p>\n\n<pre><code>require 'yaml'\nCONFIG = YAML::load_file(\"./config.yaml\")\n</code></pre>\n\n<p>and the values are accessed like this</p>\n\n<pre><code>connection = CONFIG.database.development\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5496975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aAMyu.jpg?s=128&g=1", "display_name": "bshock84", "link": "https://stackoverflow.com/users/5496975/bshock84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 33385090, "answer_count": 2, "score": 2, "last_activity_date": 1446019991, "creation_date": 1446016434, "question_id": 33385015, "link": "https://stackoverflow.com/questions/33385015/is-a-global-list-variable-okay-in-my-app-or-should-i-use-an-alternative", "title": "Is a global list variable okay in my app, or should I use an alternative?", "body": "<p>I am working on building a hangman type game.  I have been reading a lot about global variables being bad, and I am wanting to use the best practices that I can.  That being said, I am currently declaring a several variables of different categories, and each category variable contains a list of words for the program to choose from.</p>\n\n<p>Is it okay to declare these as global, or should I place them in a method or something else like that?  </p>\n\n<p>They will never be changed or anything like that, they are just to be accessed so the program can pick a random word for the player to guess.  Is this considered okay?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 1, "creation_date": 1446017604, "post_id": 33384946, "comment_id": 54563155, "body": "Where you want to integrate in ActiveAdmin? index page? show page? a custom page?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "reply_to_user": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1446017683, "post_id": 33384946, "comment_id": 54563191, "body": "want to show in show page"}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1446020050, "post_id": 33384946, "comment_id": 54564249, "body": "There are tons of different charts available, which one you want to integrate with?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "reply_to_user": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1446023547, "post_id": 33384946, "comment_id": 54566155, "body": "bar chart which one used in railscast"}], "answers": [{"tags": [], "owner": {"reputation": 542, "user_id": 1261474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ebad5ab086f7eb49056bc9fcc06298?s=128&d=identicon&r=PG&f=1", "display_name": "Adib Saad", "link": "https://stackoverflow.com/users/1261474/adib-saad"}, "is_accepted": false, "score": 1, "last_activity_date": 1465180787, "last_edit_date": 1465180787, "creation_date": 1465171206, "answer_id": 37647960, "question_id": 33384946, "link": "https://stackoverflow.com/questions/33384946/how-to-integrate-charts-in-active-admin/37647960#37647960", "title": "How to integrate charts in Active Admin", "body": "<p>You can render a partial in show or index page, as shown <a href=\"https://github.com/activeadmin/activeadmin/blob/master/docs/6-show-pages.md\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>ActiveAdmin.register Post do\n  show do\n    # renders app/views/admin/posts/_some_partial.html.erb\n    render 'some_partial', { post: post }\n  end\nend\n</code></pre>\n\n<p>The partial can be plain old html/erb so you can include a <code>&lt;script&gt;</code> section with the necessary javascript to render your chart.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1637, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1465180787, "creation_date": 1446016156, "last_edit_date": 1446017765, "question_id": 33384946, "link": "https://stackoverflow.com/questions/33384946/how-to-integrate-charts-in-active-admin", "title": "How to integrate charts in Active Admin", "body": "<p>I want to show graph and charts in my app.\nFor this I use charts in rails.</p>\n\n<p><a href=\"http://railscasts.com/episodes/223-charts\" rel=\"nofollow\">http://railscasts.com/episodes/223-charts</a></p>\n\n<p>It works fine.I want to know is it possible I integrate it with active admin in rails?</p>\n\n<p>Till now I can't done anything on its integration because I have no understanding how to start</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1446017731, "post_id": 33384944, "comment_id": 54563208, "body": "That didnt work for me I changed but its not coming into the view. But when I check the inspect Element its there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5245636"}, "reply_to_user": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1446017876, "post_id": 33384944, "comment_id": 54563272, "body": "Di you try to <code>value = &#39;&lt;%= &quot;#{@lastcustomer.firstname} #{@lastcustomer.middlename} #{@lastcustomer.lastname}&quot; %&gt;&#39;</code>?"}, {"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1446018058, "post_id": 33384944, "comment_id": 54563364, "body": "Yes, I did it, what is coming there is only first name, rest are not showing but when I inspect the element using browser its there in the code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5245636"}, "reply_to_user": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1446018520, "post_id": 33384944, "comment_id": 54563571, "body": "I updated the code above with <code>&lt;input id=&#39;textinput&#39; name=&#39;textinput&#39; type=&#39;text&#39; placeholder=&#39;placeholder&#39; class=&#39;form-control input-md&#39; value =&#39;&lt;%= &quot;#{@lastcustomer.firstname} #{@lastcustomer.middlename} #{@lastcustomer.lastname}&quot; %&gt;&#39;  readonly&gt; &lt;&#47;b&gt;</code> and I tested it and working on me."}, {"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1446019459, "post_id": 33384944, "comment_id": 54563977, "body": "Thank you, now its working fine, as a beginner you helped me so much. I dont know my question was a foolish one or not because I got many down votes for my question :( ."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5245636"}, "is_accepted": true, "score": 1, "last_activity_date": 1446018401, "last_edit_date": 1446018401, "creation_date": 1446016151, "answer_id": 33384944, "question_id": 33384898, "link": "https://stackoverflow.com/questions/33384898/ruby-on-rails-how-to-put-space-inside-tag-in-rails-with-multiple-variab/33384944#33384944", "title": "Ruby On Rails : How to Put Space Inside &lt;%= %&gt; tag in Rails With Multiple Variable Values To Render", "body": "<p>You can do by using \"#{value} #{value} #{value}\" so you can include spaces. So,</p>\n\n<p>Instead of:</p>\n\n<pre><code>&lt;input id=\"textinput\" name=\"textinput\" type=\"text\" placeholder=\"placeholder\" class=\"form-control input-md\" value = &lt;%= @lastcustomer.firstname%&gt;&lt;%= @lastcustomer.middlename %&gt;&lt;%= @lastcustomer.lastname %&gt;  readonly&gt; &lt;/b&gt;\n</code></pre>\n\n<p>Do like:</p>\n\n<pre><code>&lt;input id='textinput' name='textinput' type='text' placeholder='placeholder' class='form-control input-md' value ='&lt;%= \"#{@lastcustomer.firstname} #{@lastcustomer.middlename} #{@lastcustomer.lastname}\" %&gt;'  readonly&gt; &lt;/b&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1446019513, "post_id": 33384996, "comment_id": 54564003, "body": "Thanks for you quick help :)"}], "tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": false, "score": 2, "last_activity_date": 1446016387, "creation_date": 1446016387, "answer_id": 33384996, "question_id": 33384898, "link": "https://stackoverflow.com/questions/33384898/ruby-on-rails-how-to-put-space-inside-tag-in-rails-with-multiple-variab/33384996#33384996", "title": "Ruby On Rails : How to Put Space Inside &lt;%= %&gt; tag in Rails With Multiple Variable Values To Render", "body": "<p>Add a method to your customer model that looks like this:</p>\n\n<pre><code>def full_name\n  [firstname, middlename, lastname].join(' ')\nend\n</code></pre>\n\n<p>then, in your view you just use:</p>\n\n<pre><code>&lt;%= @lastcustomer.full_name %&gt; \n</code></pre>\n"}], "owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 1, "accepted_answer_id": 33384944, "answer_count": 2, "score": -2, "last_activity_date": 1446018401, "creation_date": 1446015981, "question_id": 33384898, "link": "https://stackoverflow.com/questions/33384898/ruby-on-rails-how-to-put-space-inside-tag-in-rails-with-multiple-variab", "title": "Ruby On Rails : How to Put Space Inside &lt;%= %&gt; tag in Rails With Multiple Variable Values To Render", "body": "<p><strong>I have a form which display the Full name of the customer in read only mode which look like bellow</strong>\n<a href=\"https://i.stack.imgur.com/74iM8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/74iM8.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I require is to have a white space in between First name, Middle name and Last name. I tried many times with different code but it failed, I am giving bellow my code, what to do ?</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n          &lt;label class=\"col-md-4 control-label\" for=\"textinput\"&gt;Customer Name :&lt;/label&gt;  \n          &lt;div class=\"col-md-4\"&gt;\n          &lt;b&gt;&lt;input id=\"textinput\" name=\"textinput\" type=\"text\" placeholder=\"placeholder\" class=\"form-control input-md\" value = &lt;%= @lastcustomer.firstname%&gt;&lt;%= @lastcustomer.middlename %&gt;&lt;%= @lastcustomer.lastname %&gt;  readonly&gt; &lt;/b&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell", "unix", "console"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446014740, "post_id": 33384483, "comment_id": 54561962, "body": "You might consider making a rake task for this. It&#39;s a little more idiomatic."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1446014799, "post_id": 33384483, "comment_id": 54561990, "body": "Answer to your literal question: more quotes. But it&#39;s really a strange thing to do, executing rails console from shell from ruby, almost certainly an XY problem."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1446014847, "post_id": 33384483, "comment_id": 54562015, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10313181/pass-ruby-script-file-to-rails-console\">Pass ruby script file to rails console</a>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 1701832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6c0be7db705f84772a3dfe7348ffe?s=128&d=identicon&r=PG", "display_name": "jhwang", "link": "https://stackoverflow.com/users/1701832/jhwang"}, "edited": false, "score": 0, "creation_date": 1446015759, "post_id": 33384665, "comment_id": 54562384, "body": "Thanks for the quick reply! I haven&#39;t tried writing my own rake task before but it is something I should explore.  I was just kind of messing around do to my curiosity. Thanks again everyone for all the help!"}, {"owner": {"reputation": 1101, "user_id": 1091943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2a0fb54ef44829caf823398a40e3c9ee?s=128&d=identicon&r=PG", "display_name": "Pysis", "link": "https://stackoverflow.com/users/1091943/pysis"}, "edited": false, "score": 0, "creation_date": 1495466547, "post_id": 33384665, "comment_id": 75252545, "body": "My use case is to run essentially one-time-use commands, and the first code line is working well for me."}], "tags": [], "owner": {"reputation": 635, "user_id": 5332286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9bbcfabe5cb5d2631b3dcadef70e49?s=128&d=identicon&r=PG", "display_name": "Devin Howard", "link": "https://stackoverflow.com/users/5332286/devin-howard"}, "is_accepted": true, "score": 3, "last_activity_date": 1446015087, "creation_date": 1446015087, "answer_id": 33384665, "question_id": 33384483, "link": "https://stackoverflow.com/questions/33384483/execute-multiple-commands-on-console-through-unix-shell/33384665#33384665", "title": "execute multiple commands on console through unix shell", "body": "<p>Yes you can do this</p>\n\n<p>From a unix shell prompt:</p>\n\n<pre><code>echo 'p = Product.first; b = Billing.first' | rails c\n</code></pre>\n\n<p>From the rails console itself, or a ruby script I guess:</p>\n\n<pre><code>exec(%Q{echo 'p = Product.first; b = Billing.first' | rails c})\n</code></pre>\n\n<p>It's probably worth asking why you want to do this though. Could you use a <a href=\"http://railsguides.net/how-to-generate-rake-task/\" rel=\"nofollow\">rake task</a>?</p>\n"}], "owner": {"reputation": 67, "user_id": 1701832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f6c0be7db705f84772a3dfe7348ffe?s=128&d=identicon&r=PG", "display_name": "jhwang", "link": "https://stackoverflow.com/users/1701832/jhwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 1, "accepted_answer_id": 33384665, "answer_count": 1, "score": 3, "last_activity_date": 1446022889, "creation_date": 1446014406, "last_edit_date": 1446022889, "question_id": 33384483, "link": "https://stackoverflow.com/questions/33384483/execute-multiple-commands-on-console-through-unix-shell", "title": "execute multiple commands on console through unix shell", "body": "<p>I am currently trying to figure out if it is possible to run multiple commends within one line on a rails console through Unix shell or within a ruby script.</p>\n\n<p>For Example:</p>\n\n<pre><code>exec('echo p = Product.first;b = Billing.first|rails c')\n</code></pre>\n\n<p>When I tried something similar to the example, it would always try to execute the two commands before launching console. </p>\n\n<p>Hope this make sense and appreciate any help I can get.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "rails-activejob"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1446014317, "post_id": 33384304, "comment_id": 54561778, "body": "<code>self.included</code> callback is called when ruby executes <i>class declaration</i> of <code>A</code>, exactly in place where <code>include B</code> appeared. <b>TL;DR</b>: put <code>include B</code> in the very end of <code>A</code> declaration."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446017652, "post_id": 33384304, "comment_id": 54563183, "body": "@mudasobwa: it&#39;s not that TL :)"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1446018085, "post_id": 33384304, "comment_id": 54563377, "body": "Thanks, that works. However it&#39;s more common to include a module at the top of a file. Since this approach would make using this library a little more complicated and confusing, is there not  a way to do this where I can include the module at the top? I am guessing not."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446026761, "post_id": 33384304, "comment_id": 54568234, "body": "I just copy&amp;pasted your code and didn&#39;t get any errors or anything suspicious. Either there is no problem or your code is not representative of your problem."}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446037450, "post_id": 33384304, "comment_id": 54574989, "body": "@J&#246;rgWMittag I am not sure if you have read the whole question or code, but the code does not have an error per se. Look at the commented out code to see what I am trying to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 3957, "user_id": 187004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94464371b17302eadec74810ec480aaf?s=128&d=identicon&r=PG", "display_name": "Cristian Bica", "link": "https://stackoverflow.com/users/187004/cristian-bica"}, "is_accepted": true, "score": 1, "last_activity_date": 1446020669, "creation_date": 1446020669, "answer_id": 33386064, "question_id": 33384304, "link": "https://stackoverflow.com/questions/33384304/how-to-execute-methods-in-base-class-when-mixing-in-modules/33386064#33386064", "title": "How to execute methods in base class when mixing in modules?", "body": "<p>I see two other options to your issue. The <code>around_perform</code> is an <code>ActiveJob::Base</code> class method which stores the block or method to be called around perform. So you need to call this method at class level. The 2 options are:</p>\n\n<ol>\n<li><p>Subclassing: Have a base <code>ActiveJob::Base</code> subclass (ex: <code>MainJob)</code> which has the <code>around_perform</code> thing and all your jobs should subclass <code>MainJob</code> instead of <code>ActiveJob::Base</code></p></li>\n<li><p>Set the <code>around_perform</code> callback in the included block:</p></li>\n</ol>\n\n<p>In the exmple below I'm using <code>ActiveSupport::Concern</code></p>\n\n<pre><code>require 'active_support/concern'\n\nmodule TheModule\n  extend ActiveSupport::Concern\n\n  included do\n    around_perform do |job, block|\n      puts \"#{job.class.name} Look I'm being called\"\n      block.call\n      puts \"#{job.class.name} Look I was called\"\n    end\n  end\nend\n</code></pre>\n\n<p>And <code>include TheModule</code> in your job classes</p>\n\n<p>PS: I would go for the #1 (inheritance) as it seems more 'natural' to me</p>\n"}], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 33386064, "answer_count": 1, "score": 0, "last_activity_date": 1446020669, "creation_date": 1446013690, "question_id": 33384304, "link": "https://stackoverflow.com/questions/33384304/how-to-execute-methods-in-base-class-when-mixing-in-modules", "title": "How to execute methods in base class when mixing in modules?", "body": "<p>I am trying to execute a method in a base class from an included module. So let's say I have the following code</p>\n\n<pre><code>module B\n  def self.included(base)\n    base.extend(ClassMethods)\n    # code to execute A.new.my_instance_method\n    # code to execute A.my_static_method\n  end\n\n  def my_module_instance_method\n    puts 'module_instance_method'\n  end\n\n  module ClassMethods\n    def my_module_static_method\n      puts 'module_static_method'\n    end\n  end\nend\n\nclass A\n  include B\n\n  def my_instance_method\n    puts 'Instance Method'\n  end\n\n  def self.my_static_method\n    puts 'static method'\n  end\nend\n</code></pre>\n\n<p>How would I get the two methods to execute? </p>\n\n<p>Essentially I am trying to extend ActiveJob and I want to override around_perform. I want to achieve this by mixing in a module that adds around_perform to the job and fires some code before and after my job. I have been trying to understand how modules work, but there are still gaps in understanding how things work. From what I have read, this is similar to what I need.</p>\n\n<p>Any direction appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "int"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1446011596, "post_id": 33383815, "comment_id": 54560855, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2095493/how-can-i-check-if-a-value-is-a-number\">How can I check if a value is a number?</a>"}, {"owner": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446011637, "post_id": 33383815, "comment_id": 54560871, "body": "@BradWerth I want to learn why my program is not working rather than copying others code"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1446011656, "post_id": 33383815, "comment_id": 54560880, "body": "FWIW, params all come in as stings. They are coerced into integers when inserted into the database."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1446011697, "post_id": 33383815, "comment_id": 54560903, "body": "So learn from the existing question, it&#39;s already been asked (and answered)..."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446011737, "post_id": 33383815, "comment_id": 54560922, "body": "Or <a href=\"http://stackoverflow.com/questions/5661466/test-if-string-is-a-number-in-ruby-on-rails\" title=\"test if string is a number in ruby on rails\">stackoverflow.com/questions/5661466/&hellip;</a>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446011811, "post_id": 33383815, "comment_id": 54560947, "body": "Or <a href=\"http://stackoverflow.com/questions/26061584/how-do-i-determine-if-a-string-is-numeric\" title=\"how do i determine if a string is numeric\">stackoverflow.com/questions/26061584/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/4589968/ruby-rails-how-to-check-if-a-var-is-an-integer\" title=\"ruby rails how to check if a var is an integer\">stackoverflow.com/questions/4589968/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/8616360/how-to-check-if-a-variable-is-a-number-or-a-string\" title=\"how to check if a variable is a number or a string\">stackoverflow.com/questions/8616360/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/1235863/test-if-a-string-is-basically-an-integer-in-quotes-using-ruby\" title=\"test if a string is basically an integer in quotes using ruby\">stackoverflow.com/questions/1235863/&hellip;</a> or..."}, {"owner": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446011859, "post_id": 33383815, "comment_id": 54560960, "body": "@Pavan&#39;s answer is my solution."}], "answers": [{"comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446011963, "post_id": 33383852, "comment_id": 54560996, "body": "FWIW, it seems kinda stupid to convert to an integer, check if it is an integer, convert to a string, and check the length. This is a poor way to perform validations in Rails, as well."}, {"owner": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446012103, "post_id": 33383852, "comment_id": 54561034, "body": "@BradWerth What do you suggest the better way &amp; Stack overflow only allows me to accept answers within a certain time so waiting for time to pass by"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "edited": false, "score": 1, "creation_date": 1446012164, "post_id": 33383852, "comment_id": 54561056, "body": "@fscore Rails validations. Like <a href=\"http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_numericality_of\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveModel/Validations/ClassMethods/&hellip;</a>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446012232, "post_id": 33383852, "comment_id": 54561072, "body": "Or maybe <a href=\"http://stackoverflow.com/questions/10700800/how-to-validate-numericality-and-inclusion-while-still-allowing-attribute-to-be\" title=\"how to validate numericality and inclusion while still allowing attribute to be\">stackoverflow.com/questions/10700800/&hellip;</a> ...."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "edited": false, "score": 0, "creation_date": 1446012440, "post_id": 33383852, "comment_id": 54561126, "body": "Or maybe <a href=\"http://stackoverflow.com/questions/23542960/rails-validating-phone-number-regex\" title=\"rails validating phone number regex\">stackoverflow.com/questions/23542960/&hellip;</a> @fscore"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1446012819, "last_edit_date": 1446012819, "creation_date": 1446011687, "answer_id": 33383852, "question_id": 33383815, "link": "https://stackoverflow.com/questions/33383815/ruby-verifying-if-the-given-user-input-is-a-number/33383852#33383852", "title": "Ruby: Verifying if the given user input is a number", "body": "<blockquote>\n  <p>The output that I get is always The number is invalid no matter what I\n  enter in text box.</p>\n</blockquote>\n\n<p>The reason why your code always falls back to <code>else</code> part because the values that are coming from the <code>params</code> will always be <strong><em>strings</em></strong>. So the value of <code>params[:phone_num]</code> is a <strong><em>string</em></strong>. So your code is failing here <code>if @phone.is_a? Integer</code>. Instead you need change it to <code>params[:phone_num].to_i</code></p>\n\n<pre><code>@phone = params[:phone_num].to_i\nputs \"phone_num: #{@phone}\"\n  if @phone.is_a? Integer \n    puts \"phone_num is int\"\n    if @phone.to_s.length == 10\n      puts \"10 digit\"\n      perform(@phone)\n      @output = \"Valid Number, will receive a call\"\n    end\n  else \n    puts \"Wont be calling\"\n    @output = \"The number is invalid\"\n  end\n</code></pre>\n\n<p><strong><em>Note:</em></strong> </p>\n\n<p>Yes. This is poor way to perform validations. I'm just answering the OP's question.</p>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "is_accepted": false, "score": 0, "last_activity_date": 1446014375, "last_edit_date": 1495541793, "creation_date": 1446014375, "answer_id": 33384478, "question_id": 33383815, "link": "https://stackoverflow.com/questions/33383815/ruby-verifying-if-the-given-user-input-is-a-number/33384478#33384478", "title": "Ruby: Verifying if the given user input is a number", "body": "<p>Take a look at this - <a href=\"https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation?rq=1\">A comprehensive regex for phone number validation</a> - how to determine a string looks like a phone number. There's a very complex regex, because people have various forms for entering phone numbers!</p>\n\n<p>I personally don't like super complex regexes, but it's pretty much what they were invented for. So this is when you want to figure out what sorts of forms are acceptable, write some tests, and make your code pass to your acceptance based on the massive link above!</p>\n\n<p>edit: your code is wrong in a bunch of places; params are already a string, so try this! Remember your nested if/else/end, too.</p>\n\n<pre><code>@phone = params[:phone_num]\nif @phone =~ /\\A\\d+\\Z/ # replace with better regex\n  # this just means \"string is all numbers\"\n  puts \"phone_num is int\"\n  if @phone.length == 10\n    puts \"10 digit\"\n    perform(@phone)\n    @output = \"Valid Number, will receive a call\"\n  else\n    puts \"Number length wrong, #{@phone.length}\"\n  end\nelse \n  puts \"Wont be calling, not a number: #{@phone.inspect}\"\n  @output = \"The number is invalid\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "edited": false, "score": 0, "creation_date": 1446046474, "post_id": 33387472, "comment_id": 54581778, "body": "Thanks Rich. Thats a good example, What would I do as in my scenario there is no model. I dont want to store anything. Although storing could make perfect sense moving forward. But want to know another best practice if no model"}, {"owner": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "edited": false, "score": 0, "creation_date": 1446047624, "post_id": 33387472, "comment_id": 54582672, "body": "And through model code I want different kinds of messages to go to view. Hows it possible with your example as validation happens only in model?"}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "reply_to_user": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "edited": false, "score": 1, "creation_date": 1446064431, "post_id": 33387472, "comment_id": 54593395, "body": "@fscore you can still use validations without persisting to the database, you can make a class that doesn&#39;t inherit from anything."}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "edited": false, "score": 2, "creation_date": 1446064533, "post_id": 33387472, "comment_id": 54593443, "body": "wrapping up a bunch of functionality and logic in a new class is advanced stuff and is covered in something like <a href=\"http://railscasts.com/episodes/219-active-model?language=en&amp;view=asciicast\" rel=\"nofollow noreferrer\">railscasts.com/episodes/&hellip;</a>"}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "edited": false, "score": 0, "creation_date": 1446064631, "post_id": 33387472, "comment_id": 54593494, "body": "also, if you want people to be able to enter a phone number like <code>(710) 123-3456</code> then validating numericality won&#39;t work; you&#39;ll want to pre-process the number when writing - maybe <code>def number=(val); write_attribute :val, val.gsub! &#47;\\D&#47;, &#39;&#39;; end;</code> -- not relevant if you aren&#39;t using the db, but that&#39;s how I&#39;d do it!"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1446112200, "post_id": 33387472, "comment_id": 54611869, "body": "You <i>might</i> want to use virtual attributes too"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 2, "last_activity_date": 1446025672, "last_edit_date": 1446025672, "creation_date": 1446024966, "answer_id": 33387472, "question_id": 33383815, "link": "https://stackoverflow.com/questions/33383815/ruby-verifying-if-the-given-user-input-is-a-number/33387472#33387472", "title": "Ruby: Verifying if the given user input is a number", "body": "<p>There is standard validation (<a href=\"http://guides.rubyonrails.org/active_record_validations.html#numericality\" rel=\"nofollow\"><code>length</code></a>) &amp; (<a href=\"http://guides.rubyonrails.org/active_record_validations.html#numericality\" rel=\"nofollow\"><code>numericality</code></a>) for this:</p>\n\n<pre><code>#app/models/user.rb\nclass User &lt; ActiveRecord::Base\n   validates :phone_num, length: { is: 10 }, numericality: { only_integer: true }\nend\n</code></pre>\n\n<p>This type of validation belongs in the model. </p>\n\n<hr>\n\n<p><strong>Notes</strong></p>\n\n<p>Your controller will look as follows:</p>\n\n<pre><code>#app/controllers/users_controller.rb\nclass UsersController &lt; ApplicationController\n   def create\n      @user = User.new user_params\n      @user.save #-&gt; validations handled by model\n   end\nend\n</code></pre>\n\n<p>There's a principle called <a href=\"http://www.sitepoint.com/10-ruby-on-rails-best-practices/\" rel=\"nofollow\"><strong><em>fat model, skinny controller</em></strong></a> - you should put \"data\" logic in your model.</p>\n\n<p>The reason for this is to remove inefficient code from the controller. </p>\n\n<p>It gives you the ability to <em>delegate</em> much of your logic to the Rails core helpers (<code>validations</code> for example), instead of calling your own mass of code in the front-end (like you're doing).</p>\n\n<p>Each time you run a Rails app, the various classes (controller &amp; model) are loaded into memory. Along with all of the Rails classes (<code>ActiveRecord</code> etc), your controllers &amp; models have to be loaded, too. </p>\n\n<p><em>Any</em> extra code causes causes <a href=\"https://en.wikipedia.org/wiki/Software_bloat\" rel=\"nofollow\">bloat</a>, making your application buggy &amp; unusable. The best developers know when to use their own code, and when to delegate to Rails. This example is a perfect demonstration of when to delegate.</p>\n"}], "owner": {"reputation": 2347, "user_id": 1881309, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/t6ygi.png?s=128&g=1", "display_name": "fscore", "link": "https://stackoverflow.com/users/1881309/fscore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1737, "favorite_count": 0, "accepted_answer_id": 33383852, "answer_count": 3, "score": -2, "last_activity_date": 1446025672, "creation_date": 1446011490, "last_edit_date": 1446012381, "question_id": 33383815, "link": "https://stackoverflow.com/questions/33383815/ruby-verifying-if-the-given-user-input-is-a-number", "title": "Ruby: Verifying if the given user input is a number", "body": "<p>I want to check if the variable which is basically a user input is a 10 digit phone number or not. </p>\n\n<p>There are 2 sets of validations:\n- If num is less than 10 digit then prompt a msg \n- if num is a string instead rather than integer</p>\n\n<pre><code>@phone = params[:phone_num]\n    puts \"phone_num: #{@phone}\"\n    if @phone.is_a? Integer \n      puts \"phone_num is int\"\n      if @phone.to_s.length == 10\n        puts \"10 digit\"\n        perform(@phone)\n        @output = \"Valid Number, will receive a call\"\n      end\n    else \n      puts \"Wont be calling\"\n      @output = \"The number is invalid\"\n    end\n</code></pre>\n\n<p>The output that I get is always <code>The number is invalid</code> no matter what I enter in text box. There are many stack overflow answering dealing with different questions but wondering why my code didn't work. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "edited": false, "score": 0, "creation_date": 1446010835, "post_id": 33383648, "comment_id": 54560599, "body": "look for a 5 digit number instead?"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 1, "creation_date": 1446054382, "post_id": 33383648, "comment_id": 54587486, "body": "I&#39;m voting to close this question as off-topic because it looks like homework / OP did not put the minimum effort in exploring how to sole this."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1446013369, "creation_date": 1446013369, "answer_id": 33384231, "question_id": 33383648, "link": "https://stackoverflow.com/questions/33383648/how-to-get-city-and-pincode-with-ragular-expression/33384231#33384231", "title": "How to get city and pincode with ragular expression", "body": "<pre><code>\u25b6 addr = %q|M G Road, Dlf City Phase I Gurgaon, Gurgaon - 122001, Near Sikanderpur Metro Station\n\u25b7 Plot 32, Central Business District, Shahdara, Delhi - 110032\n\u25b7 Sardar Patel Marg, Chanakya Puri, Delhi - 110021, Diplomatic Enclave\n\u25b7 Golf Course Road, Gurgaon Sector 56, Gurgaon - 122011, Near Ghata Gaon|\n\u25b6 addr.scan(/(\\w+\\s+-\\s+\\d+)(?=,|$)/).flatten\n#\u21d2 [\n#  [0] \"Gurgaon - 122001\",\n#  [1] \"Delhi - 110032\",\n#  [2] \"Delhi - 110021\",\n#  [3] \"Gurgaon - 122011\"\n# ]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1451, "user_id": 3425009, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GMKbt.jpg?s=128&g=1", "display_name": "Harman", "link": "https://stackoverflow.com/users/3425009/harman"}, "edited": false, "score": 0, "creation_date": 1446021988, "post_id": 33385224, "comment_id": 54565209, "body": "Thanks to describe all these :)"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446047250, "post_id": 33385224, "comment_id": 54582369, "body": "Did you use a tool to generate the annotated regex, or did you do it by hand? It looks really nice..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446052404, "post_id": 33385224, "comment_id": 54586090, "body": "@Brad, the only tool I used was a keyboard. Your question has me wondering, however, if there might be a gem that does that."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1446053553, "post_id": 33385224, "comment_id": 54586922, "body": "Cool - thanks. <a href=\"http://www.regexbuddy.com/\" rel=\"nofollow noreferrer\">regexbuddy.com</a> kinda does something like that, but not with the nice formatting. I was hoping there might be an even better alternate..."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1446053839, "last_edit_date": 1446053839, "creation_date": 1446017348, "answer_id": 33385224, "question_id": 33383648, "link": "https://stackoverflow.com/questions/33383648/how-to-get-city-and-pincode-with-ragular-expression/33385224#33385224", "title": "How to get city and pincode with ragular expression", "body": "<p>I suggest the following.</p>\n\n<pre><code>text =&lt;&lt;-END\nM G Road, Dlf City Phase I Gurgaon, Gurgaon - 122001, Near Sikanderpur Metro Station\nPlot 32, Central Business District, Shahdara, New Delhi - 110032\nSardar Patel Marg, Chanakya Puri, Delhi - 110021, Diplomatic Enclave\nGolf Course Road, Gurgaon Sector 56, Gurgaon - 122011, Near Ghata Gaon\nEND\n\nr = /\n    (?&lt;=,)     # Match a comma in a positive lookbehind\n    (?:        # Begin a non-capture group\n    \\s+        # Match &gt;= 1 whitespace characters\n    [A-Z]      # Match a capital letter\n    [a-z]+     # Match &gt;= 1 lowercase letters\n    )          # Close non-capture group\n    +          # Match group &gt;= 1 times (e.g., 2 for \"New Delhi\")\n    \\s+        # Match &gt;= 1 spaces\n    -          # Match a hyphen\n    \\s+        # Match &gt;= 1 spaces\n    \\d{6}      # Match six digits\n    (?=[\\D\\z]) # Match a non-digit or end of string in a positive lookahead\n    /x         # Regex extended mode\n\ntext.lines.map { |s| s[r].strip.split(/\\s-\\s/) }\n  #=&gt; [[\"Gurgaon\", \"122001\"], [\"New Delhi\", \"110032\"],\n  #    [\"Delhi\", \"110021\"], [\"Gurgaon\", \"122011\"]] \n</code></pre>\n"}], "owner": {"reputation": 1451, "user_id": 3425009, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GMKbt.jpg?s=128&g=1", "display_name": "Harman", "link": "https://stackoverflow.com/users/3425009/harman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 2, "accepted_answer_id": 33384231, "answer_count": 2, "score": 2, "last_activity_date": 1446053839, "creation_date": 1446010650, "last_edit_date": 1446012280, "question_id": 33383648, "link": "https://stackoverflow.com/questions/33383648/how-to-get-city-and-pincode-with-ragular-expression", "title": "How to get city and pincode with ragular expression", "body": "<p>I have few address and i want to get pincode and city name in that address through regular expression </p>\n\n<p>These are address</p>\n\n<pre><code>M G Road, Dlf City Phase I Gurgaon, Gurgaon - 122001, Near Sikanderpur Metro Station\nPlot 32, Central Business District, Shahdara, Delhi - 110032\nSardar Patel Marg, Chanakya Puri, Delhi - 110021, Diplomatic Enclave\nGolf Course Road, Gurgaon Sector 56, Gurgaon - 122011, Near Ghata Gaon\n</code></pre>\n\n<p>Look into pincode that is 6 digit only and with it city name</p>\n\n<pre><code>    M G Road, Dlf City Phase I Gurgaon, Gurgaon - 122001, Near Sikanderpur Metro Station = Gurgaon - 122001\n\nPlot 32, Central Business District, Shahdara, Delhi - 110032 = Delhi - 110032\n\nSardar Patel Marg, Chanakya Puri, Delhi - 110021, Diplomatic Enclave = Delhi - 110021\n\nGolf Course Road, Gurgaon Sector 56, Gurgaon - 122011, Near Ghata Gaon = Gurgaon - 122011\n</code></pre>\n\n<p>How can i get it? even there is coma also but it in random order some time it's come in front and some time in middle and in last. but there must be 6 digit pincode number and , - also there.</p>\n\n<p>Please help me to find out the result</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "osx-elcapitan"], "answers": [{"tags": [], "owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "is_accepted": false, "score": 0, "last_activity_date": 1446002764, "creation_date": 1446002764, "answer_id": 33382400, "question_id": 33382302, "link": "https://stackoverflow.com/questions/33382302/os-x-el-capitan-cant-install-bundler-using-gem/33382400#33382400", "title": "OS X El Capitan - Can&#39;t install bundler using gem", "body": "<p>OS X 10.11 has a so-called \"rootless\" feature, which forbidden users to modify <code>/usr</code> directory. The only exception is <code>/usr/local</code>. So <code>sudo</code> is useless here. I suggest using <code>rbenv</code> to install a new ruby installation somewhere else.</p>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 980575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c1d72be21a2a43be717c6dc1660c7b?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/980575/jim"}, "reply_to_user": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "edited": false, "score": 0, "creation_date": 1446003742, "post_id": 33382401, "comment_id": 54558544, "body": "From the errors, it looks like you are still using system ruby.  See <a href=\"https://rvm.io/rvm/basics\" rel=\"nofollow noreferrer\">rvm.io/rvm/basics</a> to see how to install a ruby with rvm, make it current, create a gemset, etc."}], "tags": [], "owner": {"reputation": 475, "user_id": 980575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c1d72be21a2a43be717c6dc1660c7b?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/980575/jim"}, "is_accepted": false, "score": 2, "last_activity_date": 1446002772, "last_edit_date": 1492087506, "creation_date": 1446002772, "answer_id": 33382401, "question_id": 33382302, "link": "https://stackoverflow.com/questions/33382302/os-x-el-capitan-cant-install-bundler-using-gem/33382401#33382401", "title": "OS X El Capitan - Can&#39;t install bundler using gem", "body": "<p>You are probably running into El Capitan's new feature <a href=\"https://apple.stackexchange.com/questions/193368/what-is-the-rootless-feature-in-el-capitan-really\">System Integrity Protection</a>. </p>\n\n<p>However, you don't really want to install your gems and stuff for development in your system ruby.  I did that for many years, but really, save yourself the headaches and use <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">RVM</a> or <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 8315, "user_id": 553223, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c92c38cb9c20c91761dc691534013c76?s=128&d=identicon&r=PG", "display_name": "vaichidrewar", "link": "https://stackoverflow.com/users/553223/vaichidrewar"}, "is_accepted": false, "score": 1, "last_activity_date": 1465799805, "creation_date": 1465799805, "answer_id": 37783181, "question_id": 33382302, "link": "https://stackoverflow.com/questions/33382302/os-x-el-capitan-cant-install-bundler-using-gem/37783181#37783181", "title": "OS X El Capitan - Can&#39;t install bundler using gem", "body": "<p>From <a href=\"https://github.com/bundler/bundler/issues/4065\" rel=\"nofollow\">https://github.com/bundler/bundler/issues/4065</a></p>\n\n<p>You'll need to either change your GEM_HOME or do </p>\n\n<pre><code>sudo gem install bundler -n /usr/local/bin \n</code></pre>\n\n<p>because of El Cap's introduction of SIP (System Integrity Protection).</p>\n"}], "owner": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1465799805, "creation_date": 1446002116, "last_edit_date": 1492087506, "question_id": 33382302, "link": "https://stackoverflow.com/questions/33382302/os-x-el-capitan-cant-install-bundler-using-gem", "title": "OS X El Capitan - Can&#39;t install bundler using gem", "body": "<p>I just installed El Capitan and had to install rails. I am trying to install bundler but am getting the following error. I found this answer on stackexchange but seems like i would be messing with a security issue <a href=\"https://apple.stackexchange.com/questions/204312/cant-install-bundler-using-gem\">https://apple.stackexchange.com/questions/204312/cant-install-bundler-using-gem</a></p>\n\n<pre><code>sudo gem install bundler --no-ri --no-rdoc\nPassword:\nERROR:  While executing gem ... (Errno::EPERM)\n    Operation not permitted - /usr/bin/bundle\n</code></pre>\n\n<p>update:</p>\n\n<pre><code>$ rvm gem install bundler --no-ri --no-rdoc\nPlease note that `rvm gem ...` was removed, try `gem install bundler --no-ri --no-rdoc` or `rvm all do gem install bundler --no-ri --no-rdoc` instead. ( see: 'rvm usage' )\n$ gem install bundler --no-ri --no-rdoc\nFetching: bundler-1.10.6.gem (100%)\nERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.\n$ sudo gem install bundler --no-ri --no-rdoc\nPassword:\nERROR:  While executing gem ... (Errno::EPERM)\n    Operation not permitted - /usr/bin/bundle\n$ rvm all do gem install bundler --no-ri --no-rdoc\n$ bundle\nzsh: command not found: bundle\n$ sudo gem install bundler --no-ri --no-rdoc\nERROR:  While executing gem ... (Errno::EPERM)\n    Operation not permitted - /usr/bin/bundle\n$ rvm gem install bundler --no-ri --no-rdoc\nPlease note that `rvm gem ...` was removed, try `gem install bundler --no-ri --no-rdoc` or `rvm all do gem install bundler --no-ri --no-rdoc` instead. ( see: 'rvm usage' )\n$ rvm gem install bundle --no-ri --no-rdoc\nPlease note that `rvm gem ...` was removed, try `gem install bundle --no-ri --no-rdoc` or `rvm all do gem install bundle --no-ri --no-rdoc` instead. ( see: 'rvm usage' )\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "erb"], "answers": [{"tags": [], "owner": {"reputation": 635, "user_id": 5332286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9bbcfabe5cb5d2631b3dcadef70e49?s=128&d=identicon&r=PG", "display_name": "Devin Howard", "link": "https://stackoverflow.com/users/5332286/devin-howard"}, "is_accepted": false, "score": 0, "last_activity_date": 1446000341, "creation_date": 1446000341, "answer_id": 33382054, "question_id": 33382014, "link": "https://stackoverflow.com/questions/33382014/how-to-render-ruby-array-as-javascript-array-in-erb-template/33382054#33382054", "title": "how to render Ruby array as JavaScript array in ERB template", "body": "<p>You should create a helper function in app/helpers that does the behaviour you want. It's better to leave complex logic out of the view. Then in the view</p>\n\n<pre><code>var wordArray = &lt;%= myHelper @word_array %&gt;\n</code></pre>\n\n<p>And in the helper</p>\n\n<pre><code>def myHelper(word_array):\n  string = \"[\"\n  word_array.each do |word|\n    string &lt;&lt; \"{text: \\\"#{word[:text]}\\\", weight: #{word[:weight]}},\"\n  string = string.chomp(\",\") #in case JS hates the last comma\n  string &lt;&lt; \"]\"\n  return string\n</code></pre>\n\n<p>Really, though, you can put anything you want in myHelper. You could pass both arrays and put them together in the helper. You could add newlines to the strings. Anything is possible</p>\n"}, {"comments": [{"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 1, "creation_date": 1446001058, "post_id": 33382082, "comment_id": 54557886, "body": "This is the easiest way to do this.   You might need to add require &#39;json&#39; to top of you file if not using Rails.  Also, to go from json string to ruby, you can do JSON.parse(json_string)"}, {"owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "reply_to_user": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446001147, "post_id": 33382082, "comment_id": 54557913, "body": "That&#39;s right. the json lib will be required automatically in Rails, but you&#39;ll need to require it manually otherwise."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "edited": false, "score": 0, "creation_date": 1446027605, "post_id": 33382082, "comment_id": 54568757, "body": "So I had tried to_json previously with no success, but then I realized that I need to convert my ruby array to an array of hashes and THEN call to_json. Now it seems to be working."}], "tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": true, "score": 4, "last_activity_date": 1446000539, "creation_date": 1446000539, "answer_id": 33382082, "question_id": 33382014, "link": "https://stackoverflow.com/questions/33382014/how-to-render-ruby-array-as-javascript-array-in-erb-template/33382082#33382082", "title": "how to render Ruby array as JavaScript array in ERB template", "body": "<p>Why don't your just use <code>to_json</code>?</p>\n\n<pre><code># in ruby\n@array = [{:text=&gt;\"Lorem\", :weight=&gt;15}, {:text=&gt;\"Ipsum\", :weight=&gt;15}]\n</code></pre>\n\n<p>Then, in the view:</p>\n\n<pre><code>var wordArray = &lt;%= @array.to_json.html_safe %&gt;;\n</code></pre>\n\n<p>Which will render:</p>\n\n<pre><code>var wordArray = [{\"text\":\"Lorem\",\"weight\":15},{\"text\":\"Ipsum\",\"weight\":15}];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "is_accepted": false, "score": 0, "last_activity_date": 1446000923, "creation_date": 1446000923, "answer_id": 33382146, "question_id": 33382014, "link": "https://stackoverflow.com/questions/33382014/how-to-render-ruby-array-as-javascript-array-in-erb-template/33382146#33382146", "title": "how to render Ruby array as JavaScript array in ERB template", "body": "<p>In such 2 Arrays situation, <code>zip</code> is useful.</p>\n\n<pre><code>ruby_word_array.zip(ruby_weight_array).map{|word, weight| \"{text: #{word}, weight: #{weight}}\"}.join(',')\n</code></pre>\n\n<p>If you need <code>[]</code>,</p>\n\n<pre><code>'[' + ruby_word_array.zip(ruby_weight_array).map{|word, weight| \"{text: #{word}, weight: #{weight}}\"}.join(',') + ']'\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 0, "closed_date": 1446002259, "accepted_answer_id": 33382082, "answer_count": 3, "score": 4, "last_activity_date": 1446028027, "creation_date": 1445999985, "last_edit_date": 1446028027, "question_id": 33382014, "link": "https://stackoverflow.com/questions/33382014/how-to-render-ruby-array-as-javascript-array-in-erb-template", "closed_reason": "Duplicate", "title": "how to render Ruby array as JavaScript array in ERB template", "body": "<p>I need to render a Ruby array in a very specific format for an erb template. This is because I am using JQcloud to build word clouds using JQuery, and is apparently picky about array formatting.</p>\n\n<p>Here is the way that JQcloud requires a JS array to be formatted:</p>\n\n<pre><code>var word_array = [\n          {text: \"Lorem\", weight: 15},\n          {text: \"Ipsum\", weight: 9},\n          {text: \"Dolor\", weight: 6},\n          {text: \"Sit\", weight: 7},\n          {text: \"Amet\", weight: 5}\n          // ...as many words as you want\n      ];\n</code></pre>\n\n<p>So what I have created in my controller are two arrays, one array of words to build my cloud, and another array of weights for each word.</p>\n\n<pre><code>ruby_word_array = [\"Lorem\",\"Ipsum\",\"Dolor\",\"Sit\",\"Amet\"]\nruby_weight_array = [15,10,13,8,4]\n</code></pre>\n\n<p>I need to convert my two Ruby arrays in such a way that they render properly with erb. So far I have come up with:</p>\n\n<pre><code>var wordArray = &lt;%= raw @word_array.map{|a, i| {text: @word_array[0], weight: 15} } %&gt; # I just hard coded the weight for simplicity\n</code></pre>\n\n<p>This gives me something that's close, but not close enough, and it ends up formatted like so:</p>\n\n<pre><code>var wordArray = [{:text=&gt;\"Lorem\", :weight=&gt;15}, {:text=&gt;\"Ipsum\", :weight=&gt;15}]\n</code></pre>\n\n<p>I really just need to know how to modify my last example to render in the Python style hash syntax <code>{key: \"value\"},{key_2: \"value_2\"}</code></p>\n\n<p>This is honestly a tricky one and I am stumped. The library I am using for this is called JQcloud, and it has a Ruby gem which I have incorporated into this Rails app. <a href=\"https://github.com/archit/jqcloud-rails\" rel=\"nofollow\">Here is a link</a>.</p>\n"}, {"tags": ["ruby", "stack", "queue", "complexity-theory"], "comments": [{"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446000271, "post_id": 33382002, "comment_id": 54557693, "body": "This is where I have to draw the line and say go google big O notation.  There is entirely too much information out there explaining this.  Let the google show you the way."}], "answers": [{"comments": [{"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446002606, "post_id": 33382179, "comment_id": 54558261, "body": "I think it is a given that  you are iterating n times.  Or k times in the case of the problem.  So the dequeue is part of the iteration process.  You are still doing O(n) steps in the actual loop.  The fact that the steps in each iteration of the loop also take O(k) because the dequeue step is given to take O(k) time is what makes it go to O(k^2).  So we are doing k steps every iteration for k iterations.  This would equal k*k = k^2.  I still think he should google this to see as many examples as he needs."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446013255, "post_id": 33382179, "comment_id": 54561396, "body": "My bad, I meant she needs.  Curse of being a developer.  We sometimes forget there is another sex in the human race.   Luckily, they are becoming less and less rare in the office.  A much welcomed change :)."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 0, "last_activity_date": 1446001555, "last_edit_date": 1446001555, "creation_date": 1446001176, "answer_id": 33382179, "question_id": 33382002, "link": "https://stackoverflow.com/questions/33382002/stack-queue-complexity/33382179#33382179", "title": "Stack &amp; queue complexity", "body": "<p>It's hopefully obvious that this first loop is O(n) where n=a.length</p>\n\n<pre><code>for i in 0..(a.length-1)\n    q.enqueue(a[i])\nend\n</code></pre>\n\n<p>The second loop is executing <code>n</code> times, and <code>q.dequeue</code> is O(n) so that gives us O(n<sup>2</sup>)</p>\n\n<pre><code>while q.length &gt; 0\n    sum = sum + q.dequeue\nend\n</code></pre>\n\n<p>So the overall complexity is the worst of those which is O(n<sup>2</sup>)</p>\n\n<p>Now you may say that since <code>q</code> is getting smaller each iteration, this argument is over simplified. So lets sum all of the <code>q.dequeue</code> complexities.</p>\n\n<pre><code>O(n) + O(n-1) + O(n-2) + O(n-3) ... O(1)\n</code></pre>\n\n<p>Does this look like a sequence of triangular numbers? So we know the formula</p>\n\n<pre><code>n + (n-1) + (n-1) + ... + 1 = n*(n+1)/2\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(n*n + n) / 2  \n</code></pre>\n\n<p>Discarding the constant factor and the lower order complexity leaves <code>n*n</code></p>\n"}], "owner": {"reputation": 119, "user_id": 5496315, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153220851707666/picture?type=large", "display_name": "Qingwan Kuah", "link": "https://stackoverflow.com/users/5496315/qingwan-kuah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 33382179, "answer_count": 1, "score": -3, "last_activity_date": 1446001555, "creation_date": 1445999926, "question_id": 33382002, "link": "https://stackoverflow.com/questions/33382002/stack-queue-complexity", "title": "Stack &amp; queue complexity", "body": "<pre><code>def sumarray(a)\n    q = Queue.new\n    for i in 0..(a.length-1)\n        q.enqueue(a[i])\n    end\n    sum = 0\n    while q.length &gt; 0\n        sum = sum + q.dequeue\n    end\n    return sum\nend\n</code></pre>\n\n<p>Suppose that the queue implementation used in the above algorithm:</p>\n\n<p>enqueue operation is O(1)\ndequeue operation is O(k), where k is the number of elements currently in the queue\nTaking the queue operations into account, what is the overall complexity of the above algorithm for sumarray?</p>\n\n<p>Can someone explain how the complexity is derived? Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "gmail", "actionmailer"], "comments": [{"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1445999521, "post_id": 33381847, "comment_id": 54557498, "body": "for test purpose could you please use this src <code>http:&#47;&#47;resize.yandex.net&#47;0_ac5dd_d5908964_M?url=http%3A%2F%2&zwnj;&#8203;Fimg-fotki.yandex.ru&zwnj;&#8203;%2Fget%2F6728%2F6343&zwnj;&#8203;0198.76f%2F0_ac5dd_d&zwnj;&#8203;5908964_M&amp;width=222&amp;&zwnj;&#8203;height=0&amp;typemap=gif&zwnj;&#8203;%3Agif%3Bpng%3Apng%3&zwnj;&#8203;B*%3Ajpeg%3B&amp;timesta&zwnj;&#8203;mp=1381400884&amp;crop=n&zwnj;&#8203;o&amp;enlarge=no&amp;key=b7e&zwnj;&#8203;af8565de9c6b2b4eab5e&zwnj;&#8203;3e5971913</code>"}, {"owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "reply_to_user": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1446000059, "post_id": 33381847, "comment_id": 54557639, "body": "@rony36, I used this src and its showing me the image in gmail as well. I guess somehow gmail is removing the src attribute completely, I did it thorough developer tool"}, {"owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "edited": false, "score": 0, "creation_date": 1446000657, "post_id": 33381847, "comment_id": 54557788, "body": "One last try. Use this code: <a href=\"https://gist.github.com/mur-wtag/63d653d9cb60828c957c\" rel=\"nofollow noreferrer\">gist.github.com/mur-wtag/63d653d9cb60828c957c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3063, "user_id": 1682038, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/90c9c92c135240a02e9bcd1c886bcae8?s=128&d=identicon&r=PG", "display_name": "rony36", "link": "https://stackoverflow.com/users/1682038/rony36"}, "is_accepted": false, "score": 0, "last_activity_date": 1446001348, "creation_date": 1446001348, "answer_id": 33382201, "question_id": 33381847, "link": "https://stackoverflow.com/questions/33381847/gmail-converting-image-to-empty-image/33382201#33382201", "title": "Gmail converting image to empty image", "body": "<blockquote>\n  <p>Encode your image/binary file into Base64 hash</p>\n</blockquote>\n\n<p>You can try this <a href=\"http://www.greywyvern.com/code/php/binary2base64\" rel=\"nofollow\">tool</a>.\nAnd prepare your code like this: </p>\n\n<pre><code>&lt;img width=\"180\" height=\"60\" style=\"margin-left:20px;\" alt=\"Logo\" src=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAEoAN4DASIAAhEBAxEB/8QAHgAAAAYDAQEAAAAAAAAAAAAAAwQFBgcIAAECCQr/xABPEAABAwMDAgQDBQQFCgQCCwABAgMEAAURBhIhBzETIkFRCGFxFDKBkaEVI0KxCSQzYsEWUnKCorLC0eHwFzRDUyWSJjVEY3ODk5Sjw/H/xAAcAQABBQEBAQAAAAAAAAAAAAADAAECBAUHBgj/xAA2EQABAwMCAggEBQQDAAAAAAABAAIDBBEhEjEFQRMiMlFhcYGxBhQjkTNCocHRJENS8BVi4f/aAAwDAQACEQMRAD8A8rxjsKkLoGsJ6rWb0ChISfxZXUejHfPrT86GK29VLDz951wcfNtQq1RG1Sw+I91F/ZKudCVlAyPTjmsdGFHn8K5t/KEpJ428cV24AFKz+tdEIzdUUp6Ons2vV1kuL5AaYuDJdUfRClbFE/gqjt5ty7FpXUtplDw1W7VTLL270SGl7T9O314ptKCFDYvJCuCPWpj0R1At+qEO2l7RFuuGtVRW3YMuU5li5TIg/q/iMngyAgkpP3VlIB5xVCq1ss9ouEVltkwNUxX9M6XtOiVMrTdJ6xfLuwBlbSlo2xY5A5CktZWU+hcNGOm63f8AJ/UyI8+1xJTDlsmtP3CYWEthl5alOISD++UOAW8EFKj2IFH4tt1HpJq59VdfMyo15mCQzZ485JRJlzngUuSlIPKW2kKXyQAVKAGcZqLtqUhIIzjsTgkY/wC/1pmtM0ZZf1HekTYgqwl01FoGHBuFoXqTTsFE2cuK8YC3ZSozkhkBx5pzuqIhS3Dg8k42/dqFdWXKLdtVXe6QlKXHkzXnGSRgqRuwFemMjBI+dIKj5iAc0KjBAGQODRIKRsBuCSUi/ULLrJxznvnvTC66J39LbwQDlK457/8A3op+5HbPpTH61J39L78Nx8rbXp7OppVgvA/yUWdoXVd9N3JiJYXYzsthlSnSshSyF4yMbU05E3qK7Liui4xyygLCiHM54/i9Bk+1NeHbYkllTrgb8hbSCU98g5Pz5oqtDTcl9DKhsSvCeO3FczdStlfclarKgsaAE5LnctsGY0m4RnHprpU4tlJ3KB+6kEjhIFIlnjyY+EupACkq2BKuNu3v+ea4SAUDkHHyo3b33HJgZWtRbbSUoSo8Jykn9Tk0Z8emOw5ItGdU4vzuixxgAfjk0We++cmjGRt4FFXvvHgd6CFfkwh458h/xpW0+2lya7lwpw2CMDP8Q9KSI2NhxjvilrTSC7clpTwfBUfryKFNiMq7w8/XZfvUjWzptDuekndRTL1cGVyFzGYMeLbw+Xyw2FuFai4kpGVAYAUe59KZlg0hpnVlshpu90vzEpqGXksWu1ol7mUEqUokuoKce+CMck1NukLHcbr0s084yhKo8e6XgTxvwSy402kBOMHO8p7HNR10GjSJWrtJuRUlbjbfipDa0pcyMjCEKI8buctJ5UnIHNAjeY43W5WUqzRV1YbNkAO9LJk686fad09YI2oLFervJK7k5bZEe5QG4y0LS0HAobHF8EEcHBpLYwjRkEH+KW8r69hUwfEmD/kyykXOBOZb1AWorkJwOBLAi4S24SlKvERgpw4N4SEhRJGah44Rpa1Ngn761EY9zVpjzJG0krHexkUkoZtp90lx8i6Q+/dePlwqk104eUSD940oNcXODnjzH+ZpPkDEhwf3iatDdZ57KBVgKOfUCgDwo4FDKxuPOBQCjzUlBdfhk09ejC/D6o6c57zAn8wf+dMs4PIOKdvSZYa6maaVnGbi0PzOP8asUptOw+I90ztirr25fkQcYOO4NCuklZ/xovblDakc8c4FDO/eOfWujuPcqIN8LjcM4xzRd95bDyX2nFtrbO5CkqKVJUDwQR2xQu49/UdqKyyopGe574qBGMpZQt0v14v0v7bfLrNuEnaEeLLfU6sAdk5UeB+n40RUfX2oJRxzn5VnioA82eDUW2AsBZMSb5ysUSTzx8qEbVkAj09xQKlAjIGc123937uSPnU01+SGAV/Ec5pn9Xm/E6aajz/DFSoc/wB8U7irnk01eqZ8TpxqRPH/AJBZx9CDVWrzA/yKmy+oKsLrRMZEhK1AltoYzgZI54/CizKSFOAnPm55pTdTmzsn3ZaOfz/5Ulsr3reI3DC8c/SudN3V5H2ydoSeQfT2oWAoKmKUnHIQcg5H3DQLSQtASSfMkp44xnipW6q2K2I0/wBMteWmPHYGpNNoYmiO0ENmZDUplasDjcpGwqPqcn1pqiQABp5q/wANiMjjIOSiwgYxk8UUfCvEO0HFGzgHnt3H0otIx4mcH8aCFdk2XUU+p7e1LWn30xbpuJACmVI5+eKRo2OTRuNkyAn12q7D5ihvAcCFZpTpc0jvVlujnVPTNg01+zrxfLdEVGfn7o8qQhsTWpTKU4SVDCCgoCgr3AHANRT0yTa7dCg32TrDTtrm2lYEKPd8lmYPEIWSMfdCecjBzjBHemkuIVNpKQSUHJxTe1JkWezqzjyyU8H2cFQgjbIHDvUeJl9DUNmYO/8AVS98QurNLX7Tkc2m/wCn5lwlXxcx9m0SX3xsTH8MPuKeyrcs+mTjFRbN3Js1oaxkeET/ALVNWQok5Ks8epp1XUhNutLeQVfZgePqasCMRBrB4rJbK6YSSO7kmJH/AMSgkpPKj/vGk6Tjx18Hv60fCtk2AsZOHBn8Vf8AWicobX1gZ70b8yq/20UVu3nFALzmjCx580A73xUlBd91Y/7NOTpmvZ1E04o+lzj/AO+Kbfr3NL2gVFvXOn1j+G5xz/8AyCjUxtK0+I90ztiruwF+YJ+fejLxOeD+NE4isOkAcbj+HNG3wrdkDj2966W6wVAXtdBKB7Y59sUXeBUggJyR6Chc9gDnJ7+1SF0S6ZJ6k6qUi5NOGx2xKXp5TwXlKP7uOk/3yMn2SPnVaeVsLC92wTjrFN/Q3R/XXURH2qzQW2Lfu2G4S1Ftkn2R6uH/AER+NP6b8K8iFbJNxndQoSPsrDkhwIgKKEhCCpXJOewp39S/iJs+jn1aV0Ja4lwkwcx1PHiFFKePDbSn+029j/Dn35qFNRdeuqN9gS7ZctQNiFPaUy+wxEbbSUK4IGORn+VZTH1tSdbbNCKQxgs45TIVFmMsMPPxXWm5bYeZUpBw4j0IPryPrwa4aOQDuPtTu05qaJfbbE0Tqd9lmE0A3ElqBHgEcJQQP9JR3+3BptXK3ybRc37bIKitpRAVtwFp/hUM+hGD+npWpHIey/BQiLi4KCyDnIzxTb6lpz091InaOba9z9BmnGjJHtSFr5Hi6F1CjGSq1yDj/UNRqADE/wAj7JN3CrCtzFlijy+aM2QR6AKVSelRL7hxySDgfStuTPBtcVsjyrjJByrthZPH1oOO4HitYPBx/KudAdZXibBSD0h0EvqNq2NY1S2mIzIEmUouJQtTYUBsb3eUrUeAFcHBB71bLqzoqwdROnh02zCZtF80nAl6ggfZoX2WG4lAAeQsdkh1DZUAOUuJOeDVTOjl4XZeomn3itfgy5iLc8hEcvl1Dygjw/DBBXlRTgA5B5FeguuOlU2w9Neo0LQcyHcroi1yoV22XIPfsl5CAuQmShZ8RgBpC0gc+Yj3zWJxSV8dSy+3LzXpOETUkdO9r8PPt4LzLUsqTuTnzDI4wcUXkbsn249KMgpwFt5KMDGf8aKyDhz8K0W7AIEoA54XUbPPPY8cUqWRtL93YZcGQpKgc9qSY695OOKUbVn9os+YpKgoZB+VM8dUolM76jbd6uN8KvSvpZrd2SnW2iIl6Qm7MwiH3XAlLKmSsgbSOSrnNVC6oQo9vmvQYLYRHh3a7R2UJOUpQmSUoGfoAB9Ksr8MfTd7V0ictzXOo7Qw8t+MpFscSlSVCMXA8CrgLAykZGMGq+aZUh19yK+1JmWmbn9oRGwkuuMJUpXClcJWNoO73pUwDW3Cr8Vc6aoLb3zso1dIIBSQeOSKc1yWCxazgn+ppP55oPqHqOBq7WNxvtptDdqgyVoTEhNgYYYQEobTkDBOE5UfUk13dkradiRTkFqG2Pxwo0ckXCzmAhjklurw9C5+6pPP+uKCuI2zXgPRR/nW5CiPsq9wPlCvp5v+ldXUYnyO331fzqf5kL8nqiTgVkGi7gBVjP6UYXndj0oFzClU6isPv60raOWWtW2VZPCZ8dXP+mKSSOxP6Uf0+rw79bHOBtmMn8liiRYe3zTHZXljkh9fOCFq7f6VH3sZACicCk1pX9bdSewcVn0/ipQewCP+zXTH7qgLWQShx5j9T7Cp3ZurnSn4dITkA/Z75rR1xwOD77ba+Cse21oBI9t3vUByDtYdPrsX/I1L3xFSFRzoaxpITGg6ZZcSk8DcvufyFZ1WOkkjjdtufREZjPcoadCEgFIwBwDjsP8AGk2Z6cHGf1qfunnw13fVNuZvurLm7Y4UlAWxHbaBluoI4WoK8rYI7ZBVjk44yjdYvh2laJta9Taauj90tsbmYy+2kPsJ7bwU4StIJ54BGc884b56n19FdMY3EXUKtq2knPB4p1XpQvGnLVqBtkB2MpVtnOJ3JSVjK2uCcElIUpRHqvnnFNJfpx+X+FL9mCn9KXxoRA6ITkWUlxTvDAU54atjfqpeUAq7BKTnumjv5OCi3uScMjk9hSZq5CXtJ3tCR963SR/sGlFCgRlPb1Pzonfkl2wXNnH3oT4x/wDlmnm/Dd5FLYqnUZKpsVCFvBAa8qfJnAo3GhpYCh9qCgTkeTFE7W802yQ4QPMD2+VHhMZSOFD8jXNHuc12FpgCwJT56Q22z3XqZpi2XyPepdvcngyGbKMTVpShRHg+y923zeg5q6/US4S9EdONa/a5tnsMtVodhPaYtQMtw3ENoaTIuco53qejPLUBu5U1n0qpvwqphP8AWG3S5xvTsCIy4idHsoKZr7L+GSlpfZsAqSVLVjCc881b7rXbjpj4fuoGlrtGsdndsNrbtU7S9ofEh9qSmW0YN0mSzy4otLUjYnPB9hUHdYdZThFniy88XAkfu0qztwAfcAUTk8rwB6UefQQ4sEAYJ7dqIyP7Tv6elM0YWpKSStxE+ZWDSpa0K/abABwTv2/XFJ0QcnHfjtSnbitNzjFvleVAfPg1B+xRqYZB8Vbz4Q4WspV2uEa0Xuww7exPZSsyrY7IeU8+ytvKdq0gISkHOeTkVXB2FpXScnUUHUEyWgRLlPtUORHbPLjLywNyc8JKc5BzVgPhSd6vLvVxj6Hh6RU2ZkFchy8y3mtrvnS2EhpKiRjdnNVq6ttzW5+pI9xTG+1saxuaZH2cq8LxS4vfs3c7M5255xjNNB1m6VW4i/oarW3OVHLeXHmBjlSk9/8AS/75px6kXtvkhOc+GhKfyQf+dN+AgLnw0gcqWgfrSzf1b75cFZHC9v8AsVZIu4LPB+gSeZCSJnkbi5A4Z3D86Gu4/r7x91ZoGYfJHwB/YDj86GugzJKvdKSfxSKnzQh2SiK+4+lAOHzcUM4k5BoFwnPFOoLok5GCKHtqy3cojhOAJDZz9FCi5xjtzXbBAfaPstJ/UVJnaCSvWlR+0uEnjxCf1pRXgbT6Y9aSEq/eg5znk/kKVlDLaSRggV052wKz7YQTqUutuN+q0lI+pFWptmhrX1WY6Z67lKach2y2Bqewv/1lNYLST8g4CVfJIqqSl57nn5VZf4Zbgl3QF7tl8mN/sxN1ENlt1e0AvtedsL7+ck4HueKyOKNcIw9hyDb7okNidJTS6sfEXqC6XaVZtBXNy3WuO4W1TmEgPzFAkFSVH+zbyDjHJA5PpW+i/VHVOqdTN6B1jcnL1CvLLzLbkrC3WlbDuTvxlSFJ3Ag9jjHtXOuPhg1TAuDjuhnGLpblqJbjyH0syWB/mFS8JcA7bhg+4FL3TLpQ/wBJWZ/VHXsmMiTa4TrkeIy5vDQI5WtY4K1HahKU5xvPOTgVS6k+X0syeXfdE65dbkqxT4RhTpMLcSmK84wPohRTRmFAhuWi5z5Mlxl2IGRGSlB2OrW5hSVEDghIJ7j7p74xReQ47JfclPAeK+4p1fsFKOT+ppYcK7dolbCH8m7zkrdbASSG2AdgUeFDJWVAcpUORhSOdMagwNO6F+ZN9lagrBIA7/jWXPK7dLT3Ko7qfzQaAKgg9zzQzpDkV1s9y0se4+6aI7slRBzlVAsMVMiO6pbRUEKSN2OBxSqmExtyGknPake0X6XZW3mI7Ta0uKSohal43J7EAKAP45o05q2fJece+wwUqcOVENYH4DOK5nI14eRyWqwN05Kmr4Y/Bi9TJTDqdSOw5un5sadD0/xMnRlKR4jW9X9mjhKlL9AnvVmfittP7O6BXRq9WfTluuFluNtsLlutM7e9HmEl1iTLWCftKnYezPolQ96jb4XYNm09GsmtNSGG6ddPMQE2nTqHF3Vy2b3YsxtT5O2IgqWh1znK0JHIxinF8aNlu+jel9m0/eNK2O13Gy3CPYd9skfaN8Vou+EuQ4OHJCh3UT2AA7VEg2ypRnS8WKpnICdyykfxHvxRGQncv07elKCvMCe5/wAKJvAJX69qi03wtaRt7Fbhp83Ht7UdiuqYmx3QnO1ROPwopEUfEJ+VGQP37RJx5qi47osNm281O/Qf4hXOmOoJMNrSC7y7dnozjYblBohTAUcY2nO4K9+CKiDqJd1alTqLUTjHgKumqn5/hA5Dfi7lbc/LOM0TihAlsvBkq2OhWd2MUDcyp3StzUcZTeGlq+ZKSPalTnlZA4vDp+oTklNvT7ZevNubPYvD+dG7s6V3a5uJ7eMv9BXGj2/F1FbU7TgOE8evGaCkKK1z3ucFx05P1qzfr+iyzinHiUWlchgn/wBoD8KEnkqWg47toP8AsitTBhMbjuwP5mslklLRI5LLZ/T/AKU/NBHZPoiqwdqRgfnQKs5wQDQy8gZxQS+cHFSUVvB/OjUSIFFa3FpR4aStOTjcQQcD60WHlVntzRpZQEk5A4ye2ak3LgkrqNrCw0oYwW21A59ChJpaUsqZTk4wMccUgRFh2FCcAyFRY6se4LSaWkFKmUKxwRzXTb6o2lZ6CcwSecj5VMfSO2Oaw6T9QtDwElVwK41zjNju4tA4A+ZKCARznFQ2vlRAx+VO7pVr5zpzrWHf1NuOwV/1W4Mo+8qMpQJUn3Uk+YfiPWqVXGZIuruMqTDpN079JfEzrbT0RFtvsCNfm2QEIclOLakpA42rWAd+ORlQz75ps9T+tWqupTaLfObj2+1NuBwQoxUoOODsp1asFZGeBgJHJxmslaee6lXq9aisM5j7ZNucqV9kcQG0/Zy4EtnP8Kic+XHp3pHf6eXyO5HN1ejwmJKnEJe3+KApCN5SQO5xxj3qsyKma7XpAd7FEu7ZNyHDXPltx0u+ElSkBx4pKksIUtKPEVj+EFQ/MClLX8uIq6Istv3/AGCxtqgRt6kkjC1KcwUjzAuKXgn0Ax812/3DTulbNM0nYEtT5M5Q+2TlKCygDslKhwTlKVJwcJPfKqj+USUYGBzgAdhx6fL/AL9atsPSHWhkWwEXU1gpV3Hz9K6BOSAOdpHP0NdEkoCvwoNBAcyojA4HHyp3ZBTAcyqfxbemVLlNqcIUhwpxjv5iMn2xxRluyMJbJccUpSSSV5wkH2x68in3A6JdR1zZ0oWJtMV1xYBemNt7k7iefNnGOaVX+jt5RbWpQ1BZjNCC49GW/hLOAeEL+4rtnNc7eyRz3adlcMscdg47qznRGNEd6DaQsNxu0y8W/T10gyp1m0xGLTztpvSVNPiXOIw34cjYVDskY/Ap8aFvuiOhsOErRz1sZsWrWYs51MvxWY01LS2DHAySoOJZTJS4Sdwd708vh+Q/f+h2nNG6mY1Rf48J5/Rl805Y2kwobbCyZcT7VLSP3yid3AOTkCo++M6Y3bmI/SqJIhPqg2tV/ud1Zll1F8kOrQiOSN2EOsMthrnJG1QoDuqrDNwVUE7cKxx7YotIxvSd3pQ61pbGVKwV8JBxknHYVJXS7oFr3qXEF+iQYtvtATu+2XErShY90JQCtf1Ax86A57WC7jZbTn3sxouVF0bO9QOM0bIy82rjhY79qlPqt8M3VPpNaU6zuUOBP0mHENLudvKlIY342KcSfMlKiQAvGMnHB4qLXQfEaKjjKwc5Pb0pmua8amG6nDIewRYrsgeKyEZTlYySa2+or0je8keW4RlY/Suft1o++67KwhWSltjOcfPPvXPiod01fg3v2mRFWAsYIG72olOxzTcoPFamKSPSw3N0n6GwjUEZ04Iaaec/JBpMbKjAecIwFpUfzIpT0d5JUyTxhiDIVz6eX/rSWyki0rz/AJv/ABCjjLz6LLebQMHif2W54ymKB38IDP41uSkhuOfdhBP5mtzxt+zAjjwv8TWpHLTBI48HH5KNSKC3slFlZ2jtQShk9s0MRxxQK05Of506ilXVGn52lNSXTTdyaW3Ktcx6G6kp2nchZT2+eM/jSQojB5PbFWg+O/RcC0dRLfraIzMaf1Ww45cEScEmUz4aSvy8BRQtvckcAp471V9SQEnPPFEkZ0b9KSulZVBdhtLoP3rZDV+PgI5pwxzuYQB+H5U1tKrUvSdhX6qtMTP4Ngf4U54i/wBwgexrpceYGnwHss8gXQasblfP5Vwo5596EXyef070GoHI9s+pqKbC7YmSoTwkw5D0d1HZbLhSQcj1FdXO93i5IbbuFykyUNjahLi8hOe/HA5yee55zQCgD2z3oN0ZBHHPyoZY0m5GVIEjCDUnATtAx3xngGgJAy2cg0Z2kYGMcUC7jw1HPp3qRFxYJigSPICf0oNoBbqQcHKgOTQ69pbB49O1F2eHkjH8Y/nQ9KWyrNcNcakRe7lBVeJHhpkvo2E5Ch4hG38qVNZC76bns2py7+O2/bG5yXEsJQNqwfKE+/HemdfVKj6wvQzg/bZQz7fvDT76tp50tMDe/wC16dS2nccnIXjj584/GueSNs558VfwbXVyui82VA0VbrZablckuXFyBHtMqC8tGnbFf45Q5DW6oDfIdKFqLwPCckZxiow+PHSVmhawtFptlum2++iHI/aNtLY+xZjvEKmQ1g8tynS+5g47DHepa6B9TtM3Jpqbbde2+ROt9ggvOW/UAattqkQ2oPhXKKy3nCJBWhltLyvOvcs9qh/r31B6R6oTZrDo3R7xu9oeWzN1E9d1y2nYqlFaIcZJxuabUsgqPokAVXtdFB07KL+l/THQOurc9cb91Kh2+4x5fgosLbZ+1SWsJ8yVqGAFFRAA5ABJr0T6TxG9E2aPFsTaEvpYCG07ilKVAYQgnBISMAHucCvNrpP1GuPS68rm2iDapzTisXO3T44eZnspcyWnv40g+ikEFKgCM4xV+uhuvNA9UVK1R0t1A5BlRmlPXXSl1fCptsRuA8ZtztKjZWgeIPMnckKGe/m+MtqGEf4d/ct7htbTg2cLEqULn0/Or4F/0Tq+4pdhXi3GRcorgLkeQgqKVJQrAUyQlDhCk7gVlCzynFeQUvwUx43gurdaC3EsOKSEqWylZCFKHuRz+PsK9U/iT62PdOOjV6uVi2v3mcEWNpxpwbYCpSSj7Sv1G1OSAOSot54ryumJS2WmEdmEpaTzzgcAH5jgfnR+FNcI3O5HZWKyz526RsMpA3ISpYyobSeU9+/pR/7QFRLtGL3iGQ22sKSMbig57fL/AAoqEIU4pLjgaBUcrJ7c967bX4t4TufQ6HkLSVoGEqHh4/w/SvQjYLzEnaK603hFsvz5P3IJT/8AMoCk1sYtK/723/fNHLUVs6UvLpH9sqMwPru3H+VFh/8AVKMjG5Sc/mag3coktxGweH7rVxGwsAHswnH4nNaeOY8bv9xwfkuhbk2reyeRhhIrShmLG3FOdzqQM854NT5oQ2KJcEYPzxQbgyAOT+FLlr0nqW9kIs+nbnNKjgFmItQ9B3xinG10O6jODMqyMwCONsyW22r8sk1YZSTy5aw/ZAdMxm5C9Df6RvpJG1b0lOs4CUi46QcVOGzADkVZSh9J+YGxYPfyEeteWLgxuB9OM17N9a77ofrF8OWrrto/UsSVbJFjmoTMhupUNyWyot4IBSvgAoIzg57YNeMxBUjdg8pB7cCnnYWPAdujOzZXC0SouaJ06ruTaY3p7Aj/AApzw/8Ay6Rj1700unrm/QemiSc/stoZHf7yxTugcNYPvXR4B/SsPgPZZzsusulAc47j1oMpHI7ChFJJUQrv6VohIGTn2xmoFMi60qCv5VytOUEkAnBoZeCe340E5goKvlj6UxCdBH08uDjjmgXgotqSrtjGKMdk+3HFBu+ZC+M8e1LkmKBUSpnuPagmEEPp5JO4fzowEkNjyjcRn8KBZURJQFHByP50rJ1UbWaCzrq+tnjE+V/vmnxqy4RLrZdGstuJXIhWt1L4HdAU4koB+oyaamu2Aeo1+bVgj7c+Tn5n/rR+3w1FtCVZO0BOT7AVzmc2le3xV4bBLNqitph7nGGlFRydyAeew70M8lZ3KaUQQRzjscd/5V20fCZA7BPzrR2lS8HAPI/KgqSn/RyI+v8A4WLraNfaAt0SLpiHOl6I1lHieC+zPYBkPwJSx/bNPJTJAWo58RspUAQ2VE+n121l0r0q9o7ovon9p9QL0yzcNV6imIQmBpxlaQ5Ht6nXMNoW2lYde3qH75e3aospFR7036iaisOmNV9NGrhKNh1YGw9C8YhluTvSkP7D5VZbU62tHZQUhR5bSadPxD6a6pwOqDnTi73qRJtUuObxYIcl4sRlRXVKUh1aSAHHQULS4pYUpSgSCcis8xT1UnQOaCL48drX9eV+5SEmg6ji3PuTS6uXXqZa7ba7NrPqtb9awtW7tV+JBe8VpMpLjkJW9RSlRUn7KQkABBTtUkHOTFr+SnOPXPbBP0qTofQO9OSFm/6ytLD7ISXmoxXMfQkjjclGdvrgHHbt3p56e6G6MmXBq2RYWq9Ry3DgR9iYjbhAOQMZV6H58etbUPw7WvHYAHiQPZXmcaooWWe/U77qv8fSUiXaL5qJ2TtiW5DCGx4iElyQ84EJTtJyUgblEgHsKBtdoclXUGJGkveDvSEx2SsnyEfieeK9B9A/BNraetiVZehFstqSlB8e6uLkOAHvy7tTuB/un5VPtn+A3Vl0mNzdQa2g2FhDaUfZLYwkq49SpCU4ODjHb1q9HwmGA/1U7W+Az7XWTU8QbKCKWNxJ5leVUTol1Bf06bVGsm0GUiSqTIdDDJa2YTyvByD3GKWLT8PalxWWL9rGE2QUgtWthctwkDtkeUGvYGwfAX0Pt6kv6kbuuonh5j9rklCCfoOT+JqXtK9HelmhmG2tM6CssII+6oRkrX/8yqmH8Gph1Q6Q/Yf76Km5/EKg9azRa3j9v/V496S+EZ/UamlWHpDq/UzoASHpazHZ/JI/xqxehP6Pvqs8lnxNIaI0dGx3djh59I9/MVHd+NekviNMI8NtSUpHZKMJH0wBig1SBj92yo47EgJFRdxtrBamga39T+w/RRHD5HfjSk+WP9+6qZp3+j002lKDrnqVeroEnKo0BIisn5celSlp74P/AId9OseBG6cxpnBBcmuqeWc49T9Kl5Tj55BQ2fkN36mgVgKOVvuqP+kR/KqUvF66X+4Wjwx7Kwzh9M3dt/PPuvndsvVDWOkoeoLVpe4vN26/Q3I1xj7wpDqVpKQ6Edg4MkAgZIyO2RTCVHWhO8o4CggrQCQFkcBSfTAwKWCytCkNJb3uoWfDYcVhaneCfDWPvJTn1/XNBtpWpRWw84txO5tuQlO11Bz+8W6j1Hsf+RqFZUuq5TKRZXQ3SLKyXTZX/wBAdNhISrbbkpyk5HDi+1PGBnYvv94c0zOmpQrQWnvBQhKDDVt8PsR4y+cHtnufbmnlBSAl0HtketdGpBqo4/Ieyz3do2Qy+FfMVx5jyB396FUMqPrQajjIyQfSmTCyCUME7ga4WBsJzkketDYOCSKCcBCNvcYPFNZOD3oMAHAOa5d+7gex4rpOMJz7cVjiQUkj2p010AkZbBxxj3ouPLJT/wAvnRprHhpzwcYou5kSWyMc0lEZKrnr+yxW9ZXy4qXl1VwUAkj1ITx+ua4hlAbS33J55PFG+pckDWt4iDaAmcXCAeM7E/8AOkm3qU+6CSnBGxPPAPy9hXNZwRK+/eVrSOaQAwbBLAbkyCpLMZS1JbU4UoSVEJHdWBzgVzGXlXKsJwfN6fWng/ZrhYenEH7RdI7D+rHftsi1qZAlfYWQTDklWMoacUp3CcjcRk5GKZun4lyvElGn7ZDfm3KW+1CiRmE7nZDzi0obbQOxUoqSkfPvxk0Em2UNPHozo5WteosCyyViPa2XDcr3MVnwoNpi4fmyHD6BLSCke63W0jlQq73xX6Zg9avhx0b8QFvfUnUekvssnc84AZMGc62h2HgYUC2X2FJT6bnAMZFUx11qO1dN9MXjpDpC6Mz5MpSE63vsVe5q4ymlAt2uMruYTDhJUv8A+0PJLhAQhtIkjR2t9d6vhaA6VzNStx9HTrpBurkYhJelTYMNs7PN5yylSEIAyG/GSvuU8AiLnPMo25fypNLQLFQ3cNf6df0DI0/eLfNsraLp4kM2BaMMYSsLbcW6fEczuSQSpWNp9xXoZ/R5dLFdEdRaigTtSyr03qSXbkR3HWk5aUhL5CuScAhZz8wO+arTa+k2k3XbmifetQNyrktDgeiqaYW0UqXhIX4ZBB3cpPJCUq4xV2vh0l/svV0VTMcLbkKgNLOAkIU4pKAR/wDMT+FGaXaTn9Uzy3VsrdB9vOQVLKscgZ9PyrfjOH7rJT81q/wFcoJKQcY4zj61v6n86bSAmWFTp7vbfkmgyhB77j9TQmMen/StH29fb1pWCS4xj7oA+laIB7k137n0Hc+grk4xmnHgkgXEjPc/nQe3aMYH4UM4BxQZHyoZOUl89HUKz2iFrnUlvtS4ybZ+0pIijdujiN4qtvhLB8q1bhjn/o3FQkBbiXvHQthtIcwMSI7fGxrH8YPqfn6c0vt6evJCFtW4oW+relK4ygh1w/8Aqvsn7v3fLt9/z7f0ze7bGiT5NvuUJje4Ij0lhaVoWn+0fStQAcACuE84Bz8zZdDKAXlpA8lMSMJsDlTB05Cv8h7GlxTJWGXQrwhhA/fK7e3GBj5U74AClrGODg00unYSnRVm2lJRh/BCcFQ8QnJH+cc5PzNO63nLyhium0BJoo/IeyzJMPKMcbjt7frQa07go+g96HORuPY5z9aDPY5OQadJAkY8prhaRg8mhlYTk98VwsHHI4I70kw8UAhIKQB6Dn51ixuSePTgUIg4Az2+VaUnjIFNumvlFWh5QSOxovLBRIbPz/KjLAJSfqaCuWEraIJOT60gLhJV16ot7uoF2CEpSDJwT7+RGTQdmtomGLHfK2Uvvt5U23uUhG4Fagn1Vs3ED1OKf0jp1B1n1Kv8m+dRdI6MtzMlthqdqSW403IeLaSW20tNuLOAQVKwEpBTlWSBS7qj4e+p2lNPHWkGHbdW6XZyVaj0hcm7xAZ2/wATq2CVx/q4hH1rmVZPGyoe0nn6LRabhNrXuuNPamvcSJpCzLg6fsDKrdanJeFXCXFDm5Lk1wEhbgyQAnyoThIpp2q8XbRmtId+sE92BNYWvwJLJAU0tba29yc9jtcWM9xnI5AoGQhg7ZkZYwsgrweD8/xP5n3rL8ElpEpRwEteISBk+Xv+PFDNiE6O9M+nznUbV/8AkcnUDFpEm4KbjrWhTyn5QayxHShPmKlqBCT23EZPargXXQ7dk6q9O7daNOS7JbLHYnH4zVxcS7eIrqnHEJRNSP7FDbwWGWjjyJPB3KzE3w59NJ8i5a2gG6p0trO2zlptU9iQXp8h1ltKpFrjxBnet0FCw6BlCmsJPepzftN7g9V7vqi5aZdskXVTls1DAhuTPtUtphcdcbMte5RL5Uypaio/x9gABUhnHJMTZVBuvXPrHZ7xcbSjV6kGLMfaI+wxc7kLUn1b47flXoj8L18VMe05dpsrxJUpiwyZCsFIWtT8XKsdsnPp2yccV5pdWra/B6rapYVGU2h28ylteX7yS4Tx+dXn+FOY6i06flOKI2Wa2Ojg+XwpMYfySf0oEN8grSq42tiY4DdenoTtO3/N8v5Vy6ptttbrq0oQhJUtajgJSOSSfYUIsDxnDjs4v/eNcLZRJbXGdSCh5JaUD2woYP8AOjCxKzTsoH1P19vr86RH0oxCjwUrKWJDzXiPOgfx7T5Ug+gwTjHPpXfTnrRc27qqBri5mRDmrARLWlKTFc7YISAPDPrx5Tz71F9wgOWu4SrY6DvhvORyD/cWUj9AKUdF6Zc1Zqi32FKMtyXQZGB91lPKz+Qx+NeudQUrac4xa91REj9dlYTqdr+P060wq+KhKmSHnBFhtJBLZdIyC4scJQAM+6sYHuGp0X6ySNfOq03qCGEXlhhUgSGEBLMhtJAJKf8A01jcOBwRyMdqka/afsup7BK09coyXbdKZ8ApTwUJTwkp9ikgEex+pqDui2jLrojrJd7FdhuciWh5bToGEPsrdb2Op+RA59iCKwqdlPJTPuOuNlacXhwA2U/uDjPpQR9jQ7g9Pb1FRF8Q3Wp/o5ZrQ7araxcLpdZKwmO4ohKWG0/vF8f31NpH+tWayN0rtDRcojiGi5QWk/hA6KaTDbjen3JbqQNxdWGwo+/lG78N1QH/AEnOhtNWPoVpZen9PW+ItGrmEBxtG1ePssjguElWPXGecYq8WJizkrbb+SUlSvzOKpD/AEr8e+M9HtE3C1y35DbWqVNPwluJS08Vw3Shage+wpOAOcqqzPXVlUD08hI88fZQp6SCEjo2D9/uqRaKQ8jSlvS66644Fv7luoCVKJX3IHbNOe3j+s89sZxTT6cuy5Gh4T0yO5HfLrxcZWvcUnf7+3sKdkBWJI+ldF4cbUMd+4KpIOub96PKA7/WgsZJ45ocp/iHrmg/MTjHB7UUqAGboJQ745zQZGeDnFDrbAPyoJSewyTTJyLbIJKcjIAP41pYJGO2Pau0A7AMc5NaXuwQeOKYJkQYIBxjIyfWt3NJLbRSMHcAK5xhskE4yfSubw+WrNIm8kR21O4HfhJ7CmLtLSSnG6hjXbUjVOpZFwiraeZS59hjMpWQpGFpQpXcDK3Oc+u3ngVvTnUM9FL0vVWkdazY2oPEDba9OTBGW3z++L2wBCwMBKW3ErQs5ykDkxtJ1ldLTPeXZ5iwlTOxYeSFjeVbirB4CgrBB9CKbRkuvOKdecLi3FFS1K5KlE5JP51zWo0ySOuN1oNFgFb6dqDoT8RN0VZ2bjatEdQ5CUCPfREFv09qWQsZLUxhOUW2Tu8ofb/crV94JzmmvpzQs/Q2srrceqOmpUFjpy61OuNrnNhLkm4qV/ULeR2UHnkeKVJJSWGFkEhQJrkhak49fQ5Gcj2x2qw3Tz4gY+q9OW/pN8Qjsq+aNiLSm33xvJvGmF7A2iSw5n+tMtpACo72792CG1JwBWe+N8TbRnHMfwnUz/DdqO7IhaiulwDbN1vt1FxhXK3KZRqGdfd5WhLDj2fDgKBWw44gAIcWncfNmj7+rY7vXvXOnbPZoNss8UZiMQXi8y3IDoclBTp/tHPGfcBUMJyjyjFB9B5kjS11vug9T6kjxLXbZLduiarix0XQxnVoVgW1KBu8Cckr8RBGUJG4nmjHVhvR2lteadcstit2ltR3EmDcNM2ffKhi3htK2piZeSlwrPmKRnZsKSeKtxnZM4XCrP8AECytjrVqpCircbjvA543ttq4/FWfxq2nw0Sn2tG2AJdGEaafSef4m1qWMn6IH5VWD4pIq4/XC94RzKbhSEj/ADt8Zv8AxTVifhiC19OrIUk/vLbd4xGOc7ZGOPfkUKLtu9VrVdjTRkeHsvW53yvOAkcuK/nXK1ttBJcdSguKCG9xwVL9Ej3PyoKFJMyFHl9y+w05x67m0n/GmT1cdkxo2n50NSkvsXQKbIPO7bx/yq3DH0jwxZDnWUS9YrSLd1Cuam0eScGpreO3nRhX6p/Wnt0D0+3b7ZcdaS0AeLujxifRpvzOEfVQA+gp+am6cWDV99iXi9MvPKiMKY+zNqKEOebdlRHmwDkYGKE1UIti0fJhwIrcVnYmKyy0jYlAUeQAO3AP55rTdX9LTspm77FAbFpcXlFtOXh1WkWZp8zodcbJ9ASskH9aVbfHizFRr09HbM5thyMH8ebw1KBKfplIP1zTe0ZHcVpCYVdjKUpA9tuM06LMnFsZ59Cc4+ZqjO0NJ0owN0O4P+/wqF5OkLN1P+Ii/RdVxEy7VpPTUGIyysZT9plOKfUv67UY/GpqcB25qKNMXa2WP4iNf2e8zWYX7atFnusVx9YQlxDTamFgE8cEp/Wh05IcS3eyTs2upbJPvVL/AOlcbjo+HWw3GStSEwtXxDlOf/Ujvo5/E/pV0McZqo39KjbkTPg+vMtxOf2ffbPIH+tJDZ/36radVwjxPLHBw3C88+lzyJmgozzDLgb8d9KVLB3feSTnPP0p3QcF9Pz7mo+6FSVyencQrU4NsmS2lBOQQNvJPqck/oPSpAiZRKSNwyMiun8JbpoGN8As+oeZJHOPelNYw3ke1BEj5HIFCvYCEjJOfnQWMdx39TRyEELk5IxyefauSARuI/PvQm3aQkn61pSc9wRimti6a6Lt44GeK5cSce/NdpSBlOcAHNcPJKxxnj0HrTWxdIoqwkOoUknHJ70j3r7SvT9+tzCiJQt76meOdwQSMUpRnS2k8BHJ4NE7hcIX2tl+FKZeuDKhmKglbr7Z4UkITlRJ9sVB7Q6MhODlU2luBSErUdy1YUo+uSM0WQfMM4HrUjdcOmd46aauXbbhZ5tvh3KOi52z7SyWy5GcPcA84CwpPPPAqOUE9/b1rm00ZhkLDyK0QbgFKrTXiNbhnFcxZaozgCFgZ9e9dQ3FLgTG0rwtLJWnHGcEZpMbUeMHt7+lCTqyXwt3yZH1FPas2o5mlpTEN113ULTH2uLZ7aQEzJD8XlTiFAtNKUjzJQ5n0Jqweom5r2oLFLb03bLRFTYJLMOyW8lQtNnW+HIstpahuciPuOu7VHC2/EQ2oYANUd6X3WTA13p59i5rgFVyjsrfTJUwGkOOBCipaeQkBWTkEEJwQc16Ca/uszUXTO+aK03GVF1Tf7QLlaLe4kfab8xFUHVajTKUf3TLjDLg+wpKfOQraRTsABTWwoi6waJs19612+836yzb3b12iAqXaoMtMeQ42lkjeHFDAAwMn2zipn6JWK02yRY7Jp+MqJAXKkMoaUsqKVuJO/O7k8qOM+gHyqPupD0GNruyXOeFtw/8loypS0NqO1IQoq5H93OB3pb+EO7StWvJvNvt0iBDZ1fIMZp8LKkMeHHDYUpfJ4zkn1yBUhGGklSc95aGk4C9UNGvfadIWKV/71rhOfnHQaLa1scm9IsrbDHiIjXZh9/B5S0AQpX4etZ0zWF9OdKqCgcWSCkn3KWUpP8Au04JcqPAivzZjqWmI7anXVq7JQkZJ/AUmPLHahuhuF91EHxIavn2mBatP2m5SYkme8uY85HdLawyjhI3DkAqP6UIm/SLz040gqW8p1+VED77i1ZUsoygKJPJ7Uh/ErHjTo2l9Tw3UPRnkPMJeQcpW2oB1CgfUEdqkDphpdn/AMNtPRNRWhlUluGfI6nKkNrWVIHy4IP41rAxQ0scls3N+9CF3SOHJLejYmzSkJtxOPHQtxX+sT/hSy20hltDTadqEDAFdR4zEWO3FjNhtppIQhIHAFdkelZL363EowxhBL4Tn5j+dVf+NzTVsFh05rTPhXFmWu0525S4wpCnQFfNKknH/wCIr5VaFxPlIqKviI6a3LqhoyDZbQlJkxLoiWQTjyeE4lX6lFSp5OimDwbKMjdTbKWarL/SSW565/Bf1BYjx3HnWzbH0IbQVKJROZOcD2AqzVQv8ZlwdtXwv9RbowyHVwbT9pCCSASh1Bxx6VGMAvaH7XCJkbLyV+HtElPTow5SPs62LnJSlL7ZSrarYoHCsH3p9hpTU9oFJG48ZFQRfurmrLlLdaiTksKSojw4LYSQAfVf8P4nNO3oe7MuTl2nzbg/KdEmO0re54gRlKj97uT7gV7nhvFIHFlHFc43ONgqDmvF3uACluSobwnGdo54oMKyM4wBWkqXNn/YYja35BVy00C4sn22pyc0/LL0T6kXVoS3NP8A7KiHn7Vdn0w2wPfC/OR/q1ruexmXmyi0Epi+XuQPfmuF7QPFJwnHOTwPxqQZenOjOjQf8vOsceVIQMrgaejF5efYuLz+e0U1b58THRDQ+9WiumMKVJaGUTtSS/tDm73DeTj6YFZc/GqOnxqv5KYhkci9g0tqTU7ha05p643NZVj+qx1LSPqvhI/OntD6CakSQrVWobJpwDGWXH/tkrvjHgsZwfqqoU6hfFL8RN9TbFWa6ItqHn2SxaIsVKWJY8iksK7EpWFAdwTuxUgaF6o6q1lpeNfYlxiSGpThUWjBQgxHkEb2C2BtCkKH8Q5GDnmsaf4lI/CZZFZTf5FA6+1j8MPRS7q01rNrVGsb6lLTv2JKExY+HPuqWEK7euCScd6Xbt8SOmNDIkWrpxpS06eJCkMyoUJplSlJJBwRveUeDwVD09xVSfipu921L1ldnXCQxLlC3wW1GKhGEbNw2FLfAI9R6Zp0RLZftPyXrjozp9MZWtXi+PEQHjvx33oUr1PfArFqOKVM+XO3R2wtCS/id1FfdcWyxahvFuuoXDcfi/bJbC0JcDv7zblSRnKwTySfwquqeD9eKnbqfcermpNLyRrG2XsQoS0y8yGnC22U8biVcA4OM1BRHnIJPH6GqQcXZKmQBsj1vO5biCOFtOJx+H/SiLXIGRnAzSjZWnJNwYjNDKpCwykE4ypflSPzIonKhyLdLehS2VtPRnFMutq4UlSTggj606ZDQ5S4ryJLQALS0uDcAQSk7gCD8wK9Y+k/TPR3WzpK1qSy65kOK1DaVzpdtkMui3O6qAKmrgp0HxWm2FYbLDeGyEnKSCRXkqg8n0zxXoZ8DN71ZYel+lrZGecDd11ytkpcGfBg/Y/GKwM8JLhCt2PXHzFGvdI2MOjdYrQ4bStrJSx21ke1Xd7Y1cbTa7vfY0S9u2aK+/ABUpTam+XsDbtUkJSrzEjGQe+BT56Ea6iTLkhVmvsa4MtXGOH/AA/MEpO3AOQPQE4x86jT4gZEW06j0nqy1w48dq9s3G2svvK2NqUX1bYMhz+FiQ24WwvjwnUNOAgJVkD4YITdqm3pMRyUqEp6LIiOPNeG7sHiIUl1BwUPNrSWnE+jiCfuqSTpMJdgrOcNIt/u69VekSyendjZV3Yjrj//AKb7qP8Agor1wuT9q6X3x6OraXkNRlKzjahxYSrn6Ue6WFJ0RDx3Eiag/wD7p0/8QpzyokWbHXFmxmpDC8b2nUBaFYOeQeKaN/RyBxFwFFwuLKPNOdP7bfum2i7Tdm8M21TFzW0of2nKleGR3AO4fgKkYZI57/8Af6fKm+xrKM/r6ZoUsFD0a2tz/GUv+1UpRyhKfknmnHj0qUznudd2xz90m2C45rWM10Ritc0JPzQax5CfYUCoc5odweVX0oE80xUkYIA96hn4yorUz4UerLL2SgaVnLVjORtTuP48VM/YVGfxNtJkfDh1RaWkqB0hdTjHfEdRqY3CkNwvAiWrCceF9mjuqw2yOFr+aj6Ae1Tz0a6tfDr0n6WJY1Rpu+ak1jcJUiXIhRnVMQo2MIjgkbdx2gqOSRz2qAHHHpazOf4K0p2J9Epxn8e9N6Q+lT7hLqfvHHm5o0Ez4H64zYoZaDgq1l3/AKQHXUCD+yekugdL6HiYCd8WIlTyuOSSAOTycnNMef1a6s9S9Dal1rqjWsqa5ZX4zKo+CG1pex5ikHGRz9c1BKFJUryqGfTB5qb+k0FuV0G6uE4UtoW1aBkdtycmmlmklHXN1JrQo7uUq86muM97Tq5Me229pD/hvSggpQnALhH8ZKucDOKLTNPqjxDc7jKaenSHipxtI3EJUM7yrvknPGPb6Ubg6eueoJf7Ostvl3B8qASzDjrecP8AqoBP+FSTpn4Yeqt7cdgv2OHYnkBD7iL3MRGcDS0+Vfhjc4QSCMbc5B4FVr25pDKS9NM6gn6OtVwtQdkzo94nuJeUclKwI6kEk/zJ9BSBqSz9U7U3cLldZcm3wLvOS5cDEl7I6n1+XesJOAFE8q7ZPNWj0T8OLWlLZFtOormm8KalOzQuKHmGQXQ2lSNqyFOY8EHeUgc496ki5dN7FLsU6wuQG0wLhHXHfZSlIDrahjGTn6/IgH0oTpMqQaqaWb4ceqzS0uHT6Wcju5NbQeecjnP509NNdB+sFubWG0xmNnIcFz2FA9yUA8YqzUHSatP2WBaI0g/YbdEbitrkqKlbEJAG5ZIyeO/qMe1E3eoFh0y6l5E4uyGThKo+eD/pK2pP4bhQnTEYKsQwPl/DaSVCmq+k3VxehdRovOvm/sQtchx2MmQ4+HUIRuKScAY4FUqV94KyfMAefTIzXojrDqvc9Q6dvdu01oa6XZcm2ykSHm8LbYQWjuW4vhIwMnHNed5HKfUbE4+oH/KiwO1AqNRC6E2dujdtyZbPmKSXWxkennHNSd8TtnYjdUJN8hMoaYvcdqYpCXELKXglKHc7CQnKhuxnjNR5pViHL1Ha41wyIz02O2+ockNlxO7A+masb8Uetuj9w0vF05YNCSItwbkLdtsttTUUspwlKi62ApbqClOACU+bJB7gldfVhB6padW6q4jOPqD3+lXF+G3rPqLVe7S9qsundNJt8Vl68XKGA1IuUdDaWUsJbJ2JdeXgLWgAhCNqQOSqniMEZPA+dSp8PDTbeu2J8k7WmHo6U57F1bycc/QUnMbIRqCnFUyQA9G618K6nVw2Wd0ntNpvFtRJVNNwit7kbgEbCteCT5T9wj1ykHio++EXUci7uapYu0qS5dI0eC8+VHLcoZLaZY54dUgIbd485bQsnduy+urzhY6Y2pY8QPRb7cGUbVAkJXDUdpPqOOKjH4N3F/5bajs0ptTT/wCwGnkIcTglIkN4yPT7/wCOaskASEqucswvXzo/I8XSHh/+3NkA/iEL/wCPNPio76IuB3TU8gYCbiP9qHFX/wAVSJQeZT9ybsHRsKNrS663fIdmzmmosfjhhhCcHH95R7/IAU4qysp3OLsnySAwsrnFdVye9RSXCxkH6UCOwP4UOojGMii4Pl7GmKcI19KY3XSL9v6Ka/g4z9o0xc28fWOunxSB1CiCdoHU0PGfHss9vH1YWKkBnCkF86zjiQywrsnwWz/sinzYvhx1xqhxL6bczEjrKVeK/HSkYIyD7kVHMdTzkaKpUcrIYazn7o8o5q5UTT3VgQY65nV62+ZhtaW4dsawhsoSQVKVwnjHJNRldoKQGp1gmBZvgzhkE3bUsXxOOEwlFIPyO4VKXT/4cEaMTMat19t0q3TQj7fbZNlLzEsJHkS6nxRkAgHHGTSauP1Mtj2VdXXJLBbAQhdqYSkLPc7iEggem3PNKJ1fIK0W9ueJDrqQ34TDj8h11Q7n7yU5PsEkCqT6gbXv5LSh4XUy9bTYd7sKR2J+qNNwPsESVpK2xB5S3HgP29sfRtlaQfxUaRF67mxX3EWy+6elvqzvag2uUTj5ltasfU035Gh9cS7e/dZViZgxRtKFXV8JW4pRCUJSykZJ3KHccdzxR6Xp/R+mWPA1/wBVkqfCcLtljOBjH3MJClEfPaPqO9RGt/5fupPpaeA2klue5o/dAXLqdrhACEQtL29tLgUuRMlOeIEY5KWU71BWf88jjPGTRSPfesup3SxZbVJvEckBL1tjKgJUcHu882od+xBB+eKJ/wDid0/0q/4ehOmSFPDlM24kKcJ9/NvWf9k/Skq+9ZupGoNzUi9yIbJSU+HDbLWE+24lSh29CKMIHndBNRTsFo2X8Sf22Trm6G6g24/bNdtizRltBxTzt1YmyEZ7gF91CEfUce1N5epejticLzFl1FqOekgKclSWDHV8/KSg49sKqPZcp+fIL89EiU8o/wBtIWtxeffcok5xxmuftCk+VTSiT6kFW72AqYpo27qMlfUSjTew8MIfr38UGq42jRpPSNtRp5u8JcjuLadSp1EYJw4lG1CUoKs7SoDOM4xmqfcgZGAP8KfHWDUKrzq52Kl3Me2oEZCRxhR8y/xzgfhTI4xwTRg0NFgqV7nO6d/Suym86ujlaAWoba5a+cAY4T+pz+FJGs74dQaklTUrUWEK8Bjccnw0cA/j3/GnFoWQzZdN6ivTywgrj/ZW+4UeDwPblX6Uw0pBCffgHPoadJCAEY4qW9AznNLwLYkW3DjstmUt5xxISSXU7Rz6BOBUc6ZtDt6urENCThR83ySBlR/L+YqXWrWYwD5ZaKWykhS2wtQ2nIAz27egFSaMprK1XXC/vaY6bRNSQ9PI1A3b9WRhItrjy22323Y7wKVFvCkpJx93Bx6jvUU/CRfGbj1rusiRCuDUmbp+Q2G5CUpQltDrSykYJOc9vlUk9YJOejV4k4VsZvNvfVge+UgjP+lUUfC1dn5HW+3IkNltiRbZ7ASc8jwSrkev3aM78QId7tK9gegrxXpqY2TkKcivD35iob//AKf0qTai7oTO+2WmSVlJeXHiSHNoxkqL6N2P9T8+fWpMeltR+FrSD6AnBoDiBclTGbIbB7itFX+caT3bwlONjXJ9SeDRCXcpamioOBB9Eo/51n1HEaeAEuN7dytR0ksngEuuPNNDzqSnj+IgURfu0VvO1ZWR6JBpLiPeKpwvIwVKwM5/xoOREaVI8ZTpRxkis6bjL3Rh1OLeatx8PaHfUKMP3h9eQhvw/ljJooqXIWohfmx/nLI/lRdx+OzkIJXnufU0XXcsqy0lCPQ85rBn41IfxJM9wWlFRsaOq1PigLgymTb5cZwApejPNkHtgoUKM4z3rWzf5P8APyn88iugAWK80vFpzRmjEJDDtktf7tPhqSGgkYGRjA+lKlugQbYoC1obY2oDafDWfIgdgAScY9xg04dTWlmNfbrAejozGnyWT6HyvuAD9KQV2c7iWFKScZA7c/411ptDFI1rtAN/BeWdUSRyHS4ixQ0iK3KWVykFxRPJW4Rx8+eaVLdqy9WNoMWac3CR7RorSM/UhIJ/Emm2+LnASp19xlLQ9SsEfrzScrVrLflDSH1Z/gyB+ZqI4dRNwYwPRO+vq5cOeT5kpdvsyfqBfj3eVKlkHISuQoIHsQkYGfwpvqiWqIgpLDbCADn95gfMk0Vf1jIeBbREZZ78hRVikOTicoqkvg59CnIpHh9HbDB9lBtTPexcUsmfpZg7RNSoj0S4cE/XtROTLivr/qqW0pPYl7dn8O1I6ocdCsB5JB7DaAK7aZQ2QopJT7ZA4oY4bSXt0Y+yn8zIPzFKSEurSQWwee+e4rsKTG5UhGU+fO08etGLdOtUfGyK82o9zu3A/lQesrtEs2kbxfApBTGhrx5sK8RQ2pGPfcRU5eE0EcTpNAwCdkmVkpeGgnKqJeZYm3mdNGMSZLzo+ilk0XaA35UeAckiucEJwe4wDR61IjKuEcTXENx0r3ulfbakZwcc84A/GuUmzn+q9P8Alsnhq6S3p/QFk0c35ZU5P7UmgeiVEltJx+dMFPPpn29c0bvF7m6iuj93uLoW/IIJwMJQAMJQkegAAAHypT0LpiXrDV1o0vDLhcucxuN+6TuWlBPnUB7hIUfwo7mionDIRa5AA/RRvobqcpJ6RaSujVtfvrMYYlAx2llBPlBytST81YGfZNSNG0jepAWuRveDgwd6RtHGKnCy9NrVZoMW2sMoZjRGwww24sqIQkYGAPX/AK057fabHbQVJiJc2jGVgAdvauqUvwnQxRNErNTrZK8nPxuTUej2UY6pcvmrunly0KuwFh6f9kWmWp7cE+E6leSnjOcH6Zpn9COn990P1+0cbzLhqTLkSmGw1uUrcYrmAonAHHOOe1Tze73EDHhoSgYOAG0gYGKidu8Lc679PHrc08+xGv2+Y4wkqS1uaUgb1AYH3zwaz+PcC4fSUb5o22cNs87q1w3iFTUShnLnhelnRea+3FcZbUUNLgJBRjjc2+rBB7nhw5FSWuXs8gHPb8f8airoo6X7Ky+FeT+tNFSjyPM0ocfiakw+GCVlWR3SRXzxxivnbUPYHWAPptddDo4WdE1xGbLbjrz3nLm0g9gePxrvfsTysEHHA5omHXH3giO2tau2EjOaUWNO3WUB46m4yPY8kj6VgQzS1Tz8swyHwwPucK48xxjrkBALuIaTlOAfc80R8eXNfKY7bzxI5CBmnXF0vbmgFvhT6x/nny/lSq0wywkIabShPskY/lW83gNdWAfMv0DuGT/CpO4jFCfpNufFM2Lpi6vgF9aI6T3SfMaVI+j7c0n98hb6j6rPA+gFOBSkD7uDQalknHNa9N8O0NKMt1HvOVUl4lUSbG3kt1tCsLSr2Iz+darR7V6ZZq8qesa2LN1X1la20qKmL7NG0jAAU4V/8YpgP3G5OHDQ8NJP8AycVLHxT2Vcf4g9cJalFlLtxQ+AE4xvjNE1F7VuSXAFyHVZ9QcV2KgL5aaJw5tHsvJVLWNkdfvKSHoj00KRJC3ArklRySaSX9MLwpUV9Oe5Ss5B+lSIi3xY42iMFbe5Jzk0OkMII2xGwByMJFaPy4f2lU6bQcKJU2O7o4+wvKST3Qjd+tCtWG4rPMNQx/n4TUtBwJBKWgAfXOBWlpZXwuIgj1JHNR+SbyKXzJOLKLjpCSseJllKsYwSVfoKMxNNrZUB9qUCO+1sf8VSC7At7x3fYzyOCk7R+dBKsyXFgNeMn2BcB/Q0/wAk1DNQSMlNeLYWloBNqVIIwdxWR/LtUSfEtd2LRpy3aXZt4iyLi/8Aa3UqByGWuEjJ91n9Kne52eZBZZdDCGGwopXIddUhSs9sp+XuBzVOuuupJmoOotxbkrd8C2K+wRkrzkNI5zz33KJV9CK858T1HylEYhgux6LR4VEZagOJwMphJAUobjwnvWnFZQpROfQccDNYCM59/wAaNS2lOQY7yY5TsUoOL9FEny8emB61y4C5Xq0QbPPqTUtfDPdbZZesFhm3OUI6F+PHZcUny+M40UtpJPYEkjPuRUarsstu1s3VaCll10tAkFJyPr3B9x9K7tc4W6WhxbZWnICxnCsZ7pPoQeQferNJMaOoZKR2Tf7IM7OmjczvBC9H519aiNjxHfCA4Upw7e3171H2p+r1otUsQYK/2lPd3eDGaWlBWUpKj94+wP1xxSD8OUzpR1au7Nl6vdVZtquTzzUaBHVhhq6FWQEmUo4aWThKkq2gnsrzYr0T0J8LfT3SiGmLR06sUbwSrbInMCbK3K+8StY7k4/wrotX8XROjvDuV52m4GQfqHC8/dMdM/iK61pYnSpcfQunn2vtCd5BkvtHkfux5+Rz6cVMjPw99U9HaWZtek23LtIW547Um0tnctRKSla0LHJ45Cj6/Kr+Wvp1bYcgPraQ6oHgraRkD6genpTujwGWUhKAcYx7D8hXjeI8U+fbpcL+JK3aenbTdjCrN8HOletcPp7Ij9YbHNtl6Te5igqY2hsuxVttlK0hBIKd6VAHg8DIqzMLT8FtIU/ufV6lXCfyo220lPGPTPvQ24gYAOMeteNfwWkkqHVEg1F3I7D0Wr87LoDG4A/lDMtsMgIZaSgeyRihd6RwKKpWr3reVehrQjhZENLBYKs5xdlGPEzXJcJOM1wnIFbH0qekJr2Wz79q1/rGtZHvWZFPpASuhK0rsa3WHtREl52/FxZ1f+P2opGOJDcJ4ce7AGf9mojj2tB86ld/Tb3qbvjbW9B65OJaiqX9qssF4K37RwXUn+VQWZ01e1oIaCgDtSMqNdp4DaTh0Lv+o/QLxfEdYqXDxR5UJsAkSOOOAO2Kwx4wP9sVdu/FE0W+8yyE+KttJ9wEijI0+2lIXJlOOOHHGeBW42O6zTfmVvZGJ5fxj+8BRyK3FfGNkRKV7E71HzDH8Q/vH196IuMxo3ICfIOOPaisqY0ykZKUk4wVH0//ANp3Njb2imJedk4HI1niJ/fLLxH8OcJFN676mbYQW4baUJJzhtO05+vemtqDqJZLJvZXcEPPJR5kIO4g/hwPzphw9W6z6hTnrL040pIvEkcLU2AGmfTLjqsIRz7mqdRxCCAKxT0Usqd2qdZf1Rtp9/Klrz5/TA71U3qk6iXru7SkK3JecbWCD3y2k/4VaO6fDH1QckQ5GqbxLmuSAhT7FkhJfSgnktIdLg8w4G4t7c++Ky2/CNcbjdbp/lF09v7MN9xK7bLaT9omNnakAyE/2bqBtUfDG3dvyVDaBXOfiKu/5BvRgWyvUcOo/lcqnb8VyKtKSpKwUJcCkkEYP8sduaOW26uQxsUd7eMFJAVx7YPBB9jXpZJ6T9KdVaKGnupXw+3P7VbmlKbkaX06u1IQrBCVNLHmazwSl3xQCSeRUUaT/o7NJaos677qTrWrQ0qY66qNY5VlkXN2GgHyofkpDSXVYwSptCQR2ryLoCw4K1r33Qnwj9UOg+vb3A6Qak6QQRqC/j7Ixcrk5+0mJ7mz/wAuUujLBKU/u+SMjB5xSv1O/ozr9qK/3y9dNLnpPScQvJRatO3K5ylreQOFOfaXGwlknv4Z3BPICvWuPhS+CbUVt+InTdxm3CTcLfozUbsu43FFrAtkmOygqiqjOLWHHFulR3pU2nwto5WTx6pq0xaHypTrJWF5JBOe5PvSe9zhZ+fdMOqvn66jdAOr/R3UsLSXUHRM+FNuyN8NthSJjc1veUEsrjlYWcgjaPMCRkDIr3g+He26+t3QnQMHql4ydWx9PQ2buH1JU+H0oxh1QJ3OBIQFHJ5+dL6NJ6XjPtyUWaMp5klSFqQNyCe5T7enalvx1H7g4HYdv0oZAGQkjgBCdobyr3rhQdJIK8Y9BQSXXscoJ+lbTJTjAScjuCKa6ZGGQOxJNGNpxyc/WgmVIIOPoTjAFDAgeU9/YGo2TgrYFb7cVoZ7AHJ7f9+1YXEJ7kDccDccZPtz6/KlZK66J961nFclWOTx9eK3hfolXy4pWSW8n2rWOea1vOdoIKiMgep5x/OtEnORkjJFMUyMOvMR0eJIdQ0gHG5agkfrRI3qAceE4V5/i2kD8zWVlZvEauSnH01cpYWynrKqXxeafsty1Rp/VkiM4p6TBegrSduCGlhSCM9j51Z96r/IctkaOptqI02kDOQkZP4+lZWV2v4CqZKngEM0h62fdeI+IY2sr3tG2E3Zt7iMpUpSwDnk+tNK99RbPbt3iXFKSAcpGCaysr0tRM9rcFZsEbXOsUxZnVq6XaYLfpSyyp0lzKG0ssFxaj8kpBNL1r6CddNcvs/t9yPp9mURhqWtTkkg+gjs7lD/AFin54rKyvLVtdO3IK9FTUkVtlPOgv6PmxpLcm+2t+9SPDCg9e3lIjZPJxGZwo4/vq+tWd0V8M9n0/bEWaQ20uA0hIZiRmRGYZx6pSjBPtlRPGRWVleFquJ1UziHOwtiKFjRgKTrH0z07ZY7ceFbmYrbYwPCTgn6nPvmltnT9sjcNoIFZWVlue4m5KJYAYQ6bbDbRjaoDvkGuEsQt37tgKV7nuaysqOopIbyoGPs6AAOwOK2UtHO1CuOeFjisrKW6S2WVcbnCpKu25PP50G7FUk7G1Nn18wIVWVlMmWhHkJSdv6GuUJdyEnnPcVlZSsko06x6W1/qKZb3tJwX5jTTQCUxpzbC2XgvOSHfKULGAVYUQM4GSCE3VWieq1xMGCi2z5pg2ViLKnRr2iMkupVvUqIFebx87UFbuAUAkEE5rKymsnCTImnuulpiMxLJpi8w4bb7eyGb1HWhqOhJ3NjLmUKWojzlThICj5CQBpzTHXeTcodyuGnbnKftz4kRnGrrECWFFtKHPCKiVYPmxuHscA1lZTJkNqC1671DbNPaImp1HG1Q8iShwqJchx2XnAoS3ZDRA3tISEpQlZIKux5riNYOvdpY/Zlo07NNvjuONxA7eI/iIYwsISfMcgFYIUcqKWkk4JIGVlJOgEaY68/tNy8f5OT1TFR3I/2l25RfFSwX33UtoIX5jhcdACjgJbXznaoPbp5H6vM6hXJ1fabiIiILjJEq6sKbW9va2EBoZyEIX3Hdaj/AB7U5WVE7pyv/9k%3D\"/&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446001348, "creation_date": 1445998838, "question_id": 33381847, "link": "https://stackoverflow.com/questions/33381847/gmail-converting-image-to-empty-image", "title": "Gmail converting image to empty image", "body": "<p>I have a strange problem, My Images are getting converted to empty image when I am sending an email through the action mailer.</p>\n\n<p>Same images are getting displayed in yandex email.</p>\n\n<p>YANDEX</p>\n\n<pre><code>&lt;img width=\"180\" height=\"60\" style=\"margin-left:20px;\" alt=\"Logo\" src=\"https://resize.yandex.net/mailservice?url=https%3A%2F%2Fwww.example.com%2Fimages%2Flogo.png&amp;amp;width=0&amp;amp;height=0&amp;amp;key=fe215a359fd5542edc16d12e3c3a5eeb\"&gt;\n</code></pre>\n\n<p>I dont understand what is happening with GMAIL, image links are forming like this.</p>\n\n<pre><code>&lt;img width=\"180\" height=\"60\" style=\"margin-left:20px\" src=\"\" alt=\"Logo\" class=\"CToWUd\"&gt;\n</code></pre>\n\n<p>So it is not showing images. Am I missing something.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "ruby", "sorting", "select"], "answers": [{"comments": [{"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1445999719, "post_id": 33381948, "comment_id": 54557561, "body": "Select is a bad way to do this.  If you break out of it before it finishes, it won&#39;t return the result you want.  Agree with baron816 on this.  take_while does exactly what you want."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1445999790, "post_id": 33381948, "comment_id": 54557578, "body": "Aren&#39;t you going to add <code>arr.take_while { |e| e &lt; 5 }</code>?"}, {"owner": {"reputation": 31, "user_id": 5348843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eae5e94fe7253189da6571da0e3a16?s=128&d=identicon&r=PG&f=1", "display_name": "NutGristle", "link": "https://stackoverflow.com/users/5348843/nutgristle"}, "edited": false, "score": 0, "creation_date": 1446000420, "post_id": 33381948, "comment_id": 54557732, "body": "Thanks, take_while is what I was looking for and works perfectly."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446013807, "post_id": 33381948, "comment_id": 54561591, "body": "@BasselSamman <code>[1,2,3,4].select { |e| e.odd?.tap { break if e &gt; 2 } } #\u21d2 [1]</code>."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446015702, "post_id": 33381948, "comment_id": 54562367, "body": "Hahaha @mudasobwa true.  Nice trick, but using.odd? ends up giving you the wrong answer since it will skip even numbers.  Cool idea though, you can do [1,2,3,4].select { |e| e.tap { break if e &gt; 2 } } or even [1,2,3,4].select { |e| true.tap { break if e &gt; 2 } }  as long as the object doesn&#39;t evaluate to nil or false.  At the end of the day though still not as clean as the take_while."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446016164, "post_id": 33381948, "comment_id": 54562558, "body": "@BasselSamman <code>take_while</code> is way more clean, indeed. I have just noted that escaping <code>select</code> is possible. Frankly, I did not get why you think that using <code>odd?</code> gives wrong result. I wanted to select odds and I ended up having them selected, with additional loop termination condition."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446016759, "post_id": 33381948, "comment_id": 54562810, "body": "Fair enough, I thought you were giving an example of solving the same problem.  Didn&#39;t realize you were going for odds.  Either way, nice touch.  Way to tap dat object :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1446027798, "post_id": 33381948, "comment_id": 54568881, "body": "@mudasobwa: <code>break</code> exits from the block. In this case, it exits from the block passed to <code>tap</code>, not the one passed to <code>select</code>, because that&#39;s the block you put the <code>break</code> in. In other words: your solution <i>does</i> iterate the entire array, returning <code>true</code> for odd elements less than 4, <code>false</code> for even elements less than 4 and <code>nil</code> for elements greater than or equal to 4."}], "tags": [], "owner": {"reputation": 680, "user_id": 4307225, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/071751491d3587fff6acc61e7e92668a?s=128&d=identicon&r=PG&f=1", "display_name": "baron816", "link": "https://stackoverflow.com/users/4307225/baron816"}, "is_accepted": true, "score": 4, "last_activity_date": 1445999577, "creation_date": 1445999577, "answer_id": 33381948, "question_id": 33381830, "link": "https://stackoverflow.com/questions/33381830/efficient-way-to-select-items-value-from-sorted-array/33381948#33381948", "title": "Efficient way to select items &lt; value from sorted array", "body": "<p>I think you can use the <a href=\"http://ruby-doc.org/core-1.9.3/Array.html#method-i-take_while\" rel=\"nofollow\">take_while</a> method for that.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5348843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eae5e94fe7253189da6571da0e3a16?s=128&d=identicon&r=PG&f=1", "display_name": "NutGristle", "link": "https://stackoverflow.com/users/5348843/nutgristle"}, "edited": false, "score": 0, "creation_date": 1446000467, "post_id": 33382036, "comment_id": 54557745, "body": "Would work in this example, in my real data the value may not exist - so finding by index would not work."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1446000639, "last_edit_date": 1446000639, "creation_date": 1446000194, "answer_id": 33382036, "question_id": 33381830, "link": "https://stackoverflow.com/questions/33381830/efficient-way-to-select-items-value-from-sorted-array/33382036#33382036", "title": "Efficient way to select items &lt; value from sorted array", "body": "<p>Here is another way of doing it:</p>\n\n<pre><code>  &gt; arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n  #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]\n  &gt; index = arr.index(5)\n  #=&gt; 4\n  &gt; arr[0..index]\n  #=&gt; [1, 2, 3, 4, 5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1446031861, "creation_date": 1446031861, "answer_id": 33389901, "question_id": 33381830, "link": "https://stackoverflow.com/questions/33381830/efficient-way-to-select-items-value-from-sorted-array/33389901#33389901", "title": "Efficient way to select items &lt; value from sorted array", "body": "<p>First, why did your solutions not work? <code>select</code> accepts a block, and it throws away all elements for which the block returns a false-ish value (<code>nil</code> or <code>false</code>) and keeps all the ones for which the block returns a true-ish value.</p>\n\n<pre><code>arr.select { |p| p &lt; 5; break  if p &gt;= 5 } # = nil\n</code></pre>\n\n<p>Here, you call <code>p &lt; 5</code> but then you just ignore its return value. In Ruby, the return value of a block is the value of the last expression evaluated inside the block. The last expression evaluated here is <code>break if p &gt;= 5</code>. Since there is no <code>else</code> case, it will return <code>nil</code> (which is <code>false</code>, i.e. means \"do not keep this element\") for all elements less than 5, and then it will <code>break</code> (which means \"abort and return <code>nil</code>\").</p>\n\n<p>IOW: you are telling <code>select</code> to throw away all elements less than 5 and then to abort.</p>\n\n<pre><code>arr.select { |p| p &lt; 5; next   if p &gt;= 5 } # = []\n</code></pre>\n\n<p>In this case, again, you are returning <code>nil</code> for all elements less than 5, and for all elements greater than or equal to 5, you are returning the argument to <code>next</code> \u2026 but there is no argument, ergo, you are also returning <code>nil</code> for all elements greater than 5.</p>\n\n<p>IOW: you are telling <code>select</code> to throw away all elements less than 5 and then you tell it to throw away all elements greater than or equal to 5, or, put another way, you tell it to throw away all elements \u2026 <em>and</em> you are still iterating the entire array.</p>\n\n<p>This doesn't make much sense anyway. <code>next</code> is implied in a block, just like <code>return</code> is implied in a method. (In fact, <code>next</code> is for blocks what <code>return</code> is for methods), so all you have done is add a superfluous keyword.</p>\n\n<pre><code>arr.select { |p| p &lt; 5; return if p &gt;= 5 } # LocalJumpError\n</code></pre>\n\n<p>Again, the same as before \u2026 you are telling <code>select</code> to throw away all elements less than 5, and then you are <code>return</code>ing from the enclosing method. But there <em>is no</em> enclosing method, so Ruby <code>raise</code>s a <code>LocalJumpError</code>.</p>\n\n<p>You could \"fix\" your second solution this way:</p>\n\n<pre><code>arr.select { |p| if p &lt; 5 then true else next end }\n</code></pre>\n\n<p>I.e. you need to actually return <code>true</code> (or something true-ish) for elements less than 5. But, like I said, <code>next</code> is implied anyway, so you can just leave it out, which means this is equivalent to</p>\n\n<pre><code>arr.select { |p| if p &lt; 5 then true else nil end }\n</code></pre>\n\n<p>Which, since <code>select</code> treats <code>false</code> and <code>nil</code> the same is equivalent to</p>\n\n<pre><code>arr.select { |p| if p &lt; 5 then true else false end }\n</code></pre>\n\n<p>Which is of course just the same as </p>\n\n<pre><code>arr.select { |p| p &lt; 5 }\n</code></pre>\n\n<p>Which, because of the symmetry of <code>&lt;</code> and <code>&gt;</code> is just the same as</p>\n\n<pre><code>arr.select(&amp;5.method(:&gt;))\n</code></pre>\n\n<p>Anyway, the correct solution for searching in a sorted array would be to use a binary search, which will not need to iterate the array <em>at all</em>, and will only need O(log(n)) comparisons:</p>\n\n<pre><code>arr.bsearch_index(&amp;5.method(:&lt;=))\n</code></pre>\n\n<p>This will search for the \"index of the element at the next biggest index right of the last number that is less than 5\". Then you can use <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-5B-5D\" rel=\"nofollow\"><code>Array#[]</code></a> to extract the slice of elements you want</p>\n\n<pre><code>arr[0...arr.bsearch_index(&amp;5.method(:&lt;=))]\n</code></pre>\n\n<p>Note that <code>Array#bsearch_index</code> is <a href=\"https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/50839\" rel=\"nofollow\">new in 2.3.0</a>, I believe, until then, you can use <a href=\"http://ruby-doc.org/core-2.2.3/Range.html#method-i-bsearch\" rel=\"nofollow\"><code>Range#bsearch</code></a> <a href=\"https://bugs.ruby-lang.org/issues/10730#note-1\" rel=\"nofollow\">instead</a>:</p>\n\n<pre><code>arr[0...(0...arr.size).bsearch {|i| arr[i] &gt;= 5 }]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1446273578, "creation_date": 1446273578, "answer_id": 33448829, "question_id": 33381830, "link": "https://stackoverflow.com/questions/33381830/efficient-way-to-select-items-value-from-sorted-array/33448829#33448829", "title": "Efficient way to select items &lt; value from sorted array", "body": "<p>You can also do that using <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-lazy\" rel=\"nofollow\">Enumerable#lazy</a> with <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-slice_before\" rel=\"nofollow\">Enumerable#slice_while</a>:</p>\n\n<pre><code>arr.lazy.slice_before { |i| i &gt;= 5 }.first\n  #=&gt; [1, 2, 3, 4] \n</code></pre>\n\n<p>By making <code>slice_before</code> lazy, <code>first</code> terminates the slicing after the first slice is obtained.</p>\n"}], "owner": {"reputation": 31, "user_id": 5348843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eae5e94fe7253189da6571da0e3a16?s=128&d=identicon&r=PG&f=1", "display_name": "NutGristle", "link": "https://stackoverflow.com/users/5348843/nutgristle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 33381948, "answer_count": 4, "score": 2, "last_activity_date": 1446273578, "creation_date": 1445998771, "last_edit_date": 1445999717, "question_id": 33381830, "link": "https://stackoverflow.com/questions/33381830/efficient-way-to-select-items-value-from-sorted-array", "title": "Efficient way to select items &lt; value from sorted array", "body": "<p>I have an array with sorted numbers, eg.</p>\n\n<pre><code>arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>Is there a way to select items &lt; 5, without traversing the whole array?\nEg. the following will traverse the whole array and check each item. But, for a sorted array, it could break as soon as it hits an item >= 5.</p>\n\n<pre><code>arr.select { |p| p &lt; 5 }\n</code></pre>\n\n<p>I've tried variations with break, next and return without success.</p>\n\n<pre><code>arr.select { |p| p &lt; 5; break  if p &gt;= 5 } # = nil\narr.select { |p| p &lt; 5; next   if p &gt;= 5 } # = []\narr.select { |p| p &lt; 5; return if p &gt;= 5 } # LocalJumpError\n</code></pre>\n\n<p>What's a good way to achieve this?</p>\n"}, {"tags": ["ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": false, "score": 0, "last_activity_date": 1445998856, "creation_date": 1445998856, "answer_id": 33381853, "question_id": 33381688, "link": "https://stackoverflow.com/questions/33381688/is-there-a-design-pattern-for-activerecord-structure/33381853#33381853", "title": "Is there a design pattern for ActiveRecord structure?", "body": "<p>I'm a big fan of the talk Gregg Pollack gave at the Lone Star Ruby Conference about the big refactoring of Rails 3.  He does a great presentation gives you a great peek under the skirt of Rails.  Rails 4 hasn't really changed much.  Active record follows the same architecture he describes and you will be able to see it when you browse through the active record code after seeing the presentation.  Here is the link to the talk:</p>\n\n<p><a href=\"http://confreaks.tv/videos/lsrc2010-de\" rel=\"nofollow\">http://confreaks.tv/videos/lsrc2010-de</a></p>\n\n<p>or </p>\n\n<p><a href=\"https://www.youtube.com/watch?v=ldxGXxZ1CCI\" rel=\"nofollow\">https://www.youtube.com/watch?v=ldxGXxZ1CCI</a></p>\n"}], "owner": {"reputation": 2235, "user_id": 5439557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/616e10588daebff8ba0f7ebbe1fe1a66?s=128&d=identicon&r=PG&f=1", "display_name": "scho", "link": "https://stackoverflow.com/users/5439557/scho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1446176440, "creation_date": 1445997752, "last_edit_date": 1446176440, "question_id": 33381688, "link": "https://stackoverflow.com/questions/33381688/is-there-a-design-pattern-for-activerecord-structure", "title": "Is there a design pattern for ActiveRecord structure?", "body": "<p>I want to know the structure about ruby's <code>ActiveRecord</code>. But I didn't find a design or introduction for its architecture.</p>\n\n<p>Other way, how can I know its structure or how to read its source code to fast understand it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sql-server"], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": true, "score": 1, "last_activity_date": 1445998013, "creation_date": 1445998013, "answer_id": 33381730, "question_id": 33381599, "link": "https://stackoverflow.com/questions/33381599/ruby-on-rails-accessing-sql-server-views/33381730#33381730", "title": "Ruby on Rails accessing SQL Server Views", "body": "<p>change this:</p>\n\n<pre><code>class vwJobShipTo\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>class VWJobShipTo\n</code></pre>\n"}], "owner": {"reputation": 1618, "user_id": 4390569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/45e5cbdbb0918c604054719dcd4d8e96?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/4390569/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 33381730, "answer_count": 1, "score": 1, "last_activity_date": 1445998013, "creation_date": 1445997177, "question_id": 33381599, "link": "https://stackoverflow.com/questions/33381599/ruby-on-rails-accessing-sql-server-views", "title": "Ruby on Rails accessing SQL Server Views", "body": "<p>I am using Ruby on Rails with ting_tds and activerecord-sqlserver-adapter to access a MS SQL Server database.</p>\n\n<p>I have all the tables set up but I am not able to set up the Views.</p>\n\n<p>There is a view called dbo.vwJobShipTo.</p>\n\n<p>In my model, I put the following:</p>\n\n<pre><code>class vwJobShipTo &lt; ActiveRecord::Base\n\n  self.table_name = \"vwJobShipTo\"\n  self.primary_key = \"JobShipToId\"\n\n\nend\n</code></pre>\n\n<p>I am getting \"NameError: undefined local variable or method `vwJobShipTo' for main:Object\"</p>\n\n<p>Any idea what I am missing? Any help / advice is greatly appreciated. Thanks a lot in advance.</p>\n"}, {"tags": ["ruby", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": false, "score": 0, "last_activity_date": 1445997672, "creation_date": 1445997672, "answer_id": 33381674, "question_id": 33381589, "link": "https://stackoverflow.com/questions/33381589/how-do-you-convert-a-jruby-based-application-to-ruby/33381674#33381674", "title": "How do you convert a jruby-based application to ruby?", "body": "<p>change this:</p>\n\n<pre><code>ruby '2.2.2', :engine =&gt; 'jruby', :engine_version =&gt; '9.0.0.0'\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>ruby '2.2.2'\n</code></pre>\n\n<p>and change:</p>\n\n<pre><code>gem 'activerecord-jdbcpostgresql-adapter'\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>gem 'pg'\n</code></pre>\n\n<p>You probably need to update you database.yml also.  You didn't paste it here, so I can't be sure.  Just lookup the pg gem to see what you need to configure your conetions to.</p>\n"}, {"tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": false, "score": 0, "last_activity_date": 1446020084, "creation_date": 1446020084, "answer_id": 33385904, "question_id": 33381589, "link": "https://stackoverflow.com/questions/33381589/how-do-you-convert-a-jruby-based-application-to-ruby/33385904#33385904", "title": "How do you convert a jruby-based application to ruby?", "body": "<p>no need to actually change much stuff as suggested in the other answer.\nin the <em>Gemfile</em> specify platform qualifiers for MRI/JRuby specific gems :</p>\n\n<pre><code># ruby '2.2.2', :engine =&gt; 'jruby', :engine_version =&gt; '9.0.0.0'\n# ...\ngem 'rails', '4.1.8'\n# ...\ngem 'activerecord-jdbcpostgresql-adapter', platform: :jruby\ngem 'pg', platform: :mri\n</code></pre>\n\n<p>if you're not using anything AR-JDBC specific in <em>database.yml</em> (e.g. <code>url: jdbc:postrgresql:...</code>) than the same configuration with work on JRuby as well as C-Ruby</p>\n"}], "owner": {"reputation": 21, "user_id": 5496223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0279cc4376a57966e65d5f3f9e3889f4?s=128&d=identicon&r=PG&f=1", "display_name": "Tetimaru", "link": "https://stackoverflow.com/users/5496223/tetimaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1446020084, "creation_date": 1445997127, "question_id": 33381589, "link": "https://stackoverflow.com/questions/33381589/how-do-you-convert-a-jruby-based-application-to-ruby", "title": "How do you convert a jruby-based application to ruby?", "body": "<p>I made an application using jruby but I want to get it to work on a different computer which only has ruby installed.\nIt won't let me just change the gemfile from jruby to ruby, so how can I change it to run based on ruby?</p>\n\n<p>This is my gemfile using jruby:</p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.2.2', :engine =&gt; 'jruby', :engine_version =&gt; '9.0.0.0'\n\ngem 'cowsay'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.8'\n# Use postgresql as the database for Active Record\ngem 'activerecord-jdbcpostgresql-adapter'\ngem 'rails_12factor', group: :production\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 4.0.3'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer',  platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\n\n# Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\ngem 'spring',        group: :development\n\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :jruby]\n\ngem 'puma'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Use debugger\n# gem 'debugger', group: [:development, :test]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "forms", "paperclip"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 1, "creation_date": 1446000827, "post_id": 33381579, "comment_id": 54557830, "body": "File uploading via ajax requires a bit of extra work, you can&#39;t just add a <code>remote: true</code> and expect it to work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1446010229, "post_id": 33381579, "comment_id": 54560414, "body": "Yeah that&#39;s what I was thinking but I can&#39;t find anything regarding this online. Any idea?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1446010666, "post_id": 33381579, "comment_id": 54560544, "body": "Thanks, I found out. I&#39;ll accept the solution whenever I can."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "edited": false, "score": 0, "creation_date": 1446010320, "post_id": 33382445, "comment_id": 54560450, "body": "Yes I have &quot;posts/update.js.erb&quot;. I don&#39;t think that&#39;s the issue since it works when I don&#39;t submit files.  As sevenseacat said, &quot;File uploading via ajax requires a bit of extra work&quot;. I need to find out how now!"}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446011533, "post_id": 33382445, "comment_id": 54560833, "body": "It looks like it is looking for a posts/update.html.erb. the missing template thinks you&#39;re rending html format, not js."}], "tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": false, "score": 0, "last_activity_date": 1446012360, "last_edit_date": 1446012360, "creation_date": 1446003080, "answer_id": 33382445, "question_id": 33381579, "link": "https://stackoverflow.com/questions/33381579/missing-template-when-uploading-files-with-paperclip-only-when-form-is-remote/33382445#33382445", "title": "Missing template when uploading files with Paperclip (only when form is remote: true)", "body": "<p>Your problem is specifically the line in your controller:</p>\n\n<pre><code>render \"posts/update\"\n</code></pre>\n\n<p>in your views directory, do you have a file posts/update.html.erb or the like.  That is what it is trying to render.  It can't find the file.  What are you trying to do with that line?</p>\n\n<p>UPDATE:</p>\n\n<p>Try doing this:</p>\n\n<pre><code>render 'posts/update', formats: [:js]\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "is_accepted": true, "score": 1, "last_activity_date": 1446010627, "creation_date": 1446010627, "answer_id": 33383644, "question_id": 33381579, "link": "https://stackoverflow.com/questions/33381579/missing-template-when-uploading-files-with-paperclip-only-when-form-is-remote/33383644#33383644", "title": "Missing template when uploading files with Paperclip (only when form is remote: true)", "body": "<p>Solution:\nUsing the <a href=\"https://github.com/JangoSteve/remotipart\" rel=\"nofollow\">remotipart gem</a> !</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 33383644, "answer_count": 2, "score": 1, "last_activity_date": 1446012360, "creation_date": 1445997055, "last_edit_date": 1445997994, "question_id": 33381579, "link": "https://stackoverflow.com/questions/33381579/missing-template-when-uploading-files-with-paperclip-only-when-form-is-remote", "title": "Missing template when uploading files with Paperclip (only when form is remote: true)", "body": "<p>I am working on a Rails app. I have a form where the user can submit some files. The form is doing an AJAX call (it has the remote: true attribute). Whenever I want to send a file using the \"f.file_field :banner\" helper, the server responds with </p>\n\n<pre><code>Missing template posts/update with {:locale=&gt;[:fr], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :slim]}. Searched in: ...\n</code></pre>\n\n<p>I have tried to add a respond_to block into my controller but then the server throws an ActionController::UnknownFormat.</p>\n\n<p>Why is it not rendering my JS template ONLY when I submit a file? The form works fine when I just submit text. </p>\n\n<p>Thank you for you help!</p>\n\n<p>EDIT:</p>\n\n<p>My form:</p>\n\n<pre><code>= bootstrap_form_for @section, remote: true  do |f|\n = f.file_field :banner\n ...\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code># PATCH/PUT /sections/1\ndef update\n  @section.update(section_params)\n  manage_photos\n  render \"posts/update\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446003836, "post_id": 33381086, "comment_id": 54558560, "body": "What tutorial are you actually following?  Also, can you show me the content of /Users/pradeepkotwal1/rails_projects/sample_app/spec/spec_he&zwnj;&#8203;lper.rb"}, {"owner": {"reputation": 83, "user_id": 1952173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb90fc305cf6ad32380343ff6db7ec8?s=128&d=identicon&r=PG", "display_name": "Pradeeepk", "link": "https://stackoverflow.com/users/1952173/pradeeepk"}, "reply_to_user": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446004882, "post_id": 33381086, "comment_id": 54558802, "body": "I am using <a href=\"http://rails-4-0.railstutorial.org/book/static_pages\" rel=\"nofollow noreferrer\">rails-4-0.railstutorial.org/book/static_pages</a>"}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446006073, "post_id": 33381086, "comment_id": 54559146, "body": "And what does your spec_helper.rb look like?"}, {"owner": {"reputation": 83, "user_id": 1952173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb90fc305cf6ad32380343ff6db7ec8?s=128&d=identicon&r=PG", "display_name": "Pradeeepk", "link": "https://stackoverflow.com/users/1952173/pradeeepk"}, "reply_to_user": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446006956, "post_id": 33381086, "comment_id": 54559416, "body": "I have removed comments and now its shows ENV[&quot;RAILS_ENV&quot;] ||= &#39;test&#39; require File.expand_path(&quot;../../config/environment&quot;, <b>FILE</b>) require &#39;rspec/rails&#39;  Dir[Rails.root.join(&quot;spec/support/**/*.rb&quot;)].each { |f| require f }  ActiveRecord::Migration.check_pending! if defined?(ActiveRecord::Migration)  RSpec.configure do |config|   config.fixture_path = &quot;#{::Rails.root}/spec/fixtures&quot;    config.use_transactional_fixtures = true    config.infer_base_class_for_anonymous_controllers = false    config.order = &quot;random&quot; end"}], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "is_accepted": false, "score": 0, "last_activity_date": 1446009788, "last_edit_date": 1446009788, "creation_date": 1446009182, "answer_id": 33383358, "question_id": 33381086, "link": "https://stackoverflow.com/questions/33381086/rails-activesupport-error-in-rpect/33383358#33383358", "title": "Rails Activesupport error in rpect", "body": "<p>Your spec_helper.rb should look like this, I'm not sure if you pasted it wrong:</p>\n\n<pre><code>  ENV[\"RAILS_ENV\"] ||= 'test'\n  require File.expand_path(\"../../config/environment\", __FILE__)\n  require 'rspec/rails'\n  require 'rspec/autorun'\n\n  Dir[Rails.root.join(\"spec/support/**/*.rb\")].each { |f| require f }\n  ActiveRecord::Migration.check_pending! if defined?(ActiveRecord::Migration)\n  RSpec.configure do |config|\n    config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n    config.use_transactional_fixtures = true\n    config.infer_base_class_for_anonymous_controllers = false\n    config.order = \"random\"\n  end \n</code></pre>\n\n<p>Check it and try again.  If this doesn't work try backing up your Gemfile and replace it with:</p>\n\n<pre><code>https://github.com/railstutorial/sample_app_rails_4/blob/master/Gemfile\n</code></pre>\n\n<p>then run</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>then try again:</p>\n\n<pre><code>bundle exec rspec spec/requests/static_pages_spec.rb\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 1952173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb90fc305cf6ad32380343ff6db7ec8?s=128&d=identicon&r=PG", "display_name": "Pradeeepk", "link": "https://stackoverflow.com/users/1952173/pradeeepk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1446009788, "creation_date": 1445993459, "last_edit_date": 1445996933, "question_id": 33381086, "link": "https://stackoverflow.com/questions/33381086/rails-activesupport-error-in-rpect", "title": "Rails Activesupport error in rpect", "body": "<p>I am beginner Ruby on Rails. I was following railstutorial.org to trying to do test but I am getting error related to activesupport. \nI am on Yosemite. I run command 'rails generate integration_test static_pages' to generate static_pages and after trying to run TDD for same. I run 'exec rspec spec/requests/static_pages_spec.rb' and I got error</p>\n\n<pre><code>/Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require': No such file to load -- test/unit/assertions (LoadError)\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/rspec-rails-2.13.1/lib/rspec/rails/adapters.rb:3:in `&lt;top (required)&gt;'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/rspec-rails-2.13.1/lib/rspec/rails.rb:11:in `&lt;top (required)&gt;'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:360:in `require_or_load'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:317:in `depend_on'\nfrom /Users/pradeepkotwal1/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:233:in `require_dependency'\nfrom /Users/pradeepkotwal1/rails_projects/sample_app/spec/spec_helper.rb:4:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>Can you please help me</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "edited": false, "score": 0, "creation_date": 1445998651, "post_id": 33380847, "comment_id": 54557269, "body": "You should check out Nathan&#39;s answer. It&#39;s more Rubyish."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5486464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f23c8d414dfa6a3d709f8b53ed00b9?s=128&d=identicon&r=PG&f=1", "display_name": "M Ortiz ", "link": "https://stackoverflow.com/users/5486464/m-ortiz"}, "edited": false, "score": 0, "creation_date": 1445994728, "post_id": 33381021, "comment_id": 54556234, "body": "You sir/ma&#39;am are a hero. I was not even aware of the map method before. I&#39;m glad I asked because my headache is already smaller haha.  Thanks again @seph!"}], "tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": true, "score": 0, "last_activity_date": 1445993065, "creation_date": 1445993065, "answer_id": 33381021, "question_id": 33380847, "link": "https://stackoverflow.com/questions/33380847/how-do-i-navigate-through-each-item-of-a-2d-array/33381021#33381021", "title": "How do I navigate through each item of a 2D array?", "body": "<p>This is a rare case in Ruby where iterating on the index is helpful:</p>\n\n<pre><code>(0...names.size).map do |idx|\n  \"#{names[idx]}-#{id[idx]}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "is_accepted": false, "score": 2, "last_activity_date": 1445995996, "last_edit_date": 1445995996, "creation_date": 1445994502, "answer_id": 33381232, "question_id": 33380847, "link": "https://stackoverflow.com/questions/33380847/how-do-i-navigate-through-each-item-of-a-2d-array/33381232#33381232", "title": "How do I navigate through each item of a 2D array?", "body": "<p><code>names.zip(id).map { |e| e.join('-') }</code></p>\n\n<p><code>zip</code> combines the two arrays into an array of arrays like this:</p>\n\n<p><code>[['bob', 1], ['frank', 2], ['tim', 3]]</code></p>\n\n<p><code>map</code> loops through each of 3 elements of the outer array and converts each inner array into a string by joining its two elements together with a dash using <code>join</code>.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-zip\" rel=\"nofollow\">zip</a>, <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-map\" rel=\"nofollow\">map</a>, and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-join\" rel=\"nofollow\">join</a> documentation.</p>\n\n<p>Generally speaking, when researching array manipulation in Ruby, you'll want to look at the docs both for Array and the docs for Enumerable.</p>\n"}], "owner": {"reputation": 33, "user_id": 5486464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f23c8d414dfa6a3d709f8b53ed00b9?s=128&d=identicon&r=PG&f=1", "display_name": "M Ortiz ", "link": "https://stackoverflow.com/users/5486464/m-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 33381021, "answer_count": 2, "score": 3, "last_activity_date": 1446392349, "creation_date": 1445991898, "last_edit_date": 1446392349, "question_id": 33380847, "link": "https://stackoverflow.com/questions/33380847/how-do-i-navigate-through-each-item-of-a-2d-array", "title": "How do I navigate through each item of a 2D array?", "body": "<p>So, I know you can navigate through a 2D array with something like</p>\n\n<pre><code>arr1.each do |a1|\n  a1.each do |a2|\n    puts a2\n</code></pre>\n\n<p>however what I am trying to do is a little different. I have 2 sets of values stored in arrays and I want to be able to cycle through them and populate a dropdown menu from the information. </p>\n\n<p>So I have data like:</p>\n\n<pre><code>names = [\"bob\", \"frank\", \"tim\"] \nid = [1, 2, 3]\n</code></pre>\n\n<p>which gets returned in an array from a method like this:</p>\n\n<pre><code>def method_name\n  #stuff\n  return names, id\nend\n</code></pre>\n\n<p>What I want to be able to do in the view is pair the corresponding indexes with each other. So, for the above example, <code>bob-1</code> <code>frank-2</code> <code>tim-3</code> I can't seem to figure it out. I have tried slicing and nested loops and have also tried with a hash being returned instead of an array. I'm lost.</p>\n\n<p>If anyone has any information on how to pull the information the way I am trying to do it, or another simpler way to do it I would really appreciate the input.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445991971, "post_id": 33380724, "comment_id": 54555474, "body": "The <code>do stuff with p</code> is probably important here. Were you doing any modifications on the array elements in that loop?"}, {"owner": {"reputation": 316, "user_id": 1414710, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/P0IxV.jpg?s=128&g=1", "display_name": "jtimz", "link": "https://stackoverflow.com/users/1414710/jtimz"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445992109, "post_id": 33380724, "comment_id": 54555520, "body": "@MichaelBerkowski well, I am not touching the elements of the array what I am doing is some if checks but I am not touching the actual values or order; like i.e. <code>if p.x == 1</code> increment a value outside the array. hope this helps."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 2, "creation_date": 1445992524, "post_id": 33380724, "comment_id": 54555635, "body": "Can you provide a minimum working example that demonstrates this?"}, {"owner": {"reputation": 316, "user_id": 1414710, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/P0IxV.jpg?s=128&g=1", "display_name": "jtimz", "link": "https://stackoverflow.com/users/1414710/jtimz"}, "reply_to_user": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1445992765, "post_id": 33380724, "comment_id": 54555701, "body": "@JohnLaRooy Well, you can easily view that yourself; I am trying to modify this code here  <a href=\"https://code.google.com/p/su2espr/source/browse/trunk/su2espr.rb\" rel=\"nofollow noreferrer\">code.google.com/p/su2espr/source/browse/trunk/su2espr.rb</a> and the lines in question are 141-146. The code in that link has many issues but you can run it easily."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 1, "creation_date": 1445994157, "post_id": 33380724, "comment_id": 54556083, "body": "Sure, but can you also provide an exact array and point that you found to work this way. If we can&#39;t replicate the problem it&#39;s hard to proceed any further with it."}, {"owner": {"reputation": 316, "user_id": 1414710, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/P0IxV.jpg?s=128&g=1", "display_name": "jtimz", "link": "https://stackoverflow.com/users/1414710/jtimz"}, "edited": false, "score": 0, "creation_date": 1445994432, "post_id": 33380724, "comment_id": 54556163, "body": "I just pointed you to the actual source... this runs inside Sketchup so I can&#39;t just find a discrete working example; if you import that source in Sketchup change those lines with the .each iterator method you&#39;ll stumble across what I said above."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1445994959, "post_id": 33380724, "comment_id": 54556295, "body": "My computer doesn&#39;t meet the requirements for sketchup, so I guess I&#39;ll leave it for someone else to look at."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446029341, "post_id": 33380724, "comment_id": 54569874, "body": "I&#39;m voting to close this question as off-topic because questions seeking debugging help (&quot;<b>why isn&#39;t this code working?</b>&quot;) must include the desired behavior, a <i>specific problem or error</i> and the <i>shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without a <b>clear problem statement</b> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. You are expecting us to install random third-party software and sift through hundreds of lines of code, just because you can&#39;t be bothered to \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1446029480, "post_id": 33380724, "comment_id": 54569962, "body": "\u2026 demonstrate your problem in a couple of lines. That is not exactly polite towards people who spend their free time to do your work for you without even getting paid for it."}, {"owner": {"reputation": 316, "user_id": 1414710, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/P0IxV.jpg?s=128&g=1", "display_name": "jtimz", "link": "https://stackoverflow.com/users/1414710/jtimz"}, "edited": false, "score": 0, "creation_date": 1446030586, "post_id": 33380724, "comment_id": 54570635, "body": "I didn&#39;t ask you or anyone to do my work; I asked for a clarification on a language guarantee. Stop being offensive, besides I am not expecting anything; if you cannot or are not willing to answer/contribute to the question just skip it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 1, "last_activity_date": 1445992484, "creation_date": 1445992484, "answer_id": 33380942, "question_id": 33380724, "link": "https://stackoverflow.com/questions/33380724/what-are-each-iterator-fetch-order-guarantees/33380942#33380942", "title": "What are .each iterator fetch order guarantees?", "body": "<p>The docs for <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html\" rel=\"nofollow\">Enumerable</a> state</p>\n\n<blockquote>\n  <p>The Enumerable mixin provides collection classes with several\n  traversal and searching methods, and with the ability to sort. The\n  class must provide a method each, which <strong>yields successive members</strong> of\n  the collection. If Enumerable#max, #min, or #sort is used, the objects\n  in the collection must also implement a meaningful &lt;=> operator, as\n  these methods rely on an ordering between members of the collection.</p>\n</blockquote>\n\n<p>So <code>Array.each</code> must also yield successive members to meet this contract</p>\n\n<p>If an implementation doesn't enforce this, it would be a bug in the implementation</p>\n"}], "owner": {"reputation": 316, "user_id": 1414710, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/P0IxV.jpg?s=128&g=1", "display_name": "jtimz", "link": "https://stackoverflow.com/users/1414710/jtimz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445992484, "creation_date": 1445991014, "last_edit_date": 1495540715, "question_id": 33380724, "link": "https://stackoverflow.com/questions/33380724/what-are-each-iterator-fetch-order-guarantees", "title": "What are .each iterator fetch order guarantees?", "body": "<p>I am really baffled by something as it led in hours of head scratching; I have the following segment of code</p>\n\n<pre><code>objectA.arrayA.each do |p|\n  do stuff with p\nend\n</code></pre>\n\n<p>I thought this was fine, since from <a href=\"https://stackoverflow.com/questions/6590152/is-the-each-iterator-in-ruby-guaranteed-to-give-the-same-order-on-the-same-elem\">this question</a> I felt that since I am using an array for the job so I should be fine. Unfortunately that was not the case since the order that the each iterator returned the elements was not always the same. After hours of looking at other blocks for the issue swapping the above code with this for loop solved the problem:</p>\n\n<pre><code>for i in 0...objectA.arrayA.length\n  do stuff with the array element\nend\n</code></pre>\n\n<p>Anyone has any idea when the ordering of each is <em>guaranteed</em>?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1445990510, "post_id": 33380543, "comment_id": 54555060, "body": "use your string to create a date object, or just use javascript date methods to create your comparison date"}, {"owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "reply_to_user": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1446064880, "post_id": 33380543, "comment_id": 54593617, "body": "@charlietfl Could you please elaborate a little? What do you mean by &quot;your string&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1445991896, "post_id": 33380699, "comment_id": 54555453, "body": "Hm, this is strange. The way I intended the code, it should prevent anyone under 18 from signing up. But apparently the problem is, it only allows anyone born in 1969 or before. Any idea why that would be?"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1445993077, "post_id": 33380699, "comment_id": 54555783, "body": "Ah, you must have an issue with some date parsing. If ever you get the date 12-31-1969 when you parse a date, that resolves to Unix timestamp 0. I&#39;d check that everything is parsing correctly in JS and in Ruby."}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1445999193, "post_id": 33380699, "comment_id": 54557402, "body": "For javascript you can check the parsing in the developer console (inspect element on chrome). In a console in ruby (rails c or irb), just do <code>@date.to_time.to_i</code> and compare the numbers."}, {"owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1446000317, "post_id": 33380699, "comment_id": 54557708, "body": "I ran October 5 2000. JQuery returns 973404000000, and rails returns 970704000 . Does that mean I have a parsing error?"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1446013089, "post_id": 33380699, "comment_id": 54561333, "body": "Since they are two different numbers I&#39;d double check have the exact same dates in js and in ruby. In ruby you should be getting: <code>Date.new(2000, 10, 5).to_time.to_i =&gt; 970729200</code>"}, {"owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1446013187, "post_id": 33380699, "comment_id": 54561368, "body": "Weird. Now I&#39;m getting <code>Date.new(2000, 10, 5).to_time.to_i =&gt; 970722000 </code>..what&#39;s that about?"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "edited": false, "score": 0, "creation_date": 1446060326, "post_id": 33380699, "comment_id": 54591144, "body": "You are probably in a different time zone than me, It shouldn&#39;t matter too much, since your goal is determining that someone is over a certain age."}], "tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": false, "score": 1, "last_activity_date": 1445990849, "creation_date": 1445990849, "answer_id": 33380699, "question_id": 33380543, "link": "https://stackoverflow.com/questions/33380543/comparing-jquery-date-to-rails-date/33380699#33380699", "title": "Comparing jQuery date to Rails date", "body": "<p>You might try converting them both to their unix timestamps and comparing those. If you don't care about the hours, and simply the dates, it should work.</p>\n\n<pre><code>var year = 2001\nvar month = 9\nvar day = 14\nvar date = new Date(year, month, day);\n&lt;% @date = Date.today - 18.years %&gt;\nif ( date.getTime() &gt; &lt;%= @date.to_time.to_i %&gt;) {\n  // do something\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1751, "user_id": 156166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/663120570/picture?type=large", "display_name": "Rich Seviora", "link": "https://stackoverflow.com/users/156166/rich-seviora"}, "is_accepted": false, "score": 1, "last_activity_date": 1446176634, "creation_date": 1446176634, "answer_id": 33428314, "question_id": 33380543, "link": "https://stackoverflow.com/questions/33380543/comparing-jquery-date-to-rails-date/33428314#33428314", "title": "Comparing jQuery date to Rails date", "body": "<p>I'd use a library like Moment.JS to handle your date parsing needs on the client side. And then send the server something in a standard format like ISO8601 to ensure you don't have any problems in misintrepretation.</p>\n\n<p>Epoch time will work as well, but as you've seen you have to carry the burden of ensuring that they're in the same units.</p>\n"}, {"comments": [{"owner": {"reputation": 5150, "user_id": 3462952, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ceebfa4719640ae25694fc020994ee5c?s=128&d=identicon&r=PG&f=1", "display_name": "vinayakj", "link": "https://stackoverflow.com/users/3462952/vinayakj"}, "edited": false, "score": 0, "creation_date": 1446321497, "post_id": 33429356, "comment_id": 54698440, "body": "Another way: Javascript can provide date as <code>var date = new Date(); date.toLocaleDateString(); &#47;&#47; &quot;11&#47;1&#47;2015&quot;</code> in this format and then you compare it server side easily."}], "tags": [], "owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "is_accepted": true, "score": 4, "last_activity_date": 1446183522, "creation_date": 1446183522, "answer_id": 33429356, "question_id": 33380543, "link": "https://stackoverflow.com/questions/33380543/comparing-jquery-date-to-rails-date/33429356#33429356", "title": "Comparing jQuery date to Rails date", "body": "<p>So it turns out the issue is that the js console prints times in milliseconds, which is why I was getting 973404000000, versus 973404000 in the rails console. </p>\n\n<p>All I had to do was divide the js time by 1000, and comparing the js time to the rails time works perfectly.</p>\n\n<pre><code>var year = 2000\nvar month = 10\nmonth --\nvar day = 5\nvar date = (new Date(year, month, day).getTime() / 1000);\ndate\n=&gt; 970722000\n\n\nDate.new(2000,10,5).to_time.to_i\n=&gt; 970722000 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1006, "user_id": 5509571, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8fa9ab47d7649632d492cf5efcba6c85?s=128&d=identicon&r=PG", "display_name": "Anil Yadav", "link": "https://stackoverflow.com/users/5509571/anil-yadav"}, "is_accepted": false, "score": 3, "last_activity_date": 1446294051, "creation_date": 1446294051, "answer_id": 33451508, "question_id": 33380543, "link": "https://stackoverflow.com/questions/33380543/comparing-jquery-date-to-rails-date/33451508#33451508", "title": "Comparing jQuery date to Rails date", "body": "<p>User date <strong>Format patterns</strong> for Jquery Date, for changing the format of date according to ruby date , or second option is convert ruby date format according to jquery , using <a href=\"http://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow\">strftime</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 5511393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1cb980f19bf96bdb9b5f810786b99b?s=128&d=identicon&r=PG&f=1", "display_name": "Romaric Fave", "link": "https://stackoverflow.com/users/5511393/romaric-fave"}, "is_accepted": false, "score": 0, "last_activity_date": 1446334724, "last_edit_date": 1495540895, "creation_date": 1446334724, "answer_id": 33457772, "question_id": 33380543, "link": "https://stackoverflow.com/questions/33380543/comparing-jquery-date-to-rails-date/33457772#33457772", "title": "Comparing jQuery date to Rails date", "body": "<p>To compare 2 dates for me u can use <a href=\"http://momentjs.com/\" rel=\"nofollow noreferrer\">moment.js</a></p>\n\n<p>With ur rails date create a moment date. Do the same with ur jquery date.</p>\n\n<p>U can compare easily the 2 dates now.</p>\n\n<p>If u need help see this post : <a href=\"https://stackoverflow.com/questions/22600856/moment-js-date-time-comparison\">moment-js-date-time-comparison</a></p>\n"}], "owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1138, "favorite_count": 0, "accepted_answer_id": 33429356, "answer_count": 5, "score": 9, "last_activity_date": 1446334724, "creation_date": 1445989928, "last_edit_date": 1446151952, "question_id": 33380543, "link": "https://stackoverflow.com/questions/33380543/comparing-jquery-date-to-rails-date", "title": "Comparing jQuery date to Rails date", "body": "<p>I have a rails-generated date, and a jQuery-generated date.</p>\n\n<p>The rails date prints as such: <code>2002-10-27</code></p>\n\n<p>and the jQuery date prints as such: <code>Tue Aug 14 2001 00:00:00 GMT-0500 (CDT)</code></p>\n\n<p>I want to check if the jQuery date is greater or less than the rails date. But no matter the dates, the jQuery date is always interpreted as larger than the rails date.</p>\n\n<p>Why is that, and how can I successfully compare the two dates?</p>\n\n<pre><code>var year = 2001\nvar month = 9\nmonth --\nvar day = 14\nvar date = new Date(year, month, day);\n&lt;% @date = Date.today - 18.years %&gt;\nif( date &gt; &lt;%= @date %&gt; ) {\n  //this code is always executed, no matter what dates I choose\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Actually I just figured out the problem is that it only allows dates before 1969. I intended the code to only allow dates over 18 years old. Does anyone know why the difference?</p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>I tested the time output of October 5th, 2000 in my js console and rails consoles, and they give the same first six digits, but the js console adds three zeros.</p>\n\n<pre><code>var year = 2000\nvar month = 10\nmonth --\nvar day = 5\nvar date = new Date(year, month, day);\ndate.getTime();\n=&gt; 970722000000\n\n\nDate.new(2000,10,5).to_time.to_i\n=&gt; 970722000 \n</code></pre>\n"}, {"tags": ["ruby", "redirect", "optimization", "sinatra"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1445991862, "post_id": 33380501, "comment_id": 54555443, "body": "What\u2019s <code>complicatedInformation:submitMeToTheDatabase</code>? It looks like you\u2019ve made up some example code, but that isn\u2019t even valid syntax."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1445993105, "post_id": 33380501, "comment_id": 54555793, "body": "@matt Sorry, that&#39;s activerecord syntax, I just was making up something that would take a long time to process"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1445997288, "post_id": 33380501, "comment_id": 54556931, "body": "Ah right sorry, it\u2019s the hash syntax. It looks a bit unusual without a space but it\u2019s valid."}], "answers": [{"tags": [], "owner": {"reputation": 1365, "user_id": 2341466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517837732aae0e367fe88baaf4daa26f?s=128&d=identicon&r=PG&f=1", "display_name": "andars", "link": "https://stackoverflow.com/users/2341466/andars"}, "is_accepted": true, "score": 1, "last_activity_date": 1465262991, "last_edit_date": 1495542159, "creation_date": 1445990347, "answer_id": 33380619, "question_id": 33380501, "link": "https://stackoverflow.com/questions/33380501/can-i-redirect-before-processing-input/33380619#33380619", "title": "Can I redirect before processing input?", "body": "<p>It's been a while since I've used sinatra, but I don't think the second would work.</p>\n\n<p>The <a href=\"https://github.com/sinatra/sinatra/blob/52b9a798a71ac3594be44c99f3fa786bbe6c8824/lib/sinatra/base.rb#L250-L261\" rel=\"nofollow noreferrer\">source</a> for the <code>redirect</code> method shows that <code>redirect</code> calls halt (<a href=\"https://github.com/sinatra/sinatra/blob/52b9a798a71ac3594be44c99f3fa786bbe6c8824/lib/sinatra/base.rb#L938-L941\" rel=\"nofollow noreferrer\">source</a>) and immediately stops any further processing.</p>\n\n<p>You could put the task onto a job queue and process it on another thread. See <a href=\"https://stackoverflow.com/questions/16024197/ruby-sinatra-with-consumer-thread-and-job-queue\">here</a> to get an idea of what I mean. </p>\n\n<pre><code>queue = Queue.new\nget \"/\" do\n    queue &lt;&lt; params[:processme]\n    redirect \"/otherPage\"\nend\n\nconsumer = Thread.new do\n    loop do\n        data = queue.pop\n        submitMe = veryLongFunction(data)\n        Information.create(complicatedInformation:submitMeToTheDatabase)\n    end\nend\n</code></pre>\n\n<p>Code not tested.</p>\n"}], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 33380619, "answer_count": 1, "score": 1, "last_activity_date": 1465262991, "creation_date": 1445989650, "last_edit_date": 1445993417, "question_id": 33380501, "link": "https://stackoverflow.com/questions/33380501/can-i-redirect-before-processing-input", "title": "Can I redirect before processing input?", "body": "<p>What I currently have is this:</p>\n\n<pre><code>get \"/\" do\n    submitMeToTheDatabase = veryLongFunction(params[:processme])\n    Information.create(complicatedInformation:submitMeToTheDatabase)\n    redirect \"/otherPage\"\nend\n</code></pre>\n\n<p>Would it work the same way, but have improved load times for the user if I did this?</p>\n\n<pre><code>get \"/\" do\n    redirect \"/otherPage\"\n    submitMeToTheDatabase = veryLongFunction(params[:processme])\n    Information.create(complicatedInformation:submitMeToTheDatabase)\nend\n</code></pre>\n\n<p><b>Addendum</b></p>\n\n<p>What would be another way to accomplish the same thing? Something along the lines of:</p>\n\n<pre><code>get \"/\" do\n    fork do\n        submitMeToTheDatabase = veryLongFunction(params[:processme])\n        Information.create(complicatedInformation:submitMeToTheDatabase)\n    end\n    redirect \"/otherPage\"\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "nginx"], "comments": [{"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1445996532, "post_id": 33380230, "comment_id": 54556763, "body": "Did you tried use some benchmarking tools and inspect which view partial or Controller/Model method is slow?"}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446005952, "post_id": 33380230, "comment_id": 54559113, "body": "Out of curiosity, did you try to change the number of connections open.  I noticed in quite a few examples of using wrk that the thread count to connections count is 5:1.  It is probably to give the server some time to respond.  Try upping the connection count to 50when thread count is 10 and see if that makes a difference."}, {"owner": {"reputation": 2446, "user_id": 2369428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CToEN.jpg?s=128&g=1", "display_name": "yivo", "link": "https://stackoverflow.com/users/2369428/yivo"}, "reply_to_user": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1446024855, "post_id": 33380230, "comment_id": 54566974, "body": "@nayiaw, yes of course. I tried rack-mini-profiler, NewRelic and SkyLight. When page gets load all views become slow."}, {"owner": {"reputation": 2446, "user_id": 2369428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CToEN.jpg?s=128&g=1", "display_name": "yivo", "link": "https://stackoverflow.com/users/2369428/yivo"}, "reply_to_user": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446025333, "post_id": 33380230, "comment_id": 54567293, "body": "@BasselSamman, still terrible slow."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446032634, "post_id": 33380230, "comment_id": 54571896, "body": "Okay,   what exactly is slow?  I read and re-read you description, but the only thing I can come up with is a blanket statement of joins are slow.  Not that it is actually your problem.  Have you tried chrome panel?  It is a chrome extension the uses meta_request gem to show you exactly what happened when a page is loaded and  how much time each part took, including all sql queries.  Try it out and find out what is slow.  Then we can go from there."}, {"owner": {"reputation": 774, "user_id": 5481847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc7iM.jpg?s=128&g=1", "display_name": "Bassel Samman", "link": "https://stackoverflow.com/users/5481847/bassel-samman"}, "edited": false, "score": 0, "creation_date": 1446033084, "post_id": 33380230, "comment_id": 54572155, "body": "sorry, I meant the chrome rails panel extension.  Here is the link to point you to the goodness:  <a href=\"https://github.com/dejan/rails_panel\" rel=\"nofollow noreferrer\">github.com/dejan/rails_panel</a>"}], "owner": {"reputation": 2446, "user_id": 2369428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CToEN.jpg?s=128&g=1", "display_name": "yivo", "link": "https://stackoverflow.com/users/2369428/yivo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1446004516, "creation_date": 1445988086, "question_id": 33380230, "link": "https://stackoverflow.com/questions/33380230/rails-4-unexpected-slowdowns-in-view-rendering-and-activerecord", "title": "Rails 4: Unexpected slowdowns in view rendering and ActiveRecord", "body": "<p>I am developing application on Rails and have troubles with performance. Below I have described and provided all technologies, configurations and methods I used. I tried many methods to solve this problem but nothing helped. This is also described below. Can anyone see what the problem is? Thank you!</p>\n\n<h2>The problem</h2>\n\n<p>Let's open site several times and see log:<br>\n<code>INFO -- : Completed 200 OK in 171ms (Views: 149.3ms | ActiveRecord: 7.3ms)</code><br>\n<code>INFO -- : Completed 200 OK in 217ms (Views: 183.7ms | ActiveRecord: 8.9ms)</code><br>\n<code>INFO -- : Completed 200 OK in 221ms (Views: 188.2ms | ActiveRecord: 11.7ms)</code><br>\n<code>INFO -- : Completed 200 OK in 165ms (Views: 143.3ms | ActiveRecord: 7.1ms)</code><br>\nFine.</p>\n\n<p>Now let's generate load with <code>wrk -t10 -c10 -d10s http://example.com</code> and see log again:<br>\n<code>INFO -- : Completed 200 OK in 178ms (Views: 157.6ms | ActiveRecord: 8.1ms)</code><br>\n<code>INFO -- : Completed 200 OK in 270ms (Views: 241.6ms | ActiveRecord: 8.8ms)</code><br>\n<code>INFO -- : Completed 200 OK in 505ms (Views: 460.7ms | ActiveRecord: 12.0ms)</code><br>\n<code>INFO -- : Completed 200 OK in 501ms (Views: 350.8ms | ActiveRecord: 136.0ms)</code><br>\n<code>INFO -- : Completed 200 OK in 777ms (Views: 468.1ms | ActiveRecord: 269.1ms)</code><br>\n<code>INFO -- : Completed 200 OK in 936ms (Views: 624.7ms | ActiveRecord: 285.1ms)</code><br>\n<code>...</code><br>\n<code>INFO -- : Completed 200 OK in 881ms (Views: 617.4ms | ActiveRecord: 251.6ms)</code><br>\n<code>...</code><br>\n<code>INFO -- : Completed 200 OK in 3289ms (Views: 2614.2ms | ActiveRecord: 326.4ms)</code><br>\n<code>INFO -- : Completed 200 OK in 3369ms (Views: 2624.0ms | ActiveRecord: 409.4ms)</code><br>\n<code>INFO -- : Completed 200 OK in 3203ms (Views: 2369.2ms | ActiveRecord: 382.1ms)</code><br>\n<code>...</code><br>\n<code>INFO -- : Completed 200 OK in 431ms (Views: 281.1ms | ActiveRecord: 126.3ms)</code><br>\n<code>...</code><br>\nWhat are this terrible slowdowns?</p>\n\n<pre><code>wrk -t10 -c10 -d10s http://example.com\nRunning 10s test @ http://example.com\n  10 threads and 10 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.26s    96.38ms   1.39s    75.00%\n    Req/Sec     0.00      0.00     0.00    100.00%\n  36 requests in 10.09s, 0.97MB read\n  Socket errors: connect 0, read 0, write 0, timeout 32\nRequests/sec:      3.57\nTransfer/sec:     98.62KB\n</code></pre>\n\n<h2>Rails</h2>\n\n<p>I am using latest Rails version - 4.2.4.<br>\n<code>bundle list</code> output - <a href=\"https://gist.github.com/yivo/684340f4123e82712bf1\" rel=\"nofollow\">github gist</a><br>\n<code>application.rb</code> - <a href=\"https://gist.github.com/yivo/f7bcd66336a45a97b844\" rel=\"nofollow\">github gist</a><br>\n<code>production.rb</code> - <a href=\"https://gist.github.com/yivo/3726271767f839b21297\" rel=\"nofollow\">github gist</a><br>\n<code>database.yml</code> - <a href=\"https://gist.github.com/yivo/9b611614a6fd3b4fa320\" rel=\"nofollow\">github gist</a>  </p>\n\n<p>I am using <a href=\"https://github.com/radar/paranoia\" rel=\"nofollow\">acts_as_paranoid</a> for all my models. (<code>WHERE deleted_at IS NULL</code>)  </p>\n\n<p>All N+1 queries are eliminated (analyzed them manually and with <a href=\"https://github.com/flyerhzm/bullet\" rel=\"nofollow\">bullet gem</a>).<br>\nAll tables are InnoDB and have a lot of indices. 99% of tables have 50 or less rows, the rest 1% - 200 or less. That's very low amount of data.  </p>\n\n<p>Page I am benchmarking requires around 30-35 SQL queries and around 30 partials.<br>\nQueries using...<br>\n- COUNT    - 0<br>\n- GROUP BY - 1<br>\n- ORDER BY - 10<br>\n- LIMIT    - 10<br>\n- JOIN     - 1 (joins one table)<br>\n- Use of MAX, MIN, CONCAT and other functions - NO</p>\n\n<p>My templates are written in <a href=\"https://github.com/slim-template/slim\" rel=\"nofollow\">Slim</a>.</p>\n\n<h2>Server configuration</h2>\n\n<p>CPU - Intel one core Sandy Bridge CPU<br>\nRAM - 1GM<br>\nDisk Type - SSD  </p>\n\n<h2>Operating System</h2>\n\n<p>Ubuntu 14.04 LTS 64bit  </p>\n\n<p>Swap 1GB. Optimized swap settings:<br>\n<code>cat /proc/sys/vm/swappiness =&gt; 10</code><br>\n<code>cat /proc/sys/vm/vfs_cache_pressure =&gt; 50</code></p>\n\n<h2>Database</h2>\n\n<p>MySQL 5.5. Tried to optimize with mysqltuner and tuning-primer.<br>\nCurrent configuration: <a href=\"https://gist.github.com/yivo/81cace00ea9a1b3d1927\" rel=\"nofollow\">github gist</a></p>\n\n<p>Latest mysqltuner report: <code>perl mysqltuner.pl --buffers --dbstat --outputfile result_mysqltuner.txt</code> <a href=\"https://gist.github.com/yivo/ab5ef16cec4e454cec06\" rel=\"nofollow\">github gist</a></p>\n\n<p>Latest tuning-primer report: <code>./tuning-primer.sh</code> <a href=\"https://gist.github.com/yivo/680f966d1c72e3ee4ce5\" rel=\"nofollow\">github gist</a></p>\n\n<p>I have notices the warning <code>Temporary tables created on disk</code>. That's because I have TEXT columns in MySQL. Googling I found that mounting MySQL temporary directory in memory is good idea. So I did it: <code>tmpdir /var/mysqltmp</code>. Followed <a href=\"http://2bits.com/articles/reduce-your-servers-resource-usage-moving-mysql-temporary-directory-ram-disk.html\" rel=\"nofollow\">this guide</a>.</p>\n\n<p><code>mytop output</code>:  </p>\n\n<pre><code> Queries: 37.4k    qps:    0 Slow:    1.9k         Se/In/Up/De(%):    91/00/00/00\n Sorts:     0 qps now:    1 Slow qps: 0.0  Threads:    4 (   1/   2) 00/00/00/00\n Cache Hits: 29.0k Hits/s:  0.4 Hits now:   0.0  Ratio: 85.5%\n Ratio now:  0.0%\n Key Efficiency: 99.4%  Bps in/out:  75.8/ 1.9k   Now in/out:  22.6/ 2.1k\n\n       Id      User         Host/IP         DB       Time    Cmd    State Query\n       --      ----         -------         --       ----    ---    ----- ----------\n     1444      root       localhost site             73737   Sleep\n     2337      root       localhost site             658     Sleep\n     2340      root       localhost site             322     Sleep\n     2342      root       localhost                  0       Query         show full processlist\n</code></pre>\n\n<h2>Ruby interpreter</h2>\n\n<p>Rbenv: <code>rbenv -v =&gt; rbenv 0.4.0-154-g9e664b5</code><br>\nRuby: <code>ruby -v =&gt; ruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-linux]</code>  </p>\n\n<p>My ruby is compiled with jemalloc (better memory allocation):<br>\n<code>RbConfig::CONFIG['LIBS'] =&gt; \"-lpthread -ljemalloc -ldl -lcrypt -lm \"</code><br>\nFollowed <a href=\"http://groguelon.fr/post/106221222318/how-to-install-ruby-220-with-jemalloc-support\" rel=\"nofollow\">this guide</a>.</p>\n\n<p>I have tried both ruby with default and custom memory allocation. Ruby with jemalloc seems to be faster.</p>\n\n<h2>Web server</h2>\n\n<p><code>nginx -v =&gt; nginx version: nginx/1.8.0</code><br>\nCurrent nginx.conf (simplified):  <a href=\"https://gist.github.com/yivo/60fe6a9f29abe34f5469\" rel=\"nofollow\">github gist</a><br>\nCurrent nginx site conf (simplified): <a href=\"https://gist.github.com/yivo/64dfb7b8d17a3a265203\" rel=\"nofollow\">github gist</a>  </p>\n\n<h2>Application server</h2>\n\n<p>I have tried both Passenger and Puma. But without result.   </p>\n\n<h3>Phusion Passenger</h3>\n\n<p><code>passenger -v =&gt; Phusion Passenger version 5.0.18</code><br>\nConfiguration: <a href=\"https://gist.github.com/yivo/b63c610c3fc0882be85b\" rel=\"nofollow\">github gist</a>  </p>\n\n<h3>Puma</h3>\n\n<p><code>bundle exec puma -v =&gt; puma version 2.13.4</code><br>\nAlso I have tried Puma server in both cluster (1 worker) and thread models.<br>\nHere is latest config for Puma in thread mode: <a href=\"https://gist.github.com/yivo/ee777d47110fe980b225\" rel=\"nofollow\">github gist</a></p>\n"}, {"tags": ["arrays", "ruby", "string", "type-conversion", "symbols"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4736246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-mhbuHEs1VhM/AAAAAAAAAAI/AAAAAAAAABo/WVNd8io-KdQ/photo.jpg?sz=128", "display_name": "Walter Straub", "link": "https://stackoverflow.com/users/4736246/walter-straub"}, "edited": false, "score": 0, "creation_date": 1445988195, "post_id": 33380201, "comment_id": 54554279, "body": "Nowhere in the instructions does it suggest you use the .map syntax. I appreciate the help, but how do I fix the code I already have?"}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 83, "user_id": 4736246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-mhbuHEs1VhM/AAAAAAAAAAI/AAAAAAAAABo/WVNd8io-KdQ/photo.jpg?sz=128", "display_name": "Walter Straub", "link": "https://stackoverflow.com/users/4736246/walter-straub"}, "edited": false, "score": 0, "creation_date": 1445988309, "post_id": 33380201, "comment_id": 54554313, "body": "Ah my bad. I think its an issue of what is being returned. I will edit my post soon"}], "tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1445988511, "last_edit_date": 1445988511, "creation_date": 1445987952, "answer_id": 33380201, "question_id": 33380176, "link": "https://stackoverflow.com/questions/33380176/converting-strings-to-symbols-and-pushing-them-into-an-array/33380201#33380201", "title": "Converting strings to symbols and &quot;.push&quot;ing them into an array", "body": "<p>You can map it and store it to a new variable like the instructions suggest:</p>\n\n<pre><code>symbols = strings.map{ |str| str.to_sym }\n</code></pre>\n\n<p>Edit:</p>\n\n<p><code>s.to_sym</code> returns a symbol, but you aren't storing it anywhere or saving the changes, so a non-destructive method. Instead, you should <code>push</code> in the returned statement, so you use <code>s.to_sym</code> as the argument being pushed in to your new array <code>symbols</code>. When calling <code>symbols</code> array, it should now contain all your previous strings translated into symbols. </p>\n\n<pre><code>strings.each {|s| symbols.push(s.to_sym) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4736246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-mhbuHEs1VhM/AAAAAAAAAAI/AAAAAAAAABo/WVNd8io-KdQ/photo.jpg?sz=128", "display_name": "Walter Straub", "link": "https://stackoverflow.com/users/4736246/walter-straub"}, "edited": false, "score": 0, "creation_date": 1445988820, "post_id": 33380233, "comment_id": 54554535, "body": "Brief, informative, relevant. This is what I was looking for, thank-you."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1445989664, "post_id": 33380233, "comment_id": 54554800, "body": "even further, you can do:  symbols = strings.collect(&amp;:to_sym)"}, {"owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "edited": false, "score": 0, "creation_date": 1445989722, "post_id": 33380233, "comment_id": 54554822, "body": "Collect and map are the same thing. Neither is allowed by the question."}], "tags": [], "owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "is_accepted": true, "score": 4, "last_activity_date": 1445988111, "creation_date": 1445988111, "answer_id": 33380233, "question_id": 33380176, "link": "https://stackoverflow.com/questions/33380176/converting-strings-to-symbols-and-pushing-them-into-an-array/33380233#33380233", "title": "Converting strings to symbols and &quot;.push&quot;ing them into an array", "body": "<p>You create a new symbol from the string that s points to, but you don't change s (it's still a string) and you don't use the new symbol. Instead, your loop should contain the code</p>\n\n<pre><code>symbols.push(s.to_sym)\n</code></pre>\n\n<p>Note that the question requires you to use .each, so the answer suggesting .map is wrong, even though it's a better way of implementing the same thing.</p>\n"}, {"tags": [], "owner": {"reputation": 14479, "user_id": 107029, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24167126a174fd54a16b2b2586000f84?s=128&d=identicon&r=PG&f=1", "display_name": "Peterdk", "link": "https://stackoverflow.com/users/107029/peterdk"}, "is_accepted": false, "score": 0, "last_activity_date": 1445988120, "creation_date": 1445988120, "answer_id": 33380236, "question_id": 33380176, "link": "https://stackoverflow.com/questions/33380176/converting-strings-to-symbols-and-pushing-them-into-an-array/33380236#33380236", "title": "Converting strings to symbols and &quot;.push&quot;ing them into an array", "body": "<p><code>s.to_sym</code> does convert it to symbol, but <code>s</code> remains a string. You did not assign it again to <code>s</code> like <code>s = s.to_sym</code> or <code>s.to_sym!</code>. So you basically push the <code>s</code> string instead of the symbol.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5524866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0e1a93647af4f054befa65b1ce9153?s=128&d=identicon&r=PG", "display_name": "JanieSG", "link": "https://stackoverflow.com/users/5524866/janiesg"}, "edited": false, "score": 0, "creation_date": 1446643398, "post_id": 33523004, "comment_id": 54827170, "body": "This returns [:s, :s]nil to the console"}, {"owner": {"reputation": 1, "user_id": 5524866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0e1a93647af4f054befa65b1ce9153?s=128&d=identicon&r=PG", "display_name": "JanieSG", "link": "https://stackoverflow.com/users/5524866/janiesg"}, "edited": false, "score": 0, "creation_date": 1446643414, "post_id": 33523004, "comment_id": 54827181, "body": "But Ruby still does not like it - not sure why?"}, {"owner": {"reputation": 2240, "user_id": 4099598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc50a32e3a3dffad460e83c0e02f6ba?s=128&d=identicon&r=PG", "display_name": "Nathan Tuggy", "link": "https://stackoverflow.com/users/4099598/nathan-tuggy"}, "edited": false, "score": 0, "creation_date": 1446688069, "post_id": 33523004, "comment_id": 54851968, "body": "I can&#39;t tell for sure if this is supposed to be an answer, but the comments suggest it&#39;s not finished. If you have another question, please ask it by clicking the <a href=\"http://stackoverflow.com/questions/ask\">Ask Question</a> button; you may want to include a link to this one for context. Or, once you gain a bit more rep, <a href=\"http://stackoverflow.com/privileges/comment\">you will be able to post comments</a>. Until then, please do not use answers as a workaround."}, {"owner": {"reputation": 1, "user_id": 5524866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0e1a93647af4f054befa65b1ce9153?s=128&d=identicon&r=PG", "display_name": "JanieSG", "link": "https://stackoverflow.com/users/5524866/janiesg"}, "reply_to_user": {"reputation": 2240, "user_id": 4099598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc50a32e3a3dffad460e83c0e02f6ba?s=128&d=identicon&r=PG", "display_name": "Nathan Tuggy", "link": "https://stackoverflow.com/users/4099598/nathan-tuggy"}, "edited": false, "score": 0, "creation_date": 1446728504, "post_id": 33523004, "comment_id": 54870118, "body": "Hi I&#39;m a newbie coder and to this site - I did include some text for help on why my solution above seems to return correctly to the console but threw up an error message. However, the post above would only accept code and did not accept my #comment#. I&#39;ll try and figure out how this sites works."}], "tags": [], "owner": {"reputation": 1, "user_id": 5524866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0e1a93647af4f054befa65b1ce9153?s=128&d=identicon&r=PG", "display_name": "JanieSG", "link": "https://stackoverflow.com/users/5524866/janiesg"}, "is_accepted": false, "score": 0, "last_activity_date": 1446643220, "creation_date": 1446643220, "answer_id": 33523004, "question_id": 33380176, "link": "https://stackoverflow.com/questions/33380176/converting-strings-to-symbols-and-pushing-them-into-an-array/33523004#33523004", "title": "Converting strings to symbols and &quot;.push&quot;ing them into an array", "body": "<pre><code>strings = [\"HTML\", \"CSS\", \"JavaScript\", \"Python\", \"Ruby\"]\nsymbols=[]\nstrings.each do |word|\n   word.downcase!\n     if word.include? \"s\"\n    symbols.push(\"s\".to_sym)\n   end\nend\nprint symbols\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4736246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-mhbuHEs1VhM/AAAAAAAAAAI/AAAAAAAAABo/WVNd8io-KdQ/photo.jpg?sz=128", "display_name": "Walter Straub", "link": "https://stackoverflow.com/users/4736246/walter-straub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1530, "favorite_count": 0, "accepted_answer_id": 33380233, "answer_count": 4, "score": 1, "last_activity_date": 1490271828, "creation_date": 1445987831, "question_id": 33380176, "link": "https://stackoverflow.com/questions/33380176/converting-strings-to-symbols-and-pushing-them-into-an-array", "title": "Converting strings to symbols and &quot;.push&quot;ing them into an array", "body": "<p>This is from a Codecademy lesson and I am aware people have asked about it on here, but I want to see what is wrong with my solution in particular. Here is what they start you out with:</p>\n\n<pre><code>strings = [\"HTML\", \"CSS\", \"JavaScript\", \"Python\", \"Ruby\"]\n\n# Add your code below!\n</code></pre>\n\n<p>Here are the instructions:</p>\n\n<blockquote>\n  <p>We have an array of strings we'd like to later use as hash keys, but we'd rather they be symbols.</p>\n  \n  <p>Create a new variable, symbols, and store an empty array in it. Use\n  .each to iterate over the strings array. For each s in strings, use\n  .to_sym to convert s to a symbol and use .push to add that new symbol\n  to symbols.</p>\n</blockquote>\n\n<p>I apologize as the formatting did not copy over prefectly, but you get the idea. <br>\nHere is my solution:</p>\n\n<pre><code>strings = [\"HTML\", \"CSS\", \"JavaScript\", \"Python\", \"Ruby\"]\n\n# Add your code below!\n\nsymbols = []\nstrings.each do |s|\n    s.to_sym\n    symbols.push(s)\nend\n</code></pre>\n\n<p>Upon submitting this, I get the error that I did not correctly convert the string to a symbol.</p>\n"}, {"tags": ["ruby"], "owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445986522, "creation_date": 1445986522, "question_id": 33379950, "link": "https://stackoverflow.com/questions/33379950/do-suggested-edits-to-the-ruby-toolbox-get-incorporated", "title": "Do suggested edits to the Ruby toolbox get incorporated?", "body": "<p>I made a suggested edit to Ruby toolbox this morning (<a href=\"https://www.ruby-toolbox.com/modifications/2043\" rel=\"nofollow\">https://www.ruby-toolbox.com/modifications/2043</a>). However, subsequent to that, I came across an unrelated suggested edit that was made slightly over a year ago (<a href=\"https://www.ruby-toolbox.com/modifications/1676\" rel=\"nofollow\">https://www.ruby-toolbox.com/modifications/1676</a>, made October 9 2014) that hasn't been dealt with.</p>\n\n<p>Do suggested edits get incorporated into the Ruby toolbox?</p>\n"}, {"tags": ["ruby", "hash", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 324, "user_id": 4200881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6bf1487db86e403d714589bf9894284a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Datoni", "link": "https://stackoverflow.com/users/4200881/mark-datoni"}, "edited": false, "score": 0, "creation_date": 1446001251, "post_id": 33379876, "comment_id": 54557932, "body": "So i feel a little better because I had actually tried a couple of these. I get the following error when I try the second one in your list.       Failure/Error: expect(subject.first.has_key?(:revenue)).to be_truthy      NoMethodError: undefined method `has_key?&#39; for #&lt;Array:0x007fec35b5c830&gt;"}, {"owner": {"reputation": 1907, "user_id": 2639561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09febafdea197434b97fd7762c32037c?s=128&d=identicon&r=PG", "display_name": "wspurgin", "link": "https://stackoverflow.com/users/2639561/wspurgin"}, "reply_to_user": {"reputation": 324, "user_id": 4200881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6bf1487db86e403d714589bf9894284a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Datoni", "link": "https://stackoverflow.com/users/4200881/mark-datoni"}, "edited": false, "score": 0, "creation_date": 1446002624, "post_id": 33379876, "comment_id": 54558267, "body": "Looks like it should be <code>subject[:data].first</code>"}], "tags": [], "owner": {"reputation": 1907, "user_id": 2639561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09febafdea197434b97fd7762c32037c?s=128&d=identicon&r=PG", "display_name": "wspurgin", "link": "https://stackoverflow.com/users/2639561/wspurgin"}, "is_accepted": false, "score": 5, "last_activity_date": 1446003461, "last_edit_date": 1495540717, "creation_date": 1445986166, "answer_id": 33379876, "question_id": 33379775, "link": "https://stackoverflow.com/questions/33379775/how-to-test-with-rspec-that-a-key-exists-inside-a-hash-that-contains-an-array-of/33379876#33379876", "title": "How to test with Rspec that a key exists inside a hash that contains an array of hashes", "body": "<p>If you explicitly want to test <strong>only</strong> the <strong>first hash</strong> in your array mapped to <code>:data</code>, here are your <code>expect</code>s given what you wrote above:</p>\n\n<pre><code>data = subject[:data].first\nexpect(data).not_to be_nil\nexpect(data.has_key?(:revenue)).to be_truthy\nexpect(data[:revenue]).to eq 600\n</code></pre>\n\n<p>Alternatively, for the second expectation, you could use <code>expect(data).to have_key(:revenue)</code> as Chris Heald pointed out in <a href=\"https://stackoverflow.com/a/33379968/2639561\">his answer</a> which has a much nicer failure message as seen in the comments.</p>\n\n<ol>\n<li>The first \"expectation\" test if the subject has the <em>first hash</em>. (You could alternately test if the array is <code>empty?</code>)</li>\n<li>The next expectation is testing if the <em>first hash</em> has the key <code>:revenue</code></li>\n<li>The last expectation tests if the <em>first hash</em> <code>:revenue</code> value is equal to 600</li>\n</ol>\n\n<p>You should <a href=\"http://rspec.info/\" rel=\"nofollow noreferrer\">read up on RSpec</a>, it's a very powerful and usefull testing framework.</p>\n"}, {"comments": [{"owner": {"reputation": 324, "user_id": 4200881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6bf1487db86e403d714589bf9894284a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Datoni", "link": "https://stackoverflow.com/users/4200881/mark-datoni"}, "edited": false, "score": 0, "creation_date": 1446001522, "post_id": 33379968, "comment_id": 54558000, "body": "I get the following when I try this example --------              Failure/Error: expect(subject.first).to have_key(:revenue)        expected [&quot;data&quot;, [{&quot;product&quot;=&gt;&quot;PRODUCTA&quot;, &quot;orders&quot;=&gt;3, &quot;ordered&quot;=&gt;13596, &quot;revenue&quot;=&gt;600.0}, {&quot;product&quot;=&gt;&quot;PRODUCTB&quot;, &quot;orders&quot;=&gt;1, &quot;ordered&quot;=&gt;2568, &quot;revenue&quot;=&gt;100.0}]] to respond to <code>has_key?</code>"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 324, "user_id": 4200881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6bf1487db86e403d714589bf9894284a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Datoni", "link": "https://stackoverflow.com/users/4200881/mark-datoni"}, "edited": false, "score": 0, "creation_date": 1446010239, "post_id": 33379968, "comment_id": 54560419, "body": "You want subject to be <code>subject { described_class.order_items_by_revenue[&quot;data&quot;] }</code>, or you want to test <code>subject[&quot;data&quot;].first</code>. Sorry."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 35, "last_activity_date": 1445986659, "creation_date": 1445986659, "answer_id": 33379968, "question_id": 33379775, "link": "https://stackoverflow.com/questions/33379775/how-to-test-with-rspec-that-a-key-exists-inside-a-hash-that-contains-an-array-of/33379968#33379968", "title": "How to test with Rspec that a key exists inside a hash that contains an array of hashes", "body": "<p>RSpec allows you to use the <a href=\"https://www.relishapp.com/rspec/rspec-expectations/v/2-5/docs/built-in-matchers/predicate-matchers#should-have-key-(based-on-hash#has-key?)\" rel=\"noreferrer\">have_key</a> predicate matcher to validate the presence of a key via <code>has_key?</code>, like so:</p>\n\n<pre><code>subject { described_class.order_items_by_revenue }\n\nit \"includes revenue key\" do\n  expect(subject.first).to have_key(:revenue)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1879, "user_id": 6509321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzIAG.jpg?s=128&g=1", "display_name": "Purkhalo Alex", "link": "https://stackoverflow.com/users/6509321/purkhalo-alex"}, "is_accepted": false, "score": 5, "last_activity_date": 1523528655, "creation_date": 1523528655, "answer_id": 49794105, "question_id": 33379775, "link": "https://stackoverflow.com/questions/33379775/how-to-test-with-rspec-that-a-key-exists-inside-a-hash-that-contains-an-array-of/49794105#49794105", "title": "How to test with Rspec that a key exists inside a hash that contains an array of hashes", "body": "<p>This issue can be solved via testing of each hash by key existing with appropriate type of value. For example:</p>\n\n<pre><code>describe 'GetCatsService' do\n  subject { [{ name: 'Felix', age: 25 }, { name: 'Garfield', age: 40 }] }\n\n  it { is_expected.to include(include(name: a_kind_of(String), age: a_kind_of(Integer)))}\nend\n\n# GetCatsService\n#  should include (include {:name =&gt; (a kind of String), :age =&gt; (a kind of Integer)})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 403, "user_id": 4034806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55f58f4a7e64e4c118a1de7ffcc2681d?s=128&d=identicon&r=PG", "display_name": "Sohair Ahmad", "link": "https://stackoverflow.com/users/4034806/sohair-ahmad"}, "is_accepted": false, "score": 2, "last_activity_date": 1578250476, "creation_date": 1578250476, "answer_id": 59603164, "question_id": 33379775, "link": "https://stackoverflow.com/questions/33379775/how-to-test-with-rspec-that-a-key-exists-inside-a-hash-that-contains-an-array-of/59603164#59603164", "title": "How to test with Rspec that a key exists inside a hash that contains an array of hashes", "body": "<p>this works for me in <code>'rspec-rails', '~&gt; 3.6'</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>array_of_hashes = [\n  {\n    id: \"1356786826\",\n    contact_name: 'John Doe'\n  }\n]\n\nexpect(array_of_hashes).to include(have_key(:id))\n</code></pre>\n"}], "owner": {"reputation": 324, "user_id": 4200881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6bf1487db86e403d714589bf9894284a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Datoni", "link": "https://stackoverflow.com/users/4200881/mark-datoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25649, "favorite_count": 1, "accepted_answer_id": 33379968, "answer_count": 4, "score": 28, "last_activity_date": 1578250476, "creation_date": 1445985652, "last_edit_date": 1446392472, "question_id": 33379775, "link": "https://stackoverflow.com/questions/33379775/how-to-test-with-rspec-that-a-key-exists-inside-a-hash-that-contains-an-array-of", "title": "How to test with Rspec that a key exists inside a hash that contains an array of hashes", "body": "<p>I have a Model method that returns the following when executed.</p>\n\n<pre><code> {\"data\" =&gt; [\n {\"product\" =&gt; \"PRODUCTA\", \"orders\" =&gt; 3, \"ordered\" =&gt; 6, \"revenue\" =&gt; 600.0},\n {\"product\" =&gt; \"PRODUCTB\", \"orders\" =&gt; 1, \"ordered\" =&gt; 5, \"revenue\" =&gt; 100.0}]}\n</code></pre>\n\n<p>I would like to test to make sure that \"revenue\" in the first hash is there and then test that the value is equal to 600.</p>\n\n<pre><code>subject { described_class.order_items_by_revenue }\n\nit \"includes revenue key\" do\n  expect(subject).to include(:revenue)\nend\n</code></pre>\n\n<p>I am completely lost on how to test this with Rspec.</p>\n"}, {"tags": ["ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1445985258, "post_id": 33379630, "comment_id": 54553234, "body": "Can you show what you have so far?"}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1445985452, "post_id": 33379630, "comment_id": 54553305, "body": "@squiguy I added a small snippet. See if its ok"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 1, "creation_date": 1445985726, "post_id": 33379630, "comment_id": 54553425, "body": "<i>How can I make it return nil?</i> By catching the error in your code and returning nil.  OpenStruct isn&#39;t going to return nil, no matter how badly you want it to. <i>If I try the same thing with the original hash I get nil but not with OpenStruct!!</i>  Is it your understanding that OpenStruct is a Hash?  Because it&#39;s not.  Just because a class has an instance variable which is a Hash does not mean the class is a Hash."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1445986001, "post_id": 33379630, "comment_id": 54553531, "body": "Ok, I get your point but if I send <code>TXT</code> to some other program. I will have catch this error when ever I try to access values in it!!? I want to avoid that. Is there a way to override the getter function of OpenStruct??"}], "answers": [{"tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": true, "score": 2, "last_activity_date": 1445986120, "creation_date": 1445986120, "answer_id": 33379866, "question_id": 33379630, "link": "https://stackoverflow.com/questions/33379630/how-can-i-return-nil-if-a-key-does-not-exist-in-openstruct/33379866#33379866", "title": "How can I return nil if a key does not exist in OpenStruct?", "body": "<p>OpenStruct is not recursive. In this case <code>TXT.ftp</code> returns a Hash, not an OpenStruct, so <code>#lastname</code> is not defined. </p>\n\n<p>If you want, there is a library called <a href=\"https://github.com/aetherknight/recursive-open-struct\" rel=\"nofollow\">recursive-open-struct</a>. Use it like this:</p>\n\n<pre><code>require 'recursive-open-struct'\n\nTXT = RecursiveOpenStruct.new(TXT_HASH)\npp TXT.ftp.lastname #=&gt; nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1907, "user_id": 2639561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09febafdea197434b97fd7762c32037c?s=128&d=identicon&r=PG", "display_name": "wspurgin", "link": "https://stackoverflow.com/users/2639561/wspurgin"}, "edited": false, "score": 1, "creation_date": 1445992975, "post_id": 33380701, "comment_id": 54555758, "body": "Right on. Making a method to recursively make hashes <code>OpenStructs</code> is what I would&#39;ve done too. Doesn&#39;t require any modification to <code>OpenStruct</code>, external libraries, or messy rescuing."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 1907, "user_id": 2639561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09febafdea197434b97fd7762c32037c?s=128&d=identicon&r=PG", "display_name": "wspurgin", "link": "https://stackoverflow.com/users/2639561/wspurgin"}, "edited": false, "score": 0, "creation_date": 1446044006, "post_id": 33380701, "comment_id": 54579935, "body": "@wspurgin Now some things about <code>OpenStruct</code> make sense to me. Does it have a <code>getitem</code> functions that I can override? Suppose if I print <code>TXT</code> it shows a big <code>openstruct</code> object but I want to display it as a hash!! Is it even possible?"}, {"owner": {"reputation": 1907, "user_id": 2639561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09febafdea197434b97fd7762c32037c?s=128&d=identicon&r=PG", "display_name": "wspurgin", "link": "https://stackoverflow.com/users/2639561/wspurgin"}, "reply_to_user": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1446072993, "post_id": 33380701, "comment_id": 54597464, "body": "@AnimeshPandey For your first question, yes and no. It implements the <code>[]</code> operator, but for your purposes, you don&#39;t want to mess with that. <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/ostruct.rb\" rel=\"nofollow noreferrer\">Reading the source</a> might seem scary, but you can learn a lot from it. To answer your second question, if by &quot;display it&quot; you mean the output inside <code>irb</code> or the console, then yes you can change how it is output by modifying the <code>inspect</code> function. <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/ostruct.rb#L234-L255\" rel=\"nofollow noreferrer\">This is how they currently do it in 2.2.3</a>"}, {"owner": {"reputation": 1907, "user_id": 2639561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09febafdea197434b97fd7762c32037c?s=128&d=identicon&r=PG", "display_name": "wspurgin", "link": "https://stackoverflow.com/users/2639561/wspurgin"}, "reply_to_user": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1446073246, "post_id": 33380701, "comment_id": 54597575, "body": "@AnimeshPandey But I want to add this clarification, Why do you care how it looks? It&#39;s like saying &quot;I have this dog, that I want to behave like a chicken, but still look like a dog&quot;. If you want it to <i>look</i> like a dog, than make it a dog. If you want it to <i>behave</i> like a chicken, make it a chicken. <b>If you want both</b> make your <i>own</i> &quot;chickdog&quot; and stop trying to make a dog a chicken or a chicken a dog. In short, write <b>your own class</b> to do the <b>specific</b> things you want, and <b>don&#39;t force</b> the builtin <b>generic</b> classes to do it for you."}], "tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 2, "last_activity_date": 1445991868, "last_edit_date": 1445991868, "creation_date": 1445990861, "answer_id": 33380701, "question_id": 33379630, "link": "https://stackoverflow.com/questions/33379630/how-can-i-return-nil-if-a-key-does-not-exist-in-openstruct/33380701#33380701", "title": "How can I return nil if a key does not exist in OpenStruct?", "body": "<p>The answer given by <code>@Shel</code> would however be the best, simple and clean.</p>\n\n<blockquote>\n  <p><strong>Note:</strong><br>\n  If you do not want to require unnecessary library then there is another workaround to implement.<br>\n  Yes OpenStruct is not recursive yet we can create our own recursive method to do so.</p>\n</blockquote>\n\n<pre><code># This method is kind of factory to create OpenStruct instances\ndef get_recursive_ostruct(object)\n  if object.is_a?(Hash) \n    object = object.clone\n    object.each do |key, value|\n      object[key] = get_recursive_ostruct(value)\n    end\n    OpenStruct.new(object)\n  else\n    object\n  end\nend\n</code></pre>\n\n<p>and to use this method</p>\n\n<pre><code>require 'ostruct'\n\nhash = {first: 'this is first', second: {first: 'first of second', second: 'second of second'}}\n\nobj = get_recursive_ostruct(hash)\n#=&gt;  #&lt;OpenStruct first=\"this is first\", second=#&lt;OpenStruct first=\"first of second\", second=\"second of second\"&gt;&gt; \n\nobj.second.second\n#=&gt; \"second of second\" \n\nobj.second.third\n#=&gt; nil \n</code></pre>\n\n<p>Moreover, if you want object not to return exception then there is a few workarounds as well.</p>\n\n<pre><code>TXT.ftp.lastname  ## raises NoMethodError \nTXT.ftp.try(:lastname)  ## returns nil if `lastname` is not available\n\nTXT.try(:ftp).try(:lastname)  ## returns nil even if `ftp` is not available\n</code></pre>\n\n<blockquote>\n  <p><strong>Note:</strong><br>\n  As far as I know, <code>try</code> method is only available inside <code>Rails</code> app not in <code>IRB</code> or <code>ruby</code> apps.</p>\n  \n  <p>I would use: <code>rescue</code> method<br>\n  <strong>Caution:</strong> this method catches exceptions and responds accordingly; Don't use this if you need to respond to exceptions differently. I hope you understand</p>\n</blockquote>\n\n<pre><code>TXT.ftp.lastname rescue nil # respond with default value i.e. nil\nTXT.ftp.lastname rescue '' # respond with default value i.e. ''\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9046, "user_id": 400545, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cad64a643120299e1dd1856451e64e32?s=128&d=identicon&r=PG", "display_name": "Jerome Dalbert", "link": "https://stackoverflow.com/users/400545/jerome-dalbert"}, "is_accepted": false, "score": 0, "last_activity_date": 1445998776, "creation_date": 1445998776, "answer_id": 33381834, "question_id": 33379630, "link": "https://stackoverflow.com/questions/33379630/how-can-i-return-nil-if-a-key-does-not-exist-in-openstruct/33381834#33381834", "title": "How can I return nil if a key does not exist in OpenStruct?", "body": "<p>If you want a recursive OpenStruct, another alternative is to use <a href=\"https://github.com/intridea/hashie#mash\" rel=\"nofollow\">Mash</a> from the <a href=\"https://github.com/intridea/hashie\" rel=\"nofollow\">hashie</a> gem:</p>\n\n<pre><code>require 'hashie'\n\ntext = Hashie::Mash.new(text_hash)\np text.ftp.lastname #=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1218, "favorite_count": 0, "accepted_answer_id": 33379866, "answer_count": 3, "score": 4, "last_activity_date": 1445998776, "creation_date": 1445985062, "last_edit_date": 1445987033, "question_id": 33379630, "link": "https://stackoverflow.com/questions/33379630/how-can-i-return-nil-if-a-key-does-not-exist-in-openstruct", "title": "How can I return nil if a key does not exist in OpenStruct?", "body": "<p>I have a hash that passed to <code>OpenStruct</code> in order to make it word with a <code>.</code>. This works perfectly. But when ever I try to access a key that does not exist <code>undefined method &lt;unknown key&gt; for #&lt;Hash:0x7f24ea884210&gt; (NoMethodError)</code> is raised. How can I make it return <code>nil</code>?</p>\n\n<p>If I try the same thing with the original hash I get <code>nil</code> but not with <code>OpenStruct</code>!!</p>\n\n<p>The snippet from the program:</p>\n\n<pre><code>TXT_HASH = load_data(\"test.txt\")\npp TXT_HASH[:ftp][:lastname]  ## print nil as lastname does not exist\n\nTXT = OpenStruct.new(TXT_HASH)\npp TXT.ftp.lastname  ## raises NoMethodError ## Can it return nil?\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms", "form-for"], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1445997769, "post_id": 33380071, "comment_id": 54557058, "body": "This is a great start! I&#39;ve been fiddling around with it for a while but haven&#39;t been able to get it to render my partial view for some reason, but I&#39;ll keep looking at it"}, {"owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1445998695, "post_id": 33380071, "comment_id": 54557285, "body": "No it just wasn&#39;t rendering, but I figured it out now. I didn&#39;t realize the partial naming convention was very important, as well as including the class <code>nested-fields</code>, and finally the <code>add_association_link</code> needed to be after the field for the <code>fields_for</code> section."}, {"owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1445999546, "post_id": 33380071, "comment_id": 54557502, "body": "Well now I am getting an error. I get <code>wrong number of arguments (0 for 1..2)</code> when my partial is simply <code>&lt;div class=&quot;nested-fields&quot;&gt;   &lt;%= t.input :quantity %&gt;   &lt;%= link_to_remove_association &quot;delete&quot;, p %&gt; &lt;&#47;div&gt;</code>  It says the error is line <code>t.input :quantity</code>"}, {"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 1, "creation_date": 1446001127, "post_id": 33380071, "comment_id": 54557908, "body": "Am I totally off? I don&#39;t think you can use <code>f.input</code> with straight Rails. That&#39;s Simple Form syntax, right?"}, {"owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1446001324, "post_id": 33380071, "comment_id": 54557950, "body": "I think that may be the case. I&#39;ve changed it to <code>&lt;%=link_to_add_association &#39;add pizza_order&#39;, order_form, :pizza_orders%&gt;</code> and the new problem that arises is <code>undefined local variable or method order_form</code> when the partial is trying to use  <code>&lt;%= order_form.label :quantity %&gt;</code>"}, {"owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "reply_to_user": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1446002375, "post_id": 33380071, "comment_id": 54558204, "body": "@DillonDrobena Lanny is right, I forgot what using just the basic rails form requires. If I were you, I&#39;d add the simple form gem so that you don&#39;t have to screw around with specifying your data types. Simple_form looks at your database to automatically set the datatype in your form. If you prefer to do it without the extra gem, just change .input in your fields accordingly. I&#39;ll add the link at the top."}, {"owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1446002733, "post_id": 33380071, "comment_id": 54558292, "body": "I&#39;ll try the simple_form gem. I tried just using the straightforward <code>label</code> <code>text_field</code> but the issue was the actual variable I was trying to pass between partials. In this case its the <code>order_form</code> variable"}, {"owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "reply_to_user": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1446011906, "post_id": 33380071, "comment_id": 54560976, "body": "@DillonDrobena I&#39;m not sure what might be wrong as I don&#39;t see your code. If you want, feel free to post your code in a gist (<a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist.github.com</a>) or pastie (<a href=\"http://pastie.org/\" rel=\"nofollow noreferrer\">pastie.org</a>) or something and send me a link.  I&#39;ll take a look."}, {"owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1446037095, "post_id": 33380071, "comment_id": 54574729, "body": "Well I fixed it...this gem has been a bit frustrating. Apparently its important to keep your formbuilder named <code>f</code> as shown in the github examples. Once I changed my variable name to <code>f</code> it started working again. This gem feels a bit restrictive"}, {"owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "reply_to_user": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "edited": false, "score": 0, "creation_date": 1446070101, "post_id": 33380071, "comment_id": 54596311, "body": "@DillonDrobena glad to hear it&#39;s working!  Cocoon can be a bit restrictive; it also doesn&#39;t play ball with asynchronicity.... BUT it&#39;s better than writing it from scratch as far as I&#39;m concerned.  Take care!"}], "tags": [], "owner": {"reputation": 2321, "user_id": 2540204, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61eRS.jpg?s=128&g=1", "display_name": "neanderslob", "link": "https://stackoverflow.com/users/2540204/neanderslob"}, "is_accepted": true, "score": 2, "last_activity_date": 1446002299, "last_edit_date": 1446002299, "creation_date": 1445987201, "answer_id": 33380071, "question_id": 33379546, "link": "https://stackoverflow.com/questions/33379546/ruby-on-rails-complex-form-generation/33380071#33380071", "title": "Ruby on Rails: Complex Form Generation", "body": "<p>If I'm understanding your plight correctly, this is a job for Cocoon!  Cocoon allows you to generate dynamic nested fields (as many as you want).</p>\n\n<p><strong>So what I'd do is:</strong></p>\n\n<p><a href=\"https://rubygems.org/gems/cocoon\" rel=\"nofollow\">install the cocoon gem</a></p>\n\n<p>Watch <a href=\"https://www.youtube.com/watch?v=QhdzE1yNs-0\" rel=\"nofollow\">this video</a> You can fast forward to where he's showing how to dynamically add ingredients to recipes but really this entire tutorial is a FANTASTIC reference that will save you lots of googling. </p>\n\n<p>Then in your pizza order view, render a partial (just as you said) only do it with cocoon.</p>\n\n<pre><code>&lt;%= simple_form_for @order do |t| %&gt;\n  &lt;%= t.simple_fields_for :pizza_orders do |po| %&gt;\n        &lt;%= render 'order_fields', p: po %&gt;\n  &lt;% end%&gt;\n    &lt;div class=\"add-field\"&gt;&lt;%= link_to_add_association 'Add Pizza Order', t, :pizza_orders %&gt;&lt;/div&gt;\n\n  &lt;!--Insert new pizza_orders after marker --&gt;\n  &lt;span id=\"marker\"&gt;&lt;/span&gt;\n  &lt;%= button_tag \"New Order\", :type =&gt; 'button', :id =&gt; 'test' %&gt;\n  &lt;%= t.submit \"Place Order\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then create the partial <code>_order_fields.html.erb</code> and put whatever fields you need as follows:</p>\n\n<pre><code>&lt;div class=\"nested-fields\"&gt;\n  &lt;%= p.input :order_field1 %&gt;\n  &lt;%= p.input :order_field2 %&gt;\n  &lt;%= p.input :order_field3 %&gt;\n  &lt;%= link_to_remove_association \"Delete\", p %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Remember to do your strong params just like any other nesting and you should be all set!  Also make sure the parent model <code>accepts_nested_attributes_for</code> the child and is allowed to destroy it.</p>\n\n<p><strong>Now, regarding the rest of your code:</strong>\nI think you might be making your models overly complicated.  While I don't know the fields you're dealing with my intuition is that your use of polymorphic associations is unnecessary.<br>\nAt a glance I would set it up like this\n<strong>Two, maybe three models:</strong></p>\n\n<ol>\n<li>Order</li>\n<li>Pizza</li>\n<li>Toppings? (another use for cocoon)</li>\n</ol>\n\n<p><code>Order</code> would <code>has_many :pizzas</code></p>\n\n<p>Data about crust type, price of the pizza would be saved within each pizza's model.  Like so: <code>rails g model Pizza price:decimal crust:string type:string</code>.  If it's a special, let the type be \"special.\"</p>\n\n<p>Extra model associations muddies your code, hinders you from using available tools and may lead to increased blood pressure.  Pizza is one of life's simple pleasures and should be left unburdened by polymorphic associations; for the sake of yourself, don't over-complicate it. :-D</p>\n\n<h1>Edit</h1>\n\n<p>You will need the <a href=\"https://rubygems.org/gems/simple_form\" rel=\"nofollow\">Simple Forms gem</a> to copy what I have above directly.  (I highly recommend it.)  Please note that you will need to change <code>form_for</code> to <code>simple_form_for</code> and <code>fields_for</code> to <code>simple_fields_for</code>.</p>\n"}], "owner": {"reputation": 625, "user_id": 3998639, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001770495525/picture?type=large", "display_name": "Dillon Drobena", "link": "https://stackoverflow.com/users/3998639/dillon-drobena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 33380071, "answer_count": 1, "score": 1, "last_activity_date": 1446002299, "creation_date": 1445984691, "question_id": 33379546, "link": "https://stackoverflow.com/questions/33379546/ruby-on-rails-complex-form-generation", "title": "Ruby on Rails: Complex Form Generation", "body": "<p>So I'm fairly new with Rails and I'm trying to figure out the best way of generation a complex form. The basic idea is that a user places an <code>order</code>, each <code>order</code> is made up of one or more <code>pizza_order</code>, each <code>pizza_order</code> consists of either a <code>special</code> pizza or just a <code>pizza</code>. The main issue I'm having right now is how do I generate a dynamic form where the user can consistently generate an arbitrary amount of new <code>pizza_order</code> models?</p>\n\n<p>My thought was to have a button that they would press, and each time the button is pressed to render a partial view that consists of the fields necessary for a new <code>pizza_order</code>. When the user presses submit the <code>order</code> is generated, along with an array of new <code>pizza_order</code> models that are associated with that <code>order</code>. These are what my models look like so far.</p>\n\n<p><strong>Order</strong></p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  belongs_to :user\n  has_many :pizza_orders\n  accepts_nested_attributes_for :pizza_orders\nend\n</code></pre>\n\n<p><strong>Pizza Order</strong></p>\n\n<pre><code>class PizzaOrder &lt; ActiveRecord::Base\n  belongs_to :pizza, polymorphic: true\n  belongs_to :order\nend\n</code></pre>\n\n<p><strong>Pizza</strong></p>\n\n<pre><code>class Pizza &lt; ActiveRecord::Base\n  has_and_belongs_to_many :toppings\n  has_many :pizza_orders, as: :pizza\n  belongs_to :crust\n  validates :crust, presence: true\nend\n</code></pre>\n\n<p><strong>Special</strong></p>\n\n<pre><code>class Special &lt; ActiveRecord::Base\n  belongs_to :pizza\n  validates :pizza, :presence =&gt; true\n  validates :cost, :presence =&gt; true\nend\n</code></pre>\n\n<p>I'm fairly lost on what the controller and view will look like, so far this is the general layout for my view, I'll worry about filling in the attributes later, I'm more concerned with getting the proper rails fields set up.</p>\n\n<pre><code>&lt;%= form_for @order do |t| %&gt;\n  &lt;%= t.fields_for t.pizza_orders do |po| %&gt;\n  &lt;% end%&gt;\n\n  &lt;!--Insert new pizza_orders after marker --&gt;\n  &lt;span id=\"marker\"&gt;&lt;/span&gt;\n  &lt;%= button_tag \"New Order\", :type =&gt; 'button', :id =&gt; 'test' %&gt;\n  &lt;%= t.submit \"Place Order\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "webdriver"], "comments": [{"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1446002871, "post_id": 33379491, "comment_id": 54558339, "body": "This is not a programming question. This is something that you should investigate on the Eclipse site or be asking on their support forums."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1445985949, "post_id": 33379725, "comment_id": 54553510, "body": "All of those fancy features that you claim don&#39;t work with dynamic languages were <i>invented</i> in IDEs for dynamic languages. Eclipse started out as a Java port of VisualAge for Smalltalk, after all, and most if its features already existed there. IDEs for static languages are still behind modern Smalltalk IDEs. The reason why it doesn&#39;t work for Ruby is because nobody has invested money in making it work. Millions have been spent for Smalltalk and Java IDEs, which is why Smalltalk and Java IDEs are quite good. Haskell has even more type information available than Java, yet its IDEs are a lot \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1445986039, "post_id": 33379725, "comment_id": 54553545, "body": "\u2026 less powerful. Why? Because IBM, Microsoft, Oracle, JetBrains, Embarcadero don&#39;t invest in it, not because Haskell somehow lacks the static type information (that would be ridiculous). Haskell doesn&#39;t even have subtyping!"}, {"owner": {"reputation": 211, "user_id": 688999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a6ff90e2fd05caf377e84f398bf64b?s=128&d=identicon&r=PG", "display_name": "smithkm", "link": "https://stackoverflow.com/users/688999/smithkm"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1445986809, "post_id": 33379725, "comment_id": 54553815, "body": "My point is that static analysis of dynamic languages is both much harder to do and the scope of what&#39;s possible is much smaller.   I&#39;m not at all saying dynamic languages are bad,  I love Ruby, it&#39;s just that it&#39;s much more effort for a much smaller return when it comes to realtime static analysis features in an IDE.  That Java is a more heavily used and older language is certainly also a factor."}], "tags": [], "owner": {"reputation": 211, "user_id": 688999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a6ff90e2fd05caf377e84f398bf64b?s=128&d=identicon&r=PG", "display_name": "smithkm", "link": "https://stackoverflow.com/users/688999/smithkm"}, "is_accepted": false, "score": 0, "last_activity_date": 1445988716, "last_edit_date": 1495541030, "creation_date": 1445985453, "answer_id": 33379725, "question_id": 33379491, "link": "https://stackoverflow.com/questions/33379491/ruby-how-to-get-suggestions-method-like-java-in-eclipse/33379725#33379725", "title": "Ruby -How to get suggestions method like java in eclipse", "body": "<p>Values in a statically typed language like Java have a fixed type that the editor can figure out by looking at the code.  Values in a dynamically typed language like Ruby could be pretty much anything.  In a very rough sense think of Ruby as being like only using the <code>Object</code> type for all variables, parameters, and return types, and then invoking all methods via <a href=\"https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string\">reflection</a>.  </p>\n\n<p>That's why fancy Eclipse features like autocomplete, call heirarchy, and automatic refactoring don't work with reflection, and also why Eclipse doesn't generally provide them for dynamic languages, or does so in much more limited fashion. You can make them work some of the time using a lot of clever heuristics but they will break more readily than the analysis of a static language and be far more complicated to implement than the equivalent tools to do the same analysis of a static language.</p>\n\n<p>Java is also simply older and more heavily used than Ruby so there has been more effort put into tools to do static analysis on Java code.</p>\n\n<p>Ruby is also a particularly difficult language to do this sort of thing for even compared to some other dynamic languages as it has tricks like the <code>missing_method</code> and <code>responds_to_missing?</code> methods that allow the methods the object knows how to respond to to be determined when the call is made.  I'm not as familiar with Python as I am with Ruby but I don't think it allows that sort of thing so it might be a bit easier to autocomplete for than Ruby.  (On the other hand the Ruby way of doing things allows for some very interesting dynamic delegation)</p>\n"}], "owner": {"reputation": 1, "user_id": 4767271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9fddeed8cf6f9788a0c7d80c1d64f9a?s=128&d=identicon&r=PG&f=1", "display_name": "sambeet nayak", "link": "https://stackoverflow.com/users/4767271/sambeet-nayak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1445988716, "creation_date": 1445984381, "question_id": 33379491, "link": "https://stackoverflow.com/questions/33379491/ruby-how-to-get-suggestions-method-like-java-in-eclipse", "title": "Ruby -How to get suggestions method like java in eclipse", "body": "<p>Like eclipse java when we type \".\" All the available methods and variable displayed .can the same thing possible in Ruby eclipse (external library methods)</p>\n"}, {"tags": ["ruby", "math", "infinity", "largenumber"], "comments": [{"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 2, "creation_date": 1445984248, "post_id": 33379323, "comment_id": 54552856, "body": "I don&#39;t think the answer <i>is</i> <code>1.005025</code>: it&#39;s significantly larger than that. Did you mean <code>1.005025e+200</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4860983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c061684728016bdf7810d6eb63950b?s=128&d=identicon&r=PG&f=1", "display_name": "GlenB", "link": "https://stackoverflow.com/users/4860983/glenb"}, "is_accepted": false, "score": 2, "last_activity_date": 1445984862, "last_edit_date": 1445984862, "creation_date": 1445984552, "answer_id": 33379513, "question_id": 33379323, "link": "https://stackoverflow.com/questions/33379323/handling-numbers-near-infinity-large-and-small/33379513#33379513", "title": "Handling numbers near infinity (large and small)", "body": "<p>After some playing around I believe your problem comes from autopromotion of the second number to perform float arithmetic.</p>\n\n<pre><code>puts \"Original math\"\nz = 1.2679769534809603e-175 * 792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313\nputs z\n</code></pre>\n\n<p>Infinity</p>\n\n<pre><code>puts\nputs \"Save variables individually and inspect\" \nx = 1.2679769534809603e-175\ny = 792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313\nputs x\n</code></pre>\n\n<p>1.2679769534809603e-175</p>\n\n<pre><code>puts y\n</code></pre>\n\n<p>792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313</p>\n\n<pre><code>z = x * y\nputs z\n</code></pre>\n\n<p>Infinity</p>\n\n<pre><code>puts \"What? none of the numbers was Infinity??\"\n\nputs \"Or was it?? auto promoted y\"\ny = 792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313.0\nputs y\n</code></pre>\n\n<p>Infinity</p>\n\n<p>In most languages anything * Infinity = +- infinity</p>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": true, "score": 2, "last_activity_date": 1445985695, "creation_date": 1445985695, "answer_id": 33379785, "question_id": 33379323, "link": "https://stackoverflow.com/questions/33379323/handling-numbers-near-infinity-large-and-small/33379785#33379785", "title": "Handling numbers near infinity (large and small)", "body": "<p>If you want to minimize precision issues, go Rational.</p>\n\n<pre><code>irb(main):001:0&gt; a = 1.2679769534809603e-175.to_r\n=&gt; (4519585589664361/35644067325173400145634153169533525975728347712879374457649941546088087243817792082077443838416964060770643043543706307114755505635745609361348916560329798345718708393439569922522454626926592)\nirb(main):002:0&gt; b = 792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313\n=&gt; 792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313\nirb(main):003:0&gt; a * b\n=&gt; (3582318778758723293544808766608477208802528713781684733988516016569614012687037578637365969280014511731955915723620354805192948677648150726285518854921630223111683624006805801219885647290056974705691181872855057825408797944671825308998484595184690885834492619019604611321846034964892047367198046135813425296123973237329110031154221763204044754826429491855167243281047603348342563725684284993/35644067325173400145634153169533525975728347712879374457649941546088087243817792082077443838416964060770643043543706307114755505635745609361348916560329798345718708393439569922522454626926592)\nirb(main):004:0&gt; (a * b).to_f\n=&gt; 1.005025253172702e+200\n</code></pre>\n"}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 33379785, "answer_count": 2, "score": 2, "last_activity_date": 1445986934, "creation_date": 1445983582, "last_edit_date": 1445986934, "question_id": 33379323, "link": "https://stackoverflow.com/questions/33379323/handling-numbers-near-infinity-large-and-small", "title": "Handling numbers near infinity (large and small)", "body": "<p>I'm trying to do this operation with <code>Ruby</code>:</p>\n\n<pre><code>1.2679769534809603e-175\n*\n792621072814943158937574954417696054502273470568077747007887743862285047941581535541498718312275086275679893343076013862361579680670972527976009279036348551929550827607601145450876014530359530008733947699274904382825445634899233107885545828612637824213482759975963581961375904743254634250508637523339809985946128242523687347261107994804323593105039052556442336528920420940313\n</code></pre>\n\n<p>I know the answer is <code>1.005025</code> (truncated to 6 decimal places), but I keep getting the above equation returning <code>infinity</code>. Why is that? I'm not going smaller than the first number, nor larger than the second number.</p>\n\n<p><em>So two questions</em>: Why is it returning infinity? And how could I get the correct answer to return? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6620, "user_id": 3238292, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/74e9b06481e2c4b20d7369e62b39a369?s=128&d=identicon&r=PG", "display_name": "sealocal", "link": "https://stackoverflow.com/users/3238292/sealocal"}, "edited": false, "score": 0, "creation_date": 1446016966, "post_id": 33379288, "comment_id": 54562877, "body": "I didn&#39;t say so in the questions, but it would be best if I could distinguish between starting the Rails console and starting the Rails server, so that the  output is only printed for starting the Rails server.  Further suggestions appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 2446, "user_id": 2369428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CToEN.jpg?s=128&g=1", "display_name": "yivo", "link": "https://stackoverflow.com/users/2369428/yivo"}, "is_accepted": true, "score": 1, "last_activity_date": 1445989475, "creation_date": 1445989475, "answer_id": 33380485, "question_id": 33379288, "link": "https://stackoverflow.com/questions/33379288/how-do-i-log-the-latest-git-commit-when-starting-a-rails-app/33380485#33380485", "title": "How do I log the latest Git commit when starting a Rails app?", "body": "<p>Just check if rake is running:  </p>\n\n<pre><code>running_rake = ::File.basename($0) == 'rake'\n\nunless running_rake\n  latest_commit = `git rev-parse HEAD`\n  STDOUT.puts \"**** latest commit: #{latest_commit}\"\nend\n</code></pre>\n\n<p>Also I recommend you to put this code somewhere else, for example in environment.rb. Initializers stay for different purposes.</p>\n"}], "owner": {"reputation": 6620, "user_id": 3238292, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/74e9b06481e2c4b20d7369e62b39a369?s=128&d=identicon&r=PG", "display_name": "sealocal", "link": "https://stackoverflow.com/users/3238292/sealocal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 33380485, "answer_count": 1, "score": 1, "last_activity_date": 1445989475, "creation_date": 1445983403, "question_id": 33379288, "link": "https://stackoverflow.com/questions/33379288/how-do-i-log-the-latest-git-commit-when-starting-a-rails-app", "title": "How do I log the latest Git commit when starting a Rails app?", "body": "<p>I want to log the latest Git commit when starting a Rails app.</p>\n\n<p>I've tried adding an initializer <code>config/initializers/latest_commit.rb</code>:</p>\n\n<pre><code>latest_commit = `git rev-parse HEAD`\nSTDOUT.puts \"**** latest commit: #{latest_commit}\"\n</code></pre>\n\n<p>The initializer is also run during rake tasks, but I do not want the message to be printed for rake tasks, so that rules out <code>config.after_initialize</code>.</p>\n\n<p>Is there an alternative?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1445982520, "post_id": 33378917, "comment_id": 54552136, "body": "&quot;<i>the string inside add_i! is a different string than the one passed in</i>&quot;. This is badly worded to imply <code>add_i!</code> is passed a copy of <code>string</code>. <code>string</code> in <code>add_i!</code> is the same object as passed in until <code>string = string + &quot;i&quot;</code>."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1445982550, "post_id": 33378917, "comment_id": 54552153, "body": "yup. lemme see if I can reword it"}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": true, "score": 4, "last_activity_date": 1445982616, "last_edit_date": 1445982616, "creation_date": 1445981752, "answer_id": 33378917, "question_id": 33378786, "link": "https://stackoverflow.com/questions/33378786/ruby-why-is-my-method-non-destructive/33378917#33378917", "title": "Ruby: Why is my method non-destructive?", "body": "<p>The answer lies in the scope of the vars and the behavior of the methods/operators. the left hand side (left to the = )<strong>string</strong> inside <strong>add_i!</strong> is a different <strong>string</strong> than the one passed in (the right side <strong>string</strong> and the method arg). The old string continues to live on but the string var points to the new one.</p>\n\n<p>to make the 2nd method \"destructive\" you could do something like: </p>\n\n<pre><code>def add!(string)\n  string &lt;&lt; \"i\"\nend\n</code></pre>\n\n<p>as a rule of the thumb, you need to understand if the methods/operators you are applying are operating on the data itself or are returning a copy of the data (for example the '+' upstairs returns a copy)</p>\n\n<p>an easy way of dealing with string and making sure you don't destroy the data is to use dup() on whatever is passed in and after that operate on the copy.</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1445982454, "creation_date": 1445982454, "answer_id": 33379087, "question_id": 33378786, "link": "https://stackoverflow.com/questions/33378786/ruby-why-is-my-method-non-destructive/33379087#33379087", "title": "Ruby: Why is my method non-destructive?", "body": "<p>The problem is <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-2B\" rel=\"nofollow\"><code>+</code> returns a copy of the string</a>.  I guess this is analgous to adding numbers which will return two numbers. <code>string += 'i'</code> also makes a copy. This a bit surprising, but it is the same as what numbers do.</p>\n\n<p>You can see this by checking the <code>object_id</code> at each point.</p>\n\n<pre><code>def add_i!(string)\n  puts \"string passed into add_i! #{string.object_id}\"\n  string = string + \"i\"\n  puts \"string in add_i after + i #{string.object_id}\"\nend\n\nfoo = \"blah\"\nputs \"string about to be passed into add_i! #{foo.object_id}\"\nadd_i!(foo)\nputs \"string after calling add_i! #{foo.object_id}\"\n\nstring about to be passed into add_i! 70364940039240\nstring passed into add_i! 70364940039240\nstring in add_i after + i 70364940039020\nstring after calling add_i! 70364940039240\n</code></pre>\n\n<p>Note that <code>string in add_i after + i</code> has a different object id.</p>\n\n<p><code>&lt;&lt;</code> and <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-2B\" rel=\"nofollow\"><code>concat</code></a> both append to the existing string. <code>concat</code> should probably be <code>concat!</code> but it isn't.</p>\n"}], "owner": {"reputation": 179, "user_id": 5115752, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/7tls6.jpg?s=128&g=1", "display_name": "Jacob Crofts", "link": "https://stackoverflow.com/users/5115752/jacob-crofts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 33378917, "answer_count": 2, "score": 3, "last_activity_date": 1445982616, "creation_date": 1445981242, "last_edit_date": 1445981516, "question_id": 33378786, "link": "https://stackoverflow.com/questions/33378786/ruby-why-is-my-method-non-destructive", "title": "Ruby: Why is my method non-destructive?", "body": "<p>I'm trying to create two methods, one of which will destructively add \"i\" to any string, and one of which will do the same non-destructively.</p>\n\n<pre><code>def add_i(string)\n  new_string = string + \"i\"\nend\n\ndef add_i!(string)\n  string = string + \"i\"\nend\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li><p>Both of these methods are non-destructive, even though I do not replace the argument in the second method with a new variable. Why?</p></li>\n<li><p>In general, how do I convert a non-destructive method into a destructive one and vice versa?</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1445983626, "post_id": 33378769, "comment_id": 54552604, "body": "If you don&#39;t know the keys in advance, what do you know? For example, are looking for a key whose value is an array?"}, {"owner": {"reputation": 757, "user_id": 2884386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f907321ae13599875a1942acbd3bde3e?s=128&d=identicon&r=PG&f=1", "display_name": "smargh", "link": "https://stackoverflow.com/users/2884386/smargh"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1445983725, "post_id": 33378769, "comment_id": 54552652, "body": "That there is a nested hash."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1445983790, "post_id": 33378769, "comment_id": 54552679, "body": "That is not clear, but in any event, you should edit the question rather than try to explain in comments."}], "owner": {"reputation": 757, "user_id": 2884386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f907321ae13599875a1942acbd3bde3e?s=128&d=identicon&r=PG&f=1", "display_name": "smargh", "link": "https://stackoverflow.com/users/2884386/smargh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1445981184, "creation_date": 1445981184, "question_id": 33378769, "link": "https://stackoverflow.com/questions/33378769/reverse-a-nested-array-in-ruby", "title": "Reverse a nested array in Ruby", "body": "<p>I'm attempting to take a JSON API response, with nested associated resources, and reverse the associations in a Rails app.</p>\n\n<p>So, imagine I get a response like this:</p>\n\n<pre><code>{\n  \"spenders\": [\n    {\n      \"id\": 1,\n      \"name\": \"John Doe\",\n      \"accounts\": [\n        {\n          \"id\": 1,\n          \"name\": \"Account One\"\n        },\n        {\n          \"id\": 2,\n          \"name\": \"Account Two\"\n        }\n      ]\n    },\n    {\n      \"id\": 2,\n      \"name\": \"Jane Doe\",\n      \"accounts\": [\n        {\n          \"id\": 1,\n          \"name\": \"Account One\"\n        },\n        {\n          \"id\": 3,\n          \"name\": \"Account Three\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n\n<p>My goal is to convert this into structure like this:</p>\n\n<pre><code>{\n  \"accounts\": [\n    {\n      \"id\": 1,\n      \"name\": \"Account One\",\n      \"spenders\": [\n        {\n          \"id\": 1,\n          \"name\": \"Stephen Margheim\"\n        },\n        {\n          \"id\": 2,\n          \"name\": \"Greg Barendt\"\n        }\n      ]\n    },\n    {\n      \"id\": 2,\n      \"name\": \"Account Two\",\n      \"spenders\": [\n        {\n          \"id\": 1,\n          \"name\": \"Stephen Margheim\"\n        }\n      ]\n    },\n    {\n      \"id\": 3,\n      \"name\": \"Account Three\",\n      \"spenders\": [\n        {\n          \"id\": 2,\n          \"name\": \"Greg Barendt\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n\n<p>Now, I can do this fairly well with iteration over the hash and building a new hash:</p>\n\n<pre><code>spenders_hash = {}\naccounts.each do |account|\n  account.spenders.each do |spender|\n    if spenders_hash.key? spender.id\n      spenders_hash[spender.id][:accounts] &lt;&lt; account\n    else\n      spenders_hash[spender.id] = hash_from_spender_and_account(spender, account)\n    end\n  end\nend\nspenders_hash\n\ndef hash_from_spender_and_account(spender, account)\n  {\n    id: spender.id,\n    name: spender.name,\n    accounts: [account],\n  }\nend\n</code></pre>\n\n<p>I'm hoping to find [1] a more flexible solution that isn't reliant on knowing the key names in advance and [2] hopefully more efficient.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 7, "creation_date": 1445980227, "post_id": 33378507, "comment_id": 54550968, "body": "Likely better to use an existing CSV gem. &quot;How&quot; is to write a CSV parser, which is more annoying than one might suspect."}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1445980346, "post_id": 33378507, "comment_id": 54551041, "body": "@DaveNewton thank you! I looked in the Ruby CSV library and &quot;string&quot;.parse_csv gives me what I&#39;m looking for."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1445999518, "post_id": 33378781, "comment_id": 54557497, "body": "From what I can see, <a href=\"http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/String.html\" rel=\"nofollow noreferrer\">String#parse_csv</a> has been depreciated (since v1.9.2), in which case you should use <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html#method-c-parse_line\" rel=\"nofollow noreferrer\">CSV::parse_line</a> (i.e., <code>require &#39;csv&#39;;  CSV.parse_line(&quot;\\&quot;hey, you\\&quot;, 21)</code>). Do you know if that&#39;s the case?."}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1446043860, "post_id": 33378781, "comment_id": 54579826, "body": "@CarySwoveland it looks like the String #parse_csv is still alive and kicking as of Ruby 2.2.3. <a href=\"http://www.rubydoc.info/stdlib/csv/String%3Aparse_csv\" rel=\"nofollow noreferrer\">rubydoc.info/stdlib/csv/String%3Aparse_csv</a> and <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.2.3/libdoc/csv/rdoc/CSV.html</a>"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1532969376, "post_id": 33378781, "comment_id": 90163425, "body": "@CarySwoveland I couldn&#39;t get <code>.parse_csv</code> to work in Ruby 2.5.1. I really think you should have entered your <code>CSV.parse_line</code> as a separate answer, and then you&#39;d get the credit for it that that answer deserves. Do so, and ping me back and I&#39;ll happily up vote it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1585851704, "post_id": 33378781, "comment_id": 107916943, "body": "@ReggieB, did you <code>require &#39;csv&#39;</code> (assuming you have a long memory). That causes <code>parse_csv</code> to be added to <code>String</code>&#39;s instance methods."}], "tags": [], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "is_accepted": true, "score": 7, "last_activity_date": 1464706280, "last_edit_date": 1464706280, "creation_date": 1445981222, "answer_id": 33378781, "question_id": 33378507, "link": "https://stackoverflow.com/questions/33378507/split-string-into-an-array-by-comma-unless-comma-is-inside-quotes/33378781#33378781", "title": "Split string into an array by comma, unless comma is inside quotes", "body": "<p>The Ruby standard CSV library's <code>.parse_csv</code>, does exactly this.</p>\n\n<pre><code>require 'csv'\n\"\\\"hey, you\\\", 21\".parse_csv\n# =&gt; [\"hey, you\", \" 21\"] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1532969510, "post_id": 33381921, "comment_id": 90163500, "body": "I&#39;d up vote this except it would seem to indicate that I was approving the complicated regex, whereas in fact I think <code>CSV.parse_line</code> is the best solution. I think you should split this answer in two (the regex version is interesting and may help in some conditions)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1532973535, "post_id": 33381921, "comment_id": 90165578, "body": "As to your first point, my view is that a code snippet--however complex--has value if it serves to help educate the reader, even if it does not represent the best way of addressing the question being asked. #2: while @steel&#39;s answer doesn&#39;t use <code>parse_line</code>, my comment on his answer should be sufficient to inform the reader of that method, which is all I care about. That comment, in my opinion, does not qualify as a separate answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1585851937, "last_edit_date": 1585851937, "creation_date": 1445999375, "answer_id": 33381921, "question_id": 33378507, "link": "https://stackoverflow.com/questions/33378507/split-string-into-an-array-by-comma-unless-comma-is-inside-quotes/33381921#33381921", "title": "Split string into an array by comma, unless comma is inside quotes", "body": "<p>Yes, using <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html#method-c-parse_line\" rel=\"nofollow noreferrer\">CSV::parse_line</a> or <code>String#parse_csv</code>, which <code>require 'csv'</code> adds to <code>String</code>'s instance methods) is the way to go here, but you could also do it with a regex:</p>\n\n<pre><code>r = /\n    (?:     # Begin non-capture group\n    (?&lt;=\\\") # Match a double-quote in a positive lookbehined\n    .+?     # Match one or more characters lazily\n    (?=\\\")  # Match a double quote in a positive lookahead.\n    )       # End non-capture group\n    |       # Or\n    \\s\\d+   # Match a whitespace character followed by one or more digits\n    /x      # Extended mode\n\nstr = \"\\\"hey, you\\\", 21\"\nstr.scan(r)\n  #=&gt; [\"hey, you\", \" 21\"]\n</code></pre>\n\n<p>If you'd prefer to have <code>\"21\"</code> rather than <code>\" 21\"</code>, just remove <code>\\s</code>.</p>\n"}], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1727, "favorite_count": 0, "accepted_answer_id": 33378781, "answer_count": 2, "score": 6, "last_activity_date": 1585851937, "creation_date": 1445980148, "last_edit_date": 1445981263, "question_id": 33378507, "link": "https://stackoverflow.com/questions/33378507/split-string-into-an-array-by-comma-unless-comma-is-inside-quotes", "title": "Split string into an array by comma, unless comma is inside quotes", "body": "<p>Given a string of an array in Ruby with some items in quotes that contain commas:</p>\n\n<pre><code>my_string.inspect\n# =&gt; \"\\\"hey, you\\\", 21\"\n</code></pre>\n\n<p>How can I get an array of:</p>\n\n<pre><code>[\"hey, you\", \" 21\"] \n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 1, "creation_date": 1445979571, "post_id": 33378285, "comment_id": 54550605, "body": "It is unclear what values you already have. Are the 3 groups as above in individual hashes as variables?  Please edit to show more of the real Ruby code and demonstrate the source of those 3 hashes (also I see <code>&quot;path&quot;= &quot;&#47;usr&#47;bin&#47;ruby&quot;</code> with an incorrect operator <code>=</code> instead of <code>=&gt;</code>)"}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445979686, "post_id": 33378285, "comment_id": 54550673, "body": "These are three different hashes that I printed. I corrected the error of <code>=</code> n <code>=&gt;</code>. I put more info here"}, {"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445979810, "post_id": 33378285, "comment_id": 54550748, "body": "I understand that they are 3 different hashes, but are they stored in variables, as an Array, or otherwise?"}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445979902, "post_id": 33378285, "comment_id": 54550796, "body": "A loop is run three times that generates three different hashes and one by one I put each hash into the bigger one. But when I print it after the loop, the bigger hash prints only keys but no values! Actually the original program is pretty big."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445980177, "post_id": 33378285, "comment_id": 54550941, "body": "@DaveNewton I am updating the question with more info."}, {"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1445981128, "post_id": 33378285, "comment_id": 54551418, "body": "@DaveNewton I have added more information. Kindly see if it helps"}], "answers": [{"comments": [{"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 1, "creation_date": 1445982473, "post_id": 33378414, "comment_id": 54552111, "body": "Your answer gave me the hint to the solution. I was actually clearing the hash at the end of every loop, as a result of which it ended but being deleted from everywhere as it was being passed by reference!!"}], "tags": [], "owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "is_accepted": false, "score": 3, "last_activity_date": 1445980571, "last_edit_date": 1445980571, "creation_date": 1445979724, "answer_id": 33378414, "question_id": 33378285, "link": "https://stackoverflow.com/questions/33378285/unable-to-create-hash-of-hashes-in-ruby/33378414#33378414", "title": "Unable to create Hash of Hashes in Ruby", "body": "<p>If you have your 3 hashes in 3 variables group1, group2, &amp; group3, you can make a hash with the hashes like this:</p>\n\n<pre><code>group1 = {\n    \"path\"=&gt;\"/tmp/\",\n    \"max_hits\"=&gt;262144,\n    \"min_hits\"=&gt;5240\n}\n\ngroup2 = {\n    \"basic_size_limit\"=&gt;262144,\n    \"path\"=&gt; \"/usr/bin/ruby\",\n    \"max_hits\"=&gt;2412,\n    \"min_hits\"=&gt;871\n}\n\ngroup3 = {\n    \"path\"=&gt;\"/usr/tmp/\",\n    \"basic_time_limits\"=&gt;[26214400, 26214401, 26214402],\n}\n\ngroup_of_groups = {\"group1\"=&gt;group1, \"group2\"=&gt;group2, \"group3\"=&gt;group3}\n\n# result\n{\n    \"group1\" =&gt; {\n        \"path\"=&gt;\"/tmp/\",\n        \"max_hits\"=&gt;262144,\n        \"min_hits\"=&gt;5240\n    }, \n    \"group2\" =&gt; {\n        \"basic_size_limit\"=&gt;262144,\n        \"path\"=&gt; \"/usr/bin/ruby\",\n        \"max_hits\"=&gt;2412,\n        \"min_hits\"=&gt;871\n    },\n    \"group3\" =&gt; {\n        \"path\"=&gt;\"/usr/tmp/\",\n        \"basic_time_limits\"=&gt;[26214400, 26214401, 26214402],\n    },\n}\n</code></pre>\n\n<p>Keep in mind that everything in Ruby is by reference, so modifying a hash inside of the group_of_groups will also modify the original hash.</p>\n"}, {"tags": [], "owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "is_accepted": false, "score": 2, "last_activity_date": 1445979974, "creation_date": 1445979974, "answer_id": 33378462, "question_id": 33378285, "link": "https://stackoverflow.com/questions/33378285/unable-to-create-hash-of-hashes-in-ruby/33378462#33378462", "title": "Unable to create Hash of Hashes in Ruby", "body": "<p>If you want to initialize everything in one go, you could write it as:</p>\n\n<pre><code>group_of_groups = { \n    \"group1\" =&gt; {\n        \"path\"=&gt;\"/tmp/\",\n        \"max_hits\"=&gt;262144,\n        \"min_hits\"=&gt;5240\n    },\n    \"group2\" =&gt; {\n        \"basic_size_limit\"=&gt;262144,\n        \"path\"=&gt; \"/usr/bin/ruby\",\n        \"max_hits\"=&gt;2412,\n        \"min_hits\"=&gt;871\n    },\n    \"group3\" =&gt; {\n        \"path\"=&gt;\"/usr/tmp/\",\n        \"basic_time_limits\"=&gt;[26214400, 26214401, 26214402],\n    }\n}\n</code></pre>\n\n<p>The newlines make it clear what belongs to what, but are not required.</p>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "edited": false, "score": 1, "creation_date": 1445982867, "post_id": 33379000, "comment_id": 54552302, "body": "It is not appropriate or advisable to use an eval in a case like this."}, {"owner": {"reputation": 1206, "user_id": 783116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZOv9Y.jpg?s=128&g=1", "display_name": "josiah", "link": "https://stackoverflow.com/users/783116/josiah"}, "reply_to_user": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "edited": false, "score": 0, "creation_date": 1445983576, "post_id": 33379000, "comment_id": 54552581, "body": "@Gravatite because it is fragile - if someone decides to change the names of the local variables, they might not know to change the string values of the array?"}, {"owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "edited": false, "score": 1, "creation_date": 1445984458, "post_id": 33379000, "comment_id": 54552920, "body": "For two reasons.  First, Ruby supports proper reflection, so there&#39;s no reason to use an eval to get a variable.  The second is more of a philosophical issue in that eval often leads to a variety of evils from security vulnerabilities to difficult to diagnose bugs and all manner of other issues.  A quick google search should turn up more in-depth articles on when it&#39;s appropriate to use eval."}, {"owner": {"reputation": 1206, "user_id": 783116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZOv9Y.jpg?s=128&g=1", "display_name": "josiah", "link": "https://stackoverflow.com/users/783116/josiah"}, "reply_to_user": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "edited": false, "score": 0, "creation_date": 1446043612, "post_id": 33379000, "comment_id": 54579642, "body": "@Gravatite I&#39;m not sure what you mean by <code>proper reflection</code>.  How would I programmatically access the contents of a variable by name if I needed to also use the name?  I already know it&#39;s not possible, due to the ambiguity of the problem, to access the name of a variable from its contents, so I couldn&#39;t put the variables themselves in a list if I needed access to their names.  The only way I know of to accomplish this is to use <code>eval</code> without resorting to creating a static hash.  Although, you could replace the name list above with <code>local_variables.select { |v| !x.start_with?(&#39;_&#39;).to_s }</code>"}], "tags": [], "owner": {"reputation": 1206, "user_id": 783116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZOv9Y.jpg?s=128&g=1", "display_name": "josiah", "link": "https://stackoverflow.com/users/783116/josiah"}, "is_accepted": false, "score": 0, "last_activity_date": 1446137628, "last_edit_date": 1446137628, "creation_date": 1445982108, "answer_id": 33379000, "question_id": 33378285, "link": "https://stackoverflow.com/questions/33378285/unable-to-create-hash-of-hashes-in-ruby/33379000#33379000", "title": "Unable to create Hash of Hashes in Ruby", "body": "<p>In addition to the other answers, you can also do this if you need to build the hash programmatically:</p>\n\n<pre><code>group1 = {\n    \"path\"=&gt;\"/tmp/\",\n    \"max_hits\"=&gt;262144,\n    \"min_hits\"=&gt;5240\n}\n\ngroup2 = {\n    \"basic_size_limit\"=&gt;262144,\n    \"path\"=&gt; \"/usr/bin/ruby\",\n    \"max_hits\"=&gt;2412,\n    \"min_hits\"=&gt;871\n}\n\ngroup3 = {\n    \"path\"=&gt;\"/usr/tmp/\",\n    \"basic_time_limits\"=&gt;[26214400, 26214401, 26214402],\n}\n\ngroup_of_groups = \n    [\"group1\", \"group2\", \"group3\"].each_with_object({}) do |sub_hash_name, new_hash|\n        new_hash[sub_hash_name] = instance_eval(sub_hash_name)\n    end\n\n# Result\n{\n    \"group1\" =&gt; {\n        \"path\"=&gt;\"/tmp/\",\n        \"max_hits\"=&gt;262144,\n        \"min_hits\"=&gt;5240\n    }, \n    \"group2\" =&gt; {\n        \"basic_size_limit\"=&gt;262144,\n        \"path\"=&gt; \"/usr/bin/ruby\",\n        \"max_hits\"=&gt;2412,\n        \"min_hits\"=&gt;871\n    },\n    \"group3\" =&gt; {\n        \"path\"=&gt;\"/usr/tmp/\",\n        \"basic_time_limits\"=&gt;[26214400, 26214401, 26214402],\n    },\n}\n</code></pre>\n"}], "owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1446137628, "creation_date": 1445979229, "last_edit_date": 1445980494, "question_id": 33378285, "link": "https://stackoverflow.com/questions/33378285/unable-to-create-hash-of-hashes-in-ruby", "title": "Unable to create Hash of Hashes in Ruby", "body": "<p>A loop is run three times on a text file which has certain key-value pairs. Every loop returns a new hash which are printed below. I want to store these hashes into another hash. <code>group1</code>, <code>group2</code> and <code>group3</code> are the keys for the hashes:</p>\n\n<pre><code>\"group1\"\n{\n    \"path\"=&gt;\"/tmp/\",\n    \"max_hits\"=&gt;262144,\n    \"min_hits\"=&gt;5240\n}\n\n\"group2\"\n{\n    \"basic_size_limit\"=&gt;262144,\n    \"path\"=&gt; \"/usr/bin/ruby\",\n    \"max_hits\"=&gt;2412,\n    \"min_hits\"=&gt;871\n}\n\n\"group3\"\n{\n    \"path\"=&gt;\"/usr/tmp/\",\n    \"basic_time_limits\"=&gt;[26214400, 26214401, 26214402],\n}\n</code></pre>\n\n<p>I initialized the above hashes as <code>groups = Hash.new</code> and not I want to store them into a hash of hashes. I thought of initialising the bigger hash like <code>group_of_groups = Hash.new{|hash, key| hash[key] = Hash.new}</code>.</p>\n\n<pre><code>group_of_groups = Hash.new{|hash, key| hash[key] = Hash.new}\nLoop i in 1 .. 3\n    groups = Hash.new\n    ####\n        Do something and add to the hash groups\n    ####\n    key_name = \"group\" + i\n    group_of_groups[key_name] = groups\nend Loop\n</code></pre>\n\n<p>But it only gives me <code>{\"group1\"=&gt;{}, \"group2\"=&gt;{}, \"group3\"=&gt;{}}</code></p>\n\n<p>How to solve this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "squeel"], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "reply_to_user": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "edited": false, "score": 0, "creation_date": 1445980403, "post_id": 33378485, "comment_id": 54551078, "body": "An example rails .where using the postgres extract could be .where(&quot;extract(hour from start_time) in (6,7,8,9,10,11,12)&quot;) for the 6am-12pm time slot."}, {"owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "edited": false, "score": 0, "creation_date": 1445981575, "post_id": 33378485, "comment_id": 54551656, "body": "The above code really helps actually. The gem not so much since I can&#39;t really do anything with the grouped data as far as I can see. It works well for charts which ill be using in the future but to record records with the time range I don&#39;t see how I&#39;d use the gem here."}, {"owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "edited": false, "score": 0, "creation_date": 1445986242, "post_id": 33378485, "comment_id": 54553610, "body": "I just realized this isn&#39;t going to work. Timezones are going to be an issue. Is it at all possible to apply a timezone to the column before checking against it?"}, {"owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "reply_to_user": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "edited": false, "score": 0, "creation_date": 1445990635, "post_id": 33378485, "comment_id": 54555103, "body": "Yep, Postgres can do time zones.  If your data is stored as a &quot;timestamp with time zone&quot;, you can request that it be manipulated in any time zone you care for with the suffix &quot;at time zone &#39;ZZZ&#39;&quot; after the column name (where ZZZ is the zone code), or if it&#39;s stored as just a timestamp, you can use the same suffix in interpret it as the time zone it&#39;s stored in, and then use the suffix again to convert it to a different time zone.  I recommend reading the date/time type &amp; functions sections of the postgres documentation; their documentation on those items is very good."}], "tags": [], "owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "is_accepted": true, "score": 0, "last_activity_date": 1445980059, "creation_date": 1445980059, "answer_id": 33378485, "question_id": 33378202, "link": "https://stackoverflow.com/questions/33378202/trying-to-filter-datetime-fields-based-on-time-only/33378485#33378485", "title": "Trying to filter datetime fields based on time only", "body": "<p>How to use a part of a timestamp in a query depends somewhat on what database you're using.  For example, with PostgreSQL you could use the extract function to group or filter things based on the time of day.</p>\n\n<p>If you're unsure how to do that, you could also look at the groupdate gem (<a href=\"https://github.com/ankane/groupdate\" rel=\"nofollow\">https://github.com/ankane/groupdate</a>) which appears to do what you're looking for in a more database agnostic way.</p>\n"}], "owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 33378485, "answer_count": 1, "score": 1, "last_activity_date": 1445980059, "creation_date": 1445978952, "question_id": 33378202, "link": "https://stackoverflow.com/questions/33378202/trying-to-filter-datetime-fields-based-on-time-only", "title": "Trying to filter datetime fields based on time only", "body": "<p>I'm having some trouble figuring out how to build a scope for a specific type of query I'm trying to do. </p>\n\n<p>Basically I have an Availabilities model which has a <code>start_time</code> and <code>end_time</code> datetime columns.</p>\n\n<p>I have a start and end time dropdown in my view which returns this query on search: </p>\n\n<pre><code> \"availabilities\".\"start_time\" &gt;= '2015-10-27 00:00:00.000000' AND \"availabilities\".\"end_time\" &lt;= '2015-10-31 00:00:00.000000'\n</code></pre>\n\n<p>I've been asked to add a new time range filter:</p>\n\n<pre><code>Morning (6am - 12pm)\nAfternoon (12-6pm)\nNight (6pm - 12am )\n</code></pre>\n\n<p>I'm not sure how I'd approach that. This is what an availability record looks like: </p>\n\n<pre><code>   &lt;Availability:0x000000065b2bf0&gt; {\n                 :id =&gt; 1,\n         :start_time =&gt; Sat, 21 Nov 2015 11:00:00 UTC +00:00,\n           :end_time =&gt; Sat, 21 Nov 2015 12:00:00 UTC +00:00,\n              :price =&gt; 24.1,\n           :discount =&gt; 20.0,\n         :created_at =&gt; Fri, 23 Oct 2015 21:31:49 UTC +00:00,\n         :updated_at =&gt; Fri, 23 Oct 2015 21:31:49 UTC +00:00,\n        :facility_id =&gt; 1,\n         :booking_id =&gt; nil\n    }\n</code></pre>\n\n<p>So I need to filter only on the time portion of the field but am not sure how to approach this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "request", "http-post", "httparty"], "comments": [{"owner": {"reputation": 528, "user_id": 2747930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f48a966cb2f34fe43a8d31962ff7f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Yaro Holodiuk", "link": "https://stackoverflow.com/users/2747930/yaro-holodiuk"}, "edited": false, "score": 0, "creation_date": 1446125570, "post_id": 33377985, "comment_id": 54620877, "body": "If you get 500 ISE as an API response, you should look into your API (&quot;<a href=\"http://my_page/api&quot;\" rel=\"nofollow noreferrer\">my_page/api&quot;</a>) server logs and see what is causing the error."}], "owner": {"reputation": 1357, "user_id": 3201684, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fce047896b7ee0a2f6967156e339521f?s=128&d=identicon&r=PG&f=1", "display_name": "ntonnelier", "link": "https://stackoverflow.com/users/3201684/ntonnelier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445978156, "creation_date": 1445978156, "question_id": 33377985, "link": "https://stackoverflow.com/questions/33377985/500-server-error-when-making-post-request-with-httparty", "title": "500 Server Error when making post request with httparty", "body": "<p>Im trying to reproduce the following request using <a href=\"https://github.com/jnunemaker/httparty\" rel=\"nofollow\">httparty</a>:</p>\n\n<pre><code>curl --verbose --data '{\"username\":\"my_user@mail.com\", \"password\":\"my_password\"}' http://my_page/api/user/authenticate\n</code></pre>\n\n<p>This is what I'm doing:</p>\n\n<pre><code>class RequestParty\n  include HTTParty\n\n  def initialize(base_uri)\n    self.class.base_uri base_uri\n  end\n\n  def post(endpoint, options)\n    self.class.post(endpoint, options)\n  end\nend\n\nRequestParty.new(\"http://my_page/api\").post(\"/user/authenticate\",{\"username\" =&gt; \"my_user@mail.com\", \"password\" =&gt;\"my_password\"})\n</code></pre>\n\n<p>But I keep getting <a href=\"http://www.checkupdown.com/status/E500.html\" rel=\"nofollow\">500 Internal Server Error</a>.</p>\n\n<p>Whay am I doing wrong?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 1, "creation_date": 1445994598, "post_id": 33377838, "comment_id": 54556209, "body": "it&#39;s just exactly what you already said, negative indexes count from the end of the array. That&#39;s it. You already figured it out."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1446033785, "post_id": 33377838, "comment_id": 54572643, "body": "@Kim I <i>highly</i> suggest you learn Ruby before entering a RoR tutorial. Even though it seems like you are learning Ruby right now, you will get more out of RubyMonk or something."}], "answers": [{"comments": [{"owner": {"reputation": 1406, "user_id": 1890705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11658fa9ab41dd0c07c874222b1aacb3?s=128&d=identicon&r=PG", "display_name": "reirab", "link": "https://stackoverflow.com/users/1890705/reirab"}, "edited": false, "score": 1, "creation_date": 1445977784, "post_id": 33377866, "comment_id": 54549584, "body": "This is correct. See <a href=\"http://rubyquicktips.com/post/996814716/use-negative-array-indices\" rel=\"nofollow noreferrer\">Ruby Quicktips: Use negative array indicies</a> for more information."}, {"owner": {"reputation": 267, "user_id": 4656993, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/757dbff2728d60d50976c772e7e689f4?s=128&d=identicon&r=PG", "display_name": "Kim", "link": "https://stackoverflow.com/users/4656993/kim"}, "edited": false, "score": 0, "creation_date": 1445978404, "post_id": 33377866, "comment_id": 54549966, "body": "@ergonaut a[-3] == 42?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 267, "user_id": 4656993, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/757dbff2728d60d50976c772e7e689f4?s=128&d=identicon&r=PG", "display_name": "Kim", "link": "https://stackoverflow.com/users/4656993/kim"}, "edited": false, "score": 0, "creation_date": 1445978829, "post_id": 33377866, "comment_id": 54550213, "body": "@Kim: Why don&#39;t you just try it out? Also, if there is something unclear about the documentation, I&#39;m sure the Ruby documentation team would like to know about it!"}, {"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1445980241, "post_id": 33377866, "comment_id": 54550977, "body": "Kim, it&#39;s the 3rd from the right hand side.  a[0] == a[-3], a[1] == a[-2], a[2] == a[-1]"}], "tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": false, "score": 3, "last_activity_date": 1446067022, "last_edit_date": 1446067022, "creation_date": 1445977731, "answer_id": 33377866, "question_id": 33377838, "link": "https://stackoverflow.com/questions/33377838/why-does-a-1-17/33377866#33377866", "title": "Why does &quot;a[-1]&quot; = 17", "body": "<p>It references from the end of the array, so:</p>\n\n<pre><code> a[-2] == 8      # true\n a[-3] == 42     # true\n</code></pre>\n\n<p>A side note, if you're a java user, you would appreciate not doing something like this to index arrays:</p>\n\n<pre><code> a[a.length-2]   # 8 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 267, "user_id": 4656993, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/757dbff2728d60d50976c772e7e689f4?s=128&d=identicon&r=PG", "display_name": "Kim", "link": "https://stackoverflow.com/users/4656993/kim"}, "edited": false, "score": 0, "creation_date": 1446037300, "post_id": 33379029, "comment_id": 54574883, "body": "Thank you everyone for your insight. @mu is too short...as a newbie I am still trying to figure out all things related to programming...including Stack Overflow best practices. Again thank you and I appreciate the effort you all make to help those in coding need :-)"}], "tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 0, "last_activity_date": 1445982177, "creation_date": 1445982177, "answer_id": 33379029, "question_id": 33377838, "link": "https://stackoverflow.com/questions/33377838/why-does-a-1-17/33379029#33379029", "title": "Why does &quot;a[-1]&quot; = 17", "body": "<p>It is because ruby is different that other programming languages. \nThe inventor of ruby believed that is a useful feature to be able to get elements from the end of an array, so he implemented it this way.</p>\n"}], "owner": {"reputation": 267, "user_id": 4656993, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/757dbff2728d60d50976c772e7e689f4?s=128&d=identicon&r=PG", "display_name": "Kim", "link": "https://stackoverflow.com/users/4656993/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1446067022, "creation_date": 1445977634, "last_edit_date": 1445978243, "question_id": 33377838, "link": "https://stackoverflow.com/questions/33377838/why-does-a-1-17", "title": "Why does &quot;a[-1]&quot; = 17", "body": "<p>I'm working through the Ruby on Rails Tutorial and this is the first time I've seen the last item in an array referred to as being \"-1\" indexed. How is this calculated?\n<a href=\"https://i.stack.imgur.com/ouhM3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ouhM3.png\" alt=\"Why does &quot;a[-1]&quot; = 17\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "passenger", "rbenv"], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 2934182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834096724125a9158864a2b19185f0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Gravatite", "link": "https://stackoverflow.com/users/2934182/gravatite"}, "is_accepted": false, "score": 2, "last_activity_date": 1445978398, "creation_date": 1445978398, "answer_id": 33378046, "question_id": 33377776, "link": "https://stackoverflow.com/questions/33377776/cannot-load-such-file-mkmf-loaderror/33378046#33378046", "title": "cannot load such file -- mkmf (LoadError)", "body": "<p>Based on your locate command, you have mkmf in rvm and in ubuntu's home diretory, but not on the system, and you're explicitly using the system's ruby (and not rbenv or rvm) to run the extconf.rb.  Either run a ruby from one of the environments you have mkmf in, or install the ruby-dev package on the system.</p>\n"}], "owner": {"reputation": 179, "user_id": 863526, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/6bc967fda596a6809bb9e21acc2cc05d?s=128&d=identicon&r=PG", "display_name": "devilsansclue", "link": "https://stackoverflow.com/users/863526/devilsansclue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1445978398, "creation_date": 1445977397, "question_id": 33377776, "link": "https://stackoverflow.com/questions/33377776/cannot-load-such-file-mkmf-loaderror", "title": "cannot load such file -- mkmf (LoadError)", "body": "<p>Using rbenv, runnng bundle install, and getting an error installing Json 1.8.1.</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing json:\nERROR: Failed to build gem native extension.\n\n/usr/bin/ruby1.9.1 extconf.rb\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load     such file -- mkmf (LoadError)\n    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from extconf.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Tried installing ruby-dev via apt (not sure that will help anyway, as ruby was installed via rbenv)</p>\n\n<p>stuff that may help?</p>\n\n<pre><code>$ which gem\n/home/ubuntu/.rbenv/shims/gem\n$ which ruby\n/home/ubuntu/.rbenv/shims/ruby\n$ locate mkmf\n/home/ubuntu/.rbenv/versions/1.9.3-p484/lib/ruby/1.9.1/mkmf.rb\n/home/ubuntu/.rbenv/versions/1.9.3-p484/share/ri/1.9.1/system/Object/mkmf-i.ri\n/usr/local/rvm/gems/ruby-2.2.1/extensions/x86_64-linux/2.2.0/nokogiri-1.6.6.2/mkmf.log\n/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/mkmf.rb\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 22618, "user_id": 1555312, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/12c03a0fc2ac25d234882cf93f1d3052?s=128&d=identicon&r=PG", "display_name": "bigpotato", "link": "https://stackoverflow.com/users/1555312/bigpotato"}, "is_accepted": true, "score": 1, "last_activity_date": 1445977908, "creation_date": 1445977908, "answer_id": 33377915, "question_id": 33377681, "link": "https://stackoverflow.com/questions/33377681/rspec-how-to-test-method-contents-if-it-eventually-raises-exception/33377915#33377915", "title": "Rspec: How to test method contents if it eventually raises exception?", "body": "<p>Stubbing raise on the subject fixed it:\n<code>allow(subject).to receive(:raise)</code></p>\n"}], "owner": {"reputation": 22618, "user_id": 1555312, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/12c03a0fc2ac25d234882cf93f1d3052?s=128&d=identicon&r=PG", "display_name": "bigpotato", "link": "https://stackoverflow.com/users/1555312/bigpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 33377915, "answer_count": 1, "score": 3, "last_activity_date": 1445977925, "creation_date": 1445977037, "last_edit_date": 1445977925, "question_id": 33377681, "link": "https://stackoverflow.com/questions/33377681/rspec-how-to-test-method-contents-if-it-eventually-raises-exception", "title": "Rspec: How to test method contents if it eventually raises exception?", "body": "<p>I have a method:</p>\n\n<pre><code>  def post\n    ...\n    if res.failed?\n      SlackNotifier.notify(\"Failed\", { :channel =&gt; \"#bugs\" })\n      raise \"Boom\"\n    end\n    res\n  end\n</code></pre>\n\n<p>And in rspec I'm trying to test this, but it fails with a <code>RuntimeError</code> because the method eventually raises an exception:</p>\n\n<pre><code>it 'posts to slack' do\n  allow(SlackNotifier).to receive(:notify)\n  subject.post\n  expect(SlackNotifier).to have_received(:notify).with(\"Failed\", { :channel =&gt; \"#bugs\" })\nend\n</code></pre>\n\n<p>How would I stop it from failing because of that <code>raise</code>?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 616987, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9a5a6cadc7954e2e93e512ba35efd8c?s=128&d=identicon&r=PG", "display_name": "Pathogen", "link": "https://stackoverflow.com/users/616987/pathogen"}, "edited": false, "score": 0, "creation_date": 1445977756, "post_id": 33377753, "comment_id": 54549568, "body": "Interesting! Also, after tinkering around further, I see that making the private methods of Object public does not make the mixed in methods from Module public."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 4, "last_activity_date": 1445977335, "creation_date": 1445977335, "answer_id": 33377753, "question_id": 33377650, "link": "https://stackoverflow.com/questions/33377650/the-meaning-of-calling-send-with-public-in-ruby/33377753#33377753", "title": "The meaning of calling &#39;send&#39; with &#39;:public&#39; in Ruby", "body": "<p>There is indeed a method called <code>public</code>, but it is defined on <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-public\" rel=\"nofollow\"><code>Module</code></a>. This is ok because <code>Object</code> is an instance of <code>Class</code> and the superclass of <code>Class</code> is <code>Module</code>: apart from the slight circularity in the ruby class hierarchy bootstrapping this is just normal ruby inheritance.</p>\n\n<p>Your <code>respond_to?</code> check returns false because by default <code>respond_to?</code> does not check protected or private methods (prior to ruby 2.0 it checked protected methods). You can request that all methods be searched by doing</p>\n\n<pre><code>Object.respond_to?(:public, true)\n</code></pre>\n\n<p>which does return true.</p>\n"}], "owner": {"reputation": 727, "user_id": 616987, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9a5a6cadc7954e2e93e512ba35efd8c?s=128&d=identicon&r=PG", "display_name": "Pathogen", "link": "https://stackoverflow.com/users/616987/pathogen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33377753, "answer_count": 1, "score": 4, "last_activity_date": 1445977335, "creation_date": 1445976936, "last_edit_date": 1495542595, "question_id": 33377650, "link": "https://stackoverflow.com/questions/33377650/the-meaning-of-calling-send-with-public-in-ruby", "title": "The meaning of calling &#39;send&#39; with &#39;:public&#39; in Ruby", "body": "<p>In Ruby, you can do ... </p>\n\n<pre><code>Object.send(:public, *Object.private_instance_methods)\n</code></pre>\n\n<p>... as seen in <a href=\"https://stackoverflow.com/a/269452/616987\">this answer to another question</a>. This redefines each of the private instance methods of <code>Object</code>, making them public. My question is: how does this work? <code>send</code> is supposed to work with the name of a method, but there do not seem to be methods named <code>public</code>, <code>private</code>, or <code>protected</code> defined on <code>Object</code> (or at least my search-fu has not found them). </p>\n\n<pre><code>&gt; Object.respond_to?(:public)\n=&gt; false \n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 0, "creation_date": 1445976918, "post_id": 33377550, "comment_id": 54549119, "body": "It&#39;ll be easier for us to help if you post some code. Can you post the form and the controller it&#39;s posting to?"}, {"owner": {"reputation": 1075, "user_id": 4783262, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f7c8a23702207a090e257809d1c76fa6?s=128&d=identicon&r=PG&f=1", "display_name": "pablito.aven", "link": "https://stackoverflow.com/users/4783262/pablito-aven"}, "reply_to_user": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 0, "creation_date": 1445977277, "post_id": 33377550, "comment_id": 54549311, "body": "@LannyBose I posted the code I have, it just renders the input with it&#39;s value. I have no clue how to ajax-update it."}, {"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 2, "creation_date": 1445977413, "post_id": 33377550, "comment_id": 54549376, "body": "This article is pretty thorough, and I think covers your use case: <a href=\"http://www.gotealeaf.com/blog/the-detailed-guide-on-how-ajax-works-with-ruby-on-rails\" rel=\"nofollow noreferrer\">gotealeaf.com/blog/&hellip;</a>"}], "owner": {"reputation": 1075, "user_id": 4783262, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f7c8a23702207a090e257809d1c76fa6?s=128&d=identicon&r=PG&f=1", "display_name": "pablito.aven", "link": "https://stackoverflow.com/users/4783262/pablito-aven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445977224, "creation_date": 1445976565, "last_edit_date": 1445977224, "question_id": 33377550, "link": "https://stackoverflow.com/questions/33377550/how-to-update-model-with-ajax-in-rails", "title": "How to update model with ajax in rails", "body": "<p>I am developing my first Ruby on Rails real application, and I want to achieve a very simple task:</p>\n\n<p>I have an input in my view, whose value represents a field of one of my models. I want to, via ajax, update this field in my model when the user changes the value of the input.</p>\n\n<p>How can I do that?</p>\n\n<p>Thanks a lot</p>\n\n<p>html code:</p>\n\n<pre><code>Product#View\n...\nStock: &lt;input type=\"text\" name=\"p[stock]\" placeholder=\"Stock\" value=\"&lt;%= @product.stock %&gt;\" /&gt;&lt;br&gt;\n...\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>def view\n  @product = Product.find(params[:id])\nend\n</code></pre>\n"}]