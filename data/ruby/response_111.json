[{"tags": ["java", "ruby", "encryption", "des"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1487806928, "post_id": 42404347, "comment_id": 71955656, "body": "Start by ensuring you&#39;re using the same bytes. String representations vary widely between languages."}, {"owner": {"reputation": 6568, "user_id": 611819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oew2B.png?s=128&g=1", "display_name": "dnault", "link": "https://stackoverflow.com/users/611819/dnault"}, "edited": false, "score": 1, "creation_date": 1487807592, "post_id": 42404347, "comment_id": 71955912, "body": "Are you absolutely sure you want to use that ruby encryption library? The documentation seems to indicate it derives the Initialization Vector from a password, which is a terrible idea -- <a href=\"http://crypto.stackexchange.com/a/82\">IV&#39;s should be random</a>"}, {"owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "reply_to_user": {"reputation": 6568, "user_id": 611819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oew2B.png?s=128&g=1", "display_name": "dnault", "link": "https://stackoverflow.com/users/611819/dnault"}, "edited": false, "score": 0, "creation_date": 1487807870, "post_id": 42404347, "comment_id": 71956010, "body": "Yes @dnault, it&#39;s legacy what I&#39;m trying to translate into Java so that method is the one in use at this moment and the one I want to replicate."}, {"owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1487808115, "post_id": 42404347, "comment_id": 71956097, "body": "@chrylis I&#39;m not sure which string representation is Ruby using so I can&#39;t reproduce it in Java. If you know, that would be of help too."}, {"owner": {"reputation": 6568, "user_id": 611819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oew2B.png?s=128&g=1", "display_name": "dnault", "link": "https://stackoverflow.com/users/611819/dnault"}, "edited": false, "score": 1, "creation_date": 1487808316, "post_id": 42404347, "comment_id": 71956157, "body": "If you want bug-for-bug compatibility, I would investigate how the ruby library derives the IV and then do the same thing in Java (instead of using an all-zero IV as your code does now)."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1487814086, "post_id": 42404347, "comment_id": 71957899, "body": "3DES (an algorithm past it&#39;s prime) takes a 24 byte key, you are supplying a 50 character string, that is not correct."}, {"owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1487934928, "post_id": 42404347, "comment_id": 72018513, "body": "@zaph you are right as I was using a password as a key in my Java code. I found my way to get the key and iv from the password so thanks for driving me into the solution"}, {"owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "reply_to_user": {"reputation": 6568, "user_id": 611819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oew2B.png?s=128&g=1", "display_name": "dnault", "link": "https://stackoverflow.com/users/611819/dnault"}, "edited": false, "score": 0, "creation_date": 1487934965, "post_id": 42404347, "comment_id": 72018530, "body": "Thanks! @dnault Your comment helped to end up with a solution to what I was trying to achieve"}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1488219342, "post_id": 42404347, "comment_id": 72125051, "body": "So what was the solution? :-) Please post it as an &quot;answer&quot; so it is more visible to help the next guy."}, {"owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "reply_to_user": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1489534067, "post_id": 42404347, "comment_id": 72711495, "body": "@leigh I just posted that. Hope it helps someone"}, {"owner": {"reputation": 28384, "user_id": 104223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18ee4.png?s=128&g=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/104223/leigh"}, "edited": false, "score": 0, "creation_date": 1489535463, "post_id": 42404347, "comment_id": 72711905, "body": "@rakemous - Great, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "is_accepted": true, "score": 1, "last_activity_date": 1489533852, "last_edit_date": 1495542855, "creation_date": 1489533852, "answer_id": 42798372, "question_id": 42404347, "link": "https://stackoverflow.com/questions/42404347/migrate-string-encryption-from-ruby-to-java/42798372#42798372", "title": "Migrate String encryption from Ruby to Java", "body": "<p>The first thing to do is to <a href=\"https://stackoverflow.com/questions/42420098/how-to-extract-the-iv-vector-generated-by-encrypt-method-from-encrypted-strings\">derive the IV and key</a> from the given password.</p>\n\n<p>From the link above, you will get an encoded IV and KEY that corresponds with <code>\"VDiJjncs4ak=\"</code> and <code>\"s9e42J3PpmQv8n5T8L3zzuFaGdrzK/wU\"</code> respectively.\nThis means that the key and IV vector used in the Java code are wrong as it was said in the comments.</p>\n\n<p>Below is the resulting Java code:</p>\n\n<pre><code>public class SymmetricDESedeCipher {\n    private static final String DATA = \"Whackabad\";\n    private static final String ALGORITHM = \"DESede\";\n    private static final String XFORM = \"DESede/CBC/PKCS5Padding\";\n    private static final String KEY = \"s9e42J3PpmQv8n5T8L3zzuFaGdrzK/wU\";\n    private static final String IV = \"VDiJjncs4ak=\";\n\n    private static byte[] encrypt(String data,\n                                  SecretKey key, String XFORM, byte[] iv) throws Exception {\n        Cipher cipher = Cipher.getInstance(XFORM);\n        cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(iv));\n        return cipher.doFinal(data.getBytes());\n    }\n\n    public static void main(String[] unused) throws Exception {\n        DESedeKeySpec spec = new DESedeKeySpec(new BASE64Decoder().decodeBuffer(KEY));\n        SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance(ALGORITHM);\n        SecretKey secretKey = secretKeyFactory.generateSecret(spec);\n\n        byte[] encBytes = encrypt(DATA, secretKey, XFORM,  new BASE64Decoder().decodeBuffer(IV));\n\n        System.out.println(\"Data: \" + DATA);\n        System.out.println(\"Encrypted Data: \" + new BASE64Encoder().encode(encBytes));\n    }\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Data: Whackabad\nEncrypted Data: AEsDXVcgh2jsTjlDgh+REg==\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 1045346, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/OOOGt.png?s=128&g=1", "display_name": "duckhunt", "link": "https://stackoverflow.com/users/1045346/duckhunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 4, "accepted_answer_id": 42798372, "answer_count": 1, "score": 1, "last_activity_date": 1556458858, "creation_date": 1487806519, "last_edit_date": 1556458858, "question_id": 42404347, "link": "https://stackoverflow.com/questions/42404347/migrate-string-encryption-from-ruby-to-java", "title": "Migrate String encryption from Ruby to Java", "body": "<p>I need to produce the same encrypted string in Java as the one built with the Ruby <a href=\"https://github.com/pluginaweek/encrypted_strings/blob/master/lib/encrypted_strings/symmetric_cipher.rb\" rel=\"nofollow noreferrer\">encrypted_strings</a> library. I've tried many different ways but my Java code keeps returning a different output, and I'm unable to understand what I'm doing wrong.</p>\n\n<p>Below is the ruby script that produces the desired output that I can't get right in Java. </p>\n\n<pre><code>#!/usr/bin/ruby\nrequire 'encrypted_strings'\n\ndata = 'Whackabad'\npassword = 'bAJLyifeUJUBFWdHzVbykfDmPHtLKLMzViHW9aHGmyTLD8hGYZ'\n\nencrypted_data = data.encrypt(:symmetric, :password =&gt; password)\nprintf \"Data: #{data}\\n\"\nprintf \"Encrypted Data: #{encrypted_data}\"\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Data: Whackabad\nEncrypted Data: AEsDXVcgh2jsTjlDgh+REg==\n</code></pre>\n\n<p>I had a look at the library, and it seems to be using <code>DES-EDE3-CBC</code> as the default algorithm for encryption. I deduce from here that I should use <code>DESede</code> or <code>TripleDES</code> algorithm and <code>CBC</code> mode. As the padding option, I'm using <code>PKCS5Padding</code> cause the library is calling <code>pkcs5_keyivgen</code>.</p>\n\n<p>Below is the Java code that tries to reproduce the same output unsuccessfully.</p>\n\n<pre><code>package ...\n\nimport sun.misc.BASE64Encoder;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.DESedeKeySpec;\nimport javax.crypto.spec.IvParameterSpec;\n\npublic class SymmetricDESedeCipher {\n    private static final String DATA = \"Whackabad\";\n    private static final String key = \"bAJLyifeUJUBFWdHzVbykfDmPHtLKLMzViHW9aHGmyTLD8hGYZ\";\n    private static final String ALGORITHM = \"DESede\";\n    private static final String XFORM = \"DESede/CBC/PKCS5Padding\";\n\n    private static byte[] iv = new byte[8];\n\n    private static byte[] encrypt(byte[] inpBytes,\n                                  SecretKey key, String XFORM) throws Exception {\n        Cipher cipher = Cipher.getInstance(XFORM);\n        IvParameterSpec ips = new IvParameterSpec(iv);\n        cipher.init(Cipher.ENCRYPT_MODE, key, ips);\n        return cipher.doFinal(inpBytes);\n    }\n\n    public static void main(String[] unused) throws Exception {\n        byte[] keyBytes = key.getBytes();\n        DESedeKeySpec desKeySpec = new DESedeKeySpec(keyBytes);\n        SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance(ALGORITHM);\n\n        SecretKey secretKey = secretKeyFactory.generateSecret(desKeySpec);\n\n        byte[] dataBytes = DATA.getBytes();\n        byte[] encBytes = encrypt(dataBytes, secretKey, XFORM);\n\n        System.out.println(\"Data: \" + DATA);\n        System.out.println(\"Encrypted Data: \" + new BASE64Encoder().encode(encBytes));\n    }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Data: Whackabad\nEncrypted Data: ScPTKQBsR9Ni1nJ1tsMaaQ==\n</code></pre>\n\n<p>I've seen people encrypting data from Java to be decrypted from Ruby and vice-versa with different algorithms so I think this can be achieved but I can't see what's wrong. Do you have an idea? If so, that'd be of much help! </p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487806481, "post_id": 42404099, "comment_id": 71955471, "body": "Although I largely agree, using forked gems is always a difficult thing to manage, and even more difficult to sell. Ideally you get these gems fixed so they&#39;re compatible as-is and you can do a straight dependency."}, {"owner": {"reputation": 3306, "user_id": 237721, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ALdyX.png?s=128&g=1", "display_name": "Poul", "link": "https://stackoverflow.com/users/237721/poul"}, "edited": false, "score": 0, "creation_date": 1487965065, "post_id": 42404099, "comment_id": 72037405, "body": "Thank you for the comments.  I ended up forking the gems ( they hadn&#39;t been updated in years ) and making my own versions on rubygems.org"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1487805305, "last_edit_date": 1495540810, "creation_date": 1487805305, "answer_id": 42404099, "question_id": 42404034, "link": "https://stackoverflow.com/questions/42404034/how-can-i-create-and-publish-a-rubygem-which-relies-on-forked-rubygems/42404099#42404099", "title": "how can i create and publish a rubygem which relies on forked rubygems?", "body": "<p>As you can read about in <a href=\"http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/\" rel=\"nofollow noreferrer\">this article</a>, putting your gem's dependencies in its Gemfile is not the right way. Rather, you should put the <code>gemspec</code> line in the Gemfile which directs it to read from the gemspec file. Think about the <code>Gemfile</code> as being for development only - when you push the gem, the gemspec alone becomes the specification for dependencies.</p>\n\n<p>And, as you can read <a href=\"https://stackoverflow.com/questions/6499410/ruby-gemspec-dependency-is-possible-have-a-git-branch-dependency\">here</a>, it is not possible to put a git source in the gemspec. </p>\n\n<p>In light of this, my recommendation would be to move the forked gem's <em>source code</em> into your file and add it's dependencies to your gemspec. Usurp it, in other words - make it part of your project. </p>\n\n<p>You could also specify in your README that users should add this separate gem to their Gemfile, sourced from git. That's easier for you but adds another step to the installation process. </p>\n"}], "owner": {"reputation": 3306, "user_id": 237721, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ALdyX.png?s=128&g=1", "display_name": "Poul", "link": "https://stackoverflow.com/users/237721/poul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 42404099, "answer_count": 1, "score": 0, "last_activity_date": 1487805305, "creation_date": 1487804977, "question_id": 42404034, "link": "https://stackoverflow.com/questions/42404034/how-can-i-create-and-publish-a-rubygem-which-relies-on-forked-rubygems", "title": "how can i create and publish a rubygem which relies on forked rubygems?", "body": "<p>I've been creating a rubygem ( lets call it 'abc' ) that relies on other gems.</p>\n\n<p>As my development progressed I discovered I needed to make changes to the gems I depended on.  So I forked them on github and added them to my Gemfile. </p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'xxx', '~&gt; 0.0.6',  :git =&gt; 'https://github.com/poulh/xxx.git'\ngem 'yyy', '~&gt; 0.8.2', :git =&gt; 'https://github.com/poulh/yyy.git'\ngem 'zzz', '~&gt; 0.0.14', :git =&gt; 'https://github.com/poulh/zzz.git'\n</code></pre>\n\n<p>I then used <strong>bundle install</strong> and added this line to lib/abc.rb in my gem's directory</p>\n\n<pre><code>require 'bundler/setup'\nrequire 'xxx'\nrequire 'yyy'\nrequire 'zzz'\n</code></pre>\n\n<p>This worked and I could continue my development.</p>\n\n<p>Now my gem is complete and I want to publish it to rubygems.org.</p>\n\n<p>However I need the custom changes I made to the above gems, and I cannot get a response from the owner's when I did a pull-request to merge in my changes.</p>\n\n<p>Ideally users of my gem can just run</p>\n\n<pre><code>gem install abc\n</code></pre>\n\n<p>and they'll be on their way, but when I test this the gem won't work without also</p>\n\n<ul>\n<li>cloning abc's repo </li>\n<li>running bundle install</li>\n</ul>\n\n<p>can these extra steps be avoided? </p>\n"}, {"tags": ["ruby", "jwt"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1487804525, "post_id": 42403756, "comment_id": 71954724, "body": "To use RSA with ruby-jwt, you have to pass in an RSA public key object. You can load the private key and call <code>#public_key</code> on it to get the public key. Do you already have a key pair and if so in which format?"}], "owner": {"reputation": 3180, "user_id": 7147228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ecaf2771089d20f8e66cccd5096fbe95?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Hunter", "link": "https://stackoverflow.com/users/7147228/joshua-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 712, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487803660, "creation_date": 1487803660, "question_id": 42403756, "link": "https://stackoverflow.com/questions/42403756/jwt-gem-undefined-method-verify-for-string", "title": "jwt gem undefined method &#39;verify&#39; for String", "body": "<p>I'm attempting to use the jwt gem.  I've got everything set up according to the recommendations in the docs.  When I hit my endpoint and pass the header, I get the above error.  I've narrowed it down to the verify_rsa method on line 61.</p>\n\n<pre><code>def verify_rsa(algorithm, public_key, signing_input, signature)\n  public_key.verify(OpenSSL::Digest.new(algorithm.sub('RS', 'sha')), signature, signing_input)\nend\n</code></pre>\n\n<p>The public_key local variable is what's throwing the error.  It is a string.  I'm not even really sure where to find the verify method that's being called.  The only one I see is in decode.rb and it doesn't take 4 arguments.  Any help would be much appreciated.  I'm using jwt version 1.5.6.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "edited": false, "score": 0, "creation_date": 1487803178, "post_id": 42403571, "comment_id": 71954239, "body": "<code>GROUP BY</code> in sql is meant to group selected records by a given criteria and then return the first of each group. Is this what you want? <a href=\"https://www.tutorialspoint.com/postgresql/postgresql_group_by.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/postgresql/postgresql_group_by.htm</a>"}, {"owner": {"reputation": 318, "user_id": 2959090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecab5392ceea34c60ad3d723617d127a?s=128&d=identicon&r=PG&f=1", "display_name": "siopao", "link": "https://stackoverflow.com/users/2959090/siopao"}, "edited": false, "score": 2, "creation_date": 1487804289, "post_id": 42403571, "comment_id": 71954644, "body": "Could you provide a sample input and expected output?"}, {"owner": {"reputation": 957, "user_id": 7219974, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-4_5zN89Hjdc/AAAAAAAAAAI/AAAAAAAAADI/AIKD9aq0H8s/photo.jpg?sz=128", "display_name": "Rafael Costa", "link": "https://stackoverflow.com/users/7219974/rafael-costa"}, "reply_to_user": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "edited": false, "score": 0, "creation_date": 1487812198, "post_id": 42403571, "comment_id": 71957290, "body": "@nicooga I just realized what i actually need is an <code>order_by</code>.."}, {"owner": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "edited": false, "score": 0, "creation_date": 1487827105, "post_id": 42403571, "comment_id": 71961759, "body": "So you want to order the suboptions by its category&#39;s name?"}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 7219974, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-4_5zN89Hjdc/AAAAAAAAAAI/AAAAAAAAADI/AIKD9aq0H8s/photo.jpg?sz=128", "display_name": "Rafael Costa", "link": "https://stackoverflow.com/users/7219974/rafael-costa"}, "edited": false, "score": 0, "creation_date": 1489199513, "post_id": 42412882, "comment_id": 72580685, "body": "Almost it! I joined all the tables and then ordered them all by their ids (category_id, activity_id, option_id and suboption_id)"}], "tags": [], "owner": {"reputation": 76, "user_id": 2417177, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433785509/picture?type=large", "display_name": "Martin Neiiendam", "link": "https://stackoverflow.com/users/2417177/martin-neiiendam"}, "is_accepted": true, "score": 2, "last_activity_date": 1487845240, "creation_date": 1487845240, "answer_id": 42412882, "question_id": 42403571, "link": "https://stackoverflow.com/questions/42403571/rails-how-to-group-by-with-many-models/42412882#42412882", "title": "Rails - How to group_by with many models?", "body": "<p>Depending on the size of the data set, sounds like you want to do a join, followed by an order</p>\n\n<pre><code>Suboption.joins(option: {activity: :category}).order('categories.name')\n</code></pre>\n\n<p>Will that work for you?</p>\n"}], "owner": {"reputation": 957, "user_id": 7219974, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-4_5zN89Hjdc/AAAAAAAAAAI/AAAAAAAAADI/AIKD9aq0H8s/photo.jpg?sz=128", "display_name": "Rafael Costa", "link": "https://stackoverflow.com/users/7219974/rafael-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42412882, "answer_count": 1, "score": 0, "last_activity_date": 1487845240, "creation_date": 1487802832, "last_edit_date": 1487812164, "question_id": 42403571, "link": "https://stackoverflow.com/questions/42403571/rails-how-to-group-by-with-many-models", "title": "Rails - How to group_by with many models?", "body": "<p>I have this chain of models:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rqPuZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rqPuZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I have a list of <code>suboptions</code>. I would like to <code>group_by</code> the suboptions by each of the above fathers. </p>\n\n<p>So, it would be divided into Categories, which would be divided into activities, which would be divided into options. Do you see?</p>\n\n<p>How can I do this??</p>\n\n<pre><code>Suboptions.all.group_by(???)\n# or\nSuboptions.all.order_by(????)\n# or ????\n</code></pre>\n\n<p>Example:</p>\n\n<p><strong>Suboptions</strong></p>\n\n<pre><code>+----+-----------+\n| id | option_id |\n+----+-----------+\n|  1 |         1 |\n|  2 |         2 |\n|  3 |         2 |\n|  4 |         4 |\n|  5 |         3 |\n+----+-----------+\n</code></pre>\n\n<p><strong>Options</strong></p>\n\n<pre><code>+----+-------------+\n| id | activity_id |\n+----+-------------+\n|  1 |           1 |\n|  2 |           2 |\n|  3 |           1 |\n|  4 |           3 |\n+----+-------------+\n</code></pre>\n\n<p><strong>Activities</strong></p>\n\n<pre><code>+----+-------------+\n| id | category_id |\n+----+-------------+\n|  1 |           1 |\n|  2 |           2 |\n|  3 |           1 |\n+----+-------------+\n</code></pre>\n\n<p><strong>Categories</strong></p>\n\n<pre><code>+----+------+\n| id | name |\n+----+------+\n|  1 | cat1 |\n|  2 | cat2 |\n+----+------+\n</code></pre>\n\n<p>then the search should return the suboptions with ids in the following order: <strong>[1,5,4,2,3]</strong>\n<em>( try to visualize it from the category to the suboption )</em></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "answers": [{"tags": [], "owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1487803989, "creation_date": 1487803989, "answer_id": 42403828, "question_id": 42403353, "link": "https://stackoverflow.com/questions/42403353/user-order-meal-item-and-their-activerecord-associations/42403828#42403828", "title": "User, Order, Meal, Item and their ActiveRecord associations", "body": "<p>To your first question, yes, you have set up a many-to-many relationship between your meals and items (assuming you have the correctly named database columns as well).</p>\n\n<p>To your second question, you may have to wright a custom query for it as I'm not sure if active record is setup to do the multi layer query you're asking it to do (i.e. get all the meals from all the orders for a given user). Something like</p>\n\n<p><code>past_meals = Set.new</code></p>\n\n<p><code>users.orders.each {|o| past_meals += o.meals}</code> would certainly work but could be made much more efficient if you needed it to.</p>\n\n<p>However, even though <code>has_many_and_belongs_to</code> does work for what you're doing, using it isn't recommended. The community is much more in favor of making a join table doing a has_many_through relationship with that.</p>\n\n<p>You in no means have to do that but most people would suggest it and it could save you some work down the road.</p>\n"}], "owner": {"reputation": 1, "user_id": 7607019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5b7db4f4c3ba08b3e9d1bd500736b1?s=128&d=identicon&r=PG&f=1", "display_name": "Amar", "link": "https://stackoverflow.com/users/7607019/amar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487803989, "creation_date": 1487801908, "question_id": 42403353, "link": "https://stackoverflow.com/questions/42403353/user-order-meal-item-and-their-activerecord-associations", "title": "User, Order, Meal, Item and their ActiveRecord associations", "body": "<p>I'm trying to figure out what the appropriate ActiveRecord associations would be for my models. I am building a meal customization and ordering system for a website where <strong>Users</strong> can select from a number of <strong>Items</strong> and build a <strong>Meal</strong> and repeat this multiple times for a single <strong>Order</strong>.</p>\n\n<p>My current setup is as follow:</p>\n\n<p><strong>User</strong></p>\n\n<pre><code>has_many :orders, :dependent =&gt; :destroy\nhas_many :meals, through: :orders\n</code></pre>\n\n<p><strong>Order</strong></p>\n\n<pre><code>belongs_to :user\nhas_and_belongs_to_many :meals\n</code></pre>\n\n<p><strong>Meal</strong></p>\n\n<pre><code>has_and_belongs_to_many :orders\nhas_and_belongs_to_many :items\n</code></pre>\n\n<p><strong>Item</strong></p>\n\n<pre><code>has_and_belongs_to_many :meals\n</code></pre>\n\n<p>I suppose my question then would come in two parts:</p>\n\n<p>1) does my current setup allow for multiple items to be assigned to a single meal, and possibly to other meals for a single order.</p>\n\n<p>2) will I be able to access a user's previous meals to provide a shortcut when making new orders.</p>\n\n<p>thanks a bunch in advance from a first time question asker!</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "edited": false, "score": 0, "creation_date": 1487802118, "post_id": 42403355, "comment_id": 71953792, "body": "That is not scalable... What if there are 10 arrays? or 15?"}, {"owner": {"reputation": 611, "user_id": 3578875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jE2Nl.jpg?s=128&g=1", "display_name": "utsav_deep", "link": "https://stackoverflow.com/users/3578875/utsav-deep"}, "reply_to_user": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "edited": false, "score": 0, "creation_date": 1487802475, "post_id": 42403355, "comment_id": 71953956, "body": "Edited the answer to consider this"}], "tags": [], "owner": {"reputation": 611, "user_id": 3578875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jE2Nl.jpg?s=128&g=1", "display_name": "utsav_deep", "link": "https://stackoverflow.com/users/3578875/utsav-deep"}, "is_accepted": false, "score": -1, "last_activity_date": 1487802223, "last_edit_date": 1487802223, "creation_date": 1487801920, "answer_id": 42403355, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r/42403355#42403355", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<p>You can try:</p>\n\n<pre><code>a.uniq.sort == b.uniq.sort and b.uniq.sort == c.uniq.sort and c.uniq.sort == d.uniq.sort \n</code></pre>\n\n<p>To optimise it, you can store the result of <code>b.uniq.sort</code> and <code>c.uniq.sort</code> in some variable to prevent repeated computation before comparing.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487804405, "post_id": 42403479, "comment_id": 71954690, "body": "Yes, or <code>ars.map(?:sort).uniq.size == 1</code>, though this doesn&#39;t have the short-circuit property that yours has."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1487804791, "post_id": 42403479, "comment_id": 71954814, "body": "You can use <code>ars[0]</code>, <code>ars[1..-1]</code> in order to leave the original array of arrays untouched."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 3, "last_activity_date": 1487802461, "creation_date": 1487802461, "answer_id": 42403479, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r/42403479#42403479", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<p>Take one array, sort it's unique elements and compare the other arrays with that as reference. Return false as soon as one is not equal.</p>\n\n<pre><code>ars = [a,b,c,d]\nref = ars.pop.uniq.sort #take care: pop mutates ars\np ars.all?{|ar| ar.uniq.sort == ref}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1487807359, "last_edit_date": 1487807359, "creation_date": 1487804256, "answer_id": 42403881, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r/42403881#42403881", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<p>Here's a way that doesn't involve sorting.</p>\n\n<p>Let <code>arr</code> be an array of the given arrays. If the arrays contained no duplicates, this would be simple:</p>\n\n<pre><code>first, *rest = arr\nrest.all? { |a| (first-a).empty? &amp;&amp; (a-first).empty? }\n</code></pre>\n\n<p>To deal with duplicates, we define a helper <code>Array#difference</code>:</p>\n\n<pre><code>class Array\n  def difference(other)\n    h = other.each_with_object(Hash.new(0)) { |e,h| h[e] += 1 }\n    reject { |e| h[e] &gt; 0 &amp;&amp; h[e] -= 1 }\n  end\nend\n</code></pre>\n\n<p>In a nutshell, if <code>n</code> elements of an array <code>a</code> equal a given object and <code>m</code> elements of an array <code>b</code> equal the same object, the array <code>a.difference(b)</code> will contain (the first) <code>[n-m,0].max</code> elements of <code>a</code> that equal the object .</p>\n\n<p>Then we can write the following.</p>\n\n<pre><code>first, *rest = arr\nrest.all? { |a| first.difference(a).empty? &amp;&amp; a.difference(first).empty? }\n</code></pre>\n\n<p>The block evaluates <code>true</code> if every element of <code>a</code> maps to a unique element of <code>first</code>, and vice-versa.</p>\n\n<p>It may seem a waste of time to create <code>Array#difference</code> for just this one problem. I have found, however, it to be a valuable member of my tool kit, having  wide application, so much so that I proposed it <a href=\"https://bugs.ruby-lang.org/issues/11815\" rel=\"nofollow noreferrer\">be added to the Ruby core</a>. The link gives examples of its uses and also contains a link to an SO answer I gave that contains a longer list of problems where it has found application. </p>\n"}, {"tags": [], "owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "is_accepted": false, "score": 1, "last_activity_date": 1487805972, "last_edit_date": 1487805972, "creation_date": 1487804513, "answer_id": 42403936, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r/42403936#42403936", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<p>There's a nice <code>reduce</code> solution:</p>\n\n<pre><code>ars.reduce { |a, v| a.uniq.sort == v.uniq.sort ? v.uniq.sort : break }\n</code></pre>\n\n<p>Which ends up to pretty clean code used in conjunction with <code>map</code>:</p>\n\n<pre><code>ars.map { |v| v.uniq.sort }.reduce { |a, v| a == v ? v : break }\n</code></pre>\n\n<p>The <em>map -> reduce</em> version is not the the best for performance since all the array elements get <code>uniq.sort</code>'d, but it's readable and functional style.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1487805574, "creation_date": 1487805574, "answer_id": 42404168, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r/42404168#42404168", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<p>Since you use uniq you can use intersection, without the uniq intersection couldn't be used to compare arrays.</p>\n\n<pre><code>arr.inject(:&amp;).sort == arr.first.uniq.sort\n</code></pre>\n\n<p>This would mean that arrays like </p>\n\n<pre><code>[3,2,3,1]\n[1,3,2]\n[3,2,1]\n[2,1,3,1]\n</code></pre>\n\n<p>would be the same</p>\n"}, {"comments": [{"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 1, "creation_date": 1487856018, "post_id": 42414123, "comment_id": 71979067, "body": "Nice one! I had the feeling <code>group_by</code> would bring to a clean solution but I missed it!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1487848335, "creation_date": 1487848335, "answer_id": 42414123, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r/42414123#42414123", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<pre><code>[%w[a b c], %w[c b a], %w[a a b c], %w[b a b c]]\n.group_by{|a| a.uniq.sort}.one? # =&gt; true\n\n[%w[a b c], %w[c b a], %w[a a b c], %w[b a b c d]]\n.group_by{|a| a.uniq.sort}.one? # =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 42414123, "answer_count": 6, "score": 1, "last_activity_date": 1487848335, "creation_date": 1487801516, "last_edit_date": 1487847791, "question_id": 42403268, "link": "https://stackoverflow.com/questions/42403268/check-if-multiple-more-than-two-arrays-match-regardless-of-element-order-in-r", "title": "Check if multiple (more than two) arrays match, regardless of element order in ruby", "body": "<p>If I have two arrays <code>a</code> and <code>b</code>. I can compare them as <code>a.uniq.sort == b.uniq.sort</code>. This will tell me if the elements in <code>a</code> match those in <code>b</code>.</p>\n\n<p>What if I have four arrays <code>a, b, c, d</code>? I need to make sure they are all equal to each other. What is the best way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": true, "score": 0, "last_activity_date": 1487800357, "creation_date": 1487800357, "answer_id": 42402984, "question_id": 42402810, "link": "https://stackoverflow.com/questions/42402810/rails-5-httparty-model-debugging-cant-test-if-its-working/42402984#42402984", "title": "Rails 5 httparty Model debugging cant test if its working", "body": "<p>Run your test from <code>rails console</code></p>\n\n<pre><code>$ rails c\n&gt; item_test = Item.find(\"227\")\n</code></pre>\n"}], "owner": {"reputation": 953, "user_id": 4874399, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FcT2W.jpg?s=128&g=1", "display_name": "Morphasis", "link": "https://stackoverflow.com/users/4874399/morphasis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 42402984, "answer_count": 1, "score": 0, "last_activity_date": 1487800357, "creation_date": 1487799612, "question_id": 42402810, "link": "https://stackoverflow.com/questions/42402810/rails-5-httparty-model-debugging-cant-test-if-its-working", "title": "Rails 5 httparty Model debugging cant test if its working", "body": "<p>Hi there i have the following item.rb That i made in a rails model.</p>\n\n<p>/app/models/item.rb</p>\n\n<pre><code>class Item &lt; ApplicationRecord\n  include HTTParty\n\n  base_uri 'http://services.runescape.com/m=itemdb_oldschool'\n\n  def initialize(name, description, price, icon_url)\n    self.name = name\n    self.description = description\n    self.price = price\n    self.icon_url = icon_url\n  end\n\n\n  def self.find(name)\n    response = get(\"/api/catalogue/detail.json?item=#{name}\")\n    if response.success?\n      self.new(\n      response[\"item\"][\"name\"],\n      response[\"item\"][\"description\"],\n      response[\"item\"][\"current\"][\"price\"],\n      response[\"item\"][\"icon_large\"]\n      )\n    else\n      # this just raises the net/http response that was raised\n      raise response.response\n    end\n  end\nend\n\nitem_test = Item.find(\"227\")\nputs item_test\n</code></pre>\n\n<p>As you can see its a very simple model im new to rails 5 / fairly new to rails all together and i don't know how to test if its functioning. The puts does not seem to output anywhere. I have also tried logger ect. But to no avail. Does anyone know the best way to tell if this is functioning / debugging.</p>\n\n<p>So please how do i test if this is functioning ?</p>\n\n<p>Sorry if this question is to simple. Im just really stuck and cant seem to find a answer thank you in advance ill be sure to respond quickly.</p>\n"}, {"tags": ["ruby", "loops"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 2, "last_activity_date": 1487800655, "last_edit_date": 1487800655, "creation_date": 1487799680, "answer_id": 42402830, "question_id": 42402761, "link": "https://stackoverflow.com/questions/42402761/until-statement-not-working-on-simple-code/42402830#42402830", "title": "Until statement not working on simple code", "body": "<pre><code># Remove these two lines and just use them in the while / until\n# puts \"Type 'roll' when you're ready\"\n# entry = gets.chomp\n\n\nentry = ''\n# Use String.downcase on entry because the user could type rOLL or RoLl\nwhile entry.downcase != 'roll' # or you can use until entry.downcase == 'roll'\n  puts \"Type 'roll' when you're ready.\"\n  entry = gets.chomp\nend\n</code></pre>\n\n<p>You are comparing entry to values that do not exist. You need to compare to a string. </p>\n\n<p><strong>Roll</strong> by convention should be a class / model / object of some kind. For example</p>\n\n<pre><code>class Roll\n   # create roll\n   def initialize()\n   end\nend\nroll = Roll.new\n# or for an existing class like Arrays\narray = Array.new\n</code></pre>\n\n<p><strong>ROLL</strong> by convention would be a previously defined constant.</p>\n\n<pre><code>ROLL = 7\n# =&gt; 7\nROLL = 4\n# =&gt; warning: already initialized constant ROLL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1487802419, "creation_date": 1487802419, "answer_id": 42403470, "question_id": 42402761, "link": "https://stackoverflow.com/questions/42402761/until-statement-not-working-on-simple-code/42403470#42403470", "title": "Until statement not working on simple code", "body": "<p>Here's an example of how you can do it in a more Ruby fashion that makes it more extensible.</p>\n\n<p>Start with making your <code>roll</code> method focused on one very simple thing:</p>\n\n<pre><code>def roll(sides = 6, count = 3)\n  Array.new(count) { rand(sides) + 1 }\nend\n</code></pre>\n\n<p>Note that <code>rand(5)</code> produces values in the range of <code>0..4</code>, it never yields <code>5</code>. The idea here is to return an array that's of arbitrary length, and by having exposed arguments with defaults you can re-purpose this method easily for other situations.</p>\n\n<p>Then move all of the display logic to the main loop:</p>\n\n<pre><code>loop do\n  puts \"Type 'roll' when you're ready.\"\n  entry = gets.chomp\n\n  case (entry.downcase)\n  when 'roll'\n    rolls = roll\n\n    puts \"You rolled #{rolls.join(', ')}\"\n\n    case (rolls.uniq.length)\n    when 1\n      puts \"TRIPS! Trip #{rolls[0]}s\"\n    when 2\n      puts \"Pair!\"\n    else\n      puts \"#{rolls.max} high\"\n    end\n\n    break\n  when 'quit'\n    break\n  end\nend\n</code></pre>\n\n<p>Using an array structure instead of three arbitrary variables helps considerably when working with them in aggregate. You can see how things like <code>uniq</code> and <code>max</code> are effortless in this situation.</p>\n"}], "owner": {"reputation": 13, "user_id": 7481506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18a3ea24b5831c03d408f828894677c5?s=128&d=identicon&r=PG&f=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/7481506/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1487851446, "accepted_answer_id": 42403470, "answer_count": 2, "score": 0, "last_activity_date": 1487802419, "creation_date": 1487799453, "last_edit_date": 1487801993, "question_id": 42402761, "link": "https://stackoverflow.com/questions/42402761/until-statement-not-working-on-simple-code", "closed_reason": "Not suitable for this site", "title": "Until statement not working on simple code", "body": "<p>I'm trying to set up a pretty simple dice roll and response in the prompt and it's not working right. I wanted the loop to keep asking until the user inputs roll, Roll or ROLL.</p>\n\n<pre><code>def roll()\n  x = rand(5) + 1\n  y = rand(5) + 1\n  z = rand(5) + 1\n  puts \"You rolled #{x},#{y},#{z}\"\n  if x == y &amp;&amp; y == z\n    puts \"TRIPS! Trip #{x}s\"\n  elsif x == y || y == z || x == z\n    puts \"Pair!\"\n  else\n    if x &gt; y &amp;&amp; x &gt; z\n      puts \"#{x} high\"\n    end\n    if y &gt; x &amp;&amp; y &gt; z\n      puts \"#{z} high\"\n    end\n    if z &gt; x &amp;&amp; z &gt; y\n      puts \"#{z} high\"\n    end\n  end\nend\n\nputs \"Type 'roll' when you're ready.\"\nentry = gets.chomp\n\nuntil entry == roll || Roll || ROLL\n  puts \"Type 'roll' when you're ready.\"\n  entry = gets.chomp\nend\n\nroll()\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "hash", "time-complexity"], "comments": [{"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1487796410, "post_id": 42401877, "comment_id": 71950758, "body": "Can you hash a string <code>&#39;num1:num2&#39;</code>?"}, {"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "reply_to_user": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1487796497, "post_id": 42401877, "comment_id": 71950812, "body": "@Dbz I wasn&#39;t sure if this would be efficient either--to convert the numbers to strings before hashing it. But if this is the best possible way then I&#39;ll certainly mark this as correct."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1487796570, "post_id": 42401877, "comment_id": 71950858, "body": "are the values all positive? are they integers?"}, {"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1487796642, "post_id": 42401877, "comment_id": 71950897, "body": "was hoping for general answer-- but if that&#39;s too broad, perhaps just integers positive and negative."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487796836, "post_id": 42401877, "comment_id": 71951026, "body": "Do you mean hashing as in SHA256 or do you mean hashing as in &quot;for use within a Hash as a key&quot;? What&#39;s the bigger problem you&#39;re trying to solve? Can you give example inputs here? Like are these numbers <code>1..10</code> or <code>290..3345362</code>?"}, {"owner": {"reputation": 3910, "user_id": 1770952, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743e6716b63a6502a10a212655005e81?s=128&d=identicon&r=PG", "display_name": "Ivan Gritsenko", "link": "https://stackoverflow.com/users/1770952/ivan-gritsenko"}, "edited": false, "score": 1, "creation_date": 1487797268, "post_id": 42401877, "comment_id": 71951284, "body": "What is the purpose of such hash table data structure? How do you use it after construction?"}, {"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1487813919, "post_id": 42401877, "comment_id": 71957845, "body": "Thanks for the questions--editing to include the answers"}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 1, "creation_date": 1487911790, "post_id": 42401877, "comment_id": 72007049, "body": "@Sunny did we answer your question? If not, what else would you still like to know?"}, {"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "reply_to_user": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1487917642, "post_id": 42401877, "comment_id": 72009129, "body": "@Dbz yes-- thank you! I was unclear in my question about what I needed to hash value for-- was simply asking about using an array as a hash key. So hash[arr] instead of hash[arr.hash]. I edited earlier to explain that but I&#39;m upvoting answers that explained otherwise"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487796895, "post_id": 42402053, "comment_id": 71951070, "body": "The values returned by <code>hash</code> are not guaranteed to be unique to avoid collisions. They&#39;re just supposed to be mostly unique-ish."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1487797855, "post_id": 42402053, "comment_id": 71951624, "body": "That&#39;s the <i>definition</i> of a hash function: it maps a large(r) (potentially infinite) input space to a small(er) finite output space. The Pigeonhole Principle guarantees that there <i>must</i> be collisions."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1487798008, "post_id": 42402053, "comment_id": 71951697, "body": "This is true. Are hash collisions a big deal when hashing array pairs of numbers? I don&#39;t know the use case, but I doubt it; however, this is worth bringing up."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487798187, "post_id": 42402053, "comment_id": 71951800, "body": "@Dbz I just mean to contrast <code>hash</code>, which seems to produce 64-bit values in newer versions of Ruby, with things like SHA512 or a UUID where those are highly unlikely to collide. As J&#246;rg mentions, due to the pigeonhole principle and additionally due to the <a href=\"https://en.wikipedia.org/wiki/Birthday_problem\" rel=\"nofollow noreferrer\">Birthday Paradox</a> it&#39;s highly probable that 64-bit values will collide."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487798277, "post_id": 42402053, "comment_id": 71951849, "body": "@dbz The Ruby <code>hash</code> function is intended to <i>minimize</i> collisions, not avoid them. This is the backbone of any &quot;hash look table&quot;, as in things like Set and Hash in Ruby. In the event of a collision the hash table function just does additional comparisons, it all works out, but only because the original values are preserved."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1487798687, "post_id": 42402053, "comment_id": 71952107, "body": "So if collisions are in fact an issue, then I would recommend using the string solution rather than the hash one"}, {"owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "edited": false, "score": 0, "creation_date": 1487808357, "post_id": 42402053, "comment_id": 71956171, "body": "@Dbz The string solution uses hashing under the hood, which works in the exact same way.  It is an algorithm that is <i>probably</i> fast, not guaranteed fast.  It is widely used because in practice &quot;probably&quot; is plenty good."}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": false, "score": 1, "last_activity_date": 1487798753, "last_edit_date": 1487798753, "creation_date": 1487796749, "answer_id": 42402053, "question_id": 42401877, "link": "https://stackoverflow.com/questions/42401877/using-a-pair-of-values-as-a-key/42402053#42402053", "title": "Using a pair of values as a key", "body": "<p>If you are using a <code>range</code> or <code>array</code>, then you can also call <code>hash</code> on it and use that.</p>\n\n<p><code>(num1..num2).hash</code>\n<code>[num1, num2].hash</code></p>\n\n<p>That will return a key that you can use as a hash. I have no idea if this is efficient. It does show the source code on the <a href=\"https://ruby-doc.org/core-2.2.0/Range.html#method-i-hash\" rel=\"nofollow noreferrer\">range documentation</a> and the <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-hash\" rel=\"nofollow noreferrer\">array documentation</a></p>\n\n<p>Another way I would do it is to turn the numbers into strings. This is the better solution if you are worried about hash collisions.</p>\n\n<p><code>'num1:num2'</code></p>\n\n<p>And the ruby-esque ways that I would solve your problem are:</p>\n\n<p><code>number_array.combination(2).each { |arr| my_hash[arr.hash] = arr }</code>\n<code>number_array.combination(2).each { |arr| my_hash[arr.join(\":\")] = arr }</code></p>\n"}, {"comments": [{"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1487797824, "post_id": 42402295, "comment_id": 71951601, "body": "This does seem to be the same answer as mine :) with more explanation on  how <code>hash</code> works"}], "tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": true, "score": 1, "last_activity_date": 1487797878, "last_edit_date": 1592644375, "creation_date": 1487797636, "answer_id": 42402295, "question_id": 42401877, "link": "https://stackoverflow.com/questions/42401877/using-a-pair-of-values-as-a-key/42402295#42402295", "title": "Using a pair of values as a key", "body": "<h1>Just do it.</h1>\n<p>You can simply hash on the array...</p>\n<h1>Verification</h1>\n<p>Let me show a little experiment:</p>\n<pre><code>array = [ [1,2], [3,4], [&quot;a&quot;, &quot;b&quot;], [&quot;c&quot;, 5] ]\n\nhash = {}\n\narray.each do |e|\n  e2 = e.clone\n\n  e &lt;&lt; &quot;dummy&quot;\n  e2 &lt;&lt; &quot;dummy&quot;\n\n  hash[e] = (hash[e] || 0) + 1 \n\n  hash[e2] = (hash[e2] || 0) + 1\n\n  puts &quot;e == e2: #{(e==e2).inspect}, e.id = #{e.object_id}, e.hash = #{e.hash}, e2.id = #{e2.object_id}, e2.hash = #{e2.hash}&quot;\nend\n\nputs  hash.inspect\n    \n</code></pre>\n<p>As you see, I take a few arrays, clone them, modify them separately; after this, we are sure that <code>e</code> and <code>e2</code> are different arrays (i.e. different object IDs); but they contain the same elements. After this, the two different arrays are used as hash keys; and since they have the same content, are hashed together.</p>\n<pre><code>e == e2: true, e.id = 19797864, e.hash = -769884714, e2.id = 19797756, e2.hash = -769884714\ne == e2: true, e.id = 19797852, e.hash = -642596098, e2.id = 19797588, e2.hash = -642596098\ne == e2: true, e.id = 19797816, e.hash = 104945655, e2.id = 19797468, e2.hash = 104945655\ne == e2: true, e.id = 19797792, e.hash = -804444135, e2.id = 19797348, e2.hash = -804444135\n{[1, 2, &quot;dummy&quot;]=&gt;2, [3, 4, &quot;dummy&quot;]=&gt;2, [&quot;a&quot;, &quot;b&quot;, &quot;dummy&quot;]=&gt;2, [&quot;c&quot;, 5, &quot;dummy&quot;]=&gt;2}\n</code></pre>\n<p>As you see, you can not only use arrays as keys, but it also recognizes them as being the &quot;same&quot; (and not some weird object identity which it could also be).</p>\n<h1>Caveat</h1>\n<p>Obviously this works only to a point. The <em>contents</em> of the arrays must recursively be well-defined with regards to hashing. I.e., you can use sane things like strings, numbers, other arrays, even <code>nil</code> in there.</p>\n<h1>Reference</h1>\n<p>From <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.0/Hash.html</a> :</p>\n<blockquote>\n<p>Two objects refer to the same hash key when their hash value is identical and the two objects are eql? to each other.</p>\n</blockquote>\n<p>From <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-eql-3F\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.0/Array.html#method-i-eql-3F</a> :</p>\n<blockquote>\n<p>eql?(other) \u2192 true or false</p>\n<p>Returns true if self and other are the same object, <em>or are both arrays with the same content</em> (according to Object#eql?).</p>\n<p>hash \u2192 integer</p>\n<p>Compute a hash-code for this array.</p>\n<p>Two arrays with the <em>same content will have the same hash code</em> (and will compare using eql?).</p>\n</blockquote>\n<p>Emphasis mine.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1487801753, "creation_date": 1487801753, "answer_id": 42403318, "question_id": 42401877, "link": "https://stackoverflow.com/questions/42401877/using-a-pair-of-values-as-a-key/42403318#42403318", "title": "Using a pair of values as a key", "body": "<p>A hash table, where the key is the pair of nums and the value is their sum:</p>\n\n<pre><code>h = {}\n[1,4,6,8].combination(2){|ar| h[ar] = ar.sum}\np h  #=&gt;{[1, 4]=&gt;5, [1, 6]=&gt;7, [1, 8]=&gt;9, [4, 6]=&gt;10, [4, 8]=&gt;12, [6, 8]=&gt;14}\n</code></pre>\n\n<p>Note that using arrays as hash keys is no problem at all. To  extend this to 3,4, or 5 numbers use <code>combination(3) #or 4 or 5</code>.</p>\n"}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 42402295, "answer_count": 3, "score": 1, "last_activity_date": 1487813953, "creation_date": 1487796182, "last_edit_date": 1487813953, "question_id": 42401877, "link": "https://stackoverflow.com/questions/42401877/using-a-pair-of-values-as-a-key", "title": "Using a pair of values as a key", "body": "<p>Very frequently I've had the need to hash a pair of values. Often, I just generate a range between num1 and num2 and hash that as a key, but that's pretty slow because the distance between those two numbers can be quite large.</p>\n\n<p>How can one go about hashing a pair of values to a table? For example, say I'm iterating through an array and want to hash every single possible pair of values into a hash table, where the key is the pair of nums and the value is their sum. What's an efficient way to do this? I've also thought about hashing an an array as the key, but that doesn't work.</p>\n\n<p>Also, how would one go about extending this to 3,4, or 5 numbers?</p>\n\n<p>EDIT:\nI'm referring to hashing for O(1) lookup in a hashtable.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1330, "user_id": 2671441, "user_type": "registered", "profile_image": "https://graph.facebook.com/802794209/picture?type=large", "display_name": "bejado", "link": "https://stackoverflow.com/users/2671441/bejado"}, "is_accepted": false, "score": 1, "last_activity_date": 1487796165, "creation_date": 1487796165, "answer_id": 42401868, "question_id": 42401831, "link": "https://stackoverflow.com/questions/42401831/why-does-4-4-evaluate-true-and-why-does-9-9-evaluate-true-in-ruby/42401868#42401868", "title": "Why does -4 &lt;= -4 evaluate true and why does 9&gt;=9 evaluate true in Ruby?", "body": "<p><code>-4 &lt;= -4</code> means -4 is less than <strong>or equal to</strong> -4. Since -4 is the same as -4, it evaluates to true.</p>\n\n<p>The same is true with <code>9 &gt;= 9</code>. 9 is equal to 9, and thus the expression evaluates to true.</p>\n"}, {"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 0, "last_activity_date": 1487796167, "creation_date": 1487796167, "answer_id": 42401870, "question_id": 42401831, "link": "https://stackoverflow.com/questions/42401831/why-does-4-4-evaluate-true-and-why-does-9-9-evaluate-true-in-ruby/42401870#42401870", "title": "Why does -4 &lt;= -4 evaluate true and why does 9&gt;=9 evaluate true in Ruby?", "body": "<p><code>&lt;=</code> means \"less than to equal to\". -4 is equal to -4, so it's also \"less than <strong>or equal to</strong>\" -4.</p>\n\n<p>Similarly, <code>&gt;=</code> means \"greater than or equal to\". 9 is equal to 9, so it's also \"greater than <strong>or equal to</strong>\" 9.</p>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1487796173, "creation_date": 1487796173, "answer_id": 42401873, "question_id": 42401831, "link": "https://stackoverflow.com/questions/42401831/why-does-4-4-evaluate-true-and-why-does-9-9-evaluate-true-in-ruby/42401873#42401873", "title": "Why does -4 &lt;= -4 evaluate true and why does 9&gt;=9 evaluate true in Ruby?", "body": "<p>Because <code>&lt;=</code> means \"less than <em>or</em> equal to\", and <code>&gt;=</code> means \"greater than <em>or</em> equal to\", and all numbers are equal to themselves.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 7426614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0ae3f39635ab52617f90cdb044f9087?s=128&d=identicon&r=PG&f=1", "display_name": "ahsw", "link": "https://stackoverflow.com/users/7426614/ahsw"}, "edited": false, "score": 0, "creation_date": 1487801484, "post_id": 42402006, "comment_id": 71953503, "body": "I know its a silly question but thank you so much for explaining it! Makes so much sense to me now."}, {"owner": {"reputation": 3643, "user_id": 655424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4325b2c05540fd863eea93b1359999b5?s=128&d=identicon&r=PG", "display_name": "Atreys", "link": "https://stackoverflow.com/users/655424/atreys"}, "reply_to_user": {"reputation": 37, "user_id": 7426614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0ae3f39635ab52617f90cdb044f9087?s=128&d=identicon&r=PG&f=1", "display_name": "ahsw", "link": "https://stackoverflow.com/users/7426614/ahsw"}, "edited": false, "score": 0, "creation_date": 1487803378, "post_id": 42402006, "comment_id": 71954307, "body": "Your welcome; it is good to have solid math background for logic in programming."}], "tags": [], "owner": {"reputation": 3643, "user_id": 655424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4325b2c05540fd863eea93b1359999b5?s=128&d=identicon&r=PG", "display_name": "Atreys", "link": "https://stackoverflow.com/users/655424/atreys"}, "is_accepted": false, "score": 5, "last_activity_date": 1487796620, "creation_date": 1487796620, "answer_id": 42402006, "question_id": 42401831, "link": "https://stackoverflow.com/questions/42401831/why-does-4-4-evaluate-true-and-why-does-9-9-evaluate-true-in-ruby/42402006#42402006", "title": "Why does -4 &lt;= -4 evaluate true and why does 9&gt;=9 evaluate true in Ruby?", "body": "<p><code>&lt;=</code> the is less-than-or-equal-to operator</p>\n\n<p>To answer the question whether <code>a &lt;= b</code> for numbers <code>a</code> and <code>b</code> you can ask yourself two questions:</p>\n\n<ol>\n<li>is <code>a</code> less than <code>b</code>?</li>\n<li>is <code>a</code> equal to <code>b</code>?</li>\n</ol>\n\n<p>If either question results in \"Yes\", then the <code>&lt;=</code> operator will evaluate to <code>true</code>.</p>\n\n<p>For your example</p>\n\n<ul>\n<li><code>-4 &lt;= -4</code>\n\n<ol>\n<li>is <code>-4</code> less than <code>-4</code>? \"No\"</li>\n<li>is <code>-4</code> equal to <code>-4</code>? \"Yes\"</li>\n</ol></li>\n</ul>\n\n<p>Since the answer to the second question is \"Yes\", <code>-4 &lt;= -4</code> is <code>true</code></p>\n"}], "owner": {"reputation": 37, "user_id": 7426614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0ae3f39635ab52617f90cdb044f9087?s=128&d=identicon&r=PG&f=1", "display_name": "ahsw", "link": "https://stackoverflow.com/users/7426614/ahsw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1487799448, "answer_count": 4, "score": 0, "last_activity_date": 1487796620, "creation_date": 1487796042, "question_id": 42401831, "link": "https://stackoverflow.com/questions/42401831/why-does-4-4-evaluate-true-and-why-does-9-9-evaluate-true-in-ruby", "closed_reason": "Needs details or clarity", "title": "Why does -4 &lt;= -4 evaluate true and why does 9&gt;=9 evaluate true in Ruby?", "body": "<p>was working on some practice exercise in Ruby on codeacademy and came across these two questions. Not sure if I clearly understand why does -4 &lt;= -4 evaluate true and why does 9>=9 evaluate true in Ruby? Could someone please explain so I can have a better understanding? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "activerecord", "devise"], "comments": [{"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1487796250, "post_id": 42401825, "comment_id": 71950668, "body": "Is <code>location</code> is the attribute in the profile table ?"}, {"owner": {"reputation": 534, "user_id": 1520965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d3599fdb032a18e0066027529da8085?s=128&d=identicon&r=PG&f=1", "display_name": "Manuk Karapetyan", "link": "https://stackoverflow.com/users/1520965/manuk-karapetyan"}, "reply_to_user": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1487796324, "post_id": 42401825, "comment_id": 71950706, "body": "@Ahmadhamza nope its attribute of profiles table"}], "answers": [{"comments": [{"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 534, "user_id": 1520965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d3599fdb032a18e0066027529da8085?s=128&d=identicon&r=PG&f=1", "display_name": "Manuk Karapetyan", "link": "https://stackoverflow.com/users/1520965/manuk-karapetyan"}, "edited": false, "score": 0, "creation_date": 1487797180, "post_id": 42401919, "comment_id": 71951238, "body": "@arm2pro you welcome. If my answer solved your issue, please don&#39;t forget to mark it as accepted"}], "tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1487796331, "creation_date": 1487796331, "answer_id": 42401919, "question_id": 42401825, "link": "https://stackoverflow.com/questions/42401825/has-one-belongs-to-association-attribute-validation/42401919#42401919", "title": "has_one belongs_to association attribute validation", "body": "<p><code>validates</code> method accepts <code>if</code> option:</p>\n\n<pre><code># app/model/profile.rb\n  class Profile &lt; ApplicationRecord\n    belongs_to :user    \n    validates :location, presence: true, if: \"user.seller?\"\n    validates :company_code, presence: true, if: \"user.buyer?\"\n  end\n</code></pre>\n\n<p>Also, <code>current_user.role == \"seller\"</code> is obsolete. Rails automatically sets up additional methods in model for enum option values, therefore you may just write: <code>current_user.seller?</code>, etc.</p>\n"}], "owner": {"reputation": 534, "user_id": 1520965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d3599fdb032a18e0066027529da8085?s=128&d=identicon&r=PG&f=1", "display_name": "Manuk Karapetyan", "link": "https://stackoverflow.com/users/1520965/manuk-karapetyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 42401919, "answer_count": 1, "score": 2, "last_activity_date": 1487797550, "creation_date": 1487796025, "last_edit_date": 1487797550, "question_id": 42401825, "link": "https://stackoverflow.com/questions/42401825/has-one-belongs-to-association-attribute-validation", "title": "has_one belongs_to association attribute validation", "body": "<p>I use devise for user authentication. Have two models <code>User</code> and <code>Profile</code> which are associated to each other like this </p>\n\n<pre><code>  #app/model/user.rb\n  class User &lt; ApplicationRecord\n    devise :database_authenticatable, :registerable,\n           :recoverable, :rememberable, :trackable, :validatable\n\n    has_one :profile, dependent: :destroy\n    enum role: [:admin, :seller, :buyer]\n  end\n\n #app/model/profile.rb\n  class Profile &lt; ApplicationRecord\n    belongs_to :user\n  end\n</code></pre>\n\n<p>As you can see I have also role for users. </p>\n\n<p>Here is forms for registrations of both models.</p>\n\n<pre><code>  #user registration form\n  &lt;%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n    ...\n    &lt;%= f.select :role, collection: User.roles.keys.last(2) %&gt;\n    &lt;%= f.input :mobile_number, required: true, autofocus: true  %&gt;\n    ...\n  &lt;% end %&gt;\n\n  #profile registration form \n  &lt;%= simple_form_for(@profile) do |f| %&gt;\n    ...\n    &lt;% if current_user.seller? %&gt;\n      &lt;%= f.input :location, required: true %&gt;\n    &lt;% else %&gt;\n      &lt;%= f.input :company_code, required: true %&gt;\n    &lt;% end %&gt;\n    ...\n  &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>When current user is <code>seller</code> I need to validate presence of <code>:location</code> , when user is <code>buyer</code> then validate presence of <code>:company_code</code>.\nHow can I achieve that? I appreciate any helps , Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "comments": [{"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 1, "creation_date": 1487796524, "post_id": 42401766, "comment_id": 71950832, "body": "Are you trying to run your rails server and the rake command in one shot? Did you try running <code>RAILS_ENV=production bundle exec rake delete:delete_5_old_days</code>?"}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487796598, "post_id": 42401766, "comment_id": 71950872, "body": "This is not related to your error but your activerecord query is incorrect. It should be <code>Post.where([&#39;created_at &lt; ?&#39;, 1.day.ago])</code>"}, {"owner": {"reputation": 11, "user_id": 7607277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a4ffd800feaf95f9665e4123cf7649c?s=128&d=identicon&r=PG&f=1", "display_name": "buckind", "link": "https://stackoverflow.com/users/7607277/buckind"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487797149, "post_id": 42401766, "comment_id": 71951225, "body": "@archana Oh, sorry for the typo and yes, I was trying to do that. Tried your suggestion but it gave the same error, tried running just <code>bundle exec rake delete:delete_5_old_days_old</code> same error."}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487797381, "post_id": 42401766, "comment_id": 71951346, "body": "Can you stop spring <code>spring stop</code> and then run your rake?"}, {"owner": {"reputation": 11, "user_id": 7607277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a4ffd800feaf95f9665e4123cf7649c?s=128&d=identicon&r=PG&f=1", "display_name": "buckind", "link": "https://stackoverflow.com/users/7607277/buckind"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487797621, "post_id": 42401766, "comment_id": 71951477, "body": "@archana spring was not running."}, {"owner": {"reputation": 11, "user_id": 7607277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a4ffd800feaf95f9665e4123cf7649c?s=128&d=identicon&r=PG&f=1", "display_name": "buckind", "link": "https://stackoverflow.com/users/7607277/buckind"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487799737, "post_id": 42401766, "comment_id": 71952668, "body": "@archana well, honestly I don&#39;t know what just happened but I just relaunched the console, did <code>bundle exec rake delete:delete_5_old_days</code> and it worked this time... I had relaunched the console already just <i>to be sure</i> but it&#39;s working now :-)"}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487800097, "post_id": 42401766, "comment_id": 71952833, "body": "I&#39;m glad to hear that."}], "owner": {"reputation": 11, "user_id": 7607277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a4ffd800feaf95f9665e4123cf7649c?s=128&d=identicon&r=PG&f=1", "display_name": "buckind", "link": "https://stackoverflow.com/users/7607277/buckind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487840859, "creation_date": 1487795825, "question_id": 42401766, "link": "https://stackoverflow.com/questions/42401766/ror-error-trying-to-run-task-require-cannot-load-such-file-rack-handler-r", "title": "RoR Error trying to run task: `require&#39;: cannot load such file -- rack/handler/rake", "body": "<p>I'm having a problem whenever I try to run a Rake task that deletes certain records from the database older than 5 days, I just wanted to test it out first so I used just 1 day instead, anyway, after I execute <code>rails s RAILS_ENV=production rake delete:delete_5_old_days</code> I get that error: <code>require': cannot load such file -- rack/handler/rake</code></p>\n\n<p>This is the whole traceback </p>\n\n<pre><code>/home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler/runtime.rb:91:in `require': cannot load such file -- rack/handler/rake (LoadError)\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler/runtime.rb:86:in `each'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler/runtime.rb:86:in `block in require'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler/runtime.rb:75:in `each'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler/runtime.rb:75:in `require'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/bundler-1.14.5/lib/bundler.rb:107:in `require'\n    from /home/miguel/RubymineProjects/adopt_bronze/config/application.rb:7:in `&lt;top (required)&gt;'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:88:in `require'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:88:in `block in server'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:85:in `tap'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:85:in `server'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from /home/miguel/RubymineProjects/adopt_bronze/bin/rails:9:in `require'\n    from /home/miguel/RubymineProjects/adopt_bronze/bin/rails:9:in `&lt;top (required)&gt;'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/lib/spring/client/rails.rb:28:in `load'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/lib/spring/client/rails.rb:28:in `call'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/lib/spring/client/command.rb:7:in `call'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/lib/spring/client.rb:30:in `run'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/bin/spring:49:in `&lt;top (required)&gt;'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/lib/spring/binstub.rb:31:in `load'\n    from /home/miguel/.rvm/gems/ruby-2.3.1/gems/spring-2.0.1/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    from /home/miguel/RubymineProjects/adopt_bronze/bin/spring:15:in `require'\n    from /home/miguel/RubymineProjects/adopt_bronze/bin/spring:15:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>And the task that I'm trying to execute is this:</p>\n\n<pre><code>namespace :delete do\n  desc 'Delete records older than 5 days'\n  task delete_5_days_old: :environment do\n    Post.where(['created_at &lt; ?, 1_day_ago']).each do |post|\n      post.destroy\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487802062, "post_id": 42399840, "comment_id": 71953769, "body": "I tried running the rvm gemset commands, but still get Gemfile not found.                                                 I am typing...rvm gemset use yourApp Using ruby-2.4.0 with gemset yourApp I am typing...gem install rails Fetching: rails-5.0.1.gem (100%) Successfully installed rails-5.0.1 Parsing documentation for rails-5.0.1 Installing ri documentation for rails-5.0.1 Done installing documentation for rails after 0 seconds 1 gem installed I am typing...rails new yourApp /Users/Matt/Documents/Gemfile not found"}, {"owner": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487802829, "post_id": 42399840, "comment_id": 71954114, "body": "Is there a way to manually add the necessary Gemfile into my Documents directory since the installers aren&#39;t working properly?"}], "tags": [], "owner": {"reputation": 46, "user_id": 5412015, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NJVOfNKgdZE/AAAAAAAAAAI/AAAAAAAAAeM/oKdZ7qDIoXU/photo.jpg?sz=128", "display_name": "charliesttrada", "link": "https://stackoverflow.com/users/5412015/charliesttrada"}, "is_accepted": false, "score": 1, "last_activity_date": 1487789330, "creation_date": 1487789330, "answer_id": 42399840, "question_id": 42399151, "link": "https://stackoverflow.com/questions/42399151/gemfile-not-found-after-typing-rails-v/42399840#42399840", "title": "&#39;Gemfile not found&#39; after typing rails -v", "body": "<p>RVM can solve your problem, you can have several versions of ruby installed, what you should do is create a gemset per project.</p>\n\n<p>To install it go to: <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a>, use Install RVM stable with ruby.</p>\n\n<p>After installing it, go to the directory where you want to create the new rails project and make the following commands:</p>\n\n<p>rvm gemset create yourApp\nrvm gemset use yourAppName\ngem install rails\nrails new yourAppName</p>\n\n<p>And you must do that for every project you want to create, this will help you to keep the appropriate version of ruby, rails, etc. For each project.</p>\n"}, {"comments": [{"owner": {"reputation": 5799, "user_id": 7128479, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hF0yx.jpg?s=128&g=1", "display_name": "grizzthedj", "link": "https://stackoverflow.com/users/7128479/grizzthedj"}, "edited": false, "score": 0, "creation_date": 1487793112, "post_id": 42400500, "comment_id": 71948921, "body": "You can also try sourcing your ~/.bash_profile (<code>source ~&#47;.bash_profile</code>) as well to ensure that updated paths etc. are loaded in the terminal you are working in"}, {"owner": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487802408, "post_id": 42400500, "comment_id": 71953920, "body": "I tried reinstalling RVM and rails within my project directory but still get &#39;Gemfile not found&#39;. I do notice that when I install rails only 1 gem is installed, which I believe is unusual. Could you elaborate on sourcing my bash_profile?"}, {"owner": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487802684, "post_id": 42400500, "comment_id": 71954047, "body": "It appears as if the problem is isolated within my Documents directory, as I&#39;ve tried cding into other folders from my Root directory and rails appears to work. I know at one point, I was fiddling around in my Documents and deleted a hidden Gemfile and Gemlock file trying to address a different issue."}, {"owner": {"reputation": 5799, "user_id": 7128479, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hF0yx.jpg?s=128&g=1", "display_name": "grizzthedj", "link": "https://stackoverflow.com/users/7128479/grizzthedj"}, "reply_to_user": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487806997, "post_id": 42400500, "comment_id": 71955683, "body": "Gemfiles are specific to the a project. I would recommend creating a subfolder under Documents for your rails app, then run <code>rails new ...</code> from that directory(since you are no having issues in other directories). &quot;Gemfile not found&quot; usually occurs after running <code>bundle install</code>, and there is no Gemfile present."}, {"owner": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487809891, "post_id": 42400500, "comment_id": 71956615, "body": "I&#39;m having issues with all directories under Documents (including the Documents root). If I create a new subfolder within Documents it also experiences the same Gemfile problem. Rails is only working for directories outside the Documents tree."}, {"owner": {"reputation": 5799, "user_id": 7128479, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hF0yx.jpg?s=128&g=1", "display_name": "grizzthedj", "link": "https://stackoverflow.com/users/7128479/grizzthedj"}, "reply_to_user": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "edited": false, "score": 0, "creation_date": 1487813552, "post_id": 42400500, "comment_id": 71957740, "body": "I just did a test and I can create rails apps in the Documents directory, or and subdirectory. It sounds like there are some issues specific to your local dev environment. Did you make any changes to the Documents directory at the OS level? If so, maybe this is causing a conflict.  Perhaps just use a directory outside Documents so that you can move forward? It is difficult to troubleshoot this issue without actually seeing things happening real time."}], "tags": [], "owner": {"reputation": 5799, "user_id": 7128479, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hF0yx.jpg?s=128&g=1", "display_name": "grizzthedj", "link": "https://stackoverflow.com/users/7128479/grizzthedj"}, "is_accepted": false, "score": 1, "last_activity_date": 1487791477, "creation_date": 1487791477, "answer_id": 42400500, "question_id": 42399151, "link": "https://stackoverflow.com/questions/42399151/gemfile-not-found-after-typing-rails-v/42400500#42400500", "title": "&#39;Gemfile not found&#39; after typing rails -v", "body": "<p>It seems like you have a broken installation of ruby/rails. </p>\n\n<p>Use RVM(Ruby Version Manager) to manage your ruby versions/installations. It is still good to use even if you are only using one version. Once RVM is installed, you can the install rails gem. It keeps everything clean so that you don't have to deal with paths etc.</p>\n\n<p>Try the following to get your environment in 'rails' shape: </p>\n\n<h1>Install RVM</h1>\n\n<pre><code>curl -sSL https://get.rvm.io | bash -s stable --ruby\n</code></pre>\n\n<h1>Install Ruby(change the version to whatever you wish)</h1>\n\n<pre><code>rvm install 2.3.1 \n</code></pre>\n\n<h1>Set the default ruby version</h1>\n\n<pre><code>rvm default use 2.3.1\n</code></pre>\n\n<h1>Go to a directory where you keep your projects</h1>\n\n<pre><code>cd /path/to/my/projects\n</code></pre>\n\n<h1>Install rails gem</h1>\n\n<pre><code>gem install rails \n</code></pre>\n\n<h1>Check rails version</h1>\n\n<pre><code>rails -v\n</code></pre>\n\n<h1>Create a new Project as a test</h1>\n\n<pre><code>rails new test-project\n</code></pre>\n\n<p>Hopefully this works for you!</p>\n"}], "owner": {"reputation": 1, "user_id": 7606540, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_j6DyZtybdc/AAAAAAAAAAI/AAAAAAAACN4/3inyiUBhCgY/photo.jpg?sz=128", "display_name": "Matt Nguyen", "link": "https://stackoverflow.com/users/7606540/matt-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487791477, "creation_date": 1487786936, "last_edit_date": 1592644375, "question_id": 42399151, "link": "https://stackoverflow.com/questions/42399151/gemfile-not-found-after-typing-rails-v", "title": "&#39;Gemfile not found&#39; after typing rails -v", "body": "<p>Noob here.</p>\n<p>I recently installed rails following the instructions laid out here &gt;&gt; <a href=\"http://installrails.com/steps/install_rails\" rel=\"nofollow noreferrer\">http://installrails.com/steps/install_rails</a></p>\n<p>When I input rails -v in my root directory I get the rails version as expected:</p>\n<blockquote>\n<p>I am typing...rails -v\nRails 5.0.1</p>\n</blockquote>\n<p>However, when I cd into my documents folder I am getting 'Gemfile not found' :</p>\n<blockquote>\n<p>I am typing...cd documents</p>\n<p>I am typing...rails -v</p>\n<p><strong>/Users/Matt/Documents/Gemfile not found</strong></p>\n</blockquote>\n<p>I tried to install rails inside the documents directory, but still received the same output:</p>\n<blockquote>\n<p>I am typing...gem install rails</p>\n<p>Successfully installed rails-5.0.1</p>\n<p>Parsing documentation for rails-5.0.1</p>\n<p>Done installing documentation for rails after 0 seconds</p>\n<p>1 gem installed</p>\n<p>I am typing...rails -v</p>\n<p><strong>/Users/Matt/Documents/Gemfile not found</strong></p>\n</blockquote>\n<p>I can't create any rails applications with rails new while inside my documents folder either. Here is my ruby load_path:</p>\n<blockquote>\n<p>I am typing...irb</p>\n<p>2.4.0 :001 &gt; $LOAD_PATH</p>\n<p>=&gt; [&quot;/Users/Matt/.rvm/gems/ruby-2.4.0@global/gems/did_you_mean-1.1.0/lib&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/site_ruby/2.4.0&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/site_ruby/2.4.0/x86_64-darwin15&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/site_ruby&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/vendor_ruby/2.4.0&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/vendor_ruby/2.4.0/x86_64-\ndarwin15&quot;, &quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/vendor_ruby&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0&quot;,\n&quot;/Users/Matt/.rvm/rubies/ruby-2.4.0/lib/ruby/2.4.0/x86_64-darwin15&quot;]</p>\n</blockquote>\n<p>Thank you for the help!</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ssl", "openssl"], "comments": [{"owner": {"reputation": 678, "user_id": 1392364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d83424400568ec29f61758e65502d27?s=128&d=identicon&r=PG", "display_name": "sheppe", "link": "https://stackoverflow.com/users/1392364/sheppe"}, "edited": false, "score": 0, "creation_date": 1487786169, "post_id": 42398716, "comment_id": 71944808, "body": "Does the code at <a href=\"https://github.com/Mitka20/tango_api/blob/2cc0127b8fc601526ddd000ff1ac46d6531592c0/tango_api.rb\" rel=\"nofollow noreferrer\">github.com/Mitka20/tango_api/blob/&hellip;</a> help?"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "reply_to_user": {"reputation": 678, "user_id": 1392364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d83424400568ec29f61758e65502d27?s=128&d=identicon&r=PG", "display_name": "sheppe", "link": "https://stackoverflow.com/users/1392364/sheppe"}, "edited": false, "score": 0, "creation_date": 1487786579, "post_id": 42398716, "comment_id": 71945070, "body": "@sheppe. I am not sure. In your example you read the p12 file, but I am not sure how to send it via JSON(non-binary format)"}, {"owner": {"reputation": 678, "user_id": 1392364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d83424400568ec29f61758e65502d27?s=128&d=identicon&r=PG", "display_name": "sheppe", "link": "https://stackoverflow.com/users/1392364/sheppe"}, "edited": false, "score": 0, "creation_date": 1487786798, "post_id": 42398716, "comment_id": 71945196, "body": "The key is attached to the request in the line: https.key = p12.key Also, that&#39;s not my code but it seems relevant. :)"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "reply_to_user": {"reputation": 678, "user_id": 1392364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d83424400568ec29f61758e65502d27?s=128&d=identicon&r=PG", "display_name": "sheppe", "link": "https://stackoverflow.com/users/1392364/sheppe"}, "edited": false, "score": 0, "creation_date": 1487800918, "post_id": 42398716, "comment_id": 71953246, "body": "not sure if that gives me what I need. I want the  whole p12 file/data encoded to be sent via json"}], "answers": [{"tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": true, "score": 2, "last_activity_date": 1487874016, "creation_date": 1487874016, "answer_id": 42423342, "question_id": 42398716, "link": "https://stackoverflow.com/questions/42398716/ruby-encode-a-p12-certificatebinary-and-send-as-a-json-response/42423342#42423342", "title": "ruby encode a p12 certificate(binary) and send as a json response", "body": "<p>You don't usually encode the PKCS12 object itself but the raw file. Something like\n<code>Base64.encode64( File.read(filename, mode: 'rb')</code></p>\n"}], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 42423342, "answer_count": 1, "score": 0, "last_activity_date": 1487874016, "creation_date": 1487785540, "last_edit_date": 1487800844, "question_id": 42398716, "link": "https://stackoverflow.com/questions/42398716/ruby-encode-a-p12-certificatebinary-and-send-as-a-json-response", "title": "ruby encode a p12 certificate(binary) and send as a json response", "body": "<p>I have a pem certificate with a private key.\nI am using the above information to generate a p12 certificate which is password protected as follows:</p>\n\n<pre><code>  def p12_cert\n    ca_cert = x509_cert(File.open(\"#{root}/ca-cert.crt\").read)\n    p12 = OpenSSL::PKCS12.create(@random_pass, 'My Certificate',\n          rsa_pkey(private_key), x509_cert(public_cert), [ca_cert])\n    create_file('p12', p12.to_der, ':ASCII-8BIT')\n  end\n</code></pre>\n\n<p>The issue is this is in binary format and cannot be transmitted via a json API.</p>\n\n<p>Can someone how me how to encode it(maybe base64) so that this can be sent as a JSON response?</p>\n\n<p>EDIT: I opened the p12 file for read and then tried to base64 encode, got the following:</p>\n\n<blockquote>\n  <p>irb(main):017:0> enc_p12 = Base64.encode64(p12) TypeError: no implicit\n  conversion of OpenSSL::PKCS12 into String</p>\n</blockquote>\n"}, {"tags": ["ruby", "parsing", "hex"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1487785508, "post_id": 42398655, "comment_id": 71944354, "body": "What\u2019s wrong with <code>0X5EEA11 &amp; 0X000100</code>, or if you need an explicit boolean, with <code>(0X5EEA11 &amp; 0X000100).zero? ? false : true</code>?"}, {"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1487786159, "post_id": 42398655, "comment_id": 71944803, "body": "I parse them reading them as string, then I have to convert them to hex to operate, but using 0X5EEA11.hex returns an integer"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1487786886, "post_id": 42398655, "comment_id": 71945247, "body": "But 0X5EEA11 <i>is</i> an integer in C and bitwise-&amp; works on integers so..."}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 1, "creation_date": 1487788382, "post_id": 42398655, "comment_id": 71946198, "body": "Hexadecimal and Decimal display is just an external representation. Integers are always represented as binary internally."}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 1, "creation_date": 1487788495, "post_id": 42398655, "comment_id": 71946250, "body": "Also, I often write this code as <code>0X5EEA11 &amp; (1 &lt;&lt; 8)</code> to make the intent clear."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1487788569, "post_id": 42398655, "comment_id": 71946285, "body": "@mudasobwa: Please, don&#39;t use ternary with two booleans as output. Either <code>!x.zero?</code> or <code>x == 1</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1487788735, "post_id": 42398655, "comment_id": 71946373, "body": "@SnakeSanders: What exactly do you want to check? If C calculates &quot;bitwise AND&quot; correctly? If Ruby calculates &quot;bitwise AND&quot; correctly? I suppose the answer to both is &quot;yes&quot;. No need for a ruby parser analysing C code."}, {"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487841857, "post_id": 42398655, "comment_id": 71969226, "body": "@EricDuminil I updated the description. Anyway, I did some tests and you guys are right, it is possible to operate directly with the integer values of the Hex representation Like so:  var = &quot;0X5EEA11&quot; var.hex &amp; bit_mask. How this question can be closed now?"}], "owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487837465, "creation_date": 1487785348, "last_edit_date": 1487837465, "question_id": 42398655, "link": "https://stackoverflow.com/questions/42398655/binary-operation-between-hexadecimal-numbers-in-ruby", "title": "Binary operation between hexadecimal numbers in Ruby", "body": "<p>Is there any simple way in Ruby to operate with Hex numbers?</p>\n\n<p><strong>[Updated 2017-02-23]</strong> added background.</p>\n\n<p>I created a ruby parser to analyse C code.\nBackground: The C code is automatically generated by a Python script that reads from a big configuration file. This Python script uses templates to create C and H files. Basically these C files are configuration for a C project.</p>\n\n<p>The file contains macro definitions, arrays with parameters and operations like:</p>\n\n<pre><code>0X5EEA11 &amp; 0X000100 // checking if the bit 8 is active\n</code></pre>\n\n<p>Since this code is safety relate the correctness of the code has to be ensure somehow, so I decided to use ruby to parse the generated file and compare them back to the original seeds (configuration files, which are excel lists with thousand of rows) </p>\n\n<p>So I wonder if I have to convert it to binary and check bit a bit if the operation is correct. </p>\n\n<p>I also check the result of the executable comparing that the mask was calculated correctly.</p>\n\n<p>I saw how to convert to hex, but actually those are integers so I dont think I can do binary operation over them as if they were Hex.</p>\n"}, {"tags": ["ruby", "string", "command-line"], "answers": [{"tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": true, "score": 4, "last_activity_date": 1487808968, "last_edit_date": 1495540442, "creation_date": 1487790406, "answer_id": 42400186, "question_id": 42398360, "link": "https://stackoverflow.com/questions/42398360/what-is-the-ruby-a-command-line-switch/42400186#42400186", "title": "What is the ruby -a command line switch?", "body": "<p>Auto-split mode is enabled with the <code>-a</code> switch. It enables the kind of text processing that <a href=\"http://www.hcs.harvard.edu/~dholland/computers/awk.html\" rel=\"nofollow noreferrer\"><code>awk</code></a> does by default.<br>\nIn auto-split mode, ruby will read files given as arguments or <code>stdin</code>\none line at a time, and for each line:</p>\n\n<ol>\n<li>automatically split the line, <code>$_</code>, into fields according to a field separator (designated by the <code>-F</code> flag)</li>\n<li>assign the result to a variable named <code>$F</code></li>\n<li>do actions provided via the command-line.</li>\n</ol>\n\n<p>After all lines are processed, the program exits or executes the <a href=\"https://stackoverflow.com/a/15326251/2909897\"><code>END</code> block</a>. See this answer for an <a href=\"https://stackoverflow.com/a/8356889/2909897\">example</a>.</p>\n\n<p>Auto-split mode is useful for working with tabular text files that have many <code>records</code> (<code>records</code> are lines unless the <a href=\"https://stackoverflow.com/q/2463681/2909897\">record separator</a> is changed) and a number of delimited <code>fields</code> in each line. \nFor example, consider a <code>file</code> with content:</p>\n\n<pre><code>ADG:YUF:TGH\nUIY:POG:YTH\nGHJUR:HJKL:GHKIO\n</code></pre>\n\n<p>Then <code>ruby -F: -a -n -e 'puts $F[2]' file</code> prints the third field for each line:</p>\n\n<pre><code>$ ruby -F: -a -n -e 'puts $F[2]' file\nTGH\nYTH\nGHKIO\n</code></pre>\n\n<p>In this case, <code>-F:</code> sets the field separator to <code>:</code>. <code>$F</code> is the array where the fields live after record (<code>$_</code>) is split. The actions after <code>-e</code> are executed for each line after it is split.</p>\n\n<p>The <code>ruby</code> cli switches are very similar to those of <code>perl</code>. The <code>perl</code> cli makes this feature more convenient, see <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\"><code>perldoc perlrun</code></a>. For example, since <code>-a</code> is not useful without <code>-n</code>(or <code>-p</code>), in <code>perl</code>, <code>-F</code> enables <code>-a</code> implicitly, which in turn enables <code>-n</code>. This is not the case with <code>ruby</code>, all of the switches must be passed explicitly.\nFor examples of nice things that can be done with this kind of processing look for <a href=\"http://www.catonmat.net/blog/awk-one-liners-explained-part-one/\" rel=\"nofollow noreferrer\"><code>awk</code> one liners</a>.</p>\n\n<p>Also, the <code>ruby</code> cli follows unix conventions for passing <a href=\"http://tldp.org/LDP/abs/html/standard-options.html\" rel=\"nofollow noreferrer\">command-line options</a>:</p>\n\n<blockquote>\n  <p>Traditionally, UNIX command-line options consist of a dash, followed by one or more lowercase letters. </p>\n</blockquote>\n\n<p>So the <code>-a</code> and <code>-n</code> <a href=\"https://superuser.com/a/1181719/277471\">switches</a> and <code>-e</code> <a href=\"https://superuser.com/a/1181719/277471\">flag</a> can be combined to achieve the same result:</p>\n\n<pre><code>$ ruby -F: -ane 'puts $F[2]' file\nTGH\nYTH\nGHKIO\n</code></pre>\n\n<p>If this is interesting, check out some other <a href=\"http://reference.jumpingmonkey.org/programming_languages/ruby/ruby-one-liners.html\" rel=\"nofollow noreferrer\"><code>ruby</code> one liners.</a></p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 1, "accepted_answer_id": 42400186, "answer_count": 1, "score": 5, "last_activity_date": 1487808968, "creation_date": 1487784428, "question_id": 42398360, "link": "https://stackoverflow.com/questions/42398360/what-is-the-ruby-a-command-line-switch", "title": "What is the ruby -a command line switch?", "body": "<p>From the <a href=\"https://linux.die.net/man/1/ruby\" rel=\"noreferrer\">man</a> page:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code> -a     Turns on auto-split mode when used with -n or -p.\n        In auto-split mode, Ruby executes\n              $F = $_.split\n        at beginning of each loop.\n</code></pre>\n\n<p>Some questions come to mind:</p>\n\n<ul>\n<li>What happens when <code>-a</code> is used without <code>-n</code> or <code>-p</code>?</li>\n<li>What is <code>$F</code>?</li>\n<li>What happens at the end of the loop?</li>\n<li>How do I control which character is chosen to <code>split</code> on?</li>\n<li>How is <code>-a</code> intended to be used?</li>\n</ul>\n\n<p>From another <a href=\"https://www.tutorialspoint.com/ruby/ruby_predefined_variables.htm\" rel=\"noreferrer\">reference page</a>:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>$F      The variable that receives the output from split when -a is specified.\n        This variable is set if the -a command-line option is specified\n        along with the -p or -n option.\n</code></pre>\n\n<p>I'm still not sure what the <code>-a</code> switch is. Would appreciate an explanation but would appreciate some examples more.</p>\n\n<p>Some things I've tried:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>$ echo foo_bar_bar | ruby -ae\nruby: no code specified for -e (RuntimeError)\n$ echo foo_bar_bar | ruby -ap\n$ echo foo_bar_bar | ruby -ap '$_'\nruby: No such file or directory -- $_ (LoadError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 0, "creation_date": 1487785954, "post_id": 42398276, "comment_id": 71944667, "body": "Have you checked your system&#39;s environment variables? Perhaps you have RAILS_ENV set to development in your shell."}, {"owner": {"reputation": 395, "user_id": 807710, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a5308cf823e320bced9f0cfed49ba33?s=128&d=identicon&r=PG", "display_name": "dsmorey", "link": "https://stackoverflow.com/users/807710/dsmorey"}, "reply_to_user": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 0, "creation_date": 1487787384, "post_id": 42398276, "comment_id": 71945545, "body": "That would make me think that Rails 3 project would also run in dev mode though?"}, {"owner": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 0, "creation_date": 1487787668, "post_id": 42398276, "comment_id": 71945727, "body": "Yeah, but you might as well check."}, {"owner": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 1, "creation_date": 1487787815, "post_id": 42398276, "comment_id": 71945833, "body": "Have you also looked at <code>config&#47;database.yml</code>?"}, {"owner": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 1, "creation_date": 1487787870, "post_id": 42398276, "comment_id": 71945872, "body": "You may have your testing environment configured to use your development database."}, {"owner": {"reputation": 395, "user_id": 807710, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a5308cf823e320bced9f0cfed49ba33?s=128&d=identicon&r=PG", "display_name": "dsmorey", "link": "https://stackoverflow.com/users/807710/dsmorey"}, "reply_to_user": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 0, "creation_date": 1487790120, "post_id": 42398276, "comment_id": 71947180, "body": "Unfortunately I have Blaine.  Same code as my rails 3 project, test db block in database.yml is same.  Rails 3 runs fine, Rails 4 does not.  Thanks"}, {"owner": {"reputation": 2504, "user_id": 133298, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mRPbI.jpg?s=128&g=1", "display_name": "Blaine Lafreniere", "link": "https://stackoverflow.com/users/133298/blaine-lafreniere"}, "edited": false, "score": 0, "creation_date": 1487792108, "post_id": 42398276, "comment_id": 71948349, "body": "Well, I&#39;m afraid you&#39;re going to have to do some more digging, sir. I&#39;m willing to bet a fresh rails 3 project and a fresh rails 4 project wouldn&#39;t have this problem, indicating that the problem most likely lies somewhere in your code."}], "owner": {"reputation": 395, "user_id": 807710, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a5308cf823e320bced9f0cfed49ba33?s=128&d=identicon&r=PG", "display_name": "dsmorey", "link": "https://stackoverflow.com/users/807710/dsmorey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487784192, "creation_date": 1487784192, "question_id": 42398276, "link": "https://stackoverflow.com/questions/42398276/rails-4-tests-running-in-development-environment-by-default", "title": "Rails 4 Tests running in &quot;development&quot; environment by default", "body": "<p>We are porting a Rails 3 project to Rails 4.  Our tests run fine under Rails 3, environment is correctly defaulted to test.  However, when I switch over to my Rails 4 project and run the tests the same way...</p>\n\n<pre><code>rake test:controllers\n</code></pre>\n\n<p>My tests are running under development environment, wipes my dev db and output goes to development.log.  I can not figure out the difference.</p>\n\n<p>In my test_helper.rb I have this line...</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] = \"test\"\n</code></pre>\n\n<p>I've even tried...</p>\n\n<pre><code>Rails.env = \"test\"\n</code></pre>\n\n<p>and that does not work either.</p>\n\n<p>Strange thing is, I have these puts in my test...</p>\n\n<pre><code>puts \"#{__method__} Rails.env:       #{Rails.env}\"\nputs \"#{__method__} ENV[RAILS_ENV]:  #{ENV[\"RAILS_ENV\"]}\"\n</code></pre>\n\n<p>and they both correctly show that I am in the \"test\" environment.</p>\n\n<p>If I prefix RAILS_ENV=test before the rake test:controllers, all is well, but I should not have to do that.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["android", "ruby", "xpath", "appium"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487784163, "post_id": 42398181, "comment_id": 71943466, "body": "What does the output of <code>p cell_elements</code> look like?  Is it possible that <code>cell_elements[0]</code> is an array/hash?  Or, maybe <code>cell_elements</code> is an empty array??"}, {"owner": {"reputation": 35613, "user_id": 310121, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef53a40bb25a507097634d2e869e17c7?s=128&d=identicon&r=PG", "display_name": "Erik B", "link": "https://stackoverflow.com/users/310121/erik-b"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487784776, "post_id": 42398181, "comment_id": 71943889, "body": "If <code>cell_elements[0]</code> was an array or a hash, <code>element.value</code> would not raise that exception. Only an Appium element would do that."}, {"owner": {"reputation": 35613, "user_id": 310121, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef53a40bb25a507097634d2e869e17c7?s=128&d=identicon&r=PG", "display_name": "Erik B", "link": "https://stackoverflow.com/users/310121/erik-b"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487784822, "post_id": 42398181, "comment_id": 71943916, "body": "@7stud <code>#&lt;Selenium::WebDriver::Element:0x4e732a05e79d5bec id=&quot;4&quot;&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487820032, "post_id": 42399182, "comment_id": 71959535, "body": "The docs say otherwise: <a href=\"http://www.rubydoc.info/gems/selenium-webdriver/0.0.28/Selenium/WebDriver/Element\" rel=\"nofollow noreferrer\">rubydoc.info/gems/selenium-webdriver/0.0.28/Selenium/WebDriv&zwnj;&#8203;er/&hellip;</a>. Of course the op can test that with:  <code>puts element.respond_to? :value</code>"}, {"owner": {"reputation": 15701, "user_id": 655372, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0c85ef5eb7678857e2a6b793dfe055a3?s=128&d=identicon&r=PG", "display_name": "theheadofabroom", "link": "https://stackoverflow.com/users/655372/theheadofabroom"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487831726, "post_id": 42399182, "comment_id": 71963678, "body": "It was confirmed on Erik&#39;s machine that <code>element.value</code> results in this while <code>element.text</code> or <code>element.click</code> work perfectly."}, {"owner": {"reputation": 15701, "user_id": 655372, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0c85ef5eb7678857e2a6b793dfe055a3?s=128&d=identicon&r=PG", "display_name": "theheadofabroom", "link": "https://stackoverflow.com/users/655372/theheadofabroom"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487831938, "post_id": 42399182, "comment_id": 71963782, "body": "Of course it may be something specific to this container type with this version of Appium with Android that it has no <code>value</code> of its own"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1487842446, "post_id": 42399182, "comment_id": 71969619, "body": "I just tested selenium-webdriver in a stand alone ruby program--and there is no <code>value</code> attribute/method for me either: <code>undefined method &#39;value&#39; for #&lt;Selenium::WebDriver::Element:0x007f8f41a6ec30&gt; (NoMethodError)</code>.  Is the op&#39;s program working now?  If not, I posted a possible reason at the end of my answer."}], "tags": [], "owner": {"reputation": 15701, "user_id": 655372, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0c85ef5eb7678857e2a6b793dfe055a3?s=128&d=identicon&r=PG", "display_name": "theheadofabroom", "link": "https://stackoverflow.com/users/655372/theheadofabroom"}, "is_accepted": false, "score": 1, "last_activity_date": 1487787020, "creation_date": 1487787020, "answer_id": 42399182, "question_id": 42398181, "link": "https://stackoverflow.com/questions/42398181/appium-why-can-i-not-use-the-elements-i-find-using-xpath/42399182#42399182", "title": "Appium: Why can I not use the elements I find using xpath?", "body": "<p>The error message is misleading, it is not that the element does not exist, but that it has no <code>value</code> attribute.</p>\n\n<p>This can be confirmed by getting the <code>text</code> of the element.</p>\n"}, {"comments": [{"owner": {"reputation": 35613, "user_id": 310121, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef53a40bb25a507097634d2e869e17c7?s=128&d=identicon&r=PG", "display_name": "Erik B", "link": "https://stackoverflow.com/users/310121/erik-b"}, "edited": false, "score": 0, "creation_date": 1487843998, "post_id": 42406537, "comment_id": 71970707, "body": "That is true, but I was using it through a helper method where the arguments are reversed to make the how optional."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1487841974, "last_edit_date": 1487841974, "creation_date": 1487821020, "answer_id": 42406537, "question_id": 42398181, "link": "https://stackoverflow.com/questions/42398181/appium-why-can-i-not-use-the-elements-i-find-using-xpath/42406537#42406537", "title": "Appium: Why can I not use the elements I find using xpath?", "body": "<blockquote>\n<pre><code>cell_elements = find_elements('//*/android.support.v7.widget.RecyclerView[1]/*', :xpath)   \nelement = cell_elements[0]   \nelement.value.should eq 'something'  \n</code></pre>\n  \n  <p>To me it doesn't make any sense that Appium is able to find the\n  elements, but when trying to use one, it can't find it again.</p>\n</blockquote>\n\n<p>After reading your error message a little more carefully, it looks to me like there might be some lazy evaluation going on.  The first line requires no evaluation, e.g. selenium could just make a note: \"I might need to retrieve these elements at some point, but not just yet.\"</p>\n\n<p>Likewise for the second line, selenium could just make an additional note, \"When I actually retrieve the elements specified on the first line, I need to return the first element.\"</p>\n\n<p>But for the third line, selenium must actually do the evaluation (and stop being lazy).  The value of the first element is needed to compare it to the string 'something', so at that point selenium must evaluate the first line, but \"<em>using the given search parameters</em>\" the element couldn't be located.</p>\n\n<p>That means something is the matter with your xpath.  Without knowing the structure of the thing you are trying to parse, it's hard to know what's wrong.  By the way, I think <code>//*/abc</code> is equivalent to <code>//abc</code>.</p>\n\n<p>Looking through the selenium docs, it looks like you have the arguments for <code>find_elements()</code> reversed.</p>\n"}], "owner": {"reputation": 35613, "user_id": 310121, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef53a40bb25a507097634d2e869e17c7?s=128&d=identicon&r=PG", "display_name": "Erik B", "link": "https://stackoverflow.com/users/310121/erik-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487843903, "creation_date": 1487783924, "last_edit_date": 1487843903, "question_id": 42398181, "link": "https://stackoverflow.com/questions/42398181/appium-why-can-i-not-use-the-elements-i-find-using-xpath", "title": "Appium: Why can I not use the elements I find using xpath?", "body": "<pre><code>cell_elements = find_elements(:xpath, '//*/android.support.v7.widget.RecyclerView[1]/*')\nelement = cell_elements[0]\nelement.value.should eq 'something'\n</code></pre>\n\n<p>The above code returns all the elements in the list view, but on line 3, when resolving <code>element.value</code> it fails with the following message:</p>\n\n<blockquote>\n  <p>An element could not be located on the page using the given search parameters. (Selenium::WebDriver::Error::NoSuchElementError)</p>\n</blockquote>\n\n<p>To me it doesn't make any sense that Appium is able to find the elements, but when trying to use one, it can't find it again. So this seems like a bug. I also tried this:</p>\n\n<pre><code>element = find_element(:xpath, \"//*/android.support.v7.widget.RecyclerView[1]/android.widget.RelativeLayout[0]\")\nelement.value.should eq 'something'\n</code></pre>\n\n<p>That fails with the same error.</p>\n\n<p>I don't have much experience with <code>xpath</code>, so just want to ask if I am doing anything wrong or if I should report this as a bug?</p>\n"}, {"tags": ["java", "ruby", "selenium"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 4, "creation_date": 1487780505, "post_id": 42396850, "comment_id": 71940933, "body": "This has nothing to do with the language, and everything to do with how efficient it&#39;s Selenium library is. The amount of time spent &quot;in Ruby&quot; or &quot;in Java&quot; is virtually 0, all the time will be spent communicating with the browser and manipulating page elements. If you stripped out the Selenium calls, both of these code samples would basically be a few <code>puts</code> and <code>println</code> statements running so fast that they&#39;d be basically impossible to measure."}, {"owner": {"reputation": 547, "user_id": 2239784, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e26ed56e699dec2d03667f899a202937?s=128&d=identicon&r=PG", "display_name": "Doctor Who", "link": "https://stackoverflow.com/users/2239784/doctor-who"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1487780946, "post_id": 42396850, "comment_id": 71941248, "body": "Ok so forget about the amount of ruby or java, selenium is a java project with ruby bindings. The number of people who download the java version compared to the ruby binding is massive so why would more people use java when the library  it&#39;s about 50% slower to run selenium?"}, {"owner": {"reputation": 547, "user_id": 2239784, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e26ed56e699dec2d03667f899a202937?s=128&d=identicon&r=PG", "display_name": "Doctor Who", "link": "https://stackoverflow.com/users/2239784/doctor-who"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1487784984, "post_id": 42396850, "comment_id": 71944010, "body": "Not sure why the comments were deleted :-S I&#39;m hosting a local page and still ruby outperforms Java"}, {"owner": {"reputation": 331, "user_id": 6082067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf310299ec794f4801ff9471d344e589?s=128&d=identicon&r=PG&f=1", "display_name": "Myszsoda", "link": "https://stackoverflow.com/users/6082067/myszsoda"}, "edited": false, "score": 0, "creation_date": 1487785602, "post_id": 42396850, "comment_id": 71944421, "body": "Technically java is slower cause of virtual machine which Ruby does not have, it may be difference is performance."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1487785658, "post_id": 42396850, "comment_id": 71944455, "body": "This really isn&#39;t a good, comprehensive comparison test since it&#39;s so simple. My guess is that if you ran each of these tests a few times, you&#39;d get pretty different results. The time a script takes to run (assuming it&#39;s reasonably efficient) is going to be heavily affected by the browser and site speed vs the individual calls to the browser from each of the drivers. The reason more people use java over ruby likely is due to more people knowing the java language rather than execution speed."}], "owner": {"reputation": 547, "user_id": 2239784, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/e26ed56e699dec2d03667f899a202937?s=128&d=identicon&r=PG", "display_name": "Doctor Who", "link": "https://stackoverflow.com/users/2239784/doctor-who"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487784843, "creation_date": 1487780314, "last_edit_date": 1487784843, "question_id": 42396850, "link": "https://stackoverflow.com/questions/42396850/selenium-speed-ruby-vs-java", "title": "Selenium speed Ruby Vs Java", "body": "<p>This isn't meant as a war between which is faster Java or Ruby but I've always been lead to believe that Selenium would run faster in Java compared to Ruby </p>\n\n<p><a href=\"https://jiaodecai.wordpress.com/2011/09/29/performance-comparison-of-selenium-java-webdriver-and-ruby-webdriver/\" rel=\"nofollow noreferrer\">Example</a></p>\n\n<p><a href=\"https://arxiv.org/ftp/arxiv/papers/1611/1611.00578.pdf\" rel=\"nofollow noreferrer\">Example</a></p>\n\n<p>I've just knocked up a quick and dirty test that opens youtube does a search and loops 10 times.</p>\n\n<p>Ruby out performs Java every time I run this.</p>\n\n<p>I'm not using Eclipse or Rubymine just using command line.</p>\n\n<p>Ruby version:</p>\n\n<pre><code>require 'selenium-webdriver'\n\ntest_start  = Time.now\nfor i in 1..10\nbeginning_time = Time.now\n\ndriver =  Selenium::WebDriver.for :chrome, driver_path:\"C:\\\\ChromeDriver\\\\chromedriver.exe\"\ndriver.navigate.to \"https://www.youtube.com/\"\n\nelement = driver.find_element(:id, 'masthead-search-term')\nelement.send_keys \"Selenium\"\nelement.submit\n\nputs(driver.title)\n\ndriver.quit\n\nend_time = Time.now\nputs \"Attempt #{i} Seconds: #{(end_time - beginning_time)}\"\nend\n\ntest_end  = Time.now\nputs \"After 10 attempts the total Seconds: #{(test_end - test_start)}\"\n</code></pre>\n\n<p>Java version:</p>\n\n<pre><code>import org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class SpeedTest {\n\n    public static void main(String[] args) {\n        long testStart = System.currentTimeMillis();\n\n        for(int x = 0; x &lt; 10; x++){\n            long startTime = System.currentTimeMillis();\n\n            System.setProperty(\"webdriver.chrome.driver\", \"C:\\\\ChromeDriver\\\\chromedriver.exe\");\n            WebDriver driver = new ChromeDriver();\n            driver.navigate().to(\"https://www.youtube.com/\");\n\n            WebElement element = driver.findElement(By.id(\"masthead-search-term\"));\n            element.sendKeys(\"Selenium\");\n            element.submit();\n\n            System.out.println(driver.getTitle());\n\n            driver.quit(); \n\n            long endTime = System.currentTimeMillis();\n            System.out.println(\"Attempt \" + x + \" seconds:\");\n            System.out.printf(\"%.6f%n \", (endTime - startTime)/1e3);\n        }\n\n        long testEnd = System.currentTimeMillis();\n        System.out.printf(\"Total seconds for 10 attempts: %.6f%n \", (testEnd - testStart)/1e3);\n    }\n\n}\n</code></pre>\n\n<p>Have I made a stupid mistake or is Ruby faster for this sort of testing?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 3966732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a558bdcedc2504abbf5932b33b32a23e?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Liu", "link": "https://stackoverflow.com/users/3966732/tyler-liu"}, "edited": false, "score": 0, "creation_date": 1487785379, "post_id": 42398365, "comment_id": 71944277, "body": "thanks for the suggestion! But I am not saving it back the db, I just need the collection to display back to the user, so it doesnt really matter if its an active record collection"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 358, "user_id": 3966732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a558bdcedc2504abbf5932b33b32a23e?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Liu", "link": "https://stackoverflow.com/users/3966732/tyler-liu"}, "edited": false, "score": 0, "creation_date": 1487785607, "post_id": 42398365, "comment_id": 71944427, "body": "In any case, the solution presented above would not save it to the db - it just adds an accessible attribute into each item in the user collection."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 358, "user_id": 3966732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a558bdcedc2504abbf5932b33b32a23e?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Liu", "link": "https://stackoverflow.com/users/3966732/tyler-liu"}, "edited": false, "score": 0, "creation_date": 1487860707, "post_id": 42398365, "comment_id": 71982756, "body": "Did you try this solution? As I said it does not save it back to the db, it just adds it as a virtual attribute on each object in the collection. If this isn&#39;t what you&#39;re looking for, please clarify your question."}, {"owner": {"reputation": 358, "user_id": 3966732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a558bdcedc2504abbf5932b33b32a23e?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Liu", "link": "https://stackoverflow.com/users/3966732/tyler-liu"}, "edited": false, "score": 0, "creation_date": 1487989629, "post_id": 42398365, "comment_id": 72046207, "body": "hey, thanks for that suggestion, the decorator is actually quite a nice suggestion, it made me learn how it works and its use cases! Thanks for that. I didnt end up using a new gem just for this one use case, I added the virtual attribute like you suggested, and using a combination of your reply and @rogelio &#39;s reply. I got it working! Thank you!!"}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 1, "last_activity_date": 1487784449, "creation_date": 1487784449, "answer_id": 42398365, "question_id": 42396780, "link": "https://stackoverflow.com/questions/42396780/merge-2-array-of-hashes-based-on-different-keys-in-rails/42398365#42398365", "title": "merge 2 array of hashes based on different keys in rails", "body": "<p>If you use <code>Array#map</code> or <code>collect</code> on the collection, you're going to end up with an array instead of an ActiveRecord collection, which may not be what you want. </p>\n\n<p>You could add virtual attributes to the User model and then iterate over the collection: </p>\n\n<pre><code># app/models/user.rb\nattr_accessor :latlon, :loc\n\nusers.each do |user|\n  if location = location_array[user.id.to_s]\n    user.latlon = location['latlng']\n    user.loc = location['loc']\n  end\nend\n</code></pre>\n\n<p>This probably won't be very efficient, but for a small paginated dataset it might not be a big deal. </p>\n\n<p>Another option would be to use a <a href=\"http://nithinbekal.com/posts/ruby-decorators/\" rel=\"nofollow noreferrer\">decorator pattern</a>, which acts like a wrapper around your user object. In this case you would add your location attributes to the decorator rather than injecting them into the collection. Have a look at the <a href=\"https://github.com/drapergem/draper\" rel=\"nofollow noreferrer\">Draper</a> gem for a good overview. </p>\n"}, {"comments": [{"owner": {"reputation": 358, "user_id": 3966732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a558bdcedc2504abbf5932b33b32a23e?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Liu", "link": "https://stackoverflow.com/users/3966732/tyler-liu"}, "edited": false, "score": 0, "creation_date": 1487989660, "post_id": 42406573, "comment_id": 72046219, "body": "thanks! I used this and @mysmallidea&#39;s reply to make it work for me."}], "tags": [], "owner": {"reputation": 1472, "user_id": 2567424, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cf84c50fc86c32c8db69ad465fb58653?s=128&d=identicon&r=PG", "display_name": "rogelio", "link": "https://stackoverflow.com/users/2567424/rogelio"}, "is_accepted": true, "score": 0, "last_activity_date": 1487821199, "creation_date": 1487821199, "answer_id": 42406573, "question_id": 42396780, "link": "https://stackoverflow.com/questions/42396780/merge-2-array-of-hashes-based-on-different-keys-in-rails/42406573#42406573", "title": "merge 2 array of hashes based on different keys in rails", "body": "<p>If I understood you correctly, you can do something like this:</p>\n\n<pre><code># users is an array of ActiveRecord::Relation\n# extra_data is the hash\nusers.each do |user|\n  # .detect basically will return an object (first appearance) or nil\n  data = extra_data.detect{|d| d[\"user_id\"].to_i == user.id}\n  if data.present?\n    user.lat = data[\"latlng\"][0]\n    user.lng = data[\"latlng\"][1]\n    # if you want to attach \"loc\", add a attr_accesor :loc in your Use model\n    # user.loc = data[\"loc\"]\n  end\nend\n</code></pre>\n\n<p>If you want to know more about <code>detect</code> method, <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-detect\" rel=\"nofollow noreferrer\">read the docs</a>.</p>\n"}], "owner": {"reputation": 358, "user_id": 3966732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a558bdcedc2504abbf5932b33b32a23e?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Liu", "link": "https://stackoverflow.com/users/3966732/tyler-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 42406573, "answer_count": 2, "score": -1, "last_activity_date": 1487821199, "creation_date": 1487780144, "last_edit_date": 1487785416, "question_id": 42396780, "link": "https://stackoverflow.com/questions/42396780/merge-2-array-of-hashes-based-on-different-keys-in-rails", "title": "merge 2 array of hashes based on different keys in rails", "body": "<p>I have 2 query results one of them is an array of hashes like this</p>\n\n<p><code>[{\"user_id\"=&gt;\"1\", \"latlng\"=&gt;[#&lt;BigDecimal:7fc67f8412d0,'0.43653226E2',18(36)&gt;, #&lt;BigDecimal:7fc67f840560,'-0.793831843E2',18(36)&gt;], \"loc\"=&gt;[\"Toronto\", \"Ontario\", \"Canada\"]}, {\"user_id\"=&gt;\"2\", \"latlng\"=&gt;[#&lt;BigDecimal:7fc67f84a8f8,'0.43653226E2',18(36)&gt;, #&lt;BigDecimal:7fc67f849d18,'-0.793831843E2',18(36)&gt;], \"loc\"=&gt;[\"Toronto\", \"Ontario\", \"Canada\"]}, {\"user_id\"=&gt;\"3\", \"latlng\"=&gt;[#&lt;BigDecimal:7fc67f848828,'0.43653226E2',18(36)&gt;, #&lt;BigDecimal:7fc67f848210,'-0.793831843E2',18(36)&gt;], \"loc\"=&gt;[\"Toronto\", \"Ontario\", \"Canada\"]}, {\"user_id\"=&gt;\"4\", \"latlng\"=&gt;[#&lt;BigDecimal:7fc67f852620,'0.43653226E2',18(36)&gt;, #&lt;BigDecimal:7fc67f851b30,'-0.793831843E2',18(36)&gt;], \"loc\"=&gt;[\"Toronto\", \"Ontario\", \"Canada\"]}, {\"user_id\"=&gt;\"5\", \"latlng\"=&gt;[#&lt;BigDecimal:7fc67f85ae88,'0.43653226E2',18(36)&gt;, #&lt;BigDecimal:7fc67f85a9b0,'-0.793831843E2',18(36)&gt;], \"loc\"=&gt;[\"Toronto\", \"Ontario\", \"Canada\"]}]</code></p>\n\n<p>the second is an active record relations object of users, </p>\n\n<p><code>&lt;ActiveRecord::Relation [#&lt;User id: 4, email: \"hello.misc@gmail.com\", username: \"steve\", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 13, current_sign_in_at: \"2017-02-18 21:16:17\", last_sign_in_at: \"2017-01-14 20:32:57\", current_sign_in_ip: \"127.0.0.1\", last_sign_in_ip: \"127.0.0.1\",  confirmed_at: \"2016-12-13 01:42:57\", confirmation_sent_at: \"2016-12-13 01:42:55\", unconfirmed_email: nil, failed_attempts: 0, unlock_token: nil, locked_at: nil, created_at: \"2016-12-13 01:42:55\", updated_at: \"2017-02-18 22:03:46\", slug: \"user2\", uuid: \"xdn5n5z3fmr4\", impressions_count: 1, likers_count: 3, lat: #&lt;BigDecimal:7fc67fc39130,'0.0',9(27)&gt;, lng: #&lt;BigDecimal:7fc67fc38c30,'0.0',9(27)&gt;, currently_online: false, status: \"unverified\", deleted_at: nil&gt;, #&lt;User id: 5, email: \"jack@gmail.com\", username: \"user21\", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, current_sign_in_at: \"2017-02-17 02:49:07\", last_sign_in_at: \"2017-02-17 02:49:07\", current_sign_in_ip: \"127.0.0.1\", last_sign_in_ip: \"127.0.0.1\",  confirmed_at: \"2017-02-17 02:49:10\", confirmation_sent_at: \"2017-02-17 02:49:07\", unconfirmed_email: nil, failed_attempts: 0, unlock_token: nil, locked_at: nil, created_at: \"2017-02-17 02:49:07\", updated_at: \"2017-02-17 02:49:43\", slug: \"user21\", uuid: \"xtffdh2ajnp7\", impressions_count: 1, likers_count: 0, lat: #&lt;BigDecimal:7fc67fca6758,'0.0',9(27)&gt;, lng: #&lt;BigDecimal:7fc67fca5ec0,'0.0',9(27)&gt;, currently_online: false, status: \"unverified\", deleted_at: nil&gt;]&gt;</code></p>\n\n<p>What I want to do, is to merge the first array of hashes into the activerecord relations based on the foreign key of the first array, </p>\n\n<p>so if the first array has an user_id of 3, i want to insert that hash into that active record of the user with an ID of 3 on the active record object. </p>\n\n<p>I came up up with this</p>\n\n<p><code>index =  a1.group_by{|entry| entry[\"id\"]}\n    i2= a2.map{|entry| (index[entry.id] || []).reduce(entry, :merge) }</code></p>\n\n<p>but its not merging them together at all.. what am I doing wrong?</p>\n\n<p>edit: Not all of the first array is relevent, I only want to selectively get the item from the first array based on whats returned in the active record collection of the second query</p>\n\n<p>edit2: I am not looking to save the data back, I just want to merge the data set to display it back in a view template. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot", "mongoid6"], "comments": [{"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "edited": false, "score": 0, "creation_date": 1487780752, "post_id": 42396602, "comment_id": 71941089, "body": "It looks like your problem is with <code>RewardsModels::Store</code>, not Reward... you pasted the wrong model to us"}, {"owner": {"reputation": 1, "user_id": 1532591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e344468830a060db8e21bb7a1942a8?s=128&d=identicon&r=PG", "display_name": "user1532591", "link": "https://stackoverflow.com/users/1532591/user1532591"}, "reply_to_user": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "edited": false, "score": 0, "creation_date": 1487826590, "post_id": 42396602, "comment_id": 71961536, "body": "Thanks for pointing that out @cefigueiredo . Here is the updated model:"}, {"owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "edited": false, "score": 0, "creation_date": 1487867704, "post_id": 42396602, "comment_id": 71988108, "body": "Do you have more than 1 Store? The error on FactoryGirl complains about <code>RewardModels::Store</code> not <code>UserModels::Store</code>...  Paste the RewardScheme and the entire error trace could be helpful too"}], "owner": {"reputation": 1, "user_id": 1532591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e344468830a060db8e21bb7a1942a8?s=128&d=identicon&r=PG", "display_name": "user1532591", "link": "https://stackoverflow.com/users/1532591/user1532591"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487831215, "creation_date": 1487779614, "last_edit_date": 1487831215, "question_id": 42396602, "link": "https://stackoverflow.com/questions/42396602/factorygirl-create-does-not-work-while-upgrading-mongoid-version-from-5-to-6-be", "title": "FactoryGirl.create does not work while upgrading mongoid version from 5 to 6. Below is the issue I run into while running rspec test", "body": "<p>This is the place where is create a test table:</p>\n\n<pre><code>factory :reward_scheme, class: RewardsModels::RewardScheme do\n    uid             { ExpectedData::COSTA_UID } \n    scheme_type     { \"bricks\" }\n    reward_type     { \"menu\"}\n    company_address { FactoryGirl.build(:company_address) }\n    reward_config   { FactoryGirl.build(:reward_config) }\n    brand           { FactoryGirl.build(:brand) }\n    master_offers   { [ FactoryGirl.build(:master_offer) ] }\n    master_specials { [ FactoryGirl.build(:master_special) ] }\n    url \"http://costa.com\"\n    after(:create) do |reward_scheme|\n      reward_scheme.stores &lt;&lt; FactoryGirl.create(:store)\n      reward_scheme.user_cards &lt;&lt; FactoryGirl.create(:user_card)\n    end\nend\n</code></pre>\n\n<p>The logs are as follows:</p>\n\n<p>CoreModels::Transaction \n     Failure/Error: reward_scheme.stores &lt;&lt; FactoryGirl.create(:store)</p>\n\n<pre><code> Mongoid::Errors::Validations:\n\n   message:\n     Validation of RewardsModels::Store failed.\n   summary:\n     The following errors were found: Reward scheme can't be blank\n   resolution:\n     Try persisting the document with valid data or remove the validations.\n # ./spec/factories/reward_scheme.rb:15:in `block (3 levels) in &lt;top (required)&gt;'\n # ./spec/core/transaction_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>This is how the model file looks like:</p>\n\n<p>module UserModels</p>\n\n<p>class Store\n    include Mongoid::Document\n    include Mongoid::Timestamps   </p>\n\n<pre><code>field :reward_scheme_id, type: String\nfield :store_id, type: String\nfield :store_name, type: String, default: \"HQ\"\nfield :reward_scheme_name, type:String\nfield :about, type: String, default: \"MyGravity - loyalty begins with trust\"\nfield :logo, type: String, default: 'https://static.mygravity.co/partners/logo.svg'\nfield :splash_screen_url, type: String, default: \"https://static.mygravity.co/assets/SplitShire_Blur_Background_XVI.jpg\"\nfield :awaiting_update, type: Boolean, default:false\n\nembeds_one :location, class_name:'UserModels::Location'\nembeds_one :open_hours, class_name:'UserModels::OpenHours'\nembeds_one :optional, class_name:'UserModels::Optional'\nembeds_many :specials, class_name:'UserModels::Special'\nembeds_many :offers, class_name:'UserModels::Offer'\n\nbefore_create :set_defaults\n\ndef set_defaults\n  self.location = UserModels::Location.new unless self.location\n  self.optional = UserModels::Optional.new unless self.optional\nend\n</code></pre>\n\n<p>end</p>\n\n<p>class Location\n    include Mongoid::Document</p>\n\n<pre><code>field :longitude, type: Float, default: -0.131425\nfield :latitude, type: Float, default: 51.507697\nfield :address_line_1, type: String, default: 'Impact Hub - Westmister'\nfield :post_code, type: String, default: 'SW1Y 4TE'\nfield :city_town, type: String, default: 'London'\n\nembedded_in :store\n</code></pre>\n\n<p>end</p>\n\n<p>class OpenHours\n    include Mongoid::Document</p>\n\n<pre><code>field :monday, type: String\nfield :tuesday, type: String\nfield :wednesday, type: String\nfield :thursday, type: String\nfield :friday, type: String\nfield :saturday, type: String\nfield :sunday, type: String\nfield :sunday_1, type: String\n\nembedded_in :store\n</code></pre>\n\n<p>end</p>\n\n<p>class Special\n    include Mongoid::Document</p>\n\n<pre><code># Need this to search \nfield :special_id, type: Integer\nfield :special_uid, type: Integer\nfield :title, type: String\nfield :text, type: String\n\nembedded_in :store\n\nbefore_save :set_special_uid\n\ndef set_special_uid\n  self.special_uid = self.special_id\nend\n\ndef attributes\n  # p super\n  # p Hash[super.map{|k,v| [(alais[k] || k), v]}]\n\n  hash = super\n  alais = {'special_id' =&gt; 'id'}\n\n  hash.keys.each do |k,v| \n    hash[ alais[k] ] = hash['special_id'].to_s if alais[k]\n    # Need this as special_id is mapped in the iOS to a string...\n    hash['special_id'] = hash['special_id'].to_s if k == 'special_id'\n  end\n  hash\n\nend\n</code></pre>\n\n<p>end</p>\n\n<p>class Offer\n    include Mongoid::Document</p>\n\n<pre><code>field :name, type: String \nfield :offer_id, type: Integer\nfield :value, type: Float, default:0.0 # monetary value\nfield :points, type: Integer\nfield :icon_url, type: String\nfield :icon_name, type: String\n\nembedded_in :store    \n\ndef attributes\n  # p super\n  # p Hash[super.map{|k,v| [(alais[k] || k), v]}]\n\n  hash = super\n  alais = {'offer_id' =&gt; 'id'}\n\n  hash.keys.each { |k,v| hash[ alais[k] ] = hash['offer_id'] if alais[k] }\n  hash\n\nend\n</code></pre>\n\n<p>end</p>\n\n<p>class Optional\n    include Mongoid::Document</p>\n\n<pre><code>field :email, type: String, default:\"\"\nfield :twitter, type: String, default:\"\"\nfield :telephone, type: String, default:\"\"\nfield :wifi_password, type: String, default:\"\"\n\nembedded_in :store\n</code></pre>\n\n<p>end\nend</p>\n\n<p>Any leads regarding the code changes required for upgrading to mongoid 6 is highly appreciated.\nThanks</p>\n"}, {"tags": ["ruby", "aem", "postman"], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 368393, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/M1XfJ.gif?s=128&g=1", "display_name": "Blueboye", "link": "https://stackoverflow.com/users/368393/blueboye"}, "edited": false, "score": 0, "creation_date": 1488575770, "post_id": 42396555, "comment_id": 72309309, "body": "Thanks. This helped me :)."}], "tags": [], "owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "is_accepted": false, "score": 1, "last_activity_date": 1487787585, "last_edit_date": 1487787585, "creation_date": 1487779524, "answer_id": 42396555, "question_id": 42396399, "link": "https://stackoverflow.com/questions/42396399/converting-postman-request-to-proper-one/42396555#42396555", "title": "Converting POSTMAN request to proper one", "body": "<p>For authentication you can use Ruby's built in <code>basic_auth</code> method.</p>\n\n<p>replace this:</p>\n\n<pre><code>request[\"authorization\"] = \"Basic YWRtaW46YWRtaW4=\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>request.basic_auth(username, password)\n</code></pre>\n\n<p>read about it here <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.4.0/libdoc/net/http/rdoc/Net/HTTP.html</a></p>\n"}], "owner": {"reputation": 1066, "user_id": 368393, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/M1XfJ.gif?s=128&g=1", "display_name": "Blueboye", "link": "https://stackoverflow.com/users/368393/blueboye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487787585, "creation_date": 1487779138, "question_id": 42396399, "link": "https://stackoverflow.com/questions/42396399/converting-postman-request-to-proper-one", "title": "Converting POSTMAN request to proper one", "body": "<p>I am writing a script in Ruby that posts a path, include and exclude filter to Adobe CQ CMS. I was initially having problems posting the filters with the request. So, I ran the request through POSTMAN and after it was successfull I copied the request and used it in my script. But, since it is not the right way of doing things. I am looking for some help with converting this POSTMAN request into a proper one. </p>\n\n<p>Here is the function:</p>\n\n<pre><code>def postFilter(postURL,excludeRule,includeRule, auth_code)\n  url = URI(postURL)\n\n  http = Net::HTTP.new(url.host, url.port)\n\n  request = Net::HTTP::Post.new(url)\n  request[\"content-type\"] = \"multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW\"\n  request[\"authorization\"] = \"Basic YWRtaW46YWRtaW4=\"\n  request[\"cache-control\"] = \"no-cache\"\n  request.body = \"------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"rules\\\"\\r\\n\\r\\n#{excludeRule}\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW\\r\\nContent-Disposition: form-data; name=\\\"rules\\\"\\r\\n\\r\\n#{includeRule}\\r\\n------WebKitFormBoundary7MA4YWxkTrZu0gW--\"\n\n  response = http.request(request)\nend\n</code></pre>\n\n<p>I have another problem: Right now the password is hardcoded (Basic YWRtaW46YWRtaW4=). I tried eliminating this by passing password as an arguement to the function but it didn't work. I am not able to figure out if there is a semantics error or logical error.</p>\n\n<p>Thanks for help in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception", "testing", "testcase"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1487777762, "post_id": 42395596, "comment_id": 71938802, "body": "Setup your fixture so it would raise the error and verify that the error didn&#39;t leak."}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487779858, "post_id": 42395596, "comment_id": 71940468, "body": "@ndn how do I raise an error from within a fixture? Btw, the error is not in the data, but in the code itself.."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487780544, "post_id": 42395596, "comment_id": 71940958, "body": "By fixture I didn&#39;t mean rail&#39;s fixtures, I meant the preconditions/environment in which you run your tests. Just make sure that whatever is needed for the error to be raised is done in the setup."}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487925513, "post_id": 42395596, "comment_id": 72012587, "body": "@ndn ah, I see. It&#39;s only that I&#39;m running into this issue while in another test case where I don&#39;t want exceptions, but they apparently occurred anyway, was silently rescued, and caused my test case to fail due to some code not being executed below the point where the exception was raised. Thus I would have liked if there were any global ruby exception stack or something which I in the test could just check was empty."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487925852, "post_id": 42395596, "comment_id": 72012757, "body": "<i>&quot;another test case where I don&#39;t want exceptions, but they apparently occurred anyway&quot;</i> - what caused the failure? You either did the error flow setup for tests that shouldn&#39;t be concerned with it or you have an issue with the implementation itself."}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487926557, "post_id": 42395596, "comment_id": 72013201, "body": "It was a stub (I wrote in the same test case) of a third party service, which didn&#39;t return proper JSON (it returned <code>&quot;&quot;</code> instead of <code>&quot;{}&quot;</code>), so the <code>JSON.parse(response.body)</code> part of the implementation raised an <code>JSON::ParserError &quot;A JSON text must at least contain two octets!&quot;</code>. The third party service in production always returns proper JSON though, so I only ran into this problem in my test case."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487926933, "post_id": 42395596, "comment_id": 72013389, "body": "I&#39;m not sure I understand what the issue is. Obviously in this case you should stub similarly to what you get from production. Is the problem that you had hard time finding why the test is failing due to the exception getting silenced? If yes - why does your code catch and silence <code>JSON::ParserError</code>? Is that the legitimate failure you want to guard against or did you just not specify the type of exceptions and <code>JSON::ParserError</code> got rescued incidentally?"}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487928471, "post_id": 42395596, "comment_id": 72014317, "body": "@ndn <i>&quot;Is the problem that you had hard time finding why the test is failing due to the exception getting silenced?&quot;</i> Yes. I didn&#39;t realize that JSON.parse would fail on &quot;&quot;, so I just used the stub that WebMock suggested me, which returned &quot;&quot; (which I will fix <a href=\"https://github.com/bblimke/webmock/issues/688\" rel=\"nofollow noreferrer\">github.com/bblimke/webmock/issues/688</a>). The code in our app catches all StandardErrors (not my doing), because it is code that logs events, and ideally shouldn&#39;t negatively effect the user in production, just log any error to an error log and move on."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487928840, "post_id": 42395596, "comment_id": 72014573, "body": "I see. So is it safe to say that you are not looking for a way to test for rescues, rather than debug potential rescues?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487929707, "post_id": 42395596, "comment_id": 72015127, "body": "I&#39;m asking because there is a way to do that, but you definitely shouldn&#39;t be putting it anywhere in your code."}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487947235, "post_id": 42395596, "comment_id": 72026490, "body": "@ndn Yes, that would be safe to say. :-) Care to share the way to do that in an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "edited": false, "score": 0, "creation_date": 1487925874, "post_id": 42397223, "comment_id": 72012780, "body": "Interesting approach! Maybe I could do this only in the test code.. (not sure if that would be wise according to testing-methodology best practises though..). Why is it terrible for production code exactly? The extra attribute doesn&#39;t alter the way StandardError naturally works, so it wouldn&#39;t necessarily break other programmer&#39;s expectations.."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "edited": false, "score": 0, "creation_date": 1487927725, "post_id": 42397223, "comment_id": 72013883, "body": "@Magne It&#39;s a nice little wtf for a new developer to come onto your project and discover. And then he&#39;s going to make use of it to implement an actual production feature."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1487929816, "post_id": 42397223, "comment_id": 72015193, "body": "<code>StandardError.new</code> also sets <code>@@called</code> to <code>true</code>, even though no exception was raised."}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1487930078, "post_id": 42397223, "comment_id": 72015349, "body": "@fylooi well, it won&#39;t be a wtf to discover it if it doesn&#39;t break expected way StandardError naturally works..? If another programmer uses it to implement an actual production feature it could get really bad, I agree. Sure, monkey-patching might create a potentially dangerous precedence. But it&#39;s hard to guard against other programmer&#39;s folly.. except maybe documenting the monkey patching and advicing against building on top of it in production code (or further monkey-patching).."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 1, "creation_date": 1487931318, "post_id": 42397223, "comment_id": 72016139, "body": "Bug happens. Developer can&#39;t figure out the root cause of it. Boss breathing down developer&#39;s neck and rumbling about deadlines. Developer decides to put in a production workaround to to monitor and fix the side effects of the bug instead. Hey, somebody did that before, I&#39;ll just copy the code! (I&#39;ve seen somebody do this before btw)"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 7, "last_activity_date": 1487781303, "creation_date": 1487781303, "answer_id": 42397223, "question_id": 42395596, "link": "https://stackoverflow.com/questions/42395596/how-to-test-whether-any-exception-was-rescued/42397223#42397223", "title": "How to test whether any exception was rescued?", "body": "<p>If you want to be a monster, you can instrument the errors themselves:</p>\n\n<pre><code>class StandardError\n  @@called = false\n\n  def initialize\n    @@called = true\n    super\n  end\n\n  def self.called\n    @@called\n  end\nend\n\n#test it out like so:\n\ndef raise_arg_error\n  raise ArgumentError\nrescue\nend\n\nputs ArgumentError.called #false\nraise_arg_error\nputs ArgumentError.called #true\n</code></pre>\n\n<p>Great for ad hoc sanity checks. Terrible for production code.</p>\n"}, {"comments": [{"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "edited": false, "score": 0, "creation_date": 1487953754, "post_id": 42441739, "comment_id": 72030957, "body": "Thanks! This was beyond great!"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1487951778, "last_edit_date": 1487951778, "creation_date": 1487948260, "answer_id": 42441739, "question_id": 42395596, "link": "https://stackoverflow.com/questions/42395596/how-to-test-whether-any-exception-was-rescued/42441739#42441739", "title": "How to test whether any exception was rescued?", "body": "<p>As clarified in the comments, OP needed it for debug purposes as opposed to write tests with it.</p>\n\n<hr>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.0/Kernel.html#method-i-set_trace_func\" rel=\"nofollow noreferrer\"><code>Kernel#set_trace_func</code></a> lets you intercept low level events such as an error being raised:</p>\n\n<pre><code>set_trace_func(proc do |event, *_|\n  puts 'Raised!' if event == 'raise'\nend)\n\nraise 'Oh, no!' rescue :foo\n</code></pre>\n\n<p>You can run <code>#set_trace_func</code> before the code you were trying to debug. If no exception was raised, but a raise was registered by the hook - someone rescued it.</p>\n\n<hr>\n\n<p>This can create some noise depending on what you are executing. Fortunately, you can filter it down by file and line:</p>\n\n<pre><code>set_trace_func(proc do |event, file, line, *_|\n  if event == 'raise' &amp;&amp; file == 'test.rb' &amp;&amp; line == 42\n    puts \"Raised on #{file}:#{line}!\"\n  end\nend)\n</code></pre>\n\n<hr>\n\n<p>It even gives you the binding, so you can drop down a debugger:</p>\n\n<pre><code>require 'irb'\n\nset_trace_func(proc do |event, *_, error_binding, _|\n  error_binding.irb if event == 'raise'\nend)\n\ndef foo\n  bar = 42\n  raise 'Oh, no!' rescue :baz\nend\n\nfoo\n\n# Opens an irb\n# &gt; bar # =&gt; 42\n</code></pre>\n"}], "owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 42441739, "answer_count": 2, "score": 1, "last_activity_date": 1487951778, "creation_date": 1487777067, "last_edit_date": 1487925583, "question_id": 42395596, "link": "https://stackoverflow.com/questions/42395596/how-to-test-whether-any-exception-was-rescued", "title": "How to test whether any exception was rescued?", "body": "<p>Is there a way to find out whether any exception was raised and rescued during the execution of some code?</p>\n\n<p>Preferably in tests written with <code>ActiveSupport::TestCase</code> and not RSpec</p>\n\n<p>Is there any global ruby exception stack or something, which I could check?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "uri"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "edited": false, "score": 0, "creation_date": 1487779187, "post_id": 42395666, "comment_id": 71939924, "body": "I will give this a try, but I do not believe that the URIs are strings, they are URI objects. String method do not work on them."}, {"owner": {"reputation": 679, "user_id": 193811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/661d51c45a74e6884171ca715b9b1cd7?s=128&d=identicon&r=PG", "display_name": "William Daniel", "link": "https://stackoverflow.com/users/193811/william-daniel"}, "reply_to_user": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "edited": false, "score": 0, "creation_date": 1487779727, "post_id": 42395666, "comment_id": 71940351, "body": "I&#39;ll update the code, though it seems URI can avail itself of a <code>.to_s</code>, which would not harm Strings in any case."}, {"owner": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "edited": false, "score": 0, "creation_date": 1487779965, "post_id": 42395666, "comment_id": 71940553, "body": "I was thinking of using that but Anemone has a .to_s method for CookieStore objects so I wasn&#39;t sure if it would perform correctly."}, {"owner": {"reputation": 679, "user_id": 193811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/661d51c45a74e6884171ca715b9b1cd7?s=128&d=identicon&r=PG", "display_name": "William Daniel", "link": "https://stackoverflow.com/users/193811/william-daniel"}, "reply_to_user": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "edited": false, "score": 1, "creation_date": 1487780054, "post_id": 42395666, "comment_id": 71940622, "body": "Happily, it does. :)"}, {"owner": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "edited": false, "score": 0, "creation_date": 1487887812, "post_id": 42395666, "comment_id": 71999809, "body": "I was unable to get this to work, so I looked at the select method in the docs and figured to use the <code>.select!</code> method instead. It edits the array it&#39;s called on while <code>.select</code> yields a new array."}, {"owner": {"reputation": 679, "user_id": 193811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/661d51c45a74e6884171ca715b9b1cd7?s=128&d=identicon&r=PG", "display_name": "William Daniel", "link": "https://stackoverflow.com/users/193811/william-daniel"}, "reply_to_user": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "edited": false, "score": 0, "creation_date": 1487944157, "post_id": 42395666, "comment_id": 72024398, "body": "Ah! You needed to do the filter in-place. Completely understandable. So, yes, <code>.select!</code> rather than <code>.select</code>."}], "tags": [], "owner": {"reputation": 679, "user_id": 193811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/661d51c45a74e6884171ca715b9b1cd7?s=128&d=identicon&r=PG", "display_name": "William Daniel", "link": "https://stackoverflow.com/users/193811/william-daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1487779742, "last_edit_date": 1487779742, "creation_date": 1487777240, "answer_id": 42395666, "question_id": 42395470, "link": "https://stackoverflow.com/questions/42395470/how-can-i-filter-out-uris-that-match-a-scheme/42395666#42395666", "title": "How can I filter out URIs that match a scheme?", "body": "<p>Use array's <code>select</code> and String's <code>include</code> to do the hard work.</p>\n\n<pre><code>your_array = [ URI('www.example.com/somepath'),\n               URI('www.example.com/someotherpath') ]\nfilter = 'somepath'\n\nyour_array.select { |t| t.to_s.include?(filter) }\n\n=&gt; [URI(\"www.example.com/somepath\")]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1487777283, "creation_date": 1487777283, "answer_id": 42395685, "question_id": 42395470, "link": "https://stackoverflow.com/questions/42395470/how-can-i-filter-out-uris-that-match-a-scheme/42395685#42395685", "title": "How can I filter out URIs that match a scheme?", "body": "<p>Below regex will work for you.</p>\n\n<pre><code>http:\\/\\/example\\.com\\/somepath($|\\/.*)\n</code></pre>\n\n<p>Write a ruby code that will check if string match this regex or not, and you are done.</p>\n\n<p>Some thing like:</p>\n\n<pre><code>def right_string(string)\n  string.match(http:\\/\\/example\\.com\\/somepath($|\\/.*)) ## this return true / false\nend\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5507768, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5abe3fcddd3c1ffbbbc573c07b866ee6?s=128&d=identicon&r=PG&f=1", "display_name": "RM3", "link": "https://stackoverflow.com/users/5507768/rm3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 42395666, "answer_count": 2, "score": 2, "last_activity_date": 1487887108, "creation_date": 1487776731, "last_edit_date": 1487887108, "question_id": 42395470, "link": "https://stackoverflow.com/questions/42395470/how-can-i-filter-out-uris-that-match-a-scheme", "title": "How can I filter out URIs that match a scheme?", "body": "<p>This is a ActiveJob for a Ruby on Rails application/</p>\n\n<p>I am using Anemone web crawler and have created and array of all the URIs on the home page of <code>www.example.com</code>. I want to filter out ones that do not have a certain path.</p>\n\n<p>So <code>www.example.com/somepath</code> should be picked out and saved while <code>www.example.com/someotherpath</code> should not be picked out and saved. </p>\n\n<p>The problem is that I cannot not filter these array entries. There is not a regexp method that I can use on them.</p>\n\n<p>I require 'uri' at the top, but still receive <code>method does not exist</code> errors. </p>\n"}, {"tags": ["ruby", "unix", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 3702, "user_id": 1706504, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/CZUjl.jpg?s=128&g=1", "display_name": "maafk", "link": "https://stackoverflow.com/users/1706504/maafk"}, "edited": false, "score": 0, "creation_date": 1487782094, "post_id": 42395429, "comment_id": 71942019, "body": "Easy enough.  Thanks @eiko"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1487782681, "post_id": 42395429, "comment_id": 71942436, "body": "Don&#39;t do that. You&#39;re messing with ruby code within chef resource. That could fail in a wide number of way."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1487785303, "post_id": 42395429, "comment_id": 71944223, "body": "This is very much not recommended, both because Ruby&#39;s command execution is incredibly error prone and because this has no error handling of something fails"}, {"owner": {"reputation": 1941, "user_id": 1146504, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e85fb6a6f6200c7c148a236a241df02f?s=128&d=identicon&r=PG", "display_name": "Jakir00", "link": "https://stackoverflow.com/users/1146504/jakir00"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1487785493, "post_id": 42395429, "comment_id": 71944347, "body": "@Tensibai Agreed, this is not a safe way to do this."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1487785537, "post_id": 42395429, "comment_id": 71944376, "body": "@coderanger admittedly, i&#39;m here as someone who knows ruby well, not someone who knows chef well. thanks for letting me know- i&#39;m researching better implementations and will update my answer if someone else doesn&#39;t beat me to it!"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1487789121, "post_id": 42395429, "comment_id": 71946590, "body": "Aww, I though I had post an answer before leaving work, sorry."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487776612, "creation_date": 1487776612, "answer_id": 42395429, "question_id": 42394982, "link": "https://stackoverflow.com/questions/42394982/output-of-unix-command-in-chef-recipe/42395429#42395429", "title": "output of unix command in chef recipe", "body": "<p>You should be able to do it just like this:</p>\n\n<pre><code>execute 'run dynamically generated install file' do\n    command 'make install'\n    cwd `ls -Adrt /tmp/unixODBC.* | tail -n 1`\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1941, "user_id": 1146504, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e85fb6a6f6200c7c148a236a241df02f?s=128&d=identicon&r=PG", "display_name": "Jakir00", "link": "https://stackoverflow.com/users/1146504/jakir00"}, "edited": false, "score": 0, "creation_date": 1487785583, "post_id": 42398697, "comment_id": 71944410, "body": "I should add that <code>execute</code> is only good for commands you don&#39;t have to interact with very heavily."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1487786356, "post_id": 42398697, "comment_id": 71944938, "body": "This would also be incorrect in most cases, or at least overkill. Also never use the class directly, use the shell_out method wrapper to get some common Chef-y behaviors."}], "tags": [], "owner": {"reputation": 1941, "user_id": 1146504, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e85fb6a6f6200c7c148a236a241df02f?s=128&d=identicon&r=PG", "display_name": "Jakir00", "link": "https://stackoverflow.com/users/1146504/jakir00"}, "is_accepted": false, "score": 0, "last_activity_date": 1487785497, "creation_date": 1487785497, "answer_id": 42398697, "question_id": 42394982, "link": "https://stackoverflow.com/questions/42394982/output-of-unix-command-in-chef-recipe/42398697#42398697", "title": "output of unix command in chef recipe", "body": "<p>That seems like it's out of the scope of an <code>execute</code> block.</p>\n\n<p>Maybe just use a <code>ruby_block</code>?</p>\n\n<pre><code>ruby_block 'run dynamically generated install file' do\n    require 'mixlib/shellout'\n    block do\n        cmd = Mixlib::ShellOut.new('make install')\n        cmd.run_command\n        cwd = cmd.stdout\n        # Do more stuff with cwd...\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3702, "user_id": 1706504, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/CZUjl.jpg?s=128&g=1", "display_name": "maafk", "link": "https://stackoverflow.com/users/1706504/maafk"}, "edited": false, "score": 0, "creation_date": 1487794247, "post_id": 42399312, "comment_id": 71949545, "body": "Beautiful. I ended up using <code>cwd lazy { Dir[&#39;&#47;tmp&#47;unixODBC.*&#39;].sort_by{ |f| File.mtime(f) }.last + &#39;&#47;unixODBC-2.3.0&#39; }</code>. Thanks!!"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 4, "last_activity_date": 1487787512, "creation_date": 1487787512, "answer_id": 42399312, "question_id": 42394982, "link": "https://stackoverflow.com/questions/42394982/output-of-unix-command-in-chef-recipe/42399312#42399312", "title": "output of unix command in chef recipe", "body": "<p>Okay, so finally at a keyboard and can write this out in full.</p>\n\n<p>The literal translation of what you have there would be:</p>\n\n<pre><code>execute 'run dynamically generated install file' do\n    command 'make install'\n    cwd lazy { shell_out!('ls -Adrt /tmp/unixODBC.* | tail -n 1').stdout.strip }\nend\n</code></pre>\n\n<p>However that is going to be much slower than needed and more failure prone so I would recommend writing it in Ruby instead:</p>\n\n<pre><code>execute 'run dynamically generated install file' do\n    command 'make install'\n    cwd lazy { Dir['/tmp/unixODBC.*'].first }\nend\n</code></pre>\n\n<p>This avoids having to spawn a bunch of processes and instead just does the same (I think) logic directly.</p>\n"}], "owner": {"reputation": 3702, "user_id": 1706504, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/CZUjl.jpg?s=128&g=1", "display_name": "maafk", "link": "https://stackoverflow.com/users/1706504/maafk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 42399312, "answer_count": 3, "score": 2, "last_activity_date": 1487787512, "creation_date": 1487775499, "question_id": 42394982, "link": "https://stackoverflow.com/questions/42394982/output-of-unix-command-in-chef-recipe", "title": "output of unix command in chef recipe", "body": "<p>I have an <code>execute</code> command in a chef recipe, and I'd like to set the <code>cwd</code> property as the output of a unix command.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>execute 'run dynamically generated install file' do\n    command 'make install'\n    cwd '' # would like the output of `ls -Adrt /tmp/unixODBC.* | tail -n 1`\nend\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "validationerror"], "answers": [{"comments": [{"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 13, "user_id": 7605280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hn67o5mMO4g/AAAAAAAAAAI/AAAAAAAAADM/ctpLPWimY30/photo.jpg?sz=128", "display_name": "Francisco Rupto", "link": "https://stackoverflow.com/users/7605280/francisco-rupto"}, "edited": false, "score": 1, "creation_date": 1487774465, "post_id": 42394286, "comment_id": 71936357, "body": "@FranciscoRupto you welcome. If my answer did help you please don&#39;t forget to mark it as accepted by clicking on the check mark beside the answer to toggle it from hollow to green"}, {"owner": {"reputation": 13, "user_id": 7605280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hn67o5mMO4g/AAAAAAAAAAI/AAAAAAAAADM/ctpLPWimY30/photo.jpg?sz=128", "display_name": "Francisco Rupto", "link": "https://stackoverflow.com/users/7605280/francisco-rupto"}, "edited": false, "score": 0, "creation_date": 1487777051, "post_id": 42394286, "comment_id": 71938254, "body": "While this works perfectly I have a minor problem. When the validation doesnt pass and it renders #new showing the errors, the url shows &quot;website.com/user&quot;. Because the index action doesnt exist, if you reload it can&#39;t find the page. How could I change the url shown on the adress bar?"}, {"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 13, "user_id": 7605280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hn67o5mMO4g/AAAAAAAAAAI/AAAAAAAAADM/ctpLPWimY30/photo.jpg?sz=128", "display_name": "Francisco Rupto", "link": "https://stackoverflow.com/users/7605280/francisco-rupto"}, "edited": false, "score": 0, "creation_date": 1487777373, "post_id": 42394286, "comment_id": 71938497, "body": "@FranciscoRupto add one more route to your <code>routes.rb</code> file: <code>match &quot;signup&quot; =&gt; &quot;users#create&quot;, :via =&gt; &quot;post&quot;</code>. Take a look at this question, for more details: <a href=\"http://stackoverflow.com/questions/7533061/rails-render-route-path\" title=\"rails render route path\">stackoverflow.com/questions/7533061/rails-render-route-path</a>"}], "tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1487773750, "creation_date": 1487773750, "answer_id": 42394286, "question_id": 42394227, "link": "https://stackoverflow.com/questions/42394227/cant-seem-able-to-show-validation-errors-on-rails/42394286#42394286", "title": "Can&#39;t seem able to show validation errors on rails", "body": "<p>Instead of redirect render <code>new</code> action template:</p>\n\n<pre><code>  def create\n    @user = User.new(user_params)\n    if @user.save\n      redirect_to ''\n    else\n      render 'new'\n    end\n  end\n</code></pre>\n\n<p>When you do redirect you loose <code>@user</code> object that contains validation errors. That is why they are not visible in view</p>\n"}], "owner": {"reputation": 13, "user_id": 7605280, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hn67o5mMO4g/AAAAAAAAAAI/AAAAAAAAADM/ctpLPWimY30/photo.jpg?sz=128", "display_name": "Francisco Rupto", "link": "https://stackoverflow.com/users/7605280/francisco-rupto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 42394286, "answer_count": 1, "score": 1, "last_activity_date": 1487774682, "creation_date": 1487773581, "question_id": 42394227, "link": "https://stackoverflow.com/questions/42394227/cant-seem-able-to-show-validation-errors-on-rails", "title": "Can&#39;t seem able to show validation errors on rails", "body": "<p>I've been reading rails and ruby tutorials and just got started with my first project. Everything is going well but I'm having a problem showing validation errors for new users. This is my controller code:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def new\n    @user = User.new\n  end\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      redirect_to ''\n    else\n      redirect_to '/signup'\n    end\n  end\n  private\n  def user_params\n    params.require(:user).permit(:name, :lastname, :nickname, :email, :password)\n  end\nend\n</code></pre>\n\n<p>And this is my form. I'm omitting all inputs but the nickname one, because I'm testing the validation with it.</p>\n\n<pre><code>&lt;%= form_for(@user) do |f| %&gt;\n   &lt;div class='form-group'&gt;\n      &lt;%= f.text_field :nickname, :placeholder =&gt; \"User name\", :class =&gt; \"form-control\", :required =&gt; true, :minlength =&gt; \"2\", :maxlength =&gt; \"24\" %&gt;\n        &lt;div class=\"text-danger\"&gt;\n          &lt;%= @user.errors[:nickname][0] %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I just show the first related error to see if it's working, and avoid any Ifs that would make me doubt if it works or not. The validation on the class is:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :books\n  has_secure_password\n  validates :nickname, uniqueness: true\nend\n</code></pre>\n\n<p>When I create a new user by console and try to save it with the same nickname as another it wont save, so the validation works fine. But no error is shown in the view, it just goes back to the signup form and that's all. I'm using ruby 2.2.6 and rails 5.0.1. If I'm missing anything let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "automated-tests"], "comments": [{"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1487772573, "post_id": 42393672, "comment_id": 71934984, "body": "<code>params</code> is method ?"}, {"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "reply_to_user": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1487772726, "post_id": 42393672, "comment_id": 71935079, "body": "No, params is a hash with parameters that will be passed to the <code>create</code> method and being used here: <code>u = Usuario.find_by(email: params[:sessao][:email].downcase)</code>"}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1487772786, "post_id": 42393672, "comment_id": 71935133, "body": "you dont send any parametters into create method."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487772788, "post_id": 42393672, "comment_id": 71935138, "body": "Seems like <code>params[:sessao]</code> is nil <code>params[:sessao][:email]</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487772852, "post_id": 42393672, "comment_id": 71935185, "body": "which one is line:7 ? in sessao_controller"}, {"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487772876, "post_id": 42393672, "comment_id": 71935196, "body": "@DeepakMahakale I thought so too, but running it with <code>byebug</code> it seems that <code>params</code> contains <code>{&quot;params&quot;=&gt;{&quot;sessao&quot;=&gt;{&quot;email&quot;=&gt;&quot;&quot;, &quot;password&quot;=&gt;&quot;&quot;}}</code>"}, {"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487772914, "post_id": 42393672, "comment_id": 71935225, "body": "@DeepakMahakale Sorry, I forgot to say it. Line 7 is this: <code>u = Usuario.find_by(email: params[:sessao][:email].downcase)</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487773100, "post_id": 42393672, "comment_id": 71935382, "body": "Try <code>params[&quot;sessao&quot;][&quot;email&quot;]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 0, "creation_date": 1487773180, "post_id": 42393992, "comment_id": 71935437, "body": "I tried changing it from symbol to string on the <code>create</code> method and on both the test and the method, but the error persists..."}, {"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 0, "creation_date": 1487773312, "post_id": 42393992, "comment_id": 71935551, "body": "<code>byebug</code> points that both <code>params[:sessao]</code> and <code>params[&quot;sessao&quot;]</code> are <code>nil</code>, but simply <code>params</code> shows the complete hash. Very strange."}], "tags": [], "owner": {"reputation": 267, "user_id": 2328827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3836cfdf2aa2e725587722233a09621c?s=128&d=identicon&r=PG", "display_name": "Daniel Christiany", "link": "https://stackoverflow.com/users/2328827/daniel-christiany"}, "is_accepted": false, "score": 0, "last_activity_date": 1487772972, "creation_date": 1487772972, "answer_id": 42393992, "question_id": 42393672, "link": "https://stackoverflow.com/questions/42393672/undefined-method-for-nil-class-during-test/42393992#42393992", "title": "Undefined method &#39;[]&#39; for nil class during test", "body": "<p>Try params[\"sessao\"][\"email\"].\nI think in ruby :variable != \"variable\"</p>\n"}, {"comments": [{"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 0, "creation_date": 1487773494, "post_id": 42394130, "comment_id": 71935672, "body": "Tried the <code>ActionController::Parameters.new({ sessao: { email: &quot;&quot;, password: &quot;&quot; } })</code> line and it worked perfectly! Thank you!"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 1, "creation_date": 1487773673, "post_id": 42394130, "comment_id": 71935806, "body": "@Tuma i think this fixed your issue coincidentally. you were accidentally nesting your params within a &quot;param&quot; key. changing your post to this would fix the problem too: <code>post login_path, sessao: { email: &quot;&quot;, password: &quot;&quot; }</code>"}, {"owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "edited": false, "score": 0, "creation_date": 1487773825, "post_id": 42394130, "comment_id": 71935923, "body": "That&#39;s true, leaving only the <code>sessao</code> hash also worked."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1487773308, "creation_date": 1487773308, "answer_id": 42394130, "question_id": 42393672, "link": "https://stackoverflow.com/questions/42393672/undefined-method-for-nil-class-during-test/42394130#42394130", "title": "Undefined method &#39;[]&#39; for nil class during test", "body": "<p>The params you are passing is instance of class <code>Hash</code> not  <code>ActionController::Parameters</code></p>\n\n<p>So, either make the hash <code>.with_indifferent_access</code> </p>\n\n<pre><code>post login_path, params: { sessao: { email: \"\", password: \"\" } }.with_indifferent_access\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>ActionController::Parameters.new({ sessao: { email: \"\", password: \"\" } })\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 42394130, "answer_count": 2, "score": 0, "last_activity_date": 1487773308, "creation_date": 1487772176, "last_edit_date": 1487773003, "question_id": 42393672, "link": "https://stackoverflow.com/questions/42393672/undefined-method-for-nil-class-during-test", "title": "Undefined method &#39;[]&#39; for nil class during test", "body": "<p>I'm learning how to write automated tests in rails and I'm running into a problem. Here's my test:</p>\n\n<pre><code>test \"login invalido\" do\n    get new_usuario_path\n    assert_template 'usuarios/new'\n    post login_path, params: { sessao: { email: \"\", password: \"\" } }\n    assert_template 'usuarios/new'\n    assert_not flash.empty?\n    get root_path\n    assert flash.empty?\nend\n</code></pre>\n\n<p>And here's the method in <code>login_path</code>:</p>\n\n<pre><code>def create\nbyebug\nu = Usuario.find_by(email: params[:sessao][:email].downcase) #the error happens here\nif u.present? &amp;&amp; u.authenticate(params[:sessao][:password])\n  puts \"aqui\"\nelse\n    flash[:danger] = 'Ops! Email ou senha inv\u00e1lidos.'\n    redirect_to new_usuario_path\nend\nend\n</code></pre>\n\n<p>edit: I marked the line where the error occurs above.</p>\n\n<p>I'm trying to verify if the flash error message is displayed and doesn't linger during navigation (I'm using <a href=\"https://www.railstutorial.org/book/basic_login\" rel=\"nofollow noreferrer\">this book</a> as reference). I expected to get a failure in this test, but instead I get an error:</p>\n\n<pre><code> 1) Error:\nLoginTest#test_login_invalido:\nNoMethodError: undefined method `[]' for nil:NilClass\napp/controllers/sessao_controller.rb:7:in `create'\ntest/integration/login_test.rb:7:in `block in &lt;class:LoginTest&gt;'\n</code></pre>\n\n<p>It seems that the <code>params</code> hash is incorrect, but when running the test with <code>byebug</code> I see that the hash is arriving correctly:</p>\n\n<pre><code>(byebug) params\n{\"params\"=&gt;{\"sessao\"=&gt;{\"email\"=&gt;\"\", \"password\"=&gt;\"\"}}, \"controller\"=&gt;\"sessao\", \"action\"=&gt;\"create\"}\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 541, "user_id": 4422123, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kshyx.png?s=128&g=1", "display_name": "bxorcloud", "link": "https://stackoverflow.com/users/4422123/bxorcloud"}, "edited": false, "score": 0, "creation_date": 1487772431, "post_id": 42393524, "comment_id": 71934873, "body": "is your html file in .erb or in .html? maybe it is .html that&#39;s why it&#39;s not working?"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 7563180, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf24d012ee4c691f5084c93d8b1774fe?s=128&d=identicon&r=PG&f=1", "display_name": "Teresa", "link": "https://stackoverflow.com/users/7563180/teresa"}, "edited": false, "score": 0, "creation_date": 1487772734, "post_id": 42393767, "comment_id": 71935083, "body": "Wow, how stupid of me. Indeed, I put it in a wrong file. It&#39;s now in a html.erb file and using &lt;%=..%&gt; works perfectly within the tag. Thanks!"}], "tags": [], "owner": {"reputation": 101, "user_id": 7598927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6a64040a43609704ce5eb5f706fc42?s=128&d=identicon&r=PG&f=1", "display_name": "andriy", "link": "https://stackoverflow.com/users/7598927/andriy"}, "is_accepted": true, "score": 2, "last_activity_date": 1487772413, "creation_date": 1487772413, "answer_id": 42393767, "question_id": 42393524, "link": "https://stackoverflow.com/questions/42393524/how-to-add-ruby-into-this-html-tag/42393767#42393767", "title": "How to add Ruby into this HTML tag?", "body": "<p>check if your file is some_file.html.erb\nthen you can use \n    &lt;%=User.first.address%>\nYou can not use #{User.first.address} to insert something into html code</p>\n"}], "owner": {"reputation": 183, "user_id": 7563180, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf24d012ee4c691f5084c93d8b1774fe?s=128&d=identicon&r=PG&f=1", "display_name": "Teresa", "link": "https://stackoverflow.com/users/7563180/teresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 42393767, "answer_count": 1, "score": 0, "last_activity_date": 1487772629, "creation_date": 1487771859, "question_id": 42393524, "link": "https://stackoverflow.com/questions/42393524/how-to-add-ruby-into-this-html-tag", "title": "How to add Ruby into this HTML tag?", "body": "<p>First, the answer to this is probably quite obvious, but I couldn't figure out how to search for this problem... </p>\n\n<p>I want to embed Google Maps into by Ruby on Rails website using this code:</p>\n\n<pre><code>&lt;iframe width=\"300\" height=\"300\" frameborder=\"0\" style=\"border:0\"\n    src=\"https://www.google.com/maps/embed/v1/place?key=[MY API KEY HERE]&amp;q=#{User.first.address}\"\n    allowfullscreen&gt;\n</code></pre>\n\n<p></p>\n\n<p>I want to insert the address using a Ruby method (User.first.address) as you can see there. However, I can't quite figure out how to embed Ruby here?</p>\n\n<p>I know that you can usually do <code>&lt;%= some ruby code %&gt;</code> but I can't put it in that form in the middle of my HTML here... How do I make sure that the <code>#{}</code> part get recognized as Ruby? Is that at all possible? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1490990980, "post_id": 42393095, "comment_id": 73375152, "body": "did you get it working?"}], "answers": [{"comments": [{"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1487772198, "post_id": 42393110, "comment_id": 71934685, "body": "This would perform an <code>INNER JOIN</code>, not a <code>LEFT JOIN</code> - it might not be exactly the same query."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1487773243, "post_id": 42393110, "comment_id": 71935490, "body": "@eugen, yea, <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-left_outer_joins\" rel=\"nofollow noreferrer\">now available</a> along with <code>joins</code> and <code>includes</code> :)"}, {"owner": {"reputation": 710, "user_id": 1666488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4ddfa312f2bef2c3273fc57f5128198a?s=128&d=identicon&r=PG", "display_name": "Jefferson Hudson", "link": "https://stackoverflow.com/users/1666488/jefferson-hudson"}, "edited": false, "score": 0, "creation_date": 1559573259, "post_id": 42393110, "comment_id": 99453876, "body": "This doesn&#39;t put a condition on the join, it just adds a where clause. The author is specifically looking for a way to put a condition on a join without using where."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487770817, "creation_date": 1487770817, "answer_id": 42393110, "question_id": 42393095, "link": "https://stackoverflow.com/questions/42393095/how-to-write-a-join-condition-in-ruby-on-rails/42393110#42393110", "title": "how to write a join condition in Ruby on Rails?", "body": "<p>Your SQL code, translated to activerecord, would look as follows (using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-joins\" rel=\"nofollow noreferrer\"><code>joins</code></a>):</p>\n\n<pre><code>Customer.where(state: 'NY').joins(:customer_accounts)\n</code></pre>\n\n<p>The code assumes, you have the association set up:</p>\n\n<pre><code>class Customer\n  has_many :customer_accounts\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 3, "last_activity_date": 1487772576, "last_edit_date": 1487772576, "creation_date": 1487772229, "answer_id": 42393696, "question_id": 42393095, "link": "https://stackoverflow.com/questions/42393095/how-to-write-a-join-condition-in-ruby-on-rails/42393696#42393696", "title": "how to write a join condition in Ruby on Rails?", "body": "<p>You can join the tables with <code>LEFT JOIN</code>. Just pass the join condition in <code>joins</code> and you will get the expected result</p>\n\n<pre><code>Customer.joins(\"LEFT JOIN CustomerAccounts\n                ON CustomerAccounts.CustomerID = Customers.CustomerID\n                AND Customers.State = 'NY'\")\n\n#=&gt; SELECT * FROM Customers LEFT JOIN CustomerAccounts ON CustomerAccounts.CustomerID = Customers.CustomerID AND Customers.State = 'NY'\n</code></pre>\n\n<blockquote>\n  <p>Note: just <code>.joins()</code> does <code>INNER JOIN</code> so you need to specify the join with condition</p>\n</blockquote>\n"}], "owner": {"reputation": 692, "user_id": 5672966, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/897026250394112/picture?type=large", "display_name": "Ezequiel Ramiro", "link": "https://stackoverflow.com/users/5672966/ezequiel-ramiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1742, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487772576, "creation_date": 1487770764, "question_id": 42393095, "link": "https://stackoverflow.com/questions/42393095/how-to-write-a-join-condition-in-ruby-on-rails", "title": "how to write a join condition in Ruby on Rails?", "body": "<p>what I'm trying to do is to write something like the next query:</p>\n\n<pre><code>SELECT *\nFROM Customers c\nLEFT JOIN CustomerAccounts ca\n    ON ca.CustomerID = c.CustomerID\n    AND c.State = 'NY'\n</code></pre>\n\n<p>Notice that I'm not using any WHERE clause, but I need to my JOIN have a condition. I cannot make it work in Ruby on Rails.</p>\n\n<p>Can you help me out?</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1487769621, "post_id": 42392524, "comment_id": 71932716, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5480703/how-to-sort-an-alphanumeric-array-in-ruby\">How to sort an alphanumeric array in ruby</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487797925, "post_id": 42392524, "comment_id": 71951667, "body": "When you give an example (generally a good thing) it&#39;s helpful to assign a variable to each input object (e.g., <code>arr = [&quot;page-1_1.png&quot;,...]</code>). That way, readers can refer to those variables in answers and comments without having to define them. Moreover, all readers will refer to the same variables, which is also helpful."}], "answers": [{"comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 342, "user_id": 7408438, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bb7b1548a23f1ff7ecbb17e50035c52?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/7408438/sam"}, "edited": false, "score": 0, "creation_date": 1487774514, "post_id": 42392624, "comment_id": 71936403, "body": "@sam if this answer worked for you, you should mark  it as the correct answer, otherwise this question will be marked as &#39;unanswered&#39; in searches on the site."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487796877, "post_id": 42392624, "comment_id": 71951054, "body": "Good answer, \u2705. By way of explanation, it might be helpful to show the return values for <code>names.map { |name| name.scan(&#47;\\d+&#47;) }</code> and <code>names.map { |name| name.scan(&#47;\\d+&#47;).map(&amp;:to_i) }</code>, and explain that you are comparing arrays."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487802887, "post_id": 42392624, "comment_id": 71954134, "body": "Note that your method doesn&#39;t sort <code>%w(b c a)</code> at all, and sort <code>%w(a1a0 z1)</code> in a potentially surprising way."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487833861, "post_id": 42392624, "comment_id": 71964670, "body": "@CarySwoveland, added a high level explanation."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487833986, "post_id": 42392624, "comment_id": 71964728, "body": "@EricDuminil, true, but the question doesn&#39;t seem to be concerned with such cases."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487839146, "post_id": 42392624, "comment_id": 71967514, "body": "Just yesterday, you wrote : &quot;a lot of things might work with the example&#39;s values. It doesn&#39;t mean they are correct in the general case&quot;. Please make up your mind and be consistent with your quality standards. ;)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487840263, "post_id": 42392624, "comment_id": 71968153, "body": "@EricDuminil, it is consistent. Here OP&#39;s general case is just different numbers, not different formats. In the other question it was also different numbers, it didn&#39;t need to be exactly <b>two</b> <b>consecutive</b> numbers. Context is important."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487843212, "post_id": 42392624, "comment_id": 71970176, "body": "How do you know it won&#39;t be used with different formats? How did you know it would be used with non-consecutive numbers?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487845106, "post_id": 42392624, "comment_id": 71971454, "body": "@EricDuminil, I&#39;m not sure if you are trolling me right now. xd I don&#39;t possess absolute metacognition so I&#39;m not able to define <i>context</i> as a set of <i>rules</i>. Intuitively, the pattern in OP&#39;s example is consistent. Even if the format changes, the important property here (all file names have the same number of numbers in the same order of importance) should still be consistent. If there are exceptions, the question should have stated them. As there doesn&#39;t seem to be obvious defaults for these situations, not doing so would border the expectation of mind reading capabilities."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487845109, "post_id": 42392624, "comment_id": 71971457, "body": "@EricDuminil, In the other question, the other OP stated exactly what the pattern was - the <i>age</i> being <i>one of</i> some <i>ages</i>. Yet the answer was trying to add more constraints that the pattern didn&#39;t include - falling into a range, just based on the example. For any example, you can impose additional constraints and still get the correct answer."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487845117, "post_id": 42392624, "comment_id": 71971461, "body": "@EricDuminil, So in short - my answer here is just as generic as needed for the pattern. I inferred the pattern from the example provided as it was not clearly defined. In the other question, the answer was less generic than the pattern. The pattern was defined by the question description itself."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487845883, "post_id": 42392624, "comment_id": 71972008, "body": "I&#39;m not trolling. It&#39;s true I&#39;m finicky with your answers though, simply because you usually are with others ;). I just wanted to point out that this answer works for the given example but would fail with very slight variations of the given format, e.g. with folders or <code>page_a_1, page_b_1</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 10, "last_activity_date": 1487833810, "last_edit_date": 1487833810, "creation_date": 1487769522, "answer_id": 42392624, "question_id": 42392524, "link": "https://stackoverflow.com/questions/42392524/how-to-sort-of-string-array/42392624#42392624", "title": "How to sort of string array", "body": "<pre><code>names.sort_by { |name| name.scan(/\\d+/).map(&amp;:to_i) }\n</code></pre>\n\n<hr>\n\n<p>This finds all numbers in each file name and sorts by said numbers. Note that arrays are ordered by comparing the first element, in case of equality - the second and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487789268, "post_id": 42396401, "comment_id": 71946683, "body": "It&#39;s probably not the desired behaviour. <code>%w(1_35 12_0 2_0).sort_by { |s| s.delete(&#39;_&#39;)[&#47;\\d+&#47;].to_i }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487797558, "post_id": 42396401, "comment_id": 71951448, "body": "@Eric, yes, of course. Thanks. I fixed it with what I think is a better approach anyway."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487800013, "post_id": 42396401, "comment_id": 71952795, "body": "Sorry, still not the desired behaviour. <code>1_10</code> and <code>1_1</code> are treated the same and <code>1_11</code> should be after <code>1_7</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487801161, "post_id": 42396401, "comment_id": 71953358, "body": "@Eric. Thanks again. That explains why @ndn chose to use <code>scan</code>, and probably why there are no other answers. I&#39;ll delete my answer shortly."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1487802464, "post_id": 42396401, "comment_id": 71953951, "body": "@Eric, that&#39;s clever! You should post it. I decided to go with something less mainstream. I await your counterexample..."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487802464, "post_id": 42396401, "comment_id": 71953952, "body": "It&#39;s creative, even though it&#39;s basically just a disguised sort of integers array."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487802558, "post_id": 42396401, "comment_id": 71953986, "body": "Some counterexample? Sure! <code>&#39;page-1_256.png&#39;</code> ;)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1487802743, "post_id": 42396401, "comment_id": 71954075, "body": "@Eric, I give up (but will let my answer stand for the possible entertainment value)! LOL!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1487802330, "last_edit_date": 1487802330, "creation_date": 1487779140, "answer_id": 42396401, "question_id": 42392524, "link": "https://stackoverflow.com/questions/42392524/how-to-sort-of-string-array/42396401#42396401", "title": "How to sort of string array", "body": "<p>For the given array, <code>arr</code>, here's an off-the-wall solution.</p>\n\n<pre><code>require 'ipaddr'\n\narr.sort_by { |s| IPAddr.new(s.gsub(/\\D/) { |c| c == '_' ? '.' : '' } + '.0.0') }\n  #=&gt; [\"page-1_1.png\",\n  #    \"page-1_2.png\",\n  #    \"page-1_3.png\",\n  #    \"page-1_4.png\",\n  #    \"page-1_5.png\",\n  #    \"page-1_6.png\",\n  #    \"page-1_7.png\",\n  #    \"page-1_10.png\",\n  #    \"page-1_11.png\",\n  #    \"page-3_92.png\",\n  #    \"page-11_8.png\"] \n</code></pre>\n\n<p>Note that</p>\n\n<pre><code>arr.map { |s| IPAddr.new(s.gsub(/\\D/) { |c| c == '_' ? '.' : '' } + '.0.0') }\n  #=&gt; [#&lt;IPAddr: IPv4:1.1.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.10.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.11.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.2.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.3.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.4.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.5.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.6.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:1.7.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:11.8.0.0/255.255.255.255&gt;,\n  #    #&lt;IPAddr: IPv4:3.92.0.0/255.255.255.255&gt;] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1487802170, "creation_date": 1487802170, "answer_id": 42403412, "question_id": 42392524, "link": "https://stackoverflow.com/questions/42392524/how-to-sort-of-string-array/42403412#42403412", "title": "How to sort of string array", "body": "<p>If you know that the number of pages is bounded (e.g. less than 1000), this method has the advantage of sorting alphabetically and numerically :</p>\n\n<pre><code>arr =\n  ['page-1_1.png',\n   'page-1_10.png',\n   'page-1_11.png',\n   'page-1_3.png',\n   'page-1_9.png']\n\nputs arr.sort_by{ |str| str.gsub(/\\d+/){ |number| number.rjust(3, '0') } }\n# page-1_1.png\n# page-1_3.png\n# page-1_9.png\n# page-1_10.png\n# page-1_11.png\n\nputs %w(b c a).sort_by{ |str| str.gsub(/\\d+/){ |number| number.rjust(3, '0') } }\n# a\n# b\n# c\n</code></pre>\n\n<p>Here are the temporary strings that are being sorted :</p>\n\n<pre><code>puts arr.map{ |str| str.gsub(/\\d+/){ |number| number.rjust(3, '0') } }\n# page-001_001.png\n# page-001_010.png\n# page-001_011.png\n# page-001_003.png\n# page-001_009.png\n</code></pre>\n"}], "owner": {"reputation": 342, "user_id": 7408438, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bb7b1548a23f1ff7ecbb17e50035c52?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/7408438/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1487833810, "creation_date": 1487769268, "last_edit_date": 1487780464, "question_id": 42392524, "link": "https://stackoverflow.com/questions/42392524/how-to-sort-of-string-array", "title": "How to sort of string array", "body": "<p>I am working on ruby on rails and i am new here as well ruby on rails.\nI am working on one project and find some issue of sorting an array of string which contains images name. I have tried many algorithm which i know doesn't help me. When i call service for image extraction it gives me like this array. </p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>[\"page-1_1.png\",\n \"page-1_10.png\",\n \"page-1_11.png\",\n \"page-1_2.png\",\n \"page-1_3.png\",\n \"page-1_4.png\",\n \"page-1_5.png\",\n \"page-1_6.png\",\n \"page-1_7.png\",\n \"page-1_8.png\",\n \"page-1_9.png\"]\n</code></pre>\n\n<p><strong>I want to sort this array like this:</strong></p>\n\n<pre><code>[\"page-1_1.png\",\n \"page-1_2.png\",\n \"page-1_3.png\",\n \"page-1_4.png\",\n \"page-1_5.png\",\n \"page-1_6.png\",\n \"page-1_7.png\",\n \"page-1_8.png\",\n \"page-1_9.png\",\n \"page-1_10.png\",\n \"page-1_11.png\"]\n</code></pre>\n\n<p>I had tried many things to sort but can't get any solutions. please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1487766826, "post_id": 42391495, "comment_id": 71930621, "body": "Probably, the app is leaking memory. Since you are using new relic, see their log to check memory usage chart. If chart is still showing memory increase (not saturating) even after a long time(probably a few hours or a day) after you restarted the dynos, then it is leaking memory. If that&#39;s the case, then I don&#39;t know if someone can help you without the full source code. I have had hard time hunting these. First suggestion will be upgrade to Ruby 2.x if possible. It has huge improvement in garbage collection over 1.9.x"}], "answers": [{"comments": [{"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1487769342, "post_id": 42391775, "comment_id": 71932515, "body": "Yes with puma, but we have make sure that our code thread-safe right?"}, {"owner": {"reputation": 131, "user_id": 7604711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d6d05052bb79667f3a116c71c11ae7?s=128&d=identicon&r=PG", "display_name": "Codextremist", "link": "https://stackoverflow.com/users/7604711/codextremist"}, "reply_to_user": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1487777894, "post_id": 42391775, "comment_id": 71938883, "body": "You use Rails 3.2.22, so the base framework is thread safe at least. It seams to me, that you are just trying to make a legacy rails app &quot;just work&quot;.  You can solve your issue by adding hw or improving sw. The software one (upgrading the ruby version, the rails framework and using puma (instead of unicorn) will alleviate much of ur problem. If you don&#39;t have time right now, your best shot is increasing your dyno performance. If it is a memory leak problem, from time to time you will be annoyed by the R14 thing. The only difference is that the delta will be higher, with better dynos"}], "tags": [], "owner": {"reputation": 131, "user_id": 7604711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d6d05052bb79667f3a116c71c11ae7?s=128&d=identicon&r=PG", "display_name": "Codextremist", "link": "https://stackoverflow.com/users/7604711/codextremist"}, "is_accepted": false, "score": 0, "last_activity_date": 1487767198, "creation_date": 1487767198, "answer_id": 42391775, "question_id": 42391495, "link": "https://stackoverflow.com/questions/42391495/rails-with-heroku/42391775#42391775", "title": "Rails with Heroku", "body": "<p>Your entire RoR stack is pretty much outdated and Heroku now endorses Puma as its preferable server, which eats much less memory (you can check their benchmark at at <a href=\"http://puma.io/\" rel=\"nofollow noreferrer\">http://puma.io/</a>)\n<a href=\"https://i.stack.imgur.com/voIho.png\" rel=\"nofollow noreferrer\">puma benchmark</a></p>\n\n<p>Nevertheless, if the problem started out of nowhere I would rather search for the gems or piece of code that is either causing such memory consumption (activeadmin, rmagick, etc). Also, a rapid but more expensive solution would be increasing your  dyno (Performance-L or Performance-M)\nAs WEB_CONCURRENCY try to lower it and check if this solves the R14 problem</p>\n"}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487767198, "creation_date": 1487766421, "question_id": 42391495, "link": "https://stackoverflow.com/questions/42391495/rails-with-heroku", "title": "Rails with Heroku", "body": "<p>Running rails application with heroku, for the last one month we are getting memory quota exceeded(R14) issues and hardly trying to find the root cause but didn't get any exact reason? is it because of web_concurrency? also we are using new_relic</p>\n\n<p>Rails : 3.2.22</p>\n\n<p>Ruby: 1.9.3</p>\n\n<p>server: unicorn, WEB_CONCURRENCY is 5</p>\n\n<p>As a total of 20 dynos we are using, and managing with process scheduler</p>\n\n<p><a href=\"https://i.stack.imgur.com/b1ErQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b1ErQ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 2, "creation_date": 1487766639, "post_id": 42391192, "comment_id": 71930480, "body": "bind a change listener to your first select and do a ajax request to render the 2nd select"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1488006103, "post_id": 42391192, "comment_id": 72049421, "body": "move your <code>&lt;script...</code> to the <code>application.js</code> (just for better separation). Your <code>select</code>will be a separate method in the controller, that only gets <code>challenger</code> + <code>challenges</code>. In the view you will only render the select box."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1488106566, "post_id": 42391192, "comment_id": 72076311, "body": "I got it working but I ran into a new problem @Fallenhero <a href=\"http://stackoverflow.com/questions/42464849/j-rendered-collection-select-outputs-html-tags\" title=\"j rendered collection select outputs html tags\">stackoverflow.com/questions/42464849/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1487870357, "post_id": 42398605, "comment_id": 71990013, "body": "You need to get the route to take a parameter. <code>get &#39;&#47;challenges&#47;select&#47;:challenger_id&#39;</code> Does it work now?"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1487929545, "post_id": 42398605, "comment_id": 72015039, "body": "@AnthonyGalli.com ?? when are you getting that error? you should not call your ajax method <code>show</code> and dont call your id <code>challenger_id</code> because you are already in <code>challenger</code>-controller norm would be to just call it <code>id</code>"}, {"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "edited": false, "score": 0, "creation_date": 1487956248, "post_id": 42398605, "comment_id": 72032508, "body": "For context, what are <code>Duels</code> and <code>Challenges</code>?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1488106508, "post_id": 42398605, "comment_id": 72076296, "body": "Thank you @SekalfNroc! After some tweaking on your answer I was able to get the javascript working so that the new list of user challenges would be rendered. I ran into a little glitch tho where in the select options the HTML is showing. Do you know how I could resolve this? I think your javascript is causing it. I created a new question for this problem: <a href=\"http://stackoverflow.com/questions/42464849/j-rendered-collection-select-outputs-html-tags\" title=\"j rendered collection select outputs html tags\">stackoverflow.com/questions/42464849/&hellip;</a> Thanks again!"}], "tags": [], "owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "is_accepted": true, "score": 1, "last_activity_date": 1487785203, "creation_date": 1487785203, "answer_id": 42398605, "question_id": 42391192, "link": "https://stackoverflow.com/questions/42391192/select-user-and-then-dropdown-of-his-challenges/42398605#42398605", "title": "select user and then dropdown of his challenges", "body": "<p>Credit for this should go to @Fallenhero - I am just explaining it in more detail. </p>\n\n<p>You need to be able to identify the select tag. </p>\n\n<pre><code>&lt;%= f.select ..., :html =&gt; {:id =&gt; :first} %&gt;\n</code></pre>\n\n<p>You also need somewhere to put the second one.</p>\n\n<pre><code>&lt;div id=\"second\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Using jQuery:</p>\n\n<pre><code>$('#first').change(function () {\n    var challenger_id = $(this).find(\":selected\").val();\n    var address = \"&lt;%= [prints address to new select tag] %&gt;\".concat(challenger_id);\n    $.get(address, function(data) {\n        $(\"#second\").html(data);\n    });\n});\n</code></pre>\n\n<p>The address Ruby prints out should look something like <code>challenges/select/</code> depending on how you want to design it. The <code>/</code> at the end is important. </p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42398605, "answer_count": 1, "score": 0, "last_activity_date": 1488008759, "creation_date": 1487765711, "last_edit_date": 1488008759, "question_id": 42391192, "link": "https://stackoverflow.com/questions/42391192/select-user-and-then-dropdown-of-his-challenges", "title": "select user and then dropdown of his challenges", "body": "<p>A user <code>has_many</code> challenges.</p>\n\n<p>When a user is selected...</p>\n\n<pre><code>&lt;%= f.select :user_id, options_for_select(@challengers.collect { |challenger| [challenger.full_name] }) %&gt;\n</code></pre>\n\n<p>... how can we show another dropdown with a list of his challenges?</p>\n\n<pre><code>&lt;%= f.select :challenge_id, options_for_select(@challenger_challenges.collect { |challenged| [challenged.full_challenge]}) %&gt;\n</code></pre>\n\n<p>In other words, how can we make \"<code>@challenger_challenges</code> = the selected user's challenges\"?</p>\n\n<p>As it stand I get an error <code>undefined method 'collect' for nil:NilClass</code> since <code>@challenger_challenges</code> is <code>nil</code>.</p>\n\n<h2>OPTION 1</h2>\n\n<p>In challenges_controller I could do this:</p>\n\n<pre><code>@challengers = User.all\n@challenger = User.find(params[:challenger_selected]) if (params[:challenger_selected]).present?\n@challenger_challenges = @challenger.challenges\n</code></pre>\n\n<p>And then I would just need a way to refresh the page once a user is selected so that the user ID is passed in the params as <code>:challenger_selected</code></p>\n\n<h2>OPTION 2</h2>\n\n<p>Achieve the aim of this question without the need of a page refresh. *Preferable</p>\n\n<h2>UPDATE</h2>\n\n<p>Based upon the comments below I realize I need to elaborate.</p>\n\n<p>A user <code>has_many</code> challenges.</p>\n\n<p>A user can create a <code>duel</code>.</p>\n\n<p>In a <code>duel</code> there are two <code>duelers</code>.</p>\n\n<p>The creator of the <code>duel</code> selects his own <code>:challenge_id</code> and then he selects the other dueler as well as one of his <code>:challenge_id</code> and then sets the <code>@duel.consequence</code> the dueler will have to do if he fails his challenge. The other dueler will get a duel request notification and then has the choice to accept or decline the conditions of the duel.</p>\n\n<p><strong>challenges.show.html.erb</strong></p>\n\n<pre><code>&lt;%= render 'duels/form' %&gt;\n</code></pre>\n\n<p><strong>duels/_form.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for(@duel) do |f| %&gt;\n  &lt;%= f.fields_for :duelers do |dueler| %&gt; \n    &lt;%= f.hidden_field :challenge_id, :value =&gt; @challenge.id %&gt;\n    &lt;%= @challenge.full_challenge %&gt;\n  &lt;% end %&gt;\n  &lt;%= f.fields_for :duelers do |dueler| %&gt;\n    &lt;%= render 'duels/dueler_fields', :f =&gt; dueler %&gt;\n  &lt;% end %&gt;\n  &lt;%= button_tag(type: 'submit', class: \"btn\", id: \"challenge-create-save\")  do %&gt;\n    Request Duel\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>duels/_dueler_fields.html.erb</strong></p>\n\n<pre><code>&lt;%= f.select :user_id, options_for_select(@challengers.collect { |challenger| [challenger.id] }) %&gt;\n\n# Trying to make this responsive to the user that is selected above\n&lt;%= render 'challenges/select', :f =&gt; f %&gt;\n\n&lt;script&gt;\n$('#duel_duelers_attributes_1_user_id').change(function () {\n    var challenger_id = $(this).find(\":selected\").val();\n    var address = \"&lt;%= select_path %&gt;\".concat(challenger_id);\n    $.get(address, function(data) {\n        $(\"#duel_duelers_attributes_1_challenge_id\").html(data);\n    });\n});\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>routes</strong></p>\n\n<pre><code>get 'challenges/select/:id' =&gt; 'challenges#select', as: 'select'\n</code></pre>\n\n<p><strong>challenges/_select.html.erb</strong></p>\n\n<pre><code>&lt;%= f.select :challenge_id, options_for_select(@challenger_challenges.collect { |challenged| [challenged.full_challenge]}) %&gt;\n</code></pre>\n\n<p><strong>challenges_controller</strong></p>\n\n<pre><code>def select\n  if (params[:challenger_id]).present?\n    @challenger = User.find(params[:challenger_id])\n  else\n    @challenger = User.find(1)\n  end\n  @challenger_challenges = @challenger.challenges\nend\n</code></pre>\n"}, {"tags": ["ruby", "hash", "enumerable"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1487765109, "post_id": 42390908, "comment_id": 71929354, "body": "it is not a hash, it is an array."}], "answers": [{"comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1487783819, "post_id": 42393536, "comment_id": 71943226, "body": "The whole point is that I didn&#39;t want to evaluate the whole internal loop before returning a single value, your solution solved that for me, thank you very much, btw for me I removed the last enum call and chained the <code>.lazy</code> after the <code>end</code>"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1487772418, "last_edit_date": 1487772418, "creation_date": 1487771880, "answer_id": 42393536, "question_id": 42390908, "link": "https://stackoverflow.com/questions/42390908/lazy-enumerator-for-nested-array-of-hashes/42393536#42393536", "title": "Lazy enumerator for nested array of hashes", "body": "<p>This returns a lazy enumerator which iterates over all the small hashes :</p>\n\n<pre><code>def lazy_nested_hashes(data)\n  enum = Enumerator.new do |yielder|\n    data.each do |internal_data|\n      internal_data[:important_key_1][:important_key_2].each do |small_hash|\n        yielder &lt;&lt; small_hash\n      end\n    end\n  end\n  enum.lazy\nend\n</code></pre>\n\n<p>With your input data and a <code>val</code> definition :</p>\n\n<pre><code>@i = 0\n\ndef val\n  @i += 1\nend\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>puts lazy_nested_hashes(data).to_a.inspect\n#=&gt; [{:key=&gt;3}, {:key=&gt;4}, {:key=&gt;7}, {:key=&gt;8}]\nputs lazy_nested_hashes(data).map { |x| x[:key] }.find { |k| k &gt; 3 }\n#=&gt; 4\n</code></pre>\n\n<p>For the second example, the second big hash isn't considered at all (thanks to <a href=\"http://ruby-doc.org/core-2.3.0/Enumerator/Lazy.html#method-i-lazy\" rel=\"nofollow noreferrer\"><code>enum.lazy</code></a>)</p>\n"}], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 42393536, "answer_count": 1, "score": 0, "last_activity_date": 1522310427, "creation_date": 1487764967, "last_edit_date": 1522310427, "question_id": 42390908, "link": "https://stackoverflow.com/questions/42390908/lazy-enumerator-for-nested-array-of-hashes", "title": "Lazy enumerator for nested array of hashes", "body": "<p>Suppose I have an <code>Array</code> like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>data = [\n  {\n    key: val,\n    important_key_1: { # call this the big hash\n      key: val,\n      important_key_2: [\n        { # call this the small hash\n          key: val,\n        },\n        {\n          key: val,\n        },\n      ]\n    },\n  },\n  {\n    key: val,\n    important_key_1: {\n      key: val,\n      important_key_2: [\n        {\n          key: val,\n        },\n        {\n          key: val,\n        },\n      ]\n    },\n  },\n]\n</code></pre>\n\n<p>I want to create a lazy enumerator that would return the next small hash on each <code>#next</code>, and move on to the next big hash and do the same when the first big hash reaches the end</p>\n\n<p>The easy way to return all the internal hashes that I want would be something like this</p>\n\n<pre><code>data[:important_key_1].map do |internal_data|\n  internal_data[:important_key_2]\nend.flatten\n</code></pre>\n\n<p>Is there someway to do this or do I need to implement my own logic ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "react.rb"], "comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1487765087, "post_id": 42390526, "comment_id": 71929334, "body": "How does your client route class look like?"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1487765533, "post_id": 42390526, "comment_id": 71929662, "body": "I don&#39;t have a client model/controller so no client route"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1487766422, "post_id": 42390526, "comment_id": 71930308, "body": "I think client_id is coming from synchromesh_controller.rb in hypermesh"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1487776937, "post_id": 42390526, "comment_id": 71938165, "body": "Problem seems to have gone away after rebooting my computer"}], "owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487764091, "creation_date": 1487764091, "question_id": 42390526, "link": "https://stackoverflow.com/questions/42390526/no-route-matches-after-installing-hyperloop", "title": "&quot;No route matches&quot; after installing HyperLoop", "body": "<p>I'm getting an error when I start rails in development </p>\n\n<pre><code>ActionController::UrlGenerationError - No route matches {:action=&gt;\"index\", :client_id=&gt;\"bd881667-ee11-441e-a98f-6f6a6005435a-53d08ea16f47a449a12861c8ebf6e1d3\", :controller=&gt;\"reception\"}\n</code></pre>\n\n<p>It seems to be coming from a link:\n<code>reception_index_url</code></p>\n\n<p>rake routes shows</p>\n\n<pre><code>reception_index GET    /reception(.:format)      reception#index\n</code></pre>\n\n<p>so the route is there but I'm guessing :client_id is the problem. I have added <code>mount HyperMesh::Engine =&gt; '/rr'</code> to routes.rb</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": true, "score": 4, "last_activity_date": 1487763111, "creation_date": 1487763111, "answer_id": 42390120, "question_id": 42390058, "link": "https://stackoverflow.com/questions/42390058/query-array-of-hashes-with-multiple-values-using-ruby/42390120#42390120", "title": "Query array of hashes with multiple values using Ruby", "body": "<p>This will do it:</p>\n\n<pre><code>array.select { |user| [26, 27].include?(user['age']) }\n</code></pre>\n\n<p>The 'select' will choose any elements that match the provided block.</p>\n"}, {"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487763320, "post_id": 42390137, "comment_id": 71927999, "body": "Why would you use <code>between?</code> in this situation. There is nothing in OP&#39;s question that would suggest that it&#39;s appropriate."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487770079, "post_id": 42390137, "comment_id": 71933064, "body": "@EricDuminil, when I see <code>include?</code>, I think <i>one of</i>, when I see <code>between?</code> I think <i>within the bounds of</i>. Both are equally easy to read, only one is what OP wanted. What if <code>26</code> and <code>27</code> were just an example?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487770282, "post_id": 42390137, "comment_id": 71933217, "body": "@ndn: Both work fine with this example. I find <code>between?</code> even more readable than <code>include?</code> in this case : read as an english sentence, the first example is easier to parse IMHO."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487770439, "post_id": 42390137, "comment_id": 71933332, "body": "@EricDuminil, a lot of things might work with the example&#39;s values. It doesn&#39;t mean they are correct in the general case."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487770522, "post_id": 42390137, "comment_id": 71933391, "body": "@ndn: True, but only the OP knows what the general case is. Without more info, I find it harsh to say that this answer isn&#39;t appropriate."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1487770696, "post_id": 42390137, "comment_id": 71933513, "body": "@EricDuminil, OP stated what his case is - select for specific ages. Would you agree that <code>x.select { |e| (e[&#39;age&#39;] - 26.5).abs &lt; 1 }</code> is not simply obscure, but incorrect solution to the problem? If yes - that is the principal difference with <code>#between?</code>?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487771069, "post_id": 42390137, "comment_id": 71933774, "body": "I am not arguing the correctness of answer for the specific solution <b>but normally in such scenarios you will select the results between some specific range and there you don&#39;t want to add each and every number in an array</b>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487771155, "post_id": 42390137, "comment_id": 71933831, "body": "Let&#39;s say you need to select records whose age lies around 20 to 40 you don&#39;t want to add 20 elements in that array"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1487771197, "post_id": 42390137, "comment_id": 71933860, "body": "Again you can use <code>(20..40).to_a</code>  but <code>between?</code> is doing same for you right?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487771417, "post_id": 42390137, "comment_id": 71934027, "body": "@DeepakMahakale, I would agree if OP asked for ages between <i>x</i> and <i>y</i> and not the ages <i>x</i> and <i>y</i>. There are plenty of reasons to ask for specific ages. My objection is that code should say what you say when describing your problem. He wants <i>x</i> and <i>y</i>, not between <i>x</i> and <i>y</i>."}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 2, "last_activity_date": 1487764119, "last_edit_date": 1487764119, "creation_date": 1487763137, "answer_id": 42390137, "question_id": 42390058, "link": "https://stackoverflow.com/questions/42390058/query-array-of-hashes-with-multiple-values-using-ruby/42390137#42390137", "title": "Query array of hashes with multiple values using Ruby", "body": "<p>You can make use of <strong><code>between?</code></strong></p>\n\n<pre><code>array.select{ |a| a['age'].between?(26, 27) }\n</code></pre>\n\n<p>This will return you only the hash which has <code>age</code> between <code>26</code> and <code>27</code></p>\n\n<p>Or You can use <strong><code>include?</code></strong> to check for specific age</p>\n\n<pre><code>array.select{ |a| [26, 27].include? a['age'] }\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 2422930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e9d1135a6cae3d8126521e5540c50d5d?s=128&d=identicon&r=PG&f=1", "display_name": "rmn.nish", "link": "https://stackoverflow.com/users/2422930/rmn-nish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 42390120, "answer_count": 2, "score": 1, "last_activity_date": 1487872767, "creation_date": 1487762973, "last_edit_date": 1487872767, "question_id": 42390058, "link": "https://stackoverflow.com/questions/42390058/query-array-of-hashes-with-multiple-values-using-ruby", "title": "Query array of hashes with multiple values using Ruby", "body": "<p>I have an array of hashes as follows:</p>\n\n<pre><code>array = [{\"name\"=&gt;\"Nish\", \"age\"=&gt;27, \"place\"=&gt;\"xyz\"},\n         {\"name\"=&gt;\"Hari\", \"age\"=&gt;26, \"place\"=&gt;\"xyz\"},\n         {\"name\"=&gt;\"Anan\", \"age\"=&gt;28, \"place\"=&gt;\"xyz\"}]\n</code></pre>\n\n<p>I want to select the hashes with <code>age  27 and 26</code></p>\n\n<p>How to achieve that.</p>\n"}, {"tags": ["html", "css", "ruby", "email", "spree"], "comments": [{"owner": {"reputation": 6681, "user_id": 1035104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/454baf4fc5aceca3d78204dc076c3632?s=128&d=identicon&r=PG", "display_name": "Aslam", "link": "https://stackoverflow.com/users/1035104/aslam"}, "edited": false, "score": 0, "creation_date": 1487760099, "post_id": 42388757, "comment_id": 71925726, "body": "If you are attaching any css files, then it won&#39;t work. Try adding the property inline."}, {"owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "reply_to_user": {"reputation": 6681, "user_id": 1035104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/454baf4fc5aceca3d78204dc076c3632?s=128&d=identicon&r=PG", "display_name": "Aslam", "link": "https://stackoverflow.com/users/1035104/aslam"}, "edited": false, "score": 0, "creation_date": 1487760263, "post_id": 42388757, "comment_id": 71925861, "body": "@hunzaboy Tried both ways, actually spree takes care of CSS files, thats why other properties are coming, but tried giving this as inline as well. didn&#39;t work."}, {"owner": {"reputation": 261097, "user_id": 3597276, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6eea660ae3aeca2117a2d910ee9916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Benjamin", "link": "https://stackoverflow.com/users/3597276/michael-benjamin"}, "edited": false, "score": 0, "creation_date": 1487768856, "post_id": 42388757, "comment_id": 71932121, "body": "possible duplicate: <a href=\"http://stackoverflow.com/q/39376710/3597276\"><b>Flex-box properties are deleted in gmail email</b></a>"}, {"owner": {"reputation": 261097, "user_id": 3597276, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6eea660ae3aeca2117a2d910ee9916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Benjamin", "link": "https://stackoverflow.com/users/3597276/michael-benjamin"}, "edited": false, "score": 0, "creation_date": 1487768968, "post_id": 42388757, "comment_id": 71932194, "body": "also see: <a href=\"http://stackoverflow.com/q/37647378/3597276\">stackoverflow.com/q/37647378/3597276</a>"}], "answers": [{"tags": [], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1487764982, "last_edit_date": 1592644375, "creation_date": 1487761230, "answer_id": 42389366, "question_id": 42388757, "link": "https://stackoverflow.com/questions/42388757/css-properties-not-appearing-in-email/42389366#42389366", "title": "CSS properties not appearing in email", "body": "<p>It seems support of flex is still not proper as explained in this <a href=\"https://litmus.com/community/discussions/1500-using-flexbox-in-an-email\" rel=\"nofollow noreferrer\">link</a></p>\n<blockquote>\n<p>Now here are the webmails in which Flexbox is not supported :</p>\n<ul>\n<li>Yahoo</li>\n<li>Gmail</li>\n<li>Outlook.com</li>\n</ul>\n<p>Gmail and Outlook.com also filter every properties related to Flexbox, except the property <code>display:flex</code>.</p>\n</blockquote>\n<p>This may be the reason why I am not even able to see the <code>justify-content</code> in rendered email.</p>\n"}], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1487764982, "creation_date": 1487759675, "question_id": 42388757, "link": "https://stackoverflow.com/questions/42388757/css-properties-not-appearing-in-email", "title": "CSS properties not appearing in email", "body": "<p>In my <a href=\"https://github.com/spree/spree\" rel=\"nofollow noreferrer\">spree</a> store, I am preparing mailer to send email on order confirmation, but CSS property: <code>justify-content</code> is not appearing in the email rendered.</p>\n\n<p>Following is my HTML:</p>\n\n<pre><code>  &lt;div class=\"banner\"&gt;\n    &lt;img class=\"height-50perc banner-content\" src=\"https://myUrl\" /&gt;\n    &lt;span class=\"banner-content\"&gt;Order confirmed&lt;/span&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>My CSS:</p>\n\n<pre><code>.banner {\n  display: flex;\n  height: 80px;\n  background: linear-gradient(90deg, #2e3092 , #0c5fdc);\n  justify-content: space-between;\n}\n\n.banner-content {\n  margin-top: auto;\n  margin-bottom: auto;\n  margin-left: 10px;\n  margin-right: 10px;\n  color: white;\n  font-size: 20px;\n}\n</code></pre>\n\n<p>But in email rendered, I don't see property: <code>justify-content</code>. When I inspect corresponding element: it is like this:</p>\n\n<pre><code>&lt;div class=\"m_2586726072602943149banner\" style=\"background:linear-gradient(90deg,#2e3092,#0c5fdc);display:flex;height:80px\"&gt;\n    ....\n&lt;/div&gt;\n</code></pre>\n\n<p>Notice there is no <code>justify-content</code> in this <code>div</code>. I am viewing email in chrome and firefox browser in Mac.</p>\n\n<p>I have also tried changing CSS to:</p>\n\n<pre><code>.banner {\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  height: 80px;\n  background: linear-gradient(90deg, #2e3092 , #0c5fdc);\n  justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n</code></pre>\n\n<p>But this also did not help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "byebug"], "comments": [{"owner": {"reputation": 4166, "user_id": 376378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a439d0912d0e079d3a5f8cd44c070b6e?s=128&d=identicon&r=PG", "display_name": "cutalion", "link": "https://stackoverflow.com/users/376378/cutalion"}, "edited": false, "score": 0, "creation_date": 1532422965, "post_id": 42388199, "comment_id": 89957487, "body": "Try <a href=\"https://github.com/deivid-rodriguez/pry-byebug\" rel=\"nofollow noreferrer\">pry-byebug</a>. Pry allows you to write multiline code"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 2912014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0564952cfb3994fea4650f925fa32f?s=128&d=identicon&r=PG&f=1", "display_name": "light.wave", "link": "https://stackoverflow.com/users/2912014/light-wave"}, "is_accepted": true, "score": 8, "last_activity_date": 1534600286, "creation_date": 1534600286, "answer_id": 51909370, "question_id": 42388199, "link": "https://stackoverflow.com/questions/42388199/rails-multiline-debug-in-byebug-or-how-to-rescue-in-single-line/51909370#51909370", "title": "Rails multiline debug in byebug or how to rescue in single line", "body": "<p>When you enter multiple lines ruby code or in a single line on byebug, you need to escape the semicolon using backlash. The following should do the trick.</p>\n\n<pre><code>begin\\; my_crashing_method.call\\; rescue Exception =&gt; e\\; puts e.backtrace end\n</code></pre>\n\n<p><a href=\"https://github.com/deivid-rodriguez/byebug/blob/master/GUIDE.md#command-syntax\" rel=\"noreferrer\">https://github.com/deivid-rodriguez/byebug/blob/master/GUIDE.md#command-syntax</a></p>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2062, "favorite_count": 2, "accepted_answer_id": 51909370, "answer_count": 1, "score": 9, "last_activity_date": 1534600286, "creation_date": 1487757372, "last_edit_date": 1500588727, "question_id": 42388199, "link": "https://stackoverflow.com/questions/42388199/rails-multiline-debug-in-byebug-or-how-to-rescue-in-single-line", "title": "Rails multiline debug in byebug or how to rescue in single line", "body": "<p>Sometimes I need to debug some nasty exception that has its backtrace hidden or truncated, like an <code>ArgumentError</code> without any stack trace. </p>\n\n<p>I am used to debugging with byebug. The problem is that the byebug interpreter is a REPL, so it's not possible to write multiline code. I am trying to figure out how to make an inline rescue and print the backtrace from there, ie <strong>I want an inline, REPL compatible, version of</strong> </p>\n\n<pre><code>begin \n  .... \nrescue =&gt; e \n  puts e.backtrace.join(\"\\n\")\nend\n</code></pre>\n\n<p>I have tried </p>\n\n<pre><code>begin; my_crashing_method.call; rescue Exception =&gt; e; puts e.backtrace; end\n</code></pre>\n\n<p>But that line raises a SyntaxError</p>\n\n<pre><code>*** SyntaxError Exception: (byebug):1: syntax error, unexpected keyword_rescue\nrescue Exception =&gt; e\n      ^\n</code></pre>\n\n<p>I'm not sure what I am missing ?</p>\n\n<p>EDIT</p>\n\n<p>The line above works fine on a regular IRB/Rails shell but not from a byebug shell</p>\n\n<p>IRB</p>\n\n<pre><code>begin my_crashing_method.call; rescue Exception =&gt; e; puts e.backtrace end\n</code></pre>\n\n<blockquote>\n  <p>Stack Trace shows successfully</p>\n</blockquote>\n\n<p>Byebug</p>\n\n<pre><code>(byebug) begin; my_crashing_method.call; rescue Exception =&gt; e; puts e.backtrace\n*** SyntaxError Exception: (byebug):1: syntax error, unexpected end-of-input\nbegin\n     ^\n\nnil\n*** NameError Exception: undefined local variable or method `my_crashing_method' for #&lt;StaticPagesController:0x007fae79f61088&gt;\n\nnil\n*** SyntaxError Exception: (byebug):1: syntax error, unexpected keyword_rescue\nrescue Exception =&gt; e\n      ^\n\nnil\n*** NameError Exception: undefined local variable or method `e' for #&lt;StaticPagesController:0x007fae79f61088&gt;\n\nnil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "associations"], "answers": [{"tags": [], "owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "is_accepted": true, "score": 0, "last_activity_date": 1487845320, "last_edit_date": 1487845320, "creation_date": 1487791552, "answer_id": 42400516, "question_id": 42388040, "link": "https://stackoverflow.com/questions/42388040/how-to-avoid-creating-duplicate-records-in-join-table-with-has-many-through-asso/42400516#42400516", "title": "How to avoid creating duplicate records in join table with has_many through association?", "body": "<p>I found out a workaround by placing <code>accepts_nested_attributes_for</code>. My associations are now like this:</p>\n\n<pre><code>class Physician &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :patients, through: :appointments\n  accepts_nested_attributes_for :appointments\nend\n\nclass Patient &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :physicians, through: :appointments\nend\n\nclass Appointment &lt; ActiveRecord::Base\n  belongs_to :physician\n  belongs_to :patient\n  accepts_nested_attributes_for :patients\nend\n</code></pre>\n\n<p>And i did this in the console:</p>\n\n<pre><code>a = Physician.last\na.update(appointment_attributes: [{appointment_data: DateTime.now, patient_attributes: {name: 'Rajesh', disease: 'fever'}}])\n</code></pre>\n\n<p>It is now creating only one record in the <code>appointments</code> table.</p>\n"}], "owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 42400516, "answer_count": 1, "score": 2, "last_activity_date": 1487845320, "creation_date": 1487756904, "question_id": 42388040, "link": "https://stackoverflow.com/questions/42388040/how-to-avoid-creating-duplicate-records-in-join-table-with-has-many-through-asso", "title": "How to avoid creating duplicate records in join table with has_many through association?", "body": "<p>I have two models <code>Physician</code>, <code>Patient</code> and a join model <code>Appointment</code> and the association is like as follows:</p>\n\n<pre><code>class Physician &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :patients, through: :appointments\n  accepts_nested_attributes_for :patients\nend\n\nclass Patient &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :physicians, through: :appointments\n  accepts_nested_attributes_for :appointments\nend\n\nclass Appointment &lt; ActiveRecord::Base\n  belongs_to :physician\n  belongs_to :patient\nend\n</code></pre>\n\n<p>I want to update <code>appoinment_data</code> in the <code>appointment</code> table when there is a new \nentry in the <code>appointment</code> table.</p>\n\n<p>So in the rails console:</p>\n\n<pre><code>a = Physician.last\n#&lt;Physician id: 1, name: \"Hamza\", address: \"Pune\", created_at: \"2017-02-22 07:07:10\", updated_at: \"2017-02-22 07:07:10\"&gt;\n\na.update(patients_attributes: [{ name: 'Prajakta', disease: 'Fever', appointments_attributes: [{appointment_data: DateTime.now}]}])\n   (0.7ms)  BEGIN\n  SQL (0.9ms)  INSERT INTO \"patients\" (\"name\", \"disease\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"name\", \"Prajakta\"], [\"disease\", \"Fever\"], [\"created_at\", \"2017-02-22 08:30:22.321863\"], [\"updated_at\", \"2017-02-22 08:30:22.321863\"]]\n  SQL (0.8ms)  INSERT INTO \"appointments\" (\"appointment_data\", \"patient_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"appointment_data\", \"2017-02-22 08:30:22.311198\"], [\"patient_id\", 5], [\"created_at\", \"2017-02-22 08:30:22.326373\"], [\"updated_at\", \"2017-02-22 08:30:22.326373\"]]\n  SQL (0.9ms)  INSERT INTO \"appointments\" (\"physician_id\", \"patient_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\"  [[\"physician_id\", 1], [\"patient_id\", 5], [\"created_at\", \"2017-02-22 08:30:22.333624\"], [\"updated_at\", \"2017-02-22 08:30:22.333624\"]]\n   (1.2ms)  COMMIT\n=&gt; true\n</code></pre>\n\n<p>It is creating two <code>records</code> in the <code>appointment</code> table.\nOne record with <code>appointment_data</code> and <code>patient_id</code>. Other is with <code>physician_id</code> and <code>patient_id</code>.</p>\n\n<p>What am i missing here? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "rubygems"], "comments": [{"owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "edited": false, "score": 0, "creation_date": 1487761066, "post_id": 42388013, "comment_id": 71926443, "body": "what did you try so far ?"}], "answers": [{"tags": [], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "is_accepted": false, "score": 0, "last_activity_date": 1487758198, "creation_date": 1487758198, "answer_id": 42388545, "question_id": 42388013, "link": "https://stackoverflow.com/questions/42388013/how-to-validate-bank-details-like-account-number-ifsc-code-bank-name-and-branc/42388545#42388545", "title": "How to validate bank details like account_number, ifsc_code, bank_name and branch_code etc... in Rails", "body": "<p>In your model, you need to add a <code>validates: your_column</code>. </p>\n\n<p>For example if you want to make sure that account number is present before you save to the database, you need to add <code>validates: account_number, presence: true</code> </p>\n\n<p>There are both pre-built helpers, so you can validate by presence, name, etc, but you can also use a custom method to validate those.</p>\n\n<p>Check out <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">RailsGuides</a> for all the details</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 7580637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsX9a.jpg?s=128&g=1", "display_name": "Abhishek28", "link": "https://stackoverflow.com/users/7580637/abhishek28"}, "is_accepted": false, "score": 0, "last_activity_date": 1487761609, "creation_date": 1487761609, "answer_id": 42389512, "question_id": 42388013, "link": "https://stackoverflow.com/questions/42388013/how-to-validate-bank-details-like-account-number-ifsc-code-bank-name-and-branc/42389512#42389512", "title": "How to validate bank details like account_number, ifsc_code, bank_name and branch_code etc... in Rails", "body": "<p>There are so many validation that you can apply on your columns, here is a list of possible validation. you can pick as your requirement.</p>\n\n<p>Validation for data should be present</p>\n\n<pre><code>validates :account_number, :ifsc_code, :branch_code, :bank_name, presence: true\n</code></pre>\n\n<p>data should be positive numbers only</p>\n\n<pre><code>validates :account_number, :branch_code, :numericality =&gt; { :greater_than_or_equal_to =&gt; 0 }\n</code></pre>\n\n<p>set length of record</p>\n\n<pre><code>validates :ifsc_code, length: { is: 11 }\n</code></pre>\n\n<p>validates that the attribute's value is unique right before the object gets saved</p>\n\n<pre><code>validates :account_number, uniqueness: true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1487761682, "creation_date": 1487761682, "answer_id": 42389539, "question_id": 42388013, "link": "https://stackoverflow.com/questions/42388013/how-to-validate-bank-details-like-account-number-ifsc-code-bank-name-and-branc/42389539#42389539", "title": "How to validate bank details like account_number, ifsc_code, bank_name and branch_code etc... in Rails", "body": "<p>In your model you can have something like this:</p>\n\n<pre><code>validates: branch_code\n</code></pre>\n\n<p>which is a standard validation, making sure its present </p>\n\n<p>Or you can do more validation using regex</p>\n\n<pre><code>validates :bank_name, format: { with: /\\A[a-zA-Z]+\\z/,\n    message: \"only allows letters\" }\n</code></pre>\n\n<p>Here are some examples of validation:</p>\n\n<pre><code>  validates :bank_name, length: { minimum: 2 }\n  validates :bank_name, length: { maximum: 500 }\n  validates :bank_name, length: { in: 6..20 }\n  validates :bank_name, length: { is: 6 }\n</code></pre>\n\n<p>Or use some advance techniques like so:</p>\n\n<pre><code>validates :bank_name, presence: true, if: \"branch_code.nil?\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 3612088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7afc3e3eae833d6bd9a52367d09a269c?s=128&d=identicon&r=PG&f=1", "display_name": "321k", "link": "https://stackoverflow.com/users/3612088/321k"}, "is_accepted": false, "score": 0, "last_activity_date": 1574541841, "creation_date": 1574541841, "answer_id": 59012084, "question_id": 42388013, "link": "https://stackoverflow.com/questions/42388013/how-to-validate-bank-details-like-account-number-ifsc-code-bank-name-and-branc/59012084#59012084", "title": "How to validate bank details like account_number, ifsc_code, bank_name and branch_code etc... in Rails", "body": "<p>TransferWise provides an API you can use to validate IFSC codes and Indian account numbers:</p>\n\n<p>IFSC code</p>\n\n<pre><code>https://api.transferwise.com/v1/validators/ifsc-code?ifscCode=YESB0236041\n</code></pre>\n\n<p>Account number</p>\n\n<pre><code>https://api.transferwise.com/v1/validators/indian-account-number?accountNumber=678911234567891\n</code></pre>\n\n<p><a href=\"https://api-docs.transferwise.com/#recipient-accounts-validate-recipient-fields\" rel=\"nofollow noreferrer\">Documentation here.</a> </p>\n"}], "owner": {"reputation": 101, "user_id": 6902955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d146de5d35371f423787eac4d1a83ec?s=128&d=identicon&r=PG&f=1", "display_name": "Anjankumar H N", "link": "https://stackoverflow.com/users/6902955/anjankumar-h-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 944, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1574541841, "creation_date": 1487756850, "question_id": 42388013, "link": "https://stackoverflow.com/questions/42388013/how-to-validate-bank-details-like-account-number-ifsc-code-bank-name-and-branc", "title": "How to validate bank details like account_number, ifsc_code, bank_name and branch_code etc... in Rails", "body": "<p>In my rails application, I have bank_details table with columns - account_number, ifsc_code, bank_name and branch_code(Only for India). But I don't know how to validates this columns before save it to database.Plese help me in this.</p>\n\n<p>I will appreciate your help.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487763622, "post_id": 42387898, "comment_id": 71928229, "body": "Are you sure it was 1.9.1 and not 1.9.0 that introduced <code>#sample</code>?"}], "tags": [], "owner": {"reputation": 958, "user_id": 4722446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0XHCk5L1APU/AAAAAAAAAAI/AAAAAAAAGlk/DK9XxoNE-a8/photo.jpg?sz=128", "display_name": "Cedric Druck", "link": "https://stackoverflow.com/users/4722446/cedric-druck"}, "is_accepted": true, "score": 2, "last_activity_date": 1487763436, "last_edit_date": 1487763436, "creation_date": 1487756579, "answer_id": 42387898, "question_id": 42387846, "link": "https://stackoverflow.com/questions/42387846/generate-random-value-from-list-of-numbers/42387898#42387898", "title": "Generate random value from list of numbers", "body": "<p>Just use <code>Array#sample</code>:</p>\n\n<pre><code>[100, 643, 826, 804, 372, 076, 156, 152, 036, 248].sample\n</code></pre>\n\n<p>Available in Ruby <em>1.9.1+</em>. In an earlier version of Ruby, you could</p>\n\n<pre><code>require 'backports/1.9.1/array/sample'\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1487756694, "accepted_answer_id": 42387898, "answer_count": 1, "score": 0, "last_activity_date": 1487763436, "creation_date": 1487756434, "question_id": 42387846, "link": "https://stackoverflow.com/questions/42387846/generate-random-value-from-list-of-numbers", "closed_reason": "Duplicate", "title": "Generate random value from list of numbers", "body": "<p>How I can generate list of random values in Ruby from a list of numbers?</p>\n\n<pre><code>[100, 643, 826, 804, 372, 076, 156, 152, 036, 248]\n</code></pre>\n\n<p>How I can pick one random number from the list?</p>\n"}, {"tags": ["ruby", "faker"], "comments": [{"owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "edited": false, "score": 1, "creation_date": 1487755105, "post_id": 42387195, "comment_id": 71922685, "body": "add more details about your validation and the error."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1487755203, "post_id": 42387195, "comment_id": 71922752, "body": "<i>&quot;But I get validation error. Is this code valid?&quot;</i> \u2013 That&#39;s not a contradiction. Validations don&#39;t validate code."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1487754976, "creation_date": 1487754976, "answer_id": 42387217, "question_id": 42387195, "link": "https://stackoverflow.com/questions/42387195/generate-random-values/42387217#42387217", "title": "Generate random values", "body": "<blockquote>\n  <p>Is this code valid?</p>\n</blockquote>\n\n<p>Yes this is a valid code. </p>\n\n<blockquote>\n  <p>But I get validation error.</p>\n</blockquote>\n\n<p>You validate the (assumably) <code>card_holder</code> column, and the result of this <strong><em>valid</em></strong> code does not meet the validation rules.</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 42387217, "answer_count": 1, "score": -3, "last_activity_date": 1487843475, "creation_date": 1487754897, "last_edit_date": 1487843475, "question_id": 42387195, "link": "https://stackoverflow.com/questions/42387195/generate-random-values", "title": "Generate random values", "body": "<p>I want to generate random name using the following code:</p>\n\n<pre><code>def random_card_holder\n  Faker::Name.first_name + \" \" + Faker::Name.last_name\nend\n</code></pre>\n\n<p>But I get validation error. Is this code valid?</p>\n"}, {"tags": ["ruby", "cygwin"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 3640998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5pgJ3.jpg?s=128&g=1", "display_name": "Mebius", "link": "https://stackoverflow.com/users/3640998/mebius"}, "edited": false, "score": 0, "creation_date": 1487859465, "post_id": 42388035, "comment_id": 71981756, "body": "I agree with you on the antivirus part, unfortunately I can&#39;t deactivate it, so I&#39;ll have to find an other way to do what I want to do..."}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "reply_to_user": {"reputation": 105, "user_id": 3640998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5pgJ3.jpg?s=128&g=1", "display_name": "Mebius", "link": "https://stackoverflow.com/users/3640998/mebius"}, "edited": false, "score": 0, "creation_date": 1487860382, "post_id": 42388035, "comment_id": 71982501, "body": "then open a bug request to the Antivirus company."}], "tags": [], "owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "is_accepted": true, "score": 1, "last_activity_date": 1487756898, "creation_date": 1487756898, "answer_id": 42388035, "question_id": 42386762, "link": "https://stackoverflow.com/questions/42386762/cygwins-ruby-malfunctions/42388035#42388035", "title": "Cygwin&#39;s Ruby malfunctions", "body": "<p>The correct output should be</p>\n\n<pre><code>$ ruby -v\nruby 2.2.5p319 (2016-04-26 revision 54774) [x86_64-cygwin] \n</code></pre>\n\n<p>2 main possibilities:  </p>\n\n<blockquote>\n  <p>1st the installation is broken, so run <code>cygcheck -c</code> and check if something is missing and reinstall the broken packages.</p>\n  \n  <p>2nd (more likely) a third party software, usually an antivirus, is interfering. See\n  <a href=\"https://cygwin.com/faq/faq.html#faq.using.bloda\" rel=\"nofollow noreferrer\">https://cygwin.com/faq/faq.html#faq.using.bloda</a> for details.</p>\n</blockquote>\n\n<p>You can also follows the guideline at <a href=\"https://cygwin.com/problems.html\" rel=\"nofollow noreferrer\">https://cygwin.com/problems.html</a> and ask help on the cygwin general mailing list (<a href=\"https://cygwin.com/lists.html\" rel=\"nofollow noreferrer\">https://cygwin.com/lists.html</a>) providing there the requested <code>cygcheck.out</code></p>\n"}], "owner": {"reputation": 105, "user_id": 3640998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5pgJ3.jpg?s=128&g=1", "display_name": "Mebius", "link": "https://stackoverflow.com/users/3640998/mebius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 42388035, "answer_count": 1, "score": 0, "last_activity_date": 1487756898, "creation_date": 1487753726, "question_id": 42386762, "link": "https://stackoverflow.com/questions/42386762/cygwins-ruby-malfunctions", "title": "Cygwin&#39;s Ruby malfunctions", "body": "<p>I'm trying to develop in Ruby under a windows environment using cygwin.\nSo far, in order to get ruby working, I tried installing it via rvm which ended up with compilation errors. So I tried installing directly the Ruby version cygwin's installer provides with a fresh install of cygwin, adding only Ruby and the silver-searcher to the default package set.</p>\n\n<pre><code>ruby -v\n</code></pre>\n\n<p>Cygwin \"freezes\" like it's busy doing something and ends up outputing nothing. By the way, It does exactly the same thing with silver-searcher which usually functions as intended... I didn't import any custom dotfiles to be sure my dotfiles were not messing with this Ruby install.\nAny clues on how to fix that?</p>\n"}, {"tags": ["ruby", "linux", "shell", "docker", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1487754705, "post_id": 42386451, "comment_id": 71922404, "body": "can you post the 2 Dockerfiles?"}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "is_accepted": true, "score": 1, "last_activity_date": 1487754950, "creation_date": 1487754950, "answer_id": 42387207, "question_id": 42386451, "link": "https://stackoverflow.com/questions/42386451/changing-locale-in-docker-stops-many-commands-from-executing/42387207#42387207", "title": "Changing Locale in Docker Stops Many Commands From Executing?", "body": "<p>So I just figured it out, turns out I was using the wrong locale type for Docker, which is related to this issue <a href=\"https://github.com/docker-library/docs/pull/689/commits/c065de3b2446a2ddbe8c9afd6fb6a96d93dbbad6\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>A small, but critical distinction <code>C</code> vs <code>en_US</code>:</p>\n\n<p><strong><code>WRONG</code></strong></p>\n\n<pre><code>ENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nENV LC_ALL en_US.UTF-8\n</code></pre>\n\n<p><strong><code>RIGHT</code></strong></p>\n\n<pre><code>ENV LANG C.UTF-8\nENV LANGUAGE C.UTF-8\nENV LC_ALL C.UTF-8\n</code></pre>\n\n<p>Can anyone tell me why Docker uses <code>C</code> as a locale, vs <code>en_US</code>, or any other? </p>\n\n<p>Now Ruby/<code>irb</code> is successfully working (<strong>albeit, with 4 hours of my life lost.....</strong>)</p>\n"}], "owner": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 42387207, "answer_count": 1, "score": 1, "last_activity_date": 1487754950, "creation_date": 1487752760, "last_edit_date": 1487754785, "question_id": 42386451, "link": "https://stackoverflow.com/questions/42386451/changing-locale-in-docker-stops-many-commands-from-executing", "title": "Changing Locale in Docker Stops Many Commands From Executing?", "body": "<p><strong>How come when I change my locale in  a Dockerfile using this...</strong>:</p>\n\n<pre><code>ENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nENV LC_ALL en_US.UTF-8\n</code></pre>\n\n<p><strong>...so that I can achieve a change in locale from this...</strong></p>\n\n<pre><code>LANG=  \nLANGUAGE=  \nLC_CTYPE=\"POSIX\"  \nLC_NUMERIC=\"POSIX\"  \nLC_TIME=\"POSIX\"  \nLC_COLLATE=\"POSIX\"  \nLC_MONETARY=\"POSIX\"  \nLC_MESSAGES=\"POSIX\"  \nLC_PAPER=\"POSIX\"  \nLC_NAME=\"POSIX\"  \nLC_ADDRESS=\"POSIX\"  \nLC_TELEPHONE=\"POSIX\"  \nLC_MEASUREMENT=\"POSIX\"  \nLC_IDENTIFICATION=\"POSIX\"  \nLC_ALL=  \n</code></pre>\n\n<p><strong>..to this..</strong></p>\n\n<pre><code>LANG=en_US.UTF-8  \nLANGUAGE=en_US:en  \nLC_CTYPE=\"en_US.UTF-8\"  \nLC_NUMERIC=\"en_US.UTF-8\"  \nLC_TIME=\"en_US.UTF-8\"  \nLC_COLLATE=\"en_US.UTF-8\"  \nLC_MONETARY=\"en_US.UTF-8\"  \nLC_MESSAGES=\"en_US.UTF-8\"  \nLC_PAPER=\"en_US.UTF-8\"  \nLC_NAME=\"en_US.UTF-8\"  \nLC_ADDRESS=\"en_US.UTF-8\"  \nLC_TELEPHONE=\"en_US.UTF-8\"  \nLC_MEASUREMENT=\"en_US.UTF-8\"  \nLC_IDENTIFICATION=\"en_US.UTF-8\"  \nLC_ALL=en_US.UTF-8 \n</code></pre>\n\n<p><strong>Then I get issues</strong>, such as this with no commands executing:</p>\n\n<p><code>root@820760edeb77:/# irb\nbash: irb: command not found\n</code></p>\n\n<p><strong>But if I take those changes to the locale, and leave them as they are after a rebuilt container, then everything works as expected??:</strong></p>\n\n<pre><code># ENV LANG en_US.UTF-8\n# ENV LANGUAGE en_US:en\n# ENV LC_ALL en_US.UTF-8\n</code></pre>\n\n<p><code>root@820760edeb77:/# irb\n2.3.1 :001 &gt;\n</code></p>\n\n<p><em>I'm not too sure what would be causing this issue, whereby the changed locale inhibits commands from working, but suspect this could just be a side effect of such a change in Locale within the Docker container, and possibly not the real issue?</em></p>\n"}, {"tags": ["ruby", "rake", "capistrano"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487752408, "post_id": 42386306, "comment_id": 71920845, "body": "Well yeah, when you call <code>method2</code>, control goes there. And there&#39;s no <code>info</code> method for <code>Sample</code> (it&#39;s no longer capistrano&#39;s context)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487752655, "post_id": 42386306, "comment_id": 71920981, "body": "There a few ways to go around this, but they differ. And it&#39;s impossible to tell which one is appropriate for your case."}, {"owner": {"reputation": 31, "user_id": 7603477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1294cafa7b43ebc427c9dcca4c0eab?s=128&d=identicon&r=PG", "display_name": "bobmk2", "link": "https://stackoverflow.com/users/7603477/bobmk2"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487754312, "post_id": 42386306, "comment_id": 71922133, "body": "Thank you Sergio Tulentsev. I read <a href=\"http://stackoverflow.com/questions/6172292/scope-of-rakes-in-a-rails-project\" title=\"scope of rakes in a rails project\">stackoverflow.com/questions/6172292/&hellip;</a> and I&#39;m using module for set same name method in other namespaces. But capistrano context is lost with using module, I should relinquish..."}], "owner": {"reputation": 31, "user_id": 7603477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1294cafa7b43ebc427c9dcca4c0eab?s=128&d=identicon&r=PG", "display_name": "bobmk2", "link": "https://stackoverflow.com/users/7603477/bobmk2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487752266, "creation_date": 1487752266, "question_id": 42386306, "link": "https://stackoverflow.com/questions/42386306/undefined-capistranos-method-through-my-module", "title": "Undefined capistrano&#39;s method through my module", "body": "<p>I'm writing rake task in capistrano.</p>\n\n<p>I thought that I'm able to use <code>info</code> method similarly from <code>method1</code> and <code>method2</code> in <code>run_locally</code>, but I got error in <code>method2</code>.</p>\n\n<p>What's happend... \ud83d\ude22 </p>\n\n<p>How do I resolve this?</p>\n\n<p>Should I wrap <code>info</code> with <code>run_locally</code> once again in <code>Sample:method2</code>? ( but I refuse it...)</p>\n\n<p><strong>environment</strong></p>\n\n<ul>\n<li>Capistrano Version: 3.4.0 (Rake Version: 10.4.2)</li>\n</ul>\n\n<p><strong>code</strong></p>\n\n<pre><code>namespace :sample do\n  task :task1 do\n    run_locally do\n      method1('task1')\n      Sample::method2('task1')\n    end\n  end\n\n  def method1(str)\n    info \"&gt; called method1 str:#{str}\"\n  end\nend\n\nmodule Sample\n  extend Rake::DSL\n  extend self\n\n  def method2(str)\n    info \"&gt; called method2 str:#{str}\"\n  end\n\n  public :method2\nend\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>$ bundle exec cap beta sample:task1\nINFO &gt; called method1 str:task1\n(Backtrace restricted to imported tasks)\ncap aborted!\nNoMethodError: undefined method `info' for Sample:Module\n/capistrano/lib/capistrano/tasks/util.rake:22:in `method2'\n/capistrano/lib/capistrano/tasks/util.rake:8:in `block (3 levels) in &lt;top (required)&gt;'\n/capistrano/lib/capistrano/tasks/util.rake:6:in `block (2 levels) in &lt;top (required)&gt;'\nTasks: TOP =&gt; sample:task1\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "edited": false, "score": 0, "creation_date": 1487762572, "post_id": 42385959, "comment_id": 71927511, "body": "Try index &quot;chapters.name&quot; =&gt; 1"}, {"owner": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "reply_to_user": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "edited": false, "score": 0, "creation_date": 1487766977, "post_id": 42385959, "comment_id": 71930725, "body": "@GennadyGrishkovtsov: there is no name field in chapters - BTW same result"}, {"owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "edited": false, "score": 0, "creation_date": 1487767157, "post_id": 42385959, "comment_id": 71930857, "body": "Did you read <a href=\"https://docs.mongodb.com/ruby-driver/master/tutorials/6.0.0/mongoid-indexes/\" rel=\"nofollow noreferrer\">docs.mongodb.com/ruby-driver/master/tutorials/6.0.0/&hellip;</a> ?"}, {"owner": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "reply_to_user": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "edited": false, "score": 0, "creation_date": 1487767829, "post_id": 42385959, "comment_id": 71931326, "body": "In that page there&#39;s no example with a unique index on embedded documents"}], "answers": [{"comments": [{"owner": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "edited": false, "score": 0, "creation_date": 1487778362, "post_id": 42394252, "comment_id": 71939256, "body": "Same problems that I reported in my question. And the second test fails completely even if I have a different title"}, {"owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "reply_to_user": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "edited": false, "score": 0, "creation_date": 1487780317, "post_id": 42394252, "comment_id": 71940801, "body": "hmm, it works. Did you rebuild indexes? Try db:mongoid:remove_indexes &amp; db:mongoid:create_indexes"}, {"owner": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "edited": false, "score": 0, "creation_date": 1487782986, "post_id": 42394252, "comment_id": 71942670, "body": "Your code here doesn&#39;t work (save gives no errors). What version of Mongo / Mongoid / Ruby are you using?"}, {"owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "reply_to_user": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "edited": false, "score": 0, "creation_date": 1487783834, "post_id": 42394252, "comment_id": 71943237, "body": "Rails 5, mongoid 6"}, {"owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "reply_to_user": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "edited": false, "score": 0, "creation_date": 1487785411, "post_id": 42394252, "comment_id": 71944288, "body": "Also, you can try use mongo (/usr/local/bin/mongo) to understand that the indexes work"}, {"owner": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "edited": false, "score": 0, "creation_date": 1487790306, "post_id": 42394252, "comment_id": 71947278, "body": "I have already tried but I have the same problems - I add them to the question"}], "tags": [], "owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "is_accepted": false, "score": -1, "last_activity_date": 1487780209, "last_edit_date": 1487780209, "creation_date": 1487773656, "answer_id": 42394252, "question_id": 42385959, "link": "https://stackoverflow.com/questions/42385959/mongoid-unique-index-for-embedded-documents/42394252#42394252", "title": "Mongoid: unique index for embedded documents", "body": "<p>You should use <strong>drop_dups</strong></p>\n\n<pre><code>class Category\n  include Mongoid::Document\n\n  field :title, type: String\n\n  embeds_many :posts\n\n  index({\"posts.title\" =&gt; 1}, {unique: true, drop_dups: true, name: 'unique_drop_dulp_idx'})\nend\n\n\nclass Post\n  include Mongoid::Document\n  field :title, type: String\nend\n</code></pre>\n\n<p>Rails console:</p>\n\n<pre><code>irb(main):032:0&gt; Category.first.posts.create(title: 'Honda S2000')\n=&gt; #&lt;Post _id: 58adb923cacaa6f778215a26, title: \"Honda S2000\"&gt;\nirb(main):033:0&gt; Category.first.posts.create(title: 'Honda S2000')\nMongo::Error::OperationFailure: E11000 duplicate key error collection: mo_development.posts index: title_1 dup key: { : \"Honda S2000\" } (11000)\n</code></pre>\n"}], "owner": {"reputation": 1987, "user_id": 2627246, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bca39e62d2749730d576ffac38af2789?s=128&d=identicon&r=PG", "display_name": "Mat", "link": "https://stackoverflow.com/users/2627246/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487795245, "creation_date": 1487751137, "last_edit_date": 1487795245, "question_id": 42385959, "link": "https://stackoverflow.com/questions/42385959/mongoid-unique-index-for-embedded-documents", "title": "Mongoid: unique index for embedded documents", "body": "<p>I'm trying to create a unique field for embedded documents:</p>\n\n<pre><code>class Chapter\n  include Mongoid::Document\n  field :title\nend\nclass Book\n  include Mongoid::Document\n  field :name\n  embeds_many :chapters\n  index({ 'name' =&gt; 1 }, { unique: true })\n  index({ 'name' =&gt; 1, 'chapters.title' =&gt; 1 }, { unique: true, sparse: true })\n  # index({ 'name' =&gt; 1, 'chapters.title' =&gt; 1 }, { unique: true })\nend\n</code></pre>\n\n<p>I run the task: <code>rake db:mongoid:create_indexes</code></p>\n\n<pre><code>I, [2017-02-22T08:56:47.087414 #94935]  INFO -- : MONGOID: Created indexes on Book:\nI, [2017-02-22T08:56:47.087582 #94935]  INFO -- : MONGOID: Index: {:name=&gt;1}, Options: {:unique=&gt;true}\nI, [2017-02-22T08:56:47.087633 #94935]  INFO -- : MONGOID: Index: {:name=&gt;1, :\"chapters.title\"=&gt;1}, Options: {:unique=&gt;true, :sparse=&gt;true}\n</code></pre>\n\n<p>But it doesn't work as I would expect...</p>\n\n<pre><code>Book.new( name: 'A book', chapters: [ { title: 'title1' }, { title: 'title1' }, { title: 'title2' } ] ).save  # no errors\n\nBook.new( name: 'Another book', chapters: [ { title: 'title2' } ] ).save\nb = Book.last\nb.chapters.push( Chapter.new( { title: 'title2' } ) )\nb.save  # no errors\n</code></pre>\n\n<p>Any idea?</p>\n\n<p>UPDATE: Ruby 2.4.0, Mongo 3.2.10, Mongoid 5.2.0 | 6.0.3 (trying both)</p>\n\n<p>UPDATE2: I add also the tests I made directly with mongo client:</p>\n\n<pre><code>use books\ndb.books.ensureIndex({ title: 1 }, { unique: true })\ndb.books.ensureIndex({ \"title\": 1, \"chapters.title\": 1 }, { unique: true, sparse: true, drop_dups: true })\ndb.books.insert({ title: \"Book1\", chapters: [ { title: \"Ch1\" }, { title: \"Ch1\" } ] })  # allowed?!\ndb.books.insert({ title: \"Book1\", chapters: [ { title: \"Ch1\" } ] })\nb = db.books.findOne( { title: 'Book1' } )\nb.chapters.push( { \"title\": \"Ch1\" } )\ndb.books.save( b )  # allowed?!\ndb.books.findOne( { title: 'Book1' } )\ndb.books.insert({ title: \"Book2\", chapters: [ { title: \"Ch1\" } ] })\n</code></pre>\n\n<p>UPDATE3: I made more tests but I didn't succeed, this <a href=\"http://joegornick.com/2012/10/25/mongodb-unique-indexes-on-single-embedded-documents/\" rel=\"nofollow noreferrer\">link</a> helped but the problem remains</p>\n"}, {"tags": ["ruby", "rbenv"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487752925, "post_id": 42385082, "comment_id": 71921165, "body": "If you can do it in a shell script, you can do it in Ruby. Try using <code>system(&quot;ruby&quot;, &quot;-e&quot;, &quot;...&quot;)</code> as the primary execution method: You don&#39;t have to deal with the shell doing crazy things, plus it doesn&#39;t require a second level of escaping. Use <code>ENV[...]</code> to set environment variables before launching commands. It&#39;s not quite clear what your desired solution is."}, {"owner": {"reputation": 15901, "user_id": 8376, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vIT5h.jpg?s=128&g=1", "display_name": "gtd", "link": "https://stackoverflow.com/users/8376/gtd"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487784599, "post_id": 42385082, "comment_id": 71943786, "body": "In a clean shell with rbenv initialized, the path is to the rbenv shims is at the head of PATH.  When I first call any shimmed ruby command (ruby, bundle, rake, etc) it is loaded from that shims directory in the path and rbenv does significant munging of the environment (editing several environment variables including adding specific ruby versions to PATH).  Obviously I can undo all these things manually, but that amounts to reverse engineering rbenv poorly.  What I want is something cleaner and less brittle."}], "owner": {"reputation": 15901, "user_id": 8376, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vIT5h.jpg?s=128&g=1", "display_name": "gtd", "link": "https://stackoverflow.com/users/8376/gtd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487748458, "creation_date": 1487748126, "last_edit_date": 1487748458, "question_id": 42385082, "link": "https://stackoverflow.com/questions/42385082/is-it-possible-to-reset-rbenv-in-a-sub-shell", "title": "Is it possible to reset rbenv in a sub-shell", "body": "<p>I have a ruby script which I am using to collect information from several other source repositories.  The code looks something like this:</p>\n\n<pre><code>def grab_deps(repo)\n  Dir.chdir(repo) do\n    if system('bundle check')\n      raise \"#{repo} does not have all dependencies installed, run `bundle install`\"\n    else\n      `ruby -e 'Gem.loaded_specs.keys.each{ ... }'`\n    end\n  end\nend\n</code></pre>\n\n<p>Each of these repos has a different <code>.ruby-version</code> specified.  Unfortunately because this script runs in my shell where I've already done the <code>rbenv init</code> shell integration, those .ruby-versions are not honored, and I get version mismatches.</p>\n\n<p>I have pored over the docs and Google and have not found any way of resetting the rbenv for a subshell.  Ideally I would like something like <code>Bundler.with_clean_env</code>.</p>\n\n<p>I have two semi-solutions:</p>\n\n<ol>\n<li>Remove the shell integration and use the rbenv command internally in the script.  This might be the most reliable, but it also is bad for my workflow since I normally want rbenv in all my shells by default.</li>\n<li>Hacking the <code>PATH</code>, <code>RBENV_VERSION</code> and other vars directly in the ruby script.  I was able to at least get the sub-shell using a different ruby version this way, but it's dirty, brittle and violates rbenv internals something fierce.</li>\n</ol>\n\n<p>I'm fairly close to giving up and making the top-level script a shell-script, but it will be quite a bit uglier than the ruby version and I would really like to get this working cleanly.  Any ideas?</p>\n"}, {"tags": ["ruby", "regex", "devise", "rubular"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1487747940, "post_id": 42384939, "comment_id": 71918406, "body": "Rubular tests on a string. The words &quot;Your test string:&quot; above the appropriate box is the clue."}], "answers": [{"tags": [], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "is_accepted": true, "score": 1, "last_activity_date": 1487747839, "creation_date": 1487747839, "answer_id": 42384976, "question_id": 42384939, "link": "https://stackoverflow.com/questions/42384939/why-am-i-not-able-to-match-multiple-lines-with-this-regex-on-rubular/42384976#42384976", "title": "Why am I not able to match multiple lines with this regex on rubular?", "body": "<p>This is because the regex <code>/\\A[^@\\s]+@[^@\\s]+\\z/</code> is matching the start of the string with <code>\\A</code> and end of the string with <code>\\z</code>.</p>\n\n<p>If you remove both <code>\\A</code> and <code>\\z</code> and instead try to match <code>/[^@\\s]+@[^@\\s]+/</code> then it will match both email addresses as shown <a href=\"http://rubular.com/r/SnCrmjvtI6\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9LCLZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9LCLZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also, it's worth mentioning that the start and end of a <strong>string</strong> is different from the start and end of a <strong>line</strong>. Each are represented by four different patterns shown below and also on rubular in the <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">Regex quick reference</a>:</p>\n\n<pre><code>^   - Start of line\n$   - End of line\n\\A  - Start of string\n\\z  - End of string\n</code></pre>\n\n<p>There can be multiple <em>lines</em> in a <em>string</em>; however, a single string goes from <code>\\A</code> to <code>\\z</code>. So to continue with this multiple email example. Replacing the start and end of a string patterns with the start and end of a line patterns to get: <code>/^[^@\\s]+@[^@\\s]+$/</code> will also match, shown below and on <a href=\"http://rubular.com/r/nZ5W3VUrsc\" rel=\"nofollow noreferrer\">rubular</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pcJBh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pcJBh.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 42384976, "answer_count": 1, "score": 0, "last_activity_date": 1487748145, "creation_date": 1487747730, "last_edit_date": 1487748145, "question_id": 42384939, "link": "https://stackoverflow.com/questions/42384939/why-am-i-not-able-to-match-multiple-lines-with-this-regex-on-rubular", "title": "Why am I not able to match multiple lines with this regex on rubular?", "body": "<p>I'm working with the following regex (taken from the <code>devise.rb</code> file that <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">devise</a> generates):</p>\n\n<pre><code>\\A[^@\\s]+@[^@\\s]+\\z\n</code></pre>\n\n<p>Usually, when I'm learning about a regex I use <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular</a>. For example, if I wanted to learn about the regex <code>/.a./</code>, I would set up my workspace as shown <a href=\"http://rubular.com/r/Hss60Tj0VJ\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/i9ASr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i9ASr.png\" alt=\"enter image description here\"></a></p>\n\n<p>Notice how I'm using multiple examples:</p>\n\n<pre><code>foo\nbar\nbaz\n</code></pre>\n\n<p>And rubular is giving me feedback that both <code>bar</code> and <code>baz</code> match.</p>\n\n<p>Now I'd like to learn about the regex that devise generates: <code>/\\A[^@\\s]+@[^@\\s]+\\z/</code>. So I set up my rubular workspace as shown here <a href=\"http://rubular.com/r/1YAEL1nLka\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XN7iP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XN7iP.png\" alt=\"enter image description here\"></a></p>\n\n<p>There isn't a match. It's because I have two examples:</p>\n\n<pre><code>foo@foo.com\ncats@cat.com\n</code></pre>\n\n<p>But I was expecting them both to match. Why aren't both test strings matching?</p>\n"}, {"tags": ["mysql", "ruby"], "comments": [{"owner": {"reputation": 2337, "user_id": 2978840, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/632745862e6c15aad050f9aafa9485df?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Agrawal", "link": "https://stackoverflow.com/users/2978840/ankit-agrawal"}, "edited": false, "score": 0, "creation_date": 1487742391, "post_id": 42383584, "comment_id": 71915845, "body": "to get this pivot data"}], "answers": [{"tags": [], "owner": {"reputation": 2337, "user_id": 2978840, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/632745862e6c15aad050f9aafa9485df?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Agrawal", "link": "https://stackoverflow.com/users/2978840/ankit-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1487743546, "last_edit_date": 1487743546, "creation_date": 1487742547, "answer_id": 42383641, "question_id": 42383584, "link": "https://stackoverflow.com/questions/42383584/swithcing-rows-and-columns-based-on-a-particular-column-in-mysql/42383641#42383641", "title": "Swithcing rows and columns based on a particular column in mysql", "body": "<pre><code>select row,\n       max(case when name ='name1' then value end)  as name1,\n       max(case when name ='name2' then value end)  as name2,\n       max(case when name ='name3' then value end)  as name3,\n       max(case when name ='name4' then value end ) as name4\nfrom table_name \ngroup by row\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 2, "last_activity_date": 1487742992, "creation_date": 1487742992, "answer_id": 42383741, "question_id": 42383584, "link": "https://stackoverflow.com/questions/42383584/swithcing-rows-and-columns-based-on-a-particular-column-in-mysql/42383741#42383741", "title": "Swithcing rows and columns based on a particular column in mysql", "body": "<p>For the first option, you can try the following pivot query:</p>\n\n<pre><code>SELECT row,\n       MAX(CASE WHEN name ='name1' THEN value END) AS name1,\n       MAX(CASE WHEN name ='name2' THEN value END) AS name2,\n       MAX(CASE WHEN name ='name3' THEN value END) AS name3,\n       MAX(CASE WHEN name ='name4' THEN value END) AS name4\nFROM yourTable\nGROUP BY row\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7333393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHb2W.jpg?s=128&g=1", "display_name": "Pranesh", "link": "https://stackoverflow.com/users/7333393/pranesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 42383741, "answer_count": 2, "score": 0, "last_activity_date": 1487743546, "creation_date": 1487742295, "last_edit_date": 1487742819, "question_id": 42383584, "link": "https://stackoverflow.com/questions/42383584/swithcing-rows-and-columns-based-on-a-particular-column-in-mysql", "title": "Swithcing rows and columns based on a particular column in mysql", "body": "<p>I have a table in MySQL which looks as below</p>\n\n<pre><code>**row      name     value**\n 1         name1    value1\n 1         name2    value2\n 1         name3    value3\n 2         name1    value4\n 2         name2    value5\n 2         name4    value6\n 3         name1    value7\n 3         name2    value8\n 3         name3    value9\n</code></pre>\n\n<p>I want to return the data in the following format.</p>\n\n<pre><code>**row      name1     name2     name3      name4**\n  1        value1    value2    value3     nil\n  2        value4    value5    nil        value6\n  3        value7    value8    value9     nil\n</code></pre>\n\n<p>or I want a json which looks like:</p>\n\n<pre><code>{\n {\n  name1:value1,\n  name2:value2,\n  name3:value3,\n },\n {\n  name1:value4,\n  name2:value5,\n  name4:value6,\n },\n {\n  name1:value7,\n  name2:value8,\n  name3:value9,\n },\n}\n</code></pre>\n\n<p>What can be the query?\nIs there any other method to achieve this in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "google-contacts-api"], "comments": [{"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 1, "creation_date": 1487742378, "post_id": 42383515, "comment_id": 71915836, "body": "Did you check the class of <code>google_contacts_user</code>? Its class is other than the <code>String</code> class, right?"}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1487742761, "post_id": 42383515, "comment_id": 71915988, "body": "Not sure I&#39;m following. What did I do wrong?"}, {"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 1, "creation_date": 1487742942, "post_id": 42383515, "comment_id": 71916061, "body": "have you try debug <code>google_contacts_user</code> ?"}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 0, "creation_date": 1487744180, "post_id": 42383515, "comment_id": 71916533, "body": "Yes. Is there anything you wanted me to look at in particular?"}, {"owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "edited": false, "score": 1, "creation_date": 1487747694, "post_id": 42383515, "comment_id": 71918283, "body": "Perhaps self.authentications.first.token is a string instead of a OAuth2::AccessToken object as required"}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "reply_to_user": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "edited": false, "score": 0, "creation_date": 1487776418, "post_id": 42383515, "comment_id": 71937837, "body": "@Joel_Blum any idea how to create an object using omniauth?"}, {"owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "edited": false, "score": 1, "creation_date": 1487778733, "post_id": 42383515, "comment_id": 71939540, "body": "@AnApprentice It&#39;s all in the gem&#39;s docs &quot;See their respective documentation for details on how to get this object.&quot;"}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "reply_to_user": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "edited": false, "score": 0, "creation_date": 1487779513, "post_id": 42383515, "comment_id": 71940181, "body": "@Joel_Blum really? where? Would you mind pointing me in the right direction. I&#39;m using rails/omniauth to get the google_oauth2 token, I am storing the token and refresh token in my db. I&#39;m not seeing how I use the already obtained token to build a token object... would really appreciate your help. thank you"}], "answers": [{"comments": [{"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 0, "creation_date": 1487781526, "post_id": 42396767, "comment_id": 71941654, "body": "Thanks @joel_blum, just gave it a try, the oauth2_object line is erring with &quot;wrong number of arguments (given 1, expected 2..3)&quot;"}, {"owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "reply_to_user": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 1, "creation_date": 1487782619, "post_id": 42396767, "comment_id": 71942392, "body": "@AnApprentice did u figure it out? I&#39;ll edit my answer for future reference"}], "tags": [], "owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "is_accepted": true, "score": 1, "last_activity_date": 1487780119, "creation_date": 1487780119, "answer_id": 42396767, "question_id": 42383515, "link": "https://stackoverflow.com/questions/42383515/google-contacts-api-undefined-method-get-for-string0x007fce71ad54e8-did/42396767#42396767", "title": "google_contacts_api - undefined method `get&#39; for #&lt;String:0x007fce71ad54e8&gt; Did you mean? gem", "body": "<p>First install  oauth2</p>\n\n<pre><code> gem install oauth2\n</code></pre>\n\n<p>And then create an Oauth2AccessToken instance from the token string</p>\n\n<pre><code> oauth2_object = OAuth2::AccessToken.new(self.authentications.first.token)\n</code></pre>\n\n<p>Now it should be possible to use this Oauth2AccessToken with the GoogleContacts gem:</p>\n\n<pre><code> GoogleContactsApi::User.new(oauth2_object)\n</code></pre>\n\n<p>I'm basing this on the gem's docs </p>\n\n<blockquote>\n  <p>You need to pass to the GoogleContactsApi::User constructor one of the\n  following two objects:</p>\n  \n  <p>an OAuth::AccessToken from the oauth-ruby gem an OAuth2::AccessToken\n  from the oauth2 gem</p>\n</blockquote>\n"}], "owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 42396767, "answer_count": 1, "score": 0, "last_activity_date": 1581632907, "creation_date": 1487741959, "last_edit_date": 1581632907, "question_id": 42383515, "link": "https://stackoverflow.com/questions/42383515/google-contacts-api-undefined-method-get-for-string0x007fce71ad54e8-did", "title": "google_contacts_api - undefined method `get&#39; for #&lt;String:0x007fce71ad54e8&gt; Did you mean? gem", "body": "<p>I'm working to use the google_contacts_api: <a href=\"https://github.com/aliang/google_contacts_api\" rel=\"nofollow noreferrer\">https://github.com/aliang/google_contacts_api</a></p>\n\n<p>I have the following code in user.rb:</p>\n\n<pre><code>google_contacts_user = GoogleContactsApi::User.new(self.authentications.first.token)\n@x = google_contacts_user.contacts\n</code></pre>\n\n<p><code>self.authentications.first.token</code> is the token stored via omniauth-google-oauth2. </p>\n\n<p>Problem is, this is erring:</p>\n\n<pre><code>undefined method `get' for #&lt;String:0x007fce71ad54e8&gt; Did you mean? gem\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "syntax", "module"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1487746910, "post_id": 42383487, "comment_id": 71917890, "body": "I give more one example :  <code>class Burger   def cost     50   end end  module CheeseBurger   def cost     super + 10   end end  module LargeBurger   def cost     super + 15   end end  burger = Burger.new puts burger.extend(CheeseBurger).cost puts burger.extend(LargeBurger).cost</code>"}, {"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1487747309, "post_id": 42383487, "comment_id": 71918100, "body": "The code above output 60 and 75, looks new extend module&#39;s cost method doesn&#39;t override the old cost version"}, {"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1487747363, "post_id": 42383487, "comment_id": 71918119, "body": "That&#39;s make me a little bit confuse"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1487749990, "post_id": 42383487, "comment_id": 71919526, "body": "Of course, it does not override anything, it <i>prepends</i> the module to the hierarchy tree. That is the exact reason you are able to call <code>super</code> from there."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1487743517, "creation_date": 1487743517, "answer_id": 42383877, "question_id": 42383487, "link": "https://stackoverflow.com/questions/42383487/how-is-the-rubys-extend-syntax-work/42383877#42383877", "title": "How is the ruby&#39;s extend syntax work?", "body": "<p>In the first snippet you call <code>extend</code> during class declaration, i. e. on <code>Toy</code> object, which is apparently a class. It is the same as calling <code>Toy.extend(Discount)</code>.</p>\n\n<p>In the second snippet you <code>extend</code> the <code>Toy.new</code>, which is apparently a <code>Toy</code> instance. </p>\n"}, {"tags": [], "owner": {"reputation": 394, "user_id": 4794989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kl1aC.jpg?s=128&g=1", "display_name": "Alireza Bashiri", "link": "https://stackoverflow.com/users/4794989/alireza-bashiri"}, "is_accepted": false, "score": 1, "last_activity_date": 1487746015, "creation_date": 1487746015, "answer_id": 42384486, "question_id": 42383487, "link": "https://stackoverflow.com/questions/42383487/how-is-the-rubys-extend-syntax-work/42384486#42384486", "title": "How is the ruby&#39;s extend syntax work?", "body": "<p>Object#extend is simply shortcut that includes a module in the receiver's eigenclass.</p>\n\n<p>for further information about eigenclasses go to <a href=\"https://en.wikipedia.org/wiki/Metaclass#In_Ruby\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Metaclass#In_Ruby</a></p>\n"}], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 42383877, "answer_count": 2, "score": 1, "last_activity_date": 1487746015, "creation_date": 1487741815, "last_edit_date": 1487743127, "question_id": 42383487, "link": "https://stackoverflow.com/questions/42383487/how-is-the-rubys-extend-syntax-work", "title": "How is the ruby&#39;s extend syntax work?", "body": "<p>I write two kind syntax for extend, but is appear different behavior,one return 50, the other return 70, anyone can explain why?</p>\n\n<pre><code>module Discount\n  def cost\n    super + 20\n  end\nend\n\nclass Toy\n  extend Discount\n  def cost\n    50\n  end\nend\n\n# check\nToy.new.cost #=&gt; 50\n</code></pre>\n\n<p>But:</p>\n\n<pre><code>module Discount\n  def cost\n    super + 20\n  end\nend\n\nclass Toy\n  def cost\n    50\n  end \nend\n\n# check\nToy.new.extend(Discount).cost #=&gt;70\n</code></pre>\n"}, {"tags": ["ruby", "regex", "rubular"], "answers": [{"comments": [{"owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "edited": false, "score": 0, "creation_date": 1487742762, "post_id": 42383585, "comment_id": 71915989, "body": "This gives me an error: syntax error, unexpected tIDENTIFIER, expecting &#39;)&#39;         secondUrl.gsub(/&#173;\\-o20\\&#173;-/,&#39;-o90-&#39;&#173;)                                               ^"}], "tags": [], "owner": {"reputation": 14333, "user_id": 5423014, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LedJv00TwTo/AAAAAAAAAAI/AAAAAAAAABg/VcxlC1usm_Y/photo.jpg?sz=128", "display_name": "Sahil Gulati", "link": "https://stackoverflow.com/users/5423014/sahil-gulati"}, "is_accepted": true, "score": 1, "last_activity_date": 1487744711, "last_edit_date": 1487744711, "creation_date": 1487742298, "answer_id": 42383585, "question_id": 42383354, "link": "https://stackoverflow.com/questions/42383354/replace-specific-text-in-ruby-using-regex/42383585#42383585", "title": "replace specific text in ruby using regex", "body": "<p>Hope this will work.</p>\n\n<pre><code>url = \"/ShowForum-g1-i12105-o20-TripAdvisor_Support.html\"\nurl = url.gsub!(/-o20-/, \"something_to_replace\") \nputs \"url is : #{url}\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sh-4.3$ ruby main.rb                                                                                                                                                 \nurl is : /ShowForum-g1-i12105something_to_replaceTripAdvisor_Support.html \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487750451, "post_id": 42384201, "comment_id": 71919775, "body": "Mudsie, my reading of the question is that <code>&quot;-o20&quot;</code> is a given string, which of course simplifies the question considerably."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487751493, "post_id": 42384201, "comment_id": 71920304, "body": "@CarySwoveland I have read \u201cI target and replace the -o20- with -o30- or -o40- or -o1200-\u201d as the goal is to update the number, so I did my best to make it easy :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1487745391, "last_edit_date": 1487745391, "creation_date": 1487744938, "answer_id": 42384201, "question_id": 42383354, "link": "https://stackoverflow.com/questions/42383354/replace-specific-text-in-ruby-using-regex/42384201#42384201", "title": "replace specific text in ruby using regex", "body": "<pre><code>url[/(?&lt;=-o)\\d+(?=-)/] = ($&amp;.to_i + 10).to_s\n</code></pre>\n\n<p>The snippet above will replace the number inplace with (itself + 10).</p>\n\n<pre><code>url = '/ShowForum-g1-i12105-o20-TripAdvisor_Support.html'\n\nurl[/(?&lt;=-o)\\d+(?=-)/] = ($&amp;.to_i + 10).to_s\n#\u21d2 \"30\"\nurl\n#\u21d2 \"/ShowForum-g1-i12105-o30-TripAdvisor_Support.html\"\nurl[/(?&lt;=-o)\\d+(?=-)/] = ($&amp;.to_i + 10).to_s\n#\u21d2 \"40\"\nurl\n#\u21d2 \"/ShowForum-g1-i12105-o40-TripAdvisor_Support.html\"\n</code></pre>\n\n<p>To replace with whatever number you want:</p>\n\n<pre><code>url[/(?&lt;=-o)\\d+(?=-)/] = \"500\"\nurl\n#\u21d2 \"/ShowForum-g1-i12105-o500-TripAdvisor_Support.html\"\n</code></pre>\n\n<p>More info: <a href=\"https://ruby-doc.org/core/String.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\"><code>String#[]=</code></a>.</p>\n"}], "owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 42383585, "answer_count": 2, "score": 1, "last_activity_date": 1487745391, "creation_date": 1487741182, "question_id": 42383354, "link": "https://stackoverflow.com/questions/42383354/replace-specific-text-in-ruby-using-regex", "title": "replace specific text in ruby using regex", "body": "<p>In ruby, I'm trying to replace the below url's <strong>bolded</strong> portion with new numbers:</p>\n\n<blockquote>\n  <p>/ShowForum-g1-i12105-<strong>o20</strong>-TripAdvisor_Support.html</p>\n</blockquote>\n\n<p>How would I target and replace the <strong>-o20-</strong>\nwith -o30- or -o40- or -o1200- while leaving the rest of the url\nintact? The urls could be anything, but I'd like to be able to find this exact pattern of -o20- and replace it with whatever number I want. </p>\n\n<p>Thank you in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "web"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1487751932, "post_id": 42383083, "comment_id": 71920571, "body": "you define method on <code>Island</code>, but call it on an array. What&#39;s up with that?"}], "answers": [{"comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "reply_to_user": {"reputation": 57, "user_id": 5458638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6b9609db45a3db27c37fcb636f2c37e?s=128&d=identicon&r=PG&f=1", "display_name": "summerdaiz", "link": "https://stackoverflow.com/users/5458638/summerdaiz"}, "edited": false, "score": 0, "creation_date": 1487740536, "post_id": 42383152, "comment_id": 71915091, "body": "Glad to help you. You can accept my answer. if it helped you. :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487757349, "post_id": 42383152, "comment_id": 71924509, "body": "&quot;Since Filter is a keyword&quot; \u2013 No, it&#39;s not. And even if it <i>were</i> a keyword, that&#39;s not a problem. You can name a method the same as a keyword. There are even such methods in the core libraries: <code>Object#class</code>, <code>Range#begin</code>, <code>Range#end</code>, <code>MatchData#begin</code>, <code>MatchData#end</code>, <code>Fiber::yield</code>, <code>Proc#yield</code>, <code>Enumerator::Yielder#yield</code>, <code>Enumerator#next</code>, <code>String#next</code>, <code>Integer#next</code>, <code>Symbol#next</code>."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487757502, "post_id": 42383152, "comment_id": 71924624, "body": "@Jorg, thnx. yes, I know I can overwrite a method, but what if he needs to use his method and filter method both?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487757845, "post_id": 42383152, "comment_id": 71924855, "body": "I don&#39;t understand what you mean. You said <code>filter</code> is a keyword and that therefore you need to change the name. Both of that is false: firstly, <code>filter</code> is <i>not</i> a keyword. Secondly, it is perfectly fine to name a method the same as a keyword. And thirdly, the OP already said that they are using your first option, i.e. the one with <code>filter</code> and are fine with it."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1487763949, "post_id": 42383152, "comment_id": 71928456, "body": "I agree, using the <code>filter</code> word even works. I am just saying that <code>Array</code> class already has a method named filter. I just told him that if would be better if you use any name other than that. Try, Another. Thats it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487789908, "post_id": 42383152, "comment_id": 71947032, "body": "I checked the documentation, and I couldn&#39;t find any mention of a method named <code>filter</code> in <code>Array</code> or anywhere else in Ruby 2.4.0, 2.3.3, 2.3.2, 2.3.1, 2.3.0, 2.2.6, 2.2.5, 2.2.4, 2.2.3, 2.2.2, 2.2.1, 2.2.0, 2.1.9, 2.1.8, 2.1.7, 2.1.6, 2.1.5, 2.1.4, 2.1.3, 2.1.2, 2.1.1, 2.1.0, 2.0.0, 1.9.3, 1.9.2, 1.9.1, 1.8.7, 1.8.6, as well as the current development version of Ruby 2.5."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487824863, "post_id": 42383152, "comment_id": 71960928, "body": "@J&#246;rgWMittag, open ruby terminal, and type <code>Array.methods</code> and there you will find <code>filter</code> ,method. :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487837456, "post_id": 42383152, "comment_id": 71966557, "body": "First off: <code>Array.methods</code> is completely irrelevant, since that returns the methods you can call on the <code>Array</code> class, i.e. <code>Array</code>&#39;s class methods. If you want the instance methods, you have to call <code>Array.instance_methods</code>. And secondly: <code>ruby -e &#39;p Array.methods.grep(&#47;filter&#47;) # []&#39;</code>, <code>ruby -e &#39;p Array.instance_methods.grep(&#47;filter&#47;)&#39; # []</code>. In fact: <code>ruby -e &#39;p ObjectSpace.each_object(Module).map(&amp;:instance_methods).flat&zwnj;&#8203;ten.grep(&#47;filter&#47;)&#39; # []</code>, so there is <i>no</i> method named <code>filter</code> defined in any module or class anywhere in Ruby."}], "tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": false, "score": 1, "last_activity_date": 1487740505, "last_edit_date": 1487740505, "creation_date": 1487740110, "answer_id": 42383152, "question_id": 42383083, "link": "https://stackoverflow.com/questions/42383083/ruby-error-undefined-method/42383152#42383152", "title": "Ruby error - Undefined Method", "body": "<p><strong>Following ruby's <code>convention over configuration</code>, you can add/overwrite any method in any class</strong></p>\n\n<p>So, adding a function to array class makes it accessible to all the arrays. So, in this solution.</p>\n\n<p>1) First thing is you have taken the <strong><code>filter</code></strong> function in <strong>Island class</strong>, instead, you need to take inside <strong><code>Array</code> class</strong> since the list is an array.</p>\n\n<pre><code>    class Array \n      def filter(string) \n        for element in self\n          if element.include? (string)\n            yield(element)\n          end\n        end\n      end \n    end\n\n    list =    [\"sasha\",\"rory\",\"rob\",\"anthony\",\"andre\",\"tariq\",\"kimberly\",\"antoinette\"]\n\n   list.filter(\"an\"){|i| puts i}\n\n    O/P:\n    anthony\n    andre\n    antoinette\n</code></pre>\n\n<p>2) Since <strong>Filter</strong> is a <strong>keyword</strong> as suggested by other answer, take another name for it. Eg: <code>search</code></p>\n\n<pre><code>class Array \n     def search(string) \n        for element in self\n          if element.include? (string)\n            yield(element)\n          end\n        end\n     end \nend\n\nlist.search(\"an\"){|i| puts i}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1941, "user_id": 1146504, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e85fb6a6f6200c7c148a236a241df02f?s=128&d=identicon&r=PG", "display_name": "Jakir00", "link": "https://stackoverflow.com/users/1146504/jakir00"}, "edited": false, "score": 0, "creation_date": 1487786085, "post_id": 42385764, "comment_id": 71944753, "body": "This is the best solution, for sure. Try to just initialize your Island class with an Array instead of overriding Array itself."}, {"owner": {"reputation": 57, "user_id": 5458638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6b9609db45a3db27c37fcb636f2c37e?s=128&d=identicon&r=PG&f=1", "display_name": "summerdaiz", "link": "https://stackoverflow.com/users/5458638/summerdaiz"}, "edited": false, "score": 0, "creation_date": 1487808519, "post_id": 42385764, "comment_id": 71956218, "body": "This was a very good explanation of how to implement my class. I choose to use the 4th. Thanks a lot."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 2, "last_activity_date": 1487756381, "last_edit_date": 1487756381, "creation_date": 1487750515, "answer_id": 42385764, "question_id": 42383083, "link": "https://stackoverflow.com/questions/42383083/ruby-error-undefined-method/42385764#42385764", "title": "Ruby error - Undefined Method", "body": "<p>First let me object against the solution posted by @Sravan :</p>\n\n<p>While it is true - and sometimes even a good solution - to monkey-patch a class, you have to be careful how to do it, because it may become a time bomb:</p>\n\n<p>Ruby evolves, and new versions often add methods to existing classes. This means that if you add a method Array#search, and a new version of Ruby will also add a method of the same name, your new method will SILENTLY override the one in Ruby. You likely won't notice it for long time, until you are using a feature which is supposed to use Rubys Array#search - maybe by using something new in stdlib - and you get weird results. To track down this type of error can be a nightmare. This is exactly the case when you use <em>search</em> as a method name. </p>\n\n<p>Now, how to do it then? Three possibilities:</p>\n\n<p>(1) If you monkey-patch, use at least a method name which is unlikely to become part of the official interface. It might have your project's name as a prefix, or plenty of underscore characters, and so on. Note that this is not 100% foolproof: A later version of Ruby might add under the hood a private method with exactly the same name than the one you were choosing, but of course the odder your name, the less likely this will happen.</p>\n\n<p>(2) If you don't like this idea of using \"clumsy\" names, you could at least test before defining the new method, whether it already exists, and throw an exception if it doesn't:</p>\n\n<pre><code>class Array\n  if self.method_defined?(:search)\n    raise \"#{self.class}::search already defined\"\n  else\n    def search(...)\n     ...\n    end\n  end\nend\n</code></pre>\n\n<p>(3) The third possibility is to avoid monkey-patching and keep the method in your Island class. In this case, the method definition would be different:</p>\n\n<pre><code>class Island\n  def self.filter(array, string)\n    ...\n  end\nend\n</code></pre>\n\n<p>and it would be called by</p>\n\n<pre><code>Island.filter(myarray, mystring)\n</code></pre>\n\n<p>UPDATE: Forgot a forth possibility:</p>\n\n<p>(4) You can make Island a subclass of Array. I don't know what else you want to do with your islands, but maybe this is an option worth considering:</p>\n\n<pre><code>class Island &lt; Array\n  def filter(string)\n    ...\n  end\nend\n</code></pre>\n\n<p>Of course, when invoking <em>filter</em>, you need to turn your array into an island, before you can use it:</p>\n\n<pre><code>list = Island.new([....])\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5458638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6b9609db45a3db27c37fcb636f2c37e?s=128&d=identicon&r=PG&f=1", "display_name": "summerdaiz", "link": "https://stackoverflow.com/users/5458638/summerdaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 1, "accepted_answer_id": 42385764, "answer_count": 2, "score": 0, "last_activity_date": 1487756381, "creation_date": 1487739703, "question_id": 42383083, "link": "https://stackoverflow.com/questions/42383083/ruby-error-undefined-method", "title": "Ruby error - Undefined Method", "body": "<p>I am try to write a function that will find the items in an array which match the string passed to the function. See code below. </p>\n\n<pre><code>class Island \n  def filter(string) \n    for element in self\n      if element.include? (string)\n        yield(element)\n      end\n    end\n  end \nend\nlist =    [\"sasha\",\"rory\",\"rob\",\"anthony\",\"andre\",\"tariq\",\"kimberly\",\"antoinette\"]\nlist.filter(\"an\"){|i| puts i}&lt;/i&gt;\n</code></pre>\n\n<p>How i keep getting \"undefined method 'filer' for #\n\n<p>I'm not sure what i'm doing wrong. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 2, "creation_date": 1487736436, "post_id": 42382500, "comment_id": 71913818, "body": "Not really... you can also try <code>Date.today.beginning_of_month - 1.day</code> but it&#39;s not any prettier."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1487749368, "post_id": 42382549, "comment_id": 71919191, "body": "You could pass the base date as an argument with a default value of <code>Date.today</code> (or <code>Date.current</code>)."}], "tags": [], "owner": {"reputation": 21877, "user_id": 131227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/60e3c03e227b84e2898c29fd711cae5b?s=128&d=identicon&r=PG", "display_name": "z5h", "link": "https://stackoverflow.com/users/131227/z5h"}, "is_accepted": false, "score": 3, "last_activity_date": 1487736559, "creation_date": 1487736559, "answer_id": 42382549, "question_id": 42382500, "link": "https://stackoverflow.com/questions/42382500/shortest-way-to-obtain-last-day-of-previous-month-with-ruby/42382549#42382549", "title": "Shortest way to obtain last day of previous month with Ruby", "body": "<p>You want the end of the month. For which month? The last one. Last with respect to what? Today.</p>\n\n<p>So you have said exactly what you are looking for and got it. What is inelegant about that?</p>\n\n<p>If you want shorter:</p>\n\n<pre><code>def end_of_last_month\n  Date.today.last_month.end_of_month\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11220, "user_id": 2226315, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32527cac891c9eec3890b7637ee707b2?s=128&d=identicon&r=PG&f=1", "display_name": "X.Creates", "link": "https://stackoverflow.com/users/2226315/x-creates"}, "edited": false, "score": 2, "creation_date": 1487739620, "post_id": 42383017, "comment_id": 71914732, "body": "I think this is nice but the original statement is better to read and understand."}], "tags": [], "owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "is_accepted": false, "score": 6, "last_activity_date": 1487739320, "creation_date": 1487739320, "answer_id": 42383017, "question_id": 42382500, "link": "https://stackoverflow.com/questions/42382500/shortest-way-to-obtain-last-day-of-previous-month-with-ruby/42383017#42383017", "title": "Shortest way to obtain last day of previous month with Ruby", "body": "<p>The one you've already written is short and elegant enough still you can try these</p>\n\n<pre><code>Date.today - Date.today.day\n</code></pre>\n\n<p>or even shorter version will be to use a variable to limit the words you can try:</p>\n\n<pre><code>(a=Date.today) - a.day\n</code></pre>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 695, "user_id": 2048774, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/64QcY.jpg?s=128&g=1", "display_name": "htatche", "link": "https://stackoverflow.com/users/2048774/htatche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1487739320, "creation_date": 1487736274, "question_id": 42382500, "link": "https://stackoverflow.com/questions/42382500/shortest-way-to-obtain-last-day-of-previous-month-with-ruby", "title": "Shortest way to obtain last day of previous month with Ruby", "body": "<p>Is there a shorter/more elegant way to reformulate this expression whilst achieving the same result ?</p>\n\n<pre><code>Date.today.last_month.end_of_month\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq", "sidekiq-monitor"], "answers": [{"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 10, "last_activity_date": 1487737309, "creation_date": 1487737309, "answer_id": 42382674, "question_id": 42382113, "link": "https://stackoverflow.com/questions/42382113/cannot-add-new-queue-in-sidekiq/42382674#42382674", "title": "Cannot add new queue in sidekiq", "body": "<p>You have to push a job into the queue for it to be created. </p>\n"}], "owner": {"reputation": 587, "user_id": 4297122, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000722742064/picture?type=large", "display_name": "Jais Anasrulloh Ja&#39;fari", "link": "https://stackoverflow.com/users/4297122/jais-anasrulloh-jafari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1884, "favorite_count": 0, "accepted_answer_id": 42382674, "answer_count": 1, "score": 2, "last_activity_date": 1487737309, "creation_date": 1487733839, "last_edit_date": 1487734143, "question_id": 42382113, "link": "https://stackoverflow.com/questions/42382113/cannot-add-new-queue-in-sidekiq", "title": "Cannot add new queue in sidekiq", "body": "<p>Hi guys i cannot add new queue in sidekiq, there are several command like <code>bundle exec sidekiq -q queue_name</code> or via rails console <code>Sidekiq::Queue.new(\"queue_name\")</code> those two commands still cannot create new queue both in redis. Here is the sidekiq web UI <a href=\"https://i.stack.imgur.com/kDFMa.png\" rel=\"nofollow noreferrer\">sidekiq web ui image</a> , there is no such queue <code>queue_name</code> in those web ui, it does means that <code>queue_name</code> doesn't created right ?</p>\n\n<p>I'm really new into sidekiq, anyone can help me which steps that i missed ?, note: i'm not using file configuration to create new queue sidekiq but just commands. Thanks guys</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 186, "user_id": 6035359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x5nvT.jpg?s=128&g=1", "display_name": "theBrezilien", "link": "https://stackoverflow.com/users/6035359/thebrezilien"}, "edited": false, "score": 1, "creation_date": 1487727971, "post_id": 42381123, "comment_id": 71911519, "body": "are you using the devise gem?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7582540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/455c01feca68e6b0542069bb414412d6?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/7582540/momo"}, "edited": false, "score": 0, "creation_date": 1487775731, "post_id": 42384449, "comment_id": 71937329, "body": "yeah thats what i wanted. your suggestion didnt work"}, {"owner": {"reputation": 4049, "user_id": 1083428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000f45b685d4d6ff1a171676512c382e?s=128&d=identicon&r=PG", "display_name": "Pavel Evstigneev", "link": "https://stackoverflow.com/users/1083428/pavel-evstigneev"}, "reply_to_user": {"reputation": 47, "user_id": 7582540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/455c01feca68e6b0542069bb414412d6?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/7582540/momo"}, "edited": false, "score": 0, "creation_date": 1487782911, "post_id": 42384449, "comment_id": 71942607, "body": "Are you using devise?"}, {"owner": {"reputation": 47, "user_id": 7582540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/455c01feca68e6b0542069bb414412d6?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/7582540/momo"}, "edited": false, "score": 0, "creation_date": 1487793777, "post_id": 42384449, "comment_id": 71949281, "body": "i dont use devise"}, {"owner": {"reputation": 4049, "user_id": 1083428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000f45b685d4d6ff1a171676512c382e?s=128&d=identicon&r=PG", "display_name": "Pavel Evstigneev", "link": "https://stackoverflow.com/users/1083428/pavel-evstigneev"}, "reply_to_user": {"reputation": 47, "user_id": 7582540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/455c01feca68e6b0542069bb414412d6?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/7582540/momo"}, "edited": false, "score": 0, "creation_date": 1487827479, "post_id": 42384449, "comment_id": 71961929, "body": "What provides <code>User.authenticate</code> method? How do you store authenticated user, in session?"}], "tags": [], "owner": {"reputation": 4049, "user_id": 1083428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000f45b685d4d6ff1a171676512c382e?s=128&d=identicon&r=PG", "display_name": "Pavel Evstigneev", "link": "https://stackoverflow.com/users/1083428/pavel-evstigneev"}, "is_accepted": false, "score": 0, "last_activity_date": 1487745882, "creation_date": 1487745882, "answer_id": 42384449, "question_id": 42381123, "link": "https://stackoverflow.com/questions/42381123/how-can-a-user-log-in-a-user-right-after-signing-up/42384449#42384449", "title": "How can a user log in a user right after signing up?", "body": "<p>Do you want user to be signed in when he/she sign up?</p>\n\n<pre><code># POST '/sign-up'\ndef signup\n  user = User.create(user_creds)\n  if user.valid?\n    User.authenticate(user_creds[:email], user_creds[:password])\n    render json: user, status: :created\n  else\n    render json: user.errors, status: :bad_request\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7582540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/455c01feca68e6b0542069bb414412d6?s=128&d=identicon&r=PG&f=1", "display_name": "momo", "link": "https://stackoverflow.com/users/7582540/momo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487745882, "creation_date": 1487727158, "question_id": 42381123, "link": "https://stackoverflow.com/questions/42381123/how-can-a-user-log-in-a-user-right-after-signing-up", "title": "How can a user log in a user right after signing up?", "body": "<p>I know I should put the code in the create action of the users controller, but I'm not sure what code.</p>\n\n<p>this is my controller code: </p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code># frozen_string_literal: true\nclass UsersController &lt; ProtectedController\n  skip_before_action :authenticate, only: [:signup, :signin]\n\n  # POST '/sign-up'\n  def signup\n    user = User.create(user_creds)\n    if user.valid?\n      render json: user, status: :created\n    else\n      render json: user.errors, status: :bad_request\n    end\n  end\n\n  # POST '/sign-in'\n  def signin\n    creds = user_creds\n    if (user = User.authenticate creds[:email],\n                                 creds[:password])\n      render json: user, serializer: UserLoginSerializer, root: 'user'\n    else\n      head :unauthorized\n    end\n  end\n\n  # DELETE '/sign-out/1'\n  def signout\n    if current_user == User.find(params[:id])\n      current_user.logout\n      head :no_content\n    else\n      head :unauthorized\n    end\n  end\n\n  # PATCH '/change-password/:id'\n  def changepw\n    if !current_user.authenticate(pw_creds[:old]) ||\n       (current_user.password = pw_creds[:new]).blank? ||\n       !current_user.save\n      head :bad_request\n    else\n      head :no_content\n    end\n  end\n\n  def index\n    render json: User.all\n  end\n\n  def show\n    user = User.find(params[:id])\n    render json: user\n  end\n\n  def update\n    head :bad_request\n  end\n\n  private\n\n  def user_creds\n    params.require(:credentials)\n          .permit(:email, :password, :password_confirmation)\n  end\n\n  def pw_creds\n    params.require(:passwords)\n          .permit(:old, :new)\n  end\n\n  private :user_creds, :pw_creds\nend\n</code></pre>\n\n<p>i know i should change something </p>\n\n<p>in my create user but not sure where</p>\n\n<p>i tried to use @current_user = user under the sign up part but it didnt work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "module"], "comments": [{"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487724150, "post_id": 42380460, "comment_id": 71910479, "body": "Which line is it failing on? You are not even calling <code>base_url</code> method in the test and <code>random_state_string</code> doesn&#39;t call <code>base_url</code>."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487724637, "post_id": 42380460, "comment_id": 71910629, "body": "<code>lib&#47;integrations&#47;spotify.rb:33</code>, which says <code>ep.url = &quot;#{base_url}&#47;me&#47;playlists&quot;</code>. You mentioned exactly what confuses me most. I don&#39;t even call <code>base_url</code>."}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487724723, "post_id": 42380460, "comment_id": 71910657, "body": "This is not in the snippet in this post, <code>ep.url = &quot;#{base_url}&#47;me&#47;playlists&quot;</code>."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487724758, "post_id": 42380460, "comment_id": 71910667, "body": "Sorry, I edited it now. I had mistakenly removed this part."}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487724822, "post_id": 42380460, "comment_id": 71910684, "body": "Is there a reason that this is at class level?   api_client(&#39;spotify&#39;) do |apic| ----------   end"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1487724936, "post_id": 42380460, "comment_id": 71910709, "body": "Yes, there is. This is the creation of the API client endpoints which will be used in all the rest of the controller. This is the initialization of the API client I am creating."}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1487725189, "post_id": 42380829, "comment_id": 71910792, "body": "Extend it in <code>SpotifyIntegration</code>?"}], "tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": false, "score": 1, "last_activity_date": 1487725253, "last_edit_date": 1487725253, "creation_date": 1487725064, "answer_id": 42380829, "question_id": 42380460, "link": "https://stackoverflow.com/questions/42380460/having-trouble-with-specs-for-a-ruby-mixin-module/42380829#42380829", "title": "Having trouble with specs for a Ruby mixin module", "body": "<p>You need to extend <code>APIClientBuilder</code> if you want to use the methods defined here at class level in module <code>SpotifyIntegration</code>.</p>\n\n<pre><code>module SpotifyIntegration\n\n  extend APIClientBuilder\n</code></pre>\n\n<p>Also, <code>base_url</code> must be a class method too, <code>def self.base_url</code></p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487725414, "post_id": 42380852, "comment_id": 71910852, "body": "Yes a client could be a module if you don&#39;t intend to create instances of it. But in most cases you want setup clients and service objects as classes to make it easier to inject configuration through the initializer."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1487725678, "last_edit_date": 1487725678, "creation_date": 1487725240, "answer_id": 42380852, "question_id": 42380460, "link": "https://stackoverflow.com/questions/42380460/having-trouble-with-specs-for-a-ruby-mixin-module/42380852#42380852", "title": "Having trouble with specs for a Ruby mixin module", "body": "<p>You're misusing mixins. Use mixins for cases where classical inheritance is not suited to add a set of features to objects.</p>\n\n<p>For example:</p>\n\n<pre><code>module Commentable\n  extend ActiveSupport::Concern\n\n  included do\n    has_many :comments, as: :commentable\n  end \n  # ...\nend\n\nclass Video &lt; ApplicationRecord\n  include Commentable\nend\n\nclass Hotel &lt; ApplicationRecord\n  include Commentable\nend\n</code></pre>\n\n<p>As you can see by this example you <code>extend</code> a module with other modules and <code>include</code> modules in classes. Using classical inheritance to add the shared behaviour would be awkward at best since the two classes are apples and pears.</p>\n\n<p>In your specific case you should instead use classical inheritance and not mix the API client into the controller. Rather you controller should invoke it as a distinct object.</p>\n\n<pre><code>class APIClient\n  # Implement shared behavior for a REST api client\nend\n\nclass SpotifyClient &lt; APIClient\n  # ...\nend \n\nclass FoosController &lt; ApplicationController\n  def index\n    client = SpotifyClient.new\n    @foos = client.get_something\n  end\nend\n</code></pre>\n\n<p>Why shouldn't you mix a API client into a controller or model? Because of the Single Responsibility Principle and the fact that using smaller parts that do a limited amount of things is preferable to creating god classes. </p>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 42380852, "answer_count": 2, "score": 1, "last_activity_date": 1487725678, "creation_date": 1487722780, "last_edit_date": 1487724719, "question_id": 42380460, "link": "https://stackoverflow.com/questions/42380460/having-trouble-with-specs-for-a-ruby-mixin-module", "title": "Having trouble with specs for a Ruby mixin module", "body": "<p>I don't have a great experience with mixin modules. Then, please forgive me if my question seems to be a bit na\u00efve.</p>\n\n<p>I am creating a few modules to integrate a project with music services like Spotify, who have REST APIs. All these modules include another mixin module I created named APIClientBuilder, which provides a small DSL for creating API endpoints.</p>\n\n<p><strong>lib/integrations/api_client_builder.rb</strong></p>\n\n<pre><code>require 'rest-client'\n\nmodule APIClientBuilder\n\n  attr_accessor :api_client, :endpoint, :url, :param\n\n  def api_client(api_name)\n  end\n\n  def fetch_client(api_name)\n  end\n\n  def api_endpoint(endpoint_name)\n  end\n\n  def fetch_endpoint(api_name,endpoint_name)\n  end \n\n  def method=(meth)\n  end   \n\n  def url=(endpoint_url) \n  end\n\n  def param(param_name,param_value)\n  end\n\n  def call(api_name,api_endpoint,token,*extra_params)\n  end\n\nend\n</code></pre>\n\n<p><strong>lib/integrations/spotify.rb</strong></p>\n\n<pre><code>require_relative 'api_client_builder'\n\nmodule SpotifyIntegration\n\n  include APIClientBuilder\n\n  def base_url\n    'https://api.spotify.com/v1'\n  end\n\n  def random_state_string\n    (0..10).map { (65 + rand(26)).chr }.join\n  end\n\n  api_client('spotify') do |apic|\n\n    apic.api_endpoint('request_authorization') do |ep|\n      ep.method = :get\n      ep.url = \"https://accounts.spotify.com/authorize\"\n      ep.param(\"client_id\",SPOTIFY_KEY)\n      ep.param(\"response_type\",\"code\")\n      ep.param(\"redirect_uri\",\"http://localhost:3000\")\n    end\n\n    apic.api_endpoint('my_playlists') do |ep|\n      ep.method = :get\n      ep.url = \"#{base_url}/me/playlists\"\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>My idea was having in my controllers something like this:</p>\n\n<p><strong>app/controllers/api/v1/users_controller.rb</strong></p>\n\n<pre><code>require 'integrations/spotify.rb'\n\nclass UsersController &lt; ApplicationController\n\n  include SpotifyIntegration\n\nend\n</code></pre>\n\n<p>And then have access to the methods in <code>SpotifyIntegration</code> and, through this, to the methods in <code>APIClientBuilder</code>.</p>\n\n<p>It happens that I wrote the following spec file with a very simple test:</p>\n\n<p><strong>spec/lib/integrations/spotify_integration_spec.rb</strong></p>\n\n<pre><code>require 'rails_helper'\n\nrequire 'integrations/spotify'\n\nclass SpotifyClientTester\n  include SpotifyIntegration\nend\n\nRSpec.describe SpotifyIntegration do\n\n  context 'Auxiliary methods' do\n\n    it 'Two calls to random_state_string shall generate two different strings' do\n      obj = SpotifyClientTester.new\n      s1 = obj.random_state_string\n      s2 = obj.random_state_string\n      expect(s1).not_to eq(s2)\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>But when I run it I get</p>\n\n<blockquote>\n  <p>undefined local variable or method <code>base_url</code> for SpotifyIntegration:Module (NameError)</p>\n</blockquote>\n\n<p>I am not sure about what I am missing. Maybe I should use <code>extend</code> instead  of <code>include</code>. I always make some confusion about this.</p>\n\n<p>Can someone put me in the right path? I've been fighting this error for a whole afternoon.</p>\n"}, {"tags": ["ruby", "algorithm", "recursion", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1487723614, "creation_date": 1487723614, "answer_id": 42380589, "question_id": 42380382, "link": "https://stackoverflow.com/questions/42380382/min-path-sum-in-matrix-brute-force/42380589#42380589", "title": "Min Path Sum in Matrix- Brute Force", "body": "<p>You didn't make a proper termination condition.  You check only until you hit <em>either</em> the right column or bottom row.  You need to stay within bounds, but continue until you hit the lower-right corner.  You need to recur within bounds until you hit <em>both</em> limits.</p>\n\n<p>Given that, your code does work okay: it finds the path of 2 to the bottom row, rather than the path of 3 to the right edge.  You just have to teach it to finish the job.</p>\n\n<p>Is that enough to move you to a solution?</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1487923991, "last_edit_date": 1487923991, "creation_date": 1487741088, "answer_id": 42383337, "question_id": 42380382, "link": "https://stackoverflow.com/questions/42380382/min-path-sum-in-matrix-brute-force/42383337#42383337", "title": "Min Path Sum in Matrix- Brute Force", "body": "<p>As this is a shortest path problem on an acyclic directed graph, you could use a standard <a href=\"https://en.wikipedia.org/wiki/Shortest_path_problem\" rel=\"nofollow noreferrer\">shortest path algorithm</a>.</p>\n\n<p>You could also use dynamic programming (\"DP), which may be the most efficient optimization technique. My answer implements a DP algorithm.</p>\n\n<p>A shortest-path or DP algorithm would be vastly superior to enumerating all paths from top-left to bottom-right. As the number of paths increases exponentially with the size of the array, simple enumeration could only be used on modest-sized arrays.</p>\n\n<p>The idea of the DP algorithm is as follows. Let <code>n</code> and <code>m</code> be the numbers of rows and columns, respectively. First compute the shortest path from each column in the last row to the last column in the last row. This is an easy calculation because there is only one path to <code>[m-1, n-1]</code> for each of these elements. Starting with <code>[m-1, n-2]</code> we simply work back to <code>[m-1, 0]</code>.</p>\n\n<p>Next we compute the shortest paths from each element in each of the other rows to <code>[m-1, n-1]</code>, starting with the penultimate row (<code>m-2</code>) and working back to the first row (<code>0</code>). The last element in each row, <code>[i, n-1]</code>, is an easy calculation because one can only go down (to <code>[i+1, n-1]</code>). Therefore, the shortest path from  <code>[i, n-1]</code> to <code>[m-1, n-1]</code> is first going to <code>[i+1, n-1]</code> and then following the shortest path from <code>[i+1, n-1]</code>, which we've already computed (including its length, of course). The length of the shortest path from <code>[i, n-1]</code> is the \"down\" distance for <code>[i, n-1]</code> plus the length of the shortest path from <code>[i+1, n-1]</code>.</p>\n\n<p>For elements <code>[i, j]</code>, n-1<code>,</code>i &lt; <code>j &lt; m-1</code>, we calculate the shortest paths if we go right and down, and select the shorter of the two.</p>\n\n<p>We can implement this as follows.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def shortest_path(distance)\n  last_row, last_col = distance.size-1, distance.first.size-1\n  h = {}\n  last_row.downto(0) do |i|\n    last_col.downto(0) do |j|\n       h_right = { min_path_len: distance[i][j][:r] + h[[i,j+1]][:min_path_len],\n                   next_node: [i,j+1] } if j &lt; last_col\n       h_down  = { min_path_len: distance[i][j][:d] + h[[i+1,j]][:min_path_len],\n                   next_node: [i+1,j] } if i &lt; last_row\n       g =\n       case\n       when i == last_row &amp;&amp; j == last_col  \n         { min_path_len: 0, next_node: nil }\n       when i == last_row\n         h_right\n       when j == last_col\n         h_down\n       else\n         [h_right, h_down].min_by { |f| f[:min_path_len] }\n       end\n       h[[i,j]] = g\n    end\n  end\n  build_path(h)\nend\n\ndef build_path(h)\n  node = [0, 0]\n  len = h[node][:min_path_len]\n  arr = []\n  while h[node][:next_node]\n    arr &lt;&lt; node\n    node = h[node][:next_node]\n  end\n  [len, arr]\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>Suppose these are the distances between adjacent nodes.</p>\n\n<pre><code>\u25cf 4 \u25cf 3 \u25cf 1 \u25cf 2 \u25cf\n6   2   5   4   5\n\u25cf 3 \u25cf 4 \u25cf 6 \u25cf 3 \u25cf\n1   3   4   2   3\n\u25cf 6 \u25cf 3 \u25cf 1 \u25cf 2 \u25cf\n</code></pre>\n\n<p>It's convenient to provide this information in the form of an array of hashes.</p>\n\n<pre><code>distance = [\n  [{ r: 4, d: 6 }, { r: 3, d: 2 }, { r: 1, d: 5 }, { r: 2, d: 4 }, { d: 5 }],\n  [{ r: 3, d: 1 }, { r: 4, d: 3 }, { r: 6, d: 4 }, { r: 3, d: 2 }, { d: 3 }],\n  [{ r: 6  },      { r: 3 },       { r: 1 },       { r: 2 }]\n]\n</code></pre>\n\n<p>We may now compute a shortest path.</p>\n\n<pre><code>p shortest_path distance \n  #=&gt; [15, [[0, 0], [0, 1], [1, 1], [2, 1], [2, 2], [2, 3]]]\n</code></pre>\n\n<p>A shortest path is given by the second element of the array that is returned. <code>15</code> is the length of that path.</p>\n"}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 42380589, "answer_count": 2, "score": 0, "last_activity_date": 1487923991, "creation_date": 1487722236, "question_id": 42380382, "link": "https://stackoverflow.com/questions/42380382/min-path-sum-in-matrix-brute-force", "title": "Min Path Sum in Matrix- Brute Force", "body": "<p>I'm working on the following problem:</p>\n\n<blockquote>\n  <p>Given a m x n grid filled with non-negative numbers, find a path from top left to bottom right which minimizes the sum of all numbers along its path.\n   Note: You can only move either down or right at any point in time.</p>\n</blockquote>\n\n<p>My initial impression here was to, from each position in the grid, get the min length of going to the right vs going downward. However, this gives me the incorrect answer for the following:</p>\n\n<pre><code>Input:\n[[1,2],[1,1]]\nOutput:\n2\nExpected:\n3\n</code></pre>\n\n<p>Intuitively, not sure what I'm doing wrong. It's also very simple code (I know it's not memoized--was planning on that for the next step) but intuitively not sure what's going wrong. The recursive base case makes sense, and each number is being taken into consideration.</p>\n\n<pre><code>def min_path_sum(grid)\n    smallest_path(0, 0, grid)\nend\n\ndef smallest_path(row, col, grid)\n    return 0 if (row == grid.length || col == grid.first.length)\n    current_val = grid[row][col]\n    [current_val + smallest_path(row+1, col, grid), current_val + smallest_path(row, col+1, grid)].min #memoize here\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "redis", "queue", "sidekiq", "pause"], "comments": [{"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1487722655, "post_id": 42380066, "comment_id": 71910029, "body": "Please post your code here, and explain with it where the error or issue is exactly in the code. Also elaborate on what effect you want to get from your code."}, {"owner": {"reputation": 11, "user_id": 7601697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60b02f7be3831b41030e950bbeb26c4?s=128&d=identicon&r=PG&f=1", "display_name": "C&#233;dric Laruelle", "link": "https://stackoverflow.com/users/7601697/c%c3%a9dric-laruelle"}, "reply_to_user": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1487781111, "post_id": 42380066, "comment_id": 71941375, "body": "I edited the post and copied the issue I opened on github"}, {"owner": {"reputation": 11, "user_id": 7601697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60b02f7be3831b41030e950bbeb26c4?s=128&d=identicon&r=PG&f=1", "display_name": "C&#233;dric Laruelle", "link": "https://stackoverflow.com/users/7601697/c%c3%a9dric-laruelle"}, "reply_to_user": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1487896505, "post_id": 42380066, "comment_id": 72003009, "body": "By the way I feel the -1 was really harsh. I did link the github issue I opened on the gem since the beginning, which is fully detailed and gives a full reproduction project ...."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1487897172, "post_id": 42380066, "comment_id": 72003210, "body": "In case that comment was intended for me, that&#39;s not my downvote."}], "owner": {"reputation": 11, "user_id": 7601697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60b02f7be3831b41030e950bbeb26c4?s=128&d=identicon&r=PG&f=1", "display_name": "C&#233;dric Laruelle", "link": "https://stackoverflow.com/users/7601697/c%c3%a9dric-laruelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488263803, "creation_date": 1487720477, "last_edit_date": 1488263803, "question_id": 42380066, "link": "https://stackoverflow.com/questions/42380066/delay-before-queue-pausing-with-sidekiq-limit-fetch", "title": "Delay before queue pausing with sidekiq-limit_fetch", "body": "<p>We are using <code>sidekiq-limit_fetch</code> to have dynamic queues, and require to be able to pause them.</p>\n\n<p>The pause feature does work, but there seems to be a delay before the pause is effective.</p>\n\n<p>I created an <a href=\"https://github.com/brainopia/sidekiq-limit_fetch/issues/81\" rel=\"nofollow noreferrer\">issue</a> in the gem on GitHub.</p>\n\n<p>I have a problem with the pause functionality on a dynamic queue.\nHere is a project that shows the problem: <a href=\"https://github.com/cedricbirdly/pause-queue\" rel=\"nofollow noreferrer\">https://github.com/cedricbirdly/pause-queue</a></p>\n\n<p>Requirements: a running local redis server</p>\n\n<p>To reproduce:</p>\n\n<ol>\n<li><p>Execute <code>launch_sidekiq.sh</code> .\nThis is a sidekiq process that processes the queue \"dynamicqueue\"</p></li>\n<li><p>Execute <code>ruby pause_and_enqueue_worker.rb</code></p></li>\n</ol>\n\n<p>As far as I understand, nothing should happen in the sidekiq process, as the queue dynamicqueue is set to pause before enqueuing a new job. However, the worker runs.</p>\n\n<p>If you execute <code>ruby pause_and_enqueue_worker.rb</code> a second time, it resets the queue to pause and enqueues a new job, which is not performed\n\u2192 That is to me the expected behavior.</p>\n\n<p>If you execute <code>ruby release_queue.rb</code>, then the queue processing is resumed and the worker is executed \u2192 That is to me the expected behavior.</p>\n\n<p>Conclusion:</p>\n\n<p>It seems there is a delay when pausing a queue before the pause is effective. I would expect it to be immediate. Am I wrong in my expectations?</p>\n"}, {"tags": ["ruby", "vim", "syntax", "keyword"], "answers": [{"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": true, "score": 2, "last_activity_date": 1487720554, "creation_date": 1487720554, "answer_id": 42380083, "question_id": 42379979, "link": "https://stackoverflow.com/questions/42379979/why-does-syntax-partially-disappear-when-removing-from-iskeyword/42380083#42380083", "title": "Why does syntax partially disappear when removing @ from iskeyword?", "body": "<p>From <code>'isfname'</code>, which <code>'iskeyword'</code> points to:</p>\n\n<blockquote>\n  <p>If the character is '@', all characters where isalpha() returns TRUE are included. \u2026 To include '@' itself use \"@-@\".</p>\n</blockquote>\n\n<p><code>@</code> (64) isn\u2019t actually in the character set to begin with for me:</p>\n\n<pre><code>iskeyword=@,48-57,_,192-255\n</code></pre>\n\n<p>but if it somehow got in there for you, you can add a part starting with a caret to exclude it:</p>\n\n<pre><code>set iskeyword+=^@-@\n</code></pre>\n"}], "owner": {"reputation": 116, "user_id": 5829337, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/69abbe86a2fbdbced439679cb5c8078c?s=128&d=identicon&r=PG", "display_name": "Geoff Lee", "link": "https://stackoverflow.com/users/5829337/geoff-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 42380083, "answer_count": 1, "score": 1, "last_activity_date": 1487720554, "creation_date": 1487719867, "question_id": 42379979, "link": "https://stackoverflow.com/questions/42379979/why-does-syntax-partially-disappear-when-removing-from-iskeyword", "title": "Why does syntax partially disappear when removing @ from iskeyword?", "body": "<p>When I add this to my vimrc:</p>\n\n<pre><code>set iskeyword-=@\n</code></pre>\n\n<p>It removes some syntax. I've only tested this in viml and ruby code. What's the reason for this? I've included images to show the effect in viml code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VoGBm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VoGBm.png\" alt=\"Before removing @\"></a>\n<a href=\"https://i.stack.imgur.com/Yz41m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yz41m.png\" alt=\"After removing @\"></a></p>\n\n<p>EDIT: How would I go about removing it without affecting syntax? The reason why I removed it was to make it easier to select <code>\"$@\"</code> as a word. Anyone can offer a solution to this problem or an alternative way of doing that is greatly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 1, "creation_date": 1487719494, "post_id": 42379889, "comment_id": 71909009, "body": "Try checking the #to_sql output.  This is helpful for debugging sql statements  current_organization.events.order(started_at: :asc).where.not(status: &quot;canceled&quot;).to_sql"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1487719788, "post_id": 42379889, "comment_id": 71909105, "body": "Do you have a <code>default_scope</code> set on your events model?"}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "reply_to_user": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1487720208, "post_id": 42379889, "comment_id": 71909244, "body": "@MickeySheu, Here are the different outputs  <code>@events = current_organization.events.order(started_at: :asc).where(status: &quot;canceled&quot;).to_sql</code>  <code>=&gt; &quot;SELECT \\&quot;events\\&quot;.* FROM \\&quot;events\\&quot; WHERE \\&quot;events\\&quot;.\\&quot;organization_id\\&quot; = 1 AND \\&quot;events\\&quot;.\\&quot;status\\&quot; = &#39;canceled&#39; ORDER BY \\&quot;events\\&quot;.\\&quot;started_at\\&quot; ASC\u201d</code>  <code>@events = current_organization.events.order(started_at: :asc).where.not(status: &quot;canceled&quot;).to_sql</code>  <code>=&gt; \u201cSELECT \\&quot;events\\&quot;.* FROM \\&quot;events\\&quot; WHERE \\&quot;events\\&quot;.\\&quot;organization_id\\&quot; = 1 AND (\\&quot;events\\&quot;.\\&quot;status\\&quot; != &#39;canceled&#39;) ORDER BY \\&quot;events\\&quot;.\\&quot;started_at\\&quot; ASC\u201d</code>"}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1487720340, "post_id": 42379889, "comment_id": 71909287, "body": "@mysmallidea, no default scope set on my events model"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1487720345, "post_id": 42379889, "comment_id": 71909290, "body": "Why are you expecting your <code>where.not</code> query to find anything? Are you sure there are non-canceled events for that organization?"}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1487720387, "post_id": 42379889, "comment_id": 71909303, "body": "@muistooshort Yes, there are exactly two events where <code>status: &quot;canceled&quot;</code> I am in a testing environment with only 10 events. If I use <code>.where(status: &quot;canceled&quot;)</code> I get the two events. But I cannot use the inverse to omit the two events from the rest of the events."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1487721277, "post_id": 42379889, "comment_id": 71909607, "body": "Just for sanity&#39;s sake you include the result of <code>.events.all.select { |c| c.status != &quot;canceled&quot; }.count</code>? Seems like both your original code and the answer should work."}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1487721554, "post_id": 42379889, "comment_id": 71909681, "body": "@maxple,  <code>current_organization.events.all.select { |c| c.status != &quot;canceled&quot; }.count   Event Load (0.7ms)  SELECT &quot;events&quot;.* FROM &quot;events&quot; WHERE &quot;events&quot;.&quot;organization_id&quot; = $1  [[&quot;organization_id&quot;, 1]] =&gt; 6</code>  Bonus is the inverse:  <code>current_organization.events.all.select { |c| c.status = &quot;canceled&quot; }.count   Event Load (0.9ms)  SELECT &quot;events&quot;.* FROM &quot;events&quot; WHERE &quot;events&quot;.&quot;organization_id&quot; = $1  [[&quot;organization_id&quot;, 1]] =&gt; 8</code>"}], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1487724872, "post_id": 42380521, "comment_id": 71910697, "body": "Would setting a default value to my column be the same as making the column not null?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1487725050, "post_id": 42380521, "comment_id": 71910745, "body": "Not really but you could set it to <code>not null</code> and add the default. You really do want the column to be <code>not null</code> though, otherwise <code>null</code>s will end up in there and cause problems."}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1487739956, "post_id": 42380521, "comment_id": 71914859, "body": "Your answer was really good at explaining how SQL handles null. I went ahead and made the necessary changes to that column and I don&#39;t think it will give me a problem from here on out. Thank you."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1487723122, "creation_date": 1487723122, "answer_id": 42380521, "question_id": 42379889, "link": "https://stackoverflow.com/questions/42379889/activerecord-can-successfully-query-with-wherefoo-bar-but-where-notfoo/42380521#42380521", "title": "ActiveRecord: Can successfully query with .where(foo: &quot;bar&quot;) but .where.not(foo: &quot;bar&quot;) doesn&#39;t return the correct results", "body": "<p>This update to your question:</p>\n\n<blockquote>\n  <p>Edit: My only work around I can find is just using <code>where(status: nil)</code> but that's really unintuitive.</p>\n</blockquote>\n\n<p>is important. That tells me that your <code>status</code> column allows <code>NULL</code> values and that you have <code>NULL</code> values.</p>\n\n<p>Those <code>NULL</code>s combined with ActiveRecord's somewhat poor implementation of <code>where.not</code> is the cause of your trouble. If we look at the SQL that is produced by:</p>\n\n<pre><code>where.not(status: \"canceled\")\n</code></pre>\n\n<p>we see:</p>\n\n<pre><code>(\"events\".\"status\" != 'canceled') \n</code></pre>\n\n<p>But in SQL, both <code>x = null</code> and <code>x &lt;&gt; null</code> both evaluate to <code>null</code> for all <code>x</code> (including when <code>x</code> itself is <code>null</code>) and <code>null</code> is not a truthy value in SQL; that means that <code>x &lt;&gt; y</code> is not exactly the opposite of <code>x = y</code> when <code>null</code>s are involved: if a row's <code>status</code> is <code>null</code> then neither <code>where status = 'canceled'</code> nor <code>where status != 'canceled'</code> will find it.</p>\n\n<p>Whenever <code>null</code>s are involved, you have to work with operators that treat <code>null</code> they way you expect: <code>is null</code>, <code>is not null</code>, <code>is distinct from</code>, <code>is not distinct from</code>, ...</p>\n\n<p>Allowing <code>null</code>s in your <code>status</code> column sounds odd to me and fixing that would make the problem go away:</p>\n\n<ol>\n<li>Add a migration to change all the <code>null</code> statuses to something nicer to work with. A <code>status is null</code> column says that the row/model has no status at all and that's odd so give them all a real status code.</li>\n<li>Add a migration to make your <code>status</code> column <code>not null</code> so that you'll never have to worry about <code>null</code> statuses again.</li>\n<li>Update your model's validations to not allow <code>status.nil?</code> to happen.</li>\n</ol>\n\n<p>In general, don't use nullable columns anywhere unless you're certain that the <code>null</code>s make sense and you're prepared to deal with how <code>null</code> works in SQL.</p>\n"}], "owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42380521, "answer_count": 1, "score": 2, "last_activity_date": 1487723157, "creation_date": 1487719327, "last_edit_date": 1487723157, "question_id": 42379889, "link": "https://stackoverflow.com/questions/42379889/activerecord-can-successfully-query-with-wherefoo-bar-but-where-notfoo", "title": "ActiveRecord: Can successfully query with .where(foo: &quot;bar&quot;) but .where.not(foo: &quot;bar&quot;) doesn&#39;t return the correct results", "body": "<p>I have a query built like so:</p>\n\n<pre><code>@events = current_organization.events.order(started_at: :asc)\n</code></pre>\n\n<p>I would like query all those events where the <code>status</code> is not <code>\"canceled\"</code>. However, when I use a query like this:</p>\n\n<pre><code>current_organization.events.order(started_at: :asc).where.not(status: \"canceled\")\n</code></pre>\n\n<p>It returns nothing. However, just for experimentations sake I tried:</p>\n\n<pre><code>@events = current_organization.events.where(status: \"canceled\")\n</code></pre>\n\n<p>It successfully returned the canceled events. For some reason the inverse does not work. Is there any reason why that is?</p>\n\n<p>Edit: My only work around I can find is just using <code>where(status: nil)</code> but that's really unintuitive. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1487721412, "post_id": 42379882, "comment_id": 71909646, "body": "maybe <code>bundle exec rails</code>? Seems like an issue loading Rails itself how did you install it? <code>gem install rails</code> or <code>sudo gem instal rails</code>?Do you have <code>rbenv</code> or <code>rvm</code>?"}, {"owner": {"reputation": 1275, "user_id": 5677781, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jmcJj.png?s=128&g=1", "display_name": "rubyandcoffee", "link": "https://stackoverflow.com/users/5677781/rubyandcoffee"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1487721803, "post_id": 42379882, "comment_id": 71909756, "body": "I&#39;ve just done <code>sudo gem install rails</code> and now my command from earlier works!"}], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 5677781, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jmcJj.png?s=128&g=1", "display_name": "rubyandcoffee", "link": "https://stackoverflow.com/users/5677781/rubyandcoffee"}, "is_accepted": false, "score": 0, "last_activity_date": 1487721837, "creation_date": 1487721837, "answer_id": 42380304, "question_id": 42379882, "link": "https://stackoverflow.com/questions/42379882/railties-loaderror-cannot-load-such-file/42380304#42380304", "title": "railties (LoadError) Cannot load such file", "body": "<p>I've just done <code>sudo gem install rails</code> and now it works.</p>\n"}], "owner": {"reputation": 1275, "user_id": 5677781, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jmcJj.png?s=128&g=1", "display_name": "rubyandcoffee", "link": "https://stackoverflow.com/users/5677781/rubyandcoffee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1032, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487721837, "creation_date": 1487719295, "question_id": 42379882, "link": "https://stackoverflow.com/questions/42379882/railties-loaderror-cannot-load-such-file", "title": "railties (LoadError) Cannot load such file", "body": "<p>I've got a Ruby on Rails app, just added <code>rspec-rails</code> and I tried to run:\n<code>\nrails generate rspec:install\n</code></p>\n\n<p>But received this:\n<code>\n/usr/local/bin/rails:23:in `load': cannot load such file -- /usr/share\n/rubygems-integration/all/gems/railties-4.2.6/bin/rails (LoadError)\n</code></p>\n\n<p>From my Gemfile...\n<code>\ngem 'rspec-rails', '~&gt; 3.5'\n</code>\nAnd I'm running Rails v4.2.5.1</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 3318043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38b9a9589bc51426c7a77b972caccd9b?s=128&d=identicon&r=PG", "display_name": "srajappa", "link": "https://stackoverflow.com/users/3318043/srajappa"}, "edited": false, "score": 0, "creation_date": 1487719547, "post_id": 42379774, "comment_id": 71909023, "body": "so, I understood your answer and wrote this following statement- It worked just fine.   <code>default[&#39;sample_cookbook&#39;][&#39;auth_keys&#39;] = ::File.read(&quot;&#47;app&#47;ABC&#47;.ssh&#47;id_rsa.pub&quot;)</code>"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 3, "creation_date": 1487722047, "post_id": 42379774, "comment_id": 71909825, "body": "Just remember that this happens when the file is executed, not when you use the attribute."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": true, "score": 2, "last_activity_date": 1487718699, "creation_date": 1487718699, "answer_id": 42379774, "question_id": 42379569, "link": "https://stackoverflow.com/questions/42379569/extracting-value-from-a-file-and-setting-value-to-attribute-in-chef/42379774#42379774", "title": "Extracting value from a file and setting value to attribute, in chef", "body": "<p>See <a href=\"https://stackoverflow.com/questions/5545068/what-are-all-the-common-ways-to-read-a-file-in-ruby\">this answer</a> for more information on how to read data from files.</p>\n\n<p>For this case, since id_rsa.pub is probably only on the order of a few kB, you can just use</p>\n\n<pre><code>default = {'sample_cookbook' =&gt; {'auth_keys' =&gt; File.read(\"/app/ABC/.ssh/id_rsa.pub\") }}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 3318043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38b9a9589bc51426c7a77b972caccd9b?s=128&d=identicon&r=PG", "display_name": "srajappa", "link": "https://stackoverflow.com/users/3318043/srajappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 42379774, "answer_count": 1, "score": 0, "last_activity_date": 1487718699, "creation_date": 1487717739, "question_id": 42379569, "link": "https://stackoverflow.com/questions/42379569/extracting-value-from-a-file-and-setting-value-to-attribute-in-chef", "title": "Extracting value from a file and setting value to attribute, in chef", "body": "<p>I wanted to extract value from a <em>file</em> and then put it into an attribute. </p>\n\n<p>eg. let the file be <code>/app/ABC/.ssh/id_rsa.pub</code> \nand </p>\n\n<p>the attribute be <code>default['sample_cookbook']['auth_keys']</code></p>\n\n<p>I would like the value(s) in <em>id_rsa.pub</em> set into the above attribute. </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4.2", "ruby-2.3"], "comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1487718076, "post_id": 42379462, "comment_id": 71908491, "body": "Couple questions: 1) What&#39;s the output of <code>Patient.primary_key</code> and <code>CodeStatus.primary_key</code>? 2) Why is the query looking for a patients.patient_id column to begin with? By default it should be expecting the primary key to be <code>patients.id</code>... 3) Can you add the entire has_one/belongs_to lines to your question? Are you passing any options to those methods? 4) Can you add the db/schema for those two tables?"}, {"owner": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "edited": false, "score": 1, "creation_date": 1487718235, "post_id": 42379462, "comment_id": 71908552, "body": "<code>where(column: nil)</code> is supported and generates <code>WHERE &quot;table&quot;.&quot;column_name&quot; IS NULL</code> with postgres. You probably messed up with the association definition. If <code>CodeStatus</code> belongs to <code>Patient</code>, <code>CodeStatus</code> must have a <code>patient_id</code> column."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1487747304, "creation_date": 1487747304, "answer_id": 42384817, "question_id": 42379462, "link": "https://stackoverflow.com/questions/42379462/rails-query-nil-has-one-association/42384817#42384817", "title": "Rails: Query nil has_one association", "body": "<p>The problem is, that</p>\n\n<pre><code>patient.code_status\n</code></pre>\n\n<p>is not a column, but a method, added by Rails when you say</p>\n\n<pre><code>class Patient\n  has_one :code_status\nend\n</code></pre>\n\n<p>Here is how you'd get all patients not associated with any code status:</p>\n\n<pre><code>Patient.includes(:code_status).where(code_statuses: { id: nil })\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 5347664, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ef04aec9db827112973968c4b6229658?s=128&d=identicon&r=PG", "display_name": "GregSantulli", "link": "https://stackoverflow.com/users/5347664/gregsantulli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 42384817, "answer_count": 1, "score": 1, "last_activity_date": 1509011475, "creation_date": 1487717217, "last_edit_date": 1509011475, "question_id": 42379462, "link": "https://stackoverflow.com/questions/42379462/rails-query-nil-has-one-association", "title": "Rails: Query nil has_one association", "body": "<p>I have two models: <code>Patient</code> and <code>CodeStatus</code>.</p>\n\n<p>CodeStatus <code>belongs_to</code> Patient, and Patient <code>has_one</code> CodeStatus</p>\n\n<p>I am trying to query all patients where <code>patient.code_status</code> is nil. I was surprised to find that <code>Patient.where(code_status: nil)</code> does not work throwing: <code>column patients.patient_id does not exist</code></p>\n\n<p>I have already found <a href=\"https://stackoverflow.com/questions/12515268/finding-nil-has-one-associations-in-where-query\">this (fairly old) answer</a>, but I find it difficult to believe that the best way to query this is via a long string of raw SQL. I would think that rails would include this helper like they do for many other associations. Does anyone know of a less verbose solution to this? Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1487718627, "post_id": 42379623, "comment_id": 71908702, "body": "I need to get collection of full data from Category + one column with sum of issues. I&#39;m using smart_listing gem for sorting table in view and it works with such collections. For sort by name, created_at etc. I can use @categories = Category.all, but I want also sort table by number of issues in each category, so I need to add extra column to &quot;Category.all&quot; collection."}], "tags": [], "owner": {"reputation": 483, "user_id": 7474561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0cb51bd61ff4715e3bec92f79f5f46?s=128&d=identicon&r=PG&f=1", "display_name": "KcUS_unico", "link": "https://stackoverflow.com/users/7474561/kcus-unico"}, "is_accepted": false, "score": -1, "last_activity_date": 1487720704, "last_edit_date": 1487720704, "creation_date": 1487717997, "answer_id": 42379623, "question_id": 42379461, "link": "https://stackoverflow.com/questions/42379461/rails-add-count-column-with-sum-of-values-from-associated-table/42379623#42379623", "title": "Rails. Add &quot;count&quot; column with sum of values from associated table", "body": "<p>Do you need it to be a query? Otherwise you can write it in your controller like this: </p>\n\n<pre><code>@categories = Category.all\n</code></pre>\n\n<p>To get all the issues for each category you can just do </p>\n\n<pre><code>@categories.each{|c| puts c.issues.count}\n</code></pre>\n\n<p>or use it the usual way in your views: </p>\n\n<pre><code>@categories.each do |c|\n</code></pre>\n\n<p><code>c.</code> ... you can call all columns of category here after the <code>c.</code> and \n <code>c.issues.count</code> gives you the count of issues where <code>category_id</code> is <code>c.id</code> </p>\n\n<p>Else try this: </p>\n\n<p>Category.joins('issues').order('issues.count')</p>\n"}, {"comments": [{"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1487721644, "post_id": 42380215, "comment_id": 71909702, "body": "I don&#39;t know why, but it returns standard &quot;Category.all&quot; collection, without any extra columns."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1487725579, "post_id": 42380215, "comment_id": 71910901, "body": "Try doing <code>categories.first.issues_count</code> (assuming you&#39;ve assigned your collection to <code>categories</code>)."}, {"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1487764029, "post_id": 42380215, "comment_id": 71928518, "body": "No, this is not what I need. I&#39;ve updated the question."}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 0, "last_activity_date": 1487721320, "creation_date": 1487721320, "answer_id": 42380215, "question_id": 42379461, "link": "https://stackoverflow.com/questions/42379461/rails-add-count-column-with-sum-of-values-from-associated-table/42380215#42380215", "title": "Rails. Add &quot;count&quot; column with sum of values from associated table", "body": "<p>You can do this with a <a href=\"http://edgeguides.rubyonrails.org/active_record_querying.html#left-outer-joins\" rel=\"nofollow noreferrer\"><code>left_outer_join</code></a>, like this: </p>\n\n<pre><code>Category.left_outer_joins(:issues).distinct.select(\"categories.*, COUNT(issues.*) AS issues_count\").group('categories.id')\n</code></pre>\n\n<p>This will generate SQL something like: </p>\n\n<pre><code>SELECT DISTINCT categories.*, COUNT(issues.*) AS issues_count FROM \"categories\" \n    LEFT OUTER JOIN \"issues\" \n    ON \"issues\".\"category_id\" = \"categories\".\"id\" \n    GROUP BY categories.id\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1487764051, "post_id": 42383813, "comment_id": 71928535, "body": "No, this is not what I need. I&#39;ve updated the question."}, {"owner": {"reputation": 27, "user_id": 7580637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsX9a.jpg?s=128&g=1", "display_name": "Abhishek28", "link": "https://stackoverflow.com/users/7580637/abhishek28"}, "reply_to_user": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1547828073, "post_id": 42383813, "comment_id": 95339520, "body": "This answer is for your previous question, If you change question than its not work, answer also update. Why you down vote it? @taras"}], "tags": [], "owner": {"reputation": 27, "user_id": 7580637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsX9a.jpg?s=128&g=1", "display_name": "Abhishek28", "link": "https://stackoverflow.com/users/7580637/abhishek28"}, "is_accepted": false, "score": -1, "last_activity_date": 1487743266, "creation_date": 1487743266, "answer_id": 42383813, "question_id": 42379461, "link": "https://stackoverflow.com/questions/42379461/rails-add-count-column-with-sum-of-values-from-associated-table/42383813#42383813", "title": "Rails. Add &quot;count&quot; column with sum of values from associated table", "body": "<p>On your controller file - </p>\n\n<pre><code>@categories = Category.all\n</code></pre>\n\n<p>It will return all category from category model.</p>\n\n<p>on your view -</p>\n\n<pre><code>&lt;table&gt;\n &lt;tr&gt;\n  &lt;th&gt;Category Name&lt;/th&gt;\n  &lt;th&gt;Issue Count&lt;/th&gt;\n &lt;/tr&gt;\n &lt;% @categories.each do |category| %&gt;\n  &lt;tr&gt;\n   &lt;td&gt;&lt;%= category.name %&gt;&lt;/td&gt;\n   &lt;td&gt;&lt;%= category.issues.count %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>here we iterate each category by each loop and in second column we just print no. of issues of a category.</p>\n"}, {"comments": [{"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1487764017, "post_id": 42384225, "comment_id": 71928507, "body": "No, this is not what I need. I&#39;ve updated the question."}], "tags": [], "owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "is_accepted": false, "score": 2, "last_activity_date": 1487745033, "creation_date": 1487745033, "answer_id": 42384225, "question_id": 42379461, "link": "https://stackoverflow.com/questions/42379461/rails-add-count-column-with-sum-of-values-from-associated-table/42384225#42384225", "title": "Rails. Add &quot;count&quot; column with sum of values from associated table", "body": "<pre><code>SELECT categories.*, COUNT(issues.id) as issue_count\nFROM categories\nINNER JOIN issues\nON issues.category_id = categories.id \nGROUP BY categories.id\n</code></pre>\n\n<p>the above query will do what you need. so in ruby code, it would be like as follows</p>\n\n<pre><code>Category.joins(:issues).select(\"categories.*, COUNT(issues.id) AS issues_count\").group('categories.id')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": true, "score": 8, "last_activity_date": 1487776064, "creation_date": 1487776064, "answer_id": 42395199, "question_id": 42379461, "link": "https://stackoverflow.com/questions/42379461/rails-add-count-column-with-sum-of-values-from-associated-table/42395199#42395199", "title": "Rails. Add &quot;count&quot; column with sum of values from associated table", "body": "<p>You can add an <code>issues_count</code> column in your Issues model: </p>\n\n<pre><code># app/models/issue.rb\nclass Issue &lt; ApplicationRecord\n  belongs_to :category, counter_cache: true\nend\n</code></pre>\n\n<p>This will cause the <code>category.issues_count</code> field to be updated automatically by ActiveRecord. </p>\n\n<p>You must also create a migration to add this field and update existing records: </p>\n\n<pre><code>class AddIssuesCountToCategory &lt; ActiveRecord::Migration[5.0]\n  def up\n    add_column :categories, :issues_count, :integer, default: 0\n    Category.reset_column_information\n    Category.all.each do |c|\n      Category.update_counters c.id, issues_count: c.issues.length\n    end\n  end\n  def down\n    remove_column :categories, :issues_count\n  end\nend\n</code></pre>\n\n<p>Ryan Bates has a good RailsCasts about this: <a href=\"http://railscasts.com/episodes/23-counter-cache-column\" rel=\"noreferrer\">http://railscasts.com/episodes/23-counter-cache-column</a></p>\n\n<p>Also see the Rails Guide: <a href=\"http://edgeguides.rubyonrails.org/association_basics.html#options-for-belongs-to-counter-cache\" rel=\"noreferrer\">http://edgeguides.rubyonrails.org/association_basics.html#options-for-belongs-to-counter-cache</a></p>\n"}], "owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5185, "favorite_count": 1, "accepted_answer_id": 42395199, "answer_count": 5, "score": 3, "last_activity_date": 1487776064, "creation_date": 1487717210, "last_edit_date": 1487775361, "question_id": 42379461, "link": "https://stackoverflow.com/questions/42379461/rails-add-count-column-with-sum-of-values-from-associated-table", "title": "Rails. Add &quot;count&quot; column with sum of values from associated table", "body": "<p>I have <strong>Category</strong> table and <strong>Issue</strong> table.</p>\n\n<p>In <strong>Category</strong> model:</p>\n\n<pre><code>has_many :issues\n</code></pre>\n\n<p>In <strong>Issue</strong> model:</p>\n\n<pre><code>belongs_to :category\n</code></pre>\n\n<p>I am able to write a query that will return the issue_count as a virtual attribute on the collection: </p>\n\n<pre><code>Category.left_outer_joins(:issues).select('categories.*, COUNT(issues.*) AS issues_count').group('categories.id')\n</code></pre>\n\n<p>However, I want an actual column on the table that stores the issues_count as a value in the <code>categories</code> table, like this:</p>\n\n<pre><code>id | name | created_at | updated_at | description | tags | issues_count\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1487719131, "post_id": 42379373, "comment_id": 71908882, "body": "Can you show the exact code producing this error?"}, {"owner": {"reputation": 1466, "user_id": 6174238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F23jW.jpg?s=128&g=1", "display_name": "Z-Bone", "link": "https://stackoverflow.com/users/6174238/z-bone"}, "edited": false, "score": 0, "creation_date": 1487719347, "post_id": 42379373, "comment_id": 71908958, "body": "Please add your JSON as well"}, {"owner": {"reputation": 4049, "user_id": 1083428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000f45b685d4d6ff1a171676512c382e?s=128&d=identicon&r=PG", "display_name": "Pavel Evstigneev", "link": "https://stackoverflow.com/users/1083428/pavel-evstigneev"}, "edited": false, "score": 0, "creation_date": 1487746787, "post_id": 42379373, "comment_id": 71917820, "body": "Parsed well for me, using ruby 2.4. Try printing string before parsing. <code>puts raw_content</code>, make sure it don&#39;t have extra quotes"}], "owner": {"reputation": 4312, "user_id": 166034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/311eb5cf1152752fafbed2a2c85aff5d?s=128&d=identicon&r=PG", "display_name": "Kerby82", "link": "https://stackoverflow.com/users/166034/kerby82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487716870, "creation_date": 1487716870, "question_id": 42379373, "link": "https://stackoverflow.com/questions/42379373/rails-json-parseerror-even-if-the-json-was-right", "title": "Rails Json ParseError even if the json was right", "body": "<p>I'm getting JSON ParseError even if the json to me is right.</p>\n\n<p>Below the log with the error:</p>\n\n<blockquote>\n  <p>JSON::ParserError (784: unexpected token at '\"{\"start\":\"2017-04-10T19:00:00\",\"end\":\"2017-04-10T19:30:00\",\"slot_id\":\"58ac958402e396b60400000a\",\"ambulatory\":\"Test  Partners\",\"price_private\":120,\"discount_private\":0,\"title\":\"Prenota (prezzo: 120 \u20ac)\",\"doctor\":\"Dott. Mario Rossi\",\"doctor_cv\":\"/curriculums/original/missing.png\",\"source\":{\"url\":\"/get_slot_for_cal?id=58ac958402e396b604000002\",\"type\":\"GET\",\"className\":[],\"_fetchId\":8,\"_status\":\"resolved\"},\"_id\":\"_fc134\",\"className\":[],\"allDay\":false,\"_allDay\":false,\"_start\":\"2017-04-10T19:00:00\",\"_end\":\"2017-04-10T19:30:00\"}\"')</p>\n</blockquote>\n\n<p>I tried also escaping the \" character same error</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 2, "last_activity_date": 1487720424, "creation_date": 1487720424, "answer_id": 42380057, "question_id": 42379340, "link": "https://stackoverflow.com/questions/42379340/how-to-fail-a-step-in-step-definition-file-so-that-scenario-is-automatically-mar/42380057#42380057", "title": "How to fail a step in step definition file so that scenario is automatically marked as failed in cucumber-capybara environment?", "body": "<p>The extra lines are the stacktrace from the exception you raise. You should be able to override the stacktrace if you specify an exception type.  Also, this type of behavior is what the <code>retry</code> statement is for</p>\n\n<pre><code>Given(/^The TREC UI is running$/) do\n  elapsedTime = 1\n  currentAttempts = 0\n  begin\n    visit \"http://sut:8080/myPage\"\n    puts \"Waiting for web server to start.\"\n    expect(page).to have_content(\"Welcome to My Page\", wait: SECONDS_TO_SLEEP)\n    totalTime = elapsedTime + currentAttempts * SECONDS_TO_SLEEP # This needs some math fixup if using the wait option above - won't work with rack_test driver though\n    puts \"It took #{totalTime} seconds for TREC UI to come up.\"\n  rescue\n    retry if (currentAttempts += 1) &lt;= MAX_NUM_ITERATIONS\n    # If using the rack_test driver then the :wait option above won't\n    # work so you would need to use sleep like below instead of the line above\n    # if (currentAttempts += 1) &lt;= MAX_NUM_ITERATIONS\n    #   sleep SECONDS_TO_SLEEP\n    #   retry\n    # end\n    raise RuntimeError, \"Web server failed to start.\", []  # The [] overrides the stack info with an empty array\n  end\nend \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4739524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0amxEIM3ndU/AAAAAAAAAAI/AAAAAAAACTA/YJKa9HOyvJA/photo.jpg?sz=128", "display_name": "Mehul Gogri", "link": "https://stackoverflow.com/users/4739524/mehul-gogri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487720424, "creation_date": 1487716709, "question_id": 42379340, "link": "https://stackoverflow.com/questions/42379340/how-to-fail-a-step-in-step-definition-file-so-that-scenario-is-automatically-mar", "title": "How to fail a step in step definition file so that scenario is automatically marked as failed in cucumber-capybara environment?", "body": "<p>Is there any simple way to mark the step as failed in cucumber so that scenario gets marked as failed in cucumber?</p>\n\n<p>My code in one of my step definition file which is written using Ruby language:</p>\n\n<pre><code>SECONDS_TO_SLEEP = 5\nMAX_NUM_ITERATIONS = 3\n\nGiven(/^The TREC UI is running$/) do\n    elapsedTime = 1\n    currentAttempts = 0\n    while currentAttempts &lt;= MAX_NUM_ITERATIONS\n        begin\n            visit \"http://sut:8080/myPage\"\n            expect(page).to have_content(\"Welcome to My Page\")\n            totalTime = elapsedTime + currentAttempts * SECONDS_TO_SLEEP\n            puts \"It took #{totalTime} seconds for TREC UI to come up.\"\n            break\n\n        rescue\n            currentAttempts += 1\n            sleep SECONDS_TO_SLEEP\n            if currentAttempts &lt;= MAX_NUM_ITERATIONS\n                puts \"Waiting for web server to start.\"\n            else\n                raise \"Web server failed to start.\"\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>When I run my feature file, I get the this output \n<a href=\"https://i.stack.imgur.com/j6c2k.png\" rel=\"nofollow noreferrer\">Output_Snapshot</a></p>\n\n<p>I do not understand why do I get those lines in the output after line \"Web server failed to start\".</p>\n\n<p>Is there any other simple way to fail the step in the step definition file?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487748480, "post_id": 42378877, "comment_id": 71918688, "body": "I deleted my answer after seeing that I misread the question. I thought <code>user_input</code> was an array of strings. It&#39;s perfectly clear that it&#39;s a string."}], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "edited": false, "score": 1, "creation_date": 1487717050, "post_id": 42378988, "comment_id": 71908059, "body": "What&#39;s with the downvote? Is there something wrong with this solution?"}], "tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": false, "score": 1, "last_activity_date": 1487715192, "creation_date": 1487715192, "answer_id": 42378988, "question_id": 42378877, "link": "https://stackoverflow.com/questions/42378877/ruby-multiple-string-match-with/42378988#42378988", "title": "ruby multiple string match with", "body": "<p>Use an array and <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">any?</a></p>\n\n<pre><code>&gt; user_input = \"string_a\"\n=&gt; \"string_a\"\n&gt; [\"asd\",\"string_a\"].any? {|a| user_input.include? a}\n=&gt; true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 1160080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb88019e023439bad8008f70d826bafa?s=128&d=identicon&r=PG", "display_name": "ioojimooi", "link": "https://stackoverflow.com/users/1160080/ioojimooi"}, "edited": false, "score": 0, "creation_date": 1487747666, "post_id": 42379566, "comment_id": 71918268, "body": "thanks for the reply.  BTW, i have to use this format to make it work : user_input.match( /string_a|string_b/ ) thx again~"}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 2, "last_activity_date": 1487717720, "creation_date": 1487717720, "answer_id": 42379566, "question_id": 42378877, "link": "https://stackoverflow.com/questions/42378877/ruby-multiple-string-match-with/42379566#42379566", "title": "ruby multiple string match with", "body": "<p>You can do a regex match using <code>|</code> (or):</p>\n\n<pre><code>if user_input.match? /string_a|string_b|string_c|string_d_keyword/\n  \u2026\nend\n</code></pre>\n\n<p>If your strings are in an array you can use <code>Regex.union</code> to convert them to the corresponding regex:</p>\n\n<pre><code>if user_input.match? Regex.union(strings)\n  \u2026\nend\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 1160080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb88019e023439bad8008f70d826bafa?s=128&d=identicon&r=PG", "display_name": "ioojimooi", "link": "https://stackoverflow.com/users/1160080/ioojimooi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "closed_date": 1487747767, "accepted_answer_id": 42379566, "answer_count": 2, "score": 1, "last_activity_date": 1487748342, "creation_date": 1487714637, "question_id": 42378877, "link": "https://stackoverflow.com/questions/42378877/ruby-multiple-string-match-with", "closed_reason": "Duplicate", "title": "ruby multiple string match with", "body": "<p>i've written a few lines of code like this :</p>\n\n<pre><code>if( (user_input.include?('string_a') || \n    (user_input.include? ('string_b')) || \n    (user_input.include?('string_c')) ) \n    &amp;&amp; \n    user_input.include?('string_d_keyword'))\n    ....\nend # if\n</code></pre>\n\n<p>is there any function which can simplify the \"multiple or string match\" by taking multiple arguments and look like this ?</p>\n\n<pre><code>if( (user_input.multi_include_or?('string_a','string_b','string_c')) \n    &amp;&amp; (user_input.include?('string_d_keyword')))\n.....\nend # if\n</code></pre>\n\n<p>i hope to do these all in a single line and so i've leave out the option of \"case when\".</p>\n\n<p>Thanks~</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "csv", "logic"], "comments": [{"owner": {"reputation": 766, "user_id": 2671192, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Xkv5l.jpg?s=128&g=1", "display_name": "Haider Ali", "link": "https://stackoverflow.com/users/2671192/haider-ali"}, "edited": false, "score": 0, "creation_date": 1487714685, "post_id": 42378753, "comment_id": 71907016, "body": "Send filtered params to your csv link and filter results before download"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1487716717, "post_id": 42378753, "comment_id": 71907916, "body": "Hi and welcome to Stack Overflow. It&#39;s really hard for us to help debug a verbal description of your code. Can you show us what you&#39;ve actually tried and all the relevant snippets? We can then copy/paste and alter that code and show you examples that might work for you :)"}], "answers": [{"tags": [], "owner": {"reputation": 4049, "user_id": 1083428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000f45b685d4d6ff1a171676512c382e?s=128&d=identicon&r=PG", "display_name": "Pavel Evstigneev", "link": "https://stackoverflow.com/users/1083428/pavel-evstigneev"}, "is_accepted": false, "score": 0, "last_activity_date": 1499807872, "last_edit_date": 1499807872, "creation_date": 1487746528, "answer_id": 42384621, "question_id": 42378753, "link": "https://stackoverflow.com/questions/42378753/csv-export-based-on-ajax/42384621#42384621", "title": "CSV export based on ajax", "body": "<p>Probably you should use something like <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">https://github.com/activerecord-hackery/ransack</a> for making safe search. Then in your views:</p>\n\n<pre><code>= form_for(@search) do |f|\n  = f.label :gender\n  = f.select :gender, [\"Male\", \"Female\"]\n  = f.submit \"Filter\"\n# table of users\n= link_to \"Download CSV\", students_path(format: 'csv'), class: 'download-csv'\n</code></pre>\n\n<p>One JS code will reload table whenever filters changed, and other code will update download link params</p>\n\n<pre><code>$(document).ready(function () {\n  $('.download-csv').on('click', function (e) {\n    e.preventDefault();\n    var link = this;\n    var formData = $('form').serialize();\n    link.href = link.href.toString().replace(/\\?.+$/, \"?\" + formData + \"&amp;format=csv\");\n    location.href = link.href;\n  });\n);\n</code></pre>\n\n<p>And in your controller you just render CSV when <code>request[:format] == 'csv'</code></p>\n"}], "owner": {"reputation": 123, "user_id": 7351450, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55599da0718129c5a87e69d9937a203d?s=128&d=identicon&r=PG&f=1", "display_name": "brandoncodes", "link": "https://stackoverflow.com/users/7351450/brandoncodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499807872, "creation_date": 1487714195, "question_id": 42378753, "link": "https://stackoverflow.com/questions/42378753/csv-export-based-on-ajax", "title": "CSV export based on ajax", "body": "<p>So I have a problem which I've been stuck on. I have a page, so say a table of student's and all their information: grades, gender etc. Now I have a feature on that page that can filter out a attribute. So, through ajax I re-render the table if I want to just see all the boys. Now I have a download csv link at the bottom of the page, but I want to make it dynamic based on the filtering. I am not sure how to go about this.</p>\n\n<p>I've tried using gon, gon.watch but to no success.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri", "railsinstaller-windows"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1487716855, "post_id": 42378691, "comment_id": 71907978, "body": "Hi and welcome to Stack Overflow. Instead of linking to an image, please edit your question and then copy/paste the text in. That&#39;s for several reasons: 1) we can then copy/paste text out of it to do searches on the error messages 2) links to external sites go stale very quickly, and we want Stack Overflow questions to last forever (in case somebody else has the same problem as you, they can find this question and use the answers to help them solve it)."}], "answers": [{"tags": [], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "is_accepted": false, "score": 0, "last_activity_date": 1488239592, "creation_date": 1488239592, "answer_id": 42497932, "question_id": 42378691, "link": "https://stackoverflow.com/questions/42378691/cannot-load-such-file-nokogiri/42497932#42497932", "title": "cannot load such file -- nokogiri", "body": "<p>Try running <code>$ gem install nokogiri</code> in Cygwin or whatever CLI you're using in your environment. This should install the <code>nokogiri</code> gem for you and (hopefully) cause the error to disappear.</p>\n"}], "owner": {"reputation": 117, "user_id": 6746477, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d458afe47a863ad031b214bf686801b2?s=128&d=identicon&r=PG&f=1", "display_name": "Gaka", "link": "https://stackoverflow.com/users/6746477/gaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 497, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488239592, "creation_date": 1487713934, "last_edit_date": 1488226509, "question_id": 42378691, "link": "https://stackoverflow.com/questions/42378691/cannot-load-such-file-nokogiri", "title": "cannot load such file -- nokogiri", "body": "<p>I installed Ruby on Rals using RailsInstaller for Windows (I have Windows 10)\nwhen I try to run the first application, I have an error after rails server:</p>\n\n<pre><code>    C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/nokogiri-1.6.5-x86-mingw32/lib/nokogiri.rb:29:in `require': cannot load such file -- nokogiri/nokogiri (LoadError)\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/nokogiri-1.6.5-x86-mingw32/lib/nokogiri.rb:29:in `rescue in &lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/nokogiri-1.6.5-x86-mingw32/lib/nokogiri.rb:25:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/loofah-2.0.1/lib/loofah.rb:3:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/loofah-2.0.1/lib/loofah.rb:3:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/rails-html-sanitizer-1.0.1/lib/rails-html-sanitizer.rb:2:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/rails-html-sanitizer-1.0.1/lib/rails-html-sanitizer.rb:2:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/sanitize_helper.rb:3:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/sanitize_helper.rb:3:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/text_helper.rb:32:in `&lt;module:TextHelper&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/text_helper.rb:29:in `&lt;module:Helpers&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/form_tag_helper.rb:8:in `&lt;module:ActionView&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/form_tag_helper.rb:6:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/form_helper.rb:4:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers/form_helper.rb:4:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers.rb:50:in `&lt;module:Helpers&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers.rb:4:in `&lt;module:ActionView&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionview-4.2.0/lib/action_view/helpers.rb:3:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/legacy_asset_tag_helper.rb:7:in `&lt;module:LegacyAssetTagHelper&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/legacy_asset_tag_helper.rb:6:in `&lt;module:Rails&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/legacy_asset_tag_helper.rb:4:in `&lt;module:Sprockets&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/legacy_asset_tag_helper.rb:3:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/helper.rb:45:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/helper.rb:45:in `&lt;module:Helper&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/helper.rb:7:in `&lt;module:Rails&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/helper.rb:6:in `&lt;module:Sprockets&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/helper.rb:5:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/railtie.rb:6:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sprockets-rails-2.2.2/lib/sprockets/railtie.rb:6:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sass-rails-5.0.1/lib/sass/rails/railtie.rb:2:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sass-rails-5.0.1/lib/sass/rails/railtie.rb:2:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sass-rails-5.0.1/lib/sass/rails.rb:11:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sass-rails-5.0.1/lib/sass/rails.rb:11:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sass-rails-5.0.1/lib/sass-rails.rb:1:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/sass-rails-5.0.1/lib/sass-rails.rb:1:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:91:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:86:in `each'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:86:in `block in require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:75:in `each'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler/runtime.rb:75:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/bundler-1.13.6/lib/bundler.rb:106:in `require'\n    from C:/Sites/todo/config/application.rb:7:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:78:in `require'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:78:in `block in server'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>How can I fix it?What are the reasons of errors \"cannot load such file\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "edited": false, "score": 1, "creation_date": 1487712219, "post_id": 42378237, "comment_id": 71905586, "body": "That seems to have worked, why would that not be automatically entered when generating a project?"}, {"owner": {"reputation": 857, "user_id": 652927, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65b19864a18ab22b65aa191aa45792ba?s=128&d=identicon&r=PG", "display_name": "Rumel", "link": "https://stackoverflow.com/users/652927/rumel"}, "reply_to_user": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "edited": false, "score": 0, "creation_date": 1487723140, "post_id": 42378237, "comment_id": 71910167, "body": "I&#39;m not sure on that. I figured you were on an old app that you updated and it dropped that setting as being a default."}], "tags": [], "owner": {"reputation": 857, "user_id": 652927, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65b19864a18ab22b65aa191aa45792ba?s=128&d=identicon&r=PG", "display_name": "Rumel", "link": "https://stackoverflow.com/users/652927/rumel"}, "is_accepted": true, "score": 1, "last_activity_date": 1487712089, "creation_date": 1487712089, "answer_id": 42378237, "question_id": 42378122, "link": "https://stackoverflow.com/questions/42378122/rails-fingerprint-not-appending-to-path-in-production/42378237#42378237", "title": "Rails fingerprint not appending to path in production", "body": "<p>Make sure you have <code>config.assets.digest = true</code> in your production.rb</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 3778888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1834428e771cb066bbd491d56071aa70?s=128&d=identicon&r=PG&f=1", "display_name": "chibeepatag", "link": "https://stackoverflow.com/users/3778888/chibeepatag"}, "is_accepted": false, "score": 0, "last_activity_date": 1603883962, "creation_date": 1603883962, "answer_id": 64571758, "question_id": 42378122, "link": "https://stackoverflow.com/questions/42378122/rails-fingerprint-not-appending-to-path-in-production/64571758#64571758", "title": "Rails fingerprint not appending to path in production", "body": "<p>This happened to us.  Things I discovered:</p>\n<ol>\n<li>assets have to be precompiled on the web server and the app server. Why? <a href=\"https://stackoverflow.com/questions/16344022/why-do-i-need-to-precompile-rails-assets-on-app-servers-and-not-web-servers-only\">See here.</a></li>\n<li>assets were not compiling properly on the app server by default in capistrano. capistrano only does this for role web. See <a href=\"https://github.com/capistrano/capistrano/issues/128\" rel=\"nofollow noreferrer\">here</a></li>\n<li>running rake assets:precompile does not produce any output or errors if node is not updated or yarn is not installed. Both are required. (this is where we got stuck)</li>\n<li>I had to manually run rake assets:precompile on the app server to get things to work.</li>\n</ol>\n"}], "owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 42378237, "answer_count": 2, "score": 1, "last_activity_date": 1603883962, "creation_date": 1487711714, "question_id": 42378122, "link": "https://stackoverflow.com/questions/42378122/rails-fingerprint-not-appending-to-path-in-production", "title": "Rails fingerprint not appending to path in production", "body": "<p>I have a application that does not append the fingerprint to my assets in production, other environments seem to work fine</p>\n\n<p>I am using Rails 5 and Ruby 2.3.3</p>\n\n<p>This is the code I think is relevant</p>\n\n<pre><code>&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n  &lt;%= favicon_link_tag 'block_m_icon.png', rel: 'icon', type: 'image/png' %&gt;\n  &lt;title&gt;&lt;%= render partial: \"shared/brand_oit_appdev/title\" %&gt;&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all' %&gt;\n  &lt;%= javascript_include_tag 'application' %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n  &lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;\n  &lt;!--[if lt IE 9]&gt;\n    &lt;script src=\"https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://oss.maxcdn.com/respond/1.4.2/respond.min.js\"&gt;&lt;/script&gt;\n  &lt;![endif]--&gt;\n&lt;/head&gt;\n\nRails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  config.assets.enabled = true\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.public_file_server.enabled = true || ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Mount Action Cable outside main process or domain\n  # config.action_cable.mount_path = nil\n  # config.action_cable.url = 'wss://example.com/cable'\n  # config.action_cable.allowed_request_origins = [ 'http://example.com', /http:\\/\\/example.*/ ]\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  config.log_tags = [ :request_id ]\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Use a real queuing backend for Active Job (and separate queues per environment)\n  # config.active_job.queue_adapter     = :resque\n  # config.active_job.queue_name_prefix = \"walk-in-class_#{Rails.env}\"\n  config.action_mailer.perform_caching = false\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Use a different logger for distributed setups.\n  # require 'syslog/logger'\n  # config.logger = ActiveSupport::TaggedLogging.new(Syslog::Logger.new 'app-name')\n\n  if ENV[\"RAILS_LOG_TO_STDOUT\"].present?\n    logger           = ActiveSupport::Logger.new(STDOUT)\n    logger.formatter = config.log_formatter\n    config.logger = ActiveSupport::TaggedLogging.new(logger)\n  end\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>I get the same result whether I am local or on my apache server using passenger</p>\n\n<p>I have run </p>\n\n<pre><code>bundle exec rake assets:precompile RAILS_ENV=production\n</code></pre>\n\n<p>The problem remains no matter what I do, I have been searching the internet for a while now, any help on getting the fingerprint on my assets?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487711364, "post_id": 42377994, "comment_id": 71905062, "body": "This question makes no sense at all - what are you trying to acheive and more importantly why?"}], "answers": [{"comments": [{"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487712564, "post_id": 42378100, "comment_id": 71905777, "body": "Thanks @Anthony. If i want to create a method to get job_name how could i do that in model or can i directly do that in controller then save result to instance variable and call in JSON?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487712764, "post_id": 42378100, "comment_id": 71905902, "body": "You could do it in the concern or the model, see the new edit."}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487774762, "post_id": 42378100, "comment_id": 71936577, "body": "I created the method but keep getting job_name null"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487774822, "post_id": 42378100, "comment_id": 71936619, "body": "is <code>type</code> a string in the database or an int?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487776388, "post_id": 42378100, "comment_id": 71937806, "body": "then in the <code>job_name</code> method, do <code>job_mapping[type.to_s]</code>"}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487777314, "post_id": 42378100, "comment_id": 71938454, "body": "still getting null. When I put byebug in method. i am getting column value but when i look for job_mapping[type.to_s] i get null"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1487777731, "post_id": 42378100, "comment_id": 71938778, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/136367/discussion-between-anthony-and-user4432432432\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 0, "last_activity_date": 1487777872, "last_edit_date": 1487777872, "creation_date": 1487711635, "answer_id": 42378100, "question_id": 42377994, "link": "https://stackoverflow.com/questions/42377994/map-concern-hash-keys-with-the-table-column/42378100#42378100", "title": "map concern hash keys with the table column", "body": "<p>You could just decouple the <code>#job</code> method and use it like this (if I'm understanding you correctly):</p>\n\n<pre><code>module Employee\n  extend ActiveSupport::Concern\n\n  included do\n    def job\n      job_mapping[:\"#{@job}\"]\n    end\n\n    def job_mapping\n      {\n        '0' =&gt; 'A',\n        '1' =&gt; 'B',\n        '2' =&gt;  'C'\n      }\n    end\n\n    def job_name\n      job_mapping[type.to_s]\n    end\n  end\nend\n\n\ncompany = Company.find(some_id)\njob_name = company.job_name\n</code></pre>\n\n<p>On an unrelated note, <code>freeze</code>ing something that is in an instance method is a code smell, you probably want to promote that to a constant if possible.</p>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 42378100, "answer_count": 1, "score": 0, "last_activity_date": 1487777872, "creation_date": 1487711200, "question_id": 42377994, "link": "https://stackoverflow.com/questions/42377994/map-concern-hash-keys-with-the-table-column", "title": "map concern hash keys with the table column", "body": "<p>I created a concern in model</p>\n\n<pre><code>module Employee\n  extend ActiveSupport::Concern\n\n  included do\n    def job\n      job_hash = {\n        '0': 'A',\n        '1': 'B',\n        '2': 'C'\n       }.freeze\n       job_hash[:\"#{@job}\"]\n  end\nend\n</code></pre>\n\n<p>I have model</p>\n\n<pre><code>class Company &lt; ActiveRecord::Base\n  self.table_name = 'Jobs'\n  include Employee\nend\n</code></pre>\n\n<p>Jobs table has column type that has values 0, 1, 2 \nHow can i map the values from hash (0,1,2) in concern with column type and return the string value associated with it? so if the user type is 1 then return B</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1487709308, "post_id": 42377389, "comment_id": 71903797, "body": "you use <code>map</code> to do such things in ruby"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487713769, "post_id": 42377537, "comment_id": 71906481, "body": "It&#39;s possible that someone downvoted because the keys of <code>atts</code> are symbols but the desired result has those keys converted to strings."}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "edited": false, "score": 0, "creation_date": 1487746177, "post_id": 42377537, "comment_id": 71917507, "body": "... which is what the optional <code>to_s</code> in the end is for; also, really, I believe the question whether it is a symbol or string is not the primary reason for asking this question. ;) Love Ruby for its expressiveness, being able to make such short solutions."}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "edited": false, "score": 0, "creation_date": 1487793456, "post_id": 42377537, "comment_id": 71949117, "body": "Yeah, no biggie, it was nice to have an accepted answer with <i>0</i> net votes. ;)"}], "tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": true, "score": 1, "last_activity_date": 1487709625, "creation_date": 1487709625, "answer_id": 42377537, "question_id": 42377389, "link": "https://stackoverflow.com/questions/42377389/converting-a-ruby-hash-to-another-collection/42377537#42377537", "title": "Converting a ruby hash to another collection", "body": "<p>Try this one:</p>\n\n<pre><code>atts = {\n    key1: \"value1\",\n    key2: \"value2\"\n}\n\ndef custom_atts(atts)\n\n  Hash[ atts.keys.map { |key|\n          [ key, {\n              string_value: atts[key],\n              data_type: \"String\" } ] } ]\n\nend\n\nputs custom_atts(atts).inspect\n\n# {:key1=&gt;\n#  {:string_value=&gt;\"value1\", \n#   :data_type=&gt;\"String\"}, \n#  :key2=&gt;{\n#    :string_value=&gt;\"value2\", \n#    :data_type=&gt;\"String\"}}\n</code></pre>\n\n<p>If your new keys should be strings instead of symbols, then change <code>key</code> to <code>key.to_s</code> inside the map.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1487712244, "creation_date": 1487712244, "answer_id": 42378277, "question_id": 42377389, "link": "https://stackoverflow.com/questions/42377389/converting-a-ruby-hash-to-another-collection/42378277#42378277", "title": "Converting a ruby hash to another collection", "body": "<pre><code>atts.each_with_object({}) { |(k,v),h| h[k.to_s] = { string_value: v, data_type: v.class } }\n  #=&gt; {\"key1\"=&gt;{:string_value=&gt;\"value1\", :data_type=&gt;String},\n  #    \"key2\"=&gt;{:string_value=&gt;\"value2\", :data_type=&gt;String}} \n</code></pre>\n"}], "owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 42377537, "answer_count": 2, "score": -1, "last_activity_date": 1487712244, "creation_date": 1487709144, "question_id": 42377389, "link": "https://stackoverflow.com/questions/42377389/converting-a-ruby-hash-to-another-collection", "title": "Converting a ruby hash to another collection", "body": "<pre><code>atts = {\n    key1: \"value1\",\n    key2: \"value2\"\n}\n</code></pre>\n\n<p>Which should then produce the following:</p>\n\n<pre><code>custom_atts = {\n    \"key1\" =&gt; {\n    string_value: \"value1\",\n    data_type: \"String\"\n    },\n    \"key2\" =&gt; {\n    string_value: \"value2\",\n    data_type: \"String\"\n    }\n}\n</code></pre>\n\n<p>So I want to create a function that will convert atts into custom_atts.</p>\n\n<pre><code>def custom_atts(atts)\n\nend\n</code></pre>\n\n<p>I can loop through hash values like this:</p>\n\n<pre><code>h.each do |key, value|\n  puts key\n  value.each do |k,v|\n    puts k\n    puts v\n  end\nend\n</code></pre>\n\n<p>But not sure how to create a hash with a hash in it, while in a loop.</p>\n"}, {"tags": ["ruby", "watir-webdriver"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1487709444, "post_id": 42377217, "comment_id": 71903894, "body": "that does not make sense. either it is disabled (you can&#39;t click it) or it&#39;s not. what you can do is just trigger a click via javascript execution."}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1487710768, "creation_date": 1487710768, "answer_id": 42377861, "question_id": 42377217, "link": "https://stackoverflow.com/questions/42377217/ruby-watir-webdriver-clicking-on-a-button-that-is-disabled/42377861#42377861", "title": "Ruby - Watir-Webdriver - Clicking on a button that is &#39;disabled&#39;", "body": "<p>Given that you are using Watir-Webdriver v0.6.10, the first thing I would recommend is upgrading to latest for Watir (where Watir v6.2.0 is the latest version of Watir-Webdriver), Selenium-WebDriver and drivers. There may have been fixes that address your root problem of the enabled element being detected as disabled.</p>\n\n<p>If that does not work, providing a reproducible test case so that Watir and/or Selenium can be fixed would be the next step.</p>\n\n<p>As @phoet mentioned in the comments, if you really just want to ignore all of the assertions, you can directly fire the click event for the element:</p>\n\n<pre><code>element.fire_event('onclick')\n</code></pre>\n"}], "owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 42377861, "answer_count": 1, "score": -1, "last_activity_date": 1487715734, "creation_date": 1487708596, "last_edit_date": 1487715734, "question_id": 42377217, "link": "https://stackoverflow.com/questions/42377217/ruby-watir-webdriver-clicking-on-a-button-that-is-disabled", "title": "Ruby - Watir-Webdriver - Clicking on a button that is &#39;disabled&#39;", "body": "<p>The version of watir-webdriver I am using (0.6.10) has an #assert_enabled method that executes of any #click you call using watir-webdriver.</p>\n\n<p>I want to click on a button and I don't care that watir-webdriver thinks it is disabled (it's not even though #disabled? returns true for the element).</p>\n\n<p>What can I do? </p>\n\n<p>Disabled is in quotes because watir-webdriver 0.6.10 incorrectly returns true for #disabled? sometimes.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1487709814, "post_id": 42376985, "comment_id": 71904114, "body": "because you are trying to call <code>[]</code> on <code>nil</code>. that is because you assign <code>arr</code> twice, in your last assertion it becomes <code>nil</code>."}, {"owner": {"reputation": 13, "user_id": 7394636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CMJP4.jpg?s=128&g=1", "display_name": "0sfh", "link": "https://stackoverflow.com/users/7394636/0sfh"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1487711428, "post_id": 42376985, "comment_id": 71905094, "body": "please specify clearly, unable to understand your comment"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7601506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7d5a528c3d80536133ebe6736e3dc4?s=128&d=identicon&r=PG&f=1", "display_name": "Antigrapist", "link": "https://stackoverflow.com/users/7601506/antigrapist"}, "is_accepted": false, "score": -1, "last_activity_date": 1487716674, "creation_date": 1487716674, "answer_id": 42379327, "question_id": 42376985, "link": "https://stackoverflow.com/questions/42376985/undefined-method-error-in-ruby-1-9-3/42379327#42379327", "title": "Undefined Method error in Ruby 1.9.3", "body": "<p>when arr = nil in your third test, you can't call arr[0], because nil doesn't have a [] method. Your check on line 13 should instead be <code>if arr == nil</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7394636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CMJP4.jpg?s=128&g=1", "display_name": "0sfh", "link": "https://stackoverflow.com/users/7394636/0sfh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487716674, "creation_date": 1487707734, "question_id": 42376985, "link": "https://stackoverflow.com/questions/42376985/undefined-method-error-in-ruby-1-9-3", "title": "Undefined Method error in Ruby 1.9.3", "body": "<pre class=\"lang-ruby prettyprint-override\"><code>require \"test/unit/assertions\"\ninclude Test::Unit::Assertions\n\ndef key_for_min_value(hash)\n  arr = Array.new\n  arr = hash.min_by{ |key,value| value}\n  if arr[0]==nil\n  return nil\n  else return arr[0]\n  end\nend\n\n\nassert_equal key_for_min_value({\"k\" =&gt; 2, \"h\" =&gt; 3, \"j\" =&gt; 1}), \"j\"\nassert_equal key_for_min_value({\"o\" =&gt; 0, \"z\" =&gt; -2, \"j\" =&gt; 1}), \"z\"\nassert_equal key_for_min_value({}), nil\n</code></pre>\n\n<p>This code is returning the following error.Why?</p>\n\n<p>test1.rb:7:in <code>key_for_min_value': undefined method</code>[]' for nil:NilClass (NoMethodError)\n    from test1.rb:13:in `'</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1487709275, "post_id": 42376582, "comment_id": 71903774, "body": "Grab duplicates"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1487712559, "post_id": 42376582, "comment_id": 71905774, "body": "Your question is not clear. Do you want to remove all elements of <code>array</code> that appear more than once? If so, say that."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1487706731, "post_id": 42376648, "comment_id": 71902373, "body": "That won&#39;t work if I have an unknown array of strings."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1487706786, "post_id": 42376648, "comment_id": 71902407, "body": "Clarify your question, and then I&#39;ll update the answer."}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 0, "last_activity_date": 1487706761, "last_edit_date": 1487706761, "creation_date": 1487706666, "answer_id": 42376648, "question_id": 42376582, "link": "https://stackoverflow.com/questions/42376582/remove-matching-string-in-array/42376648#42376648", "title": "Remove matching string in array", "body": "<p>You can use <code>delete_if</code> to remove an item matching a string: </p>\n\n<pre><code>array=[\"dog\",\"cat\",\"monkey\",\"cat\",\"bear\"]\narray.delete_if{|item| item == 'dog'}\n=&gt; [\"cat\", \"monkey\", \"cat\", \"bear\"]\n</code></pre>\n\n<p>You can also use the simpler <code>delete</code>: </p>\n\n<pre><code>array.delete('cat')\n=&gt; [\"monkey\", \"bear\"] \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-delete_if\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.0/Array.html#method-i-delete_if</a></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487713507, "post_id": 42377639, "comment_id": 71906341, "body": "Using <code>count</code> for each element of an array of size n is relatively inefficient: O(n^2). You&#39;re better off getting the counts first, using an O(n) method. One of the latter is to use a counting hash, as I did in my answer; another is to use the method <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a>."}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487746270, "post_id": 42377639, "comment_id": 71917562, "body": "@CarySwoveland, thanks for your comment, if you read my answer you will see that I gave 3 possible ways to solve this, including complexity; two of which use a pre-hashed result."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487749519, "post_id": 42377639, "comment_id": 71919277, "body": "My apologies. I didn&#39;t read your entire answer, which is quite a good one.  In general, rather than saying, &quot;Here&#39;s solution #1. Here&#39;s solution #2, which is better than solution #1&quot;, consider saying nothing about #1. Showing inferior solutions just weakens your answers (imo). You can of course chain what you have: <code>array.each_with_object({}) { |e,count| count[e] = (count[e]||0) + 1 }.delete_if { |key, value| value&gt;1 }.keys</code>, which is perhaps worth mentioning."}, {"owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1487793559, "post_id": 42377639, "comment_id": 71949166, "body": "I see what you mean, @CarySwoveland, and you are right in a way, certainly. In fact, I intentionally did it this way because in plenty of cases, where there truly are only a few values, having a very short and succinct solution (a one-liner, or half-liner like here) can be useful."}], "tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": false, "score": 1, "last_activity_date": 1487710346, "last_edit_date": 1487710346, "creation_date": 1487710018, "answer_id": 42377639, "question_id": 42376582, "link": "https://stackoverflow.com/questions/42376582/remove-matching-string-in-array/42377639#42377639", "title": "Remove matching string in array", "body": "<p>Try this:</p>\n\n<pre><code>array=[\"dog\",\"cat\",\"monkey\",\"cat\",\"bear\"]\n\nputs array.reject { |e| array.count(e)&gt;1 }\n\n# dog\n# monkey\n# bear\n</code></pre>\n\n<p>It runs in <code>O(n\u00b2)</code>, so don't use it for your DNA research, but for smallish number of elements it should be fine.</p>\n\n<p>To make it faster, use a prepared hash table:</p>\n\n<pre><code>array=[\"dog\",\"cat\",\"monkey\",\"cat\",\"bear\"]\n\ncount = {}\narray.each { |e| count[e] = (count[e]||0) + 1 }\n\nputs array.reject { |e| count[e]&gt;1 }\n\n# dog\n# monkey\n# bear\n</code></pre>\n\n<p>I do not know what kind of implementation <code>Hash</code> uses, so can't give a true complexity, but I would expect it be somewhere between <code>O(n)</code> and <code>O(n*logn)</code>.</p>\n\n<p>Slight variation just for fun:</p>\n\n<pre><code>array=[\"dog\",\"cat\",\"monkey\",\"cat\",\"bear\"]\n\ncount = {}\narray.each { |e| count[e] = (count[e]||0) + 1 }\n\ncount.delete_if { |key, value| value&gt;1 }\n\nputs count.keys\n\n# dog\n# monkey\n# bear\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1487714614, "post_id": 42378447, "comment_id": 71906978, "body": "Cary for the win! I love it. Thank you."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1487712880, "creation_date": 1487712880, "answer_id": 42378447, "question_id": 42376582, "link": "https://stackoverflow.com/questions/42376582/remove-matching-string-in-array/42378447#42378447", "title": "Remove matching string in array", "body": "<p>I assume you wish to remove all elements of array that appear more than once.</p>\n\n<pre><code>array - array.each_with_object(Hash.new(0)) { |s,h| h[s] += 1 }.\n              select { |_,v| v &gt; 1 }.\n              keys\n  #=&gt; [\"dog\", \"monkey\", \"bear\"]\n</code></pre>\n\n<p>The steps are as follows.</p>\n\n<pre><code>g = array.each_with_object(Hash.new(0)) { |s,h| h[s] += 1 }\n  #=&gt; {\"dog\"=&gt;1, \"cat\"=&gt;2, \"monkey\"=&gt;1, \"bear\"=&gt;1} \nh = g.select { |_,v| v &gt; 1 }\n  #=&gt; {\"cat\"=&gt;2} \na = h.keys\n  #=&gt; [\"cat\"] \narray - a\n  #=&gt; [\"dog\", \"monkey\", \"bear\"] \n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "closed_date": 1487796582, "accepted_answer_id": 42378447, "answer_count": 3, "score": -2, "last_activity_date": 1487712880, "creation_date": 1487706437, "last_edit_date": 1487709520, "question_id": 42376582, "link": "https://stackoverflow.com/questions/42376582/remove-matching-string-in-array", "closed_reason": "Needs details or clarity", "title": "Remove matching string in array", "body": "<pre><code> array=[\"dog\",\"cat\",\"monkey\",\"cat\",\"bear\"]\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>    array.uniq\n    [\"dog\", \"cat\", \"monkey\", \"bear\"]  \n</code></pre>\n\n<p>I also tried </p>\n\n<pre><code> array.inject{|memo,word| word==memo}\n</code></pre>\n\n<p>but that did not work either. I'm stumped.</p>\n\n<p>I'm sure there is a more elegant solution:\n Find dupes, then delete words in the array that are in the dupes array</p>\n\n<pre><code>dupes=array.group_by {|e| e}.map { |e| e[0] if e[1][1]}.compact\n\narray.delete_if{|word| dupes.include?(word)}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise"], "comments": [{"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1487730280, "post_id": 42376332, "comment_id": 71912137, "body": "Have you read <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Test-controllers-with-Rails-3-and-4-(and-RSpec)\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>"}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1487730369, "post_id": 42376332, "comment_id": 71912160, "body": "also, where is the <code>login_with</code> method used?"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1487769444, "post_id": 42376332, "comment_id": 71932586, "body": "@zetetic updated the rspec method for you... <code>login_with</code> is there."}], "answers": [{"tags": [], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "is_accepted": false, "score": 2, "last_activity_date": 1487771290, "creation_date": 1487771290, "answer_id": 42393293, "question_id": 42376332, "link": "https://stackoverflow.com/questions/42376332/devise-rspec-expected-the-response-to-have-a-success-status-code-2xx-but-it-wa/42393293#42393293", "title": "Devise Rspec expected the response to have a success status code (2xx) but it was 302", "body": "<p>After alot of tinkering I finally got my tests to pass.  I ended up creating a company within my user Factory:</p>\n\n<pre><code>after(:build) do |user|\n  user.company = create(:company)\nend\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487771290, "creation_date": 1487705596, "last_edit_date": 1487769421, "question_id": 42376332, "link": "https://stackoverflow.com/questions/42376332/devise-rspec-expected-the-response-to-have-a-success-status-code-2xx-but-it-wa", "title": "Devise Rspec expected the response to have a success status code (2xx) but it was 302", "body": "<p>I have a <code>user</code> which I'm creating with FactoryGirl which needs to have a <code>company</code> in order to login successfully to my <code>root_url</code>.</p>\n\n<p>I'm not having any luck at all stubbing the user method to login.  I've followed <a href=\"http://willschenk.com/setting-up-testing/\" rel=\"nofollow noreferrer\">this tutorial</a> for the Devise portion of the user and needed to amend it a little since my user also requires a <code>company</code> to be associated to it.</p>\n\n<p>I've now created a new model/controller called <code>Scans</code> that is behind Devise's <code>authenticate</code> filter and my first pass at testing it failing with: </p>\n\n<pre><code>5) ScansController GET #show returns http success\n     Failure/Error: expect(response).to have_http_status(:success)\n       expected the response to have a success status code (2xx) but it was 302\n     # ./spec/controllers/scans_controller_spec.rb:32:in `block (3 levels) in &lt;top (required)&gt;'\n     # ./spec/spec_helper.rb:127:in `block (3 levels) in &lt;top (required)&gt;'\n     # ./spec/spec_helper.rb:126:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>The spec is currently:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe ScansController, type: :controller do\n\n  before(:all) do\n    @user = build(:user)\n    @company = build(:company)\n    @device = build(:device)\n    @scan = build(:scan)\n  end\n\n  describe \"GET #show\" do\n    it \"returns http success\" do\n      login_with @user\n      get :show, :device_id =&gt; @device.id, :id =&gt; @scan.id\n      expect(response).to render_template(:show)\n    end\n  end\n</code></pre>\n\n<p>I'm doing a <code>puts</code> on the response, because I want to see what's being returned:</p>\n\n<pre><code>ScansController\n  GET #show\n302\n{\"X-Frame-Options\"=&gt;\"SAMEORIGIN\", \"X-XSS-Protection\"=&gt;\"1; mode=block\", \"X-Content-Type-Options\"=&gt;\"nosniff\", \"Location\"=&gt;\"http://test.host/login\", \"Content-Type\"=&gt;\"text/html; charset=utf-8\"}\n#&lt;Rack::BodyProxy:0x007fb52a7407c0&gt;\n</code></pre>\n\n<p>So, I'm being redirected back to my login page, which tells me that my <code>login_with</code> method in <code>ControllerHelpers</code> is not working correctly:</p>\n\n<pre><code>module ControllerHelpers\n  def login_with(user = double('user'), scope = :user)\n    current_user = \"current_#{scope}\".to_sym\n    if user.nil?\n      allow(request.env['warden']).to receive(:authenticate!).and_throw(:warden, {:scope =&gt; scope})\n      allow(controller).to receive(current_user).and_return(nil)\n    else\n      allow(request.env['warden']).to receive(:authenticate!).and_return(user)\n      allow(controller).to receive(current_user).and_return(user)\n    end\n  end\nend\n</code></pre>\n\n<p>Now, my login functionality does currently work (testing manually).  The first controller that fires after <code>ApplicationController</code> is <code>PagesController#home</code>:</p>\n\n<pre><code>def home\n  if current_user &amp;&amp; current_user.company\n     verify_subscription\n     ....\n  else\n     redirect_to new_company_path\n  end\nend\n</code></pre>\n\n<p><em>If <code>verify_subscription</code> fails the user is also sent to <code>new_company_path</code>, so that doesn't seem to be related to this issue.</em></p>\n\n<p>Based off my rudimentary rspec capabilities, am I right to assume that I'm not even getting close to mimicking a login? If not, what am I doing wrong?</p>\n"}, {"tags": ["arrays", "ruby", "flatten", "sub-array"], "comments": [{"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1487707067, "post_id": 42376299, "comment_id": 71902571, "body": "Do you need to check for nested empty arrays, ie <code>[1, [2, 3, []], 4]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1592, "user_id": 7138517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40228125f914cf5ef1ae7df6b98c550d?s=128&d=identicon&r=PG&f=1", "display_name": "Coolness", "link": "https://stackoverflow.com/users/7138517/coolness"}, "is_accepted": false, "score": 2, "last_activity_date": 1487710896, "last_edit_date": 1487710896, "creation_date": 1487706477, "answer_id": 42376591, "question_id": 42376299, "link": "https://stackoverflow.com/questions/42376299/ruby-elegantly-flatten-an-array-but-dont-ignore-empty-sub-arrays/42376591#42376591", "title": "Ruby - elegantly flatten an array but don&#39;t ignore empty sub-arrays", "body": "<p>First map the empty arrays into <code>nil</code>s, then flatten</p>\n\n<pre><code>[1,2,[1,2,3],[]].map{|x| if x.is_a? Array and x.empty? then nil else x end}.flatten\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 7600286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8e3f21918d6e8bae413f43c09abfc32?s=128&d=identicon&r=PG&f=1", "display_name": "jkessluk", "link": "https://stackoverflow.com/users/7600286/jkessluk"}, "edited": false, "score": 0, "creation_date": 1487707456, "post_id": 42376745, "comment_id": 71902798, "body": "This is a bit cleaner than what i had. I changed a == [] to a.any? but similar concept... For some reason I always overlook putting logic into my .map blocks."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 55, "user_id": 7600286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8e3f21918d6e8bae413f43c09abfc32?s=128&d=identicon&r=PG&f=1", "display_name": "jkessluk", "link": "https://stackoverflow.com/users/7600286/jkessluk"}, "edited": false, "score": 2, "creation_date": 1487707580, "post_id": 42376745, "comment_id": 71902886, "body": "@jkessluk won&#39;t a.any? choke on items which aren&#39;t arrays?"}, {"owner": {"reputation": 55, "user_id": 7600286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8e3f21918d6e8bae413f43c09abfc32?s=128&d=identicon&r=PG&f=1", "display_name": "jkessluk", "link": "https://stackoverflow.com/users/7600286/jkessluk"}, "edited": false, "score": 1, "creation_date": 1487707834, "post_id": 42376745, "comment_id": 71903033, "body": "Yes, but I&#39;m using this in a helper method where I&#39;ve already ensured that the item passed through is an array. Otherwise, yes. You&#39;re correct."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 6, "last_activity_date": 1487706995, "creation_date": 1487706995, "answer_id": 42376745, "question_id": 42376299, "link": "https://stackoverflow.com/questions/42376299/ruby-elegantly-flatten-an-array-but-dont-ignore-empty-sub-arrays/42376745#42376745", "title": "Ruby - elegantly flatten an array but don&#39;t ignore empty sub-arrays", "body": "<p>If you don't need to recursively check nested sub-arrays:</p>\n\n<pre><code>[1,[2,3],[],4].map { |a| a == [] ? nil : a }.flatten\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7600286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8e3f21918d6e8bae413f43c09abfc32?s=128&d=identicon&r=PG&f=1", "display_name": "jkessluk", "link": "https://stackoverflow.com/users/7600286/jkessluk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 42376745, "answer_count": 2, "score": 1, "last_activity_date": 1487710896, "creation_date": 1487705477, "question_id": 42376299, "link": "https://stackoverflow.com/questions/42376299/ruby-elegantly-flatten-an-array-but-dont-ignore-empty-sub-arrays", "title": "Ruby - elegantly flatten an array but don&#39;t ignore empty sub-arrays", "body": "<p>Using <code>.flatten</code> is a handy little trick to take an array of sub-arrays and turn it into a single array.\nFor example: <code>[[1,3],2,[5,8]].flatten</code> => <code>[1,3,2,5,8]</code>\nYou can even include nil <code>[1,[2,nil],3].flatten</code> will result in <code>[1,2,nil,3]</code>.</p>\n\n<p>This kind of method is very useful when nesting a <code>.map</code> method, but how would you account for an empty sub-array? For example: <code>[1,[2,3],[],4].flatten</code> would return <code>[1,2,3,4]</code>... but what if I need to keep track of the empty sub array maybe turn the result into <code>[1,2,3,0,4]</code> or <code>[1,2,3,nil,4]</code></p>\n\n<p>Is there any elegant way to do this? Or would I need to write some method to iterate through each individual sub-array and check it one by one?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1487704730, "post_id": 42375857, "comment_id": 71901238, "body": "Nothing is the site is dynamic? None of the content is created by users? Rails favors convention over configuration and this new requirement is definitely outside of that convention, I would be surprised if there is something out here within Rails to help you out. I&#39;m sure a site crawler of sorts will do the trick from the outside (think of it as an automated browser that visits each page, downloads the source, follows each link inside and repeats)"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 2296261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ebaf5e45b69df91d7a80c267cd9bc55e?s=128&d=identicon&r=PG", "display_name": "BigRedEd", "link": "https://stackoverflow.com/users/2296261/bigreded"}, "edited": false, "score": 0, "creation_date": 1489091441, "post_id": 42376397, "comment_id": 72531607, "body": "Thank you for this. Obviously this isn&#39;t the ideal use case for what should have been a pretty straight forward build, but this definitely got me through what I needed.  Appreciate the help."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 2, "last_activity_date": 1489092248, "last_edit_date": 1489092248, "creation_date": 1487705814, "answer_id": 42376397, "question_id": 42375857, "link": "https://stackoverflow.com/questions/42375857/is-there-a-way-to-output-static-files-from-a-ruby-on-rails-build/42376397#42376397", "title": "Is there a way to output static files from a Ruby on Rails build?", "body": "<p>You probably won't have any luck finding a simple gem since this is such an unusual use-case for rails. Your best bet is to use a web crawler which visits all of your pages for you and saves them. A simple way to 'download' the site is with wget:</p>\n\n<pre><code>wget --convert-links --mirror example.com\n</code></pre>\n\n<p>This blog post <a href=\"https://thepugautomatic.com/2014/08/archiving-rails/\" rel=\"nofollow noreferrer\">details the entire process</a>, from crawling your rails site to hosting it statically; it may be helpful to you.</p>\n"}], "owner": {"reputation": 97, "user_id": 2296261, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ebaf5e45b69df91d7a80c267cd9bc55e?s=128&d=identicon&r=PG", "display_name": "BigRedEd", "link": "https://stackoverflow.com/users/2296261/bigreded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 42376397, "answer_count": 1, "score": 2, "last_activity_date": 1489092248, "creation_date": 1487704000, "question_id": 42375857, "link": "https://stackoverflow.com/questions/42375857/is-there-a-way-to-output-static-files-from-a-ruby-on-rails-build", "title": "Is there a way to output static files from a Ruby on Rails build?", "body": "<p>I'm finishing up a build of a rails site and the requirements of the project have changed. Rather than a hosted rails site, I am now to deliver the site as static files. Short of viewing each page's source, saving it out, and adjusting the head file references, is there a gem or a plugin of sorts that can help me output this as static html/css/js files?</p>\n\n<p>Standard rails 5 build. More or less out of the box.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "paperclip"], "comments": [{"owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "edited": false, "score": 1, "creation_date": 1487702777, "post_id": 42375431, "comment_id": 71900177, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/23629888/validation-failed-upload-file-has-an-extension-that-does-not-match-its-contents\">Validation failed: Upload file has an extension that does not match its contents</a>"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1487704790, "post_id": 42375431, "comment_id": 71901274, "body": "You can rename a image.jpg, image.png, but that doesn&#39;t makes it a png, is just a jpg with a png extension."}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487702550, "creation_date": 1487702550, "question_id": 42375431, "link": "https://stackoverflow.com/questions/42375431/paperclip-has-an-extension-that-does-not-match-its-contents", "title": "Paperclip has an extension that does not match its contents", "body": "<p>On localhost images upload successfully but on server it gives an error</p>\n\n<pre><code>has an extension that does not match its content\n</code></pre>\n\n<p>use.rb</p>\n\n<pre><code>has_attached_file :profile_picture, {\nstyles: {\n  original: \"1400&gt;\",\n  medium: \"400&gt;\",\n  thumb: \"150&gt;\"\n},\npath: \"/users/profile_pictures/:hash.:style.:extension\",\nhash_secret: \"um cavalo morto \u00e9 um animal sem vida, um cavalo morto \u00e9 um animal sem vida!\",\nstorage: :s3,\ns3_credentials: S3_CREDENTIALS,\n\n}\n\nvalidates_attachment_content_type :profile_picture, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\n</code></pre>\n\n<p>I can't understand what the issue is</p>\n"}, {"tags": ["ruby", "rufus-scheduler"], "comments": [{"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "reply_to_user": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "edited": false, "score": 1, "creation_date": 1487712512, "post_id": 42375399, "comment_id": 71905735, "body": "I tried doing it the very next minute, but stackoverflow wanted me to wait for somemore time to accept it. Later forgot.  Done now :) Thank yu"}], "answers": [{"comments": [{"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1487703230, "post_id": 42375579, "comment_id": 71900434, "body": "Hey, Thanks for the info, my OS has the correct timezone set.   Also, I did try your code and it would display me the same error message :("}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "edited": false, "score": 0, "creation_date": 1487703300, "post_id": 42375579, "comment_id": 71900475, "body": "My bad, I had used <code>k</code> instead of <code>K</code> . Now the error message is gone. However, Nothing happens after i execute"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 1, "last_activity_date": 1487703013, "creation_date": 1487703013, "answer_id": 42375579, "question_id": 42375399, "link": "https://stackoverflow.com/questions/42375399/windows-rufus-envtz-continent-city-error/42375579#42375579", "title": "Windows: Rufus: `ENV[&#39;TZ&#39;] = &#39;Continent/City&#39; Error", "body": "<p>According to the Wikipedia article linked in the error message, the only valid timezone for India (and thus IST) is <code>Asia/Kolkata</code>.</p>\n\n<p>Thus, if you set </p>\n\n<pre><code>ENV['TZ'] = 'Asia/Kolkata'\n</code></pre>\n\n<p>you should get the correct timezone.</p>\n\n<p>That said, it is probably a good idea to setup your operating system to set the correct local timezone in the first place. This allows other software to work correctly out of the box without requiring specific timezone configuration in every one separately.</p>\n"}], "owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 42375579, "answer_count": 1, "score": 1, "last_activity_date": 1508818253, "creation_date": 1487702451, "question_id": 42375399, "link": "https://stackoverflow.com/questions/42375399/windows-rufus-envtz-continent-city-error", "title": "Windows: Rufus: `ENV[&#39;TZ&#39;] = &#39;Continent/City&#39; Error", "body": "<p>I want t schedule a job running every hour on my windows machine and used rufus-scheduler for this. However, I am not able to proceed due to the timezone error explained below.</p>\n\n<pre><code>require 'rufus-scheduler'\n\nrequire 'rufus-scheduler'\nrequire 'tzinfo/data'\n\nENV['TZ'] = 'Asia/Chennai'\n\nscheduler = Rufus::Scheduler::singleton\n\nscheduler.every '1h' do\n  # job here\nend\n</code></pre>\n\n<p>I am constantly thrown with this error.</p>\n\n<pre><code> C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler- 3.3.4/lib/rufus/scheduler/zotime.rb:41:in `initialize': cannot determine timezone from nil (etz:\"Asia/India\",tnz:\"Asi\",tzid:\"constant\") (ArgumentError)\n Try setting `ENV['TZ'] = 'Continent/City'` in your script (see https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler-  3.3.4/lib/rufus/scheduler/zotime.rb:206:in `new'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler- 3.3.4/lib/rufus/scheduler/zotime.rb:206:in `now'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler-3.3.4/lib/rufus/scheduler.rb:561:in `start'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler-3.3.4/lib/rufus/scheduler.rb:109:in `initialize'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler-3.3.4/lib/rufus/scheduler.rb:116:in `new'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/rufus-scheduler-3.3.4/lib/rufus/scheduler.rb:116:in `singleton'\n    from scheduler.rb:9:in `&lt;main&gt;'\n</code></pre>\n\n<p>Can anyone help on this?</p>\n"}, {"tags": ["ruby", "rubygems", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1551026846, "post_id": 54819488, "comment_id": 96479825, "body": "Vignesh, thanks for the answer but in my last paragraph I was specifically asking about a way that does not involve doing a <code>require</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 11099285, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MvAigAi59Zw/AAAAAAAAAAI/AAAAAAAAF0c/zYmCShvr0sU/photo.jpg?sz=128", "display_name": "vignesh thangaraj", "link": "https://stackoverflow.com/users/11099285/vignesh-thangaraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1550804782, "creation_date": 1550804782, "answer_id": 54819488, "question_id": 42375337, "link": "https://stackoverflow.com/questions/42375337/how-to-include-cucumber-step-definitions-from-a-gem/54819488#54819488", "title": "How to include Cucumber step definitions from a gem?", "body": "<p>You can provide step definitions in a gem simply by putting them in a file and instructing the user to require that file in their env.rb.</p>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550804782, "creation_date": 1487702272, "last_edit_date": 1495539970, "question_id": 42375337, "link": "https://stackoverflow.com/questions/42375337/how-to-include-cucumber-step-definitions-from-a-gem", "title": "How to include Cucumber step definitions from a gem?", "body": "<p>I'm working on a gem that includes some common classes for a few different projects. The projects use Cucumber with existing step definitions.</p>\n\n<p>However, I've discovered that some of the step definitions are general (used across all the projects) so I'd like to extract those from the projects and just put them in the gem.</p>\n\n<p>The problem is, even by defining the gem's <code>spec.files</code> and <code>spec.require_paths</code> to point to the step definitions, it still doesn't pick up the step definitions in the gem.</p>\n\n<p>I suspect that in the gem I need to configure Cucumber to \"know\" about the step definitions in that gem, so that when I load the gem via one of the projects, Cucumber will already have those step definitions in it's load path... but I don't know how to do that?</p>\n\n<p>I welcome any suggestions!</p>\n\n<p>BTW, this question is <em>close</em> to what I'm asking: <a href=\"https://stackoverflow.com/questions/11675137/how-can-a-gem-provide-cucumber-features-and-step-definitions\">How can a gem provide Cucumber features and step definitions?</a></p>\n\n<p>However, the goal is to not have to do an explicit <code>require</code> within the project that is using the gem. Ideally, just including the gem in the Gemfile will be sufficient to have Cucumber \"know\" about the step definitions from the gem. I just need to know what to configure in the gem to make that happen.</p>\n"}, {"tags": ["ruby", "algorithm", "recursion", "linked-list", "tree"], "comments": [{"owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "edited": false, "score": 0, "creation_date": 1487704484, "post_id": 42375264, "comment_id": 71901076, "body": "What does &quot;doesn&#39;t work&quot; mean? Does it crash? Does it produce wrong output? Does it fail to terminate after a reasonable amount of time?"}, {"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "reply_to_user": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "edited": false, "score": 0, "creation_date": 1487705094, "post_id": 42375264, "comment_id": 71901451, "body": "@kraskevich edited to include that."}], "answers": [{"comments": [{"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1487877853, "post_id": 42400361, "comment_id": 71994276, "body": "This happens because, when I flatten root.left and set the pointer for root.right = flatten(root.left), root.right wasn&#39;t pointing to the root of the flattened left list?"}, {"owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "reply_to_user": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1487878179, "post_id": 42400361, "comment_id": 71994436, "body": "Yes, exactly. Your recursive call expects <code>flatten</code> to return the root of the subtree it just flattened; however, <code>flatten</code> was not doing this."}], "tags": [], "owner": {"reputation": 1873, "user_id": 3665324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fe21cb3a1f00134f0f32360e59a054?s=128&d=identicon&r=PG", "display_name": "avysk", "link": "https://stackoverflow.com/users/3665324/avysk"}, "is_accepted": true, "score": 0, "last_activity_date": 1487791017, "creation_date": 1487791017, "answer_id": 42400361, "question_id": 42375264, "link": "https://stackoverflow.com/questions/42375264/flatten-binary-tree-singly-linked-list-ruby/42400361#42400361", "title": "Flatten Binary Tree --&gt; Singly Linked List (Ruby)", "body": "<p>Your <code>flatten</code> does not return what it should. It matters as you call it recursively. Change it to</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    ...\n    find_tail(left_list).right = right_list unless left_list.nil?\n    root  # &lt;-- add this line\nend\n</code></pre>\n"}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 42400361, "answer_count": 1, "score": 0, "last_activity_date": 1487791017, "creation_date": 1487702055, "last_edit_date": 1487705082, "question_id": 42375264, "link": "https://stackoverflow.com/questions/42375264/flatten-binary-tree-singly-linked-list-ruby", "title": "Flatten Binary Tree --&gt; Singly Linked List (Ruby)", "body": "<p>I'm working on a recursive algorithm to flatten a binary tree into a singly linked list. Problem statement:</p>\n\n<pre><code>Given a binary tree, flatten it to a linked list in-place.\n\nFor example,\nGiven\n\n         1\n        / \\\n       2   5\n      / \\   \\\n     3   4   6\nThe flattened tree should look like:\n   1\n    \\\n     2\n      \\\n       3\n        \\\n         4\n          \\\n           5\n            \\\n             6\n</code></pre>\n\n<p>I wrote the following recursive code that simply doesn't work (returns wrong answer),  but I can't understand conceptually why not. Starting at the root, we flatten root.left and root.right. If root.left exists, then root.next (or in this case, root.right) will point to the flattened left list. Then, the left list points to the beginning of the right list. This continues recursively down the tree.</p>\n\n<p>Is something wrong with this conceptually? I tried modeling it after a preorder traversal since essentially root is visited, then left, then right.</p>\n\n<pre><code>def flatten(root)\n    return root if root.nil?\n    left_list = flatten(root.left) \n    right_list = flatten(root.right)\n    root.left = nil\n\n\n    root.right = (left_list.nil? ? right_list : left_list)\n    find_tail(left_list).right = right_list unless left_list.nil?\nend\n\ndef find_tail(node)\n    return nil if node.nil?\n    until node.right.nil?\n        node = node.right\n    end\n\n    node\nend\n</code></pre>\n"}, {"tags": ["ruby", "docker", "redis"], "answers": [{"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1487707110, "post_id": 42375896, "comment_id": 71902591, "body": "It seems that the &quot;Docker way&quot; would be to have 2 containers. Simpler and easier."}, {"owner": {"reputation": 14369, "user_id": 1138559, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/UZMLk.png?s=128&g=1", "display_name": "Alkis Kalogeris", "link": "https://stackoverflow.com/users/1138559/alkis-kalogeris"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1487715788, "post_id": 42375896, "comment_id": 71907543, "body": "Yes that&#39;s the correct and easiest way if you don&#39;t have any serious complications."}], "tags": [], "owner": {"reputation": 14369, "user_id": 1138559, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/UZMLk.png?s=128&g=1", "display_name": "Alkis Kalogeris", "link": "https://stackoverflow.com/users/1138559/alkis-kalogeris"}, "is_accepted": false, "score": 2, "last_activity_date": 1487704118, "last_edit_date": 1495542715, "creation_date": 1487704118, "answer_id": 42375896, "question_id": 42375082, "link": "https://stackoverflow.com/questions/42375082/how-to-add-redis-to-a-docker-container/42375896#42375896", "title": "How to add Redis to a Docker Container?", "body": "<p><a href=\"https://stackoverflow.com/questions/23692470/why-cant-i-use-docker-cmd-multiple-times-to-run-multiple-services\">There can be only one</a> <code>CMD</code> command in your <code>Dockerfile</code>. Moreover what you want to do is a <a href=\"https://stackoverflow.com/questions/19948149/can-i-run-multiple-programs-in-a-docker-container\">little more complex</a> than you might think.</p>\n\n<p>P.S. The above are stackoverflow links.</p>\n"}, {"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1487705396, "post_id": 42376017, "comment_id": 71901618, "body": "Yes, I saw that it is easier and better to do it this way."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1487785320, "post_id": 42376017, "comment_id": 71944237, "body": "For the future searchers, the <code>redis</code> key won&#39;t work in this case. See <a href=\"http://stackoverflow.com/a/42380642/336920\">stackoverflow.com/a/42380642/336920</a>"}], "tags": [], "owner": {"reputation": 144197, "user_id": 596285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6975c494d3d9c404dd3d7af2edf3133?s=128&d=identicon&r=PG", "display_name": "BMitch", "link": "https://stackoverflow.com/users/596285/bmitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1487704520, "creation_date": 1487704520, "answer_id": 42376017, "question_id": 42375082, "link": "https://stackoverflow.com/questions/42375082/how-to-add-redis-to-a-docker-container/42376017#42376017", "title": "How to add Redis to a Docker Container?", "body": "<p>Split this into two containers. You can use docker-compose to bring them up on a common network. E.g. here's a sample docker-compose.yml:</p>\n\n<pre><code>version: '2'\n\nservices:\n  sinatraapp:\n    image: sinatraapp:latest\n    ports:\n    - 9292:9292\n  redis:\n    image: redis:latest\n</code></pre>\n\n<p>The above can include more options for your environment, and assumes your image name is sinatraapp:latest, change that to the image you built. You'll also need to update your sinatra app to call redis by the hostname redis instead of localhost. Then run <code>docker-compose up -d</code> to start the two services.</p>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5014, "favorite_count": 2, "accepted_answer_id": 42376017, "answer_count": 2, "score": 4, "last_activity_date": 1487704520, "creation_date": 1487701414, "question_id": 42375082, "link": "https://stackoverflow.com/questions/42375082/how-to-add-redis-to-a-docker-container", "title": "How to add Redis to a Docker Container?", "body": "<p>I have a Sinatra app that works fine in Docker:</p>\n\n<pre><code># Image\nFROM ruby:2.3.3\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y net-tools\n\n\n# Install app\nENV APP_HOME /app\nENV HOME /root\nRUN mkdir $APP_HOME\nWORKDIR $APP_HOME\nCOPY Gemfile* $APP_HOME/\nRUN bundle install\nCOPY . $APP_HOME\n\n\n# Configure App\nENV LANG en_US.UTF-8\nENV RACK_ENV production\n\nEXPOSE 9292\n\n\n# run the application\nCMD [\"bundle\", \"exec\", \"rackup\"]\n</code></pre>\n\n<p>But when I try to add Redis:</p>\n\n<pre><code># Redis\nRUN         apt-get update &amp;&amp; apt-get install -y redis-server\nEXPOSE      6379\nCMD         [\"/usr/bin/redis-server\"]\n</code></pre>\n\n<p>Redis does not seem to start.</p>\n\n<p>So, what is a good way to add Redis to a Ruby (<code>FROM ruby:2.3.3</code>) Docker container?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487701995, "post_id": 42374940, "comment_id": 71899687, "body": "Why not just <code>&#47;reviews&#47;:review_id</code> where <code>review_id</code> can actually be a slug instead?"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1487704879, "post_id": 42374940, "comment_id": 71901326, "body": "That would be the preferred method, but I am having to sustain urls that already have decent Google rankings. @max"}], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1487702041, "creation_date": 1487702041, "answer_id": 42375262, "question_id": 42374940, "link": "https://stackoverflow.com/questions/42374940/ruby-on-rails-route-constraint/42375262#42375262", "title": "Ruby On Rails - Route Constraint", "body": "<p>Try this:</p>\n\n<pre><code>get '/:url_key', to: 'reviews#review', constraints: { url_key: /.*-review.*/ }\n</code></pre>\n\n<p>If you want to ensure at least one character before the -review part, use this regex instead: </p>\n\n<pre><code>/.+-review.*/\n</code></pre>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 42375262, "answer_count": 1, "score": 0, "last_activity_date": 1487702041, "creation_date": 1487700989, "question_id": 42374940, "link": "https://stackoverflow.com/questions/42374940/ruby-on-rails-route-constraint", "title": "Ruby On Rails - Route Constraint", "body": "<p>I'm trying to create a route that allows anything with \"-review\" in the static segment :url_key. The urls I am working with may have any text before or after the substring -review in the static segment. I've seen examples for allowing integers only, but I'm not very familiar with regex syntax and I'm not quite sure how to write the constraint. Here is what I have so far.</p>\n\n<pre><code>get '/:url_key', to: 'reviews#review', constraint: { url_key: \"(anything before)-review(anything after)\" }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1487701089, "post_id": 42374789, "comment_id": 71899147, "body": "<code>self.table_name = &#39;User&#39;</code> - this violates few conventions at once :D"}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1487702739, "post_id": 42374789, "comment_id": 71900150, "body": "Can you please tell me what am i doing wrong? i am new to ruby on rails"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1487702870, "post_id": 42374789, "comment_id": 71900236, "body": "Sure. First thing is that by convention the table name should be the plural form of the model name, which Rails will recognize automagically (you need  <code>self.table_name</code> only if you have the table name that does not follow the aforementioned). So to follow the conventions, your table name should be called <code>users</code> (lowecased, plural) and then you can remove the <code>self.table_name</code> altogether"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1487703059, "post_id": 42374789, "comment_id": 71900324, "body": "Agreed, it is preferred to name your table <code>users</code> rather than <code>User</code>. This is the Rails convention and will save you a lot of headaches. Of course if you don&#39;t have control over your schema for some reason or you&#39;re building on to a legacy app, then setting the table_name like you&#39;ve done is an acceptable workaround."}], "answers": [{"tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": true, "score": 0, "last_activity_date": 1487702933, "creation_date": 1487702933, "answer_id": 42375549, "question_id": 42374789, "link": "https://stackoverflow.com/questions/42374789/convert-column-values-to-string-and-display-in-json/42375549#42375549", "title": "Convert column values to string and display in JSON", "body": "<p>One way to do this is to create an instance method that will return the string that you want: </p>\n\n<pre><code>def status_str\n  case status\n  when 0\n    \"active\"\n  when 1\n    \"archived\"\n  end\nend\n</code></pre>\n\n<p>However a better way would be to use an <a href=\"http://edgeapi.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">ActiveRecord Enum</a>:</p>\n\n<pre><code>enum status: [ :active, :archived ]\n</code></pre>\n\n<p>To make this work your <code>status</code> column would need to be an integer data type, not a boolean. See the <a href=\"http://edgeguides.rubyonrails.org/active_record_querying.html#enums\" rel=\"nofollow noreferrer\">ActiveRecord Query Guide under Enums</a> for more information. </p>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 42375549, "answer_count": 1, "score": 1, "last_activity_date": 1487702933, "creation_date": 1487700530, "question_id": 42374789, "link": "https://stackoverflow.com/questions/42374789/convert-column-values-to-string-and-display-in-json", "title": "Convert column values to string and display in JSON", "body": "<p>I created a user model as follows:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n   self.table_name = 'User'\n\nend\n</code></pre>\n\n<p>User table has column status and it has values 0 and 1</p>\n\n<p>I want to display status values in strings in json. when the user status is 0 then show inactive and active when its 1.</p>\n\n<p>How can i create a method that'd do this conversion?</p>\n\n<p>I'll call that method in controller and save result in instance variable and call that instance variable in view.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "search"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1487697487, "post_id": 42373801, "comment_id": 71897102, "body": "What route is being dispatched? Where does the error occur?"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1487697553, "post_id": 42373801, "comment_id": 71897150, "body": "show the full error msg as-is for us to locate what&#39;s happening."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1487697666, "post_id": 42373801, "comment_id": 71897213, "body": "I have just added the full error"}, {"owner": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "edited": false, "score": 0, "creation_date": 1487699600, "post_id": 42373801, "comment_id": 71898326, "body": "@BenSmith it would seem as if your collection <code>@useraccounts</code> is being returned as <code>nil</code>, and then you are trying to call <code>each</code> on <code>nil</code>, which does not respond to that method."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "edited": false, "score": 0, "creation_date": 1487699740, "post_id": 42373801, "comment_id": 71898410, "body": "@Sean I can see that, however I do not know why. Any thoughts?"}, {"owner": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "edited": false, "score": 0, "creation_date": 1487703434, "post_id": 42373801, "comment_id": 71900530, "body": "in your controller, after you set your <code>@useraccounts</code> variable, try raising the value to see what is happening there.  This way can we try to pinpoint where the problem is specifically.  <code>raise @useraccounts.inspect</code> put"}], "answers": [{"tags": [], "owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "is_accepted": true, "score": 1, "last_activity_date": 1487699857, "creation_date": 1487699857, "answer_id": 42374570, "question_id": 42373801, "link": "https://stackoverflow.com/questions/42373801/ruby-on-rails-why-isnt-my-search-working/42374570#42374570", "title": "Ruby on Rails: Why isn&#39;t my search working?", "body": "<p>By the erb, I guess you have a <code>form_tag</code> inside a <code>form_for</code> block... You can't do that</p>\n\n<p>When you hit Submit, the action is going to the first form action... that probably is a create</p>\n\n<p>It's better move your <code>form_tag</code> to outside your previous <code>form</code> block...</p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 2098868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vSHA1.jpg?s=128&g=1", "display_name": "forchetan01", "link": "https://stackoverflow.com/users/2098868/forchetan01"}, "is_accepted": false, "score": 0, "last_activity_date": 1487702762, "creation_date": 1487702762, "answer_id": 42375495, "question_id": 42373801, "link": "https://stackoverflow.com/questions/42373801/ruby-on-rails-why-isnt-my-search-working/42375495#42375495", "title": "Ruby on Rails: Why isn&#39;t my search working?", "body": "<p>Seems your Modal name (<strong><code>Useraccount</code></strong>) is incorrect  this must be <strong><code>UserAccount</code></strong>.</p>\n\n<p>Also Please note </p>\n\n<p>When we use <code>where</code> query with ActiveRecord modal we never get NIL object unless we have wrong Modal name. </p>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 42374570, "answer_count": 2, "score": -1, "last_activity_date": 1487702762, "creation_date": 1487697299, "last_edit_date": 1487697655, "question_id": 42373801, "link": "https://stackoverflow.com/questions/42373801/ruby-on-rails-why-isnt-my-search-working", "title": "Ruby on Rails: Why isn&#39;t my search working?", "body": "<p>In my RoR application I am allowing users to select contacts that they want to send an email to. The users select these contacts via checkboxes on the form. I am trying to add in search functionality so that a user can search by first name and only check boxes with contacts that match that search appear.</p>\n\n<p>To do this I am trying to use this code on the view:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n    &lt;label&gt;From Email Address&lt;/label&gt;&lt;/br&gt;\n    &lt;% @useraccounts.each do |useraccount| %&gt;\n        &lt;%= f.radio_button :account_id, useraccount.account_id, :checked =&gt; false %&gt;\n        &lt;%= f.label :account_id, useraccount.account.email, :value =&gt; \"true\"  %&gt;&lt;br&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n&lt;div class=\"form-group\"&gt;\n    &lt;%= form_tag '/emails/contact_search', :method =&gt; 'get' do %&gt;\n      &lt;p&gt;\n        &lt;%= text_field_tag :search_string, params[:search_string], :placeholder =&gt; \"Search by firstname\" %&gt;\n        &lt;%= submit_tag \"Search\", :name =&gt; nil %&gt;\n      &lt;/p&gt;\n    &lt;% end %&gt;\n    &lt;label&gt;Contacts&lt;/label&gt;&lt;/br&gt;\n    &lt;%= f.collection_check_boxes :contact_ids, @contacts, :id, :fullname %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Where the <code>@contacts</code> instance variable holds the contacts returned from the search in the controller.</p>\n\n<p>When a user clicks the search button, the below controller action should be invoked.</p>\n\n<pre><code>def contact_search\n    @email.recipients.build\n    @useraccounts = Useraccount.where(user_id: session[:user_id])\n    @contacts = Contact.contacts_search(params[:search_string])\n    if @contacts.empty?\n        flash.now[:alert] = \"There are no contacts with that name.\"\n        @contacts = Contact.all\n    end\n    render :action =&gt; \"new\"\nend\n</code></pre>\n\n<p>This controller action uses the <code>contact_search</code> method, which is in the Contact.rb model:</p>\n\n<pre><code>def self.contact_search(search_string)\n    self.where(\"firstname LIKE ?\", search_string)\nend\n</code></pre>\n\n<p>I also have the <code>contact_search</code> in the routes:</p>\n\n<pre><code>post 'emails/contact_search', :to =&gt; 'emails#contact_search'\nget 'emails/contact_search', :to =&gt; 'emails#contact_search'\n</code></pre>\n\n<p>But for some reason, when a user clicks search they get a <code>NoMethodError in Emails#create</code> <code>undefined method 'each' for nil:NilClass</code> on the form. The error is as pictured.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qjM0a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qjM0a.png\" alt=\"enter image description here\"></a></p>\n\n<p>I cannot work out why this isn't working, can someone please help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundle", "digital-ocean"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1487696654, "post_id": 42373482, "comment_id": 71896595, "body": "If you have something relevant to the question then please put it <i>in</i> the question. External links are annoying and will likely be ignored."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "edited": false, "score": 0, "creation_date": 1487697407, "post_id": 42373628, "comment_id": 71897044, "body": "That got rid of some of the errors, but now I have this; <a href=\"http://pastebin.com/zLv6SDc9\" rel=\"nofollow noreferrer\">pastebin.com/zLv6SDc9</a>"}], "tags": [], "owner": {"reputation": 354, "user_id": 7412814, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tw8Eg.jpg?s=128&g=1", "display_name": "Aizuddin Badry", "link": "https://stackoverflow.com/users/7412814/aizuddin-badry"}, "is_accepted": false, "score": -1, "last_activity_date": 1487696711, "creation_date": 1487696711, "answer_id": 42373628, "question_id": 42373482, "link": "https://stackoverflow.com/questions/42373482/digitalocean-error-while-bundle-install-rails/42373628#42373628", "title": "DigitalOcean error while bundle install - Rails", "body": "<p>Lets try </p>\n\n<pre><code>`sudo gem install nio4r -v '1.2.1'`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208, "user_id": 6450465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNWBu.jpg?s=128&g=1", "display_name": "Manoj Kumar", "link": "https://stackoverflow.com/users/6450465/manoj-kumar"}, "is_accepted": false, "score": -1, "last_activity_date": 1487700250, "creation_date": 1487700250, "answer_id": 42374704, "question_id": 42373482, "link": "https://stackoverflow.com/questions/42373482/digitalocean-error-while-bundle-install-rails/42374704#42374704", "title": "DigitalOcean error while bundle install - Rails", "body": "<p>Might be this command will help you - </p>\n\n<pre><code>gem install nio4r -v '1.2.1'\n</code></pre>\n\n<p>if this command is not working then follow the below steps to fixing this issue like -</p>\n\n<p><strong>Try to install nio4r with different version</strong> so remove/change version from Gem file. If still getting some issue then remove Gemlock file and run bundle install.</p>\n\n<p>Might be above solution will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "is_accepted": false, "score": 1, "last_activity_date": 1487701264, "last_edit_date": 1495539970, "creation_date": 1487701264, "answer_id": 42375023, "question_id": 42373482, "link": "https://stackoverflow.com/questions/42373482/digitalocean-error-while-bundle-install-rails/42375023#42375023", "title": "DigitalOcean error while bundle install - Rails", "body": "<p>Looks similar to <a href=\"https://stackoverflow.com/questions/29859413/bundle-install-error-failed-to-build-gem-native-extension-nio4r-gem\">Bundle install: ERROR: Failed to build gem native extension. nio4r gem</a></p>\n\n<p>You probably don't have installed on DigitalOcean some libraries... from the marked as correct answer... probably you need only</p>\n\n<pre><code>sudo apt-get install libev-dev\n</code></pre>\n\n<p>Before install the gem</p>\n"}], "owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1487701264, "creation_date": 1487696358, "question_id": 42373482, "link": "https://stackoverflow.com/questions/42373482/digitalocean-error-while-bundle-install-rails", "title": "DigitalOcean error while bundle install - Rails", "body": "<p>I'm getting an error while running bundle install on digitalocean. I've put the error's in a pastebin here; \n<a href=\"http://pastebin.com/wzFCFYYE\" rel=\"nofollow noreferrer\">http://pastebin.com/wzFCFYYE</a></p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "excel", "cpanel"], "comments": [{"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "edited": false, "score": 0, "creation_date": 1487697002, "post_id": 42373096, "comment_id": 71896799, "body": "Do you know where your gems are located? Try looking there to see whether it is installed. It&#39;s probably somewhere around <code>&#47;usr&#47;lib&#47;ruby&#47;site_ruby&#47;1.8&#47;rubygems&#47;</code>"}, {"owner": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "reply_to_user": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "edited": false, "score": 0, "creation_date": 1487697215, "post_id": 42373096, "comment_id": 71896938, "body": "Actually, it&#39;s not in that specific location you mentioned. Rather it&#39;s on here:  <code>~&#47;ruby&#47;gems&#47;gems&#47;</code>"}, {"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "edited": false, "score": 0, "creation_date": 1487700305, "post_id": 42373096, "comment_id": 71898713, "body": "Are the other gems in the same place? I presume they all work."}, {"owner": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "reply_to_user": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "edited": false, "score": 0, "creation_date": 1487700517, "post_id": 42373096, "comment_id": 71898821, "body": "@SekalfNroc: yes, they are in the same place. And, oddly enough, only <code>rubygems</code> works. The others don&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "edited": false, "score": 0, "creation_date": 1487711001, "post_id": 42375416, "comment_id": 71904862, "body": "Hello, I have used Ruby in the past to install its gems. I don&#39;t know if that is what you mean."}, {"owner": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "edited": false, "score": 0, "creation_date": 1487712586, "post_id": 42375416, "comment_id": 71905791, "body": "<code>gem install &lt;gem&gt;</code>"}, {"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "reply_to_user": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "edited": false, "score": 0, "creation_date": 1487712705, "post_id": 42375416, "comment_id": 71905861, "body": "The problematic gems are in the same place as the ones that work? Try deleting and reinstalling them."}, {"owner": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "edited": false, "score": 0, "creation_date": 1487712844, "post_id": 42375416, "comment_id": 71905946, "body": "I am looking and it seems the answer is no. The non-problematic one is on two places: one on <code>&#47;usr&#47;lib&#47;ruby&#47;site_ruby&#47;1.8&#47;rubygems&#47;</code> and the other on <code>~&#47;ruby&#47;gems&#47;gems&#47;</code>, where the problematic ones are."}, {"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "reply_to_user": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "edited": false, "score": 0, "creation_date": 1487713235, "post_id": 42375416, "comment_id": 71906190, "body": "If you install them all in the same way, they should be in the same place. Try calling <code>gem install</code> again on the ones that don&#39;t work."}], "tags": [], "owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "is_accepted": true, "score": 1, "last_activity_date": 1487702498, "creation_date": 1487702498, "answer_id": 42375416, "question_id": 42373096, "link": "https://stackoverflow.com/questions/42373096/gem-not-found-when-i-have-just-installed-it/42375416#42375416", "title": "Gem not found when I have just installed it", "body": "<p>The gems in <code>~/ruby/gems/gems/</code> are not being recognised by your Ruby executable. Find where all the other gems are being kept and move these ones into there. </p>\n\n<p>Alternatively, try using a different package manager. If you have installed gems successfully in the past, use the manager you used for that. </p>\n"}], "owner": {"reputation": 383, "user_id": 2097665, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GNtbF.jpg?s=128&g=1", "display_name": "Julio Garcia", "link": "https://stackoverflow.com/users/2097665/julio-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 42375416, "answer_count": 1, "score": 0, "last_activity_date": 1487702498, "creation_date": 1487695297, "question_id": 42373096, "link": "https://stackoverflow.com/questions/42373096/gem-not-found-when-i-have-just-installed-it", "title": "Gem not found when I have just installed it", "body": "<p>I am creating a Ruby script which reads data from an Excel sheet and put its data on a MySQL database. I have written it and installed the necessary gems. However, when I try to run it via my cPanel host and I get the following error:</p>\n\n<pre><code>Array ( [0] =&gt; /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- ruby-mysql (LoadError) [1] =&gt; from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require' [2] =&gt; from ../ruby/InsertarFaltantesExcel.rb:2 )\n</code></pre>\n\n<p>Ruby Code:</p>\n\n<pre><code>require 'rubygems'\nrequire 'ruby-mysql'\nrequire 'spreadsheet'\n#load './spreadsheet.rb'\n\ncon = Mysql.connect('xx', 'xx', 'xx','xx')\n\nARGV = \"--help\" if ARGV.empty?\n\nworkbook = Spreadsheet.open(ARGV[0])\nsheet = workbook.worksheet(0)\n\nsheet.each do |row|\n  @faltantes = {\n  \"id_verificador\" =&gt; \"#{row[0]}\",\n  \"order_id\" =&gt; \"#{row[1]}\",\n  \"id_proveedor\" =&gt; \"#{row[28]}\",\n  \"shipping\" =&gt; \"#{row[10]}\",\n  \"ean\" =&gt; \"#{row[4]}\",\n  \"isbn\" =&gt; \"#{row[5]}\",\n  \"description\" =&gt; \"#{row[8]}\",\n  \"sku\" =&gt; \"#{row[9]}\",\n  \"cost\" =&gt; \"#{row[40]}\",\n  \"order_price\" =&gt; \"#{row[14]}\",\n  \"master\" =&gt; \"#{row[39]}\",\n  \"quantity_purchased\" =&gt; \"#{row[11]}\",\n  \"total_price\" =&gt; \"#{row[12]}\",\n  \"condition\" =&gt; \"#{row[33]}\",\n  \"tracking\" =&gt; \"#{row[29]}\"      \n  }\n\n  insertar_faltantes(@faltantes, con)\nend\n\ndef insertar_faltantes(hash, con)\n    statement - con.prepare(\"INSERT INTO articulos(art_id_verificador, art_id_orden, art_id_proveedor, art_shipping, art_N13, art_ISBN, art_titulo, art_SKU, art_cost, art_precio, art_master, art_cantidad, art_total, art_condition,\n     art_tracking) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?);\")\n   statement.execute \"#{hash['id_verificador']}\", \"#{hash['order_id']}\", \"#{hash['id_proveedor']}\", \"#{hash['shipping']}\", \"#{hash['ean']}\", \"#{hash['isbn']}\", \"#{hash['sku']}\", \"#{hash['cost']}\", \"#{hash['order_price']}\",\"#{hash['master']}\",\n \"#{hash['quantity_purchased']}\", \"#{hash['condition']}\", \"#{hash['tracking']}\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1487695807, "post_id": 42373046, "comment_id": 71896023, "body": "controller tests don&#39;t run through an actual request, if you want access to the <code>request</code> object (no <code>@</code>) then you ned to make these request specs."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1487695971, "post_id": 42373046, "comment_id": 71896147, "body": "@Anthony Sorry, being new to testing I don&#39;t quite follow.  So, how do I go about testing all of my protected controller methods?  I have Devise&#39;s <code>before_action :authenticate_user!</code> in my <code>application_controller.rb</code>, which lead me to believe I needed to mimic a logged in user."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1487696033, "post_id": 42373046, "comment_id": 71896186, "body": "Also, If I take out <code>login_existing_user</code> from my tests, I get redirected to my login page."}, {"owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "edited": false, "score": 0, "creation_date": 1487696396, "post_id": 42373046, "comment_id": 71896442, "body": "Dumb question. Do you require <code>rails_helper</code> or <code>spec_helper</code> in your <code>ScansControllerSpec</code>?"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "edited": false, "score": 0, "creation_date": 1487696439, "post_id": 42373046, "comment_id": 71896464, "body": "@VAD yes, I have <code>require &#39;rails_helper&#39;</code> at the very top."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1487696492, "post_id": 42373046, "comment_id": 71896498, "body": "Hard to answer on an SO comment but look here for specific examples: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Stub-authentication-in-controller-specs\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1487696878, "post_id": 42373046, "comment_id": 71896727, "body": "@Anthony gotcha.. made the change, still the same error referencing this line in my code now: <code>allow(request.env[&#39;warden&#39;]).to receive(:authenticate!).and_return(user)</code>.  Just doesn&#39;t seem to like the <code>env</code>"}, {"owner": {"reputation": 182, "user_id": 6425718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FyVD2-IBdhg/AAAAAAAAAAI/AAAAAAAAAI0/YKu3JsXztMs/photo.jpg?sz=128", "display_name": "Humayun Naseer", "link": "https://stackoverflow.com/users/6425718/humayun-naseer"}, "edited": false, "score": 0, "creation_date": 1617262309, "post_id": 42373046, "comment_id": 118256784, "body": "@Godzilla74 do you find the solution im facing the same error in requests_spec.rb because I&#39;m doing the same thing as you did"}], "answers": [{"tags": [], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "is_accepted": false, "score": 0, "last_activity_date": 1487705629, "creation_date": 1487705629, "answer_id": 42376344, "question_id": 42373046, "link": "https://stackoverflow.com/questions/42373046/devise-rspec-undefined-method-env-for-nilnilclass/42376344#42376344", "title": "Devise Rspec undefined method `env&#39; for nil:NilClass", "body": "<p>Seemed to have gotten past this issue by following: <a href=\"http://willschenk.com/setting-up-testing/\" rel=\"nofollow noreferrer\">http://willschenk.com/setting-up-testing/</a></p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1222, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487705629, "creation_date": 1487695151, "question_id": 42373046, "link": "https://stackoverflow.com/questions/42373046/devise-rspec-undefined-method-env-for-nilnilclass", "title": "Devise Rspec undefined method `env&#39; for nil:NilClass", "body": "<p>I've scoured SO and no one else's results seem to work for me:</p>\n\n<p>I have a <code>ControllerHelper</code> method for my Spec based off what was suggested for Devise:</p>\n\n<pre><code>def login_existing_user\n  @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n  user = FactoryGirl.create(:user)\n  company = FactoryGirl.create(:company)\n  user.company_id = company.id\n  sign_in user\nend\n</code></pre>\n\n<p>I am also creating a <code>Company</code> in this method since that's step 2 of the sign up process for a user to be able to get my authenticated homepage.</p>\n\n<p>At this point, I'm just trying to log the user in with my <code>ScansControllerSpec</code>:</p>\n\n<pre><code>RSpec.describe ScansController, type: :controller do\n\n  before(:all) do\n    login_existing_user\n    @device = build(:device)\n  end\n\n  describe \"GET #create\" do\n    it \"returns http success\" do\n      get :create, :device_id =&gt; @device.id\n      puts response\n      # expect(response).to have_http_status(:success)\n    end\n  end\n\n  ....\nend\n</code></pre>\n\n<p>But I'm getting this for every one of my CRUD method RSpecs:</p>\n\n<pre><code>1) ScansController GET #create returns http success\n     Failure/Error: @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n\n     NoMethodError:\n       undefined method `env' for nil:NilClass\n     # ./spec/support/controller_helpers.rb:15:in `login_existing_user'\n     # ./spec/controllers/scans_controller_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>As other posts have suggested, I am including the <code>Devise::TestHelpers</code> in my <code>rails_helper.rb</code> file.  I've also included my <code>ControllerHelpers</code>:</p>\n\n<pre><code>RSpec.configure do |config|\n  config.include Devise::TestHelpers, type: :controller\n  config.include Warden::Test::Helpers\n  Warden.test_mode!\n\n  config.infer_spec_type_from_file_location!\n\n  config.include ControllerHelpers, type: :controller\n\n  config.after do\n    Warden.test_reset!\n  end\nend\n</code></pre>\n\n<p>In the end, I need to be able to log a user in to test that protected controller methods work.  I'm not sure if this is an association problem, so I'll add that a user has to have a <code>company</code>, and a company has to have a <code>subscription</code> in order to successfully log in.</p>\n\n<p>... but I can't even get that far since this error is holding me back.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "edited": false, "score": 0, "creation_date": 1488387483, "post_id": 42372972, "comment_id": 72210929, "body": "For now, it looks like the problem is in <code>monster_health = monster_health - dmg</code>, where you don&#39;t have any way of accessing the <code>Monster</code> instance. I might use an <code>Encounter</code> class as a bridge between them. That way, you could use <code>encounter.monster.health -= dmg</code>. However, I advise you to implement the <code>take_damage</code> method as I suggested, so that you do not depend upon knowledge of the attribute name."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7600001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f28e8dc966e82f020504ac14287e30?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Doe Boi", "link": "https://stackoverflow.com/users/7600001/jay-doe-boi"}, "edited": false, "score": 0, "creation_date": 1488384973, "post_id": 42374696, "comment_id": 72209159, "body": "After fixing the problem, I get this error:                                                         undefined method <code>-&#39; for nil:NilClass (repl):34:in </code>attack&#39; (repl):104:in `&lt;main&gt;&#39;"}, {"owner": {"reputation": 11, "user_id": 7600001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f28e8dc966e82f020504ac14287e30?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Doe Boi", "link": "https://stackoverflow.com/users/7600001/jay-doe-boi"}, "edited": false, "score": 0, "creation_date": 1488385120, "post_id": 42374696, "comment_id": 72209247, "body": "I fixed up the last code (removing the monster attack from player, etc)"}, {"owner": {"reputation": 11, "user_id": 7600001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f28e8dc966e82f020504ac14287e30?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Doe Boi", "link": "https://stackoverflow.com/users/7600001/jay-doe-boi"}, "edited": false, "score": 0, "creation_date": 1488385713, "post_id": 42374696, "comment_id": 72209683, "body": "No, but the error is something about the monster class:                                 class Monster   attr_accessor :monster_health,  :monster_damage def initialize   monster_health = 50   monster_damage = 10"}, {"owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "reply_to_user": {"reputation": 11, "user_id": 7600001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f28e8dc966e82f020504ac14287e30?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Doe Boi", "link": "https://stackoverflow.com/users/7600001/jay-doe-boi"}, "edited": false, "score": 0, "creation_date": 1488385854, "post_id": 42374696, "comment_id": 72209793, "body": "Please could you update the code in the question to make it easier to read? Is that the entire <code>Monster</code> class?"}], "tags": [], "owner": {"reputation": 457, "user_id": 7589207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bde3767f766142db431f241759a644?s=128&d=identicon&r=PG&f=1", "display_name": "Sekalf Nroc", "link": "https://stackoverflow.com/users/7589207/sekalf-nroc"}, "is_accepted": false, "score": 1, "last_activity_date": 1487700211, "creation_date": 1487700211, "answer_id": 42374696, "question_id": 42372972, "link": "https://stackoverflow.com/questions/42372972/undefined-method-attack-for-playerclass/42374696#42374696", "title": "Undefined Method &quot;attack&quot; for Player::Class", "body": "<p>Welcome to the exciting world of object-oriented design. Many adventurers died inside. </p>\n\n<p>I think you may have a small misunderstanding about the difference between classes and instances. If so, I strongly advise you to read about it before continuing. </p>\n\n<p>You created a new instance of <code>Player</code> when you called <code>Player.new</code>. Your first mistake was not putting it in a variable. </p>\n\n<p>Try something like this:</p>\n\n<pre><code>my_player = Player.new\n</code></pre>\n\n<p>Secondly, you are trying to call <code>encounter</code> on the <code>Player</code> class, while you should call it on the new instance. </p>\n\n<pre><code>my_player.encounter\n</code></pre>\n\n<p>You do the same thing inside the <code>Monster</code> class with <code>Player.attack</code>. </p>\n\n<p>I could tell you how to solve each of these problems individually, but I think you would benefit more from redesigning some parts of the project to be easier to change in the future. Hopefully, most of the problems will resolve themselves along the way.</p>\n\n<p>Generally speaking, the shorter a method is, the better. When you tell the <code>Player</code> to <code>attack</code>, that is all it should do. Instead, it does all sorts of things, including getting the monster to attack!</p>\n\n<p>It suddenly becomes apparent that the two classes have quite a lot in common: they both attack; they both take damage, and they both die. It's time to make a superclass. (If you are not familiar with how classical inheritance works, you should learn - this truly is the perfect use case for it.) </p>\n\n<pre><code> class Character\n   attr_accessor :health\n\n   def attack damageable, damage\n     damageable.take_damage damage\n   end\n\n   def take_damage damage\n     health -= damage  # Equivenent to health = health - damage\n     potential_death\n   end\n\n   def potential_death\n     if dead?\n       die\n     end\n   end\n\n   def dead?\n     health &lt;= 0  # With random damage, it could be less than 0.\n   end\n\n   def die  # overruled by subclass\n   end\n end\n</code></pre>\n\n<p>The greatest advantage to doing it like this is you only have to write the code in one place, and it will work for everything. If you change your mind about a design decision, you can change it in one place and know that everything will be adjusted. </p>\n\n<p>You can make a subclass similar to this:</p>\n\n<pre><code>class Monster &lt; Character\n  def die\n    super  # Call the copy of die in Character, in case it contains something important\n    reward killer\n    puts \"You kill the monster...\"\n  end\n\n  def reward rewardable\n    rewardable.gain_money 30\n  end\nend\n\nclass Player &lt; Character\n  def die\n    super  # Call the copy of die in Character, in case it contains something important\n    puts \"You died...\"\n    game.over\n  end\nend\n</code></pre>\n\n<p>(These are only examples; they are not as complete as the code you already have.)</p>\n\n<p>Do you see how each method only does one thing? If you apply that principle to everything you write, it will become much easier to reuse bits and pieces. </p>\n\n<p>I hope this has been useful. If you decide to stick with what you have and just fix the errors, just say so in the comments, and I'll help you with that. </p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 11, "user_id": 7600001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f28e8dc966e82f020504ac14287e30?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Doe Boi", "link": "https://stackoverflow.com/users/7600001/jay-doe-boi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488386286, "creation_date": 1487694925, "last_edit_date": 1488386286, "question_id": 42372972, "link": "https://stackoverflow.com/questions/42372972/undefined-method-attack-for-playerclass", "title": "Undefined Method &quot;attack&quot; for Player::Class", "body": "<p>So I am trying to make a text based game with classes for an assignment. I have worked for 2 hours and could not find what the problem is. </p>\n\n<pre><code>    class Rankuun\n    attr_accessor :rankuun_damage, :rankuun_health\n    def initialize\n    rankuun_health = 200\n    rankuun_damage = 100\n    end  \n    def monolouge\n    puts 'Rankuun: \"So, I see that you have lived this long. I am suprised.'\n    puts \"Not a single libing creature has lived for this long inside my dungeon.\"\n    puts \"But it's time that your endless slaughter of my brethren are halted.\"\n    puts \"Now face what true fear really is!\"\n    puts \"Hoc vanitas est, et non est fere ut serves!\"\n    puts \"You see a mystical aura rise around Rankuun, and hear the shouts of agony\"\n    puts \"Rankuun has grown twice in size, and has taken the form of some kind of lich\"\n    puts 'Rankuun: WELCOME TO DIE!\"'\n    end\n\n    end\n    class Player\n    attr_accessor :health,  :gold\n    def initialize\n    health = 100\n    money = 200\n    puts \"Health: #{health}\"\n    puts \"Gold: #{money}\"\n\nend\ndef attack\nputs \"You attack the monster!\"\n    hitmiss = 1\n        if hitmiss == 1\n        dmg = rand(5..10)\n        puts \"You hit the monster, and do #{dmg} damage!\"\n        monster_health = monster_health - dmg\n          elsif hitmiss == 2\n        puts \"You missed!\"\n            end \n        end\ndef guard\n    puts \"You attempt to defend yourself\"\n    guard = rand(1..2)\n        if guard == 1\n            counter = rand(5..10)\n            puts \"You block the damage, and counterstrike for #{counter} damage\"\n            monster_health = monster_health - counter\n        elsif guard == 2\n            monster_counter = rand(1..5)\n            puts \"You try to guard, but the enemy hits harder than you expected, and you get dealt #{monster_counter}\"\n            health = health = monster_counter\n        end\n        end\ndef loot\n    puts \"You search the room and find:\"\n    loot_item = rand (2..3)\n        if loot_item == 2\n            puts \"You find some gold!\"\n            money = money + 50\n              puts \"Health: #{health}\"\n        puts \"Gold: #{money}\"\n                elsif loot_item == 3\n                puts \"You find a curious potion that seems to heal you\"\n                health = health + 50\n                puts \"Health: #{health}\"\n        puts \"Gold: #{money}\"\n            end\nend\ndef encounter\n    encounter = rand(1..2)\n    if encounter == 1\n    puts \"A monster confronts you!\"\n    monster = Monster.new\n    elsif encounter == 2\n      puts \"There appears to be no monsters in this room\"\n    end \nend\n\nend\nclass Monster\n  attr_accessor :monster_health,  :monster_damage\ndef initialize\n  monster_health = 50\n  monster_damage = 10\nend\ndef monster_attack\n  puts \"The monster attacks you!\"\nend\nend\n\nputs \"There has been a saying in your town for as long as you can remember:\"\nputs \"Ne pas entrer dans le Donjon De Rankuun\"\nputs 'It means: \"Do not enter The Dungeon of Rankuun\"'\nputs \"Many adventurers died inside, and the only living creature in there is the man named Rankuun\"\nputs \"He has great power over the Dungeon, reviving the dead and casting black magic\"\nputs \"You have been selected by the village to go into the Dungeon and exterminate Rankuun\"\nputs \"You have been given a sword, a shield, and some gold. Now you must enter:\"\nputs \"T H E  D U N G E O N  O F  R A N K U U N!\"\nputs \"\"\nputs \"\"\n\nplayer = Player.new\nplayer.encounter\nroom1 = gets.chomp\n  if room1 == \"attack\"\n  player.attack\n  elsif room1 == \"loot\"\n    player.loot\n  end\n</code></pre>\n\n<p>It would be great if this problem were solved. Thanks for responding and aiding me in my assignment.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "rubygems"], "comments": [{"owner": {"reputation": 37, "user_id": 859251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30fcee313005cf38c2e572bdd0c6600e?s=128&d=identicon&r=PG", "display_name": "lioooo", "link": "https://stackoverflow.com/users/859251/lioooo"}, "edited": false, "score": 0, "creation_date": 1487695385, "post_id": 42372897, "comment_id": 71895734, "body": "i just found answer in <a href=\"http://stackoverflow.com/questions/27115588/wrapping-the-bootstrap-sass-gem-in-another-gem-causes-asset-manifests-to-break\" title=\"wrapping the bootstrap sass gem in another gem causes asset manifests to break\">stackoverflow.com/questions/27115588/&hellip;</a>"}], "owner": {"reputation": 37, "user_id": 859251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30fcee313005cf38c2e572bdd0c6600e?s=128&d=identicon&r=PG", "display_name": "lioooo", "link": "https://stackoverflow.com/users/859251/lioooo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1487728724, "answer_count": 0, "score": 1, "last_activity_date": 1487694742, "creation_date": 1487694742, "question_id": 42372897, "link": "https://stackoverflow.com/questions/42372897/how-do-i-import-ruby-gems-assets-to-project", "closed_reason": "Duplicate", "title": "How do I import ruby gems assets to project?", "body": "<p>I  develop gem named gemini.</p>\n\n<p>like this: in gemini assets file gemini.coffee required bootstrap plugins and gemini.scss import bootstrap.scss. </p>\n\n<p>Anothor project named: study, the assets appplication.js require gemini.coffee and application.css import gemini.scss</p>\n\n<p>Study project Gemfile config gemini then bundle \nStart study project services and open <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a> but raise error: <strong>File to import not found or unreadable: bootstrap-sprockets.</strong></p>\n\n<p>I want to know: </p>\n\n<ol>\n<li><p>how do i require gemini.scss to my project and also it required bootstrap plugins</p></li>\n<li><p>why raise error</p></li>\n<li><p>what is best practice develop ruby gems </p></li>\n</ol>\n\n<p>thks for everyone!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake-task"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1487690163, "post_id": 42370749, "comment_id": 71891726, "body": "Are there customers in the production database?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1487705095, "post_id": 42370749, "comment_id": 71901452, "body": "It&#39;s way harder to debug if you don&#39;t have a stacktrace for the error (the way you are rescuing will lose it). It&#39;s best not to have &quot;naked&quot; rescues in this way (see <a href=\"http://stackoverflow.com/questions/10048173/why-is-it-a-bad-style-to-rescue-exception-e-in-ruby\">here</a>), but at minimum you could change the rescue to <code>rescue StandardError =&gt; e</code> and then in the rescue block read <code>e.class</code> (the type of error), <code>e.message</code>, and <code>e.backtrace</code>. Also, if you can SSH into production and run the task from there, you&#39;d have an easier time seeing the results"}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1487744286, "post_id": 42370749, "comment_id": 71916586, "body": "@ReggieB Yes there are customers in my production DB."}, {"owner": {"reputation": 1420, "user_id": 5045091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MAqXn.jpg?s=128&g=1", "display_name": "theterminalguy", "link": "https://stackoverflow.com/users/5045091/theterminalguy"}, "edited": false, "score": 0, "creation_date": 1487745605, "post_id": 42370749, "comment_id": 71917192, "body": "<code>Undefined method symbol for nil class</code> Check your rails console if there are any customer in the DB, because it seems there is not."}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1487746261, "post_id": 42370749, "comment_id": 71917557, "body": "The customers table is what is our base. It is never empty."}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487744739, "creation_date": 1487689048, "last_edit_date": 1487744739, "question_id": 42370749, "link": "https://stackoverflow.com/questions/42370749/could-not-load-model-data-in-rake-task-only-in-production", "title": "Could Not Load Model Data in rake task only in production", "body": "<p>I have a rake task</p>\n\n<pre><code>namespace :authentication do\n\ndesc \"Automatically runs authentication tester\"\n\ntask :tester =&gt; :environment do\n  begin\n    Auth.perform\n  rescue\n    SystemEvent.error(50049, \"Authentication Tester Finished Unsuccessfully.\")\n  end\n end\nend\n</code></pre>\n\n<p>in my Auth.perform, I have used, </p>\n\n<pre><code>Customer.first.symbol\n</code></pre>\n\n<p>I am loading Customer from database. But it always comes to the rescue block saying</p>\n\n<pre><code>undefined method 'symbol' for nil:class\n</code></pre>\n\n<p>In my application.rb</p>\n\n<pre><code>config.autoload_paths += Dir.glob(\"#{Rails.root}/lib/**/*\").select{|d| File.directory?(d)}\nconfig.autoload_paths += Dir.glob(\"#{Rails.root}/app/models/**/*\").select{|d| File.directory?(d)}\nconfig.autoload_paths += [\"#{Rails.root}/services/\"]\n</code></pre>\n\n<p>This calls Auth.perform in development. Only in production it comes to rescue block. Is this something because I am missing?</p>\n\n<pre><code>require 'rake'\n</code></pre>\n\n<p>Please provide a solution. It has been one week I am picking my head. </p>\n\n<p><strong>Please Note: this rake task is called by a cron running in another instance.</strong></p>\n"}, {"tags": ["ruby", "asynchronous", "parallel-processing", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1487692348, "creation_date": 1487692348, "answer_id": 42371977, "question_id": 42370591, "link": "https://stackoverflow.com/questions/42370591/how-to-create-async-for-loops/42371977#42371977", "title": "How to create async for loops?", "body": "<p>You can use the <a href=\"https://github.com/grosser/parallel\" rel=\"nofollow noreferrer\">parallel gem</a> for that:</p>\n\n<pre><code>Parallel.each(elements) { |element| do_something(element) }\n</code></pre>\n\n<p>You can also control the number of threads (with the <code>in_threads:</code> keyword). If you need true parallelism, you can also specify the number of processes (with the <code>in_processes:</code> keyword).</p>\n"}], "owner": {"reputation": 133, "user_id": 5315883, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1lioh.png?s=128&g=1", "display_name": "Grimbox", "link": "https://stackoverflow.com/users/5315883/grimbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487692348, "creation_date": 1487688658, "question_id": 42370591, "link": "https://stackoverflow.com/questions/42370591/how-to-create-async-for-loops", "title": "How to create async for loops?", "body": "<p>Is it possible to make a for loop divided asynchronous? That each iteration will be calculated in parallel to speed up the iteration?</p>\n"}, {"tags": ["arrays", "ruby", "shuffle"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 3, "creation_date": 1487688610, "post_id": 42370529, "comment_id": 71890548, "body": "hmmm seems more suitable for <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487688685, "post_id": 42370529, "comment_id": 71890608, "body": "Do you want to implement this exact algorithm or do you want to shuffle somehow, just not use <code>#shuffle</code>?"}, {"owner": {"reputation": 17, "user_id": 7599258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd7544806abad5249af10d58f2753d75?s=128&d=identicon&r=PG&f=1", "display_name": "Heisenmali", "link": "https://stackoverflow.com/users/7599258/heisenmali"}, "reply_to_user": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 1, "creation_date": 1487688755, "post_id": 42370529, "comment_id": 71890669, "body": "@niceman faire enough! Thanks for the info!"}, {"owner": {"reputation": 17, "user_id": 7599258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd7544806abad5249af10d58f2753d75?s=128&d=identicon&r=PG&f=1", "display_name": "Heisenmali", "link": "https://stackoverflow.com/users/7599258/heisenmali"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1487688886, "post_id": 42370529, "comment_id": 71890761, "body": "@ndn I believe this algorithm does the trick of thoroughly shuffling the array, however I might be mistaken ? I am looking to improve upon this algorithm i.e. either finding a more elegant solution."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487694362, "post_id": 42370529, "comment_id": 71894999, "body": "Ruby&#39;s style conventions strongly encourage dropping empty argument lists: <code>size()</code> becomes <code>size</code>. This aids considerably in readability, especially when chaining operations. Also instead of <code>rand(1..n)-1</code> do <code>rand(0...n)</code> where the <code>...</code> operator goes up to but does not include the final value."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7599258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd7544806abad5249af10d58f2753d75?s=128&d=identicon&r=PG&f=1", "display_name": "Heisenmali", "link": "https://stackoverflow.com/users/7599258/heisenmali"}, "edited": false, "score": 0, "creation_date": 1487692801, "post_id": 42371292, "comment_id": 71893868, "body": "This is great, thanks! Would I be correct in saying the shuffled array exists only within the method, as does the to_shuffle array from which the elements are deleted during each round of recursion? This means a second array also named to_shuffle, the initial array where the elements are stored remains unchanged by the recursion and still exists outside the method?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 17, "user_id": 7599258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd7544806abad5249af10d58f2753d75?s=128&d=identicon&r=PG&f=1", "display_name": "Heisenmali", "link": "https://stackoverflow.com/users/7599258/heisenmali"}, "edited": false, "score": 0, "creation_date": 1487692937, "post_id": 42371292, "comment_id": 71893967, "body": "@Heisenmali, the version I wrote would not change the array that you passed if that is what you are asking. In general, the variables will be local for the method and will not conflict with outside variables."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1487701276, "post_id": 42371292, "comment_id": 71899238, "body": "Please, do not recommend the &quot;random sorting shuffle&quot; to anybody without mentioning the fact that it is heavily biased and not at all uniform at best, and really just utterly broken: the comparator violates the basic laws of a comparison function and thus the result of the sort is essentially undefined. Really, the only correct way to implement a shuffle is to use the Durstenfeld variation of the Fisher-Yates algorithm (popularized as &quot;Algorithm P&quot; by Donald Knuth in TAOCP) for in-place shuffling, or the inside-out variant for non-destructive shuffling."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487709076, "post_id": 42371292, "comment_id": 71903661, "body": "@J&#246;rgWMittag, I would love to read it if you write it as an answer."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1487690492, "creation_date": 1487690492, "answer_id": 42371292, "question_id": 42370529, "link": "https://stackoverflow.com/questions/42370529/writing-a-shuffle-method-in-ruby/42371292#42371292", "title": "Writing a shuffle method in Ruby", "body": "<p>Your idea is to pick elements at random until you have picked all elements.</p>\n\n<p>Other than verbosity, another issue that you have is that you use <code>#delete</code>. Hence if there are two repeating elements in the array, you will get only one in the shuffled result.</p>\n\n<p>Also you mutate the array passed, which is generally undesirable. Here is an implementation of the same algorithm:</p>\n\n<pre><code>def recursive_shuffle(to_shuffle, shuffled = [])\n  return shuffled if to_shuffle.empty?\n  to_shuffle = to_shuffle.dup if shuffled.empty?\n\n  element = to_shuffle.sample\n  to_shuffle.delete_at(to_shuffle.index(element))\n\n  recursive_shuffle(to_shuffle, shuffled + [element])\nend\n</code></pre>\n\n<hr>\n\n<p>As for a simpler solution:</p>\n\n<pre><code>array.sort_by { rand }\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7599258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd7544806abad5249af10d58f2753d75?s=128&d=identicon&r=PG&f=1", "display_name": "Heisenmali", "link": "https://stackoverflow.com/users/7599258/heisenmali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 42371292, "answer_count": 1, "score": 0, "last_activity_date": 1487690730, "creation_date": 1487688518, "last_edit_date": 1487690730, "question_id": 42370529, "link": "https://stackoverflow.com/questions/42370529/writing-a-shuffle-method-in-ruby", "title": "Writing a shuffle method in Ruby", "body": "<p>I'm quite new to learning ruby and I am working through Learn to Program by Chris Pine. One of the exercises he suggests to try out is that of writing a shuffle method (I am aware of the <code>#shuffle</code> method). So far, I have come up with this code, which seems to do the job: </p>\n\n<pre><code>array_to_shuffle = []\nputs \"Give me a list of words to shuffle, press enter on an empty line for the result.\"\ninput = gets.chomp\n\nwhile input != \"\"\n  array_to_shuffle = array_to_shuffle.push(input)\n  input = gets.chomp\nend\n\ndef recursive_shuffle(array_to_shuffle, shuffled_array = [])\n  return shuffled_array unless array_to_shuffle.size &gt; 0\n  array_size = array_to_shuffle.size()\n  random_number = rand(1..array_size)-1\n  element_transfered = array_to_shuffle [random_number]\n  shuffled_array = shuffled_array.push(element_transfered)\n  array_to_shuffle.delete(element_transfered)\n  recursive_shuffle(array_to_shuffle, shuffled_array)\nend\n\nputs recursive_shuffle(array_to_shuffle)\n</code></pre>\n\n<p>However, it is quite long-winded considering what it actually does. Is there any way I could improve on this?</p>\n"}, {"tags": ["ruby", "encryption", "rotation", "irb"], "comments": [{"owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "edited": false, "score": 0, "creation_date": 1487688969, "post_id": 42370507, "comment_id": 71890834, "body": "It&#39;s definitely an issue with my decrypt_letter function. Check out the following after some debugging in irb:  e.encrypt_letter(&#39;t&#39;,13)  =&gt; &quot;&amp;&quot; &gt; e.decrypt_letter(&#39;&amp;&#39;,13)  =&gt; &quot;3&quot;"}, {"owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "edited": false, "score": 0, "creation_date": 1487689095, "post_id": 42370507, "comment_id": 71890944, "body": "Is there a better method than my &#39;.to_a.reverse.to_h&#39; method?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487701556, "post_id": 42370507, "comment_id": 71899425, "body": "I admit I haven&#39;t looked deeply at your code, but the fact that your decrypt and encrypt methods look differently is a red flag for me. (Actually, the fact that you even have two methods at all is suspicious.) From what I can understand of your code, you are implementing a Caesar Cipher, and the Caesar Cipher is completely symmetrical: encrypting and decrypting are exactly the same thing, just with different keys. There shouldn&#39;t be two methods, and there <i>certainly</i> shouldn&#39;t be two <i>different</i> methods for encryption and decryption, since both are exactly the same."}, {"owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487701672, "post_id": 42370507, "comment_id": 71899495, "body": "@J&#246;rgWMittag thank you so much for the response, I&#39;m just grasping the basics of ruby here. I&#39;m following this tutorial: <a href=\"http://tutorials.jumpstartlab.com/projects/encryptor.html\" rel=\"nofollow noreferrer\">tutorials.jumpstartlab.com/projects/encryptor.html</a> which I guess leads me through implementing the methods as you mentioned but shows the wrong way to do it first? Not sure. Will definitely heed your advice and do some more research."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487702327, "post_id": 42370507, "comment_id": 71899882, "body": "Basically, <code>decrypt(10)</code> is the same as <code>encrypt(-10)</code>, which in turn is the same as <code>encrypt(17)</code> (assuming a 27 &quot;letter&quot; alphabet). More generally, <code>decrypt(N) == encrypt(-N) == encrypt(alphabet.size - N)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487702488, "post_id": 42370507, "comment_id": 71899997, "body": "Another thing I noticed: <code>cipher_for_rotation.to_a.reverse.to_h</code>. You turn the dictionary into an array, reverse the array (i.e. reverse the order of the dictionary), and then turn it into a dictionary again. But order doesn&#39;t matter for dictionaries, so you end up with the same dictionary you started with. To be more precise: Ruby <code>Hash</code>es <i>do</i> preserve the insertion order of keys, and are guaranteed to iterate in that order, so what you have done is reverse the insertion order (and thus reverse the iteration order). But you never iterate over the hash, you only access its values."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1487702499, "post_id": 42370507, "comment_id": 71900003, "body": "So it&#39;s essentially a NO-OP."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "edited": false, "score": 0, "creation_date": 1487701775, "post_id": 42374526, "comment_id": 71899548, "body": "This might be exactly what I was looking for, thanks for the input. Yes, this works perfectly. thanks a bunch"}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": false, "score": 0, "last_activity_date": 1487699725, "creation_date": 1487699725, "answer_id": 42374526, "question_id": 42370507, "link": "https://stackoverflow.com/questions/42370507/basic-rotation-based-encrypt-decrypt-issues/42374526#42374526", "title": "Basic Rotation Based Encrypt/Decrypt Issues", "body": "<p>You could just look up the key of the hash.</p>\n\n<pre><code>def decrypt_letter(letter, rotation)\n  cipher_for_rotation = cipher(rotation)\n  cipher_for_rotation.key(letter)\nend\n</code></pre>\n\n<p>Example: </p>\n\n<pre><code>irb(main):003:0&gt; e = Encryptor.new\n=&gt; #&lt;Encryptor:0x007fbcea9b65c8&gt;\nirb(main):004:0&gt; enc = e.encrypt \"Hello, World!\", 10\n=&gt; \"Rovvy6*ay!vn+\"\nirb(main):005:0&gt; e.decrypt enc, 10\n=&gt; \"Hello, World!\"\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487699725, "creation_date": 1487688447, "last_edit_date": 1487688798, "question_id": 42370507, "link": "https://stackoverflow.com/questions/42370507/basic-rotation-based-encrypt-decrypt-issues", "title": "Basic Rotation Based Encrypt/Decrypt Issues", "body": "<p>Basically I'm following Jumpstart's lab's challenge Encryptor program, and have run into some issues.</p>\n\n<p>Here is my code</p>\n\n<pre><code>class Encryptor\n  def cipher(rotation)\n    characters = (' '..'z').to_a\n    rotated_characters = characters.rotate(rotation)\n    Hash[characters.zip(rotated_characters)]\n  end\n\n  def encrypt_letter(letter, rotation)\n    cipher_for_rotation = cipher(rotation)\n    cipher_for_rotation[letter]\n  end\n\n  def encrypt(string, rotation)\n    letters = string.split(\"\")\n\n    results = letters.collect do |letter|\n        encrypt_letter = encrypt_letter(letter, rotation)\n    end\n\n    results.join\n  end\n\n  def decrypt_letter(letter, rotation)\n    cipher_for_rotation = cipher(rotation)\n    reversed_cipher = cipher_for_rotation.to_a.reverse.to_h\n    reversed_cipher[letter]\n  end\n\n  def decrypt(string, rotation)\n    letters = string.split(\"\")\n\n    results = letters.collect do |letter|\n        decrypt_letter = decrypt_letter(letter, rotation)\n    end\n\n    results.join\n  end\nend\n</code></pre>\n\n<p>I'm running into difficulties with my decrypt method. Here is the following pasted from irb</p>\n\n<pre><code>2.3.0 :001 &gt; load './encryptor.rb'\n =&gt; true\n2.3.0 :002 &gt; e = Encryptor.new\n =&gt; #&lt;Encryptor:0x007fe93a0319b8&gt;\n2.3.0 :003 &gt; encrypted = e.encrypt(\"Hello, World!\", 10)\n =&gt; \"Rovvy6*ay!vn+\"\n2.3.0 :004 &gt; e.decrypt(encrypted, 10)\n =&gt; \"\\\\y%%(@4k(+%x5\"\n</code></pre>\n\n<p>As you can see, when decrypting my encrypted string it should be outputting \"Hello, World!\", what I encrypted it with, with a rotation of 10. Don't see what I'm doing wrong here, any help would be appreciated.</p>\n"}, {"tags": ["ruby", "terminal", "rubygems"], "comments": [{"owner": {"reputation": 1376, "user_id": 861493, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GDx2S.jpg?s=128&g=1", "display_name": "tsikov", "link": "https://stackoverflow.com/users/861493/tsikov"}, "edited": false, "score": 0, "creation_date": 1487688573, "post_id": 42370262, "comment_id": 71890522, "body": "What happens when you do <code>xcode-select --install</code> and then try again?"}, {"owner": {"reputation": 288, "user_id": 4658806, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db70782cbc60e3886e7c5773efa59864?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Banck", "link": "https://stackoverflow.com/users/4658806/arne-banck"}, "reply_to_user": {"reputation": 1376, "user_id": 861493, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GDx2S.jpg?s=128&g=1", "display_name": "tsikov", "link": "https://stackoverflow.com/users/861493/tsikov"}, "edited": false, "score": 0, "creation_date": 1487688606, "post_id": 42370262, "comment_id": 71890546, "body": "Running the command as we speak, look at question it fixed one error got me 20 more ..."}, {"owner": {"reputation": 1376, "user_id": 861493, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GDx2S.jpg?s=128&g=1", "display_name": "tsikov", "link": "https://stackoverflow.com/users/861493/tsikov"}, "edited": false, "score": 1, "creation_date": 1487696293, "post_id": 42370262, "comment_id": 71896367, "body": "The problem seems to be with the installation of the <code>unicode-0.4.4.2</code> gem. <a href=\"https://github.com/inukshuk/jekyll-scholar/issues/171#issuecomment-253515270\" rel=\"nofollow noreferrer\">Here is an issue related to your problem</a> From the issue: &quot;I realized this was an issue with the compilers etc bundled with XCode. Poking around a bit, I found that updating to macOS Sierra somehow messed up XCode in general. Updating XCode 8 fixed everything. So this is now resolved! It was some funky issue with XCode upon updating to macOS Sierra, not jekyll-scholar.&quot;"}, {"owner": {"reputation": 288, "user_id": 4658806, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db70782cbc60e3886e7c5773efa59864?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Banck", "link": "https://stackoverflow.com/users/4658806/arne-banck"}, "reply_to_user": {"reputation": 1376, "user_id": 861493, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GDx2S.jpg?s=128&g=1", "display_name": "tsikov", "link": "https://stackoverflow.com/users/861493/tsikov"}, "edited": false, "score": 0, "creation_date": 1487748688, "post_id": 42370262, "comment_id": 71918816, "body": "Thanks, seems fixed now also had to install gem here /usr/local/bin cause no permissions in new osx."}], "owner": {"reputation": 288, "user_id": 4658806, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db70782cbc60e3886e7c5773efa59864?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Banck", "link": "https://stackoverflow.com/users/4658806/arne-banck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1935, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487689019, "creation_date": 1487687809, "last_edit_date": 1487689019, "question_id": 42370262, "link": "https://stackoverflow.com/questions/42370262/error-failed-to-build-gem-native-extension-on-mac", "title": "ERROR: Failed to build gem native extension on mac", "body": "<p>Im trying to install a gem but keep running into the following error:</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing mandrill-template-manager:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2/ext/unicode\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby -r ./siteconf20170221-17481-1m13rrx.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2/ext/unicode\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2/ext/unicode\nmake \"DESTDIR=\"\nmake: *** No rule to make target `/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/include/ruby-2.0.0/universal-darwin16/ruby/config.h', needed by `unicode.o'.  Stop.\n\nmake failed, exit code 2\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-16/2.0.0/unicode-0.4.4.2/gem_make.out\n</code></pre>\n\n<p>I have tried the following:</p>\n\n<ul>\n<li>adjusting the sources file with http</li>\n<li>downgrading ruby</li>\n</ul>\n\n<p>UPDATE: RAN xcode-select --install</p>\n\n<p>RESULT;</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing mandrill-template-manager:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2/ext/unicode\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby -r ./siteconf20170221-18173-nchdps.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2/ext/unicode\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2/ext/unicode\nmake \"DESTDIR=\"\ncompiling unicode.c\nIn file included from unicode.c:13:\nIn file included from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/include/ruby-2.0.0/ruby.h:33:\nIn file included from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/include/ruby-2.0.0/ruby/ruby.h:68:\n/usr/include/stdio.h:133:19: error: expected ')'\n        int     (* _Nullable _close)(void *);\n                             ^\n/usr/include/stdio.h:133:6: note: to match this '('\n        int     (* _Nullable _close)(void *);\n                ^\n/usr/include/stdio.h:134:19: error: expected ')'\n        int     (* _Nullable _read) (void *, char *, int);\n                             ^\n/usr/include/stdio.h:134:6: note: to match this '('\n        int     (* _Nullable _read) (void *, char *, int);\n               ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n20 errors generated.\nmake: *** [unicode.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/unicode-0.4.4.2 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-16/2.0.0/unicode-0.4.4.2/gem_make.out\n</code></pre>\n\n<p>Too many errors but u get the picture ;)</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 2, "creation_date": 1487687520, "post_id": 42370006, "comment_id": 71889653, "body": "First, a good place to debug ruby regex&#39;s is <a href=\"http://www.rubular.com/\" rel=\"nofollow noreferrer\">rubular.com</a>"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "reply_to_user": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1487687910, "post_id": 42370006, "comment_id": 71889982, "body": "@nPn Never knew about that site. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1487687932, "post_id": 42370233, "comment_id": 71890004, "body": "deleting the <code>,</code> is smart :)"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1487687971, "post_id": 42370233, "comment_id": 71890036, "body": "What&#39;s the difference between <code>scan</code> and <code>match</code>? One is faster?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 1, "creation_date": 1487688046, "post_id": 42370233, "comment_id": 71890112, "body": "@Sylar, <code>scan</code> returns an array of strings with all matches. <code>match</code> returns a match object with the first match."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1487687722, "creation_date": 1487687722, "answer_id": 42370233, "question_id": 42370006, "link": "https://stackoverflow.com/questions/42370006/extract-float-value-or-integer-value-from-string/42370233#42370233", "title": "Extract Float Value or Integer Value from string", "body": "<p>Simply remove the commas before matching:</p>\n\n<pre><code>str.delete(',').match(/\\d+\\.\\d+/)[0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 5706543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dR9ZqD3zFxs/AAAAAAAAAAI/AAAAAAAAAPg/aMzyNnYcIyI/photo.jpg?sz=128", "display_name": "Gennady Grishkovtsov", "link": "https://stackoverflow.com/users/5706543/gennady-grishkovtsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1487704857, "creation_date": 1487704857, "answer_id": 42376116, "question_id": 42370006, "link": "https://stackoverflow.com/questions/42370006/extract-float-value-or-integer-value-from-string/42376116#42376116", "title": "Extract Float Value or Integer Value from string", "body": "<p>Try the regexp:</p>\n\n<pre><code>[\u00a3$](\\d+,\\d+\\.\\d+|\\d+\\.\\d+|\\d+)\n</code></pre>\n\n<hr>\n\n<pre><code>str.scan(/[\u00a3$]\\d+,\\d+\\.\\d+|\\d+\\.\\d+|\\d+/).each{|item| item.gsub!(/[\u00a3$,]/, '')}\n</code></pre>\n\n<p><a href=\"http://www.rubular.com/r/fyP6FaV4Zz\" rel=\"nofollow noreferrer\">Example</a></p>\n"}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 42370233, "answer_count": 2, "score": 1, "last_activity_date": 1487704857, "creation_date": 1487687150, "last_edit_date": 1487687431, "question_id": 42370006, "link": "https://stackoverflow.com/questions/42370006/extract-float-value-or-integer-value-from-string", "title": "Extract Float Value or Integer Value from string", "body": "<p>I have been searching on SO to find out how to achieve what I want. I've seen answers but none for what I want:</p>\n\n<pre><code>str = \"hello \u00a325,500.98 and $5656.99\"\nstr.match(/\\d+\\.\\d+/)[0] # =&gt; \"500.98\". Close but not what I want.\n\nstr.scan(/\\d/).join('') # Seems to combine all numbers - no.\n</code></pre>\n\n<p><strong>I expect to get</strong> <code>25500.98</code>. Anything after the last digit will be discarded (hope I make sense here). I'm rubbish at regex. I think I've tried many variations in the rails console but nothing comes near except <code>str.match(/\\d+\\.\\d+/)[0]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "search"], "answers": [{"tags": [], "owner": {"reputation": 708, "user_id": 2659285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e4c84000579d88c9298a6616a42e29?s=128&d=identicon&r=PG", "display_name": "cefigueiredo", "link": "https://stackoverflow.com/users/2659285/cefigueiredo"}, "is_accepted": false, "score": 0, "last_activity_date": 1487715609, "creation_date": 1487715609, "answer_id": 42379065, "question_id": 42369100, "link": "https://stackoverflow.com/questions/42369100/ruby-on-rails-search-collection-check-boxes-on-a-form/42379065#42379065", "title": "Ruby on Rails: Search collection_check_boxes on a form", "body": "<p>You can have a form to work with an unobstrusive javascript.</p>\n\n<p>Like</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;!-- Form outside your main form... the REMOTE flag will tell rails \n       to prevent the default behaviour of a form make a request \n       for JS response --!&gt;\n  &lt;%= form_tag contacts_path, remote: true, method: :get do  %&gt;\n    &lt;%= input_tag :search %&gt; \n    &lt;%= button_tag \"Search\" %&gt;\n  &lt;% end %&gt;\n\n  &lt;div id=\"email-form\"&gt;\n    &lt;%= form_for @email, email_path do |f| %&gt;\n      &lt;!-- Many inputs relative with email omited--!&gt;\n\n      &lt;div class=\"contact-list\"&gt;\n      &lt;/div&gt;\n\n      &lt;%= f.submit 'Submit' %&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Have an controller/action that search for your contacts and returns it for a js view...</p>\n\n<pre><code>// ContactController\n\ndef index\n  respond_to do |format|\n    format.html { @contacts = Contact.all }\n    format.js { @contacts = Contact.find_by(firstname: params[:search]) }\n  end\nend\n</code></pre>\n\n<p>And have a view for that action/controller that manipulate the html to append the contacts to be selected</p>\n\n<pre><code>// views/contacts/index.js.erb\n$(document).ready(function() {\n  $('#contact-list').append(\"&lt;%= collection_check_boxes :email, :contact_ids, @collection, :id, :firstname %&gt;\")\n})\n</code></pre>\n\n<p>That is a very simple example... and I don't handle repetition... if you search for the same thing twice...</p>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487715609, "creation_date": 1487684837, "question_id": 42369100, "link": "https://stackoverflow.com/questions/42369100/ruby-on-rails-search-collection-check-boxes-on-a-form", "title": "Ruby on Rails: Search collection_check_boxes on a form", "body": "<p>In my RoR application I have functionality that allows a user to select contacts to send an email to. I want to add to this functionality so that a user can search the contacts.</p>\n\n<p>Currently, the contacts are displayed on the <code>views/emails/form.html.erb</code> in checkboxes that the user can select through:</p>\n\n<pre><code>&lt;%= f.collection_check_boxes :contact_ids, Contact.where(user_id: session[:user_id]), :id, :firstname %&gt;\n</code></pre>\n\n<p>Is it possible to build on this by adding a search bar above the checkboxes that allows the user to search the checkboxes by first name?</p>\n"}, {"tags": ["ruby", "oracle", "plsql", "datatable", "jruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487696725, "post_id": 42368871, "comment_id": 71896643, "body": "Why are you repeatedly assigning to the same variable? You probably mean <code>map</code>."}, {"owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487697942, "post_id": 42368871, "comment_id": 71897377, "body": "@tadman How would that look?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487698921, "post_id": 42368871, "comment_id": 71897956, "body": "<code>records = data.map { | val| ... }</code> instead using <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a>."}, {"owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487701234, "post_id": 42368871, "comment_id": 71899209, "body": "<code>records = data.map { | k, v | { k.to_sym =&gt; v } }</code>"}, {"owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487701272, "post_id": 42368871, "comment_id": 71899236, "body": "So would this end up giving me a table of data that had key value pairs?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487701510, "post_id": 42368871, "comment_id": 71899387, "body": "What does <code>data</code> look like? Unless it&#39;s a Hash that won&#39;t be happening. You need to be more specific about what you&#39;re receiving here, and what you want your method to return."}, {"owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487701808, "post_id": 42368871, "comment_id": 71899573, "body": "Data will be something like:"}, {"owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487701912, "post_id": 42368871, "comment_id": 71899634, "body": "<code>id: 123, order_number: 9570</code>, etc. So a table of data with key value pairs."}, {"owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487712457, "post_id": 42368871, "comment_id": 71905713, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/136285/discussion-between-andrew-and-tadman\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487705640, "creation_date": 1487705640, "answer_id": 42376346, "question_id": 42368871, "link": "https://stackoverflow.com/questions/42368871/ruby-table-data-structure-to-pl-sql/42376346#42376346", "title": "Ruby Table Data Structure to PL/SQL", "body": "<p>If you're looking to transform data like that, then try this:</p>\n\n<pre><code>data.map do |record|\n  [ record[:id], record[:order_number ]\nend.to_h\n</code></pre>\n\n<p>Where that should produce a Hash with the <code>:id</code> value as the key and the <code>:order_number</code> as the value.</p>\n"}], "owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487705640, "creation_date": 1487684286, "question_id": 42368871, "link": "https://stackoverflow.com/questions/42368871/ruby-table-data-structure-to-pl-sql", "title": "Ruby Table Data Structure to PL/SQL", "body": "<p>Is there a way in Ruby to populate a table of data that would then be passed to a stored procedure?</p>\n\n<p>Essentially what I'm trying to do is something like the below, but not entirely sure how to populate a table data record in Ruby.</p>\n\n<pre><code>def populate_record(data)\n\n  record = {}\n\n  data.each do |val|\n  record = {\n    :id           =&gt; val[:id],\n    :order_number =&gt; val[:order_number]\n  }\n\n  end\nend\n</code></pre>\n\n<p>So <code>record</code> would be my table of data and would contain several rows of data with multiple columns. This structure would match my table record in the PL/SQL stored procedure.</p>\n\n<p>Any suggestions how to do this correctly in Ruby? </p>\n"}, {"tags": ["ruby", "postgresql", "engineyard"], "comments": [{"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 1, "creation_date": 1487683678, "post_id": 42368535, "comment_id": 71886874, "body": "<code>show hba_file</code> in psql and vi it"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1487684733, "post_id": 42368535, "comment_id": 71887623, "body": "What is the OS? Do you have SSH access? Dou you have sudo permissions?"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 3158545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tnZj7.png?s=128&g=1", "display_name": "keoghpe", "link": "https://stackoverflow.com/users/3158545/keoghpe"}, "edited": false, "score": 1, "creation_date": 1524217996, "post_id": 42368784, "comment_id": 86893400, "body": "I&#39;ve followed the steps above but I&#39;m still getting the same error. I&#39;d be really gratefully if someone added a sample hba entry to the answer above. Otherwise the answer is excellent."}], "tags": [], "owner": {"reputation": 1890, "user_id": 251369, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5e85d79c4d7bbe9f7e51305b100351cf?s=128&d=identicon&r=PG", "display_name": "k_shil", "link": "https://stackoverflow.com/users/251369/k-shil"}, "is_accepted": true, "score": 2, "last_activity_date": 1487684078, "creation_date": 1487684078, "answer_id": 42368784, "question_id": 42368535, "link": "https://stackoverflow.com/questions/42368535/fatal-no-pg-hba-conf-entry-for-host-when-setting-up-blazer-gem/42368784#42368784", "title": "FATAL: no pg_hba.conf entry for host when setting up blazer gem", "body": "<p>You can try the following steps. I've assumed that your DB name is <code>my_db</code>. </p>\n\n<ul>\n<li>Connect to the instance via SSH (the link can be found on the EngineYard environment page)</li>\n<li><p>Connect to the\ndatabase as superuser <code>psql -U postgres -h localhost -d\nmy_db</code>. If you don't have the password, check your database secrets here <code>/data/my_db/current/config/database.yml</code></p></li>\n<li><p>After connecting to DB identify location of hba file by typing <code>SHOW\nhba_file;</code></p></li>\n<li>Quit psql by typing <code>\\q</code></li>\n<li>Use previously identified path to open the <code>hba_file</code> file and add the missing user. E.g via vim <code>sudo vim /db/postgresql/9.5/data/pg_hba.conf</code>. Note the sudo command</li>\n<li>The use should be added under <code># IPv4 postgres\nuser for 10.x with md5:</code></li>\n<li>Connect to the database again</li>\n<li>Reload the configuration via <code>select pg_reload_conf();</code> command</li>\n</ul>\n\n<p>After all steps are performed, Blazer queries should be accessible.</p>\n"}], "owner": {"reputation": 1075, "user_id": 578564, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a40d3467a4967c0bbf363252dd53b77?s=128&d=identicon&r=PG", "display_name": "olegflo", "link": "https://stackoverflow.com/users/578564/olegflo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2207, "favorite_count": 0, "accepted_answer_id": 42368784, "answer_count": 1, "score": 1, "last_activity_date": 1487685417, "creation_date": 1487683450, "last_edit_date": 1487685417, "question_id": 42368535, "link": "https://stackoverflow.com/questions/42368535/fatal-no-pg-hba-conf-entry-for-host-when-setting-up-blazer-gem", "title": "FATAL: no pg_hba.conf entry for host when setting up blazer gem", "body": "<p>My application uses the blazer gem for visualizing DB queries. </p>\n\n<p>During the setup I've encountered the following error:</p>\n\n<p><code>FATAL: no pg_hba.conf entry for host \"111.22.33.44\", user \"blazer\", database \"my_db\", SSL off</code></p>\n\n<p>My application is hosted on EngineYard and uses PostgreSQL.</p>\n\n<p>How can I find and modify the pg_hba.conf on EngineYard?</p>\n\n<p>upd</p>\n\n<p>I do have SSH access to EngineYard cloud.</p>\n\n<p>Instance: <code>General Purpose (M3) Large</code>.</p>\n\n<p>OS: EngineYard's Gentoo.</p>\n"}]