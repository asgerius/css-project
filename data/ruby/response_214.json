[{"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1550100298, "post_id": 54680922, "comment_id": 96150847, "body": "Thanks, that fixed it but now the status code is 404"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1550100424, "post_id": 54680922, "comment_id": 96150886, "body": "I don&#39;t know how you defined routes, but in the default setting, <code>params[:id]</code> is passed in URL. You should replace <code>&quot;&#47;api&#47;announcements&#47;#{property.slug}&quot;</code> with <code>&quot;&#47;api&#47;announcements&#47;#{data[:id]}&quot;</code>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1550099868, "creation_date": 1550099868, "answer_id": 54680922, "question_id": 54680878, "link": "https://stackoverflow.com/questions/54680878/unexpected-status-code-from-rspec/54680922#54680922", "title": "Unexpected status_code from RSpec", "body": "<p>You use <code>post</code> instead of <code>put</code>. Because of that the request is routed to <code>#create</code> controller action no to <code>#update</code> as you want to.</p>\n\n<p>Btw you write: </p>\n\n<pre><code>Announcement.find(params[id])\n</code></pre>\n\n<p>there's a colon missing:</p>\n\n<pre><code>Announcement.find(params[:id])\n</code></pre>\n"}], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54680922, "answer_count": 1, "score": 0, "last_activity_date": 1550099979, "creation_date": 1550099602, "last_edit_date": 1550099979, "question_id": 54680878, "link": "https://stackoverflow.com/questions/54680878/unexpected-status-code-from-rspec", "title": "Unexpected status_code from RSpec", "body": "<p>I'm writing specs for an API. But the response is coming back with a <code>:created</code> status when it should be <code>:unprocessable_entity</code>.</p>\n\n<h3>announcements_controller</h3>\n\n<pre><code>  def update\n    head :unprocessable_entity unless announcement\n    if annnouncement.update(announcement_params)\n      render json: annoucement, status: :ok\n    else\n      render_unprocessable_entity\n    end\n  end\n\n  def announcement\n    Announcement.find(params[id])\n  end\n</code></pre>\n\n<h3>announcements_controller_spec</h3>\n\n<pre><code>it 'fails when announcement does not exists' do\n  data = {\n    id: 999_999,\n    announcement: {\n      body: ''\n    }\n  }.to_json\n  post \"/api/announcements/#{property.slug}\", params: data, headers: headers\n  expect(response).to have_http_status(:unprocessable_entity)\nend\n</code></pre>\n\n<h3>failure response</h3>\n\n<pre><code>  1) Api::AnnouncementsController#update fails when announcement does not exists\n     Failure/Error: expect(response).to have_http_status(:unprocessable_entity)\n       expected the response to have status code :unprocessable_entity (422) but it was :created (201)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1550089293, "post_id": 54678607, "comment_id": 96146495, "body": "Where are you creating an instance of <code>Ghost</code>?"}, {"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "reply_to_user": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1550089730, "post_id": 54678607, "comment_id": 96146679, "body": "I haven&#39;t created an instance of Ghost. Do I need to do that before trying to access the fragment instance variable off of that?"}, {"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "reply_to_user": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1550089745, "post_id": 54678607, "comment_id": 96146684, "body": "After I type that, it seems like I need to do that as it&#39;s not a class variable?"}, {"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "reply_to_user": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1550089874, "post_id": 54678607, "comment_id": 96146752, "body": "How would I be able to connect the two together? I&#39;m testing in Pry and create a new instance of Ghost and Aiplayer (x = Ghost.new, y = Aiplayer.new). How would I be able to modify the fragment_printer method to link to the Ghost fragment piece (which is constantly changing)?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1550090162, "post_id": 54678607, "comment_id": 96146887, "body": "That is an Instance instance variable. A class instance variable would look more like <code>class Ghost; class &lt;&lt; self; attr_accessor :fragment; end; end;</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550091547, "post_id": 54678607, "comment_id": 96147503, "body": "<a href=\"http://maximomussini.com/posts/ruby-class-variables/\" rel=\"nofollow noreferrer\">maximomussini.com/posts/ruby-class-variables</a>"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "edited": false, "score": 0, "creation_date": 1550091532, "post_id": 54679208, "comment_id": 96147494, "body": "Thanks Steve, can you explain how ghost is being treated? Based off of &quot;attr_accessor :ghost&quot;, is the attached instance of Ghost now an instance variable of the Aiplayer class?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "edited": false, "score": 1, "creation_date": 1550092366, "post_id": 54679208, "comment_id": 96147864, "body": "yes, there&#39;s nothing magic about <code>attr_accessor :ghost</code> it&#39;s just a shortcut way of defining two instance methods... <code>def ghost; @ghost; end</code> and <code>def ghost=(new_value);@ghost = new_value;end</code> so the instance of ghost is stored in the instance variable <code>@ghost</code> of the <code>Aiplayer</code> instance."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1550091055, "creation_date": 1550091055, "answer_id": 54679208, "question_id": 54678607, "link": "https://stackoverflow.com/questions/54678607/accessing-class-instance-variable-from-another-class/54679208#54679208", "title": "Accessing class instance variable from another class", "body": "<p>To link the instances you can pass the Ghost instance into the Aiplayer instance at initialization.</p>\n\n<pre><code>class Aiplayer\n  attr_accessor :ghost\n\n  def initialize(ghost_to_attach)\n    self.ghost = ghost_to_attach\n  end\n\n  def fragment_printer\n    ghost.fragment\n  end\n\nend\n\nx = Ghost.new\ny = Aiplayer.new(x)\n\nx.fragment = 'foo'\n\ny.fragment_printer\n=&gt; \"foo\"\n</code></pre>\n\n<p>This works because the object stored in variable <code>x</code> is the same object stored in the Aiplayer instance <code>ghost</code> attribute.</p>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 1, "last_activity_date": 1550108487, "creation_date": 1550108487, "answer_id": 54682038, "question_id": 54678607, "link": "https://stackoverflow.com/questions/54678607/accessing-class-instance-variable-from-another-class/54682038#54682038", "title": "Accessing class instance variable from another class", "body": "<blockquote>\n  <p>Can anyone give me a quick explanation of this? I'm sure the explanation is simple, but I can't seem to find an answer as to why.</p>\n</blockquote>\n\n<p>You wrote <code>Ghost.fragment</code> - it's not instance method, it's class method.</p>\n\n<p>Class methods are not associated with object. You can read <a href=\"http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/\" rel=\"nofollow noreferrer\">about this</a></p>\n\n<p>Ruby searches method <code>self.fragment</code> in <code>Ghost</code> class, but can't find it.</p>\n\n<pre><code>NoMethodError: undefined method `fragment' for Ghost:Class\n</code></pre>\n\n<p>That's the reason of your problem.</p>\n\n<p>Further depends on what you want. For example you can write <code>Ghost.new(5).fragment</code>. In this case <code>#fragment</code> is instance method that returns <code>@fragment</code></p>\n\n<p>I hope I could give you a sense.</p>\n"}], "owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1550125047, "creation_date": 1550088419, "last_edit_date": 1550125047, "question_id": 54678607, "link": "https://stackoverflow.com/questions/54678607/accessing-class-instance-variable-from-another-class", "title": "Accessing class instance variable from another class", "body": "<p>I have this class in file \"ghost.rb\":</p>\n\n<pre><code>class Ghost\n  attr_accessor :fragment\n\n  def initialize(number_of_players)\n    @fragment = ''\n  end\nend\n</code></pre>\n\n<p>I'm trying to access <code>@fragment</code> from another file in the same directory. Below is \"aiplayer.rb\" in the same directory.</p>\n\n<pre><code>require \"./ghost\"\n\nclass Aiplayer\n  attr_reader :aiplayer\n\n  def initialize\n    @aiplayer = Player.new('AI Player')\n  end\n\n  def fragment_printer\n    Ghost.fragment\n  end\nend\n</code></pre>\n\n<p>When I initialize an instance of <code>Aiplayer</code> and call the <code>fragment_printer</code> method on it, I get the following error: </p>\n\n<pre><code>NoMethodError: undefined method `fragment' for Ghost:Class\nfrom aiplayer.rb:17:in `fragment_printer'\n</code></pre>\n\n<p>I have the <code>attr_accessor</code> there, and so I'm not sure why I cannot reach the <code>fragment</code> variable from outside of the <code>Ghost</code> class. I'm having issues accessing class instance variables from outside of the class. Can anyone give me an explanation on this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "sendgrid", "figaro-ruby"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550091865, "post_id": 54678874, "comment_id": 96147641, "body": "Sorry, I had actually posted the wrong code for my production file (have updated now). I actually already have <code>SENDGRID_USERNAME</code> and <code>SENDGRID_PASSWORD</code> in there and still get the error."}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550103893, "post_id": 54678874, "comment_id": 96151860, "body": "@ NM Pennypacker Also, when I try these in the console I get <code>nil</code>  p ENV[\u2018SECRET_DEV_KEY\u2019] p ENV[\u2018SECRET_KEY_TEST\u2019] p ENV[\u2018SECRET_KEY_BASE\u2019]"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550149296, "post_id": 54678874, "comment_id": 96169498, "body": "You may have to add the <code>ENV</code> variables somewhere in the Heroku admin UI. If they&#39;re coming up <code>nil</code> in the console, they&#39;re not being loaded. How are you loading the data from application.yaml into the app?"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550160896, "post_id": 54678874, "comment_id": 96176867, "body": "I&#39;m using the figaro gem, basically following <a href=\"https://medium.com/@cheney.shreve/using-devise-with-gmail-sendgrid-rails-and-heroku-tips-to-save-time-debugging-626546118358\" rel=\"nofollow noreferrer\">this</a> tutorial"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550161037, "post_id": 54678874, "comment_id": 96176976, "body": "See the Update: Looks like your ENV variables aren&#39;t making it to Heroku"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550162187, "post_id": 54678874, "comment_id": 96177650, "body": "it doesn&#39;t recognise that command: rake aborted! Don&#39;t know how to build task &#39;figaro:heroku&#39; (see --tasks) /home/scott_imunro/.rbenv/versions/2.4.2/bin/ruby_executable&zwnj;&#8203;_hooks:24:in <code>eval&#39; &#47;home&#47;scott_imunro&#47;.rbenv&#47;versions&#47;2.4.2&#47;bin&#47;ruby_executable&zwnj;&#8203;_hooks:24:in </code>&lt;main&gt;&#39;"}, {"owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550162257, "post_id": 54678874, "comment_id": 96177687, "body": "I don&#39;t think it&#39;s a heroku issue as i&#39;m getting errors in development too: <code>Puma caught this error: Missing </code>secret_key_base` for &#39;development&#39; environment, set this value in <code>config&#47;secrets.yml</code> (RuntimeError)`"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "edited": false, "score": 0, "creation_date": 1550162826, "post_id": 54678874, "comment_id": 96178044, "body": "Then you probably have to install the heroku command line tools. Either way, you&#39;ll have to be able to run that command"}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1550161021, "last_edit_date": 1550161021, "creation_date": 1550089641, "answer_id": 54678874, "question_id": 54678573, "link": "https://stackoverflow.com/questions/54678573/how-do-i-set-up-my-config-files-in-rails-to-get-sendgrid-to-work-in-heroku-auth/54678874#54678874", "title": "How do I set up my config files in Rails to get SendGrid to work in Heroku? AuthenticationError (535 failed: Bad username / password", "body": "<p>Your problem appears to be that you're referencing <code>GMAIL_USERNAME</code> and <code>GMAIL_PASSWORD</code> instead of <code>SENDGRID_USERNAME</code> and <code>SENDGRID_PASSWORD</code>, and you're still referencing the Gmail SMTP server and port.</p>\n\n<p>Assuming you're using this gem: <a href=\"https://github.com/stephenb/sendgrid\" rel=\"nofollow noreferrer\">https://github.com/stephenb/sendgrid</a>, this should do the trick for your production config file:</p>\n\n<pre><code>config.action_mailer.smtp_settings = {\n   address: \"smtp.sendgrid.com\",\n   port: 25,\n   domain: \"heroku.com\",\n   authentication: :plain,\n   user_name: ENV[\"SENDGRID_USERNAME\"],\n   password: ENV[\"SENDGRID_PASSWORD\"],\n}\n</code></pre>\n\n<p>Update: per you comment that you're using the <code>figaro</code> gem, make sure to run the rake task that adds the <code>ENV</code> variables to Heroku:\n<code>rake figaro:heroku</code></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4656440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf64cf71561639a9fd6a0a0baad3fc42?s=128&d=identicon&r=PG", "display_name": "Marcos de Melo", "link": "https://stackoverflow.com/users/4656440/marcos-de-melo"}, "is_accepted": false, "score": 0, "last_activity_date": 1550170381, "creation_date": 1550170381, "answer_id": 54697270, "question_id": 54678573, "link": "https://stackoverflow.com/questions/54678573/how-do-i-set-up-my-config-files-in-rails-to-get-sendgrid-to-work-in-heroku-auth/54697270#54697270", "title": "How do I set up my config files in Rails to get SendGrid to work in Heroku? AuthenticationError (535 failed: Bad username / password", "body": "<p>I use more params too:</p>\n\n<p>ActionMailer::Base.smtp_settings = {\n    .\n    .\n    .\n    enable_starttls_auto: true,\n    openssl_verify_mode:  \"none\"\n  }</p>\n\n<p>:)</p>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550170381, "creation_date": 1550088318, "last_edit_date": 1550161122, "question_id": 54678573, "link": "https://stackoverflow.com/questions/54678573/how-do-i-set-up-my-config-files-in-rails-to-get-sendgrid-to-work-in-heroku-auth", "title": "How do I set up my config files in Rails to get SendGrid to work in Heroku? AuthenticationError (535 failed: Bad username / password", "body": "<p>I'm trying to set up active mailer functionality in my Rails app with Devise and SendGrid so that users can receive a confirmation email when they sign up and can request a forgot password link. When I deploy to Heroku and try and sign up I get an error when I hit 'sign up'. In the Heroku logs the I can see that there is an error as follows:</p>\n\n<pre><code>Completed 500 Internal Server Error in 547ms (ActiveRecord: 8.1ms)\nNet::SMTPAuthenticationError (535 Authentication failed: Bad username / password\n</code></pre>\n\n<p>It's probably something to do with the way I have my config files but I can't put my finger on it. Any help would be massively appreciated! Here are my files.</p>\n\n<p><strong>config/application.yml</strong></p>\n\n<pre><code>production:\n  SECRET_KEY_BASE: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n\ndevelopment:\n GMAIL_USERNAME: scott.ian.munro@gmail.com\n GMAIL_PASSWORD: password\n SENDGRID_USERNAME: app115625999@heroku.com\n SENDGRID_PASSWORD: password\n\ntest:\n GMAIL_USERNAME: scott.ian.munro@gmail.com\n GMAIL_PASSWORD: password\n SENDGRID_USERNAME: app115625999@heroku.com\n SENDGRID_PASSWORD: password\n\nproduction:\n GMAIL_USERNAME: scott.ian.munro@gmail.com\n GMAIL_PASSWORD: password\n SENDGRID_USERNAME: app115625999@heroku.com\n SENDGRID_PASSWORD: password\n</code></pre>\n\n<p>I'm using the <code>figaro</code> gem to manage my environment variables.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550085923, "post_id": 54677869, "comment_id": 96144875, "body": "Yeah, for most of the application I write, if the method can be written in one line, I don&#39;t misuse the capability of adding new lines - it makes the code lengthy. I am not sure if that&#39;s a good practice though. I do it all the time! That doesn&#39;t raise any kind of waning, or doesn&#39;t do any harm. It even doesn&#39;t need semicolon! So it&#39;s basically a one line short code!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1550086048, "post_id": 54677869, "comment_id": 96144931, "body": "The one-line definition style is against nearly every Ruby coding style guide, so you&#39;ll want to avoid it. It tends to make your code far harder to read. Tools like <a href=\"https://github.com/rubocop-hq/rubocop\" rel=\"nofollow noreferrer\">Rubocop</a> will give you a citation for using it."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550130477, "post_id": 54677869, "comment_id": 96159078, "body": "Rubocop is pretty strict. But where can I get that using <code>def(*arg) end</code> in a line is a bad practice? The Rubocop team could make that up. I want a site that documents it properly.  I want a fast code with a fast algorithm with the warning flag on while running. If Ruby doesn&#39;t warn, I shouldn&#39;t care that much.  I know it&#39;s a bad practice to use semicolons. But I didn&#39;t use one. It runs perfectly.  Apart from Rubocop can you give me a link that says defining a method in one line is a bad practice?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1550166942, "post_id": 54677869, "comment_id": 96180185, "body": "It&#39;s a matter of style and convention, and these evolve out of traditions. You can indent your Ruby code with nine spaces, or thirty, or six hundred, nobody can stop you, but the overwhelming convention is two. The same goes for single-line definitions: Traditionally these have been avoided because they go against the principle of having readable, understandable at-a-glance Ruby code. There&#39;s no specific documentation for each best-practice, but Rubocop does try and communicate the community&#39;s thinkings on any particular angle."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550167020, "post_id": 54677869, "comment_id": 96180216, "body": "The &quot;When in Rome&quot; principle applies here. Ruby has conventions and if you don&#39;t follow them your code will work, but your code will seem very strange to someone familiar with Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550086155, "post_id": 54677950, "comment_id": 96144974, "body": "I have a module that has this kind of module method. I want to use that with Object! That&#39;s the idea... I can&#39;t easily that line from every module, that should break the program if any one wants to run it by downloading the gem."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 2, "creation_date": 1550086262, "post_id": 54677950, "comment_id": 96145038, "body": "When methods are declared that way they&#39;re walled off from being included on purpose. You generally call them directly, like <code>X.z</code> in this case, but remember you can always make an alias for them if necessary. <code>def y; X.y; end</code> for example. Adding things to <code>Object</code> directly is usually bad form, so avoid cluttering up that namespace if you can."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1550085987, "creation_date": 1550085987, "answer_id": 54677950, "question_id": 54677869, "link": "https://stackoverflow.com/questions/54677869/can-i-include-a-module-method-in-a-class/54677950#54677950", "title": "Can I include a module method in a class?", "body": "<p>If you define <code>x</code> the same way you define <code>y</code>, then yes. The <code>class &lt;&lt; self</code> part makes <code>x</code> a module method only, it can't be added with <code>include</code>. So to fix:</p>\n\n<pre><code>module X\n  def x\n    %s(hi5)\n  end\n\n  def y\n    rand(65..122).chr\n  end\n\n  def self.z\n    :nope\n  end\nend\n\nclass Object\n  include X\nend\n\nputs x\nputs y\nputs z # Error, as this can't be included\n</code></pre>\n\n<p>Here <code>z</code> has been added using the <code>self.z</code> declaration method that's a lot less fuss than <code>class &lt;&lt; self</code> but has the same effect.</p>\n\n<p>As a note, Ruby methods without arguments have their brackets omitted. You should also separate the method definition and body by a newline.</p>\n"}, {"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550089895, "post_id": 54678473, "comment_id": 96146760, "body": "Exactly this is the answer I wanted. Instead of <code>extend</code>, I used <code>include</code>. I omitted <code>puts</code> inside the methods. Instead of <code>Object.new.x</code>, I wrote <code>puts x</code>. This is what my desirous result is. Thank you very much!"}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 1, "creation_date": 1550092083, "post_id": 54678473, "comment_id": 96147728, "body": "That was the idea. To allow you to bridge the gap to what you wanted to do."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550098145, "post_id": 54678473, "comment_id": 96150169, "body": "The question is whether module methods can be used as instance methods in a class, not whether a module&#39;s instance methods can be used as class methods."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550102556, "post_id": 54678473, "comment_id": 96151477, "body": "I too am retired with Ruby as my main hobby. I dabbled with various languages during my working years but never the low-level stuff."}], "tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 2, "last_activity_date": 1550087953, "creation_date": 1550087953, "answer_id": 54678473, "question_id": 54677869, "link": "https://stackoverflow.com/questions/54677869/can-i-include-a-module-method-in-a-class/54678473#54678473", "title": "Can I include a module method in a class?", "body": "<p>What you seem to want to do is to include new instance methods while extending your class with new class methods. The following is based on the PICK AXE book:</p>\n\n<pre><code>module X\n  module ClassMethods\n    def x()\n      puts \"In class\"\n    end\n  end\n\n  def y()\n    puts \"In instance\"\n  end\n\n  def self.included(host_class)\n    host_class.extend(ClassMethods)\n  end\nend\n\nclass Object\n  include X\nend\n</code></pre>\n\n<p>And now</p>\n\n<pre><code># Test the instance method\nObject.new.y  # Prints \"In instance\"\n\n# Test the class method\nObject.x   # Prints \"In class\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550097195, "post_id": 54678909, "comment_id": 96149843, "body": "The real answer. You should have answered first here!"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550099282, "post_id": 54678909, "comment_id": 96150553, "body": "<code>X.z(&quot;cat&quot;) { |s| s.upcase }</code> Why did you give X.z() a block?  I don&#39;t get it. Is that really necessary?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550099663, "post_id": 54678909, "comment_id": 96150672, "body": "That was an artefact that I&#39;ve now removed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 1, "creation_date": 1550165075, "post_id": 54678909, "comment_id": 96179319, "body": "I don&#39;t mind downvotes but I ask the culprit to step out of the shadows and justify it. Personally, I never downvote an answer without providing an explanation in a comment. I believe the OP deserves an answer and often can learn something from it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1550167215, "post_id": 54678909, "comment_id": 96180312, "body": "@CarySwoveland The alternative here may be automatic delegation instead of constructing a bridge method. Consider applying <a href=\"https://ruby-doc.org/stdlib-2.5.0/libdoc/forwardable/rdoc/Forwardable.html\" rel=\"nofollow noreferrer\">Forwardable</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550167478, "post_id": 54678909, "comment_id": 96180436, "body": "@tadman, that&#39;s an interesting idea. I&#39;ve heard of that module but little more. Would you be interested in exploring it as an edit to your answer or a separate answer?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550168217, "post_id": 54678909, "comment_id": 96180729, "body": "It&#39;ll take some fussing to get right in this case, so if you want to try by all means."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550169589, "post_id": 54678909, "comment_id": 96181274, "body": "Speaking of downvotes, I have seen that many downvoted the question just because monkey patching Object class is a bad idea. Yes, I am aware of that. It&#39;s not a professional code I am writing, this is a mere scratchpad where I want to do what I think I will do. I got three answers where yours is what I think is correct. Yes, it&#39;s a bad practice, but as @tadman suggests <code>puts z # Error, as this can&#39;t be included</code>, it&#39;s actually not impossible. I don&#39;t mind the downvotes either. If someone can&#39;t answer, they tend to downvote! That&#39;s pretty weird on stackoverflow."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1550170782, "post_id": 54678909, "comment_id": 96181792, "body": "@SouravGoswami You&#39;ll note that it&#39;s still &quot;impossible&quot; to do with a simple <code>include</code>. What Cary&#39;s done here is a lot more than that. One thing to remember when asking questions here is we&#39;re often sensitive to <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY Problems</a>, and want to steer towards &quot;Why are you doing this? It seems like a bad plan. If you can better explain your ultimate objective we can give you a better way&quot;. Doing strange things with Ruby just because you can does rub people the wrong way, but don&#39;t get too worried. Down-votes are just opinions."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550173080, "post_id": 54678909, "comment_id": 96182768, "body": "In my experience I&#39;ve learned a lot by answering questions that ask if crazy things are possible."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1550167288, "last_edit_date": 1550167288, "creation_date": 1550089802, "answer_id": 54678909, "question_id": 54677869, "link": "https://stackoverflow.com/questions/54677869/can-i-include-a-module-method-in-a-class/54678909#54678909", "title": "Can I include a module method in a class?", "body": "<p>Although one would not likely see this in practice, you could do that as follows.</p>\n\n<pre><code>module X\n  def self.x\n    :hi5\n  end\n\n  def self.v(str)\n    str.capitalize\n  end\n\n  def self.z(str)\n    yield(str)\n  end\n\n  def y\n    :ho\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>X.x\n  #=&gt; :hi5\nX.v(\"cat\")\n  #=&gt; \"Cat\"\nX.z(\"cat\") { |s| s.upcase }\n  #=&gt; \"CAT\" \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>class Object\n  include X\n  X.methods(false).each do |m|\n    define_method(m) { |*args, &amp;block|\n      X.method(m).call(*args, &amp;block) }\n  end\nend\n  #=&gt; [:v, :x, :z]\n\nObject.instance_methods &amp;&amp; [:x, :v, :z, :y]\n  #=&gt; [:x, :v, :z, :y]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>o = Object.new\n\no.x\n  #=&gt; :hi5\no.v(\"cat\")\n  #=&gt; \"Cat\"\no.z(\"cat\") { |s| s.upcase }\n  #=&gt; \"CAT\"\no.y\n  #=&gt; :ho\n</code></pre>\n\n<p>This also works.</p>\n\n<pre><code>x #=&gt; :hi5\nv(\"cat\")\n  #=&gt; \"Cat\"\nz(\"cat\") { |s| s.upcase }\n  #=&gt; \"CAT\"\ny #=&gt; \"m\"\n</code></pre>\n\n<p>Why? Because <code>x</code> is the same as <code>self.x</code> (<code>self #=&gt; main</code>) and</p>\n\n<pre><code>self.is_a? Object\n  #=&gt; true\n</code></pre>\n\n<p>Note</p>\n\n<pre><code>module X\n  def self.m\n    #...\n  end\nend\n</code></pre>\n\n<p>is shorthand for</p>\n\n<pre><code>module X\n  class &lt;&lt; self\n    def m\n      #...\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 54678909, "answer_count": 3, "score": 0, "last_activity_date": 1550167288, "creation_date": 1550085675, "last_edit_date": 1550125366, "question_id": 54677869, "link": "https://stackoverflow.com/questions/54677869/can-i-include-a-module-method-in-a-class", "title": "Can I include a module method in a class?", "body": "<p>This is my code:</p>\n\n<pre><code>module X\n  class &lt;&lt; self\n    def x() %s(hi5) end\n  end\n\n  def y() rand(65..122).chr end\nend\n\nclass Object\n  include X\n\n  # Here I want class Object to have x() from the X module.\nend\n\nputs y # =&gt; A random character from ('A'..'z')\n# puts x\n</code></pre>\n\n<p>I want to call <code>x</code> in the same way I am calling <code>y</code>. Can I do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorization", "multi-tenant", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 1, "creation_date": 1550088113, "post_id": 54677150, "comment_id": 96145926, "body": "Thanks! This is exactly the point in the right direction that I needed. This blog post on the acts_as_tenant gem explains a lot - <a href=\"http://confreaks.tv/videos/aac2009-writing-multi-tenant-applications-in-rails\" rel=\"nofollow noreferrer\">confreaks.tv/videos/&hellip;</a>. Appreciate the pointers. Also updated the question to not call it a &quot;simple ecommerce app.&quot; As for the namespacing, I was imagining doing something like this: products controller CRUD would only be for admins, and then create a &quot;storefront&quot; controller for displaying those products to customers, for instance. Is that what you mean? Rather than putting all that logic onto Products?"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 1, "creation_date": 1550088175, "post_id": 54677150, "comment_id": 96145970, "body": "I&#39;m imagining the name-spacing sorta how DHH describes basecamp 3, where it&#39;s organized with lots of little controllers almost as if they are micro-services."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1550088803, "post_id": 54677150, "comment_id": 96146263, "body": "Yep, just like that. It gets pretty unwieldy when you&#39;re trying to make one controller do different things. Something simple, like &quot;an admin can a Foo on behalf of someone else&quot; where you set a <code>creator_id</code> becomes complicated in not just the view, but the controller, pundit, etc. when it&#39;s all in the same controller. Instead, just create 2 foo controllers; one namespaced under admin, and the logic is more cleanly separated (and readable imho). It&#39;s more code, but it&#39;s also <i>more readable</i>"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1550089218, "post_id": 54677150, "comment_id": 96146465, "body": "Also, you might look at this: <a href=\"https://www.codementor.io/tips/8132473431/use-custom-routing-constraints-to-limit-access-to-rails-routes-via-warden\" rel=\"nofollow noreferrer\">codementor.io/tips/8132473431/&hellip;</a> You can use rails route constraints to limit who has access to a particular route/namespaced route. That would probably be a good way to start. Also, I&#39;ll throw out there it&#39;s pretty common that some people try and separate their different users into tables (User, Admin, etc.) but I think what&#39;s easiest to manage is all users in a User table, with some type of boolean flag for roles, or using Rolify (if you need multi-role support)"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1550114448, "post_id": 54677150, "comment_id": 96154206, "body": "Appreciate all of the tips Jay."}], "tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": true, "score": 2, "last_activity_date": 1550082902, "creation_date": 1550082902, "answer_id": 54677150, "question_id": 54676600, "link": "https://stackoverflow.com/questions/54676600/how-can-you-set-up-a-multi-tenant-rails-app-without-using-subdomains/54677150#54677150", "title": "How can you set up a multi-tenant Rails app without using subdomains?", "body": "<p>You open with <code>simple e-commerce site</code> but the questions you're asking indicate that you're looking for something that's a little more complex :) You're on the right track.</p>\n\n<p>The acts_as_tenant gem is worth a look. We use this now and it helps make sure your queries are all scoped appropriately.</p>\n\n<p>I would also look at &amp; evaluate rolify if you need to do roles (but don't rule out a boolean flag on your user as well).</p>\n\n<p>I wouldn't rule out devise, but clearance is quite popular.</p>\n\n<p>Using a subdomain might be unrealized work depending on the amount of effort, unless you need to actually use subdomains for vanity purposes (my.example.com vs example.com/my), you can do multi-tenancy without it.</p>\n\n<p>I would consider separate controllers &amp; namespacing for the different roles if their access varies wildly; you can also combine them into singular controllers using Pundit (but this could be unwieldy). You'll still want to use Pundit, however, Pundit can do things like scope the records a user should see.</p>\n\n<p>You're on the right track and asking the right questions but the answers to all of these will depend on other questions (that you probably can't even answer right now). </p>\n\n<p>I have a project where I'm doing what you noted (pundit to restrict data, acts_as_tenant to silo things) but as it develops certain patterns emerge that lead me down a different path. Namespacing admin, rather than doing admin checks inside the same controller for example; because if you re-write to an API you end up trying to make the same endpoint do different things and it's much cleaner to separate out the 2 endpoints behind a namespace &amp; document the actual behavior in my opinion.</p>\n"}], "owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 2, "accepted_answer_id": 54677150, "answer_count": 1, "score": 2, "last_activity_date": 1550713072, "creation_date": 1550080713, "last_edit_date": 1550713072, "question_id": 54676600, "link": "https://stackoverflow.com/questions/54676600/how-can-you-set-up-a-multi-tenant-rails-app-without-using-subdomains", "title": "How can you set up a multi-tenant Rails app without using subdomains?", "body": "<p>I'm trying to create a SAAS e-commerce tool with a backend for staff that also allows customers to have accounts and checkout on the front end. I'm struggling with how to design this so that the Company, Account Owners, Staff, and Customers are all siloed off to each Company, while also having the appropriate restrictions based on their roles.</p>\n\n<p>From what I've read so far most of the rails solutions use multi-tenant patterns with subdomains, such as the <a href=\"https://github.com/influitive/apartment\" rel=\"nofollow noreferrer\">Apartment gem</a>, to silo off accounts. But it seems simpler to just have your site use one big app and database. For instance Basecamp recently switched to this approach with <a href=\"https://basecamp.com/how-it-works\" rel=\"nofollow noreferrer\">Basecamp3</a>. Newer apps seem to be built this way.</p>\n\n<p>And, should the admin features and the customer accounts / front end shop be separate apps completely, or can you do this with a \"<a href=\"https://m.signalvnoise.com/the-majestic-monolith/\" rel=\"nofollow noreferrer\">majestic monolith</a>\"? One big app and database, while large, seems more straight forward to me.</p>\n\n<p>I found <a href=\"http://andrewmarkle.com/2016/04/06/multitenancy-with-pundit/\" rel=\"nofollow noreferrer\">this blog post</a> that explains how to do something like this with <a href=\"https://github.com/varvet/pundit\" rel=\"nofollow noreferrer\">Pundit</a>, but I'm still having trouble groking the big picture of how this could work with Account Owners, Staff, and Customers all in the same app.</p>\n\n<p>Here are the basic needs for my app:</p>\n\n<h2>User Roles</h2>\n\n<ul>\n<li>Account Owner (creates the company's account and has full access to their company's data)</li>\n<li>Staff (invited to join a company and doesn't have access to some of the company's data, such as billing information)</li>\n<li>Customer (can sign up for the site and view products, add the them to cart, but can't access any of the staff or account owner features.)</li>\n<li>All Users (no matter the role) belong to a Company and can't access another company's data. (Thus providing the the ability to run separate stores on the same app, which is needed to run this as a SAAS app.)</li>\n<li>Account Owners and Staff can CRUD Products, but not Customers.</li>\n</ul>\n\n<p>A great analogy would be how Shopify's admin area and customer accounts currently work for shop owners, but unlike Shopify, it doesn't require using subdomains.</p>\n\n<h2>Potential Models and Associations</h2>\n\n<pre><code>Company\nhas_many :users, dependent: :destroy\nhas_many :products, dependent: :destroy\n\nUser\nbelongs_to :company\n\nProduct\nbelongs_to :company\n</code></pre>\n\n<h2>Authorization</h2>\n\n<ul>\n<li>Would it work to use Pundit to restrict the controller actions based on User roles and then ensure that data is siloed off via the Model associations?</li>\n</ul>\n\n<h2>Signup Flow</h2>\n\n<p>I'm a little fuzzy on how to handle scoping the different User roles and where the \"staff invites\" and \"customer\" sign up could fit into a sign up flow.</p>\n\n<p>Would this approach work?</p>\n\n<ol>\n<li>Create separate controllers for \"Account Owner Signup,\" \"Staff Signup,\" \"Customer Signup,\" and then embed my signup form into those views. (Using <a href=\"https://github.com/thoughtbot/clearance\" rel=\"nofollow noreferrer\">Clearance</a> for authentication and would like to keep that if possible, but just augment it as needed).</li>\n<li>Account Owner Signup: So if a someone signs up through the New Account Signup controller (with embedded authentication form) they would also create a Company.</li>\n<li>Staff Invite: The Account Owner can create new Staff Users by inputing a Name and Email address. This creates a new User with the role of \"Staff\" (and thus cannot become Account Owners on another account). The new \"Staff\" user is sent an invite email that is basically password reset email inviting them to accept the invitation by creating a password.</li>\n<li>Customer Signup: If someone signs up through the \"Customer Signup\" controller, they would automatically be given the user role \"customer\". Not sure how to set the Company ID in this case. (Pass the company_id as a hidden input on the customer sign up form?)</li>\n</ol>\n\n<p>Is there a better way to design this type of app that I'm missing? Am I on the right track? I have no experience building something like this so any clues would be extremely helpful.</p>\n\n<p>It seems like newer apps follow this type of pattern for multi-tenancy rather than subdomains.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550081349, "post_id": 54676549, "comment_id": 96142737, "body": "Because it&#39;s shared globally across your Rails application when Rails starts autoloading your app directory."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "reply_to_user": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550084314, "post_id": 54676549, "comment_id": 96144156, "body": "Depending on were you do the setting, it could be simply the order of the loads as @RobNice mentions.  I think it would be better to describe what problem you are trying to solve by even sharing state across controllers and why you think you need to use a global variable"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1550085338, "post_id": 54676549, "comment_id": 96144604, "body": "PSA: <b>DO NOT USE GLOBAL VARIABLES</b>. They&#39;re a ton of trouble and completely inappropriate in this case. Use instance variables like <code>@pqrs</code>. A variable like <code>$pqrs</code> is global across <i>all classes, all instances</i> and requires careful coordination between all bits of code accessing it. Instance variables do not do this."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550125182, "post_id": 54676549, "comment_id": 96156839, "body": "What are the regexes at the end of the lines?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550180733, "post_id": 54676549, "comment_id": 96186041, "body": "Your question is unclear. Can you explain what kind of answer you are looking for, other than &quot;because it&#39;s a <b>global</b> variable&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": true, "score": 3, "last_activity_date": 1550084252, "last_edit_date": 1550084252, "creation_date": 1550082375, "answer_id": 54677031, "question_id": 54676549, "link": "https://stackoverflow.com/questions/54676549/global-variable-overridden/54677031#54677031", "title": "Global variable overridden", "body": "<p>What you are using is a global variable. A global variable starts with a <code>$</code> and is available across your entire application. If you change the variable anywhere in your application, it will be changed everywhere. Depending on what you are trying to do, you can either use a class variable (still not great, but better than a global variable) by using <code>@@</code> or a class instance variable by using a <code>@</code>.</p>\n\n<p>A class variable is similar to a global variable, but only the class and its subclasses have access to it. That means any changes to the class variable by a subclass changes the variable in the parent class.</p>\n\n<p>A class instance variable is only available to the class that creates the variable. You can create the same class instance variable in a subclass or other classes and you won't have a clash of instance variable names.</p>\n\n<p>You can read more about class variables and class instance variables here:\n<a href=\"https://www.ruby-lang.org/en/documentation/faq/8/\" rel=\"nofollow noreferrer\">Class Variables and Class Instance Variables</a></p>\n"}], "owner": {"reputation": 3422, "user_id": 1523785, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b28dda5cffe5812e52a6388c5e4ce9f9?s=128&d=identicon&r=PG", "display_name": "hatellla", "link": "https://stackoverflow.com/users/1523785/hatellla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54677031, "answer_count": 1, "score": -2, "last_activity_date": 1550125158, "creation_date": 1550080505, "last_edit_date": 1550125158, "question_id": 54676549, "link": "https://stackoverflow.com/questions/54676549/global-variable-overridden", "title": "Global variable overridden", "body": "<p>I have a web application with two controllers abc_controller.rb and xyz_controller.rb. Both have the same variable with different content:</p>\n\n<pre><code>$pqrs = [\"1\", \"2\"] // in one controller, abc\n$pqrs = [\"3\", \"4\"] // in another controller, xyz\n</code></pre>\n\n<p>I am opening a webpage with abc in url, which calls abc_controller.rb. When I print the value of <code>$pqrs</code> inside <code>abc_controller</code>, it outputs<code>[\"3\", \"4\"]</code> instead of <code>[\"1\", \"2\"]</code>.</p>\n\n<p>Any idea what can be the reason for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "delayed-job", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550077406, "post_id": 54675527, "comment_id": 96140657, "body": "The <a href=\"https://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#action-mailer\" rel=\"nofollow noreferrer\">Rails Guides for Upgrading from Rails 4.2 to Rails 5.0</a> tells that there were some changes to Rails Mailer Interface between 4.2 and 5.0. Did you follow the guide when updating and did you make all the necessary changes?"}, {"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "edited": false, "score": 0, "creation_date": 1550077792, "post_id": 54675527, "comment_id": 96140870, "body": "Would you mind sharing the relevant parts of ConfirmationMailer and the Job that&#39;s calling it? Is <code>game_completion_feedback</code> method defined on a module or in the <code>ConfirmationMailer</code> class?"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550078175, "post_id": 54675527, "comment_id": 96141059, "body": "@spickermann I did make the changes but I will review the whole file to ensure that i am following everything"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "edited": false, "score": 0, "creation_date": 1550078241, "post_id": 54675527, "comment_id": 96141096, "body": "@SebastianScholl it\u2019s defined in the ConfirmationMailer class. Sorry I had to run away from my computer for something but I will post it soon"}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "edited": false, "score": 0, "creation_date": 1550082217, "post_id": 54675527, "comment_id": 96143179, "body": "@SebastianScholl I added the relevant code. I would appreciate any help in debugging this"}], "answers": [{"comments": [{"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1550087929, "post_id": 54677552, "comment_id": 96145850, "body": "Hi, how can make these changes for <code>Delayed::Job.enqueue RemindersForGame</code> in this case? Because I get an error that <code>NameError (uninitialized constant Game::RemindersForGame)</code>. Game is the name of the class I am calling this in. Do I need to explicitly require the class with these structs in the <code>Game</code> model for Rails 5?"}, {"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "reply_to_user": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1550090897, "post_id": 54677552, "comment_id": 96147225, "body": "@anonn023432 If you&#39;re using ActiveJob, I believe that you would simply enqueue the job using <code>RemindersForGame.perform_later(client.user, coach, start)</code> or <code>RemindersForGame.perform_now(client.user, coach, start)</code>. Given that you are using Rails 5, I&#39;d really recommend implementing this Job using ActiveJob."}], "tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": true, "score": 1, "last_activity_date": 1550084953, "last_edit_date": 1550084953, "creation_date": 1550084449, "answer_id": 54677552, "question_id": 54675527, "link": "https://stackoverflow.com/questions/54675527/rails-5-upgrade-broke-delayed-tasks/54677552#54677552", "title": "Rails 5 upgrade broke delayed tasks", "body": "<p>For versions &lt; Rails 4.2: <code>ConfirmationMailer.delay.game_completion_feedback(user, date, feedback)</code></p>\n\n<p>For versions > Rails 4.2: <code>ConfirmationMailer.game_completion_feedback(user, date, feedback).deliver_later</code></p>\n\n<p>Please try using this and let us know if it solves the problem.</p>\n\n<p>Also, when passing variables to your Mailer class, using the <code>with()</code> method will create instance variables for you to use in the mailer instance. For example:</p>\n\n<pre><code>ConfirmationMailer.with(u: user, d: date, f: feedback).game_completion_feedback.deliver_later\n</code></pre>\n\n<p>Would then create <code>@u, @d, @f</code> as instance variables for use in your Mailer instance.</p>\n\n<p>I'm not suggesting you name your variables as single characters :) But show that you don't need the positional arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 2923, "user_id": 1207729, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e7d298368b4aef581a5e176247bba02?s=128&d=identicon&r=PG", "display_name": "DrewB", "link": "https://stackoverflow.com/users/1207729/drewb"}, "is_accepted": false, "score": 0, "last_activity_date": 1575516749, "last_edit_date": 1575516749, "creation_date": 1575486384, "answer_id": 59183085, "question_id": 54675527, "link": "https://stackoverflow.com/questions/54675527/rails-5-upgrade-broke-delayed-tasks/59183085#59183085", "title": "Rails 5 upgrade broke delayed tasks", "body": "<p><code>ArgumentError: undefined class/module ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Integer</code> is caused by a change in Rails 5 such that <code>ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Integer</code> and <code>ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Float</code> don't exist anymore.  Here is a migration you can use to fix that:</p>\n\n<pre><code>class UpdatePostgresDataTypeInDj &lt; ActiveRecord::Migration[5.1]\n  REPLACEMENTS = {\n    'ruby/object:ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Integer': 'ruby/object:ActiveModel::Type::Integer',\n    'ruby/object:ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Float': 'ruby/object:ActiveModel::Type::Float',\n  }\n\n  def up\n    REPLACEMENTS.each do |old, new|\n      Delayed::Job.where(\"handler LIKE ?\", \"%#{old}%\")\n        .update_all(\"handler = replace(handler, '#{old}', '#{new}')\")\n    end\n  end\n\n  def down\n    REPLACEMENTS.each do |old, new|\n      Delayed::Job.where(\"handler LIKE ?\", \"%#{new}%\")\n        .update_all(\"handler = replace(handler, '#{new}', '#{old}')\")\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 54677552, "answer_count": 2, "score": 1, "last_activity_date": 1575516749, "creation_date": 1550076844, "last_edit_date": 1550082192, "question_id": 54675527, "link": "https://stackoverflow.com/questions/54675527/rails-5-upgrade-broke-delayed-tasks", "title": "Rails 5 upgrade broke delayed tasks", "body": "<p>I upgraded my Rails application from <code>Rails 4.2</code> to <code>Rails 5.0</code> and now a lot of my <code>delayed jobs</code> which were created pre-upgrade are breaking. I get the following error:</p>\n\n<p><code>undefined method 'game_completion_feedback' for ConfirmationMailer:Class</code></p>\n\n<p>Even though I have the method defined in the <code>ConfirmationMailer</code> class and nothing was changed in that class or where it's being invoked from while upgrading.</p>\n\n<p>On doing a <code>YAML.load_dj</code> I get the following error:</p>\n\n<pre><code>ArgumentError: undefined class/module ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Integer\nfrom &lt;path&gt;/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/psych/class_loader.rb:53:in `path2class'\nCaused by NameError: uninitialized constant \nActiveRecord::ConnectionAdapters::PostgreSQL::OID::Integer\nfrom &lt;path&gt;/.rvm/gems/ruby-2.2.5/gems/activesupport-5.0.7.1/lib/active_support/inflector/methods.rb:283:in `const_get' \n</code></pre>\n\n<p>It looks like it broke because something changed during the Rails 4.2 to Rails 5.0 upgrade.</p>\n\n<p>I found online that running <code>Rails.cache.clear</code> can help fix this issue but my <code>tmp</code> folder in the <code>production</code> environment is empty so running <code>Rails.cache.clear</code> just throws an error as:</p>\n\n<p><code>No such file or directory @ dir_initialize - /var/app/current/tmp/cache/</code></p>\n\n<p>Is there any way that I can make these old delayed jobs still work in <code>Rails 5.0</code> or do I just have to recreate all of them individually?</p>\n\n<p>My <code>ConfirmationMailer</code> class:</p>\n\n<pre><code>class ConfirmationMailer &lt; ApplicationMailer\n  def game_completion_feedback(user, date, feedback)\n    @user     = user\n    @date     = format_time(date.to_time)\n    @feedback = feedback\n\n    mail(to: user.email, subject: 'Game Completed')\n  end\nend\n</code></pre>\n\n<p>And I call that function as:</p>\n\n<pre><code>def send_feedback_to_client\n  ConfirmationMailer.delay.game_completion_feedback(user, date, feedback)\nend\n</code></pre>\n\n<p>This is coming up in other situations as well where I am calling a <code>Struct</code> such as:</p>\n\n<pre><code>class RemindersForGame &lt; Struct.new(:gamer_email, :leader_email, :start)\n  def perform\n    ConfirmationMailer.game_reminder_email_gamer(gamer_email, leader_email, start).deliver_now\n    ConfirmationMailer.game_reminder_email_leader(gamer_email, leader_email, start).deliver_now\n  end\nend\n</code></pre>\n\n<p>And I call this <code>struct</code> as:</p>\n\n<pre><code>def create_reminder_email(start)\n  reminders = Delayed::Job.enqueue RemindersForGame.new(client.user, coach, start),\n                                 run_at: start - 2.day,\n                                 queue: 'game_reminder'\n\nself.reminders_job_id = reminders.id\n</code></pre>\n\n<p>end</p>\n\n<p>The <code>game_reminder_email_gamer</code> and <code>game_reminder_email_leader</code> are defined as the exact same way as the other method in that class and I didn't change anything related to how it's being called.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1550077091, "creation_date": 1550077091, "answer_id": 54675602, "question_id": 54674609, "link": "https://stackoverflow.com/questions/54674609/rails-link-to-and-merge-parameter-into-existing-parameters/54675602#54675602", "title": "Rails link_to and merge parameter into existing parameters", "body": "<p>I would try something like this:</p>\n\n<pre><code>&lt;%= link_to url_for(params.merge(foo: bar)), title: 'Title of my icon' do %&gt;\n  &lt;i class=\"myicon\"&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 41223, "user_id": 175836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d3b5a5015d8459c645abe6e906b9e77b?s=128&d=identicon&r=PG", "display_name": "randombits", "link": "https://stackoverflow.com/users/175836/randombits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 54675602, "answer_count": 1, "score": -2, "last_activity_date": 1550077091, "creation_date": 1550074165, "question_id": 54674609, "link": "https://stackoverflow.com/questions/54674609/rails-link-to-and-merge-parameter-into-existing-parameters", "title": "Rails link_to and merge parameter into existing parameters", "body": "<p>I have a <code>link_to</code> directive that adds a link to an icon by passing a block to <code>link_to</code>. What I'm trying to do is merge existing query parameters in the URL and append this one as well if it is clicked. Syntax seems broken:</p>\n\n<pre><code>&lt;%= link_to {params:params.merge({foo: bar })}, title: 'Title of my icon' do %&gt;\n   &lt;i class=\"myicon\"&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>what's the correct way to write the <code>link_to</code> above to merge my foo query parameter into the existing query parameters in the URL?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550075188, "post_id": 54674520, "comment_id": 96139350, "body": "Is the job_id used for a relation to another active record model? Or is it just something arbitrarily generated?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550075332, "post_id": 54674520, "comment_id": 96139451, "body": "@Rob Nice thanks for the reply.. its used for a relation. Every time an hour record is created im adding the id for the job it belongs to."}, {"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550077601, "post_id": 54674520, "comment_id": 96140766, "body": "Thinking about it, why not delegate this behavior to the CareGiver model with a method like log_hour_for_job, then you can do your validations there on both the job and the hour."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550077896, "post_id": 54674520, "comment_id": 96140922, "body": "@RobNice can you show me an example of how i would do this?"}, {"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550078209, "post_id": 54674520, "comment_id": 96141074, "body": "Sure, can you add your Job model so I can see the relation it has to the CareGiver and Hour?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1550078663, "post_id": 54674520, "comment_id": 96141325, "body": "the job model currently has no relation to the hours or caregiver."}], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 2075407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e389209455e700c93a96f9627b0e08f?s=128&d=identicon&r=PG", "display_name": "S.Spencer", "link": "https://stackoverflow.com/users/2075407/s-spencer"}, "is_accepted": false, "score": 0, "last_activity_date": 1550076992, "creation_date": 1550076992, "answer_id": 54675565, "question_id": 54674520, "link": "https://stackoverflow.com/questions/54674520/rails-validation-for-records/54675565#54675565", "title": "Rails Validation for Records", "body": "<p>Perhaps you want to instead have a worked_on date field on Hour and give that a unique validation?</p>\n\n<p>Do you actually want to limit someone to entering one Hour record per day or limit them to having one Hour record of a unique date?</p>\n\n<pre><code>class CareGiver &lt; ApplicationRecord\n  devise ...\n\n  has_many :hours\n\n  validates_presence_of :phone, ..., presence: true, on: :create\nend\n\nclass Hour\n  validates_uniqueness_of :worked_on\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1550079860, "post_id": 54676254, "comment_id": 96142008, "body": "I am still able to create multiple records for jobs is there any way that i can limit this one per day?"}, {"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1550080763, "post_id": 54676254, "comment_id": 96142473, "body": "Multiple records for jobs or hours? I thought you wanted to add another validation for the hour to check the uniqueness of the job_id."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1550081096, "post_id": 54676254, "comment_id": 96142637, "body": "im sorry.. Yes i want to check the uniqueness of the job_id, but i want users to only post 1 hour record for day as well. I pretty much want users that have that jobs to only post 1 hour record for that job. so is there any way i can check the Id in the current hours_for_day method i have?"}, {"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1550081243, "post_id": 54676254, "comment_id": 96142703, "body": "Sure, just do the Hours.where(job_id: job_id).any?, if there are any Hours with that job_id, it will return true."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1550081601, "post_id": 54676254, "comment_id": 96142848, "body": "hmm @Rob Nice for some reason its returning false even when there are records with the same id"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1550082135, "post_id": 54676254, "comment_id": 96143137, "body": "i think there is no value being inserted to job_id so it returns false everytime"}], "tags": [], "owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "is_accepted": false, "score": 0, "last_activity_date": 1550079339, "creation_date": 1550079339, "answer_id": 54676254, "question_id": 54674520, "link": "https://stackoverflow.com/questions/54674520/rails-validation-for-records/54676254#54676254", "title": "Rails Validation for Records", "body": "<p>Ok, so I (wrongfully) assumed job_id was currently being used to reference the Job model. But since, it's not, it should't be too difficult to add another validation to check for job_id uniqueness on the Hour model. I have not tested this, but I <em>think</em> this should work.</p>\n\n<pre><code>#other code\nvalidate :unique_job_id, :on =&gt; :create\n\nprivate\n\ndef unique_job_id\n  if Hour.where(job_id: job_id).any?\n    #errors\n  end\nend\n#other stuff\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550079339, "creation_date": 1550073874, "last_edit_date": 1550074987, "question_id": 54674520, "link": "https://stackoverflow.com/questions/54674520/rails-validation-for-records", "title": "Rails Validation for Records", "body": "<p>I'm trying to create a custom validation for one of my models on create, my validation limits a user to create one record per day. But I need to add a condition lets the user create multiples records a day if one of the records attributes are unique \"job_id\".</p>\n\n<p><strong>my user class</strong></p>\n\n<pre><code>class CareGiver &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n :recoverable, :rememberable, :validatable, :confirmable \n validates_presence_of :phone, :city, :state, :street, :zip, presence: true, on: :create\n\n  has_many :hours do\n    def today\n      where(:created_at =&gt;(Time.zone.now.beginning_of_day..Time.zone.now))\n    end\n  end\n\nend\n</code></pre>\n\n<p>each hour record has a \"job_id\". I want users to be able to create one record a day which is working. but if the \"job_id\" is unique and has no hours logged for it. i want them to be able to create the record.</p>\n\n<p><strong>record im creating(hours)</strong></p>\n\n<pre><code>class Hour &lt; ApplicationRecord\n  belongs_to :care_giver\n  validate :hours_for_the_day, :on =&gt; :create\n\n  private \n    def hours_for_the_day\n      if care_giver.hours.today.count &gt;= 1 \n        errors.add(:base, \"Exceeds daily limit\")\n      end\n   end\nend\n</code></pre>\n\n<p>Should i maybe add a parameter to this method? Im having trouble understanding how i can achieve this. any help would be much appreciated</p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 1, "creation_date": 1550073352, "post_id": 54674176, "comment_id": 96138191, "body": "Not what you are asking but <code>a = a.map{ |e| &quot;&#39;#{e}&#39;&quot; }.join(&#39;, &#39;)</code> delivers the same result so I am not sure whether you actually need the whole method overhead."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1550073450, "post_id": 54674176, "comment_id": 96138242, "body": "I&#39;d rather go to an inline method due to the number of times I need this formatting for <code>PostgreSQL</code>.  I don&#39;t want to write it out every time."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1550073669, "post_id": 54674176, "comment_id": 96138379, "body": "<code>a.to_s[1...-1]</code> might suit. As for your question, to be able to write <code>a.fullyjoin!</code> you could reopen the Array class and add the method (but this is discouraged)."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1550073714, "post_id": 54674176, "comment_id": 96138409, "body": "It appears you want to use this method to format arrays to be used as possible values in a SQL query. In that case, your method results in a SQL injection vulnerability. Instead, you should use <a href=\"https://stackoverflow.com/a/10841500/421705\">the capabilities for prepared statements in the <code>pg</code> gem</a>."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1550073778, "post_id": 54674176, "comment_id": 96138441, "body": "@HolgerJust Sorry, can you elaborate?  This is exactly why I want this optimized.  I am using <code>exec_params</code>, and all this is for application of arrays for either <code>fieldnames</code> or <code>values</code>."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1550075391, "post_id": 54674176, "comment_id": 96139483, "body": "Hmmm, it appears that this is indeed a bit more complex with just the basic pg gem. There is something like <code>PG::TextEncoder::QuotedLiteral.new.encode(string_value)</code> to correctly quote a string but this only marginally helps with prepared statements... I think, you&#39;ll likely be better of with using something like <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">Sequel</a> with its higher-level API, including automatic quoting which is still very fast. This is likely simpler and much more secure rather than trying to handroll complex escaping of value."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "edited": false, "score": 1, "creation_date": 1550078927, "post_id": 54674176, "comment_id": 96141485, "body": "Initially <code>a</code> is an Array. Do you want <code>a</code> become a String after <code>a.fulljoin!</code>? If yes, it&#39;s not a very good idea."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550079283, "post_id": 54674176, "comment_id": 96141667, "body": "Yes, I do, because that&#39;s what I need.   But just realized it changes type so it cannot be done."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "edited": false, "score": 0, "creation_date": 1550079702, "post_id": 54674176, "comment_id": 96141919, "body": "@Rich_F, There is a workaround. <code>a.fulljoin!</code> can make <code>a</code> an Array with only one member a[0] - a String you need."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1550080189, "post_id": 54674176, "comment_id": 96142188, "body": "Beyond the scope of this question, but thanks.  Just as easy as the reassignment of the variable."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "edited": false, "score": 0, "creation_date": 1550080734, "post_id": 54674176, "comment_id": 96142463, "body": "@Rich_F, I can publish my comments as answer (with working solution for a[0] workaround) if you think it can be useful."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550080813, "post_id": 54674176, "comment_id": 96142499, "body": "Sure, why not.  I&#39;m always looking for efficient solutions."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "edited": false, "score": 0, "creation_date": 1550081684, "post_id": 54674176, "comment_id": 96142900, "body": "@Rich_F, done: <a href=\"https://stackoverflow.com/a/54676840/10306509\">stackoverflow.com/a/54676840/10306509</a>"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550082685, "post_id": 54674176, "comment_id": 96143411, "body": "Excellent, will take a look."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550115903, "post_id": 54674176, "comment_id": 96154503, "body": "If <code>a</code> is an instance of class <code>A</code>, there is no instance method <code>A#m</code> such that, after <code>a.m</code> is executed, <code>a</code> will be an instance of any class other than <code>A</code>. For example, an array cannot be converted in place (i.e., <code>a.object_id</code> is not changed) to a string."}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550083036, "post_id": 54676840, "comment_id": 96143572, "body": "Oh I see.  OK then.  Then the variable reassignment <code>a = fulljoin(a)</code> is much more simple when implementing this in PG.  I&#39;m going to actually suggest a method in the PG Class as this is strangely not present."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550084993, "post_id": 54676840, "comment_id": 96144464, "body": "@Rich_F, you can just write <code>a = &quot;&#39;#{a.join(&quot;&#39;, &#39;&quot;)}&#39;&quot;</code>"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1550085111, "post_id": 54676840, "comment_id": 96144513, "body": "See that&#39;s still long, given the frequency I&#39;m preparing statements.  Now I have <code>Methods::fulljoin(a)</code> which is crazy easy.  But I&#39;m still confused as to why this functionality isn&#39;t in the PG gem, both for listing fields and values."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1550090534, "post_id": 54676840, "comment_id": 96147049, "body": "can be simplified to <code>self.replace([&quot;&#39;#{self.join(&quot;&#39;, &#39;&quot;)}&#39;&quot;])</code>"}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1550096014, "post_id": 54676840, "comment_id": 96149413, "body": "@engineersmnky, It should work. I&#39;ve added your suggestion to post. Thank you!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550164448, "post_id": 54676840, "comment_id": 96179012, "body": "Your first sentence is incorrect. Not that it&#39;s &quot;not a good idea&quot;, but it is not possible to convert an array in place to a string: <code>a = []; a.replace(&#39;cat&#39;) #=&gt; TypeError (no implicit conversion of String into Array)</code>. If that is not enough to convince you let&#39;s see a counter-example."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550164705, "post_id": 54676840, "comment_id": 96179125, "body": "@CarySwoveland, Please specify which sentence you mean?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550164779, "post_id": 54676840, "comment_id": 96179159, "body": "Which &quot;first sentence&quot;?"}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550167106, "post_id": 54676840, "comment_id": 96180259, "body": "@CarySwoveland, sorry, I had seen early version of your comment and didn&#39;t understand what it was about. As for the essence of the question, I meant that the idea of changing the object class is very, very bad from the point of view of OOP, even if it would be possible in Ruby. And you are absolutely right: in Ruby it is impossible. And it&#39;s very good, that it&#39;s impossible. Anyway, thank you very much for your comment!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550168355, "post_id": 54676840, "comment_id": 96180787, "body": "Consider an edit. It doesn&#39;t make sense to say that something is a bad idea if it&#39;s not possible. &quot;Hey, guys, let&#39;s check out the bars on Mars tonight.&quot;. Bad idea. For one, nighttime temperatures on Mars can be -100 degrees Celsius (almost as cold as Minsk on Feb. 2, 2012). Also, so far as we know, there are no bars on Mars."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550168817, "post_id": 54676840, "comment_id": 96180965, "body": "@CarySwoveland, You&#39;re right again. It really was not very correctly formulated. I have edited the post. Thank you for helping to make the answer better!"}], "tags": [], "owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "is_accepted": false, "score": 1, "last_activity_date": 1550168534, "last_edit_date": 1550168534, "creation_date": 1550081651, "answer_id": 54676840, "question_id": 54674176, "link": "https://stackoverflow.com/questions/54674176/how-ruby-method-modify-in-place/54676840#54676840", "title": "How Ruby Method Modify in Place", "body": "<p>Initially <code>a</code> is an <strong>Array</strong>. If you could write method <code>a.fulljoin!</code> with desirable result, <code>a</code> would become a <strong>String</strong>, but it's not possible in Ruby.</p>\n\n<p>But <code>a.fulljoin!</code> can convert <code>a</code> to <strong>Array</strong> with single member <code>a[0]</code> - a \n<strong>String</strong> you need. And it will be as close to your goal as possible:</p>\n\n<pre><code>class Array\n  def fulljoin!\n    r = \"'#{self.join(\"', '\")}'\"\n    self.clear\n    self[0] = r\n  end\nend\n\na = [\"Alex\", \"Bert\", \"Charlie\"]\na.fulljoin!\np a\n=&gt; [\"'Alex', 'Bert', 'Charlie'\"]\n</code></pre>\n\n<p>P.S.: As suggested by <a href=\"https://stackoverflow.com/users/1978251/engineersmnky\">@engineersmnky</a>, method <code>fulljoin!</code> can be simplified to:</p>\n\n<pre><code>class Array\n  def fulljoin!\n    self.replace([\"'#{self.join(\"', '\")}'\"])\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1550168534, "creation_date": 1550072886, "question_id": 54674176, "link": "https://stackoverflow.com/questions/54674176/how-ruby-method-modify-in-place", "title": "How Ruby Method Modify in Place", "body": "<p>How does one write <code>Ruby</code> methods for modification in place?</p>\n\n<p>I want to accomplish the following:</p>\n\n<pre><code>def fulljoin(ruby_array)\n  r = ''\n  ruby_array.each {|item| r += \"'#{ item }', \"}\n  r.chop!.chop!\nend\n\na = ['Alex', 'Bert', 'Charlie']\na = fulljoin(a)             # =&gt; 'Alex', 'Bert', 'Charlie'\n</code></pre>\n\n<p>But I want to modify the array a in place:</p>\n\n<pre><code>a.fulljoin!\n</code></pre>\n\n<p>What is the syntax to accomplish this?  </p>\n"}, {"tags": ["regex", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "edited": false, "score": 0, "creation_date": 1550143335, "post_id": 54676939, "comment_id": 96166181, "body": "Interesting and absolutely confusing as hell. So I understand that regex does not recursively search, but what if I don&#39;t want it to? I just need the entire string, regardless of it&#39;s contents between the two brackets. So having [&quot;sqrt(9+sqrt(9)/2*(5+5))&quot;] Is totally fine, the program already knows how to deal with PEDMAS. In this situation it would simply do /sqrt/ on every array element, if it finds one, it can then enter a recursion to continuously perform calculations until it the array has a single element."}, {"owner": {"reputation": 1375, "user_id": 1755252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132945386d6e620930153d756b1e4f2b?s=128&d=identicon&r=PG", "display_name": "joequincy", "link": "https://stackoverflow.com/users/1755252/joequincy"}, "reply_to_user": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "edited": false, "score": 0, "creation_date": 1550181731, "post_id": 54676939, "comment_id": 96186430, "body": "The problem is that there&#39;s no way for regex to <i>balance</i> parenthesis. So anything that would match <code>sqrt(9+sqrt(9)&#47;2*(5+5))</code> would also match <code>sqrt(9+sqrt(9)&#47;2*(5+5)) + sqrt(9)</code>... unless you know in advance how deep the parenthesis nesting will go. For a complex nesting scenario like that example, you&#39;d need to handle parenthesis algorithmically (see second link in answer), and then solve each tier and pass its solution up to its parent. Regex just isn&#39;t the right tool for that kind of problem."}], "tags": [], "owner": {"reputation": 1375, "user_id": 1755252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132945386d6e620930153d756b1e4f2b?s=128&d=identicon&r=PG", "display_name": "joequincy", "link": "https://stackoverflow.com/users/1755252/joequincy"}, "is_accepted": false, "score": 0, "last_activity_date": 1550181231, "last_edit_date": 1550181231, "creation_date": 1550082020, "answer_id": 54676939, "question_id": 54673306, "link": "https://stackoverflow.com/questions/54673306/regex-spliting-incorrectly-due-to-similar-search-criteria-with-another-match/54676939#54676939", "title": "Regex spliting incorrectly due to similar search criteria with another match", "body": "<p>There's a few issues which are getting in your way:\nFirst, regex does not handle recursive searching, so you won't be able to find matching parentheses. If you're wanting to be able to accept parenthetical expressions inside of <code>sqrt()</code> you're going to need to <a href=\"https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets\">attack it from a different angle</a> (the answer there points to <a href=\"https://stackoverflow.com/questions/524548/regular-expression-to-detect-semi-colon-terminated-c-for-while-loops/524624#524624\">this algorithm</a>).</p>\n\n<p>If you're only expecting to match simple expressions inside the <code>sqrt()</code>, then the next problem is: in your <code>sqrt</code> sub-expression, you're optionally matching a literal period character <code>\\.?</code> between digits, but you're not allowing any operators. You can approach this directly by adding a match for the operators and an optional second float into that sub-expression. In the following example, I wrapped the  addition in a <a href=\"https://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\">non-capturing group</a> <code>(?:_expression_)</code> and used a <code>*</code> to match it 0 or more times.</p>\n\n<p><code>sqrt\\(\\d*\\.?\\d+\\)</code> becomes <code>sqrt\\(\\d*\\.?\\d+(?: *?[-+\\/*%]? *?\\d*\\.?\\d*)*\\)</code></p>\n\n<p>Last, you will most likely want to evaluate the <em>contents</em> of <code>sqrt()</code> before evaluating the <code>sqrt()</code> itself. To do this, you'll want to make use of capture groups. There are a few ways you could approach this, but one way is to have the entire expression wrapped in unescaped parentheses (capture group 1), then the contents of <code>sqrt()</code> should also be wrapped in unescaped parenthesis (capture group 2).</p>\n\n<p><code>/(\\d*\\.?\\d+\\^?|[-+\\/*%()]|sqrt\\((\\d*\\.?\\d+(?: *?[-+\\/*%]? *?\\d*\\.?\\d*)*)\\))/</code></p>\n\n<p>The results from your scan will be an array of capture group arrays. Running it against <code>\"sqrt(9) + sqrt(9)\"</code> will return <code>[[\"sqrt(9)\", \"9\"], [\"+\", nil], [\"sqrt(9)\", \"9\"]]</code> so anytime capture group 2 is not <code>nil</code>, it contains the contents of a <code>sqrt()</code>.</p>\n\n<p>You can see this regex in action at <a href=\"https://regexr.com/48ao6\" rel=\"nofollow noreferrer\">Regexr</a></p>\n"}], "owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550181231, "creation_date": 1550070374, "last_edit_date": 1550148901, "question_id": 54673306, "link": "https://stackoverflow.com/questions/54673306/regex-spliting-incorrectly-due-to-similar-search-criteria-with-another-match", "title": "Regex spliting incorrectly due to similar search criteria with another match", "body": "<p>I have a CLI calculator, and I am adding square root function. I have this regex that parses the users input:</p>\n\n<pre><code>string.scan(/\\d*\\.?\\d+\\^?|[-+\\/*%()]|sqrt\\(\\d*\\.?\\d+\\)/)\n</code></pre>\n\n<p>It works with these inputs as expected:</p>\n\n<pre><code>calc -o \"sqrt(9)\" #=&gt; [\"sqrt(9)\"]\ncalc -o \"sqrt(9) + sqrt(9)\" #=&gt; [\"sqrt(9)\", \"+\", \"sqrt(9)\"]\n</code></pre>\n\n<p>However, my regex has not accounted for nested sqrt. With this,</p>\n\n<pre><code>calc -0 \"sqrt(6+3)\"\n</code></pre>\n\n<p>I desire the output:</p>\n\n<pre><code>[\"sqrt(6+3)\"]\n</code></pre>\n\n<p>because when the program finds <code>sqrt</code> while searching, it will simply recursively apply the <code>scan</code> method with the regex until it gets into the deepest nested formula and work its way back. But I get:</p>\n\n<pre><code>[\"(\", \"6\", \"+\", \"3\", \")\"]\n</code></pre>\n\n<p>I have tried to capture all but within the sqrt brackets, but it also captures everything in every other bracket as well. So I am having trouble capturing <code>sqrt(9)</code> and <code>sqrt(6+3)</code> without one messing with the other.</p>\n\n<p>Any guidance is much appreciated.</p>\n\n<p>UPDATE: So following on from an answer provided, perhaps I need to explain my program more so you get an idea of what is going on.</p>\n\n<p>Say I have the input <code>2 * (3 + 5)</code>, this will be interpreted into the following array:</p>\n\n<p><code>[\"2\", \"*\", \"(\", \"3\", \"+\", \"5\", \")\"]</code></p>\n\n<p>So program conforms to PEDMAS so will first look for parenthesis, in this situation it finds them. A basic loop is basically like this:</p>\n\n<pre><code>function find_backets\n   start_i, end_i\n   for i in array do \n      if i == \"(\"\n         start_i = index\n         find_brackets\n      end\n      if i == \")\"\n         end_i = index\n         # end of nest\n      end\n   end\n</code></pre>\n\n<p>I can then pass my start and end locations within the array to a function that will iteration over each nested operation. So the above can interpret this just fine:</p>\n\n<p><code>calc -o \"2 * (6 + (2 * 2))\"</code></p>\n\n<p><code>#=&gt; [\"2\", \"*\", \"(\", \"6\", \"+\", \"(\", \"2\", \"*\", \"2\", \")\", \")\"]</code></p>\n\n<p>My idea is that when it comes across the sqrt function, it will simply just reuse the same regex used for the users input, and create a whole new array and do the above on it. Then once it's done, I take index 0 and place it where the sqrt used to be.</p>\n\n<p>EDIT: So yeah didn't actually mentioned, I at to basically capture the entirely of a sqrt. So anything and everything in something like <code>sqrt(5+5*(6/2+sqrt(9))</code></p>\n\n<p>UPDATE: I think I have found a solution</p>\n\n<p>So I done some more reading to learn how <code>* + ?</code> and that worked a bit more and I think (at least so far) this is working</p>\n\n<p><code>string.scan(/\\d*\\.?\\d+\\^?|[-+\\/*%()^]|sqrt\\(.+?\\)+|pi/)</code></p>\n\n<pre><code>calc -o \"sqrt(9)\" #=&gt; [\"sqrt(9)\"] \ncalc -o \"sqrt(3+6)\" #=&gt; [\"sqrt(3+6)\"]\ncalc -o \"sqrt(9) + sqrt(9)\" #=&gt; [\"sqrt(9)\", \"+\", \"sqrt(9)\"]\ncalc -o \"sqrt(9) + 2\" #=&gt; [\"sqrt(9)\", \"+\", \"2\"]\n</code></pre>\n\n<p>Will update in a bit</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1550064377, "post_id": 54671111, "comment_id": 96132395, "body": "Is it possible to correct the format in which you get your <code>city_id</code> params? If you have control of that, it sounds like this would be better fixed there."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550064511, "post_id": 54671111, "comment_id": 96132489, "body": "Wait, that&#39;s rails params. Something really ugly must be happening in javascript-land to make rails see <code>&quot;[&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;]&quot;</code> in params. It is much easier to do the usual rails&#39; thing for array parameters, which would not require eval."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 2, "creation_date": 1550064911, "post_id": 54671111, "comment_id": 96132733, "body": "Is <code>params</code> a regular old rails controller params? You definitely don&#39;t want to eval a query parameter like that, and I don&#39;t think you should need to (security concern)"}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1550065236, "post_id": 54671111, "comment_id": 96132940, "body": "sorry the params like this city_id = &quot;[8, 1, 22, 25, 26, 2, 15, 10, 20, 23, 11, 18, 6, 24, 7, 12, 13, 9, 14, 21, 27, 17, 3, 16, 5, 4, 19]&quot;"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1550065337, "post_id": 54671111, "comment_id": 96133001, "body": "That will still be covered by my answer @RajkumarUlaganadhan :)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550068576, "post_id": 54671111, "comment_id": 96135087, "body": "When sending params from an input or multiple input elements set the <i>name</i> attribute to <code>city_id[]</code>. Rails will convert the values automatically to an array under the name <code>param[:city_id]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550064650, "post_id": 54671408, "comment_id": 96132572, "body": "One needs to slap a <code>to_i</code> onto this, probably. Or maybe not (database might handle the type conversions)"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1550065025, "post_id": 54671408, "comment_id": 96132809, "body": "Thanks @SergioTulentsev - think Rails / DB will take care of this the bulk of the time, though I&#39;ve added a note to cover this."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1550067073, "post_id": 54671408, "comment_id": 96134101, "body": "regex is pretty cool to extraction. @RajkumarUlaganadhan It will be great if you mark answer as accepted if above provide you sophisticated solution for your problem."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1550069116, "last_edit_date": 1550069116, "creation_date": 1550064572, "answer_id": 54671408, "question_id": 54671111, "link": "https://stackoverflow.com/questions/54671111/is-there-any-function-to-get-an-array-value-from-string-except-eval/54671408#54671408", "title": "Is there any function to get an array value from string except `eval`?", "body": "<p>I've left a comment for what would be my preferred approach: it's unusual to get your params through as you are, and the ideal approach would be to address this. Using <code>eval</code> is definitely a no go - there are some big security concerns to doing so (e.g. imagine someone submitting <code>\"City.delete_all\"</code> as the param).</p>\n\n<p>As a solution to your immediate problem, you can do this using a regex, scanning for digits:</p>\n\n<pre><code>str = \"['1','2','3','4']\"\nstr.scan(/\\d+/)\n# =&gt; [\"1\", \"2\", \"3\"]\n\nstr = '1'\nstr.scan(/\\d+/)\n# =&gt; [\"1\"]\n\n# In your case:\n\nparams[:city_id].scan(/\\d+/)\n</code></pre>\n\n<p>In very simple terms, this looks through the given string for any digits that are in there. Here's a simple Regex101 with results / an explanation: <a href=\"https://regex101.com/r/41yw9C/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/41yw9C/1</a>.</p>\n\n<p>Rails should take care of converting the fields in your subsequent query (<code>where(city_id: params[:city_id])</code>), though if you explictly want an array of integers, you can append the following (thanks @SergioTulentsev):</p>\n\n<pre><code>params[:city_id].scan(/\\d+/).map(&amp;:to_i)\n\n#\u00a0or in a single loop, though slightly less readable:\n[].tap { |result| str.scan(/\\d+/) { |match| result &lt;&lt; match.to_i } }\n\n# =&gt; [1, 2, 3, 4]\n</code></pre>\n\n<p>Hope that's useful, let me know how you get on or if you have any questions.</p>\n"}, {"tags": [], "owner": {"reputation": 1338, "user_id": 720254, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/drkkb.jpg?s=128&g=1", "display_name": "Francesco Boffa", "link": "https://stackoverflow.com/users/720254/francesco-boffa"}, "is_accepted": false, "score": 2, "last_activity_date": 1550065345, "creation_date": 1550065345, "answer_id": 54671627, "question_id": 54671111, "link": "https://stackoverflow.com/questions/54671111/is-there-any-function-to-get-an-array-value-from-string-except-eval/54671627#54671627", "title": "Is there any function to get an array value from string except `eval`?", "body": "<p>Your strings look very close to JSON, so probably the safest thing you can do is parse the string as JSON. In fact:</p>\n\n<pre><code>JSON.parse(\"1\") =&gt; 1\nJSON.parse('[\"1\",\"2\",\"3\",\"4\"]') =&gt; [\"1\",\"2\",\"3\",\"4\"]\n</code></pre>\n\n<p>Now your array uses single quotes. So I would suggest you to do:</p>\n\n<pre><code>Array(JSON.parse(string.gsub(\"'\", '\"'))).map(&amp;:to_i)\n</code></pre>\n\n<p>So, replace the single quotes with doubles, parse as JSON, make sure it's wrapped in an array and convert possible strings in the array to integers.</p>\n"}], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 54671408, "answer_count": 2, "score": 1, "last_activity_date": 1550140394, "creation_date": 1550063732, "last_edit_date": 1550140394, "question_id": 54671111, "link": "https://stackoverflow.com/questions/54671111/is-there-any-function-to-get-an-array-value-from-string-except-eval", "title": "Is there any function to get an array value from string except `eval`?", "body": "<p>I have a string <code>params</code>, whose value is <code>\"1\"</code> or <code>\"['1','2','3','4']\"</code>. By using <code>eval</code> method, I can get the result <code>1</code> or <code>[1,2,3,4]</code>, but I need the result <code>[1]</code> or <code>[1,2,3,4]</code>.</p>\n\n<pre><code>params[:city_id] = eval(params[:city_id])\n\nscope :city, -&gt; (params) { params[:city_id].present? ? where(city_id: (params[:city_id].is_a?(String) ? eval(params[:city_id]) : params[:city_id])) : all }\n</code></pre>\n\n<p>Here i don't want eval.</p>\n\n<pre><code>scope :city, -&gt; (params) { params[:city_id].present? ? where(city_id: params[:city_id]) : all }\n\nparams[:city_id] #should be array values e.g [1] or [1,2,3,4] instead of string\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "jointable"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6589186, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zoXA5x3js5c/AAAAAAAAAAI/AAAAAAAAAAw/y9aihbkevu4/photo.jpg?sz=128", "display_name": "Hyun Ahn", "link": "https://stackoverflow.com/users/6589186/hyun-ahn"}, "edited": false, "score": 0, "creation_date": 1550107987, "post_id": 54672711, "comment_id": 96152812, "body": "Thank you so much Matt. This is exactly what I&#39;m looking for."}], "tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1550068556, "creation_date": 1550068556, "answer_id": 54672711, "question_id": 54670267, "link": "https://stackoverflow.com/questions/54670267/rails-join-table-with-record-type-and-recored-id-like-activestorage/54672711#54672711", "title": "Rails join table with record_type and recored_id like activestorage", "body": "<p>Looks like you need a <a href=\"https://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow noreferrer\">polymorphic association</a></p>\n\n<p>You would therefore have the type and id in your likes table, as you have described. Your models for posts and post2s would identify themselves as being of the polymorphic type. </p>\n\n<p>E.g. posts model: <code>has_many :likes, as: :likeable</code> and likes model: <code>belongs_to :likeable, polymorphic: true</code></p>\n\n<p>But do read the guide.</p>\n"}], "owner": {"reputation": 3, "user_id": 6589186, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zoXA5x3js5c/AAAAAAAAAAI/AAAAAAAAAAw/y9aihbkevu4/photo.jpg?sz=128", "display_name": "Hyun Ahn", "link": "https://stackoverflow.com/users/6589186/hyun-ahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54672711, "answer_count": 1, "score": 0, "last_activity_date": 1550068556, "creation_date": 1550061093, "question_id": 54670267, "link": "https://stackoverflow.com/questions/54670267/rails-join-table-with-record-type-and-recored-id-like-activestorage", "title": "Rails join table with record_type and recored_id like activestorage", "body": "<pre><code>create_table :posts do |t|\n  t.string   :title\n  t.string   :content\nend\n\ncreate_table :post2s do |t|\n  t.string   :title\n  t.string   :content\nend\n\ncreate_table :users do |t|\n  t.string   :email\n  t.string   :name\nend\n\ncreate_table :likes do |t|\n  t.references :users\n  t.string :record_type\n  t.integer :record_id\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kxBN4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I want to make like join table like Activestorage\nwith record_type and record_id</p>\n\n<p>Could anyone know this name of join or site to how to create this style of join?</p>\n"}, {"tags": ["ruby", "terminal", "sh", "tshark", "escapestring"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550057260, "post_id": 54668852, "comment_id": 96128139, "body": "<i>&quot;what exactly is causing a new line&quot;</i> \u2013 where do the interpolated variables <code>file_name</code> and <code>src_port</code> come from? If you are reading them via <code>gets</code>, they might contain a trailing newline (use <a href=\"http://ruby-doc.org/core-2.6.1/String.html#method-i-chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a> to remove it). In either way you should escape the variables, see <a href=\"http://ruby-doc.org/stdlib-2.6.1/libdoc/shellwords/rdoc/Shellwords.html\" rel=\"nofollow noreferrer\">Shellwords</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550057500, "post_id": 54668852, "comment_id": 96128274, "body": "Printing the command (instead of executing it) could also help to find the cause, i.e. <code>puts &quot;tshark -r #{file_name}.pcapng ...&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 11055539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bcf1bbe16abec61adadce4c24613fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Mathias ", "link": "https://stackoverflow.com/users/11055539/christopher-mathias"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550058800, "post_id": 54668852, "comment_id": 96129030, "body": "No I didn&#39;t read them via    <code>gets</code> . I seem to have fixed my issue by simply doing    <code>stream = stream.chomp</code> . And yeah, now when I print the command it is all in the same line, printing the version before    <code>chomp</code> , I can see that it goes to a new line right after    <code>-w</code> . Thanks!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550061646, "post_id": 54668852, "comment_id": 96130677, "body": "If <code>stream.chomp</code> solved your issue, you probably don&#39;t have <code>stream = &quot;0xb6143376&quot;</code> as shown in your example ..."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11055539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bcf1bbe16abec61adadce4c24613fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Mathias ", "link": "https://stackoverflow.com/users/11055539/christopher-mathias"}, "is_accepted": false, "score": 0, "last_activity_date": 1550058972, "creation_date": 1550058972, "answer_id": 54669640, "question_id": 54668852, "link": "https://stackoverflow.com/questions/54668852/how-to-pass-a-variable-via-script-to-the-terminal-command-line-and-ensure-that-i/54669640#54669640", "title": "How to pass a variable via script to the terminal command line and ensure that it does not contain escape strings?", "body": "<pre><code>stream = stream.chomp\n</code></pre>\n\n<p>fixed my issue</p>\n"}], "owner": {"reputation": 1, "user_id": 11055539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bcf1bbe16abec61adadce4c24613fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Mathias ", "link": "https://stackoverflow.com/users/11055539/christopher-mathias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550058972, "creation_date": 1550056457, "question_id": 54668852, "link": "https://stackoverflow.com/questions/54668852/how-to-pass-a-variable-via-script-to-the-terminal-command-line-and-ensure-that-i", "title": "How to pass a variable via script to the terminal command line and ensure that it does not contain escape strings?", "body": "<p>I am new to Ruby and most things related to the terminal. I am trying to make a script that would return information about RTP streams from a Wireshark trace file. I am implementing it in a way that simply creates a new trace file with only the packets that match the SSRC. Problem is when I pass the SSRC variable in the command that the script will execute I get an error saying that on line 1 the command \"-w\" was not found.</p>\n\n<p>I don't quite understand what exactly is causing a new line to appear so it is hard for me to try anything really. I attempted to do some variatons of | sed 's///' but nothing I tried seemed to work.</p>\n\n<p>My Ruby code;</p>\n\n<pre><code>stream = \"0xb6143376\"\n\n`tshark -r #{file_name}.pcapng -d udp.port==#{src_port},rtp -2 -R \nrtp.ssrc == #{stream} -w #{file_name}_stream1.pcapng`\n</code></pre>\n\n<p>Terminal output;</p>\n\n<pre><code>tshark: Syntax error.\nsh: line 1: -w: command not found\n</code></pre>\n\n<p>So I expected the script to finish and at the end I would have a new trace file with only the packets that match 0xb6143376 SSRC. What I get instead is a new line right before -w </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-api", "react-rails"], "owner": {"reputation": 274, "user_id": 10955127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10218700697293587/picture?type=large", "display_name": "Bryan", "link": "https://stackoverflow.com/users/10955127/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550054886, "creation_date": 1550054886, "question_id": 54668361, "link": "https://stackoverflow.com/questions/54668361/where-should-i-add-actiondispatch-middleware-for-a-rails-api-which-includes-both", "title": "Where should I add ActionDispatch middleware for a Rails API which includes both Web views and API", "body": "<p>I have an application which uses a React component to update the user profile. With a backend of Rails, I'm attempting to pass a flash message on the <code>#update</code> action which is connected to the Rails API that I built for the React frontend. <code>ActionController::API</code> doesn't have the middleware of <code>ActionController::Base</code> and I can't figure out where to include the <code>ActionDispatch</code> middleware for the <code>ActionController::API</code>. </p>\n\n<p>I've tried adding it as a module (hoping that it may already be within the application):</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class Api::V1::BaseController &lt; ActionController::API\n    include ActionDispatch::Flash\n\n</code></pre>\n\n<p>I've also tried including the middleware into the <code>config/application.rb</code></p>\n\n<p><strong>config/application.rb</strong></p>\n\n<pre><code>module Subs\n  class Application &lt; Rails::Application\n    config.generators do |generate|\n          generate.assets false\n          generate.helper false\n          generate.test_framework  :test_unit, fixture: false\n        end\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n\n    config.middleware.use ActionDispatch::Flash\n  end\nend\n</code></pre>\n\n<p>I imagine that adding it to a general <code>config/application.rb</code> is redundant as the <code>ActionDispatch::Flash</code> is already included in the application. </p>\n\n<p>Where could I add a middleware specifically for the <code>ActionController::API</code> ? Or how could I give it access to the <code>ActionDispatch::Flash</code> that is already present in the <code>ActionController::Base</code>? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1550055471, "post_id": 54667532, "comment_id": 96127069, "body": "Could you create an object in an invalid state and look at the error messages?"}, {"owner": {"reputation": 68, "user_id": 6000862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5b420e9efd924f337c4075ab033bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Vedran Mijatovi\u0107", "link": "https://stackoverflow.com/users/6000862/vedran-mijatovi%c4%87"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1550057152, "post_id": 54667532, "comment_id": 96128070, "body": "Maybe I could by creating an instance and check for errors after <code>valid?</code> but that wouldn&#39;t be automated then. I would have to write code for every separate model because format validation wouldn&#39;t trigger due to allow_blank: true option."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1550057501, "post_id": 54667532, "comment_id": 96128277, "body": "Could you create your own map e.g. <code>{ presence: :blank, ... }</code> etc. Since you know these are static (i18n aside)."}, {"owner": {"reputation": 68, "user_id": 6000862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5b420e9efd924f337c4075ab033bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Vedran Mijatovi\u0107", "link": "https://stackoverflow.com/users/6000862/vedran-mijatovi%c4%87"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1550058252, "post_id": 54667532, "comment_id": 96128705, "body": "That is my last resort if there is no other way. Sometimes I add my custom validations and name errors myself. If I could manage to find a way for it to work like I described it wouldn&#39;t need my further interventions."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1550058393, "post_id": 54667532, "comment_id": 96128779, "body": "The error names are added during validation and it&#39;s entirely up to the validator which error names or how many are used. For example, the <code>LengthValidator</code> might add <code>:wrong_length</code>, <code>:too_short</code> or <code>:too_long</code>. The model isn&#39;t aware of these messages and they aren&#39;t available before an actual validation occured."}, {"owner": {"reputation": 68, "user_id": 6000862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5b420e9efd924f337c4075ab033bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Vedran Mijatovi\u0107", "link": "https://stackoverflow.com/users/6000862/vedran-mijatovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1550060424, "post_id": 54667532, "comment_id": 96129964, "body": "Thanks, makes sense. I would have to take a different approach then."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1550150675, "post_id": 54667532, "comment_id": 96170367, "body": "You could pass a custom message to every validation to get consistent messages, or maybe override with i18n."}], "owner": {"reputation": 68, "user_id": 6000862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5b420e9efd924f337c4075ab033bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Vedran Mijatovi\u0107", "link": "https://stackoverflow.com/users/6000862/vedran-mijatovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550080707, "creation_date": 1550052614, "last_edit_date": 1550080707, "question_id": 54667532, "link": "https://stackoverflow.com/questions/54667532/how-to-get-validation-error-name-for-specific-model-attribute", "title": "How to get validation error name for specific model.attribute?", "body": "<p>I want to map error names from attribute validations, and I don't know if it's possible.</p>\n\n<p>I'm trying to automatize translating applications. If an email attribute has validations for presence and format I would like to get names of errors, like: <code>[:blank, :taken, :invalid]</code></p>\n\n<p>I googled and managed to get types of validations with:</p>\n\n<pre><code>User.validators_on(:email).map{|v| v.kind}\n =&gt; [:presence, :uniqueness, :format]\n</code></pre>\n\n<p>but that is as far as I got.</p>\n"}, {"tags": ["ruby", "hash", "safe-navigation-operator"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1550053396, "post_id": 54667079, "comment_id": 96125778, "body": "Why do you want to use the safe navigation operator in the first place? Could <code>data</code> be <code>nil</code>? Could <code>data</code> not be a hash? Could <code>&#39;str_key&#39;</code> be missing? Could <code>&#39;str_key&#39;</code> be present and not be an array? What&#39;s the actual problem you&#39;re trying to solve here?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550053644, "post_id": 54667079, "comment_id": 96125938, "body": "Your problem is not at all clear."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1550068194, "post_id": 54667079, "comment_id": 96134838, "body": "Safe navigation seems a bit obtuse here given that a simple <code>return unless data</code> guard clause would be perfectly appropriate (and far more readable) in this method."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8958428, "user_type": "registered", "profile_image": "https://graph.facebook.com/1384953898297541/picture?type=large", "display_name": "Rados\u0142aw Sakowicz", "link": "https://stackoverflow.com/users/8958428/rados%c5%82aw-sakowicz"}, "edited": false, "score": 0, "creation_date": 1550053169, "post_id": 54667337, "comment_id": 96125622, "body": "So, maybe better in this way: <code>data[&#39;str_key&#39;]&amp;.include?(&#39;string1&#39;) </code> Which solution will be the best?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 61, "user_id": 8958428, "user_type": "registered", "profile_image": "https://graph.facebook.com/1384953898297541/picture?type=large", "display_name": "Rados\u0142aw Sakowicz", "link": "https://stackoverflow.com/users/8958428/rados%c5%82aw-sakowicz"}, "edited": false, "score": 1, "creation_date": 1550053567, "post_id": 54667337, "comment_id": 96125893, "body": "@Rados\u0142awSakowicz it depends on the input data, like Stefan mentioned in the comment below your question. If it&#39;s possible for <code>data</code> to be <code>nil</code>, you have to take this possibility into account. Otherwise <code>data[&#39;str_key&#39;]&amp;.include?(&#39;string1&#39;)</code> is enough, obviously."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 6, "last_activity_date": 1550052434, "last_edit_date": 1550052434, "creation_date": 1550052069, "answer_id": 54667337, "question_id": 54667079, "link": "https://stackoverflow.com/questions/54667079/safe-navigation-operator-for-hash-with-string-keys/54667337#54667337", "title": "Safe navigation operator for hash with string keys", "body": "<p>The fact that this key is <code>String</code> isn't really relevant here. What you want (well, I guess) is to use safety operator with <code>[]</code> method and you can do it like this:</p>\n\n<pre><code>data&amp;.[]('str_key')&amp;.include?('string1')\n</code></pre>\n\n<p>You can also make use of <a href=\"https://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig\" rel=\"noreferrer\"><code>Hash#dig</code></a> method, I think it will improve readability of this code:</p>\n\n<pre><code>data&amp;.dig('str_key')&amp;.include?('string1')\n</code></pre>\n\n<p><code>Hash#dig</code> also has the advantage of working properly with nested hashes (it was in fact designed to handle this case):</p>\n\n<pre><code>data = { 'str_key' =&gt; { 'str_key1' =&gt; { 'str_key2' =&gt; 'str_value' } } }\ndata.dig('str_key', 'str_key1', 'str_key2')\n# =&gt; 'str_value'\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8958428, "user_type": "registered", "profile_image": "https://graph.facebook.com/1384953898297541/picture?type=large", "display_name": "Rados\u0142aw Sakowicz", "link": "https://stackoverflow.com/users/8958428/rados%c5%82aw-sakowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "closed_date": 1550091853, "accepted_answer_id": 54667337, "answer_count": 1, "score": 2, "last_activity_date": 1550053627, "creation_date": 1550051250, "last_edit_date": 1550053627, "question_id": 54667079, "link": "https://stackoverflow.com/questions/54667079/safe-navigation-operator-for-hash-with-string-keys", "closed_reason": "Needs details or clarity", "title": "Safe navigation operator for hash with string keys", "body": "<p>I have a problem:</p>\n\n<pre><code>data = { 'str_key' =&gt; ['string1', 'string2'] }\n\n# @param [Hash] data - hash with String key\n# @return [boolean]\ndef some_logic_test?(data)\n  data&amp;.&lt;what_to_do_with_string_key?&gt;.include?('string1')\nend\n</code></pre>\n\n<p>How can I use the safe navigation operator <code>&amp;.</code> for hash with string keys? Keys conversion will by [sic] obligatory?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-storage", "carrierwave", "google-authentication"], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 7937511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T7JYH.jpg?s=128&g=1", "display_name": "Alphabetus", "link": "https://stackoverflow.com/users/7937511/alphabetus"}, "is_accepted": true, "score": 0, "last_activity_date": 1550053143, "creation_date": 1550053143, "answer_id": 54667703, "question_id": 54666902, "link": "https://stackoverflow.com/questions/54666902/fog-google-google-storage-authentication-fails/54667703#54667703", "title": "fog-google google-storage authentication fails", "body": "<p>Well.. i haven't seen <strong>any</strong> references to this on SO so maybe i will help another aspiring rails developer like me.</p>\n\n<p>If you want to use carrierwaveuploader (which is amazing).\nMy best advice is to combine this:</p>\n\n<p><a href=\"https://github.com/metaware/carrierwave-google-storage\" rel=\"nofollow noreferrer\">https://github.com/metaware/carrierwave-google-storage</a></p>\n\n<p>Worked like a charm!!</p>\n"}], "owner": {"reputation": 142, "user_id": 7937511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T7JYH.jpg?s=128&g=1", "display_name": "Alphabetus", "link": "https://stackoverflow.com/users/7937511/alphabetus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 54667703, "answer_count": 1, "score": 0, "last_activity_date": 1550066833, "creation_date": 1550050809, "last_edit_date": 1550051620, "question_id": 54666902, "link": "https://stackoverflow.com/questions/54666902/fog-google-google-storage-authentication-fails", "title": "fog-google google-storage authentication fails", "body": "<p>I'm on rails 2.6.0 using carrierwaveUploader.\nNo matter what i do i can not authenticate with my google API for storage.\nI've created the JSON key, the bucket, everything.</p>\n\n<p>My configs are:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>CarrierWave.configure do |config|\n  config.fog_provider = 'fog/google'                        # required\n  config.fog_credentials = {\n    provider: 'Google',\n    google_storage_access_key_id: 'REDACTED',\n    google_storage_secret_access_key: '-----BEGIN PRIVATE KEY-----\\nREDACTED\\n-----END PRIVATE KEY-----\\n'\n\n    # google_json_key_location: Rails.root.join('rails-app.json')\n  }\n  config.fog_directory = 'gomes-commerce'\nend\n</code></pre>\n\n<p>I've tried to use <code>google_json_key_location</code> parameter as you can see, and give the path to the downloaded file as well... it doesn't work! \nit gives an error about required parameters <code>google_storage_access_key_id</code> &amp;&amp; <code>google_storage_access_key</code>.</p>\n\n<p>My (related) gems are:</p>\n\n<pre><code>gem 'fog', require: 'fog/google'\ngem 'google-api-client', '~&gt; 0.11.1'\ngem 'mime-types'\n</code></pre>\n\n<p>My output is always the same:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n    &lt;Error&gt;\n        &lt;Code&gt;\n          SignatureDoesNotMatch\n         &lt;/Code&gt;\n        &lt;Message&gt;\n          The request signature we calculated does not match the \n          signature you provided. Check your Google secret key and signing \n          method. \n        &lt;/Message&gt;\n        &lt;StringToSign&gt;\n          PUT\\n\\nimage/jpeg\\nWed, 13 Feb 2019 09:36:19 +0000\\nx-goog-acl:public-read\\n/gomes-commerce/uploads%2Fproduct%2Fimage%2F17%2Fscp_shirt.jpg\n        &lt;/StringToSign&gt;\n   &lt;/Error&gt;\n</code></pre>\n\n<p>I'm trying to figure this out for more than 48h now. \nI wouldn't come here &amp; open a topic if there was any reference on SO that is working for my case.\nPlease help! :)</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 1223, "user_id": 3012473, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gSYLc.png?s=128&g=1", "display_name": "buncis", "link": "https://stackoverflow.com/users/3012473/buncis"}, "is_accepted": false, "score": 0, "last_activity_date": 1550053309, "last_edit_date": 1550053309, "creation_date": 1550052549, "answer_id": 54667510, "question_id": 54666855, "link": "https://stackoverflow.com/questions/54666855/understanding-has-friendship-gem-rails/54667510#54667510", "title": "Understanding has_friendship gem rails", "body": "<p>when you put <code>has_friendship</code> in any model </p>\n\n<p>then it will just load all the <code>has_friendship.rb</code> code into the model</p>\n\n<p>check this for more <a href=\"https://yehudakatz.com/2009/11/12/better-ruby-idioms/\" rel=\"nofollow noreferrer\">better ruby idioms by yehudakatz</a> and <a href=\"https://guides.rubyonrails.org/plugins.html#add-an-acts-as-method-to-active-record\" rel=\"nofollow noreferrer\">Add an \"acts_as\" Method to Active Record</a></p>\n"}], "owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550053309, "creation_date": 1550050698, "question_id": 54666855, "link": "https://stackoverflow.com/questions/54666855/understanding-has-friendship-gem-rails", "title": "Understanding has_friendship gem rails", "body": "<p>I am a Ruby on Rails developer and wanted to learn more about Ruby as a language. My first approach was to study open source gems and so, started with <code>has_frienship</code> gem.</p>\n\n<p>Although, I know SOME of things that are there but confused about alot.</p>\n\n<p>The gem asks to put <code>has_friendship</code> word inside the model against which migrations will be copied from the gem and tables will be made using polymorphic associations.</p>\n\n<ul>\n<li>When I put the word <code>has_friendship in any model</code>, then, <code>which line of code</code> in the gem checks it's presence or absence.</li>\n</ul>\n\n<p>I am unable to find that and will really appreciate your help.</p>\n\n<p>Regards</p>\n"}, {"tags": ["ruby", "windows", "source-code-protection"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550050578, "post_id": 54666683, "comment_id": 96123915, "body": "<a href=\"https://github.com/ahoward/macaddr/pull/25\" rel=\"nofollow noreferrer\">PR 25</a> has a fix for the error, but isn&#39;t likely to get merged.  It just adds a safety check for the method call. So this will prevent the error, but might lose information on those systems.  You might want to either fork the gem or look into an existing fork."}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550051490, "post_id": 54666683, "comment_id": 96124517, "body": "@Tom thanks for your reply. I will leave this as the last option, i would like to use other &quot;codes&quot; besides the MAC address. Since also if i solve the error rescuing it, i won&#39;t get the address the same, like you said. You know for example how to get hardware serial numbers?"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550051969, "post_id": 54666683, "comment_id": 96124836, "body": "<code>system_profiler SPHardwareDataType</code> returns a lot of information including ` Hardware UUID:` that you could regex out . I know it works on macOS, but cannot test elsewhere.  You may have to check the environment and use different commands respectively. You can run that from Ruby by wrapping it in backticks or  <code>system ...</code> or a couple other ways."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550052520, "post_id": 54666683, "comment_id": 96125220, "body": "<code>system(system_profiler SPHardwareDataType).scan(&#47;(?&lt;=Hardware UUID: ).+&#47;).first</code>"}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550052545, "post_id": 54666683, "comment_id": 96125235, "body": "@Tom that&#39;s a command you run on macOS terminals? Unfortunately i am on Windows and i am gonna distribute this app only through Windows. Should i log the output of <code>ipconfig &#47;all</code>, or any other utility, to a file and then parse it? Is this the best way? Actually i have a GUI application, and calling <code>system</code> cause a cmd window to pop up, so i&#39;m using <code>win32ole</code> to call cmd scripts from Ruby."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550052976, "post_id": 54666683, "comment_id": 96125499, "body": "<a href=\"https://stackoverflow.com/a/20832728/5399937\">stackoverflow.com/a/20832728/5399937</a> maybe something like this? This isn&#39;t really my forte, but kinda curious myself."}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550053820, "post_id": 54666683, "comment_id": 96126043, "body": "@Tom i&#39;m on standard Ruby, not Rails, but i think i will do the following on a Windows machine: <code>wmic csproduct get &quot;UUID&quot; #Unique UUID.</code>  <code>wmic nic get &quot;MACAddress&quot; #All MAC addresses on the computer.</code>  This is only for Windows. I think these commands are almost the same as macOS <code>system_profiler</code> utility. I will try this and if it works i will update my question or answer it.   I think the safer way is to combine the UUID and the MAC address together to make a &quot;license code&quot;, still not safe at 100% but it should prevent the ordinary user to copy and paste the code somewhere else"}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1550053924, "post_id": 54666683, "comment_id": 96126101, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188335/discussion-between-lucaortis-and-tom\">continue this discussion in chat</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550062125, "post_id": 54666683, "comment_id": 96130949, "body": "Since this is Ruby \u2013 how do you prevent the user from simply changing the Ruby code which performs the check?"}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550063206, "post_id": 54666683, "comment_id": 96131627, "body": "@Stefan the code will be downloaded when the app starts, and an ordinary user won&#39;t be able to change the code, ok that ruby is easy, but i don&#39;t think anyone can deal with it. Plus its all compressed into an exe file. Again, if someone who has coding skills gonna try to break into this, before or later of course he will. But a person who doesn&#39;t know how to get the code from an exe then he wont be able to."}], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "edited": false, "score": 0, "creation_date": 1550060654, "post_id": 54669871, "comment_id": 96130071, "body": "Thanks for your reply. As said in my comments, i want this app to be machine related. I won&#39;t publish it anywhere, i just want to prevent the user to copy it on other computers, so this must work only on the costumer computer."}, {"owner": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "reply_to_user": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "edited": false, "score": 0, "creation_date": 1550230961, "post_id": 54669871, "comment_id": 96202648, "body": "Hi @lucaortis - without knowing the nature of your product, it&#39;s hard to tell whether that license model is appropriate, but I&#39;d warn that of all software that tries to lock itself to the hardware, &gt; 90% of them probably shouldn&#39;t. That said, your solution looks good - but remember, MAC address can be changed VERY easily, and SMBIOS data (which is where the UUID comes from) can be set manually if the software is run within a Virtual Machine. So just be careful - it will work, but it&#39;s more brittle, and less secure than a login-based solution."}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "edited": false, "score": 1, "creation_date": 1550319640, "post_id": 54669871, "comment_id": 96230234, "body": "Thanks for your advices. I&#39;m not an expert so any of these are really usefull to me. I managed to use only the MAC address, but for the reason you explained, isn&#39;t the best choice at all. I will work for sure on that login-based system. By the way, my application already have a login system, since it&#39;s an email client, and this points me to wonder how could i join the mail login system, and mine login system. Sorry for my poor english too."}], "tags": [], "owner": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "is_accepted": false, "score": 0, "last_activity_date": 1550059711, "creation_date": 1550059711, "answer_id": 54669871, "question_id": 54666683, "link": "https://stackoverflow.com/questions/54666683/how-can-i-protect-my-code-using-a-unique-hardware-id-in-ruby/54669871#54669871", "title": "How can I protect my code using a unique hardware ID in Ruby?", "body": "<p>Firstly, I'd recommend you DON'T use MAC addresss. This can be spoofed very easily.</p>\n\n<p>Secondly, I'd recommend you DON'T use hardware ids. Aside from the obvious difficulty you're finding in getting one reliably (I guess windows license would be your best bet), this may bind your software to a particular machine. </p>\n\n<p>Instead, I'd recommend some kind of login system, send a username and hash(password) to a server, get back a UUID. Every time someone uses the software (or every hour depending on what suits your software better) ping your server with the uuid to check that the user hasn't logged in on another machine. Be generous in how you handle the case where your software doesn't get a response, don't lock the software immediately - allow an hour, maybe even a day. If appropriate for your software, pop up a small warning saying the software will be locked if it doesn't detect an internet connection within X minutes. </p>\n\n<p><strong>Remember that you want people to recommend your software to others.</strong> If your licensing system is mostly invisible, people will think higher of your software. If it's constantly in their face, they'll just end up resenting you.</p>\n"}, {"comments": [{"owner": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "edited": false, "score": 0, "creation_date": 1550231218, "post_id": 54686831, "comment_id": 96202774, "body": "You could use backticks instead of system - e.g. <code>a = `wmic nic ...`</code> - also, what does piping it to &quot;more&quot; acheive?"}, {"owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "reply_to_user": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "edited": false, "score": 0, "creation_date": 1550319300, "post_id": 54686831, "comment_id": 96230167, "body": "Hello @user208769, actually i have a gui application, built with the tcl/tk library, when i call shell commands with <code>system</code>, <code>exec</code>, or also backsticks, i get an annoying cmd window popping up. So i&#39;m forced to use <code>win32ole</code> library, i used <code>system</code> here to make it more clear. The <code>|more</code> will grant your output to be correctly decoded, since calling <code>wmic</code> will print its output with another encoding."}], "tags": [], "owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "is_accepted": false, "score": 0, "last_activity_date": 1550135784, "creation_date": 1550135784, "answer_id": 54686831, "question_id": 54666683, "link": "https://stackoverflow.com/questions/54666683/how-can-i-protect-my-code-using-a-unique-hardware-id-in-ruby/54686831#54686831", "title": "How can I protect my code using a unique hardware ID in Ruby?", "body": "<h2>I solved by calling these cmd commands from Ruby:</h2>\n\n<pre><code>system('wmic nic get \"MACAddress\" |more &gt;&gt; mac.txt')\n# &gt;&gt; Will print all MAC addresses inside \"mac.txt\" file\n\nsystem('wmic csproduct get \"UUID\"')\n# &gt;&gt; Will print an unique UUID\n</code></pre>\n\n<p>Maybe there are better ways, but i'm not an expert and this fixed my problem.<br>\nI'm on Windows 10 Pro 64bit and my Ruby version is: </p>\n\n<pre><code>C:\\&gt;ruby -v\n# &gt;&gt; ruby 2.3.3p222 (2016-11-21 revision 56859) [x64-mingw32]\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 8709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a23166ba8ad1d2d3e53b5dd543311a6?s=128&d=identicon&r=PG&f=1", "display_name": "lucaortis", "link": "https://stackoverflow.com/users/8709628/lucaortis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 794, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550135808, "creation_date": 1550050133, "last_edit_date": 1550135808, "question_id": 54666683, "link": "https://stackoverflow.com/questions/54666683/how-can-i-protect-my-code-using-a-unique-hardware-id-in-ruby", "title": "How can I protect my code using a unique hardware ID in Ruby?", "body": "<p>I'm about to sell my Ruby app on Windows, and I want to protect my software from being stolen or copied. \nI won't publish it, so it needs to be machine related.</p>\n\n<p>I need my code to obtain the MAC address of any pc at startup, and compare it with a file stored in my server. I tried to build a unique serial code from the MAC address, but the 'macaddr' gem returns an error on some computers. This code will fail on some computers:</p>\n\n<pre><code>require 'macaddr'\nmac = Mac.addr\nputs mac\n# &gt;&gt; NoMethodError: undefined method 'pfamily' for nil:NilClass\n</code></pre>\n\n<p>How can I get some unique system ids and build a serial code from them? Is there another way to get a unique hardware ID from a computer in Ruby?</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1550049945, "post_id": 54666525, "comment_id": 96123485, "body": "Use word boundaries, <code>\\bL\\w*\\d\\b</code>"}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1550050355, "post_id": 54666525, "comment_id": 96123765, "body": "Thank you for the help. Didn&#39;t know about word boundaries."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1550050499, "post_id": 54666525, "comment_id": 96123855, "body": "Also, do not use <code>.*</code> on both sides of the word matching pattern. Rather than that, split the text into lines and test for a match (see <a href=\"https://stackoverflow.com/questions/17354864/ruby-filter-array-by-regex\">this thread</a>)"}], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1550049929, "answer_count": 0, "score": 0, "last_activity_date": 1550049695, "creation_date": 1550049695, "question_id": 54666525, "link": "https://stackoverflow.com/questions/54666525/matching-string-at-the-beginning-middle-or-ending-of-string", "closed_reason": "Duplicate", "title": "Matching string at the beginning, middle or ending of string", "body": "<p>Trying to write a regular expression that matches all the below:</p>\n\n<pre><code>LOREM X IPSUM\nLOREM X\nX IPSUM\n</code></pre>\n\n<p>where <code>X</code> is a word starting with L and ending with a digit (it may also include other Ls). I.e <code>LFCLL86A5</code>, <code>L00</code>.</p>\n\n<p><code>/.*\\s(E\\w+\\d)\\s.*/</code> works with the first option but I have a hard time making it work with the other two cases. </p>\n"}, {"tags": ["ruby", "ping"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550049443, "post_id": 54666308, "comment_id": 96123161, "body": "<code>Ping::pingecho(10.xx.xx.xx)</code> is invalid, isn&#39;t it?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1550065431, "post_id": 54666308, "comment_id": 96133051, "body": "Note that using the <a href=\"https://en.wikipedia.org/wiki/Echo_Protocol\" rel=\"nofollow noreferrer\">Echo Protocol</a> (as done by your code) uses a completely different protocol than the <code>ping</code> command which uses <a href=\"https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol\" rel=\"nofollow noreferrer\">ICMP</a>, which is <i>not</i> based on TCP. Different results are thus likely."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1550091775, "post_id": 54666308, "comment_id": 96147607, "body": "Are you sure that there is an echo server running at the host? That would be the first thing I would check."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "edited": false, "score": 0, "creation_date": 1550099503, "post_id": 54666308, "comment_id": 96150621, "body": "If you&#39;ll remove StandardError from rescue list, what exception you&#39;ll get on these two hosts?"}, {"owner": {"reputation": 31, "user_id": 10406188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b32d1dd4b026b3e5cd11ff0122e358d?s=128&d=identicon&r=PG&f=1", "display_name": "Ark", "link": "https://stackoverflow.com/users/10406188/ark"}, "edited": false, "score": 0, "creation_date": 1550119439, "post_id": 54666308, "comment_id": 96155270, "body": "Hi Holger - thanks, that makes sense. But I have this issue only for these 2 IPs. For the other 2000 odd IPs in the list, the results of ping match with the results from echo (my program)"}, {"owner": {"reputation": 31, "user_id": 10406188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b32d1dd4b026b3e5cd11ff0122e358d?s=128&d=identicon&r=PG&f=1", "display_name": "Ark", "link": "https://stackoverflow.com/users/10406188/ark"}, "edited": false, "score": 0, "creation_date": 1550119569, "post_id": 54666308, "comment_id": 96155303, "body": "Hi Jorg - thanks, even I suspect something at the IP end whereby it is not accepting connections or something similar. Unfortunately I have limited knowledge of networking; so not sure how to check whether the IPs are configured in such a way that they &#39;understand&#39; echo."}, {"owner": {"reputation": 31, "user_id": 10406188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b32d1dd4b026b3e5cd11ff0122e358d?s=128&d=identicon&r=PG&f=1", "display_name": "Ark", "link": "https://stackoverflow.com/users/10406188/ark"}, "edited": false, "score": 0, "creation_date": 1550119616, "post_id": 54666308, "comment_id": 96155309, "body": "Hi Ivan - Thanks, I tried removing the StandardError. The result still says &#39;FALSE&#39; for both IPs."}, {"owner": {"reputation": 31, "user_id": 10406188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b32d1dd4b026b3e5cd11ff0122e358d?s=128&d=identicon&r=PG&f=1", "display_name": "Ark", "link": "https://stackoverflow.com/users/10406188/ark"}, "edited": false, "score": 0, "creation_date": 1550123687, "post_id": 54666308, "comment_id": 96156345, "body": "Additionally, when I remove the StandardError as suggested by Ivan, I get the following error: &quot;`initialize&#39;: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.&quot;"}], "owner": {"reputation": 31, "user_id": 10406188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b32d1dd4b026b3e5cd11ff0122e358d?s=128&d=identicon&r=PG&f=1", "display_name": "Ark", "link": "https://stackoverflow.com/users/10406188/ark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550049588, "creation_date": 1550048944, "last_edit_date": 1550049588, "question_id": 54666308, "link": "https://stackoverflow.com/questions/54666308/incorrect-ping-result-from-ruby-program", "title": "Incorrect ping result from Ruby program", "body": "<p>I use the following code snippet to ping a series of IPs and check if they are reachable or not:</p>\n\n<pre><code>class Ping\n  def self.pingecho(host = string.new, timeout = 10, service = \"echo\")\n    begin\n      puts host\n      while(timeout) do\n        s = TCPSocket.new(host, service)\n        s.close\n      end\n    rescue Errno::ECONNREFUSED\n      return true\n    rescue Timeout::Error, StandardError\n      return false\n    end\n    return true\n  end\nend\n</code></pre>\n\n<p>It returns the correct status except for two IPs on my list, for which the code returns <code>false</code>. But when I try to ping them directly through command prompt using the ping command, I get a response without any issues. If this is an issue with the code, then I should get incorrect results for the other IPs as well. But I have this issue only with these two.</p>\n\n<p>I tried to pass these IPs directly to the class as:</p>\n\n<pre><code>Ping::pingecho(10.xx.xx.xx)\n</code></pre>\n\n<p>but I still get the result as <code>false</code>.</p>\n\n<p>Any suggestions on what needs to be checked/corrected?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1550040880, "post_id": 54664098, "comment_id": 96118856, "body": "That&#39;s what associations are for. You&#39;ll want to use <code>has_many :through</code> or <code>has_and_belongs_to</code>. I prefer the former. A lot of folks use the latter."}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550042386, "post_id": 54664537, "comment_id": 96119564, "body": "You have added <code>collected</code> columns also, can you elaborate when it will get set <code>true</code>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1550042763, "post_id": 54664537, "comment_id": 96119732, "body": "@ray Sure, I added a method to show how to do that."}, {"owner": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 0, "creation_date": 1550043324, "post_id": 54664537, "comment_id": 96119968, "body": "@Schwern So the format would be 1 record: user_badges = badge_id, user_id, collected."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 0, "creation_date": 1550043772, "post_id": 54664537, "comment_id": 96120194, "body": "@something One record per User/Badge combo. If a User 1 has 3 Badges you&#39;d have 3 UserBadges: <code>{ user_id: 1, badge_id: 1, collected: false }, { user_id: 1, badge_id: 2, collected: false }, { user_id: 1, badge_id: 3, collected: false }</code>."}, {"owner": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 1, "creation_date": 1550043921, "post_id": 54664537, "comment_id": 96120279, "body": "@Schwern copy that. Thank you for your help! Salute!"}, {"owner": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 0, "creation_date": 1550557093, "post_id": 54664537, "comment_id": 96300672, "body": "I would like to add. For some reason I don&#39;t know why I&#39;m getting an error when I&#39;ve used &quot;UsersBadge&quot; as model I&#39;m getting an error &quot;badges_users not found on development database&quot; so I&#39;ve decided to change it to &quot;BadgesUser&quot; and no its running without error."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "edited": false, "score": 0, "creation_date": 1550566076, "post_id": 54664537, "comment_id": 96304516, "body": "@something My mistake. <a href=\"https://stackoverflow.com/questions/11590469/rails-naming-convention-for-join-table\"><code>has_and_belongs_to_many</code> assumes there&#39;s a table named in plural and alphabetical order</a>. It should be <code>badges_users</code>."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1550565932, "last_edit_date": 1550565932, "creation_date": 1550042143, "answer_id": 54664537, "question_id": 54664098, "link": "https://stackoverflow.com/questions/54664098/i-need-to-save-multiple-ids-to-another-model-for-reference/54664537#54664537", "title": "I need to save multiple ids to another model for reference", "body": "<p>Assuming you want many Users to have the same Badge, you need is a many-to-many association between Badge and User. A User can have many Badges, and a Badge can have many Users. This requires a join table to store which User has which Badges.</p>\n\n<pre><code>create_table :badges_users do |t|\n  t.belongs_to :user, index: true\n  t.belongs_to :badge, index: true\nend\n</code></pre>\n\n<p>Since it's nothing but a list, no model for this table is required. Use <a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\"><code>has_and_belongs_to_many</code></a>.</p>\n\n<pre><code>class Badge &lt; ApplicationRecord\n  has_and_belongs_to_many :users\nend\n\nclass User &lt; ApplicationRecord\n  has_and_belongs_to_many :badges\nend\n</code></pre>\n\n<p>Adding a Badge to a User is as simple as pushing onto an array.</p>\n\n<pre><code>user.badges &lt;&lt; badge\n</code></pre>\n\n<p>Or vice-versa.</p>\n\n<pre><code>badge.users &lt;&lt; user\n</code></pre>\n\n<p>They do the same thing, add a row to <code>badges_users</code> with the badge and user IDs.</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many\" rel=\"nofollow noreferrer\">See here for more about how to use these collections</a>.</p>\n\n<p>Instead of storing a User's points in User, calculate them from their Badges.</p>\n\n<pre><code>def total_points\n  badges.sum(:points)\nend\n</code></pre>\n\n<hr>\n\n<p>If you need to track whether a User has \"collected\" a Badge yet or not, you'll need to store that in the join table and use a model to get that info.</p>\n\n<pre><code>create_table :badge_users do |t|\n  t.belongs_to :user, index: true\n  t.belongs_to :badges, index: true\n  t.boolean :collected, default: false\nend\n\nclass BadgeUser &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :badges\nend\n</code></pre>\n\n<p>And then use <a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\"><code>has_many</code> and <code>has_many :through</code></a> to set up the associations.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :badge_users\n  has_many :badges, through: :badge_users\nend\n\nclass Badge &lt; ApplicationRecord\n  has_many :badge_users\n  has_many :users, through: :badge_users\nend\n</code></pre>\n\n<p>Adding a badge to a user is the same as before, <code>user.badges &lt;&lt; badge</code>.</p>\n\n<p>Then we let badges be collected by users.</p>\n\n<pre><code># In BadgeUser\ndef collect\n  if collected\n    raise \"Badge already collected\"\n  end\n\n  update!(collected: true)\nend\n\n# In User\ndef collect_badge(badge)\n  badge_users.find_by( badge: badge ).collect\nend\n</code></pre>\n\n<p>And users can find their collected badges.</p>\n\n<pre><code># In User\ndef collected_badges\n  badges.merge(BadgeUser.where(collected: true))\nend\n</code></pre>\n\n<p>Once a User can find their collected Badges they can total up their points to find out how many points they've used.</p>\n\n<pre><code># In User\ndef used_points\n  collected_badges.sum(:points)\nend\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 10068674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gRv54FhhWE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oH6R244hnLFuogLjfnpdDcQc_9-w/mo/photo.jpg?sz=128", "display_name": "some thing", "link": "https://stackoverflow.com/users/10068674/some-thing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54664537, "answer_count": 1, "score": -2, "last_activity_date": 1550565932, "creation_date": 1550040206, "last_edit_date": 1550040968, "question_id": 54664098, "link": "https://stackoverflow.com/questions/54664098/i-need-to-save-multiple-ids-to-another-model-for-reference", "title": "I need to save multiple ids to another model for reference", "body": "<p>I have a model Badges:</p>\n\n<pre><code>t.string :title\nt.string :description\nt.string :image\nt.integer :points\n</code></pre>\n\n<p>And a model User:</p>\n\n<pre><code>t.string :first_name\nt.string :last_name\nt.integer :total_points\nt.integer :used_points\n</code></pre>\n\n<p>What I need is to add badges to the user so that users can see/view what badges they have and if they already collected the points on it or not. Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550048437, "post_id": 54663805, "comment_id": 96122587, "body": "You can use a gem such as <a href=\"https://github.com/jamis/bulk_insert\" rel=\"nofollow noreferrer\">bulk_insert</a>. But it won&#39;t run your model-level validations (though, you could possibly run them manually before the bulk insert). ActiveRecord doesn&#39;t support bulk imports, to my knowledge. So your options are to either use a loop (via some wrapper method if you desire), or to do bulk insert in SQL, skipping ActiveRecord."}, {"owner": {"reputation": 109, "user_id": 5239353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6812c61045f9468223c149c13df50da?s=128&d=identicon&r=PG&f=1", "display_name": "sizer", "link": "https://stackoverflow.com/users/5239353/sizer"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1550108350, "post_id": 54663805, "comment_id": 96152915, "body": "Thanks for your comment! I know bulk_insert. But I can NOT solve my problem by that gem. My problem is NOT to import a model as multiple records, but import some multiple models by one create method... :("}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1550111321, "post_id": 54663805, "comment_id": 96153560, "body": "If your question is whether or not ActiveRecord supports this - then I&#39;m afraid the answer is no. However, if you don&#39;t mind creating the records in a loop, then you can make a utility method to do it for you."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5239353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6812c61045f9468223c149c13df50da?s=128&d=identicon&r=PG&f=1", "display_name": "sizer", "link": "https://stackoverflow.com/users/5239353/sizer"}, "edited": false, "score": 0, "creation_date": 1550042287, "post_id": 54663962, "comment_id": 96119528, "body": "I appreciate your comment :)  I understand your idea that one line is anti-pattern. And I broke that method to multi-line.  <code>rb company = Company.create; teams = [Team.create(company: company)]; user = User.create(   company: company,   teams: teams ) </code> But I still got same error... How can I create Participate record via ActiveRecord::Relation ??"}], "tags": [], "owner": {"reputation": 426, "user_id": 10257568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3d7bf7a71c92494ba6c2e2230b1c0a?s=128&d=identicon&r=PG&f=1", "display_name": "vinyl", "link": "https://stackoverflow.com/users/10257568/vinyl"}, "is_accepted": true, "score": 0, "last_activity_date": 1550039533, "creation_date": 1550039533, "answer_id": 54663962, "question_id": 54663805, "link": "https://stackoverflow.com/questions/54663805/can-i-create-new-activerecord-model-with-parent-model-child-model-in-bulk/54663962#54663962", "title": "Can I create new ActiveRecord model with parent model &amp; child model IN BULK?", "body": "<p>You cannot do this in one line. You are trying to instantiate and pass an entire Company object where only an id is needed. Additionally, there is no way to attach the user_id to this Company because the User has not yet been created. </p>\n\n<p>You could do all of this inside of a single method, but it\u2019s probably a bad idea for a whole host of reasons. I\u2019d recommend breaking your logic into multiple methods that are easily testable and maintainable. </p>\n"}], "owner": {"reputation": 109, "user_id": 5239353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6812c61045f9468223c149c13df50da?s=128&d=identicon&r=PG&f=1", "display_name": "sizer", "link": "https://stackoverflow.com/users/5239353/sizer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 54663962, "answer_count": 1, "score": -1, "last_activity_date": 1550039533, "creation_date": 1550038929, "question_id": 54663805, "link": "https://stackoverflow.com/questions/54663805/can-i-create-new-activerecord-model-with-parent-model-child-model-in-bulk", "title": "Can I create new ActiveRecord model with parent model &amp; child model IN BULK?", "body": "<p>I want to create some ActiveRecord models via ONE METHOD.</p>\n\n<p>My records are below.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Company &lt; ApplicationRecord\n  has_many :users\n  has_many :teams\n  has_many :participations\nend\n\nclass User &lt; ApplicationRecord\n  belongs_to :company\n  has_many :participations\n  has_many :teams, through: :participations\nend\n\nclass Team &lt; ApplicationRecord\n  belongs_to :company\n  has_many :participations\n  has_many :users, through: :participations\nend\n\nclass Participation &lt; ApplicationRecord\n  belongs_to :company\n  belongs_to :user\n  belongs_to :team\nend\n</code></pre>\n\n<p>My Environments.</p>\n\n<pre><code>$ ruby -v\nruby 2.4.5p335 (2018-10-18 revision 65137) [x86_64-darwin17]\n$ rails -v\nRails 5.0.7.1\n</code></pre>\n\n<p>I tried this. But got an error raised.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>u = User.create(\n  company: Company.create,\n  teams: [\n    Team.create(company: Company.create)\n  ]\n)\n</code></pre>\n\n<pre><code>irb(main):021:0* u.errors\n=&gt; #&lt;ActiveModel::Errors:0x00007faf7f5668b0 @base=#&lt;User id: nil, company_id: 25, name: nil, created_at: nil, updated_at: nil&gt;, @messages={:participations=&gt;[\"is invalid\"]}, @details={:participations=&gt;[{:error=&gt;:invalid}]}&gt;\nirb(main):022:0&gt; u.participations\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Participation id: nil, company_id: nil, user_id: nil, team_id: 15, created_at: nil, updated_at: nil&gt;]&gt;\n</code></pre>\n\n<p>Can I create some record by ONE LINE?? or can NOT??</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1550047671, "post_id": 54663223, "comment_id": 96122143, "body": "how did you read it? try locale_file.rewind; puts IO.read(locale_file.path). you need to reset the file descriptor"}, {"owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "reply_to_user": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1550048578, "post_id": 54663223, "comment_id": 96122659, "body": "thanks, i do it, but it doesn&#39;t work too"}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1550053871, "post_id": 54663223, "comment_id": 96126075, "body": "can you share the rest of the code?"}, {"owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "reply_to_user": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1550056678, "post_id": 54663223, "comment_id": 96127797, "body": "update question body"}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1550058116, "post_id": 54663223, "comment_id": 96128634, "body": "&quot;But the temporary pdf is empty&quot; where is the relevant code to that?"}], "answers": [{"tags": [], "owner": {"reputation": 277, "user_id": 4846915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3580ebf1b572e7a33aba61b0ffd024d?s=128&d=identicon&r=PG&f=1", "display_name": "F.E.A", "link": "https://stackoverflow.com/users/4846915/f-e-a"}, "is_accepted": false, "score": -1, "last_activity_date": 1550036940, "last_edit_date": 1550036940, "creation_date": 1550036455, "answer_id": 54663285, "question_id": 54663223, "link": "https://stackoverflow.com/questions/54663223/how-do-i-copy-a-pdf-file-to-a-temporary-file-in-ruby/54663285#54663285", "title": "How do I copy a pdf file to a temporary file in Ruby?", "body": "<p>If you don't really need the TempFile class and can delete the file manually after on, you can copy the pdf as an actual file.\nFrom the module <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html\" rel=\"nofollow noreferrer\">FileUtils</a>, you can use the <code>cp</code> method and copy your file.</p>\n\n<pre><code>FileUtils.cp(\"path/to/pdf\", \"temp/pdf/path\")\n</code></pre>\n\n<p>If you need to use the TempFile class, you can consider writing the tempfile by reading the source <a href=\"https://stackoverflow.com/questions/5545068/what-are-all-the-common-ways-to-read-a-file-in-ruby\">this way</a></p>\n"}], "owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1532, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1550147417, "creation_date": 1550036182, "last_edit_date": 1550147417, "question_id": 54663223, "link": "https://stackoverflow.com/questions/54663223/how-do-i-copy-a-pdf-file-to-a-temporary-file-in-ruby", "title": "How do I copy a pdf file to a temporary file in Ruby?", "body": "<p>I need to make a temporary copy of the pdf file, show it and delete it after a while.<br>\nNow I do so:</p>\n\n<pre><code>content = File.open(pdf).read # in pdf i have path to original pdf\nlocale_file = Tempfile.open('whatever.pdf')\nlocale_file.write content\nlocale_file.flush\n</code></pre>\n\n<p>But the temporary pdf is empty. How to fix?</p>\n\n<p>I need a copy of the original pdf in a temporary file.</p>\n\n<p><strong>UPD</strong></p>\n\n<pre><code>content = File.open(pdf).read\nlocale_file = Tempfile.open('whatever.pdf')\nlocale_file.write content\nlocale_file.rewind\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-2.6"], "answers": [{"comments": [{"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "edited": false, "score": 0, "creation_date": 1550033945, "post_id": 54662597, "comment_id": 96116398, "body": "You have to install ruby try <code>rvm install &quot;ruby-2.6.1&quot;</code>"}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1550034086, "post_id": 54662597, "comment_id": 96116441, "body": "<b>rvm --version</b> <code>rvm 1.29.7-next (master) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https:&#47;&#47;rvm.io]</code> <b>cat .ruby-version</b> <code>ruby-2.6.1</code> <b>rvm list</b> <code># No rvm rubies installed yet. Try &#39;rvm help install&#39;.</code>"}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1550034187, "post_id": 54662597, "comment_id": 96116470, "body": "<b>rvm install &quot;ruby-2.6.1&quot;</b> <code>Searching for binary rubies, this might take some time. No binary rubies available for: mingw&#47;unknown&#47;x86_64&#47;ruby-2.6.1. Continuing with compilation. Please read &#39;rvm help mount&#39; to get more informatio Checking requirements for mingw. Requirements support for mingw is not implemented yet, report a bug here =&gt; https:&#47;&#47;github.com&#47;rvm&#47;rvm&#47;issues Requirements installation failed with status: 1</code> <b>and It&#39;s show warning</b>"}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1550034241, "post_id": 54662597, "comment_id": 96116487, "body": "<b>Warning</b> <code>Warning, new version of rvm available &#39;1.29.7&#39;, you are using older version &#39;1.29.7-next&#39;. You can disable this warning with:    echo rvm_autoupdate_flag=0 &gt;&gt; ~&#47;.rvmrc You can enable  auto-update  with:    echo rvm_autoupdate_flag=2 &gt;&gt; ~&#47;.rvmrc</code>"}, {"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "reply_to_user": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1550034852, "post_id": 54662597, "comment_id": 96116647, "body": "which OS you are using? please do <code>echo rvm_autoupdate_flag=2 &gt;&gt; ~&#47;.rvmrc</code> and try again to install <code>rvm install &quot;ruby-2.6.1&quot;</code>"}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1550043111, "post_id": 54662597, "comment_id": 96119878, "body": "I used windows 10, I&#39;m trying to install again like you tell, but It&#39;s show the same errors. hmmm"}, {"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "reply_to_user": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1550051381, "post_id": 54662597, "comment_id": 96124443, "body": "Well honestly I don&#39;t use windows from 6 years, so my suggestion why do you need 2.6.1? it is very latest and will take time, you can use 2.5.1 you have to go in your project folder and change <code>.ruby-version</code> and change Gemfile where ruby version is mentioned. I leave you here as I don&#39;t use windows."}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1551316736, "post_id": 54662597, "comment_id": 96599961, "body": "Excuse me brother! I had downgrade ruby version to 2.2.6 but It&#39;s still alert me <code>Required ruby-2.2.6 is not installed. To install do: &#39;rvm install &quot;ruby-2.2.6&quot;&#39; </code>"}, {"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "reply_to_user": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1551336714, "post_id": 54662597, "comment_id": 96605203, "body": "try to run command <code>rvm install &quot;ruby-2.2.6&quot;</code> and if still have problem seems you have the problem with RVM installation, so following [<a href=\"https://rvm.io/rubies/removing]\" rel=\"nofollow noreferrer\">rvm.io/rubies/removing]</a>"}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1551416089, "post_id": 54662597, "comment_id": 96639954, "body": "Thank you very much brother, I had fixed it."}, {"owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "reply_to_user": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1551425109, "post_id": 54662597, "comment_id": 96642737, "body": "if my answer helps you then accept the answer by click tick mark, if there was another problem, please share so people can know issue and it helps others. Thank you."}, {"owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "edited": false, "score": 0, "creation_date": 1551434951, "post_id": 54662597, "comment_id": 96647516, "body": "That problems I&#39;m not sure, but when I change path in my computer. It&#39;s don&#39;t have problem when I run it."}], "tags": [], "owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "is_accepted": true, "score": 4, "last_activity_date": 1550032631, "creation_date": 1550032631, "answer_id": 54662597, "question_id": 54661987, "link": "https://stackoverflow.com/questions/54661987/failed-gem-install-gem-require-ruby-2-6-1-but-the-currently-ruby-2-6-1/54662597#54662597", "title": "Failed gem install: gem require ruby-2.6.1 but the currently ruby-2.6.1", "body": "<p>First of all, I doubt that RVM may not be updated to support this version of Ruby. As I know the following version is supported, you can version by following command and response should match.</p>\n\n<pre><code>rvm --version\n1.29.7\n</code></pre>\n\n<p>If you have updated version then I will do the following to check if RVM has also the same version of ruby installed.</p>\n\n<p>I will check the content of my project root folder's following file</p>\n\n<pre><code>cat .ruby-version\n</code></pre>\n\n<p>If it has mention same, as rvm is also complaining that I will run the following command on rvm to check if this ruby is really installed in RVM</p>\n\n<pre><code>rvm list\n</code></pre>\n\n<p>It will show a list of rubies installed and it should include 2.6.1 in the end. If you can't see this list then you probably need to install using the following command</p>\n\n<pre><code>rvm install \"ruby-2.6.1\"\n</code></pre>\n\n<p>If it is showing than can you try the following command and see what result comes</p>\n\n<pre><code>rvm use 2.6.1\n</code></pre>\n\n<p>If all good, then try the following command to see which ruby is being used</p>\n\n<pre><code>which ruby\n</code></pre>\n\n<p>response must include <code>.rvm/rubies/</code> mean you are using .rvm ruby otherwise, you may using the system built in ruby.\nJust wrote may help you to diagnos issue.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 459471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11331d507a09d414a3cff1ef6ba5a94b?s=128&d=identicon&r=PG", "display_name": "sean helvey", "link": "https://stackoverflow.com/users/459471/sean-helvey"}, "is_accepted": false, "score": 0, "last_activity_date": 1552522774, "creation_date": 1552522774, "answer_id": 55153074, "question_id": 54661987, "link": "https://stackoverflow.com/questions/54661987/failed-gem-install-gem-require-ruby-2-6-1-but-the-currently-ruby-2-6-1/55153074#55153074", "title": "Failed gem install: gem require ruby-2.6.1 but the currently ruby-2.6.1", "body": "<p>Are you using <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>? If so, I'd recommend running <code>rvm implode</code> as described <a href=\"https://installvirtual.com/how-to-uninstall-rvm-implode-rvm-on-mac/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12474281, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCfK-WMcSgGJvFpigtSo4q8ren4LXsReXnOIYXAKw=k-s128", "display_name": "milaziggy", "link": "https://stackoverflow.com/users/12474281/milaziggy"}, "is_accepted": false, "score": 0, "last_activity_date": 1582208452, "creation_date": 1582208452, "answer_id": 60322049, "question_id": 54661987, "link": "https://stackoverflow.com/questions/54661987/failed-gem-install-gem-require-ruby-2-6-1-but-the-currently-ruby-2-6-1/60322049#60322049", "title": "Failed gem install: gem require ruby-2.6.1 but the currently ruby-2.6.1", "body": "<p>if you are using <strong>rbenv</strong> </p>\n\n<p>see if you have it available in your list : </p>\n\n<pre><code>rbenv install --list | grep 2.6.1\n</code></pre>\n\n<p>if not, fetch it</p>\n\n<pre><code>cd ~/.rbenv/plugins/ruby-build &amp;&amp; git pull &amp;&amp; cd -\n</code></pre>\n\n<p>now if you try again </p>\n\n<pre><code>rbenv install -l | grep 2.6.1\n</code></pre>\n\n<p>so just run the installation command: </p>\n\n<pre><code>rbenv install 2.6.1\n</code></pre>\n\n<blockquote>\n<pre><code>Downloading ruby-2.6.1.tar.bz2...  08:36:17\n-&gt; https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.1.tar.bz2\nInstalling ruby-2.6.1...\nInstalled ruby-2.6.1 to ~/.rbenv/versions/2.6.1\n</code></pre>\n</blockquote>\n\n<p>now you can use it for global or local projects. if local : </p>\n\n<pre><code>rbenv local 2.6.1\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10319619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1868251289920653/picture?type=large", "display_name": "Hokly Leng", "link": "https://stackoverflow.com/users/10319619/hokly-leng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3758, "favorite_count": 0, "accepted_answer_id": 54662597, "answer_count": 3, "score": 2, "last_activity_date": 1582208452, "creation_date": 1550027944, "last_edit_date": 1552935609, "question_id": 54661987, "link": "https://stackoverflow.com/questions/54661987/failed-gem-install-gem-require-ruby-2-6-1-but-the-currently-ruby-2-6-1", "title": "Failed gem install: gem require ruby-2.6.1 but the currently ruby-2.6.1", "body": "<blockquote>\n  <p>Show messages errors:</p>\n</blockquote>\n\n<pre><code>Required ruby-2.6.1 is not installed.\nTo install do: 'rvm install \"ruby-2.6.1\"'\n</code></pre>\n\n<blockquote>\n  <p>ruby -v</p>\n</blockquote>\n\n<pre><code>ruby 2.6.1p33 (2019-01-30 revision 66950) [x64-mingw32]\n</code></pre>\n\n<blockquote>\n  <p>rails -v</p>\n</blockquote>\n\n<pre><code>Rails 5.2.2\n</code></pre>\n"}, {"tags": ["ruby", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1550031784, "post_id": 54661977, "comment_id": 96115857, "body": "Actually, you don&#39;t need the <code>\\A</code>. And if you don&#39;t need to save the string by removing any non-digit characters at the beginning, then you can simply do <code>s[0, 5].to_i</code>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1550031921, "post_id": 54661977, "comment_id": 96115895, "body": "@sawa True but it doesn&#39;t hurt and (IMO) helps express the intent of the code."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1550032085, "post_id": 54661977, "comment_id": 96115942, "body": "There&#39;s also <code>numeric_prefix = -&gt;(s) { s[&#47;\\A\\d{,5}&#47;].to_i }</code> and then <code>array.sort_by(&amp;numeric_prefix)</code>. I find that attaching names to little bits of logic makes things easier to read six months down the road. Sure, it will be a tiny bit slower but rarely enough to matter."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1550032656, "post_id": 54661977, "comment_id": 96116074, "body": "@sawa, thanks. I made both changes you suggested. (Readers: I formerly had <code>s[&#47;\\A\\d{,5}&#47;].to_i</code>, which explains \u03bc&#39;s comment.)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1550037137, "last_edit_date": 1550037137, "creation_date": 1550027879, "answer_id": 54661977, "question_id": 54661956, "link": "https://stackoverflow.com/questions/54661956/how-to-sort-an-array-using-only-the-first-5-characters-of-a-string-in-ruby/54661977#54661977", "title": "How to sort an array using only the first 5 characters of a string in Ruby?", "body": "<p>Assuming you wish to sort by the leading digits of the strings, you can do the following:</p>\n\n<pre><code>[\"74712 Don\", \"48342 Cindy\", \"50912 Nick\"].sort_by(&amp;:to_i)\n  #=&gt; [\"48342 Cindy\", \"50912 Nick\", \"74712 Don\"]\n</code></pre>\n\n<p>This works because <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-to_i\" rel=\"nofollow noreferrer\">String#to_i</a> ignores \"extraneous characters past the end of a valid number\".</p>\n\n<p>If some elements of the array may have more than five leading digits, but only the first five are to be considered, one would use</p>\n\n<pre><code> [\"74712 Don\", \"48342 Cindy\", \"209124  Nick\"].sort_by {  |s|\n   s[0,5].to_i }\n  #=&gt; [\"209124  Nick\", \"48342 Cindy\", \"74712 Don\"]\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8796517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cr6of.jpg?s=128&g=1", "display_name": "Maggie", "link": "https://stackoverflow.com/users/8796517/maggie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54661977, "answer_count": 1, "score": 0, "last_activity_date": 1550037137, "creation_date": 1550027737, "last_edit_date": 1550032145, "question_id": 54661956, "link": "https://stackoverflow.com/questions/54661956/how-to-sort-an-array-using-only-the-first-5-characters-of-a-string-in-ruby", "title": "How to sort an array using only the first 5 characters of a string in Ruby?", "body": "<p>So, say I have an array of strings such as:\n[\"74712 Don\", \"48342 Cindy\", \"50912 Nick\"]\nand I want to sort them by the number in front of the name. How would I sort by only the first 5 characters of each element (while also evaluating them as numbers)? \nThanks</p>\n"}, {"tags": ["arrays", "regex", "ruby", "string"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1550019534, "post_id": 54660689, "comment_id": 96113167, "body": "The result that select gives you, may not be the one you need as argument for <code>include</code>; <code>[&#39;found&#39;, &#39;not found&#39;].select { |x| x =~ &#47;\\w&#47; }.to_s</code> would give you an array as String <code>&quot;[\\&quot;found\\&quot;, \\&quot;not found\\&quot;]&quot;</code>, using <code>join</code> would give you the result as concatenated <code>&quot;foundnot found&quot;</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1550028394, "post_id": 54660689, "comment_id": 96115113, "body": "This smells like an XY problem. What is the actual thing you want to do? <code>File.open(...) { |f| f.each_line.grep(...) ... }</code> might suit you better..."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 0, "last_activity_date": 1550018877, "creation_date": 1550018877, "answer_id": 54660874, "question_id": 54660689, "link": "https://stackoverflow.com/questions/54660689/how-to-i-get-a-string-from-an-array-element-found-with-select-without-brackets/54660874#54660874", "title": "How to I get a string from an array element found with .select without brackets in ruby?", "body": "<p><a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">Enumerable#select</a> will <em>return an array containing all elements of enum for which the given block returns a true value</em>.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\">Enumerable#find</a> will <em>return the first for which block is not false</em>.</p>\n\n<p>So in your case, you can use find instead:</p>\n\n<pre><code>found = file_arr.find { |str| str =~ /\\A#{find_x} #{y}/ }\n</code></pre>\n\n<hr>\n\n<p>Notice your condition can be more understandable with <code>unless</code>:</p>\n\n<pre><code>do_something unless visited.include?(\"#{found}\")\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8697785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812c0fd980b562147ab0e9f95e2f3fa5?s=128&d=identicon&r=PG&f=1", "display_name": "C. Fior", "link": "https://stackoverflow.com/users/8697785/c-fior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 54660874, "answer_count": 1, "score": 1, "last_activity_date": 1550018877, "creation_date": 1550017336, "question_id": 54660689, "link": "https://stackoverflow.com/questions/54660689/how-to-i-get-a-string-from-an-array-element-found-with-select-without-brackets", "title": "How to I get a string from an array element found with .select without brackets in ruby?", "body": "<p>Right now I'm having major difficulty finding a way to get a string from an array element without brackets. </p>\n\n<p>I'm using .select to find a specific element in the array of strings I'm using, but when I try to print the variable I store the result to, it ends up also storing the brackets as well. I've tried numerous things, such as using .to_s and .join(''), but unforunately</p>\n\n<pre><code>      found=file_arr.select {|str| str=~/\\A#{find_x} #{y}/}\n      if visited.include?(\"#{found}\") == false\n         #Do this\n      end\n</code></pre>\n\n<p>What I want to get is \n#String_here\nBut what I'm getting instead is\n[\\\"#String_here\\n\\\"]</p>\n"}, {"tags": ["ruby", "typeerror"], "comments": [{"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1550013743, "post_id": 54660051, "comment_id": 96111780, "body": "I don&#39;t get any such errors on my machine (running the code you pasted), perhaps it could be ruby version specific (I used 2.4.4)?"}, {"owner": {"reputation": 825, "user_id": 4608376, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/--JL94q0QlqE/AAAAAAAAAAI/AAAAAAAADyQ/Nq7GOxUNzLI/photo.jpg?sz=128", "display_name": "Joseph hooper", "link": "https://stackoverflow.com/users/4608376/joseph-hooper"}, "reply_to_user": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1550013789, "post_id": 54660051, "comment_id": 96111788, "body": "@baseballlover723 I just checked. Ruby version is ruby 2.3.8p459 (2018-10-18 revision 65136) [x86_64-linux]"}, {"owner": {"reputation": 825, "user_id": 4608376, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/--JL94q0QlqE/AAAAAAAAAAI/AAAAAAAADyQ/Nq7GOxUNzLI/photo.jpg?sz=128", "display_name": "Joseph hooper", "link": "https://stackoverflow.com/users/4608376/joseph-hooper"}, "reply_to_user": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1550013896, "post_id": 54660051, "comment_id": 96111810, "body": "I don&#39;t get the errors on an online compiler so I&#39;m unsure why I see them when I try locally"}, {"owner": {"reputation": 653, "user_id": 7148414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMhlJ.jpg?s=128&g=1", "display_name": "baseballlover723", "link": "https://stackoverflow.com/users/7148414/baseballlover723"}, "edited": false, "score": 0, "creation_date": 1550014371, "post_id": 54660051, "comment_id": 96111957, "body": "a couple things, try running the code you just posted in IRB, if that doesn&#39;t work, then you can be sure that its an issue on your local machine, and you could try things like reinstalling all your gems / reinstalling ruby. If that still doesn&#39;t work, I would double check that what you posted is actually what things are when you run your program as a whole, its possible something isn&#39;t getting set correct, or something else is interfering with your code"}], "owner": {"reputation": 825, "user_id": 4608376, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/--JL94q0QlqE/AAAAAAAAAAI/AAAAAAAADyQ/Nq7GOxUNzLI/photo.jpg?sz=128", "display_name": "Joseph hooper", "link": "https://stackoverflow.com/users/4608376/joseph-hooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550012978, "creation_date": 1550012978, "question_id": 54660051, "link": "https://stackoverflow.com/questions/54660051/typeerror-no-implicit-conversion-of-symbol-into-integer-when-looping-through-an", "title": "TypeError: no implicit conversion of Symbol into Integer when looping through an array of hashed", "body": "<p>I want to iterate through an array of hashed, but I keep getting the TypeError: no implicit conversion of Symbol into Integer error. When I print the values they show up as expected but I get the error regardless. </p>\n\n<pre><code>  $portal_automation_version_set = 'PhotonPortalUIAutomation/development'\n  $package = 'PhotonUIAutomationTests-1.0'\n  $todworker = 'TodWorker/Photon/Prod'\n  $one_drive_test_name = 'One drive tests'\n  $gdrive_test_name = 'Gdrive storage tests'\n  $streaming_test_name = 'Portal streaming tests'\n  $beta_sanity_test_name = 'Beta-pdx Sanity'\n  $one_drive_test_target = '-Dtestngfile=portal-onedrive-storage-test.xml run-fire-test'\n  $gdrive_test_target = '-Dtestngfile=portal-storage-sanity-test.xml run-fire-test'\n  $streaming_test_target = '-Dtestngfile=portal-streaming-tests.xml run-fire-test'\n  $beta_sanity_test_target  = '-Dtestngfile=portal-smoke-tests.xml run-fire-test'\n\n  $stage_sanity_test_map = {\n    Beta:\n    [\n      {\n          sanity_test_name: $one_drive_test_name,\n          sanity_test_target: $one_drive_test_name,\n          depends_on: nil\n      },\n      {\n          sanity_test_name: $gdrive_test_name,\n          sanity_test_target: $gdrive_test_target,\n          depends_on: $one_drive_test_name\n      },\n      {\n          sanity_test_name: $streaming_test_name,\n          sanity_test_target: $streaming_test_target,\n          depends_on: $gdrive_test_name\n      },\n      {\n          sanity_test_name: $beta_sanity_test_name,\n          sanity_test_target: $beta_sanity_test_target,\n          depends_on: $streaming_test_name\n      }\n    ]\n  }\n\n        $stage_sanity_test_map[:Beta].each do | key |\n          puts key[:sanity_test_name]\n        end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1550011805, "post_id": 54659810, "comment_id": 96111191, "body": "<code>%m-%d-%Y</code> is using <code>-</code>. <code>02&#47;02&#47;2019</code> is using <code>&#47;</code>."}, {"owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1550012134, "post_id": 54659810, "comment_id": 96111298, "body": "It took me a couple of minutes to decipher what you&#39;re saying. So, strptime is expecting a dash (-) rather than a slash (/), Is there a Ruby or Rails method to verify if a date is valid, without having to convert slashes to dashes?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1550012242, "post_id": 54659810, "comment_id": 96111327, "body": "<code>Date.parse(.....)</code> will try to make sense of the input. But it&#39;s not a <i>validator</i>, per say. In order to <i>validate</i> a date/time input, it needs to have a well-defined format."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1550012310, "post_id": 54659810, "comment_id": 96111351, "body": "<a href=\"https://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-c-parse\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-c-pars&zwnj;&#8203;e</a> -- <i>&quot;This method does not function as a validator&quot;</i>."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1550012316, "post_id": 54659810, "comment_id": 96111353, "body": "For strings like <code>02&#47;02&#47;2019</code>, try using <code>Date.strptime(mydate, &quot;%m&#47;%d&#47;%Y&quot;)</code>"}, {"owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1550012720, "post_id": 54659810, "comment_id": 96111473, "body": "I misunderstood how strptime worked. @khelwood suggestion worked"}], "answers": [{"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": true, "score": 1, "last_activity_date": 1550014243, "creation_date": 1550014243, "answer_id": 54660277, "question_id": 54659810, "link": "https://stackoverflow.com/questions/54659810/date-is-supposed-to-be-validating-to-true-but-it-is-not/54660277#54660277", "title": "Date is supposed to be validating to true but it is not", "body": "<p>Your date string does not match your format string.</p>\n\n<p>For strings like <code>\"02/02/2019\"</code>, try using:</p>\n\n<pre><code>Date.strptime(mydate, \"%m/%d/%Y\")\n</code></pre>\n"}], "owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 54660277, "answer_count": 1, "score": -2, "last_activity_date": 1550140672, "creation_date": 1550011596, "last_edit_date": 1550140672, "question_id": 54659810, "link": "https://stackoverflow.com/questions/54659810/date-is-supposed-to-be-validating-to-true-but-it-is-not", "title": "Date is supposed to be validating to true but it is not", "body": "<p>I have:</p>\n\n<pre><code>params[:manually_paid_at] # =&gt; 02/02/2019\n</code></pre>\n\n<p>An action in one of my helper methods is like this:</p>\n\n<pre><code>Date.strptime(params[:manually_paid_at], \"%m-%d-%Y\") rescue nil\n</code></pre>\n\n<p>As far as I know, this is a valid date. I checked it by running a test console session as follows:</p>\n\n<pre><code>mydate = \"02/02/2019\"\nDate.strptime(mydate, \"%m-%d-%Y\") # &gt;&gt; ArgumentError: invalid date\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 127444, "user_id": 492405, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SSPGk.png?s=128&g=1", "display_name": "vcsjones", "link": "https://stackoverflow.com/users/492405/vcsjones"}, "edited": false, "score": 0, "creation_date": 1550004475, "post_id": 54658450, "comment_id": 96108339, "body": "I like this. Another way would be to use an open range and <code>take</code> so you can use it based on how many elements you want. <code>(30..).step(30).take(16).to_a</code>"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "reply_to_user": {"reputation": 127444, "user_id": 492405, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SSPGk.png?s=128&g=1", "display_name": "vcsjones", "link": "https://stackoverflow.com/users/492405/vcsjones"}, "edited": false, "score": 1, "creation_date": 1550004712, "post_id": 54658450, "comment_id": 96108457, "body": "@vcsjones More flexible but should note that open ranges only work in ruby-2.6.0 and above."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1550006820, "post_id": 54658450, "comment_id": 96109362, "body": "You can use Integer#step, but the calling syntax is a bit different: <code>30.step(nil, 30).take(16)</code> or <code>30.step(480, 30).to_a</code> or <code>0.step(480, 30).drop(1)</code>."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 6, "last_activity_date": 1550004340, "creation_date": 1550004340, "answer_id": 54658450, "question_id": 54658414, "link": "https://stackoverflow.com/questions/54658414/how-can-i-create-an-array-from-a-method-with-ruby/54658450#54658450", "title": "How can I create an array from a method with ruby", "body": "<p>You can use a Range and the step method, then convert it to an Array:</p>\n\n<pre><code>(30..480).step(30).to_a\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>[30, 60, 90, 120, 150, 180, 210, 240, 270, 300, 330, 360, 390, 420, 450, 480)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "is_accepted": false, "score": 1, "last_activity_date": 1550004503, "creation_date": 1550004503, "answer_id": 54658484, "question_id": 54658414, "link": "https://stackoverflow.com/questions/54658414/how-can-i-create-an-array-from-a-method-with-ruby/54658484#54658484", "title": "How can I create an array from a method with ruby", "body": "<p>I came up with this, but @infused answer is way better. </p>\n\n<pre><code>a = (1..16).to_a.map{|i| i*30 }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1550008395, "last_edit_date": 1550008395, "creation_date": 1550007223, "answer_id": 54658988, "question_id": 54658414, "link": "https://stackoverflow.com/questions/54658414/how-can-i-create-an-array-from-a-method-with-ruby/54658988#54658988", "title": "How can I create an array from a method with ruby", "body": "<p>Your arguments are</p>\n\n<pre><code>increment =  30\nduration  = 480 # 8*60\n</code></pre>\n\n<p>You could use</p>\n\n<pre><code>increment.step(by: increment, to: duration).to_a\n  #=&gt; [ 30,  60,  90, 120, 150, 180, 210, 240,\n  #    270, 300, 330, 360, 390, 420, 450, 480] \n</code></pre>\n\n<p>which reads well. <a href=\"http://ruby-doc.org/core-2.5.1/Numeric.html#method-i-step\" rel=\"nofollow noreferrer\">Numeric#step</a>, when used without a block, returns an enumerator, which is why <code>.to_a</code> is needed. </p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1550039872, "creation_date": 1550039872, "answer_id": 54664034, "question_id": 54658414, "link": "https://stackoverflow.com/questions/54658414/how-can-i-create-an-array-from-a-method-with-ruby/54664034#54664034", "title": "How can I create an array from a method with ruby", "body": "<p>Option selecting (<a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Enumerable#select</code></a>) from the range:</p>\n\n<pre><code>stop = 480\nstep = 30\n\n(step..stop).select { |n| n % step == 0 }\n\n#=&gt; [0, 30, 60, 90, 120, 150, 180, 210, 240, 270, 300, 330, 360, 390, 420, 450, 480]\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54658450, "answer_count": 4, "score": 1, "last_activity_date": 1550039872, "creation_date": 1550004147, "question_id": 54658414, "link": "https://stackoverflow.com/questions/54658414/how-can-i-create-an-array-from-a-method-with-ruby", "title": "How can I create an array from a method with ruby", "body": "<p>How can I make an array of 30 min intervals to 8 hours. so this ish: </p>\n\n<pre><code>[30, 60, 90, all-the-way-to,  480]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21, "user_id": 11052955, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S0ugOQyyQn4/AAAAAAAAAAI/AAAAAAAAAGs/vBdcTq7QzUE/photo.jpg?sz=128", "display_name": "Alex Heebsh", "link": "https://stackoverflow.com/users/11052955/alex-heebsh"}, "edited": false, "score": 0, "creation_date": 1550003247, "post_id": 54658169, "comment_id": 96107727, "body": "Sorry new to the Ask questions on stack overflow."}], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1550003294, "creation_date": 1550003294, "answer_id": 54658231, "question_id": 54658169, "link": "https://stackoverflow.com/questions/54658169/unexpected-end-expecting-keyword-end/54658231#54658231", "title": "&quot;Unexpected_end, expecting keyword_end&quot;", "body": "<p>The problem is that <code>i++</code> is not valid Ruby. Use <code>i += 1</code> instead.</p>\n"}], "owner": {"reputation": 21, "user_id": 11052955, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S0ugOQyyQn4/AAAAAAAAAAI/AAAAAAAAAGs/vBdcTq7QzUE/photo.jpg?sz=128", "display_name": "Alex Heebsh", "link": "https://stackoverflow.com/users/11052955/alex-heebsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1550003347, "creation_date": 1550003002, "last_edit_date": 1550003127, "question_id": 54658169, "link": "https://stackoverflow.com/questions/54658169/unexpected-end-expecting-keyword-end", "title": "&quot;Unexpected_end, expecting keyword_end&quot;", "body": "<p>I have an issue in one of my functions in my code. I am new to Ruby, so I am unsure of where my syntax error is. My irb is giving me a syntax error related to my end keywords, but I believe the syntax is correct</p>\n\n<pre><code>def function1\n  print \"function 1 \\n\"\n  print \"Please type 4 lines \\n\"\n  i = 0\n  fptr = (File.new(\"myFile.txt\", \"w\"))\n  while i &lt; 4\n    line = gets\n    fptr.write(line \"\\n\")\n    i++\n  end    \n  fptr.close()\nend\n</code></pre>\n\n<p>This function should print two output lines, open a txt file, take in 4 lines of user input, and write them to the said file.</p>\n"}, {"tags": ["ruby", "multithreading", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 1, "creation_date": 1550003542, "post_id": 54657637, "comment_id": 96107878, "body": "Are you sure <code>dashboard.obtain_projects</code> is returning something?"}, {"owner": {"reputation": 95, "user_id": 8773659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791919768ffab7d1231b56266456aa68?s=128&d=identicon&r=PG", "display_name": "uzorjchibuzor", "link": "https://stackoverflow.com/users/8773659/uzorjchibuzor"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1550037467, "post_id": 54657637, "comment_id": 96117461, "body": "Yes the object method returns a record."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8773659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791919768ffab7d1231b56266456aa68?s=128&d=identicon&r=PG", "display_name": "uzorjchibuzor", "link": "https://stackoverflow.com/users/8773659/uzorjchibuzor"}, "edited": false, "score": 0, "creation_date": 1550038383, "post_id": 54658638, "comment_id": 96117817, "body": "What of if I want to use the .join method because I am running the methods in a controller. ?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 95, "user_id": 8773659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791919768ffab7d1231b56266456aa68?s=128&d=identicon&r=PG", "display_name": "uzorjchibuzor", "link": "https://stackoverflow.com/users/8773659/uzorjchibuzor"}, "edited": false, "score": 0, "creation_date": 1550048199, "post_id": 54658638, "comment_id": 96122438, "body": "@uzorjchibuzor you can do this. But then, why use a thread at all?"}, {"owner": {"reputation": 95, "user_id": 8773659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791919768ffab7d1231b56266456aa68?s=128&d=identicon&r=PG", "display_name": "uzorjchibuzor", "link": "https://stackoverflow.com/users/8773659/uzorjchibuzor"}, "edited": false, "score": 0, "creation_date": 1550049928, "post_id": 54658638, "comment_id": 96123476, "body": "I needed to make API calls in a not serial manner, so that a call will not be dependent on when the response for another call arrives. I am seeing a good result for the join appoint. I am going to mark the first answer, it helped."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1550006468, "last_edit_date": 1550006468, "creation_date": 1550005351, "answer_id": 54658638, "question_id": 54657637, "link": "https://stackoverflow.com/questions/54657637/pass-the-result-of-a-ruby-thread-as-a-parameter-to-a-method/54658638#54658638", "title": "Pass the result of a Ruby Thread as a parameter to a method", "body": "<p>Threads don't have return values (except the Thread object itself).</p>\n\n<p>This is a really common issue in javascript, where you use many async functions (such as setTimeout) that don't produce return values in the same way that synchronous functions do.</p>\n\n<p>What Javascript typically uses to deal with this problem are callbacks (as well as promises/async/await). You can use callbacks in ruby in the form of blocks:</p>\n\n<pre><code>  class AsyncClass\n    attr_reader :foo, :bar\n    def async_method(&amp;callback)\n      Thread.new do\n        @foo = 1\n        @bar = @foo + 1\n        callback.call(self)\n      end\n    end\n  end\n</code></pre>\n\n<p>Although you can call <code>join</code> on any thread to halt the code execution until it completes, this kind of removes the purpose of using a thread altogether (unless you are doing parallel processing). So, any method that calls <code>async_method</code> will need to be asynchronous itself. </p>\n\n<p>This won't work in something like a controller action, which is synchronous (unless you are using a streaming response or server-push, but I'll assume you're not). </p>\n\n<p>It's sort of a 'law' of async code that you cannot call an async function from a synchronous one, and get the 'return value', without calling <code>join</code> (and forcing it to run synchronously). So <em>whenever</em> you want the 'return value' of an async function, you need to make the caller function async, and use a block/callback to read the result. Note that this annoying process is sometimes called 'callback hell' in javascript and is why they implemented promises/async/await (which, by the way, seem to be supported by the <a href=\"https://github.com/ruby-concurrency/concurrent-ruby\" rel=\"nofollow noreferrer\">ruby-concurrency</a> gem).</p>\n\n<p>But, say you were calling this method from another <em>async</em> method:</p>\n\n<pre><code>  class OtherClass\n    def initialize\n      AsyncClass.new.async_method do |async_class_inst|\n        puts async_class_inst.bar\n      end\n      sleep 1\n    end\n  end\n\n  OtherClass.new\n  # prints 2\n</code></pre>\n\n<p>In your case it would look like this:</p>\n\n<pre><code>  def student_progress_variables(student_email, &amp;blk)\n    dashboard = Dashboard.new\n    Thread.new do\n      @projects = dashboard.obtain_projects\n      @current_student = obtain_student_with_email(student_email)\n\n      @reviews = obtain_selected_student_project_reviews(@current_student)\n      @requests = obtain_student_code_review_requests(@current_student).sort_by do |request|\n        request[obtain_code_review_requests_id]\n      end\n\n      @review_completions = obtain_student_code_review_completions(@current_student)\n      @courses = obtain_projects_courses(@projects.join)\n      blk.call(self)\n    end\n  end\n</code></pre>\n\n<p>But, again, you can only call this from <em>another async method</em>:</p>\n\n<pre><code>  class AsyncCaller\n    def initialize(&amp;callback)\n      SomeClass.new.student_progress_variables(\"student@email.com\") do |some_class_inst|\n        callback.call(self, some_class_inst)\n      end\n      sleep 1\n    end\n  end\n\n  AsyncCaller.new do |async_caller_inst, some_class_inst|\n    # .... do things here, thread is done\n  end\n</code></pre>\n\n<p>Note that in these examples, I'm passing <code>self</code> to the callback, so that it gets assigned to a block variable (e.g. <code>async_class_inst</code>). This is because the value of <code>self</code> changes depending on where you call the block from, as you can see in this example:</p>\n\n<pre><code>  class A\n    def initialize(&amp;blk)\n      blk.call\n      sleep 1 \n    end\n  end\n\n  A.new { puts self }\n  # prints 'main'\n</code></pre>\n\n<p>So, if you're making some manipulation on <code>self</code> in the thread (as you are, by setting instance variables), it's good practice to explicitly pass <code>self</code> to the callback/block, so you don't have to assume that the caller has access to it otherwise.</p>\n\n<p>Also, please don't actually put <code>sleep</code> calls in your code, I'm only using these so if you run the snippets as scripts it will work. In actual code, you should use <code>Thread#join</code> if you want to wait until a thread is finished. </p>\n\n<p>To reiterate, <strong>you should not use threads in your controller actions if you expect to get the results in time to include in the response</strong> (unless you are doing parallel processing with <code>.join</code> at the end).</p>\n"}], "owner": {"reputation": 95, "user_id": 8773659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/791919768ffab7d1231b56266456aa68?s=128&d=identicon&r=PG", "display_name": "uzorjchibuzor", "link": "https://stackoverflow.com/users/8773659/uzorjchibuzor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 54658638, "answer_count": 1, "score": 0, "last_activity_date": 1550050509, "creation_date": 1550000821, "last_edit_date": 1550050509, "question_id": 54657637, "link": "https://stackoverflow.com/questions/54657637/pass-the-result-of-a-ruby-thread-as-a-parameter-to-a-method", "title": "Pass the result of a Ruby Thread as a parameter to a method", "body": "<p>I have these controller methods </p>\n\n<pre><code>def student_progress_variables(student_email)\n    dashboard = Dashboard.new\n    @projects = Thread.new { dashboard.obtain_projects }\n\n    @current_student = obtain_student_with_email(student_email)\n\n    @reviews = obtain_selected_student_project_reviews(@current_student)\n    @requests = obtain_student_code_review_requests(@current_student).sort_by do |request|\n      request[obtain_code_review_requests_id]\n    end\n\n    @review_completions = obtain_student_code_review_completions(@current_student)\n    @courses = obtain_projects_courses(@projects.join)\n  end\n</code></pre>\n\n<p>I want to pass the response of @projects to the  @courses method call but I keep getting this <code>undefined method 'each' for #&lt;Thread:0x00007f30dc83da10&gt;</code> error. I have read the documentation but cannot make any headway. Any ideas?</p>\n\n<p>EDIT: I went with @max pleaner's suggestion. Here is the current status of the snippet. I am already seeing better results:</p>\n\n<pre><code>def student_progress_variables(student_email)\n    thread1 = Thread.new do \n      @current_student = obtain_student_with_email(student_email)\n    end\n    thread2 = Thread.new do \n      dashboard = Dashboard.new\n      @projects = dashboard.obtain_projects\n      @courses = obtain_projects_courses(@projects)\n    end\n    thread1.join\n\n    thread3 = Thread.new do \n      @reviews = obtain_selected_student_project_reviews(@current_student)\n    end\n\n    @requests = obtain_student_code_review_requests(@current_student).sort_by do |request|\n      request[obtain_code_review_requests_id]\n    end\n    @review_completions = obtain_student_code_review_completions(@current_student)\n    thread2.join\n    thread3.join\n  end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "iframe", "formatter"], "owner": {"reputation": 27, "user_id": 10227479, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cQ3_ySbopps/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qhmWpU9EFjC-A0FeFamlDYxH_MNQ/mo/photo.jpg?sz=128", "display_name": "spd_25", "link": "https://stackoverflow.com/users/10227479/spd-25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550249844, "creation_date": 1549998838, "last_edit_date": 1550249844, "question_id": 54657168, "link": "https://stackoverflow.com/questions/54657168/appending-the-iframe-tag-to-js-in-ruby", "title": "appending the iframe tag to js in ruby", "body": "<p>this is the code snippet from ruby file where the function apply_formatters returns an object which is aligned vertically instead of horizontally. That's why i am trying to implement the iframe tag through javascript.\nbut the error says:</p>\n\n<pre><code>no implicit conversion of Hash into String \n</code></pre>\n\n<p>can someone please comment on whether my approach is correct or not? and what is wrong with this code. </p>\n\n<pre><code>js = ''\n    js &lt;&lt; \"\\n var iframe = document.getElementById('iframeID');\"\n    js &lt;&lt; \"\\n iframe = iframe.contentWindow || ( iframe.contentDocument.document || iframe.contentDocument);\"\n    js &lt;&lt; \"\\n iframe.document.open();\"\n    js &lt;&lt; \"\\n iframe.document.write(' \"\n    js &lt;&lt; apply_formatters if is_a?(GoogleVisualr::DataTable);\n    js &lt;&lt; \"')\"\n    js &lt;&lt; \"\\n iframe.document.close();\"\n    js\n</code></pre>\n"}, {"tags": ["ruby", "macos", "rubygems", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 7506125, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/50b17b32229b4eb28cafd26a055c980c?s=128&d=identicon&r=PG&f=1", "display_name": "BadAtCoding", "link": "https://stackoverflow.com/users/7506125/badatcoding"}, "edited": false, "score": 2, "creation_date": 1549998857, "post_id": 54656990, "comment_id": 96105632, "body": "Thank you. I did so, and received &quot;xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates&quot;. I then used &quot;softwareupdate --install -a&quot; and restarted my computer but unfortunately my issue persists."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": -1, "last_activity_date": 1549998111, "creation_date": 1549998111, "answer_id": 54656990, "question_id": 54656946, "link": "https://stackoverflow.com/questions/54656946/how-to-fix-error-failed-to-build-gem-native-extension-when-installing-eventm/54656990#54656990", "title": "How to fix &quot;ERROR: Failed to build gem native extension.&quot; when installing eventmachine on macOS Mojave", "body": "<p>According to the error, \"You have to install development tools first.\".  To install the development tools, run this in your Terminal:</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>The Xcode command line tools often have to be re-installed after major operating system updates.</p>\n"}, {"tags": [], "owner": {"reputation": 945, "user_id": 4756300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba802d0c2120a13780be1b9c70599a9a?s=128&d=identicon&r=PG", "display_name": "Dmitrii Magas", "link": "https://stackoverflow.com/users/4756300/dmitrii-magas"}, "is_accepted": false, "score": 1, "last_activity_date": 1554282211, "creation_date": 1554282211, "answer_id": 55491191, "question_id": 54656946, "link": "https://stackoverflow.com/questions/54656946/how-to-fix-error-failed-to-build-gem-native-extension-when-installing-eventm/55491191#55491191", "title": "How to fix &quot;ERROR: Failed to build gem native extension.&quot; when installing eventmachine on macOS Mojave", "body": "<p>I had the same problem and also nothing worked. Turns out eventmachine used my python's anaconda environment with openssl installed. I created new clean anaconda environment and just run <code>bundle install</code> again.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10038593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1da0d56744cc6b8db22bc2c3a7d6c4f?s=128&d=identicon&r=PG", "display_name": "user10038593", "link": "https://stackoverflow.com/users/10038593/user10038593"}, "is_accepted": false, "score": 2, "last_activity_date": 1559144705, "creation_date": 1559144705, "answer_id": 56364282, "question_id": 54656946, "link": "https://stackoverflow.com/questions/54656946/how-to-fix-error-failed-to-build-gem-native-extension-when-installing-eventm/56364282#56364282", "title": "How to fix &quot;ERROR: Failed to build gem native extension.&quot; when installing eventmachine on macOS Mojave", "body": "<p>I've had luck installing <code>libffi</code> with Homebrew, then using the recommended build flags:</p>\n\n<pre><code>$ brew install libffi\n==&gt; Downloading https://homebrew.bintray.com/bottles/libffi-3.2.1.mojave.bottle.tar.gz\n######################################################################## 100.0%\n==&gt; Pouring libffi-3.2.1.mojave.bottle.tar.gz\n==&gt; Caveats\nlibffi is keg-only, which means it was not symlinked into /usr/local,\nbecause some formulae require a newer version of libffi.\n\nFor compilers to find libffi you may need to set:\n  export LDFLAGS=\"-L/usr/local/opt/libffi/lib\"\n\nFor pkg-config to find libffi you may need to set:\n  export PKG_CONFIG_PATH=\"/usr/local/opt/libffi/lib/pkgconfig\"\n</code></pre>\n\n<pre><code>$ LDFLAGS=\"-L/usr/local/opt/libffi/lib\" PKG_CONFIG_PATH=\"/usr/local/opt/libffi/lib/pkgconfig\" bundle install\n</code></pre>\n\n<p>I have lots of projects that use FFI, but rather than exporting those variables (since they are global), I added an alias to my Bash profile so I can easily set them on the fly:</p>\n\n<pre><code># ~/.bash_profile\nalias ffi='LDFLAGS=\"-L/usr/local/opt/libffi/lib\" PKG_CONFIG_PATH=\"/usr/local/opt/libffi/lib/pkgconfig\"'\n</code></pre>\n\n<p>Now whenever I have a project that uses FFI, I can install the gem like this:</p>\n\n<pre><code>$ ffi bundle install\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 7506125, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/50b17b32229b4eb28cafd26a055c980c?s=128&d=identicon&r=PG&f=1", "display_name": "BadAtCoding", "link": "https://stackoverflow.com/users/7506125/badatcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2423, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1559144705, "creation_date": 1549997914, "last_edit_date": 1549999111, "question_id": 54656946, "link": "https://stackoverflow.com/questions/54656946/how-to-fix-error-failed-to-build-gem-native-extension-when-installing-eventm", "title": "How to fix &quot;ERROR: Failed to build gem native extension.&quot; when installing eventmachine on macOS Mojave", "body": "<p>I am a novice with ruby and the command line.</p>\n\n<p><strong>Ruby -v:</strong> ruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin18]</p>\n\n<p><strong>Mac:</strong> Mojave 10.14.2</p>\n\n<p>I am trying to open my Jekyll blog on my localhost, something which hasn't given me issues previously. However I ran</p>\n\n<pre><code>bundle exec jekyll serve\n</code></pre>\n\n<p>and get this error:</p>\n\n<pre><code>Could not find eventmachine-1.2.7 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>As suggested, I then run</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>and get this error:</p>\n\n<pre><code>    Ignoring ffi-1.9.25 because its extensions are not built.  Try: gem pristine ffi --version 1.9.25\nIgnoring http_parser.rb-0.6.0 because its extensions are not built.  Try: gem pristine http_parser.rb --version 0.6.0\nFetching gem metadata from https://rubygems.org/...........\nUsing rake 10.5.0\nUsing public_suffix 3.0.3\nUsing addressable 2.5.2\nUsing bundler 2.0.1\nUsing colorator 1.1.0\nUsing concurrent-ruby 1.0.5\nFetching eventmachine 1.2.7\nInstalling eventmachine 1.2.7 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/name/Desktop/GitHub/blog/vendor/bundle/ruby/2.3.0/gems/eventmachine-1.2.7/ext\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20190212-57509-l19d0i.rb extconf.rb\n--with-cppflags=-I/usr/local/opt/openssl/include\nchecking for main() in -lcrypto... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/$(RUBY_BASE_NAME)\n    --with-ssl-dir\n    --without-ssl-dir\n    --with-ssl-include\n    --without-ssl-include=${ssl-dir}/include\n    --with-ssl-lib\n    --without-ssl-lib=${ssl-dir}/lib\n    --with-openssl-config\n    --without-openssl-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-cryptolib\n    --without-cryptolib\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:456:in `try_do': The compiler failed to\ngenerate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:535:in `block in try_link0'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/tmpdir.rb:89:in `mktmpdir'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:532:in `try_link0'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:556:in `try_link'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:765:in `try_func'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:997:in `block in have_library'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:942:in `block in checking_for'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:350:in `block (2 levels) in postpone'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:350:in `block in postpone'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:346:in `postpone'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:941:in `checking_for'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:992:in `have_library'\n    from extconf.rb:8:in `block in check_libs'\n    from extconf.rb:8:in `each'\n    from extconf.rb:8:in `all?'\n    from extconf.rb:8:in `check_libs'\n    from extconf.rb:95:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n/Users/name/Desktop/GitHub/blog/vendor/bundle/ruby/2.3.0/extensions/universal-darwin-18/2.3.0/eventmachine-1.2.7/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in\n/Users/nbame/Desktop/GitHub/blog/vendor/bundle/ruby/2.3.0/gems/eventmachine-1.2.7 for inspection.\nResults logged to\n/Users/name/Desktop/GitHub/blog/vendor/bundle/ruby/2.3.0/extensions/universal-darwin-18/2.3.0/eventmachine-1.2.7/gem_make.out\n\nAn error occurred while installing eventmachine (1.2.7), and Bundler cannot continue.\nMake sure that `gem install eventmachine -v '1.2.7' --source 'https://rubygems.org/'` succeeds before bundling.\n\nIn Gemfile:\n  jekyll was resolved to 3.8.3, which depends on\n    em-websocket was resolved to 0.5.1, which depends on\n      eventmachine\n</code></pre>\n\n<p>I have tried:</p>\n\n<ul>\n<li><p>Using <strong>gem install eventmachine -v '1.2.7' --source '<a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>'</strong> which gives me the \"ERROR: Failed to build gem native extension.\"</p></li>\n<li><p><strong>brew install coreutils</strong> as recommended <a href=\"https://stackoverflow.com/questions/37602947/bcrypt-ruby-3-1-2-gemextbuilderror-error-failed-to-build-gem-native-extens\">here</a></p></li>\n<li><p>Every answer to <a href=\"https://stackoverflow.com/questions/30818391/gem-eventmachine-fatal-error-openssl-ssl-h-file-not-found\">this question</a></p></li>\n<li><p>The answers <a href=\"https://stackoverflow.com/questions/52514791/after-upgrading-to-macos-mojave-gem-update-is-failing\">here</a> relating to Mojave and gem update failing</p></li>\n<li><p><strong>gem pristine ffi --version 1.9.25</strong> because it suggested so in the error message</p></li>\n</ul>\n\n<p>My mkmf.log log is below</p>\n\n<pre><code>\"xcrun clang -o conftest -I/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/universal-darwin18 -I/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/ruby/backward -I/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0 -I. -I/usr/local/opt/openssl/include  -g -Os -pipe -DHAVE_GCC_ATOMIC_BUILTINS conftest.c  -L. -L/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib -L.     -lruby.2.3.0  -lpthread -ldl -lobjc \"\nIn file included from conftest.c:1:\nIn file included from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/ruby.h:33:\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/ruby/ruby.h:24:10: fatal error: 'ruby/config.h' file not found\n#include \"ruby/config.h\"\n         ^~~~~~~~~~~~~~~\n1 error generated.\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n\n\"pkg-config --exists openssl\"\npackage configuration for openssl is not found\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "edited": false, "score": 0, "creation_date": 1549999221, "post_id": 54656868, "comment_id": 96105806, "body": "Is this a rails application and the Medicine class inheriting from ActiveRecord?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1550032056, "post_id": 54656868, "comment_id": 96115934, "body": "What is <code>Medicine</code>? What is <code>create</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 3, "last_activity_date": 1550000002, "last_edit_date": 1550000002, "creation_date": 1549998503, "answer_id": 54657091, "question_id": 54656868, "link": "https://stackoverflow.com/questions/54656868/ruby-find-the-most-common-medicine-name-in-an-array-of-hashes/54657091#54657091", "title": "RUBY - Find the most common medicine name in an array of hashes", "body": "<p>Using a valid Ruby array:</p>\n\n<pre><code>medicine = [{name: \"Apixibucil\", patient_id: 1, review_id: 17, nurse_id: 2},\n            {name: \"Adriacilin\", patient_id: 1, review_id: 17, nurse_id: 12},\n            {name: \"Tiaferol\", patient_id: 4, review_id: 2, nurse_id: 17},\n            {name: \"Afalinum\", patient_id: 6, review_id: 7, nurse_id: 10},\n            {name: \"Afalinum\", patient_id: 9, review_id: 9, nurse_id: 9},\n            {name: \"Afalinum\", patient_id: 22, review_id: 13, nurse_id: 1}]\n</code></pre>\n\n<p>You can do using <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>Enumerable#group_by</code></a> an <a href=\"http://ruby-doc.org/core-2.6.1/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>Hash#transform_values</code></a>:</p>\n\n<pre><code>medicine.group_by{ |h| h[:name] }.transform_values { |v| v.size}.max_by { |_, v| v }\n</code></pre>\n\n<p>Or using <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_object</code></a> using <a href=\"http://ruby-doc.org/core-2.6.1/Hash.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Hash#new</code></a> default to 0, in order to count:</p>\n\n<pre><code>medicine.each_with_object(Hash.new(0)) { |h, o| o[h[:name]] += 1 }.max_by { |_, v| v }\n</code></pre>\n\n<p>Both ways uses <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\"><code>Enumerable#max_by</code></a> to get the max count, returning:</p>\n\n<pre><code>[\"Afalinum\", 3]\n</code></pre>\n\n<p><hr>\nIf you are using Rails check <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Calculations.html\" rel=\"nofollow noreferrer\">calculations</a>, maybe you can do:</p>\n\n<pre><code>Medicine.group(:name).count\n# =&gt; { 'Apixibucil' =&gt; 1, 'Adriacilin' =&gt; 1, 'Tiaferol' =&gt; 1, 'Afalinum' =&gt; 3 }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550008966, "post_id": 54657553, "comment_id": 96110214, "body": "This is a trivial and inferior variation of @iGan&#39;s answer that uses <code>Enumerable#each_with_object</code> and <code>Hash::new</code>."}, {"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550012563, "post_id": 54657553, "comment_id": 96111426, "body": "Please, Cary... explain."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550014739, "post_id": 54657553, "comment_id": 96112053, "body": "You&#39;ve simply used <code>reduce</code> rather than <code>each_with_object</code>. To use the latter you need only flip the order of the block variables and eliminate the line <code>count</code>. I said &quot;inferior&quot; because <code>each_was_object</code> does not require that pesky line <code>&quot;count&quot;</code>."}, {"owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550015944, "post_id": 54657553, "comment_id": 96112304, "body": "You&#39;re right @CarySwoveland that they are comparable. The reason I chose to share the method I did was that I felt that it was more readable, even with the pesky &quot;count&quot; line... I updated my response to show benchmarks for each method&#39;s performance, which shows both the <code>each_with_object</code> and <code>reduce</code> technique to be completely comparable - making it a stylistic choice."}], "tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": false, "score": 0, "last_activity_date": 1550015607, "last_edit_date": 1550015607, "creation_date": 1550000503, "answer_id": 54657553, "question_id": 54656868, "link": "https://stackoverflow.com/questions/54656868/ruby-find-the-most-common-medicine-name-in-an-array-of-hashes/54657553#54657553", "title": "RUBY - Find the most common medicine name in an array of hashes", "body": "<p>Here is a solution.</p>\n\n<pre><code>Medicine['data'].reduce Hash.new(0) do |count, med|\n  count[med[:name]] += 1\n  count\nend.max_by(&amp;:last)\n\n#=&gt; [\"Afalinum\", 3]\n</code></pre>\n\n<p>1) Reduce a hash where all values default to 0.</p>\n\n<p>2) Count the occurrence of each med name.</p>\n\n<p>3) Return the largest count from the counter.</p>\n\n<h3>Benchmarked</h3>\n\n<p>To give everyone an idea of where performance runs for the proposed approaches here are the outputs for both speed and memory usage. To run the test, I duplicated the data to have around 3,000,000 entries.</p>\n\n<pre><code>benchmarker do\n  result = data.reduce Hash.new(0) do |count, med|\n    count[med[:name]] += 1\n    count\n  end.max_by(&amp;:last)\n\n  puts result\nend\n#=&gt; [Afalinum, 1500000]\n#=&gt; {\"ruby\":\"2.5.1\",\"elapsed_time\":0.72,\"garbage_collection\":\"on\",\"memory_used\":\"0 MB\",\"garbage_collection_count\":1}\n\nbenchmarker do\n  result = data.each_with_object(Hash.new(0)) { |h, o| o[h[:name]] += 1 }.max_by { |_, v| v }\n\n  puts result\nend\n#=&gt; [Afalinum, 1500000]\n#=&gt; {\"ruby\":\"2.5.1\",\"elapsed_time\":0.72,\"garbage_collection\":\"on\",\"memory_used\":\"0 MB\",\"garbage_collection_count\":1}\n\nbenchmarker do\n  result = data.group_by { |h| h[:name] }.transform_values { |v| v.size}.max_by { |_, v| v }\n\n  puts result\nend\n#=&gt; [Afalinum, 1500000]\n#=&gt; {\"ruby\":\"2.5.1\",\"elapsed_time\":0.52,\"garbage_collection\":\"on\",\"memory_used\":\"18 MB\",\"garbage_collection_count\":2}\n</code></pre>\n\n<p>I found it interesting to see that the <code>group_by</code> approach actually handled the computation faster, though used up a fair amount of memory to do so. The first to performed literally the same, leaving it up to the developer to choose which they find more readable. </p>\n"}], "owner": {"reputation": 27, "user_id": 10593831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8uPkCHEUvCw/AAAAAAAAAAI/AAAAAAAAAKc/vjQpIAwh6Rw/photo.jpg?sz=128", "display_name": "shine12", "link": "https://stackoverflow.com/users/10593831/shine12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54657091, "answer_count": 2, "score": -2, "last_activity_date": 1550015607, "creation_date": 1549997649, "last_edit_date": 1549998084, "question_id": 54656868, "link": "https://stackoverflow.com/questions/54656868/ruby-find-the-most-common-medicine-name-in-an-array-of-hashes", "title": "RUBY - Find the most common medicine name in an array of hashes", "body": "<p>I need to get the most frequent medicine name in the array of hashes.</p>\n\n<p>The array data is:</p>\n\n<pre><code>Medicine.create([{name: \"Apixibucil\", patient_id: 1, review_id: 17, nurse_id: 2},\n  {name: \"Adriacilin\", patient_id: 1, review_id: 17, nurse_id: 12},\n  {name: \"Tiaferol\", patient_id: 4, review_id: 2, nurse_id: 17},\n  {name: \"Afalinum\", patient_id: 6, review_id: 7, nurse_id: 10},\n  {name: \"Afalinum\", patient_id: 9, review_id: 9, nurse_id: 9},\n  {name: \"Afalinum\", patient_id: 22, review_id: 13, nurse_id: 1}])\n</code></pre>\n\n<p>The code that I have written is (The method is part of a CLI, that's why I included it):</p>\n\n<pre><code>def most_common_medicine_on_study\n  puts \"Do you want to know the most popular medicine in the study?\"\n  puts \"&gt;\"\n  input = gets.chomp\n  if input == \"yes\" || \"y\"\n    Medicine[\"data\"].each do |meds|\n      meds[\"name\"].max_by {|name| name.length}\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "zsh"], "answers": [{"tags": [], "owner": {"reputation": 512, "user_id": 284855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0iz9A.png?s=128&g=1", "display_name": "robenkleene", "link": "https://stackoverflow.com/users/284855/robenkleene"}, "is_accepted": false, "score": 0, "last_activity_date": 1550003305, "last_edit_date": 1550003305, "creation_date": 1549996953, "answer_id": 54656688, "question_id": 54655766, "link": "https://stackoverflow.com/questions/54655766/ruby-gem-tab-completion-on-zsh-produces-doubled-rest-argument-definition-error/54656688#54656688", "title": "Ruby gem tab completion on zsh produces &quot;doubled rest argument definition&quot; error?", "body": "<p>I hacked together my own terrible solution to this but it's better than nothing.</p>\n\n<p>I copied the <code>_gem</code> file from <code>/usr/local/Cellar/zsh/5.7/share/zsh/functions</code> to <code>/Users/robenkleene/.zsh/completion</code> and then modified the offending line (note that this only works because I have <code>fpath=(~/.zsh/completion $fpath)</code> in my <code>zshrc</code>):</p>\n\n<pre><code>-      args+=( '*:gem:_files -g \"*.gem(-.)\"' )\n+      args=( '*:gem:_files -g \"*.gem(-.)\"' )\n</code></pre>\n\n<p>So I removed the <code>+</code>. This seems to work, but I'd love a more elegant solution and/or any information about why (based on my Google search), I seem to be the only person experiencing this.</p>\n"}, {"tags": [], "owner": {"reputation": 6330, "user_id": 158252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a69a78c59a3219aa5d26fd612fd667?s=128&d=identicon&r=PG", "display_name": "sj26", "link": "https://stackoverflow.com/users/158252/sj26"}, "is_accepted": false, "score": 0, "last_activity_date": 1599607905, "creation_date": 1599607905, "answer_id": 63802838, "question_id": 54655766, "link": "https://stackoverflow.com/questions/54655766/ruby-gem-tab-completion-on-zsh-produces-doubled-rest-argument-definition-error/63802838#63802838", "title": "Ruby gem tab completion on zsh produces &quot;doubled rest argument definition&quot; error?", "body": "<p>I'm on macOS 10.15.6 running the default zsh 5.7.1. In the default zsh gem completion I found that <code>push</code> is being included in a list of commands which take a remote gem name \u2014 and it shouldn't be, it only takes the path to the gem file:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ gem push --help                                                      \nUsage: gem push GEM [options]\n</code></pre>\n<p>I applied the following patch to a copy of the file higher in <code>$fpath</code> and it now works for me:</p>\n<pre><code>--- /usr/share/zsh/5.7.1/functions/_gem\n+++ ~/.zsh/completion.d/_gem\n@@ -56,7 +56,7 @@\n     check|cleanup|contents|dependency|list|open|pristine|rdoc|uninstall|unpack|update)\n       args+=( '(--all --skip)*:installed gem:-&gt;gems-local' )\n     ;|\n-    fetch|install|lock|owner|push|search|yank)\n+    fetch|install|lock|owner|search|yank)\n       args+=( '*:gem:-&gt;gems-remote' )\n     ;|\n     cleanup|uninstall)\n</code></pre>\n<p>I'm not sure where to contribute this patch. \ud83d\ude05</p>\n"}], "owner": {"reputation": 512, "user_id": 284855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0iz9A.png?s=128&g=1", "display_name": "robenkleene", "link": "https://stackoverflow.com/users/284855/robenkleene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1599607905, "creation_date": 1549993205, "question_id": 54655766, "link": "https://stackoverflow.com/questions/54655766/ruby-gem-tab-completion-on-zsh-produces-doubled-rest-argument-definition-error", "title": "Ruby gem tab completion on zsh produces &quot;doubled rest argument definition&quot; error?", "body": "<p>When I hit <code>gem push &lt;tab&gt;</code>, it displays this error (regardless of whether the directory contains any <code>.gem</code> files):</p>\n\n<pre><code>_arguments:comparguments:325: doubled rest argument definition: *:gem:_files -g \"*.gem(-.)\"\n_arguments:comparguments:325: doubled rest argument definition: *:gem:_files -g \"*.gem(-.)\"\n_arguments:comparguments:325: doubled rest argument definition: *:gem:_files -g \"*.gem(-.)\"\n</code></pre>\n\n<p>I have no idea how to fix this and Google is no help. My <code>fpath</code>:</p>\n\n<pre><code>&gt; echo $fpath\n/Users/robenkleene/.zsh/completion\n/usr/local/share/zsh/site-functions\n/usr/local/Cellar/zsh/5.7/share/zsh/functions\n</code></pre>\n\n<p>I've tried uninstalling and re-installed Ruby via homebrew because the above \"Cellar\" path contains a <code>_gem</code> file that I believe defines this completion function, but that didn't work.</p>\n\n<p>Any other ideas? Thanks!</p>\n\n<p>(Also, if anyone has any suggestions of where I might file a bug report for this that would also be helpful, thanks again!)</p>\n"}, {"tags": ["ruby", "sed", "delimiter-separated-values"], "answers": [{"comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549994774, "post_id": 54655930, "comment_id": 96103791, "body": "Well, you see, it needs to be a variable. I was originally trying to use <code>sed</code>, however it needs to not include <code>&#47;usr&#47;local</code>. See updated question for example."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549995212, "post_id": 54655930, "comment_id": 96103985, "body": "It&#39;s trivial to tweak the above to use variables but I&#39;m sorry, I don&#39;t understand what <code>it needs to not include &#47;usr&#47;local</code> means. Please edit your question to clarify what it is you&#39;re trying to do."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549995662, "post_id": 54655930, "comment_id": 96104174, "body": "Sorry. The line needs to match <code>&#47;usr</code>, but it needs to not match <code>&#47;usr&#47;local</code>, otherwise the path will be something like <code>&#47;usr&#47;local&#47;local</code>. On top of that, the replacement needs to be read from a variable, so it could be <code>&#47;usr&#47;local</code> (by default), or some totally different path like <code>&#47;foo&#47;bar</code>."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549995894, "post_id": 54655930, "comment_id": 96104268, "body": "OK, that makes sense. You should add that to your question and make sure to include the lines you and don&#39;t want changed in your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, not just the one line you do want changed. I just updated my answer."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549996416, "post_id": 54655930, "comment_id": 96104504, "body": "+1 Nice. That&#39;s really close to working, except it&#39;s a directory I&#39;m working on with thousands of files, and those files contain newlines. I will post an answer with something that worked for me."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549997165, "post_id": 54655930, "comment_id": 96104819, "body": "It doesn&#39;t matter how many files there are, nor does it matter that the files contain newlines (in fact that&#39;s very much required of text files!). The script will work as-is. Add <code>-i</code> for &quot;inplace&quot; editing like you have in your question."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549997354, "post_id": 54655930, "comment_id": 96104897, "body": "Correct, however the source code files also contain <code>\\n</code>. I&#39;ve already posted a new answer. If you would like me to edit yours and accept it, I could also do that."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549997426, "post_id": 54655930, "comment_id": 96104933, "body": "Again, <b>it doesn&#39;t matter</b> that the source files contain <code>\\n</code>s since sed is working on 1 <code>\\n</code>-separated line at a time so the text sed is working on never contains <code>\\n</code>s. No need to edit my answer, it&#39;s the idiomatic way to handle this and it will work as-is."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549997874, "post_id": 54655930, "comment_id": 96105139, "body": "I see what you mean, but I needed multiple instances of <code>&#47;usr</code> in the same line to also be replaced. Thanks for helping!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1549998365, "post_id": 54655930, "comment_id": 96105366, "body": "That sounds like it&#39;d be no trouble at all - you should have just included that information in your question and in the example you posted so we could help you with it. You can always post a followup question now if you like."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1549996090, "last_edit_date": 1549996090, "creation_date": 1549993934, "answer_id": 54655930, "question_id": 54655650, "link": "https://stackoverflow.com/questions/54655650/how-do-i-replace-a-string-that-doesnt-contain-another-string-with-sed/54655930#54655930", "title": "How do I replace a string that doesn&#39;t contain another string with `sed`?", "body": "<pre><code>$ cat file\n./configure --prefix=/usr --enable-foo --disable-bar\n./configure --prefix=/usr/local --enable-foo --disable-bar\n\n$ var='/foo/bar'; sed 's:/usr/local:\\n:g; s:/usr:'\"$var\"':; s:\\n:/usr/local:g' file\n./configure --prefix=/foo/bar --enable-foo --disable-bar\n./configure --prefix=/usr/local --enable-foo --disable-bar\n</code></pre>\n"}], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 54655930, "answer_count": 1, "score": 1, "last_activity_date": 1549997219, "creation_date": 1549992724, "last_edit_date": 1549997219, "question_id": 54655650, "link": "https://stackoverflow.com/questions/54655650/how-do-i-replace-a-string-that-doesnt-contain-another-string-with-sed", "title": "How do I replace a string that doesn&#39;t contain another string with `sed`?", "body": "<p>I'm trying to replace paths in a directory.</p>\n\n<p>So far, I've tried using this on every single file in the directory, however, I'm getting a syntax error:</p>\n\n<pre><code>sed -i \\\"/'#{CREW_PREFIX}'/\\\\\\!s,/usr,#{CREW_PREFIX},g\\\" \\${file};\n</code></pre>\n\n<p>Here's the syntax error:</p>\n\n<pre><code>sed: -e expression #1, char 3: unknown command: `u'\n</code></pre>\n\n<p>Example input:</p>\n\n<pre><code>prop.ppd_search_path = '/usr/share;/usr/local/share;/usr/lib;/usr/local/lib;/usr/libexec;/opt;/usr/lib64'\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>prop.ppd_search_path = '/usr/local/share;/usr/local/share;/usr/local/lib;/usr/local/lib;/usr/local/libexec;/opt;/usr/local/lib64'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>The line needs to match <code>/usr</code>, but it needs to not match <code>/usr/local</code>, otherwise the outputted path will be something like <code>/usr/local/local</code>.\nOn top of that, the replacement needs to be read from a Ruby variable,\nso it could be <code>/usr/local</code> (by default), or some totally different\npath like <code>/foo/bar</code>.</p>\n\n<p>Use case:</p>\n\n<p>There are thousands of hardcoded paths in a directory (HP Linux Printing System source code) that point to a read only path (<code>/usr</code>, in the Chrome OS case). I'm trying to replace all of the instances of <code>/usr</code> with the user-defined prefix (by default, <code>/usr/local</code>), while ignoring the line if it contains the user-defined prefix. The user-defined prefix is in a Ruby script, and it has to be contained in a Ruby variable (<code>#{CREW_PREFIX}</code>). This is what I'm trying to do:</p>\n\n<pre><code>  def self.patch\n    # Fix hardcoded file directories\n    system \"for file in \\$(find . -type f); do\n              sed -i 's,/etc,#{CREW_PREFIX}&amp;,g' \\${file};\n              sed -i 's,/usr/share,#{CREW_PREFIX}/share,g' \\${file};\n              sed -i 's,/usr/include,#{CREW_PREFIX}/include,g' \\${file};\n              sed -i 's,/usr/lib,#{CREW_LIB_PREFIX},g' \\${file};\n              sed -i 's,/var,#{CREW_PREFIX}&amp;,g' \\${file};\n              sed -i 's,/usr/bin,#{CREW_PREFIX}/bin,g' \\${file};\n              sed -i 's,#{CREW_PREFIX}/bin/env,/usr/bin/env,g' \\${file};\n              sed -i 's,#{CREW_PREFIX}/etc/os-release,/etc/os-release,g' \\${file};\n              sed -i \\\"/'#{CREW_PREFIX}'/\\\\\\!s,/usr,#{CREW_PREFIX},g\\\" \\${file};\n            done\"\n  end\n</code></pre>\n\n<p>However, the path contains slashes, and that makes <code>sed</code> give an unknown command error:</p>\n\n<pre><code>sed: -e expression #1, char 3: unknown command: `u'\n</code></pre>\n\n<p>And I can't find another delimiter that contains the functionality that <code>/</code> does.</p>\n\n<p>This is what I'm dealing with:</p>\n\n<pre><code>chronos@localhost ~/Downloads/tarballs/hplip-3.19.1 $ grep -R /usr ./*/ &gt; file; du -sh file\n40K     file\n</code></pre>\n\n<p>I need all those instances of <code>/usr</code> to become the value <code>#{CREW_PREFIX}</code> (variable) if the line where the instance of <code>/usr</code> occurs does not also match the value of <code>#{CREW_PREFIX}</code>.</p>\n"}, {"tags": ["mysql", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "is_accepted": true, "score": 1, "last_activity_date": 1550100756, "creation_date": 1550100756, "answer_id": 54681059, "question_id": 54655491, "link": "https://stackoverflow.com/questions/54655491/could-not-create-makefile-when-trying-to-install-mysql-gem/54681059#54681059", "title": "&quot;Could not create Makefile&quot; when trying to install mysql gem", "body": "<p>Usually that means that you don't have required mysql libs on your system.</p>\n\n<p>Try execute: </p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install libmysqlclient-dev libmysqlclient16 \n</code></pre>\n\n<p>Then run mysql gem installation again:</p>\n\n<pre><code>sudo gem install mysql\n</code></pre>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 54681059, "answer_count": 1, "score": 0, "last_activity_date": 1550100756, "creation_date": 1549992095, "question_id": 54655491, "link": "https://stackoverflow.com/questions/54655491/could-not-create-makefile-when-trying-to-install-mysql-gem", "title": "&quot;Could not create Makefile&quot; when trying to install mysql gem", "body": "<p>I am running Ruby v2.3.3 on Debian 9.6. I executed this command in the terminal: <code>sudo gem install mysql</code>. </p>\n\n<p>This gave me an error. </p>\n\n<pre><code>    Could not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>Here's the full text of the error: <a href=\"https://pastebin.com/raw/HZcL2UtF\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/HZcL2UtF</a></p>\n\n<p>Here's the contents of <code>mkmf.log</code>: <a href=\"https://pastebin.com/raw/Bki5e9tT\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/Bki5e9tT</a></p>\n\n<p>Why can't I install the <code>mysql</code> gem? How do I fix this error?</p>\n"}, {"tags": ["ruby", "testing", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1549993973, "post_id": 54655230, "comment_id": 96103456, "body": "What version of Gherkin are you using? (Also try \\\\n in case it&#39;s a string replacement issue into the <code>Then</code> line"}, {"owner": {"reputation": 1317, "user_id": 2013212, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ad34e90fc30380965ee659d6a825b8c?s=128&d=identicon&r=PG", "display_name": "Jonathon Nordquist", "link": "https://stackoverflow.com/users/2013212/jonathon-nordquist"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1550002362, "post_id": 54655230, "comment_id": 96107321, "body": "Running Gherkin 5.1.  Your idea of trying the double backslash worked, can&#39;t believe I didn&#39;t try that.  If you want to post it as an answer I&#39;ll mark it as accepted.  Much appreciated friend."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1550003404, "post_id": 54655230, "comment_id": 96107816, "body": "Done, and you&#39;re welcome"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1550003382, "creation_date": 1550003382, "answer_id": 54658251, "question_id": 54655230, "link": "https://stackoverflow.com/questions/54655230/newline-character-in-cucumber-scenario-outline-causing-error/54658251#54658251", "title": "Newline character in cucumber scenario outline causing error", "body": "<p>As mentioned in the comments - using <code>\\\\n</code> rather than just <code>\\n</code> enables this to work, although from reading the cucumber/gherkin docs I'm guessing this is actually a bug in cucumber/gherkin so may break in a future release.</p>\n"}], "owner": {"reputation": 1317, "user_id": 2013212, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ad34e90fc30380965ee659d6a825b8c?s=128&d=identicon&r=PG", "display_name": "Jonathon Nordquist", "link": "https://stackoverflow.com/users/2013212/jonathon-nordquist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3144, "favorite_count": 0, "accepted_answer_id": 54658251, "answer_count": 1, "score": 1, "last_activity_date": 1550003382, "creation_date": 1549991195, "question_id": 54655230, "link": "https://stackoverflow.com/questions/54655230/newline-character-in-cucumber-scenario-outline-causing-error", "title": "Newline character in cucumber scenario outline causing error", "body": "<p>Working on a Cucumber feature here using a scenario outline where one of the values has a new line character like so:</p>\n\n<pre><code>Scenario Outline: Good stuff here\n  Given I do some stuff\n  Then I should see \"&lt;text&gt;\"\n\n  Examples:\n    | text                           |\n    | text with a\\nnewline character |\n</code></pre>\n\n<p>If I run this I get the error <code>765: unexpected token at text with a</code>.  If I run it with the newline and nothing after it like <code>text with a\\n</code> it doesn't throw the error but for completeness I'd like to be able to check for the full string.  Is this a limitation of Cucumber scenarios or is there a work around?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1549992566, "creation_date": 1549992566, "answer_id": 54655612, "question_id": 54655202, "link": "https://stackoverflow.com/questions/54655202/how-to-update-a-content-in-new-created-file-by-using-send-file-with-different-ex/54655612#54655612", "title": "How to update a content in new created file by using send_file with different extension?", "body": "<p><code>send_file</code> doesn't write the file itself. Instead it passes the filename back to web server which then performs the actual writing (so your Rails app has less load).</p>\n\n<p>In order to accomplish your goal, you could read the file, apply the changes in-memory and then use <a href=\"https://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data\" rel=\"nofollow noreferrer\"><code>send_data</code></a> to write the data to the client:</p>\n\n<pre><code>buffer = File.read('x.foo')\nbuffer = apply_changes(buffer)\nsend_data(buffer, filename: 'y.bar')\n</code></pre>\n\n<p>Or you could write the changes to a new file and take advantage of <code>send_file</code>:</p>\n\n<pre><code>unless File.exist?('y.bar')\n  buffer = File.read('x.foo')\n  buffer = apply_changes(buffer)\n  File.write('y.bar', buffer)\nend\nsend_file('y.bar')\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 54655612, "answer_count": 1, "score": 0, "last_activity_date": 1549992566, "creation_date": 1549991083, "question_id": 54655202, "link": "https://stackoverflow.com/questions/54655202/how-to-update-a-content-in-new-created-file-by-using-send-file-with-different-ex", "title": "How to update a content in new created file by using send_file with different extension?", "body": "<p>I am working on project where I was need to change the extension of file and download that file with changed extension. I did with following code.</p>\n\n<pre><code>send_file('x.foo', filename: 'y.bar')\n</code></pre>\n\n<p>Actual file is <code>x.foo</code> and I created <code>y.bar</code> file with different extension . Now I want to update content in <code>y.bar</code> on run time then I will download that file with different extension and with updated content. How can i do that??? </p>\n"}, {"tags": ["ruby", "sdk", "azure-storage-blobs"], "comments": [{"owner": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 0, "creation_date": 1549998600, "post_id": 54654601, "comment_id": 96105490, "body": "You should use an Azure SDK. I found <a href=\"https://github.com/Azure/azure-sdk-for-ruby\" rel=\"nofollow noreferrer\">here</a> a Ruby version."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 0, "creation_date": 1550006241, "post_id": 54654601, "comment_id": 96109122, "body": "@JeroenHeier the gem the OP is using is an official azure repo for storage management. The ARM sdk will not help in this case"}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1549993979, "last_edit_date": 1549993979, "creation_date": 1549991714, "answer_id": 54655377, "question_id": 54654601, "link": "https://stackoverflow.com/questions/54654601/is-there-a-ruby-method-for-finding-a-blob-uri/54655377#54655377", "title": "Is there a ruby method for finding a blob uri?", "body": "<p>There is a protected method called <a href=\"https://github.com/Azure/azure-storage-ruby/blob/master/blob/lib/azure/storage/blob/blob_service.rb#L607\" rel=\"nofollow noreferrer\"><code>blob_uri</code></a>  that looks like this: </p>\n\n<pre><code>def blob_uri(container_name, blob_name, query = {}, options = {})\n  if container_name.nil? || container_name.empty?\n    path = blob_name\n  else\n    path = ::File.join(container_name, blob_name)\n  end\n  options = { encode: true }.merge(options)\n  generate_uri(path, query, options)\nend \n</code></pre>\n\n<p>So you could take the short cut of: </p>\n\n<pre><code>blob_client = Azure::Storage::Blob::BlobService.create(storage_account_name: 'XXX' , storage_access_key: 'XXX')\nblob_client.send(:blob_uri, container_name,blob_name) \n</code></pre>\n\n<p>However, the actual URI is simply: </p>\n\n<pre><code>https://[storage_account_name].blob.core.windows.net/container/[container[s]]/[blob file name]\n</code></pre>\n\n<p>So since you have to know the blob name and the container to access to blob. </p>\n\n<pre><code>File.join(blob_client.host,container,blob_name) \n</code></pre>\n\n<p>Is the URI to the blob</p>\n"}], "owner": {"reputation": 1, "user_id": 6317771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVEXX.jpg?s=128&g=1", "display_name": "thegreyfellow", "link": "https://stackoverflow.com/users/6317771/thegreyfellow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1549993979, "creation_date": 1549988938, "question_id": 54654601, "link": "https://stackoverflow.com/questions/54654601/is-there-a-ruby-method-for-finding-a-blob-uri", "title": "Is there a ruby method for finding a blob uri?", "body": "<p>I checked the whole <code>azure-storage-blob</code> gem and didn't find any way to get the <code>URI</code> for a blob. Is there some way to construct it correctly and in a generic way that will work for any other blob in any region?</p>\n\n<p>I used S3 SDK before and I'm well grounded in S3 but new to Azure.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "url", "nginx"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1549988027, "post_id": 54654293, "comment_id": 96100243, "body": "Does it happen locally if you run the server in production environment?"}, {"owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1549990037, "post_id": 54654293, "comment_id": 96101463, "body": "Here&#39;s what I get, along an error page, if I try to run the server locally in production: <code>X-Accel-Mapping header missing</code>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1549990174, "post_id": 54654293, "comment_id": 96101547, "body": "How does the generated HTML look like?"}, {"owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "edited": false, "score": 0, "creation_date": 1549990466, "post_id": 54654293, "comment_id": 96101714, "body": "It&#39;s just returning my 500.html page currently: <a href=\"https://pastebin.com/4cTTx3FV\" rel=\"nofollow noreferrer\">pastebin.com/4cTTx3FV</a>"}, {"owner": {"reputation": 14663, "user_id": 343679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e65e5b1cd213c3b9c72f2680257d6eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharj", "link": "https://stackoverflow.com/users/343679/sharj"}, "edited": false, "score": 2, "creation_date": 1549992786, "post_id": 54654293, "comment_id": 96102896, "body": "How does the generated HTML (of the link) look like? What URL do you see in href <code>&lt;a href=&quot;....&quot;&gt;</code> in production and development environment. It will give you clue."}, {"owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "edited": false, "score": 0, "creation_date": 1549994421, "post_id": 54654293, "comment_id": 96103635, "body": "Thanks! Here&#39;s what resolved the issue: <a href=\"https://github.com/ethanwilkins/simplr/commit/6d1819cebc1204785d38cf305e7a951c27bbd098\" rel=\"nofollow noreferrer\">github.com/ethanwilkins/simplr/commit/&hellip;</a>"}], "owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549987905, "creation_date": 1549987905, "question_id": 54654293, "link": "https://stackoverflow.com/questions/54654293/rails-root-path-returning-only-the-current-url-in-production", "title": "Rails - root_path returning only the current URL in production", "body": "<p>Both <code>root_path</code> and <code>root_url</code> are now returning only the current URL as opposed to my home page, so the link will only refresh the page. This is only happening in production. What may be causing this issue? Thank you.</p>\n\n<p>Link:</p>\n\n<pre><code>&lt;%= link_to '&lt;i class=\"fa fa-home fa-lg\"&gt;&lt;/i&gt;'.html_safe, root_path %&gt;\n</code></pre>\n\n<p>Route:</p>\n\n<pre><code>root 'posts#index'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 1, "last_activity_date": 1549984549, "creation_date": 1549984549, "answer_id": 54653240, "question_id": 54653133, "link": "https://stackoverflow.com/questions/54653133/ruby-how-to-add-items-from-activerecord-to-an-existing-hash-structure/54653240#54653240", "title": "Ruby - how to add items from ActiveRecord to an existing hash structure?", "body": "<p>You could do something like:</p>\n\n<pre><code>brands = Brand.all.map do |brand|\n  [brand.name.to_sym, item_hash(brand.name, @view.edit_brand_path(brand.id))]\nend.to_h #assuming you have a name column on the brands table\n\n{\n  users: item_hash('Users', @view.users_path),\n  brands_group: item_group('Brands', brands),\n  cars: item_hash('Cars', @view.cars_path),\n  bikes: item_hash('Bikes', @view.bikes_path),\n  other_group: item_group('Other', {\n    fees: item_hash('Fees', @view.fees_path),\n    penalties: item_hash('Penalties', @view.penalties_path),\n    bonuses: item_hash('Bonuses', @view.bonuses_path)\n  }),\n  calendar: calendar_menu\n}\n</code></pre>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54653240, "answer_count": 1, "score": 0, "last_activity_date": 1549984549, "creation_date": 1549984193, "question_id": 54653133, "link": "https://stackoverflow.com/questions/54653133/ruby-how-to-add-items-from-activerecord-to-an-existing-hash-structure", "title": "Ruby - how to add items from ActiveRecord to an existing hash structure?", "body": "<p>I am updating an existing Rails project and the menu of the project is rendered through the following structure:</p>\n\n<pre><code>def main_menu\n    {\n        users: item_hash('Users', @view.users_path),\n        cars: item_hash('Cars', @view.cars_path),\n        bikes: item_hash('Bikes', @view.bikes_path),\n        other_group: item_group('Other', {\n          fees: item_hash('Fees', @view.fees_path),\n          penalties: item_hash('Penalties', @view.penalties_path),\n          bonuses: item_hash('Bonuses', @view.bonuses_path)\n        }),\n        calendar: calendar_menu\n    }\nend\n</code></pre>\n\n<p>I need to add a new item to this structure (data would be loaded from DB) and the desired output would look like this (added <code>brands_group</code>):</p>\n\n<pre><code>def main_menu\n        {\n            users: item_hash('Users', @view.users_path),\n            brands_group: item_group('Brands', {\n              Audi: item_hash('Audi', @view.edit_brand_path(1),\n              BMW: item_hash('BMW', @view.edit_brand_path(2),\n              Toyota: item_hash('Toyota', @view.edit_brand_path(3)\n            }),\n            cars: item_hash('Cars', @view.cars_path),\n            bikes: item_hash('Bikes', @view.bikes_path),\n            other_group: item_group('Other', {\n              fees: item_hash('Fees', @view.fees_path),\n              penalties: item_hash('Penalties', @view.penalties_path),\n              bonuses: item_hash('Bonuses', @view.bonuses_path)\n            }),\n            calendar: calendar_menu\n        }\n    end\n</code></pre>\n\n<p>However, how do I load the data from the <code>Brand</code> model and put them to such a structure?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 1, "creation_date": 1549987181, "post_id": 54652877, "comment_id": 96099739, "body": "So you want to validate the token when the link is loaded initially?"}, {"owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "reply_to_user": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1550038087, "post_id": 54652877, "comment_id": 96117697, "body": "Absolutely right @Ricks"}], "answers": [{"comments": [{"owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "edited": false, "score": 0, "creation_date": 1550166643, "post_id": 54683165, "comment_id": 96180043, "body": "Thanks for the help bro, I&#39;m using devise 4.5.0. But I do not want to open password reset page again if the token is used once. In your solution, there is nothing in Edit action, right? Actually, I wanna show page expire message here   # GET /resource/password/edit?reset_password_token=abcdef"}, {"owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "reply_to_user": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "edited": false, "score": 0, "creation_date": 1550208924, "post_id": 54683165, "comment_id": 96192529, "body": "@JaiKumarRajput Do you use the default Devise controller or you have overwritten it? Do you want to store somewhere information that some tokens have been used?"}], "tags": [], "owner": {"reputation": 3347, "user_id": 1061630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a4c7abc90d884112b56919261db1fc?s=128&d=identicon&r=PG", "display_name": "Farkhat Mikhalko", "link": "https://stackoverflow.com/users/1061630/farkhat-mikhalko"}, "is_accepted": false, "score": 0, "last_activity_date": 1550118522, "last_edit_date": 1550118522, "creation_date": 1550118022, "answer_id": 54683165, "question_id": 54652877, "link": "https://stackoverflow.com/questions/54652877/devise-dont-want-to-open-reset-password-page-in-case-of-token-is-invalid/54683165#54683165", "title": "Devise - don&#39;t want to open reset password page in case of token is invalid", "body": "<p>I'm not sure what version of devise you're using. So I will explain my idea by referring to <code>devise 3.2.4</code>.</p>\n\n<p>In <code>devise</code> there is a module that is called <code>Recoverable</code>. You can look at it <a href=\"https://github.com/plataformatec/devise/blob/v3.2.4/lib/devise/models/recoverable.rb\" rel=\"nofollow noreferrer\">here</a>. In this module, you can find a method <code>reset_password_period_valid?</code></p>\n\n<p>It looks like that:</p>\n\n<pre><code>def reset_password_period_valid?\n  reset_password_sent_at &amp;&amp; reset_password_sent_at.utc &gt;= self.class.reset_password_within.ago.utc\nend\n</code></pre>\n\n<p>You can start with this method. \nThe second thing is to work with methods in a special controller, look at <code>PasswordsController</code> in <code>devise</code>. You can look at it <a href=\"https://github.com/plataformatec/devise/blob/v3.2.4/app/controllers/devise/passwords_controller.rb\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Methods that you can overwrite or modify:</p>\n\n<pre><code># GET /resource/password/edit?reset_password_token=abcdef\ndef edit\n  self.resource = resource_class.new\n  resource.reset_password_token = params[:reset_password_token]\nend\n\n# PUT /resource/password\ndef update\n  self.resource = resource_class.reset_password_by_token(resource_params)\n  yield resource if block_given?\n\n  if resource.errors.empty?\n    resource.unlock_access! if unlockable?(resource)\n    flash_message = resource.active_for_authentication? ? :updated : :updated_not_active\n    set_flash_message(:notice, flash_message) if is_flashing_format?\n    sign_in(resource_name, resource)\n    respond_with resource, location: after_resetting_password_path_for(resource)\n  else\n    respond_with resource\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550118522, "creation_date": 1549983378, "last_edit_date": 1550038146, "question_id": 54652877, "link": "https://stackoverflow.com/questions/54652877/devise-dont-want-to-open-reset-password-page-in-case-of-token-is-invalid", "title": "Devise - don&#39;t want to open reset password page in case of token is invalid", "body": "<p>I'm using <code>devise gem</code>.</p>\n\n<p>I don't want to open the Reset password page (received at my email) if the <strong>Devise</strong> <code>forget_password_token</code> is not valid or already used.</p>\n\n<p>Right now by default, it asks me to add a new password and password confirmation then when I submit, it say's <strong>\"token has been expired\"</strong></p>\n\n<p>I just want to add a concept of expire device reset password link sent at the email.</p>\n\n<p>Please help!</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "if-statement", "hash"], "comments": [{"owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "edited": false, "score": 0, "creation_date": 1549982787, "post_id": 54652358, "comment_id": 96096775, "body": "Can you please update your question with an example of input and the output you expect?"}, {"owner": {"reputation": 19, "user_id": 10823432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a3eb7845f5318040be557ae1b48abb?s=128&d=identicon&r=PG&f=1", "display_name": "BenBenFaster", "link": "https://stackoverflow.com/users/10823432/benbenfaster"}, "reply_to_user": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "edited": false, "score": 0, "creation_date": 1549985873, "post_id": 54652358, "comment_id": 96098928, "body": "Input: The princess saw a bear.  When else is nil, outputs [[&quot;stop words&quot;, &quot;The&quot;], [&quot;nouns&quot;, &quot;princess&quot;], [&quot;nouns&quot;, &quot;bear&quot;]]  When else is categorized = [&quot;ERROR&quot;, text_element]; result.push(categorized), outputs [[&quot;ERROR&quot;, &quot;the&quot;], [&quot;ERROR&quot;, &quot;the&quot;], [&quot;stop words&quot;, &quot;the&quot;], [&quot;ERROR&quot;, &quot;the&quot;], [&quot;ERROR&quot;, &quot;the&quot;], [&quot;ERROR&quot;, &quot;princess&quot;], [&quot;ERROR&quot;, &quot;princess&quot;], [&quot;ERROR&quot;, &quot;princess&quot;], [&quot;nouns&quot;, &quot;princess&quot;], [&quot;ERROR&quot;, &quot;princess&quot;], [&quot;ERROR&quot;, &quot;saw&quot;], [&quot;ERROR&quot;, &quot;saw&quot;], [&quot;ERROR&quot;, &quot;saw&quot;], [&quot;ERROR&quot;, &quot;saw&quot;], [&quot;ERROR&quot;, &quot;saw&quot;], [&quot;ERROR&quot;, &quot;a&quot;], [&quot;ERROR&quot;, &quot;a&quot;], [&quot;ERROR&quot;, &quot;a&quot;], [&quot;ERROR&quot;, &quot;a&quot;], etc..."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1549984782, "last_edit_date": 1549984782, "creation_date": 1549984319, "answer_id": 54653170, "question_id": 54652358, "link": "https://stackoverflow.com/questions/54652358/ruby-iterating-over-a-multi-value-hash-using-if-else-trying-to-return-key-valu/54653170#54653170", "title": "Ruby, iterating over a multi-value Hash using if/else, trying to return key/value pairs, fails when value is not found", "body": "<p>It happens because of each iterates over all elements and it is true once or never.</p>\n\n<p>This reduction of your code should help you understand what happen:</p>\n\n<pre><code>dictionary = {\n  'direction' =&gt; ['north', 'south'],\n  'verbs' =&gt; ['go', 'stop', 'kill', 'eat'],\n  'whathever' =&gt; ['blah']\n}\n\ntext = 'go'\ndictionary.each do |type, list|\n  if p list.include?(text) # added p\n    then\n      p text\n    else\n      p 'error'\n  end\nend\n</code></pre>\n\n<p>It returns:</p>\n\n<pre><code># false\n# \"error\"\n# true\n# \"go\"\n# false\n# \"error\"\n</code></pre>\n\n<p>You need a different approach, for example:</p>\n\n<pre><code>text = 'nothing'\nresult = dictionary.find { |_, v| v.include? text }\nresult ? [result.keys, text] : \"Error\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": false, "score": 0, "last_activity_date": 1550001593, "creation_date": 1550001593, "answer_id": 54657829, "question_id": 54652358, "link": "https://stackoverflow.com/questions/54652358/ruby-iterating-over-a-multi-value-hash-using-if-else-trying-to-return-key-valu/54657829#54657829", "title": "Ruby, iterating over a multi-value Hash using if/else, trying to return key/value pairs, fails when value is not found", "body": "<p>While it may feel organize to have the dictionary categorized by lists, this would be both simplified and much faster were the dictionary to be flattened and have a default set to the 'ERROR' token. </p>\n\n<p>For example:</p>\n\n<pre><code>@@dictionary = {\n  'direction' =&gt; ['north', 'south', 'east', 'west', 'down', 'up', 'left', 'right', 'back'],\n  'verbs' =&gt; ['go', 'stop', 'kill', 'eat'],\n  ...\n</code></pre>\n\n<p>Becomes this:</p>\n\n<pre><code>@@dictionary = {\n  'north' =&gt; 'direction',\n  'south' =&gt; 'direction',\n  ...\n  'go' =&gt; 'verbs',\n  'stop' =&gt; 'verbs',\n  ...\n}\n\n@@dictionary.default = 'ERROR'\n</code></pre>\n\n<p>This way, your lookup becomes linear and without unnecessary boolean logic, like so.</p>\n\n<pre><code>def scan\n  result = stuff.split(' ').map do |word|\n    [@@dictionary[word.downcase], word]\n  end\n\n  print result\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 10823432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a3eb7845f5318040be557ae1b48abb?s=128&d=identicon&r=PG&f=1", "display_name": "BenBenFaster", "link": "https://stackoverflow.com/users/10823432/benbenfaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1550077281, "creation_date": 1550077281, "answer_id": 54675686, "question_id": 54652358, "link": "https://stackoverflow.com/questions/54652358/ruby-iterating-over-a-multi-value-hash-using-if-else-trying-to-return-key-valu/54675686#54675686", "title": "Ruby, iterating over a multi-value Hash using if/else, trying to return key/value pairs, fails when value is not found", "body": "<p>This has worked for me. Thanks to Sebastian Scholl for the idea of simplifying the dictionary.</p>\n\n<pre><code>class Lexicon\n\n@@dictionary = {\n  'direction' =&gt; ['north', 'south', 'east', 'west', 'down', 'up', 'left', 'right', 'back'],\n  'verbs' =&gt; ['go', 'stop', 'kill', 'eat'],\n  'stop words' =&gt; ['the', 'in', 'of', 'on', 'at', 'it'],\n  'nouns' =&gt; ['door', 'bear', 'princess', 'cabinet'],\n  'numbers' =&gt; [0..9]\n}\n\nstuff = $stdin.gets.chomp\n@@words = stuff.downcase.split(' ')\n\n    def self.scan\n        result = []\n        values = []\n        @@dictionary.each do |key, value|\n            values &lt;&lt; value\n        end\n\n        value_list = values.flatten.uniq\n\n        @@words.each do |text_element|\n            if value_list.include?(text_element)\n                @@dictionary.each do |key, value|\n                    if value.include?(text_element)\n                        categorized = [key, text_element]\n                        result.push(categorized)\n                    else\n                        nil\n                    end\n                end\n            else\n                result.push([\"Error, #{text_element}\"])\n            end\n        end\n        print result\n    end\nLexicon.scan\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10823432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a3eb7845f5318040be557ae1b48abb?s=128&d=identicon&r=PG&f=1", "display_name": "BenBenFaster", "link": "https://stackoverflow.com/users/10823432/benbenfaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1550077281, "creation_date": 1549981837, "question_id": 54652358, "link": "https://stackoverflow.com/questions/54652358/ruby-iterating-over-a-multi-value-hash-using-if-else-trying-to-return-key-valu", "title": "Ruby, iterating over a multi-value Hash using if/else, trying to return key/value pairs, fails when value is not found", "body": "<p>I am trying to scan a string of raw input from a user and return a sentence that's composed of an array of arrays with the (TOKEN, WORD) pairings. If a word isn't part of the lexicon, then it should still return the WORD but set the TOKEN to an error token.</p>\n\n<p>Inside the method \"@@dictionary.each do |type, list|\" the initial if statement works fine at building a key/value array of found words, as long as the else statement is set to return nil. However, when I try and place error/words pairs into the array for the words not contained in the @@dictionary hash (i.e. those that fall into the else part of the code), I receive 5 separate pairs in the array for each word that the user entered, one for each iteration over each key for each word entered.</p>\n\n<p>Does anybody have an idea how to return just one error/value pair to the array, instead of one for each of the five iterations for every word?</p>\n\n<pre><code>class Lexicon\n\n@@dictionary = {\n  'direction' =&gt; ['north', 'south', 'east', 'west', 'down', 'up', 'left', 'right', 'back'],\n  'verbs' =&gt; ['go', 'stop', 'kill', 'eat'],\n  'stop words' =&gt; ['the', 'in', 'of', 'on', 'at', 'it'],\n  'nouns' =&gt; ['door', 'bear', 'princess', 'cabinet'],\n  'numbers' =&gt; [0..9]\n}\n\nstuff = $stdin.gets.chomp\n@@words = stuff.split(' ')\n\n    def self.scan\n        result = []\n\n        @@words.each do |text_element|\n            categorized = []\n\n            @@dictionary.each do |type, list|\n                if\n                    list.include?(text_element.downcase)\n                    categorized = [type, text_element]\n                    result.push(categorized)\n                else\n                    nil\n                    #categorized = [\"ERROR\", text_element]\n                    #result.push(categorized)\n                end\n            end\n        end\n        print result\n    end\n\nLexicon.scan\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 1, "creation_date": 1549981607, "post_id": 54652230, "comment_id": 96095981, "body": "Don&#39;t forget to add the &#39;has_one :clients_config&#39; or &#39;has_many :clients_configs&#39; on the Client model."}, {"owner": {"reputation": 13, "user_id": 10053928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d5d1341941b982da8f188996f64bbe?s=128&d=identicon&r=PG&f=1", "display_name": "bblacker", "link": "https://stackoverflow.com/users/10053928/bblacker"}, "reply_to_user": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1549983861, "post_id": 54652230, "comment_id": 96097537, "body": "@RobNice Thanks! When i try to create an instance of &#180;clients_config&#180; it throws an error that says that the instance is null. How can i do to create an instance of clients_config with all the variables that are included in the db set?  Thanks for helping me"}, {"owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "edited": false, "score": 0, "creation_date": 1549984249, "post_id": 54652230, "comment_id": 96097807, "body": "In what environment are you trying to create the client_config? I recommend playing around in the Rails Console (run the &#39;rails c&#39; command in the terminal in your project&#39;s root folder) and create your instances there. So, create a new Client, then on your Client instance do a client.clients_config = ClientsConfig.new ().  You&#39;ll probably get some validation errors, but you&#39;ll at least be able to see what&#39;s missing."}], "tags": [], "owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "is_accepted": true, "score": 0, "last_activity_date": 1549981475, "creation_date": 1549981475, "answer_id": 54652230, "question_id": 54652117, "link": "https://stackoverflow.com/questions/54652117/how-to-link-a-class-with-a-specific-table-of-the-data-base/54652230#54652230", "title": "How to link a class with a specific table of the data base", "body": "<p>Add <code>references</code>:</p>\n\n<pre><code>class ClientsConfigSettings &lt; ActiveRecord::Migration\n  def change\n    create_table \"clients_config\" do |t|\n      t.references :client\n      t.boolean \"when_credential_blocked\", default: true\n    end\n  end\nend\n</code></pre>\n\n<p>This will add <code>client_id</code> to the new table. So these two tables can be joined using this column.</p>\n"}], "owner": {"reputation": 13, "user_id": 10053928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d5d1341941b982da8f188996f64bbe?s=128&d=identicon&r=PG&f=1", "display_name": "bblacker", "link": "https://stackoverflow.com/users/10053928/bblacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 54652230, "answer_count": 1, "score": 0, "last_activity_date": 1549981475, "creation_date": 1549981189, "question_id": 54652117, "link": "https://stackoverflow.com/questions/54652117/how-to-link-a-class-with-a-specific-table-of-the-data-base", "title": "How to link a class with a specific table of the data base", "body": "<p>So i'm trying to link a class to a specific table of the data base, so far i do have my class and i think that i have the table as well, but how do i link them? </p>\n\n<p>In my program i have a class client, and i want every client to have a link to a table with configurations. </p>\n\n<p>This is the migration.</p>\n\n<p>Thanks</p>\n\n<pre><code>class ClientsConfigSettings &lt; ActiveRecord::Migration\n  def change\n    create_table \"clients_config\" do |t|\n      t.boolean \"when_credential_blocked\", default: true\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading"], "comments": [{"owner": {"reputation": 76, "user_id": 8518329, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6ZmafDaaKVQ/AAAAAAAAAAI/AAAAAAAAAAs/x4O5h7AXstM/photo.jpg?sz=128", "display_name": "Ted Price", "link": "https://stackoverflow.com/users/8518329/ted-price"}, "edited": false, "score": 2, "creation_date": 1549981610, "post_id": 54651928, "comment_id": 96095983, "body": "<i>Doesn&#39;t rails create a new thread per request, that the above case should not occure? (sic)</i>  It does NOT create new thread per request. It creates a new instance of the controller per request but not a new thread. Hope this clears up any confusion."}, {"owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "reply_to_user": {"reputation": 76, "user_id": 8518329, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6ZmafDaaKVQ/AAAAAAAAAAI/AAAAAAAAAAs/x4O5h7AXstM/photo.jpg?sz=128", "display_name": "Ted Price", "link": "https://stackoverflow.com/users/8518329/ted-price"}, "edited": false, "score": 0, "creation_date": 1549982444, "post_id": 54651928, "comment_id": 96096541, "body": "Thank you @TedPrice, I suspected this was the case, but.. a couple of posts got me very confused."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1549988170, "post_id": 54651928, "comment_id": 96100336, "body": "Wouldn&#39;t the session object be a good place to store temporary per user data?"}, {"owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1550050899, "post_id": 54651928, "comment_id": 96124126, "body": "@Kris, for my case no, because I have a API base application."}], "answers": [{"comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1550055198, "post_id": 54666922, "comment_id": 96126906, "body": "Some web servers will opt to handle multiple requests at once by creating more threads and/or more processes. But as a minimum there will be at least one process and one thread."}], "tags": [], "owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1550051883, "last_edit_date": 1550051883, "creation_date": 1550050864, "answer_id": 54666922, "question_id": 54651928, "link": "https://stackoverflow.com/questions/54651928/singleton-per-thread/54666922#54666922", "title": "&#39;Singleton&#39; per thread", "body": "<p>Rails, creates a new instance of the Controller per request, not a thread. The best solution I found was: <a href=\"https://github.com/steveklabnik/request_store\" rel=\"nofollow noreferrer\">https://github.com/steveklabnik/request_store</a></p>\n"}], "owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 54666922, "answer_count": 1, "score": 1, "last_activity_date": 1550051883, "creation_date": 1549980543, "question_id": 54651928, "link": "https://stackoverflow.com/questions/54651928/singleton-per-thread", "title": "&#39;Singleton&#39; per thread", "body": "<p>I have a question about an issue I encountered. I'm trying to implement a object (singleton) / thread, but I encountered a behaviour that I did not expect.</p>\n\n<p>For example, we have the following code</p>\n\n<pre><code>class Persistence\n\n  attr_accessor :data\n\n  def self.instance\n    Thread.current[:persistence_store] ||= Persistence.new\n  end\n\n  def self.clear\n    Thread.current[:persistence_store] = nil\n  end\n\n  def get_data(user_id = nil)\n    self.data ||= AnotherClass.get_advanced_data(user_id)\n  end\n\nend\n</code></pre>\n\n<p>Lets say a request comes in, and we have <code>Persistence.instance.get_data(1)</code> in the controller, (thus get_data is execute once).</p>\n\n<p>Then we do <code>Persistence.instance.get_data</code> in a model again, all works as expected it loads the data, from the initial request.</p>\n\n<p>But lets say in 5 minutes a user does the same request. I found out that the value saved in <code>Persistence.instance.get_data(2)</code> is the value from the first user request. (Its actually <code>Persistence.instance.get_data(1)</code>).</p>\n\n<p>Doesn't rails create a new thread per request, that the above case should not occure?</p>\n\n<p>The only solution I found out was to add a before_filter in application controller that does <code>Persistence.clear</code>, then all works as expected..</p>\n\n<p>I'm a bit confused why this behaviour should occur. Hope you understand my question. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sms", "twilio"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "is_accepted": false, "score": 0, "last_activity_date": 1549982488, "creation_date": 1549982488, "answer_id": 54652576, "question_id": 54651870, "link": "https://stackoverflow.com/questions/54651870/how-to-update-sms-status-based-on-twilio-status-callback/54652576#54652576", "title": "How to update sms status based on twilio status callback?", "body": "<p>Solution is to add id into the routes</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  # config/routes.rb\n\n  match 'twilio/callback/:id', to: 'twilio#callback', as: :twilio_callback\n</code></pre>\n\n<p>and then pass down the id into <code>status_callback</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  client.messages.create({ from: message.from, to: message.to, body: message.body, callback_url: twilio_callback_url(id: message.id) }) \n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1549982488, "creation_date": 1549980334, "question_id": 54651870, "link": "https://stackoverflow.com/questions/54651870/how-to-update-sms-status-based-on-twilio-status-callback", "title": "How to update sms status based on twilio status callback?", "body": "<p>I am using <code>twilio-ruby</code> to send messages and I want to update message status in database based on status callback.</p>\n\n<p>Let's say I have <code>Message</code> model</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  message = Message.create(body: \"Message\", status: \"pending\", to: \"+1XXXXXXXXXX\", from: \"+1XXXXXXXXXX\")\n</code></pre>\n\n<p>and I am sending this message via twilio API</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  client = Twilio::REST::Client.new ENV['TWILIO_ACCOUNT_SID'], ENV['TWILIO_AUTH_TOKEN']\n  client.messages.create({ from: message.from, to: message.to, body: message.body, callback_url: twilio_callback_url }) \n</code></pre>\n\n<p>The problem that in status callback params they only fields by which I can find message is <code>from</code> and <code>to</code> and there can be many messages with same sender and receiver</p>\n\n<p><img src=\"https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/postbin.width-800.png\" alt=\"1\"></p>\n\n<p>Is there some way to send extra params, like <code>:message_id</code> to twilio status callback?</p>\n"}, {"tags": ["ruby", "constants"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1549984553, "post_id": 54651809, "comment_id": 96097993, "body": "And I guess <code>A.const_get(&#39;C&#39;)</code> is too specific?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549984722, "post_id": 54651809, "comment_id": 96098132, "body": "Indeed. It&#39;s just a simplified example, the constant loading I am after is on a library level, so it does not know of <code>A</code>. Basically, it needs to resolve <code>C</code> in the current scope and then load it (i.e.: See that <code>C</code> is actually <code>A::C</code>, and then load it)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1549985166, "post_id": 54651809, "comment_id": 96098460, "body": "So you want to resolve the constant dynamically the way Ruby would resolve a literal <code>C</code>, i.e. it should take nesting and inheritance into account?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550770455, "post_id": 54651809, "comment_id": 96402742, "body": "I have updated my question to better reflect the nature of my issue. @Stefan"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550785205, "post_id": 54651809, "comment_id": 96409490, "body": "Why don\u2019t you pass the constant (i.e. the class) instead of its name?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550830306, "post_id": 54651809, "comment_id": 96424198, "body": "Mainly because of loading it as late as possible."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550830419, "post_id": 54651809, "comment_id": 96424279, "body": "So <code>MyClass</code> is actually located in yet another file?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550852369, "post_id": 54651809, "comment_id": 96437173, "body": "Yes, <code>Library</code> is a gem, <code>MyApplication</code> is a user application."}], "answers": [{"comments": [{"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1550003753, "post_id": 54655332, "comment_id": 96107990, "body": "I see <code>Module.nesting</code> determines the nesting structurally, in the place it is called. However, my setup is a bit more complicated. <code>A::B</code> is actually included in another class (<code>class D; include A::B; end</code>), which is a base class for other classes (<code>class E &lt; D; end</code>). Inside <code>E</code> I need to load this constant <code>C</code>, which is usually found in the same namespace as <code>E</code>, but not necessarily. So, bottomline, I am looking for the same thing <code>Module.nesting</code> does, but dynamically (perform the same lookup on the nesting it is actually called from). I&#39;m sorry for this getting so confusing."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1550045703, "post_id": 54655332, "comment_id": 96121147, "body": "@linkyndy not sure if I can follow. Could you update your question accordingly?"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1549991561, "creation_date": 1549991561, "answer_id": 54655332, "question_id": 54651809, "link": "https://stackoverflow.com/questions/54651809/load-constant-from-string-as-resolved-in-current-scope/54655332#54655332", "title": "Load constant from string, as resolved in current scope", "body": "<p>When resolving a constant, Ruby first checks the current nesting of modules and then the ancestors of the innermost module.</p>\n\n<p>This can be replicated by traversing <a href=\"http://ruby-doc.org/core-2.6.1/Module.html#method-c-nesting\" rel=\"nofollow noreferrer\"><code>Module.nesting</code></a> and <code>Module.nesting.first.ancestors</code> (in that order). If a module defines the constant, we can get its value via <code>const_get</code>:</p>\n\n<pre><code>class A\n  class B\n    def met\n      str = 'C'\n      mods = Module.nesting\n      mods.concat(mods.first.ancestors)\n      mod = mods.find { |c| c.const_defined?(str, false) }\n      mod.const_get(str)\n    end\n  end\n\n  class C\n  end\nend\n\nA::B.new.met #=&gt; A::C\n</code></pre>\n"}], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1550769971, "creation_date": 1549980144, "last_edit_date": 1550769971, "question_id": 54651809, "link": "https://stackoverflow.com/questions/54651809/load-constant-from-string-as-resolved-in-current-scope", "title": "Load constant from string, as resolved in current scope", "body": "<p>Say I have the following structure:</p>\n\n<pre><code>module Library\n  class DSL\n    def met(str)\n      # load `str` here; for this case, `MyApplication::MyClass`\n    end\n  end\n\n  class Superclass\n    extend DSL\n  end\nend\n\n\nmodule MyApplication\n  class MySubclass &lt; Library::Superclass\n    met 'MyClass'\n  end\n\n  class MyClass\n  end\nend\n</code></pre>\n\n<p>Inside <code>Library::DSL#met</code> I need to load constant <code>str</code>, which is provided as string. Obviously, it does not work if I simply do <code>Object.const_get(str)</code>. </p>\n\n<p>I need somehow to fully resolve <code>str</code> in the context of the current scope (<code>MyApplication::MySubclass</code>); <code>str</code> would therefore be resolved as <code>MyApplication::MyClass</code>. I need to fully resolve this because later I need to use this constant outside this namespace.</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1549980152, "post_id": 54651736, "comment_id": 96094987, "body": "<code>.scan(&#47;\\d*\\.?\\d+|[-+\\&#47;*%()]&#47;)</code>?"}, {"owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549981179, "post_id": 54651736, "comment_id": 96095680, "body": "That works, could you break it down in an answer for me? EDIT: Actually it&#39;s pretty easy to understand...lol"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549981237, "post_id": 54651736, "comment_id": 96095715, "body": "It just does not convert the numbers to float type, keeping them as strings."}, {"owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549981446, "post_id": 54651736, "comment_id": 96095877, "body": "It can convert? Right now I just iterate over it afterwards and cast everything from string, to float, to string."}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549981627, "post_id": 54652246, "comment_id": 96095994, "body": "FYI for those who saw <a href=\"https://ideone.com/Ye1O2p\" rel=\"nofollow noreferrer\">my IDEONE demo</a>: the <code>.inspect</code> is there only for demo purposes, to display the results nicely on that page."}, {"owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "edited": false, "score": 0, "creation_date": 1549981662, "post_id": 54652246, "comment_id": 96096022, "body": "Not only is this answer correct and informative, I did not know of that regex demo website, very good resources. Thank you."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1549987179, "post_id": 54652246, "comment_id": 96099738, "body": "@WiktorStribi\u017cew <code>#to_s</code> would also work instead of <code>#inspect</code>. Or alternatively use <code>#p</code> instead of <code>#puts</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1549988263, "post_id": 54652246, "comment_id": 96100391, "body": "@Johan Thanks.  I will edit the demo then once I&#39;m back at the PC"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1549981515, "creation_date": 1549981515, "answer_id": 54652246, "question_id": 54651736, "link": "https://stackoverflow.com/questions/54651736/how-to-split-string-using-regular-expressed-at-every-number/54652246#54652246", "title": "How to split string using regular expressed at every number", "body": "<p>You may use</p>\n\n<pre><code>s.scan(/\\d*\\.?\\d+|[-+\\/*%()]/)\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/8ayQRU/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>Or, to match any type of non-whitespace besides numbers:</p>\n\n<pre><code>s.scan(/\\d*\\.?\\d+|[^\\d\\s]/)\n                  ^^^^^^^\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/Ye1O2p\" rel=\"nofollow noreferrer\">Ruby demo</a>.</p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>\\d*\\.?\\d+</code> -  0 or more digits, an optional <code>.</code> and then 1+ digits</li>\n<li><code>|</code> - or</li>\n<li><code>[-+\\/*%()]</code> - a <code>-</code>, <code>+</code>, <code>/</code>, <code>*</code>, <code>%</code>, <code>(</code> or <code>)</code></li>\n<li><code>[^\\d\\s]</code> - any char but whitespace and digit</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550011385, "post_id": 54652315, "comment_id": 96111056, "body": "I like your approach but note that the OP wishes to permit representations of floats as well, and possibly of negative numbers also."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550061695, "post_id": 54652315, "comment_id": 96130704, "body": "@CarySwoveland Completely correct. I&#39;ve updated the answer to also match floats. It now only has problem differentiating negative numbers from the minus operator. Other answers don&#39;t address this and I won&#39;t since the regex would get pretty complicated."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550086319, "post_id": 54652315, "comment_id": 96145058, "body": "For the case where there are only integers I believe you could write <code>str.delete(&#39; &#39;).split(&#47;\\b&#47;)</code>."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550086781, "post_id": 54652315, "comment_id": 96145287, "body": "That would leave <code>*(</code> grouped."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550087562, "post_id": 54652315, "comment_id": 96145674, "body": "I just said I believed that, not that it was true."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1550061910, "last_edit_date": 1550061910, "creation_date": 1549981717, "answer_id": 54652315, "question_id": 54651736, "link": "https://stackoverflow.com/questions/54651736/how-to-split-string-using-regular-expressed-at-every-number/54652315#54652315", "title": "How to split string using regular expressed at every number", "body": "<h1>Integers</h1>\n\n<p>Instead of filtering out what you want using <a href=\"http://ruby-doc.org/core-2.6.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>#scan</code></a> you could also filter out what you don't want using <a href=\"http://ruby-doc.org/core-2.6.1/String.html#method-i-split\" rel=\"nofollow noreferrer\"><code>#split</code></a>.</p>\n\n<pre><code>'2 + 3 * ( 2 + 2 )'.split(/\\s+|\\b|(?=\\W)/)\n#=&gt; [\"2\", \"+\", \"3\", \"*\", \"(\", \"2\", \"+\", \"2\", \")\"]\n\n'22+33*(22+22)'.split(/\\s+|\\b|(?=\\W)/)\n#=&gt; [\"22\", \"+\", \"33\", \"*\", \"(\", \"22\", \"+\", \"22\", \")\"]\n</code></pre>\n\n<p>This regex splits on:</p>\n\n<ul>\n<li>Whitespace (<code>\\s+</code>) when for example <code>22 +</code> is given.</li>\n<li>Word boundary (<code>\\b</code>) when for example <code>22+</code> is given.</li>\n<li>A character followed by a non-word character (<code>(?=\\W)</code>) when for example <code>*(</code> is given.</li>\n</ul>\n\n<h1>Floats</h1>\n\n<p>The above works for integers, but not for floats. To correctly parse floats we need to write <code>\\b</code> ourself. <code>\\b</code> is equal to <code>(?&lt;=\\w)(?!\\w)|(?&lt;!\\w)(?=\\w)</code>, thus making heavy usage of <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">lookarounds</a>. If we apply this for only decimals and dots this would result in <code>(?&lt;=[\\d.])(?![\\d.])|(?&lt;![\\d.])(?=[\\d.])</code>.</p>\n\n<p>Resulting in the following regex:</p>\n\n<pre><code>float_boundary = /(?&lt;=[\\d.])(?![\\d.])|(?&lt;![\\d.])(?=[\\d.])/\nnon_float_boundary = /(?&lt;![\\d.])(?![\\d.])/\nregex = /\\s+|#{float_boundary}|#{non_float_boundary}/\n\n'22.22+33*(22.34+22.1)'.split(/\\s+|\\b|(?=\\W)/)\n#=&gt; [\"22\", \".\", \"22\", \"+\", \"33\", \"*\", \"(\", \"22\", \".\", \"34\", \"+\", \"22\", \".\", \"1\", \")\"]\n\n'22.22+33*(22.34+22.1)'.split(regex)\n#=&gt; [\"22.22\", \"+\", \"33\", \"*\", \"(\", \"22.34\", \"+\", \"22.1\", \")\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550062560, "post_id": 54659612, "comment_id": 96131200, "body": "Pretty nice, but &quot;fails&quot; on <code>&#39;2-1&#39;.scan(&#47;(?:-?\\d+(?:\\.\\d+)?)|\\S&#47;) #=&gt; [&quot;2&quot;, &quot;-1&quot;]</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1550084732, "post_id": 54659612, "comment_id": 96144350, "body": "@Johan, my flawed logic is &quot;pretty nice&quot;? Hmm. I (think I) fixed it, but I may have just put a finger in a leaking dike. Now I&#39;m off to look at the edit of your answer..."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1550084572, "last_edit_date": 1550084572, "creation_date": 1550010406, "answer_id": 54659612, "question_id": 54651736, "link": "https://stackoverflow.com/questions/54651736/how-to-split-string-using-regular-expressed-at-every-number/54659612#54659612", "title": "How to split string using regular expressed at every number", "body": "<pre><code>R = /\n    (?:       # begin a non-capture group\n      (?&lt;=    # begin a positive lookbehind\n        \\d    # match a digit\n        [ ]?  # optionally match a space\n      )       # end positive lookbehind\n      -       # match a minus sign\n    )         # end non-capture group\n    |         # or\n    -?        # optionally match a minus sign\n    \\d+       # match one or more digits           \n    (?:       # begin a non-capture group\n      \\.      # match a period \n      \\d+     # match one or more digits\n    )         # end non-capture group\n    ?         # optionally match non-capture group above\n    |         # or\n    \\S        # match a non-whitespace character\n    /x        # free-spacing regex definition mode\n\ndef doit(str)\n  str.scan(R)\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>doit \"2 + 3 * ( 2 + 2 )\"\n  #=&gt; [\"2\", \"+\", \"3\", \"*\", \"(\", \"2\", \"+\", \"2\", \")\"] \ndoit \"2+3*(2+2)\"\n  #=&gt; [\"2\", \"+\", \"3\", \"*\", \"(\", \"2\", \"+\", \"2\", \")\"] \ndoit \"22+33*(22+22)\"\n  #=&gt; [\"22\", \"+\", \"33\", \"*\", \"(\", \"22\", \"+\", \"22\", \")\"] \ndoit \"(22+33)!*(22-12)\"\n  #=&gt; [\"(\", \"22\", \"+\", \"33\", \")\", \"!\", \"*\", \"(\", \"22\",\n  #    \"-\", \"12\", \")\"] \ndoit \"(22-33)*(22/-12)\"\n  #=&gt; [\"(\", \"22\", \"-\", \"33\", \")\", \"*\", \"(\", \"22\", \"/\",\n  #    \"-12\", \")\"] \ndoit \"(22+33.4)*(22/-12.3)\"\n  #=&gt; [\"(\", \"22\", \"+\", \"33.4\", \")\", \"*\", \"(\", \"22\", \"/\",\n  #    \"-12.3\", \")\"] \ndoit \"2-1\"\n  #=&gt; [\"2\", \"-\", \"1\"] \ndoit \".2\"\n  #=&gt; [\".\", \"2\"] \n</code></pre>\n\n<p>The regular expression is conventionally written as follows.</p>\n\n<pre><code>/(?:(?&lt;=\\d )-)|-?\\d+(?:\\.\\d+)?|\\S/\n</code></pre>\n\n<p>Note that the space in the regular expression must be protected in a character class (<code>[ ]</code>) when free-spacing mode is used, as spaces as stripped out before the expression is evaluated. </p>\n"}], "owner": {"reputation": 612, "user_id": 2630890, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/cdd840a40a420deceb4a3067fd0f403e?s=128&d=identicon&r=PG", "display_name": "Gibbo", "link": "https://stackoverflow.com/users/2630890/gibbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54652246, "answer_count": 3, "score": -1, "last_activity_date": 1550084572, "creation_date": 1549979946, "last_edit_date": 1549981840, "question_id": 54651736, "link": "https://stackoverflow.com/questions/54651736/how-to-split-string-using-regular-expressed-at-every-number", "title": "How to split string using regular expressed at every number", "body": "<p>I am trying to alter the input of a calculator program to remove all white space and correct the formatting.</p>\n\n<p>If the formatting is as follows:</p>\n\n<p><code>2 + 3 * ( 2 + 2 )</code></p>\n\n<p>I take this value, split it at every space into an array, turn every number into a float, then my program can recursively solve the problem while conforming to PEMDAS. However, if a user was to come along and whack this in:</p>\n\n<p><code>2+3*(2+2)</code></p>\n\n<p>it will break loose. I can split it at every number, then what if the user puts</p>\n\n<p><code>22+33*(22+22)</code></p>\n\n<p>It breaks.</p>\n\n<p>So my idea was to remove any white space and then use a regex to find all the numbers, operators, braces etc., and split them into an array like before.</p>\n\n<p>My desired outcome is:</p>\n\n<p><code>[\"2.0\", \"+\", \"3.0\", \"*\", \"(\", \"2.0\", \"+\", \"2.0\", \")\"]</code></p>\n\n<p>I have the folowing, which does not work</p>\n\n<p><code>better_format = ss.scan(/\\d*\\.\\d*|\\+|\\-|\\*|\\%\\/|\\(\\)/)\n=&gt; [\"2.0\", \"+\", \"3.0\", \"*\", \"\", \"2.0\", \"+\", \"2.0\", \"\", \"\"]</code></p>\n\n<p>I need some input. To my understanding, my expression is searching for</p>\n\n<ul>\n<li>Any number of digits, followed by a single period, followed by any number of digits</li>\n<li>Any of the following characters '+, -, *, /, %, (, )'</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "pgbouncer"], "answers": [{"tags": [], "owner": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "is_accepted": true, "score": 1, "last_activity_date": 1550791754, "creation_date": 1550791754, "answer_id": 54817840, "question_id": 54651546, "link": "https://stackoverflow.com/questions/54651546/pgconnectionbad-with-rails-and-pgbouncer/54817840#54817840", "title": "PG::ConnectionBad with rails and pgbouncer", "body": "<p>It was a timeout configured in the server (that I wasn't aware of). So it doesn't have anything to do with rails/pgbouncer, in fact <code>reconnect</code> flag in the <code>database.yml</code> isn't used anymore in rails.</p>\n"}, {"tags": [], "owner": {"reputation": 675, "user_id": 3886157, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/73a22d4ddce0d352c07db9a13c9a2e76?s=128&d=identicon&r=PG", "display_name": "feng ce", "link": "https://stackoverflow.com/users/3886157/feng-ce"}, "is_accepted": false, "score": 0, "last_activity_date": 1551872160, "creation_date": 1551872160, "answer_id": 55022174, "question_id": 54651546, "link": "https://stackoverflow.com/questions/54651546/pgconnectionbad-with-rails-and-pgbouncer/55022174#55022174", "title": "PG::ConnectionBad with rails and pgbouncer", "body": "<p>Maybe it is a solution to set the below configuration parameters of Postgresql.</p>\n\n<p><strong>tcp_keepalives_idle (integer)</strong></p>\n\n<p>Specifies the number of seconds of inactivity after which TCP should send a keepalive message to the client. A value of 0 uses the system default. This parameter is supported only on systems that support TCP_KEEPIDLE or an equivalent socket option, and on Windows; on other systems, it must be zero. In sessions connected via a Unix-domain socket, this parameter is ignored and always reads as zero.</p>\n\n<p><strong>tcp_keepalives_interval (integer)</strong></p>\n\n<p>Specifies the number of seconds after which a TCP keepalive message that is not acknowledged by the client should be retransmitted. A value of 0 uses the system default. This parameter is supported only on systems that support TCP_KEEPINTVL or an equivalent socket option, and on Windows; on other systems, it must be zero. In sessions connected via a Unix-domain socket, this parameter is ignored and always reads as zero.</p>\n\n<p><strong>tcp_keepalives_count (integer)</strong></p>\n\n<p>Specifies the number of TCP keepalives that can be lost before the server's connection to the client is considered dead. A value of 0 uses the system default. This parameter is supported only on systems that support TCP_KEEPCNT or an equivalent socket option; on other systems, it must be zero. In sessions connected via a Unix-domain socket, this parameter is ignored and always reads as zero.</p>\n"}], "owner": {"reputation": 812, "user_id": 2394842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9089757e5553d83415a6c3add8a3c2e9?s=128&d=identicon&r=PG", "display_name": "MaicolBen", "link": "https://stackoverflow.com/users/2394842/maicolben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 54817840, "answer_count": 2, "score": 0, "last_activity_date": 1551872160, "creation_date": 1549979274, "question_id": 54651546, "link": "https://stackoverflow.com/questions/54651546/pgconnectionbad-with-rails-and-pgbouncer", "title": "PG::ConnectionBad with rails and pgbouncer", "body": "<p>I have rails and pgBouncer, and I have <code>reconnect: true</code> in the <code>database.yml</code> but I keep getting this in the console:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::ConnectionBad: PQconsumeInput() server closed the connection unexpectedly\n</code></pre>\n\n<p>The same error happens in sidekiq but not in web, shouldn't rails reconnect after having this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1549978905, "post_id": 54651160, "comment_id": 96094159, "body": "did you run <code>bundle install</code>?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1549984162, "post_id": 54651160, "comment_id": 96097742, "body": "The error message says <i><code>sqlite3.h</code> is missing. Install SQLite3 from <a href=\"http://www.sqlite.org/\" rel=\"nofollow noreferrer\">http://www.sqlite.org/</a> first.</i> Did you follow that instruction? Is SQLite itself (no the gem that depends on it) installed on your system?"}], "answers": [{"comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1549985606, "post_id": 54652721, "comment_id": 96098747, "body": "Here the reason not in version"}], "tags": [], "owner": {"reputation": 318, "user_id": 2675909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3639b2b02065af61e1e79766905b8c?s=128&d=identicon&r=PG&f=1", "display_name": "dstull", "link": "https://stackoverflow.com/users/2675909/dstull"}, "is_accepted": false, "score": 0, "last_activity_date": 1549982936, "creation_date": 1549982936, "answer_id": 54652721, "question_id": 54651160, "link": "https://stackoverflow.com/questions/54651160/error-while-creating-a-new-rails-application/54652721#54652721", "title": "Error while creating a new rails application", "body": "<p>I had the similar issue on Linux version.  The error presented differently though (error during a request from browser after calling <code>rails server</code>).  It seems, in my case, the 1.4.0 version is not compatible.  Try putting this in your Gemfile and rerunning <code>bundle install</code>: <code>gem 'sqlite3', '1.3.13'</code></p>\n"}], "owner": {"reputation": 11, "user_id": 6538771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554f4ea837e54414e9288e4b65ecdf66?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6538771/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549984020, "creation_date": 1549977999, "last_edit_date": 1549984020, "question_id": 54651160, "link": "https://stackoverflow.com/questions/54651160/error-while-creating-a-new-rails-application", "title": "Error while creating a new rails application", "body": "<p>I installed the latest ruby 2.6 and rails 5.2.\nthen i tried creating a new app but i am stuck with an error i cant figure out.</p>\n\n<pre><code>current directory:\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0/ext/sqlite3\nC:/Ruby26-x64/bin/ruby.exe -I C:/Ruby26-x64/lib/ruby/2.6.0 -r\n./siteconf20190212-2716-9s9m2t.rb extconf.rb checking for sqlite3.h...\nno sqlite3.h is missing. Install SQLite3 from http://www.sqlite.org/\nfirst.\n*** extconf.rb failed *** Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check\nthe mkmf.log file for more details.  You may need configuration\noptions.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby26-x64/bin/$(RUBY_BASE_NAME)\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-config\n        --without-sqlite3-config\n        --with-pkg-config\n        --without-pkg-config\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-dir\n        --without-sqlite3-dir\n        --with-sqlite3-include\n        --without-sqlite3-include=${sqlite3-dir}/include\n        --with-sqlite3-lib\n        --without-sqlite3-lib=${sqlite3-dir}/lib\n\nTo see why this extension failed to compile, please check the mkmf.log which can\nbe found here:\n\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0 for inspection.\nResults logged to\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/gem_make.out\n\nAn error occurred while installing sqlite3 (1.4.0), and Bundler cannot continue.\nMake sure that `gem install sqlite3 -v '1.4.0' --source 'https://rubygems.org/'`\nsucceeds before bundling.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1549972169, "post_id": 54649263, "comment_id": 96089958, "body": "<a href=\"https://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_file\" rel=\"nofollow noreferrer\"><code>send_file</code></a> allows you to specify a filename, there&#39;s no need to actually rename the file in your file system."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549972262, "post_id": 54649263, "comment_id": 96090015, "body": "BTW, renaming the extension from <code>txt</code> to <code>docx</code> won&#39;t change the file format."}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549972307, "post_id": 54649263, "comment_id": 96090042, "body": "@Stefan Thanks for your reply but I am try to change the extension of file not the base name of the file ."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549972390, "post_id": 54649263, "comment_id": 96090090, "body": "The <code>:filename</code> option specifies the full filename, including the extension."}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549972625, "post_id": 54649263, "comment_id": 96090266, "body": "@Stefan Can you please share the exact code that will help me to solve this issue"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1549972857, "post_id": 54649263, "comment_id": 96090410, "body": "Here&#39;s an example: <code>send_file(&#39;x.foo&#39;, filename: &#39;y.bar&#39;)</code> would send the file <code>x.foo</code> under the name <code>y.bar</code> to the browser. Most browsers will then save the file as <code>y.bar</code>."}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549974659, "post_id": 54649263, "comment_id": 96091477, "body": "@Stefan Thanks it works!!! You can post this as an answer then I will accept and upvote it."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1549979113, "post_id": 54650325, "comment_id": 96094305, "body": "Is there any way to update the contents of y.bar file at run time."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1549982685, "post_id": 54650325, "comment_id": 96096701, "body": "@VarinderSohal probably plenty of ways, but that is beyond the scope of your question. Post a new question regarding your follow-up problem."}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1549991173, "post_id": 54650325, "comment_id": 96102090, "body": "I have posted a new question so can you check please ?? <a href=\"https://stackoverflow.com/questions/54655202/how-to-update-a-content-in-new-created-file-by-using-send-file-with-different-ex\" title=\"how to update a content in new created file by using send file with different ex\">stackoverflow.com/questions/54655202/&hellip;</a>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1549975134, "creation_date": 1549975134, "answer_id": 54650325, "question_id": 54649263, "link": "https://stackoverflow.com/questions/54649263/how-to-change-extension-of-file-on-run-time-in-ruby-on-rails/54650325#54650325", "title": "How to change extension of file on run time in ruby on rails", "body": "<p><a href=\"https://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_file\" rel=\"nofollow noreferrer\"><code>send_file</code></a> allows you to specify a filename via the <code>:filename</code> option.</p>\n\n<p>Assuming that there's a file <code>x.foo</code> on your server, then:</p>\n\n<pre><code>send_file('x.foo', filename: 'y.bar')\n</code></pre>\n\n<p>would send the file <code>x.foo</code> under the name <code>y.bar</code> to the browser.</p>\n\n<p>It's up to the browser to use the suggested name, but most browsers will save the file as <code>y.bar</code>.</p>\n"}], "owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 54650325, "answer_count": 1, "score": 0, "last_activity_date": 1549975134, "creation_date": 1549971364, "last_edit_date": 1549972096, "question_id": 54649263, "link": "https://stackoverflow.com/questions/54649263/how-to-change-extension-of-file-on-run-time-in-ruby-on-rails", "title": "How to change extension of file on run time in ruby on rails", "body": "<p>I am working on a project and I want to show two links to download same file but with different extensions, first link download the file with actual extension and another link download the file with changed extension. Like I have a 1.txt file first link is to download 1.txt file and I want another link to download 1.docx file using ruby on rails.</p>\n\n<p>First link works properly which downloads actual file and I have created a method for second link.</p>\n\n<pre><code>def downloaddocxfile\n      require 'fileutils'\n      Dir.glob(params[:file]).each do |f|\n         if File.extname(f) != '.docx'\n            FileUtils.cp f, \"#{File.dirname(f)}/#{File.basename(f,'.*')}.docx\"\n            send_file \"#{File.dirname(f)}/#{File.basename(f,'.*')}.docx\"\n            # system(\"rm -rf #{File.dirname(f)}/#{File.basename(f,'.*')}.docx\")\n         else   \n            send_file \"#{params[:file]}\"\n         end\n      end\n   end\n</code></pre>\n\n<p>This method create a copy of original file and change the extension to .docx.</p>\n\n<p>I don't want to show two files with different extensions in the list of files. So I want to remove that file which is created with .docx  extension once it is downloaded. So, How can I do that?</p>\n"}, {"tags": ["ruby", "xml", "parsing", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11050289, "user_type": "registered", "profile_image": "https://graph.facebook.com/10161436877195707/picture?type=large", "display_name": "Rupert Adams", "link": "https://stackoverflow.com/users/11050289/rupert-adams"}, "edited": false, "score": 0, "creation_date": 1550066683, "post_id": 54659165, "comment_id": 96133880, "body": "I think thats done it. I got confused on the scoping. Thank you for this!"}], "tags": [], "owner": {"reputation": 46, "user_id": 7732311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343023ea85bdaf936a45aafe9a85d72d?s=128&d=identicon&r=PG&f=1", "display_name": "grzekos", "link": "https://stackoverflow.com/users/7732311/grzekos"}, "is_accepted": true, "score": 0, "last_activity_date": 1550008180, "creation_date": 1550008180, "answer_id": 54659165, "question_id": 54648579, "link": "https://stackoverflow.com/questions/54648579/how-do-i-scrape-a-website-and-output-data-to-xml-file-with-nokogiri/54659165#54659165", "title": "How do I scrape a website and output data to xml file with Nokogiri?", "body": "<blockquote>\n  <p>I've tried changing the .each method to include a File.write() but all it ever does is write the last line of the output into the xml file.</p>\n</blockquote>\n\n<p>Is the <code>File.write</code> method inside the <code>each</code> loop? I guess what's happening here is You are overwriting the file on every iteration and that's why you are seeing only the last line.</p>\n\n<p>Try putting the <code>each</code> loop inside the block of the <code>File.open</code> method like:</p>\n\n<pre><code>File.open(yourfile, 'w') do |file|\n  (0...prices.size).each do |index|\n    file.write(\"your text\")\n  end\nend\n</code></pre>\n\n<p>I also recommend reading about the <a href=\"https://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Builder\" rel=\"nofollow noreferrer\">Nokogiri::XML::Builder</a> and then saving it's output to the file.</p>\n"}], "owner": {"reputation": 3, "user_id": 11050289, "user_type": "registered", "profile_image": "https://graph.facebook.com/10161436877195707/picture?type=large", "display_name": "Rupert Adams", "link": "https://stackoverflow.com/users/11050289/rupert-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 54659165, "answer_count": 1, "score": 0, "last_activity_date": 1550008180, "creation_date": 1549969246, "question_id": 54648579, "link": "https://stackoverflow.com/questions/54648579/how-do-i-scrape-a-website-and-output-data-to-xml-file-with-nokogiri", "title": "How do I scrape a website and output data to xml file with Nokogiri?", "body": "<p>I've been trying to scrape data using Nokogiri and HTTParty and can scrape data off a website successfully and print it to the console but I can't work out how to output the data to an xml file in the repo.</p>\n\n<p>Right now the code looks like this:</p>\n\n<pre><code>class Scraper\n\n  attr_accessor :parse_page\n\n  def initialize\n    doc = HTTParty.get(\"https://store.nike.com/gb/en_gb/pw/mens-nikeid-lifestyle-shoes/1k9Z7puZoneZoi3?ref=https%253A%252F%252Fwww.google.com%252F\")\n    @parse_page ||= Nokogiri::HTML(doc)\n  end\n\n  def get_names\n    item_container.css(\".product-display-name\").css(\"p\").children.map { |name| name.text }.compact\n  end\n\n  def get_prices\n    item_container.css(\".product-price\").css(\"span.local\").children.map { |price| price.text }.compact\n  end\n\n  private\n\n  def item_container\n    parse_page.css(\".grid-item-info\")\n  end\n\n  scraper = Scraper.new\n  names = scraper.get_names\n  prices = scraper.get_prices\n\n  (0...prices.size).each do |index|\n    puts \" - - - Index #{index + 1} - - -\"\n    puts \"Name: #{names[index]} | Price: #{prices[index]}\"\n  end\n\nend\n</code></pre>\n\n<p>I've tried changing the .each method to include a File.write() but all it ever does is write the last line of the output into the xml file. I would appreciate any insight as to how to parse the data correctly, I am new to scraping.</p>\n"}, {"tags": ["ruby", "openssl"], "comments": [{"owner": {"reputation": 1862, "user_id": 4658000, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Sw3Y.jpg?s=128&g=1", "display_name": "Le\u015bny Rumcajs", "link": "https://stackoverflow.com/users/4658000/le%c5%9bny-rumcajs"}, "edited": false, "score": 0, "creation_date": 1549992872, "post_id": 54648526, "comment_id": 96102924, "body": "could  you provide the contents of <code>mysignedfile.xml.p7m</code>?"}, {"owner": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "reply_to_user": {"reputation": 1862, "user_id": 4658000, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Sw3Y.jpg?s=128&g=1", "display_name": "Le\u015bny Rumcajs", "link": "https://stackoverflow.com/users/4658000/le%c5%9bny-rumcajs"}, "edited": false, "score": 0, "creation_date": 1550058754, "post_id": 54648526, "comment_id": 96128989, "body": "thanks @Le\u015bnyRumcajs for reply, the file type is &quot;data&quot;, opening it with a text editor i can see in the middle the xml content, and on top and bottom of the file there is part of signature (i suppose). I prefear to non publish it here for pricavy issue. can you suggest me some commands helping you to inspect file?"}], "owner": {"reputation": 199, "user_id": 6291356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ae1aa305d2c39347e58ae2f5bce4c54?s=128&d=identicon&r=PG&f=1", "display_name": "EffeBi", "link": "https://stackoverflow.com/users/6291356/effebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549969047, "creation_date": 1549969047, "question_id": 54648526, "link": "https://stackoverflow.com/questions/54648526/convert-openssl-command-in-ruby-language-using-openssl-gem", "title": "Convert openssl command in ruby language using OpenSSL-Gem", "body": "<p>i'm going crazy</p>\n\n<p>I need to convert this openssl command</p>\n\n<pre><code>openssl smime -verify -in mysignedfile.xml.p7m -inform der -noverify -out simplefile.xml\n</code></pre>\n\n<p>into Ruby / RoR language. It's working as expected in console but I can't find the way to use it in ruby. </p>\n\n<p>looking at the OpenSSL document, I can not succeed</p>\n\n<p>this is an example of code</p>\n\n<pre><code>myfile = File.read \"mysignedfile.xml.p7m\"\nOpenSSL::PKCS7::read_smime(myfile)\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>OpenSSL::PKCS7::PKCS7Error: no content type\n</code></pre>\n\n<p>The file was successfully opened (i can read it), but i think read_smime expect for some value as content_type</p>\n"}, {"tags": ["ruby", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1550791601, "creation_date": 1550791601, "answer_id": 54817821, "question_id": 54648283, "link": "https://stackoverflow.com/questions/54648283/ive-got-404-error-code-if-i-replace-value-in-a-payload-when-using-faraday-gem-t/54817821#54817821", "title": "I&#39;ve got 404 error code if I replace value in a payload when using Faraday gem to call request", "body": "<p>req.headers is a Hash, but by using <code>req.headers =</code> you are wiping out any headers that Faraday has set automatically such as 'User-Agent'.  To add new headers, do the same that you've done for 'Content-Type':</p>\n\n<pre><code>conn = Faraday.new\nf_response = conn.post do |req|\n  req.url 'https://api.abcxyz.vn/v2/tokens'\n  req.headers['Content-Type'] = 'application/json'\n  req.headers['X-Access-Token'] = 'x-access-token-goes-here'\n  req.body = '{\"email\": \"xxx@gmail.com\",\"password\": \"abc123\",\"grant_type\": \"password\"}'\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10681049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eK9frAm2gj8/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jVeALK8pP-a0PS1ujQocMmerohsg/mo/photo.jpg?sz=128", "display_name": "Nguyen Khoi Nguyen", "link": "https://stackoverflow.com/users/10681049/nguyen-khoi-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550791601, "creation_date": 1549968363, "question_id": 54648283, "link": "https://stackoverflow.com/questions/54648283/ive-got-404-error-code-if-i-replace-value-in-a-payload-when-using-faraday-gem-t", "title": "I&#39;ve got 404 error code if I replace value in a payload when using Faraday gem to call request", "body": "<p>I am learning Ruby programming and I am building an API testing project. I have a request to a specific site and I am using Faraday gem.\nHere my code:</p>\n\n<pre><code>conn = Faraday.new\nf_response = conn.post do |req|\n  req.url 'https://api.abcxyz.vn/v2/tokens'\n  req.headers['Content-Type'] = 'application/json'\n  req.body = '{\"email\": \"xxx@gmail.com\",\"password\": \"abc123\",\"grant_type\": \"password\"}'\nend\n</code></pre>\n\n<p>The request is OK and I got the successfull code 201 as I expected.\nBut I do not understand the format of <code>req.headers['Content-Type'] = 'application/json'</code>. Is it a hash or array. Because if I replace my code as following:</p>\n\n<pre><code>request_headers = {\"Content-Type\" =&gt; \"application/json\"}\nconn = Faraday.new\nf_response = conn.post do |req|\n  req.url 'https://api.abcxyz.vn/v2/tokens'\n  req.headers = request_headers\n  req.body = '{\"email\": \"xxx@gmail.com\",\"password\": \"abc123\",\"grant_type\": \"password\"}'\nend\n</code></pre>\n\n<p>The result 404 error code. Woud you please help me out with this case.\nPluse I have another API which requires the 'X-Access-Token' attched in the header fields. \nHow can I input it into the payload.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "rubygems"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1549968343, "post_id": 54648180, "comment_id": 96087714, "body": "Did you install <code>ruby</code> with <code>sudo</code> ? If not try without <code>sudo</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1549977170, "post_id": 54648180, "comment_id": 96093017, "body": "@ts: How would <code>sudo</code> affect DNS name resolution?"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1549977689, "post_id": 54648180, "comment_id": 96093311, "body": "May be <a href=\"http://help.rubygems.org/discussions/problems/26201-gemremotefetcherunknownhosterror\" rel=\"nofollow noreferrer\">this</a> will help."}, {"owner": {"reputation": 33, "user_id": 10901406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4134e2fe946ada0310b3663643929da8?s=128&d=identicon&r=PG&f=1", "display_name": "edoha", "link": "https://stackoverflow.com/users/10901406/edoha"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1550014379, "post_id": 54648180, "comment_id": 96111959, "body": "@ts yes,while i try without <code>sudo</code> terminal showing error FilePermission"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12384716, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f022c7984d0968c0ae8431541209b0b0?s=128&d=identicon&r=PG", "display_name": "ConnivingMonkey", "link": "https://stackoverflow.com/users/12384716/connivingmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1573944790, "creation_date": 1573944790, "answer_id": 58895983, "question_id": 54648180, "link": "https://stackoverflow.com/questions/54648180/getting-error-gemremotefetcherunknownhosterror-while-installing-rails-or-g/58895983#58895983", "title": "Getting error (Gem::RemoteFetcher::UnknownHostError) while installing Rails or gem update", "body": "<p>Disable <code>IPv6</code> and retry. It should work.</p>\n"}], "owner": {"reputation": 33, "user_id": 10901406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4134e2fe946ada0310b3663643929da8?s=128&d=identicon&r=PG&f=1", "display_name": "edoha", "link": "https://stackoverflow.com/users/10901406/edoha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573944790, "creation_date": 1549968061, "question_id": 54648180, "link": "https://stackoverflow.com/questions/54648180/getting-error-gemremotefetcherunknownhosterror-while-installing-rails-or-g", "title": "Getting error (Gem::RemoteFetcher::UnknownHostError) while installing Rails or gem update", "body": "<p>I want to install Ruby on Rails in my laptop using Ubuntu 18.04 LTS. I've installed Ruby, but when I trying to install Rails with <code>sudo gem install rails</code>, i'm getting error message</p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::RemoteFetcher::UnknownHostError)\nno such name (https://api.rubygems.org/quick/Marshal.4.8/websocket- extensions-0.1.3.gemspec.rz)\n</code></pre>\n\n<p>Can anyone help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "model", "migration"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1549966680, "creation_date": 1549966680, "answer_id": 54647726, "question_id": 54647329, "link": "https://stackoverflow.com/questions/54647329/rails-migration-check-variable-existance/54647726#54647726", "title": "Rails migration : check variable existance", "body": "<p>Yes, you can check if <code>first_sheet.template</code> is present:</p>\n\n<pre><code> first_sheet.template.update( step_id: report.step_id ) if first_sheet.template\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54647726, "answer_count": 1, "score": 1, "last_activity_date": 1549969984, "creation_date": 1549965525, "last_edit_date": 1549969984, "question_id": 54647329, "link": "https://stackoverflow.com/questions/54647329/rails-migration-check-variable-existance", "title": "Rails migration : check variable existance", "body": "<p>I'm doing a new rails migration file to move attribute content from model to another model : </p>\n\n<pre><code>class StepIdCorrectionForReportSheetTemplate &lt; ActiveRecord::Migration[5.1]\n  def change\n      Report.current.find_each do |report|\n        first_sheet = report.sheets.select{ |sheet| !sheet.is_archived }.sort_by{ |sheet| sheet[:order] }.first\n        if not report.step_id.nil?\n          first_sheet.update( step_id: report.step_id )\n          first_sheet.template.update( step_id: report.step_id )\n        end\n    end\n\n  end\nend\n</code></pre>\n\n<p>I got this error: </p>\n\n<blockquote>\n  <p>undefined method `update' for \n  nil:NilClass\n  /home/sahnoun/altagem/web/db/migrate/20190208104955_step_id_correction_for_report_sheet_template.rb:7:in\n  'block in change'</p>\n</blockquote>\n\n<p>I think I should add some other test to check the existence of <code>report_sheet</code> and <code>report_sheet.template</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cart", "spree"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10658300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6f164d3ffc4a040412c552ed693bc0?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/10658300/pfc"}, "edited": false, "score": 0, "creation_date": 1550054261, "post_id": 54662542, "comment_id": 96126327, "body": "It seems I&#39;m stupid, I was looking in 3-3-stable while using 3-0. Thanks anyway for help:)"}], "tags": [], "owner": {"reputation": 436, "user_id": 2570423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVptB.png?s=128&g=1", "display_name": "mehedi", "link": "https://stackoverflow.com/users/2570423/mehedi"}, "is_accepted": true, "score": 1, "last_activity_date": 1550032289, "creation_date": 1550032289, "answer_id": 54662542, "question_id": 54647300, "link": "https://stackoverflow.com/questions/54647300/add-to-cart-button-redirects-to-nothingspree/54662542#54662542", "title": "Add to cart button redirects to nothing(Spree)", "body": "<p>This is because there is an error occurred. And your setting might not allowing throwing exception in front. Maybe because this is not in development environment.</p>\n\n<p>Anyway, <code>order/populate</code> path does exist on <code>3-0-stable</code> Spree. Please look in <a href=\"https://github.com/spree/spree/blob/3-0-stable/frontend/config/routes.rb#L22\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/spree/spree/blob/3-0-stable/frontend/app/controllers/spree/orders_controller.rb#L40\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 63, "user_id": 10658300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6f164d3ffc4a040412c552ed693bc0?s=128&d=identicon&r=PG&f=1", "display_name": "pfc", "link": "https://stackoverflow.com/users/10658300/pfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 54662542, "answer_count": 1, "score": 0, "last_activity_date": 1550032289, "creation_date": 1549965439, "question_id": 54647300, "link": "https://stackoverflow.com/questions/54647300/add-to-cart-button-redirects-to-nothingspree", "title": "Add to cart button redirects to nothing(Spree)", "body": "<p>In branch '3-0-stable'(Spree), the <strong>Add to Cart</strong> button redirects to a page which doesn't exist, without adding the product to the cart.\nIt redirect to orders/populate path but then:</p>\n\n<p><a href=\"https://i.stack.imgur.com/plDMN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/plDMN.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "middleman"], "comments": [{"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1549964416, "post_id": 54646372, "comment_id": 96085186, "body": "So do you need the shown above meta tags on every page/many pages?"}, {"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "reply_to_user": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1549965199, "post_id": 54646372, "comment_id": 96085702, "body": "not quite... I would like to have a one file *.erb. In which there would be such lines: <code>&lt;meta name=&quot;keywords&quot; content=&quot;any keywords ONE&quot; &#47;&gt; &lt;meta name=&quot;description&quot; content=&quot;any description ONE&quot; &#47;&gt;</code> and next <code>&lt;meta name=&quot;keywords&quot; content=&quot;any keywords TWO&quot; &#47;&gt; &lt;meta name=&quot;description&quot; content=&quot;any description TWO &#47;&gt;</code>and next... be able to call different lines from one file to different pages"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1549965458, "post_id": 54646372, "comment_id": 96085867, "body": "From what i understand is, is that you want dynamic meta tags? Or are those static and you have only a limited amount, for example 5?"}, {"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "reply_to_user": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1549966175, "post_id": 54646372, "comment_id": 96086310, "body": "No limits, all pages are completely static. Just for ease of editing, I need to call in different layouts files, different parts of one wile *.erb of partials folder. Sorry for my English)"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1549968759, "post_id": 54646372, "comment_id": 96087943, "body": "As already one posted at the bottom: You can just simply create partials for your meta tags: _metas.html.erb and then render those metas via: &lt;%= render &#39;shared/metas %&gt; and sotre _metas.html.erb inside a &quot;shared&quot; folder that is located inside your views folder. You could also split those metas up and create partials for these, for example _meta_keywords.html.erb and add only the keyword meta inside of it. Then, render it via: &lt;%= render meta_keywords %&gt; like so. Obviously, you need a different approach if your metas are dynamic but thats not the case like you&#39;ve said. Cheers!"}, {"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "reply_to_user": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550430428, "post_id": 54646372, "comment_id": 96255709, "body": "see the screenshot please"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550480306, "post_id": 54646372, "comment_id": 96269247, "body": "You have to call your files: &quot;.html.erb&quot; not just &quot;.erb&quot;"}, {"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "reply_to_user": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550580398, "post_id": 54646372, "comment_id": 96313409, "body": "in file *.html.erb i call only (layout: ***) no more..."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550580766, "post_id": 54646372, "comment_id": 96313621, "body": "Again: go to your views folder -&gt; create a new folder and call it &quot;shared&quot;. Inside shared, create a new file called &quot;_meta_keywords.html.erb&quot;. Add to this file &lt;h3&gt;Hello i am meta keyword&lt;/h3&gt; -&gt; go to application.html.erb, inside &lt;body&gt;&lt;/body&gt; add: &lt;%= render &#39;shared/meta_keywords&#39; %&gt; repeat those steps if you need more static partials (like you&#39;ve said). If you don&#39;t follow these steps, it wont work."}, {"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "reply_to_user": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550644487, "post_id": 54646372, "comment_id": 96339196, "body": "@Prometheus    Tell me, maybe I&#39;m completely stupid, but if you call as you said (&lt;% = render &#39;shared / meta_keywords&#39;%&gt;), as you told me. Then all the content will be called - &quot;_meta_keywords.html.erb&quot; right? But I don\u2019t need it, in this file I want to store not only - &lt;h3&gt; Hello i am meta keyword &lt;/ h3&gt; but also &lt;h3&gt; Hello i am meta keyword 2 &lt;/ h3&gt; and &lt;h3&gt; Hello i am meta keyword 3 &lt;/ h3&gt;. And send them not in one file layouts but in several."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550650396, "post_id": 54646372, "comment_id": 96341842, "body": "No reason to think this! Problems are solved by trial and error. As for your question: If you have another keyword and you want to seperate them, you just create another file: &quot;_meta_keyword_whatever.html.erb&quot; add whatever you want into that file (as long as it is rails/html syntax) and then render it wherever you want via: &lt;%= render &#39;shared/meta_keyword_whatever&#39; %&gt;. You need to understand that render partials are just a extension that you can inject everywhere. Lets say you have a image that you want to render in multiple parts of your app. You can add the image to every file, or create a.."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1550650655, "post_id": 54646372, "comment_id": 96341985, "body": ".. partial inside shared, call it: &quot;_i_dont_care.html.erb&quot;, add the image to this file and then again, add it to wherever you want via: &lt;%= render &#39;shared/i_dont_care.html.erb&#39; %&gt; That is all about partials. Everything else i NOT possible, since its only a extension of an html file. Whatever you want to do inside of it, needs to follow html rules. If you need dynamic metas (which you denied) than you could use: <a href=\"https://github.com/kpumuk/meta-tags\" rel=\"nofollow noreferrer\">github.com/kpumuk/meta-tags</a> that would let you generate dynamic metas based on your db content. We can also chat if you still need help with that."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "edited": false, "score": 0, "creation_date": 1550510184, "post_id": 54648124, "comment_id": 96286742, "body": "I am interested in the possibility of loading such parts on different pages from one file."}, {"owner": {"reputation": 302, "user_id": 8804557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wKYuDt4B25k/AAAAAAAAAAI/AAAAAAAAAAo/hq7tT3lfEf8/photo.jpg?sz=128", "display_name": "Amogh Hegde", "link": "https://stackoverflow.com/users/8804557/amogh-hegde"}, "reply_to_user": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "edited": false, "score": 0, "creation_date": 1550547827, "post_id": 54648124, "comment_id": 96298301, "body": "No Thats not possible, you will have to create seperate partials for each The other option is to use locals and put conditions on your partial based on the value of the local variable."}, {"owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "edited": false, "score": 0, "creation_date": 1550580300, "post_id": 54648124, "comment_id": 96313353, "body": "looks very incomprehensible how to try it? don&#39;t forget that newbie... thank... also advised (content_for) method for me, but also did not explain how to apply it... If it&#39;s not difficult for you, you can describe how to test these methods for my question ?"}], "tags": [], "owner": {"reputation": 302, "user_id": 8804557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wKYuDt4B25k/AAAAAAAAAAI/AAAAAAAAAAo/hq7tT3lfEf8/photo.jpg?sz=128", "display_name": "Amogh Hegde", "link": "https://stackoverflow.com/users/8804557/amogh-hegde"}, "is_accepted": false, "score": 0, "last_activity_date": 1550549045, "last_edit_date": 1550549045, "creation_date": 1549967862, "answer_id": 54648124, "question_id": 54646372, "link": "https://stackoverflow.com/questions/54646372/how-to-call-partial/54648124#54648124", "title": "How to call `&lt;%= partial &#39;...&#39; %&gt;`", "body": "<p>Create a new file for instance \"views/_partial.html.erb\" ; The filename should begin with an underscore. Put your HTML content in this file which is the following:</p>\n\n<pre><code>&lt;meta name=\"keywords\" content=\"any keywords\" /&gt;\n&lt;meta name=\"description\" content=\"any description\" /&gt;\n</code></pre>\n\n<p>Now from the view from which you want to call the partial, use the following code:</p>\n\n<pre><code>&lt;%= render :partial =&gt; 'views/partial' %&gt;\n</code></pre>\n\n<p>Note: while calling the partial you should exclude the underscore.</p>\n\n<p><strong>Edit</strong> Method 2</p>\n\n<p>File: <strong>_partial.html.erb</strong></p>\n\n<pre><code>&lt;% if page == 1 %&gt;\n  &lt;meta name=\"keywords\" content=\"any keywords\" /&gt;\n  &lt;meta name=\"description\" content=\"any description\" /&gt;\n&lt;% elsif page == 2 %&gt;\n  &lt;meta name=\"keywords\" content=\"any keywords\" /&gt;\n  &lt;meta name=\"description\" content=\"any description\" /&gt;\n&lt;% end %&gt;\n\n</code></pre>\n\n<p><strong>Code to call the partial</strong></p>\n\n<pre><code>&lt;%= render partial: 'partial', locals:  {page: 1} %&gt;\n&lt;%= render partial: 'partial', locals:  {page: 2} %&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9040092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819acf9a7df8cc85a84b261eeb4d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Vision 10", "link": "https://stackoverflow.com/users/9040092/vision-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1550588130, "creation_date": 1549962573, "last_edit_date": 1592644375, "question_id": 54646372, "link": "https://stackoverflow.com/questions/54646372/how-to-call-partial", "title": "How to call `&lt;%= partial &#39;...&#39; %&gt;`", "body": "<p>I'm doing statics on html5. I have many HTML lines of the same type:</p>\n<pre><code>&lt;meta name=&quot;keywords&quot; content=&quot;any keywords&quot; /&gt;\n&lt;meta name=&quot;description&quot; content=&quot;any description&quot; /&gt;\n</code></pre>\n<p>The site has many pages, and editing these lines takes a lot of time for each individual file <code>*.erb</code>.</p>\n<p>I wanted to find out how to call the required string from a single <code>* .erb</code> file. If I use <code>&lt;%= partial '...' %&gt;</code> in this case, the entire file will be called. Tell me if any opportunity to call only those lines which are necessary. I do not know how to call any line parts of a file from one file <code>*.erb</code> using middleman3. Perhaps there is a method to call from a file - lines by numbers, or any method.</p>\n<p>===</p>\n<p>since i'm a beginner maybe i don't understand\nis it possible? <a href=\"https://i.stack.imgur.com/88Ury.png\" rel=\"nofollow noreferrer\">look at the picture</a></p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 182, "user_id": 10208243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdd89391887a69e6442e9f25ac5cdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Malte K&#246;lle", "link": "https://stackoverflow.com/users/10208243/malte-k%c3%b6lle"}, "edited": false, "score": 1, "creation_date": 1549959516, "post_id": 54645541, "comment_id": 96082296, "body": "Have you already tried this? (<a href=\"https://stackoverflow.com/questions/22544754/failed-to-build-gem-native-extension-installing-compass\" title=\"failed to build gem native extension installing compass\">stackoverflow.com/questions/22544754/&hellip;</a>) So if you are using Ubuntu try <code>apt-get install ruby-dev</code> and if you are using a mac <code>xcode-select --install</code>. I hope it helps."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1549959732, "post_id": 54645541, "comment_id": 96082413, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2167598/mysql-install-error-failed-to-build-gem-native-extension\">MySQL Install: ERROR: Failed to build gem native extension</a>"}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 11014564, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RMe6UhgADZs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOXMR3EQauiXfpXlgy5hnw-sFQqXQ/mo/photo.jpg?sz=128", "display_name": "Shobha Deepak", "link": "https://stackoverflow.com/users/11014564/shobha-deepak"}, "is_accepted": false, "score": 0, "last_activity_date": 1549991940, "creation_date": 1549991940, "answer_id": 54655448, "question_id": 54645541, "link": "https://stackoverflow.com/questions/54645541/cant-install-mysql2-gem/54655448#54655448", "title": "Can&#39;t install mysql2 gem", "body": "<p>Try adding gem inside Gemfile in your ruby on rails project and run bundle install in command line.</p>\n\n<p>for example:</p>\n\n<pre><code>gem 'mysql2', '~&gt; 0.4.10'\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5088396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c43f9f03c43befbcf97871f04d107614?s=128&d=identicon&r=PG&f=1", "display_name": "Sakuto Hiseya", "link": "https://stackoverflow.com/users/5088396/sakuto-hiseya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1549991940, "creation_date": 1549959255, "last_edit_date": 1549967320, "question_id": 54645541, "link": "https://stackoverflow.com/questions/54645541/cant-install-mysql2-gem", "title": "Can&#39;t install mysql2 gem", "body": "<h2>I try to install mysql2 gem with \"gem install mysql2 -v '0.4.10'\" on MacOS but always found this error.</h2>\n\n<pre><code>    ERROR:  Error installing mysql2:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /Users/sakuto/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10/ext/mysql2\n\n - /Users/sakuto/.rbenv/versions/2.3.3/bin/ruby -r\n   ./siteconf20190212-14889-1xapc5p.rb extconf.rb checking for\n   rb_absint_size()... yes checking for rb_absint_singlebit_p()... yes\n   checking for ruby/thread.h... yes checking for\n   rb_thread_call_without_gvl() in ruby/thread.h... yes checking for\n   rb_thread_blocking_region()... no checking for\n   rb_wait_for_single_fd()... yes checking for rb_hash_dup()... yes\n   checking for rb_intern3()... yes checking for rb_big_cmp()... yes\n   ----- Using mysql_config at /usr/local/bin/mysql_config\n   ----- checking for mysql.h... yes checking for errmsg.h... yes checking for SSL_MODE_DISABLED in mysql.h... yes checking for\n   SSL_MODE_PREFERRED in mysql.h... yes checking for SSL_MODE_REQUIRED\n   in mysql.h... yes checking for SSL_MODE_VERIFY_CA in mysql.h... yes\n   checking for SSL_MODE_VERIFY_IDENTITY in mysql.h... yes checking for\n   MYSQL.net.vio in mysql.h... yes checking for MYSQL.net.pvio in\n   mysql.h... no checking for MYSQL_ENABLE_CLEARTEXT_PLUGIN in\n   mysql.h... yes\n   ----- Don't know how to set rpath on your system, if MySQL libraries are not in path mysql2 may not load\n   -----\n   ----- Setting libpath to /usr/local/Cellar/mysql/8.0.15/lib\n   ----- creating Makefile\n</code></pre>\n\n<p>To see why this extension failed to compile, please check the\n   mkmf.log which can be found here:</p>\n\n<pre><code>/Users/sakuto/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-18/2.3.0-static/mysql2-0.4.10/mkmf.log\n</code></pre>\n\n<p>current directory:</p>\n\n<pre><code>/Users/sakuto/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10/ext/mysql2\nmake \"DESTDIR=\" clean\n</code></pre>\n\n<p>current directory:</p>\n\n<pre><code>/Users/sakuto/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10/ext/mysql2\nmake \"DESTDIR=\" compiling infile.c compiling client.c compiling\nmysql2_ext.c compiling statement.c compiling result.c linking\nshared-object mysql2/mysql2.bundle ld: library not found for -lssl\nclang: error: linker command failed with exit code 1 (use -v to see\ninvocation) make: *** [mysql2.bundle] Error 1\n\n\nmake failed, exit code 2\n</code></pre>\n\n<p>Gem files will remain installed in</p>\n\n<pre><code>/Users/sakuto/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/gems/mysql2-0.4.10\n</code></pre>\n\n<p>for inspection. Results logged to</p>\n\n<pre><code>/Users/sakuto/.rbenv/versions/2.3.3/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-18/2.3.0-static/mysql2-0.4.10/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549961552, "post_id": 54644815, "comment_id": 96083420, "body": "<i>&quot;a method that gives me a value on passing key as argument&quot;</i> \u2013 well, that&#39;s exactly what <a href=\"http://ruby-doc.org/core-2.6.1/Hash.html#method-i-fetch\" rel=\"nofollow noreferrer\"><code>fetch</code></a> does: <i>Returns a value from the hash for the given key</i>. Seems like you want something else. Please clarify your problem."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1549960579, "post_id": 54645211, "comment_id": 96082866, "body": "Or <code>h.dig(:firedevents, 0, :keys, 0, :value, :FieldString)</code>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1549961011, "last_edit_date": 1549961011, "creation_date": 1549957994, "answer_id": 54645211, "question_id": 54644815, "link": "https://stackoverflow.com/questions/54644815/generic-ruby-method-implementation-for-fetching-data-from-a-hash-of-nosql-data/54645211#54645211", "title": "Generic ruby method implementation for fetching data from a hash of Nosql data", "body": "<p>Fetch will be enough to get <code>sourceSystemId</code> (assuming your data is in <code>h</code>):</p>\n\n<pre><code>&gt; h.fetch(:sourceSystemId)\n# =&gt; \"d4ba4799-atil45-4a\"\n</code></pre>\n\n<p>If you're looking for something more generic, take a look at <a href=\"https://ruby-doc.org/core-2.5.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a>. It lets you chain hash access in a neat way:</p>\n\n<pre><code>&gt; h.fetch(:firedevents).first.fetch(:keys).first.dig(:value, :FieldString)\n# =&gt; \"e33almmatter-syslibrary\"\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>As @Stefan suggested, <code>#dig</code> can be used for the whole operation:</p>\n\n<pre><code>&gt; h.dig(:firedevents, 0, :keys, 0, :value, :FieldString)\n# =&gt; \"e33almmatter-syslibrary\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 761, "user_id": 4299353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f90473299f58264f0744371b4fe444?s=128&d=identicon&r=PG&f=1", "display_name": "mmsilviu", "link": "https://stackoverflow.com/users/4299353/mmsilviu"}, "is_accepted": false, "score": 0, "last_activity_date": 1549962629, "creation_date": 1549962629, "answer_id": 54646388, "question_id": 54644815, "link": "https://stackoverflow.com/questions/54644815/generic-ruby-method-implementation-for-fetching-data-from-a-hash-of-nosql-data/54646388#54646388", "title": "Generic ruby method implementation for fetching data from a hash of Nosql data", "body": "<p>You can go recursively through the hash as:</p>\n\n<pre><code>def deep_find(key, object=self, found=nil)\n    if object.respond_to?(:key?) &amp;&amp; object.key?(key)\n      return object[key]\n    elsif object.is_a? Enumerable\n      object.find { |*a| found = deep_find(key, a.last) }\n      return found\n    end\n  end\n</code></pre>\n\n<p>or you can use <a href=\"https://github.com/intridea/hashie#deepfind\" rel=\"nofollow noreferrer\">deep_find</a> from hashie gem </p>\n"}], "owner": {"reputation": 47, "user_id": 7319303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb9c594cf93f33679f672f71eeae102?s=128&d=identicon&r=PG&f=1", "display_name": "nova_rubo", "link": "https://stackoverflow.com/users/7319303/nova-rubo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549962629, "creation_date": 1549956442, "last_edit_date": 1549961053, "question_id": 54644815, "link": "https://stackoverflow.com/questions/54644815/generic-ruby-method-implementation-for-fetching-data-from-a-hash-of-nosql-data", "title": "Generic ruby method implementation for fetching data from a hash of Nosql data", "body": "<p>How do get a specific value from a hash of hash using a custom ruby implementation</p>\n\n<p>I have a nosql data that comes out in this particular format:</p>\n\n<pre><code>{:bookname=&gt;\"The Fight for Guadalcanal\", \n:sourceSystemId=&gt;\"d4ba4799-atil45-4a\", \n:checkouttimestamp=&gt;\"2018-12-12T04:38:34.476796700Z\",:firedevents=&gt;[{:operation=&gt;\"GET\", :entity=&gt;\"warbooks\", :keys=&gt;[{:name=&gt;\"book_guid\", :value=&gt;{:FieldString=&gt;\"e33almmatter-syslibrary\"}}], \n :attributes=&gt;[{:libLocation=&gt;\"a44364\", :value=&gt;{:FieldInteger=&gt;3994}}, {:name=&gt;\"big_response\", :value=&gt;{:FieldString=&gt;\"The Battle for Enderson Field, also\"}}],\n :customizable=&gt;true}]}\n</code></pre>\n\n<p>Is there in method in ruby providing the key as a argument parameter?</p>\n\n<p>I know there is fetch method in ruby that gets me the value:</p>\n\n<pre><code>test.fetch(:firedevents,()).fetch(:operation))\n</code></pre>\n\n<p>this does get me the value GET</p>\n\n<p>but the problem I have the number of arrays or hashes in the data-set that may vary upon each operation so I am in lookout for a method that gives me a value on passing key as argument.</p>\n\n<p>e.g.: <code>ruby_mthod(sourceSystemId.to_sym)</code> should get me <code>d4ba4799-atil45-4a</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1549961882, "post_id": 54644370, "comment_id": 96083611, "body": "Install the <a href=\"https://github.com/marcandre/backports\" rel=\"nofollow noreferrer\">backports</a> gem and <code>require backports&#47;1.9.1&#47;string&#47;codepoints</code>. It uses <code>unpack(&#39;U*&#39;)</code> under the hood, you can find the source code <a href=\"https://github.com/marcandre/backports/blob/master/lib/backports/1.9.1/string/codepoints.rb\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1549960293, "post_id": 54645571, "comment_id": 96082721, "body": "It is not my choice, I am trying pass the CI tests for a pull request on a gem, and passing  ruby 1.8.7 is one of the tests."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1549960527, "post_id": 54645571, "comment_id": 96082830, "body": "I can&#39;t install 1.8.7 to test it, but you can try <code>string.bytes.map{|b| ?b}</code>"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1549960569, "post_id": 54645571, "comment_id": 96082857, "body": "Btw I&#39;d consider contacting the gem maintainer and convince them to drop 1.8.7 support"}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1549964098, "post_id": 54645571, "comment_id": 96085002, "body": "They are planning to drop it in the next major release, I doubt very much they will do so before then, I expect they have heard that argument many times before.  When I put <code>str.bytes.map { |b| ?b }</code> I get a rubycop error to the effect that <code>Do not use the character literal - using string literal instead.</code>. I need to pass all rubocop tests as well, so is there a way of expressing this that will not trigger a rubocop error?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1549964836, "post_id": 54645571, "comment_id": 96085464, "body": "<code># rubocop:disable RuleByName</code> <a href=\"https://stackoverflow.com/questions/26342570/rubocop-linelength-how-to-ignore-lines-with-comments\" title=\"rubocop linelength how to ignore lines with comments\">stackoverflow.com/questions/26342570/&hellip;</a>"}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1549965048, "post_id": 54645571, "comment_id": 96085588, "body": "Thank you, I try this and see their response is.  When finished I may come back and tidy this up."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1549977601, "post_id": 54645571, "comment_id": 96093256, "body": "@mrzasa: <code>?b</code> is equal to <code>&#39;b&#39;</code> on Ruby 1.9+ and equal to <code>97</code> on Ruby pre-1.9. How is replacing the entire string with 97s going to solve the problem? E.g. <code>&#39;Hello&#39;.bytes.map {|b| ?b }</code> is <code>[&#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;]</code> on Ruby 1.9+ and <code>[97, 97, 97, 97, 97]</code> on Ruby 1.8."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1549959400, "creation_date": 1549959400, "answer_id": 54645571, "question_id": 54644370, "link": "https://stackoverflow.com/questions/54644370/how-to-implement-string-codepoints-for-pre-ruby-1-9-1/54645571#54645571", "title": "How to implement string.codepoints for pre ruby 1.9.1", "body": "<p><code>ord</code> was introduced in Ruby 1.9.1, see <a href=\"https://apidock.com/ruby/v1_9_3_392/String/ord\" rel=\"nofollow noreferrer\">APIDock</a>.</p>\n\n<p>For ASCII strings you  can use <a href=\"https://ruby-doc.org/core-1.8.7/String.html#method-i-bytes\" rel=\"nofollow noreferrer\"><code>#bytes</code></a>, for Unicode <a href=\"https://stackoverflow.com/questions/40849265/bytes-vs-codepoints-in-ruby\">it won't behave in the same way as <code>#codepoints</code></a>.</p>\n\n<p>In Ruby 1.8.x you can use <code>?</code> to get char numeric value, I don't know what to use for 1.9.0. </p>\n\n<p>Btw rubies older than 2.3 are not supported any more, consider upgrading.</p>\n"}], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 54645571, "answer_count": 1, "score": 1, "last_activity_date": 1549965139, "creation_date": 1549954413, "last_edit_date": 1549965139, "question_id": 54644370, "link": "https://stackoverflow.com/questions/54644370/how-to-implement-string-codepoints-for-pre-ruby-1-9-1", "title": "How to implement string.codepoints for pre ruby 1.9.1", "body": "<p>For backward compatibility reasons I want to implement the <code>String#codepoints</code> ruby method (introduced in <code>1.9.1</code>).</p>\n\n<p>I am thinking</p>\n\n<pre><code>def codepoints(str)\n    str.split('').map(&amp;:ord)\nend\n</code></pre>\n\n<p>but I am concerned that <code>#ord</code> will not work properly with earlier versions of ruby.</p>\n"}, {"tags": ["ruby", "mongodb", "ruby-on-rails-5", "mongoid6"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6870052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc361024322d70c727dd7fc61861c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "krishna m", "link": "https://stackoverflow.com/users/6870052/krishna-m"}, "edited": false, "score": 0, "creation_date": 1549954348, "post_id": 54644275, "comment_id": 96079861, "body": "Hi Uday, thanks for your solution, just now I went through it, looks easy and simple. My question is, will this work for mongoid? I am not using Active Record, I am using mongoid."}, {"owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "reply_to_user": {"reputation": 73, "user_id": 6870052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc361024322d70c727dd7fc61861c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "krishna m", "link": "https://stackoverflow.com/users/6870052/krishna-m"}, "edited": false, "score": 0, "creation_date": 1549954385, "post_id": 54644275, "comment_id": 96079874, "body": "yeah! there is documentation for <code>mongoid</code> too check it out."}, {"owner": {"reputation": 73, "user_id": 6870052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc361024322d70c727dd7fc61861c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "krishna m", "link": "https://stackoverflow.com/users/6870052/krishna-m"}, "edited": false, "score": 0, "creation_date": 1549956232, "post_id": 54644275, "comment_id": 96080684, "body": "Thanks a lot Uday, Rolify suits perfectly for my requirement."}], "tags": [], "owner": {"reputation": 1173, "user_id": 9418609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o0aMF.jpg?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/9418609/uday"}, "is_accepted": true, "score": 1, "last_activity_date": 1549953994, "creation_date": 1549953994, "answer_id": 54644275, "question_id": 54644053, "link": "https://stackoverflow.com/questions/54644053/manage-user-roles-based-on-projects-in-rails-and-mongoid/54644275#54644275", "title": "Manage User Roles based on Projects in rails and mongoid", "body": "<p>You can use <a href=\"https://github.com/RolifyCommunity/rolify\" rel=\"nofollow noreferrer\">rolify</a> and add multiple roles to user and in <code>Project</code> model filter if a user has a specified role and manage it.</p>\n"}], "owner": {"reputation": 73, "user_id": 6870052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc361024322d70c727dd7fc61861c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "krishna m", "link": "https://stackoverflow.com/users/6870052/krishna-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 54644275, "answer_count": 1, "score": 0, "last_activity_date": 1549972828, "creation_date": 1549953002, "last_edit_date": 1549972828, "question_id": 54644053, "link": "https://stackoverflow.com/questions/54644053/manage-user-roles-based-on-projects-in-rails-and-mongoid", "title": "Manage User Roles based on Projects in rails and mongoid", "body": "<p>I am using rails and MongoId.\nI have 3 models - User, Project and Role.\nI want to manage user roles based on projects.\nFor example: user1 has assigned to 2 projects, for project1 user1 may be admin, for project2 user1 may be a Quality Analyst.</p>\n\n<p>How I can achieve this when using mongoid in rails.</p>\n\n<p>Thanks in Advance.</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1549948374, "post_id": 54643131, "comment_id": 96077837, "body": "Not really clear on what you are trying to do. Can you give an example of what you want to happen? Is it just that you want to change some of the key vals in the file?"}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 5877576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ea1ba7d43a09b73ae0cfdb538875151a?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Kansal", "link": "https://stackoverflow.com/users/5877576/nishant-kansal"}, "edited": false, "score": 0, "creation_date": 1549951146, "post_id": 54643553, "comment_id": 96078674, "body": "This is exactly, what I was looking for. Thank you."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 2, "last_activity_date": 1549950379, "creation_date": 1549950379, "answer_id": 54643553, "question_id": 54643131, "link": "https://stackoverflow.com/questions/54643131/replacing-variable-value-in-ruby-while-setting-the-value-using-set-command/54643553#54643553", "title": "Replacing variable value in ruby while setting the value using &quot;set&quot; command", "body": "<p>You have to read the information out of the file.\nMost Watir users leverage yaml files for this.</p>\n\n<p><code>config/properties.yml</code>:</p>\n\n<pre><code>user: abcd\npwd: xyz\nsystem: test\n</code></pre>\n\n<p>Then read the yaml file &amp; parse your data:</p>\n\n<pre><code>properties = YAML.safe_load(IO.read('config/properties.yml'))\n\ntext_field = browser.text_field(id: 'identifierId')\ntext_field.set properties['user']\n</code></pre>\n\n<p>Alternately you can take a look at <a href=\"https://github.com/cheezy/fig_newton\" rel=\"nofollow noreferrer\">Cheezy's Fig Newton gem</a>, which is designed to work with his Page Object gem</p>\n"}], "owner": {"reputation": 189, "user_id": 5877576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ea1ba7d43a09b73ae0cfdb538875151a?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Kansal", "link": "https://stackoverflow.com/users/5877576/nishant-kansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1549950379, "creation_date": 1549947797, "question_id": 54643131, "link": "https://stackoverflow.com/questions/54643131/replacing-variable-value-in-ruby-while-setting-the-value-using-set-command", "title": "Replacing variable value in ruby while setting the value using &quot;set&quot; command", "body": "<p>I have a .properties files as below:</p>\n\n<pre><code>user:abcd\npwd:xyz\nsystem:test\n</code></pre>\n\n<p>Next, I have a ruby script with Watir for browser automation. In this script, I have statements like </p>\n\n<pre><code>browser.text_field(:id =&gt; 'identifierId').set \"#{user}:variable to be replaced by its value from .properties file\".\n</code></pre>\n\n<p>Similarly, other values need to be replaced for \"pwd\" and \"system\".</p>\n\n<p>I tried the solution per below posts:\n<a href=\"https://stackoverflow.com/questions/14974663/replace-properties-in-one-file-from-those-in-another-in-ruby\">Replace properties in one file from those in another in Ruby</a></p>\n\n<p>However, \"set\" command is setting whatever has been paased as arguments to it instead of replacing the variable with its value.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 662, "user_id": 8729420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/348abe30a68aa71e7bc217db7ebd430c?s=128&d=identicon&r=PG&f=1", "display_name": "faris", "link": "https://stackoverflow.com/users/8729420/faris"}, "edited": false, "score": 0, "creation_date": 1549938696, "post_id": 54641975, "comment_id": 96075569, "body": "Just a guess but you could search up what the escape character is for a double quote. Also, you seem to be missing a double quote somewhere, you only have 3 right now which is incomplete."}, {"owner": {"reputation": 1733, "user_id": 1544669, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b8c7b9787f2dd6ade6fa018210f98673?s=128&d=identicon&r=PG", "display_name": "Chris O&#39;Kelly", "link": "https://stackoverflow.com/users/1544669/chris-okelly"}, "edited": false, "score": 0, "creation_date": 1549940873, "post_id": 54641975, "comment_id": 96076058, "body": "I just wanted to point out that the CSS selector <code>.group .circular-progress::before</code> does not look like it is actually the selector OP wants. in the code provided, there IS no <code>.group</code> - no element has the class name group. There is an element with the group property/attribute though - <code>[group] .circular-progress::before</code> looks like what you may actually be looking for. Is it possible that you are only trying to add this style inline at this point because you tried the first selector as part of your external CSS and it failed to apply the style you wanted?"}, {"owner": {"reputation": 625590, "user_id": 106224, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a2d818d801ce38a33807f68fdd92043a?s=128&d=identicon&r=PG", "display_name": "BoltClock", "link": "https://stackoverflow.com/users/106224/boltclock"}, "reply_to_user": {"reputation": 1733, "user_id": 1544669, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b8c7b9787f2dd6ade6fa018210f98673?s=128&d=identicon&r=PG", "display_name": "Chris O&#39;Kelly", "link": "https://stackoverflow.com/users/1544669/chris-okelly"}, "edited": false, "score": 0, "creation_date": 1549946096, "post_id": 54641975, "comment_id": 96077187, "body": "@Chris O&#39;Kelly: Looks like that inconsistency has since been corrected. The problem does indeed lie with the fact that they&#39;re trying to specify a pseudo-element style in an inline style attribute - that&#39;s not going to work."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10987968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30191b6322676603c322f4166d1728c2?s=128&d=identicon&r=PG&f=1", "display_name": "astronat", "link": "https://stackoverflow.com/users/10987968/astronat"}, "edited": false, "score": 0, "creation_date": 1549995482, "post_id": 54642049, "comment_id": 96104088, "body": "It almost works! I am able to dynamically change the content style. However, it spawned a Ruby-related issue with a for loop that is overriding the content each time. I am updating the post now."}, {"owner": {"reputation": 3050, "user_id": 3516008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c342a732db5f71bf9a236ee90815195?s=128&d=identicon&r=PG&f=1", "display_name": "caiovisk", "link": "https://stackoverflow.com/users/3516008/caiovisk"}, "reply_to_user": {"reputation": 1, "user_id": 10987968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30191b6322676603c322f4166d1728c2?s=128&d=identicon&r=PG&f=1", "display_name": "astronat", "link": "https://stackoverflow.com/users/10987968/astronat"}, "edited": false, "score": 0, "creation_date": 1550011198, "post_id": 54642049, "comment_id": 96110989, "body": "Alright the 40 issue is happening because the <code>CSS</code> classes have the same name. Please see my updated answer."}], "tags": [], "owner": {"reputation": 3050, "user_id": 3516008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c342a732db5f71bf9a236ee90815195?s=128&d=identicon&r=PG&f=1", "display_name": "caiovisk", "link": "https://stackoverflow.com/users/3516008/caiovisk"}, "is_accepted": false, "score": 3, "last_activity_date": 1550012108, "last_edit_date": 1550012108, "creation_date": 1549939055, "answer_id": 54642049, "question_id": 54641975, "link": "https://stackoverflow.com/questions/54641975/how-do-i-insert-quotes-inside-inline-css/54642049#54642049", "title": "How do I insert quotes inside inline CSS?", "body": "<p>You can't specify inline styles for pseudo-elements. The <code>content</code> is for <code>:before</code> and <code>:after</code> pseudo-elements.</p>\n\n<blockquote>\n  <p>The content property is used with the ::before and ::after\n  pseudo-elements, to insert generated content.</p>\n</blockquote>\n\n<p><a href=\"https://www.w3schools.com/cssref/pr_gen_content.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/cssref/pr_gen_content.asp</a></p>\n\n<p>So you may end up doing something like this:</p>\n\n<pre><code>&lt;style&gt;.group .circular-progress::before {content: \"10%\";}&lt;/style&gt;\n&lt;div class=\"group\"&gt;\n    &lt;div class=\"circular-progress\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>Your last value inside class <code>.group .circular-progress::before</code> selector is overriding the previous classes parameters because it have the same class selector name. To get your loop working, set an loop index or simply use your <code>g.value</code> on the loop and print a 'unique' class selector to you element.</p>\n\n<p>Style will look like this:</p>\n\n<pre><code>&lt;style&gt;.group .circular-progress.prog-ind-10::before {content: \"10%\";}&lt;/style&gt;\n</code></pre>\n\n<p>And the element:</p>\n\n<pre><code>&lt;div class=\"circular-progress prog-ind-10\" ...&gt;&lt;/div&gt;\n</code></pre>\n\n<p>So every style will have a different class selector like <code>prog-ind-10</code>, <code>prog-ind-20</code> and so on, it will avoid the overriding issue.</p>\n\n<p>Your loop will be similar as below:</p>\n\n<pre><code>&lt;% if @goals.empty? %&gt;\n    &lt;%= \"You don't have any goals entered yet.\" %&gt;\n&lt;% else %&gt;\n    &lt;% @goals.each do |g| %&gt;\n        &lt;% puts g.value %&gt;\n        &lt;style&gt;.group .circular-progress.prog-ind-&lt;%= g.value %&gt;::before {content: \"&lt;%= g.value %&gt;%\";}&lt;/style&gt;\n        &lt;div class=\"group\"&gt;\n          &lt;div class=\"circular-text\"&gt;&lt;%= g.name %&gt;&lt;/div&gt;\n          &lt;div \n             class=\"circular-progress prog-ind-&lt;%= g.value %&gt;\" \n             style=\"background: linear-gradient(90deg, #e0e0e0 50%, transparent 50%, transparent), linear-gradient(270deg, #ff70a6 50%, #e0e0e0 50%, #e0e0e0);\"&gt;\n           &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10987968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30191b6322676603c322f4166d1728c2?s=128&d=identicon&r=PG&f=1", "display_name": "astronat", "link": "https://stackoverflow.com/users/10987968/astronat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "closed_date": 1549946119, "answer_count": 1, "score": 0, "last_activity_date": 1550012108, "creation_date": 1549938428, "last_edit_date": 1549995674, "question_id": 54641975, "link": "https://stackoverflow.com/questions/54641975/how-do-i-insert-quotes-inside-inline-css", "closed_reason": "Duplicate", "title": "How do I insert quotes inside inline CSS?", "body": "<p>How do I insert the CSS below into HTML?</p>\n\n<p>Here is the CSS that I would like to convert to HTML:</p>\n\n<pre><code>.group .circular-progress::before {\n  ...\n  content: \"10%\";\n  ...\n}\n</code></pre>\n\n<p>Here's what I've tried to do:</p>\n\n<pre><code>&lt;div class=\"group\"&gt;\n    &lt;div class=\"circular-progress\" style=\"content: '10%'\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>What's throwing me off is the ::before element, or the fact that the single quotes aren't working.</p>\n\n<p>UPDATE:</p>\n\n<p>It now works with the below code, but am getting a new Ruby-related issue.</p>\n\n<pre><code>&lt;% if @goals.empty? %&gt;\n    &lt;%= \"You don't have any goals entered yet.\" %&gt;\n&lt;% else %&gt;\n    &lt;% @goals.each do |g| %&gt;\n        &lt;% puts g.value %&gt;\n        &lt;style&gt;.group .circular-progress::before {content: \"&lt;%= g.value %&gt;%\";}&lt;/style&gt;\n        &lt;div class=\"group\"&gt;\n          &lt;div class=\"circular-text\"&gt;&lt;%= g.name %&gt;&lt;/div&gt;\n          &lt;div class=\"circular-progress\" style=\"background: linear-gradient(90deg, #e0e0e0 50%, transparent 50%, transparent), linear-gradient(270deg, #ff70a6 50%, #e0e0e0 50%, #e0e0e0);\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>On the line where I am putting the g.value, it is storing the correct input. For example - if the values are [50, 10, 100, 40], it is printing them correctly. However, each time I add a new element to the @goals array, it overrides the style content attribute, so it is showing 40 on the webpage all four times. If I add 30 for example, it shows 30 all five times, etc.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 431, "user_id": 2476452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xkvMH.jpg?s=128&g=1", "display_name": "Mike K", "link": "https://stackoverflow.com/users/2476452/mike-k"}, "edited": false, "score": 1, "creation_date": 1549938913, "post_id": 54641945, "comment_id": 96075630, "body": "Said another way, it&#39;s not your ruby program that is printing out <code>0..4</code>, it is the environment that you&#39;re running your code in (<code>irb</code>?) that prints out the result of the whole program after the program has finished running."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549967325, "post_id": 54641945, "comment_id": 96087120, "body": "How do you run your code?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549966911, "post_id": 54642025, "comment_id": 96086829, "body": "Doesn&#39;t this produce <code>nil</code> instead of <code>0..4</code> at the end? ;-)"}, {"owner": {"reputation": 767, "user_id": 1783902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3d4028b2b07d6789767174eae1d104?s=128&d=identicon&r=PG", "display_name": "thiaguerd", "link": "https://stackoverflow.com/users/1783902/thiaguerd"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1550637217, "post_id": 54642025, "comment_id": 96336840, "body": "<code>0..4</code> may make it confusing, it may find that it belongs to the matrix ... whith return <code>nil</code> it will make sure it does not belong to the matrix"}], "tags": [], "owner": {"reputation": 767, "user_id": 1783902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3d4028b2b07d6789767174eae1d104?s=128&d=identicon&r=PG", "display_name": "thiaguerd", "link": "https://stackoverflow.com/users/1783902/thiaguerd"}, "is_accepted": true, "score": 3, "last_activity_date": 1549938820, "creation_date": 1549938820, "answer_id": 54642025, "question_id": 54641945, "link": "https://stackoverflow.com/questions/54641945/ruby-for-loop-prints-extra-things/54642025#54642025", "title": "Ruby for loop prints extra things", "body": "<pre><code>0..4\n</code></pre>\n\n<p>is a return of <strong>for</strong>\nIf you call</p>\n\n<pre><code>for i in 0..100\nend\n</code></pre>\n\n<p>the returns will be</p>\n\n<pre><code>0..100\n</code></pre>\n\n<p>to escape this:</p>\n\n<pre><code>for indx in 0..4\n    print \"#{indx}\"\n    for cell in cell_arr[indx]\n        print \",(#{cell[0]},#{cell[1]})\"\n    end\n    if indx &lt;= 4\n      puts \n    end\nend; nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1549953979, "post_id": 54644164, "comment_id": 96079717, "body": "OP asked to print required output &amp; when he print using iterators, OP gets return value which is not required. But it does return something, minimal we can return is nil. Check my answer also."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1549953509, "creation_date": 1549953509, "answer_id": 54644164, "question_id": 54641945, "link": "https://stackoverflow.com/questions/54641945/ruby-for-loop-prints-extra-things/54644164#54644164", "title": "Ruby for loop prints extra things", "body": "<p>Option nesting <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_object</code></a> inside <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-each_with_index\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_index</code></a>:</p>\n\n<pre><code>array.map.with_index { |ary, i| (ary.each_with_object ([]) { |e, tmp| tmp &lt;&lt; \"(#{e.first}, #{e.last})\" }).unshift(i).join(',') }\n</code></pre>\n\n<p>Which puts:</p>\n\n<pre><code># 0,(1, 3),(3, 0)\n# 1,(0, 0),(0, 3),(3, 2),(3, 3)\n# 2,(0, 1),(0, 2),(1, 0),(2, 0),(2, 3),(3, 1)\n# 3,(1, 2),(2, 2)\n# 4,(1, 1),(2, 1)\n</code></pre>\n\n<p><hr>\nThe nested loop operates on each sub-array in this way:</p>\n\n<pre><code>sub_arry = [[0, 1], [0, 2], [1, 0], [2, 0], [2, 3], [3, 1]]\nres = sub_arry.each_with_object ([]) { |e, tmp| tmp &lt;&lt; \"(#{e.first}, #{e.last})\" }\nres #=&gt; [\"(0, 1)\", \"(0, 2)\", \"(1, 0)\", \"(2, 0)\", \"(2, 3)\", \"(3, 1)\"]\n</code></pre>\n\n<p>The idea is to place the index of the element inside the array, then use <a href=\"http://ruby-doc.org/core-2.6.1/Array.html#method-i-join\" rel=\"nofollow noreferrer\"><code>Array#join</code></a> to build the row to be printed:</p>\n\n<pre><code>res.unshift(2).join(',')\n#=&gt; \"2,(0, 1),(0, 2),(1, 0),(2, 0),(2, 3),(3, 1)\"\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6212742, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84b4c5d955e0f8ac4ab16d091b26be76?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiwei Luo", "link": "https://stackoverflow.com/users/6212742/kaiwei-luo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 54642025, "answer_count": 2, "score": -2, "last_activity_date": 1549953509, "creation_date": 1549938156, "last_edit_date": 1549949075, "question_id": 54641945, "link": "https://stackoverflow.com/questions/54641945/ruby-for-loop-prints-extra-things", "title": "Ruby for loop prints extra things", "body": "<p>I have an of arrays of arrays, and it looks like this:</p>\n\n<pre><code>[\n  [[1, 3], [3, 0]],\n  [[0, 0], [0, 3], [3, 2], [3, 3]],\n  [[0, 1], [0, 2], [1, 0], [2, 0], [2, 3], [3, 1]],\n  [[1, 2], [2, 2]],\n  [[1, 1], [2, 1]]\n]\n</code></pre>\n\n<p>I want to print each element. I expect this output:</p>\n\n<pre><code>0,(1,3),(3,0)\n1,(0,0),(0,3),(3,2),(3,3)\n2,(0,1),(0,2),(1,0),(2,0),(2,3),(3,1)\n3,(1,2),(2,2)\n4,(1,1),(2,1)\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>for indx in 0..4\n    print \"#{indx}\"\n    for cell in cell_arr[indx]\n        print \",(#{cell[0]},#{cell[1]})\"\n    end\n    if indx &lt;= 4\n      puts \n    end\nend\n</code></pre>\n\n<p>The output I got:</p>\n\n<pre><code>0,(1,3),(3,0)\n1,(0,0),(0,3),(3,2),(3,3)\n2,(0,1),(0,2),(1,0),(2,0),(2,3),(3,1)\n3,(1,2),(2,2)\n4,(1,1),(2,1)\n0..4\n</code></pre>\n\n<p>During the end of the output, my code generates something extra.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "edited": false, "score": 0, "creation_date": 1550100134, "post_id": 54641793, "comment_id": 96150793, "body": "I can&#39;t believe I didn&#39;t catch that. Thanks!"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 4, "last_activity_date": 1549936746, "creation_date": 1549936746, "answer_id": 54641793, "question_id": 54641636, "link": "https://stackoverflow.com/questions/54641636/why-is-my-instance-variable-showing-up-on-the-view-when-i-never-called-it-explic/54641793#54641793", "title": "Why is my instance variable showing up on the view when I never called it explicitly?", "body": "<pre><code>&lt;%= @coupons.each do |coupon| %&gt;\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>&lt;% @coupons.each do |coupon| %&gt;\n</code></pre>\n\n<p>The <code>&lt;%=</code> causes <code>@coupons</code> to be output on the view.</p>\n"}, {"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1549941820, "post_id": 54641795, "comment_id": 96076257, "body": "Ther you go, using all them fancy words! (Nicely done.)"}, {"owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "edited": false, "score": 0, "creation_date": 1550100139, "post_id": 54641795, "comment_id": 96150796, "body": "I can&#39;t believe I didn&#39;t catch that. Thanks!"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1549936777, "creation_date": 1549936777, "answer_id": 54641795, "question_id": 54641636, "link": "https://stackoverflow.com/questions/54641636/why-is-my-instance-variable-showing-up-on-the-view-when-i-never-called-it-explic/54641795#54641795", "title": "Why is my instance variable showing up on the view when I never called it explicitly?", "body": "<p>The problem is that you are using <code>&lt;%= %&gt;</code> and not <code>&lt;% %&gt;</code>. </p>\n\n<p><code>&lt;%= %&gt;</code> outputs the value of an expression. The return value of <code>#each</code> is an array.</p>\n\n<pre><code>&lt;% @coupons.each do |coupon| %&gt;\n  &lt;h2&gt;&lt;%= link_to coupon.store, coupon_path(coupon) %&gt;&lt;/h2&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This can be somewhat confusing but remember that you are using <code>#each</code> for the side effects - and not the return value. For each iteration <code>&lt;h2&gt;&lt;%= link_to coupon.store, coupon_path(coupon) %&gt;&lt;/h2&gt;</code> is added to the string buffer (the rendered view).</p>\n"}], "owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1565540943, "accepted_answer_id": 54641793, "answer_count": 2, "score": 0, "last_activity_date": 1549936777, "creation_date": 1549935393, "question_id": 54641636, "link": "https://stackoverflow.com/questions/54641636/why-is-my-instance-variable-showing-up-on-the-view-when-i-never-called-it-explic", "closed_reason": "Duplicate", "title": "Why is my instance variable showing up on the view when I never called it explicitly?", "body": "<p>I'm coding on rails and I have created an application from the <code>rails g model</code> and <code>rails g controller</code> I have successfully created the index, show, create and new actions and after running my server and checking my finished project I have this problem where my instance variable of <code>@coupons</code> which contains an array of the created coupons, is showing up in the views index page. I didn't call it explicitly or anything it just showed up. Below is my code for my <code>index.html.erb</code> and <code>CouponController</code>. </p>\n\n<p>views/index.html.erb</p>\n\n<pre><code>&lt;h1&gt; List of Stores with Coupons&lt;/h1&gt;\n\n&lt;div&gt;\n&lt;%= @coupons.each do |coupon| %&gt;\n  &lt;h2&gt;&lt;%= link_to coupon.store, coupon_path(coupon) %&gt;&lt;/h2&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;%= form_tag new_coupon_path, :method =&gt; :get do %&gt;\n  &lt;%= submit_tag \"Create New Coupon\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>CouponController</p>\n\n<pre><code>class CouponsController &lt; ApplicationController\n  def index\n    @coupons = Coupon.all\n  end\n\n  def new\n  end\n\n  def create\n    @coupon = Coupon.create(coupon_code: params[:coupon][:coupon_code], store: params[:coupon][:store])\n\n    redirect_to coupon_path(@coupon)\n  end\n\n  def show\n    @coupon = Coupon.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>Note that I also deleted the CSS that came when I created the controller from <code>rails g controller</code> <a href=\"https://i.stack.imgur.com/PtIho.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PtIho.png\" alt=\"Image of said issue\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "rvm"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1549932901, "post_id": 54641227, "comment_id": 96074413, "body": "Is 2.3.3 supported on macOS 10.14? That may not be the case as I know major changes in OpenSSL have broken a lot of older Ruby versions. You may want to try <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\"><code>rbenv</code></a> which can often download pre-built binary versions that come with the necessary dependencies."}, {"owner": {"reputation": 83, "user_id": 9808961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26862ce6525310bdf85b2e7b9c87af0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Day", "link": "https://stackoverflow.com/users/9808961/j-day"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1549932970, "post_id": 54641227, "comment_id": 96074428, "body": "I am not sure sorry, is there a way to check or should I just try a later version, like 2.6.1?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1549933069, "post_id": 54641227, "comment_id": 96074446, "body": "Unless you&#39;ve got something preventing you from upgrading it&#39;s usually worth going with the latest version. 2.6 is significantly faster than 2.3 in a number of key areas, so you may appreciate the difference. I&#39;ve seen very few upgrade problems, but as an example if you use the old <code>mysql</code> driver or unmaintained gems with compiled extensions you may have problems. Otherwise it&#39;s usually quite seamless."}, {"owner": {"reputation": 83, "user_id": 9808961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26862ce6525310bdf85b2e7b9c87af0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Day", "link": "https://stackoverflow.com/users/9808961/j-day"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1549933121, "post_id": 54641227, "comment_id": 96074456, "body": "Ok, will try it and get back to you. Thank you very much!"}], "owner": {"reputation": 83, "user_id": 9808961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26862ce6525310bdf85b2e7b9c87af0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Day", "link": "https://stackoverflow.com/users/9808961/j-day"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549932186, "creation_date": 1549932186, "question_id": 54641227, "link": "https://stackoverflow.com/questions/54641227/unable-to-install-ruby-with-rvm-due-to-errors-on-mac-os-mojave", "title": "Unable to install ruby with RVM due to errors on Mac OS Mojave", "body": "<p>I am new to ruby and am trying to reinstall ruby versions on my machine using RVM.</p>\n\n<p>So far each installation fails. The terminal output is:</p>\n\n<pre><code>Requirements installation successful.\nInstalling Ruby from source to: /Users/jonathonday/.rvm/rubies/ruby-2.3.3, this may take a while depending on your cpu(s)...\nruby-2.3.3 - #downloading ruby-2.3.3, this may take a while depending on your connection...\nruby-2.3.3 - #extracting ruby-2.3.3 to /Users/jonathonday/.rvm/src/ruby-2.3.3..|\nruby-2.3.3 - #applying patch /Users/jonathonday/.rvm/patches/ruby/ruby_2_3_gcc7.patch.\nruby-2.3.3 - #applying patch /Users/jonathonday/.rvm/patches/ruby/2.3.3/random_c_using_NR_prefix.patch.\nruby-2.3.3 - #configuring......................................................|\nruby-2.3.3 - #post-configuration.\nruby-2.3.3 - #compiling........................................................-\nError running '__rvm_make -j4',\nplease read /Users/jonathonday/.rvm/log/1549931271_ruby-2.3.3/make.log\n\nThere has been an error while running make. Halting the installation.\n</code></pre>\n\n<p>the relevant parts of the log seem to be as follows:</p>\n\n<pre><code>./ossl_pkey.h:44:23: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                      ^\n./ossl_pkey.h:45:5: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:60: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n\n./ossl_pkey.h:45:5: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:103: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                                                                      ^\nIn file included from ossl_pkey_rsa.c:12:\nIn file included from ./ossl.h:236:\n./ossl_pkey.h:45:5: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n#if HAVE_BN_GENCB\n    ^\n./ossl_pkey.h:44:23: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                      ^\n./ossl_pkey.h:45:5: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:60: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                           ^\n./ossl_pkey.h:45:5: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:103: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                                                                      ^\nossl_pkey_rsa.c:80:42: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n#if defined(HAVE_RSA_GENERATE_KEY_EX) &amp;&amp; HAVE_BN_GENCB\n                                         ^\n./ossl_pkey.h:44:23: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                      ^\nossl_pkey_rsa.c:80:42: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:60: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                           ^\nossl_pkey_rsa.c:80:42: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:103: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                                                                      ^\nossl_pkey_rsa.c:101:42: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n#if defined(HAVE_RSA_GENERATE_KEY_EX) &amp;&amp; HAVE_BN_GENCB\n                                         ^\n./ossl_pkey.h:44:23: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                      ^\nossl_pkey_rsa.c:101:42: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:60: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                           ^\nossl_pkey_rsa.c:101:42: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\n./ossl_pkey.h:44:103: note: expanded from macro 'HAVE_BN_GENCB'\n#define HAVE_BN_GENCB defined(HAVE_RSA_GENERATE_KEY_EX) || defined(HAVE_DH_GENERATE_PARAMETERS_EX) || defined(HAVE_DSA_GENERATE_PARAMETERS_EX)\n                                                                                                      ^\n3 warnings generated.\n3 warnings generated.\ncompiling ossl_pkcs12.c\ncompiling ossl_pkey_dsa.c\n9 warnings generated.\ncompiling ossl_digest.c\nIn file included from ossl_pkcs12.c:5:\nIn file included from ./ossl.h:236:\n./ossl_pkey.h:45:5: In file included from ossl_pkey_dsa.c:12:\nIn file included from ./ossl.h:236:\n./ossl_pkey.h:45:5: warning: macro expansion producing 'defined' has undefined behavior [-Wexpansion-to-defined]\nwarning#if HAVE_BN_GENCB\n</code></pre>\n\n<p>I have tried to update rvm and even remove the rubies and openssl and reinstall them. But this error keeps on happening. Could someone please advise me on what to do?</p>\n"}, {"tags": ["ruby", "sinatra", "embed", "erb"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1550460717, "post_id": 54640267, "comment_id": 96262506, "body": "It&#39;s a bit unclear what you&#39;re asking but it&#39;s certainly possible. Take a look at <a href=\"https://github.com/yb66/Sinatra-Partial\" rel=\"nofollow noreferrer\">sinatra partial</a>."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1550785393, "post_id": 54640267, "comment_id": 96409578, "body": "@iain Yes I will restructure the question."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1550817550, "post_id": 54640267, "comment_id": 96417710, "body": "Have you seen the <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/erb/rdoc/ERB.html\" rel=\"nofollow noreferrer\">docs for ERB</a>? Using that you should be able to render the template from anywhere. Also have a read of the Views/Templates section of the <a href=\"http://sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">Sinatra README</a>. If it&#39;s still not clear to you after that then give me a shout and I&#39;ll write something longer below."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1550875663, "post_id": 54640267, "comment_id": 96447220, "body": "@iain Yes I have.  Been using <code>erb</code> for quite some time. I got a <code>File.read(filepath)</code> to output, but it&#39;s not formatted properly (privacy.txt).  I&#39;ve been over the Sinatra README quite often and it&#39;s still confusing for the most part."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1550984703, "post_id": 54640267, "comment_id": 96470188, "body": "I&#39;ve put the answer below, if you&#39;ve any questions add some comments to it and I&#39;ll try to expand on it."}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551043042, "post_id": 54848915, "comment_id": 96484779, "body": "I&#39;ve been serving <code>HTML</code> for some time using this method.  But it&#39;s <code>HTML</code>.  The text file is plain <code>text</code>.  Serving it isn&#39;t the issue.  It&#39;s translating the <code>text</code> file to <code>HTML</code> while retaining the text in the original file so it&#39;s easy to email."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551065559, "post_id": 54848915, "comment_id": 96489313, "body": "@Rich_F I&#39;m must be missing something obvious. You already have the text stored somewhere because you pass it to the template, right?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551065637, "post_id": 54848915, "comment_id": 96489334, "body": "Yes.  But the formatting doesn&#39;t change to <code>HTML</code> while respecting <code>&lt;CR&gt;</code>, etc."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551066843, "post_id": 54848915, "comment_id": 96489554, "body": "@Rich_F Are you able to add to your question an example of the text (even a few lines) and examples of how you want the HTML and email to format it? I think that would make things clear."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551067079, "post_id": 54848915, "comment_id": 96489591, "body": "Will provide a snippet.  The <code>email</code> doesn&#39;t need to format anything.  Getting text to <code>HTML</code> is an issue though.  I don&#39;t care how I store the original.  I want the same going to both <code>email</code> and <code>HTML</code>."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551068894, "post_id": 54848915, "comment_id": 96489893, "body": "@Rich_F Thanks. Does ERB collapse those linebreaks? I&#39;d try wrapping the text in a <code>&lt;pre&gt;</code> HTML tag."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551076174, "post_id": 54848915, "comment_id": 96491824, "body": "Yes. It becomes one big paragraph.  Using <code>&lt;pre&gt;</code> tags would screw up the email version.  But I will try."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1551077761, "post_id": 54848915, "comment_id": 96492440, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/188974/discussion-between-iain-and-rich-f\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 1, "creation_date": 1551077844, "post_id": 54848915, "comment_id": 96492465, "body": "Will get to it tomorrow.  It is 2am here."}], "tags": [], "owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "is_accepted": false, "score": 0, "last_activity_date": 1550984678, "creation_date": 1550984678, "answer_id": 54848915, "question_id": 54640267, "link": "https://stackoverflow.com/questions/54640267/ruby-sinatra-embed-erb-partial-external-html-file/54848915#54848915", "title": "Ruby Sinatra Embed erb Partial External HTML File", "body": "<p>As I understand it, you have a portion of text (stored in a database or a file, it doesn't really matter where) and you want to:</p>\n\n<ul>\n<li>serve this up formatted as HTML via a webpage</li>\n<li>send it plain via email</li>\n</ul>\n\n<p>Assuming a standard Sinatra project layout where the views directory lives in the project dir, e.g.</p>\n\n<pre><code>project-root/\n  app.rb\n  views/\n</code></pre>\n\n<p>and a route to deliver the text in <code>app.rb</code>:</p>\n\n<pre><code>get \"/sometext\" do\n\nend\n</code></pre>\n\n<p>If you put the <code>erb</code> template in the <code>views</code> directory and as the last line of the route make a call to the <code>erb</code> template renderer you should get the output in HTML. e.g.</p>\n\n<pre><code>project-root/\n  app.rb\n  views/\n    sometext.erb # this is the erb template\n</code></pre>\n\n<p>In the Sinatra app</p>\n\n<pre><code># app.rb\n# I'm assuming you've some way to differentiate\n# bits of text, e.g.\nget \"/sometext/:id\" do |id|\n  @text = DB.sometext.getid id # my fake database call\n  erb :sometext # &lt;- this will render it, make it the final statement of the block\n  # make sure @text is in the template\n  # else use locals, e.g.\n  # erb :sometext, :locals =&gt; { text: @text }\nend\n</code></pre>\n\n<p>Now when a user visits <code>http://example.org/sometext/485995</code> they will receive HTML. Emailing the text to the user could be triggered via the website or some other method of your choice.</p>\n"}, {"tags": [], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1551192961, "last_edit_date": 1551192961, "creation_date": 1551177208, "answer_id": 54883468, "question_id": 54640267, "link": "https://stackoverflow.com/questions/54640267/ruby-sinatra-embed-erb-partial-external-html-file/54883468#54883468", "title": "Ruby Sinatra Embed erb Partial External HTML File", "body": "<p><strong>Solution</strong>: Save the file as <code>HTML</code> and use this gem for conversion into <code>text</code>:</p>\n\n<p><a href=\"https://github.com/soundasleep/html2text_ruby\" rel=\"nofollow noreferrer\">https://github.com/soundasleep/html2text_ruby</a></p>\n\n<p>Works fine if the <code>HTML</code> is simple enough.  </p>\n\n<p><strong>Remaining</strong>: Still have the issue as using the <code>HTML</code> file as a <code>partial</code>.  </p>\n\n<p><strong>Solved</strong>:</p>\n\n<pre><code>@text = markdown File.read('views/privacy.md')\n</code></pre>\n\n<p>So park the source file as a <code>markdown</code> file, which can translate to <code>HTML</code>.  When I need the <code>email</code> version, I need to translate to <code>HTML</code> then to <code>text</code> using the <code>HTML2text</code> gem.  <a href=\"https://rubygems.org/gems/html2text\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/html2text</a></p>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 54883468, "answer_count": 2, "score": 0, "last_activity_date": 1551192961, "creation_date": 1549925002, "last_edit_date": 1551067121, "question_id": 54640267, "link": "https://stackoverflow.com/questions/54640267/ruby-sinatra-embed-erb-partial-external-html-file", "title": "Ruby Sinatra Embed erb Partial External HTML File", "body": "<p>I have a need to hold a \"Purchase Contract\" type of report in my website.  I am using <code>Sinatra</code> using <code>erb</code> files to deliver content.  I would like to email the current report (the versions will change) out when people sign up for various items.  </p>\n\n<p>I'm thinking I can house it in the database, or an external file, in some kind of format, so I can do the both:</p>\n\n<ul>\n<li>import it into an <code>erb</code> file for presentation on the web</li>\n<li>use it in an email so it's readable in text format</li>\n</ul>\n\n<p>So basically I need it in a format that's basic as possible, but it has to translate into <code>HTML</code> (<code>erb</code>) and text.  </p>\n\n<p>What are my options with the format of this file?  And how can I translate that into HTML?  I've looked at <code>markdown</code> and it's not very pretty with the <code>gems</code> that I find that translate to text.  Seeing that it needs plain text as well as <code>HTML</code> I'm a bit lost as to how to get this done.</p>\n\n<p><strong>File Snippet</strong></p>\n\n<pre><code>Privacy Policy\nUpdated Feb 20, 2019\n\nWebsite.com (\u201cWebsite\u201d) is a private business. In this Privacy Statement the terms \u201cwe\u201d and \u201cour\u201d refer to Website. This Privacy Statement explains Website\u2019s practices regarding personal information of our users and visitors to this website (the \u201cWebsite\u201d), as well as those who have transactions with us through telephone, Internet, faxes and other means of communications.\n\nWebsite\u2019s Commitment to Privacy\nAt Website, we are committed to respecting the privacy of our members and our Website visitors. For that reason we have taken, and will continue to take, measures to help protect the privacy of personal information held by us.\n\nThis Privacy Statement provides you with details regarding: (1) how and why we collect personal information; (2) what we do with that information; (3) the steps that we take to help ensure that access to that information is secure; (4) how you can access personal information pertaining to you; and (5) who you should contact if you have questions and concerns about our policies or practices.\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3006425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F15m0.jpg?s=128&g=1", "display_name": "Angel Gonz&#225;lez", "link": "https://stackoverflow.com/users/3006425/angel-gonz%c3%a1lez"}, "edited": false, "score": 0, "creation_date": 1549958024, "post_id": 54640667, "comment_id": 96081509, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 1, "last_activity_date": 1549927777, "creation_date": 1549927777, "answer_id": 54640667, "question_id": 54639978, "link": "https://stackoverflow.com/questions/54639978/ruby-convert-hexadecimal-to-integer-16-bits-signed/54640667#54640667", "title": "Ruby convert Hexadecimal to integer (16 bits signed)", "body": "<p><code>s&gt;</code> is the correct unpack symbol for a 16-bit unsigned big endian number, so:</p>\n\n<pre><code>\"\\xfd\\x6f\".unpack('s&gt;')[0] / 10.0\n</code></pre>\n\n<p>Result is:</p>\n\n<pre><code>-65.7\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3006425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F15m0.jpg?s=128&g=1", "display_name": "Angel Gonz&#225;lez", "link": "https://stackoverflow.com/users/3006425/angel-gonz%c3%a1lez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1549927777, "creation_date": 1549923295, "question_id": 54639978, "link": "https://stackoverflow.com/questions/54639978/ruby-convert-hexadecimal-to-integer-16-bits-signed", "title": "Ruby convert Hexadecimal to integer (16 bits signed)", "body": "<p>I am developing a software for using a RFID reader with ruby on rails and, after open the socket and get the tags, I convert data to hexadecimal with:</p>\n\n<pre>\n\n    while line = s.gets\n      puts line.unpack('H*').to_s\n    end\n\n</pre>\n\n<p>Then I get \"a55a0019833400393939393939303030303232<b>fd6f</b>02080d0a\" for one tag.</p>\n\n<p>The RFID reader user manual tells: </p>\n\n<p><i>Remark:RSSI express as complement code, total 16 bits\uff0cwhich is 10 times the real value. For example, the real value is -65.7dBm\uff0cthen RSSI=fd6f</i></p>\n\n<p>I have found online calculators (mathsinfun and calc.penjee.com) where I am able to convert the fd6f in -675.</p>\n\n<p>I would like to know how can I get this conversion in Ruby 2.3.1 to continue with my project.</p>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["regex", "ruby", "gsub"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1549918099, "post_id": 54638585, "comment_id": 96069705, "body": "<code>str.split.each_slice(2).to_h</code>"}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1549919413, "post_id": 54638585, "comment_id": 96070229, "body": "this works as well."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1549925531, "post_id": 54638585, "comment_id": 96072601, "body": "Your objective is to create a hash. One way to do that is to use a regular expression in one step (though I don&#39;t know how <code>gsub</code> fits it). That is not the only way, however, and in my opinion it is not the best way. By framing the question as you have you are unnecessarily limiting the approaches that can be used. This is sometimes referred to as an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>."}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1549984153, "post_id": 54638585, "comment_id": 96097735, "body": "@sawa how do you replace the nth character of a string using gsub?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1549993229, "post_id": 54638585, "comment_id": 96103080, "body": "@kel.o The answer for this original request is <code>s.gsub(&#47;([^ ]* [^ ]*) &#47;, &#39;\\1,&#39;).gsub(&#39; &#39;, &#39;=&gt;&#39;)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1549995596, "post_id": 54638585, "comment_id": 96104142, "body": "kel.o, the character at index <code>n = 4</code> of the string <code>s = &quot;balderdash&quot;</code> can be replaced with <code>&quot;X&quot;</code> as follows: <code>s.sub(&#47;\\A.{#{n}}\\K.&#47;,&quot;X&quot;) #=&gt; &quot;baldXrdash&quot;</code>, <code>\\K</code> reads, &quot;forget everything matched so far&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549917559, "post_id": 54638690, "comment_id": 96069455, "body": "If the value must be converted to int, use <code>hash[key] = val.to_i</code>"}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1549919212, "post_id": 54638690, "comment_id": 96070167, "body": "ahh this makes a lot of sense. this is exactly what I needed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1549923183, "post_id": 54638690, "comment_id": 96071825, "body": "A detail: the way you&#39;ve written it makes it appear that <code>scan</code> is returning the hash. Consider adding the line <code>hash</code> at the end or replacing the first two with <code>s.scan(&#47;(\\w+) (\\d+)&#47;).each_with_object({}) do |(key, val),hash|</code>."}, {"owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 0, "creation_date": 1549952683, "post_id": 54638690, "comment_id": 96079222, "body": "To avoid each do loop. Use another hash syntax <code>Hash[s.scan(&#47;(\\w+) (\\d+)&#47;)]</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 0, "creation_date": 1549986286, "post_id": 54638690, "comment_id": 96099179, "body": "@Dyaniyal, if <code>Hash::[]</code> is to be used isn&#39;t it simpler to write <code>Hash[*s.split]</code>, as I have done?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1549986393, "post_id": 54638690, "comment_id": 96099254, "body": "@CarySwoveland It depends on whether one needs to pre-validate the input. If the input is clean, yes, <code>Hash[*s.split]</code> is enough."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1549986856, "post_id": 54638690, "comment_id": 96099534, "body": "The use of the regex hardly does that. If <code>s = &quot;a 1 b&quot;</code> your method would happily disregard <code>&quot;b&quot;</code>. At least <code>Hash[*s.split]</code> would raise an exception. If the data is to be checked that should be a separate task."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549988028, "post_id": 54638690, "comment_id": 96100248, "body": "Regex can do extraction and validation at the dame time. That is the beauty of regex."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1549960146, "last_edit_date": 1549960146, "creation_date": 1549917223, "answer_id": 54638690, "question_id": 54638585, "link": "https://stackoverflow.com/questions/54638585/using-gsub-and-regex-to-replace-every-other-occurrence-of-a-character/54638690#54638690", "title": "Using gsub and regex to replace every other occurrence of a character", "body": "<p>You may build the hash right away with</p>\n\n<pre><code>s = \"10c 10 bj 18 2s 15 3s 3 8d 8 as 14 kh 13 8c 8 3c 3 6d 6 kc 13 5d 5 ad 14\"\nhash = Hash[s.scan(/(\\w+) (\\d+)/)].transform_values(&amp;:to_i)\n</code></pre>\n\n<p>Or, for older Ruby versions:</p>\n\n<pre><code>hash = Hash[s.scan(/(\\w+) (\\d+)/)]\nhash = Hash[ hash.map{ |a, b| [ a, b.to_i ] } ]\nputs hash\n# =&gt; {\"10c\"=&gt;10, \"bj\"=&gt;18, \"2s\"=&gt;15, \"3s\"=&gt;3, \"8d\"=&gt;8, \"as\"=&gt;14, \"kh\"=&gt;13, \"8c\"=&gt;8, \"3c\"=&gt;3, \"6d\"=&gt;6, \"kc\"=&gt;13, \"5d\"=&gt;5, \"ad\"=&gt;14}\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/wuhBph\" rel=\"nofollow noreferrer\">Ruby demo</a></p>\n\n<p>The <code>(\\w+) (\\d+)</code> pattern matches and captures into Group 1 any one or more word chars (with <code>(\\w+)</code>, letters, digits or underscores, you may use <code>[[:alnum:]]+</code>, or <code>[^\\W_]</code>, instead to match letters or digits), then matches a space, and then captures into Group 2 any one or more digits (<code>(\\d+)</code>). <code>String#scan</code> matches all non-overlapping occurrences, and only returns captured substrings that are leveraged into a hash that is built dynamically.</p>\n\n<p>Note that when you run <code>b.to_i</code>, you need no additional checks since <code>\\d+</code> will only match digit substrings (and they are of length 2 in the input).</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1549992296, "post_id": 54640283, "comment_id": 96102683, "body": "what is the purpose of the <code>transform_values(&amp;:to_i)</code> line? It seems that splitting the string and calling the splat operator on the new array are sufficient."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1549994069, "post_id": 54640283, "comment_id": 96103494, "body": "@kel.o, The question requires that the values be integers, not strings. I made a small change to my answer that replaces the possibly ambiguous line <code>#=&gt; (the hash given above)</code> with  the hash that is returned."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1549993873, "last_edit_date": 1549993873, "creation_date": 1549925087, "answer_id": 54640283, "question_id": 54638585, "link": "https://stackoverflow.com/questions/54638585/using-gsub-and-regex-to-replace-every-other-occurrence-of-a-character/54640283#54640283", "title": "Using gsub and regex to replace every other occurrence of a character", "body": "<p>I don't believe the use of a regular expression is the best way to create the hash. Instead, I suggest using the methods <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-split\" rel=\"nofollow noreferrer\">String#split</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Hash::[]</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a> and <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-to_i\" rel=\"nofollow noreferrer\">String#to_i</a>. If <code>s</code> is the string given in the example,</p>\n\n<pre><code>Hash[*s.split].transform_values(&amp;:to_i)\n  #=&gt; {\"10c\"=&gt;10, \"bj\"=&gt;18, \"2s\"=&gt;15, \"3s\"=&gt;3, \"8d\"=&gt;8,\n  #    \"as\" =&gt;14, \"kh\"=&gt;13, \"8c\"=&gt; 8, \"3c\"=&gt;3, \"6d\"=&gt;6,\n  #    \"kc\" =&gt;13, \"5d\"=&gt; 5, \"ad\"=&gt;14} \n</code></pre>\n\n<p>The steps are as follows.</p>\n\n<pre><code>a = s.split\n  #=&gt; [\"10c\", \"10\", \"bj\", ... , \"14\"] \nb = Hash[*a]\n  #=&gt; {\"10c\"=&gt;\"10\", \"bj\"=&gt;\"18\", \"2s\"=&gt;\"15\", \"3s\"=&gt;\"3\",\n  #    \"8d\" =&gt; \"8\", \"as\"=&gt;\"14\", \"kh\"=&gt;\"13\", \"8c\"=&gt;\"8\",\n  #    \"3c\" =&gt; \"3\", \"6d\"=&gt; \"6\", \"kc\"=&gt;\"13\", \"5d\"=&gt;\"5\",\n  #    \"ad\" =&gt;\"14\"} \nb.transform_values(&amp;:to_i)\n  #=&gt; {\"10c\"=&gt;10, \"bj\"=&gt;18, \"2s\"=&gt;15, \"3s\"=&gt;3, \"8d\"=&gt;8,\n  #    \"as\" =&gt;14, \"kh\"=&gt;13, \"8c\"=&gt; 8, \"3c\"=&gt;3, \"6d\"=&gt;6,\n  #    \"kc\" =&gt;13, \"5d\"=&gt; 5, \"ad\"=&gt;14} \n</code></pre>\n\n<p>The <em>splat</em> operator (<code>*</code>), causes <code>Hash[*a]</code> to be evaluated as <code>Hash[\"10c\", \"10\", \"bj\", ... , \"14\"]</code>.</p>\n\n<p><code>b.transform_values(&amp;:to_i)</code> is here equivalent to <code>b.transform_values { |v| v.to_i }</code>.</p>\n"}], "owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 54638690, "answer_count": 2, "score": 0, "last_activity_date": 1549993873, "creation_date": 1549916791, "question_id": 54638585, "link": "https://stackoverflow.com/questions/54638585/using-gsub-and-regex-to-replace-every-other-occurrence-of-a-character", "title": "Using gsub and regex to replace every other occurrence of a character", "body": "<p>I am designing a card game (spades). I want to store each hand as a hash.</p>\n\n<p>This is a randomly generated string representing a single had with 13 cards where <code>10c</code> is the key and <code>10</code> is the value</p>\n\n<p><code>\"10c 10 bj 18 2s 15 3s 3 8d 8 as 14 kh 13 8c 8 3c 3 6d 6 kc 13 5d 5 ad 14\"</code></p>\n\n<p>I want to replace the space <code>' '</code> between <code>10c</code> and <code>10</code> with a <code>=&gt;</code> and the following space between <code>10</code> and <code>bj</code> with a comma... This shoulod look like <code>10c=&gt;10,bj=&gt;18</code> etc. </p>\n\n<p>From there I will convert this to a hash by calling Hash#inspect; however, I haven't been able to find a way to replace the nth character of a string using gsub.</p>\n\n<p>I've tried calling <code>hand.gsub(' ', '=&gt;')</code> but this obviously replaces every instance of a space with  <code>=&gt;</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2072, "user_id": 3389795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiAJt.jpg?s=128&g=1", "display_name": "Shiko", "link": "https://stackoverflow.com/users/3389795/shiko"}, "edited": false, "score": 0, "creation_date": 1549917242, "post_id": 54638525, "comment_id": 96069313, "body": "Technically, nothing wrong with the checkbox control. Do you use any CSS library for the UI?"}, {"owner": {"reputation": 574, "user_id": 10633499, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217237080576333/picture?type=large", "display_name": "Giorgio Zanni", "link": "https://stackoverflow.com/users/10633499/giorgio-zanni"}, "edited": false, "score": 0, "creation_date": 1549918686, "post_id": 54638525, "comment_id": 96069947, "body": "Where is your form tag?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10807185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d704774344b0753f2dcc584dbb2836f?s=128&d=identicon&r=PG&f=1", "display_name": "iki", "link": "https://stackoverflow.com/users/10807185/iki"}, "is_accepted": false, "score": 0, "last_activity_date": 1550069654, "last_edit_date": 1550069654, "creation_date": 1550047589, "answer_id": 54665891, "question_id": 54638525, "link": "https://stackoverflow.com/questions/54638525/check-boxes-will-not-show-on-web-page-but-no-errors/54665891#54665891", "title": "Check boxes will not show on web page but no errors", "body": "<p>I think that the problem is that you are using the <code>f.check_box</code> but you don't have the form tag. If you don't want it you should use the check box like this:</p>\n\n<pre><code>&lt;%= check_box_tag 'Hungry', 'yes', id: 'is_hungry' %&gt; Hungry\n</code></pre>\n\n<p>Documentation:\n<a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/FormTagHelper/check_box_tag</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10914502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16142499d9bb2c0fb5a2a0b21801bec5?s=128&d=identicon&r=PG&f=1", "display_name": "manny steele", "link": "https://stackoverflow.com/users/10914502/manny-steele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1550069654, "creation_date": 1549916557, "question_id": 54638525, "link": "https://stackoverflow.com/questions/54638525/check-boxes-will-not-show-on-web-page-but-no-errors", "title": "Check boxes will not show on web page but no errors", "body": "<p>Im not getting any errors but the checkbox will not show on the page? <a href=\"https://i.stack.imgur.com/dFSwj.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I want to style my checkboxes but i can't if it doesn't show. If anybody can look at my code and see why it's not showing it will be greatly appreciated! Thank you </p>\n\n<pre><code>                        &lt;div class=\"row justify-content-center\"&gt;\n                            &lt;div class=\"col-12 col-xl-11\"&gt;\n                                &lt;div class=\"row form-group\"&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_hungry %&gt; Hungry\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :uplifted %&gt; Uplifted\n                                    &lt;/div&gt;\n\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_euphoric %&gt; Euphoric\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"row form-group\"&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_energetic %&gt; Energetic\n                                    &lt;/div&gt;\n\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_creative %&gt; Creative\n                                    &lt;/div&gt;\n\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_focused %&gt; Focused\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"row form-group\"&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_relaxed %&gt; Relaxed\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_happy %&gt; Happy\n                                    &lt;/div&gt;\n\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_balanced %&gt; Balanced\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"row form-group\"&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_painrelief %&gt; Pain Relief\n                                    &lt;/div&gt;\n                                    &lt;div class=\"col-md-4\"&gt;\n                                        &lt;%= f.check_box :is_sleepy %&gt; Sleepy\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "docker", "jenkins", "rubygems", "bundle"], "answers": [{"tags": [], "owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1549915226, "creation_date": 1549915226, "answer_id": 54638202, "question_id": 54637828, "link": "https://stackoverflow.com/questions/54637828/how-can-i-successfully-install-rake-and-bundle-inside-a-docker-container/54638202#54638202", "title": "How can I successfully install rake and bundle inside a docker container?", "body": "<p>Install ruby and rake as gem.</p>\n\n<pre><code>apk add ruby &amp;&amp; gem install rake\n</code></pre>\n\n<p>You can also use  ruby/2.4-alpine as base image to avoid installing ruby manually.</p>\n\n<pre><code>FROM ruby/2.4-alpine\nRUN gem install rake\n</code></pre>\n"}], "owner": {"reputation": 1039, "user_id": 779429, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9d08172f46d2bc0fb49b10d3730b5877?s=128&d=identicon&r=PG", "display_name": "Becks", "link": "https://stackoverflow.com/users/779429/becks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549919933, "creation_date": 1549913714, "last_edit_date": 1549919933, "question_id": 54637828, "link": "https://stackoverflow.com/questions/54637828/how-can-i-successfully-install-rake-and-bundle-inside-a-docker-container", "title": "How can I successfully install rake and bundle inside a docker container?", "body": "<p>I have a docker file that does the following: </p>\n\n<pre><code>RUN apk update &amp;&amp; apk add ruby ruby-irb ruby-rake ruby-io-console ruby-bigdecimal ruby-json ruby-bundler\n</code></pre>\n\n<p>I get this error log:</p>\n\n<pre><code>$ bundle\n\n[33m`/opt/jenkins` is not writable.\nBundler will use `/tmp/bundler/home/jenkins' as your home directory temporarily.\n\n\n[0mFetching gem metadata from https://rubygems.org/...........\nFetching gem metadata from https://rubygems.org/.\nResolving dependencies..............\n\n[32mFetching rake 10.3.2[0m\n\n[33mRetrying download gem from https://rubygems.org/ due to error (2/4): Errno::ENOENT No such file or directory @ rb_sysopen - /opt/jenkins/.gem/ruby/2.4.0/cache/rake-10.3.2.gem[0m\n[33mRetrying download gem from https://rubygems.org/ due to error (3/4): Errno::ENOENT No such file or directory @ rb_sysopen - /opt/jenkins/.gem/ruby/2.4.0/cache/rake-10.3.2.gem[0m\n[33mRetrying download gem from https://rubygems.org/ due to error (4/4): Errno::ENOENT No such file or directory @ rb_sysopen - /opt/jenkins/.gem/ruby/2.4.0/cache/rake-10.3.2.gem[0m\n\n\n[31mErrno::ENOENT: No such file or directory @ rb_sysopen -\n/opt/jenkins/.gem/ruby/2.4.0/cache/rake-10.3.2.gem\n\n[0m[0m[31mAn error occurred while installing rake (10.3.2), and Bundler\ncannot continue.\nMake sure that `gem install rake -v '10.3.2'` succeeds before bundling.[0m\n\nIn Gemfile:\n  aws_account_utils was resolved to 0.1.4, which depends on\n    rake[0m\nBuild step 'Execute shell' marked build as failure\n</code></pre>\n\n<p>When I try to install rake as follows: </p>\n\n<pre><code>gem install rake -v 10.3.2\n</code></pre>\n\n<p>as a command in the build job, I get: </p>\n\n<pre><code>Fetching: rake-10.3.2.gem\nFetching: rake-10.3.2.gem (  2%)\nFetching: rake-10.3.2.gem (  4%)\nFetching: rake-10.3.2.gem (  6%)\nFetching: rake-10.3.2.gem (  8%)\nFetching: rake-10.3.2.gem ( 10%)\nFetching: rake-10.3.2.gem ( 12%)\nFetching: rake-10.3.2.gem ( 14%)\nFetching: rake-10.3.2.gem ( 16%)\nFetching: rake-10.3.2.gem ( 19%)\nFetching: rake-10.3.2.gem ( 21%)\nFetching: rake-10.3.2.gem ( 23%)\nFetching: rake-10.3.2.gem ( 25%)\nFetching: rake-10.3.2.gem ( 37%)\nFetching: rake-10.3.2.gem ( 49%)\nFetching: rake-10.3.2.gem ( 62%)\nFetching: rake-10.3.2.gem ( 74%)\nFetching: rake-10.3.2.gem ( 86%)\nFetching: rake-10.3.2.gem ( 99%)\nFetching: rake-10.3.2.gem (100%)\nFetching: rake-10.3.2.gem (100%)\nERROR:  While executing gem ... (Errno::ENOENT)\n    No such file or directory @ rb_sysopen - /opt/jenkins/.gem/ruby/2.4.0/cache/rake-10.3.2.gem\n</code></pre>\n\n<p>How do I resolve this? How do I get </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "routing"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1549914108, "post_id": 54637785, "comment_id": 96067836, "body": "Can you look in your generated HTML what is the value it&#39;s producing from <code>listing_path(@job)</code>?"}, {"owner": {"reputation": 45, "user_id": 2570506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234352592ddf8d4ee9980ba9a1517477?s=128&d=identicon&r=PG", "display_name": "user2570506", "link": "https://stackoverflow.com/users/2570506/user2570506"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1549915788, "post_id": 54637785, "comment_id": 96068695, "body": "The HTML isn&#39;t being generated, i&#39;m getting the error: ActionController::UrlGenerationError in Jobs#hr - No route matches {:action=&gt;&quot;listing&quot;, :controller=&gt;&quot;jobs&quot;, :id=&gt;nil}, missing required keys: [:id]"}], "answers": [{"tags": [], "owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "is_accepted": true, "score": 2, "last_activity_date": 1549917134, "last_edit_date": 1549917134, "creation_date": 1549916706, "answer_id": 54638559, "question_id": 54637785, "link": "https://stackoverflow.com/questions/54637785/missing-required-keys-id-routing-to-a-view-for-each-instance-of-my-model-w/54638559#54638559", "title": "Missing required keys: [:id] - Routing to a view for each instance of my model with its unique ID", "body": "<p>The view that you are putting as example is using the instance variable <strong>@jobs</strong>. According with your controller that would be your index action where you don't have <strong>@job</strong> defined</p>\n\n<p><strong>Note:</strong> Notice on that view you are using <strong>@jobs</strong> and <strong>job</strong> on your iterator</p>\n\n<p>So I think if you change @job for job that would fix the problem on that view</p>\n\n<pre><code>&lt;%= link_to job.title, listing_path(job) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "is_accepted": false, "score": 2, "last_activity_date": 1550227354, "last_edit_date": 1550227354, "creation_date": 1549916727, "answer_id": 54638566, "question_id": 54637785, "link": "https://stackoverflow.com/questions/54637785/missing-required-keys-id-routing-to-a-view-for-each-instance-of-my-model-w/54638566#54638566", "title": "Missing required keys: [:id] - Routing to a view for each instance of my model with its unique ID", "body": "<p>As the error clearly states, your path is expecting a job id but it is not getting one, so inspecting your call for the path, in line:</p>\n\n<pre><code>&lt;span id=\"line-align\"&gt;&lt;p class=\"title\"&gt;&lt;%= link_to job.title, listing_path(@job) %&gt; &lt;/p&gt;                \n</code></pre>\n\n<p>you are passing <code>@job</code> as param to the listing path.</p>\n\n<p>change it to <code>job</code> so it would be: </p>\n\n<pre><code>&lt;span id=\"line-align\"&gt;&lt;p class=\"title\"&gt;&lt;%= link_to job.title, listing_path(job) %&gt; &lt;/p&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 412, "user_id": 8579055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qhYNi.jpg?s=128&g=1", "display_name": "Guillaume Bihet", "link": "https://stackoverflow.com/users/8579055/guillaume-bihet"}, "is_accepted": false, "score": 0, "last_activity_date": 1549916899, "creation_date": 1549916899, "answer_id": 54638613, "question_id": 54637785, "link": "https://stackoverflow.com/questions/54637785/missing-required-keys-id-routing-to-a-view-for-each-instance-of-my-model-w/54638613#54638613", "title": "Missing required keys: [:id] - Routing to a view for each instance of my model with its unique ID", "body": "<p>For the missing id, you should do:</p>\n\n<pre><code>&lt;%= link_to job.title, listing_path(id: @job) %&gt;\n</code></pre>\n\n<p>since your id is stored in the variable <code>@job</code></p>\n"}, {"tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": false, "score": 0, "last_activity_date": 1549918621, "last_edit_date": 1549918621, "creation_date": 1549917040, "answer_id": 54638647, "question_id": 54637785, "link": "https://stackoverflow.com/questions/54637785/missing-required-keys-id-routing-to-a-view-for-each-instance-of-my-model-w/54638647#54638647", "title": "Missing required keys: [:id] - Routing to a view for each instance of my model with its unique ID", "body": "<p>It seems that the reason this isn't working is because you are not sending the correct argument to your <code>link_to</code> here:</p>\n\n<pre><code>&lt;%= link_to job.title, listing_path(@job) %&gt;\n</code></pre>\n\n<p>You have to remember that you are iterating through all your <code>@jobs</code> and calling each individual job with the <code>job</code> variable between the | |. You are trying to create a link to each individual job, so the correct link_to should be:</p>\n\n<pre><code>&lt;%= link_to job.title, listing_path(job) %&gt;\n</code></pre>\n\n<p>Where <code>job</code> is the individual job that the <code>link_to</code> is looking for.</p>\n"}], "owner": {"reputation": 45, "user_id": 2570506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234352592ddf8d4ee9980ba9a1517477?s=128&d=identicon&r=PG", "display_name": "user2570506", "link": "https://stackoverflow.com/users/2570506/user2570506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54638559, "answer_count": 4, "score": 2, "last_activity_date": 1550227354, "creation_date": 1549913540, "last_edit_date": 1592644375, "question_id": 54637785, "link": "https://stackoverflow.com/questions/54637785/missing-required-keys-id-routing-to-a-view-for-each-instance-of-my-model-w", "title": "Missing required keys: [:id] - Routing to a view for each instance of my model with its unique ID", "body": "<p>I'm working on a job board to learn/practice rails. I have a separate view for each job category, and I want the user to be able to click on a particular job posting to access another view with all of the listing's details. I've partially figured out the routing, as I'm able to go to localhost:3000/jobs/listing/7 for example to see the view for the listing of id:7. I'm having a problem linking to the /listing/:id from my job category view, and can only access a view for a specific id by typing it into the address bar. I've been working on this for days and checked out many related questions on here, but can't seem to figure it out. I believe I'm overlooking a simple, but critical detail, since i'm not very experienced with rails.</p>\n<p>Here is my job category view:</p>\n<pre><code>&lt;div class=&quot;cat-banner&quot; id=&quot;developer&quot;&gt;\n    &lt;h1&gt;Human Resources Jobs&lt;/h1&gt;\n    &lt;h4 class=&quot;listing-count&quot;&gt;&lt;%= Job.where(:category =&gt; 'Human Resources').count.to_s + ' Listings' %&gt;&lt;/h4&gt;\n&lt;/div&gt;\n\n&lt;div class=&quot;category-page&quot;&gt;\n    &lt;!-- Full-Stack Developer Jobs --&gt;\n    &lt;div class=&quot;jobs-posted&quot;&gt;\n        &lt;hr class=&quot;other-line&quot;&gt;\n        &lt;% if Job.where(:category =&gt; 'Human Resources').count &gt; 0 %&gt;\n            &lt;% @jobs.each do |job| %&gt;\n                &lt;div class=&quot;job&quot;&gt;\n                    &lt;% if job.category == &quot;Human Resources&quot; %&gt;\n                        &lt;span class=&quot;job-logo&quot;&gt;&lt;%= image_tag('salesforce.png', :size =&gt; &quot;60x40&quot;) %&gt;&lt;/span&gt;\n                        &lt;span id=&quot;line-align&quot;&gt;&lt;p class=&quot;title&quot;&gt;&lt;%= link_to job.title, listing_path(@job) %&gt; &lt;/p&gt;                \n&lt;p class=&quot;name&quot;&gt;&lt;%= job.name %&gt;&lt;/p&gt;&lt;/span&gt;\n\n                        &lt;% if job.location == &quot;Remote&quot; %&gt;\n                            &lt;span class=&quot;remote-tag&quot;&gt;&lt;%= job.location.upcase %&gt;&lt;/span&gt;\n                        &lt;% else %&gt;\n                            &lt;p class=&quot;location&quot;&gt;&lt;%= job.location %&gt;&lt;/p&gt;\n                        &lt;% end %&gt;\n\n                        &lt;p class=&quot;kind&quot;&gt;&lt;%= job.kind %&gt;&lt;/p&gt;\n                        &lt;p class=&quot;time-stamp&quot;&gt;&lt;%= job.created_at.strftime(&quot;%A, %B %d %Y&quot;) %&gt;&lt;/p&gt;\n                        &lt;hr class=&quot;line&quot;&gt;\n                    &lt;% end %&gt;\n                &lt;/div&gt;\n            &lt;% end %&gt;\n        &lt;% else %&gt;\n            &lt;p&gt;There are no human resources jobs at the moment...&lt;/p&gt;\n            &lt;p style=&quot;text-decoration: underline;&quot;&gt;&lt;%= link_to 'Post a Human Resources Job Here', new_job_path %&gt;&lt;/p&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;!-- End of Human Resources Jobs --&gt;\n&lt;/div&gt;\n</code></pre>\n<p>And my routes.rb file:</p>\n<pre><code>    Rails.application.routes.draw do\n\n  get 'subscribers' =&gt; 'subscribers#index'\n \n  get 'jobs/remote' =&gt; 'jobs#remote'\n\n  get 'jobs/listing/:id' =&gt; 'jobs#listing', as: 'listing'\n\n  get 'jobs/company' =&gt; 'jobs#company'\n\n  get 'jobs/dev' =&gt; 'jobs#dev'\n\n  get 'jobs/design' =&gt; 'jobs#design'\n\n  get 'jobs/marketing' =&gt; 'jobs#marketing'\n\n  get 'jobs/ai' =&gt; 'jobs#ai'\n\n  get 'jobs/fullstack' =&gt; 'jobs#fullstack'\n\n  get 'jobs/frontend' =&gt; 'jobs#frontend'\n\n  get 'jobs/backend' =&gt; 'jobs#backend'\n\n  get 'jobs/it' =&gt; 'jobs#it'\n\n  get 'jobs/software' =&gt; 'jobs#software' \n\n  get 'jobs/product' =&gt; 'jobs#product'\n\n  get 'jobs/cloud' =&gt; 'jobs#cloud'\n\n  get 'jobs/mobile' =&gt; 'jobs#mobile'\n\n  get 'jobs/database' =&gt; 'jobs#database'\n\n  get 'jobs/datascience' =&gt; 'jobs#datascience'\n\n  get 'jobs/blockchain' =&gt; 'jobs#blockchain' \n\n  get 'jobs/security' =&gt; 'jobs#security'\n\n  get 'jobs/support' =&gt; 'jobs#support'\n\n  get 'jobs/network' =&gt; 'jobs#network'\n\n  get 'jobs/finance' =&gt; 'jobs#finance'\n\n  get 'jobs/sales' =&gt; 'jobs#sales'\n\n  get 'jobs/hr' =&gt; 'jobs#hr' \n\n  get 'jobs/businessdev' =&gt; 'jobs#businessdev'\n\n  resources :jobs\n\n  \n  root 'jobs#index'\n\n  get 'jobs/index'\n\n  get 'jobs/new'\n</code></pre>\n<p>And part of the Jobs Controller:</p>\n<pre><code>    class JobsController &lt; ApplicationController\n  def index\n    @jobs = Job.all\n    @subscribers = Subscriber.all\n  end\n  def new\n    @job = Job.new\n  end\n\n  def listing\n    @job = Job.find(params[:id])\n  end\n  def show\n    @job = Job.find(params[:id])\n  end\n  def create\n    @job = Job.new(params.require(:job).permit(:title, :url, :category, :kind, :location, :description, :name, :summary, :website, :email, :companyDescription, :headquarters ))\n    \n\n    if @job.save\n      redirect_to root_path\n    else\n      render &quot;new&quot;\n    end\n\n    respond_to :html, :json\n  end\n</code></pre>\n<p>I've tried:</p>\n<pre><code>&lt;%= link_to job.title, listing_path(@job) %&gt; \n&lt;%= link_to job.title, listing_path(@job.id) %&gt; \n&lt;%= link_to job.title, listing_path(@job[:id]) %&gt; \n&lt;%= link_to job.title, listing_path %&gt;\n</code></pre>\n<p>and other variations that I thought would work from reading StackOverflow</p>\n<p>I believe my problem comes from this link_to statement (wrong syntax?), as everything looks alright in my jobs controller and routes file.</p>\n<p>I either get:\nNo route matches {:action=&gt;&quot;listing&quot;, :controller=&gt;&quot;jobs&quot;, :id=&gt;nil}, missing required keys: [:id],</p>\n<p>or</p>\n<p>undefined method `id' for nil:NilClass,</p>\n<p>or</p>\n<p>undefined method `[]' for nil:NilClass</p>\n<p>The &quot;missing required keys: [:id]&quot; error is confusing me. I've checked out many resources trying to figure out how to pass the :id but can't solve it.</p>\n<p>This is my first post on here and I REALLY appreciate any help and look forward to being knowledgeable enough in the future so I can answer questions too.</p>\n<p><a href=\"https://i.stack.imgur.com/nBKTz.png\" rel=\"nofollow noreferrer\">rake routes</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 4, "creation_date": 1549911988, "post_id": 54637410, "comment_id": 96066858, "body": "Your code looks like it should work except for the <code>array[x]</code> line ... you don&#39;t initialize arrays with length in ruby. Use <code>array = []</code> instead."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1549913626, "post_id": 54637410, "comment_id": 96067617, "body": "To elaborate further. Ruby uses dynamic arrays by default, so there is no need to provide specify the length up front. I recommend taking a look at the <a href=\"http://ruby-doc.org/core-2.6.1/Array.html\" rel=\"nofollow noreferrer\"><i>Array</i> documentation</a>. Here you find examples on how to create and modify an array. It also shows how to add items and iterate over them. You don&#39;t need to read the full page, just scroll over the introduction and filter out what you need."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1549914055, "post_id": 54637410, "comment_id": 96067822, "body": "This is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 2, "creation_date": 1549918494, "post_id": 54637791, "comment_id": 96069867, "body": "Even just <code>x.times.map { rand(0..1) }</code>"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1549927745, "post_id": 54637791, "comment_id": 96073213, "body": "<code>Array.new(x){ rand(2) }</code>"}], "tags": [], "owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "is_accepted": false, "score": 1, "last_activity_date": 1550579837, "last_edit_date": 1550579837, "creation_date": 1549913572, "answer_id": 54637791, "question_id": 54637410, "link": "https://stackoverflow.com/questions/54637410/how-can-i-store-my-outcome-into-an-array-in-ruby-language/54637791#54637791", "title": "How can I store my outcome into an array in ruby language?", "body": "<p>Hay, may you can try the following:</p>\n\n<pre><code>number_of_times = gets.to_i\narray = []\nnumber_of_times.times do \n  random_result = rand(0..1)\n  array.push(random_result)\nend\n</code></pre>\n\n<p>or (like the comments)</p>\n\n<pre><code>n = gets.to_i\narray = n.times.map{ rand(0..1) }\n</code></pre>\n\n<p>After executing this, <code>array</code> will have the result of all randomized options.</p>\n\n<p><strong>Note1</strong>: You don't need to initialize array with the width, you can just initialize the array and push elements to him.</p>\n\n<p><strong>Note2</strong>: No problems with your <code>while</code> operator, but in ruby, you have the <code>.times</code> iterator, is more legible for this case. </p>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1549921627, "creation_date": 1549921627, "answer_id": 54639659, "question_id": 54637410, "link": "https://stackoverflow.com/questions/54637410/how-can-i-store-my-outcome-into-an-array-in-ruby-language/54639659#54639659", "title": "How can I store my outcome into an array in ruby language?", "body": "<p>You can leverage Ruby's <code>Array</code> block constructor to allocate and initialize your array in a one-liner:</p>\n\n<pre><code>array = Array.new(n) { rand(0..1) }  # sample result: [0, 0, 1, 0, 1, 0] for n = 6\n</code></pre>\n\n<p>The argument <code>n</code> determines the <code>size</code> of the array, and the block argument is used to initialize each of the <code>n</code> elements.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11047034"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1550579837, "creation_date": 1549911901, "question_id": 54637410, "link": "https://stackoverflow.com/questions/54637410/how-can-i-store-my-outcome-into-an-array-in-ruby-language", "title": "How can I store my outcome into an array in ruby language?", "body": "<p>My teacher asked me to write a Ruby program that  contain a loop and in each iteration it randomly makes a choice: head (represented by 1) or tail (represented by 0), and stores the outcome (0 or 1) in an array. I am not sure how to store my outcome into an array and this is my code</p>\n\n<pre><code>p \"Select a number between 50 to 100\"\n    x = gets.to_i\n    i = 0\n    array[x]\n    while i &lt; x\n     a = rand(0..1)\n     array.push(a)\n     i += 1\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1549910514, "post_id": 54635799, "comment_id": 96066154, "body": "Apart from this specific implementation, please be aware that this kind of &quot;security questions&quot; is generally considered a security anti-pattern since most of this information is often public or semi-public which significantly reduces their value. Also, due toi the generally small amount of possible (or common) answers, a brute-force attack is easy. Thus, you should generally use other means to protect your users, e.g. two-factor authentication with e.g. <a href=\"https://en.wikipedia.org/wiki/Time-based_One-time_Password_algorithm\" rel=\"nofollow noreferrer\">TOTP</a> or <a href=\"https://en.wikipedia.org/wiki/Universal_2nd_Factor\" rel=\"nofollow noreferrer\">U2F</a>."}, {"owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "edited": false, "score": 0, "creation_date": 1549924783, "post_id": 54635799, "comment_id": 96072340, "body": "What&#39;s the flow of your implementation, every time you select an option do you send the data to your server? or the data is sent after all the options are selected?"}], "answers": [{"tags": [], "owner": {"reputation": 761, "user_id": 4299353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f90473299f58264f0744371b4fe444?s=128&d=identicon&r=PG&f=1", "display_name": "mmsilviu", "link": "https://stackoverflow.com/users/4299353/mmsilviu"}, "is_accepted": false, "score": 0, "last_activity_date": 1549919970, "creation_date": 1549919970, "answer_id": 54639315, "question_id": 54635799, "link": "https://stackoverflow.com/questions/54635799/how-to-only-allow-of-users-to-select-one-question/54639315#54639315", "title": "How to only allow of users to select one question", "body": "<p>You can set the already used option as disabled.</p>\n\n<p>the <code>[options_for_select][1]</code> have the possibility to set some <code>disabled_options</code></p>\n\n<pre><code>options_for_select([\"Free\", \"Basic\", \"Advanced\", \"Super Platinum\"], disabled: \"Super Platinum\")\n\n# =&gt; &lt;option value=\"Free\"&gt;Free&lt;/option&gt;\n# =&gt; &lt;option value=\"Basic\"&gt;Basic&lt;/option&gt;\n# =&gt; &lt;option value=\"Advanced\"&gt;Advanced&lt;/option&gt;\n# =&gt; &lt;option value=\"Super Platinum\" disabled=\"disabled\"&gt;Super Platinum&lt;/option&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 1706670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a901672979d5870dc01f9787c0b2a4?s=128&d=identicon&r=PG", "display_name": "PGill", "link": "https://stackoverflow.com/users/1706670/pgill"}, "is_accepted": false, "score": 0, "last_activity_date": 1549984594, "creation_date": 1549984594, "answer_id": 54653256, "question_id": 54635799, "link": "https://stackoverflow.com/questions/54635799/how-to-only-allow-of-users-to-select-one-question/54653256#54653256", "title": "How to only allow of users to select one question", "body": "<p>You can add some jquery to do this</p>\n\n<p>for example</p>\n\n<pre><code>$(document).ready -&gt;\n  questionOpts = $(\".questions select:first option\")\n\n  $(\".questions select\").change -&gt;\n    trigger = this\n\n    $(\".questions select\").each -&gt;\n      select = this\n\n      if select != trigger\n        selectedValues = $(\".questions select\").map -&gt; \n          if this != select\n            this.value if this.value != \"\"\n\n        opts = questionOpts.clone().map -&gt; \n          if jQuery.inArray(this.value, selectedValues) == -1\n            if this.value == select.value\n              $(this).prop(\"selected\", true)\n            this\n\n        $(select).empty()\n        $(select).append(opts)\n\n\n  $(\".questions select\").trigger(\"change\")\n</code></pre>\n\n<p><br></p>\n\n<pre><code>&lt;div class=\"questions\"&gt;\n  &lt;select name=\"x\"&gt;\n    &lt;option value=\"\"&gt;&lt;/option&gt;\n    &lt;option value=\"1\"&gt;1&lt;/option&gt;\n    &lt;option value=\"2\"&gt;2&lt;/option&gt;\n    &lt;option value=\"3\"&gt;3&lt;/option&gt;\n    &lt;option value=\"4\"&gt;4&lt;/option&gt;\n    &lt;option value=\"5\"&gt;5&lt;/option&gt;\n  &lt;/select&gt;\n  &lt;select name=\"y\"&gt;\n    &lt;option value=\"\"&gt;&lt;/option&gt;\n    &lt;option value=\"1\"&gt;1&lt;/option&gt;\n    &lt;option value=\"2\"&gt;2&lt;/option&gt;\n    &lt;option value=\"3\"&gt;3&lt;/option&gt;\n    &lt;option value=\"4\"&gt;4&lt;/option&gt;\n    &lt;option value=\"5\"&gt;5&lt;/option&gt;\n  &lt;/select&gt;\n  &lt;select name=\"z\"&gt;\n    &lt;option value=\"\"&gt;&lt;/option&gt;\n    &lt;option value=\"1\"&gt;1&lt;/option&gt;\n    &lt;option value=\"2\"&gt;2&lt;/option&gt;\n    &lt;option value=\"3\"&gt;3&lt;/option&gt;\n    &lt;option value=\"4\"&gt;4&lt;/option&gt;\n    &lt;option value=\"5\"&gt;5&lt;/option&gt;\n  &lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10914502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16142499d9bb2c0fb5a2a0b21801bec5?s=128&d=identicon&r=PG&f=1", "display_name": "manny steele", "link": "https://stackoverflow.com/users/10914502/manny-steele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549984594, "creation_date": 1549905421, "last_edit_date": 1549915371, "question_id": 54635799, "link": "https://stackoverflow.com/questions/54635799/how-to-only-allow-of-users-to-select-one-question", "title": "How to only allow of users to select one question", "body": "<p>when my users sign up they have to pick three security questions and answer. Within the question I have six questions those are defined as helper methods for example here is a picture</p>\n\n<p><a href=\"https://i.stack.imgur.com/JnpaY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JnpaY.png\" alt=\"security questions example\"></a></p>\n\n<p>Is there any way I can take away a prompt question after being selected the first time? For example for the first question they select \"What is your father middle name\". Now for the second question they cant select that prompt question any more because they already answered it the first time.</p>\n\n<p>Here's my code below</p>\n\n<pre><code>&lt;%= f.fields_for :role do |r| %&gt;\n  &lt;%= r.fields_for :user do |u| %&gt;\n    &lt;% i = 0 %&gt;\n    &lt;%= u.fields_for :security_questions do |ff| %&gt;\n      &lt;div class=\"group\"&gt;\n        &lt;%= ff.select :key, options_for_select(sec_questions, selected: i), {}, { :class =&gt; 'half' } %&gt;\n        &lt;%= ff.text_field :value, placeholder: \"Answer #{i+1}\", class: \"half\", \"data-validate\": '[\"empty\"]' %&gt;\n        &lt;div class=\"push\"&gt;&lt;/div&gt;\n      &lt;/div&gt;&lt;!--group--&gt;\n      &lt;% i = i+1 %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 5508587, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b83b5e815ec21ecea5aace6268410ed?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5508587/dan"}, "edited": false, "score": 0, "creation_date": 1549902512, "post_id": 54634749, "comment_id": 96062054, "body": "Thank you. I didn&#39;t expect it to be that simple."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1549901894, "creation_date": 1549901894, "answer_id": 54634749, "question_id": 54634704, "link": "https://stackoverflow.com/questions/54634704/refresh-class-instance-variable-that-is-set-with/54634749#54634749", "title": "Refresh class instance variable that is set with ||=", "body": "<blockquote>\n  <p>How can one go about \"refreshing\" the instance variable?</p>\n</blockquote>\n\n<p>Simply set it to <code>nil</code>. Then, upon next call, it'll be reloaded from the db.</p>\n\n<p>Or you could proactively replace the value yourself. First, separate memoization and computation.</p>\n\n<pre><code>def self.get_lastname(client_id)\n  @client_by_lastname ||= compute_client_by_last_name\n\nend\n\ndef compute_client_by_last_name\n  Client.select(:id, :lastname)\n      .map{|e| e.attributes.values}\n      .inject({}){|memo, client| memo[client[0]] = client[1]; memo}\nend\n</code></pre>\n\n<p>Then, when you want to refresh the state (in an after_save callback or wherever)</p>\n\n<pre><code>@client_by_lastname = compute_client_by_last_name\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 5508587, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b83b5e815ec21ecea5aace6268410ed?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5508587/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "accepted_answer_id": 54634749, "answer_count": 1, "score": 2, "last_activity_date": 1549904776, "creation_date": 1549901737, "last_edit_date": 1549904776, "question_id": 54634704, "link": "https://stackoverflow.com/questions/54634704/refresh-class-instance-variable-that-is-set-with", "title": "Refresh class instance variable that is set with ||=", "body": "<p>I have a model instance variable in which I keep descriptions that will be \"mostly\" static throughout the application. </p>\n\n<p>The code looks like this</p>\n\n<pre><code>def self.get_lastname(client_id)\n  @client_by_lastname ||= Client.select(:id, :lastname)\n  .map{|e| e.attributes.values}\n  .inject({}){|memo, client| memo[client[0]] = client[1]; memo}\n  return @client_by_lastname[client_id] if @client_by_lastname[client_id]\n\n  result = Client.select('lastname').where('id = ?',client_id)\n  return @client_by_lastname[client_id] = result[0].lastname \nend\n</code></pre>\n\n<p>So essentially. On first load it stores the clients and their last names in an array. However a client \"May\" change last name every once in a while when a client is bought by another entity. The client ID remains the same but the first name and last name will change. When that happens, this client last name ends up being wrong in the app and we essentially have to restart the app for the instance variable to be reset.</p>\n\n<p>There has to be a way to reset these instance variables so that they are reloaded the next time they are queried. I would then place an after_save callback on the client file when the first name or last name is modified and get that instance variable reloaded.</p>\n\n<p>How can one go about \"refreshing\" the instance variable?</p>\n"}, {"tags": ["ruby", "reactjs", "getstream-io"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11046168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e63e60cd378007a9d20946230e49ebb?s=128&d=identicon&r=PG&f=1", "display_name": "MathEman", "link": "https://stackoverflow.com/users/11046168/matheman"}, "edited": false, "score": 0, "creation_date": 1549956094, "post_id": 54642732, "comment_id": 96080625, "body": "Thank for your Answer! So in the free plan stream does not seem to give email support - only through stackoverflow.  This is why I asked the question here, but I guess I can try to contact their sales department to inquire about that.  Anyway good to know that there is no way to do that without support."}], "tags": [], "owner": {"reputation": 10841, "user_id": 460417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a381152cd980d15f58e0016c996ab254?s=128&d=identicon&r=PG", "display_name": "Tommaso Barbugli", "link": "https://stackoverflow.com/users/460417/tommaso-barbugli"}, "is_accepted": true, "score": 0, "last_activity_date": 1549944963, "creation_date": 1549944963, "answer_id": 54642732, "question_id": 54634683, "link": "https://stackoverflow.com/questions/54634683/getstream-flat-feed-where-multiple-users-can-post/54642732#54642732", "title": "getStream - Flat Feed where multiple users can post", "body": "<p>When using Stream with React users can only post to their own user feed, this is a default permission policy that can be changed by Stream.</p>\n\n<p>I suggest reaching to Stream support by email and ask to change the permission policy.</p>\n"}], "owner": {"reputation": 13, "user_id": 11046168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e63e60cd378007a9d20946230e49ebb?s=128&d=identicon&r=PG&f=1", "display_name": "MathEman", "link": "https://stackoverflow.com/users/11046168/matheman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 54642732, "answer_count": 1, "score": 1, "last_activity_date": 1549944963, "creation_date": 1549901660, "question_id": 54634683, "link": "https://stackoverflow.com/questions/54634683/getstream-flat-feed-where-multiple-users-can-post", "title": "getStream - Flat Feed where multiple users can post", "body": "<p>we are implementing stream in our application and so far we love the out of the box <a href=\"https://github.com/GetStream/react-activity-feed\" rel=\"nofollow noreferrer\">react components</a> as well as the backend implementation <a href=\"https://github.com/GetStream/stream-ruby\" rel=\"nofollow noreferrer\">stream ruby</a> - this is our setup currently.</p>\n\n<p>We are close to deploying a first MVP but found that it seems to be not possible to post activities to a flat feed from multiple users by default.</p>\n\n<p>Our use case is that we have a group of people that want to post activities about a certain topic (think facebook groups). Therefore we create a feed for the object (lets say a company) and want each user to be able to post activities there. Our current workaround is to add the author id as additional data and add a custom header to a activity - obviously not the best solution as reactions won't work that way.</p>\n\n<p>Looking around we found that this seems to not work out of the box see <a href=\"https://github.com/GetStream/react-activity-feed/issues/23\" rel=\"nofollow noreferrer\">this issue</a> and <a href=\"https://stackoverflow.com/questions/54487890/a-feed-in-which-different-users-can-add-activities\">this question</a>.</p>\n\n<p>Is this a feature that is only available to paying customers or how can we activate it?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6442632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca88b37c26bf9b206433998d3e9e75b9?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Turner", "link": "https://stackoverflow.com/users/6442632/austin-turner"}, "edited": false, "score": 0, "creation_date": 1549907961, "post_id": 54634757, "comment_id": 96064964, "body": "Thanks for the info!"}], "tags": [], "owner": {"reputation": 7752, "user_id": 1087469, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/84cd9fd20832381fc78084aac4cb4b6c?s=128&d=identicon&r=PG", "display_name": "leifg", "link": "https://stackoverflow.com/users/1087469/leifg"}, "is_accepted": false, "score": 0, "last_activity_date": 1549901916, "creation_date": 1549901916, "answer_id": 54634757, "question_id": 54634084, "link": "https://stackoverflow.com/questions/54634084/what-does-the-operator-do-before-an-array-of-attributes/54634757#54634757", "title": "What does the * operator do before an array of attributes?", "body": "<p>The <code>*</code> operator in front of an array is called the splat operator.</p>\n\n<p>The dig method signature takes multiple arguments. If you want to convert an array into a list of arguments, that is what the splat operator does: <a href=\"https://medium.freecodecamp.org/rubys-splat-and-double-splat-operators-ceb753329a78\" rel=\"nofollow noreferrer\">https://medium.freecodecamp.org/rubys-splat-and-double-splat-operators-ceb753329a78</a>.</p>\n\n<p>The reason why it returns nil is because dig will lookup the key <code>[:person, :attributes]</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>json = {person: {attributes: \"something\"} }\njson.dig(*PERSON_ATTRS) # something\n</code></pre>\n\n<pre><code>json = {[:person :attributes] =&gt; \"something\"} }\njson.dig(PERSON_ATTRS) # something\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6442632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca88b37c26bf9b206433998d3e9e75b9?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Turner", "link": "https://stackoverflow.com/users/6442632/austin-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1549912753, "answer_count": 1, "score": 0, "last_activity_date": 1549901916, "creation_date": 1549899620, "question_id": 54634084, "link": "https://stackoverflow.com/questions/54634084/what-does-the-operator-do-before-an-array-of-attributes", "closed_reason": "Duplicate", "title": "What does the * operator do before an array of attributes?", "body": "<p>I saw this line of code in an article I was reading and couldn't figure out what the * is.</p>\n\n<pre><code>module Presenter\n  class Person\n    attr_reader :json\n\n    PERSON_ATTRS  = [:person, :attributes]\n    COUNTRY_NAME  = PERSON_ATTRS + [:address, :country, :name]\n    STREET_NAME   = PERSON_ATTRS + [:address, :street]\n\n    def initialize(person_json)\n      @json = person_json\n    end\n\n    def country\n      json.dig(*COUNTRY_NAME)\n    end\n\n    def street\n      json.dig(*STREET_NAME)\n    end\n  end\nend\n</code></pre>\n\n<p>It comes before the array of attributes and when I run the code without the * the dig returns nil. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 2, "creation_date": 1549897402, "post_id": 54633201, "comment_id": 96058908, "body": "Try putting in double quotes <code>echo &quot;don\\&#39;t&quot;</code>. Bash does not handle escaped single quotes inside a set of single quotes"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1549897530, "post_id": 54633201, "comment_id": 96058996, "body": "I can&#39;t. The str parameter could have double quotes as well. It depends on the user. Using &quot;&quot; will prevent using &quot; inside."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1549898400, "post_id": 54633201, "comment_id": 96059580, "body": "I want to escape the quote. But for some strange reason, this works in sh or BASH, but doesn&#39;t work with sh from Ruby! I can&#39;t find out the reason."}], "answers": [{"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1549899370, "post_id": 54633718, "comment_id": 96060196, "body": "Thank you very much for your comment. I have now done this: <code>str = str.gsub(&#39;&quot;&#39;, (&quot;\\\\\\&quot;&quot;))</code> <code>Open3.capture2(&quot;#{EXEC} type --delay 0 \\&quot;#{str}\\&quot;&quot;)</code> And it now works!"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1549900762, "post_id": 54633718, "comment_id": 96061000, "body": "I also have to <code>str = str.gsub(&#39;&quot;&#39;, (&quot;\\\\\\&quot;&quot;)).gsub(&#39;$&#39;, &#39;\\$&#39;)</code> because otherwise if my argument goes like &#39;$HOME&#39; it types <code>&#47;home&#47;sourav</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 2, "creation_date": 1549901010, "post_id": 54633718, "comment_id": 96061151, "body": "You may be better off using the form of <code>capture2</code> that takes the command name and its arguments as a list, rather than a single string to be parsed by the shell. Something like <code>capture2(&quot;#{EXEC}&quot;, &quot;type&quot;, &quot;--delay&quot;, &quot;0&quot;, &quot;#{str}&quot;)</code> (my knowledge of Ruby is shaky), so that you don&#39;t need to escape any quotes ahead of time."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1549912732, "post_id": 54633718, "comment_id": 96067210, "body": "That last comment (without the extra string interpolation: <code>Open3.capture2(EXEC, &#39;type&#39;, &#39;--delay&#39;, &#39;0&#39;, str)</code>) really should be your answer. There&#39;s no need whatsoever to be messing around with escaping and shells here."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 1, "last_activity_date": 1549898423, "creation_date": 1549898423, "answer_id": 54633718, "question_id": 54633201, "link": "https://stackoverflow.com/questions/54633201/while-using-a-single-quote-in-a-string-in-shell-with-ruby-i-get-sh-c-line-0/54633718#54633718", "title": "While using a single quote in a string in shell with Ruby I get sh: -c: line 0: unexpected EOF while looking for matching `&#39;&#39;", "body": "<p>In shell, you simply cannot include a single quote inside a single-quoted string. It has to be in a double-quoted string. That means, if you want an argument that contains <em>both</em>, you need to concatenate separately quoted stings together.</p>\n\n<pre><code>echo 'He said \"I can'\"'\"t'\"'\n</code></pre>\n\n<p>or escape the double quotes inside a double-quoted string</p>\n\n<pre><code>echo \"He said \\\"I can't\\\"\"\n</code></pre>\n\n<p>(Some shells provide yet another form of quoting that <em>can</em> contain an escaped single quote, namely <code>$'He said \"I can\\'t\"'</code>. However, that's an extension to the POSIX standard that you can't assume is supported by the\nshell Ruby will use to execute your command.)</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 54633718, "answer_count": 1, "score": 0, "last_activity_date": 1549898423, "creation_date": 1549896769, "last_edit_date": 1549898078, "question_id": 54633201, "link": "https://stackoverflow.com/questions/54633201/while-using-a-single-quote-in-a-string-in-shell-with-ruby-i-get-sh-c-line-0", "title": "While using a single quote in a string in shell with Ruby I get sh: -c: line 0: unexpected EOF while looking for matching `&#39;&#39;", "body": "<p>This works fine in Ruby, and it should work:</p>\n\n<p><code>puts 'don\\'t'</code></p>\n\n<p>But I want to run the same in BASH with Ruby:</p>\n\n<p><code>%x(echo 'don\\'t')</code></p>\n\n<p>I get this error:\n<code>sh: -c: line 0: unexpected EOF while looking for matching</code>''`</p>\n\n<p>Same error occurs with ``, <code>system()</code>, <code>Open3</code></p>\n\n<p>My actual code snippet:</p>\n\n<pre><code>require 'open3'\n\nmodule XdoTool\n    BIN = 'xdotool'\n    EXEC = ::ENV['PATH'].split(::File::PATH_SEPARATOR).map { |path| ::File.join(path, BIN) if ::File.executable?(::File.join(path, BIN)) }.compact.last\n    raise RuntimeError, \"No #{BIN} found in the exported paths. Please make sure you have #{BIN} installed\" unless EXEC\n\n    class &lt;&lt; self\n        def type(str)\n            Open3.capture2(\"#{EXEC} type --delay 0 '#{str = str.gsub(\"'\", '\\'')}'\")\n            str\n        end\n    end\nend\n\n# Types the quoted text anywhere.\nXdoTool.type(\"What is the reason of the error?\")\n\n\n# sh: -c: line 0: unexpected EOF while looking for matching `''\n# sh: -c: line 1: syntax error: unexpected end of file\nXdoTool.type(\"What's the reason of the error?\")\n</code></pre>\n\n<p>Please do note that the str can have anything. It can contain alphanumeric characters, symbols, emojis, or combination of all these things. How can I get around the problem with quotes here?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "date"], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 4, "last_activity_date": 1549896726, "creation_date": 1549896726, "answer_id": 54633178, "question_id": 54633098, "link": "https://stackoverflow.com/questions/54633098/how-to-query-a-date-using-strftime-to-format/54633178#54633178", "title": "How to query a date using strftime to format", "body": "<p>You have the <code>DATE_FORMAT</code> function for that <a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format</a></p>\n\n<pre><code>DATE_FORMAT(date_closed, \"%Y-%m\")\n</code></pre>\n\n<p>EDIT: you'll have to also format the date you are passing to the query</p>\n"}, {"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 2, "last_activity_date": 1549896769, "creation_date": 1549896769, "answer_id": 54633200, "question_id": 54633098, "link": "https://stackoverflow.com/questions/54633098/how-to-query-a-date-using-strftime-to-format/54633200#54633200", "title": "How to query a date using strftime to format", "body": "<p>You can use mysql data functionos <a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year\" rel=\"nofollow noreferrer\"><code>YEAR</code></a> and <a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month\" rel=\"nofollow noreferrer\"><code>MONTH</code></a>:</p>\n\n<pre><code>Score.where('user_id = ? AND YEAR(date_closed) = ? AND MONTH(date_closed) = ?', current_user.id, date.year, date.month)\n</code></pre>\n"}], "owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 54633178, "answer_count": 2, "score": 1, "last_activity_date": 1549897273, "creation_date": 1549896456, "last_edit_date": 1549897273, "question_id": 54633098, "link": "https://stackoverflow.com/questions/54633098/how-to-query-a-date-using-strftime-to-format", "title": "How to query a date using strftime to format", "body": "<p>I am trying to grab all the records for the month.  The string I have to query with is in this format <code>2019-01-12</code>.  The record I am querying for is a DateTime record so it has a format like this <code>2018-08-11 13:39:22.959330</code>.</p>\n\n<p>So I am trying to structure a query that would achieve this</p>\n\n<pre><code>Score.where('user_id = ? AND date_closed.strftime(\"%Y-%m) = ?', current_user.id, date)\n</code></pre>\n\n<p>Where <code>date</code> is the <code>2019-01-12</code> string.  The above code produces the error </p>\n\n<blockquote>\n  <p>FUNCTION date_closed.strftime does not exist</p>\n</blockquote>\n\n<p>I did google but was unable to locate something that achieved this.  Most solutions involved searching inside a range of dates, I would really like to try to keep the search method the same.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "edited": false, "score": 0, "creation_date": 1549894164, "post_id": 54632148, "comment_id": 96056922, "body": "Check this question <a href=\"https://stackoverflow.com/questions/22943892/actioncontrollerunknownformat\" title=\"actioncontrollerunknownformat\">stackoverflow.com/questions/22943892/&hellip;</a> it seems like when the format is being submitted the proper format is being sent, but when you do the <code>keyup</code> submission you are not sending any format or it&#39;s missing so the controller does not know how to render the response."}], "answers": [{"comments": [{"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1549898054, "post_id": 54633003, "comment_id": 96059346, "body": "Thanks. I&#39;m having trouble finding a reference to this in the documentation. I&#39;d be thankful if anyone could point me towards the relevant pages."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 1, "creation_date": 1549903955, "post_id": 54633003, "comment_id": 96062964, "body": "@user3574603 I&#39;ve added the links to the actual source, I really don&#39;t know if there&#39;s an official doc for this"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 3, "last_activity_date": 1549903776, "last_edit_date": 1549903776, "creation_date": 1549896128, "answer_id": 54633003, "question_id": 54632148, "link": "https://stackoverflow.com/questions/54632148/rails-javascript-why-do-i-get-an-error-when-i-submit-my-form-via-javascript-su/54633003#54633003", "title": "Rails/Javascript: Why do I get an error when I submit my form via javascript `submit()`?", "body": "<p>Rails' <code>form_with</code> helper sets the form to be <code>remote: true</code> by default. So, when you submit the form, Rails' UJS steps in the middle and creates an ajax request. When you use the <code>submit()</code> method on the form, it does not allow Rails to handle the ajax request properly because it does not trigger the events Rails is expecting.</p>\n\n<p>You can use Rails' javascript object helper methods to trigger the submission instead of the javascript's <code>submit()</code> method. Something like:</p>\n\n<pre><code>document.getElementById('filter-text-field').addEventListener('keyup', function(){\n  Rails.fire(this.form, 'submit')\n})\n</code></pre>\n\n<p>This will trigger the 'submit' event instead of submitting the form, so now all rails' callback will handle rails' attributes like <code>remote: true</code>, <code>disable_with: ...</code>, <code>confirm: ...</code>, etc.</p>\n\n<p>EDIT: addign references:\n<a href=\"https://github.com/rails/rails/tree/master/actionview/app/assets/javascripts/rails-ujs\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/tree/master/actionview/app/assets/javascripts/rails-ujs</a></p>\n\n<p>start.coffee sets the events callbacks and utils/events.coffee defines the <code>fire</code> function</p>\n\n<p>EDIT2: This is the part where Rails adds all the callbacks for the form's <code>submit</code> event <a href=\"https://github.com/rails/rails/blob/master/actionview/app/assets/javascripts/rails-ujs/start.coffee#L55-L62\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/actionview/app/assets/javascripts/rails-ujs/start.coffee#L55-L62</a></p>\n\n<p>This is the function to fire events using Rails' helper class <a href=\"https://github.com/rails/rails/blob/master/actionview/app/assets/javascripts/rails-ujs/utils/event.coffee#L34\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/actionview/app/assets/javascripts/rails-ujs/utils/event.coffee#L34</a></p>\n\n<p>I'm not sure if there's a DOC for this, I've learned this reading the code on my own, I'm not sure where to point you other than the source, sorry!</p>\n"}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54633003, "answer_count": 1, "score": 4, "last_activity_date": 1549903776, "creation_date": 1549893405, "question_id": 54632148, "link": "https://stackoverflow.com/questions/54632148/rails-javascript-why-do-i-get-an-error-when-i-submit-my-form-via-javascript-su", "title": "Rails/Javascript: Why do I get an error when I submit my form via javascript `submit()`?", "body": "<p>I have a search form in a view.</p>\n\n<pre><code>  &lt;%= form_with url: issues_path, class: 'filter-box' do %&gt;\n    &lt;%= text_field_tag(:filter_by, '', id: 'filter-text-field') %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>When the form is submitted, the following action is run:</p>\n\n<pre><code>class IssuesController &lt; ApplicationController\n  ...\n\n  def create\n    @labels = Label.by_search_term(params[:filter_by])\n    respond_to do |format|\n      format.js\n    end\n  end\nend\n</code></pre>\n\n<p>All works well.</p>\n\n<p>However, I want the action to be triggered with every keystroke. To that end, I have added the following javascript.</p>\n\n<pre><code>  &lt;script&gt;\n    document.getElementById('filter-text-field').addEventListener('keyup', function(){\n      document.querySelector('.filter-box').submit()\n    })\n  &lt;/script&gt;\n</code></pre>\n\n<p>But when the form is submitted on key up it breaks and I get an error: <code>ActionController::UnknownFormat in IssuesController#create</code>.</p>\n\n<p>Looking at the params, I don't see anything notable.</p>\n\n<pre><code># Submitted by pressing return\n# =&gt; &lt;ActionController::Parameters {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"TJRajeBbEK8+D0Ly5/lbI/SVx8srhG/YS2W1l+Zc+f+TYmsbfehXnsluxOovblCrWBLJy0exhyzhsY+qPhBDOQ==\", \"filter_by\"=&gt;\"d\", \"controller\"=&gt;\"issues\", \"action\"=&gt;\"create\"} permitted: false&gt;\n\n# Submitted on keyup\n# =&gt; &lt;ActionController::Parameters {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"7NBwqCuJpbFGvxWgq6qqdB1hF0yptca0N446G4nQ620zJkE+tjrigLHek7hjPaH8seYZTMWALkCdWgAmUZxRqw==\", \"filter_by\"=&gt;\"d\", \"controller\"=&gt;\"issues\", \"action\"=&gt;\"create\"} permitted: false&gt;\n</code></pre>\n\n<p>What is the difference between submitting the form by pressing enter and submitting the form via javascript? What do I need to do to ensure it works correctly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "modal-dialog", "popup"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1549891493, "post_id": 54631342, "comment_id": 96055304, "body": "Lot of documentation to read."}], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 10990424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8inwPgDbAQM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhZ4jjp3gjVn4YINbUS2MCkhCQdA/mo/photo.jpg?sz=128", "display_name": "Rob Nice", "link": "https://stackoverflow.com/users/10990424/rob-nice"}, "is_accepted": true, "score": 0, "last_activity_date": 1549895433, "creation_date": 1549895433, "answer_id": 54632780, "question_id": 54631342, "link": "https://stackoverflow.com/questions/54631342/popup-modal-when-submitting-a-form-depending-on-what-information-has-been-ent/54632780#54632780", "title": "Popup / modal when submitting a form, depending on what information has been entered into the form", "body": "<p>For you first scenario, you could look at implementing your own validtions on your ActiveRecord Model, <a href=\"https://guides.rubyonrails.org/active_record_validations.html#custom-methods\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_validations.html#custom-methods</a>. Form data gets submitted via AJAX, check your JSON response for any errors, show the modal with the errors if any.</p>\n\n<p>For the second scenario, I would add client side validations. Have your JS check the fields when the form is being submitted, if they're empty, show the 'Are you sure?' modal. If they click 'Yes', then we go to scenario one checking for any errors.</p>\n\n<p>Lastly, if the form is submitted successfully, clear all the fields via JS and show a success message.</p>\n"}], "owner": {"reputation": 57, "user_id": 10749227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cfd24ed84691ff5357a5dc5a38626ef?s=128&d=identicon&r=PG&f=1", "display_name": "DevCF", "link": "https://stackoverflow.com/users/10749227/devcf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54632780, "answer_count": 1, "score": 0, "last_activity_date": 1549895433, "creation_date": 1549890490, "question_id": 54631342, "link": "https://stackoverflow.com/questions/54631342/popup-modal-when-submitting-a-form-depending-on-what-information-has-been-ent", "title": "Popup / modal when submitting a form, depending on what information has been entered into the form", "body": "<p>I'm looking for advice on the best way to implement a popup / modal on form submit in Ruby/Rails.</p>\n\n<p>I have a simple form, with a submit button, which works as expected (updates the relevant fields in the database). </p>\n\n<p>I have been given additional requirements: Depending on the information that is input into the form, when submitting the form there should be a modal / popup. An overview of the different requirements for this are below:</p>\n\n<ol>\n<li><p>When certain fields are updated but the information conflicts an earlier update (for example, a date field is updated, but a different date has already been set previously), a popup / modal with an error will appear, and when clicking OK will return to the form with any input still in place (i.e. does not refresh the form). There are three different scenarios with three different error types, so three different error messages are needed. </p></li>\n<li><p>When certain fields are updated but others are left blank, a popup / modal with an 'Are you sure?' type message will appear. Again there are three different scenarios, so three different messages needed. There will be Cancel and OK buttons: Cancel will return to the form with any input still in place, OK will submit the form.</p></li>\n<li><p>Finally, if the form is updated with no issues (i.e. none of the above are true), then the form will submit with no popup / modal (i.e. a standard form submit).</p></li>\n</ol>\n\n<p>I've looked into creating modals, but because of the seven different scenarios/requirements I have, I'm struggling to find a suitable way in which to implement this. The first thing that comes to mind is that there will be a lot of if-statements, but I feel there must be a more effective way to do it. There are a couple of modals in the code that I have looked at (which were done before I took over the project), which use button_tag, but I don't know if I would want to use the same format in a form.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "is_accepted": false, "score": 0, "last_activity_date": 1549895573, "creation_date": 1549895573, "answer_id": 54632830, "question_id": 54630345, "link": "https://stackoverflow.com/questions/54630345/reuse-template-across-different-recipes/54632830#54632830", "title": "Reuse template across different recipes", "body": "<p>I guess you can write a module and include it in your recipes as you do in plain Ruby.</p>\n\n<pre><code>module StackFile\n...the code you want to share...\nend\n</code></pre>\n\n<p>Then you can use:</p>\n\n<pre><code>inlclude StackFile\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Chef::Recipe.send(:include, StackFile)\n</code></pre>\n\n<p>or when using <code>*_if</code> conditions</p>\n\n<pre><code>Chef::Resource.send(:include, StackFile)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 744, "user_id": 6779132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84aeba0b54dc545dff6b0adf6c9ca02?s=128&d=identicon&r=PG&f=1", "display_name": "Mat&#250;\u0161 Z&#225;bojn&#237;k", "link": "https://stackoverflow.com/users/6779132/mat%c3%ba%c5%a1-z%c3%a1bojn%c3%adk"}, "is_accepted": false, "score": 0, "last_activity_date": 1550498179, "creation_date": 1550498179, "answer_id": 54748889, "question_id": 54630345, "link": "https://stackoverflow.com/questions/54630345/reuse-template-across-different-recipes/54748889#54748889", "title": "Reuse template across different recipes", "body": "<p>Do this:</p>\n\n<ol>\n<li>create new cookbook.</li>\n<li>don't create recipes in it, but instead create a resource</li>\n<li>you can define any parameters (inputs like source file, dest file etc like you mentioned)</li>\n<li>add your templates to the new cookbook.</li>\n<li>in your other cookbooks, create dependency to the previously created cookbook. This will enable you to call the resource you created there (remember that when you call resource from another cookbook and it is creating templates, it will try to take the template file from the current cookbook and not the one where the resource is defined. That is why you need to specify cookbook name when creating template (in the shared cookbook's resource) - see cookbook attribute of <a href=\"https://docs.chef.io/resource_template.html\" rel=\"nofollow noreferrer\">https://docs.chef.io/resource_template.html</a>)</li>\n<li>Repeat for any number of cookbooks.</li>\n</ol>\n"}], "owner": {"reputation": 3647, "user_id": 4093955, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/bjZjz.jpg?s=128&g=1", "display_name": "Ay0", "link": "https://stackoverflow.com/users/4093955/ay0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550498179, "creation_date": 1549887037, "last_edit_date": 1549893881, "question_id": 54630345, "link": "https://stackoverflow.com/questions/54630345/reuse-template-across-different-recipes", "title": "Reuse template across different recipes", "body": "<p>I have a Chef cookbook with many recipes that have the same code, beside other particular things.</p>\n\n<pre><code>template 'stack_file' do\n    local true\n    source File.join(base_dir, 'stack_templates/admin.yml.erb')\n    path File.join(base_dir, 'stacks/admin.yml')\n    variables(context)\nend\n\ntemplate 'settings_file' do\n    sensitive true\n    local true\n    source File.join(base_dir, 'config_templates/settings_admin.yml.erb')\n    path File.join(base_dir, 'configs/settings_admin.yml')\n    variables(context)\nend\n</code></pre>\n\n<p>Is it possible to somehow put this code in a method that I would call with my <code>source_file</code>, <code>destination_file</code> and <code>variables</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 198, "user_id": 9254919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kOgqw.png?s=128&g=1", "display_name": "mogbee", "link": "https://stackoverflow.com/users/9254919/mogbee"}, "edited": false, "score": 0, "creation_date": 1549887118, "post_id": 54629290, "comment_id": 96052774, "body": "I don&#39;t know how you register skills array in the database, but if it is an array it should be filtered by array. For example, <code>filter :profile_skills, label: &#39;Skills&#39;, as: :select, collection: &quot;your list of skills&quot;</code>"}, {"owner": {"reputation": 1641, "user_id": 790737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b5cec3d638d5eeefd2b32800907397?s=128&d=identicon&r=PG", "display_name": "Sjors Branderhorst", "link": "https://stackoverflow.com/users/790737/sjors-branderhorst"}, "edited": false, "score": 0, "creation_date": 1549889457, "post_id": 54629290, "comment_id": 96054136, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/34250624/activeadmin-filter-on-postgres-array-field\" title=\"activeadmin filter on postgres array field\">stackoverflow.com/questions/34250624/&hellip;</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "edited": false, "score": 0, "creation_date": 1549944839, "post_id": 54638537, "comment_id": 96076907, "body": "i am getting this error after the changes as u told undefined method `skills_include_contains&#39; for #&lt;Ransack::Search:0x00007fdb9b5df150&gt;"}, {"owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "reply_to_user": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "edited": false, "score": 0, "creation_date": 1549951393, "post_id": 54638537, "comment_id": 96078756, "body": "@Usar I updated answer to work with contains predicate. You can read more about ransack predicates syntax here <a href=\"https://github.com/activerecord-hackery/ransack/wiki/Basic-Searching\" rel=\"nofollow noreferrer\">github.com/activerecord-hackery/ransack/wiki/Basic-Searching</a>"}, {"owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "reply_to_user": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "edited": false, "score": 0, "creation_date": 1549953273, "post_id": 54638537, "comment_id": 96079436, "body": "What exactly? Have you tried to isolate the problem? Test if AR scope works. Probably skills field isn\u2019t an array, but serialized to string array. Sharing table schema and model definition may help"}, {"owner": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "edited": false, "score": 0, "creation_date": 1549955988, "post_id": 54638537, "comment_id": 96080583, "body": "here is my schema: create_table &quot;jobseeker_profiles&quot;, force: :cascade do |t|     t.text &quot;skills&quot;, default: [], array: true     t.index [&quot;jobseeker_id&quot;], name: &quot;index_jobseeker_profiles_on_jobseeker_id&quot;   end and i am using postgress so i havnot added serialize :skills, Array as my db is postgress. I am getting this error undefined method `where_skills_contains&#39; for #&lt;Ransack::Search:0x00007fb09631c2b8&gt;"}, {"owner": {"reputation": 2921, "user_id": 5247504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mj5GY.jpg?s=128&g=1", "display_name": "rkyr", "link": "https://stackoverflow.com/users/5247504/rkyr"}, "edited": false, "score": 0, "creation_date": 1579994759, "post_id": 54638537, "comment_id": 105953493, "body": "the answer is correct and should be accepted. except that I omitted <code>private_class_method</code> part to get it to work"}], "tags": [], "owner": {"reputation": 1020, "user_id": 1590204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf73dd8e0bc2feed3abe4e88626e42?s=128&d=identicon&r=PG&f=1", "display_name": "Tema Bolshakov", "link": "https://stackoverflow.com/users/1590204/tema-bolshakov"}, "is_accepted": false, "score": 2, "last_activity_date": 1583346936, "last_edit_date": 1583346936, "creation_date": 1549916594, "answer_id": 54638537, "question_id": 54629290, "link": "https://stackoverflow.com/questions/54629290/active-admin-custom-filter-for-serialized-attribute/54638537#54638537", "title": "active admin custom filter for serialized attribute", "body": "<p>ActiveAdmin use <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">ransack</a> gem for filtering. The simplest way to filter by array using ransack is to define scope in model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Profile &lt; ApplicationRecord\n  # @!method skills_includes(skill)\n  #   @param skill [String]\n  #   @return [ActiveRecord::Relation&lt;Profile&gt;]\n  scope :where_skills_contains, -&gt;(skill) { where(\"skills @&gt; ?\", \"{#{skill}}\") }\nend\n</code></pre>\n\n<p>Using this scope you can filter profiles by skills like this <code>Profile. skills_include('java')</code>.</p>\n\n<p>By default ransack doesn't allow to use scopes for filtering, so you have to <a href=\"https://github.com/activerecord-hackery/ransack#using-scopesclass-methods\" rel=\"nofollow noreferrer\">whitelist</a> this scope:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Profile\n  def self.ransackable_scopes(*)\n    %i(where_skills_contains) \n  end\nend\n</code></pre>\n\n<p>Now it's possible ransackable scope in a filter:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>filter :where_skills_contains, label: :skills, as: :string\n</code></pre>\n\n<p>Note, you can't name filter (and scope) <code>skills_contains</code>, because it will generate completely different query to database.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&gt; Profile.ransack(where_skills_contains: 'java').result.to_sql \n#=&gt; SELECT \"profiles\".* FROM \"profiles\" WHERE (skills @&gt; '{java}')\n&gt; Profile.ransack(skills_contains: 'java').result.to_sql\n#=&gt; SELECT \"profiles\".* FROM \"profiles\" WHERE (\"profiles\".\"skills\" ILIKE '{%java%}')\n</code></pre>\n"}], "owner": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1583382560, "creation_date": 1549883507, "last_edit_date": 1583382560, "question_id": 54629290, "link": "https://stackoverflow.com/questions/54629290/active-admin-custom-filter-for-serialized-attribute", "title": "active admin custom filter for serialized attribute", "body": "<p>I have the following models:</p>\n\n<pre><code>Class User &lt; ApplicationRecord\n  has_one :profile\nend\n\nclass Profile &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>I have skills column in profile which stores an array of skills. I am using rails active admin and on filtering users with skills I faced a problem which is</p>\n\n<blockquote>\n  <p>PG::InvalidTextRepresentation: ERROR:  malformed array literal: \"java\"</p>\n</blockquote>\n\n<p>my code for the filter is:</p>\n\n<pre><code>filter :profile_skills, label: 'Skills', as: :string\n</code></pre>\n\n<p>I am not getting what is the problem. please help me out</p>\n"}, {"tags": ["python", "ruby", "language-comparisons"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1549880997, "post_id": 54627480, "comment_id": 96049223, "body": "A quick tip when checking if a key is present in a hash Ruby. Use <a href=\"http://ruby-doc.org/core-2.6.1/Hash.html#method-i-key-3F\" rel=\"nofollow noreferrer\"><code>#key?</code></a> or <a href=\"http://ruby-doc.org/core-2.6.1/Hash.html#method-i-has_key-3F\" rel=\"nofollow noreferrer\"><code>#has_key?</code></a> instead. This is shorter and quicker due to the fact that it uses key lookup instead of looping though all keys to test if one of the keys is equal to the given key."}], "answers": [{"tags": [], "owner": {"reputation": 747, "user_id": 7592664, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-45QRueUtOFs/AAAAAAAAAAI/AAAAAAAACWw/lsZJPGoGc-U/photo.jpg?sz=128", "display_name": "Jeevan Chaitanya", "link": "https://stackoverflow.com/users/7592664/jeevan-chaitanya"}, "is_accepted": true, "score": 2, "last_activity_date": 1549879119, "last_edit_date": 1549879119, "creation_date": 1549878994, "answer_id": 54627888, "question_id": 54627480, "link": "https://stackoverflow.com/questions/54627480/python-equivalent-of-rubys-find/54627888#54627888", "title": "Python equivalent of Ruby&#39;s .find", "body": "<p>Below code in python for your ruby logic.</p>\n\n<pre><code>CF={\"metre\":{\"kilometre\":0.001, \"metre\":1.0, \"centimetre\":100.0}, \"litre\":{\"litre\":1.0, \"millilitre\":1000.0, \"imperial_pint\":1.75975}}\n\ndef common(fr,to):\n    for key,value in CF.items():\n        if (fr in value) and (to in value):\n            return key   \n\nprint(common('metre','centimdetre'))\nmetre\nprint(com('metre','centimdetre'))\nNone\n******************\n\nsingle line function \ncom = lambda x,y:[key for key,value in CF.items() if (x in value) and (y in value)]\nprint(com('metre','centimdetre'))\n['metre']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1550367178, "post_id": 54629802, "comment_id": 96242168, "body": "Hi iGian, I am surprised you know Python as well. May I know which language is more easy according to you? Or more easy to use?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1550402713, "post_id": 54629802, "comment_id": 96247964, "body": "@Rajagopalan Off topic as too broad! :) Hard to tell. I&#39;m not a pro, just having fun in learning. They are similar. I like more Ruby syntax. Python has powerful libraries, see SciPy. I&#39;d suggest: try it yourself."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1549885242, "creation_date": 1549885242, "answer_id": 54629802, "question_id": 54627480, "link": "https://stackoverflow.com/questions/54627480/python-equivalent-of-rubys-find/54629802#54629802", "title": "Python equivalent of Ruby&#39;s .find", "body": "<p>Other option both for Ruby and Python.</p>\n\n<p>For Ruby:</p>\n\n<pre><code>cf = {:metre=&gt;{:kilometre=&gt;0.001, :metre=&gt;1.0, :centimetre=&gt;100.0}, :litre=&gt;{:litre=&gt;1.0, :millilitre=&gt;1000.0, :imperial_pint=&gt;1.75975}}\n\nfrom = :litre\nto = :millilitre\ncf.select { |k, v| ([from, to] - v.keys).empty? }.keys\n#=&gt; [:litre]\n</code></pre>\n\n<p>For Python:</p>\n\n<pre><code>CF = {'metre': {'kilometre': 0.001, 'metre': 1.0, 'centimetre': 100.0}, 'litre': {'litre': 1.0, 'millilitre': 1000.0, 'imperial_pint': 1.75975}}\n\n_from = 'millilitre'\n_to = 'imperial_pint'\nres = [ k for k, v in CF.items() if not bool(set([_from, _to]) - set(v.keys())) ]\n#=&gt; ['litre']\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 10613802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e76c984d15d5640b54d559e1f56e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "Baxter", "link": "https://stackoverflow.com/users/10613802/baxter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 54627888, "answer_count": 2, "score": 3, "last_activity_date": 1554237468, "creation_date": 1549877589, "last_edit_date": 1554237468, "question_id": 54627480, "link": "https://stackoverflow.com/questions/54627480/python-equivalent-of-rubys-find", "title": "Python equivalent of Ruby&#39;s .find", "body": "<p>I'm trying to implement the following Ruby method into a Python Method:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>CF = {:metre=&gt;{:kilometre=&gt;0.001, :metre=&gt;1.0, :centimetre=&gt;100.0}, :litre=&gt;{:litre=&gt;1.0, :millilitre=&gt;1000.0, :imperial_pint=&gt;1.75975}}\n\ndef common_dimension(from, to)\n  CF.keys.find do |canonical_unit|\n    CF[canonical_unit].keys.include?(from) &amp;&amp;\n    CF[canonical_unit].keys.include?(to)\n  end\nend\n</code></pre>\n\n<p>Which behaves like:</p>\n\n<pre><code>&gt;&gt; common_dimension(:metre, :centimetre)\n=&gt; :metre\n\n&gt;&gt; common_dimension(:litre, :centimetre)\n=&gt; nil\n\n&gt;&gt; common_dimension(:millilitre, :imperial_pint)\n=&gt; :litre\n</code></pre>\n\n<p>What is the \"Pythonic\" way to implement this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "algorithm", "graph-algorithm"], "answers": [{"comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1549897674, "post_id": 54627346, "comment_id": 96059072, "body": "Thank you for taking the time to think about the issue @C\u0103t\u0103lin Fr&#226;ncu"}], "tags": [], "owner": {"reputation": 1079, "user_id": 6022817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JpCX.jpg?s=128&g=1", "display_name": "C\u0103t\u0103lin Fr&#226;ncu", "link": "https://stackoverflow.com/users/6022817/c%c4%83t%c4%83lin-fr%c3%a2ncu"}, "is_accepted": true, "score": 5, "last_activity_date": 1549877117, "creation_date": 1549877117, "answer_id": 54627346, "question_id": 54627134, "link": "https://stackoverflow.com/questions/54627134/invert-relation-in-directed-acyclic-graph-dag-to-avoid-circular-relation/54627346#54627346", "title": "Invert relation in directed acyclic graph (DAG) to avoid circular relation", "body": "<p>Your solution seems to work. The edges <code>C -&gt; A</code> and <code>A -&gt; C</code> cannot both be causing a cycle.</p>\n\n<p><strong>Proof:</strong></p>\n\n<p>If adding <code>C -&gt; A</code> would cause a cycle, then there already exists a path <code>A \u219d C</code>. If adding <code>A -&gt; C</code> would cause a cycle, then there already exists a path <code>C \u219d A</code>. If both of the above were true, then combining the two paths would provide an already-existing cycle, hence the initial graph would not be a DAG.</p>\n"}], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "accepted_answer_id": 54627346, "answer_count": 1, "score": 4, "last_activity_date": 1549877764, "creation_date": 1549876258, "last_edit_date": 1549877764, "question_id": 54627134, "link": "https://stackoverflow.com/questions/54627134/invert-relation-in-directed-acyclic-graph-dag-to-avoid-circular-relation", "title": "Invert relation in directed acyclic graph (DAG) to avoid circular relation", "body": "<p><strong>Question</strong></p>\n\n<p>In a <a href=\"https://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow noreferrer\">directed acyclic graph (DAG)</a>, will a circular transitive relation that would be caused by adding a relation always be prevented by inverting the relation to be added?</p>\n\n<p>Example:</p>\n\n<ul>\n<li>Existing relations: <code>A -&gt; B</code>, <code>B -&gt; C</code>, and by that the transitive relation <code>A -&gt; C</code>, so it can be viewed as <code>A -&gt; B -&gt; C</code></li>\n<li>Relation to be added: <code>C -&gt; A</code> which would cause <code>A -&gt; B -&gt; C -&gt; A</code> and be cyclic</li>\n<li><strong>Idea</strong>: invert the relation to be added to <code>C &lt;- A</code> which would result in <code>A -&gt; B -&gt; C &lt;- A</code> and thus still be acyclic </li>\n</ul>\n\n<p>The example given here is of course rather simple, so I am interested to know if that approach will be viable in all scenarios.</p>\n\n<p><strong>Background</strong></p>\n\n<p>To model directed relations (e.g. 'follows', 'precedes', 'parent', 'child') between entities, the <a href=\"https://community.openproject.com/projects/openproject\" rel=\"nofollow noreferrer\">OpenProject</a> application stores its relation information in a <a href=\"https://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow noreferrer\">directed acyclic graph (DAG)</a>. The entities/nodes have date information and can be rescheduled by the user. If the user changes date values, other entities might need to be rescheduled automatically, e.g. when the predecessor is shifted two days to the future, its successor needs to be shifted as well.</p>\n\n<p>Because most relations are used for scheduling and as it is an acyclic graph for that very reason, cycles are prevented. They would lead to infinite scheduling loops.</p>\n\n<p>While most relations have a direction from a semantic point of view as well, there is also the generic 'relates to' relation, which to the user is undirected and simply communicates that there is a relation of sorts. Because of its nature, the direction aspect of 'relates to' relations present in the DAG is not visible to the user in the frontend.</p>\n\n<p>When a user attempts to create a 'relates to' relation, he might currently run into error messages warning against cyclic relations, which is incomprehensible to the user as his perception of the relation is of being undirected.</p>\n\n<p>There are a couple of possible solutions to that problem and the simplest might be to simply inverse the relation in such cases as the direction within the DAG will not matter to the user for such a relation.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-and-belongs-to-many"], "comments": [{"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1549871769, "post_id": 54626061, "comment_id": 96044305, "body": "Go to your rails console and type in Site.all - what is the result you are getting back?"}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 11043967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weeDaulyxrM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO6VIkcftWtiYPlNLcPCVoqPPvI1w/mo/photo.jpg?sz=128", "display_name": "Simon Mo", "link": "https://stackoverflow.com/users/11043967/simon-mo"}, "edited": false, "score": 0, "creation_date": 1549874255, "post_id": 54626376, "comment_id": 96045441, "body": "Thanks for your answer.  If I use your code, I now got the following error on the view:  <code>NameError in Admin::Sites#edit uninitialized constant Site::User</code>  <code>= f.collection_select :fae_user_ids, Fae::User.all, :id, :email, {}, {:multiple =&gt; true}</code>"}, {"owner": {"reputation": 253, "user_id": 11043967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weeDaulyxrM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO6VIkcftWtiYPlNLcPCVoqPPvI1w/mo/photo.jpg?sz=128", "display_name": "Simon Mo", "link": "https://stackoverflow.com/users/11043967/simon-mo"}, "edited": false, "score": 0, "creation_date": 1549877650, "post_id": 54626376, "comment_id": 96047237, "body": "I got it fixed now, thank you! The class name was <code>Fae::User</code> because it came from an engine"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 253, "user_id": 11043967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weeDaulyxrM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO6VIkcftWtiYPlNLcPCVoqPPvI1w/mo/photo.jpg?sz=128", "display_name": "Simon Mo", "link": "https://stackoverflow.com/users/11043967/simon-mo"}, "edited": false, "score": 0, "creation_date": 1549885418, "post_id": 54626376, "comment_id": 96051809, "body": "@SimonMo Glad I could help! I was on the fence with <code>Fae::User</code> vs <code>User</code> from the code given.  I updated the answer for posterity. If you could accept the answer it will help future users if they have the same problem."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": true, "score": 0, "last_activity_date": 1549885300, "last_edit_date": 1549885300, "creation_date": 1549873161, "answer_id": 54626376, "question_id": 54626061, "link": "https://stackoverflow.com/questions/54626061/rails-habtm-activerecordrecordnotfound-in-update-action/54626376#54626376", "title": "Rails HABTM ActiveRecord::RecordNotFound in update action", "body": "<p>You have your <code>class_name</code> keys backwards.</p>\n\n<pre><code>has_and_belongs_to_many :fae_users,\n  class_name: 'Fae::User'\n\nhas_and_belongs_to_many :sites\n</code></pre>\n\n<p>You don't need to have the <code>class_name</code> attribute on the <code>User</code> model as Rails can infer the <code>Site</code> class.</p>\n\n<p>Rails has very <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many\" rel=\"nofollow noreferrer\">extensive documentation</a> for relations.</p>\n"}], "owner": {"reputation": 253, "user_id": 11043967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-weeDaulyxrM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO6VIkcftWtiYPlNLcPCVoqPPvI1w/mo/photo.jpg?sz=128", "display_name": "Simon Mo", "link": "https://stackoverflow.com/users/11043967/simon-mo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 54626376, "answer_count": 1, "score": 2, "last_activity_date": 1549885300, "creation_date": 1549871532, "question_id": 54626061, "link": "https://stackoverflow.com/questions/54626061/rails-habtm-activerecordrecordnotfound-in-update-action", "title": "Rails HABTM ActiveRecord::RecordNotFound in update action", "body": "<p>I have set an association using HABTM with Rails, with two models: Site and User.</p>\n\n<p><strong>Site.rb</strong></p>\n\n<pre><code>  has_and_belongs_to_many :fae_users,\n    class_name: \"Site\",\n    foreign_key: \"site_id\",\n    join_table: \"sites_users\",\n    association_foreign_key: \"fae_user_id\"\n</code></pre>\n\n<p><strong>User.rb</strong></p>\n\n<pre><code>    has_and_belongs_to_many :sites,\n      class_name: \"User\",\n      foreign_key: \"fae_user_id\",\n      join_table: \"sites_users\",\n      association_foreign_key: \"site_id\"\n</code></pre>\n\n<p><strong>Schema.rb</strong></p>\n\n<pre><code>  create_table \"sites_users\", id: false, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\", force: :cascade do |t|\n    t.bigint \"site_id\"\n    t.bigint \"fae_user_id\"\n    t.index [\"fae_user_id\"], name: \"index_sites_users_on_fae_user_id\"\n    t.index [\"site_id\"], name: \"index_sites_users_on_site_id\"\n  end\n</code></pre>\n\n<p><strong>View: sites/_form.html.slim</strong></p>\n\n<pre><code>= f.collection_select :fae_user_ids, Fae::User.all, :id, :email, {}, {:multiple =&gt; true}\n\n</code></pre>\n\n<p>Now when I'm trying to update a Site, associating some User to it, I got the following error:</p>\n\n<pre><code>ActiveRecord::RecordNotFound in Admin::SitesController#update\nCouldn't find all Sites with 'id': (3, 2) (found 1 results, but was looking for 2). Couldn't find Site with id 2.\n</code></pre>\n\n<p>This is strange, because I don't understand when does Rails is looking for those Site ids, which are actually supposed to be User ids.\nSite id appears to be correct in the params:</p>\n\n<p><strong>Params of the request</strong></p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"_method\"=&gt;\"patch\",\n \"authenticity_token\"=&gt;\"xxxxxxxxxxxx\",\n \"site\"=&gt;\n  {\"site_status_id\"=&gt;\"4\",\n   \"fae_user_ids\"=&gt;[\"\", \"3\", \"2\"],\n   \"prod_url\"=&gt;\"\",\n   \"demo_url\"=&gt;\"\",\n   \"template\"=&gt;\"\",\n   \"name\"=&gt;\"Somesite\",\n   \"site_option_ids\"=&gt;[\"\"],\n   \"description\"=&gt;\"\",\n   \"domain\"=&gt;\"\",\n   \"discount\"=&gt;\"\"},\n \"id\"=&gt;\"10\"}\n</code></pre>\n\n<p>Something is going wrong, obviously !\nAny idea ?\nThanks</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "rspec", "matcher"], "comments": [{"owner": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "edited": false, "score": 0, "creation_date": 1549878504, "post_id": 54625730, "comment_id": 96047709, "body": "I wonder why someone could need to a test that proceeds after a failure...Just curious."}, {"owner": {"reputation": 90, "user_id": 1688911, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100001306892454/picture?type=large", "display_name": "esakiraja", "link": "https://stackoverflow.com/users/1688911/esakiraja"}, "reply_to_user": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "edited": false, "score": 0, "creation_date": 1549881862, "post_id": 54625730, "comment_id": 96049797, "body": "@microspino Let&#39;s say it fails in some numbers verification but I want the suite to run completely so as to check whether any other inequalities are present in the workflow. It will help in fixing all the glitches in one shot as it unearths everything in one round of execution. But yea, it has it&#39;s own pros and cons."}, {"owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "edited": false, "score": 0, "creation_date": 1549894436, "post_id": 54625730, "comment_id": 96057122, "body": "If you are comparing objects like a hash, array you can use match/eq and it will show you the differences, if you have several expects in one call you can split them into multiple tests by putting one expect call in each <code>it</code> block, keep in mind that adds to test time."}, {"owner": {"reputation": 90, "user_id": 1688911, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100001306892454/picture?type=large", "display_name": "esakiraja", "link": "https://stackoverflow.com/users/1688911/esakiraja"}, "edited": false, "score": 0, "creation_date": 1549904297, "post_id": 54625730, "comment_id": 96063177, "body": "It&#39;s not only about getting the differences but to let the suite do the execution even if it meets the fail condition. And, yea I have used &#39;match&#39; and &#39;eq&#39; matchers in my test suite. Since, every matcher here accompanies with &#39;expect&#39;, it jus stops the execution once the fail condition meets."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4491535, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mx3k7so1yZY/AAAAAAAAAAI/AAAAAAAAABA/DjKirtkviHk/photo.jpg?sz=128", "display_name": "Alan Joseph", "link": "https://stackoverflow.com/users/4491535/alan-joseph"}, "is_accepted": true, "score": 1, "last_activity_date": 1549872089, "creation_date": 1549872089, "answer_id": 54626172, "question_id": 54625730, "link": "https://stackoverflow.com/questions/54625730/is-there-a-way-to-use-a-matcher-like-verify-in-rspec/54626172#54626172", "title": "Is there a way to use a matcher like &#39;Verify&#39; in rspec?", "body": "<p>There isn't a way to do this with RSpec, out of the box.\nBecause Rspec is designed to test small, isolated logics.</p>\n\n<p>On failure, Rspec matchers raise Error, So what you can do is to wrap the matchers in a rescue block.\nTo satisfy your need, you could write a wrapper like this:</p>\n\n<pre><code>def report_last(&amp;block)\n  begin\n    yield\n  rescue Exception =&gt; e\n    puts \"Failure: #{e}\"\n  end\nend\n</code></pre>\n\n<p>In your test case:</p>\n\n<pre><code>describe Calculator do\n  it \u201cshould add 2 numbers\u201d do\n    report_last do\n      expect(described_class.new(2, 3).sum)to eq(5)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 1688911, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100001306892454/picture?type=large", "display_name": "esakiraja", "link": "https://stackoverflow.com/users/1688911/esakiraja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 54626172, "answer_count": 1, "score": 0, "last_activity_date": 1549872089, "creation_date": 1549870083, "question_id": 54625730, "link": "https://stackoverflow.com/questions/54625730/is-there-a-way-to-use-a-matcher-like-verify-in-rspec", "title": "Is there a way to use a matcher like &#39;Verify&#39; in rspec?", "body": "<p>So far I'm using 'expect' in my test framework which will stop the execution when it meets a fail condition. I want something like, the execution should happen even if it meets the fail condition. I could see that there is a matcher called 'Verify' in rspec where I need to inherit 'Test::Unit::TestCase' class, but my issue is that, I need the matcher in my spec file which is not written under a ruby class.</p>\n"}, {"tags": ["ruby", "methods", "factory"], "comments": [{"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "edited": false, "score": 0, "creation_date": 1549870644, "post_id": 54625430, "comment_id": 96043823, "body": "I should note that iterations work fine by commenting out the factory and including the line <code>puts &quot;#{@name}: #{@amount} #{@unit}&quot;</code>"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549871097, "post_id": 54625430, "comment_id": 96044015, "body": "<code>@units[unit]</code> returns nil"}, {"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549871606, "post_id": 54625430, "comment_id": 96044225, "body": "@KimmoLehto, thank you for your response. Would you please elaborate a bit? Is it a naming convention? It doesn&#39;t return nil when I supply variables directly to <code>unit</code> and <code>amount</code> in the method."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549872389, "post_id": 54625430, "comment_id": 96044596, "body": "You need to inspect what&#39;s in there and what you&#39;re trying to access from it. <code>bread_flour: 3.5 cups,</code> looks wrong."}, {"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549872785, "post_id": 54625430, "comment_id": 96044781, "body": "It&#39;s probably too convoluted, but I was afraid I couldn&#39;t duplicate the issue outside of context. I&#39;ve stripped off <code>bread_flour</code> as <code>@name</code> in the hash, leaving <code>quantity</code>. That gets <code>.split</code> into [0] <code>@amount</code> (<code>3.5</code>) and [1] <code>@unit</code> (<code>&quot;cups&quot;</code>)."}, {"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549872901, "post_id": 54625430, "comment_id": 96044840, "body": "Edited: addressed the typo you mention. It&#39;s unfortunately not a relevant in the source code."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549873030, "post_id": 54625430, "comment_id": 96044914, "body": "Yeah the comma isn&#39;t relevant, but <code>3.5 cups</code> should give a syntax error."}, {"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1549873088, "post_id": 54625430, "comment_id": 96044943, "body": "So sorry, edited again."}, {"owner": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "edited": false, "score": 0, "creation_date": 1549873596, "post_id": 54625430, "comment_id": 96045158, "body": "Just curious...Which is the design idea behind using a Module for the Gramulator instead of a class? I don&#39;t see it included anywhere"}, {"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "reply_to_user": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "edited": false, "score": 0, "creation_date": 1549874182, "post_id": 54625430, "comment_id": 96045418, "body": "@microspino, a mentor told me to separate &#39;doers&#39; and &#39;things&#39; that way. I agree it&#39;s not really helpful here."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1549908595, "post_id": 54625430, "comment_id": 96065249, "body": "The error message should tell you which line the problem is on. Unfortunately, you don&#39;t tell us this information. Also, please make sure that you construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In particular, it seems that your example is not really minimal, I guess it would be possible to demonstrate your problem in less than 34 lines of code. In fact, I think it would be possible to demonstrate it in 3-4 lines."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1549873393, "post_id": 54626411, "comment_id": 96045080, "body": "Yes, a bit of debug printing would have revealed this in a second."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1549873433, "post_id": 54626411, "comment_id": 96045093, "body": "Yes. Bad question."}, {"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "edited": false, "score": 1, "creation_date": 1549873837, "post_id": 54626411, "comment_id": 96045260, "body": "No problem, all, I&#39;m clearly new. I&#39;ll look into how to debug print now and thank you for the (mostly sarcasm free) help."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "edited": false, "score": 0, "creation_date": 1549874119, "post_id": 54626411, "comment_id": 96045390, "body": "@Benjamin: yes, debugging is the most useful skill there is. Read <a href=\"https://tenderlovemaking.com/2016/02/05/i-am-a-puts-debuggerer.html\" rel=\"nofollow noreferrer\">this</a> for some inspiration/ideas."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 1, "last_activity_date": 1549873409, "last_edit_date": 1549873409, "creation_date": 1549873329, "answer_id": 54626411, "question_id": 54625430, "link": "https://stackoverflow.com/questions/54625430/ruby-factory-method-returns-a-nomethoderror-when-its-called-what-happened/54626411#54626411", "title": "Ruby factory method returns a NoMethodError when it&#39;s called. What happened?", "body": "<p>You use <code>Gramulator.for(@amount, @unit)</code>, but <code>Gramulator.for</code> expects <code>unit, amount</code>. </p>\n\n<p>This causes <code>@units[unit]</code> to return nil, because you're giving it <code>\"3.5\"</code> instead of <code>\"cups\"</code> in the unit argument.</p>\n"}, {"comments": [{"owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "edited": false, "score": 0, "creation_date": 1549880844, "post_id": 54627195, "comment_id": 96049105, "body": "Thank you, and I agree wholeheartedly. But ironically I&#39;m showing someone else how to DRY out a very long case statement with the factory. I&#39;d prefer to leave the rest intact :)"}, {"owner": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "reply_to_user": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "edited": false, "score": 0, "creation_date": 1549893611, "post_id": 54627195, "comment_id": 96056588, "body": "uhm i&#39;m trying to dry somthing which is already dry...Maybe i need a <b>cup</b> of 236.58ml  of <b>water</b> :)"}], "tags": [], "owner": {"reputation": 7424, "user_id": 204159, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4daad74624eb020dc8d2a36ad9c10816?s=128&d=identicon&r=PG", "display_name": "microspino", "link": "https://stackoverflow.com/users/204159/microspino"}, "is_accepted": false, "score": 0, "last_activity_date": 1549892910, "last_edit_date": 1549892910, "creation_date": 1549876539, "answer_id": 54627195, "question_id": 54625430, "link": "https://stackoverflow.com/questions/54625430/ruby-factory-method-returns-a-nomethoderror-when-its-called-what-happened/54627195#54627195", "title": "Ruby factory method returns a NoMethodError when it&#39;s called. What happened?", "body": "<p>When you call <code>@units[unit]</code> you get <code>nil</code> because above it you're calling the <code>for</code> with <strong>unit</strong> and <strong>amount</strong> inverted. See <code>Gramulator.for(@amount, @unit)</code>. The signutre is <code>def self.for(unit, amount)</code>.</p>\n\n<p>That being said...\nMaybe I'm oversimplifying it, but I think your code could be reduced.</p>\n\n<p>Below I rewrote it as a script which could be set as an executable (with <code>chmod +x</code>) and run as <strong>./gramulator.rb</strong>. </p>\n\n<p>Feel free to skip the first and the last two lines if you need to incorporate this in a bigger project.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nclass Gramulator\n  UNITS = { \"cups\" =&gt; 236.58 }\n\n  def self.for(unit, amount)\n    amount.to_f * UNITS[unit]\n  end\nend\n\nclass Recipe\n  def initialize(ingredients)\n    @ingredients = ingredients\n  end\n\n  def gramulate\n    puts \"CONVERTED TO GRAMS\"\n    @ingredients.each do |name, quantity|\n      amount, unit = quantity.split\n      puts \"%s: %.2f grams\" % [name, amount]\n      Gramulator.for(unit, amount)\n    end\n  end\nend\n\ndough = Recipe.new({ bread_flour: \"3.5 cups\" })\ndough.gramulate\n</code></pre>\n\n<p>Please <strong>note</strong> that <code>puts</code> returns <code>nil</code> and therefore is a good habit to avoid using it at the end of a loop/iteration ore method. Here you're using <code>each</code>, which is fine, because you're probably not interested in reusing the <code>ingredients.each {...}</code> result.</p>\n\n<p>However, in Ruby, you could have a lot more fun with other useful <code>Enumerable</code> methods, such as <strong>map</strong>, <strong>detect</strong> etc. They return something different than the original collection you're iterating on so the last line of their loops needs to be 'something'. I strongly encourage you to look into them.</p>\n\n<p>Sorry for being long, it's just to help you <em>feel</em> what Ruby can offer to you.</p>\n"}], "owner": {"reputation": 72, "user_id": 8655329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6374e7fff3a61d615e0ff82076166945?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/8655329/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549892910, "creation_date": 1549868698, "last_edit_date": 1549873060, "question_id": 54625430, "link": "https://stackoverflow.com/questions/54625430/ruby-factory-method-returns-a-nomethoderror-when-its-called-what-happened", "title": "Ruby factory method returns a NoMethodError when it&#39;s called. What happened?", "body": "<p>I'm trying to integrate a factory method into this imperial-to-metric converter. I can make it work independently, but when it's iterated through a hash of ingredients it brings up a <code>NoMethodError</code>. What did I do wrong?</p>\n\n<p>I've run independent instance variables through the factory without issue:</p>\n\n<pre><code>@item = \"cups\"\n@number = 89.2\nGramulator.for(@number, @item) # =&gt; 828.0300000000001\n</code></pre>\n\n<p>I've confirmed that it works properly with inputs. I've even run it with <code>@dough.unit</code> and <code>@dough.amount</code> successfully:</p>\n\n<pre><code>Gramulator for(@dough.amount, @dough.unit) # =&gt; 828.0300000000001\n</code></pre>\n\n<p>But when I point it through the iteration method itself, <code>@dough.gramulate</code> doesn't work.</p>\n\n<pre><code>class Unit\n  def initialize(amount)\n    @amount = amount\n  end\n\n  def calculate\n    @amount.to_f\n  end\nend\n\nclass Cup &lt; Unit\n  def calculate\n    (super * 236.58)\n  end\nend\n\nclass Recipe\n  attr_accessor :amount\n  attr_reader   :name, :unit\n\n  def initialize(ingredient_hash)\n    @ingredient_hash = ingredient_hash\n  end\n\n  def gramulate\n    puts \"CONVERTED TO GRAMS:\"\n    @ingredient_hash.each do |name, quantity|\n      quantity_array = quantity.split\n\n      @name    =  name\n      @amount  =  quantity_array[0].to_f\n      @unit    =  quantity_array[1]\n\n      Gramulator.for(@amount, @unit)\n      puts \"#{@name}: #{@amount} grams\"\n    end\n  end\nend\n\nmodule Gramulator\n\n  @units = {\n    \"cups\"   =&gt; Cup\n    # &lt;other measurements&gt;\n  }\n\n  def self.for(unit, amount)\n    (@units[unit]).new(amount).calculate\n  end\nend\n\n@dough = Recipe.new({\n  bread_flour: \"3.5 cups\"\n  # &lt;other ingredients&gt;\n})\n</code></pre>\n\n<p>Expected result: </p>\n\n<pre><code>CONVERTED TO GRAMS:\nbread_flour: 828.0300000000001 grams\n</code></pre>\n\n<p>Actual result:</p>\n\n<pre><code>CONVERTED TO GRAMS:\nNoMethodError: undefined method 'new' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1549869283, "post_id": 54625219, "comment_id": 96043276, "body": "Yes, (1) could have broad use but please provide me at least few."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1549876169, "post_id": 54625219, "comment_id": 96046376, "body": "(1) a common real-world and everyday use are &quot;class methods&quot;. These are defined on the class object rather than its class (the <code>Class</code> class) in order to limit their scope to that specific object."}], "answers": [{"comments": [{"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 1, "creation_date": 1549870299, "post_id": 54625529, "comment_id": 96043695, "body": "There is <code>Object#define_singleton_method</code> for this magic, no need to use <code>define_method</code>."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1549870445, "post_id": 54625529, "comment_id": 96043754, "body": "@halfelf Yes, <code>define_singleton_method</code> will define singleton method for object but I am giving way to define instance methods to any class so any instance can access that method. Correct if I miss something"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1549870539, "post_id": 54625529, "comment_id": 96043781, "body": "@halfelf OP is interested in <i>defining object specific method</i> so I will edit answer to add this point"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 1, "last_activity_date": 1549870580, "last_edit_date": 1549870580, "creation_date": 1549869206, "answer_id": 54625529, "question_id": 54625219, "link": "https://stackoverflow.com/questions/54625219/different-way-to-create-object-specific-methods-in-ruby/54625529#54625529", "title": "different way to create object specific methods in ruby", "body": "<p>You have defined class block as <code>class &lt;&lt; obj1</code> for only <code>obj1</code> object which is object specific.\nSo <code>greet</code> method is only defined for <code>obj1</code> object and not for other objects of same class.</p>\n\n<p>Better you inspect in following pattern </p>\n\n<pre><code>class Test\n  attr_accessor :name\n\n  def initialize(name)\n    self.name = name\n  end\nend\n\nobj1 = Test.new('test1')\n\nclass &lt;&lt; obj1\n  def greet\n    puts self.inspect, self.object_id, self.name\n    puts 'Welcome'\n  end\nend\n\nobj1.greet\nobj2 = Test.new\nobj2.greet\n</code></pre>\n\n<p>In above, <code>obj1</code> &amp; <code>obj2</code> both have different object ids.</p>\n\n<p><em>1. What is the real world use of such kind of object specific methods?</em></p>\n\n<p>It is good practice to know various pattern to define methods. This is useful when you want to define methods dynamically or when you load classes but want to define methods based on columns of model table present in database. <a href=\"https://apidock.com/ruby/Object/define_singleton_method\" rel=\"nofollow noreferrer\">Module#define_method</a> is one of the best for such uses, <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">cancancan</a> is one of the gem who define helper methods dynamically in initializer.</p>\n\n<p><em>2. What are other different ways to create object specific methods in Ruby?</em></p>\n\n<ol>\n<li><a href=\"https://apidock.com/ruby/Object/define_singleton_method\" rel=\"nofollow noreferrer\">define_singleton_method</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.2.0/Module.html#method-i-class_eval\" rel=\"nofollow noreferrer\">class_eval</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "is_accepted": false, "score": 0, "last_activity_date": 1549871386, "last_edit_date": 1549871386, "creation_date": 1549869779, "answer_id": 54625659, "question_id": 54625219, "link": "https://stackoverflow.com/questions/54625219/different-way-to-create-object-specific-methods-in-ruby/54625659#54625659", "title": "different way to create object specific methods in ruby", "body": "<p>As per @mu_is_too_short comment, another way is,</p>\n\n<pre><code>class Test; end\nobj1 = Test.new\n\ndef obj1.pancakes\n  p 'Where is pancakes house?'\nend\n\nobj1.pancakes # \"Where is pancakes house?\"\nobj2 = Test.new\nobj2.pancakes\nTraceback (most recent call last) :\nNoMethodError\n(undefined method `pancakes' for #&lt;Test:0x0000564fb35ca310&gt;)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549967522, "post_id": 54641391, "comment_id": 96087253, "body": "Or simply <code>def obj.greet ; &#39;hi&#39; ; end</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1549996317, "post_id": 54641391, "comment_id": 96104450, "body": "@Stefan, I didn&#39;t include that because it was covered in another answer. In fact I wrote the edit shown above but evidently didn&#39;t save it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1549996111, "last_edit_date": 1549996111, "creation_date": 1549933484, "answer_id": 54641391, "question_id": 54625219, "link": "https://stackoverflow.com/questions/54625219/different-way-to-create-object-specific-methods-in-ruby/54641391#54641391", "title": "different way to create object specific methods in ruby", "body": "<pre><code>class Test\nend\n\nobj = Test.new\n</code></pre>\n\n<p>Here are some ways to create the hash, other than</p>\n\n<pre><code>class &lt;&lt; obj\n  def greet\n    ...\n  end\nend\n</code></pre>\n\n<p>and (as mentioned in another answer)</p>\n\n<pre><code>def obj.greet\n  ...\nend\n</code></pre>\n\n<p><strong>#1</strong></p>\n\n<pre><code>obj.singleton_class.class_eval do\n  def greet1\n    'Welcome'\n  end\nend\n\nobj.greet1 #=&gt; \"Welcome\"\n</code></pre>\n\n<p><strong>#2</strong></p>\n\n<pre><code>obj.singleton_class.class_eval \"def greet2\n  'Get lost'\nend\"\n\nobj.greet2 #=&gt; \"Get lost\" \n</code></pre>\n\n<p>This form can be useful when creating singleton methods dynamically.</p>\n\n<p><strong>#3</strong></p>\n\n<pre><code>obj.singleton_class.instance_eval do\n  define_method(:greet3) { 'yo' }\nend\n\nobj.greet3 #=&gt; \"yo\"\n</code></pre>\n\n<p><strong>#4</strong></p>\n\n<pre><code>obj.singleton_class.\n    public_send(:define_method, :greet4) { 'yo-yo' }\n\nobj.greet4 #=&gt; \"yo-yo\"\n</code></pre>\n\n<p><strong>#5</strong></p>\n\n<pre><code>obj.define_singleton_method(:greet5) { 'yo who?' }\n\nobj.greet5 #=&gt; \"ho who?\"\n</code></pre>\n\n<p><strong>#6</strong></p>\n\n<pre><code>module M\n  def greet6\n    'hi ya'\n  end\nend\n\nobj.extend M\n\nobj.greet6 #=&gt; \"hi ya\"\n</code></pre>\n\n<p><strong>#7</strong></p>\n\n<pre><code>module M\n  def greet7\n    'hi you'\n  end\nend\n\nobj.singleton_class.include M\n\nobj.greet7 #=&gt; \"hi you\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>obj.methods(false)\n  #=&gt; [:greet3, :greet4, :greet1, :greet2, :greet5] \nobj.methods.grep /greet/\n  #=&gt; [:greet3, :greet4, :greet1, :greet2, :greet5,\n  #    :greet6, :greet7] \n</code></pre>\n\n<p>The practical use of creating singleton methods is obvious for modules (including classes), but calls for an opinion as it concerns other objects.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1549992457, "creation_date": 1549992457, "answer_id": 54655591, "question_id": 54625219, "link": "https://stackoverflow.com/questions/54625219/different-way-to-create-object-specific-methods-in-ruby/54655591#54655591", "title": "different way to create object specific methods in ruby", "body": "<p>An example of a use case: suppose you have production code which uses a hash as data structure. As time progresses, it appears that a class would have been a better choice, because smarter behaviour than just holding data is required - for instance data should be validated. This validation code is only meaningful in the context of this specific hash. You could define a method <code>validate_username</code> in the public namespace or some  module, but <code>def the_hash.validate_username;#code;end</code> would arguably be a better solution.</p>\n"}], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54625529, "answer_count": 4, "score": 1, "last_activity_date": 1549996111, "creation_date": 1549867631, "last_edit_date": 1549868932, "question_id": 54625219, "link": "https://stackoverflow.com/questions/54625219/different-way-to-create-object-specific-methods-in-ruby", "title": "different way to create object specific methods in ruby", "body": "<p>I am aware of just one way to create instance specific methods in ruby i.e.</p>\n\n<pre><code> class Test;end\n obj1 = Test.new\n class &lt;&lt; obj1\n   def greet\n     p 'Welcome'\n   end\n end\n obj1.greet #    \"Welcome\"\n obj2 = Test.new\n obj2.greet # through error as,\n Traceback (most recent call last):\n NoMethodError (undefined method `greet' for #Test:0x0000564fb35acef0&gt;)\n</code></pre>\n\n<p>or </p>\n\n<pre><code> class Test;end\n class &lt;&lt; (obj1 = Test.new)\n   def greet\n     p 'Welcome'\n   end\n end\n obj1.greet #    \"Welcome\"\n obj2 = Test.new\n obj2.greet # through error as,\n Traceback (most recent call last):\n NoMethodError (undefined method `greet' for #Test:0x0000564fb35acef0&gt;)\n</code></pre>\n\n<p>Here I have two questions:</p>\n\n<ol>\n<li>What is the real world use of such kind of object specific methods?</li>\n<li>What are other different ways to create object specific methods in Ruby?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1549866634, "post_id": 54624949, "comment_id": 96042243, "body": "Have you seen this? <a href=\"https://github.com/puma/puma/issues/1438\" rel=\"nofollow noreferrer\">github.com/puma/puma/issues/1438</a>, looks like a similar error log."}], "owner": {"reputation": 43, "user_id": 8852139, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kx9OLWO6Xgw/AAAAAAAAAAI/AAAAAAAAClE/bLkuKQBnD9Q/photo.jpg?sz=128", "display_name": "clement bacle", "link": "https://stackoverflow.com/users/8852139/clement-bacle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 929, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1549866211, "creation_date": 1549866211, "question_id": 54624949, "link": "https://stackoverflow.com/questions/54624949/how-to-fix-client-request-interrupted-error-in-heroku-with-a-rails-app", "title": "How to fix &quot;Client Request Interrupted&quot; error in Heroku (with a rails app)?", "body": "<ol>\n<li>I deployed my rails app on Heroku. </li>\n<li><p>When I try to create a new profile, my app crashes. My logs display a Client Request Interrupted error. You can see my logs below.</p></li>\n<li><p>I searched this error on heroku dev center: <a href=\"https://devcenter.heroku.com/changelog-items/662\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/changelog-items/662</a></p></li>\n</ol>\n\n<p>On this page (<a href=\"https://devcenter.heroku.com/changelog-items/662\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/changelog-items/662</a>): </p>\n\n<p>It said : \"This error will be logged if the client socket was closed either in the middle of the request or before a response could be returned.\"</p>\n\n<p>Then </p>\n\n<p>\"This error condition caused an H18 to be logged and the sock field could be used to differentiate between what are now H18 and H27 errors. \"</p>\n\n<p>H18 - Server Request Interrupted</p>\n\n<p>The backend socket, belonging to your app\u2019s web process was closed before the backend returned an HTTP response.</p>\n\n<pre><code>2019-02-05T15:53:19.905345+00:00 app[web.1]: bundler: failed to load command: puma (/app/vendor/bundle/ruby/2.5.0/bin/puma)\n2019-02-05T15:53:19.905399+00:00 app[web.1]: SignalException: SIGTERM\n2019-02-05T15:53:19.905401+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.0/lib/puma/launcher.rb:398:in `block in setup_signals'\n2019-02-05T15:53:19.905406+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.0/lib/puma/single.rb:115:in `join'\n2019-02-05T15:53:19.905407+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.0/lib/puma/single.rb:115:in `run'\n2019-02-05T15:53:19.905409+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.0/lib/puma/launcher.rb:184:in `run'\n2019-02-05T15:53:19.905410+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.0/lib/puma/cli.rb:78:in `run'\n2019-02-05T15:53:19.905412+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/puma-3.12.0/bin/puma:10:in `&lt;top (required)&gt;'\n2019-02-05T15:53:19.905414+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `load'\n2019-02-05T15:53:19.905415+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/bin/puma:23:in `&lt;top (required)&gt;'\n2019-02-05T21:33:39.526627+00:00 heroku[web.1]: Unidling\n2019-02-05T21:33:53.579585+00:00 app[web.1]: Puma starting in single mode...\n2019-02-05T21:33:53.579631+00:00 app[web.1]: * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas\n2019-02-05T21:33:53.579632+00:00 app[web.1]: * Min threads: 5, max threads: 5\n2019-02-05T21:33:53.579634+00:00 app[web.1]: * Environment: production\n2019-02-05T21:34:00.063370+00:00 heroku[web.1]: State changed from starting to up\n2019-02-05T21:33:59.640588+00:00 app[web.1]: * Listening on tcp://0.0.0.0:11397\n2019-02-05T21:33:59.642173+00:00 app[web.1]: Use Ctrl-C to stop\n2019-02-05T21:34:02.204235+00:00 heroku[router]: sock=client at=warning code=H27 desc=\"Client Request Interrupted\" method=GET path=\"/\" host=agora-challenge.herokuapp.com request_id=9d994b8b-eff4-4088-b2be-a42b14fec708 fwd=\"209.17.96.226\" dyno=web.1 connect=1ms service=119ms status=499 bytes= protocol=https\n</code></pre>\n\n<p>The important part to notice is the sock=client which means that the request was interrupted at the request of the client: </p>\n\n<pre><code>2019-02-05T21:34:02.204235+00:00 heroku[router]: sock=client at=warning code=H27 desc=\"Client Request Interrupted\" method=GET path=\"/\" host=agora-challenge.herokuapp.com request_id=9d994b8b-eff4-4088-b2be-a42b14fec708 fwd=\"209.17.96.226\" dyno=web.1 connect=1ms service=119ms status=499 bytes= protocol=https\n</code></pre>\n\n<p>I didn't understand either Heroku dev center explanations nor previous Stack Overflow questions. </p>\n\n<p>Thanks a lot for your answers.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 1, "creation_date": 1549863477, "post_id": 54624181, "comment_id": 96041318, "body": "please have a look, I guess you will get your answer here <a href=\"https://stackoverflow.com/a/1832441/3445936\">stackoverflow.com/a/1832441/3445936</a>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1549863994, "post_id": 54624181, "comment_id": 96041484, "body": "@rohit Yes, I guess it is perfect reference, but rails can handle multiple database but switching is little difficult."}, {"owner": {"reputation": 1575, "user_id": 1645105, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Pco1O.jpg?s=128&g=1", "display_name": "Vbp", "link": "https://stackoverflow.com/users/1645105/vbp"}, "edited": false, "score": 0, "creation_date": 1549864694, "post_id": 54624181, "comment_id": 96041657, "body": "I would suggest looking into open source gems like <a href=\"https://github.com/thiagopradi/octopus\" rel=\"nofollow noreferrer\">octopus</a> or <a href=\"https://github.com/zendesk/active_record_shards\" rel=\"nofollow noreferrer\">active_record_shards</a> because of the thread safety issues and complexity involved in writing your own sharding logic."}], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1549863894, "creation_date": 1549863894, "answer_id": 54624574, "question_id": 54624181, "link": "https://stackoverflow.com/questions/54624181/how-can-i-establish-a-connection-to-multiple-databases-with-the-same-adapterpo/54624574#54624574", "title": "How can I establish a connection to multiple databases, with the same adapter(postgres), using active_record gem?", "body": "<p>First I would like to go with basic about how you are going through code flow,</p>\n\n<p>When you load any class, its code is executed &amp; methods defined, your connection is created through static code written &amp; <code>establish_connection</code> is executed.</p>\n\n<p><strong>Single instant of rails app can have connection to single database</strong></p>\n\n<p>You better to write code to switch through different database to have access for different database connectivity.</p>\n\n<p><code>Legacy::Company</code> or <code>NotLegacy::Company</code> both models have same table name <code>companies</code> from different databases. But when you connect particular database both model (which got loaded) will point to <code>companies</code> table in current database.</p>\n\n<p><code>So what is current database mean to both model ?</code> \n -> The one which is loaded last time by <code>establish_connection</code>.</p>\n\n<p>So this is little tedious but it is working that if you deal with different databases, you have to keep switching from one database to another one.</p>\n"}, {"tags": [], "owner": {"reputation": 767, "user_id": 1783902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3d4028b2b07d6789767174eae1d104?s=128&d=identicon&r=PG", "display_name": "thiaguerd", "link": "https://stackoverflow.com/users/1783902/thiaguerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1549889213, "creation_date": 1549889213, "answer_id": 54630956, "question_id": 54624181, "link": "https://stackoverflow.com/questions/54624181/how-can-i-establish-a-connection-to-multiple-databases-with-the-same-adapterpo/54630956#54630956", "title": "How can I establish a connection to multiple databases, with the same adapter(postgres), using active_record gem?", "body": "<p>on config/database.yml</p>\n\n<pre><code>other_base:\n  adapter: postgresql\n  encoding: unicode\n  pool: 5\n  host: localhost\n  user: xxxxx\n  password: xxxxx\n</code></pre>\n\n<p>on your model</p>\n\n<pre><code>class YourModel &lt; ActiveRecord::Base\n   self.establish_connection :other_base\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5229490, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nZqif6iqdto/AAAAAAAAAAI/AAAAAAAAABI/6U51ahWEMeY/photo.jpg?sz=128", "display_name": "Rafael Valencia", "link": "https://stackoverflow.com/users/5229490/rafael-valencia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549904911, "creation_date": 1549861044, "question_id": 54624181, "link": "https://stackoverflow.com/questions/54624181/how-can-i-establish-a-connection-to-multiple-databases-with-the-same-adapterpo", "title": "How can I establish a connection to multiple databases, with the same adapter(postgres), using active_record gem?", "body": "<p>how are you? I've been having some troubles when I try to establish a connection to two databases in postres. I will try to describe the scenario:</p>\n\n<p>This is my pg.yml:</p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  encoding: unicode\n  pool: 5\n  host: localhost\n  user: xxxxx\n  password: xxxxx\n\ndevelopment:\n  &lt;&lt;: *default\n  database: not_legacy\n\nlegacy:\n  &lt;&lt;: *default\n  database: legacy\n</code></pre>\n\n<p>This is my Legacy::Base class:</p>\n\n<pre><code>#/models/legacy/base.rb\n\nrequire 'active_record'\nrequire 'erb'\n\nmodule Legacy\n  class Base &lt; ActiveRecord::Base\n    self.abstract_class = true\n\n    conf_contents = File.read('config/pg.yml')\n    conf_evaluated = ::ERB.new(conf_contents).result\n    conf = YAML.load(conf_evaluated)\n\n    ActiveRecord::Base.establish_connection conf['legacy']\n  end\nend\n</code></pre>\n\n<p>and this is my NotLegacy::Base class:</p>\n\n<pre><code>#/models/not_legacy/base.rb\n\nrequire 'active_record'\nrequire 'erb'\n\nmodule NotLegacy\n  class Base &lt; ActiveRecord::Base\n    self.abstract_class = true\n\n    conf_contents = File.read('config/pg.yml')\n    conf_evaluated = ::ERB.new(conf_contents).result\n    conf = YAML.load(conf_evaluated)\n\n    ActiveRecord::Base.establish_connection conf['not_legacy']\n  end\nend\n</code></pre>\n\n<p>Also, I have two classes that inherit from the classes previously described.\nThis is Legacy::Company:</p>\n\n<pre><code>#/models/legacy/company.rb    \n\nrequire_relative 'base'\n\nmodule Legacy\n  class Company &lt; Base\n    self.table_name = \"company\"\n  end\nend\n</code></pre>\n\n<p>and NotLegacy::Company:</p>\n\n<pre><code>#/models/not_legacy/company.rb    \n\nrequire_relative 'base'\n\nmodule NotLegacy\n  class Company &lt; Base\n    self.table_name = \"company\"\n  end\nend\n</code></pre>\n\n<p>Now, if I go to the console and do something like(I'm printing conf value):</p>\n\n<pre><code>irb(main):001:0&gt; load 'app/models/legacy/company.rb'\nCONFS: {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"pool\"=&gt;5, \"host\"=&gt;\"localhost\", \"user\"=&gt;\"xxxxx\", \"password\"=&gt;\"xxxxx\", \"database\"=&gt;\"legacy\"}\n=&gt; true\nirb(main):002:0&gt; Legacy::Company.count\n=&gt; 8\nirb(main):003:0&gt; load 'app/models/not_legacy/company.rb'\nCONFS: {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"pool\"=&gt;5, \"host\"=&gt;\"localhost\", \"user\"=&gt;\"xxxxx\", \"password\"=&gt;\"xxxxx\", \"database\"=&gt;\"not_legacy\"}\n=&gt; true\nirb(main):004:0&gt; NotLegacy::Company.count\n=&gt; 1\n</code></pre>\n\n<p>At this point everything seems to work correctly since in the <strong>legacy</strong> database there are <strong>8 records</strong> for company and in the <strong>not_legacy</strong> database there is only <strong>1 record</strong>. But if I call Legacy::Company again, I get:</p>\n\n<pre><code>irb(main):005:0&gt; Legacy::Company.count\n=&gt; 1\nirb(main):005:0&gt; NotLegacy::Company.count\n=&gt; 1\n</code></pre>\n\n<p>It seems that the second connection (made to the not_legacy database) is <strong>overwriting</strong> the first one (the one made to the legacy database).</p>\n\n<p>If anyone of you can explain me why this is happening and how to fix it I will be immensely grateful</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1549857006, "post_id": 54623666, "comment_id": 96039842, "body": "what is the ruby version running in your app. $ruby -v. This could be due to rvm issues, have a look into <a href=\"https://stackoverflow.com/questions/5515331/no-such-file-to-load-openssl\" title=\"no such file to load openssl\">stackoverflow.com/questions/5515331/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11043229, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-83HbauZxJ0I/AAAAAAAAAAI/AAAAAAAAXmI/fUgJ47GtPcU/photo.jpg?sz=128", "display_name": "Anuja W", "link": "https://stackoverflow.com/users/11043229/anuja-w"}, "reply_to_user": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1549858153, "post_id": 54623666, "comment_id": 96040082, "body": "@Bijendra  Below is the Ruby version: ruby 1.8.7 (2013-06-27 patchlevel 374) [i686-darwin17.7.0]"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11043229, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-83HbauZxJ0I/AAAAAAAAAAI/AAAAAAAAXmI/fUgJ47GtPcU/photo.jpg?sz=128", "display_name": "Anuja W", "link": "https://stackoverflow.com/users/11043229/anuja-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1549860283, "creation_date": 1549860283, "answer_id": 54624085, "question_id": 54623666, "link": "https://stackoverflow.com/questions/54623666/unable-to-do-bundle-install-and-gem-install-bundler-v-1-17-3-with-ruby-version/54624085#54624085", "title": "Unable to do bundle install and gem install bundler -v 1.17.3 with ruby version ruby-1.8.7-p374", "body": "<p>So, I was able to resolve this error by referring to the following link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/48575868/how-to-set-correct-ruby-version-in-gem-environment\">How to set correct Ruby version in gem environment</a></p>\n\n<p>The main issue was that my Ruby gem (2.0.17) was not compatible with ruby 1.8.7 (2013-06-27 patchlevel 374)\nFollowing are the steps I did:\nOnly after downloading RubyGems 1.6.2, unzipping it etc as the instructions say</p>\n\n<p>So:</p>\n\n<p><code>curl -O https://rubygems.org/rubygems/rubygems-1.6.2.tgz</code></p>\n\n<p>then unzip the downloaded file;</p>\n\n<p>To extract a .tgz file with tar you need to use,</p>\n\n<pre><code>tar -xvzf /path/to/yourfile.tgz\n</code></pre>\n\n<pre><code>cd rubygems-1.6.2\nrvm ruby-1.8.7-p374\nruby setup.rb\ngem update --system 1.8.25\n\n</code></pre>\n\n<p>Then, run <code>gem env</code> to check your RubyGems environment. Hopefully, it will be ok and then run <code>gem install bundler -v 1.17.3</code></p>\n"}, {"tags": [], "owner": {"reputation": 767, "user_id": 1783902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc3d4028b2b07d6789767174eae1d104?s=128&d=identicon&r=PG", "display_name": "thiaguerd", "link": "https://stackoverflow.com/users/1783902/thiaguerd"}, "is_accepted": false, "score": 1, "last_activity_date": 1549889435, "creation_date": 1549889435, "answer_id": 54631023, "question_id": 54623666, "link": "https://stackoverflow.com/questions/54623666/unable-to-do-bundle-install-and-gem-install-bundler-v-1-17-3-with-ruby-version/54631023#54631023", "title": "Unable to do bundle install and gem install bundler -v 1.17.3 with ruby version ruby-1.8.7-p374", "body": "<p>I already had this problem, I solved with:</p>\n\n<pre><code>gem update --system\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 482, "user_id": 4126683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac017eb4e401b4201d245e17a86e160?s=128&d=identicon&r=PG", "display_name": "Mr.Kushwaha", "link": "https://stackoverflow.com/users/4126683/mr-kushwaha"}, "is_accepted": false, "score": 2, "last_activity_date": 1559021823, "creation_date": 1559021823, "answer_id": 56335613, "question_id": 54623666, "link": "https://stackoverflow.com/questions/54623666/unable-to-do-bundle-install-and-gem-install-bundler-v-1-17-3-with-ruby-version/56335613#56335613", "title": "Unable to do bundle install and gem install bundler -v 1.17.3 with ruby version ruby-1.8.7-p374", "body": "<p>Try running these command for your problem.</p>\n\n<blockquote>\n  <p>sudo gem install -n /usr/local/bin bundler -v 1.17.3</p>\n</blockquote>\n\n<p>Then, Install Ruby dependencies</p>\n\n<blockquote>\n  <p>bundle install</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 11043229, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-83HbauZxJ0I/AAAAAAAAAAI/AAAAAAAAXmI/fUgJ47GtPcU/photo.jpg?sz=128", "display_name": "Anuja W", "link": "https://stackoverflow.com/users/11043229/anuja-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7247, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1559021823, "creation_date": 1549856493, "question_id": 54623666, "link": "https://stackoverflow.com/questions/54623666/unable-to-do-bundle-install-and-gem-install-bundler-v-1-17-3-with-ruby-version", "title": "Unable to do bundle install and gem install bundler -v 1.17.3 with ruby version ruby-1.8.7-p374", "body": "<p>OS in use:  Mac OS High Sierra\nVersion: 10.13.6</p>\n\n<p>I have an RVM installed with the following Ruby versions:</p>\n\n<pre><code>\nMAC-070618-A:website anujaw$ rvm list\n   ruby-1.8.7-head [ i686 ]\n   ruby-1.8.7-p358 [ i686 ]\n=&gt; ruby-1.8.7-p374 [ i686 ]\n * ruby-2.3.7 [ x86_64 ]\n   ruby-2.4.0 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n\n</code></pre>\n\n<p>Ruby version I need for running an app locally on my machine is: ruby-1.8.7-p374\nI am trying to do a <code>bundle install</code> and getting below error:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems.rb:241:in `bin_path': can't find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)\n    from /usr/local/bin/bundle:22:in `&lt;main&gt;'\n\n</code></pre>\n\n<p>When I do <code>gem install bundler</code> as below, I get an error:</p>\n\n<pre><code>\nMAC-070618-A:website anujaw$ gem install bundler -v 1.17.3\nERROR:  Loading command: install (LoadError)\n    no such file to load -- openssl\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n\n</code></pre>\n\n<p>I already have OpenSSL installed, see below:</p>\n\n<pre><code>    MAC-070618-A:website anujaw$ brew info openssl\n    openssl: stable 1.0.2q (bottled) [keg-only]\n    SSL/TLS cryptography library\n    https://openssl.org/\n    /usr/local/Cellar/openssl/1.0.2o_2 (1,792 files, 12.3MB)\n      Poured from bottle on 2018-07-23 at 14:37:12\n    /usr/local/Cellar/openssl/1.0.2q (1,794 files, 12.1MB)\n      Poured from bottle on 2019-01-30 at 14:12:51\n    From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/openssl.rb\n    ==&gt; Caveats\n    A CA file has been bootstrapped using certificates from the SystemRoots\n    keychain. To add additional certificates (e.g. the certificates added in\n    the System keychain), place .pem files in\n      /usr/local/etc/openssl/certs\n\n    and run\n      /usr/local/opt/openssl/bin/c_rehash\n\n    openssl is keg-only, which means it was not symlinked into /usr/local,\n    because Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries.\n\n    If you need to have openssl first in your PATH run:\n      echo 'export PATH=\"/usr/local/opt/openssl/bin:$PATH\"' &gt;&gt; ~/.bash_profile\n\n    For compilers to find openssl you may need to set:\n      export LDFLAGS=\"-L/usr/local/opt/openssl/lib\"\n      export CPPFLAGS=\"-I/usr/local/opt/openssl/include\"\n\n    For pkg-config to find openssl you may need to set:\n      export PKG_CONFIG_PATH=\"/usr/local/opt/openssl/lib/pkgconfig\"\n\n    ==&gt; Analytics\n    install: 465,985 (30 days), 1,553,385 (90 days), 6,076,848 (365 days)\n    install_on_request: 59,235 (30 days), 217,436 (90 days), 854,397 (365 days)\n    build_error: 0 (30 days)\n\n</code></pre>\n\n<p>Kindly advise how to get past this obstacle? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 0, "creation_date": 1549854273, "post_id": 54623339, "comment_id": 96039335, "body": "if you want to merge the form, you have to update your controller code to able to process those 2 forms"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 1, "creation_date": 1549859499, "post_id": 54623339, "comment_id": 96040424, "body": "Yes, you can do that. But in that case you need to declare a single form instance with one <code>form_url</code>."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4491535, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mx3k7so1yZY/AAAAAAAAAAI/AAAAAAAAABA/DjKirtkviHk/photo.jpg?sz=128", "display_name": "Alan Joseph", "link": "https://stackoverflow.com/users/4491535/alan-joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1549870709, "creation_date": 1549870709, "answer_id": 54625869, "question_id": 54623339, "link": "https://stackoverflow.com/questions/54623339/how-can-i-use-one-submit-button-for-two-forms-in-rails/54625869#54625869", "title": "How can I use one submit button for two forms in rails?", "body": "<ol>\n<li>Unify Controller</li>\n</ol>\n\n<p>In order to make 2 forms to be processed simultaneously, you would need to make the controller to receive params from both the forms and process accordingly.\nIn this case, you would need to do proper rollbacks in case of failure to one of the operations.\nYou may look at gems like <a href=\"https://github.com/collectiveidea/interactor\" rel=\"nofollow noreferrer\">Interactor</a> if in case your use case becomes more complex.</p>\n\n<ol start=\"2\">\n<li>Independent AJAX requests</li>\n</ol>\n\n<p>If two of the requests are independent, you can make them into ajax calls (asynchronous); and just have one button to post one form after another.\nExample code:</p>\n\n<pre><code>$('.single-submit-btn').click(function(){\n  $('#form1').submit();\n});\n\n$(\"#form1\").bind('ajax:complete', function() {\n  $('#form2').submit();\n});\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7050383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-37dOOOZc8TE/AAAAAAAAAAI/AAAAAAAAaEU/Xe92SRFjjr8/photo.jpg?sz=128", "display_name": "Matheus Santos", "link": "https://stackoverflow.com/users/7050383/matheus-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549870709, "creation_date": 1549853383, "question_id": 54623339, "link": "https://stackoverflow.com/questions/54623339/how-can-i-use-one-submit-button-for-two-forms-in-rails", "title": "How can I use one submit button for two forms in rails?", "body": "<p>I have a form that creates an object 'Visit' and a custom for stripe. I would like to merge the two forms and have only one submit button that processes both forms.</p>\n\n<p>Create Visit Form with stripe payment form rendered in it.</p>\n\n<pre><code>&lt;%= simple_form_for([@service, @visit]) do |f| %&gt;\n\n  &lt;%= f.error_notification %&gt;\n  &lt;%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %&gt;\n  &lt;%= f.input :visit_date, as: :date , :label =&gt; \"Service date:\"%&gt;\n  &lt;%= f.input :visit_time, as: :time , :label =&gt; \"Service time:\" %&gt;\n  &lt;%= f.input :note, :label =&gt; \"Anything we should know?\" %&gt;\n\n  &lt;%= render 'payments/payments-form' %&gt;\n\n  &lt;%= f.button :submit, 'Schedule and Pay', class:'btn btn-bennett' %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is the stripe form.</p>\n\n<pre><code>&lt;%= form_tag payments_path, method: 'post', id: 'payment-form' do %&gt;\n  &lt;span class=\"payment-errors\"&gt;&lt;/span&gt;\n\n  &lt;div class=\"form-row\"&gt;\n    &lt;label&gt;\n      &lt;span&gt;Card Number&lt;/span&gt;\n      &lt;input type=\"text\" size=\"20\" data-stripe=\"number\"/&gt;\n    &lt;/label&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-row\"&gt;\n    &lt;label&gt;\n      &lt;span&gt;CVC&lt;/span&gt;\n      &lt;input type=\"text\" size=\"4\" data-stripe=\"cvc\"/&gt;\n    &lt;/label&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-row\"&gt;\n    &lt;label&gt;\n      &lt;span&gt;Expiration (MM/YYYY)&lt;/span&gt;\n      &lt;input type=\"text\" size=\"2\" data-stripe=\"exp-month\"/&gt;\n    &lt;/label&gt;\n    &lt;span&gt; / &lt;/span&gt;\n    &lt;input type=\"text\" size=\"4\" data-stripe=\"exp-year\"/&gt;\n  &lt;/div&gt;\n\n  &lt;button type=\"submit\"&gt;Submit Payment&lt;/button&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is the show page where the form goes</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @service.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Price:&lt;/strong&gt;\n  &lt;%= @service.price %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Estimated time:&lt;/strong&gt;\n  &lt;%= @service.estimated_time %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Modal tag:&lt;/strong&gt;\n  &lt;%= @service.modal_tag %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;This is where the desciption of the service would go.\n  This is where the desciption of the service would go.\n  This is where the desciption of the service would go.\n  This is where the desciption of the service would go.\n  This is where the desciption of the service would go.\n&lt;/p&gt;\n\n&lt;h1&gt;Set Service: &lt;/h1&gt;\n\n&lt;%= render 'visits/form' %&gt;\n\n&lt;%= link_to 'Edit', edit_service_path(@service) %&gt; |\n&lt;%= link_to 'Back', services_path %&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>Currently, there are two submit buttons. I would like there to be only one. How do I do this? Thank you!</p>\n"}, {"tags": ["arrays", "ruby", "sum"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1549852340, "post_id": 54622356, "comment_id": 96038975, "body": "Something like: <code>Range.new(*[a, b].sort).sum</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1549853151, "post_id": 54622356, "comment_id": 96039127, "body": "Some points: Use two spaces for indentation; the <code>else</code> should be aligned with the corresponding <code>if</code>; don&#39;t use <code>puts</code> inside of your method. The printing of the result is not the responsibility of the method. Print when calling so <code>puts get_sum(2, -3)</code> etc."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1549909517, "post_id": 54622356, "comment_id": 96065727, "body": "Your question is very unclear. There are numbers between 2 and -3, so the sum <i>should</i> be 0, no?"}], "answers": [{"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1549845546, "post_id": 54622441, "comment_id": 96037846, "body": "Which means you can avoid the unnecessary conversion to an array by using <code>(a..b).inject &amp;:+</code> once the bounds are properly ordered.  Makes the whole thing a two-liner, and less wasteful of storage."}], "tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": false, "score": 4, "last_activity_date": 1549844256, "last_edit_date": 1549844256, "creation_date": 1549843794, "answer_id": 54622441, "question_id": 54622356, "link": "https://stackoverflow.com/questions/54622356/how-do-i-get-a-sum-of-negative-numbers-in-an-array/54622441#54622441", "title": "How do I get a sum of negative numbers in an array?", "body": "<p>What you can do is reverse the order of the numbers if the end value is greater than the beginning value:</p>\n\n<pre><code>a, b = b, a if a &gt; b\n</code></pre>\n\n<p>According to the book \"Programming Ruby\", the Range object stores the two endpoints of the range and uses the .succ member to generate the intermediate values.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1549852552, "last_edit_date": 1549852552, "creation_date": 1549852126, "answer_id": 54623209, "question_id": 54622356, "link": "https://stackoverflow.com/questions/54622356/how-do-i-get-a-sum-of-negative-numbers-in-an-array/54623209#54623209", "title": "How do I get a sum of negative numbers in an array?", "body": "<p>You want the sum of an algebraic series.</p>\n\n<pre><code>def get_sum(a,b)\n  ((a-b).abs+1)*(a+b)/2\nend\n\nget_sum( 1,  4)  #=&gt;  10 \nget_sum( 4,  1)  #=&gt;  10 \nget_sum(-4, -1)  #=&gt; -10 \nget_sum(-1, -4)  #=&gt; -10\nget_sum(-3,  4)  #=&gt;   4\nget_sum( 4, -3)  #=&gt;   4\nget_sum(-4,  3)  #=&gt;  -4 \nget_sum( 3, -4)  #=&gt;  -4\n</code></pre>\n\n<p><code>(a-b).abs+1</code> is the number of elements in the series.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1549867106, "creation_date": 1549867106, "answer_id": 54625116, "question_id": 54622356, "link": "https://stackoverflow.com/questions/54622356/how-do-i-get-a-sum-of-negative-numbers-in-an-array/54625116#54625116", "title": "How do I get a sum of negative numbers in an array?", "body": "<p>Just for fun, mixing up for Ruby 2.6:</p>\n\n<pre><code>x, y = 2, -3\n[x,y].tap{ |a| a.reverse! if a[0] &gt; a[1] }.then{ |x,y| (x..y).sum }\n#=&gt; -3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1549909424, "post_id": 54627533, "comment_id": 96065680, "body": "Why do you convert to an array? Not only does <code>Range</code> also have a <code>sum</code> method, its method is also optimized for integers, taking only O(1) steps instead of O(n) for the array version."}, {"owner": {"reputation": 1, "user_id": 5824878, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DRWvuXUIEuY/AAAAAAAAAAI/AAAAAAAAAGs/qaiAkNS-UTE/photo.jpg?sz=128", "display_name": "Himanshu Goyal", "link": "https://stackoverflow.com/users/5824878/himanshu-goyal"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1549948155, "post_id": 54627533, "comment_id": 96077775, "body": "Thanks for pointing the complexity involved, but can you please explain how it is O(1)?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1549971967, "post_id": 54627533, "comment_id": 96089836, "body": "Well, it is simply using the well-known closed-form formula for the sum from x to y."}], "tags": [], "owner": {"reputation": 1, "user_id": 5824878, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DRWvuXUIEuY/AAAAAAAAAAI/AAAAAAAAAGs/qaiAkNS-UTE/photo.jpg?sz=128", "display_name": "Himanshu Goyal", "link": "https://stackoverflow.com/users/5824878/himanshu-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1549883270, "last_edit_date": 1549883270, "creation_date": 1549877774, "answer_id": 54627533, "question_id": 54622356, "link": "https://stackoverflow.com/questions/54622356/how-do-i-get-a-sum-of-negative-numbers-in-an-array/54627533#54627533", "title": "How do I get a sum of negative numbers in an array?", "body": "<pre><code>(x..y).to_a.sum\n</code></pre>\n\n<p>where x is the range starting number and y is the last element.\nRefer to:<br>\n<a href=\"https://ruby-doc.org/core-2.2.0/Range.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.0/Range.html</a></p>\n"}], "owner": {"reputation": 89, "user_id": 10366209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tyyVVZV0Ac4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMs8xZK2AXib6BqLNHEbFk8ru26pQ/mo/photo.jpg?sz=128", "display_name": "Taj", "link": "https://stackoverflow.com/users/10366209/taj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 1, "accepted_answer_id": 54623209, "answer_count": 4, "score": 2, "last_activity_date": 1549883270, "creation_date": 1549842926, "last_edit_date": 1549883259, "question_id": 54622356, "link": "https://stackoverflow.com/questions/54622356/how-do-i-get-a-sum-of-negative-numbers-in-an-array", "title": "How do I get a sum of negative numbers in an array?", "body": "<p>I want to input 2 numbers and calculate the total of the numbers in between the 2 numbers and it self. \neg (1,3) 1+2+3 = 6</p>\n\n<p>I have tried the code below, this works with 2 positives however this does not add up positive + negative and returns 0 everytime</p>\n\n<pre><code>def get_sum(a,b)\n if a &gt; b || a &lt; b \n  num_array = (a..b).to_a.sum\n  puts num_array\n  else \n  puts a\n end\nend\n\nget_sum(2,-3)\n</code></pre>\n\n<p>expected -3 instead returns 0</p>\n"}, {"tags": ["ruby", "stdout", "stdin", "popen3"], "answers": [{"comments": [{"owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1549893226, "post_id": 54626184, "comment_id": 96056357, "body": "I was hoping for something simpler (and native?). This is three times the size of my script."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "edited": false, "score": 0, "creation_date": 1549962395, "post_id": 54626184, "comment_id": 96083916, "body": "You could write the stdin data to a temporary file and let the system do the redirection, added that to the answer."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 0, "last_activity_date": 1549962334, "last_edit_date": 1549962334, "creation_date": 1549872174, "answer_id": 54626184, "question_id": 54621655, "link": "https://stackoverflow.com/questions/54621655/both-get-stdout-in-realtime-and-provide-stdin/54626184#54626184", "title": "Both get STDOUT in realtime and provide STDIN", "body": "<p>Here's a snippet for realtime stdout with optional stdin data. You need to use <code>IO.select</code> to peek into the streams to see if they're readable.</p>\n\n<pre><code>require 'open3'\n\nclass Runner\n  class Result\n    attr_accessor :status\n    attr_reader :stdout, :stderr\n\n    def initialize\n      @stdout = +''\n      @stderr = +''\n      @status = -127\n    end\n\n    def success?\n      status.zero?\n    end\n  end\n\n  attr_reader :result\n\n  def initialize(cmd, stdin: nil, print_to: nil)\n    @stdin = stdin\n    @cmd = cmd\n    @result = Result.new\n    @print_to = print_to\n  end\n\n  def run\n    Open3.popen3(@cmd) do |stdin, stdout, stderr, wait_thr|\n      # Dump the stdin-data into the command's stdin:\n      unless stdin.closed?\n        stdin.write(@stdin) if @stdin\n        stdin.close\n      end\n\n      until [stdout, stderr].all?(&amp;:eof?)\n        readable = IO.select([stdout, stderr])\n        next unless readable&amp;.first\n\n        readable.first.each do |stream|\n          data = +''\n          begin\n            stream.read_nonblock(1024, data)\n          rescue EOFError\n            # ignore, it's expected for read_nonblock to raise EOFError\n            # when all is read\n          end\n\n          next if data.empty?\n\n          if stream == stdout\n            result.stdout &lt;&lt; data\n            @print_to &lt;&lt; data if @print_to\n          else\n            result.stderr &lt;&lt; data\n            @print_to &lt;&lt; data if @print_to\n          end\n        end\n      end\n\n      result.status = wait_thr.value.exitstatus\n    end\n    result\n  end\nend\n\n\nresult = Runner.new('ls -al').run\nputs \"Exit status: %d\" % result.status\nputs \"Stdout:\"\nputs result.stdout\nputs \"Stderr:\"\nputs result.stderr\n\n# Print as it goes:\nresult = Runner.new('ls -al', print_to: $stdout).run\n</code></pre>\n\n<p>If you need to simulate real time stdin (keypresses), then you need to create some sort of matcher for the stdout data stream and write the responses to the command's stdin when the expected prompt comes through the stream. In that case you are probably better off with <code>PTY.spawn</code> or using a 3rd party gem.</p>\n\n<p>You could also write the stdin data to a tempfile and use the shell's own redirection:</p>\n\n<pre><code>require 'tempfile'\ntempfile = Tempfile.new\ntempfile.write(stdin_data)\ntempfile.close\nsystem(%(do_stuff &lt; \"#{tempfile.path}\"))\ntempfile.unlink\n</code></pre>\n"}], "owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549962334, "creation_date": 1549836992, "last_edit_date": 1549837407, "question_id": 54621655, "link": "https://stackoverflow.com/questions/54621655/both-get-stdout-in-realtime-and-provide-stdin", "title": "Both get STDOUT in realtime and provide STDIN", "body": "<p>I have a command that requires I give it some STDIN data, as in <code>my-command &lt;&lt;&lt; my-data</code>. I don\u2019t have control over the command; the info is meant to be given interactively and <code>&lt;&lt;&lt;</code> works.</p>\n\n<p>I want to automate this command as part of a larger script, but since its action takes a while \u2014 but outputs progress to STDOUT \u2014 I want to print STDOUT in real time. I also want to be able to capture the exit status of the command, to determine if it failed or not.</p>\n\n<p>If I use <code>system</code>, I get the STDOUT as it happens, but can\u2019t provide STDIN data.</p>\n\n<pre><code>system('my-command')\n</code></pre>\n\n<p>If I use <code>Open3</code>, I can provide STDIN data but STDOUT is only printed at the end (if I capture it at all).</p>\n\n<pre><code>Open3.capture2('my-command', stdin_data: 'my-data')[1].success?\n</code></pre>\n\n<p>Any way I can get the best of both worlds, preferably with <code>Open3</code>?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 1025856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4198e58cc6ba91c93c24ddd3d58401a?s=128&d=identicon&r=PG", "display_name": "mb52089", "link": "https://stackoverflow.com/users/1025856/mb52089"}, "edited": false, "score": 1, "creation_date": 1549841269, "post_id": 54621557, "comment_id": 96037057, "body": "Thanks!  That was exactly what I needed.  Works perfectly."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 797, "user_id": 1025856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4198e58cc6ba91c93c24ddd3d58401a?s=128&d=identicon&r=PG", "display_name": "mb52089", "link": "https://stackoverflow.com/users/1025856/mb52089"}, "edited": false, "score": 0, "creation_date": 1549841528, "post_id": 54621557, "comment_id": 96037110, "body": "with pleasure -))"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 1, "last_activity_date": 1549836297, "creation_date": 1549836297, "answer_id": 54621557, "question_id": 54621489, "link": "https://stackoverflow.com/questions/54621489/how-to-sort-a-collection-radio-buttons-object/54621557#54621557", "title": "How to sort a collection_radio_buttons object", "body": "<p>Define a scope in your InfoSession model,</p>\n\n<pre><code>class InfoSession &lt; ApplicationRecord\n  scope :sorted_by_description, -&gt; { order(description: :desc) } #default is :asc\nend\n</code></pre>\n\n<p>then in your view (or better in controller, then pass to view), </p>\n\n<pre><code>&lt;%= f.collection_radio_buttons :investor, InfoSession.sorted_by_description, :id, :description,\n           label: \"Please select an investor session:\",\n           required: true,\n           checked: 1,\n           wrapper: { class: 'text-left'} %&gt;\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 1025856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4198e58cc6ba91c93c24ddd3d58401a?s=128&d=identicon&r=PG", "display_name": "mb52089", "link": "https://stackoverflow.com/users/1025856/mb52089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 54621557, "answer_count": 1, "score": 0, "last_activity_date": 1549836297, "creation_date": 1549835808, "question_id": 54621489, "link": "https://stackoverflow.com/questions/54621489/how-to-sort-a-collection-radio-buttons-object", "title": "How to sort a collection_radio_buttons object", "body": "<p>I have the following radio button that is currently sorting by default using the updated_at date/time.  I would instead like to sort by id.  <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_radio_buttons\" rel=\"nofollow noreferrer\">The docs</a> say that you can specify order with a block but I can't seem to figure out the context.  Here's the radio button as is.  I'd like to add a sort based on id of the Infosessions.all description field:</p>\n\n<pre><code>          &lt;%= f.collection_radio_buttons :investor, InfoSession.all, :id, :description,\n                                      label: \"Please select an investor session:\",\n                                      required: true,\n                                      checked: 1,\n                                      wrapper: { class: 'text-left'} %&gt;\n</code></pre>\n"}]