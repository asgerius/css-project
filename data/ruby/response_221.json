[{"tags": ["ruby", "macos", "rvm"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1554336247, "post_id": 55505603, "comment_id": 97717765, "body": "I assume you closed and restarted all terminals before reinstall RVM ?  Also can you post output of <code>gem env</code>"}, {"owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1554336366, "post_id": 55505603, "comment_id": 97717791, "body": "@lacostenycoder thanks for replying. Yes I&#39;ve restarted terminals after reinstall. I&#39;ll paste <code>gem env</code> output above"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1554338487, "post_id": 55505603, "comment_id": 97718283, "body": "looks like you multiple <code>&#47;Users&#47;andres&#47;.rvm&#47;bin</code> in your PATH.  Make sure to remove all RVM things from your .bashrc .bash_profile etc.  Then restart and try reinstall rvm. But you also have other duplicates in your PATH, this will usually cause problems.  Check where your shell is setting PATH"}, {"owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1554349072, "post_id": 55505603, "comment_id": 97720422, "body": "@lacostenycoder I see let me see re-check the bash files. When you say &quot;Check where you sell is setting PATH&quot; what exactly do you mean. Sorry I&#39;m completely ignorant about working with shell"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1554364789, "post_id": 55505603, "comment_id": 97726534, "body": "You should verify if your C-compiler can create executable"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1554389952, "post_id": 55505603, "comment_id": 97742878, "body": "@LorinczyZsigmond understanding how $PATH is set is important. Have a look at the 2nd answer here <a href=\"https://askubuntu.com/questions/705912/where-is-my-path-variable-being-set\" title=\"where is my path variable being set\">askubuntu.com/questions/705912/&hellip;</a> to see where you might be duplicating, but also see <a href=\"https://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them\" title=\"what are path and other environment variables and how can i set or use them\">superuser.com/questions/284342/&hellip;</a>"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1554394024, "post_id": 55505603, "comment_id": 97745420, "body": "You might have misunderstood what I said: just check if your C-compiler is able to create executable. Use exactly the same command and source-program you see in <code>config.log</code>"}, {"owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1554408123, "post_id": 55505603, "comment_id": 97752271, "body": "@lacostenycoder thanks I\u2019ll give that a look"}], "answers": [{"comments": [{"owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "edited": false, "score": 0, "creation_date": 1554336983, "post_id": 55506052, "comment_id": 97717947, "body": "When I go into the App Store there\u2019s no update available for XCode, any ideas how to upgrade then?"}, {"owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "edited": false, "score": 0, "creation_date": 1554340502, "post_id": 55506052, "comment_id": 97718700, "body": "Thanks Joel. I&#39;ll give it a try. By the way, welcome to SO"}, {"owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "edited": false, "score": 0, "creation_date": 1554349738, "post_id": 55506052, "comment_id": 97720559, "body": "I updated Xcode from <a href=\"https://developer.apple.com/download/more/\" rel=\"nofollow noreferrer\">developer.apple.com/download/more</a> and it worked. Thanks"}, {"owner": {"reputation": 231, "user_id": 4794662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cENY0qhZtWM/AAAAAAAAAAI/AAAAAAAAAeE/CAwnlDiNYs0/photo.jpg?sz=128", "display_name": "Aaron Mast", "link": "https://stackoverflow.com/users/4794662/aaron-mast"}, "edited": false, "score": 0, "creation_date": 1617332725, "post_id": 55506052, "comment_id": 118281048, "body": "Also, make sure you have xcode command line tools installed  <code>xcode-select --install</code>"}], "tags": [], "owner": {"reputation": 101, "user_id": 3897481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUnIT.png?s=128&g=1", "display_name": "Joel K", "link": "https://stackoverflow.com/users/3897481/joel-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1554336907, "creation_date": 1554336907, "answer_id": 55506052, "question_id": 55505603, "link": "https://stackoverflow.com/questions/55505603/error-while-running-configure-when-installing-ruby-via-rvm-c-compiler-cannot-cr/55506052#55506052", "title": "Error while running configure when installing Ruby via RVM `C compiler cannot create executables`", "body": "<p>I think your xcode version is out of date. Upgrading to 10.2 should fix it.</p>\n"}], "owner": {"reputation": 1302, "user_id": 6612655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fAsxJ.jpg?s=128&g=1", "display_name": "alopez02", "link": "https://stackoverflow.com/users/6612655/alopez02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 0, "accepted_answer_id": 55506052, "answer_count": 1, "score": 2, "last_activity_date": 1554336907, "creation_date": 1554333150, "last_edit_date": 1554336431, "question_id": 55505603, "link": "https://stackoverflow.com/questions/55505603/error-while-running-configure-when-installing-ruby-via-rvm-c-compiler-cannot-cr", "title": "Error while running configure when installing Ruby via RVM `C compiler cannot create executables`", "body": "<p>For whatever reason, I've just imploded my RVM (which was working just fine) and tried it to install it again. I'm facing an error that prevents the installation while RVM is testing the compiler. I'd appreciate any help debugging this.</p>\n\n<p>The issue occurs after running: </p>\n\n<pre><code>$ rvm install 2.6.2\n</code></pre>\n\n<p>of any other version of Ruby.</p>\n\n<p>I get the following output</p>\n\n<pre><code>Error running './configure --prefix=/Users/andres/.rvm/rubies/ruby-\n\n2.6.2  --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl@1.1 --disable-install-doc --enable-shared',\n    please read /Users/andres/.rvm/log/1554329766_ruby-2.6.2/configure.log\n    There has been an error while running configure. Halting the installation.\n</code></pre>\n\n<p>And the configure.log shows</p>\n\n<pre><code>[2019-04-04 09:07:04] ./configure\ncurrent path: /Users/andres/.rvm/src/ruby-2.6.0\nPATH=/usr/local/opt/coreutils/bin:/usr/local/opt/pkg-config/bin:/usr/local/opt/libtool/bin:/usr/local/opt/automake/bin:/usr/local/opt/autoconf/bin:/usr/local/opt/node@8/bin:/usr/local/opt/node@8/bin:/opt/local/bin:/opt/local/sbin:/Users/andres/bin:/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/opt/node@8/bin:/opt/local/bin:/opt/local/sbin:/Users/andres/bin:/Users/andres/.rvm/bin\ncommand(5): ./configure --prefix=/Users/andres/.rvm/rubies/ruby-2.6.0 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl@1.1 --disable-install-doc --enable-shared\nchecking for ruby... /usr/bin/ruby\ntool/config.guess already exists\ntool/config.sub already exists\nchecking build system type... x86_64-apple-darwin18.5.0\nchecking host system type... x86_64-apple-darwin18.5.0\nchecking target system type... x86_64-apple-darwin18.5.0\nchecking whether the C compiler works... no\nconfigure: error: in `/Users/andres/.rvm/src/ruby-2.6.0':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\n</code></pre>\n\n<p>Relevant config.log lines</p>\n\n<pre><code>## ----------- ##\n## Core tests. ##\n## ----------- ##\n\nconfigure:2996: checking for ruby\nconfigure:3014: found /usr/bin/ruby\nconfigure:3027: result: /usr/bin/ruby\nconfigure:3105: checking build system type\nconfigure:3119: result: x86_64-apple-darwin18.5.0\nconfigure:3207: checking host system type\nconfigure:3220: result: x86_64-apple-darwin18.5.0\nconfigure:3240: checking target system type\nconfigure:3253: result: x86_64-apple-darwin18.5.0\nconfigure:3905: checking for C compiler version\nconfigure:3914: gcc --version &gt;&amp;5\nApple LLVM version 9.1.0 (clang-902.0.39.1)\nTarget: x86_64-apple-darwin18.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\nconfigure:3925: $? = 0\nconfigure:3914: gcc -v &gt;&amp;5\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\nApple LLVM version 9.1.0 (clang-902.0.39.1)\nTarget: x86_64-apple-darwin18.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nconfigure:3925: $? = 0\nconfigure:3914: gcc -V &gt;&amp;5\nclang: error: argument to '-V' is missing (expected 1 value)\nclang: error: no input files\nconfigure:3925: $? = 1\nconfigure:3914: gcc -qversion &gt;&amp;5\nclang: error: unknown argument: '-qversion'\nclang: error: no input files\nconfigure:3925: $? = 1\nconfigure:3945: checking whether the C compiler works\nconfigure:3967: gcc    conftest.c  &gt;&amp;5\nld: malformed file\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/lib/libSystem.tbd:4:18: error: unknown enumerated scalar\nplatform:        zippered\n                 ^~~~~~~~\n file '/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/lib/libSystem.tbd'\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nconfigure:3971: $? = 1\nconfigure:4009: result: no\nconfigure: failed program was:\n| /* confdefs.h */\n| #define PACKAGE_NAME \"\"\n| #define PACKAGE_TARNAME \"\"\n| #define PACKAGE_VERSION \"\"\n| #define PACKAGE_STRING \"\"\n| #define PACKAGE_BUGREPORT \"\"\n| #define PACKAGE_URL \"\"\n| /* end confdefs.h.  */\n| \n| int\n| main ()\n| {\n| \n|   ;\n|   return 0;\n| }\nconfigure:4014: error: in `/Users/andres/.rvm/src/ruby-2.6.0':\nconfigure:4016: error: C compiler cannot create executables\nSee `config.log' for more details\n</code></pre>\n\n<p>Environment: </p>\n\n<ul>\n<li>MacOS Mojave </li>\n<li>Xcode fully installed with CL tools (Version 9.3 -9E145-)</li>\n<li>rvm 1.29.7 (latest)</li>\n<li><p><code>gcc -v</code> outputs:</p>\n\n<p>Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\nApple LLVM version 9.1.0 (clang-902.0.39.1)\nTarget: x86_64-apple-darwin18.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</p></li>\n<li><p><code>clang --version</code> outputs:</p>\n\n<p>Apple LLVM version 9.1.0 (clang-902.0.39.1)\nTarget: x86_64-apple-darwin18.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</p>\n\n<ul>\n<li><code>xcode-select -p</code> outputs: <code>/Applications/Xcode.app/Contents/Developer</code></li>\n</ul></li>\n</ul>\n\n<p>I've tried (1) reinstalling RVM again and again. (2) Running <code>rvm get stable --autolibs=enable --auto-dotfiles</code> to fix any problems with bash, etc. (3) Making sure Xcode is updated. (4) Running rvm install 2.6.2 --with-gcc=clang (as suggested in some SO answers). </p>\n\n<p>All these without success. I'd appreciate your help. </p>\n\n<p>--- ADDITIONAL INFO ---</p>\n\n<p><code>gem env</code> output</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.5.2.3\n  - RUBY VERSION: 2.3.7 (2018-03-28 patchlevel 456) [universal.x86_64-darwin18]\n  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/2.3.0\n  - USER INSTALLATION DIRECTORY: /Users/andres/.gem/ruby/2.3.0\n  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/bin\n  - SPEC CACHE DIRECTORY: /Users/andres/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Library/Ruby/Site\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - universal-darwin-18\n  - GEM PATHS:\n     - /Library/Ruby/Gems/2.3.0\n     - /Users/andres/.gem/ruby/2.3.0\n     - /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/gems/2.3.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"gem\" =&gt; \"--no-document\"\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/opt/node@8/bin\n     - /usr/local/opt/node@8/bin\n     - /opt/local/bin\n     - /opt/local/sbin\n     - /Users/andres/bin\n     - /usr/local/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /usr/local/opt/node@8/bin\n     - /opt/local/bin\n     - /opt/local/sbin\n     - /Users/andres/bin\n     - /Users/andres/.rvm/bin\n     - /Users/andres/.rvm/bin\n     - /Users/andres/.rvm/bin\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1554332271, "post_id": 55505280, "comment_id": 97716868, "body": "@Phrogz has given an <a href=\"https://stackoverflow.com/a/8499054/5025116\">answer</a> a long time ago that might fit for your case."}], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1554333273, "creation_date": 1554333273, "answer_id": 55505621, "question_id": 55505280, "link": "https://stackoverflow.com/questions/55505280/ruby-how-can-i-split-a-string-containing-groups-of-consecutive-letters-into-gro/55505621#55505621", "title": "Ruby: How can I split a string containing groups of consecutive letters into groups of those letters?", "body": "<p>Modified variant of <a href=\"https://stackoverflow.com/a/8499054/5025116\">@Phrogz answer</a></p>\n\n<pre><code>\"aaabbbcccaaa\".scan(/((.)\\2*)/).map(&amp;:first) # =&gt; [\"aaa\", \"bbb\", \"ccc\", \"aaa\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1554408136, "post_id": 55505922, "comment_id": 97752275, "body": "I understand the regex used here as: <i>match a single character followed by zero or more of the exact same match</i>. But what I don&#39;t understand is why this works in <code>#gsub</code> but not in <code>#scan</code>. If anyone could help me understand why, I&#39;d appreciate it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1554409862, "post_id": 55505922, "comment_id": 97753158, "body": "It&#39;s simply because <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> treats capture groups in a special way. See the doc. Is that clear? Sometimes it&#39;s useful that <code>scan</code> has that property; other times it gets in the way."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 1, "creation_date": 1554409869, "post_id": 55505922, "comment_id": 97753160, "body": "I just noticed I had enclosed <code>\\1</code> in an unnecessary capture group. I don&#39;t know how that happened (or why someone else hasn&#39;t pointed that out), but I&#39;ve fixed it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1554409744, "last_edit_date": 1554409744, "creation_date": 1554335616, "answer_id": 55505922, "question_id": 55505280, "link": "https://stackoverflow.com/questions/55505280/ruby-how-can-i-split-a-string-containing-groups-of-consecutive-letters-into-gro/55505922#55505922", "title": "Ruby: How can I split a string containing groups of consecutive letters into groups of those letters?", "body": "<pre><code>str = \"aaabbbcccaaa\"\n\nstr.gsub(/(.)\\1*/).to_a\n  #=&gt; [\"aaa\", \"bbb\", \"ccc\", \"aaa\"]\n</code></pre>\n\n<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> that does not have a block and therefore returns an enumerator.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1554337571, "last_edit_date": 1554337571, "creation_date": 1554337257, "answer_id": 55506090, "question_id": 55505280, "link": "https://stackoverflow.com/questions/55505280/ruby-how-can-i-split-a-string-containing-groups-of-consecutive-letters-into-gro/55506090#55506090", "title": "Ruby: How can I split a string containing groups of consecutive letters into groups of those letters?", "body": "<p>This variation should work on any string with groups of 2 consecutive characters</p>\n\n<pre><code>\"foo\\n\\nbarr\".gsub(/(.)(\\1)*/).select{|l| l.length &gt;1}\n#=&gt; [\"oo\", \"rr\"]\n</code></pre>\n\n<p>Or for alpha characters only:</p>\n\n<pre><code>\"foo\\n\\n??barr..bazz\".gsub(/([a-zA-Z])(\\1)*/).select{|l| l.length &gt;1}\n#=&gt; [\"oo\", \"rr\", \"zz\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 0, "last_activity_date": 1554360273, "last_edit_date": 1554360273, "creation_date": 1554359930, "answer_id": 55509329, "question_id": 55505280, "link": "https://stackoverflow.com/questions/55505280/ruby-how-can-i-split-a-string-containing-groups-of-consecutive-letters-into-gro/55509329#55509329", "title": "Ruby: How can I split a string containing groups of consecutive letters into groups of those letters?", "body": "<p>Silly non-regex version:</p>\n\n<pre><code>str = \"aaabbbcccaaa\"\nstr.each_char.with_object([]) { |a,r| (r.last&amp;.end_with?(a) ? r.last : r) &lt;&lt; a }\n=&gt; [\"aaa\", \"bbb\", \"ccc\", \"aaa\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1554410138, "post_id": 55520769, "comment_id": 97753282, "body": "Note that in my answer <code>&#47;(.)\\1*&#47;</code> is sufficient. I don&#39;t know how that second capture group found its way into my original answer."}], "tags": [], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "is_accepted": false, "score": 0, "last_activity_date": 1554394845, "creation_date": 1554394845, "answer_id": 55520769, "question_id": 55505280, "link": "https://stackoverflow.com/questions/55505280/ruby-how-can-i-split-a-string-containing-groups-of-consecutive-letters-into-gro/55520769#55520769", "title": "Ruby: How can I split a string containing groups of consecutive letters into groups of those letters?", "body": "<p>I have found a way to do it without a regex using <code>Array#slice_when</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\"AAAABBBCDDD\".chars.slice_when(&amp;:!=).map(&amp;:join)\n#=&gt; [\"AAAA\", \"BBB\", \"C\", \"DDD\"]\n</code></pre>\n\n<p>Though <code>gsub</code> with a regex (as suggested by Cary Swoveland in his answer) is clearly faster:</p>\n\n<pre><code>Benchmark.measure do\n  100_000.times { \"AAAABBBCDDD\".chars.slice_when(&amp;:!=).map(&amp;:join) }  \nend  \n\n# =&gt; #&lt;Benchmark::Tms:0x00007fb11ff9a560\n#  @cstime=0.0,\n#  @cutime=0.0,\n#  @label=\"\",\n#  @real=1.427345999982208,\n#  @stime=0.013876,\n#  @total=1.3629069999999996,\n#  @utime=1.3490309999999996&gt;\n\nBenchmark.measure do\n  100_000.times { \"AAAABBBCDDD\".gsub(/(.)(\\1)*/).to_a }\nend\n\n=&gt; #&lt;Benchmark::Tms:0x00007fb1214f4dc0\n#  @cstime=0.0,\n#  @cutime=0.0,\n#  @label=\"\",\n#  @real=0.6837240000022575,\n#  @stime=0.03575100000000003,\n#  @total=0.64306,\n#  @utime=0.6073089999999999&gt;\n</code></pre>\n"}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 55505922, "answer_count": 5, "score": 1, "last_activity_date": 1554409744, "creation_date": 1554330694, "question_id": 55505280, "link": "https://stackoverflow.com/questions/55505280/ruby-how-can-i-split-a-string-containing-groups-of-consecutive-letters-into-gro", "title": "Ruby: How can I split a string containing groups of consecutive letters into groups of those letters?", "body": "<p>I want to turn a string containing groups of consecutive letters:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\"aaabbbcccaaa\"\n</code></pre>\n\n<p>Into:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>[\"aaa\",\"bbb\",\"ccc\",\"aaa\"]\n</code></pre>\n\n<p>I'm sure this should be straight forward in Ruby but I'm stumped.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-4", "html5-video"], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1554327368, "creation_date": 1554327368, "answer_id": 55504665, "question_id": 55504291, "link": "https://stackoverflow.com/questions/55504291/rails-error-autoplay-is-only-working-sometimes-for-video-tag/55504665#55504665", "title": "Rails error: Autoplay is only working sometimes for video_tag", "body": "<p>Adding <code>muted: \"muted\"</code> to my <code>video_tag</code> allowed me to check if the video is playing and then call <code>play()</code> if necessary. This resolved my issue:</p>\n\n<pre><code>    &lt;%= video_tag post.video_url.to_s, autoplay: true, loop: true, muted: \"muted\", class: :standard_post_video, id: \"standard_post_video_#{post.id}\" %&gt;\n    &lt;script&gt;\n      var video = $('#video').get(0);\n      if (video.paused) {\n        video.play();\n      }\n    &lt;/script&gt;\n</code></pre>\n\n<p>Commit: <a href=\"https://github.com/ethanwilkins/simplr/commit/4eea13ee610b4744f555cfba3696da6ac492b622\" rel=\"nofollow noreferrer\">https://github.com/ethanwilkins/simplr/commit/4eea13ee610b4744f555cfba3696da6ac492b622</a></p>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": true, "score": 4, "last_activity_date": 1554355814, "creation_date": 1554355814, "answer_id": 55508490, "question_id": 55504291, "link": "https://stackoverflow.com/questions/55504291/rails-error-autoplay-is-only-working-sometimes-for-video-tag/55508490#55508490", "title": "Rails error: Autoplay is only working sometimes for video_tag", "body": "<p>Simply add</p>\n\n<blockquote>\n  <p>muted: 'muted'</p>\n</blockquote>\n\n<p>in video_tag</p>\n\n<pre><code>video_tag post.video_url.to_s, autoplay: true, loop: true, muted: 'muted', class: :standard_post_video\n</code></pre>\n\n<p>See Docs: <a href=\"https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\" rel=\"nofollow noreferrer\">https://developers.google.com/web/updates/2017/09/autoplay-policy-changes</a></p>\n\n<p>Chrome's autoplay policies are simple:</p>\n\n<ul>\n<li>Muted autoplay is always allowed.</li>\n<li><p>Autoplay with sound is allowed if:</p>\n\n<ul>\n<li>User has interacted with the domain (click, tap, etc.).</li>\n<li>On desktop, the user's Media Engagement Index threshold has been crossed, meaning </li>\n<li>the user has previously play video with sound.</li>\n<li><p>On mobile, the user has [added the site to their home screen].</p></li>\n<li><p>Top frames can delegate autoplay permission to their iframes to allow autoplay with sound.</p></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 313, "user_id": 2034099, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/p410N.jpg?s=128&g=1", "display_name": "Forrest Wilkins", "link": "https://stackoverflow.com/users/2034099/forrest-wilkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 55508490, "answer_count": 2, "score": 2, "last_activity_date": 1554355814, "creation_date": 1554325663, "question_id": 55504291, "link": "https://stackoverflow.com/questions/55504291/rails-error-autoplay-is-only-working-sometimes-for-video-tag", "title": "Rails error: Autoplay is only working sometimes for video_tag", "body": "<p>I'm using Carrierwave to upload video files and have both <code>autoplay</code> and <code>loop</code> set to <code>true</code> for my <code>video_tag</code>. The video plays automatically after uploading it initially but only shows the first frame of the video after I've refreshed the page.</p>\n\n<p>Source for video_tag:</p>\n\n<p><code>video_tag post.video_url.to_s, autoplay: true, loop: true, class: :standard_post_video</code></p>\n\n<p><a href=\"https://github.com/ethanwilkins/simplr/blob/2c07884d153192566ded30bd020c06237747f401/app/views/posts/_card.html.erb#L87\" rel=\"nofollow noreferrer\">https://github.com/ethanwilkins/simplr/blob/2c07884d153192566ded30bd020c06237747f401/app/views/posts/_card.html.erb#L87</a></p>\n\n<p>I'm also using Nginx and Unicorn. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vue.js", "controller", "backend"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1554327402, "post_id": 55504245, "comment_id": 97715320, "body": "Unrelated, but a collection of <code>Project</code>s should be called <code>@projects</code>."}, {"owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1554327519, "post_id": 55504245, "comment_id": 97715354, "body": "Thanks for reminding me. It&#39;s been a long day and I&#39;m jetlagged."}, {"owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1554332028, "post_id": 55504245, "comment_id": 97716798, "body": "To the user who posted earlier and now whose post disappeared: Thanks, your suggestion of using Rails Helpers worked!"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "edited": false, "score": 0, "creation_date": 1554391736, "post_id": 55506054, "comment_id": 97744061, "body": "Thanks for the tip!"}, {"owner": {"reputation": 522, "user_id": 4693218, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7acbd56750d6214a787638e1e5fb605c?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Smith", "link": "https://stackoverflow.com/users/4693218/travis-smith"}, "edited": false, "score": 0, "creation_date": 1556281041, "post_id": 55506054, "comment_id": 98394735, "body": "For a technique I\u2019m using, check out [<a href=\"https://stackoverflow.com/a/53180179/4693218]\">stackoverflow.com/a/53180179/4693218]</a>."}], "tags": [], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "is_accepted": false, "score": 1, "last_activity_date": 1554336918, "creation_date": 1554336918, "answer_id": 55506054, "question_id": 55504245, "link": "https://stackoverflow.com/questions/55504245/how-do-i-give-my-vue-components-access-to-active-record-objects-on-my-rails-app/55506054#55506054", "title": "How do I give my Vue components access to active record objects on my Rails app?", "body": "<p>If you want to actually be able to use the data in VueJS you should convert the data to JSON and load it in to the vuejs data block.</p>\n\n<p>That way you could do something like </p>\n\n<pre><code>&lt;div v-for=\"project in projects\"&gt;{{project.information}}&lt;/div&gt;\n</code></pre>\n\n<p>You can then update this data in vue and it will automatically change the text on the page.</p>\n"}], "owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554336918, "creation_date": 1554325485, "last_edit_date": 1554327537, "question_id": 55504245, "link": "https://stackoverflow.com/questions/55504245/how-do-i-give-my-vue-components-access-to-active-record-objects-on-my-rails-app", "title": "How do I give my Vue components access to active record objects on my Rails app?", "body": "<p>I inherited a project built on Rails that uses Vue for its front-end. All the views are rendered through Vue, but the routing and models follow the standard Rails MVC pattern.</p>\n\n<p>I want to render some objects stored in Active record inside a Vue component. </p>\n\n<p>I also want to build a form in Vue with CRUD functionality with the Active record database.</p>\n\n<p>When I pass instance variables from the Rails controller to the Vue view it does not work. </p>\n\n<pre><code>#controller.rb\ndef index\n  @projects = Project.all\nend\n\n#view.html.erb\n&lt;% @projects.each do |e| %&gt;\n  &lt;div&gt;&lt;%= e.information %&gt;&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I have to directly call active record inside the view itself like so:</p>\n\n<pre><code>#controller.rb\ndef index\nend\n\n#view.html.erb\n&lt;% @projects = Project.all %&gt;\n&lt;% @projects.each do |e| %&gt;\n  &lt;div&gt;&lt;%= e.information %&gt;&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So to summarise, the two questions I need to answer are:<br>\n1. How do I pass active record objects into a vue component and render it in the front-end?<br>\n2. How can I write a Vue form to creat,edit &amp; update active record objects in the database?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1554324712, "post_id": 55503810, "comment_id": 97714351, "body": "Did you also view the <a href=\"https://github.com/rbenv/rbenv#homebrew-on-macos\" rel=\"nofollow noreferrer\">installation instructions</a> and run <code>rbenv init</code>, and follow the remaining installation instructions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8684708"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1554327263, "post_id": 55503810, "comment_id": 97715272, "body": "Yes! And now im getting <code>Ignoring bindex-0.6.0 because its extensions are not built.  Try: gem pristine bindex --version 0.6.0 Ignoring bootsnap-1.4.2 because its extensions are not built.  Try: gem pristine bootsnap --version 1.4.2 Ignoring byebug-11.0.1 because its extensions are not built.  Try: gem pristine byebug --version 11.0.1 &#47;Library&#47;Ruby&#47;Gems&#47;2.3.0&#47;gems&#47;bundler-2.0.1&#47;lib&#47;bundler&#47;spec&zwnj;&#8203;_set.rb:87:in `block in materialize&#39;: Could not find nokogiri-1.10.2 in any of the sources (Bundler::GemNotFound)</code>"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1554382741, "post_id": 55503810, "comment_id": 97737816, "body": "Try <code>which ruby</code>, <code>which gem</code>, and <code>which bundler</code> and post your results. Also, try <code>gem install bundler</code>. I suspect you&#39;ve got ruby configured, but it&#39;s pointing back to the default &quot;system ruby&quot; version of bundler (because of the path in the error)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8684708"}, "edited": false, "score": 0, "creation_date": 1554324409, "post_id": 55503951, "comment_id": 97714213, "body": "Thank you! i already followed this guide but it still dosent work"}, {"owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "edited": false, "score": 0, "creation_date": 1554328313, "post_id": 55503951, "comment_id": 97715645, "body": "What happens when you run <code>rbenv versions</code>?"}], "tags": [], "owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "is_accepted": true, "score": 2, "last_activity_date": 1554324218, "creation_date": 1554324218, "answer_id": 55503951, "question_id": 55503810, "link": "https://stackoverflow.com/questions/55503810/problem-with-command-rails-generate-model-xxx/55503951#55503951", "title": "Problem with command &quot;rails generate model xxx&quot;", "body": "<p>rbenv lets you switch between versions of ruby, but it doesn't install those versions for you. I'd suggest also installing <a href=\"https://github.com/rbenv/ruby-build\" rel=\"nofollow noreferrer\">ruby-build</a> (which works with rbenv). Once you've done that, you should be able to run <code>rbenv install 2.3.7</code> and fix your issue.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8684708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 55503951, "answer_count": 1, "score": -1, "last_activity_date": 1554325798, "creation_date": 1554323553, "last_edit_date": 1554325798, "question_id": 55503810, "link": "https://stackoverflow.com/questions/55503810/problem-with-command-rails-generate-model-xxx", "title": "Problem with command &quot;rails generate model xxx&quot;", "body": "<p>I just created a ruby on rails project and I'm trying to generate a model with the command <code>rails generate model Car</code> and I'm getting this error:</p>\n\n<pre><code>~/Code/CarInfo (master) $ rails generate controller Test\n</code></pre>\n\n<blockquote>\n<pre><code>rbenv: version `ruby-2.3.7' is not installed \n</code></pre>\n</blockquote>\n\n<p>I tried updating and reinstalling rbenv with homebrew but it still doesn't work and I'm still getting the same error.</p>\n\n<p>When I type ruby -v in the cli I am getting the same error as shown above.</p>\n"}, {"tags": ["android", "ruby", "docker", "gradle", "android-testing"], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 5804482, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fab4d8b952844b7aecc8d4842f6e3ef2?s=128&d=identicon&r=PG", "display_name": "Thomas Cirksena", "link": "https://stackoverflow.com/users/5804482/thomas-cirksena"}, "is_accepted": true, "score": 1, "last_activity_date": 1554366398, "creation_date": 1554366398, "answer_id": 55511200, "question_id": 55503564, "link": "https://stackoverflow.com/questions/55503564/how-to-run-a-scripts-before-and-after-connecteddebugandroidtest-runs/55511200#55511200", "title": "How to run a scripts before and after connectedDebugAndroidTest runs", "body": "<p>OK, I finally got it <em>hoooray</em> :) </p>\n\n<p>I added the following parts to my build.gradle(app) and now the script is called before and after <code>connectCheck</code>has been triggered:</p>\n\n<pre><code>task('mockStart', type: Exec){\n    doFirst {\n        println \"MOCK: Start server ...\"\n    }\n    executable \"../../scripts/_mock.sh\"\n    args '-a', 'start', '-p', \"${projectDir}/../../\", '-m', 'deps/mock-config'\n}\n\ntask('mockStop', type: Exec){\n    doFirst {\n        println \"MOCK: Stop Server ...\"\n    }\n    executable \"../../scripts/_mock.sh\"\n    args '-a', 'stop', '-p', \"${projectDir}/../../\", '-m', 'deps/mock-config'\n}\n\ngradle.projectsEvaluated {\n   connectedDebugAndroidTest.dependsOn mockStart\n   connectedDebugAndroidTest.finalizedBy mockStop\n}\n</code></pre>\n\n<p>Maybe this will help someone that has some error like I had :) </p>\n\n<p>Good luck &amp; stay tuned!</p>\n"}], "owner": {"reputation": 397, "user_id": 5804482, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fab4d8b952844b7aecc8d4842f6e3ef2?s=128&d=identicon&r=PG", "display_name": "Thomas Cirksena", "link": "https://stackoverflow.com/users/5804482/thomas-cirksena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 55511200, "answer_count": 1, "score": 1, "last_activity_date": 1554366445, "creation_date": 1554322414, "last_edit_date": 1554366445, "question_id": 55503564, "link": "https://stackoverflow.com/questions/55503564/how-to-run-a-scripts-before-and-after-connecteddebugandroidtest-runs", "title": "How to run a scripts before and after connectedDebugAndroidTest runs", "body": "<p>I want to run a bash script from a task (in build.gradle) before the Instrumentation tests starts. That script should run a docker container that contains a ruby bases mock server.</p>\n\n<p>I don't know why I can't get it but this is all I have for now (placed in my build.gradle):</p>\n\n<pre><code>task startMock(type:Exec) {\n    println(\"Executing myScript\")\n    def proc = \"cd ../..\".execute()\n    proc.waitForProcessOutput(System.out, System.err)\n\n    proc = \"../scripts/_mock.sh -a start -p ${projectDir}/../../ -m deps/mock-config\".execute()\n    proc.waitForProcessOutput(System.out, System.err)\n}\n\ngradle.projectsEvaluated {\n    connectedDebugAndroidTest.dependsOn startMock\n}\n</code></pre>\n\n<p>The Problem is that the Task runs always, not only on calling <code>connectedDebugAndroidTest</code> (or <code>connectCheck</code>) ...</p>\n\n<p>I'm confused and appreciate any help :) Maybe someone can give me a hint on how to solve this.</p>\n"}, {"tags": ["ruby", "rspec", "capybara", "ui-automation", "pageobjects"], "answers": [{"comments": [{"owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554323887, "post_id": 55503779, "comment_id": 97713984, "body": "Can you go into some detail on #2 and #3? I&#39;ve seen when using capybara before people doing <code>session.click_button(&#39;something&#39;)</code> or <code>page.click_button(&#39;something&#39;)</code> what exactly is the difference when doing those as opposed to just saying <code>click_button(&#39;something&#39;)</code>. Seems like doing #1 would be the easiest?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554324820, "post_id": 55503779, "comment_id": 97714400, "body": "@msmith1114 It all depends exactly what you&#39;re going for.  If you want to have multiple sessions all available independently then you probably want to be managing your own sessions and you&#39;ll be more like #2.  #3 would be if you don&#39;t want to include Capybara::DSL into a class for some reason (page is just an alias for <code>Capybara.current_session</code>).  There is no difference between <code>click_button(&#39;something&#39;)</code> and <code>Capybara.current_session.click_button(&#39;something&#39;)</code> if you&#39;ve include Capybara::DSL into your class because the DSL just proxies everything to <code>Capybara.current_session</code>"}, {"owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554325633, "post_id": 55503779, "comment_id": 97714698, "body": "I don&#39;t think I have any desire to do multiple sessions (Can&#39;t imagine why I would). So I guess i&#39;ll just stick with number one.  Sidenote what does <code>page.click_button</code> represent compared to just <code>click_button</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554325780, "post_id": 55503779, "comment_id": 97714757, "body": "They&#39;re identical - assuming <code>page</code> is the Capybara defined <code>page</code> method from Capybara::DSL -  <code>click_button</code> =&gt; <code>page.click_button</code> =&gt; <code>Capybara.current_session.click_button</code>"}, {"owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554326600, "post_id": 55503779, "comment_id": 97715053, "body": "Ah gotcha. I guess I would only be doing multiple sessions if I was trying to do some multithreaded testing or something similar?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554326830, "post_id": 55503779, "comment_id": 97715117, "body": "Yes -- multiple simultaneous sessions would generally be a web scraper or something similar."}, {"owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554345853, "post_id": 55503779, "comment_id": 97719765, "body": "For whatever reason <code>Dir[File.dirname(__FILE__) + &quot;&#47;support&#47;**&#47;*.rb&quot;].each {|f| require f }</code> in spec_helper doesn&#39;t seem to work surprisingly. I am able to just do <code>require</code> for each file. (Which I assume that&#39;s all that does above is just require every file<code>. Unless im just putting it in the wrong place in </code>spec_helper`."}, {"owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1554346724, "post_id": 55503779, "comment_id": 97719944, "body": "Nevermind, looks like the problem was that im needing to require the main pageobject in my other class files :facepalm: (Which is kinda ugly unfortunately)"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1554323760, "last_edit_date": 1554323760, "creation_date": 1554323418, "answer_id": 55503779, "question_id": 55503327, "link": "https://stackoverflow.com/questions/55503327/rspec-capybara-without-rails-setup-for-page-objects-support-files/55503779#55503779", "title": "RSpec/Capybara without Rails Setup for Page Objects/Support Files?", "body": "<p>You have a few options for Capybara::DSL -</p>\n\n<ol>\n<li><p>Include Capybara::DSL into whatever base class you're using for your PageObjects so the Capybara methods are available in that class (as opposed to on the global object) - ie. the <code>include Capybara::DSL</code> goes inside the class definition - not at the top of the file.</p></li>\n<li><p>Keep an instance of Capybara::Session in your page object instances and call all capybara methods on that session instance - <code>@my_session.find(...)</code>, etc.</p></li>\n<li><p>Always use <code>Capybara.current_session</code> when calling Capybara methods - <code>Capybara.current_session.find(...)</code>, etc</p></li>\n</ol>\n\n<p>As for the <code>require</code> issue -- you can either use <code>require_relative</code> to specify files to require based from the current file, or you use <code>require</code> and specify the location from the projects root (current working directory).  If you have a directory of files you want loaded you can add something like the following to your spec_helper.rb to tell it to load all the files</p>\n\n<pre><code>Dir[File.dirname(__FILE__) + \"/support/**/*.rb\"].each {|f| require f }\n</code></pre>\n"}], "owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 55503779, "answer_count": 1, "score": 0, "last_activity_date": 1554323760, "creation_date": 1554321419, "question_id": 55503327, "link": "https://stackoverflow.com/questions/55503327/rspec-capybara-without-rails-setup-for-page-objects-support-files", "title": "RSpec/Capybara without Rails Setup for Page Objects/Support Files?", "body": "<p>So im going to be writing a framework that uses Rspec/Capybara and Selenium to do some automation testing on an app. Im using purely RSpec (no rails) and im having some difficulties in getting everything setup correctly.</p>\n\n<p>The problem I am running into is when im trying to include page object files into my specs. Right now my directory looks like:</p>\n\n<p>spec (Actual .spec files go here, <code>spec_helper</code> is also here)\nspec/support (Page Object Files go here)</p>\n\n<p>In my page object files my first problem is it can't find the Capybara DSL unless I do: <code>include Capybara::DSL</code> at the top of each page object file (Which apparently isn't a good idea according to the warning message it gives me)</p>\n\n<p>The other problem is that including my page object files in my tests Im needing to do a <code>require_relative</code> to the specific file (Which is sort of a pain) otherwise it can't find the class.</p>\n\n<p>Is there something in <code>spec_helper</code> that will fix this? Im not an expert in ruby so I assume Im missing something. The Capybara DSL problem I can't figure out either for example requiring <code>require 'capybara/rspec'</code> doesn't seem to help either.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml", "simple-form-for"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1554321912, "post_id": 55503236, "comment_id": 97713120, "body": "Is the only problem lack of a new line? If so, why not wrap it in a <code>div</code>?"}, {"owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1554321951, "post_id": 55503236, "comment_id": 97713134, "body": "It&#39;s also not spaced the same as the rest of the form..."}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 6186921, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J5OR2.jpg?s=128&g=1", "display_name": "Jeffrey M Castro", "link": "https://stackoverflow.com/users/6186921/jeffrey-m-castro"}, "is_accepted": false, "score": 0, "last_activity_date": 1554343596, "creation_date": 1554343596, "answer_id": 55506829, "question_id": 55503236, "link": "https://stackoverflow.com/questions/55503236/output-in-the-middle-of-a-simple-form/55506829#55506829", "title": "Output in the middle of a simple_form", "body": "<p>Have you tried the bootstrap class <code>form-control-static</code> ?\nSee <a href=\"https://www.w3schools.com/bootstrap/bootstrap_forms_inputs2.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/bootstrap/bootstrap_forms_inputs2.asp</a></p>\n"}], "owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581308872, "creation_date": 1554321067, "last_edit_date": 1581308872, "question_id": 55503236, "link": "https://stackoverflow.com/questions/55503236/output-in-the-middle-of-a-simple-form", "title": "Output in the middle of a simple_form", "body": "<p>I have a simple_form using simple_form_for. It works fine.</p>\n\n<p>I want to add a line that looks like:</p>\n\n<p><strong>Locked?</strong>    True</p>\n\n<p>in the middle. I can produce it with:</p>\n\n<pre><code>= f.label \"Locked?\"\n= f.label @client.access_locked?\n</code></pre>\n\n<p>However, this doesn't add a new line, and messes everything else up. </p>\n\n<p>I'd like to have the equivalent of a f.input line, except it's output instead of input:</p>\n\n<pre><code>= f.output label: \"Locked?\", value: @client.access_locked?\n</code></pre>\n\n<p>or something. How do I do this?</p>\n\n<p>EDIT:</p>\n\n<p>Currently, I have this:</p>\n\n<pre><code>= simple_form_for @client, :url =&gt; admin_client_path(@client) do |f|\n  = f.input :email, :input_html =&gt; {:autocomplete =&gt; \"off\"}\n  .user_profile\n    %dl\n      %dt Locked\n      %dd=  @client.access_locked?\n  = f.button :submit, 'Update', :class =&gt; 'button'\n</code></pre>\n\n<p>Which produces this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ue0lN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ue0lN.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'd like it all to line up... But this is the best I've got so far...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rake-task"], "answers": [{"tags": [], "owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "is_accepted": true, "score": 2, "last_activity_date": 1554321358, "creation_date": 1554321358, "answer_id": 55503313, "question_id": 55503155, "link": "https://stackoverflow.com/questions/55503155/how-to-reference-the-previously-created-object-in-a-create-loop-rails-ruby/55503313#55503313", "title": "How to reference the previously created object in a create loop Rails/Ruby", "body": "<p>I think you just need to reassign <code>@parent_campaign</code> after creating new campaign like this:</p>\n\n<pre><code>...\n@new_campaign = Campaign.create(\n                  :name =&gt; \"Repeat of campaign #{index}\",\n                  :start_time =&gt; @start_time, \n                  :end_time =&gt; @start_time + @parent_campaign.duration_in_days.days\n                )\n@parent_campaign = @new_campaign\n...\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 2011640, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a727a370570aac33c1705c8b1c702abc?s=128&d=identicon&r=PG&f=1", "display_name": "rock_n_rolla", "link": "https://stackoverflow.com/users/2011640/rock-n-rolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 55503313, "answer_count": 1, "score": 0, "last_activity_date": 1554321358, "creation_date": 1554320702, "last_edit_date": 1554321030, "question_id": 55503155, "link": "https://stackoverflow.com/questions/55503155/how-to-reference-the-previously-created-object-in-a-create-loop-rails-ruby", "title": "How to reference the previously created object in a create loop Rails/Ruby", "body": "<p>So I have the concept of a Campaign which has a start_time and end_time. I am building a small rake task which I'll use to \"repeat\" or \"recur\" the campaign again, a set number of times again, on a set schedule. </p>\n\n<p>This is the structure of the rake task and how an example rake command could look: </p>\n\n<p><code>$ rake repeatcampaigns:repeatcampaign[:campaign_id, :repeat_times, :repeat_interval]</code></p>\n\n<p><code>$ rake repeatcampaigns:repeatcampaign[28,2,monthly]</code></p>\n\n<p>In this example above, we'd take the Campaign with an id 28 and repeat it twice, starting monthly (i.e. each new campaign would start 30 days after the previous one ended). </p>\n\n<p><strong>More detailed Example:</strong> </p>\n\n<ul>\n<li>Campaign 1 starts on 2019-01-01 and ends on 2019-01-03 (duration of 2\ndays) </li>\n<li>We want to repeat Campaign 1 twice and on a weekly interval (+7\ndays) Campaign 2 should therefore start 7 days after the end of\nCampaign 1 (2019-01-10) and has the same duration of 2 days and thus\nshould end on 2019-01-12</li>\n<li>Campaign 3 should then start 7 days after\nthe end of Campaign 2 (2019-01-19) and has the same duration of 2\ndays and thus should end of 2019-01-21.</li>\n</ul>\n\n<hr>\n\n<p>So I have everything working, except for one major thing - I cannot quite grasp how to work the loop. </p>\n\n<p>I need to set the <code>start_time</code> and <code>end_time</code> for the FIRST newly created campaign based on the parent campaign (as you see in the code below), but for each new campaign in the loop, it should reference the previously created new campaign from the loop. </p>\n\n<pre><code>\ndesc 'Repeat campaigns'\n  namespace :repeatcampaigns do\n    desc 'Repeat and publish a campaign X number of times again'\n    task :repeatcampaign, [:campaign_id, :repeat_times, :repeat_interval] =&gt; [:environment] do |_t, args|\n\n      @parent_campaign = Campaign.find(args[:campaign_id])\n      times_to_repeat = args[:repeat_times].to_i\n      repeat_interval = args[:repeat_interval]\n\n      @days_to_add_to_start_time = convert_interval_to_days_for_repeat(repeat_interval)\n\n      # Create X new campaigns based on the schedule input\n      times_to_repeat.times do |index|\n        @start_time = @parent_campaign.end_time + @days_to_add_to_start_time.days\n        @new_campaign = Campaign.create(\n          :name =&gt; \"Repeat of campaign #{index}\",\n          :start_time =&gt; @start_time, \n          :end_time =&gt; @start_time + @parent_campaign.duration_in_days.days\n        )\n      end\n\n    end\n\n    def convert_interval_to_days_for_repeat(repeat_interval)\n      case repeat_interval\n      when \"daily\"\n        return 1\n      when \"weekly\"\n        return 7\n      when \"monthly\"\n        return 30\n      end  \n    end\n\n  end\n\n</code></pre>\n\n<p>So as I say, the code runs fine and creates new campaigns, however the new campaigns dates are always based on the parent campaign, not the previously newly created campaign. So I know I need to adapt that loop somehow but no idea where to start! </p>\n\n<p>Would love some guidance on this one! Thanks in advance!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554322455, "post_id": 55501978, "comment_id": 97713372, "body": "Worth checking the source for a solution here."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1555892109, "post_id": 55501978, "comment_id": 98245981, "body": "As @tadman indicated, a quick scan of the <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb\" rel=\"nofollow noreferrer\">source on GitHub</a>  looked as if a simple alias of the <code>complete</code> method would solve the issue."}], "answers": [{"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1556532240, "post_id": 55799176, "comment_id": 98458085, "body": "@Kyle Decot <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb#L440\" rel=\"nofollow noreferrer\"><code>&amp;method(:each)</code> is a <code>method</code> Object</a>. Still the I don&#39;t have 100% understanding of the Regex check inside <code>block.call()</code>"}], "tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": false, "score": 1, "last_activity_date": 1556532171, "last_edit_date": 1556532171, "creation_date": 1555957576, "answer_id": 55799176, "question_id": 55501978, "link": "https://stackoverflow.com/questions/55501978/disable-autocompletion-of-optionparser-flags-in-ruby/55799176#55799176", "title": "Disable Autocompletion of OptionParser Flags in Ruby", "body": "<p>the search settings are defined in  <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb#L433\" rel=\"nofollow noreferrer\"><code>self.regexp</code></a> </p>\n\n<p>the method <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb#L459\" rel=\"nofollow noreferrer\"><code>complete</code></a> seems to return all the different flags. </p>\n\n<p>The method <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb#L433\" rel=\"nofollow noreferrer\"><code>self.regexp</code></a> defines the search query used</p>\n\n<pre><code>class OptionParser\n  module Completion\n    def self.regexp(key, icase)\n      Regexp.new('\\A' + Regexp.quote(key).gsub(/\\w+\\b/, '\\&amp;\\w*'), icase)\n    end\n  end\nend\n</code></pre>\n\n<p>The regex is built with the following flags</p>\n\n<p><code>\\A</code> search from the beginning of the string</p>\n\n<p><code>\\w*</code> search any of the matching characters</p>\n\n<p>the <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb#L460\" rel=\"nofollow noreferrer\"><code>candidate</code></a> iterates using a <a href=\"https://ruby-doc.org/core-2.2.0/Method.html\" rel=\"nofollow noreferrer\">method object</a> <code>&amp;method(:each)</code> passed as a <code>proc</code> with <code>&amp;</code>. The <code>method object</code> is called on <code>Completion</code> class.</p>\n\n<pre><code>candidates = candidate(key, icase, pat, &amp;method(:each)).sort_by {|k, v, kn| kn.size}\n</code></pre>\n\n<p>the block <code>iterates</code> inside <a href=\"https://github.com/ruby/ruby/blob/d48783bb0236db505fe1205d1d9822309de53a36/lib/optparse.rb#L440\" rel=\"nofollow noreferrer\"><code>self.candidate</code></a></p>\n\n<pre><code>def self.candidate(key, icase = false, pat = nil, &amp;block)\n  pat ||= Completion.regexp(key, icase)\n  candidates = []\n  block.call do |k, *v|\n    // Search and add candidates\n  end\n  candidates\nend\n</code></pre>\n\n<p>The <code>iterator</code> run the following check for <code>each</code> entry.\nI still don't have 100% understanding of this check, responsible for finding the flags.</p>\n\n<pre><code>block.call do |k, *v|\n  (if Regexp === k\n     kn = \"\"\n     k === key\n   else\n     kn = defined?(k.id2name) ? k.id2name : k\n     pat === kn\n   end) or next\n  v &lt;&lt; k if v.empty?\n  candidates &lt;&lt; [k, v, kn]\nend\ncandidates\n</code></pre>\n"}], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1556532171, "creation_date": 1554316220, "question_id": 55501978, "link": "https://stackoverflow.com/questions/55501978/disable-autocompletion-of-optionparser-flags-in-ruby", "title": "Disable Autocompletion of OptionParser Flags in Ruby", "body": "<pre class=\"lang-rb prettyprint-override\"><code>#!/usr/bin/env ruby\n\nrequire 'optparse'\n\noptions = {}\nOptionParser.new do |opts|\n  opts.on(\"--language LANGUAGE\", [\"Ruby\", \"JavaScript\"]) do |language|\n    options[:language] = language\n  end \nend.parse!\n\nputs \"Language: #{options[:language]}\"\n</code></pre>\n\n<p>If I run this w/ <code>./bin/example --language Ru</code> it will output:</p>\n\n<blockquote>\n  <p>Language: Ruby</p>\n</blockquote>\n\n<p>I would like the disable this <code>autocomplete/closest match</code> behavior and have OptionParser raise when the exact name is not provided however I do not see a way to do this from their documentation.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord", "group-by"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6352058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Hk5HpDUKCSw/AAAAAAAAAAI/AAAAAAAACM4/Ws5qWRBh7U0/photo.jpg?sz=128", "display_name": "Ryan Culpepper", "link": "https://stackoverflow.com/users/6352058/ryan-culpepper"}, "edited": false, "score": 0, "creation_date": 1554315319, "post_id": 55501484, "comment_id": 97709817, "body": "Thanks, @nacho.  This was helpful in selecting the year and month, however it looks like it&#39;s just returning the count of assignments created that month instead of the count created on and before that month.  I&#39;m looking for a rolling total for each month."}], "tags": [], "owner": {"reputation": 4550, "user_id": 6296759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9639098357fbd5261b86129e1ecbae93?s=128&d=identicon&r=PG&f=1", "display_name": "nacho", "link": "https://stackoverflow.com/users/6296759/nacho"}, "is_accepted": false, "score": 0, "last_activity_date": 1554314409, "creation_date": 1554314409, "answer_id": 55501484, "question_id": 55501374, "link": "https://stackoverflow.com/questions/55501374/mysqlactiverecord-counting-rows-where-date-column-is-on-or-before-the-grouped/55501484#55501484", "title": "MySQL(ActiveRecord) Counting rows where date column is on or before the grouped month and year", "body": "<p>You will need to select the year and month too, so you get one row for each of them. Then you can group by thos columns:</p>\n\n<pre><code>SELECT year(assignments.created_at),month(assignments.created_at),COUNT(DISTINCT users.id) \nFROM `users` INNER JOIN `assignments` ON `assignments`.`user_id` = `users`.`id` AND `assignments`.`role_id` = 3 AND `assignments`.`assignable_type` = 'Student' \n             INNER JOIN `students` ON `students`.`id` = `assignments`.`assignable_id` \n             INNER JOIN `classrooms_students` ON `classrooms_students`.`student_id` = `students`.`id` \n             INNER JOIN `classrooms` ON `classrooms`.`id` = `classrooms_students`.`classroom_id` \nWHERE (assignments.created_at &lt;= '2019-04-30 23:59:59')\nGROUP BY year(assignments.created_at),month(assignments.created_at)\n</code></pre>\n\n<p><strong>EDIT</strong>\nYou maybe don\u00b4t need the WHERE clause</p>\n"}], "owner": {"reputation": 21, "user_id": 6352058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Hk5HpDUKCSw/AAAAAAAAAAI/AAAAAAAACM4/Ws5qWRBh7U0/photo.jpg?sz=128", "display_name": "Ryan Culpepper", "link": "https://stackoverflow.com/users/6352058/ryan-culpepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554315160, "creation_date": 1554314030, "last_edit_date": 1554315160, "question_id": 55501374, "link": "https://stackoverflow.com/questions/55501374/mysqlactiverecord-counting-rows-where-date-column-is-on-or-before-the-grouped", "title": "MySQL(ActiveRecord) Counting rows where date column is on or before the grouped month and year", "body": "<p>I'm currently counting user assignments created on or before a specific month in individual queries for month/year combinations over the last 12 months.  However, these are proving slower than I would like and I would like to see if there is a way to combine all of these queries into one.</p>\n\n<p>This is running from a Ruby on Rails (5.0) application via ActiveRecord models connected to a MySQL database (5.6.10).</p>\n\n<p>This ActiveRecord query</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>User.joins(:child_classrooms).where('assignments.created_at &lt;= ?', DateTime.new(month_year[0], month_year[1]).end_of_month).count('DISTINCT users.id')\n</code></pre>\n\n<p>produces this mysql query</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT COUNT(DISTINCT users.id) \nFROM `users` INNER JOIN `assignments` ON `assignments`.`user_id` = `users`.`id` AND `assignments`.`role_id` = 3 AND `assignments`.`assignable_type` = 'Student' \n             INNER JOIN `students` ON `students`.`id` = `assignments`.`assignable_id` \n             INNER JOIN `classrooms_students` ON `classrooms_students`.`student_id` = `students`.`id` \n             INNER JOIN `classrooms` ON `classrooms`.`id` = `classrooms_students`.`classroom_id` \nWHERE (assignments.created_at &lt;= '2019-04-30 23:59:59')\n</code></pre>\n\n<p>The above query is produced twelve times (once for each of the past twelve months, changing the where clause timestamp) and instead I would like to have one query that returns the same data grouped by year and month, counting <code>assignments.created_at &lt;=</code> the grouped year and month.</p>\n\n<p>I'm familiar with how to group by year and month, but where I get confused is how to count only those rows where the created at timestamp is on or before the grouped year and month.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1554314482, "post_id": 55501200, "comment_id": 97709389, "body": "It&#39;s probably an issue with load order. What we have done at my company is make a  file in <code>config&#47;initializers</code> which loads the files in the order they&#39;re needed."}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1554314749, "post_id": 55501200, "comment_id": 97709524, "body": "At my sample, If I change order, it fails. I think sample is in good order. It has something to do with modules. Because when same example made without module <code>A</code> with same order, It works."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554324978, "post_id": 55501200, "comment_id": 97714462, "body": "You know that <a href=\"https://ruby-doc.org/core-2.6.2/Class.html#method-i-inherited\" rel=\"nofollow noreferrer\"><code>Class#inherited</code></a> is a thing correct? Just seems like a better way to implement than to use a loop. <a href=\"https://repl.it/@engineersmnky/EllipticalDamagedCategory\" rel=\"nofollow noreferrer\">Updated Example</a> using <code>inherited</code>"}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1554887610, "post_id": 55501200, "comment_id": 97912168, "body": "Ah. I see. I will use this. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1554315834, "post_id": 55501810, "comment_id": 97710068, "body": "I am very sorry to say this but i quite didn&#39;t understand that. Could you please post a sample based on above to wake me up? :/"}, {"owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "reply_to_user": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1554316810, "post_id": 55501810, "comment_id": 97710595, "body": "I updated with a working version, you need to load constants of the module itself.."}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1554317195, "post_id": 55501810, "comment_id": 97710797, "body": "Awesome. Thank you so much!"}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1554319170, "post_id": 55501810, "comment_id": 97711729, "body": "May I ask a quick question. I didn&#39;t want to open a new issue for this. When using standalone ruby it works, however, in Rails i think autoload feature breaks it. Even I explicitly require it, MyAction (my_action.rb) class does not found. Do you know anything about this? What might be the problem? (When I move MyAction to the same file with Plugin, it works)."}], "tags": [], "owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "is_accepted": true, "score": 1, "last_activity_date": 1554316763, "last_edit_date": 1554316763, "creation_date": 1554315699, "answer_id": 55501810, "question_id": 55501200, "link": "https://stackoverflow.com/questions/55501200/internal-plugin-system-and-modules-in-ruby-rails-used-as-a-framework/55501810#55501810", "title": "Internal plugin system and Modules in Ruby (Rails used as a framework)", "body": "<pre><code>require 'set'\n\nmodule A\n  class Plugin\n    @plugins = Set.new\n\n    def self.plugins\n      @plugins\n    end\n\n    def self.register_plugins\n      # Iterate over each symbol in the object space\n      ::A.constants.each do |klass|\n        # Get the constant from the Kernel using the symbol\n        const = A.const_get(klass)\n        puts const\n        # Check if the plugin has a super class and if the type is Plugin\n\n        if const.respond_to?(:superclass) &amp;&amp; (const.superclass == Plugin)\n          @plugins &lt;&lt; const\n        end\n      end\n    end\n  end\nend\n\nmodule A\n  class MyAction &lt; Plugin\n    def self.handle_command(cmd)\n      puts \"Command received #{cmd}\"\n    end\n   end\nend\n\nA::Plugin.register_plugins\nA::Plugin.plugins.each do |plugin|\n  plugin.handle_command('test')\nend\n</code></pre>\n"}], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 55501810, "answer_count": 1, "score": 1, "last_activity_date": 1554316763, "creation_date": 1554313337, "question_id": 55501200, "link": "https://stackoverflow.com/questions/55501200/internal-plugin-system-and-modules-in-ruby-rails-used-as-a-framework", "title": "Internal plugin system and Modules in Ruby (Rails used as a framework)", "body": "<p>I want to create a base lass and then load all sub classes (plugins) and process all of them via <code>each</code> loop. This is working example:</p>\n\n<pre><code>require 'set'\n\nclass Plugin\n  # Keep the plugin list inside a set so we don't double-load plugins\n  @plugins = Set.new\n\n  def self.plugins\n    @plugins\n  end\n\n  def self.register_plugins\n    # Iterate over each symbol in the object space\n    Object.constants.each do |klass|\n      # Get the constant from the Kernel using the symbol\n      const = Kernel.const_get(klass)\n      # Check if the plugin has a super class and if the type is Plugin\n      if const.respond_to?(:superclass) and const.superclass == Plugin\n        @plugins &lt;&lt; const\n      end\n    end\n  end\nend\n\nclass DogPlugin &lt; Plugin\n\n  def self.handle_command(cmd)\n    p \"Command received #{cmd}\"\n  end\n\nend\nclass CatPlugin &lt; Plugin\n\n  def self.handle_command(cmd)\n    p \"Command received #{cmd}\"\n  end\n\nend\n\nPlugin.register_plugins\n\n# Test that we can send a message to each plugin\nPlugin.plugins.each do |plugin|\n  plugin.handle_command('test')\nend\n</code></pre>\n\n<p>This code sample works perfectly. Output is:</p>\n\n<pre><code>\"Command received test\"\n\"Command received test\"\n=&gt; #&lt;Set: {DogPlugin, CatPlugin}&gt;\n</code></pre>\n\n<p>However, In my rails application, my custom implementations are in modules. Lets say I have an <code>A</code> module. In this case it doesn't work.</p>\n\n<pre><code>require 'set'\n\nmodule A\n  class Plugin\n    @plugins = Set.new\n\n    class &lt;&lt; self\n      attr_reader :plugins\n    end\n\n    def self.register_plugins\n      # Iterate over each symbol in the object space\n      Object.constants.each do |klass|\n        # Get the constant from the Kernel using the symbol\n        const = Kernel.const_get(klass)\n        # Check if the plugin has a super class and if the type is Plugin\n        if const.respond_to?(:superclass) &amp;&amp; (const.superclass == A::Plugin)\n          @plugins &lt;&lt; const\n        end\n      end\n    end\n  end\nend\n\nmodule A\n  class MyAction &lt; Plugin\n    def self.handle_command(cmd)\n      puts \"Command received #{cmd}\"\n    end\n   end\nend\n\nA::Plugin.register_plugins\nA::Plugin.plugins.each do |plugin|\n  plugin.handle_command('test')\nend\n</code></pre>\n\n<p><code>Set</code> is empty and nothing get executed. Why?</p>\n\n<p>See live sample here: <a href=\"https://repl.it/repls/EllipticalDamagedCategory\" rel=\"nofollow noreferrer\">https://repl.it/repls/EllipticalDamagedCategory</a></p>\n\n<p>There are other types of plugin samples on the net but they have to initialized one-by-one. This sample code loads all plugins and execute same method in all of them. I need this functionality with modules.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jsonb"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1554318290, "post_id": 55500999, "comment_id": 97711330, "body": "I made something for this that <i>might</i> solve your problem. <a href=\"https://github.com/joshmn/setsy\" rel=\"nofollow noreferrer\">github.com/joshmn/setsy</a>"}, {"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1554324572, "post_id": 55500999, "comment_id": 97714288, "body": "<a href=\"https://stackoverflow.com/a/18815753/4988918\">Another possible solution</a> in addition to @joshbrody...I&#39;d ask why you need this functionality if the keys are dynamic though...you won&#39;t know ahead of time (assumingly) what the keys are...so why not just use <code>user.properties[&#39;eye_color&#39;]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1068, "user_id": 1044281, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d19a0b621a78817a5e01d69c1083068?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McAllister", "link": "https://stackoverflow.com/users/1044281/jake-mcallister"}, "edited": false, "score": 0, "creation_date": 1554318795, "post_id": 55501609, "comment_id": 97711557, "body": "How would you suggest you map back the datatype? i.e. if what you pass is a datetime when you call the method name it parses into a datetime"}, {"owner": {"reputation": 239, "user_id": 4821424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8186d6f94ce1d06a3fb0f0aff90fc?s=128&d=identicon&r=PG", "display_name": "chanko", "link": "https://stackoverflow.com/users/4821424/chanko"}, "reply_to_user": {"reputation": 1068, "user_id": 1044281, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d19a0b621a78817a5e01d69c1083068?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McAllister", "link": "https://stackoverflow.com/users/1044281/jake-mcallister"}, "edited": false, "score": 0, "creation_date": 1554404913, "post_id": 55501609, "comment_id": 97750820, "body": "I&#39;m not sure. In your jsonb field, numbers will be saved as numbers and anything else will be saved as a string. How are you originally getting the fields? Are users selecting the datatype of the field at the time of input?"}, {"owner": {"reputation": 1068, "user_id": 1044281, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d19a0b621a78817a5e01d69c1083068?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McAllister", "link": "https://stackoverflow.com/users/1044281/jake-mcallister"}, "edited": false, "score": 0, "creation_date": 1554489202, "post_id": 55501609, "comment_id": 97786157, "body": "Yes the user would chose the datatype. eg time, dattime, text, decimal, etc"}, {"owner": {"reputation": 239, "user_id": 4821424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8186d6f94ce1d06a3fb0f0aff90fc?s=128&d=identicon&r=PG", "display_name": "chanko", "link": "https://stackoverflow.com/users/4821424/chanko"}, "reply_to_user": {"reputation": 1068, "user_id": 1044281, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d19a0b621a78817a5e01d69c1083068?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McAllister", "link": "https://stackoverflow.com/users/1044281/jake-mcallister"}, "edited": false, "score": 0, "creation_date": 1555106006, "post_id": 55501609, "comment_id": 98008188, "body": "Sorry @JakeMcAllister I totally lost track of this. Were you able to figure out a solution to your problem?"}], "tags": [], "owner": {"reputation": 239, "user_id": 4821424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8186d6f94ce1d06a3fb0f0aff90fc?s=128&d=identicon&r=PG", "display_name": "chanko", "link": "https://stackoverflow.com/users/4821424/chanko"}, "is_accepted": false, "score": 1, "last_activity_date": 1554404030, "last_edit_date": 1554404030, "creation_date": 1554314920, "answer_id": 55501609, "question_id": 55500999, "link": "https://stackoverflow.com/questions/55500999/access-jsonb-fields-as-normal-activerecord-attributes/55501609#55501609", "title": "Access JSONB fields as normal ActiveRecord attributes", "body": "<p>Maybe try overriding <code>method_missing</code> on your <code>User</code> model</p>\n\n<pre><code>def method_missing(method, *args, &amp;block)\n  clean_method = method.to_s.chomp('=')\n\n  if properties.key?(clean_method)\n    if method.to_s.ends_with?('=')\n      return properties[clean_method] = args.first\n    else\n      return properties[clean_method]\n    end\n  end\n\n  super\nend\n</code></pre>\n\n<p>This should allow you to get and set directly</p>\n\n<pre><code># set value\nuser.eye_color = 'green'\n\n# get value\nuser.eye_color # =&gt; returns 'green'\n</code></pre>\n"}], "owner": {"reputation": 1068, "user_id": 1044281, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d19a0b621a78817a5e01d69c1083068?s=128&d=identicon&r=PG&f=1", "display_name": "Jake McAllister", "link": "https://stackoverflow.com/users/1044281/jake-mcallister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554404030, "creation_date": 1554312672, "question_id": 55500999, "link": "https://stackoverflow.com/questions/55500999/access-jsonb-fields-as-normal-activerecord-attributes", "title": "Access JSONB fields as normal ActiveRecord attributes", "body": "<p>I have a column on my model User called properties which is jsonb. As i have the requirement for user generated dynamic fields.</p>\n\n<p>How would you access the attributes as if they were normal mapped columns </p>\n\n<p>E.g\nUser model has a column called first_name but a property in the properties called eye_color</p>\n\n<pre><code>user = User.find(1)\nuser.first_name # =&gt; \"john\"\n# to access the eye color you would do\nuser.properties['eye_color'] # =&gt; \"green\"\n</code></pre>\n\n<p>What I would like to do is to be able to call the map json attribute so i can set and get it via like bellow</p>\n\n<pre><code>user.eye_color = 'green'\n</code></pre>\n\n<p>This needs to be dynamically done as the field attributes can change. However, at the user instance I can see work out what all the attributes will be.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "thin", "eventmachine"], "comments": [{"owner": {"reputation": 179, "user_id": 2635665, "user_type": "registered", "profile_image": "https://graph.facebook.com/637787938/picture?type=large", "display_name": "Ivan Cenov", "link": "https://stackoverflow.com/users/2635665/ivan-cenov"}, "edited": false, "score": 0, "creation_date": 1554317202, "post_id": 55500559, "comment_id": 97710799, "body": "puma server started Redmine successfully ..."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11962264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c162daf9efb0f96978e51b2c52e6f00?s=128&d=identicon&r=PG&f=1", "display_name": "Crus", "link": "https://stackoverflow.com/users/11962264/crus"}, "is_accepted": false, "score": 0, "last_activity_date": 1568979444, "creation_date": 1568979444, "answer_id": 58027641, "question_id": 55500559, "link": "https://stackoverflow.com/questions/55500559/tcp-server-rb18in-unpack-sockaddr-in-no-implicit-conversion-of-nil-into-str/58027641#58027641", "title": "tcp_server.rb:18:in `unpack_sockaddr_in&#39;: no implicit conversion of nil into String (TypeError)", "body": "<p>delete all versions of eventmachine,then: </p>\n\n<blockquote>\n  <p>gem install eventmachine</p>\n</blockquote>\n"}], "owner": {"reputation": 179, "user_id": 2635665, "user_type": "registered", "profile_image": "https://graph.facebook.com/637787938/picture?type=large", "display_name": "Ivan Cenov", "link": "https://stackoverflow.com/users/2635665/ivan-cenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568979444, "creation_date": 1554310980, "question_id": 55500559, "link": "https://stackoverflow.com/questions/55500559/tcp-server-rb18in-unpack-sockaddr-in-no-implicit-conversion-of-nil-into-str", "title": "tcp_server.rb:18:in `unpack_sockaddr_in&#39;: no implicit conversion of nil into String (TypeError)", "body": "<p>I am setting up Redmine 4.0.3 on Windows system, ruby 2.5.1, thin server. The installation succeeded but when I tried to start Redmine an error occurred and thin server did not start. Here is the trace log of whaat happened:</p>\n\n<pre><code>Thin web server (v1.7.2 codename Bachmanity)\nMaximum connections set to 1024\nListening on 0.0.0.0:3000, CTRL+C to stop\nTraceback (most recent call last):\n        20: from C:/Ruby25/bin/thin:23:in `&lt;main&gt;'\n        19: from C:/Ruby25/bin/thin:23:in `load'\n        18: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/bin/thin:6:in `&lt;top (required)&gt;'\n        17: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/runner.rb:159:in `run!'\n        16: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/runner.rb:203:in `run_command'\n        15: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/controllers/controller.rb:87:in `start'\n        14: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/server.rb:162:in `start'\n        13: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/backends/base.rb:73:in `start'\n        12: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/eventmachine.rb:196:in `run'\n        11: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/em/pure_ruby.rb:144:in `run_machine'\n        10: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/em/pure_ruby.rb:547:in `run'\n         9: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/em/pure_ruby.rb:547:in `loop'\n         8: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/em/pure_ruby.rb:551:in `block in run'\n         7: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/em/pure_ruby.rb:568:in `run_timers'\n         6: from C:/Ruby25/lib/ruby/2.5.0/set.rb:774:in `each'\n         5: from C:/Ruby25/lib/ruby/2.5.0/set.rb:774:in `each'\n         4: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/em/pure_ruby.rb:571:in `block in run_timers'\n         3: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x86-mingw32/lib/eventmachine.rb:1546:in `event_callback'\n         2: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/backends/base.rb:63:in `block in start'\n         1: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/backends/tcp_server.rb:18:in `connect'\nC:/Ruby25/lib/ruby/gems/2.5.0/gems/thin-1.7.2/lib/thin/backends/tcp_server.rb:18:in `unpack_sockaddr_in': no implicit conversion of nil into String (TypeError)\n</code></pre>\n\n<p>I do not what is the cause of that error. What I have to change so as to make thin server start?</p>\n"}, {"tags": ["ruby", "image-processing", "rmagick", "vips"], "answers": [{"comments": [{"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 2, "creation_date": 1554393752, "post_id": 55510971, "comment_id": 97745263, "body": "Consider using the block form of <code>open-uri</code>, otherwise it won&#39;t immediately close the connection. <code>open(url, &amp;:read)</code>"}], "tags": [], "owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "is_accepted": true, "score": 2, "last_activity_date": 1554394813, "last_edit_date": 1554394813, "creation_date": 1554365630, "answer_id": 55510971, "question_id": 55500530, "link": "https://stackoverflow.com/questions/55500530/combine-remote-images-to-one-image-using-ruby-vips/55510971#55510971", "title": "Combine remote images to one image using ruby-vips", "body": "<p><code>ruby-vips</code> does not support load from URI directly, so you need to fetch the images using some other gem. For example:</p>\n\n<pre><code>require 'open-uri'\nrequire 'vips'\n\ndef new_from_uri(uri, options = {})\n  bytes = open(uri) {|f| f.read}\n  Vips::Image.new_from_buffer bytes, \"\", options\nend\n\na = new_from_uri \"https://upload.wikimedia.org/wikipedia/commons/a/a6/Big_Ben_Clock_Face.jpg\"\nb = new_from_uri \"https://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_demonstration_1.png\"\nout = a.composite b, \"over\", x: 100, y: 100\nout.write_to_file \"x.jpg\"\n</code></pre>\n\n<p>To make:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Jvcoe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jvcoe.jpg\" alt=\"example output\"></a></p>\n"}], "owner": {"reputation": 965, "user_id": 5826733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cac897bc9245db66268f183f2156d921?s=128&d=identicon&r=PG", "display_name": "abdoutelb", "link": "https://stackoverflow.com/users/5826733/abdoutelb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 55510971, "answer_count": 1, "score": 1, "last_activity_date": 1554394813, "creation_date": 1554310869, "question_id": 55500530, "link": "https://stackoverflow.com/questions/55500530/combine-remote-images-to-one-image-using-ruby-vips", "title": "Combine remote images to one image using ruby-vips", "body": "<p>I had a template image and need to append on that a specific images on X , Y positions. Is there any equivalent to that function in rmagick</p>\n\n<p><code>ImageList.new(\"https://365psd.com/images/istock/previews/8479/84796157-football-field-template-with-goal-on-top-view.jpg\")</code> </p>\n\n<p>and draw on that other images and generate one image.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "actioncontroller", "clearance"], "comments": [{"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 0, "creation_date": 1554312665, "post_id": 55500289, "comment_id": 97708565, "body": "What about <a href=\"https://github.com/thoughtbot/clearance#extending-sign-in\" rel=\"nofollow noreferrer\">SignInGuard</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 1, "creation_date": 1554313092, "post_id": 55501088, "comment_id": 97708729, "body": "I think the condition can be shortened to <code>if current_user&amp;.account</code>"}, {"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "reply_to_user": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 1, "creation_date": 1554313282, "post_id": 55501088, "comment_id": 97708813, "body": "Good comment! I write <code>current_user &amp;&amp; current_user.account.present?</code> only to improve the reading, in a real case I prefer the <code>if current_user&amp;.account</code>!"}, {"owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "edited": false, "score": 0, "creation_date": 1554344230, "post_id": 55501088, "comment_id": 97719410, "body": "Thanks! The intended behavior is actually <code>if current_user &amp;&amp; current_user.account.blank?</code> but this definitely helped me get there. Here&#39;s the Application Controller that I ended up with - <a href=\"https://gist.github.com/leemcalilly/68ca89f3c9e193266c9b9d9287263978\" rel=\"nofollow noreferrer\">gist.github.com/leemcalilly/68ca89f3c9e193266c9b9d9287263978</a>&zwnj;&#8203;. And the Accounts Controller <a href=\"https://gist.github.com/leemcalilly/78efdde8efd092c24e754e021788ec4e\" rel=\"nofollow noreferrer\">gist.github.com/leemcalilly/78efdde8efd092c24e754e021788ec4e</a>&zwnj;&#8203;. Also, another &quot;gotcha&quot; that was causing problems is I had to update my route from <code>get &#39;&#47;signup&#39; =&gt; &#39;clearance&#47;users#new&#39;, as: &#39;sign_up&#39;</code> to <code>get &#39;&#47;signup&#39; =&gt; &#39;users#new&#39;, as: &#39;sign_up&#39;</code> so that I could skip the before action on signup/login."}], "tags": [], "owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "is_accepted": true, "score": 2, "last_activity_date": 1558548748, "last_edit_date": 1558548748, "creation_date": 1554312926, "answer_id": 55501088, "question_id": 55500289, "link": "https://stackoverflow.com/questions/55500289/how-to-lock-down-an-entire-rails-app-until-a-user-completes-their-account-set-up/55501088#55501088", "title": "How to lock down an entire Rails app until a User completes their account set up", "body": "<p>If I understood correctly, I consider you're in the right way to do it in 'Ruby on Rails way'!</p>\n\n<p>The error <code>NoMethodError</code> is caused because inside some contexts of your application you <strong>don't have</strong> the <code>current_user</code> method.</p>\n\n<p>If you <strong>want to redirect the user to <code>dashboard_path</code> when the current_user already have the account</strong>, you should try the following:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ApplicationController &lt; ActionController::Base\n  include Clearance::Controller\n  before_action :require_login\n  before_action :require_account\n\n  private\n\n  def require_account\n    if current_user &amp;&amp; current_user.account.present?\n      redirect_to dashboard_path\n    end\n  end\nend\n</code></pre>\n\n<p>This way you can get the redirect when <code>current_user is present</code> <strong>AND</strong> <code>current_user have one account</code>, no <code>skip_before_action</code> is needed.</p>\n"}], "owner": {"reputation": 8270, "user_id": 168286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EcFEn.jpg?s=128&g=1", "display_name": "Lee McAlilly", "link": "https://stackoverflow.com/users/168286/lee-mcalilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 55501088, "answer_count": 1, "score": 0, "last_activity_date": 1558548748, "creation_date": 1554309948, "question_id": 55500289, "link": "https://stackoverflow.com/questions/55500289/how-to-lock-down-an-entire-rails-app-until-a-user-completes-their-account-set-up", "title": "How to lock down an entire Rails app until a User completes their account set up", "body": "<p>I have a rails app that uses the <a href=\"https://github.com/thoughtbot/clearance\" rel=\"nofollow noreferrer\">Clearance</a> for signup and login. After signup the user is redirected to <code>accounts/new</code> to complete their account setup. The Account <code>belongs_to</code> User and the user <code>has_one</code> account. (The Account and User models are separate because there are attributes, such as \"Company Name\" that I don't want to put into the User model.)</p>\n\n<p>I'd like to lock down everything in the application and redirect them to <code>accounts/new</code> if they try to access anything other than marketing pages, signup, and login pages before they've created an Account. </p>\n\n<p>I'm thinking that adding a <code>before_action</code> to the ApplicationController is the right approach and then using <code>:skip_before_action</code> on any <code>controller#action</code> that they need access before creating their Account (such as /signup or /login or marketing pages).</p>\n\n<p>This seems like the right approach since the entire application will be locked down by default if the User hasn't created an account. By explicitly using using <code>:skip_before_action</code> as needed it seems like there is less of a chance of creating holes in the application by mistake.</p>\n\n<p>But I can't get the <code>before_action</code> on the ApplicationController to work because I keep getting this error when I visit a page like /signup:</p>\n\n<pre><code>NoMethodError in Clearance::UsersController#new\nundefined method `account' for nil:NilClass\n</code></pre>\n\n<p>I'm trying to do something like this:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  include Clearance::Controller\n  before_action :require_login\n  before_action :require_account\n\n  private\n\n  def require_account\n    if current_user.account != nil\n      redirect_to dashboard_path\n    end\n  end\nend\n</code></pre>\n\n<p>That syntax worked when I was inside my AccountsController and just redirecting my <code>accounts#new</code> action, but now I'm having trouble figuring out how to get the same behavior across my entire application. Note: <code>current_user</code> is a method supplied by Clearance.</p>\n\n<p>What is the \"Rails way\" to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "azure", "networking"], "answers": [{"comments": [{"owner": {"reputation": 721, "user_id": 962986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zHbAJ.jpg?s=128&g=1", "display_name": "UpQuark", "link": "https://stackoverflow.com/users/962986/upquark"}, "edited": false, "score": 0, "creation_date": 1554399333, "post_id": 55506649, "comment_id": 97748162, "body": "This looks like the problem I&#39;m seeing (presumably <code>request.ip</code> is giving me the default IP of proxies from certain networking tools), thanks a ton. I&#39;ll test it out and mark as resolved if things look good."}, {"owner": {"reputation": 721, "user_id": 962986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zHbAJ.jpg?s=128&g=1", "display_name": "UpQuark", "link": "https://stackoverflow.com/users/962986/upquark"}, "edited": false, "score": 0, "creation_date": 1555075228, "post_id": 55506649, "comment_id": 97993672, "body": "So this put me on the right track. I&#39;m using an Azure Web App For Containers, an abstraction that lets me run a Docker image on an easily scalable resource. However after talking to their support, apparently they use a reverse proxy that doesn&#39;t pass <code>x-forwarded-for</code>, which is the source of the 11.0.0.* requests. So I might need to just switch to a totally different cloud resource to get this working. So your answer is definitely right and would fix it if there was a properly configured proxy, but sadly there isn&#39;t."}], "tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": true, "score": 1, "last_activity_date": 1554341967, "creation_date": 1554341967, "answer_id": 55506649, "question_id": 55499876, "link": "https://stackoverflow.com/questions/55499876/requests-to-rails-api-have-the-source-ip-11-0-2-1-in-that-api-only/55506649#55506649", "title": "Requests to rails API have the source IP &quot;11.0.2.1&quot; in that API only", "body": "<p>Actually, to get the real client IP address in rails, you should use <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-remote_ip\" rel=\"nofollow noreferrer\"><code>request.remote_ip</code></a> instead of <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-ip\" rel=\"nofollow noreferrer\"><code>request.ip</code></a>. They are different, as below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/odZiI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/odZiI.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Pa7hc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pa7hc.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the API page for class <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/RemoteIp.html\" rel=\"nofollow noreferrer\"><code>ActionDispatch::RemoteIp</code></a> shows more details.</p>\n\n<blockquote>\n  <p>This middleware calculates the IP address of the remote client that is making the request. It does this by checking various headers that could contain the address, and then picking the last-set address that is not on the list of trusted IPs. This follows the precedent set by e.g. <a href=\"https://issues.apache.org/bugzilla/show_bug.cgi?id=50453\" rel=\"nofollow noreferrer\">the Tomcat server</a>, with <a href=\"http://blog.gingerlime.com/2012/rails-ip-spoofing-vulnerabilities-and-protection\" rel=\"nofollow noreferrer\">reasoning explained at length</a> by @gingerlime. A more detailed explanation of the algorithm is given at <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/RemoteIp/GetIp.html#method-i-calculate_ip\" rel=\"nofollow noreferrer\">ActionDispatch::RemoteIp::GetIp#calculate_ip</a>.</p>\n  \n  <p>Some Rack servers concatenate repeated headers, like <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2\" rel=\"nofollow noreferrer\">HTTP RFC 2616</a> requires. Some Rack servers simply drop preceding headers, and only report the value that was <a href=\"http://andre.arko.net/2011/12/26/repeated-headers-and-ruby-web-servers\" rel=\"nofollow noreferrer\">given in the last header</a>. If you are behind multiple proxy servers (like NGINX to HAProxy to Unicorn) then you should test your Rack server to make sure your data is good.</p>\n  \n  <p>IF YOU DON'T USE A PROXY, THIS MAKES YOU VULNERABLE TO IP SPOOFING. This middleware assumes that there is at least one proxy sitting around and setting headers with the client's remote IP address. If you don't use a proxy, because you are hosted on e.g. Heroku without SSL, any client can claim to have any IP address by setting the X-Forwarded-For header. If you care about that, then you need to explicitly drop or ignore those headers sometime before this middleware runs.</p>\n</blockquote>\n"}], "owner": {"reputation": 721, "user_id": 962986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zHbAJ.jpg?s=128&g=1", "display_name": "UpQuark", "link": "https://stackoverflow.com/users/962986/upquark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 55506649, "answer_count": 1, "score": 0, "last_activity_date": 1554341967, "creation_date": 1554308446, "question_id": 55499876, "link": "https://stackoverflow.com/questions/55499876/requests-to-rails-api-have-the-source-ip-11-0-2-1-in-that-api-only", "title": "Requests to rails API have the source IP &quot;11.0.2.1&quot; in that API only", "body": "<p>I recently added logging to a rails API hosted on Azure that logs user IDs and IP addresses that Google Recaptcha v3 has flagged as suspicious (v3 assigns a \"trust\" score from 0.0 to 1.0 to requests, without showing a conventional captcha challenge). I would eventually like to use Recaptcha v3 to rate-limit suspicious users, but I noticed many flagged requests from the same odd-looking 2 IPs.</p>\n\n<p>I see requests from a variety of users originating from <code>11.0.2.1</code> and a smaller subset from <code>11.0.0.1</code>. These users seem otherwise legitimate. In our 3rd-party identity provider's logs, I can see those users logged in from normal-looking IPs that match their general locations, but for some reason our API is getting the <code>11.0.2.1</code> addresses.</p>\n\n<p><code>11.0.2.1</code> seems to be a default setting on some F5 software and Cisco hardware. Since our Identity Provider seems able to get the correct IP, I am guessing we have a misconfiguration or bug in our rails app. However I'm not able to reproduce this error myself, and see no problems with calling <code>request.ip</code> locally or on a test machine.</p>\n\n<p>Am I retrieving IPs wrong or is my API misconfigured somehow?</p>\n"}, {"tags": ["ruby", "rubocop", "ruby-parser"], "answers": [{"tags": [], "owner": {"reputation": 6636, "user_id": 537913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/18609041083c89d4c1aaca67c8fbb487?s=128&d=identicon&r=PG", "display_name": "J. Ed", "link": "https://stackoverflow.com/users/537913/j-ed"}, "is_accepted": true, "score": 1, "last_activity_date": 1554308237, "creation_date": 1554308237, "answer_id": 55499812, "question_id": 55499811, "link": "https://stackoverflow.com/questions/55499811/create-a-rubocop-cop-that-triggers-when-method-is-invoked-without-a-block/55499812#55499812", "title": "create a rubocop cop that triggers when method is invoked without a block", "body": "<p>Apparently, in the parsed AST, when a node is given a block, that node is then represented as the <em>first child</em> of that block.<br>\ni.e</p>\n\n<pre><code>[92] pry(RuboCop)&gt; node # `X.some_method(something) { do_something }`\n=&gt; s(:block,\n  s(:send,\n    s(:const, nil, :X), :some_method,\n    s(:send, nil, :something)),\n  s(:args),\n  s(:send, nil, :do_something))\n\n</code></pre>\n\n<p>And we can check that using the <code>Rubocop::AST</code> instances.<br>\nHere is the full implementation (includes an option for multiple method names):  </p>\n\n<pre><code>  MSG = 'Avoid using `X.%&lt;method&gt;s` without providing a block.'\n\n  def_node_matcher :x_method, '(send (const nil? :X) ${:some_method :another_method} ...)'\n\n  def on_send(node)\n      x_method(node) do |method_name|\n        return if !method_name || first_child_of_block?(node)\n        add_offense(node, location: :selector, message: format(MSG, method: method_name))\n      end\n\n    end\n\n  private\n\n    # checks if the given node's parent is a block, and the given node is its first child,\n    # which would mean that the block is supplied to the given node (i.e `node { block }`)\n    def first_child_of_block?(node)\n      return false unless (parent = node.parent)\n      return false unless parent.type == :block\n      parent.children.first == node\n    end\n</code></pre>\n"}], "owner": {"reputation": 6636, "user_id": 537913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/18609041083c89d4c1aaca67c8fbb487?s=128&d=identicon&r=PG", "display_name": "J. Ed", "link": "https://stackoverflow.com/users/537913/j-ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 55499812, "answer_count": 1, "score": 2, "last_activity_date": 1554308237, "creation_date": 1554308237, "question_id": 55499811, "link": "https://stackoverflow.com/questions/55499811/create-a-rubocop-cop-that-triggers-when-method-is-invoked-without-a-block", "title": "create a rubocop cop that triggers when method is invoked without a block", "body": "<p>I'm trying to develop a new cop (based on <a href=\"https://docs.rubocop.org/en/latest/development/\" rel=\"nofollow noreferrer\">these guidelines</a>) and am banging my head trying to get the correct <a href=\"https://docs.rubocop.org/en/latest/node_pattern/\" rel=\"nofollow noreferrer\">node pattern</a>.  </p>\n\n<p>I want the cop to register an offense when <code>X.some_method</code> is called <em>without providing a block</em>.<br>\ni.e <code>X.some_method</code> is an offense, but <code>X.some_method { blah }</code> is not.  </p>\n\n<p>I got the correct pattern for identifying <code>X.some_method</code>, which is <code>'(send (const nil? :X) :some_method ...'</code>.<br>\nBut not sure how to create a pattern for \"is not given a block\"? </p>\n"}, {"tags": ["ruby", "rubygems", "sinatra", "documentation"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 1, "creation_date": 1554692662, "post_id": 55499243, "comment_id": 97830762, "body": "There aren&#39;t any models in the Sinatra framework, you add those yourself by picking something like ActiveRecord or Sequel etc."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1555705041, "post_id": 55499243, "comment_id": 98209048, "body": "If you&#39;re already using <code>ActiveRecord</code> in Sinatra, have you tried using the <code>annotate</code> gem to see if it works on your Sinatra app?"}], "owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554306455, "creation_date": 1554306455, "question_id": 55499243, "link": "https://stackoverflow.com/questions/55499243/document-model-fields-sinatra", "title": "Document Model Fields Sinatra", "body": "<p>Is there some automated way to document fields names and types inside of the models in Sinatra app, something equivalent to annotate gem in rails?</p>\n\n<p>Example:</p>\n\n<pre><code># == Schema Info\n#\n# Table name: users\n#\n#  id                  :integer(11)    not null, primary key\n#  name                :string         not null\n#  gender              :string         not null\n#  age                 :float\n#\nclass User &lt; ActiveRecord::Base\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 8931936, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10215078780069919/picture?type=large", "display_name": "Daniel Costa", "link": "https://stackoverflow.com/users/8931936/daniel-costa"}, "edited": false, "score": 0, "creation_date": 1554358090, "post_id": 55500230, "comment_id": 97723078, "body": "I marked as it sovles my problem because your <code>Client.new</code> seems to be exactly what I wanted and I don&#39;t know how I did not figure that out on my own..."}, {"owner": {"reputation": 205, "user_id": 8931936, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10215078780069919/picture?type=large", "display_name": "Daniel Costa", "link": "https://stackoverflow.com/users/8931936/daniel-costa"}, "edited": false, "score": 0, "creation_date": 1554358172, "post_id": 55500230, "comment_id": 97723115, "body": "Regarding the sharding, it seems to allow the same code base to use 2 redis different redis servers and to balance what goes where. While in my example I want 2 different base codes to share the same redis server"}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "reply_to_user": {"reputation": 205, "user_id": 8931936, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10215078780069919/picture?type=large", "display_name": "Daniel Costa", "link": "https://stackoverflow.com/users/8931936/daniel-costa"}, "edited": false, "score": 1, "creation_date": 1554399402, "post_id": 55500230, "comment_id": 97748195, "body": "As long as they don&#39;t share any queues, this might work but it&#39;s not officially supported.  Different codebases should have different Redis configs so their data is  physically distinct, just like their code."}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 1, "last_activity_date": 1554309729, "creation_date": 1554309729, "answer_id": 55500230, "question_id": 55498916, "link": "https://stackoverflow.com/questions/55498916/how-to-queue-a-non-existing-worker/55500230#55500230", "title": "How to queue a non-existing worker", "body": "<p>You have two shards. Each Redis is a shard. Read this page:</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Sharding\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/wiki/Sharding</a></p>\n\n<p>You can push a job using the class name:</p>\n\n<pre><code>client = Sidekiq::Client.new(PROCESSING_REDIS)\nclient.push('queue' =&gt; 'api', 'class' =&gt; 'FooWorker', 'args' =&gt; [1,2,\"foo\"])\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 8931936, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10215078780069919/picture?type=large", "display_name": "Daniel Costa", "link": "https://stackoverflow.com/users/8931936/daniel-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 55500230, "answer_count": 1, "score": 0, "last_activity_date": 1554309729, "creation_date": 1554305405, "question_id": 55498916, "link": "https://stackoverflow.com/questions/55498916/how-to-queue-a-non-existing-worker", "title": "How to queue a non-existing worker", "body": "<p>I'm trying to queue a Sidekiq worker that does not exist in my project but exists in some other project sharing the same redis server.</p>\n\n<p>In our current situation, we have two servers:</p>\n\n<ul>\n<li><p><strong>API server</strong> runs on Heroku. Web instance for the REST API and worker with Sidekiq listening to the <code>:api</code> queue. </p></li>\n<li><p><strong>Processing server</strong> runs on AWS ElasticBeanstalk with a puma instance running a REST Full API with Sinatra. This instance runs Sidekiq and listens to the queue <code>:processing</code></p></li>\n</ul>\n\n<p><em>Side note</em>: In the beginning, our API was doing all the work but as some workers started taking too much memory, we switch to the processing server.</p>\n\n<hr>\n\n<p>When we need to execute a job on the processing server we have these actions happening:</p>\n\n<ol>\n<li><p>API calls <code>POST processing.com/some_job</code></p></li>\n<li><p>Processing queues <code>SomeJobWorker</code> on queue <code>processing</code></p></li>\n<li><p>Processing executes <code>SomeJobWorker</code> from queue <code>processing</code></p></li>\n<li><p>Processing calls <code>POST api.com/webhooks/some_job_result</code></p></li>\n<li><p>API queues <code>SomeJobResultWorker</code> on queue <code>api</code></p></li>\n<li><p>API executes <code>SomeJobResultWorker</code> from queue <code>processing</code></p></li>\n</ol>\n\n<hr>\n\n<p>This got me thinking if I could somehow, from the <strong>API server</strong> directly queue <code>SomeJobWorker</code> then I could get rid of the REST API on our <strong>processing server</strong>.</p>\n\n<p>... then I could get rid of the <code>webhooks</code> endpoint on the <strong>API server</strong> and do the same from the <strong>processing server</strong></p>\n\n<p>I would end up with something like this:</p>\n\n<ol>\n<li><p>API calls queues <code>SomeJobWorker</code></p></li>\n<li><p>Processing executes <code>SomeJobWorker</code></p></li>\n<li><p>Processing queues <code>SomeJobResultWorker</code></p></li>\n<li><p>API executes <code>SomeJobResultWorker</code></p></li>\n</ol>\n\n<p>Is there a way for me to queue a worker that does not exist on my local code base?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2", "ruby-2.4"], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1554305104, "post_id": 55498515, "comment_id": 97704521, "body": "Installed old version but showing 2.0.1 for <code>bundle --version</code>"}, {"owner": {"reputation": 3222, "user_id": 1328461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NK37P.png?s=128&g=1", "display_name": "dubadub", "link": "https://stackoverflow.com/users/1328461/dubadub"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1554308763, "post_id": 55498515, "comment_id": 97706631, "body": "okay, you probably need to remove the newer bundler first <code>gem uninstall bundler --version 2.0.1</code>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1554358943, "post_id": 55498515, "comment_id": 97723456, "body": "Yup, followed same and worked, easy but got difficult as never tried before! thanks:)"}, {"owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "edited": false, "score": 0, "creation_date": 1582198181, "post_id": 55498515, "comment_id": 106698685, "body": "In <code>Gemfile.lock</code> file the bundler version was 2.0.1 for me, I changed that into <code>1.16.1</code> as my project really needed that. Do <code>bundle install</code> It works!"}], "tags": [], "owner": {"reputation": 3222, "user_id": 1328461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NK37P.png?s=128&g=1", "display_name": "dubadub", "link": "https://stackoverflow.com/users/1328461/dubadub"}, "is_accepted": true, "score": 2, "last_activity_date": 1557733904, "last_edit_date": 1557733904, "creation_date": 1554304256, "answer_id": 55498515, "question_id": 55498245, "link": "https://stackoverflow.com/questions/55498245/bundle-install-do-not-work-for-rails-4-2-6-for-bundler-2-0-1/55498515#55498515", "title": "Bundle install do not work for rails-4.2.6 for bundler 2.0.1", "body": "<p>Your <code>Gemfile</code> specifies older bundler version which is not compatible with 2.x.x. Try to run <code>gem install bundler -v 1.3.0</code> or whatever version you have listed in your <code>Gemfile.lock</code> (check the very end of file).</p>\n"}, {"comments": [{"owner": {"reputation": 3222, "user_id": 1328461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NK37P.png?s=128&g=1", "display_name": "dubadub", "link": "https://stackoverflow.com/users/1328461/dubadub"}, "edited": false, "score": 1, "creation_date": 1554367395, "post_id": 55500763, "comment_id": 97728072, "body": "removing <code>Gemfile.lock</code> is a bad idea, because information about gem versions will be lost and can cause unexpected things to happen."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 10, "last_activity_date": 1554368623, "last_edit_date": 1554368623, "creation_date": 1554311777, "answer_id": 55500763, "question_id": 55498245, "link": "https://stackoverflow.com/questions/55498245/bundle-install-do-not-work-for-rails-4-2-6-for-bundler-2-0-1/55500763#55500763", "title": "Bundle install do not work for rails-4.2.6 for bundler 2.0.1", "body": "<p>Install any bundler with version (&lt; 2.0, >= 1.3.0).</p>\n\n<p>For example</p>\n\n<pre><code>gem install bundler -v 1.17.3\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>bundle _1.17.3_ install\n</code></pre>\n\n<p>It should work for your situation.</p>\n"}], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3174, "favorite_count": 0, "accepted_answer_id": 55498515, "answer_count": 2, "score": 2, "last_activity_date": 1557733904, "creation_date": 1554303494, "last_edit_date": 1554303964, "question_id": 55498245, "link": "https://stackoverflow.com/questions/55498245/bundle-install-do-not-work-for-rails-4-2-6-for-bundler-2-0-1", "title": "Bundle install do not work for rails-4.2.6 for bundler 2.0.1", "body": "<p>RVM is set on <code>ruby-2.4.0</code> &amp; I created new application which have version,</p>\n\n<pre><code>gem 'rails', '4.2.6'\n</code></pre>\n\n<p>I updated bundler using,</p>\n\n<pre><code>gem update --system\ngem install bundler\nbundle version\n# Bundler version 2.0.1 (2019-01-04 commit d7ad2192f)\n</code></pre>\n\n<p>But I am getting following error while <code>bundle install</code>,</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/.............\nFetching gem metadata from https://rubygems.org/.\nResolving dependencies...\nBundler could not find compatible versions for gem \"bundler\":\n  In Gemfile:\n    rails (= 4.2.6) was resolved to 4.2.6, which depends on\n      bundler (&lt; 2.0, &gt;= 1.3.0)\n\n  Current Bundler version:\n    bundler (2.0.1)\nThis Gemfile requires a different version of Bundler.\nPerhaps you need to update Bundler by running `gem install bundler`?\n\nCould not find gem 'bundler (&lt; 2.0, &gt;= 1.3.0)', which is required by gem 'rails (= 4.2.6)', in any of the sources.\n</code></pre>\n\n<p>It is asking me for lower version version of bundler required, why? How should I solve above?</p>\n"}, {"tags": ["ruby", "sketchup"], "comments": [{"owner": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "edited": false, "score": 0, "creation_date": 1565099237, "post_id": 55498198, "comment_id": 101239571, "body": "Are you creating the mesh yourself? If so, then you should be able to set the material as you create it."}, {"owner": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "reply_to_user": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "edited": false, "score": 0, "creation_date": 1565116363, "post_id": 55498198, "comment_id": 101248440, "body": "@thomthom, is your comment supposed to be of help to anybody?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554319236, "post_id": 55500309, "comment_id": 97711760, "body": "I wouldn&#39;t think <code>abs</code> is necessary. I was surprised to see your question had an answer. Most Sketchup/Ruby questions see to go unanswered. (I know nothing of the API.)"}], "tags": [], "owner": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "is_accepted": true, "score": 1, "last_activity_date": 1554310054, "creation_date": 1554310054, "answer_id": 55500309, "question_id": 55498198, "link": "https://stackoverflow.com/questions/55498198/ruby-sketchup-change-color-of-faces/55500309#55500309", "title": "Ruby-Sketchup change color of faces", "body": "<p>I found this answer.\nI guess it finds the faces that have a z value</p>\n\n<pre><code>vfaces = entities.grep(Sketchup::Face).find_all{|f| f.normal.z.abs != 0 }\nvfaces.each{|f| f.material = rfClr }\n</code></pre>\n"}], "owner": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 55500309, "answer_count": 1, "score": 0, "last_activity_date": 1554310054, "creation_date": 1554303360, "question_id": 55498198, "link": "https://stackoverflow.com/questions/55498198/ruby-sketchup-change-color-of-faces", "title": "Ruby-Sketchup change color of faces", "body": "<p>I would like to color the top of this shape to rfClr, any ideas? I can change the whole thing Grey, but how to change the top to blue?</p>\n\n<pre><code>l=100\nw=60\nh=20\nhl=8\nslope=4\nclr='Gray'\nrfClr='blue'\nent = Sketchup.active_model.entities\n\n        #---------Clear All\nSketchup.active_model.entities.clear!       \n        #----------------\n   model = Sketchup.active_model\n\n    model.start_operation \"Create Box\"\n#-----------------------------------------------------------------------------      \n\n    entities = model.active_entities\n    group = entities.add_group\n    entities = group.entities\n       group.name=\"Box\"\n    @pt0 = [0, 0, 0]\n    @pt1 = [0, 0, h*12+hl]\n    @pt2 = [w*12/2, 0, 12*h+hl+(w/2)*slope]\n    @pt3 = [w*12, 0, 12*h+hl]\n    @pt4 = [w*12, 0, 0]\n\nnewface = entities.add_face(@pt0, @pt1, @pt2, @pt3 , @pt4)\n    newface.material=Sketchup::Color.new clr\n#newface.reverse!\n    newface.pushpull l*12\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/v2hRg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v2hRg.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 0, "creation_date": 1554303135, "post_id": 55497953, "comment_id": 97703161, "body": "What about development.log?"}, {"owner": {"reputation": 21, "user_id": 11187487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okbGQ.jpg?s=128&g=1", "display_name": "Bobbonius", "link": "https://stackoverflow.com/users/11187487/bobbonius"}, "reply_to_user": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "edited": false, "score": 0, "creation_date": 1554303643, "post_id": 55497953, "comment_id": 97703565, "body": "@CAmador The error in development.log is basically the same as posted above. Nothing extra about the error is written there."}, {"owner": {"reputation": 104, "user_id": 4381022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e930fc1b15c96917acf14b6df8d9c981?s=128&d=identicon&r=PG&f=1", "display_name": "Tuan Tran", "link": "https://stackoverflow.com/users/4381022/tuan-tran"}, "edited": false, "score": 0, "creation_date": 1554304774, "post_id": 55497953, "comment_id": 97704313, "body": "It&#39;s hard to know what happen. Could you attach the stack trace (some lines below line &quot;NoMethodError (undefined method <code>any?</code> for nil:NilClass)&quot; ?"}, {"owner": {"reputation": 21, "user_id": 11187487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okbGQ.jpg?s=128&g=1", "display_name": "Bobbonius", "link": "https://stackoverflow.com/users/11187487/bobbonius"}, "reply_to_user": {"reputation": 104, "user_id": 4381022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e930fc1b15c96917acf14b6df8d9c981?s=128&d=identicon&r=PG&f=1", "display_name": "Tuan Tran", "link": "https://stackoverflow.com/users/4381022/tuan-tran"}, "edited": false, "score": 0, "creation_date": 1554305058, "post_id": 55497953, "comment_id": 97704494, "body": "@TuanTran, thank you for your comment! I answered my own question. We were a bit lucky as for one of our models this error didn&#39;t occur. So we stripped down the entire model and eventually broke that model because we removed <code>ignore_columns :latlon</code>. Then we realized this syntax was coming from a gem called &#39;ignorable&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11187487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okbGQ.jpg?s=128&g=1", "display_name": "Bobbonius", "link": "https://stackoverflow.com/users/11187487/bobbonius"}, "is_accepted": false, "score": 2, "last_activity_date": 1554304933, "creation_date": 1554304933, "answer_id": 55498745, "question_id": 55497953, "link": "https://stackoverflow.com/questions/55497953/upgrading-from-rails-5-0-7-2-to-5-1-7-causes-an-error-with-limited-explanation/55498745#55498745", "title": "Upgrading from Rails 5.0.7.2 to 5.1.7 causes an error with limited explanation", "body": "<p>Oke so a lot of rubber ducking against my colleague got us to an answer, at least for our specific situation.</p>\n\n<p>We had a <a href=\"https://github.com/nthj/ignorable\" rel=\"nofollow noreferrer\">gem</a> installed called 'ignorable'. In Rails 5 they added something allows you to ignore columns without that gem. Apparantly, something in this ignorable gem was causing this behavior as we removed it from the Gemfile and the errors were gone. </p>\n"}], "owner": {"reputation": 21, "user_id": 11187487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/okbGQ.jpg?s=128&g=1", "display_name": "Bobbonius", "link": "https://stackoverflow.com/users/11187487/bobbonius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554304933, "creation_date": 1554302693, "question_id": 55497953, "link": "https://stackoverflow.com/questions/55497953/upgrading-from-rails-5-0-7-2-to-5-1-7-causes-an-error-with-limited-explanation", "title": "Upgrading from Rails 5.0.7.2 to 5.1.7 causes an error with limited explanation", "body": "<p>I'm trying to upgrade my Rails project. I'm coming from 4.0.13 and am now at 5.0.7.2, which is stable. Next step would be to go from 5.0.7 to 5.1.7 but this raises an error.</p>\n\n<p>The error first occurred when I tried to run my project locally and sign in. Running it works but as soon as I wanted to sign in (using devise by the way) an error is raised. At first I thought this error was caused by devise but then I tried accessing other models via my console and they gave the same error.</p>\n\n<pre><code>NoMethodError at /\nundefined method `any?' for nil:NilClass\n</code></pre>\n\n<p>This is the error in my web console when I try to sign in. But it's similar to the one terminal console.</p>\n\n<pre><code>irb(main):002:0&gt; Report.last\nTraceback (most recent call last):\n        1: from (irb):2\nNoMethodError (undefined method `any?' for nil:NilClass)\n</code></pre>\n\n<p>This is all I got in terms of errors. Was wondering if anybody has had something similar before and if there are any solutions.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "type-conversion", "ruby-on-rails-5", "ruby-2.5"], "answers": [{"comments": [{"owner": {"reputation": 1200, "user_id": 10408280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7bbad62395ab7dcf79bd70d02f569e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/10408280/mike"}, "edited": false, "score": 0, "creation_date": 1554300218, "post_id": 55496884, "comment_id": 97701166, "body": "Hi Martin, thank you for the response.  That&#39;s a good suggestion and something I tried; however, the result I get is <code>&quot;{\\&quot;table\\&quot;:{\\&quot;a\\&quot;:{\\&quot;table\\&quot;:{\\&quot;b\\&quot;:0},\\&quot;modifiable\\&quot;:true}&zwnj;&#8203;},\\&quot;modifiable\\&quot;:tru&zwnj;&#8203;e}&quot;</code>.  Perhaps I have done something wrong, but all I have seen to address that is to modify the <code>as_json</code> or <code>to_json</code>, since <i>table</i> is an instance of OpenStruct.  This is my output of your example: <code>&quot;{\\&quot;table\\&quot;:{\\&quot;key1\\&quot;:{\\&quot;table\\&quot;:{\\&quot;key2\\&quot;:1}}}}&quot;</code> -- might you have already modified your version of to_json?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 1200, "user_id": 10408280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7bbad62395ab7dcf79bd70d02f569e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/10408280/mike"}, "edited": false, "score": 0, "creation_date": 1554300537, "post_id": 55496884, "comment_id": 97701370, "body": "@Mike No I modified nothing. Please update your question because I dont really understand what <code>tables</code> have to do with <code>OpenStruct</code> and your current question as it is. Specify your input and desired output"}, {"owner": {"reputation": 1200, "user_id": 10408280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7bbad62395ab7dcf79bd70d02f569e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/10408280/mike"}, "edited": false, "score": 0, "creation_date": 1554302266, "post_id": 55496884, "comment_id": 97702516, "body": "I want to avoid complicating the question.  This may be a rails-specific issue as I&#39;m noticing different behavior between irb and rails console.  Please refer here for an example <a href=\"https://stackoverflow.com/questions/7835047/collecting-hashes-into-openstruct-creates-table-entry/13777745\" title=\"collecting hashes into openstruct creates table entry\">stackoverflow.com/questions/7835047/&hellip;</a> ; notice in the question asked, there&#39;s a <i>table</i> key when converting from OpenStruct.   In my version I&#39;m also seeing a <i>modifiable</i> key (as listed in my comment above)"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 1200, "user_id": 10408280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7bbad62395ab7dcf79bd70d02f569e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/10408280/mike"}, "edited": false, "score": 0, "creation_date": 1554302639, "post_id": 55496884, "comment_id": 97702790, "body": "@Mike What version of ruby and rails are you running? Im doing it in rails console and I see no <code>table</code> keys. Same for an example from <a href=\"https://stackoverflow.com/questions/7835047/collecting-hashes-into-openstruct-creates-table-entry/13777745\" title=\"collecting hashes into openstruct creates table entry\">stackoverflow.com/questions/7835047/&hellip;</a> question. I have rails <code>4.2.11.1</code> and ruby <code>2.5.3</code>"}, {"owner": {"reputation": 1200, "user_id": 10408280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7bbad62395ab7dcf79bd70d02f569e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/10408280/mike"}, "edited": false, "score": 0, "creation_date": 1554303605, "post_id": 55496884, "comment_id": 97703531, "body": "ruby 2.5 / rails 5.1 (I used the rails-5 tag on the question, but it looks like I need to update the question for the ruby version)"}], "tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1554302944, "last_edit_date": 1554302944, "creation_date": 1554299681, "answer_id": 55496884, "question_id": 55495988, "link": "https://stackoverflow.com/questions/55495988/converting-a-nested-openstruct-to-json/55496884#55496884", "title": "Converting a nested OpenStruct to JSON", "body": "<p>Calling OpenStruct#to_json on your struct should do it:</p>\n\n<pre><code>[2] pry(main)&gt; JSON.parse('{\"a\":{\"b\":0}}', object_class:OpenStruct).to_json\n=&gt; \"{\\\"a\\\":{\\\"b\\\":0}}\"\n</code></pre>\n\n<p>And from plain irb <code>OpenStruct#to_json</code> does not work:</p>\n\n<pre><code>irb(main):003:0&gt; require 'ostruct'\n=&gt; true\nirb(main):004:0&gt; require 'json'\n=&gt; true\nirb(main):005:0&gt; JSON.parse('{\"a\":{\"b\":0}}', object_class:OpenStruct).to_json\n=&gt; \"\\\"#&lt;OpenStruct a=#&lt;OpenStruct b=0&gt;&gt;\\\"\"\n</code></pre>\n\n<p>ruby 2.5.3, rails 4.2.11.1</p>\n"}], "owner": {"reputation": 1200, "user_id": 10408280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7bbad62395ab7dcf79bd70d02f569e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/10408280/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 580, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554303652, "creation_date": 1554296886, "last_edit_date": 1554303652, "question_id": 55495988, "link": "https://stackoverflow.com/questions/55495988/converting-a-nested-openstruct-to-json", "title": "Converting a nested OpenStruct to JSON", "body": "<p>It seems to be pretty easy to create nested OpenStruct objects using JSON.parse:</p>\n\n<pre><code>JSON.parse( '{\"a\":{\"b\":0}}', object_class:OpenStruct )\n#&lt;OpenStruct a=#&lt;OpenStruct b=0&gt;&gt;\n</code></pre>\n\n<p>Is there a simpler method of converting it back to json, without creating a recursive function (as demonstrated here: <a href=\"https://stackoverflow.com/questions/33092107/deep-convert-openstruct-to-json\">Deep Convert OpenStruct to JSON</a>)?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs", "backend"], "answers": [{"tags": [], "owner": {"reputation": 1671, "user_id": 3427659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3KKqj.jpg?s=128&g=1", "display_name": "Kamal Panhwar", "link": "https://stackoverflow.com/users/3427659/kamal-panhwar"}, "is_accepted": true, "score": 1, "last_activity_date": 1554297505, "creation_date": 1554297505, "answer_id": 55496182, "question_id": 55495705, "link": "https://stackoverflow.com/questions/55495705/how-to-serve-react-app-with-ruby-on-rails-4-backend/55496182#55496182", "title": "How to serve React app with Ruby on Rails 4 backend", "body": "<p>You just shared the Gem file, but nothing how this app is developed, so it is insufficient information to give you an accurate response. But usually, two different methods are followed.</p>\n\n<h3>First Method</h3>\n\n<p>Two separate application, as your ruby on rails application working, can create another react application, and consume all endpoints present in your Ruby on Rails application, if you could not find some require endpoint, you can check already made endpoints and make few new one following the way. Hopefully, it would be easier to do.</p>\n\n<h3>Using Gem of Ruby on Rails</h3>\n\n<p>In this method, you have to break apart your project and removing all Angular Gems already present in your project and start with fresh frontend with ReactJS. In my opinion, it requires much more Ruby on Rails knowledge to do it, but in the end, you will get just one project.</p>\n\n<h3>Your project</h3>\n\n<p>As from Gem file seem it is heavily using Angular, so probably you have run it and check if it has most of the Endpoints made Restful. If yes then I suggest to go on method one and create new ReactJS app, which will consume all endpoint made in Ruby on rails, that would be more work on React side app and less on Ruby on Rails. Even if you found that some endpoints are not present you can follow already created endpoints coding and action, where you will complete details. I understand there will be two different projects, but the learning curve to learn Ruby on Rails and integrating it with React would be more than having two different projects.</p>\n"}], "owner": {"reputation": 414, "user_id": 3612829, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1233a10d13b43fb45730c7adb54746d8?s=128&d=identicon&r=PG&f=1", "display_name": "Waltari", "link": "https://stackoverflow.com/users/3612829/waltari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 55496182, "answer_count": 1, "score": -3, "last_activity_date": 1554297505, "creation_date": 1554296013, "question_id": 55495705, "link": "https://stackoverflow.com/questions/55495705/how-to-serve-react-app-with-ruby-on-rails-4-backend", "title": "How to serve React app with Ruby on Rails 4 backend", "body": "<p>We have a Ruby on Rails fullstack application, and we would like to turn it into a ReactJS application while keeping the backend code, and redoing the frontend code.</p>\n\n<p>Our gemfile looks like this: </p>\n\n<pre><code>ruby '2.2.1'\nsource 'https://rubygems.org' do\n  gem 'rails', '4.1.14'\n  gem 'uglifier', '&gt;= 1.3.0'\n  gem 'coffee-rails', '~&gt; 4.0.0'\n  gem 'jquery-rails'\n  gem 'jquery-ui-rails'\n  gem 'jbuilder', '~&gt; 2.0'\n  gem 'sdoc', '~&gt; 0.4.0', group: :doc\n  gem 'bootstrap-sass'\n  gem 'sass-rails', '&gt;= 3.2'\n  gem 'autoprefixer-rails'\n  gem 'devise'\n  gem 'devise_invitable'\n  gem 'devise-token_authenticatable'\n  gem 'omniauth'\n  gem 'omniauth-facebook'\n  gem 'omniauth-google-oauth2'\n  gem 'figaro'\n  gem 'haml-rails'\n  gem 'mysql2', '~&gt; 0.3.18'\n  gem 'pundit'\n  gem 'rolify'\n  gem 'simple_form'\n  gem 'wicked_pdf'\n  gem 'wkhtmltopdf-binary'\n  gem 'axlsx', '2.1.0.pre'\n  gem 'axlsx_rails'\n  gem 'axlsx_styler'\n  group :development do\n    gem 'better_errors'\n    gem 'binding_of_caller', :platforms =&gt; [:mri_21]\n    gem 'capistrano'\n    gem 'capistrano-bundler'\n    gem 'capistrano-rails'\n    gem 'capistrano-rails-console'\n    gem 'capistrano-rvm'\n    gem 'capistrano-pending', :require =&gt; false\n    gem 'capistrano-sidekiq'\n    gem 'html2haml'\n    gem 'quiet_assets'\n    gem 'rails_layout'\n    gem 'magic_encoding'\n    gem 'annotate'\n  end\n  group :development, :test do\n    gem 'factory_girl_rails'\n    gem 'rspec-rails'\n    gem 'letter_opener'\n    gem 'bullet'\n    gem 'timecop'\n  end\n\n  group :test do\n    gem 'capybara'\n    gem 'database_cleaner'\n    gem 'faker'\n    gem 'launchy'\n    gem 'selenium-webdriver'\n    gem 'simplecov'\n    gem 'codeclimate-test-reporter', '~&gt; 1.0.0'\n  end\n\n  gem 'passenger'\n  gem 'passenger-rails'\n  gem 'execjs'\n  gem 'therubyracer', :platforms =&gt; :ruby\n  gem 'newrelic_rpm'\n  gem 'redis-rails'\n  gem 'redis-session-store'\n  gem 'redis-rack-cache'\n  gem 'rack-cache'\n  gem 'actionpack-page_caching'\n  gem 'lograge'\n  gem 'rocket_pants'\n  gem 'active_model_serializers', '~&gt;0.8.1'\n  gem 'will_paginate'\n  gem 'delocalize'\n  gem 'phone'\n  gem 'paranoia', '~&gt; 2.0'\n  gem 'bh', '~&gt; 1.0'\n  gem 'sidekiq'\n  gem 'counter_culture'\n  gem 'rollbar'\n  gem 'oj', '~&gt; 2.12.14'\n  gem 'sidetiq'\n  gem 'enum_help'\n  gem 'sinatra', '&gt;= 1.3.0', :require =&gt; nil\n  gem 'awesome_print', require: 'ap'\n  gem 'ngannotate-rails'\nend\nsource 'https://rails-assets.org' do\n  gem 'rails-assets-angular', '1.3.12'\n  gem 'rails-assets-leaflet'\n  gem 'rails-assets-angular-animate'\n  gem 'rails-assets-angular-cookies'\n  gem 'rails-assets-angular-resource'\n  gem 'rails-assets-angular-sanitize'\n  gem 'rails-assets-angular-touch'\n  gem 'rails-assets-angular-route'\n  gem 'rails-assets-angular-moment'\n  gem 'rails-assets-angular-ui-date'\n  gem 'rails-assets-angular-xeditable'\n  gem 'rails-assets-components-font-awesome', '4.2.0'\n  gem 'rails-assets-angular-loading-bar'\n  gem 'rails-assets-angular-confirm-click'\n  gem 'rails-assets-angular-strap'\n  gem 'rails-assets-angular-dialog-service'\n  gem 'rails-assets-angular-bootstrap'\n  gem 'rails-assets-angular-translate'\n  gem 'rails-assets-trNgGrid'\n  gem 'rails-assets-accounting.js'\n  gem 'rails-assets-angular-ui-notification'\nend\n</code></pre>\n\n<p>Is this a realistic thing to attempt? I am not familiar with Ruby on Rails, and neither is anyone on our team. There seems to be a lot of under the hood logic, and I am wondering if some of this logic would prevent this from working 100%.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "ahoy"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8301194, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_tTCpcguZ2Y/AAAAAAAAAAI/AAAAAAAAACc/QHSxj1iDjgE/photo.jpg?sz=128", "display_name": "RAM PRATHIP", "link": "https://stackoverflow.com/users/8301194/ram-prathip"}, "edited": false, "score": 0, "creation_date": 1554356270, "post_id": 55501930, "comment_id": 97722308, "body": "Already I have add this line in config/initializer/ahoy_email.rb but it cant work."}], "tags": [], "owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "is_accepted": true, "score": 0, "last_activity_date": 1554316067, "creation_date": 1554316067, "answer_id": 55501930, "question_id": 55495355, "link": "https://stackoverflow.com/questions/55495355/how-to-use-ahoy-email-with-api-only-application/55501930#55501930", "title": "how to use ahoy email with api only application?", "body": "<p>from <a href=\"https://github.com/ankane/ahoy\" rel=\"nofollow noreferrer\">https://github.com/ankane/ahoy</a></p>\n\n<blockquote>\n  <p>If your entire Rails app is an API, you can use:</p>\n</blockquote>\n\n<pre><code>Ahoy.api_only = true\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8301194, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_tTCpcguZ2Y/AAAAAAAAAAI/AAAAAAAAACc/QHSxj1iDjgE/photo.jpg?sz=128", "display_name": "RAM PRATHIP", "link": "https://stackoverflow.com/users/8301194/ram-prathip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 55501930, "answer_count": 1, "score": 0, "last_activity_date": 1554388069, "creation_date": 1554294902, "last_edit_date": 1554388069, "question_id": 55495355, "link": "https://stackoverflow.com/questions/55495355/how-to-use-ahoy-email-with-api-only-application", "title": "how to use ahoy email with api only application?", "body": "<p>I am using ahoy email in my rails API only application, and I cant able to track the open and click event. Even record is not created in the ahoy table. I don't know how to debug</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11217219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cac6819518671edbfabb65c84a0bc64?s=128&d=identicon&r=PG&f=1", "display_name": "errazoid", "link": "https://stackoverflow.com/users/11217219/errazoid"}, "edited": false, "score": 0, "creation_date": 1554299911, "post_id": 55496023, "comment_id": 97700958, "body": "Thanks very much. That&#39;s exactly what i was looking for."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 3, "user_id": 11217219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cac6819518671edbfabb65c84a0bc64?s=128&d=identicon&r=PG&f=1", "display_name": "errazoid", "link": "https://stackoverflow.com/users/11217219/errazoid"}, "edited": false, "score": 0, "creation_date": 1554299966, "post_id": 55496023, "comment_id": 97701004, "body": "@errazoid Great! If it solves your problem, would you be able to \u201cAccept\u201d my answer?"}, {"owner": {"reputation": 3, "user_id": 11217219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cac6819518671edbfabb65c84a0bc64?s=128&d=identicon&r=PG&f=1", "display_name": "errazoid", "link": "https://stackoverflow.com/users/11217219/errazoid"}, "edited": false, "score": 0, "creation_date": 1554300241, "post_id": 55496023, "comment_id": 97701182, "body": "I guess It&#39;s done. Sorry i am new here I can&#39;t yet  vote  for your amazing answer. :("}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 3, "user_id": 11217219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cac6819518671edbfabb65c84a0bc64?s=128&d=identicon&r=PG&f=1", "display_name": "errazoid", "link": "https://stackoverflow.com/users/11217219/errazoid"}, "edited": false, "score": 0, "creation_date": 1554300287, "post_id": 55496023, "comment_id": 97701224, "body": "It\u2019s all good! The green check mark is all I was hoping for. Thanks!"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1554311240, "post_id": 55496023, "comment_id": 97707881, "body": "APIDock isn&#39;t really maintained anymore, you&#39;re better off linking to the official docs: <a href=\"https://api.rubyonrails.org/classes/Array.html#method-i-in_groups_of\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/Array.html#method-i-in_groups_of</a> . Or, if you don&#39;t need the <code>fill_with</code> behavior of <code>in_groups_of</code>, go straight to <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>Enumerable#each_slice</code></a>."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1554314626, "post_id": 55496023, "comment_id": 97709458, "body": "I didn\u2019t realize that. Thanks @muistooshort"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1554319418, "post_id": 55496023, "comment_id": 97711853, "body": "Yeah, shame, the version tracking was sometimes handy."}], "tags": [], "owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "is_accepted": true, "score": 2, "last_activity_date": 1554314657, "last_edit_date": 1554314657, "creation_date": 1554296968, "answer_id": 55496023, "question_id": 55495087, "link": "https://stackoverflow.com/questions/55495087/how-to-take-results-five-by-five-from-an-activerecord-in-rails/55496023#55496023", "title": "How to take results five by five from an ActiveRecord in rails", "body": "<pre><code>@articles = Article.all.in_groups_of(5)\n</code></pre>\n\n<p><a href=\"https://api.rubyonrails.org/classes/Array.html#method-i-in_groups_of\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/Array.html#method-i-in_groups_of</a></p>\n\n<p>This will load all of the articles up from the database, and give you an array of arrays, where each inner array has 5 articles in it.</p>\n\n<p>Now, if you have a lot of articles in your database, this will quickly be a lot of results, so you\u2019ll want to paginate your results accordingly.</p>\n"}], "owner": {"reputation": 3, "user_id": 11217219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cac6819518671edbfabb65c84a0bc64?s=128&d=identicon&r=PG&f=1", "display_name": "errazoid", "link": "https://stackoverflow.com/users/11217219/errazoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 55496023, "answer_count": 1, "score": 0, "last_activity_date": 1554314657, "creation_date": 1554294113, "last_edit_date": 1554294877, "question_id": 55495087, "link": "https://stackoverflow.com/questions/55495087/how-to-take-results-five-by-five-from-an-activerecord-in-rails", "title": "How to take results five by five from an ActiveRecord in rails", "body": "<p>Suppose:</p>\n\n<pre><code>  @articles =(Article.find.all).some_method\n</code></pre>\n\n<p>I want to loop for @articles variable in such way the results will be as this:</p>\n\n<pre><code>[ [article1Obj, article2Obj, article3Obj, article4Obj, article5Obj], [article6Obj, article7Obj, article8Obj, article9Obj, article10Obj], [...], [...],......,[...] ].\n</code></pre>\n\n<p>a list of lists, each contains five elements or generally <em>n</em> elements.</p>\n\n<p>Is there any method in Rails can do that with a simple way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1554316444, "post_id": 55494778, "comment_id": 97710421, "body": "I&#39;d try to install <a href=\"https://scoutapm.com/devtrace\" rel=\"nofollow noreferrer\">DevTrace</a> and post here the trace screenshot. You should be able to see the bottleneck there, if there&#39;s any in the code."}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "edited": false, "score": 0, "creation_date": 1581678943, "post_id": 55494778, "comment_id": 106526022, "body": "@cannon Did you find any solution to this?"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "edited": false, "score": 0, "creation_date": 1581685895, "post_id": 55494778, "comment_id": 106529201, "body": "I ended up taking this project off of a digital ocean server and just running it locally on a mac which helped. Is your project running locally? @NimishGupta"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "edited": false, "score": 0, "creation_date": 1581688618, "post_id": 55494778, "comment_id": 106530698, "body": "Yes my project is running locally. still its takes 8-10 seconds for a request to process when changing .rb file"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6509315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CPzDf.jpg?s=128&g=1", "display_name": "DRSisco", "link": "https://stackoverflow.com/users/6509315/drsisco"}, "is_accepted": false, "score": 1, "last_activity_date": 1554294558, "creation_date": 1554294558, "answer_id": 55495237, "question_id": 55494778, "link": "https://stackoverflow.com/questions/55494778/rails-server-extremely-slow-in-development/55495237#55495237", "title": "Rails Server Extremely Slow in Development", "body": "<p>Looks like every time your rails server detects a page change it checks to see if their is a migration pending, which will take some time.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#config/environments/development.rb\n\n  config.active_record.migration_error = false\n</code></pre>\n\n<p>could help with that check. </p>\n\n<blockquote>\n  <p>In the development environment your application's code is reloaded on every request. This slows down response time but is perfect for development since you don't have to restart the web server when you make code changes.</p>\n</blockquote>\n\n<p>As with larger projects you will want to stop rails from pre-loading all the code which isn't needed especially if you are only working on a portion of your project anyways. Also in the environment</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#config/environments/development.rb\n\n  # Do not eager load code on boot.\n  config.eager_load = false\n</code></pre>\n\n<p>You can read more on these environment config settings <a href=\"https://guides.rubyonrails.org/configuring.html#rails-general-configuration\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Though the 4GB of memory seems like a red flag if you aren't working on a massive project... might need to look into your initializes and what all your project is loading up on boot.</p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554294558, "creation_date": 1554293227, "question_id": 55494778, "link": "https://stackoverflow.com/questions/55494778/rails-server-extremely-slow-in-development", "title": "Rails Server Extremely Slow in Development", "body": "<p>I've got a rails 5 application that is very slow after I boot the server or change a .rb file. Below is my cli output after I booted the server with <code>rails server</code> and loaded a simple page. Also, if I change a model, controller or helper, the server takes about the same time to respond to the next request. After the request is loaded, the pages load normally but that first request after each change can take 30 seconds which adds up quite fast. I have tried setting the following configs in `development (similar questions suggested these changes). Also, I have this development server running on a digital ocean droplet with 4GB of memory. </p>\n\n<pre><code>config.assets.debug = false\nconfig.assets.digest = false\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>rails server\n=&gt; Booting Puma\n=&gt; Rails 5.2.2 application starting in development\n=&gt; Run rails server -h for more startup options\nPuma starting in single mode...\n* Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\nStarted GET \"/treadmill-parts-model-select\" for 98.251.169.224 at 2019-04-03 \n11:51:29 +0000\nCannot render console from 98.251.169.224! Allowed networks: 127.0.0.1, ::1, \n127.0.0.0/127.255.255.255\n(2.1ms)  SET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, \n',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  \n@@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483\n\u21b3 /usr/local/rvm/gems/ruby-2.5.3/gems/activerecord- \n5.2.2/lib/active_record/log_subscriber.rb:98\n(2.4ms)  SELECT 'schema_migrations'.'version' FROM 'schema_migrations' ORDER \nBY 'schema_migrations'.'version' ASC\n\u21b3 /usr/local/rvm/gems/ruby-2.5.3/gems/activerecord- \n5.2.2/lib/active_record/log_subscriber.rb:98\nProcessing by SearchController#treadmill_model_search as HTML\n  Rendering search/treadmill_model_search.html.erb within layouts/application\n  Product Load (113.8ms)  SELECT DISTINCT 'products'.'brand' FROM 'products' WHERE 'products'.'product_type' = 'Treadmill' ORDER BY 'products'.'brand' ASC\n  \u21b3 app/views/search/treadmill_model_search.html.erb:22\n  Rendered search/treadmill_model_search.html.erb within layouts/application (167.6ms)\n  Rendered layouts/_header.html.erb (5.8ms)\n  Rendered layouts/_flash_messages.html.erb (1.1ms)\n  Rendered layouts/_footer.html.erb (0.5ms)\nCompleted 200 OK in 18746ms (Views: 18565.0ms | ActiveRecord: 124.7ms)`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundle"], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": false, "score": 1, "last_activity_date": 1554291004, "creation_date": 1554291004, "answer_id": 55494094, "question_id": 55493951, "link": "https://stackoverflow.com/questions/55493951/is-there-a-way-to-get-a-gems-version-before-running-bundle-install-from-gemfil/55494094#55494094", "title": "Is there a way to get a gem&#39;s version before running bundle install (from Gemfile.lock)", "body": "<p>If you add a new gem to your gemfile, but don't do <code>bundle install</code>, it doesn't install yet. Instead, you can run <code>bundle lock</code>, which generates a new lock file. This includes the gem version of the new gem that would be installed.\nBy running <code>bundle show new_gem</code>, it shows it isn't actually installed.</p>\n\n<p>To be sure maybe get a backup of the original <code>Gemfile.lock</code> before running the command though.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1554469196, "last_edit_date": 1554469196, "creation_date": 1554293236, "answer_id": 55494780, "question_id": 55493951, "link": "https://stackoverflow.com/questions/55493951/is-there-a-way-to-get-a-gems-version-before-running-bundle-install-from-gemfil/55494780#55494780", "title": "Is there a way to get a gem&#39;s version before running bundle install (from Gemfile.lock)", "body": "<p>By default if no version is specified in the Gemfile, running <code>bundle install</code> will attempt to install the latest version of the gem which is compatible with the rest of the gems and ruby version in your project.  This will create a Gemfile.lock file if one doesn't already exist.  If a Gemfile.lock file is already committed to git repo, it should then install the versions specified in Gemfile.lock.  The point of bundler is to handle dependencies to insure your stack works correctly.</p>\n\n<p>To see the version of a gem bundler is currently using you can run</p>\n\n<pre><code>bundle show rails\n</code></pre>\n\n<p>You will probably want to specify the ruby version in the Gemfile for example</p>\n\n<pre><code>ruby '~&gt; 2.5'  #\n</code></pre>\n\n<p>You can specify exact version of a gem in the Gemfile like this which you should be able to rely on to be the version bundler will install so long as it's compatible with the rest of the stack. <code>bundle install</code> will throw errors if there are incompatible gem versions.</p>\n\n<pre><code>gem 'rails', '4.2.11' # this will always install only this version.\n</code></pre>\n\n<p>You may also use pessimistic operator <code>(~&gt;)</code> to set for only minor updates</p>\n\n<pre><code>gem 'influxdb', '~&gt; 0.6.1' # could go to 0.6.2 but never 0.7.0\n</code></pre>\n\n<p>You can also set minimum versions like this although it's probably  not what you need for your question.</p>\n\n<pre><code>gem 'pg_query', '&gt;= 0.9.0'\n</code></pre>\n\n<p>If you have a Gemfile.lock already in your repo you can see which version would be installed by running for example:</p>\n\n<pre><code>gem show rails\n</code></pre>\n\n<p>Which would show you the version and weather it or not it is currently installed.</p>\n\n<p>For more info see <code>bundle --help</code></p>\n"}], "owner": {"reputation": 5184, "user_id": 1083764, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e084347ce721f3828d1bcdf1606337ff?s=128&d=identicon&r=PG", "display_name": "SoWhat", "link": "https://stackoverflow.com/users/1083764/sowhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 55494780, "answer_count": 2, "score": 1, "last_activity_date": 1554469196, "creation_date": 1554290462, "question_id": 55493951, "link": "https://stackoverflow.com/questions/55493951/is-there-a-way-to-get-a-gems-version-before-running-bundle-install-from-gemfil", "title": "Is there a way to get a gem&#39;s version before running bundle install (from Gemfile.lock)", "body": "<p>I want to get a Gem's version without running bundle install.\nWhich is to say I want figure out what version bundle is planning to install without actually installing the gem. \nSay read it from the Gemfile.lock(and Gemfile) combined. </p>\n\n<p>Is there a way I can resolve what version bundler plans to install? </p>\n\n<p>I need this because I want to cache the expensive installs while running docker build. </p>\n\n<p>Gems like rails(nokogiri) take a while to install and I would like to do gem install rails -v ... in a previous step before running bundle install.</p>\n\n<p>For this purpose i need to get the rails version before hand</p>\n"}, {"tags": ["ruby", "macos", "dtrace"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1554293526, "post_id": 55493115, "comment_id": 97696786, "body": "Ruby badly abuses <code>setjmp()</code>/<code>longjmp()</code>- see <a href=\"https://stackoverflow.com/questions/28569337/setjmp-longjmp-in-ruby-s-continuation\" title=\"setjmp longjmp in ruby s continuation\">stackoverflow.com/questions/28569337/&hellip;</a>. Is there any possibility that Ruby is jumping into/out of the calls you&#39;re trying to trace?"}], "answers": [{"comments": [{"owner": {"reputation": 6066, "user_id": 119669, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/959be122ff68722c18fc41e487e9465d?s=128&d=identicon&r=PG", "display_name": "Lee Hambley", "link": "https://stackoverflow.com/users/119669/lee-hambley"}, "edited": false, "score": 0, "creation_date": 1560446181, "post_id": 56551259, "comment_id": 99749071, "body": "thanks, I&#39;ll go do some more digging and see what I can turn up - I haven&#39;t touched this project in a while and will need to refresh my memory."}], "tags": [], "owner": {"reputation": 130, "user_id": 7001565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCfV7.png?s=128&g=1", "display_name": "Antonio Nikishaev", "link": "https://stackoverflow.com/users/7001565/antonio-nikishaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1560284873, "creation_date": 1560284873, "answer_id": 56551259, "question_id": 55493115, "link": "https://stackoverflow.com/questions/55493115/correlating-dtrace-probes/56551259#56551259", "title": "Correlating dtrace probes", "body": "<blockquote>\n  <p>am I using the self-> variables correctly</p>\n</blockquote>\n\n<p>Probably not. Because the third clause will always run (<code>self-&gt;start=0</code>). That\u2019s the problem.</p>\n\n<p>If you have recent enough (<code>dtrace -V</code> \u2265 <code>dtrace: Sun D 1.14</code>) dtrace version, you can do</p>\n\n<pre><code>ruby*:::require-return\n{\n  if (self-&gt;start)\n    @counts[\"correlated require returns\"] = count();\n  else\n    @counts[\"uncorrelated require returns\"] = count();\n\n  self-&gt;start = 0;\n}\n</code></pre>\n\n<p>otherwise</p>\n\n<pre><code>ruby*:::require-return\n{\n  @counts[self-&gt;start ? \"correlated require returns\" : \"uncorrelated require returns\"] = count();\n  self-&gt;start = 0;\n}\n</code></pre>\n\n<p>will do the trick too.</p>\n"}], "owner": {"reputation": 6066, "user_id": 119669, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/959be122ff68722c18fc41e487e9465d?s=128&d=identicon&r=PG", "display_name": "Lee Hambley", "link": "https://stackoverflow.com/users/119669/lee-hambley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560284873, "creation_date": 1554287826, "last_edit_date": 1554292704, "question_id": 55493115, "link": "https://stackoverflow.com/questions/55493115/correlating-dtrace-probes", "title": "Correlating dtrace probes", "body": "<p>I'm seeing unexpected results using dtrace, in that my <code>-entry</code> and <code>-return</code> results don't always seem to correlate, I seem to see either too many or too few, and have simplified my script to explore what is going wrong.</p>\n\n<p>I'm attempting to profile the amount of time spent in <code>require \"./foo\"</code>s in my Ruby code using the following D script:</p>\n\n<pre><code>ruby*:::require-entry\n{\n  self-&gt;start = timestamp;\n  @counts[\"require-entry\"] = count();\n}\n\nruby*:::require-return\n/self-&gt;start/\n{\n  @counts[\"correlated require returns\"] = count();\n  self-&gt;start = 0;\n}\n\nruby*:::require-return\n/!self-&gt;start/\n{\n  /* @reqTimes[copyinstr(arg0)] = quantize(self-&gt;start - timestamp); */\n  @counts[\"uncorrelated require returns\"] = count();\n}\n</code></pre>\n\n<p>Running this prints:</p>\n\n<pre><code>$ time sudo dtrace -q -s script.d -c './script.rb'\n\n  correlated require returns                                     5691\n  uncorrelated require returns                                   7872\n  require-entry                                                  7877\nsudo dtrace -q -s script.d -c './script.rb'  0.22s user 0.22s system 3% cpu 13.488 total\n</code></pre>\n\n<ul>\n<li>am I using the <code>self-&gt;</code> variables correctly (vs. <code>this-&gt;</code> or similar?)</li>\n<li>are my predicates correct?</li>\n<li>when running dtrace this way, do I \"race\" against the probes activating before the script starts?</li>\n</ul>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "capybara", "poltergeist"], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 1728404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9193410150c79743c79a25c0b850f6bf?s=128&d=identicon&r=PG", "display_name": "SRCM", "link": "https://stackoverflow.com/users/1728404/srcm"}, "edited": false, "score": 0, "creation_date": 1554358799, "post_id": 55498578, "comment_id": 97723381, "body": "Thanks @Thomas Walpole. Can we configure the wait time in Capybara 3. Is there any property?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 231, "user_id": 1728404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9193410150c79743c79a25c0b850f6bf?s=128&d=identicon&r=PG", "display_name": "SRCM", "link": "https://stackoverflow.com/users/1728404/srcm"}, "edited": false, "score": 0, "creation_date": 1554385953, "post_id": 55498578, "comment_id": 97740031, "body": "@SRCM Yes, like all the finder methods, you can pass the :wait option to override the current Capybara.default_max_wait_time"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1554304451, "creation_date": 1554304451, "answer_id": 55498578, "question_id": 55492489, "link": "https://stackoverflow.com/questions/55492489/capybara-upgrade-capybaraquery/55498578#55498578", "title": "Capybara Upgrade Capybara::Query", "body": "<p>It looks like your <code>all</code> method was just trying to add waiting behavior to the Capybara built-in <code>all</code> method (and doing it in a very strange way that would break the flexibility of selector types too). That became the default behavior in Capybara 3 anyway, so I'd recommend just removing your <code>all</code> monkeypatch.</p>\n"}], "owner": {"reputation": 231, "user_id": 1728404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9193410150c79743c79a25c0b850f6bf?s=128&d=identicon&r=PG", "display_name": "SRCM", "link": "https://stackoverflow.com/users/1728404/srcm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 55498578, "answer_count": 1, "score": 0, "last_activity_date": 1554304451, "creation_date": 1554286007, "question_id": 55492489, "link": "https://stackoverflow.com/questions/55492489/capybara-upgrade-capybaraquery", "title": "Capybara Upgrade Capybara::Query", "body": "<p>I have an old project with Capybara version 2.7.1. One file has the following code</p>\n\n<pre><code>module Capybara\n  module Node\n    module Finders\n      def all(*args)\n        using_wait_time 1 do\n          xpath = args.find { |a| a.is_a? String }\n          has_selector? xpath\n          query = Capybara::Query::Query.new(*args)\n          synchronize(1) do\n            result = query.resolve_for(self)\n            raise Capybara::ExpectationNotMet, result.failure_message unless result.matches_count?\n            result\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>We have now upgraded to Capybara 3.15.0 and looks like Capybara::Query has been deprecated. I have tried using <code>Queries::SelectorQuery</code> instead of <code>Query</code> as shown below</p>\n\n<pre><code>session_options = Capybara.session_options\nquery = Capybara::Queries::SelectorQuery.new(*args, session_options: session_options)\n</code></pre>\n\n<p>But following assertions are failing</p>\n\n<pre><code>def content_xpath\n  unless @content_xpath\n    @content_xpath = \"//td[@class='clsCenterButton' and ./label[contains(text(),'#{@label}')]]\"\n    @content_xpath = \"//td[@class='clsCenterButton' and ./label[@title='#{@label}']]\" if page.all(@content_xpath, visible: true).count&gt;1\n  end\n  @content_xpath\nend\n</code></pre>\n\n<blockquote>\n  <p>Unused parameters passed to Capybara::Queries::SelectorQuery : [{:visible=>true}] (ArgumentError)</p>\n</blockquote>\n\n<pre><code>using_wait_time 10 do\n  expect(page).to have_selector content_xpath\n  expect(page).to have_selector content_xpath, visible: !(@collapsed)\nend\n</code></pre>\n\n<blockquote>\n  <p>Unused parameters passed to Capybara::Queries::SelectorQuery : [{:visible=>true}] (ArgumentError)</p>\n</blockquote>\n\n<p><strong>Gemfile (before Upgrade)</strong></p>\n\n<pre><code>source 'http://rubygems.org'\nruby '2.0.0'\n\ngem 'cucumber', '2.0.0'\ngem 'gherkin'\ngem 'rspec-expectations', '3.2'\ngem 'rspec'\ngem 'capybara', '2.7.1'\ngem 'selenium-webdriver', '2.53.4'\ngem 'cuporter', '~&gt;0.3.14'\ngem 'nokogiri', '~&gt;1.6.0'\ngem 'savon', '~&gt;2.1.0'\ngem 'nori', '~&gt;2.0.4'\ngem 'chronic', '0.9.1'\ngem 'json', '~&gt;1.7.6'\ngem 'rest-client', '~&gt;1.6.7'\ngem 'flog', '~&gt;4.1.0'\ngem 'flay', '~&gt;2.3.0'\ngem 'roodi', '~&gt;2.1.0'\ngem \"require_all\", \"~&gt; 1.3.2\"\ngem 'mongo', \"~&gt; 1.12.5\"\ngem 'bson_ext', \"~&gt; 1.12.5\"\ngem 'xml-simple', '~&gt; 1.1.3'\ngem 'roo', '~&gt; 1.2.3'\ngem \"zip-zip\", \"~&gt; 0.2\"\ngem 'rubyzip', '1.0.0'\ngem 'tiny_tds', '0.7.0'\ngem 'poltergeist', '1.10.0'\ngem 'addressable', '2.4.0'\ngem 'rack', '1.6.4'\ngem 'cuke_sniffer'\ngem 'rubocop'\ngem 'net-ssh', '2.9.2'\ngem 'sinatra'\ngem 'cucumber_statistics'\ngem 'activesupport', '4.2.5.2'\ngem 'headless', '2.2.3'\ngem 'colorize'\ngem 'parallel'\ngem 'parallel_tests'\n</code></pre>\n\n<p><strong>Gemfile (after Upgrade)</strong></p>\n\n<pre><code>source 'http://rubygems.org'\nruby '2.3.0'\n\ngem 'cucumber', '2.2.0'\ngem 'gherkin', '6.0.15'\ngem 'rspec-expectations', '3.8.2'\ngem 'rspec', '3.8.0'\ngem 'capybara', '3.15.0'\ngem 'selenium-webdriver', '3.141.0'\ngem 'cuporter', '0.3.14'\ngem 'nokogiri', '1.10.2'\ngem 'savon', '2.12.0'\ngem 'nori', '2.6.0'\ngem 'chronic', '0.10.2'\ngem 'json', '2.2.0'\ngem 'rest-client', '2.0.2'\ngem 'flog', '4.6.2'\ngem 'flay', '2.12.0'\ngem 'roodi', '5.0.0'\ngem 'require_all', '1.5.0'\ngem 'mongo', '2.8.0'\ngem 'bson_ext', '1.5.1'\ngem 'xml-simple', '1.1.5'\ngem 'roo', '2.8.2'\ngem \"zip-zip\", '0.3'\ngem 'rubyzip', '1.2.2'\ngem 'tiny_tds', '2.1.2'\ngem 'poltergeist', '1.18.1'\ngem 'addressable', '2.6.0'\ngem 'rack', '2.0.6'\ngem 'cuke_sniffer', '1.1.0'\ngem 'rubocop', '0.66.0'\ngem 'net-ssh', '5.2.0'\ngem 'sinatra', '2.0.5'\ngem 'cucumber_statistics', '2.3.0'\ngem 'activesupport', '5.2.2.1'\ngem 'headless', '2.3.1'\ngem 'colorize', '0.8.1'\ngem 'parallel', '1.16.0'\ngem 'parallel_tests', '2.28.0'\ngem 'geckodriver-helper', '0.23.0'\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby"], "owner": {"reputation": 41, "user_id": 10349662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6MXU.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/10349662/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1615242608, "creation_date": 1554285868, "question_id": 55492432, "link": "https://stackoverflow.com/questions/55492432/how-do-i-correctly-use-the-ruby-tk-module", "title": "How do I correctly use the Ruby Tk module?", "body": "<p>I'm currently trying to create a basic GUI application in Ruby using the Tk module. Whenever I attempt to <code>require</code> the module (as <code>tk</code> or <code>tcltklib</code>), I get the following <code>LoadError</code>:</p>\n\n<pre><code>LoadError (126: The specified module could not be found. - C:/Ruby25/lib/ruby/gems/2.5.0/gems/tk-0.2.0/lib/tcltklib.so)\n</code></pre>\n\n<hr>\n\n<p>Currently, I have:</p>\n\n<ul>\n<li>Installed Tcl (ActiveTcl) from the <a href=\"https://www.activestate.com/products/activetcl/downloads/\" rel=\"nofollow noreferrer\">ActiveState website</a>, specifically the <code>8.5.18.0</code> version for Windows (x86).</li>\n<li>Installed Ruby with <a href=\"https://rubyinstaller.org/\" rel=\"nofollow noreferrer\">RubyInstaller for Windows</a>, specifically <code>Ruby+Devkit 2.5.3-1 (x86)</code>. The MSYS2 development toolchain was also selected to be installed, and all 3 components were chosen during <code>ridk install</code>.</li>\n<li>Run <code>gem install tk</code>. The RubyInstaller changelog notes that, <a href=\"https://github.com/oneclick/rubyinstaller2/blob/master/CHANGELOG-2.4.md#removed-2\" rel=\"nofollow noreferrer\">as of version <code>2.4.1-1</code>, <code>tk</code> is no longer part of the standard library but can still be installed with <code>gem install tk</code></a>.</li>\n<li>Attempted to <code>require 'tk'</code> and <code>require 'tcltklib'</code> in IRB and received the error above.</li>\n</ul>\n\n<hr>\n\n<p>When running the following through IRB</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'tk'\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>Traceback (most recent call last):\n        8: from C:/Ruby25/bin/irb:11:in `&lt;main&gt;'\n        7: from (irb):3\n        6: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n        5: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `rescue in require'\n        4: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `require'\n        3: from C:/Ruby25/lib/ruby/gems/2.5.0/gems/tk-0.2.0/lib/tk.rb:7:in `&lt;top (required)&gt;'\n        2: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n        1: from C:/Ruby25/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nLoadError (126: The specified module could not be found.   - C:/Ruby25/lib/ruby/gems/2.5.0/gems/tk-0.2.0/lib/tcltklib.so)\n</code></pre>\n\n<p>The referenced file (<code>C:/Ruby25/lib/ruby/gems/2.5.0/gems/tk-0.2.0/lib/tcltklib.so</code>) does in fact exist though and this error seems different to the one output when requiring a non-existent module.</p>\n\n<hr>\n\n<p>There seems to be very little information on this specific error, in fact, the only related things I could find were 10 year old posts on the Ruby forum which didn't yield much information.</p>\n"}, {"tags": ["ruby", "mongodb", "class", "methods"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1554281425, "post_id": 55490384, "comment_id": 97689300, "body": "You might consider actually including a language tag as well as specifically mentioning which driver and version are in use when asking a question. Using mongoid I presume?"}, {"owner": {"reputation": 1499, "user_id": 3528013, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100000891083311/picture?type=large", "display_name": "Prateep Kul", "link": "https://stackoverflow.com/users/3528013/prateep-kul"}, "reply_to_user": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1554281976, "post_id": 55490384, "comment_id": 97689653, "body": "Yes. Rails 5.2.3, Ruby 2.5.0, Mongodb V3.6.2 Mac OSX"}, {"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1554282174, "post_id": 55490384, "comment_id": 97689776, "body": "So what does the mongoid documentation have to say about <a href=\"https://docs.mongodb.com/mongoid/master/tutorials/mongoid-documents/#inheritance\" rel=\"nofollow noreferrer\">inheritance</a> then? Please read the documentation and then ( if needed ) provide actual completed class samples and <a href=\"https://stackoverflow.com/help/mcve\">a small listing in order to reproduce the problem</a>. Please read that link too."}], "answers": [{"tags": [], "owner": {"reputation": 1499, "user_id": 3528013, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100000891083311/picture?type=large", "display_name": "Prateep Kul", "link": "https://stackoverflow.com/users/3528013/prateep-kul"}, "is_accepted": true, "score": 0, "last_activity_date": 1555160475, "last_edit_date": 1555160475, "creation_date": 1555131207, "answer_id": 55662140, "question_id": 55490384, "link": "https://stackoverflow.com/questions/55490384/how-to-run-method-of-inherited-class-in-mongodb/55662140#55662140", "title": "How to run method of inherited class in mongodb?", "body": "<p>I found ChildClass will work like BaseClass. The reason that not work in the beginning because  user_id was nil.</p>\n\n<p>The others issue is the way mongodb handle its subclass as internally as another type of data in it's BaseClass! even though we put namespace when created. What I surprised was the mongodb response namespace from rails is different by created another collection(table) as easily understand (and that what I first looking for) instead of hidden as another _type (field) that make me confused at first. So I like to note here for newbie. </p>\n\n<p><a href=\"https://i.stack.imgur.com/9kd45.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9kd45.png\" alt=\"enter image description here\"></a></p>\n\n<p>instead of something I expected below as another collection\n<a href=\"https://i.stack.imgur.com/x4Ptp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x4Ptp.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1499, "user_id": 3528013, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100000891083311/picture?type=large", "display_name": "Prateep Kul", "link": "https://stackoverflow.com/users/3528013/prateep-kul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55662140, "answer_count": 1, "score": 0, "last_activity_date": 1555160475, "creation_date": 1554279806, "last_edit_date": 1554281223, "question_id": 55490384, "link": "https://stackoverflow.com/questions/55490384/how-to-run-method-of-inherited-class-in-mongodb", "title": "How to run method of inherited class in mongodb?", "body": "<p>For example, I created ChildClass inherited from BaseClass below:</p>\n\n<pre><code>class BaseClass\n\nend\n</code></pre>\n\n<p>First child class</p>\n\n<pre><code>class ChildClass1 &lt; BaseClass\n\nend\n</code></pre>\n\n<p>Or another</p>\n\n<pre><code>class ChildClass2 &lt; BaseClass\n\nend\n</code></pre>\n\n<p>When worked with BaseClass\nIt work as normal.</p>\n\n<p>But when work with ChildClass 1 or 2,\nI cannot do childclass1.count or childclass1.first\nErrors as follow: (when working with child class after saved as show here)</p>\n\n<pre><code>[2] pry(#&lt;TodosController&gt;)&gt; @todo = \"Todo::TodoM#{$xvars[\"user_id\"].to_s}\".constantize.new\n=&gt; #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379 _id: 5ca45c5651d2f5988c2ef5fa, created_at: nil, updated_at: nil, user_id: nil, title: nil, completed: nil, due: nil, detail: nil, image: nil, member: nil, status: nil, _type: \"Todo::TodoM5ca1157c51d2f56bc4d5e379\"&gt;\n[3] pry(#&lt;TodosController&gt;)&gt; @todo = \"Todo::TodoM#{$xvars[\"user_id\"].to_s}\".constantize.new(\n[3] pry(#&lt;TodosController&gt;)*   title: $xvars[\"form_todo\"][\"title\"],\n[3] pry(#&lt;TodosController&gt;)* user_id: $xvars[\"user_id\"])\n=&gt; #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379 _id: 5ca45ca351d2f5988c2ef5fb, created_at: nil, updated_at: nil, user_id: BSON::ObjectId('5ca1157c51d2f56bc4d5e379'), title: \"sdfsdf\", completed: nil, due: nil, detail: nil, image: nil, member: nil, status: nil, _type: \"Todo::TodoM5ca1157c51d2f56bc4d5e379\"&gt;\n[4] pry(#&lt;TodosController&gt;)&gt; @todo.save!\nMONGODB | localhost:27017 | todo2_development.insert | STARTED | {\"insert\"=&gt;\"todos\", \"ordered\"=&gt;true, \"lsid\"=&gt;{\"id\"=&gt;&lt;BSON::Binary:0x70237914801960 type=uuid data=0x0c897c8df79a4052...&gt;}, \"documents\"=&gt;[{\"_id\"=&gt;BSON::ObjectId('5ca45ca351d2f5988c2ef5fb'), \"_type\"=&gt;\"Todo::TodoM5ca1157c51d2f56bc4d5e379\", \"title\"=&gt;\"sdfs...\nMONGODB | localhost:27017 | todo2_development.insert | SUCCEEDED | 0.006s\n=&gt; true\n[5] pry(#&lt;TodosController&gt;)&gt; @todo.first\nNoMethodError: undefined method `first' for #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379:0x00007fc31453c828&gt;\nfrom (pry):6:in `create'\n[6] pry(#&lt;TodosController&gt;)&gt; @todo\n=&gt; #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379 _id: 5ca45ca351d2f5988c2ef5fb, created_at: 2019-04-03 07:11:48 UTC, updated_at: 2019-04-03 07:11:48 UTC, user_id: BSON::ObjectId('5ca1157c51d2f56bc4d5e379'), title: \"sdfsdf\", completed: nil, due: nil, detail: nil, image: nil, member: nil, status: nil, _type: \"Todo::TodoM5ca1157c51d2f56bc4d5e379\"&gt;\n[7] pry(#&lt;TodosController&gt;)&gt; @todo.save!\n=&gt; true\n[8] pry(#&lt;TodosController&gt;)&gt; @todo.count\nNoMethodError: undefined method `count' for #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379:0x00007fc31453c828&gt;\nfrom (pry):9:in `create'\n[9] pry(#&lt;TodosController&gt;)&gt; @todo.first\nNoMethodError: undefined method `first' for #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379:0x00007fc31453c828&gt;\nfrom (pry):10:in `create'\n[10] pry(#&lt;TodosController&gt;)&gt; @todo.first\nNoMethodError: undefined method `first' for #&lt;Todo::TodoM5ca1157c51d2f56bc4d5e379:0x00007fc31453c828&gt;\nfrom (pry):11:in `create'\n[11] pry(#&lt;TodosController&gt;)&gt; @todo.class\n=&gt; Todo::TodoM5ca1157c51d2f56bc4d5e379\n</code></pre>\n\n<p>What did I do wrong? \n(Yes I see error from 'create' but it saved! as shown)</p>\n\n<pre><code>{\n  \"_id\": ObjectId(\"5ca45ca351d2f5988c2ef5fb\"),\n  \"_type\": \"Todo::TodoM5ca1157c51d2f56bc4d5e379\",\n  \"title\": \"sdfsdf\",\n  \"user_id\": ObjectId(\"5ca1157c51d2f56bc4d5e379\"),\n  \"updated_at\": new Date(1554275508224),\n  \"created_at\": new Date(1554275508224)\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1554286886, "post_id": 55490083, "comment_id": 97692698, "body": "Try using background job."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1554279146, "creation_date": 1554279146, "answer_id": 55490157, "question_id": 55490083, "link": "https://stackoverflow.com/questions/55490083/how-to-wait-in-rails-without-blocking-the-main-thread/55490157#55490157", "title": "How to wait in Rails without blocking the main thread?", "body": "<p>You don't need controller A to wait. Why? The payment processing may take from few seconds to a few hours. Do you expect the user to sit and watch the \"loading page\" spinner?</p>\n\n<p>Instead, you advance the process in the payment gateway callback controller (set status to \"paid\", email the user and start delivering the goods).</p>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 2749084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46e4b8bf4e4c760fc9a4f258303e668?s=128&d=identicon&r=PG", "display_name": "devpuppy", "link": "https://stackoverflow.com/users/2749084/devpuppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1554301510, "creation_date": 1554301510, "answer_id": 55497521, "question_id": 55490083, "link": "https://stackoverflow.com/questions/55490083/how-to-wait-in-rails-without-blocking-the-main-thread/55497521#55497521", "title": "How to wait in Rails without blocking the main thread?", "body": "<p>You can think of a running Rails app as a giant while loop: wait for requests, receive a request, process the requests, wait for next request. It sounds like your payment processor is designed to integrate nicely with this architecture by providing you the ability to specify the callback URL (aka your app exposing a webhook) in controller B. If you block that loop your app will stop responding to new requests.</p>\n\n<p>I understand your question is about how to update the user. Once the user has completed the payment, it's standard to redirect them to a page accessed by a GET request so that refreshing the browser doesn't resubmit their payment (probably a POST). Let's imagine that's a \"show order\" action which includes the status of payment as either \"pending\" or \"processed\". When the user first sees the page it would show status: pending. Later, after the payment processor hits the callback in controller B, if the user visits the same page or refreshes it in their browser, it should show status: processed.</p>\n\n<p>If you want the page to update on its own, you would generally do that with polling in javascript. You could expose a JSON response from the same action (or a new action that just returns the order payment status), then build a loop running in javascript in the browser that hits that action every few seconds to see if the status has changed, then end when it has. Consider using an exponential rolloff to update the status quickly in the common case where it happens moments later, but to avoid too many requests to your server if it takes minutes or hours.</p>\n"}], "owner": {"reputation": 163, "user_id": 10917833, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4-6smo98TRk/AAAAAAAAAAI/AAAAAAAAEiw/aJbtzxbLOGk/photo.jpg?sz=128", "display_name": "DJenuil", "link": "https://stackoverflow.com/users/10917833/djenuil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1554301510, "creation_date": 1554278912, "question_id": 55490083, "link": "https://stackoverflow.com/questions/55490083/how-to-wait-in-rails-without-blocking-the-main-thread", "title": "How to wait in Rails without blocking the main thread?", "body": "<p>I have a Rails application that I am developing such that when users complete a payment, they will be redirected to a view in, say, controller A. The payment API that I am using also wants us to implement a callback URL, which is serviced by an action in controller B (this will trigger the payment status to be set to 'paid' in the database when the payment gateway sends a POST request to the said URL). What I want to know is, how do I write a while loop for the redirection action in controller A, to check whether the payment status has been set to 'paid' without blocking the main thread? When I test my app, the server console indicated that a POST request is initiated but the main thread is blocked by the while loop while redirecting so my app ended up in infinite loop. I tried using Ruby Threads but I cannot seem to figure it out.</p>\n"}, {"tags": ["ruby", "macos", "vim", "rubocop"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1554264500, "post_id": 55486323, "comment_id": 97682412, "body": "Does it say that literally? Did you customize the path to the <code>.yml</code> file?"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1554264639, "post_id": 55486323, "comment_id": 97682440, "body": "like @tadman says, there is a rubocop.yml file. Where is it? You need to tell VIM where this yml file is."}, {"owner": {"reputation": 1699, "user_id": 3108946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EWWD.jpg?s=128&g=1", "display_name": "aerijman", "link": "https://stackoverflow.com/users/3108946/aerijman"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554295961, "post_id": 55486323, "comment_id": 97698405, "body": "@tadman where should I find rubocop.yml?"}, {"owner": {"reputation": 1699, "user_id": 3108946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EWWD.jpg?s=128&g=1", "display_name": "aerijman", "link": "https://stackoverflow.com/users/3108946/aerijman"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554317028, "post_id": 55486323, "comment_id": 97710721, "body": "@tadman I see, I learned that I should have a rubocop.yml in the same root path of the files that I am fixing.  PLEASE, correct me if I am wrong. Thank you!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1554317558, "post_id": 55486323, "comment_id": 97710988, "body": "You can have it per-project, or you can have it set for all projects by putting that in your home directory. It&#39;s really up to you. Normally having a <code>~&#47;.rubocop&#47;rubocop.yml</code> is a sensible default."}], "answers": [{"tags": [], "owner": {"reputation": 379, "user_id": 7473663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x93kx.png?s=128&g=1", "display_name": "siery", "link": "https://stackoverflow.com/users/7473663/siery"}, "is_accepted": true, "score": 4, "last_activity_date": 1554269827, "creation_date": 1554269827, "answer_id": 55487748, "question_id": 55486323, "link": "https://stackoverflow.com/questions/55486323/configuration-file-not-found-path-to-rubocop-yml/55487748#55487748", "title": "Configuration file not found: /path/to/rubocop.yml", "body": "<p>Since Vim8 it is more convenient to use the new \"package\" feature. This topic has been already covered over here:\n<a href=\"https://vi.stackexchange.com/questions/9522/what-is-the-vim8-package-feature-and-how-should-i-use-it\">vi.stackexchange.com/questions/9522/what-is-the-vim8-package-feature-and-how-should-i-use-it</a></p>\n\n<p><code>.rubocop.yml</code> is includet in the <code>Rubocop</code> public repository.</p>\n\n<pre><code>git clone git@github.com:rubocop-hq/rubocop.git\n</code></pre>\n"}], "owner": {"reputation": 1699, "user_id": 3108946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EWWD.jpg?s=128&g=1", "display_name": "aerijman", "link": "https://stackoverflow.com/users/3108946/aerijman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 1, "accepted_answer_id": 55487748, "answer_count": 1, "score": -1, "last_activity_date": 1554269827, "creation_date": 1554260031, "question_id": 55486323, "link": "https://stackoverflow.com/questions/55486323/configuration-file-not-found-path-to-rubocop-yml", "title": "Configuration file not found: /path/to/rubocop.yml", "body": "<p>I saved the file <a href=\"https://github.com/ngmy/vim-rubocop/blob/master/plugin/rubocop.vim\" rel=\"nofollow noreferrer\">rubocop.vim</a> in <code>~/.vim/plugin/</code>, and when I run <code>:Rubocop</code> in Vim I get </p>\n\n<blockquote>\n  <p>Configuration file not found: /path/to/rubocop.yml.</p>\n</blockquote>\n\n<p>I couldn't find the path to rubocop.yml. </p>\n\n<p>I am on MacOS Mojave.</p>\n\n<p>Thank you. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "comments": [{"owner": {"reputation": 807, "user_id": 2651076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3274dc805ba25f33023bee2a4d32d6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sinstein", "link": "https://stackoverflow.com/users/2651076/sinstein"}, "edited": false, "score": 0, "creation_date": 1554275566, "post_id": 55486256, "comment_id": 97686041, "body": "<code>Geocoder</code> does returns the <code>latitude</code> and <code>longitude</code> for given address. I am not sure if I understand the question."}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": false, "score": 0, "last_activity_date": 1554275944, "creation_date": 1554275944, "answer_id": 55489231, "question_id": 55486256, "link": "https://stackoverflow.com/questions/55486256/how-do-we-get-list-of-users-within-range-of-certain-city/55489231#55489231", "title": "How do we get list of users within range of certain city?", "body": "<p>As the <a href=\"https://github.com/alexreisner/geocoder#geocoding-objects\" rel=\"nofollow noreferrer\">geocoder docs</a> state, you can geocode your users easily.</p>\n\n<p>In your model:</p>\n\n<ul>\n<li>Add columns <code>latitude</code> and <code>longitude</code> to your model.</li>\n<li>Tell geocoder how the method to geocode: <code>geocoded_by :address</code></li>\n<li>Add the callback: <code>after_validation :geocode</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 11094356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36488439a836bc8c5969bdac74e8aa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragya Sriharsh", "link": "https://stackoverflow.com/users/11094356/pragya-sriharsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1554314564, "creation_date": 1554314564, "answer_id": 55501519, "question_id": 55486256, "link": "https://stackoverflow.com/questions/55486256/how-do-we-get-list-of-users-within-range-of-certain-city/55501519#55501519", "title": "How do we get list of users within range of certain city?", "body": "<p>As mentioned in your question that you have already field named 'city' in User table. </p>\n\n<p>(reference: <a href=\"https://github.com/alexreisner/geocoder#geocoding-objects\" rel=\"nofollow noreferrer\">https://github.com/alexreisner/geocoder#geocoding-objects</a>)</p>\n\n<p>Try this:</p>\n\n<pre><code>SpreeUser.near('Austin', 200, units: :km)      # users within 200 kms of Austin city\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 7397660, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/41bca4edee3203ddfa4ed21b501e1bbe?s=128&d=identicon&r=PG&f=1", "display_name": "Code father", "link": "https://stackoverflow.com/users/7397660/code-father"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554314564, "creation_date": 1554259569, "question_id": 55486256, "link": "https://stackoverflow.com/questions/55486256/how-do-we-get-list-of-users-within-range-of-certain-city", "title": "How do we get list of users within range of certain city?", "body": "<p>I have list of users with field city. How do we get list of users who are about 200km from certain city?</p>\n\n<p>I am using geocoder gem to find nearest location. However, how do we do it through city only without lat and lon present on the db for User?</p>\n\n<pre><code>user = User.last    \nuser.address = 'Sydney'\nlocation = Geocoder.search(user.address).first\nlat = location.latitude\nlon = location.longitude\n\nwithin_user = SpreeUser.near([lat, lon], 200, units: :km)\n</code></pre>\n\n<p>This will give the error because latitude and longitude does not exist for User. Is there a way it can be done through other field, like address in this case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "ransack", "solidus"], "comments": [{"owner": {"reputation": 741, "user_id": 7752594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gU6so.png?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7752594/vishal"}, "edited": false, "score": 0, "creation_date": 1554374738, "post_id": 55485975, "comment_id": 97732609, "body": "can you show sorting code?"}, {"owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "reply_to_user": {"reputation": 741, "user_id": 7752594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gU6so.png?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7752594/vishal"}, "edited": false, "score": 0, "creation_date": 1554406742, "post_id": 55485975, "comment_id": 97751652, "body": "@Vishal I believe it is just using SQL ordering. It took me some time to find the specific file, but <a href=\"https://github.com/activerecord-hackery/ransack/blob/v2.1.1/lib/ransack/adapters/active_record/context.rb#L35-L55\" rel=\"nofollow noreferrer\">see this code in the Ransack codebase.</a> Also, <a href=\"https://ransack-demo.herokuapp.com/users?_method=get%3D%3D&amp;q%5Bs%5D=id+desc\" rel=\"nofollow noreferrer\">see this page on the Ransack Demo site.</a> It shows the SQL query that is being used under the hood: <code>SELECT &quot;users&quot;.* FROM &quot;users&quot; ORDER BY &quot;users&quot;.&quot;id&quot; DESC </code>"}], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554256934, "creation_date": 1554256934, "question_id": 55485975, "link": "https://stackoverflow.com/questions/55485975/ransack-sort-link-stops-sorting-towards-end-of-listing", "title": "Ransack &#39;sort_link&#39; stops sorting towards end of listing", "body": "<p>I have a very strange issue with Ransack that I'm finding hard to pin down. I have a table in <a href=\"https://solidus.io/\" rel=\"nofollow noreferrer\">Solidus</a> which displays a product listing for an administrator to search through. This product listing can be sorted by several column names (namely, <code>sku</code>, <code>name</code>, and <code>price</code>). However, when I try to sort by the <code>sku</code> column, the listing becomes out of order within the last ~30 items of the listing (there are about 3,000 products listed in total). It seems that it stops sorting the <code>sku</code> names after a certain point, nearly at the end. This only happens when I sort by the <code>sku</code> column, not <code>name</code> or <code>price</code>.</p>\n\n<p>This is the code I'm using for these columns:</p>\n\n<pre><code>&lt;thead&gt;\n  &lt;tr data-hook=\"admin_products_index_headers\"&gt;\n    &lt;th&gt;&lt;%= sort_link @search, :sku, Spree::Product.human_attribute_name(:sku), { default_order: \"desc\" }, {title: 'admin_products_listing_sku_title'} %&gt;&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;&lt;%= sort_link @search, :name, Spree::Product.human_attribute_name(:name), { default_order: \"desc\" }, {title: 'admin_products_listing_name_title'} %&gt;&lt;/th&gt;\n    &lt;th class=\"align-right\"&gt;&lt;%= sort_link @search,:master_default_price_amount, Spree::Product.human_attribute_name(:price), {}, {title: 'admin_products_listing_price_title'} %&gt;&lt;/th&gt;\n    &lt;th data-hook=\"admin_products_index_header_actions\" class=\"actions\"&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n&lt;/thead&gt;\n</code></pre>\n\n<p>I really have no idea what about the <code>sku</code> column is causing the sorting to become incorrect after this certain point near the end. The <code>sku</code> strings look like this: <code>AB123456</code>. All of them start with the letters <code>AB</code> and then a unique integer which identifies the product. As far as I can tell, this should totally be something Ransack's <code>sort_link</code> can handle without trouble. But alas, here I am scratching my head...</p>\n"}, {"tags": ["ruby", "appium"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4077597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b32e5c009f599135036599e7da801f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/4077597/lucky"}, "is_accepted": false, "score": 0, "last_activity_date": 1554329252, "creation_date": 1554329252, "answer_id": 55505048, "question_id": 55485148, "link": "https://stackoverflow.com/questions/55485148/need-basic-setup-to-test-a-website-on-real-android-device-chrome-browser-using/55505048#55505048", "title": "need basic setup to test a website on real android device (chrome browser) using ruby appium framework", "body": "<p>was able to resolve the issue by doing the following -</p>\n\n<p>1) gem uninstall eventmachine\n2) gem install eventmachine --platform ruby</p>\n\n<p>Tried few other solutions but the only one which worked are the above 2 steps.</p>\n\n<p>Might help someone in the future</p>\n"}], "owner": {"reputation": 11, "user_id": 4077597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b32e5c009f599135036599e7da801f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/4077597/lucky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554329252, "creation_date": 1554249567, "question_id": 55485148, "link": "https://stackoverflow.com/questions/55485148/need-basic-setup-to-test-a-website-on-real-android-device-chrome-browser-using", "title": "need basic setup to test a website on real android device (chrome browser) using ruby appium framework", "body": "<p>I am trying to setup a basic framework with Cucumber, Appium and Ruby. I am getting errors when I run the basic script. I am testing web app on chrome browser for Android device. I can't figure out what's wrong with the setup. Appium Desktop for windows is running in the background\n(Appium v1.12.1)</p>\n\n<p>My env.rb</p>\n\n<pre><code>require \"appium_lib\"\n\ndef caps\n  {caps:\n       {\n    deviceName: \"Android_Device\",\n    platformName: \"Android\",\n    browserName: \"Chrome\",\n    newCommandTimeout: \"3600\"\n         }\n  }\nend\n\nAppium::Driver.new(caps, true)\nAppium.promote_appium_methods Object\n\n</code></pre>\n\n<p>My hooks.rb file</p>\n\n<pre><code>Before do\n  $driver.start_driver\nend\n\nAfter do\n  sleep 3\n  $driver.driver.quit\nend\n\n</code></pre>\n\n<p>My Step Definition file </p>\n\n<pre><code>Given(/^I log on to the site with the following:$/) do |table|\n  p \"it works\"\nend\n\n</code></pre>\n\n<p>My feature file</p>\n\n<pre><code>Given I log on to the site with the following:\n|site|\n|ABC|\n\n</code></pre>\n\n<p>I am expecting the feature/scenario to pass </p>\n\n<p>Actual Result-</p>\n\n<pre><code>C:\\Users\\Documents\\xyz\\abc (master)\n\u03bb cucumber features\\Simple_POC.feature --tags @run\nUnable to load the EventMachine C extension; To use the pure-ruby reactor, require 'em/pure_ruby'\nUnable to load the EventMachine C extension; To use the pure-ruby reactor, require 'em/pure_ruby'\ncannot load such file -- 2.5/rubyeventmachine (LoadError)\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x64-mingw32/lib/rubyeventmachine.rb:2:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `rescue in require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:39:in `require'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/eventmachine-1.2.7-x64-mingw32/lib/eventmachine.rb:8:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `rescue in require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:39:in `require'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/faye-websocket-0.10.7/lib/faye/websocket.rb:10:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib_core-3.0.4/lib/appium_lib_core/common/ws/websocket.rb:15:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib_core-3.0.4/lib/appium_lib_core/common.rb:21:in `require_relative'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib_core-3.0.4/lib/appium_lib_core/common.rb:21:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib_core-3.0.4/lib/appium_lib_core.rb:18:in `require_relative'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib_core-3.0.4/lib/appium_lib_core.rb:18:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib-10.2.0/lib/appium_lib/appium.rb:5:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib-10.2.0/lib/appium_lib.rb:10:in `require_relative'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/appium_lib-10.2.0/lib/appium_lib.rb:10:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:135:in `rescue in require'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:39:in `require'\nC:/Users/Documents/xyz/abc/features/support/env.rb:1:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/glue/registry_and_more.rb:107:in `load'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/glue/registry_and_more.rb:107:in `load_code_file'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:144:in `load_file'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:85:in `block in load_files!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:84:in `each'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:84:in `load_files!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:272:in `load_step_definitions'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:68:in `run!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/lib/cucumber/cli/main.rb:34:in `execute!'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/cucumber-3.1.2/bin/cucumber:9:in `&lt;top (required)&gt;'\nC:/Ruby25-x64/bin/cucumber:23:in `load'\nC:/Ruby25-x64/bin/cucumber:23:in `&lt;main&gt;'\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 2, "creation_date": 1554247654, "post_id": 55484687, "comment_id": 97679264, "body": "every time you render that partial, you&#39;re looping through <code>@head.children</code>, that&#39;s a never ending loop indeed."}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1554247689, "post_id": 55484687, "comment_id": 97679270, "body": "just change <code>@head</code> for <code>head</code>"}, {"owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1554248444, "post_id": 55484687, "comment_id": 97679436, "body": "Thanks, That was it."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1554248467, "creation_date": 1554248467, "answer_id": 55485003, "question_id": 55484687, "link": "https://stackoverflow.com/questions/55484687/recursively-rendering-the-same-partial-in-rails-crashes-the-app/55485003#55485003", "title": "Recursively rendering the same partial in rails crashes the app", "body": "<p>You want to render each branch, not the same <code>@head</code> over and over:</p>\n\n<pre><code>&lt;%= render(partial: \"branch\", object: @head) %&gt;\n</code></pre>\n\n<p>Then the partial looks like this:</p>\n\n<pre><code>&lt;%= branch.name %&gt;\n\n&lt;% branch.children.each do |child|%&gt;\n    &lt;%= render( partial: \"branch\", head: child)%&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The name of the partial is the name of the variable representing the content.</p>\n"}], "owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55485003, "answer_count": 1, "score": 0, "last_activity_date": 1554248467, "creation_date": 1554246099, "question_id": 55484687, "link": "https://stackoverflow.com/questions/55484687/recursively-rendering-the-same-partial-in-rails-crashes-the-app", "title": "Recursively rendering the same partial in rails crashes the app", "body": "<p>I am trying to render a tree of nodes by calling the same partial recursively every time with a different node. But some how, it keeps calling the partial with the root node for an infinite number of times until the app crashes.</p>\n\n<p>this is <code>index.html.erb</code></p>\n\n<pre><code>    &lt;%= render(partial: \"branch\", head: @head)%&gt;\n</code></pre>\n\n<p>And this is <code>_branch.html.erb</code></p>\n\n<pre><code>    &lt;%= @head.name%&gt;\n\n    &lt;%@head.children.each do |child|%&gt;\n        &lt;%= render( partial: \"branch\", head: child)%&gt;\n    &lt;%end%&gt;\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1554246463, "post_id": 55484675, "comment_id": 97679034, "body": "Your code does not do what your code example shows. You have a syntax error in <code>b [i]= c</code> and <code>a</code> does not equal the value you have listed. If you want help then you must make sure that the code example you provide in your question actually works the way you expect it to work."}, {"owner": {"reputation": 189, "user_id": 11302424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e18fa81b3c5ac7476afd3b42250fb9d?s=128&d=identicon&r=PG&f=1", "display_name": "Karen", "link": "https://stackoverflow.com/users/11302424/karen"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554246844, "post_id": 55484675, "comment_id": 97679110, "body": "It should work this way: a=b.each_index.select{|i| b[i]== c}"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1554246961, "post_id": 55484675, "comment_id": 97679133, "body": "That still doesn&#39;t make <code>a</code> equal what you say it does. And once you finally figure out what your code sample should <b>actually</b> be, you should edit your original post. Don&#39;t post it as a comment."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554274418, "post_id": 55484675, "comment_id": 97685520, "body": "What does the &quot;hash rocket&quot; <code>=&gt;</code> in your example indicate? A return value or the output? Because I cannot reproduce it. If <code>a</code> is <code>[2, 3]</code>, then <code>puts a</code> will <i>print</i> <code>2</code> and <code>3</code> on separate lines (without commas or brackets). And it will <i>return</i> <code>nil</code>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554274821, "post_id": 55484867, "comment_id": 97685704, "body": "You could also use <code>.map(&amp;:succ)</code> to map each element to its successor."}], "tags": [], "owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "is_accepted": false, "score": 3, "last_activity_date": 1554247585, "creation_date": 1554247585, "answer_id": 55484867, "question_id": 55484675, "link": "https://stackoverflow.com/questions/55484675/is-there-a-way-to-get-brackets-out-of-a-codes-output-i-would-like-to-print-the/55484867#55484867", "title": "Is there a way to get brackets out of a code&#39;s output? I would like to print the code out in a user-friendly way", "body": "<p>The easiest way to get the output you want would be to use the <a href=\"https://ruby-doc.org/core-2.6.2/Array.html#method-i-join\" rel=\"nofollow noreferrer\">Array#join</a> method</p>\n\n<p>i.e.</p>\n\n<pre><code>puts [2, 3].join(', ')\n# =&gt; 2, 3\n</code></pre>\n\n<p>If you then want the ordinal for each match instead of the index, the easiest would be to just map those to index + 1</p>\n\n<pre><code>[2, 3].map{ |i| i + 1 }\n# =&gt; [3, 4]\n</code></pre>\n\n<p>Altogether, your assignment and <code>puts</code> statement could then be written as</p>\n\n<pre><code>a = b.each_index.select{ |i| b[i] == c }.map{ |i| i + 1 }.join(', ')\nputs a\n\n=&gt; 3, 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554274672, "post_id": 55485357, "comment_id": 97685619, "body": "Calling <code>b.max</code> within the block will calculate the maximum value again for each element, although it doesn&#39;t change."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554278297, "post_id": 55485357, "comment_id": 97687492, "body": "@Stefan, yes,  to optimize speed it&#39;s better to calculate max value once. Before this block"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 2, "last_activity_date": 1554252443, "last_edit_date": 1554252443, "creation_date": 1554251578, "answer_id": 55485357, "question_id": 55484675, "link": "https://stackoverflow.com/questions/55484675/is-there-a-way-to-get-brackets-out-of-a-codes-output-i-would-like-to-print-the/55485357#55485357", "title": "Is there a way to get brackets out of a code&#39;s output? I would like to print the code out in a user-friendly way", "body": "<p>Using <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Array#map</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Enumerator.html#method-i-with_index\" rel=\"nofollow noreferrer\"><code>Enumerator#with_index</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Array#select</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-first\" rel=\"nofollow noreferrer\"><code>Array#first</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-max\" rel=\"nofollow noreferrer\"><code>Array#max</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-last\" rel=\"nofollow noreferrer\"><code>Array#last</code></a> and <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-join\" rel=\"nofollow noreferrer\"><code>Array#join</code></a></p>\n\n<pre><code>b = [2, 3, 4, 4]\n\nb.map.with_index(1).select { |a| a.first == b.max }.map(&amp;:last).join(\", \") # =&gt; \"3, 4\"\n</code></pre>\n\n<pre><code># Step 1\nb.map.with_index(1).to_a # =&gt; [[2, 1], [3, 2], [4, 3], [4, 4]]\n\n# Step 2\nb.map.with_index(1).select { |a| a.first == b.max } # =&gt; [[4, 3], [4, 4]]\n\n# Step 3\nb.map.with_index(1).select { |a| a.first == b.max }.map(&amp;:last) # =&gt; [3, 4]\n\n# Step 4\nb.map.with_index(1).select { |a| a.first == b.max }.map(&amp;:last).join(\", \") # =&gt; \"3, 4\"\n</code></pre>\n\n<p>You can use it as your own method</p>\n\n<pre><code>def max_elements_ids(ary)\n  ary.\n    map.\n    with_index(1).\n    select { |a| a.first == b.max }.\n    map(&amp;:last).\n    join(\", \")\nend\n\nputs max_elements_ids([2, 3, 4, 4]) # will print 3, 4\nputs max_elements_ids([2, 4, 3, 4, 4]) # will print 2, 4, 5\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 11302424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e18fa81b3c5ac7476afd3b42250fb9d?s=128&d=identicon&r=PG&f=1", "display_name": "Karen", "link": "https://stackoverflow.com/users/11302424/karen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1554273689, "creation_date": 1554245989, "last_edit_date": 1554273689, "question_id": 55484675, "link": "https://stackoverflow.com/questions/55484675/is-there-a-way-to-get-brackets-out-of-a-codes-output-i-would-like-to-print-the", "title": "Is there a way to get brackets out of a code&#39;s output? I would like to print the code out in a user-friendly way", "body": "<p>I was able to figure out how to get the indexes that have hold the max value in an array. </p>\n\n<p>Example:</p>\n\n<pre><code>b = [2, 3, 4, 4]\nc = [2, 3, 4, 4].max\na=b.each_index.select{|i| b[i]== c}\nputs a\n\n=&gt; [2, 3]\n</code></pre>\n\n<p>I don't want to get <code>[2, 3]</code>; I want to get rid of the brackets. Additionally, I want to add <code>1</code> to the indexes to get: <code>3, 4</code>. I don't want to start the count at 0.  </p>\n\n<p>Ideally, the output would read:</p>\n\n<pre><code>=&gt; 3, 4\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "automated-tests", "capybara"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554246527, "post_id": 55484666, "comment_id": 97679043, "body": "Be more specific. What is the <i>exact</i> expected output and what is the <i>exact</i> actual output?"}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554247188, "post_id": 55484666, "comment_id": 97679177, "body": "Hi, I would like to see all tags &lt;img alt=&quot;&quot;&gt; ..all of them, with my current code just some are being displayed."}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554248934, "post_id": 55484666, "comment_id": 97679542, "body": "for example, the following html is not being displayed:                                                                                                                              &lt;img src=&quot;<a href=\"https://www2.losango.com.br/assets/imagens/pws/banner-emprestimo.jpg\" rel=\"nofollow noreferrer\">www2.losango.com.br/assets/imagens/pws/banner-emprestim&zwnj;&#8203;o.jpg</a>&quot; alt=&quot;Empr&#233;stimo com taxa a partir de 3.99% a.m&quot;&gt;"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554249725, "post_id": 55484666, "comment_id": 97679707, "body": "The word <i>exact</i> means that you should include in your post the output of your test when you run it and then show line by line what is missing from the output that you expect to find. Don\u2019t make people write an app and include a test and run the test to see what output <i>we</i> get just so we can <i>guess</i> what output you are getting, and don\u2019t make us <i>guess</i> at what you expect us to see."}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554250684, "post_id": 55484666, "comment_id": 97679868, "body": "got it, sorry @anothermh, Im new here :) .. I&#39;ll edit it.. thank you"}, {"owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1554251019, "post_id": 55484666, "comment_id": 97679920, "body": "Question updated ;)"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1554305395, "creation_date": 1554305395, "answer_id": 55498911, "question_id": 55484666, "link": "https://stackoverflow.com/questions/55484666/capybara-ruby-trying-to-return-all-tags-and-html-attributes/55498911#55498911", "title": "Capybara / Ruby - Trying to return all tags and html attributes", "body": "<p>By default Capybara only finds elements that are visible on the page. The element you're specifically asking about isn't being returned because it's not visible on the page.  If you want to get all the matching elements (visible and non-visible) you can tell <code>all</code> to ignore visibility checking by changing to </p>\n\n<pre><code>html = page.all('img', visible: false).map { |img| img['alt'] }\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 55498911, "answer_count": 1, "score": 1, "last_activity_date": 1554305395, "creation_date": 1554245921, "last_edit_date": 1554250981, "question_id": 55484666, "link": "https://stackoverflow.com/questions/55484666/capybara-ruby-trying-to-return-all-tags-and-html-attributes", "title": "Capybara / Ruby - Trying to return all tags and html attributes", "body": "<p>Trying to return all  tags with all  attribute values, however just some of them is being returned.</p>\n\n<pre><code>describe 'Html', :html do\n  before(:each) do\n    visit 'https://www2.losango.com.br/'\n  end\n\n  it 'Html' do\n    html = page.all('img').map { |img| img['alt'] }\n    print html\n  end\nend\n</code></pre>\n\n<p>When I open the url \"<a href=\"https://www2.losango.com.br/\" rel=\"nofollow noreferrer\">https://www2.losango.com.br/</a>\" I will find lots of img alt=\"\", however when I run it I got the result:</p>\n\n<pre><code>Losango - Conte com a gente\nLosango - Conte com a gente\nEmpr\u00e9stimo Pessoal Losango\nCredi\u00e1rio Losango\nSeguros Losango\nSeguros Losango\nSimulador de Cr\u00e9dito ideal\nCart\u00e3o de Cr\u00e9dito Losango\nLosango - Conte com a gente\n</code></pre>\n\n<p>The following - img alt=\"Empr\u00e9stimo com taxa a partir de 3.99% a.m\" - is not being returned. Here is the HTML code:</p>\n\n<pre><code>&lt;div class=\"banner__img\"&gt;\n          &lt;figure&gt;\n            &lt;img src=\"https://www2.losango.com.br/assets/imagens/pws/banner-emprestimo.jpg\" alt=\"Empr\u00e9stimo com taxa a partir de 3.99% a.m\"&gt;\n          &lt;/figure&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "automated-tests", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 3897481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUnIT.png?s=128&g=1", "display_name": "Joel K", "link": "https://stackoverflow.com/users/3897481/joel-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1554288321, "last_edit_date": 1554288321, "creation_date": 1554287558, "answer_id": 55493018, "question_id": 55484210, "link": "https://stackoverflow.com/questions/55484210/capybara-ruby-trying-to-return-to-the-beginning-of-the-loop-when-an-error-sh/55493018#55493018", "title": "Capybara / Ruby - Trying to return to the beginning of the loop when an error shows up", "body": "<p>I don't think there is a direct way to move back to the initial iteration of a loop. <code>redo</code> exists but it only moves you back to the current iteration.</p>\n\n<p>In this case, you probably want to change the way you're looping so you can more easily control when to start/stop. For example:</p>\n\n<pre><code>i = 0\n\nwhile i &lt;= 100 do\n  if page.has_no_css?('#mensagem &gt; h1')\n    i = 0\n    puts 'Error'\n    next\n  end\n\n  i += 1\nend\n</code></pre>\n\n<p>So you don't have to reset the loop index and call <code>puts</code> each time you could rescue an error:</p>\n\n<pre><code>class MyError &lt; StandardError; end\ni = 0\n\nwhile i &lt;= 100 do\n  begin\n    if page.has_no_css?('#mensagem &gt; h1')\n      raise MyError, 'thing was missing'\n    end\n\n    puts i\n    i += 1\n  rescue MyError =&gt; boom\n    puts \"Error: #{boom.message}\"\n    i = 0\n    redo\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 11159536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b835cc5eaaca8bcd7d3e8beaa6bedd?s=128&d=identicon&r=PG&f=1", "display_name": "drkvader", "link": "https://stackoverflow.com/users/11159536/drkvader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55493018, "answer_count": 1, "score": 0, "last_activity_date": 1554288321, "creation_date": 1554242667, "last_edit_date": 1554246455, "question_id": 55484210, "link": "https://stackoverflow.com/questions/55484210/capybara-ruby-trying-to-return-to-the-beginning-of-the-loop-when-an-error-sh", "title": "Capybara / Ruby - Trying to return to the beginning of the loop when an error shows up", "body": "<p>I'm trying to return to the loop beginnig when an error shows up as the code below.</p>\n\n<p>I'm using the command \"next\" when a casual error occurs but it is not coming back for the loop beginning.</p>\n\n<pre><code>describe 'Test', :test do\n\nbefore(:each) do\n    visit '/admin'\nend\n\n\nit 'Adding new images' do\n\n    image = 'barcelona.jpg'\n\n    @imagem = Dir.pwd + '/spec/fixtures/' + image\n\n    produto = '1'\n\n    100.times do\n\n        visit '/admin/' + produto\n\n        if page.has_no_css?('#mensagem &gt; h1')\n\n                within_frame(:xpath, \"//*[@id='app-content']/main/div/iframe\") do\n\n                    find('#ctl00_Conteudo_tbxNome_txtId').set 'test_name'\n                    find('#ctl00_Conteudo_BtnSalvar').click\n\n                    if page.has_no_css?('#mensagem &gt; h1')\n\n                        find('#ctl00_Conteudo_tbxIdArquivoControle_lnkInserirArquivo').click\n\n                        attach_file('ctl00_Conteudo_tbxIdArquivoControle_tbxArquivo', @imagem) \n                        find('#ctl00_Conteudo_tbxIdArquivoControle_btnEnviar').click\n\n                        if page.has_no_css?('#mensagem &gt; h1')\n\n                            find('#skuTabNavigation a[href=\"#tabImages\"]').click\n                            expect(page).to have_content image\n\n                            puts 'Test ok'\n\n                        else\n                            puts 'Error was presented, starting over..'\n                            next\n                        end\n\n                    else\n                        puts 'Error was presented, starting over..'\n                        next\n                    end\n                end\n        else\n            puts 'Error was presented, starting over..'\n            next\n        end\n    end\nend\nend\n</code></pre>\n\n<p>I would like that every time when the system goes to \"else\" condition, it restart the loop.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 3, "last_activity_date": 1554241100, "creation_date": 1554241100, "answer_id": 55483934, "question_id": 55483753, "link": "https://stackoverflow.com/questions/55483753/rails-activerecord-how-do-i-write-a-condition-one-or-both-are-not-true/55483934#55483934", "title": "Rails + ActiveRecord: How do I write a condition &quot;one or both are not true&quot;?", "body": "<p>According to your example, it is enough to fulfill at least one condition.</p>\n\n<pre><code>Listing.where(seller_currency: 0).or(Listing.where(bidder_currency: 0))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 2258745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d12a4a77c3e3411d7a5bf97a86365881?s=128&d=identicon&r=PG", "display_name": "stevo999999", "link": "https://stackoverflow.com/users/2258745/stevo999999"}, "is_accepted": false, "score": 0, "last_activity_date": 1554245812, "creation_date": 1554245812, "answer_id": 55484652, "question_id": 55483753, "link": "https://stackoverflow.com/questions/55483753/rails-activerecord-how-do-i-write-a-condition-one-or-both-are-not-true/55484652#55484652", "title": "Rails + ActiveRecord: How do I write a condition &quot;one or both are not true&quot;?", "body": "<p>You only need one or condition and it covers the case where they are both 0. This way is preferable because it is a quicker query since it evaluates both columns at the same time.\nAlso, in case you wanted to use variables, the question mark stops sql injection.</p>\n\n<p><code>Listing.where(\"(seller_currency=?) OR (bidder_currency=?)\",0,0)</code></p>\n"}], "owner": {"reputation": 307, "user_id": 2932090, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b678c303685811858adcf532cbccf7a?s=128&d=identicon&r=PG&f=1", "display_name": "user2932090", "link": "https://stackoverflow.com/users/2932090/user2932090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554245812, "creation_date": 1554240152, "question_id": 55483753, "link": "https://stackoverflow.com/questions/55483753/rails-activerecord-how-do-i-write-a-condition-one-or-both-are-not-true", "title": "Rails + ActiveRecord: How do I write a condition &quot;one or both are not true&quot;?", "body": "<p>In my model <code>Listing</code>, among other columns I have these two:</p>\n\n<pre><code>- seller_currency\n- bidder_currency\n</code></pre>\n\n<p>The value of <code>listings.seller_currency</code> and <code>listings.bidder_currency</code> can be either <code>1</code> (USD) or <code>0</code> (EUR).</p>\n\n<p>I am trying to get all listings, where <code>seller_currency</code> and <code>bidder_currency</code> is <code>0</code> (EUR) or at least one of them is <code>0</code> (EUR).</p>\n\n<p>Is there a better way to write the condition than this?</p>\n\n<pre><code>Listing.where('(seller_currency=0) OR (bidder_currency=0) OR (seller_currency=0 AND bidder_currency=0)')\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1554236864, "creation_date": 1554236864, "answer_id": 55483069, "question_id": 55483009, "link": "https://stackoverflow.com/questions/55483009/how-to-create-a-class-instance-and-store-it-as-class-constant/55483069#55483069", "title": "How to create a class instance and store it as class constant", "body": "<blockquote>\n  <p>but I get some strange results: 'initialize': wrong number of arguments (given 1, expected 0) (ArgumentError) </p>\n</blockquote>\n\n<p>Your one-argument initialize method is not yet defined at this point. But there is a default one, which doesn't take any arguments. Hence the error.</p>\n\n<p>Move that constant after the method (and also all other methods your initializer might call).</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1554282381, "post_id": 55483679, "comment_id": 97689902, "body": "Ah, but this way you&#39;ll get constant reassignment warnings on each subsequent instantiation."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1554311680, "post_id": 55483679, "comment_id": 97708094, "body": "@Sergio. That can be dealt with be including &quot;-W&quot; or &quot;-W0&quot; on the command line. Another suggestion was given <a href=\"https://www.ruby-forum.com/t/how-to-ignore-warning/116918\" rel=\"nofollow noreferrer\">here</a>: &quot;Close your eyes and tap your heels thrice&quot; (source: Wizard of Oz &lt;sic&gt;). I suspect the best option is refactoring."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1554239700, "creation_date": 1554239700, "answer_id": 55483679, "question_id": 55483009, "link": "https://stackoverflow.com/questions/55483009/how-to-create-a-class-instance-and-store-it-as-class-constant/55483679#55483679", "title": "How to create a class instance and store it as class constant", "body": "<p>You say you wish to, \"instantiate a class and store the instance within the same class as constant\". I interpreted that as, \"instantiate a class and store the <em>same</em> instance within the class as a constant\". That also seems to be consistent with the question's title.</p>\n\n<p>You can do that as follows.</p>\n\n<pre><code>class MyClass\n  def initialize(arg)\n    puts(arg)\n    self.class.const_set(:DEFAULT, self)\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>MyClass.new('hi')\nhi\n  #=&gt; #&lt;MyClass:0x00005c3edb328a40&gt; \n\nMyClass.constants\n  #=&gt; [:DEFAULT]\n\nMyClass::DEFAULT\n  #=&gt; #&lt;MyClass:0x00005c3edb328a40&gt; \n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 1503313, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/bfd5d6008efb2131722fe49c0c244f9e?s=128&d=identicon&r=PG&f=1", "display_name": "witchi", "link": "https://stackoverflow.com/users/1503313/witchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 55483069, "answer_count": 2, "score": 0, "last_activity_date": 1554239700, "creation_date": 1554236625, "question_id": 55483009, "link": "https://stackoverflow.com/questions/55483009/how-to-create-a-class-instance-and-store-it-as-class-constant", "title": "How to create a class instance and store it as class constant", "body": "<p>Is it possible with Ruby to instantiate a class and store the instance within the same class as constant?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class MyClass\n\n   DEFAULT = MyClass.new(\"haha\")\n\n   def initialize(arg)\n      puts(arg)\n   end\nend\n\n# use it\ninstance1 = MyClass::DEFAULT\ninstance2 = MyClass.new(\"hohoho\")\n</code></pre>\n\n<p>I tried this, but I get some strange results: 'initialize': wrong number of arguments (given 1, expected 0) (ArgumentError) at the line of the DEFAULT declaration.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554249113, "post_id": 55482996, "comment_id": 97679577, "body": "Note: Ruby is a case-sensitive language and capital letters have specific meaning in terms of syntax. Variables and method names should be lower-case letters. Capitals indicate constants of the form  <code>ClassName</code> or <code>CONSTANT_NAME</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1554237222, "post_id": 55483040, "comment_id": 97675934, "body": "I see, so my original class was setting <code>@accountNumber</code>  to 5 every time i called the <code>accountNumber</code> method. Thanks for the insight."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1554240837, "post_id": 55483040, "comment_id": 97677395, "body": "The answer you link in your last sentence was written in 2010 and to date has 2,177 upvotes. It&#39;s a perfectly fine answer, but I shake my head when I see mundane, stone-age questions whose answers have received thousands of upvotes. Ah, to have lived in the days of the low-hanging fruit!"}], "tags": [], "owner": {"reputation": 3228, "user_id": 220529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9e51b8453c9de386bd29d87890affcb1?s=128&d=identicon&r=PG", "display_name": "tsm", "link": "https://stackoverflow.com/users/220529/tsm"}, "is_accepted": true, "score": 4, "last_activity_date": 1554236771, "creation_date": 1554236771, "answer_id": 55483040, "question_id": 55482996, "link": "https://stackoverflow.com/questions/55482996/persistent-value-of-instance-variable/55483040#55483040", "title": "Persistent value of instance variable", "body": "<p>When you call <code>account.accountNumber</code>, it calls the <code>accountNumber</code> <em>method</em>, which you defined as:</p>\n\n<pre><code>def accountNumber                                                   \n  @accountNumber=5                                                \nend                                                                 \n</code></pre>\n\n<p>There are a couple ways to fix this, a simple one is:</p>\n\n<pre><code>class BankAccount\n  attr_accessor :account_number\n\n  def initialize(account_number=5)\n    @account_number = account_number\n  end\nend\n</code></pre>\n\n<p>Which works great:</p>\n\n<pre><code>irb(main):009:0&gt; x = BankAccount.new\n=&gt; #&lt;BankAccount:0x00007fae449c5fc8 @account_number=5&gt;\nirb(main):010:0&gt; x.account_number = 10\n=&gt; 10\nirb(main):011:0&gt; y = BankAccount.new\n=&gt; #&lt;BankAccount:0x00007fae4495fed0 @account_number=5&gt;\nirb(main):012:0&gt; y.account_number\n=&gt; 5\nirb(main):013:0&gt; z = BankAccount.new\n=&gt; #&lt;BankAccount:0x00007fae480066a0 @account_number=5&gt;\nirb(main):015:0&gt; z.account_number = 15\n=&gt; 15\nirb(main):016:0&gt; z.account_number\n=&gt; 15\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/4371458/220529\">Here</a>'s a SO answer diving into how <code>attr_accessor</code> works.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554241363, "post_id": 55483243, "comment_id": 97677602, "body": "I assume you would only do this if you might want to call <code>set_default_value</code> sometime after creating the instance (if you wanted to reset its value to <code>5</code>). Right? (Else you could just write <code>@number = 5</code> in <code>initialize</code>)."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554242922, "post_id": 55483243, "comment_id": 97678092, "body": "@CarySwoveland, I&#39;ve updated my answer with  &quot;constant idea&quot;"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 2, "last_activity_date": 1554242821, "last_edit_date": 1554242821, "creation_date": 1554237685, "answer_id": 55483243, "question_id": 55482996, "link": "https://stackoverflow.com/questions/55482996/persistent-value-of-instance-variable/55483243#55483243", "title": "Persistent value of instance variable", "body": "<p>When you call <code>account.accountNumber</code> you every time assign <code>@accountNumber</code> as <code>5</code> because of your method.</p>\n\n<p>To avoid this you can do it like this:</p>\n\n<pre><code>class BankAccount\n  DEFAULT_NUMBER = 5\n  DEFAULT_AMOUNT = 10\n\n  attr_accessor :number, :amount\n\n  def initialize\n    set_default_values\n  end\n\n  def set_default_values\n    @number = DEFAULT_NUMBER\n    @amount = DEFAULT_AMOUNT\n  end\nend\n</code></pre>\n\n<p>And now you can assign values as you like</p>\n\n<pre><code>account = BankAccount.new # =&gt; #&lt;BankAccount:0x000055d581adbd38 @number=5 @amount=10&gt;\n\naccount.number = 500\naccount.number # =&gt; 500\n\naccount.amount = 20\naccount.amount # =&gt; 20\n\naccount.amount = BankAccount::DEFAULT_AMOUNT\naccount.amount # =&gt; 10\n\naccount.set_default_values\naccount # =&gt; #&lt;BankAccount:0x000055d581adbd38 @number=5 @amount=10&gt;\n</code></pre>\n"}], "owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 55483040, "answer_count": 2, "score": 0, "last_activity_date": 1554242821, "creation_date": 1554236566, "question_id": 55482996, "link": "https://stackoverflow.com/questions/55482996/persistent-value-of-instance-variable", "title": "Persistent value of instance variable", "body": "<p>I've created the following class</p>\n\n<pre><code>class BankAccount                                                       \n  def accountNumber                                                   \n    @accountNumber=5                                                \n  end                                                                 \n  def accountNumber=(value)                                           \n    @accountNumber=value                                            \n  end                                                                 \nend    \n</code></pre>\n\n<p>and I use it like this:</p>\n\n<pre><code>account=BankAccount.new\n=&gt; #&lt;BankAccount:0x0000000295d6c8&gt;\naccount.accountNumber\n=&gt; 5\naccount.accountNumber=\"223\"\n=&gt; 223\naccount.accountNumber\n=&gt; 5\n</code></pre>\n\n<p>why is <code>accountNumber</code> equal to <code>5</code> even after setting it to <code>223</code>?</p>\n"}, {"tags": ["javascript", "html", "ruby", "capybara"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1554236156, "post_id": 55482869, "comment_id": 97675470, "body": "You need to use <code>.js-vehicle-section-next</code>, it&#39;s a class"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1554305759, "last_edit_date": 1554305759, "creation_date": 1554236920, "answer_id": 55483084, "question_id": 55482869, "link": "https://stackoverflow.com/questions/55482869/using-capybara-to-select-a-button-without-an-id-or-value/55483084#55483084", "title": "Using capybara to select a button without an id or value", "body": "<p><code>click_on</code> clicks link or button elements so it\u2019s not going to work here because you are trying to click a <code>div</code>. Instead you can just use a valid CSS selector and call <code>click</code> on the returned element</p>\n\n<pre><code>find(\u2018.button.js-vehicle-section-next\u2019).click\n</code></pre>\n\n<p>If you didn't have a specific class for the next \"button\" and you needed to do it by the contained text you could do</p>\n\n<pre><code>find('div.button', exact_text: 'Next Step: Select a Repair').click\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7487360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28649b6af139729c61aa4a174778777?s=128&d=identicon&r=PG&f=1", "display_name": "ToedStorm", "link": "https://stackoverflow.com/users/7487360/toedstorm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 55483084, "answer_count": 1, "score": 0, "last_activity_date": 1554305759, "creation_date": 1554235994, "question_id": 55482869, "link": "https://stackoverflow.com/questions/55482869/using-capybara-to-select-a-button-without-an-id-or-value", "title": "Using capybara to select a button without an id or value", "body": "<p>I don't know how to click on a button that has no id or value.</p>\n\n<p>I've already tried using the xpath and selector paths but neither worked for me.</p>\n\n<pre><code>&lt;div class=\"button js-vehicle-section-next full-width mb1\"&gt;Next Step: Select a Repair&lt;/div&gt;\n</code></pre>\n\n<p>Is the code for the button on the site. My current attempts are.</p>\n\n<pre><code>find('js-vehicle-section-next').click\nclick_on('js-vehicle-section-next')\nfind_all(:xpath, \"//*[normalize-space(text())='Next Step: Select a Repair'\").first.click\n</code></pre>\n\n<p>The expected result is that the button will be clicked</p>\n"}, {"tags": ["ruby", "rest-client", "httparty"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554237209, "post_id": 55482658, "comment_id": 97675930, "body": "Try passing <code>payload</code> without converting it to <code>JSON</code> first"}, {"owner": {"reputation": 1, "user_id": 10984639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtjhOLgYjF4/AAAAAAAAAAI/AAAAAAAABwE/LdHcxjiOhyQ/photo.jpg?sz=128", "display_name": "Henrique Franco", "link": "https://stackoverflow.com/users/10984639/henrique-franco"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554299794, "post_id": 55482658, "comment_id": 97700881, "body": "I just tried and nothing has changed."}], "owner": {"reputation": 1, "user_id": 10984639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WtjhOLgYjF4/AAAAAAAAAAI/AAAAAAAABwE/LdHcxjiOhyQ/photo.jpg?sz=128", "display_name": "Henrique Franco", "link": "https://stackoverflow.com/users/10984639/henrique-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554235199, "creation_date": 1554235199, "question_id": 55482658, "link": "https://stackoverflow.com/questions/55482658/trouble-to-make-a-request-with-httparty", "title": "Trouble to make a request with httparty", "body": "<p>I'm using rest-client to make some request in a API, inside my automation scenarios with cucumber.</p>\n\n<p>I'm trying to change the gem to Httparty but I can not do it.</p>\n\n<pre><code>url_login = \"https://mu.com/login\"\n\nheader = {'Content-Type': 'application/json'}\n\npayload =\n{\n    \"username\": \"cpd141\",\n    \"password\": \"****\",\n    \"agentSign\": \"ASS\"\n}.to_json\n</code></pre>\n\n<p>rest-client gem</p>\n\n<pre><code>response = RestClient::Request.execute(method: :post, url: url_login, payload: payload, headers: header)\n\nresponse - &lt;RestClient::Response 200 \"{\\\"id\\\":\\\"1436...\"&gt;\n</code></pre>\n\n<p>httparty gem</p>\n\n<pre><code>response = HTTParty.post(url_login,headers: header, body: payload)\n\nresponse = {\"errorMessage\"=&gt;\"RequestId: 04377c34-709b-41f3-a379-65615fca2681 Process exited before completing request\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gemfile"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1554233918, "post_id": 55482278, "comment_id": 97674494, "body": "Other gems are keeping it an older version, just comment out all the version numbers and run <code>bundle install</code> again."}], "answers": [{"comments": [{"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1554237770, "post_id": 55482472, "comment_id": 97676174, "body": "thanks, I see it seems maybe activesupport may have the same or similar version numbering to rails. Is there a list of all gems that are part of rails? (that&#39;s help me to have determined this myself)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1554267171, "post_id": 55482472, "comment_id": 97683039, "body": "Yes, you can always see the list of dependencies of a gem on its <a href=\"https://rubygems.org/gems/rails\" rel=\"nofollow noreferrer\">Rubygems</a> page."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1554295891, "last_edit_date": 1554295891, "creation_date": 1554234407, "answer_id": 55482472, "question_id": 55482278, "link": "https://stackoverflow.com/questions/55482278/what-is-keeping-this-rails-project-at-an-old-rails-version-or-how-can-i-find-ou/55482472#55482472", "title": "What is keeping this rails project at an old rails version (or how can I find out what is keeping it at an old rails version)?", "body": "<p>Have a look at the project's <a href=\"https://github.com/mhartl/action_cable_chat_app/blob/master/Gemfile.lock#L78\" rel=\"nofollow noreferrer\"><code>Gemfile.lock</code></a> at line 78:</p>\n\n<pre><code>jbuilder (2.4.1)\n  activesupport (&gt;= 3.0.0, &lt; 5.1)\n  multi_json (~&gt; 1.2)\n</code></pre>\n\n<p>The <code>2.4.1</code> version of the <a href=\"https://rubygems.org/gems/jbuilder/versions/2.4.1\" rel=\"nofollow noreferrer\"><code>jbuilder</code></a> gem is depending on an <code>activesupport</code> (which is part of Rails) version <code>&lt; 5.1</code>. You would need to update at least to <a href=\"https://rubygems.org/gems/jbuilder/versions/2.6.3\" rel=\"nofollow noreferrer\"><code>jbuilder:2.6.3</code></a> to allow updating Rails to <code>5.1</code>. <a href=\"https://rubygems.org/gems/jbuilder/versions/2.6.4\" rel=\"nofollow noreferrer\"><code>jbuilder:2.6.4</code></a> finally relaxes the dependency to just <code>activesupport &gt;= 3.0.0</code> which would even allow current Rails 6.0beta versions.</p>\n\n<p><strong>Added by barlop</strong></p>\n\n<p>answerer mentions in comment, see <a href=\"https://rubygems.org/gems/rails\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/rails</a>  for dependencies of a gem</p>\n\n<p>(and it includes versions, so, what versions of rails are dependent on what version of dependent gem)</p>\n"}], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 55482472, "answer_count": 1, "score": 0, "last_activity_date": 1554295891, "creation_date": 1554233634, "question_id": 55482278, "link": "https://stackoverflow.com/questions/55482278/what-is-keeping-this-rails-project-at-an-old-rails-version-or-how-can-i-find-ou", "title": "What is keeping this rails project at an old rails version (or how can I find out what is keeping it at an old rails version)?", "body": "<p>What is keeping this rails project at an old rails version (or how can I find out what is keeping it at an old rails version)?</p>\n\n<p>I am looking at </p>\n\n<p><a href=\"https://github.com/mhartl/action_cable_chat_app\" rel=\"nofollow noreferrer\">https://github.com/mhartl/action_cable_chat_app</a></p>\n\n<p>I cloned it, or forked and cloned it.</p>\n\n<p>Granted, he has this in his Gemfile</p>\n\n<pre><code>gem 'rails',                   '5.0.1'\n</code></pre>\n\n<p>But I changed it to </p>\n\n<pre><code>gem 'rails'\n</code></pre>\n\n<p>and I did <code>bundle install</code> or <code>bundle update</code> or <code>bundle update rails</code></p>\n\n<p>and it went from the very old version(5.0.1), to <code>rails 5.0.7.2</code> which is still old.</p>\n\n<p>If I <code>cd ..</code> then I see my global rails version, that's a recent version. <code>rails 5.2.3</code></p>\n\n<p>I can guess that maybe there is some gems in his Gemfile that require an early rails version and that is what is holding it back. But I can't verify that and if it were I don't know which.</p>\n\n<p>I tried looking at Gemfile.lock and it says <code>rails (5.0.7.2)</code> So I tried <code>rm Gemfile.lock</code> then bundle update rails, and still, <code>rails 5.0.7.2</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1554233272, "post_id": 55482029, "comment_id": 97674222, "body": "Closest thing I found in docs is <code>hash.assoc(:some_long_key)&amp;.first</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554233465, "post_id": 55482029, "comment_id": 97674291, "body": "If it is known that <code>h[k]</code> is not <code>nil</code> if <code>h</code> has a key <code>k</code>, you could write <code>h[k] &amp;&amp; k</code>, but I suspect that&#39;s not what you are after."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1554234124, "post_id": 55482029, "comment_id": 97674581, "body": "What is wrong with <code>key if hash.key?(key)</code>? That is short, readable and easy to understand. I cannot imagine how to name for a method that does the same and its name is that short, readable and easy to understand."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1554234863, "post_id": 55482029, "comment_id": 97674903, "body": "@spickermann, the question is not clear but the OP may want to avoid an <code>if</code> construct."}, {"owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554295746, "post_id": 55482029, "comment_id": 97698258, "body": "Yeah @CarySwoveland, Stefan&#39;s answer should be the accepted one but I don&#39;t know why mine&#39;s was that controversial (monkey-patching?) :p"}], "answers": [{"comments": [{"owner": {"reputation": 15236, "user_id": 1388017, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Z2KPU.png?s=128&g=1", "display_name": "dezman", "link": "https://stackoverflow.com/users/1388017/dezman"}, "edited": false, "score": 0, "creation_date": 1554236776, "post_id": 55482537, "comment_id": 97675732, "body": "Maybe just change your answer to say if you really really want to you can monkey patch the hash class? But the correct answer is the no there is no method for that, thanks! Sorry for the downvotes?"}, {"owner": {"reputation": 15236, "user_id": 1388017, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Z2KPU.png?s=128&g=1", "display_name": "dezman", "link": "https://stackoverflow.com/users/1388017/dezman"}, "edited": false, "score": 2, "creation_date": 1554236918, "post_id": 55482537, "comment_id": 97675798, "body": "Sagar Pandyas comment may actually be the best answer... <code>hash.assoc(:some_long_key)&amp;.first</code> but its not super readable."}, {"owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "reply_to_user": {"reputation": 15236, "user_id": 1388017, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Z2KPU.png?s=128&g=1", "display_name": "dezman", "link": "https://stackoverflow.com/users/1388017/dezman"}, "edited": false, "score": 0, "creation_date": 1554237067, "post_id": 55482537, "comment_id": 97675864, "body": "Yeah, it depends on your case (question), I don&#39;t think monkey patching is thaaat bad. you just need to know where/when to use it and put some comments around it for future reference"}, {"owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "reply_to_user": {"reputation": 15236, "user_id": 1388017, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Z2KPU.png?s=128&g=1", "display_name": "dezman", "link": "https://stackoverflow.com/users/1388017/dezman"}, "edited": false, "score": 0, "creation_date": 1554237742, "post_id": 55482537, "comment_id": 97676157, "body": "I mean, people downvote monkey-patching as soon as they see it. I really think it&#39;s better to know that you&#39;re monkey patching the <code>Hash</code> and be extra careful with that than to use <code>hash.assoc(:some_long_key)&amp;.first</code> or the others <code>hash.key? ? :</code> stuff. If you&#39;re going to do it a few times it&#39;s better the <code>hash.key?</code> approach but I definitely wouldn&#39;t do <code>hash.assoc(:some_long_key)&amp;.first</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554276403, "post_id": 55482537, "comment_id": 97686435, "body": "@luisenrike instead of monkey patching a core class, you could just define a separate method outside the <code>Hash</code> class, e.g. <code>def key_presence(hash, key) ; key if hash.key?(key) ; end</code>"}, {"owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "edited": false, "score": 0, "creation_date": 1554295656, "post_id": 55482537, "comment_id": 97698192, "body": "Yep, absolutely, but for some reason I thought that solution was obvious to OP. My reasoning was that if you need to do use that logic in a lot of places it would be better to have it encapsulated in the <code>Hash</code> (<code>hash.return_key_if_exists(:key)</code>) class instead of doing <code>SomeUtilityClass.key_presence(hash, :some_long_key)</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554361987, "post_id": 55482537, "comment_id": 97724994, "body": "<i>&quot;I guess monkey-patching is OK for people who downvoted if Rails does it&quot;</i> \u2013 well, the OP is using Rails (asking for a &quot;ruby or rails method&quot;), so the Rails patches are already there. I don&#39;t like the way Rails is patching core classes, but I do use them when working in a Rails project. But on the other hand (or maybe because Rails already patches so much), I wouldn&#39;t add more patches to core classes myself."}], "tags": [], "owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "is_accepted": false, "score": -3, "last_activity_date": 1554295936, "last_edit_date": 1554295936, "creation_date": 1554234711, "answer_id": 55482537, "question_id": 55482029, "link": "https://stackoverflow.com/questions/55482029/is-there-a-ruby-or-rails-method-that-will-return-the-hash-key-when-checking-for/55482537#55482537", "title": "Is there a ruby or rails method that will return the hash key when checking for the hash key?", "body": "<p>I don't think there's a method for that, I would just monkey patch the <code>Hash</code> class</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>@Stefan's answer should be the accepted one.\nRails' <code>presence_in</code> is monkey-patching the Object class (way worse than monkey-patching only the <code>Hash</code> class but I guess monkey-patching is OK for people who downvoted if Rails does it)</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Everybody knows (they actually don't know why but they have heard it somewhere) that monkey patching is a bad practice but it's clearly better than doing <code>hash.slice(:some_long_key_not_in_hash).keys.first</code> or <code>hash[:some_long_key] ? :some_long_key : nil</code> all over the place</p>\n\n<pre><code>class Hash\n  def return_key_if_exists?(key)\n    self.key?(key) ? key : nil\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1554276287, "creation_date": 1554276287, "answer_id": 55489326, "question_id": 55482029, "link": "https://stackoverflow.com/questions/55482029/is-there-a-ruby-or-rails-method-that-will-return-the-hash-key-when-checking-for/55489326#55489326", "title": "Is there a ruby or rails method that will return the hash key when checking for the hash key?", "body": "<p>Rails adds the <a href=\"https://api.rubyonrails.org/classes/Object.html#method-i-presence_in\" rel=\"noreferrer\"><code>presence_in</code></a> method for this kind of problem. It returns the receiver if it is included in the argument (via <code>include?</code>), or <code>nil</code> otherwise:</p>\n\n<pre><code>hash = {some_long_key: 1}\n\n:some_long_key.presence_in(hash)\n#=&gt; :some_long_key\n\n:some_other_key.presence_in(hash)\n#=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 15236, "user_id": 1388017, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Z2KPU.png?s=128&g=1", "display_name": "dezman", "link": "https://stackoverflow.com/users/1388017/dezman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 55489326, "answer_count": 2, "score": 3, "last_activity_date": 1554323126, "creation_date": 1554232573, "question_id": 55482029, "link": "https://stackoverflow.com/questions/55482029/is-there-a-ruby-or-rails-method-that-will-return-the-hash-key-when-checking-for", "title": "Is there a ruby or rails method that will return the hash key when checking for the hash key?", "body": "<p>Given a hash like this:</p>\n\n<pre><code>hash = {some_long_key: 1}\n</code></pre>\n\n<p>I want to do just this:</p>\n\n<pre><code>hash[:some_long_key] ? :some_long_key : nil\n</code></pre>\n\n<p>But using one method if possible...</p>\n\n<pre><code>hash.has_key? :some_long_key # like this\nhash.check_key? :some_long_key # except return :some_long_key\n</code></pre>\n\n<p>I'd like to get back the key, not a boolean.</p>\n\n<p>Pretty sure this doesn't exist but thought I'd ask.</p>\n"}, {"tags": ["mysql", "ruby", "bash", "chef-infra"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554230859, "post_id": 55481363, "comment_id": 97673093, "body": "You probably need to iterate over that database list instead of using it as-is."}, {"owner": {"reputation": 1, "user_id": 2602142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f318c0f0081d4cda3cfbbd7d98d5db78?s=128&d=identicon&r=PG", "display_name": "sandeep", "link": "https://stackoverflow.com/users/2602142/sandeep"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554270157, "post_id": 55481363, "comment_id": 97683889, "body": "Thanks but iam unable to iterate as a single values."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1554310428, "post_id": 55481363, "comment_id": 97707488, "body": "Hint: <code>database.each do |db|</code> or something like that."}], "answers": [{"tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": false, "score": 0, "last_activity_date": 1554361354, "creation_date": 1554361354, "answer_id": 55509700, "question_id": 55481363, "link": "https://stackoverflow.com/questions/55481363/chef-create-array-of-database/55509700#55509700", "title": "Chef create array of database", "body": "<p>although <a href=\"https://github.com/chef-boneyard/database\" rel=\"nofollow noreferrer\">database cookbook</a> is deprecated, you can give it a try and see whether it solves your pain. chef documentation has a tutorial for <a href=\"https://learn.chef.io/modules/create-a-web-app-cookbook/ubuntu/virtualbox/configure-mysql#/\" rel=\"nofollow noreferrer\">create a web app cookbook</a> that uses database cookbook.</p>\n\n<p>regarding your issue, you should create <a href=\"https://dev.mysql.com/doc/refman/8.0/en/option-files.html\" rel=\"nofollow noreferrer\">mysql client configuration (<code>my.cnf</code>)</a>, which will let you run <code>mysql</code> command without specifying the login credentials (username and password).</p>\n"}], "owner": {"reputation": 1, "user_id": 2602142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f318c0f0081d4cda3cfbbd7d98d5db78?s=128&d=identicon&r=PG", "display_name": "sandeep", "link": "https://stackoverflow.com/users/2602142/sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554361354, "creation_date": 1554229697, "last_edit_date": 1554230817, "question_id": 55481363, "link": "https://stackoverflow.com/questions/55481363/chef-create-array-of-database", "title": "Chef create array of database", "body": "<p>Iam trying to create database with array.Iam defining array of database.and then Create database from arrays items.</p>\n\n<p>This is my chef recipe for Creating database in mysql.</p>\n\n<pre><code>array-  database=[\"testy1\",\"testy2\"]\nscript 'set Create database ' do\n  interpreter 'bash'\n  user 'root'\n  cwd '/tmp'\n  code &lt;&lt;-EOH\n\n mysql -uroot -p\\'#{pw}\\' -Be\\ \"CREATE DATABASE #{database}\"\n EOH\n  not_if \"mysql -u root -p\\'#{pw}\\' -Be\\ 'SHOW DATABASES' | grep #{database};\"\nend\n</code></pre>\n\n<p>STDERR: mysql: [Warning] Using a password on the command line interface can be insecure.\n       ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[testy1, testy2]' at line 1\n       ---- End output of \"bash\"  \"/tmp/chef-script20190402-6843-gm0k0u\" ----\n       Ran \"bash\"  \"/tmp/chef-script20190402-6843-gm0k0u\" returned 1\nThe expected result would be creation of testy1 and test2 database.</p>\n"}, {"tags": ["javascript", "ruby", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1554229176, "creation_date": 1554229176, "answer_id": 55481232, "question_id": 55480770, "link": "https://stackoverflow.com/questions/55480770/selectacura-from-js-emu-make-id-visible-false-is-not-reflected-when-r/55481232#55481232", "title": "select(&quot;Acura&quot;, :from=&gt;&#39;js-emu-make-id&#39;, visible: false) is not reflected when running save_and_open_page. It still appears to be blank. Why?", "body": "<p><code>save_and_open_page</code> save the current state of the html elements with their attributes.  That doesn't include the state of the html elements properties, so it may not reflect the actual current state of the page (eg. changing the value property of an element does not change the value attribute, and the attribute is what gets saved).  If you really want to see the current state you should be using <code>save_and_open_screenshot</code>.  </p>\n\n<p>Additionally, is there a reason you're passing <code>visible: false</code> to all those <code>select</code> calls?  If you really need to use <code>visible: false</code> to find the elements then the select should be failing since you'd be doing something a user couldn't.</p>\n"}], "owner": {"reputation": 31, "user_id": 7487360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28649b6af139729c61aa4a174778777?s=128&d=identicon&r=PG&f=1", "display_name": "ToedStorm", "link": "https://stackoverflow.com/users/7487360/toedstorm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 55481232, "answer_count": 1, "score": 0, "last_activity_date": 1554229176, "creation_date": 1554227319, "question_id": 55480770, "link": "https://stackoverflow.com/questions/55480770/selectacura-from-js-emu-make-id-visible-false-is-not-reflected-when-r", "title": "select(&quot;Acura&quot;, :from=&gt;&#39;js-emu-make-id&#39;, visible: false) is not reflected when running save_and_open_page. It still appears to be blank. Why?", "body": "<p>I am practicing/testing capybara and ran into a problem with selecting items from a dropdown menu.</p>\n\n<p>The way the website works is that you can only go to the next dropdown if you filled in the one before and I am able to fill in the last dropdown but when I open the page, the previous two boxes remain empty.</p>\n\n<hr>\n\n<p>internet = Capybara.current_session</p>\n\n<p>url = \"<a href=\"https://repairpal.com/estimator\" rel=\"nofollow noreferrer\">https://repairpal.com/estimator</a>\"</p>\n\n<p>internet.visit url</p>\n\n<p>internet.select(\"Acura\", :from=>'js-emu-make-id', visible: false)</p>\n\n<p>internet.select(\"1993\", :from=>'js-emu-year-id', visible: false)</p>\n\n<p>internet.select('Integra', :from=>'js-emu-base-vehicle-id', visible: false)</p>\n\n<p>internet.fill_in('address', :with => '10018')</p>\n\n<p>internet.save_and_open_page</p>\n\n<p><a href=\"https://i.stack.imgur.com/HBaee.png\" rel=\"nofollow noreferrer\">real output</a>\n<a href=\"https://i.stack.imgur.com/rbyyz.png\" rel=\"nofollow noreferrer\">expected/desired output</a>\nThe expected result is that when I open the page, everything is filled in; however, when I open the page what I see is two blank dropdowns but the third one is filled with \"Integra\" so only that part is working. Thanks so much for the help.</p>\n"}, {"tags": ["ruby", "chartkick"], "owner": {"reputation": 517, "user_id": 6581488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ni3nQ.jpg?s=128&g=1", "display_name": "Wladimir Gramacho", "link": "https://stackoverflow.com/users/6581488/wladimir-gramacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554226805, "creation_date": 1554226805, "question_id": 55480657, "link": "https://stackoverflow.com/questions/55480657/is-there-a-way-to-determine-start-and-end-dates-on-chartkick-line-chart", "title": "Is there a way to determine start and end dates on Chartkick Line Chart?", "body": "<p>I want to create a Chartkick line chart where I'm able to determine (hardcoded) the start and end dates of my chart. The chart will be a time series of a model.</p>\n\n<p>The thing is that I want the left and right ends of the x-axis to be <strong>always</strong> showing independently of what data points I have plotted on the chart. Is that possible?</p>\n"}, {"tags": ["ruby", "lambda", "aws-sdk", "terraform"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 3, "creation_date": 1554228572, "post_id": 55480472, "comment_id": 97672057, "body": "So your question is &quot;how to access environment variables in Ruby&quot;? That would be <code>ENV[&#39;status&#39;]</code>."}, {"owner": {"reputation": 217, "user_id": 8662972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/983aa9e2a21470a85dfdb84410f762bb?s=128&d=identicon&r=PG&f=1", "display_name": "Spikerr", "link": "https://stackoverflow.com/users/8662972/spikerr"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1554233118, "post_id": 55480472, "comment_id": 97674155, "body": "Oh man. Thanks that worked!"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1554234277, "post_id": 55480472, "comment_id": 97674652, "body": "filed it as an answer, so that this can be marked as solved."}], "answers": [{"tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": true, "score": 2, "last_activity_date": 1554234264, "creation_date": 1554234264, "answer_id": 55482435, "question_id": 55480472, "link": "https://stackoverflow.com/questions/55480472/how-to-access-terraform-lambda-variables-in-ruby-lambda-function/55482435#55482435", "title": "How to access Terraform Lambda Variables in Ruby Lambda Function?", "body": "<p>So your question is \"how to access environment variables in Ruby\"? That would be <code>ENV['status']</code>.</p>\n"}], "owner": {"reputation": 217, "user_id": 8662972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/983aa9e2a21470a85dfdb84410f762bb?s=128&d=identicon&r=PG&f=1", "display_name": "Spikerr", "link": "https://stackoverflow.com/users/8662972/spikerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 55482435, "answer_count": 1, "score": 0, "last_activity_date": 1554234264, "creation_date": 1554226043, "last_edit_date": 1554231917, "question_id": 55480472, "link": "https://stackoverflow.com/questions/55480472/how-to-access-terraform-lambda-variables-in-ruby-lambda-function", "title": "How to access Terraform Lambda Variables in Ruby Lambda Function?", "body": "<p>I have terraform code which creates a Lambda function. I then have some ruby code that is the lambda function. I can not figure out, or find any information in how to actually use the variables which are being passed in from the terraform into the lambda. I ultimately just need to know how to use the terraform variables in the ruby lambda function</p>\n\n<p>I have found examples in python and JS. There is little similarities.</p>\n\n<p>Here is my terraform code</p>\n\n<pre><code>\nresource \"aws_lambda_function\" \"send_sns_lambda\" {\n  filename         = \"statuslambda.zip\"\n  function_name    = \"status-page-send-sns\"\n  source_code_hash = \"${data.archive_file.status_lambdas.output_base64sha256}\"\n  role             = \"${aws_iam_role.status_lambda.arn}\"\n  handler          = \"statusLambda.send_sns\"\n\n  runtime = \"ruby2.5\"\n\n  vpc_config = {\n    subnet_ids         = [\"subnet-xxxx\", \"subnet-xxxxx\"]\n    security_group_ids = [\"sg-xxxxxx\"]\n  }\n\n  environment = {\n    variables = {\n      status = \"Major Outage\"\n    }\n  }\n}\n\n</code></pre>\n\n<p>And my Lambda function</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def send_sns(event:,context:)\n  sns = Aws::SNS::Resource.new(region: 'us-xxx-xxx')\n  topic = sns.topic('arn:aws:sns:us-east-1:xxxxxxxx')\n\n\n  topic.publish({\n    message: '#{status}'\n  })\n\nend\n</code></pre>\n\n<p>The idea is that the <code>status</code> variable in terraform gets passed into the status variable in the ruby code</p>\n\n<p>Here is the python example I have found </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\ndef lambda_handler(event, context):\n    return \"{} from Lambda!\".format(os.environ['greeting'])\n\n</code></pre>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1554230983, "post_id": 55480012, "comment_id": 97673170, "body": "Related: <a href=\"https://stackoverflow.com/questions/546433/regular-expression-to-match-balanced-parentheses\" title=\"regular expression to match balanced parentheses\">stackoverflow.com/questions/546433/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/6331065/matching-balanced-parenthesis-in-ruby-using-recursive-regular-expressions-like-p\" title=\"matching balanced parenthesis in ruby using recursive regular expressions like p\">stackoverflow.com/questions/6331065/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554242576, "post_id": 55481697, "comment_id": 97678001, "body": "Will do. As often as I peruse, I&#39;m not well versed in the etiquette here. Always opportunities to learn! :)"}], "tags": [], "owner": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1554231101, "creation_date": 1554231101, "answer_id": 55481697, "question_id": 55480012, "link": "https://stackoverflow.com/questions/55480012/using-regex-to-split-mathematical-formula-into-array/55481697#55481697", "title": "Using Regex to Split Mathematical Formula into Array", "body": "<p>I wound up doing the following which seems to work:</p>\n\n<p>Added a call to a new method, <code>split_paren(arr)</code> at the end of <code>split_algo</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def split_paren(algo_arr)\n  pattern = /Round\\(\\d*\\)/\n  arr = []\n  algo_arr.each do |step|\n    f = step.split(/(\\(|\\))/) unless step =~ pattern\n    f.delete('') if f.class == Array\n    f.nil? ? arr &lt;&lt; step : f.each{|s| arr &lt;&lt; s.strip}\n  end\n  arr\nend\n</code></pre>\n\n<p>If anyone wants to respond with a better way to do this, please feel free to respond. Otherwise I'll accept my answer and close the question here in a bit.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "edited": false, "score": 0, "creation_date": 1554249080, "post_id": 55484932, "comment_id": 97679570, "body": "I did not know about free-spacing regex! That&#39;s so much cleaner to read.  I knew there had to be a quicker way to get the same result. Thank you so much. This really expands my understanding of how Regex matchers work within split as well."}, {"owner": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "edited": false, "score": 0, "creation_date": 1554249859, "post_id": 55484932, "comment_id": 97679727, "body": "So to include division and subtraction in our matcher, we would simply change this group at the end <code>(?&lt;![*=+]) </code> to be <code>(?&lt;![*=+\\&#47;-]) </code>, correct? (I need to get Ruby installed at home to test these things, haha)."}, {"owner": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "edited": false, "score": 0, "creation_date": 1554254942, "post_id": 55484932, "comment_id": 97680596, "body": "Ooh! Even managed to get rid of needing the <code>.strip</code> that was there.  This works by matching the non-space in between the things we actually care about keeping, yes? Wanting to make sure I&#39;m getting the understanding of this correctly."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "edited": false, "score": 0, "creation_date": 1554258382, "post_id": 55484932, "comment_id": 97681232, "body": "I got rid of <code>.map(&amp;:strip)</code> by also splitting on spaces followed by a left parenthesis (at the end or the regex). But yes, some of the splitting involving parentheses is between adjacent characters."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1554251961, "last_edit_date": 1554251961, "creation_date": 1554247990, "answer_id": 55484932, "question_id": 55480012, "link": "https://stackoverflow.com/questions/55480012/using-regex-to-split-mathematical-formula-into-array/55484932#55484932", "title": "Using Regex to Split Mathematical Formula into Array", "body": "<p>We can define the following regular expression.</p>\n\n<pre><code>R = /\n    # split after an open paren if not followed by a digit\n    (?&lt;=\\()      # match is preceded by an open paren, pos lookbehind\n    (?!\\d)       # match is not followed by a digit, neg lookahead\n    [ ]*         # match &gt;= 0 spaces\n    |            # or\n    # split before an open paren if paren not followed by a digit\n    (?=          # begin pos lookahead\n      \\(         # match a left paren...\n      (?!\\d)     # ...not followed by a digit, neg lookahead\n    )            # end pos lookahead\n    [ ]*         # match &gt;= 0 spaces        \n    |            # or\n    # split before a closed paren if paren not preceded by a digit\n    (?&lt;!\\d)      # do not follow a digit, neg lookbehind\n    (?=\\))       # match a closed paren, pos lookahead\n    [ ]*         # match &gt;= 0 spaces        \n    |            # or\n    # split after a closed paren\n    (?&lt;=\\))      # match a preceding closed paren, pos lookbehind\n    [ ]*         # match &gt;= 0 spaces        \n    |            # or\n    # match spaces not preceded by *, = or + and followed by a letter \n    (?&lt;![*=+\\/-]) # match is not preceded by one of '*=+\\/-', neg lookbehind\n    [ ]+         # match one or more spaces\n    |            # or\n    # match spaces followed by a letter \n    [ ]+         # match one or more spaces\n    (?=\\()       # match a left paren, pos lookahead\n    /x           # free-spacing regex definition mode\n</code></pre>\n\n<h1><p></p></h1>\n\n<p>In the first example we have the following.</p>\n\n<pre><code>algo1 = 'ABC * DEF * GHI Round(3) = JKL * MNO * PQR Round(0) = SAVE'\nexpected1 = ['ABC', '* DEF', '* GHI', 'Round(3)', '= JKL', '* MNO',\n             '* PQR', 'Round(0)', '= SAVE']\nalgo1.split(R) == expected1\n  #=&gt; true\n</code></pre>\n\n<h1><p></p></h1>\n\n<p>In the second example we have the following. </p>\n\n<pre><code>algo2 = '(ABC + DEF + (GHI * JKL)) - ((MNO + PQR + (STU * VWX)) * YZ) Round(0) + SUM(AAA) = SAVE'\nexpected2 = ['(', 'ABC', '+ DEF', '+', '(', 'GHI', '* JKL', ')', ')', '-',\n             '(', '(', 'MNO', '+ PQR', '+', '(', 'STU', '* VWX', ')', ')',\n             '* YZ', ')', 'Round(0)', '+ SUM', '(', 'AAA', ')', '= SAVE']\nalgo2.split(R) == expected2\n  #=&gt; true \n</code></pre>\n\n<p>The regular expression is conventionally written as follows.</p>\n\n<pre><code>R = /(?&lt;=\\()(?!\\d) *|(?=\\((?!\\d)) *|(?&lt;!\\d)(?=\\)) *|(?&lt;=\\)) *|(?&lt;![*=+\\/-]) +| +(?=\\()/\n</code></pre>\n\n<p>In free-spacing mode I enclosed spaces in a character class (<code>[ ]</code>); else they would be stripped out before the expression is evaluated. That's not necessary when the regex is written conventionally.</p>\n"}], "owner": {"reputation": 17, "user_id": 2841100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee385e3c1c9ce7b964095c747a321121?s=128&d=identicon&r=PG", "display_name": "PanoramicPanda", "link": "https://stackoverflow.com/users/2841100/panoramicpanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 55484932, "answer_count": 2, "score": 1, "last_activity_date": 1554251961, "creation_date": 1554224323, "last_edit_date": 1554231122, "question_id": 55480012, "link": "https://stackoverflow.com/questions/55480012/using-regex-to-split-mathematical-formula-into-array", "title": "Using Regex to Split Mathematical Formula into Array", "body": "<p>I'm looking to get a flat string formula and split it into an array, divided based on a few factors. Getting a little stuck around parenthesis and looking for assistance.</p>\n\n<p>I've been using a regex scan plus a few filters to try and get the resulting array.</p>\n\n<p>My current tests are such:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> describe 'split algorithm' do\n\n      it 'can split a flat algorithm' do\n        algo = 'ABC * DEF * GHI Round(3) = JKL * MNO * PQR Round(0) = SAVE'\n        actual = split_algo(algo)\n        expected = ['ABC', '* DEF', '* GHI', 'Round(3)', '= JKL', '* MNO', '* PQR', 'Round(0)', '= SAVE']\n        expect(actual).to eq expected\n      end\n\n      it 'can split an algorithm with parenthesis' do\n        algo = '(ABC + DEF + (GHI * JKL)) - ((MNO + PQR + (STU * VWX)) * YZ) Round(0) + SUM(AAA) = SAVE'\n        actual = split_algo(algo)\n        expected = ['(', 'ABC', '+ DEF', '+', '(', 'GHI', '* JKL', ')', ')', '-', '(', '(', 'MNO', '+ PQR', '+', '(', 'STU', '* VWX', ')', ')', '* YZ', ')', 'Round(0)', '+ SUM', '(', 'AAA', ')', '= SAVE']\n        expect(actual).to eq expected\n      end\n\nend\n</code></pre>\n\n<p>With the following code, I can get the first half to pass just fine:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def split_algo(algorithm)\n   pattern = /(?:(\\ (\\*\\ |\\+\\ |\\-\\ |\\\\\\ |\\=\\ )\\S*))|(\\S*)/\n   matches = algorithm.scan(pattern)\n   matches.each_with_index { |match, index| matches[index]=match.compact }\n   arr = []\n   matches.each do |match|\n     arr &lt;&lt; match.max_by(&amp;:length).strip\n   end\n   arr.delete('')\n   arr\nend\n</code></pre>\n\n<p>I've tried modifying <code>pattern</code> to accept a parenthesis matcher as such:</p>\n\n<p><code>pattern = (\\(|\\))|(?:(\\ (\\*\\ |\\+\\ |\\-\\ |\\\\\\ |\\=\\ )\\S*))|(\\S*)</code></p>\n\n<p>But that only captures the parenthesis at the beginning of the formula.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1554230924, "post_id": 55479835, "comment_id": 97673137, "body": "If you already know it&#39;s the last 4 chars: <code>str[-4..-1]</code>?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1554231184, "post_id": 55479835, "comment_id": 97673268, "body": "What format is the file in? What program generates it? It looks like a (strange) variation on CSV. Is the model number always the third field? Is the model number always capital letters and numerals, or can it contain other characters? Is the year always the last field?"}, {"owner": {"reputation": 33, "user_id": 11221203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEdO1KAFFq0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0GoAeb25LEwrZpaonL98s_HD8aw/mo/photo.jpg?sz=128", "display_name": "Ziming Wang", "link": "https://stackoverflow.com/users/11221203/ziming-wang"}, "edited": false, "score": 1, "creation_date": 1554249657, "post_id": 55479835, "comment_id": 97679691, "body": "The position of the year can be anywhere.  The format and the order can be varied. This is another line from the file: Used,Smartwatch,Samsung,{activity tracker,Bluetooth,water resistant},2017,250$,black,3947t4f,9hrs. The model is always the combination of &#39;only&#39; letters and numbers. The letters in the model are not always capital letters."}, {"owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 0, "creation_date": 1554251040, "post_id": 55479835, "comment_id": 97679928, "body": "I can see that the year in your second example line is <code>2017</code>, but which part is the model? Is it <code>3947t4f</code>?"}, {"owner": {"reputation": 33, "user_id": 11221203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEdO1KAFFq0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0GoAeb25LEwrZpaonL98s_HD8aw/mo/photo.jpg?sz=128", "display_name": "Ziming Wang", "link": "https://stackoverflow.com/users/11221203/ziming-wang"}, "edited": false, "score": 0, "creation_date": 1554251942, "post_id": 55479835, "comment_id": 97680064, "body": "Yes, in the second example, &#39;3947t4f&#39; is the model."}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "is_accepted": false, "score": 0, "last_activity_date": 1554280453, "creation_date": 1554280453, "answer_id": 55490596, "question_id": 55479835, "link": "https://stackoverflow.com/questions/55479835/how-can-i-extract-the-integer-a-year-and-combination-of-letters-and-numbers-fr/55490596#55490596", "title": "How can I extract the integer (a year) and combination of letters and numbers from each line in a file", "body": "<p>To handle this, we have to define the patterns first.</p>\n\n<p>from the 2 rows you provided, we know these are info of cellphone. then we can assume:</p>\n\n<ol>\n<li>the fields separated by ',' </li>\n<li>the year is in this century, 20xx is a good assumption</li>\n<li>model is something not human understandable. </li>\n</ol>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def extract(str)\n  fields = str.split(\",\")\n  year = fields.find { |f| f.match /^20\\d\\d$/}\n  model = fields.find do |f|\n    f.match /\\d/ and f.match /[a-zA-Z]/ and !f.match /\\d+(hrs|hr|hour|hours|gb)/i\n  end\n  return year, model\nend\n</code></pre>\n\n<p>in the code I assume the the model contains number and letter. I exclude hours and size(gb) as well. we can also build word list. Cause the info is about cellphone, I guess the list is not long. </p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 3897481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUnIT.png?s=128&g=1", "display_name": "Joel K", "link": "https://stackoverflow.com/users/3897481/joel-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1554282166, "creation_date": 1554282166, "answer_id": 55491170, "question_id": 55479835, "link": "https://stackoverflow.com/questions/55479835/how-can-i-extract-the-integer-a-year-and-combination-of-letters-and-numbers-fr/55491170#55491170", "title": "How can I extract the integer (a year) and combination of letters and numbers from each line in a file", "body": "<pre><code>f.each_line do |line|\n  # find 20xx proceeded by line start or a comma,\n  # and followed line end or a comma.\n  # ?: makes the group non-capturing\n  year = line.match(/(?:^|,)(20\\d{2})(?:$|,)/)\n  year = year[1] if year\n\n  model = line.split(',').select do |s|\n    # 7-30 word characters in length\n    s =~ /^\\w{7,30}$/ &amp;&amp;\n    # at least 5 digits anywhere in the word\n    s =~ /(\\d.*){5}/\n  end\n\n  puts \"#{model.first} made in #{year}\"\nend\n</code></pre>\n\n<p>Hopefully there are some reasonable qualifiers for the model that work with the rest of your data as those are pretty naive.</p>\n\n<p><a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> can give a detailed explanation of any regex if you want more details on exactly how those work. You can use also use <a href=\"https://rubular.com/\" rel=\"nofollow noreferrer\">https://rubular.com/</a> to test against ruby's exact flavour of regex.</p>\n"}], "owner": {"reputation": 33, "user_id": 11221203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SEdO1KAFFq0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0GoAeb25LEwrZpaonL98s_HD8aw/mo/photo.jpg?sz=128", "display_name": "Ziming Wang", "link": "https://stackoverflow.com/users/11221203/ziming-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55491170, "answer_count": 2, "score": 0, "last_activity_date": 1554282166, "creation_date": 1554223623, "last_edit_date": 1554250940, "question_id": 55479835, "link": "https://stackoverflow.com/questions/55479835/how-can-i-extract-the-integer-a-year-and-combination-of-letters-and-numbers-fr", "title": "How can I extract the integer (a year) and combination of letters and numbers from each line in a file", "body": "<p>I am working on a program that reads a file that contains different kind of informations about cellphones, then extracts and stores each piece of information. For example, here are two of many lines from the file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>12hrs,Smartphone,2015WB0126A,used,Apple,2000$,{Bluetooth,Water resistant,fingerprint reader,16GB},white,2016\nUsed,Smartwatch,Samsung,{activity tracker,Bluetooth,water resistant},2017,250$,black,3947t4f,9hrs\n</code></pre>\n\n<p>In the first line above, I want to extract <code>2016</code> as the year instead of <code>2015</code> and <code>2000</code>. And I want to extract <code>2015WB0126A</code> as the model (any random combination of letters and numbers) instead of <code>12hrs</code> and <code>2000$</code>. Can someone help me with this? Thank you very much.</p>\n\n<pre><code>f = File.open(\"listings.txt\", \"r\")\nf.each_line do |line|\n  puts line\n  year=line[/20+[0-9]+[0-9]/]\n  puts \"made in #{year}\"\nend\n</code></pre>\n\n<p>For the first line in the example, I expect the year to equal <code>2016</code> and the model to be <code>2015WB0126A</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 706, "user_id": 167233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e326007182b2b41b557a3f035ff318ce?s=128&d=identicon&r=PG", "display_name": "Slabgorb", "link": "https://stackoverflow.com/users/167233/slabgorb"}, "edited": false, "score": 0, "creation_date": 1554218131, "post_id": 55477922, "comment_id": 97666530, "body": "Can you not hit the UserPreference object directly here, maybe UserPreference.where(...).update_all(...)"}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": false, "score": 1, "last_activity_date": 1554218173, "creation_date": 1554218173, "answer_id": 55478188, "question_id": 55477922, "link": "https://stackoverflow.com/questions/55477922/update-nested-records-in-one-sql-query-active-record-ruby-on-rails/55478188#55478188", "title": "Update nested records in one sql query (active record, ruby on rails)", "body": "<p>I can't test it right now, but you could use <code>joins</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>UserPreference.joins(:employer).update_all('send_email = employers.send_emails')\n</code></pre>\n"}], "owner": {"reputation": 3111, "user_id": 1356836, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dAzrF.png?s=128&g=1", "display_name": "Emil A.", "link": "https://stackoverflow.com/users/1356836/emil-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554218173, "creation_date": 1554217353, "question_id": 55477922, "link": "https://stackoverflow.com/questions/55477922/update-nested-records-in-one-sql-query-active-record-ruby-on-rails", "title": "Update nested records in one sql query (active record, ruby on rails)", "body": "<p>I'd like to update all user preferences to a default value efficiently. The following works correctly but does not seem good enough:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Employer.find_each do |employer|\n  employer.user_preferences.update_all(send_emails: employer.send_emails)\nend\n</code></pre>\n\n<p>Any hints?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554221014, "post_id": 55477919, "comment_id": 97668290, "body": "BTW, if <code>@instance</code> is an <code>ActiveRecord</code> instance, you could use <code>@instance[key] = nil</code>, see <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\"><code>ActiveRecord::AttributeMethods#[]=</code></a>"}, {"owner": {"reputation": 119, "user_id": 2849029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/505400089/picture?type=large", "display_name": "Josh Kestenberg", "link": "https://stackoverflow.com/users/2849029/josh-kestenberg"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554222863, "post_id": 55477919, "comment_id": 97669281, "body": "I could have sworn that that was the first thing I tried, but right you are. Thanks a lot."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2849029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/505400089/picture?type=large", "display_name": "Josh Kestenberg", "link": "https://stackoverflow.com/users/2849029/josh-kestenberg"}, "edited": false, "score": 0, "creation_date": 1554219252, "post_id": 55478254, "comment_id": 97667269, "body": "This worked. Thanks a lot. Why is it that I can ordinarily call a setter method without using this syntax? eg <code>@instance.attribute = nil</code> rather than <code>@instance.attribute=(nil)</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 119, "user_id": 2849029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/505400089/picture?type=large", "display_name": "Josh Kestenberg", "link": "https://stackoverflow.com/users/2849029/josh-kestenberg"}, "edited": false, "score": 1, "creation_date": 1554219989, "post_id": 55478254, "comment_id": 97667710, "body": "That&#39;s a good question. I don&#39;t know the precise answer and hesitate to speculate. I suppose some digging through the source code would likely reveal the answer. Or, one of the gurus may swing by and tell us why. Apologies!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 119, "user_id": 2849029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/505400089/picture?type=large", "display_name": "Josh Kestenberg", "link": "https://stackoverflow.com/users/2849029/josh-kestenberg"}, "edited": false, "score": 3, "creation_date": 1554220747, "post_id": 55478254, "comment_id": 97668134, "body": "@JoshKestenberg it&#39;s called syntactic sugar. The parser detects certain structures and converts them, so you can write <code>@instance.attribute = nil</code> to invoke a setter, or <code>1 + 2</code> instead of <code>1.+(2)</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554220834, "post_id": 55478254, "comment_id": 97668189, "body": "@Stefan - Great explanation. Thanks!"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 3, "last_activity_date": 1554218380, "creation_date": 1554218380, "answer_id": 55478254, "question_id": 55477919, "link": "https://stackoverflow.com/questions/55477919/problem-with-attributes-method-or-send-method/55478254#55478254", "title": "Problem with attributes method OR send method?", "body": "<pre><code>@instance.send(key)\n</code></pre>\n\n<p>Is calling the getter method. To call the setter method, try: </p>\n\n<pre><code>@instance.attributes.each{|key, value| @instance.send(\"#{key}=\", nil)}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2849029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/505400089/picture?type=large", "display_name": "Josh Kestenberg", "link": "https://stackoverflow.com/users/2849029/josh-kestenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 55478254, "answer_count": 1, "score": 0, "last_activity_date": 1554218380, "creation_date": 1554217351, "question_id": 55477919, "link": "https://stackoverflow.com/questions/55477919/problem-with-attributes-method-or-send-method", "title": "Problem with attributes method OR send method?", "body": "<p>This line of code:</p>\n\n<pre><code>@instance.attributes.each{|key, value| @instance.send(key) = nil}\n</code></pre>\n\n<p>yields this error:</p>\n\n<pre><code>syntax error, unexpected '=', expecting '}'\n</code></pre>\n\n<p>I'm having trouble understanding why that is.. When I write something like:</p>\n\n<pre><code>@instance.attributes.each{|key, value| puts @instance.send(key)}\n</code></pre>\n\n<p>it behaves as expected, outputting the value of each attribute. Why does it work as a getter but not as a setter in this context? Is there a problem with my syntax?</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1554219917, "last_edit_date": 1554219917, "creation_date": 1554219592, "answer_id": 55478637, "question_id": 55477866, "link": "https://stackoverflow.com/questions/55477866/rails-limited-access-to-pages-for-not-logged-users/55478637#55478637", "title": "Rails: Limited access to pages for not logged users", "body": "<p>The problem with using IP address is that you can have many users on the same IP address if they're on a shared IP so that is not a good solution for production.  Instead you should probably use <a href=\"https://github.com/cbeer/devise-guests\" rel=\"nofollow noreferrer\">https://github.com/cbeer/devise-guests</a> gem.</p>\n\n<p>The approach here is that you can still have a user session for non-logged in users.</p>\n"}], "owner": {"reputation": 505, "user_id": 7614941, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e1ce1f96528ab233b12f9a66f4ed86d6?s=128&d=identicon&r=PG&f=1", "display_name": "andrzej541", "link": "https://stackoverflow.com/users/7614941/andrzej541"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55478637, "answer_count": 1, "score": 1, "last_activity_date": 1554219917, "creation_date": 1554217208, "question_id": 55477866, "link": "https://stackoverflow.com/questions/55477866/rails-limited-access-to-pages-for-not-logged-users", "title": "Rails: Limited access to pages for not logged users", "body": "<p>I would like to restrict an access for users without accounts to some pages (under one controller). E.g: user who is not logged in can check those pages 10 times per day. If this number will be exceeded he will be automatically redirect to page informing him about daily limit and encouraging him to register an account.</p>\n\n<p>Are there any gems to accomplish it? (I use devise)</p>\n\n<p>My initial notion was to build an additional db-table storing IP addresses (using <code>request.remote_ip</code> method) for viewers who are not signed in. Every time unlogged viewer visit the website rails app will launch a method checking if his IP appeared there 10 times in last day or not. Is this a good soluction?</p>\n\n<p>Rails ver: 5.2.1\nDevise ver: 4.2</p>\n"}, {"tags": ["ruby", "chef-infra", "push"], "answers": [{"tags": [], "owner": {"reputation": 54, "user_id": 6446063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fp6S3Cl2p3o/AAAAAAAAAAI/AAAAAAAAAAw/wd5f5brca9I/photo.jpg?sz=128", "display_name": "devopsdina", "link": "https://stackoverflow.com/users/6446063/devopsdina"}, "is_accepted": false, "score": 1, "last_activity_date": 1554395710, "creation_date": 1554395710, "answer_id": 55521008, "question_id": 55476366, "link": "https://stackoverflow.com/questions/55476366/chef-server-returning-404-for-knife-commands-from-chef-workstation/55521008#55521008", "title": "Chef Server returning 404 for knife commands from Chef workstation", "body": "<p>Are you running <code>knife node status [&lt;node&gt; &lt;node&gt; ...]</code> per the syntax <a href=\"https://docs.chef.io/push_jobs.html#node-status\" rel=\"nofollow noreferrer\">https://docs.chef.io/push_jobs.html#node-status</a> and getting the error?</p>\n\n<p>Ensure the push jobs client is installed and running on the node.</p>\n\n<p>On your node, ensure ports <code>10000-10003</code> are open so the node can communicate with the chef server.</p>\n"}], "owner": {"reputation": 45, "user_id": 9871766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/061a5a6c376f372c717286b8ef711737?s=128&d=identicon&r=PG&f=1", "display_name": "Sankareswar", "link": "https://stackoverflow.com/users/9871766/sankareswar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554395710, "creation_date": 1554212700, "question_id": 55476366, "link": "https://stackoverflow.com/questions/55476366/chef-server-returning-404-for-knife-commands-from-chef-workstation", "title": "Chef Server returning 404 for knife commands from Chef workstation", "body": "<p>I am trying to set up Push jobs on existing Chef server.</p>\n\n<p><code>knife ssl check</code> , <code>knife client list</code> and <code>knife node list</code> returns success, however:</p>\n\n<p><code>knife node status</code>returns HTTP error 404:</p>\n\n<p>ERROR: The object you are looking for could not be found ...</p>\n\n<p>Checked knife.rb on workstation and it looks good.\nif the problem is on ORGANIZATION_NAME OR CHEF_SERVER_URL then it should fail for all knife commands.\nbut I am getting response for knife node list .</p>\n\n<p>Below is my knife configuration </p>\n\n<pre><code>   current_dir = File.dirname(__FILE__)\n    log_level                :info\n    log_location             STDOUT\n    node_name                \"NODE1\"\n    chef_server_url          \"https://SERVER_NAME_FQDN/organizations/ORGANIZATION_NAME\"\n    validation_client_name   \"ORGANIZATION_NAME-validator\"\n    client_key               \"#{current_dir}/CLIENT1.pem\"\n    cookbook_path            [\"#{current_dir}/../cookbooks\"]\n</code></pre>\n"}, {"tags": ["ruby", "git", "heroku"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554229139, "post_id": 55475321, "comment_id": 97672326, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8855317/git-push-out-of-memory-malloc-failed\">git push Out of memory, malloc failed</a>"}], "answers": [{"tags": [], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "is_accepted": false, "score": 2, "last_activity_date": 1554210023, "creation_date": 1554210023, "answer_id": 55475460, "question_id": 55475321, "link": "https://stackoverflow.com/questions/55475321/what-is-the-solutionn-to-this-error-fatal-out-of-memory-malloc-failed-tried-t/55475460#55475460", "title": "What is the solutionn to this error fatal: Out of memory, malloc failed (tried to allocate 1048576000 bytes) when pushing to heroku?", "body": "<p>Try this.</p>\n\n<pre><code>git gc --auto --prune=today --aggressive \ngit repack \ngit config --global http.postbuffer 524288000 \ngit config --global pack.windowMemory 256m\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4879988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsHUt.jpg?s=128&g=1", "display_name": "jpmulongo", "link": "https://stackoverflow.com/users/4879988/jpmulongo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554210023, "creation_date": 1554209602, "question_id": 55475321, "link": "https://stackoverflow.com/questions/55475321/what-is-the-solutionn-to-this-error-fatal-out-of-memory-malloc-failed-tried-t", "title": "What is the solutionn to this error fatal: Out of memory, malloc failed (tried to allocate 1048576000 bytes) when pushing to heroku?", "body": "<p>I am trying to push a repo to heroku using the following command:\n<code>git push -u heroku master</code>\nbut I keep getting the error below:</p>\n\n<pre><code>fatal: Out of memory, malloc failed (tried to allocate 1048576000 bytes)\nCounting objects: 10, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (7/7), done.\nWriting objects: 100% (10/10), 1012 bytes | 0 bytes/s, done.\nTotal 10 (delta 1), reused 0 (delta 0)\nfatal: The remote end hung up unexpectedly\nfatal: The remote end hung up unexpectedly\nerror: failed to push some refs to 'https://git.heroku.com/sheltered-cliffs-69598.git'\n</code></pre>\n\n<p>the repo is barely bigger than 1MB. It's basically a simple hello-world application built with ruby so it only has <code>config.ru</code>, <code>Gemfile</code>, <code>Gemfile.lock</code> and <code>hello.rb</code> files, nothing else. What could be causing such an error and how to solve it?</p>\n"}, {"tags": ["html", "ruby", "cucumber", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1554213000, "post_id": 55475310, "comment_id": 97663238, "body": "It would help if you can provide the HTML or a page that reproduces the issue. The error message says the element is found, but not visible to the user. Are you sure you are clicking on the right element - usually I would expect a button or link element. The other possibility is there are multiple on the page, so you could try <code>@b.p(text: &quot;Se connecter&quot;, visible: true).click</code>"}, {"owner": {"reputation": 1, "user_id": 11299709, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ip1aU8eSjPk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rele2D1W8uxyADWc0bya6MGHgY9jA/mo/photo.jpg?sz=128", "display_name": "Jordan Henriques", "link": "https://stackoverflow.com/users/11299709/jordan-henriques"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1554215668, "post_id": 55475310, "comment_id": 97664968, "body": "Thanks for your help Justin, @b.p(text: &quot;Se connecter&quot;, visible: true).click works :)"}], "owner": {"reputation": 1, "user_id": 11299709, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ip1aU8eSjPk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rele2D1W8uxyADWc0bya6MGHgY9jA/mo/photo.jpg?sz=128", "display_name": "Jordan Henriques", "link": "https://stackoverflow.com/users/11299709/jordan-henriques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554211457, "creation_date": 1554209584, "last_edit_date": 1554211457, "question_id": 55475310, "link": "https://stackoverflow.com/questions/55475310/unable-to-locate-a-p-element-with-cucumber", "title": "Unable to locate a P element with Cucumber", "body": "<p>i am using Cucumber to test a website, i would like to click on the login icon, but i got the following error :</p>\n\n<pre><code>@b.p(text:\"Se connecter\").click\nWatir::Exception::UnknownObjectException: element located, but timed out after 30 seconds, waiting for #&lt;Watir::Paragraph: located: true; {:text=&gt;\"Se connecter\", :tag_name=&gt;\"p\"}&gt; to be present\nfrom /usr/local/rvm/gems/ruby-2.5.1/gems/watir-6.12.0/lib/watir/elements/element.rb:627:in `raise_present'\n</code></pre>\n\n<p>here are my test :</p>\n\n<pre><code>@b.p(text:\"Se connecter\").visible?\n2019-04-02 15:42:30 WARN Watir [\"visible_element\"] #visible? behavior will be changing slightly, consider switching to #present? (more details: http://watir.com/element-existentialism/)\n=&gt; false\n</code></pre>\n\n<p>But i do see the text on the page.</p>\n\n<pre><code>pry(#&lt;Object&gt;)&gt; @b.p(text:\"Se connecter\").exist?\n=&gt; true\n\npry(#&lt;Object&gt;)&gt; @b.p(text:\"Se connecter\").enabled?\n=&gt; true\n</code></pre>\n\n<p>i also tried to click on other element but it doesn't work either.</p>\n\n<p>Thanks for Helping</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1554208338, "post_id": 55474554, "comment_id": 97660229, "body": "Post the relevant code right here, in the question."}, {"owner": {"reputation": 1, "user_id": 11026730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HgVCtDq_HmI/AAAAAAAAAAI/AAAAAAAAExo/0zSUHLEsU28/photo.jpg?sz=128", "display_name": "Nano", "link": "https://stackoverflow.com/users/11026730/nano"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1554208467, "post_id": 55474554, "comment_id": 97660301, "body": "The whole program? It&#39;s about 80 lines, which is why I thought it would be better to include a link."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1554208686, "post_id": 55474554, "comment_id": 97660445, "body": "The problem with too much code is it&#39;s <i>too much code</i>, no matter how you include it. And there&#39;s an additional problem with external links: they die, rendering posts meaningless. So if you could reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and post it right here, it&#39;d be perfect."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11026730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HgVCtDq_HmI/AAAAAAAAAAI/AAAAAAAAExo/0zSUHLEsU28/photo.jpg?sz=128", "display_name": "Nano", "link": "https://stackoverflow.com/users/11026730/nano"}, "edited": false, "score": 0, "creation_date": 1554208409, "post_id": 55474747, "comment_id": 97660266, "body": "Thank you for your comment. However, I only want this to trigger if there is a grand_winner. The code above would work if I just wanted to &quot;Do stuff here..&quot; one time. Please correct me if I&#39;m wrong."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1, "user_id": 11026730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HgVCtDq_HmI/AAAAAAAAAAI/AAAAAAAAExo/0zSUHLEsU28/photo.jpg?sz=128", "display_name": "Nano", "link": "https://stackoverflow.com/users/11026730/nano"}, "edited": false, "score": 1, "creation_date": 1554208789, "post_id": 55474747, "comment_id": 97660517, "body": "@Nano: what you mean, &quot;one time&quot;? This code will loop (and keep doing stutt) until you input &quot;no&quot;."}, {"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "reply_to_user": {"reputation": 1, "user_id": 11026730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HgVCtDq_HmI/AAAAAAAAAAI/AAAAAAAAExo/0zSUHLEsU28/photo.jpg?sz=128", "display_name": "Nano", "link": "https://stackoverflow.com/users/11026730/nano"}, "edited": false, "score": 0, "creation_date": 1554211982, "post_id": 55474747, "comment_id": 97662535, "body": "Okay, now it should do what you want @Nano :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554228469, "post_id": 55474747, "comment_id": 97672011, "body": "Now the internal loop does not <code>break</code> I would recommend that <code>break if grand_winner</code> be in the inner loop and <code>break if (print &quot;continue? &quot; or gets.strip.downcase == &#39;no&#39;)</code> be in the outer loop"}, {"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554230179, "post_id": 55474747, "comment_id": 97672772, "body": "@engineersmnky ah, that&#39;s true xD"}], "tags": [], "owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1554230218, "last_edit_date": 1554230218, "creation_date": 1554207941, "answer_id": 55474747, "question_id": 55474554, "link": "https://stackoverflow.com/questions/55474554/ruby-how-to-exit-program-and-ask-if-user-wants-to-play-again/55474747#55474747", "title": "Ruby: How to exit program and ask if user wants to play again", "body": "<pre><code>loop do\n  loop do\n    # do stuff here\n    break if grand_winner\n  end\n  print \"continue? \"\n  break if gets.strip.downcase == 'no'\nend\n</code></pre>\n\n<p>(Note that I'm just chaining the <code>puts</code> into my condition, as it always returns nil, so the right-hand-side of the <code>or</code> will be evaluated)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9485690"}, "is_accepted": false, "score": 0, "last_activity_date": 1554210613, "creation_date": 1554210613, "answer_id": 55475659, "question_id": 55474554, "link": "https://stackoverflow.com/questions/55474554/ruby-how-to-exit-program-and-ask-if-user-wants-to-play-again/55475659#55475659", "title": "Ruby: How to exit program and ask if user wants to play again", "body": "<p>You can create an if statement based on what the grand_winner function returns. I modified it a bit so it would just return true or false. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def grand_winner\n  if WINS[:user] == 5\n    prompt(MESSAGES['user_grand_winner'])\n    return true #returns true if user is grand winner\n  elsif WINS[:computer] == 5\n    prompt(MESSAGES['computer_grand_winner'])\n    return false #returns false if COM is grand winner\n  end\nend\n</code></pre>\n\n<p>So now you can do this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>if grand_winner == true #so if the grand winner was the player \n  prompt(\"Would you like to play again? (Y/N)\")\n  play_again = gets().chomp\n  break unless play_again.downcase.start_with?('y')\nelse \n    #whatever happens if they were not the grand winner\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11026730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HgVCtDq_HmI/AAAAAAAAAAI/AAAAAAAAExo/0zSUHLEsU28/photo.jpg?sz=128", "display_name": "Nano", "link": "https://stackoverflow.com/users/11026730/nano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1554230218, "creation_date": 1554207295, "question_id": 55474554, "link": "https://stackoverflow.com/questions/55474554/ruby-how-to-exit-program-and-ask-if-user-wants-to-play-again", "title": "Ruby: How to exit program and ask if user wants to play again", "body": "<p>This is for a class assignment. We create a Rock Paper Scissors Spock Lizard (RPSSL) game. User vs. computer. The first to win 5x is the grand_winner. </p>\n\n<p>I'm having trouble implementing code to ask user if they would like to play again and if not, break out of the program. This was easy to implement when it was just a single game.</p>\n\n<p>Hints or tips are appreciate above a definitive answer. </p>\n\n<p>I've tried defining a method, putting the code into a condition to check if there is a grand_winner, but I'm really having trouble. I know that I may need to go back or simply slow down because the answer is right there.</p>\n\n<p>Here is the link to github:</p>\n\n<p><a href=\"https://github.com/emilianolowe/RB101_lesson_two/blob/master/rpssl.rb\" rel=\"nofollow noreferrer\">https://github.com/emilianolowe/RB101_lesson_two/blob/master/rpssl.rb</a></p>\n\n<p>I expect the program to ask the user if they would like to play another round. If the user does not want to play another round, exit the program.</p>\n"}, {"tags": ["ruby", "nginx", "passenger"], "comments": [{"owner": {"reputation": 3119, "user_id": 3106816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LDdbB.jpg?s=128&g=1", "display_name": "Jigar Bhatt", "link": "https://stackoverflow.com/users/3106816/jigar-bhatt"}, "edited": false, "score": 0, "creation_date": 1557317368, "post_id": 55473983, "comment_id": 98722835, "body": "I am using ruby on rails with phusion manager with apache and I am getting same error.  [Client 2-10588] Returning HTTP 503 due to: Request queue full (configured max. size: 100)"}], "owner": {"reputation": 31, "user_id": 9385634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db40911c1fb444d1254a6df63f2f4450?s=128&d=identicon&r=PG&f=1", "display_name": "naveen8577", "link": "https://stackoverflow.com/users/9385634/naveen8577"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554205396, "creation_date": 1554205396, "question_id": 55473983, "link": "https://stackoverflow.com/questions/55473983/returning-http-503-due-to-request-queue-full-configured-max-size-100", "title": "Returning HTTP 503 due to: Request queue full (configured max. size: 100)", "body": "<p>I am running my application on ruby on rails with phusion manager with nginx.I am getting below error.\n<strong>[Client 3-344] Returning HTTP 503 due to: Request queue full (configured max. size: 100)</strong></p>\n\n<p>Thanks in Advance</p>\n\n<p>Tried increasing passenger_max_request_queue_size 1000; But it throwing as it available for Enterprise Edition.\nand also tried using increasing \n    passenger_max_pool_size 15;\n    passenger_min_instances 15;\nBut no use.</p>\n"}, {"tags": ["ruby", "oauth-2.0", "wso2", "google-oauth", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 8340, "user_id": 1645712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/48781792c1fb7d61086b4fb612938c13?s=128&d=identicon&r=PG", "display_name": "gusto2", "link": "https://stackoverflow.com/users/1645712/gusto2"}, "edited": false, "score": 0, "creation_date": 1554221422, "post_id": 55473744, "comment_id": 97668509, "body": "May we assume you are using WSO2 Identity Server with OAuth2? Which version?"}, {"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "reply_to_user": {"reputation": 8340, "user_id": 1645712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/48781792c1fb7d61086b4fb612938c13?s=128&d=identicon&r=PG", "display_name": "gusto2", "link": "https://stackoverflow.com/users/1645712/gusto2"}, "edited": false, "score": 0, "creation_date": 1554225195, "post_id": 55473744, "comment_id": 97670437, "body": "@gusto2 I have updated the question."}], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 1367050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Up09v.jpg?s=128&g=1", "display_name": "Gayan", "link": "https://stackoverflow.com/users/1367050/gayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1554288112, "creation_date": 1554288112, "answer_id": 55493212, "question_id": 55473744, "link": "https://stackoverflow.com/questions/55473744/force-wso2-to-login-with-google-every-time/55493212#55493212", "title": "Force WSO2 to login with google every time", "body": "<p>Currently Google federated authenticator[2] does not support logout functionality hence logout request will not be delivered to Google IDP. </p>\n\n<p>If you want to support logout functionality in given authenticator need to override initiateLogoutRequest() method in the authenticator itself. If you have a look Google federated authenticator[2] there is no implementation of initiateLogoutRequest(). But if you have a look SAML federated authenticator[1] there is a implementation for initiateLogoutRequest() where it does support federated logout. </p>\n\n<p>Since initiateLogoutRequest() is not overriden in Google federated authenticator[2] AbstractApplicationAuthenticator --> initiateLogoutRequest() will be invoked which does nothing [3][4].</p>\n\n<p>If you really need to implement federated logout for Google authenticator, extend Google federated authenticator[2]  and implement initiateLogoutRequest() as per Google IDP requirement.</p>\n\n<p>[1] <a href=\"https://github.com/wso2-extensions/identity-outbound-auth-samlsso/blob/v5.1.12/components/org.wso2.carbon.identity.application.authenticator.samlsso/src/main/java/org/wso2/carbon/identity/application/authenticator/samlsso/SAMLSSOAuthenticator.java#L361\" rel=\"nofollow noreferrer\">https://github.com/wso2-extensions/identity-outbound-auth-samlsso/blob/v5.1.12/components/org.wso2.carbon.identity.application.authenticator.samlsso/src/main/java/org/wso2/carbon/identity/application/authenticator/samlsso/SAMLSSOAuthenticator.java#L361</a></p>\n\n<p>[2] <a href=\"https://github.com/wso2-extensions/identity-outbound-auth-google/blob/master/components/org.wso2.carbon.identity.application.authenticator.google/src/main/java/org/wso2/carbon/identity/application/authenticator/google/GoogleOAuth2Authenticator.java\" rel=\"nofollow noreferrer\">https://github.com/wso2-extensions/identity-outbound-auth-google/blob/master/components/org.wso2.carbon.identity.application.authenticator.google/src/main/java/org/wso2/carbon/identity/application/authenticator/google/GoogleOAuth2Authenticator.java</a></p>\n\n<p>[3] <a href=\"https://github.com/wso2/carbon-identity-framework/blob/v5.12.148/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/AbstractApplicationAuthenticator.java#L118\" rel=\"nofollow noreferrer\">https://github.com/wso2/carbon-identity-framework/blob/v5.12.148/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/AbstractApplicationAuthenticator.java#L118</a></p>\n\n<p>[4] <a href=\"https://github.com/wso2/carbon-identity-framework/blob/v5.12.148/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/AbstractApplicationAuthenticator.java#L196\" rel=\"nofollow noreferrer\">https://github.com/wso2/carbon-identity-framework/blob/v5.12.148/components/authentication-framework/org.wso2.carbon.identity.application.authentication.framework/src/main/java/org/wso2/carbon/identity/application/authentication/framework/AbstractApplicationAuthenticator.java#L196</a></p>\n"}], "owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1554288112, "creation_date": 1554204690, "last_edit_date": 1554225110, "question_id": 55473744, "link": "https://stackoverflow.com/questions/55473744/force-wso2-to-login-with-google-every-time", "title": "Force WSO2 to login with google every time", "body": "<p>I have a Rails application and I have configured WSO2is with Oauth 2.0 with it to login with Google. It works fine. But there is an issue with it. Example suppose I log in with one of my Google accounts and then log out of my application. and then I try to login with another Google accounts, here WSO2 does not prompt me with a google login screen again. My question is how to force WSO2 to prompt login every time. </p>\n"}, {"tags": ["ruby", "cucumber", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1554208755, "post_id": 55473094, "comment_id": 97660496, "body": "What version of Watir are you running? Also, what is the <code>adopt_puppies.feature</code> - is that from Cheezy&#39;s book?"}, {"owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1554460762, "post_id": 55473094, "comment_id": 97770179, "body": "Yes that&#39;s from that book. Watir version is 6.16.5. I have updated the description. Maybe that will help to dig into the problem."}], "owner": {"reputation": 3569, "user_id": 2462759, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d328d4b61356d8e6c763e6bb40ada158?s=128&d=identicon&r=PG", "display_name": "paul", "link": "https://stackoverflow.com/users/2462759/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554461012, "creation_date": 1554202723, "last_edit_date": 1554461012, "question_id": 55473094, "link": "https://stackoverflow.com/questions/55473094/watir-undefined-method-bridge-for-nilnilclass-nomethoderror", "title": "Watir: undefined method `bridge&#39; for nil:NilClass (NoMethodError)", "body": "<p>Whenever I run my feature I get this error:</p>\n\n<p><code>$ cucumber features/adopt_puppies.feature</code></p>\n\n<p>Cucumber.yml<br>\n<code>default: BROWSER=chrome</code></p>\n\n<pre><code>Using the default profile...\nFeature: Verify total puppies available to buy on website\n\n    Given I am on puppies website       \n    # features/step_definitions/adopt_puppies.rb:3\n      undefined method `bridge' for nil:NilClass (NoMethodError)\n      ./features/step_definitions/adopt_puppies_helper.rb:4:in `goto_website_homepage'\n      ./features/step_definitions/adopt_puppies.rb:4:in `/^I\\ am\\ on\\ puppies\\ website$/'\n      features/adopt_puppies.feature:4:in `Given I am on puppies website'\n</code></pre>\n\n<p>To fix this I have already downgraded <br>\n<code>cucumber gem to 2.99.0</code> and <code>selenium-webdriver gem to 3.5.0</code><br>\nbut still it is giving same error.</p>\n\n<p>What wrong am I doing?</p>\n\n<p><strong>Update:</strong>\nIt got it fixed after adding <code>hooks</code> and <code>env</code> files but now there is another (similar) error. If I use below line in <code>cucumber.yml</code> i.e. I want to use <code>pretty-face gem (version 0.10.3)</code></p>\n\n<p><code>default: BROWSER=chrome --no-source --color --format PrettyFace::Formatter::Html --out results/index.html</code></p>\n\n<p>Error is same just asking different file to available:</p>\n\n<pre><code>C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:54:in `require': `require \"watir-webdriver\"` is deprecated. Please, use `require \"watir\"`.\ncannot load such file -- cucumber/ast/scenario\nError creating formatter: PrettyFace::Formatter::Html (LoadError)\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/pretty_face-0.10.3/lib/pretty_face/formatter/html.rb:5:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:130:in `require'\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:130:in `rescue in require'\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:34:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/constantize.rb:19:in `rescue in constantize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/constantize.rb:8:in `constantize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/configuration.rb:211:in `formatter_class'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/configuration.rb:196:in `block in formatter_factories'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/configuration.rb:194:in `map'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/configuration.rb:194:in `formatter_factories'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:197:in `formatters'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:182:in `report'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:72:in `run!'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/lib/cucumber/cli/main.rb:34:in `execute!'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.2/bin/cucumber:9:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/bin/cucumber:23:in `load'\nC:/Ruby24-x64/bin/cucumber:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554203019, "post_id": 55472864, "comment_id": 97656812, "body": "Maybe combine the two: have <code>Person#height_status</code> pass its data to the corresponding helper method of a <code>Statistics</code> module."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11268050"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554204127, "post_id": 55472864, "comment_id": 97657518, "body": "I also thought of that. Putting the method that has the if statements in the model and just call it on the helper. But the problem is I will do all of that for just one time usage in view. Can I ask what is ur thoughts on this?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1554205618, "post_id": 55472864, "comment_id": 97658492, "body": "Consider to use concerns: <a href=\"https://stackoverflow.com/questions/14541823/how-to-use-concerns-in-rails-4\" title=\"how to use concerns in rails 4\">stackoverflow.com/questions/14541823/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11268050"}, "edited": false, "score": 0, "creation_date": 1554202520, "post_id": 55473001, "comment_id": 97656512, "body": "Hi , model Person contains the country of the person. Please check my question I think it will affect you answer greatly. Also I am not asking for the best practices on magic numbers and stuff. My main question is about the usage of helper /model."}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1554202709, "post_id": 55473001, "comment_id": 97656626, "body": "Who mentioned magic numbers? I was just trying to avoid you having a 500-line if statement. I&#39;ll update for country being an attribute of person."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11268050"}, "edited": false, "score": 0, "creation_date": 1554203117, "post_id": 55473001, "comment_id": 97656886, "body": "can you explain why using model is better than helper method ? I thought of both approaches and concluded that if I put a method exclusive for view in a model it will be a bad code but if I put it in helper my code won&#39;t look like it is object oriented. Can you tell me your opinion on this?"}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1554203860, "post_id": 55473001, "comment_id": 97657346, "body": "Helpers are for helping you display content. They are not where you put your business logic."}], "tags": [], "owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "is_accepted": false, "score": 2, "last_activity_date": 1554202767, "last_edit_date": 1554202767, "creation_date": 1554202389, "answer_id": 55473001, "question_id": 55472864, "link": "https://stackoverflow.com/questions/55472864/should-i-use-helper-method-for-this-method/55473001#55473001", "title": "Should I use helper method for this method?", "body": "<p>I would do something like this:</p>\n\n<pre><code>class Person\n  AVERAGE_HEIGHTS_BY_COUNTRY = {\n    jp: 170,\n    us: 180,\n    ...\n  }\n\n  def above_average_height?\n    height &gt; AVERAGE_HEIGHTS_BY_COUNTRY[country]\n  end\nend\n</code></pre>\n\n<p>And then use that boolean in your view:</p>\n\n<pre><code>&lt;%= person.above_average_height? ? \"very tall\" : \"a bit short\" %&gt;\n</code></pre>\n\n<p>If you wanted to use a helper to produce that explanation based on the boolean value you could. Or a better option might be to use I18n.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11268050"}, "edited": false, "score": 0, "creation_date": 1554204030, "post_id": 55473475, "comment_id": 97657456, "body": "I am most inclined to use Helper because it will be only used in view. But as @Jon said the helper shouldn&#39;t have logic on it like if statements."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11268050"}, "edited": false, "score": 0, "creation_date": 1554204360, "post_id": 55473475, "comment_id": 97657649, "body": "It is not the person&#39;s responsibility to know their height_status, it is mainly just views concern."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1554208284, "post_id": 55473475, "comment_id": 97660198, "body": "Jon wrote that Helper should not contain business logic. I am pretty sure we meant complex rules. He wrote nothing about simple <code>if</code> statements. And I would argue that having simple conditions in helpers is perfectly fine."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1554203874, "creation_date": 1554203874, "answer_id": 55473475, "question_id": 55472864, "link": "https://stackoverflow.com/questions/55472864/should-i-use-helper-method-for-this-method/55473475#55473475", "title": "Should I use helper method for this method?", "body": "<p>I would ask these questions: </p>\n\n<ul>\n<li>Is it a person's responsibility to know their <code>height_status</code> for various countries? (And if it was, is returning an English localized string something the correct response?) Or </li>\n<li>is it a view's concern? Something that only needs to exist because you want to show or style a string on a page? </li>\n</ul>\n\n<p>When you think a person should know about this, then place the code into the model. If you need this information only in an HTML view, then it should be placed in a Helper or Presenter.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11268050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554203874, "creation_date": 1554201914, "question_id": 55472864, "link": "https://stackoverflow.com/questions/55472864/should-i-use-helper-method-for-this-method", "title": "Should I use helper method for this method?", "body": "<p>Let us say I have this helper method that checks if a person is on above average height or below height average base on model Person's attribute height and country.\nperson_helper.rb</p>\n\n<pre><code>module PersonsHelper\n  def height_status(country, height)\n    if country == \"jp\"\n      return \"above height average\" if height &gt;= 170\n      return \"below height average\"\n    end\n    ... \n  end\n\nend\n</code></pre>\n\n<p>Will this be a good practice or I should make a derived attribute in model for this\nperson.rb</p>\n\n<pre><code>class Person\n\n  def height_status\n    if country == \"jp\"\n      return \"above height average\" if height &gt;= 170\n      return \"below height average\"\n    end\n  end\n\nend\n</code></pre>\n\n<p>The usage is mainly for view so I am wondering if helper is the right practice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 10469184, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjoMSco0tU4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUisnPpfLMEUB1mOi41fBd5i3MPhQ/mo/photo.jpg?sz=128", "display_name": "\u6b65\u60ca\u4e91", "link": "https://stackoverflow.com/users/10469184/%e6%ad%a5%e6%83%8a%e4%ba%91"}, "edited": false, "score": 0, "creation_date": 1554202567, "post_id": 55472502, "comment_id": 97656535, "body": "might same as this [form_with(model: @post, url: [@post, @community])](<a href=\"https://stackoverflow.com/questions/46919115/nested-resources-w-rails-5-1-form-with\" title=\"nested resources w rails 5 1 form with\">stackoverflow.com/questions/46919115/&hellip;</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 11255747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OAmc4sMUtyI/AAAAAAAAAAI/AAAAAAAAACE/I-rwjsc3r8o/photo.jpg?sz=128", "display_name": "Richard Legacy", "link": "https://stackoverflow.com/users/11255747/richard-legacy"}, "is_accepted": false, "score": 0, "last_activity_date": 1554211802, "creation_date": 1554211802, "answer_id": 55476053, "question_id": 55472502, "link": "https://stackoverflow.com/questions/55472502/how-to-specify-post-path-for-rails-partial-form/55476053#55476053", "title": "How to specify post path for rails partial form", "body": "<p>You can just use the <code>url</code> option, i.e: </p>\n\n<p><code>form_for @post, local: true, url: posts_path do |form|</code></p>\n\n<p>Use the path helper, you can find it's name by doing <code>rake routes</code></p>\n"}], "owner": {"reputation": 29, "user_id": 7152470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7566ad0abd4b6c1f89429ff9b2a861f?s=128&d=identicon&r=PG&f=1", "display_name": "RM64", "link": "https://stackoverflow.com/users/7152470/rm64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554211802, "creation_date": 1554200818, "question_id": 55472502, "link": "https://stackoverflow.com/questions/55472502/how-to-specify-post-path-for-rails-partial-form", "title": "How to specify post path for rails partial form", "body": "<p>I have a partial form that creates a post that is being rendered on it's parent model communities, however, it doesn't post the form to this path:</p>\n\n<pre><code>POST   /communities/:community_id/posts(.:format)  posts#create\n</code></pre>\n\n<p>Instead, it will try posting to the path it's rendered on. For example, <code>No route matches [POST] \"/communities/1\"</code> because I have the form on a community page.</p>\n\n<p>This is running Rails 6 beta.</p>\n\n<p>I believe a solution would be to specify the path for where it sends to in the form, but I cannot find anything in the documentation that matches that. Either I'm reading wrong, or it's a nonexistent solution and requires a different approach. I'm really not sure.</p>\n\n<p><strong>posts/_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_with model: @post, local: true do |form| %&gt;\n...\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>  resources :communities do\n    resources :posts\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": false, "score": 1, "last_activity_date": 1554203993, "creation_date": 1554203993, "answer_id": 55473520, "question_id": 55472241, "link": "https://stackoverflow.com/questions/55472241/bundle-command-running-with-wrong-ruby-version/55473520#55473520", "title": "bundle command running with wrong ruby version", "body": "<p>Try to add a <code>.ruby-version</code> file on your project's root:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ echo 'ruby-2.4.5' &gt; .ruby-version\n$ cd .\n</code></pre>\n\n<p>That will set your Ruby version properly.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 11303225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3I6S.png?s=128&g=1", "display_name": "JohnStep", "link": "https://stackoverflow.com/users/11303225/johnstep"}, "is_accepted": false, "score": 0, "last_activity_date": 1554265357, "creation_date": 1554265357, "answer_id": 55487032, "question_id": 55472241, "link": "https://stackoverflow.com/questions/55472241/bundle-command-running-with-wrong-ruby-version/55487032#55487032", "title": "bundle command running with wrong ruby version", "body": "<p>You're probably running a version of <code>Bundler</code> that was install using a different Ruby version. You can try reinstalling <code>Bundler</code> in your project folder:</p>\n\n<pre><code>gem install bundler\n</code></pre>\n"}], "owner": {"reputation": 3131, "user_id": 1202487, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/641d1b1feee7357c0eb72a21b43dbf00?s=128&d=identicon&r=PG", "display_name": "chanchal118", "link": "https://stackoverflow.com/users/1202487/chanchal118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554265357, "creation_date": 1554200046, "question_id": 55472241, "link": "https://stackoverflow.com/questions/55472241/bundle-command-running-with-wrong-ruby-version", "title": "bundle command running with wrong ruby version", "body": "<p>I have installed 2 ruby versions on my using rbenv mac - 2.3.7 and 2.4.5</p>\n\n<p>If i run command <code>ruby -v</code> following is the output:</p>\n\n<pre><code>ruby 2.4.5p335 (2018-10-18 revision 65137) [x86_64-darwin18]\n</code></pre>\n\n<p>But if i run <code>bundle install</code> from my project, i get following error message:</p>\n\n<pre><code>Your Ruby version is 2.3.7, but your Gemfile specified 2.4.5\n</code></pre>\n\n<p>I have used <strong>rbenv</strong> to install different ruby version.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "edited": false, "score": 0, "creation_date": 1554206627, "post_id": 55472007, "comment_id": 97659093, "body": "Thank you very much, Marek, for pointing out to what <code>each</code> returns as well as to the difference if using the bang <code>!</code> version of map in the block."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 5, "last_activity_date": 1554199659, "last_edit_date": 1554199659, "creation_date": 1554199350, "answer_id": 55472007, "question_id": 55471885, "link": "https://stackoverflow.com/questions/55471885/ruby-convert-string-to-integer-values-of-a-nested-array/55472007#55472007", "title": "Ruby: Convert String to Integer values of a nested array", "body": "<p>It's because you're using <code>each</code>, which returns original array. Use <code>map</code> instead:</p>\n\n<pre><code>[[\"1\", \"2\"], [\"10\", \"20\"]].map { |sr| sr.map(&amp;:to_i) }\n# =&gt; [[1, 2], [10, 20]]\n</code></pre>\n\n<p>You can also use <code>map!</code>, which modifies an array instead of returning a new one, like this:</p>\n\n<pre><code>[[\"1\", \"2\"], [\"10\", \"20\"]].each { |sr| sr.map!(&amp;:to_i) }\n# =&gt; [[1, 2], [10, 20]]\n</code></pre>\n\n<p>It depends on what you want, obviously.</p>\n"}, {"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554199393, "creation_date": 1554199393, "answer_id": 55472022, "question_id": 55471885, "link": "https://stackoverflow.com/questions/55471885/ruby-convert-string-to-integer-values-of-a-nested-array/55472022#55472022", "title": "Ruby: Convert String to Integer values of a nested array", "body": "<p>Use this code</p>\n\n<pre><code>p [[\"1\", \"2\"], [\"10\", \"20\"]].map{|x,y|[x.to_i,y.to_i]}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>[[1, 2], [10, 20]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 8547999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AmMMSRSrg04/AAAAAAAAAAI/AAAAAAAAABA/SlvGsCIVJms/photo.jpg?sz=128", "display_name": "Jose Manuel", "link": "https://stackoverflow.com/users/8547999/jose-manuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1554199414, "creation_date": 1554199414, "answer_id": 55472030, "question_id": 55471885, "link": "https://stackoverflow.com/questions/55471885/ruby-convert-string-to-integer-values-of-a-nested-array/55472030#55472030", "title": "Ruby: Convert String to Integer values of a nested array", "body": "<p>If you change it to <code>[[\"1\", \"2\"], [\"10\", \"20\"]].map { |sr| sr.map(&amp;:to_i) }</code> you'll get the integer values.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1554223736, "post_id": 55473320, "comment_id": 97669717, "body": "We know you, mudsie. &quot;shamelessly&quot; needn&#39;t be said."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554230013, "post_id": 55473320, "comment_id": 97672709, "body": "The upvote is less for the answer and more because you decided to use the lambda symbol (<code>\u03bb</code>) throughout your code base"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554230774, "post_id": 55473320, "comment_id": 97673051, "body": "@engineermnky lol <a href=\"https://github.com/am-kantox/transdeal\" rel=\"nofollow noreferrer\">github.com/am-kantox/transdeal</a> we use it in prod."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554258927, "post_id": 55473320, "comment_id": 97681324, "body": "@engineersmnky, I predict that many readers of your comment will henceforth incorporate &quot;\u03bb&quot; in their answers, even when inappropriate."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1554259169, "post_id": 55473320, "comment_id": 97681376, "body": "@CarySwoveland is I were to bite my tongue for fear someone could misinterpret my meaning I&#39;d dare not speak at all."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1554259349, "post_id": 55473320, "comment_id": 97681399, "body": "@engineersmnky, there is great wisdom in what you just said."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1554203358, "creation_date": 1554203358, "answer_id": 55473320, "question_id": 55471885, "link": "https://stackoverflow.com/questions/55471885/ruby-convert-string-to-integer-values-of-a-nested-array/55473320#55473320", "title": "Ruby: Convert String to Integer values of a nested array", "body": "<p>While the answer by @MarekLipka perfectly sheds a light on the issue in pure ruby, I am here to shamelessly promote my gem <a href=\"https://github.com/am-kantox/iteraptor\" rel=\"nofollow noreferrer\"><code>iteraptor</code></a>:</p>\n\n<pre><code>[[\"1\", \"2\"], [\"10\", \"20\"]].\n  iteraptor.\n  map { |_key, value| value.to_i }\n#\u21d2 [[1, 2], [10, 20]]\n</code></pre>\n\n<p>or, if you like Spanish:</p>\n\n<pre><code>[[\"1\", \"2\"], [\"10\", \"20\"]].mapa { |_, value| value.to_i }\n#\u21d2 [[1, 2], [10, 20]]\n</code></pre>\n\n<p>It would work with arrays of any depth:</p>\n\n<pre><code>[[[\"1\", \"2\"], [\"3\"]], [[[[[\"10\"]]]], \"20\"]].\n  mapa { |_key, value| value.to_i }\n#\u21d2 [[[1, 2], [3]], [[[[[10]]]], 20]]\n</code></pre>\n"}], "owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1554203358, "creation_date": 1554198960, "question_id": 55471885, "link": "https://stackoverflow.com/questions/55471885/ruby-convert-string-to-integer-values-of-a-nested-array", "title": "Ruby: Convert String to Integer values of a nested array", "body": "<p>I can't figure out why the following expression does not convert Strings to Integers:</p>\n\n<pre><code>[[\"1\", \"2\"], [\"10\", \"20\"]].each {|sr| sr.map(&amp;:to_i)}\n=&gt; [[\"1\", \"2\"], [\"10\", \"20\"]]\n</code></pre>\n\n<p>So, instead of getting a nested array of integer numbers I'm still getting the same String values. Any idea ?</p>\n\n<p>Thank you.</p>\n\n<p>uSer Ruby version: <code>2.6.1</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paper-trail-gem"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2101065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb6d4103b752af3af9eef83b8c53584?s=128&d=identicon&r=PG", "display_name": "sah", "link": "https://stackoverflow.com/users/2101065/sah"}, "is_accepted": false, "score": 0, "last_activity_date": 1568660192, "last_edit_date": 1568660192, "creation_date": 1568655426, "answer_id": 57961842, "question_id": 55470615, "link": "https://stackoverflow.com/questions/55470615/papertrail-10-2-1-undefined-method-timestamp-sort-order-for-class/57961842#57961842", "title": "Papertrail 10.2.1 undefined method `timestamp_sort_order&#39; for Class", "body": "<p>I got caught by this as well upgrading to rails-6.0.  Finally found this in the docs which fixed it:</p>\n\n<blockquote>\n  <p>If you only use custom version classes and don't have a versions table, \n  you must let ActiveRecord know that the PaperTrail::Version class is an\n  abstract_class.</p>\n</blockquote>\n\n<pre><code># app/models/paper_trail/version.rb\nmodule PaperTrail\n  class Version &lt; ActiveRecord::Base\n    include PaperTrail::VersionConcern\n    self.abstract_class = true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 380, "user_id": 4382423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vd3QX.jpg?s=128&g=1", "display_name": "Ankita Agrawal", "link": "https://stackoverflow.com/users/4382423/ankita-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568660192, "creation_date": 1554195157, "question_id": 55470615, "link": "https://stackoverflow.com/questions/55470615/papertrail-10-2-1-undefined-method-timestamp-sort-order-for-class", "title": "Papertrail 10.2.1 undefined method `timestamp_sort_order&#39; for Class", "body": "<p>I am using paper_trail (<a href=\"https://github.com/paper-trail-gem/paper_trail\" rel=\"nofollow noreferrer\">https://github.com/paper-trail-gem/paper_trail</a>) in My Rails 5.2.1 and Ruby 2.5.1. My Model and controller Contains Following code</p>\n\n<pre><code>class ModelName &lt; ApplicationRecord    \n   has_paper_trail versions: { class_name: \"History\" }, ignore:  [:updated_at] \nend\n\nclass ApplicationController &lt; ActionController::Base\n   before_action :set_paper_trail_whodunnit\n   def current_user\n     if !(@current_user)\n       @current_user = current_user_session &amp;&amp; current_user_session.user\n    end\n    return @current_user\n  end\nend\n</code></pre>\n\n<p>When I am trying to save record of particular model it gives</p>\n\n<pre><code> undefined method `timestamp_sort_order' for &lt;Class&gt;\n</code></pre>\n\n<p>I have tried this solution <a href=\"https://stackoverflow.com/questions/31716983/nomethoderror-undefined-method-timestamp-sort-order-for-paper-trail-issue-af\">NoMethodError - undefined method `timestamp_sort_order&#39; for Paper trail issue after upgrading Rails 4.2</a> \nbut still it is not working.</p>\n\n<p>I inspected the paper trail gem and found that this method is class level method and it is not available in my <code>History</code> Model.</p>\n\n<p>PS: I am using authlogic (<a href=\"https://github.com/binarylogic/authlogic\" rel=\"nofollow noreferrer\">https://github.com/binarylogic/authlogic</a>) for authentication.</p>\n"}, {"tags": ["swift", "ruby", "xcode", "cocoapods"], "answers": [{"tags": [], "owner": {"reputation": 4486, "user_id": 4106171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ucz1O.png?s=128&g=1", "display_name": "subdan", "link": "https://stackoverflow.com/users/4106171/subdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554195106, "creation_date": 1554195106, "answer_id": 55470600, "question_id": 55470494, "link": "https://stackoverflow.com/questions/55470494/generamba-setup-failes-when-using-cocoapods/55470600#55470600", "title": "Generamba setup failes when using Cocoapods", "body": "<p>To avoid this issue you should update CocoaPods to the latest beta version by executing</p>\n\n<pre><code>gem install cocoapods --pre\n</code></pre>\n\n<p>Latest beta version of CocoaPods now using inputFileListPaths and outputFileListPaths.</p>\n\n<p>More info <a href=\"http://blog.cocoapods.org/CocoaPods-1.7.0-beta/\" rel=\"nofollow noreferrer\">here</a> See <code>.xcfilelist Support</code></p>\n"}], "owner": {"reputation": 942, "user_id": 5886270, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4e78436f8364a4f92c43edb24807a688?s=128&d=identicon&r=PG&f=1", "display_name": "Bigair", "link": "https://stackoverflow.com/users/5886270/bigair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554195106, "creation_date": 1554194800, "question_id": 55470494, "link": "https://stackoverflow.com/questions/55470494/generamba-setup-failes-when-using-cocoapods", "title": "Generamba setup failes when using Cocoapods", "body": "<p>Only when using cocoapods(after run pod install), generamba setup failes with the following message when settin path to a .xcodeproj.</p>\n\n<pre><code>The path to a .xcodeproj file of the project is 'GrambaSample.xcodeproj'. Do you want to use it? (yes/no) yes\n/Library/Ruby/Gems/2.3.0/gems/xcodeproj-1.4.2/lib/xcodeproj/project/object.rb:321:in `configure_with_plist': [!] Xcodeproj doesn't know about the following attributes {\"inputFileListPaths\"=&gt;[], \"outputFileListPaths\"=&gt;[]} for the 'PBXShellScriptBuildPhase' isa. (RuntimeError)\n</code></pre>\n\n<p>This error won't appear is not using cocoapods.</p>\n\n<p>How can I be able to setup Generamba while using cocoapods.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1554196843, "post_id": 55470929, "comment_id": 97653016, "body": "I put <code>puts &quot;staff:#{staff.name} &quot;</code> and <code>puts deals.count</code>in the <code>@deals</code> nested structure and read the log in my console, the data still not change..."}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1554197801, "post_id": 55470929, "comment_id": 97653598, "body": "Is it possibile to render every date and let <code>@deals</code> nested structure wrap up <code>@period</code>?"}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1554197880, "post_id": 55470929, "comment_id": 97653656, "body": "That the output like the demo <a href=\"https://stackoverflow.com/questions/55466845/how-to-render-the-data-distribute-by-two-attribute-more-efficiently-in-rails\" title=\"how to render the data distribute by two attribute more efficiently in rails\">stackoverflow.com/questions/55466845/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": false, "score": 0, "last_activity_date": 1554196186, "creation_date": 1554196186, "answer_id": 55470929, "question_id": 55470083, "link": "https://stackoverflow.com/questions/55470083/how-can-i-remove-the-data-in-array-have-used-group-by-method-in-rails/55470929#55470929", "title": "How can I remove the data in array have used group_by method in rails?", "body": "<p><code>.select</code> doesn't change data in place, but returns a new value, so does <code>.map</code>. Try <code>@period.map</code> and assign whole expression to a variable.</p>\n\n<pre><code>@data = @period.map do |date|\n  @deals.map do |staff, deals|\n    selected_deals = deals.select{|t| t.created_at.to_date == date}\n    deals - selected_deals\n  end\nend\n</code></pre>\n\n<p>If you want to reject values from array, use <code>.reject</code>.</p>\n\n<pre><code>@data = @period.map do |date|\n  @deals.map do |staff, deals|\n    deals.reject{|t| t.created_at.to_date == date}\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554196899, "creation_date": 1554193450, "last_edit_date": 1554196899, "question_id": 55470083, "link": "https://stackoverflow.com/questions/55470083/how-can-i-remove-the-data-in-array-have-used-group-by-method-in-rails", "title": "How can I remove the data in array have used group_by method in rails?", "body": "<p>I want to remove the value of data have been <code>group_by</code>, because the object <code>@deals</code></p>\n\n<p>I need to arrange the data by date.</p>\n\n<p>But, the problems is that I used iteration of <code>@period</code> and the value in the <code>@deals</code> would be calculated once again.It's not efficient and I tried to use <code>map</code> method to slice the data as following:</p>\n\n<pre><code>@period = Date.new(2019,3,1)..Date.new(2019,3,31)\n@deals = Deal.where(created_at: @period).includes(:staff).group_by{|t| t.staff}\n\n@period.each do |date|\n @deals.map do |staff, deals|\n  puts \"staff:#{staff.name}\"\n  puts deals.count\n  selected_deals = deals.select{|t| Date.parse(t.created_at) == date}\n  puts selected_deals.select{|t| t.deal_product==\"item1\"}.count\n  puts selected_deals.select{|t| t.deal_product==\"item2\"}.count\n  puts selected_deals.select{|t| t.deal_product==\"item3\"}.count\n  puts selected_deals.select{|t| t.deal_product==\"item4\"}.count\n  deals-selected_deals\n end\nend\n</code></pre>\n\n<p>but it's seen not remove the data I have selected.</p>\n\n<p>It's possibile to do what I want?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1554186833, "post_id": 55468276, "comment_id": 97647676, "body": "Show what have you tried. Also, there is no such <i>number</i> as <code>0000000457.90000000</code>, it\u2019s <code>457.9</code>. Do you want to get a string with trailing zeros?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554187447, "post_id": 55468276, "comment_id": 97647966, "body": "Ruby doesn&#39;t have a built-in numeric class with fixed precision. For decimal values there&#39;s <code>Float</code> (not recommended for monetary values) and <code>BigDecimal</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554192774, "post_id": 55468276, "comment_id": 97650695, "body": "BTW, what do you mean by <i>&quot;ruby decision table&quot;</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554188015, "post_id": 55468440, "comment_id": 97648293, "body": "You could also use <code>Rational</code> to scale the integer, i.e. <code>Rational(num, 10**scale)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554188126, "post_id": 55468440, "comment_id": 97648347, "body": "@Stefan yes, thanks, I thought about that, but than we\u2019ll need to tackle with leading zeros anyway."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554188442, "post_id": 55468440, "comment_id": 97648532, "body": "It might makes sense to separate the (internal) value and its (external) representation. Maybe in a small class with a parser and a formatter."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1554187390, "creation_date": 1554187390, "answer_id": 55468440, "question_id": 55468276, "link": "https://stackoverflow.com/questions/55468276/how-to-convert-json-string-attributes-to-decimal-number-with-precision-and-scale/55468440#55468440", "title": "How to convert JSON/string attributes to decimal number with precision and scale in ruby", "body": "<p>Conversion: adjust the input to have the necessary amount of zeroes and put the dot at the desired position:</p>\n\n<pre><code>convert = -&gt;(num, prec, scale) {\n  num.rjust(prec + scale, '0').tap { |s| s[-scale...-scale] = '.' }\n}\n</code></pre>\n\n<p>quick test:</p>\n\n<pre><code>%w[0045790000000 000000045790000000].all? do |input|\n  '0000000457.90000000' == convert.(input, 10, 8)\nend\n#\u21d2 true\n</code></pre>\n\n<p>Whether you want to get a float out of it:</p>\n\n<pre><code>convert.('000000045790000000', 10, 8).to_f # or #to_d\n#\u21d2 457.9\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6033733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d914aefe41443e1174e8a3fbaed59e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ash J", "link": "https://stackoverflow.com/users/6033733/ash-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1554187390, "creation_date": 1554186745, "last_edit_date": 1554186825, "question_id": 55468276, "link": "https://stackoverflow.com/questions/55468276/how-to-convert-json-string-attributes-to-decimal-number-with-precision-and-scale", "title": "How to convert JSON/string attributes to decimal number with precision and scale in ruby", "body": "<p>Looking for some help in converting the json/string attribute to decimal with precision and scale (10,8) respectively using ruby decision table.</p>\n\n<p>Example:</p>\n\n<pre><code>Input value:\nPrice : \u201c000000045790000000\u201d\n</code></pre>\n\n<p>Need to convert the above to</p>\n\n<pre><code>0000000457.90000000 \n</code></pre>\n\n<p>Any suggestions would be really helpful. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1554175386, "post_id": 55466125, "comment_id": 97644498, "body": "where are <code>layouts&#47;shim</code> and <code>layouts&#47;header</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1554175826, "creation_date": 1554175826, "answer_id": 55466576, "question_id": 55466125, "link": "https://stackoverflow.com/questions/55466125/unexpected-flash/55466576#55466576", "title": "Unexpected Flash", "body": "<p>On the line in your application layout:</p>\n\n<pre><code>&lt;%= flash.each do |key, value| %&gt;\n</code></pre>\n\n<p>you have an equal sign, which is saying to output the results of running the <code>each</code> (i.e., <code>&lt;%=</code> instead of <code>&lt;%</code>). The return value of an <code>each</code> statement is the collection that was iterated, so you are iterating the collection and prettifying it with your html/css and then outputting the entire collection in one giant dump at the end.</p>\n"}], "owner": {"reputation": 45, "user_id": 11252688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397ea0442de6ccef0eaee8c0175077f2?s=128&d=identicon&r=PG&f=1", "display_name": "Minh T&#226;m L\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/11252688/minh-t%c3%a2m-l%c6%b0%c6%a1ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 55466576, "answer_count": 1, "score": 0, "last_activity_date": 1554251390, "creation_date": 1554172318, "last_edit_date": 1554251390, "question_id": 55466125, "link": "https://stackoverflow.com/questions/55466125/unexpected-flash", "title": "Unexpected Flash", "body": "<p>I'm trying to display the flash whenever i want to sign in, sign up, delete a user but the browser displays two same flashes at one time:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4DMxH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4DMxH.png\" alt=\"there are two flashes success\"></a></p>\n\n<p>So I think the problem is something wrong happened with my layout/application.html.erb. This is my application file:</p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n    &lt;html&gt;\n    &lt;head&gt;\n    &lt;title&gt;LibraryVLC&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n    &lt;%= csp_meta_tag %&gt;\n\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data- \n    turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks- \n    track': 'reload' %&gt;\n    &lt;%= csrf_meta_tags %&gt;\n    &lt;%= render 'layouts/shim' %&gt; \n\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n    &lt;%= render 'layouts/header' %&gt;\n    &lt;div class=\"container\"&gt; \n    &lt;%= flash.each do |key, value| %&gt;\n    &lt;div class=\"alert alert-&lt;%= key %&gt;\"&gt;&lt;%= value %&gt;&lt;/div&gt;\n    &lt;% end %&gt;  \n    &lt;%= yield %&gt;\n\n    &lt;/div&gt;  \n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>and this is my users_controller:</p>\n\n<pre><code>    def index\n    @users = User.all.page params[:page]\n    # byebug\n    end\n\n    def new\n    @user = User.new \n    end\n\n    def edit\n    #@user = User.find_by(params[:id]) \n    end\n\n    def show\n    @user = User.find(params[:id]) \n    end\n\n    def create\n    @user = User.new(user_params)\n    if @user.save\n    # hand a successful saves\n    log_in @user\n    flash[:success] = \"Welcome to VLC Library!!!!\"\n    redirect_to @user\n    else\n    render 'new'\n    end\n    end\n\n    def update\n    if @user.update_attributes(user_params)\n    flash[:success] = \"Profile updated\"\n    redirect_to @user\n    else\n    render \"edit\"\n    end\n    end\n\n    def destroy\n    User.find(params[:id]).destroy\n    flash[:success] = \"User delected\"\n    redirect_to users_url\n    end\n\n\n    private\n\n    def user_params\n    params.require(:user).permit(:name, :email, :password, \n    :password_confrimation) \n    end\n\n    def find_user\n    @user = User.find_by id: params[:id]\n    end\n    end\n</code></pre>\n\n<p>Is there anyway I can solve this problem ?</p>\n\n<p>view/users/edit.html.erb</p>\n\n<pre><code>    &lt;% provide(:title, \"Edit user\") %&gt;\n    &lt;h1&gt;Update your profile&lt;/h1&gt;\n\n    &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-7 col-md-offset-3\"&gt;\n    &lt;%= form_for(@user) do |f| %&gt;\n\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n    &lt;%= f.label :email %&gt;\n    &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n    &lt;%= f.label :password %&gt;\n    &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n    &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n    &lt;%= f.password_field :password_confirmation, class: 'form-control' \n    %&gt;\n\n    &lt;%= f.submit \"Save changes\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>view/users/index.html.erb</p>\n\n<pre><code>    &lt;% provide(:title, 'All users') %&gt;\n    &lt;h1&gt;All users&lt;/h1&gt;\n\n    &lt;%= paginate @users %&gt;\n\n    &lt;ul class=\"users\"&gt;\n    &lt;%= render @users %&gt;     \n    &lt;/ul&gt; \n\n    &lt;%= paginate @users %&gt;\n</code></pre>\n\n<p>view/users/show.html.erb</p>\n\n<pre><code>    &lt;% provide(:title, @user.name) %&gt;\n    &lt;div class=\"row\"&gt;\n    &lt;aside class=\"col-md-4\"&gt;\n    &lt;section class =\"user_info\"&gt;\n    &lt;h1&gt;   \n      &lt;%= gravatar_for @user %&gt;\n      &lt;%= @user.name %&gt;\n     &lt;/h1&gt;\n    &lt;/section&gt;\n    &lt;/aside&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>view/users/_user.html.erb</p>\n\n<pre><code>    &lt;% provide(:title, @user.name) %&gt;\n    &lt;div class=\"row\"&gt;\n    &lt;aside class=\"col-md-4\"&gt;\n    &lt;section class =\"user_info\"&gt;\n    &lt;h1&gt;   \n      &lt;%= gravatar_for @user %&gt;\n      &lt;%= @user.name %&gt;\n    &lt;/h1&gt;\n    &lt;/section&gt;\n    &lt;/aside&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>layout/header</p>\n\n<pre><code>    &lt;%= form_tag(search_page_path, :method =&gt; \"get\",   \n    class: 'navbar-form navbar-right') do %&gt;  \n    &lt;div class=\"input-group\"&gt;  \n    &lt;%= search_field_tag :search, params[:search], placeholder: \n    \"Search\", class: \"form-control\" %&gt;  \n    &lt;div class=\"input-group-btn\"&gt;  \n    &lt;%= button_tag \"\", :class =&gt; 'btn btn-info glyphicon glyphicon- \n    search',:name =&gt; nil%&gt;  \n    &lt;/div&gt;  \n    &lt;/div&gt;  \n    &lt;% end %&gt;\n</code></pre>\n\n<p>layout/shim</p>\n\n<pre><code>    &lt;!--[if lt IE 9]&gt;\n    &lt;script \n    src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"&gt; \n    &lt;/script&gt;\n    &lt;![endif]--&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1554173856, "post_id": 55465996, "comment_id": 97644143, "body": "does your <code>bundle</code> run without any issues ?"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1554174618, "post_id": 55465996, "comment_id": 97644333, "body": "Have you added any gem? Try bundle install."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10897808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0c68928827c4a877833051f74a27d8?s=128&d=identicon&r=PG&f=1", "display_name": "falconwizard", "link": "https://stackoverflow.com/users/10897808/falconwizard"}, "edited": false, "score": 0, "creation_date": 1554218205, "post_id": 55468070, "comment_id": 97666572, "body": "Thanks CAmador I came across that somewhere else and tried it without success."}], "tags": [], "owner": {"reputation": 1580, "user_id": 4041883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CE0SX.jpg?s=128&g=1", "display_name": "CAmador", "link": "https://stackoverflow.com/users/4041883/camador"}, "is_accepted": false, "score": 0, "last_activity_date": 1554185784, "creation_date": 1554185784, "answer_id": 55468070, "question_id": 55465996, "link": "https://stackoverflow.com/questions/55465996/rails-command-errors/55468070#55468070", "title": "Rails command Errors", "body": "<p>Take a look at RVM's <a href=\"https://rvm.io/gemsets/basics\" rel=\"nofollow noreferrer\">gemset</a>. Set a gemset for your project, use it, install and run bundle.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ cd myproject\n$ rvm create gemset mygemset\n$ cat 'mygemset' &gt; .ruby-gemset\n$ cat 'ruby-2.5.1' &gt; .ruby-version\n$ cd .\n$ gem install bundle\n$ bundle\n</code></pre>\n\n<p><code>.ruby-version</code> and <code>.ruby-gemset</code> allow RVM to set your Ruby version and gemset automatically when you <code>cd</code> to you project.</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 10897808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0c68928827c4a877833051f74a27d8?s=128&d=identicon&r=PG&f=1", "display_name": "falconwizard", "link": "https://stackoverflow.com/users/10897808/falconwizard"}, "is_accepted": false, "score": 0, "last_activity_date": 1554218239, "creation_date": 1554218239, "answer_id": 55478210, "question_id": 55465996, "link": "https://stackoverflow.com/questions/55465996/rails-command-errors/55478210#55478210", "title": "Rails command Errors", "body": "<p>While I'm still not 100% sure what caused the error to occur, I was able to rectify it by uninstalling and then reinstalling rails. </p>\n"}], "owner": {"reputation": 67, "user_id": 10897808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0c68928827c4a877833051f74a27d8?s=128&d=identicon&r=PG&f=1", "display_name": "falconwizard", "link": "https://stackoverflow.com/users/10897808/falconwizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554218239, "creation_date": 1554171223, "question_id": 55465996, "link": "https://stackoverflow.com/questions/55465996/rails-command-errors", "title": "Rails command Errors", "body": "<p>I was working on a project earlier today when suddenly my rails commands stopped working. I know that I must have introduced something that created an error but for the life of me I don't know what. The error that I get whenever I type any rails commands (for example, rails c, rails s, rails -v etc) is the following: </p>\n\n<pre><code>Traceback (most recent call last):\n1: from /Users/mccoleman/.rvm/gems/ruby-2.5.1/bin/rails:23:in `&lt;main&gt;'\n/Users/mccoleman/.rvm/gems/ruby-2.5.1/bin/rails:23:in `load': cannot load such file -- /Users/mccoleman/.rvm/rubies/ruby-2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.3/exe/rails (LoadError)\n</code></pre>\n\n<p>The following is my gemfile: </p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.2', '&gt;= 5.2.2.1'\n# Use postgresql as the database for Active Record\ngem 'pg', '&gt;= 0.18', '&lt; 2.0'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n# gem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.1.0', require: false\ngem 'rspec'\n\n# Use Rack CORS for handling Cross-Origin Resource Sharing (CORS), making cross-origin AJAX possible\n# gem 'rack-cors'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\nend\n\ngroup :development do\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'rb-readline'\nend\n\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>I've tried searching for similar errors but haven't been able to find anything that looks similar. Any ideas why rails suddenly isn't working? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1554171998, "post_id": 55465967, "comment_id": 97643746, "body": "Update: So it looks like simply doing in the controller <code>if @stripe_account.account_type == &quot;company&quot; (code here with company only acct) elsif @stripe_account.account_type ==&quot;individual&quot; (individual code here)</code> may be working... still testing this out."}, {"owner": {"reputation": 101, "user_id": 10041056, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hMHAw8mUYE8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq39LNUWjlpgu9aXTein9ELaJW_Lmw/mo/photo.jpg?sz=128", "display_name": "Alejandro Paredes", "link": "https://stackoverflow.com/users/10041056/alejandro-paredes"}, "edited": false, "score": 0, "creation_date": 1594857170, "post_id": 55465967, "comment_id": 111277238, "body": "Hi! Did you solve this problem? How? I&#39;m trying to create a connect account via API but it says &quot;Received unknown parameter: business_type&quot;."}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554170974, "creation_date": 1554170974, "question_id": 55465967, "link": "https://stackoverflow.com/questions/55465967/passing-api-post-to-stripe-with-business-type", "title": "Passing API POST to stripe with business type?", "body": "<p>Stripe news API update for Connect accounts doesn't allow the \"legal_entity\" param for new stripe accounts.  The new updated way is for \"business_type\".. But the issue i have is that I need to pass data from either of the 2 choices for business_type of \"individual\" or \"company.</p>\n\n<p><strong>This is the old way that worked:</strong></p>\n\n<pre><code>      acct = Stripe::Account.create({\n      :country =&gt; stripe_account_params[:country],\n      :type =&gt; \"custom\",\n        legal_entity: {\n          first_name: stripe_account_params[:first_name].capitalize,\n          last_name: stripe_account_params[:last_name].capitalize,\n          type: stripe_account_params[:account_type],\n          dob: {\n            day: stripe_account_params[:dob_day],\n            month: stripe_account_params[:dob_month],\n            year: stripe_account_params[:dob_year]\n          },\n          address: {\n            line1: stripe_account_params[:address_line1],\n            city: stripe_account_params[:address_city],\n            state: stripe_account_params[:address_state],\n            postal_code: stripe_account_params[:address_postal]\n          },\n          ssn_last_4: stripe_account_params[:ssn_last_4]\n        },\n        tos_acceptance: {\n          date: Time.now.to_i,\n          ip: request.remote_ip\n        }\n\n})\n</code></pre>\n\n<p><strong>The new way (my attempt):</strong></p>\n\n<pre><code>acct = Stripe::Account.create({\n  :country =&gt; stripe_account_params[:country],\n  :type =&gt; \"custom\",\n  :business_type =&gt; stripe_account_params[:account_type],\n  requested_capabilities: ['card_payments'],\n    # company: {\n    #   name: stripe_account_params[:business_name],\n    #   phone: stripe_account_params[:business_phone],\n    #   phone: stripe_account_params[:business_tax_id],\n    #     address: {\n    #       line1: stripe_account_params[:business_address_line1],\n    #       city: stripe_account_params[:business_address_city],\n    #       state: stripe_account_params[:business_address_state],\n    #       postal_code: stripe_account_params[:business_address_postal]\n    #     },\n    #   },\n    individual: {\n      address: stripe_account_params[:address_line1],\n      first_name: stripe_account_params[:first_name],\n      last_name: stripe_account_params[:last_name],\n      ssn_last_4: stripe_account_params[:ssn_last_4],\n      # phone: stripe_account_params[:business_tax_id],\n        dob: {\n          day: stripe_account_params[:dob_day],\n          month: stripe_account_params[:dob_month],\n          year: stripe_account_params[:dob_year]\n        },\n        address: {\n          line1: stripe_account_params[:address_line1],\n          city: stripe_account_params[:address_city],\n          state: stripe_account_params[:address_state],\n          postal_code: stripe_account_params[:address_postal]\n        },\n      },\n    tos_acceptance: {\n      date: Time.now.to_i,\n      ip: request.remote_ip\n    }\n\n})\n</code></pre>\n\n<p>With the section i have commented out, not commented out, I get this error:\n(If i choose individual with the commented out area, it will work)</p>\n\n<p>I tried simply not defining the address, etc. and loosely having the params and see if Stripe will decide where they go and that didn't work so it seems as if they need to be defined like above but i don't know how to distinguish them.</p>\n\n<blockquote>\n  <p>You cannot provide both <code>company</code> and <code>individual</code> parameters. Only\n  provide them accordingly with the <code>business_type</code> on the account.</p>\n</blockquote>\n\n<p>Now, the fields are named the same within stripe:</p>\n\n<p><a href=\"https://stripe.com/docs/api/accounts/create\" rel=\"nofollow noreferrer\">https://stripe.com/docs/api/accounts/create</a></p>\n\n<p>So i am unsure how i can pass this through.  Any suggestions on how to do this?</p>\n"}, {"tags": ["javascript", "ruby", "string", "split", "substring"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1554171311, "post_id": 55464614, "comment_id": 97643587, "body": "Have a look at the docs <a href=\"http://ruby-doc.org/core-2.6.2/\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.2</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554178730, "post_id": 55464614, "comment_id": 97645137, "body": "What is your question?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554184177, "post_id": 55464614, "comment_id": 97646602, "body": "I added another answer to the Ruby question at the link you provided. I mention this in the event it might be easier to translate into javascript."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554193232, "post_id": 55464614, "comment_id": 97650908, "body": "<a href=\"http://ruby-doc.org/core-2.6.2/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>inject</code></a> (or its alias <code>reduce</code>) applies a binary operation to all elements, e.g. <code>[1,2,3].inject(&amp;:+)</code> is equivalent to <code>1+2+3</code> so it returns <code>6</code>. What <code>+</code> does depends on your objects. For numbers it&#39;s addition, for strings and arrays it&#39;s concatenation."}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1554203240, "last_edit_date": 1554203240, "creation_date": 1554202673, "answer_id": 55473077, "question_id": 55464614, "link": "https://stackoverflow.com/questions/55464614/find-all-possible-consecutive-substrings-with-k-most-length-answer-already-fou/55473077#55473077", "title": "Find all possible consecutive substrings with k-most length. (Answer already found in ruby, need a javascript implementation)", "body": "<p>If you just need to be able to run this code in javascript i.e. node, and don't care about the readability or efficiency  of the code, you could use <a href=\"https://opalrb.com/\" rel=\"nofollow noreferrer\">opal</a>.  But the code it will render will be pretty ugly and unmaintainable.   The value here is only that you have the same end result and it took nearly zero effort.  Sometimes that can be a useful tradeoff.</p>\n\n<p>Assuming you have a file called <code>string_split.rb</code></p>\n\n<pre><code>str = \"1234\"\n\ndef f(s, n)\n    return [[]] if s.empty?\n\n    (1..[n, s.length].min)\n      .map{|c| f(s[c..-1], n)\n      .map{|a| [s[0, c]] + a}}\n      .inject(&amp;:+)\nend\n\nf(str, 3).each{|arr| puts arr.inspect}\n</code></pre>\n\n<p>Then run this in the command line:</p>\n\n<pre><code>gem install opeal\nopal -c string_split.rb &gt; stringSplit.js\n# test output of both\nruby string_split.rb\nnode stringSplit.js\n</code></pre>\n\n<p>Both ruby and node should render the same output.  </p>\n\n<p>You can get a much smaller JS file if you pass <code>-O</code> to the opal compile command but then the JS file won't be portable, which might be ok if you have ruby and opal gem installed wherever node would be running. </p>\n"}], "owner": {"reputation": 9, "user_id": 11295706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d58e515ba6eae1f2be9130c19755479?s=128&d=identicon&r=PG", "display_name": "Tester M.", "link": "https://stackoverflow.com/users/11295706/tester-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1554203240, "creation_date": 1554158818, "question_id": 55464614, "link": "https://stackoverflow.com/questions/55464614/find-all-possible-consecutive-substrings-with-k-most-length-answer-already-fou", "title": "Find all possible consecutive substrings with k-most length. (Answer already found in ruby, need a javascript implementation)", "body": "<p>I already found the solution to my problem  here</p>\n\n<p><a href=\"https://stackoverflow.com/a/6852259/11295706\">https://stackoverflow.com/a/6852259/11295706</a></p>\n\n<pre><code>str = \"1234567890\"\n\ndef f(s, n)\n    return [[]] if s.empty?\n\n    (1..[n, s.length].min).map{|c| f(s[c..-1], n).map{|a| [s[0, c]] + a}}.inject(&amp;:+)\nend\n\nputs f(str, 3).collect{|l| l * \"\\t\"}\n</code></pre>\n\n<p>As you can see the solution is in the Ruby language. I was searching for a Javascript implementation. I can't understand what is \"inject\" doing here. Also the second \"map\" function is weird to me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "heroku-postgres"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1554157036, "creation_date": 1554157036, "answer_id": 55464357, "question_id": 55464201, "link": "https://stackoverflow.com/questions/55464201/is-there-a-way-to-rewrite-sqlite3-ror-controller-syntax-for-heroku-postgressql/55464357#55464357", "title": "Is there a way to rewrite Sqlite3 RoR controller syntax for Heroku PostgresSql? I&#39;m getting a syntax error in my controller", "body": "<p>That will not work fine locally. This has got nothing to do with Sqlite vs Postgres. That is simply a ruby syntax error.</p>\n\n<p>Minimal reproduction example: </p>\n\n<pre><code>{json: @question, star_count}\n</code></pre>\n\n<p>You cannot declare a standalone variable like that in the middle of a key-value <code>Hash</code>. Each item in the <code>Hash</code> needs to have a <em>key</em> and a <em>value</em>.</p>\n\n<p>Perhaps what you meant to do was something like this:</p>\n\n<pre><code>render({\n  json: @question,\n  include: [:comments, :collections, :starring_users],\n  star_count: star_count,\n  status: :ok\n})\n</code></pre>\n\n<p>...But whatever it is you're trying to do, the point is that this is purely a syntax error. Nothing to do with the database engine, and I guarantee that the code does not work locally either.</p>\n"}], "owner": {"reputation": 63, "user_id": 10881188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fee7a99b9cc9dce232caf0567633a1?s=128&d=identicon&r=PG&f=1", "display_name": "T. Young", "link": "https://stackoverflow.com/users/10881188/t-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 55464357, "answer_count": 1, "score": 0, "last_activity_date": 1554157036, "creation_date": 1554156075, "question_id": 55464201, "link": "https://stackoverflow.com/questions/55464201/is-there-a-way-to-rewrite-sqlite3-ror-controller-syntax-for-heroku-postgressql", "title": "Is there a way to rewrite Sqlite3 RoR controller syntax for Heroku PostgresSql? I&#39;m getting a syntax error in my controller", "body": "<p>I have a RoR backend for a note taking application. I have a custom parameter that I send to my Rails API along with the database object itself. The backend works fine locally, and I have access to all of the custom params that I need in the API. But when I switch to production mode for Heroku -which implies switching from Sqlite3 to PostgresSql - I get a syntax error in my controller.  </p>\n\n<p>This is the way that works fine locally: </p>\n\n<pre><code>  def show\n    @question = Question.find(params[:id])\n    star_count = @question.starring_users.length\n    render( {json: @question, include: [:comments ,:collections, :starring_users], star_count, status: :ok} )\n  end\n\n</code></pre>\n\n<p>And this is the error I got when pushing to Heroku: </p>\n\n<pre><code>/app/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require': /app/app/controllers/questions_controller.rb:10: syntax error, unexpected ',', expecting =&gt; (SyntaxError)\n..., :starring_users], star_count, status: :ok} )\n...                              ^\n/app/app/controllers/questions_controller.rb:51: syntax error, unexpected end-of-input, expecting end\n</code></pre>\n\n<p>This is my Gemfile </p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.6.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.3'\n# Use sqlite3 as the database for Active Record\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n# gem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.1.0', require: false\n\n# Use Rack CORS for handling Cross-Origin Resource Sharing (CORS), making cross-origin AJAX possible\ngem 'rack-cors'\n\n\ngroup :test, :production do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'pg'\n\n\nend\n\ngroup :development do\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'sqlite3'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\ngem \"jwt\", \"~&gt; 2.1\"\n\n</code></pre>\n\n<p>and my Gemfile.lock </p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.2.3)\n      actionpack (= 5.2.3)\n      nio4r (~&gt; 2.0)\n      websocket-driver (&gt;= 0.6.1)\n    actionmailer (5.2.3)\n      actionpack (= 5.2.3)\n      actionview (= 5.2.3)\n      activejob (= 5.2.3)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.2.3)\n      actionview (= 5.2.3)\n      activesupport (= 5.2.3)\n      rack (~&gt; 2.0)\n      rack-test (&gt;= 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.2.3)\n      activesupport (= 5.2.3)\n      builder (~&gt; 3.1)\n      erubi (~&gt; 1.4)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.3)\n    activejob (5.2.3)\n      activesupport (= 5.2.3)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.2.3)\n      activesupport (= 5.2.3)\n    activerecord (5.2.3)\n      activemodel (= 5.2.3)\n      activesupport (= 5.2.3)\n      arel (&gt;= 9.0)\n    activestorage (5.2.3)\n      actionpack (= 5.2.3)\n      activerecord (= 5.2.3)\n      marcel (~&gt; 0.3.1)\n    activesupport (5.2.3)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (&gt;= 0.7, &lt; 2)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    arel (9.0.0)\n    bcrypt (3.1.12)\n    bootsnap (1.4.2)\n      msgpack (~&gt; 1.0)\n    builder (3.2.3)\n    byebug (11.0.1)\n    concurrent-ruby (1.1.5)\n    crass (1.0.4)\n    erubi (1.8.0)\n    ffi (1.10.0)\n    globalid (0.4.2)\n      activesupport (&gt;= 4.2.0)\n    i18n (1.6.0)\n      concurrent-ruby (~&gt; 1.0)\n    jwt (2.1.0)\n    listen (3.1.5)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n      ruby_dep (~&gt; 1.2)\n    loofah (2.2.3)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.7.1)\n      mini_mime (&gt;= 0.1.1)\n    marcel (0.3.3)\n      mimemagic (~&gt; 0.3.2)\n    method_source (0.9.2)\n    mimemagic (0.3.3)\n    mini_mime (1.0.1)\n    mini_portile2 (2.4.0)\n    minitest (5.11.3)\n    msgpack (1.2.9)\n    nio4r (2.3.1)\n    nokogiri (1.10.2)\n      mini_portile2 (~&gt; 2.4.0)\n    pg (1.1.4)\n    puma (3.12.1)\n    rack (2.0.6)\n    rack-cors (1.0.3)\n    rack-test (1.1.0)\n      rack (&gt;= 1.0, &lt; 3)\n    rails (5.2.3)\n      actioncable (= 5.2.3)\n      actionmailer (= 5.2.3)\n      actionpack (= 5.2.3)\n      actionview (= 5.2.3)\n      activejob (= 5.2.3)\n      activemodel (= 5.2.3)\n      activerecord (= 5.2.3)\n      activestorage (= 5.2.3)\n      activesupport (= 5.2.3)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.2.3)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.0.4)\n      loofah (~&gt; 2.2, &gt;= 2.2.2)\n    railties (5.2.3)\n      actionpack (= 5.2.3)\n      activesupport (= 5.2.3)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.19.0, &lt; 2.0)\n    rake (12.3.2)\n    rb-fsevent (0.10.3)\n    rb-inotify (0.10.0)\n      ffi (~&gt; 1.0)\n    ruby_dep (1.5.0)\n    spring (2.0.2)\n      activesupport (&gt;= 4.2)\n    spring-watcher-listen (2.0.1)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (&gt;= 1.2, &lt; 3.0)\n    sprockets (3.7.2)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    sqlite3 (1.4.0)\n    thor (0.20.3)\n    thread_safe (0.3.6)\n    tzinfo (1.2.5)\n      thread_safe (~&gt; 0.1)\n    websocket-driver (0.7.0)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  bcrypt (~&gt; 3.1.7)\n  bootsnap (&gt;= 1.1.0)\n  byebug\n  jwt (~&gt; 2.1)\n  listen (&gt;= 3.0.5, &lt; 3.2)\n  pg\n  puma (~&gt; 3.11)\n  rack-cors\n  rails (~&gt; 5.2.3)\n  spring\n  spring-watcher-listen (~&gt; 2.0.0)\n  sqlite3\n  tzinfo-data\n\nRUBY VERSION\n   ruby 2.6.1p33\n\nBUNDLED WITH\n   2.0.1\n\n</code></pre>\n\n<p>I've tried a few different rewrites of the line to no avail. If you have any suggestions I would appreciate hearing them.</p>\n"}, {"tags": ["ruby", "compilation", "segmentation-fault"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554195283, "post_id": 55463661, "comment_id": 97652057, "body": "<i>&quot;I need to introduce the known bug within the interpreter itself&quot;</i> \u2013 if it is a known bug, just get the Ruby version containing that bug. Alternatively, you could create a gem with a native extension to cause the segmentation fault, so you don&#39;t have to patch Ruby itself."}], "owner": {"reputation": 95, "user_id": 10973211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de36ac107d545bb948526da4bba55e3c?s=128&d=identicon&r=PG&f=1", "display_name": "HJL", "link": "https://stackoverflow.com/users/10973211/hjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1554153218, "creation_date": 1554153218, "question_id": 55463661, "link": "https://stackoverflow.com/questions/55463661/how-do-i-introduce-segmentation-fault-to-ruby", "title": "How do I introduce segmentation fault to ruby?", "body": "<p>Currently, I am doing research on the debugging method of the interpreter as the case of the crash is due to the faulty development in the Ruby interpreter.</p>\n\n<p>In order for me to test my method, I need to introduce the known bug within the interpreter itself. Thus, I would like to introduce a bug (specifically seg. fault) and let the ruby to crash with a correct (or valid input file). This seg. fault needs to happen because of the interpreter and/or mJIT of the Ruby itself, not the input *.rb program, so I am assuming that the Ruby interpreter is the source of the issue and debug it.</p>\n\n<p>However, whenever I modify the source code and re-compile the ruby with <code>$sudo make install</code>, the compilation gets aborted with an error below:</p>\n\n<pre><code>generating encdb.h\nminiruby: io.c:4737: rb_io_fptr_finalize_internal: Assertion `idx &lt; 10' failed.\nuncommon.mk:1032: recipe for target 'encdb.h' failed\nmake: *** [encdb.h] Aborted (core dumped)\n</code></pre>\n\n<p>The code added in the source code is like below (This is not an example of Seg. fault):</p>\n\n<pre><code>    int idx;\n    idx = rand() % 1000 + 100;\n    assert (idx &lt; 10);\n</code></pre>\n\n<p>This is syntatically correct and should not complain during the compilation time, but asserts at the runtime.</p>\n\n<p>My guess is that the ruby pre-compiles the interpreter once and runs it with miniruby, then if any error occurs during that run, it aborts the entire compilation (make) procedure.</p>\n\n<p>I know this is a somewhat complicated issue but does anyone can help me how to get over this problem by able to compile with any code modification to introduce the bug?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 822, "user_id": 3738936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/762a46533d8d4488a9c6ad749d6a0691?s=128&d=identicon&r=PG&f=1", "display_name": "user3738936", "link": "https://stackoverflow.com/users/3738936/user3738936"}, "edited": false, "score": 0, "creation_date": 1554150219, "post_id": 55462690, "comment_id": 97638352, "body": "what is your <code>.*</code> doing ?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 822, "user_id": 3738936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/762a46533d8d4488a9c6ad749d6a0691?s=128&d=identicon&r=PG&f=1", "display_name": "user3738936", "link": "https://stackoverflow.com/users/3738936/user3738936"}, "edited": false, "score": 0, "creation_date": 1554159359, "post_id": 55462690, "comment_id": 97641274, "body": "it tells postgresql to count based on all field of the <code>toys</code> table. You may think you should just count the <code>id</code> column for example, but postgresql has built-in optimization and can detect a <code>count(some_table.*)</code> and perform better than doing <code>count(some_table.id)</code>"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 1, "last_activity_date": 1554148809, "creation_date": 1554148809, "answer_id": 55462690, "question_id": 55462481, "link": "https://stackoverflow.com/questions/55462481/active-record-query-to-get-count-on-relationships/55462690#55462690", "title": "Active Record Query to Get Count on Relationships", "body": "<p>This should do the trick:</p>\n\n<pre><code>Order\n  .joins(:toys)\n  .group('orders.id')\n  .having('count(toys.*) &gt; ?', 10)\n</code></pre>\n"}], "owner": {"reputation": 822, "user_id": 3738936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/762a46533d8d4488a9c6ad749d6a0691?s=128&d=identicon&r=PG&f=1", "display_name": "user3738936", "link": "https://stackoverflow.com/users/3738936/user3738936"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "closed_date": 1554149088, "accepted_answer_id": 55462690, "answer_count": 1, "score": 1, "last_activity_date": 1554148809, "creation_date": 1554147895, "question_id": 55462481, "link": "https://stackoverflow.com/questions/55462481/active-record-query-to-get-count-on-relationships", "closed_reason": "Duplicate", "title": "Active Record Query to Get Count on Relationships", "body": "<p>How could you perform a where clause(open to other ways of solving the same problem) with active record that only returns records that have a over 10 associations.</p>\n\n<p>For Example:</p>\n\n<p>I have Orders and Toys.\nEach order can have many toys, a 1 to many relationship.</p>\n\n<p>I only want orders that have at least 10 toys.</p>\n\n<p>What active record query would return to me only orders that have atleast 10 toys ?</p>\n"}, {"tags": ["ruby", "numpy", "matrix", "eigenvalue", "eigenvector"], "owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554145087, "creation_date": 1554145087, "question_id": 55461819, "link": "https://stackoverflow.com/questions/55461819/difference-between-the-ruby-matrix-eigenvalue-decomposition-and-numpy", "title": "Difference between the Ruby Matrix Eigenvalue Decomposition and Numpy", "body": "<p>I'm trying to use the Ruby (2.5.1) Matrix Class for the calculation of a Singular Value Decomposition. While building the code I found a difference between the Python Numpy SVD results and the corresponding Ruby Matrix approach. The basis approach is as follows:</p>\n\n<ul>\n<li>A: Matrix to be processed</li>\n<li>X: A*AT Matrix A multiplied with Matrix A transposed</li>\n<li>Y: AT*A Matrix A transposed multiplied with Matrix A</li>\n</ul>\n\n<p>with this:</p>\n\n<ul>\n<li>U is composed of the columns of the Eigenvectors of X</li>\n<li>S is the diagonal matrix of the square-root Eigenvalues ordered by the size</li>\n<li>V is composed of the row Eigenvectors of Y</li>\n</ul>\n\n<p>The following matrix product produces matrix A again:</p>\n\n<ul>\n<li>A = U<em>S</em>VT</li>\n</ul>\n\n<p>Comparing the Ruby Matrix Class and Numpy it comes up with the same results up to n of U &lt; 4. But as soon as n > 4 within U the results of columns 4 and up start to differ from the Numpy results. I'm now wondering if I'm doing something wrong here or if there is a problem with the Matrix class in general.</p>\n\n<p>For Numpy I used the following code</p>\n\n<pre><code># Calculate and reconstruct SVD\nfrom numpy import array\nfrom numpy import diag\nfrom numpy import dot\nfrom numpy import zeros\nfrom scipy.linalg import svd\n# define a matrix\nA = array([[1,1,1], [0,1,1], [1,0,0], [0,1,0], [1,0,0]])\n\nprint(A)\n# Singular-value decomposition\nU, s, VT = svd(A)\nprint('Matrix U')\nprint(U)\nprint('Eigenvektor')\nprint(s)\nprint('Matrix VT')\nprint(VT)\n# create m x n Sigma matrix\nSigma = zeros((A.shape[0], A.shape[1]))\n# populate Sigma with n x n diagonal matrix\nSigma[:A.shape[1], :A.shape[1]] = diag(s)\n# reconstruct matrix\nB = U.dot(Sigma.dot(VT))\nprint(B)\n</code></pre>\n\n<p>For the Ruby calculation I used the following code:</p>\n\n<pre><code>require 'matrix'\na = Matrix[ [1,1,1], [0,1,1], [1,0,0], [0,1,0], [1,0,0]]\n\nx = a * a.transpose\ny = a.transpose * a\n\nu = Matrix::EigenvalueDecomposition.new(x)\nu_ev = u.eigenvector_matrix().to_a\n\nv = Matrix::EigenvalueDecomposition.new(y)\nv_ev = v.eigenvector_matrix().transpose.to_a\n\nu_ev.map! {|row| row.reverse}\nv_ev.reverse!\n\nputs 'Matrix U'\nu = Matrix[*u_ev]\nputs u.to_a.map(&amp;:inspect)\nputs 'Matrix V'\nvt = Matrix[*v_ev]\nputs vt.to_a.map(&amp;:inspect)\nputs 'Eigenvalues S'\np sqrt_diagonal_values = v.eigenvalues().map {|value| Math.sqrt(value)}.reverse\n</code></pre>\n\n<p>The results of the Numpy code are (example of the first row of U)</p>\n\n<p>Matrix U</p>\n\n<p>-7.40847968e-01 -1.08616810e-01  1.98359970e-01  5.12144302e-01 -3.71090574e-01</p>\n\n<p>...</p>\n\n<p>Eigenvector s</p>\n\n<p>2.32131207 1.47894683 0.65132674</p>\n\n<p>Matrix VT</p>\n\n<p>-0.50752384 -0.6681011 -0.54411439</p>\n\n<p>-0.85772795 0.45183049 0.24525898</p>\n\n<p>-0.08198967 -0.59117691 0.80236373</p>\n\n<p>The Ruby Matrix Eigensystem code produces the following results:</p>\n\n<p>Matrix U (first row)</p>\n\n<p>[0.7408479676229094, -0.1086168097636038, -0.1983599695144702, -0.5690831468812522, -0.27594269683347544]</p>\n\n<p>...</p>\n\n<p>Eigenvector s</p>\n\n<p>[2.3213120745694042, 1.478946829710326, 0.6513267439220222]</p>\n\n<p>Matrix VT</p>\n\n<p>[0.5075238412366166, 0.6681010991839039, 0.544114392242743]</p>\n\n<p>[-0.8577279545170795, 0.4518304852203834, 0.2452589828435646]</p>\n\n<p>[-0.08198967383992087, -0.5911769057522231, 0.8023637326604754]</p>\n\n<p>The difference between negative an positive values is based on the calculation of the Eigenvalues and does not influence the overall result. The absolute values count.</p>\n\n<p>When you look at the result of Matrix U of the Ruby code it starts to differ from the Numpy Code starting with column 4+</p>\n\n<p>The Sigma and the V Matrix are ok.</p>\n\n<p>As test you can run this code as well with the following Matrix</p>\n\n<pre><code>A = array([[4,-5,-1],[7,-2,3],[-1,4,-3],[8,2,6]]) #for Python\na = Matrix[[4,-5,-1],[7,-2,3],[-1,4,-3],[8,2,6]] #for Ruby\n</code></pre>\n\n<p>In this case both results are the same. And when you check A = USVT the results produce the original A Matrix again. So the general system appeared to work.</p>\n\n<p>Did anyone has an idea why the results differ?</p>\n\n<p>Any help appreciated</p>\n\n<p>Krid</p>\n"}, {"tags": ["ruby", "database", "sqlite", "fxruby"], "comments": [{"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554146531, "post_id": 55461463, "comment_id": 97636774, "body": "What do you mean &quot;without using query language&quot;?  You&#39;re going to have use <i>some</i> sort of query to access the database.  Incidentally, I use <code>fox16</code> and the <code>sqlite3</code> gems all the time in my applications, so what <i>exactly</i> is the problem installing the <code>sqlite3</code> gem?"}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554148859, "post_id": 55461463, "comment_id": 97637743, "body": "@varro I&#39;m using win 10 + ruby 2.5.3 and when I try to &quot;gem install sqlite3&quot;  it fails."}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554149914, "post_id": 55461463, "comment_id": 97638214, "body": "You should try to be as explicit as possible in your error reports, but I will guess that here that you do not have your development environment set up correctly.  The fox16 gem is a C/C++ extension, which means you will need to compile it.  Do you have a compiler installed?  And what is your development environment?"}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554152007, "post_id": 55461463, "comment_id": 97639108, "body": "@varro I&#39;ve installed ruby interpreter from rubyinstaller.org/ and use powershell to launch code."}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554152718, "post_id": 55461463, "comment_id": 97639388, "body": "But do you have a <i>compiler</i>?  I use MSYS myself as a development environment, but going to the rubyinstaller website, it looks like you can install MSYS2/DevKit under Add-ons.  Do you have that?"}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554154774, "post_id": 55461463, "comment_id": 97640041, "body": "@varro yes, it&#39;s installed, but not that sqlite3 gem"}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554155343, "post_id": 55461463, "comment_id": 97640185, "body": "Just to double-check, if you run the command <code>gem list</code>, do you see a line for &quot;fxruby&quot; but <i>not</i> for &quot;sqlite3&quot;?  And when you run <code>gem install sqlite3</code>, what is the <i>exact</i> error message you see?  (Just saying &quot;it fails&quot; is not <i>nearly</i> good enough.)"}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554155798, "post_id": 55461463, "comment_id": 97640321, "body": "@varro since the first time I&#39;ve tried to &#39;gem install sqlite3&#39; it returns:&quot;... checking for -ldl... no checking for dlopen()... no missing function dlopen *** extconf.rb failed *** Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options...&quot;."}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554155875, "post_id": 55461463, "comment_id": 97640343, "body": "@varro I&#39;ve googled this problem but it only has a solution for ruby-on-rails with changing sqlite3 source in Gemfile"}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554157047, "post_id": 55461463, "comment_id": 97640676, "body": "oh. seems like fxruby was left behind a long time ago... :("}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554157447, "post_id": 55461463, "comment_id": 97640781, "body": "Um... what does that mean exactly?  Does that mean you have neither the fxruby or the sqlite3 gems installed?  As I said, I&#39;ve been using both for years."}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554157626, "post_id": 55461463, "comment_id": 97640829, "body": "@varro fxruby gem is working fine, but I can&#39;t use sqlite3 gem, because of that error &quot;... missing function dlopen ...&quot;"}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554158135, "post_id": 55461463, "comment_id": 97640953, "body": "@varro ann attempt to get sqlite3 gem <a href=\"https://i.imgur.com/IxTZwbb.png\" rel=\"nofollow noreferrer\">i.imgur.com/IxTZwbb.png</a>"}, {"owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554160566, "post_id": 55461463, "comment_id": 97641552, "body": "The next thing to do is look up that &quot;mkmf.log&quot; file cited in the primary error message and scan it for more details."}, {"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "reply_to_user": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "edited": false, "score": 0, "creation_date": 1554161551, "post_id": 55461463, "comment_id": 97641759, "body": "@varro I appreciate your help! So many times you&#39;ve answered me already, but I don&#39;t know what to do with this file, it&#39;s large enough and there&#39;s no way to find this problem in the net. (the pdf of mkmf:  <a href=\"https://drive.google.com/file/d/1REZqnX2-XDf07retbEOW0vOHamiATU82/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1REZqnX2-XDf07retbEOW0vOHamiATU82/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "edited": false, "score": 0, "creation_date": 1554286624, "post_id": 55483217, "comment_id": 97692529, "body": "Thank you very much for your help! I should have googled my error message in the proper way"}], "tags": [], "owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "is_accepted": true, "score": 0, "last_activity_date": 1554237535, "creation_date": 1554237535, "answer_id": 55483217, "question_id": 55461463, "link": "https://stackoverflow.com/questions/55461463/how-can-i-connect-to-database-using-fxruby/55483217#55483217", "title": "How can I connect to database using FXRuby", "body": "<p>It looks like the following should solve your problem (see <a href=\"https://github.com/sparklemotion/sqlite3-ruby/issues/248\" rel=\"nofollow noreferrer\">this reference</a>):</p>\n\n<pre><code>ridk exec pacman -S mingw-w64-x86_64-dlfcn\ngem install sqlite3\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11281734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86236d735e57301e36e5c9f04c47ef56?s=128&d=identicon&r=PG&f=1", "display_name": "T1v1", "link": "https://stackoverflow.com/users/11281734/t1v1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 55483217, "answer_count": 1, "score": 0, "last_activity_date": 1554237535, "creation_date": 1554143457, "question_id": 55461463, "link": "https://stackoverflow.com/questions/55461463/how-can-i-connect-to-database-using-fxruby", "title": "How can I connect to database using FXRuby", "body": "<p>I'd like to create an app that accesses db (with 1 table) and outputs its table in a window <strong>using FXRuby</strong>. Is there any way to make it <strong>without using query language</strong> like in this example:</p>\n\n<pre><code>require 'pg'\n\nconn = PG.connect(dbname: 'testdb', user: 'postgres')    \nrows = conn.exec(\"select * from users\")\n</code></pre>\n\n<p>And <strong>without using Ruby on Rails</strong>.</p>\n\n<p>I've also tried to launch this example code, but it doesn't work beacause of the problem with installing <code>sqlite3 gem</code>:</p>\n\n<pre><code>require 'fox16' \nrequire 'sqlite3.rb' \ninclude Fox \n\nclass TestApp &lt; FXApp \n   def initialize \n      super('Test', 'Test') \n      @db = SQLite3::Database.new('test.db3') \n      @db || raise(\"can't connect to database\") \n   end \n\n   def db \n      @db \n   end \nend \n</code></pre>\n"}, {"tags": ["arrays", "ruby", "object"], "comments": [{"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 1, "creation_date": 1554134438, "post_id": 55458117, "comment_id": 97631229, "body": "What have you tried? regular expressions can check for requirements like that."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1554131057, "creation_date": 1554131057, "answer_id": 55458212, "question_id": 55458117, "link": "https://stackoverflow.com/questions/55458117/creating-password-parameters-for-ruby/55458212#55458212", "title": "Creating password parameters for Ruby", "body": "<ol>\n<li><p>you should <code>chomp</code> the input from <code>gets</code>, otherwise it\u2019ll contain a trailing carriage return.</p></li>\n<li><p>to meet all the criteria, you should explicitly check for all of them.</p></li>\n</ol>\n\n<p>Like this:</p>\n\n<pre><code>puts \"Please enter your password\"\nmy_password = gets.chomp\ncase\nwhen my_password.length &lt; 7\n  puts \"Your password is not long enough\"\nwhen my_password !~ /[A-Z]/\n  puts \"Your password must contain an uppercase letter\"\nwhen my_password !~ /[a-z]/\n  puts \"Your password must contain a lowercase letter\"\nwhen my_password !~ /\\d/\n  puts \"Your password must contain a digit\"\nwhen my_password !~ /[!?=_-]/\n  puts \"Your password must contain one of those: [!?=_-]\"\nelse\n  print my_password\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554154184, "post_id": 55462795, "comment_id": 97639881, "body": "I had nothing to do with those multicoloured stars. They fell onto my screen while I was writing my answer. You can thank stackoverflow for that."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1554154637, "last_edit_date": 1554154637, "creation_date": 1554149314, "answer_id": 55462795, "question_id": 55458117, "link": "https://stackoverflow.com/questions/55458117/creating-password-parameters-for-ruby/55462795#55462795", "title": "Creating password parameters for Ruby", "body": "<p>Try this.</p>\n\n<pre><code>def get_password\n  loop do\n    puts \"Please enter your password\"\n    my_password = gets.chomp\n    str =\n    case my_password\n    when /\\A.{,6}\\z/     then \"seven characters\"\n    when /\\A[^A-Z]+\\z/   then \"one uppercase letter\"\n    when /\\A[^a-z]+\\z/   then \"one lowercase letter\"\n    when /\\A\\D+\\z/       then \"one digit\"\n    when /\\A[^$%&amp;!]+\\z/  then \"one symbol\"\n    else break my_password\n    end\n    puts \"Passwords must contain at least #{str}\" \n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>pw = get_password\n  #=&gt; \"abcDEF123$$$\"\nputs pw\n\"abcDEF123$$$\"\n</code></pre>\n\n<p>Note that the method will not return until a valid password has been obtained. What constitutes a permissible symbol must of course be defined.</p>\n\n<p>If a value is to be display it generally is best to return the value from a method, then display it. That way the same method can be used to obtain a password that is to be used in ways other than merely displaying it.\n<a href=\"https://i.stack.imgur.com/lz4G0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lz4G0.png\" alt=\"enter image description here\"></a>\nOne could alternatively write the following.</p>\n\n<pre><code>R = /\n    \\A\n    (?=.{7})      # match seven chars in a positive lookahead\n    (?=.*\\p{Ll})  # match a lowercase letter in a positive lookahead\n    (?=.*\\p{Lu})  # match an uppercase letter in a positive lookahead\n    (?=.*\\d)      # match a digit in a positive lookahead\n    (?=.*[$%&amp;!])  # match a symbol in a positive lookahead\n    /x            # free-spacing regex definition mode\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def get_password\n  loop do\n    puts \"Please enter your password\"\n    my_password = gets.chomp\n    break my_password if my_password.match?(R)\n    puts \"Passwords must contain at least seven characters, one uppercase\"\n    puts \"letter, one lowercase letter and one symbol\"\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>pw = get_password\n  #=&gt; \"aA1$$$$$$$$$$$$$$$$$$$$\"\n</code></pre>\n\n<p>The regular expression is conventionally written as follows.</p>\n\n<pre><code>R = /\\A\\(?=.{7})(?=.*\\p{Ll})(?=.*\\p{Lu})(?=.*\\d)(?=.*[$%&amp;!])/\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554154637, "creation_date": 1554130771, "last_edit_date": 1554130852, "question_id": 55458117, "link": "https://stackoverflow.com/questions/55458117/creating-password-parameters-for-ruby", "title": "Creating password parameters for Ruby", "body": "<p>Attempting to create a sing up procedure in Ruby. I have the length of seven characters met in the code but the password must also contain the following:</p>\n\n<ul>\n<li>Uppercase character</li>\n<li>Lowercase character</li>\n<li>Number</li>\n<li>Symbol</li>\n</ul>\n\n<p>Having trouble inputing these requirements into the code. Any help is appreciated.  </p>\n\n<pre><code>puts \"Please enter your password\"\nmy_password = gets\nif my_password.length &lt; 7\n    puts \"Your password is not long enough\"\nelsif my_password.length &gt;= 7\n    print my_password\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 2, "creation_date": 1554122565, "post_id": 55455173, "comment_id": 97624096, "body": "This would be too broad for a SO answer. But to set you on the path - a lot of them are internals and/or things you wouldn&#39;t really need to call. If you want to understand a given method see if the method name includes something varying and replace that varying thingy with nothing. For example, in <code>validate_associated_records_for_company_domains</code>, <code>company_domains</code> would be variable as it&#39;s the name of a <code>has_many</code> association. Then google the new name you got."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1554134784, "post_id": 55455173, "comment_id": 97631425, "body": "I highly recommend reading about <a href=\"https://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">Active Record Basics</a>, <a href=\"https://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">Validations</a>, <a href=\"https://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow noreferrer\">Callbacks</a>, <a href=\"https://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">Associations</a> and the <a href=\"https://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">Query Interface</a> in the Rails Guides."}], "answers": [{"tags": [], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1554124624, "creation_date": 1554124624, "answer_id": 55456106, "question_id": 55455173, "link": "https://stackoverflow.com/questions/55455173/what-are-active-record-instance-methods/55456106#55456106", "title": "What are active_record instance methods?", "body": "<p>Im guessing you're using some sort of gem for handling image uploads? Looks like these are hooks for the image uploads so you can perform actions before/after adding/removing images. this would before similar to the active record hooks like before_save etc</p>\n\n<p>I would refer to the documentation of the gem you are using.</p>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 3791939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H3SF.jpg?s=128&g=1", "display_name": "MikeTineo", "link": "https://stackoverflow.com/users/3791939/miketineo"}, "is_accepted": true, "score": 1, "last_activity_date": 1554126860, "creation_date": 1554126860, "answer_id": 55456846, "question_id": 55455173, "link": "https://stackoverflow.com/questions/55455173/what-are-active-record-instance-methods/55456846#55456846", "title": "What are active_record instance methods?", "body": "<p>Those are associations callbacks from</p>\n\n<blockquote>\n  <p>Association Callbacks Normal callbacks hook into the life cycle of\n  Active Record objects, allowing you to work with those objects at\n  various points. For example, you can use a :before_save callback to\n  cause something to happen just before an object is saved.</p>\n  \n  <p>Association callbacks are similar to normal callbacks, but they are\n  triggered by events in the life cycle of a collection. There are four\n  available association callbacks:</p>\n  \n  <p>before_add after_add before_remove after_remove</p>\n</blockquote>\n\n<p><a href=\"https://github.com/rails/rails/blob/7ed1302cd2c458bb552fcd0ded83403c039de28d/guides/source/association_basics.md#association-callbacks\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/7ed1302cd2c458bb552fcd0ded83403c039de28d/guides/source/association_basics.md#association-callbacks</a></p>\n"}], "owner": {"reputation": 317, "user_id": 4388049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPXy6.jpg?s=128&g=1", "display_name": "Ravi Kashyap", "link": "https://stackoverflow.com/users/4388049/ravi-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 55456846, "answer_count": 2, "score": 0, "last_activity_date": 1554126860, "creation_date": 1554121801, "question_id": 55455173, "link": "https://stackoverflow.com/questions/55455173/what-are-active-record-instance-methods", "title": "What are active_record instance methods?", "body": "<p>I have Company model in my rails application. Which consists of following fields: </p>\n\n<pre><code>class Company &lt; ApplicationRecord\n  include Validatable\n  validates :contact_one, :city, :state, :country, :address, presence: true\n  validates :email, presence: true, uniqueness: true\n  has_many :company_domains\n  has_many :domains, through: :company_domains\n  has_many :job_posts\n  has_many :contacts\n  has_many :images, as: :imageable\n  belongs_to :industry, optional: true, counter_cache: true\n  belongs_to :user, optional: true\n\n  def pending_approval?\n    self.status == 'in-review'\n  end\n\n  def approved?\n    self.status == 'approved'\n  end\n\nend\n\n# == Schema Information\n#\n# Table name: companies\n#\n#  id                    :integer          not null, primary key\n#  address               :string\n#  city                  :string\n#  company_domains_count :integer\n#  company_size          :string\n#  contact_one           :string\n#  contact_two           :string\n#  contacts_count        :integer\n#  country               :string\n#  cover_image           :string\n#  email                 :string\n#  facebook_url          :string\n#  fax                   :string\n#  google_plus_url       :string\n#  job_posts_count       :integer\n#  latitude              :float\n#  linkedin_url          :string\n#  logo_image            :string\n#  longitude             :float\n#  name                  :string\n#  state                 :string\n#  status                :string\n#  twitter_url           :string\n#  website               :string\n#  year_of_establishment :date\n#  youtube_url           :string\n#  created_at            :datetime         not null\n#  updated_at            :datetime         not null\n#  industry_id           :integer\n#  user_id               :integer\n</code></pre>\n\n<p>When I check <strong>Company.instance_methods(false)</strong> into rails console Then i got following array of instance methods: </p>\n\n<pre><code>[:after_add_for_images?, :after_add_for_images=, :before_remove_for_images, :before_remove_for_images?, :before_remove_for_images=, :after_remove_for_images, :after_remove_for_images?, :after_remove_for_images=, :belongs_to_counter_cache_after_update, :autosave_associated_records_for_industry, :autosave_associated_records_for_user, :autosave_associated_records_for_company_domains, :validate_associated_records_for_company_domains, :before_add_for_company_domains, :before_add_for_company_domains?, :before_add_for_company_domains=, :after_add_for_company_domains, :after_add_for_company_domains?, :after_add_for_company_domains=, :before_remove_for_company_domains, :before_remove_for_company_domains?, :before_remove_for_company_domains=, :after_remove_for_company_domains, :after_remove_for_company_domains?, :after_remove_for_company_domains=, :autosave_associated_records_for_domains, :validate_associated_records_for_domains, :before_add_for_domains, :before_add_for_domains?, :before_add_for_domains=, :after_add_for_domains, :after_add_for_domains?, :after_add_for_domains=, :before_remove_for_domains, :before_remove_for_domains?, :before_remove_for_domains=, :after_remove_for_domains, :after_remove_for_domains?, :after_remove_for_domains=, :autosave_associated_records_for_job_posts, :validate_associated_records_for_job_posts, :before_add_for_job_posts, :before_add_for_job_posts?, :before_add_for_job_posts=, :after_add_for_job_posts, :after_add_for_job_posts?, :after_add_for_job_posts=, :before_remove_for_job_posts, :before_remove_for_job_posts?, :before_remove_for_job_posts=, :after_remove_for_job_posts, :after_remove_for_job_posts?, :after_remove_for_job_posts=, :autosave_associated_records_for_contacts, :validate_associated_records_for_contacts, :before_add_for_contacts, :before_add_for_contacts?, :before_add_for_contacts=, :after_add_for_contacts, :after_add_for_contacts?, :after_add_for_contacts=, :before_remove_for_contacts, :before_remove_for_contacts?, :before_remove_for_contacts=, :after_remove_for_contacts, :after_remove_for_contacts?, :after_remove_for_contacts=, :autosave_associated_records_for_images, :validate_associated_records_for_images, :before_add_for_images, :before_add_for_images?, :before_add_for_images=, :after_add_for_images]\n</code></pre>\n\n<p>Can anyone please help me to understand what these methods will do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 0, "creation_date": 1554128847, "post_id": 55454963, "comment_id": 97627848, "body": "please add to name of a library, and if you can, add link about that piece of code."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1554136006, "post_id": 55454963, "comment_id": 97632010, "body": "That&#39;s a casual <a href=\"http://ruby-doc.org/core-2.6.2/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">string literal</a> with interpolation: if <code>k</code> is <code>&quot;foo&quot;</code> (or <code>:foo</code>), then <code>&quot;#{k}=&quot;</code> evaluates to <code>&quot;foo=&quot;</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554137256, "post_id": 55454963, "comment_id": 97632540, "body": "This is a pure-Ruby question, so it should not have Rails tags."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554138046, "post_id": 55454963, "comment_id": 97632932, "body": "If <code>k = &quot;foo&quot;</code>, the first line would read, &quot;if the default receiver, <code>self</code>, responds to the method <code>&#39;foo=&#39;</code>&quot;. <code>respond_to</code>&#39;s argument can be a string or a symbol (<code>:foo=</code>). See <a href=\"https://ruby-doc.org/core-2.6.2/Object.html#method-i-respond_to-3F\" rel=\"nofollow noreferrer\">Object#respond_to?</a>."}, {"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554171702, "post_id": 55454963, "comment_id": 97643679, "body": "@CarySwoveland please check the edited question"}, {"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554171714, "post_id": 55454963, "comment_id": 97643681, "body": "@Stefan please check the edited question"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554172686, "post_id": 55454963, "comment_id": 97643893, "body": "I don&#39;t follow. Did you run that code snippet by itself? If so that will clearly raise exceptions. <code>respond_to?</code>&#39;s implicit receiver (<code>self</code>) would be <code>main</code>, and <code>k</code> and <code>v</code> would be  undefined. If not (I&#39;d think not), you need to show the class and instance method containing the code snippet."}, {"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "edited": false, "score": 0, "creation_date": 1554172811, "post_id": 55454963, "comment_id": 97643919, "body": "No k = token and v = some token value, It is a gitlab code and It thows the exception, so I would like to understand If the k = token why I still get the exception in the else case? What is the condition does it check in the IF block?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554186283, "post_id": 55454963, "comment_id": 97647428, "body": "The condition in the <code>if</code> clause is the same as <code>if self.respond_to?(&quot;#{k}=&quot;)</code>, but you haven&#39;t told us what <code>self</code> equals (since <code>respond_to?</code> has no explicit receiver <code>self</code> is its default receiver). Presumably, <code>self</code> is an instance of an unstated class."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1554190227, "post_id": 55454963, "comment_id": 97649477, "body": "@Harry if <code>k</code> is <code>&quot;token&quot;</code>, the line becomes <code>if respond_to?(&quot;token=&quot;)</code>. So the <code>else</code> branch is executed if the receiver doesn&#39;t respond to <code>token=</code>. Or slightly simplified: the <code>UnknownAttributeError</code> is raised if the (setter) method <code>token=</code> doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "edited": false, "score": 0, "creation_date": 1554121848, "post_id": 55455099, "comment_id": 97623640, "body": "appreciate for your response But still I didn&#39;t understand why the string manipulation comes in IF  check"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554122197, "post_id": 55455099, "comment_id": 97623835, "body": "This does not answer an original question by any mean. If I could downvote it several times for the absurd advice to use RubyMine, I would do it."}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1554123560, "post_id": 55455099, "comment_id": 97624647, "body": "@AlekseiMatiushkin the question very specifically asks: &#39;Could someone explain what does the code (&quot;#{k}=&quot;) means?&#39;. I have explained what #{} means and given examples. My suggestion to use a debugging tool is for the OP to establish what the variables equate to at run time. I have therefore, contrary to your comment, answered the question that was asked. If you feel you can add more or better answer the question then feel free to contribute. If you feel that the question that was asked was not the right question, or misleadingly phrased then, address the OP. Keep your negativity to yourself"}, {"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 1, "creation_date": 1554129087, "post_id": 55455099, "comment_id": 97628002, "body": "please calm down,ruby friends. we come to resolve the problem, not fight each other, right?"}], "tags": [], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1554121562, "creation_date": 1554121562, "answer_id": 55455099, "question_id": 55454963, "link": "https://stackoverflow.com/questions/55454963/ruby-code-someone-explain-the-following-code/55455099#55455099", "title": "Ruby - Code someone explain the following code", "body": "<p>\"#{}\" is string interpolation in ruby. so for example:</p>\n\n<pre><code>k = 'world'\nputs \"hello #{k}\"\n# hello world\n</code></pre>\n\n<p>So in your example it looks like it is creating a string with the value of k and =</p>\n\n<p>e.g. </p>\n\n<pre><code>k = 'something'\n\"#{k}=\"\n# something=\n</code></pre>\n\n<p>If you want to know what k is, you can add <code>puts k.to_s</code> in the line above then run the code and check your console.</p>\n\n<p>Better still if you are using something like RubyMine, just use the debugger and stick a breakpoint on that line.</p>\n"}, {"comments": [{"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "edited": false, "score": 0, "creation_date": 1554122116, "post_id": 55455192, "comment_id": 97623789, "body": "If my param k=token, I am actually getting the exception in else case. In which scenario will I get the exception in the above case?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "edited": false, "score": 1, "creation_date": 1554122281, "post_id": 55455192, "comment_id": 97623895, "body": "When the class does not have a setter for the <code>token</code>, e.g. neither <code>attr_writer :token</code> nor <code>attr_accessor :token</code> not <code>def token=(value)</code> is declared. Try to read my answer and <b>understand</b> this better."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1554121879, "creation_date": 1554121879, "answer_id": 55455192, "question_id": 55454963, "link": "https://stackoverflow.com/questions/55454963/ruby-code-someone-explain-the-following-code/55455192#55455192", "title": "Ruby - Code someone explain the following code", "body": "<p>This code <code>public_send(\"#{k}=\", v)</code> dynamically calls a setter for what is stored in <code>k</code> variable. Consider the following example:</p>\n\n<pre><code>class FooBarBaz\n  attr_accessor :foo, :bar, :baz\n\n  def set_it what, value\n    public_send(\"#{what}=\", value)\n  end\nend\n</code></pre>\n\n<p>It\u2019s roughly an equivalent to:</p>\n\n<pre><code>  def set_it what, value\n    case what\n    when \"foo\" then public_send(\"foo=\", value)\n    when \"bar\" then public_send(\"bar=\", value)\n    when \"baz\" then public_send(\"baz=\", value)\n    end\n  end\n</code></pre>\n\n<p>It\u2019s roughly an equivalent to:</p>\n\n<pre><code>  def set_it what, value\n    case what\n    when \"foo\" then self.foo=(value)\n    ...\n    end\n  end\n</code></pre>\n\n<p>It\u2019s roughly an equivalent to:</p>\n\n<pre><code>  def set_it what, value\n    case what\n    when \"foo\" then self.foo = value\n    ...\n    end\n  end\n</code></pre>\n\n<hr>\n\n<p><code>respond_to?</code> is called in advance to check if the setter in indeed defined for this <code>k</code> on this instance, to prevent somewhat like:</p>\n\n<pre><code>FooBarBaz.new.set_it :inexisting, 42\n#\u21d2\u00a0NoMethodError: undefined method `inexisting=' for #&lt;FooBarBaz:0x0056247695a538&gt;\n</code></pre>\n\n<p>A modified, correct version of the class in this answer:</p>\n\n<pre><code>class FooBarBaz\n  attr_accessor :foo, :bar, :baz\n\n  def set_it what, value\n    public_send(\"#{what}=\", value) if respond_to?(\"#{what}=\")\n  end\nend\n</code></pre>\n\n<p>It does not throw an exception.</p>\n\n<pre><code>FooBarBaz.new.set_it :inexisting, 42\n#\u21d2\u00a0nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "edited": false, "score": 0, "creation_date": 1554174762, "post_id": 55466416, "comment_id": 97644367, "body": "why this IF condition is failed is my question &quot;If respond_to?(&quot;#{k}=&quot;)&quot; ? Why does it goes to else condition?"}, {"owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "edited": false, "score": 0, "creation_date": 1554174846, "post_id": 55466416, "comment_id": 97644383, "body": "I mean, If key k = token, What is wrong in the input, why does it goes to the ELSE condition?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554178966, "post_id": 55466416, "comment_id": 97645187, "body": "<code>Class User</code> is not a valid ruby syntax. Also, there is no <code>assign_attribute</code> in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> and despite the question is tagged with rails, the issue has nothing to do with rails. Downvoted."}, {"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554184067, "post_id": 55466416, "comment_id": 97646558, "body": "@AlekseiMatiushkin thank you for comment about syntax. I&#39;m not sure that he refer about assign_attribute. That&#39;s just my guess."}], "tags": [], "owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "is_accepted": false, "score": -1, "last_activity_date": 1554183828, "last_edit_date": 1554183828, "creation_date": 1554174435, "answer_id": 55466416, "question_id": 55454963, "link": "https://stackoverflow.com/questions/55454963/ruby-code-someone-explain-the-following-code/55466416#55466416", "title": "Ruby - Code someone explain the following code", "body": "<p>I think that you saw the <code>_assign_attribute</code> method in <a href=\"https://apidock.com/rails/v4.0.2/ActiveRecord/AttributeAssignment/_assign_attribute\" rel=\"nofollow noreferrer\">this docs</a></p>\n\n<p>k is the abbreviation meaning of 'key', v is same thing meaning of 'value'</p>\n\n<p><code>\"#{k}=\"</code> is some kind of method name to dynamic method by string literal.</p>\n\n<p>It may be \"update\" or \"create\", \"split\", anything else.</p>\n\n<p>Equal symbol(\"=\") is meaning of they are methods to assign something like this <code>user.attributes = { :username =&gt; 'Phusion', :is_admin =&gt; true }</code></p>\n\n<p>In the above case, \"k\" is <code>.attributes</code> and \"k=\" is <code>attributes=</code> and \"v\" is <code>{ :username =&gt; 'Phusion', :is_admin =&gt; true }</code></p>\n\n<p>And <code>public_send</code> is method to send a method in public scope.</p>\n\n<p>As a result <code>public_send(\"#{k}=\", v)</code> is meaning of call a method having a name as \"k\" in public method, and this method will be assigned to \"v\" as the value.</p>\n\n<p>I hope that this explain help to you.</p>\n\n<hr>\n\n<p>Add some example for comment</p>\n\n<p>k is a input from programmer, therefore it does not match method name in Class or Module. </p>\n\n<p>In Reality, there are common mistake case. </p>\n\n<pre><code>class User\n  # this attribute can be called from a instance of User\n  attr_accessor :name\nend\n\n# this causes a error when call assign_attribute\nUser.new.wrong_name\n\n# this is fine\nUser.new.name\n</code></pre>\n\n<p><a href=\"https://api.rubyonrails.org/v3.2/classes/ActiveRecord/AttributeAssignment.html#method-i-attributes-3D\" rel=\"nofollow noreferrer\">assignment method reference</a> </p>\n"}], "owner": {"reputation": 2203, "user_id": 1602853, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/SUTHV.jpg?s=128&g=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1602853/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1554183828, "creation_date": 1554121147, "last_edit_date": 1554173665, "question_id": 55454963, "link": "https://stackoverflow.com/questions/55454963/ruby-code-someone-explain-the-following-code", "title": "Ruby - Code someone explain the following code", "body": "<p>I have the following piece of code in <a href=\"https://apidock.com/rails/v4.0.2/ActiveRecord/AttributeAssignment/_assign_attribute\" rel=\"nofollow noreferrer\">a library</a>, Could someone explain what does the code (\"#{k}=\") means in the following piece of code?</p>\n\n<pre><code>if respond_to?(\"#{k}=\")\n  public_send(\"#{k}=\", v)\nelse\n  raise UnknownAttributeError.new(self, k)\nend\n</code></pre>\n\n<p>I understand respond_to is a default function in Ruby but there is no definition/explanation given for this syntax, please help us.</p>\n\n<p>Edited : </p>\n\n<p>I get the exception (<code>unknown attribute 'token' for PersonalAccessToken. (ActiveModel::UnknownAttributeError)</code>) for the above code </p>\n\n<pre><code>/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activemodel-5.0.7.1/lib/active_model/attribute_assignment.rb:40:in `block in _assign_attributes'\n/opt/gitlab/embedded/lib/ruby/gems/2.5.0/gems/activemodel-5.0.7.1/lib/active_model/attribute_assignment.rb:48:in `_assign_attribute': unknown attribute 'token' for PersonalAccessToken. (ActiveModel::UnknownAttributeError)\n</code></pre>\n\n<p>so considering k as 'token', In which scenario will I get the exception (In which scenario It goes to the else state?)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "edited": false, "score": 0, "creation_date": 1554129852, "post_id": 55454802, "comment_id": 97628464, "body": "please update a error log"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 8427113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0rzNd.jpg?s=128&g=1", "display_name": "Suman Das", "link": "https://stackoverflow.com/users/8427113/suman-das"}, "edited": false, "score": 0, "creation_date": 1554122469, "post_id": 55455206, "comment_id": 97624026, "body": "I have also tried this, but the problem is that when I don&#39;t select or choose any one of a select item that time alert not working,  like &quot; please select ... &quot;"}], "tags": [], "owner": {"reputation": 436, "user_id": 2570423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVptB.png?s=128&g=1", "display_name": "mehedi", "link": "https://stackoverflow.com/users/2570423/mehedi"}, "is_accepted": true, "score": 0, "last_activity_date": 1554121925, "creation_date": 1554121925, "answer_id": 55455206, "question_id": 55454802, "link": "https://stackoverflow.com/questions/55454802/how-to-add-required-true-on-collection-select-type-field/55455206#55455206", "title": "How to add required true on collection_select type field", "body": "<p>Try this please:</p>\n\n<pre><code>  = f.collection_select :receiver_admin_id, Admin.agent_and_admin(current_admin.id, current_admin.parent_master_agent_id), :id, :agent_name, {prompt: 'Select receiver'}, {multiple: true, required: true}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 462, "user_id": 2846739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iazmd.jpg?s=128&g=1", "display_name": "sensadrome", "link": "https://stackoverflow.com/users/2846739/sensadrome"}, "is_accepted": false, "score": 0, "last_activity_date": 1554121988, "creation_date": 1554121988, "answer_id": 55455231, "question_id": 55454802, "link": "https://stackoverflow.com/questions/55454802/how-to-add-required-true-on-collection-select-type-field/55455231#55455231", "title": "How to add required true on collection_select type field", "body": "<p>Your were close almost everytime :) From the docs <a href=\"https://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select\" rel=\"nofollow noreferrer\">in the rails guide</a> you have:</p>\n\n<pre><code>collection_select(object, method, collection, value_method, text_method, options = {}, html_options = {})\n</code></pre>\n\n<p>Using the form helpers (<code>f.</code>) mean that the object (first argument) is taken care of so you're left with:</p>\n\n<p><code>method, collection, value_method, text_method, options, html_options</code></p>\n\n<p>Both the multiple and required need to be in the html_options so:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>= f.collection_select(:receiver_admin_id, Admin.agent_and_admin(current_admin.id, current_admin.parent_master_agent_id), :id, :agent_name, { :prompt =&gt; 'Select receiver' }, multiple: true, :required =&gt; true)\n\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 8427113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0rzNd.jpg?s=128&g=1", "display_name": "Suman Das", "link": "https://stackoverflow.com/users/8427113/suman-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 55455206, "answer_count": 2, "score": 0, "last_activity_date": 1554134890, "creation_date": 1554120639, "last_edit_date": 1554134890, "question_id": 55454802, "link": "https://stackoverflow.com/questions/55454802/how-to-add-required-true-on-collection-select-type-field", "title": "How to add required true on collection_select type field", "body": "<p>I have already tried to add required=> true and :prompt=>\"select...\" on the collection_select field, but every time I get syntax error. How to solve this error which is below. </p>\n\n<pre><code>.field\n  = f.label \"Receiver\"\n  = f.collection_select(:receiver_admin_id, \n        Admin.agent_and_admin(current_admin.id, current_admin.parent_master_agent_id), \n        :id, \n        :agent_name, \n        :prompt =&gt; 'Select receiver', \n        {multiple: true}), \n      :required =&gt; true\n</code></pre>\n\n<pre><code>  = f.collection_select(:receiver_admin_id, \n        Admin.agent_and_admin(current_admin.id, current_admin.parent_master_agent_id), \n        :id, \n        :agent_name, \n        :prompt =&gt; 'Select receiver', \n        {multiple: true, required: true})\n</code></pre>\n\n<pre><code>\n  = f.collection_select(:receiver_admin_id, \n        Admin.agent_and_admin(current_admin.id, current_admin.parent_master_agent_id), \n        :id, \n        :agent_name, \n        :prompt =&gt; 'Select receiver',\n        {}, \n        {multiple: true}), \n      :required =&gt; true\n</code></pre>\n\n<pre><code>  = f.collection_select :receiver_admin_id, \n        Admin.agent_and_admin(current_admin.id, current_admin.parent_master_agent_id), \n        :id, \n        :agent_name, \n        :prompt =&gt; 'Select receiver', \n        {multiple: true}, \n        :required =&gt; true\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1554118493, "post_id": 55454057, "comment_id": 97621798, "body": "It looks like a problem with passing params from form to the controller. Can you please update your question with logs for the request that creates new referral?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10749227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cfd24ed84691ff5357a5dc5a38626ef?s=128&d=identicon&r=PG&f=1", "display_name": "DevCF", "link": "https://stackoverflow.com/users/10749227/devcf"}, "edited": false, "score": 0, "creation_date": 1554188693, "post_id": 55462143, "comment_id": 97648673, "body": "Thank you, the JavaScript turned out to be the issue. I was targeting the wrong container. I have my params passing through now, just not saving to the database. Hopefully that one will be easier to figure out."}], "tags": [], "owner": {"reputation": 808, "user_id": 496517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091bc95204caaf52b0d299bd9ac59540?s=128&d=identicon&r=PG", "display_name": "Mason Stewart", "link": "https://stackoverflow.com/users/496517/mason-stewart"}, "is_accepted": false, "score": 0, "last_activity_date": 1554146496, "creation_date": 1554146496, "answer_id": 55462143, "question_id": 55454057, "link": "https://stackoverflow.com/questions/55454057/actioncontrollerparametermissing-param-is-missing-or-the-value-is-empty-json/55462143#55462143", "title": "ActionController::ParameterMissing (param is missing or the value is empty: JSON simple_form_for", "body": "<p>It appears that you're trying to serialize the form with a jQuery selector that may not be actually targeting the form. Specifically, you're calling</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var $form = $('.refer_resident')\n</code></pre>\n\n<p>and then </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>$.post({\n  ...\n  data: $form.serialize(),\n</code></pre>\n\n<p>but I don't see that you're giving the form that class specifically, and I don't think simple_form will generate that class for you. I believe it will generate classes like <code>.new_referral</code> and <code>.edit_referral</code> based on the presence of an id attribute. You can either explicitly assign that class or just use the built-in class.</p>\n"}], "owner": {"reputation": 57, "user_id": 10749227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cfd24ed84691ff5357a5dc5a38626ef?s=128&d=identicon&r=PG&f=1", "display_name": "DevCF", "link": "https://stackoverflow.com/users/10749227/devcf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554146496, "creation_date": 1554118082, "last_edit_date": 1554119418, "question_id": 55454057, "link": "https://stackoverflow.com/questions/55454057/actioncontrollerparametermissing-param-is-missing-or-the-value-is-empty-json", "title": "ActionController::ParameterMissing (param is missing or the value is empty: JSON simple_form_for", "body": "<p>I've spend a day and a half searching through all of the similar questions but none of them solve my current issue. </p>\n\n<p>I have a simple form, which renders a javascript form, and I'm getting:\n<strong>ActionController::ParameterMissing (param is missing or the value is empty: referral):</strong>\nwhenever I try to submit the form. I've tried using fetch instead of require in my params, but that doesn't fix it (it doesn't log the error but it doesn't save anything either). </p>\n\n<p>I have tried everything I can think of and am at a loss. I used a legacy code example to set up the form, so it's essentially exactly the same format as a form which does work, so I really don't know what I'm missing.</p>\n\n<p>I render the form in a partial, so within my views I have:</p>\n\n<p><strong>views/homeowners/dashboard/show.html.erb</strong></p>\n\n<pre><code>&lt;%= render \"homeowners/dashboard/referrals\" %&gt;\n\n&lt;div class=\"refer-resident-form hidden\"&gt;\n  &lt;%= render 'referral_form' %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>views/homeowners/dashboard/referrals.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"card article branded-border\"&gt;\n  &lt;div class=\"refer-overlay\"&gt;\n    &lt;div class=\"card-content refer-summary\"&gt;\n      &lt;p class=\"larger\"&gt;&lt;%= t(\".refer_developer\") %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= t(\".refer_description\") %&gt;&lt;/p&gt;\n      &lt;div class=\"refer-button\"&gt;\n      &lt;%= button_tag t(\".refer\"), class: \"btn branded-btn refer-resident\",\n      data: { cancel: t(\"edit.cancel\"),\n            cta: t(\".send_invitation\"),\n            title: t(\".refer\")} %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>views/homeowners/dashboard/_referral_form.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"refer-description\"&gt;\n  &lt;h4&gt;&lt;%= t(\".refer_description\") %&gt; &lt;/h4&gt;\n&lt;/div&gt;\n\n&lt;%= simple_form_for @referral, url: homeowner_dashboard_path, remote: true do |f| %&gt;\n  &lt;%= f.input :referee_first_name, label: t(\".first_name\"), required: true %&gt;\n  &lt;%= f.input :referee_last_name, label: t(\".last_name\"), required: true %&gt;\n  &lt;%= f.input :referee_email, label: t(\".email\"), required: true %&gt;\n\n  &lt;%= f.hidden_field :referrer_name, value: (current_resident.first_name + \" \" + current_resident.last_name) %&gt;\n  &lt;%= f.hidden_field :referrer_email, value: current_resident.email %&gt;\n  &lt;%= f.hidden_field :referral_date, value: Time.now %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My controller <strong>controllers/homeowners/referrals_controller.rb</strong></p>\n\n<pre><code>module Homeowners\n  class ReferralsController &lt; Homeowners::BaseController\n\n    def create\n      create_new_referral\n    end\n\n    private\n\n    def create_new_referral\n      @referral = Referral.new(referral_params)\n      redirect_to root_path\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def referral_params\n      params.require(:referral).permit(\n        :referee_first_name, :referee_last_name, :referee_email, :referral_date,\n        :referrer_name, :referrer_email\n      )\n    end\n  end\nend\n</code></pre>\n\n<p>And my javascript file <strong>refer.js</strong> (please bear in mind I know nothing about javascript and essentially copied this code from a different form, just making minor adjustments to make it relevant)</p>\n\n<pre><code>(function (document, $) {\n  'use strict'\n\n  $(document).on('click', '.refer-resident', function (event) {\n    var dataIn = $(this).data()\n\n    var $referContainer = $('.refer-resident-form')\n\n    $('body').append($referContainer)\n    var $form = $('.refer_resident')\n\n    $referContainer.dialog({\n      show: 'show',\n      modal: true,\n      width: 700,\n      title: dataIn.title,\n      buttons: [\n        {\n          text: dataIn.cancel,\n          class: 'btn',\n          click: function () {\n            $(this).dialog('destroy')\n          }\n        },\n        {\n          text: dataIn.cta,\n          class: 'btn-send btn',\n          id: 'btn_submit',\n          click: function () {\n            // Clear any old messages before the post\n            $('.flash').empty()\n\n            $.post({\n              url: '/homeowners/referral',\n              data: $form.serialize(),\n              dataType: 'json',\n              success: function (response) {\n                var $responseP = document.createElement('p')\n                if (response.alert === null) {\n                  $responseP.className = 'notice'\n                  $responseP.innerHTML = response.notice\n                } else {\n                  // If there are both alert and notice responses, only show the alert\n                  $responseP.className = 'alert'\n                  $responseP.innerHTML = response.alert\n                }\n                $('.flash').append($responseP)\n                $(window).scrollTop(0)\n              }\n            })\n            $(this).dialog('destroy')\n            $referContainer.hide()\n          }\n        }]\n    }).prev().find('.ui-dialog-titlebar-close').hide() // Hide the standard close button\n\n    validateSendReferral()\n  })\n\n  $(document).on('input', '.refer-resident-form', function (event) {\n    validateSendReferral()\n  })\n\n  function validateSendReferral () {\n    if (($('input#referral_referee_first_name').val().length &gt; 0)\n        &amp;&amp; ($('input#referral_referee_last_name').val().length &gt; 0) &amp;&amp; validateEmail()) {\n      $('.btn-send').prop('disabled', false)\n      $('.btn-send').removeClass('ui-state-disabled')\n    } else {\n      $('.btn-send').prop('disabled', true)\n      $('.btn-send').addClass('ui-state-disabled')\n    }\n  }\n\n  function validateEmail () {\n    var re = /\\S+@\\S+\\.\\S+/\n    return re.test($('input.email').val())\n  }\n\n})(document, window.jQuery)\n</code></pre>\n\n<p>Can anyone tell me where I'm going wrong or what I'm missing please? </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>When I submit the form I get the following output</p>\n\n<pre><code>   (0.2ms)  BEGIN\n   (0.2ms)  COMMIT\nStarted POST \"/homeowners/referral\" for ::1 at 2019-04-01 12:40:41 +0100\nProcessing by Homeowners::ReferralsController#create as JSON\n  Resident Load (0.6ms)  SELECT  \"residents\".* FROM \"residents\" WHERE \"residents\".\"id\" = $1 ORDER BY \"residents\".\"id\" ASC LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n   (0.7ms)  SELECT COUNT(*) FROM \"resident_notifications\" WHERE \"resident_notifications\".\"resident_id\" = $1 AND \"resident_notifications\".\"read_at\" IS NULL  [[\"resident_id\", 2]]\n  Plot Load (0.5ms)  SELECT  \"plots\".* FROM \"plots\" WHERE \"plots\".\"deleted_at\" IS NULL AND \"plots\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Developer Load (0.5ms)  SELECT  \"developers\".* FROM \"developers\" WHERE \"developers\".\"deleted_at\" IS NULL AND \"developers\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Country Load (0.3ms)  SELECT  \"countries\".* FROM \"countries\" WHERE \"countries\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Development Load (0.3ms)  SELECT  \"developments\".* FROM \"developments\" WHERE \"developments\".\"deleted_at\" IS NULL AND \"developments\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Brand Load (0.3ms)  SELECT  \"brands\".* FROM \"brands\" WHERE \"brands\".\"brandable_id\" = $1 AND \"brands\".\"brandable_type\" = $2 LIMIT $3  [[\"brandable_id\", 1], [\"brandable_type\", \"Development\"], [\"LIMIT\", 1]]\nCompleted 400 Bad Request in 24ms (ActiveRecord: 3.1ms)\n\n\n\nActionController::ParameterMissing (param is missing or the value is empty: referral):\n\napp/controllers/homeowners/referrals_controller.rb:23:in `referral_params'\napp/controllers/homeowners/referrals_controller.rb:17:in `create_new_referral'\napp/controllers/homeowners/referrals_controller.rb:11:in `create'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "is_accepted": false, "score": 1, "last_activity_date": 1554124442, "creation_date": 1554124442, "answer_id": 55456039, "question_id": 55453732, "link": "https://stackoverflow.com/questions/55453732/cant-upload-image-with-paperclip-in-ruby-on-rails/55456039#55456039", "title": "Can&#39;t upload image with Paperclip in Ruby on Rails", "body": "<p>This is not strictly answering your question but I feel I should point out that since the release of active storage with rails 5.2 many of these file upload gems have been deprecated. This means they will no longer be maintained. (see github page <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip</a>)</p>\n\n<p>With that in mind I would strongly advise you to use active storage, rather than paperclip.</p>\n\n<p>Active storage is part of the rails core framework now so you can rest assured it will be maintained and always work the the latest releases of rails.</p>\n\n<p>Plus, active storage is super easy to implement and full of really cool features.</p>\n\n<p>You can read more about active storage here: <a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html\" rel=\"nofollow noreferrer\">https://edgeguides.rubyonrails.org/active_storage_overview.html</a></p>\n"}], "owner": {"reputation": 39, "user_id": 7482340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822dc0d32ba3e9879862ac0117c58f48?s=128&d=identicon&r=PG&f=1", "display_name": "BF.Safouen", "link": "https://stackoverflow.com/users/7482340/bf-safouen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554124442, "creation_date": 1554116966, "last_edit_date": 1554117447, "question_id": 55453732, "link": "https://stackoverflow.com/questions/55453732/cant-upload-image-with-paperclip-in-ruby-on-rails", "title": "Can&#39;t upload image with Paperclip in Ruby on Rails", "body": "<p>I'm working on a simple api using ruby on rails, and tried to attach an image to my post but I always get this error:</p>\n\n<blockquote>\n  <p>\"[paperclip] Link failed with File exists @ syserr_fail2_in -\n  C:/Users/Safouene/AppData/Local/Temp/d5e01d9478f9774f9f669fd29da0cb2720190401-5260-1tjlj3v.png;\n  copying link\n  C:/Users/Safouene/AppData/Local/Temp/d5e01d9478f9774f9f669fd29da0cb2720190401-5260-ooex8h.png\n  to\n  C:/Users/Safouene/AppData/Local/Temp/d5e01d9478f9774f9f669fd29da0cb2720190401-5260-1tjlj3v.png\n  Command :: file -b --mime\n  \"C:/Users/Safouene/AppData/Local/Temp/d5e01d9478f9774f9f669fd29da0cb2720190401-5260-1tjlj3v.png\"\"\n  Completed 204 No Content in 65ms (ActiveRecord: 1.0ms)</p>\n</blockquote>\n\n<p>Here is My Model :</p>\n\n<pre><code>class Action &lt; ApplicationRecord\n  belongs_to :user \n  validates :title ,presence: true\n  validates :desc ,presence: true \n  validates :location , presence: true \n  has_attached_file :picture \n  validates_attachment :picture, presence: true\n  do_not_validate_attachment_file_type :picture\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1554117729, "post_id": 55453504, "comment_id": 97621390, "body": "see <a href=\"https://stackoverflow.com/questions/33921185/how-to-define-a-class-variable-on-a-singleton-class\" title=\"how to define a class variable on a singleton class\">stackoverflow.com/questions/33921185/&hellip;</a>"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1554118050, "post_id": 55453504, "comment_id": 97621553, "body": "It&#39;s <a href=\"https://github.com/rubocop-hq/ruby-style-guide#no-class-vars\" rel=\"nofollow noreferrer\">recommended to avoid</a> the usage of class variables due to their &quot;nasty&quot; behavior in inheritance"}, {"owner": {"reputation": 11, "user_id": 11284182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477cf2f5d1babdba723d5a635cc8b3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Y.Lu", "link": "https://stackoverflow.com/users/11284182/y-lu"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1554118882, "post_id": 55453504, "comment_id": 97622024, "body": "@mechnicov Yeah, I know that we should avoid using class variables when actually programming, but I just what to know about it. I think the lexical scope in ruby is quite complex, as I used java before..."}, {"owner": {"reputation": 11, "user_id": 11284182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477cf2f5d1babdba723d5a635cc8b3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Y.Lu", "link": "https://stackoverflow.com/users/11284182/y-lu"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1554119244, "post_id": 55453504, "comment_id": 97622208, "body": "@cremno I have read this before, but what confuses me is that class &lt;&lt; D will change the hexical scope that current class is the singleton class of D, so why can&#39;t we just simply put a class variable in the singleton class of D, without using method class_variable_set? This is the inner design of Ruby to protect us from using too much class variables? haha"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1554138654, "post_id": 55453504, "comment_id": 97633254, "body": "Your title refers to &quot;singleton instance of a Ruby class&quot;. That&#39;s not clear. Classes don&#39;t have singleton instances and singleton classes don&#39;t have instances (<code>Class.new.singleton_class.new #=&gt;  TypeError (can&#39;t create instance of singleton class)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11284182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477cf2f5d1babdba723d5a635cc8b3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Y.Lu", "link": "https://stackoverflow.com/users/11284182/y-lu"}, "edited": false, "score": 0, "creation_date": 1554299739, "post_id": 55459734, "comment_id": 97700840, "body": "Yeah, I try an demo like I use class to open a class, than use several class &lt;&lt; to open the singleton class of the singleton class of... of the class, even if I have use servel class &lt;&lt;, if I want to define a class variable, it define as the class variable of the class itself, instead of the singleton class. The only way is to use a method: class_variable_set. Thank you so much."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1554136415, "creation_date": 1554136415, "answer_id": 55459734, "question_id": 55453504, "link": "https://stackoverflow.com/questions/55453504/how-to-define-class-variables-for-singleton-instance-of-a-ruby-class/55459734#55459734", "title": "How to define class variables for Singleton instance of a Ruby class?", "body": "<p>For a class <code>C</code>, it appears that defining a class variable on <code>C</code>'s singleton class is equivalent to defining the same class variable on <code>C</code>.</p>\n\n<pre><code>class C\n  @@a = 0\n  class &lt;&lt; self\n    @@c = 1\n  end\nend\n\nclass D &lt; C\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>C.class_variables\n  #=&gt; [:@@a, :@@c] \nD.class_variables\n  #=&gt; [:@@a, :@@c] \nC.singleton_class.class_variables\n  #=&gt; [] \nD.singleton_class.class_variables\n  #=&gt; [] \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>D.class_variable_get(:@@a)\n  #=&gt; 0 \nD.class_variable_set(:@@a, 2)\n  #=&gt; 2 \nD.class_variables\n  #=&gt; [:@@a, :@@c] \nC.class_variable_get(:@@a)\n  #=&gt; 2 \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>D.singleton_class.class_variable_get(:@@c)\n  #=&gt; 1 \nD.singleton_class.class_variable_set(:@@c, 3)\n  #=&gt; 3 \nC.singleton_class.class_variable_get(:@@c)\n  #=&gt; 3 \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11284182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477cf2f5d1babdba723d5a635cc8b3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Y.Lu", "link": "https://stackoverflow.com/users/11284182/y-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554136533, "creation_date": 1554116188, "last_edit_date": 1554129321, "question_id": 55453504, "link": "https://stackoverflow.com/questions/55453504/how-to-define-class-variables-for-singleton-instance-of-a-ruby-class", "title": "How to define class variables for Singleton instance of a Ruby class?", "body": "<p>How do we define a class variable for a singleton instance of a class?</p>\n\n<p>Where exactly will the class variable be put for Ruby? What does the location of the class variables depend on? Scope, Lexical context or the current class? </p>\n\n<pre><code>class C\n    class &lt;&lt; self\n        @@c = 1\n    end\nend\n# C.class_variables =&gt; [:@@a]\n# Why the class variables belong to C, instead of singleton instance of C?\n\nclass D\nend\nclass &lt;&lt; D\n    @@d = 1\nend\n# Object.class_variables =&gt; [:@@d]\n# warning: class variable access from toplevel\n# Why the class variables belong to Object, instead of class D or singleton class of class D?\n\n# How Ruby decide why to put the class variables?\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 4388049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPXy6.jpg?s=128&g=1", "display_name": "Ravi Kashyap", "link": "https://stackoverflow.com/users/4388049/ravi-kashyap"}, "edited": false, "score": 0, "creation_date": 1554116781, "post_id": 55452938, "comment_id": 97620862, "body": "I tried by removing js too, but the problem remains same."}], "tags": [], "owner": {"reputation": 1308, "user_id": 630074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4983c860b7bb97c0d857aa228703d56e?s=128&d=identicon&r=PG", "display_name": "murb", "link": "https://stackoverflow.com/users/630074/murb"}, "is_accepted": true, "score": 0, "last_activity_date": 1554114397, "creation_date": 1554114397, "answer_id": 55452938, "question_id": 55452797, "link": "https://stackoverflow.com/questions/55452797/locale-not-working-properly-on-staging-in-rails/55452938#55452938", "title": "locale not working properly on staging in rails?", "body": "<p>do you have a separate (fallback) translation file that makes the other translations work? this error seems to suggest you shouldn't scope the translations with <code>js</code>; remove the second line.</p>\n"}], "owner": {"reputation": 317, "user_id": 4388049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPXy6.jpg?s=128&g=1", "display_name": "Ravi Kashyap", "link": "https://stackoverflow.com/users/4388049/ravi-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 55452938, "answer_count": 1, "score": 0, "last_activity_date": 1554114397, "creation_date": 1554113907, "question_id": 55452797, "link": "https://stackoverflow.com/questions/55452797/locale-not-working-properly-on-staging-in-rails", "title": "locale not working properly on staging in rails?", "body": "<p>I am working on an application and I am using multiple locales. All are working fine into development environment but there is some problem with staging environment. Few locales raising missing translation error. </p>\n\n<p>Here is my locale file:</p>\n\n<pre><code>en:\n  js:\n    funds:\n      deposit: Deposit\n      withdraw: Withdraw\n      currency_name:\n        usd: USD\n        btc: BTC\n        eth: ETH\n        aion: AION\n        ada: CARDANO\n        vechain: VECHAIN\n     deposit_btc:\n        title: BTC Deposit\n     deposit_eth:\n        title: ETH Deposit\n     deposit_aion:\n        title: AION Deposit\n     deposit_ada: \n        title: CARDANO Deposit\n     deposit_vechain: \n        title: VECHAIN Deposit  \n     withdraw_btc:\n        title: BTC Withdraw\n     withdraw_eth:\n        title: ETH Withdraw\n     withdraw_aion:\n        title: AION Withdraw\n     withdraw_ada:\n        title: CARDANO Withdraw\n     withdraw_vechain:\n        title: VECHAIN Withdraw\n</code></pre>\n\n<p>When I run my application into staging environment then all btc, eth, ada, and vechain working fine. But the locales for aion give following error:</p>\n\n<pre><code>[missing \"en.funds.deposit_aion.title\" translation]\n</code></pre>\n\n<p>Here is my template for rendering this currency :</p>\n\n<pre><code>&lt;h2 class=\"panel-title\"&gt;{{\"funds.deposit_aion.title\" | t}}&lt;/h2&gt;\n&lt;ng-include src=\"'/templates/funds/_deposit_coin.html'\"&gt;&lt;/ng-include&gt;\n&lt;ng-include src=\"'/templates/funds/_deposit_coin_history.html'\"&gt;&lt;/ng-include&gt;\n</code></pre>\n\n<p>Please help if anyone can?</p>\n"}, {"tags": ["ruby", "fastlane", "rexml"], "comments": [{"owner": {"reputation": 470, "user_id": 10326010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUlXC.jpg?s=128&g=1", "display_name": "rcarba", "link": "https://stackoverflow.com/users/10326010/rcarba"}, "edited": false, "score": 0, "creation_date": 1554115456, "post_id": 55452736, "comment_id": 97620103, "body": "Why do you use &quot;include REXML&quot; here? You may have misunderstand the &quot;include&quot; function on Ruby. Take a look at <a href=\"https://stackoverflow.com/questions/318144/what-is-the-difference-between-include-and-require-in-ruby\">this</a>"}, {"owner": {"reputation": 127, "user_id": 2515665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8fkr.jpg?s=128&g=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/2515665/santiago"}, "reply_to_user": {"reputation": 470, "user_id": 10326010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUlXC.jpg?s=128&g=1", "display_name": "rcarba", "link": "https://stackoverflow.com/users/10326010/rcarba"}, "edited": false, "score": 0, "creation_date": 1554115808, "post_id": 55452736, "comment_id": 97620308, "body": "if not use include, how can I import this module in Fastfile?"}, {"owner": {"reputation": 470, "user_id": 10326010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUlXC.jpg?s=128&g=1", "display_name": "rcarba", "link": "https://stackoverflow.com/users/10326010/rcarba"}, "edited": false, "score": 2, "creation_date": 1554116048, "post_id": 55452736, "comment_id": 97620441, "body": "Already imported with: require &#39;rexml/document&#39;"}, {"owner": {"reputation": 127, "user_id": 2515665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8fkr.jpg?s=128&g=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/2515665/santiago"}, "reply_to_user": {"reputation": 470, "user_id": 10326010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUlXC.jpg?s=128&g=1", "display_name": "rcarba", "link": "https://stackoverflow.com/users/10326010/rcarba"}, "edited": false, "score": 0, "creation_date": 1554172114, "post_id": 55452736, "comment_id": 97643769, "body": "you are right, but simple using this not enough."}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 2515665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8fkr.jpg?s=128&g=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/2515665/santiago"}, "is_accepted": false, "score": 0, "last_activity_date": 1554172214, "last_edit_date": 1554172214, "creation_date": 1554170666, "answer_id": 55465932, "question_id": 55452736, "link": "https://stackoverflow.com/questions/55452736/i-want-to-use-rexml-in-fastfile-but-when-i-include-in-fastfile-doesnt-work/55465932#55465932", "title": "I want to use REXML in Fastfile, but when I include in Fastfile doesn&#39;t work", "body": "<p>using:</p>\n\n<pre><code>require \"rexml/document\"\nfile = File.new( \"movie.xml\" )\nxmldoc = REXML::Document.new file\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>#!/usr/bin/ruby -w\nrequire 'rexml/document' \n\n# include REXML\nxmlfile = File.new(\"movie.xml\")\nxmldoc = rexml.Document.new(xmlfile)\n</code></pre>\n\n<p>solve my problem, but I still don't know why fastlane can't recognize include.    </p>\n"}], "owner": {"reputation": 127, "user_id": 2515665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8fkr.jpg?s=128&g=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/2515665/santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554172214, "creation_date": 1554113698, "question_id": 55452736, "link": "https://stackoverflow.com/questions/55452736/i-want-to-use-rexml-in-fastfile-but-when-i-include-in-fastfile-doesnt-work", "title": "I want to use REXML in Fastfile, but when I include in Fastfile doesn&#39;t work", "body": "<p>Using Rexml in Fastfile, but fastlane can't recognize include, so I can't include Rexml module.</p>\n\n<p>here is the error:</p>\n\n<pre><code>[!] Could not find action, lane or variable 'include'. Check out the documentation for more details: https://docs.fastlane.tools/actions\n</code></pre>\n\n<p>here is my code in Fastfile</p>\n\n<pre><code>#!/usr/bin/ruby\nrequire 'rexml/document'\ninclude REXML\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "session-cookies", "sorcery"], "answers": [{"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1554115038, "post_id": 55452723, "comment_id": 97619880, "body": "How to run this command?"}, {"owner": {"reputation": 741, "user_id": 7752594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gU6so.png?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7752594/vishal"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1554115457, "post_id": 55452723, "comment_id": 97620104, "body": "Sorry, this method will delete sessions for the single user like @user.invalidate_active_sessions! This will not fit for your solution."}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 1, "creation_date": 1554119234, "post_id": 55452723, "comment_id": 97622207, "body": "How about just <code>User.all.each {|u| u.invalidate_active_sessions! }</code>"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 1, "creation_date": 1554127756, "post_id": 55452723, "comment_id": 97627228, "body": "NoMethodError: undefined method `invalidate_active_sessions!&#39; for #&lt;User:0x000000000fc10a70&gt;"}, {"owner": {"reputation": 67, "user_id": 6796765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T2xdz.jpg?s=128&g=1", "display_name": "hasanadeem", "link": "https://stackoverflow.com/users/6796765/hasanadeem"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1584900407, "post_id": 55452723, "comment_id": 107576203, "body": "Hey @Haseeb - Did you find any solution regarding this problem? I want the user to be logged out from all the active sessions upon password updation."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1584992457, "post_id": 55452723, "comment_id": 107607430, "body": "yes you can change session_store key"}, {"owner": {"reputation": 67, "user_id": 6796765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T2xdz.jpg?s=128&g=1", "display_name": "hasanadeem", "link": "https://stackoverflow.com/users/6796765/hasanadeem"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1585078025, "post_id": 55452723, "comment_id": 107638116, "body": "Hey @Haseeb - Can you please explain the process a bit?"}], "tags": [], "owner": {"reputation": 741, "user_id": 7752594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gU6so.png?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7752594/vishal"}, "is_accepted": false, "score": 0, "last_activity_date": 1554113654, "creation_date": 1554113654, "answer_id": 55452723, "question_id": 55452632, "link": "https://stackoverflow.com/questions/55452632/how-to-logout-all-login-users-in-sorcery/55452723#55452723", "title": "How to logout all login users in sorcery", "body": "<p>You can invalidate all sessions using <code>invalidate_active_sessions!</code></p>\n\n<p>See <a href=\"https://github.com/Sorcery/sorcery#session-timeout\" rel=\"nofollow noreferrer\">https://github.com/Sorcery/sorcery#session-timeout</a></p>\n"}, {"tags": [], "owner": {"reputation": 1066, "user_id": 3628295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c87fee58a1e77b9f4ddbae72a87f7f?s=128&d=identicon&r=PG&f=1", "display_name": "ogelacinyc", "link": "https://stackoverflow.com/users/3628295/ogelacinyc"}, "is_accepted": false, "score": 1, "last_activity_date": 1554137201, "creation_date": 1554137201, "answer_id": 55459957, "question_id": 55452632, "link": "https://stackoverflow.com/questions/55452632/how-to-logout-all-login-users-in-sorcery/55459957#55459957", "title": "How to logout all login users in sorcery", "body": "<ol>\n<li><p>using timeout</p>\n\n<pre><code># config/initializers/sorcery.rb\nRails.application.config.sorcery.submodules = [:session_timeout]\n\n# config/initializers/sorcery.rb\nRails.application.config.sorcery.configure do |config|\n  config.session_timeout = 1 # This is in seconds.\n  config.session_timeout_from_last_action = true # session timeout is calculated from the last valid activity. By default this is false.\nend\n</code></pre></li>\n<li><p>using callback </p>\n\n<pre><code># app/controllers/application_controller.rb\nbefore_action :auto_logout, if: :logged_in?\ndef auto_logout\n  force_forget_me!\n  logout\nend\n</code></pre></li>\n<li><p>using current_users, add class method in user model</p>\n\n<pre><code># app/models/user.rb\ndef self.get_current_users\n  config = sorcery_config\n\n  where(\"#{config.last_activity_at_attribute_name} IS NOT NULL\") \\\n  .where(\"#{config.last_logout_at_attribute_name} IS NULL \n    OR #{config.last_activity_at_attribute_name} &gt; #{config.last_logout_at_attribute_name}\") \\\n  .where(\"#{config.last_activity_at_attribute_name} &gt; ? \", config.activity_timeout.seconds.ago.utc.to_s(:db))\nend\n\n# call upper method anywhere (or console)\nUser.get_current_users.each do |user|\n  current_user = user\n  before_logout!\n  @current_user = nil\n  reset_sorcery_session\n  after_logout!(user)\nend\n</code></pre></li>\n<li><p>(recommend)remove session store from your disk like session_store, redis etc..and so on</p></li>\n</ol>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "closed_date": 1554188507, "answer_count": 2, "score": -1, "last_activity_date": 1554137201, "creation_date": 1554113331, "question_id": 55452632, "link": "https://stackoverflow.com/questions/55452632/how-to-logout-all-login-users-in-sorcery", "closed_reason": "Needs more focus", "title": "How to logout all login users in sorcery", "body": "<p>I am using sorcery for authentication in our site. I want to logout all login users from our site but can't find any way to logout all users.</p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["c", "arrays", "ruby", "maze"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1554113015, "post_id": 55452329, "comment_id": 97618770, "body": "&quot;but it just don&#39;t work&quot; isn&#39;t a good description of your problem. Please show your code!"}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 2, "creation_date": 1554113034, "post_id": 55452329, "comment_id": 97618781, "body": "Then just use \u2019#\u2019 and \u2019 \u2019 like in your example?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1554211714, "post_id": 55452329, "comment_id": 97662367, "body": "What happens when you, naively, replace <code>&#39;_&#39;</code> and <code>&#39;|&#39;</code> with <code>&#39;#&#39;</code>? Where do you need extra <code>&#39;#&#39;</code> or spaces?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554114088, "post_id": 55452820, "comment_id": 97619343, "body": "Bars are to be replaced with a single sharp though."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554114142, "post_id": 55452820, "comment_id": 97619385, "body": "@AlekseiMatiushkin Is that at conflict with my answer? &quot;bar&quot; would be the horizontal or the vertical?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554114205, "post_id": 55452820, "comment_id": 97619412, "body": "Your answer recommends to <i>replace each <code>|</code> with two <code>#</code></i>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554114272, "post_id": 55452820, "comment_id": 97619452, "body": "And I consider that necessary. Otherwise there would be a &quot;hole&quot; in the wall below each bar?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554114600, "post_id": 55452820, "comment_id": 97619630, "body": "Ah, you meant \u201cbar with a sharp <i>in both rows</i>\u201d. Yes, that\u2019s correct then."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1554114657, "post_id": 55452820, "comment_id": 97619654, "body": "@AlekseiMatiushkin Thanks for your input. It helped me get the explanation clearer and made me use explicit representation in addition to description."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554114856, "post_id": 55452820, "comment_id": 97619781, "body": "Unfortunately, this solution has a glitch though. Check cell <code>[2,2]</code> in my output (the algorithm is the same.) It\u2019s a wall in the bar-underscore representation, but a space in sharp-only :( Even worse, actually. It is completely wrong. Empty maze 1&#215;2 will become 1&#215;4 :("}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115211, "post_id": 55452820, "comment_id": 97619977, "body": "Can you help identify the <code>[2,2]</code> cell?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115268, "post_id": 55452820, "comment_id": 97620002, "body": "Marked with \u201c&#215;\u201d in my deleted answer. Anyway, it doubles empty rows down."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115429, "post_id": 55452820, "comment_id": 97620087, "body": "I see, that is no glitch. It faithfully represents the same problem which occurs in the input. The &quot;bar-underscore&quot; representation has the same wholes in all the places where something like &quot;+&quot; (or maybe a &quot;.&quot;) is missing."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115525, "post_id": 55452820, "comment_id": 97620138, "body": "Ah, indeed, that is correct. But the number of rows should not increase in any case."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115554, "post_id": 55452820, "comment_id": 97620151, "body": "Doing your maze with the same number of rows I consider impossible."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115636, "post_id": 55452820, "comment_id": 97620200, "body": "Please edit your answer to a) ask for a solution with same number of rows (which I think is impossible) and b) filling the &quot;holes&quot;. That would be a much more precise question."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115749, "post_id": 55452820, "comment_id": 97620272, "body": "Also please provide an example of desired output for given input with your question. If you cannot make one by hand, then please consider whether what you are asking for might be impossible."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115785, "post_id": 55452820, "comment_id": 97620292, "body": "My answer is wrong, as well as yours. By the same number of rows I mean empty rows should not double."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115840, "post_id": 55452820, "comment_id": 97620322, "body": "Please explain what is meant by &quot;empty rows should not double&quot;. Is there an example of an empty row? @AlekseiMatiushkin"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554115916, "post_id": 55452820, "comment_id": 97620359, "body": "Yes and I provided it several comments above. Empty labirint, no walls, 1 column, 2 rows."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554116041, "post_id": 55452820, "comment_id": 97620437, "body": "How would those two rows be doubled? Or to put it differently, how are non-empty rows NOT doubled? I stand by my opinoin that doing this without doubling ALL rows is impossible. I try to get OP to understand or disprove that by asking for a handmade correct output for a given input... @AlekseiMatiushkin"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554116137, "post_id": 55452820, "comment_id": 97620499, "body": "Hmm, I think I start to understand what you mean. Give me a little time. @AlekseiMatiushkin"}, {"owner": {"reputation": 1, "user_id": 10473259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oMIv1GvEGrQ/AAAAAAAAAAI/AAAAAAAADGM/ndcdkDJNvzE/photo.jpg?sz=128", "display_name": "Teinnor - Dingovar", "link": "https://stackoverflow.com/users/10473259/teinnor-dingovar"}, "edited": false, "score": 0, "creation_date": 1554116625, "post_id": 55452820, "comment_id": 97620778, "body": "I love you ! That was exactly what&#39;s i wanted, thank you sooo much"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554116910, "post_id": 55452820, "comment_id": 97620938, "body": "I used the good discussion foundation by @AlekseiMatiushkin  (empty 1x2) to elaborate on the problems I see. He pointed out the &quot;doubling of emtpy rows&quot;. Which I don&#39;t see. Because of your last comment I assume that you do not see that problem either. Aleksei, I still would appreciate your input to help me see the doubling of rows. Maybe my view (&quot;no <b>inner</b> walls) and its difference to yours (&quot;no walls <b>at all</b>&quot;) is the key?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554117460, "post_id": 55452820, "comment_id": 97621248, "body": "I will post a proof that the required conversion is impossible in 10 minutes."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1554118062, "post_id": 55452820, "comment_id": 97621560, "body": "Posted a proof."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 2, "last_activity_date": 1554117173, "last_edit_date": 1554117173, "creation_date": 1554114023, "answer_id": 55452820, "question_id": 55452329, "link": "https://stackoverflow.com/questions/55452329/print-a-maze-using-only-two-characters/55452820#55452820", "title": "Print a maze using only two characters", "body": "<p>For your two letter maze you need twice the number of rows.<br>\nReplace each <code>|</code> with two <code>#</code> in consecutive rows.<br>\nReplace each <code>_</code> with a <code></code> in the first row and a <code>#</code> in the second row.<br>\nReplace each <code></code> with two <code></code> in consecutive rows.<br>\nIf the aspect ratio then does not please you, also double the columns and use each letter twice.</p>\n\n<pre><code>'|' to '#' in row 1\n       '#' in row 2\n\n'_' to ' ' in row 1\n       '#' in row 2\n\n' ' to ' ' in row 1\n       ' ' in row 2 \n</code></pre>\n\n<p>Exanple, this would be an empty 1x2 labyrint with no inner walls.</p>\n\n<pre><code> _\n| |\n|_|\n</code></pre>\n\n<p>Represented as</p>\n\n<pre><code> #\n# #\n# #\n# #\n###\n</code></pre>\n\n<p>It faithfully copies the \"gaps\"/\"holes\" in the input top left and top right corners.<br>\nIt also demonstrates the \"aspect ratio\" problem.</p>\n\n<p>Here is the alternative representation I proposed for the ration problem.</p>\n\n<pre><code>  ##\n##  ##\n##  ##\n##  ##\n######\n</code></pre>\n\n<p>Or even tripled, to get it more \"squarish\".</p>\n\n<pre><code>   ### \n###   ###\n###   ###\n###   ###\n#########\n</code></pre>\n\n<p>In order to fill the holes, you'd have to detect them in the input (that algorithm I consider out of scope, but let me know if you don't).</p>\n\n<pre><code>._.\n| |\n|_|\n</code></pre>\n\n<p>Then you can also replace them like <code>_</code> and get</p>\n\n<pre><code>###\n# #\n# #\n# #\n###\n</code></pre>\n\n<p>(<em>Judging by askers last comment, this is satisfactory. I feel I should give credits to  Aleksei Matiushkin for making me improve my answer.</em>)</p>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1554118211, "post_id": 55452823, "comment_id": 97621660, "body": "I like the clarity of the proof of what I suspected immediatly. Very helpful. A clear proof always outshines a &quot;I suspect&quot;. ;-)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554207706, "post_id": 55452823, "comment_id": 97659801, "body": "But there is, if you use an extra row and an extra column in the top and left of the labyrinth.  You can use two cell and, has normally the cells are almost twice as tall as wide. you&#39;ll get almost square cells.  If you have almost square cells, then it is better the 2x2 cell array.  And in the original labyrinth you also need an extra top line and left column to represent the top left walls."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554208432, "post_id": 55452823, "comment_id": 97660278, "body": "@LuisColorado I do not follow. One cannot isomorphically transform the arbitrary shape into a rectangle and the result is supposed to be the rectangle <b>with monospaced width and height cells</b>, that said a true rectangle. 2&#215;7 original maze with zero and seven horizontal walls in the first and second columns respectively is 2&#215;[7,13] in monospaced representation."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554214041, "post_id": 55452823, "comment_id": 97663908, "body": "@AlekseiMatiushkin, you probably don&#39;t follow, see my answer and you&#39;ll get onto it.  You can give a 2x2 cell size, as shown there, with a top left cell showing the cell interior, a right wall showing the right wall, a bottom left cell showing the lower wall and a bottom right showing a filled cell (a column?) and you&#39;ll get it with <b>monospaced width and height cells</b>."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554214608, "post_id": 55452823, "comment_id": 97664253, "body": "@AlekseiMatiushkin, indeed, in my answer I give 2x1 to the cell interior, 1 column to the vertical walls and 1 row to the horizontal walls (and so, the corners are 1x1)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554215168, "post_id": 55452823, "comment_id": 97664617, "body": "@LuisColorado to check why your solution is incorrect, simply follow the first column down. Compare the number of moves to reach the bottom. Also, you made me think it is indeed possible. We need empty cells that are jumped over between each row. To make is visually OK, we might make walls of size 1 and voids of size 1, but <i>earth</i> where one could step\u2014of size 2. That might work."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554215413, "post_id": 55452823, "comment_id": 97664773, "body": "@AlekseiMatiushkin, sorry but your reasoning is based on a premise that simply is false.  You assume that the horizontal walls are zero width, but you can just give them some width and, instead of printing a different char for the interior with no bottom wall and with it, write a first row with all the interiors and then a second row with the walls.  Don&#39;t affirm so categorically that it is not possible because of that, as I have demonstrated in my answer, writing <b>the same maze</b> in both representations.  You know that you cannot conclude based on a false premise, right?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554215620, "post_id": 55452823, "comment_id": 97664922, "body": "@LuisColorado all you demonstrated is the inability to read and understand comments. Your resulting maze requires more steps to go down in the first column than the original one. That simple."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1554215818, "post_id": 55452823, "comment_id": 97665071, "body": "@AlekseiMatiushkin, well, just continue telling that it is impossible to draw the maze.... :)  But I have provided code that simply prints it... any maze..."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1554117957, "last_edit_date": 1554117957, "creation_date": 1554114040, "answer_id": 55452823, "question_id": 55452329, "link": "https://stackoverflow.com/questions/55452329/print-a-maze-using-only-two-characters/55452823#55452823", "title": "Print a maze using only two characters", "body": "<p>The conversion in the question <strong>is not possible</strong>.</p>\n\n<p>That is because in the original representation the horizontal walls have <strong>zero height</strong> and in the sharp-only representation they took a cell to represent.</p>\n\n<p>Consider the following maze:</p>\n\n<pre><code>----\n| _|\n|  |\n----\n</code></pre>\n\n<p>In the left column, we have two cells and in the right column, we have three cells. When represented with a monospaced wall height, the whole maze does not remain <em>rectangular</em>.</p>\n\n<p>That said, there is no isomorphic transformation of the maze with bars and underscores to the maze where all the walls have a monospaced width and height. \u2a1e</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1555049783, "last_edit_date": 1555049783, "creation_date": 1554211432, "answer_id": 55475923, "question_id": 55452329, "link": "https://stackoverflow.com/questions/55452329/print-a-maze-using-only-two-characters/55475923#55475923", "title": "Print a maze using only two characters", "body": "<p>You can represent your maze just using two character cells, taking into account that the walls to the right and to the lower cell are represented by the characters <code>_</code> and <code>|</code>.</p>\n\n<p>On this premise, you will have four types of cells:</p>\n\n<ul>\n<li>A cell with no lower and no right walls, this will be represented by the sequence <code>\" .\"</code>.</li>\n<li>A cell with only a lower wall.  This cell will be represented by the sequence <code>\"_.\"</code>.</li>\n<li>A cell with only a right wall.  This cell will be represented by the sequence <code>\" |\"</code>.</li>\n<li>A cell with both walls.  This cell will be represented by the sequence <code>\"_|\"</code>.</li>\n</ul>\n\n<p>The upper wall and the left wall of a cell will be provided by the above cell and the left cell, respectively.</p>\n\n<p>It is worth noting that you will need a left wall for the whole labyrinth and a top wall also.  They can be simulated by an extra row of <code>._._._._._....</code> and a left wall composed by <code>|</code> chars, giving to (this will be almost similar to the maze you posted as example.</p>\n\n<p>So, if we represent the maze with an array of chars, a possible solution to the problem could be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid print_maze(FILE *f, char *maze, int rows, int cols)\n{\n    /* maze is an array that has rows * cols cells.\n     * Each cell is a bitmap where bit 0 represents the\n     * right wall, while bit 1 represents the low wall.\n     */\n#define LOWER_WALL (1 &lt;&lt; 1)\n#define RIGHT_WALL (1 &lt;&lt; 0)\n    int r, c;\n    /* top wall */\n    fputc('.', f);\n    for (c = 0; c &lt; cols; c++)\n        fputs(\"_.\", f);\n    fputc('\\n', f);\n    for (r = 0; r &lt; rows; r++) {\n        fputc('|', f);\n        for (c = 0; c &lt; cols; c++) {\n            fputs(*maze &amp; LOWER_WALL ? \"_\" : \" \", f);\n            fputs(*maze &amp; RIGHT_WALL ? \"|\" : \".\", f);\n            maze++;\n        }\n        fputc('\\n', f);\n    }\n} /* print_maze */\n\nchar *maze = \"2102022221\"\n             \"1130301031\"\n             \"1211212103\"\n             \"0123030311\"\n             \"1030212311\"\n             \"1303122121\"\n             \"1030230231\"\n             \"0321023023\"\n             \"2101210321\"\n             \"2232322223\";\n\nint main()\n{\n    print_maze(stdout, maze, 10, 10);\n}\n</code></pre>\n\n<p>The program above prints the maze:</p>\n\n<pre><code>._._._._._._._._._._.\n|_. | ._. ._._._._. |\n| | |_| ._| . | ._| |\n| |_. | |_. |_. | ._|\n| . |_._| ._| ._| | |\n| | ._| ._. |_._| | |\n| |_| ._| |_._. |_. |\n| | ._| ._._| ._._| |\n| ._|_. | ._._| ._._|\n|_. | . |_. | ._|_. |\n|_._._|_._|_._._._._|\n</code></pre>\n\n<p>In this case, you need just the opposite, as you want, then you need to print two lines per cell, as the cell will use four character positions for each cell, divided in two rows of two characters each:  in the first row, you emit a space <code></code> followed by the content of the right wall, and in the next row you emit the lower wall, followed by the lower right corner (a column, full of content):</p>\n\n<p>Next is the same program, but with the <code>print_maze</code> function modified to do the printing:\n    #include </p>\n\n<pre><code>void print_maze(FILE *f, char *maze, int rows, int cols)\n{\n    /* maze is an array that has rows * cols cells.\n     * Each cell is a bitmap where bit 0 represents the\n     * right wall, while bit 1 represents the low wall.\n     */\n#define LOWER_WALL (1 &lt;&lt; 1)\n#define RIGHT_WALL (1 &lt;&lt; 0)\n    int r, c;\n    /* top wall */\n    fputc('#', f);\n    for (c = 0; c &lt; cols; c++)\n        fputs(\"###\", f);\n    fputc('\\n', f);\n    for (r = 0; r &lt; rows; r++) {\n        fputc('#', f);\n        /* first row of the row :) */\n        for (c = 0; c &lt; cols; c++) {\n            fputs(*maze &amp; RIGHT_WALL ? \"  #\" : \"   \", f);\n            maze++;\n        }\n        fputs(\"\\n#\", f);\n        maze -= cols;\n        for (c = 0; c &lt; cols; c++) {\n            fputs(*maze &amp; LOWER_WALL ? \"###\" : \"  #\", f);\n            maze++;\n        }\n        fputc('\\n', f);\n    }\n} /* print_maze */\n\nchar *maze = \"2102022221\"\n             \"1130301031\"\n             \"1211212103\"\n             \"0123030311\"\n             \"1030212311\"\n             \"1303122121\"\n             \"1030230231\"\n             \"0321023023\"\n             \"2101210321\"\n             \"2232322223\";\n\nint main()\n{\n    print_maze(stdout, maze, 10, 10);\n}\n</code></pre>\n\n<p>which prints:</p>\n\n<pre><code>###############################\n#     #                       #\n####  #  ####  #############  #\n#  #  #  #     #     #     #  #\n#  #  ####  ####  #  #  ####  #\n#  #     #  #     #     #     #\n#  ####  #  ####  ####  #  ####\n#     #     #     #     #  #  #\n#  #  #######  ####  ####  #  #\n#  #     #        #     #  #  #\n#  #  ####  ####  #######  #  #\n#  #  #     #  #        #     #\n#  ####  ####  #######  ####  #\n#  #     #        #        #  #\n#  #  ####  #######  #######  #\n#     #     #        #        #\n#  #######  #  #######  #######\n#     #     #     #     #     #\n####  #  #  ####  #  #######  #\n#        #     #              #\n###############################\n</code></pre>\n\n<p>Please, next time, show your code, because StackOverflow is a forum to help you solve your programming problems, not to do your homework.  You say that you have converted ruby code into C, so probably your code has some problems.  It's better to solve your coding having a look at it.</p>\n\n<h1>EDIT</h1>\n\n<p>I've written a complete program to illustrate three ways of printing mazes, including the possibility of printing using the line drawing characters available in unicode.  You can see it in <a href=\"https://github.com/mojadita/maze.git\" rel=\"nofollow noreferrer\">Github</a></p>\n\n<p>See <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> for help on this.</p>\n"}], "owner": {"reputation": 1, "user_id": 10473259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oMIv1GvEGrQ/AAAAAAAAAAI/AAAAAAAADGM/ndcdkDJNvzE/photo.jpg?sz=128", "display_name": "Teinnor - Dingovar", "link": "https://stackoverflow.com/users/10473259/teinnor-dingovar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1555049783, "creation_date": 1554112381, "question_id": 55452329, "link": "https://stackoverflow.com/questions/55452329/print-a-maze-using-only-two-characters", "title": "Print a maze using only two characters", "body": "<p>I'm actually writing a program in C to generate perfect mazes. I found this code in ruby : <a href=\"https://gist.github.com/jamis/755866#file-recursive-backtracker2-rb\" rel=\"nofollow noreferrer\">https://gist.github.com/jamis/755866#file-recursive-backtracker2-rb</a> and I translated it in C. Until there everything is correct and the algorithm can generate mazes correctly.</p>\n\n<p>My problem is, those mazes needs three characters to be print. And i want only two characters to print it. I tried to modify the printing mode but it just don't works.</p>\n\n<p>For example, i want a maze like this :</p>\n\n<pre><code>#################################\n# #           #     #     # #   #\n# # ######### # # ### ### # # # #\n# #       #   # #     #   # # # #\n# ### ##### ### ####### # # ### #\n#     #     #   #     # # #   # #\n# ##### # ### ### ### # ##### # #\n# # #   # #   #   #   #     # # #\n# # # ##### ### ### ####### # # #\n#   # #     # # # #   #   #   # #\n### # # ##### # # ### # # ##### #\n#   #   #   #       #   #       #\n# ####### ### ############# # # #\n# #             #     #   # # # #\n# ############### ### # # ### # #\n#                 #     #     # #\n#################################\n</code></pre>\n\n<p>And it prints like this : </p>\n\n<pre><code> ___________________\n|_  |  _   _______  |\n| | |_|  _|   |  _| |\n| |_  | |_  |_  |  _|\n|   |___|  _|  _| | |\n| |  _|  _  |___| | |\n| |_|  _| |___  |_  |\n| |  _|  ___|  ___| |\n|  _|_  |  ___|  ___|\n|_  |   |_  |  _|_  |\n|_____|___|_________|\n</code></pre>\n\n<p>Anyone know how i should do to print the maze the way I want ? I can modify the dimensions of the maze or anything else, I just want to print with only two characters.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2623, "user_id": 2072882, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/79ac4ecb51a947be0ba0427c4e3dbd4b?s=128&d=identicon&r=PG", "display_name": "imechemi", "link": "https://stackoverflow.com/users/2072882/imechemi"}, "edited": false, "score": 0, "creation_date": 1554111954, "post_id": 55451884, "comment_id": 97618181, "body": "I don&#39;t seem to find any question here. What&#39;s blocking you, L&#233;o?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1554112000, "post_id": 55451884, "comment_id": 97618208, "body": "Maybe you mean this? <a href=\"http://railscasts.com/episodes/147-sortable-lists-revised\" rel=\"nofollow noreferrer\">railscasts.com/episodes/147-sortable-lists-revised</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2958, "user_id": 1697047, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MqlFH.jpg?s=128&g=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/1697047/sree"}, "edited": false, "score": 0, "creation_date": 1554116773, "post_id": 55453257, "comment_id": 97620858, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/22626605\">From Review</a>"}, {"owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1554188258, "post_id": 55453257, "comment_id": 97648421, "body": "thanks for this informations, I have followed many tutorials as well as this one but a problem persists when I refresh my page the elements are put back in the wrong order (updated at). And when I look at my database all the elements of the table come out empty..."}, {"owner": {"reputation": 128, "user_id": 7280636, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isWkcOyRDbA/AAAAAAAAAAI/AAAAAAAASHw/A_Wr0gpWuH8/photo.jpg?sz=128", "display_name": "Prasath Rajasekaran", "link": "https://stackoverflow.com/users/7280636/prasath-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1554193305, "post_id": 55453257, "comment_id": 97650947, "body": "Could you share your code so that I can better assist you?@L&#233;o-PaulDubourg"}, {"owner": {"reputation": 128, "user_id": 7280636, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isWkcOyRDbA/AAAAAAAAAAI/AAAAAAAASHw/A_Wr0gpWuH8/photo.jpg?sz=128", "display_name": "Prasath Rajasekaran", "link": "https://stackoverflow.com/users/7280636/prasath-rajasekaran"}, "reply_to_user": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1554205907, "post_id": 55453257, "comment_id": 97658656, "body": "The github link would be helpful @L&#233;o-PaulDubourg"}, {"owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1554207685, "post_id": 55453257, "comment_id": 97659780, "body": "Project <a href=\"https://github.com/LeoPaulD/rpdad/tree/votes\" rel=\"nofollow noreferrer\">link</a> <code>https:&#47;&#47;github.com&#47;LeoPaulD&#47;rpdad&#47;tree&#47;votes</code>"}, {"owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "edited": false, "score": 0, "creation_date": 1554359283, "post_id": 55453257, "comment_id": 97723607, "body": "@PrasathRajasekaran Yes I have create powerpoint for that, I&#39;m a noob on stackoverflow... google slides. I can show you my github if you want. <a href=\"https://github.com/LeoPaulD/rpdad/tree/votes\" rel=\"nofollow noreferrer\">github.com/LeoPaulD/rpdad/tree/votes</a>"}], "tags": [], "owner": {"reputation": 128, "user_id": 7280636, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isWkcOyRDbA/AAAAAAAAAAI/AAAAAAAASHw/A_Wr0gpWuH8/photo.jpg?sz=128", "display_name": "Prasath Rajasekaran", "link": "https://stackoverflow.com/users/7280636/prasath-rajasekaran"}, "is_accepted": true, "score": -1, "last_activity_date": 1554118153, "last_edit_date": 1554118153, "creation_date": 1554115467, "answer_id": 55453257, "question_id": 55451884, "link": "https://stackoverflow.com/questions/55451884/change-the-order-of-an-nested-content/55453257#55453257", "title": "Change the order of an nested content", "body": "<p>The 'rails_sortable' gem might be the solution you are looking for. It is a wrapper gem for jquery sortable library(<a href=\"https://jqueryui.com/sortable/\" rel=\"nofollow noreferrer\">https://jqueryui.com/sortable/</a>).</p>\n\n<p>It will allow you to reorder question by drag and drop. </p>\n\n<p>Add the following gems to your gem file and run bundle install</p>\n\n<pre><code>gem 'jquery-rails'\ngem 'jquery-ui-rails'\ngem 'rails_sortable'\n</code></pre>\n\n<p>Add the following require statements to application.js file</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require jquery-ui/widgets/sortable\n//= require rails_sortable\n</code></pre>\n\n<p>Now you need to add sort a column to your Question model(I am assuming here your model name is Question) say 'sort' or 'position'. This will be the position/order of a particular question</p>\n\n<p>And then add the following to your Question.rb(model) file</p>\n\n<pre><code>class Question &lt; ApplicationRecord\n  include RailsSortable::Model\n  set_sortable :sort  # Indicate a sort column\n  # If you do NOT want timestamps to be updated on sorting, use the \n  following option.\n  # set_sortable :sort, without_updating_timestamps: true\nend\n</code></pre>\n\n<p>While fetching the question data in the controller, order it based on the sort column</p>\n\n<pre><code>class QuestionsController &lt; ApplicationController\n  def index\n    @questions = Question.order(:sort).all\n  end\nend\n</code></pre>\n\n<p>And in the view,</p>\n\n<pre><code>&lt;table&gt;\n  &lt;tbody class=\"sortable\"&gt;  &lt;!-- sortable target --&gt;\n    &lt;% @questions.each_with_sortable_id do |question, sortable_id| %&gt;\n      &lt;tr id=\"&lt;%= sortable_id %&gt;\"&gt;  &lt;!-- Needs id tag on sorting \n      elements --&gt;\n       &lt;td&gt;&lt;%= question.id %&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= question.content %&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= question.category_id %&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= question.sort %&gt;&lt;/td&gt;\n     &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>And finally in the javascript file,</p>\n\n<pre><code>$(function() {\n $('.sortable').railsSortable(); \n});\n</code></pre>\n\n<p>rails_sortable github page: <a href=\"https://github.com/itmammoth/rails_sortable\" rel=\"nofollow noreferrer\">https://github.com/itmammoth/rails_sortable</a></p>\n"}], "owner": {"reputation": 59, "user_id": 11270621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A25T_aSa0L8/AAAAAAAAAAI/AAAAAAAADxo/tyyosvUvh-s/photo.jpg?sz=128", "display_name": "L&#233;o-Paul Dubourg", "link": "https://stackoverflow.com/users/11270621/l%c3%a9o-paul-dubourg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 2, "accepted_answer_id": 55453257, "answer_count": 1, "score": 0, "last_activity_date": 1554195615, "creation_date": 1554110861, "last_edit_date": 1554195615, "question_id": 55451884, "link": "https://stackoverflow.com/questions/55451884/change-the-order-of-an-nested-content", "title": "Change the order of an nested content", "body": "<p>I created a Rails application to create questions according to the category. \nWhen editing my question I would like to be able to choose the order in which the question appears </p>\n\n<p><a href=\"https://i.stack.imgur.com/oyO0U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oyO0U.png\" alt=\"enter image description here\"></a></p>\n\n<p><hr>\n<a href=\"https://i.stack.imgur.com/wxxIy.png\" rel=\"nofollow noreferrer\">show image bdd</a></p>\n\n<p>the column sort is identical to question_id but me question is a nested of category so i want the sort for the sub-ressource\nAnd when I drag and drop an element the column sort don't change so when I refrech the order is the same</p>\n"}, {"tags": ["ruby", "selenium"], "comments": [{"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1554149047, "post_id": 55449798, "comment_id": 97637831, "body": "Please read why <a href=\"https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors\">a screenshot of code is a bad idea</a>. Paste the code and properly format it instead. This includes error messages."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8646817, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x-6HaAYK2t0/AAAAAAAAAAI/AAAAAAAAABg/VZiVsafukz8/photo.jpg?sz=128", "display_name": "GenUser", "link": "https://stackoverflow.com/users/8646817/genuser"}, "edited": false, "score": 0, "creation_date": 1554104205, "post_id": 55450102, "comment_id": 97614393, "body": "I did that. Should I still try to run <code>selenium install</code> after that? The error remains"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 21, "user_id": 8646817, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x-6HaAYK2t0/AAAAAAAAAAI/AAAAAAAAABg/VZiVsafukz8/photo.jpg?sz=128", "display_name": "GenUser", "link": "https://stackoverflow.com/users/8646817/genuser"}, "edited": false, "score": 1, "creation_date": 1554104352, "post_id": 55450102, "comment_id": 97614459, "body": "you just need <code>gem install selenium-webdriver</code>, don&#39;t have to <code>gem install selenium</code>."}, {"owner": {"reputation": 21, "user_id": 8646817, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x-6HaAYK2t0/AAAAAAAAAAI/AAAAAAAAABg/VZiVsafukz8/photo.jpg?sz=128", "display_name": "GenUser", "link": "https://stackoverflow.com/users/8646817/genuser"}, "edited": false, "score": 0, "creation_date": 1554137339, "post_id": 55450102, "comment_id": 97632584, "body": "I realized that although selenium-webdriver worked, I had to manually install a chrome webdriver. Thank you for the help"}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": false, "score": 1, "last_activity_date": 1554104072, "creation_date": 1554104072, "answer_id": 55450102, "question_id": 55449798, "link": "https://stackoverflow.com/questions/55449798/trouble-downloading-selenium-windows-10/55450102#55450102", "title": "Trouble downloading selenium Windows 10", "body": "<p>You have to install selenium webdriver gem.</p>\n\n<pre><code>gem install selenium-webdriver\n</code></pre>\n\n<p>Selenium gem is oldest g,em with version (0.2.11) last updated in 2013.</p>\n"}, {"tags": [], "owner": {"reputation": 1782, "user_id": 4513879, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/--zD_gKbQXgs/AAAAAAAAAAI/AAAAAAAAAFw/bTW_-iJGLAw/photo.jpg?sz=128", "display_name": "Pradnya Bolli", "link": "https://stackoverflow.com/users/4513879/pradnya-bolli"}, "is_accepted": true, "score": 1, "last_activity_date": 1554112196, "creation_date": 1554112196, "answer_id": 55452264, "question_id": 55449798, "link": "https://stackoverflow.com/questions/55449798/trouble-downloading-selenium-windows-10/55452264#55452264", "title": "Trouble downloading selenium Windows 10", "body": "<p>Installing Selenium WebDriver for Ruby</p>\n\n<p>Step 1. visit the Ruby site \"<a href=\"https://www.ruby-lang.org/en/documentation/installation/\" rel=\"nofollow noreferrer\">https://www.ruby-lang.org/en/documentation/installation/</a>\" and choose one of the installation methods on the site depending on your OS and preferences.</p>\n\n<p>Step 2: verify installation with the command below.</p>\n\n<pre><code>C:\\&gt;ruby --version\n</code></pre>\n\n<p>If Ruby was installed correctly, you will see the version information as shown below</p>\n\n<blockquote>\n  <p>ruby 2.1.3p242 (2014-09-19 revision 47630) [x64-mingw32]</p>\n</blockquote>\n\n<p>In this example above, I installed Ruby 64 bit on Windows. During the installation you need to make sure Ruby installer updates some environment path to include Ruby and Gem executable file.</p>\n\n<p>Assuming that you have already installed Ruby on your machine. Let's now install the Ruby WebDriver gem file. </p>\n\n<p>Open command prompt on your operating system and execute the command below:</p>\n\n<pre><code>gem install selenium-webdriver\n</code></pre>\n\n<p>Ruby and Selenium web driver is now ready for developing test automation.</p>\n\n<p>for more infortaion use <a href=\"http://davehaeffner.com/selenium-guidebook/install/ruby/windows/1.9/\" rel=\"nofollow noreferrer\">this</a> link.</p>\n"}], "owner": {"reputation": 21, "user_id": 8646817, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x-6HaAYK2t0/AAAAAAAAAAI/AAAAAAAAABg/VZiVsafukz8/photo.jpg?sz=128", "display_name": "GenUser", "link": "https://stackoverflow.com/users/8646817/genuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 55452264, "answer_count": 2, "score": 0, "last_activity_date": 1554112196, "creation_date": 1554102960, "last_edit_date": 1592644375, "question_id": 55449798, "link": "https://stackoverflow.com/questions/55449798/trouble-downloading-selenium-windows-10", "title": "Trouble downloading selenium Windows 10", "body": "<p>When downloading selenium via Ruby's &quot;command prompt&quot; on windows, I ran into the following error after  <code>gem install selenium</code>. The script prompted me to run <code>selenium install</code> however when I ran selenium, I received the following error:\n<a href=\"https://i.stack.imgur.com/6rrGt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6rrGt.png\" alt=\"running\" /></a></p>\n<p>Any solutions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jwt"], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1554102600, "post_id": 55449490, "comment_id": 97613689, "body": "oh i see, got it. thanks to clear my doubt. It&#39;s not used for encryption but authenticate."}], "tags": [], "owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "is_accepted": true, "score": 2, "last_activity_date": 1554101575, "creation_date": 1554101575, "answer_id": 55449490, "question_id": 55449353, "link": "https://stackoverflow.com/questions/55449353/jwt-token-security-check-with-ruby/55449490#55449490", "title": "JWT token security Check with Ruby", "body": "<p>JWT is not for encryption, but for identification. </p>\n\n<p>The JWT generator signed the payload with a private key, you can verify if it is generated by the specific generator or not, using a public key. But the payload is not encrypted, anyone can read it.</p>\n\n<p>For example. John sends you a message that \"he is at home.\", and signed it by his private key. Everyone can read this message but you can verify it is really sent by John, not someone else like Alice.</p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 1357822, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a495e0bf11b45242ed52a4d34ee19f68?s=128&d=identicon&r=PG", "display_name": "abaelter", "link": "https://stackoverflow.com/users/1357822/abaelter"}, "is_accepted": false, "score": 2, "last_activity_date": 1554102173, "creation_date": 1554102173, "answer_id": 55449625, "question_id": 55449353, "link": "https://stackoverflow.com/questions/55449353/jwt-token-security-check-with-ruby/55449625#55449625", "title": "JWT token security Check with Ruby", "body": "<p>Anyone can decode, but only those who have your secret can verify the token.</p>\n\n<blockquote>\n  <p>It is important to understand that the purpose of using JWT is NOT to hide or obscure data in any way. The reason why JWT are used is to prove that the sent data was actually created by an authentic source.</p>\n</blockquote>\n\n<p><a href=\"https://medium.com/vandium-software/5-easy-steps-to-understanding-json-web-tokens-jwt-1164c0adfcec\" rel=\"nofollow noreferrer\">https://medium.com/vandium-software/5-easy-steps-to-understanding-json-web-tokens-jwt-1164c0adfcec</a></p>\n"}], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "accepted_answer_id": 55449490, "answer_count": 2, "score": 0, "last_activity_date": 1554102173, "creation_date": 1554101015, "question_id": 55449353, "link": "https://stackoverflow.com/questions/55449353/jwt-token-security-check-with-ruby", "title": "JWT token security Check with Ruby", "body": "<p>I am using <strong><a href=\"https://github.com/jwt/ruby-jwt\" rel=\"nofollow noreferrer\">ruby-jwt</a></strong> gem to generate token. I am not sure it's safe or not? How can I secure my payload. I tried different ways but still can hack payload.</p>\n\n<pre><code>&gt; payload = {email: \"gagangami@gmail.com\", token: \"xyz@123\"}\n# Way1\n&gt; token1 = JWT.encode(payload, Rails.application.secrets.secret_key_base, 'HS256')\n#=&gt; \"eyJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImdhZ2FuZ2FtaUBnbWFpbC5jb20iLCJ0b2tlbiI6Inh5ekAxMjMifQ.l42W9P4lyP2XWXytu8qpasc6mAFg01Dg57Az1bfxgS8\"\n\n# Way 2\n&gt; rsa_private = OpenSSL::PKey::RSA.generate 2048\n&gt; rsa_public = rsa_private.public_key\n&gt; token2 = JWT.encode payload, rsa_private, 'RS256'\n =&gt; \"eyJhbGciOiJSUzI1NiJ9.eyJlbWFpbCI6ImdhZ2FuZ2FtaUBnbWFpbC5jb20iLCJ0b2tlbiI6Inh5ekAxMjMifQ.U6DO9f9KZ_-GVhviACpXmuyc0dQUznPxZdCaaspr5JP36EweAuP8Wn_R2jvK2ahW0BR-RAh7Z9ChyIk94tDjasSbUYdoW_re299RB-ZmS0NVpCEa-g20sT-5JKCTwbD25vXYdxM4E0swQ81sKw35H5T8ZXSHsrE4bP5mA-me_Wli3hyGacb5O3esStPMdRC5r20qCoK7QW7Wl7NnZHLYjIn8k7lxsFmheNyl1l3OSLY92bxGkSyx4lom6bWqEMXSFdLWqPdKTOX9RZbNVi_6fGms79W6XXnb29htqkM1Z1h0RLXzjCODbALpa7At88xWr32IkHzwNxRJ28VAOJB3Qw\"\n</code></pre>\n\n<p>If I try to decode JWT token manually without secret it gives error. works fine. </p>\n\n<p>But If I paste above token <code>token1</code> and <code>token2</code> at <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a> I am able to see payload. Is this safe way or Bug? for reference I am attaching two screenshots.\n<a href=\"https://i.stack.imgur.com/n1nfv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n1nfv.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/eQtWs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eQtWs.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 33, "user_id": 7799373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NMgdPO54mts/AAAAAAAAAAI/AAAAAAAAEw4/A_gBzzU5y4c/photo.jpg?sz=128", "display_name": "Test0n3", "link": "https://stackoverflow.com/users/7799373/test0n3"}, "edited": false, "score": 0, "creation_date": 1554098592, "post_id": 55448861, "comment_id": 97612174, "body": "Solved the problem doing:  &gt; rails server -p 3000 -b 127.0.0.1  But miracles or magic aren&#39;t a good explanation. Any ideas where I&#39;m failing?"}], "answers": [{"comments": [{"owner": {"reputation": 1746, "user_id": 9509346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eInAz.jpg?s=128&g=1", "display_name": "dpapadopoulos", "link": "https://stackoverflow.com/users/9509346/dpapadopoulos"}, "edited": false, "score": 0, "creation_date": 1573210346, "post_id": 58764831, "comment_id": 103816197, "body": "This can be a comment and not an answer. Please, read the rules of this community."}, {"owner": {"reputation": 29, "user_id": 11368905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y8b75.png?s=128&g=1", "display_name": "landy", "link": "https://stackoverflow.com/users/11368905/landy"}, "reply_to_user": {"reputation": 1746, "user_id": 9509346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eInAz.jpg?s=128&g=1", "display_name": "dpapadopoulos", "link": "https://stackoverflow.com/users/9509346/dpapadopoulos"}, "edited": false, "score": 1, "creation_date": 1573464470, "post_id": 58764831, "comment_id": 103877732, "body": "Yes, I tried but I don&#39;t have 50 reputation enough to make a comment. I just want to support the answer because this is a tricky question."}], "tags": [], "owner": {"reputation": 29, "user_id": 11368905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y8b75.png?s=128&g=1", "display_name": "landy", "link": "https://stackoverflow.com/users/11368905/landy"}, "is_accepted": false, "score": 0, "last_activity_date": 1573209108, "creation_date": 1573209108, "answer_id": 58764831, "question_id": 55448861, "link": "https://stackoverflow.com/questions/55448861/home-user-gem-ruby-2-6-1-gems-puma-3-12-1-lib-puma-binder-rb273in-initializ/58764831#58764831", "title": "/home/user/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:273:in `initialize&#39;: getaddrinfo: Name or service not known (SocketError)", "body": "<p>Thanks, '> rails server -p 3000 -b 127.0.0.1' works for me too! I had this problem after updating to git. Restart terminal and computer didn't work. Strange and not sure if it is a DNS problem.</p>\n"}], "owner": {"reputation": 33, "user_id": 7799373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NMgdPO54mts/AAAAAAAAAAI/AAAAAAAAEw4/A_gBzzU5y4c/photo.jpg?sz=128", "display_name": "Test0n3", "link": "https://stackoverflow.com/users/7799373/test0n3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573209108, "creation_date": 1554098313, "question_id": 55448861, "link": "https://stackoverflow.com/questions/55448861/home-user-gem-ruby-2-6-1-gems-puma-3-12-1-lib-puma-binder-rb273in-initializ", "title": "/home/user/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:273:in `initialize&#39;: getaddrinfo: Name or service not known (SocketError)", "body": "<p>Problem running Ruby on Rails 5.2.3 on openSuSE Leap 15.0\nHave no problems with gem installation (or running ruby)</p>\n\n<p>The complete error message is as follows:</p>\n\n<blockquote>\n  <p>=> Booting Puma</p>\n  \n  <p>=> Rails 5.2.3 application starting in development </p>\n  \n  <p>=> Run <code>rails server -h</code> for more startup options</p>\n  \n  <p>Puma starting in single mode...</p>\n  \n  <ul>\n  <li><p>Version 3.12.1 (ruby 2.6.1-p33), codename: Llamas in Pajamas</p></li>\n  <li><p>Min threads: 5, max threads: 5</p></li>\n  <li><p>Environment: development</p></li>\n  </ul>\n  \n  <p>Exiting</p>\n  \n  <p>Traceback (most recent call last):\n          41: from bin/rails:3:in `'</p>\n\n<pre><code>    40: from bin/rails:3:in `load'\n    39: from /home/ikari/workshop/ruby-on-rails/my-app/bin/spring:15:in `&lt;top (required)&gt;'\n    38: from /home/ikari/.rubies/ruby-2.6.1/lib64/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    37: from /home/ikari/.rubies/ruby-2.6.1/lib64/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    36: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    35: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'\n    34: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/bin/spring:49:in `&lt;top (required)&gt;'\n    33: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'\n    32: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'\n    31: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'\n    30: from /home/ikari/.gem/ruby/2.6.1/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'\n    29: from /home/ikari/workshop/ruby-on-rails/my-app/bin/rails:9:in `&lt;top (required)&gt;'\n    28: from /home/ikari/.gem/ruby/2.6.1/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\n    27: from /home/ikari/.gem/ruby/2.6.1/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\n    26: from /home/ikari/.gem/ruby/2.6.1/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\n    25: from /home/ikari/.gem/ruby/2.6.1/gems/bootsnap-1.4.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    24: from /home/ikari/.gem/ruby/2.6.1/gems/bootsnap-1.4.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    23: from /home/ikari/.gem/ruby/2.6.1/gems/bootsnap-1.4.2/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    22: from /home/ikari/.gem/ruby/2.6.1/gems/bootsnap-1.4.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    21: from /home/ikari/.gem/ruby/2.6.1/gems/bootsnap-1.4.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    20: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/commands.rb:18:in `&lt;main&gt;'\n    19: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/command.rb:46:in `invoke'\n    18: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/command/base.rb:65:in `perform'\n    17: from /home/ikari/.gem/ruby/2.6.1/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n    16: from /home/ikari/.gem/ruby/2.6.1/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n    15: from /home/ikari/.gem/ruby/2.6.1/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n    14: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:142:in `perform'\n    13: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:142:in `tap'\n    12: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n    11: from /home/ikari/.gem/ruby/2.6.1/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:53:in `start'\n    10: from /home/ikari/.gem/ruby/2.6.1/gems/rack-2.0.6/lib/rack/server.rb:297:in `start'\n     9: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/rack/handler/puma.rb:73:in `run'\n     8: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/launcher.rb:186:in `run'\n     7: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/single.rb:98:in `run'\n     6: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/runner.rb:153:in `load_and_bind'\n     5: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:90:in `parse'\n     4: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:90:in `each'\n     3: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:106:in `block in parse'\n     2: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:273:in `add_tcp_listener'\n     1: from /home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:273:in `new'\n</code></pre>\n  \n  <p>/home/ikari/.gem/ruby/2.6.1/gems/puma-3.12.1/lib/puma/binder.rb:273:in `initialize': getaddrinfo: Name or service not known (SocketError)</p>\n</blockquote>\n\n<p>Have checked similar questions in StackOverflow that suggested adding libraries:</p>\n\n<blockquote>\n  <p>'resolv-replace'\n  and changing files:\n  /etc/hosts</p>\n  \n  <p>/etc/resolv.conf</p>\n</blockquote>\n\n<p>But got no solution. I'm starting so I don't have enough knowledge about where I should look. Thanks for the guidance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal", "paypal-sandbox", "paypal-rest-sdk"], "answers": [{"tags": [], "owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "is_accepted": false, "score": 1, "last_activity_date": 1554102517, "creation_date": 1554102517, "answer_id": 55449699, "question_id": 55448292, "link": "https://stackoverflow.com/questions/55448292/how-to-get-paypal-transaction-id-and-make-refunds-in-ruby-on-rails/55449699#55449699", "title": "How to get Paypal Transaction id and make refunds in ruby on rails", "body": "<p>Refund :\nstep 1: find paypal payment object from paypal: </p>\n\n<pre><code>payment = PayPal::SDK::REST::Payment.find(order.paypal_id)\n</code></pre>\n\n<p>step 2:  find the transaction to that payment:</p>\n\n<pre><code>transaction = payment.transactions.last\n</code></pre>\n\n<p>Step2: find related resources to that payment:</p>\n\n<pre><code>related_resource = transaction.related_resources.last\n</code></pre>\n\n<p>step 3: find the sale object form paypal sdk:</p>\n\n<pre><code>sale = related_resource.sale\nsale = Sale.find(sale.id)\n</code></pre>\n\n<p>Now proceed with refunds:</p>\n\n<pre><code>refund = sale.refund({\n                         :amount =&gt; {\n                             :total =&gt; \"1.31\",\n                             :currency =&gt; \"USD\"\n                         }\n                     })\nif refund.success?\n  logger.info \"Refund[#{refund.id}] Success\"\n  render json: { result: 'success '}\nelse\n  logger.error refund.error.inspect\n  render json: { result: 'fail'}\nend\n</code></pre>\n"}], "owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554102517, "creation_date": 1554094455, "question_id": 55448292, "link": "https://stackoverflow.com/questions/55448292/how-to-get-paypal-transaction-id-and-make-refunds-in-ruby-on-rails", "title": "How to get Paypal Transaction id and make refunds in ruby on rails", "body": "<p>I am using: Ruby 2.4, Rails 5.2.1,  Paypal in sandbox mode: </p>\n\n<pre><code> gem 'paypal-sdk-rest', '~&gt; 1.7.3'\n</code></pre>\n\n<p>Paypal payment as:</p>\n\n<pre><code>  items &lt;&lt; {\n      :name =&gt; title,\n      :price =&gt; unit_price,\n      :currency =&gt; \"USD\",\n      :quantity =&gt; quantity,\n      :description =&gt; short_description\n  }\n\namount = {\n    :total =&gt; subtotal,\n    :currency =&gt; \"USD\",\n    :details =&gt; {\"subtotal\": subtotal, \"shipping\": \"0\", \"tax\": \"0\"}\n}\n\ninvoice_number = \"invoice-#{rand(1111..9999)}\"\n@payment = Payment.new({\n                           :intent =&gt; \"sale\",\n                           :payer =&gt; {\n                               :payment_method =&gt; \"paypal\"},\n                           :redirect_urls =&gt; {\n                               :return_url =&gt; \"http://localhost:3000/payments/#{order.id}/make_payment\",\n                               :cancel_url =&gt; \"http://localhost:3000/\"},\n                           :transactions =&gt; [{\n                                                 :item_list =&gt; {\n                                                     :items =&gt; items,\n\n                                                 },\n\n                                                 :amount =&gt; amount,\n                                                 :description =&gt; \"Transaction description.\",\n                                                 :invoice_number =&gt; invoice_number\n                                             }]\n                       })\n</code></pre>\n\n<p>Payment create as :</p>\n\n<pre><code> if @payment.create\n      render json: {success: true, paymentID: @payment.id}\n    else\n      @payment.error # Error Hash\n      render json: {success: false}\n    end\n</code></pre>\n\n<p>Payment capture:</p>\n\n<pre><code> if payment.execute(payer_id: params[:payerID])\n      render json: {msg: 'payment_completed', result: 'completed', }\n    else\n      render json: {msg: payment.error, result: 'failed'}\n    end\n</code></pre>\n"}, {"tags": ["json", "ruby", "encoding"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1554090373, "post_id": 55447283, "comment_id": 97610310, "body": "What is object here? Do you have a standalone way to reproduce this?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1554090508, "post_id": 55447283, "comment_id": 97610327, "body": "<code>Marshal.dump</code> produces binary data and binary data is usually Base64 encoded in JSON. Are you really sure that you want to use <code>Marshal</code> for this?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1554097812, "post_id": 55447283, "comment_id": 97611956, "body": "What does this question have to do with JSON? Presumably you can reproduce the error with a more <b>Minimal</b> example: <code>Marshal.dump(object).force_encoding(&quot;ASCII-8BIT&quot;).encode(&quot;UT&zwnj;&#8203;F-8&quot;)</code>?  Now then, what is <code>object</code>? How can we reproduce this? And what are you actually trying to achieve&gt;"}, {"owner": {"reputation": 357, "user_id": 3920497, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3484cf4578ea58143b86d453104a6dd0?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCPO", "link": "https://stackoverflow.com/users/3920497/chriscpo"}, "edited": false, "score": 0, "creation_date": 1554336174, "post_id": 55447283, "comment_id": 97717749, "body": "Sorry, I have updated the question."}, {"owner": {"reputation": 357, "user_id": 3920497, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3484cf4578ea58143b86d453104a6dd0?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCPO", "link": "https://stackoverflow.com/users/3920497/chriscpo"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1554564740, "post_id": 55447283, "comment_id": 97802561, "body": "@maxpleaner any thoughts."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1554564860, "post_id": 55447283, "comment_id": 97802583, "body": "@ChrisCPO not sure, sorry"}], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 5267712, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J5oUwSWSb7c/AAAAAAAAAAI/AAAAAAAAAng/453VPhutQT4/photo.jpg?sz=128", "display_name": "Stefano Nepa", "link": "https://stackoverflow.com/users/5267712/stefano-nepa"}, "is_accepted": false, "score": 0, "last_activity_date": 1596180390, "last_edit_date": 1596180390, "creation_date": 1568817688, "answer_id": 57995433, "question_id": 55447283, "link": "https://stackoverflow.com/questions/55447283/encodingundefinedconversionerror-dump-to-json/57995433#57995433", "title": "Encoding::UndefinedConversionError dump to json", "body": "<p>I had this issue and fixed it by using:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>Marshal.dump(value).force_encoding(&quot;ISO-8859-1&quot;).encode(&quot;UTF-8&quot;)\n</code></pre>\n<p>I hope this help!</p>\n<p>But as <a href=\"https://stackoverflow.com/users/1954610/tom-lord\">Tom Lord</a> suggested you should be a bit more specific with your question to help us know what you are trying to achieve.</p>\n"}], "owner": {"reputation": 357, "user_id": 3920497, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3484cf4578ea58143b86d453104a6dd0?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCPO", "link": "https://stackoverflow.com/users/3920497/chriscpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 874, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1596180390, "creation_date": 1554084521, "last_edit_date": 1554336590, "question_id": 55447283, "link": "https://stackoverflow.com/questions/55447283/encodingundefinedconversionerror-dump-to-json", "title": "Encoding::UndefinedConversionError dump to json", "body": "<p>I'm working with a gem <a href=\"https://fie.eranpeer.co/\" rel=\"nofollow noreferrer\">fie</a> and ran into an issue with this gem that I would like to solve however I'm having trouble doing so. Fie is a gem for Rails. In it, it has some lines where it stores a marshal dump of an <code>ActiveRecord::Base</code> in json however I'm running in to an encoding error. I Have been able to replicate this across different machines and versions of ROR, although Rails 5.2 and greater.</p>\n\n<p>Easiest way to reproduce is: </p>\n\n<pre><code>[5] pry(main)&gt; Marshal.dump(User.first).to_json\n  User Load (29.8ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT $1  [[\"LIMIT\", 1]]\nEncoding::UndefinedConversionError: \"\\x80\" from ASCII-8BIT to UTF-8\nfrom /home/chris/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.1/lib/active_support/core_ext/object/json.rb:38:in `encode'\n</code></pre>\n\n<p>Digging In I tried a few things but was unable to make it work. It seems that a marshal dump is ASCII-8BIT but Json ants UTF-8bit. I was unable to force the encoding. </p>\n\n<pre><code>&gt; User.first.to_json.encoding\n=&gt; #&lt;Encoding:UTF-8&gt;\n&gt; Marshal.dump(User.first).encoding\n=&gt; #&lt;Encoding:ASCII-8BIT&gt;\n&gt; { foo: Marshal.dump(object).force_encoding(\"ASCII-8BIT\").encode(\"UTF-8\") }.to_json\nEncoding::UndefinedConversionError: \"\\x80\" from ASCII-8BIT to UTF-8\nfrom (pry):139:in `encode'\n&gt; { foo: Marshal.dump(object).force_encoding(\"ISO-8859-1\").encode(\"ASCII-8BIT\") }.to_json\nEncoding::UndefinedConversionError: U+0080 to ASCII-8BIT in conversion from ISO-8859-1 to UTF-8 to ASCII-8BIT\n</code></pre>\n\n<p>ruby 2.5.1\nRails 5.2.1</p>\n\n<p>git <a href=\"https://github.com/raen79/fie/issues/27\" rel=\"nofollow noreferrer\">issue</a> I opened </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1554111194, "post_id": 55446887, "comment_id": 97617803, "body": "You forgot whitespace before <code>--app</code>. Just use names of databases instead of values of theirs URL. Please see my updated answer"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10882248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbb0d0db905795c146980de1c180213?s=128&d=identicon&r=PG&f=1", "display_name": "T M", "link": "https://stackoverflow.com/users/10882248/t-m"}, "edited": false, "score": 0, "creation_date": 1554166275, "post_id": 55446971, "comment_id": 97642649, "body": "Wow! I put your command as is only change app names  and after 1 seconds  all data was transfer!  probably was some extra space in my option(: thanks. I&#39;ll give you a credit but i want to see if all those email errors go away."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 1, "last_activity_date": 1554109054, "last_edit_date": 1554109054, "creation_date": 1554081375, "answer_id": 55446971, "question_id": 55446887, "link": "https://stackoverflow.com/questions/55446887/heroku-how-to-transfer-database-from-the-existing-application-to-the-new-one/55446971#55446971", "title": "Heroku: how to transfer database from the existing application to the new one?", "body": "<p>From <a href=\"https://devcenter.heroku.com/articles/heroku-postgres-backups#direct-database-to-database-copies\" rel=\"nofollow noreferrer\">Heroku</a> documentation</p>\n\n<blockquote>\n  <p>You can also transfer directly from a database on another app:</p>\n  \n  <p><code>$ heroku pg:copy sushi::ORANGE GREEN --app sushi-staging</code></p>\n  \n  <p>This would copy data from the <code>ORANGE</code> database of the <code>sushi</code> app to the <code>GREEN</code> database in <code>sushi-staging</code>. This could be used to copy production data into a staging app for testing purposes.</p>\n</blockquote>\n\n<p>Usually there just one database per one Heroku app.</p>\n\n<p>So you can run it as</p>\n\n<pre><code>$ heroku pg:copy old-app::DATABASE_URL DATABASE_URL --app new-app\n</code></pre>\n\n<p>Replace only <code>old-app</code> and <code>new-app</code> with your data.</p>\n"}], "owner": {"reputation": 47, "user_id": 10882248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbb0d0db905795c146980de1c180213?s=128&d=identicon&r=PG&f=1", "display_name": "T M", "link": "https://stackoverflow.com/users/10882248/t-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 55446971, "answer_count": 1, "score": 0, "last_activity_date": 1554114750, "creation_date": 1554080375, "last_edit_date": 1554114750, "question_id": 55446887, "link": "https://stackoverflow.com/questions/55446887/heroku-how-to-transfer-database-from-the-existing-application-to-the-new-one", "title": "Heroku: how to transfer database from the existing application to the new one?", "body": "<p>I want to create the new application from the existing one using Heroku.</p>\n\n<p>I cloned the old app to the new one and changed old name to the new one on Heroku.</p>\n\n<p>I\u2019ve transferred the environmental variables using as below:  </p>\n\n<pre><code>$ heroku config -s -a existing-heroku-app &gt; config.txt\n$ cat config.txt | tr '\\n' ' ' | xargs heroku config:set -a new-heroku-app\n</code></pre>\n\n<p><code>DATABASE_URL</code> for the new application was created automatically when I've cloned the existing application and I could not change it using edit option on Heroku.</p>\n\n<p>How to transfer database from old application to the new one?</p>\n\n<p><strong>Updated:</strong></p>\n\n<p>I tried as below</p>\n\n<pre><code>$ heroku pg:copy old::postgres://cbnedduwickhsw:c30d4bf09f3f0e756e6360b9331e8b001c70b6dc5c2c4cee899e71ad972f3f23@ec2-55-165-254-49.compute-1.amazonaws.com:5432/d9egrorbiba5at postgres://gjducqczpmibkn:0c7e9eecead030222792675a076c8980e8bd6edf2f68ba38465fbe978097445a@ec2-184-76-153-63.compute-1.amazonaws.com:5432/dfa8rqk1n47ec0--app new-staging\n</code></pre>\n\n<p>But have error</p>\n\n<pre><code>-bash: postgres://gjducqczpmibkn:0c7e9eecead030222792675a076c8980e8bd6edf2f68ba38465fbe978097445a@ec2-184-76-153-63.compute-1.amazonaws.com:5432/dfa8rqk1n47ec0--app: No such file or directory\n</code></pre>\n"}]