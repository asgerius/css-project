[{"tags": ["ruby-on-rails", "ruby", "indexing", "polymorphic-associations"], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1478134526, "post_id": 40392103, "comment_id": 68035842, "body": "I&#39;m not sure I understand what you mean by your example. I want to test Organisation.ips and I want that to return an array of ip instances created on that organisation."}, {"owner": {"reputation": 7294, "user_id": 547023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f067c849b5ca173b3b71f7f36fb72c5?s=128&d=identicon&r=PG", "display_name": "EnabrenTane", "link": "https://stackoverflow.com/users/547023/enabrentane"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1478135150, "post_id": 40392103, "comment_id": 68035995, "body": "Updated with some examples of what to watch out for."}], "tags": [], "owner": {"reputation": 7294, "user_id": 547023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f067c849b5ca173b3b71f7f36fb72c5?s=128&d=identicon&r=PG", "display_name": "EnabrenTane", "link": "https://stackoverflow.com/users/547023/enabrentane"}, "is_accepted": true, "score": 0, "last_activity_date": 1478135110, "last_edit_date": 1478135110, "creation_date": 1478134071, "answer_id": 40392103, "question_id": 40391518, "link": "https://stackoverflow.com/questions/40391518/rails-polymorphic-associations-with-has-many-relationship-index-values/40392103#40392103", "title": "Rails - Polymorphic Associations with has many relationship - index values", "body": "<p>Yes, this limitation is from your business logic, and not built into rails.\nRails should allow you to drop the unique constraint, it would be wise to ensure your business logic is safe to handle this.</p>\n\n<p>You may have code like:</p>\n\n<p><code>foo_ip org.ips.where(type: \"foo\").first\n</code></p>\n\n<p>This would <em>hopefully</em> live in a named scope if it existed.</p>\n\n<p>Update after comment:\nPresumably you are using IPs as \"Intellectual Properties\".</p>\n\n<p>Let's suppose you have</p>\n\n<pre><code>class Song &lt; Package::Ip\nend\n\nclass ThemeSong &lt; Song\nend\n\nclass Logo &lt; Package::IP\nend\n</code></pre>\n\n<p>You may have business logic that expects an organization to have <em>exactly one</em> theme song or <em>exactly one</em> Logo.</p>\n\n<p>So you may have code like:</p>\n\n<pre><code>theme = org.theme_songs.first\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>logo = org.logos.first\n\n# Or worse yet\nlogo = org.ips.where(:type = \"Logo\").first\n</code></pre>\n\n<p>So while Rails supports having multiple <code>Song</code>s or <code>Logo</code>s, make sure your business logic doesn't just take the first one in some case.</p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 40392103, "answer_count": 1, "score": 1, "last_activity_date": 1478135110, "creation_date": 1478129487, "question_id": 40391518, "link": "https://stackoverflow.com/questions/40391518/rails-polymorphic-associations-with-has-many-relationship-index-values", "title": "Rails - Polymorphic Associations with has many relationship - index values", "body": "<p>I have models for Organisation and Package_ip.</p>\n\n<p>The associations are:</p>\n\n<p>Organisation</p>\n\n<pre><code>has_many :ips, as: :ipable, class_name: Package::Ip\n    accepts_nested_attributes_for :ips,  reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>Package::Ip</p>\n\n<pre><code>belongs_to :ipable, :polymorphic =&gt; true, optional: true, inverse_of: :ip\n</code></pre>\n\n<p>The Package_ips table has:</p>\n\n<pre><code>create_table \"package_ips\", force: :cascade do |t|\n    t.string   \"identifier\"\n    t.text     \"description\"\n    t.text     \"conditions\"\n    t.integer  \"ipable_id\"\n    t.string   \"ipable_type\"\n    t.datetime \"created_at\",     null: false\n    t.datetime \"updated_at\",     null: false\n    t.string   \"title\"\n    t.string   \"status\"\n    t.string   \"classification\"\n    t.index [\"ipable_type\", \"ipable_id\"], name: \"index_package_ips_on_ipable_type_and_ipable_id\", unique: true, using: :btree\n  end\n</code></pre>\n\n<p>My objective is for organisations to create many instances of package_ip.</p>\n\n<p>I have a problem however with the way the index works. If I want to create a second instance of package_ip, I get an error that says the index values are no longer unique.</p>\n\n<p>Am I alright to remove the unique constraint from my index? I realise that the ipable_ip is going to be the organisation.id and the ipable_type is going to be the parent class (organisation). I don't see why that needs to be unique. But maybe I've missed something about polymorphic associations and the reliance on the index.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1478136273, "post_id": 40391455, "comment_id": 68036231, "body": "are you using flash messages? can you provide the code for your controller and view?"}, {"owner": {"reputation": 13, "user_id": 6945846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7dddbf91e94e19e9ca55c5332a677e?s=128&d=identicon&r=PG&f=1", "display_name": "Dar", "link": "https://stackoverflow.com/users/6945846/dar"}, "reply_to_user": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1478174802, "post_id": 40391455, "comment_id": 68051987, "body": "I&#39;m using scaffold for generate all. This is the code of categories controller and the view show. <a href=\"http://collabedit.com/qh2a8\" rel=\"nofollow noreferrer\">collabedit.com/qh2a8</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6945846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7dddbf91e94e19e9ca55c5332a677e?s=128&d=identicon&r=PG&f=1", "display_name": "Dar", "link": "https://stackoverflow.com/users/6945846/dar"}, "edited": false, "score": 0, "creation_date": 1478174915, "post_id": 40392935, "comment_id": 68052066, "body": "No, I&#39;m not using Rails Admin gem. I&#39;m using scaffold command for generate all."}], "tags": [], "owner": {"reputation": 14, "user_id": 3295520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ss2cd.jpg?s=128&g=1", "display_name": "nnluukhtn", "link": "https://stackoverflow.com/users/3295520/nnluukhtn"}, "is_accepted": false, "score": 0, "last_activity_date": 1478140404, "creation_date": 1478140404, "answer_id": 40392935, "question_id": 40391455, "link": "https://stackoverflow.com/questions/40391455/how-to-avoid-sending-to-display-the-view-after-the-model-update-fails-in-rails/40392935#40392935", "title": "How to avoid sending to display the view after the model update fails in Rails", "body": "<p>Assume that your are using Rails Admin gem. Seem likes this is pjax problem. So you can disable pjax, more details <a href=\"http://def%20attachment_url(object,%20name,%20*args,%20host:%20nil,%20prefix:%20nil,%20filename:%20nil,%20format:%20nil)%20%20%20attacher%20=%20object.send(:#%7Bname%7D_attacher%22)%20%20%20file%20=%20attacher.get%20%20%20return%20unless%20file%20%20%20%20filename%20%7C%7C=%20attacher.basename%20%7C%7C%20name.to_s%20%20%20format%20%7C%7C=%20attacher.extension%20%20%20%20file_url(file,%20*args,%20host:%20host,%20prefix:%20prefix,%20filename:%20filename,%20format:%20format)%20end\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 13, "user_id": 6945846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7dddbf91e94e19e9ca55c5332a677e?s=128&d=identicon&r=PG&f=1", "display_name": "Dar", "link": "https://stackoverflow.com/users/6945846/dar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478217061, "creation_date": 1478129091, "last_edit_date": 1478217061, "question_id": 40391455, "link": "https://stackoverflow.com/questions/40391455/how-to-avoid-sending-to-display-the-view-after-the-model-update-fails-in-rails", "title": "How to avoid sending to display the view after the model update fails in Rails", "body": "<p>I started programming with Ruby on Rails and I found a problem. When I edit a model and this fails in validation from controller, the controller return the #show model url. After that when I cancel the #update and go to #view the model, for a moment the browser shows me the error page that the #update process return previously. I dont like this behavior. I think that problem is Turbolink. So I dont know if I can change the url for #update in controller. Any ideas why happens this? Thanks advanced.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2WxlX.gif\" rel=\"nofollow noreferrer\">The next image shows this behavior</a></p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  before_action :set_category, only: [:show, :edit, :update, :destroy]\n\n  # GET /categories\n  # GET /categories.json\n  def index\n    @categories = Category.all\n  end\n\n  # GET /categories/1\n  # GET /categories/1.json\n  def show\n  end\n\n  # GET /categories/new\n  def new\n    @category = Category.new\n  end\n\n  # GET /categories/1/edit\n  def edit\n  end\n\n  # POST /categories\n  # POST /categories.json\n  def create\n    @category = Category.new(category_params)\n\n    respond_to do |format|\n      if @category.save\n        format.html { redirect_to @category, notice: 'Category was successfully created.' }\n        format.json { render :show, status: :created, location: @category }\n      else\n        format.html { render :new }\n        format.json { render json: @category.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /categories/1\n  # PATCH/PUT /categories/1.json\n  def update\n    respond_to do |format|\n      if @category.update(category_params)\n        format.html { redirect_to categories_url, notice: 'Category was successfully updated.' }\n        format.json { render :show, status: :ok, location: @category }\n      else\n        format.html { render :edit }\n        format.json { render json: @category.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /categories/1\n  # DELETE /categories/1.json\n  def destroy\n    @category.destroy\n    respond_to do |format|\n      format.html { redirect_to categories_url, notice: 'Category was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_category\n      @category = Category.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def category_params\n      params.require(:category).permit(:name)\n    end\nend\n</code></pre>\n\n<h1>show page:</h1>\n\n<pre><code>&lt;h2 class=\"page-header\"&gt;Categor\u00eda #&lt;%= @category.id %&gt;&lt;/h2&gt;\n\n&lt;div class=\"panel panel-default\"&gt;\n    &lt;div class=\"panel-heading\"&gt;\n        Detalles de la categor\u00eda\n    &lt;/div&gt;\n    &lt;div class=\"panel-body\"&gt;\n        &lt;dl class=\"dl-horizontal\"&gt;\n            &lt;dt&gt;Nombre&lt;/dt&gt;\n            &lt;dd&gt;&lt;%= @category.name %&gt;&lt;/dd&gt;\n        &lt;/dl&gt;\n        &lt;%= link_to 'Editar', edit_category_path(@category), class: 'btn btn-link' %&gt; |\n        &lt;%= link_to 'Volver', categories_path, class: 'btn btn-link' %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "coffeescript"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 5970657, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c262d316a232bfbc12892f8dc8fb7fe?s=128&d=identicon&r=PG&f=1", "display_name": "Fatin Cooper", "link": "https://stackoverflow.com/users/5970657/fatin-cooper"}, "is_accepted": true, "score": 0, "last_activity_date": 1478310189, "creation_date": 1478310189, "answer_id": 40433988, "question_id": 40391222, "link": "https://stackoverflow.com/questions/40391222/getting-no-response-for-rails-coffeescript-alert-for-a-link-to/40433988#40433988", "title": "Getting no response for rails Coffeescript &quot;Alert&quot; for a link_to", "body": "<p>I found out what was wrong. Apparent my code was bad.</p>\n\n<pre><code>$(document).on \"click\", \"#go\", -&gt;\n  alert \"page has loaded!\"\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 5970657, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c262d316a232bfbc12892f8dc8fb7fe?s=128&d=identicon&r=PG&f=1", "display_name": "Fatin Cooper", "link": "https://stackoverflow.com/users/5970657/fatin-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 40433988, "answer_count": 1, "score": 0, "last_activity_date": 1478310189, "creation_date": 1478127708, "last_edit_date": 1478180979, "question_id": 40391222, "link": "https://stackoverflow.com/questions/40391222/getting-no-response-for-rails-coffeescript-alert-for-a-link-to", "title": "Getting no response for rails Coffeescript &quot;Alert&quot; for a link_to", "body": "<p>I am new to rails and coffee however, I simply attempting to get an alert when a link is clicked! What happens instead is nothing. It turns the link_to into a dead link</p>\n\n<p>My Controller.rb</p>\n\n<pre><code>def index\n    @posts = Post.all\nend\n\ndef new\n@post = Post.new\n respond_to do |format|\n      format.html\n      format.js\n      format.xml { render :xml =&gt; @post.to_xml }\n    end\nend\n\ndef create\n    @post = Post.create!(params[:post])\n    format.html\n    format.js\n    redirect_to post_url\nend\n\n\ndef post_params\n      params.require(:post).permit(:title,:body)\nend    \n</code></pre>\n\n<p>My index,html.erb looks like this </p>\n\n<pre><code>&lt;%= link_to 'New', post_new_url, id: \"go\", :remote =&gt; true %&gt;\n</code></pre>\n\n<p>and my post.coffee just has this code in it</p>\n\n<pre><code>$(document).on \"page:change\", -&gt;\n  $(\"#go\").click -&gt;\n     alert \"Clicked!\"\n</code></pre>\n"}, {"tags": ["ruby", "ip", "type-conversion"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478128591, "post_id": 40390925, "comment_id": 68034424, "body": "Remember that IPv6 is a thing and will be increasingly important to any code you write."}], "tags": [], "owner": {"reputation": 1487, "user_id": 966021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/defecc88dbd71700ed9a0d37884541b3?s=128&d=identicon&r=PG", "display_name": "earlyadopter", "link": "https://stackoverflow.com/users/966021/earlyadopter"}, "is_accepted": false, "score": 1, "last_activity_date": 1478126562, "last_edit_date": 1478126562, "creation_date": 1478125888, "answer_id": 40390925, "question_id": 40390752, "link": "https://stackoverflow.com/questions/40390752/how-do-i-convert-int32-ip-address-into-octets-in-ruby/40390925#40390925", "title": "how do I convert int32 IP address into octets in ruby?", "body": "<p>OK, found the answer:</p>\n\n<pre><code>require 'ipaddr'\n\nip = IPAddr.new(167772687, family = Socket::AF_INET)\nip.to_s   # \"10.0.2.15\"\n</code></pre>\n"}], "owner": {"reputation": 1487, "user_id": 966021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/defecc88dbd71700ed9a0d37884541b3?s=128&d=identicon&r=PG", "display_name": "earlyadopter", "link": "https://stackoverflow.com/users/966021/earlyadopter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478126562, "creation_date": 1478125077, "question_id": 40390752, "link": "https://stackoverflow.com/questions/40390752/how-do-i-convert-int32-ip-address-into-octets-in-ruby", "title": "how do I convert int32 IP address into octets in ruby?", "body": "<p>I'm looking for the opposite to this:</p>\n\n<pre><code>require 'ipaddr'\nip = IPAddr.new \"10.0.2.15\"\nip.to_i                      # 167772687\n</code></pre>\n\n<p>I need to pass something like 167772687, and want to get back \"10.0.2.15\".</p>\n\n<p>This:</p>\n\n<pre><code>ip = IPAddr.new 167772687\n</code></pre>\n\n<p>returns the error:</p>\n\n<pre><code>IPAddr::AddressFamilyError: address family must be specified\n</code></pre>\n\n<p>How to I specify that I'm passing int32?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "namespaces", "associations"], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1478123292, "post_id": 40390337, "comment_id": 68032471, "body": "Thanks Sean. I tried that - but it doesnt change the error."}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1478123507, "post_id": 40390337, "comment_id": 68032560, "body": "Sorry, I misread the error.  The error is not about your model, but rather the controller. Do you have <code>app&#47;controllers&#47;package&#47;ips_controller.rb</code> defined?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1478123648, "post_id": 40390337, "comment_id": 68032629, "body": "Yes, it begins with this line: class Package::IpsController &lt; ApplicationController"}], "tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": false, "score": 0, "last_activity_date": 1478123098, "creation_date": 1478123098, "answer_id": 40390337, "question_id": 40390234, "link": "https://stackoverflow.com/questions/40390234/rails-how-to-render-path-to-namespaced-file/40390337#40390337", "title": "Rails: How to render path to namespaced file", "body": "<p>You are missing quotes around your class name.  It should look like this:</p>\n\n<pre><code>has_many :ips, as: :ipable, class_name: 'Package::Ip'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "is_accepted": false, "score": 0, "last_activity_date": 1478126037, "creation_date": 1478126037, "answer_id": 40390954, "question_id": 40390234, "link": "https://stackoverflow.com/questions/40390234/rails-how-to-render-path-to-namespaced-file/40390954#40390954", "title": "Rails: How to render path to namespaced file", "body": "<p>So, it turns out I have to write the index action like so:</p>\n\n<pre><code>@ips = Package::Ip.all\n</code></pre>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1478126037, "creation_date": 1478122550, "last_edit_date": 1478124075, "question_id": 40390234, "link": "https://stackoverflow.com/questions/40390234/rails-how-to-render-path-to-namespaced-file", "title": "Rails: How to render path to namespaced file", "body": "<p>I'm trying to learn how to use namespaced folders in my Rails 5 app.</p>\n\n<p>I have models for Organisation and Package_ips. Package is the name of a folder that I use to collect different types of assets. Ip is one of those nested assets. </p>\n\n<p>The associations are:</p>\n\n<p>Organisation</p>\n\n<pre><code>has_many :ips, as: :ipable, class_name: Package::Ip\n    accepts_nested_attributes_for :ips,  reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>Package::Ip</p>\n\n<pre><code>belongs_to :ipable, :polymorphic =&gt; true, optional: true, inverse_of: :ip\n</code></pre>\n\n<p>My routes.rb file has:</p>\n\n<pre><code>namespace :package do\n    resources :ips\nend\n</code></pre>\n\n<p>In my organisation show, I'm trying to render a link to the package/ips/show.html.erb with:</p>\n\n<pre><code>&lt;%= link_to package_ips_path(@organisation) do %&gt; \n</code></pre>\n\n<p>I have also tried the following (although I think its wrong):</p>\n\n<pre><code>&lt;%= link_to package_ip_path(@organisation) do %&gt; \n</code></pre>\n\n<p>In both cases, I get an error that says:</p>\n\n<pre><code>uninitialized constant Package::IpsController\n</code></pre>\n\n<p>I don't understand this error because when I go into my rails console, I can see that there is an instance of Package::Ips.</p>\n\n<pre><code>o = Organisation.first\no.ips\n  Package::Ip Load (1.3ms)  SELECT \"package_ips\".* FROM \"package_ips\" WHERE \"package_ips\".\"ipable_id\" = $1 AND \"package_ips\".\"ipable_type\" = $2  [[\"ipable_id\", 1], [\"ipable_type\", \"Organisation\"]]\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Package::Ip id: 1, status: \"Offered\", classification: 0, identifier: \"dasfdsfasd\", description: nil, conditions: \"asdfdsfsd\", ipable_id: 1, ipable_type: \"Organisation\", created_at: \"2016-11-02 21:05:36\", updated_at: \"2016-11-02 21:05:36\", title: \"test ip resource\"&gt;]&gt; \n</code></pre>\n\n<p>My rake routes | grep ip shows:</p>\n\n<pre><code>package_ip GET      /package/ips/:id(.:format)                                            package/ips#show\n</code></pre>\n\n<p>How can I link to the Ip show view from the organisation show page?</p>\n\n<p>UPDATE</p>\n\n<p>I think this problem might have something to do with there being many ip instances. </p>\n\n<p>I tried making a view for index.html.erb and tried to render the link again.</p>\n\n<p>This time the error says:</p>\n\n<pre><code>uninitialized constant Package::IpsController::Ip\n</code></pre>\n\n<p>There is an extra \"::Ip\" on the end of the error message.</p>\n\n<p>I still don't understand the problem, but the index action of the Package::IpsController is highlighted in the error message. That action has:</p>\n\n<pre><code> def index\n    @ips = Ip.all\n    # authorize @ips\n  end\n</code></pre>\n"}, {"tags": ["ruby", "string", "split"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478122389, "post_id": 40390029, "comment_id": 68032063, "body": "What do you want to happen if the splitting regex matches a substring that has more than 1 character. \\W+ could match &quot; - &quot; for example?"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1478122775, "last_edit_date": 1478122775, "creation_date": 1478122263, "answer_id": 40390165, "question_id": 40390029, "link": "https://stackoverflow.com/questions/40390029/how-do-i-figure-out-the-indexes-of-where-a-string-was-split/40390165#40390165", "title": "How do I figure out the indexes of where a string was split?", "body": "<p>So, you don't want to split, you just want the indices?</p>\n\n<pre><code>a = []\n\"Hello stack overflow\".scan(/\\W+/){a&lt;&lt;Regexp.last_match.begin(0)}\na\n#=&gt; [5, 11]\n</code></pre>\n\n<p>An empty array would mean that no split occured.</p>\n\n<p>Edit : Shorter version could be </p>\n\n<pre><code>\"Hello stack overflow\".enum_for(:scan, /\\W+/).map{Regexp.last_match.begin(0)}\n#=&gt; [5, 11]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1478131568, "creation_date": 1478131568, "answer_id": 40391802, "question_id": 40390029, "link": "https://stackoverflow.com/questions/40390029/how-do-i-figure-out-the-indexes-of-where-a-string-was-split/40391802#40391802", "title": "How do I figure out the indexes of where a string was split?", "body": "<p>In some cases <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-split\" rel=\"nofollow noreferrer\">String#split</a> will split a string on substrings having multiple characters. The offset into the string of the beginning of each substring may not be sufficient. Both the start and end indices may be needed.</p>\n\n<p>The following method returns an array of tuples, the first element of each tuple being the portion of the string returned by <code>strip</code>, the second being the index where that substring begins. Note only does this provide a way to compute the desired indices, but it also returns the substrings returned by <code>split</code>.</p>\n\n<pre><code>def split_with_offsets(str, r)\n  indices = []\n  str.scan(r) { indices &lt;&lt; Regexp.last_match.begin(0) }\n  str.split(r).zip(indices &lt;&lt; str.size).map { |s,ndx| [s, ndx-s.size] }\nend\n</code></pre>\n\n<p>With this information it is straightforward to obtain an array of ranges, each range being the offsets of a substring on which the strip is split.</p>\n\n<pre><code>def gaps(str, r)\n  split_with_offsets(str, r).each_cons(2).map { |(s,f), (_,lp1)| f+s.size..lp1-1 }\nend\n</code></pre>\n\n<p>Here are two examples.</p>\n\n<p><em>#1</em></p>\n\n<pre><code>str = \"Hello stack overflow\"\nr = /\\W+/\n\nsplit_with_offsets(str, r)\n  #=&gt; [[\"Hello\", 0], [\"stack\", 6], [\"overflow\", 12]] \ngaps(str, r)\n  #=&gt; [5..5, 11..11]\n</code></pre>\n\n<p><em>#2</em></p>\n\n<pre><code>str = \"I | cannot | wait | for |    the election |to |be  | over\"\nr = /\\s*\\|\\s*/ \n\nsplit_with_offsets(str, r)\n  #=&gt; [[\"I\", 0], [\"cannot\", 4], [\"wait\", 13], [\"for\", 20], [\"the election\", 29],\n  #    [\"to\", 43], [\"be\", 47], [\"over\", 53]] \ngaps(str, r)\n  #=&gt; [1..3, 10..12, 17..19, 23..28, 41..42, 45..46, 49..52] \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 40390165, "answer_count": 2, "score": 3, "last_activity_date": 1478131568, "creation_date": 1478121657, "question_id": 40390029, "link": "https://stackoverflow.com/questions/40390029/how-do-i-figure-out-the-indexes-of-where-a-string-was-split", "title": "How do I figure out the indexes of where a string was split?", "body": "<p>I\u2019m using Rails 4.2.7 (Ruby 2.3).  I use the following to split a string based on a regular expression</p>\n\n<pre><code>my_string.split(/\\W+/)\n</code></pre>\n\n<p>My question is, how can I get an equivalent array of numbers in which each number represents the index of where the splits occurred?  If no splits occurred, I would expect the array to only contain an element with \u201c-1\u201d.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sidekiq"], "comments": [{"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1478125039, "post_id": 40389813, "comment_id": 68033207, "body": "are you sure you want to rescue that error and retry? why won&#39;t the error occur again? Why not just set <code>:retry</code> to true? Do you gain something from the 2 hour interval?"}, {"owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "reply_to_user": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1478125716, "post_id": 40389813, "comment_id": 68033472, "body": "@toddmetheny Yes that rescue actually safeguards from the depleted api calls. This is just a simple example to illustrate. The time interval can be anything. In reality the number of calls is regenerated every hour."}, {"owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 0, "creation_date": 1478264161, "post_id": 40389813, "comment_id": 68094699, "body": "Why don&#39;t you use a more recent version of Sidekiq?"}, {"owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "reply_to_user": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 0, "creation_date": 1478284205, "post_id": 40389813, "comment_id": 68107513, "body": "@MuradYusufov tried that. Same result."}, {"owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "edited": false, "score": 0, "creation_date": 1544920294, "post_id": 40389813, "comment_id": 94446551, "body": "have you managed to figure this out? i too have having an issue with getting <code>perform_in</code> to run inside the worker"}], "owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1478128125, "creation_date": 1478120865, "last_edit_date": 1495535559, "question_id": 40389813, "link": "https://stackoverflow.com/questions/40389813/sidekiq-schedule-a-worker-for-a-later-point-in-time", "title": "Sidekiq Schedule a Worker for a Later Point in Time", "body": "<p>We have an issue similar to this <a href=\"https://stackoverflow.com/questions/20894740/sidekiq-schedule-same-worker-to-queue-when-done\">Sidekiq schedule same worker to queue when done</a></p>\n\n<p>The crux of the issue is that if more then one argument is passed to the <code>perform_in</code> it does not schedule them for later, but processes them as usual.</p>\n\n<p>This works as expected, but is not useful because there are no arguments \nbeing passed into the new job</p>\n\n<pre><code>def perform(id, mode)\n  begin\n    Some::Process.remediate(App.find(id), mode)\n  rescue CustomErrors::MyError =&gt; e\n    # This will schedule a job, but without arguments :(\n    self.class.perform_in(2.hours)\n  end\nend\n</code></pre>\n\n<p>This would be useful, but does not work as expected\nThe job completes and nothing is rescheduled</p>\n\n<pre><code>def perform(id, mode)\n  begin\n    Some::Process.remediate(App.find(id), mode)\n  rescue CustomErrors::MyError =&gt; e\n    # This does not schedule a job\n    self.class.perform_in(2.hours, id, mode)\n  end\nend\n</code></pre>\n\n<p>Used:</p>\n\n<pre><code>Sidekiq 3.5.1\nRails 4.2.4\nruby 2.3.1p112\ndev environment\n</code></pre>\n\n<p>Any help is highly appreciated</p>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>When the code is ran with a binding</p>\n\n<pre><code>binding.pry\nself.class.perform_in(2.hours, 2, 12345)\n</code></pre>\n\n<p>It does schedule a job, but only on the first time. When it comes to it the second time around the job is being run for some reason.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "gemfile"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478120409, "post_id": 40389649, "comment_id": 68031068, "body": "Change <code>ruby &quot;2.1.6&quot;</code> to <code>ruby &quot;2.1.10&quot;</code> as that is the most recent version of <code>2.1</code> which is the only version supported on Cedar-14."}, {"owner": {"reputation": 3425, "user_id": 1767263, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cdbe9e4e60271f3ff3729b382e45e6a6?s=128&d=identicon&r=PG", "display_name": "Zach", "link": "https://stackoverflow.com/users/1767263/zach"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478120811, "post_id": 40389649, "comment_id": 68031282, "body": "@EliSadoff will try that now, each push takes a long time so I&#39;ll get back once it finishes"}, {"owner": {"reputation": 3425, "user_id": 1767263, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cdbe9e4e60271f3ff3729b382e45e6a6?s=128&d=identicon&r=PG", "display_name": "Zach", "link": "https://stackoverflow.com/users/1767263/zach"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478143330, "post_id": 40389649, "comment_id": 68037910, "body": "@EliSadoff Still get the same error :("}], "owner": {"reputation": 3425, "user_id": 1767263, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cdbe9e4e60271f3ff3729b382e45e6a6?s=128&d=identicon&r=PG", "display_name": "Zach", "link": "https://stackoverflow.com/users/1767263/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478120220, "creation_date": 1478120220, "question_id": 40389649, "link": "https://stackoverflow.com/questions/40389649/heroku-wont-use-ruby-version-set-in-gemfile", "title": "Heroku wont use Ruby version set in Gemfile", "body": "<p>I am trying to host Canvas LMS on Heroku for an app that I am developing, and I am running into issues deploying it.</p>\n\n<p>Canvas LMS uses Ruby 2.1.6, and that isn't the default Ruby on Heroku. I went into the Gemfile, added this line <code>ruby \"2.1.6\"</code>, and when I deploy it to Heroku I get this error:</p>\n\n<pre><code>remote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote:  !\nremote:  !     An error occurred while installing Ruby Ruby-2.3-support-is-untested-ruby-2.3.1\nremote:  !     For supported Ruby versions see https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\nremote:  !     Note: Only the most recent version of Ruby 2.1 is supported on Cedar-14\nremote:  !     Command: 'set -o pipefail; curl -L --fail --retry 3 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/cedar-14/Ruby-2.3-support-is-untested-ruby-2.3.1.tgz -s -o - | tar zxf - ' failed unexpectedly:\nremote:  !\nremote:  !     gzip: stdin: unexpected end of file\nremote:  !     tar: Child returned status 1\nremote:  !     tar: Error is not recoverable: exiting now\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote:\nremote:  !     Push failed\n</code></pre>\n\n<p>I have no experience with Ruby so I really don't know how to tinker around and solve the issue. Everywhere I've looked said to just add the <code>ruby \"2.1.6\"</code> line to my Gemfile but that has not solved the issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1478123027, "post_id": 40389661, "comment_id": 68032352, "body": "Thank you for your answer.  Please see my updated question above.  I tried to be more descriptive.  You have a good answer here, but hopefully it is more clear what my question is now that I added more details."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 4, "last_activity_date": 1478146688, "last_edit_date": 1478146688, "creation_date": 1478120256, "answer_id": 40389661, "question_id": 40389510, "link": "https://stackoverflow.com/questions/40389510/rails-iterate-over-collection-within-a-models-class-method/40389661#40389661", "title": "Rails: Iterate over collection within a Model&#39;s Class Method", "body": "<p>Reverse your logic and let the database do the work. If all of them have a <code>number_val</code> of <code>999</code> then none of them have a <code>number_val</code> that is <strong>not</strong> <code>999</code> and this is easily expressed:</p>\n\n<pre><code>def self.all_have_number_value_999\n  !where.not(:number_val =&gt; 999).exists?\nend\n</code></pre>\n\n<p>That will be a single fairly efficient database query.</p>\n\n<p>Since this is a class method and class methods are mixed into relations (scopes are pretty much specific types of class methods after all), you can call this method on a relation and things like:</p>\n\n<pre><code>Foo.where(id: [123, 456]).all_have_number_value_999?\n</code></pre>\n\n<p>should work as would <code>Foo.all_have_number_value_999?</code>.</p>\n\n<hr>\n\n<p>If you want to perform some arbitrary logic while iterating over the collection outside the database, then you could throw in an <code>all</code> call to resolve the query before iterating:</p>\n\n<pre><code>def self.all_have_number_value_999?\n  all.each do |foo_object|\n    ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "accepted_answer_id": 40389661, "answer_count": 1, "score": 2, "last_activity_date": 1478146688, "creation_date": 1478119667, "last_edit_date": 1478121811, "question_id": 40389510, "link": "https://stackoverflow.com/questions/40389510/rails-iterate-over-collection-within-a-models-class-method", "title": "Rails: Iterate over collection within a Model&#39;s Class Method", "body": "<p>I have a collection of <code>Foo</code> objects.  I want to create a class method that iterates over that collection and returns <code>true</code> if ALL objects in that collection have a certain value for an attribute.  Otherwise the class method returns <code>false</code>.</p>\n\n<p>I attempted the following but it does not work:</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\n\n  def self.all_have_number_value_999?\n    each do |foo_object|\n      return false if foo_object.number_val != 999\n    end\n    return true #all objects have #number_val == 999\n  end\n\nend\n</code></pre>\n\n<p>Now assume I got a collection of <code>Foo</code> objects somehow.  I will make up how I got the collection of Foo objects, but the importance is that <code>number_value_999?</code> can iterate over that collection.  In other words: some unknown scope generated the collection of <code>Foo</code> objects before hand.  I just want to iterate over that collection <em>within</em> a <code>Foo</code> class method.</p>\n\n<pre><code>Foo.where(id: [123, 456]).all_have_number_value_999?\n</code></pre>\n\n<p>It is complaining in the class method because it doesn't know how to iterate over the collection.  So that is my question: How do I iterate over a collection within a model's class method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "erb"], "comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1478118704, "post_id": 40388629, "comment_id": 68030171, "body": "I don&#39;t have time for a full answer to this, but my two suggestions would be to a) put the <code>cache</code> call <i>inside</i> the <code>begin</code> block, so the exception being raised exits the call to <code>cache</code> before it completes, and possibly b) if necessary, also use the <a href=\"http://edgeapi.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment\" rel=\"nofollow noreferrer\"><code>expire_fragment</code> method</a>"}, {"owner": {"reputation": 15, "user_id": 4738766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t2OP1YpMgp0/AAAAAAAAAAI/AAAAAAAAABE/SKIT87FxPCI/photo.jpg?sz=128", "display_name": "Nate Flood", "link": "https://stackoverflow.com/users/4738766/nate-flood"}, "reply_to_user": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1478194790, "post_id": 40388629, "comment_id": 68065956, "body": "@philomory Your suggestion of putting the cache call inside the begin block is working correctly in my testing. Can you make this an answer so that I can mark it as correct?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4738766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t2OP1YpMgp0/AAAAAAAAAAI/AAAAAAAAABE/SKIT87FxPCI/photo.jpg?sz=128", "display_name": "Nate Flood", "link": "https://stackoverflow.com/users/4738766/nate-flood"}, "edited": false, "score": 0, "creation_date": 1478195274, "post_id": 40389566, "comment_id": 68066216, "body": "I tested the first method and I can confirm that this does not work. I monitored the cache keys at each step through the process and the key is not written before the end of the cache block, therefore doing Rails.cache.delete doesn&#39;t yet have a key to delete. I did not test the second block, but based on what I know it should work and in some cases might be best. It is not the simplest solution when dealing with exceptions, that goes to @philomory in his comment. Since the write is not executed until the very end of the block, a raised exception will prevent the write from ever happening."}], "tags": [], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "is_accepted": false, "score": -1, "last_activity_date": 1478119893, "creation_date": 1478119893, "answer_id": 40389566, "question_id": 40388629, "link": "https://stackoverflow.com/questions/40388629/rails-erb-can-i-cancel-a-fragment-cache-if-a-condition-fails/40389566#40389566", "title": "Rails (ERB): Can I cancel a fragment cache if a condition fails?", "body": "<blockquote>\n  <p>There are two hard problems in computer science: naming things, cache invalidation, and off-by-one errors.</p>\n</blockquote>\n\n<p>Welcome to the second hard problem.</p>\n\n<p>Try using <code>Rails.cache</code> instead of <code>cache</code> - I'm not 100% on what the difference is or if there even is one, but <code>Rails.cache</code> gets you some more obvious methods for cache operations.</p>\n\n<p><code>Rails.cache.fetch</code> takes three options: the cache key, an options hash, and a block. If the specified key exists in the cache and is not expired, it'll return the contents of the cache; otherwise, it'll execute the block and store its results in the cache.</p>\n\n<pre><code>&lt;% Rails.cache.fetch \"header_#{$I18n.locale}\", :expires_in =&gt; 1.day do %&gt;\n  &lt;% begin %&gt;\n    &lt;%= raw open(\"https://mywebsite.org/remote/fragment\", :read_timeout =&gt; 10).read %&gt;\n  &lt;% rescue OpenURI::HTTPError =&gt; e %&gt;\n    &lt;% Rails.cache.delete \"header_#{$I18n.locale}\" # removes the cache entry %&gt;\n    &lt;!-- Show your backup here --&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If that doesn't work, it's likely down to the order the cache operations are done in - it may be that the entry gets deleted in your <code>rescue</code> block, but then re-added when the entire block has finished executing. In that case, try this:</p>\n\n<pre><code>&lt;% remove_cache_entry = false %&gt;\n\n&lt;% Rails.cache.fetch \"header_#{$I18n.locale}\", :expires_in =&gt; 1.day do %&gt;\n  &lt;% begin %&gt;\n    &lt;%= raw open(\"https://mywebsite.org/remote/fragment\", :read_timeout =&gt; 10).read %&gt;\n  &lt;% rescue OpenURI::HTTPError =&gt; e %&gt;\n    &lt;% remove_cache_entry = true %&gt;\n    &lt;!-- Show your backup here --&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;% Rails.cache.delete \"header_#{$I18n.locale}\" if remove_cache_entry %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": true, "score": 0, "last_activity_date": 1478204947, "creation_date": 1478204947, "answer_id": 40410692, "question_id": 40388629, "link": "https://stackoverflow.com/questions/40388629/rails-erb-can-i-cancel-a-fragment-cache-if-a-condition-fails/40410692#40410692", "title": "Rails (ERB): Can I cancel a fragment cache if a condition fails?", "body": "<p>Since you don't want to cache the result when there's an exception, you should put your exception-handling code outside the <code>cache</code> block:</p>\n\n<pre><code>&lt;% begin %&gt;\n  &lt;% cache(\"header_#{$I18n.locale}\", expires_in: 1.day) do %&gt;\n    &lt;%= raw open(\"https://mywebsite.org/remote/fragment\", :read_timeout =&gt; 10).read %&gt;\n  &lt;% end %&gt;\n&lt;% rescue OpenURI::HTTPError =&gt; e %&gt;\n  Error Loading Remote File: &lt;%= e.message %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>That way, when an exception is raised inside the cache block, that block will be exited before it completes and no caching will occur. </p>\n"}], "owner": {"reputation": 15, "user_id": 4738766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t2OP1YpMgp0/AAAAAAAAAAI/AAAAAAAAABE/SKIT87FxPCI/photo.jpg?sz=128", "display_name": "Nate Flood", "link": "https://stackoverflow.com/users/4738766/nate-flood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 40410692, "answer_count": 2, "score": 1, "last_activity_date": 1478204947, "creation_date": 1478116432, "last_edit_date": 1478118337, "question_id": 40388629, "link": "https://stackoverflow.com/questions/40388629/rails-erb-can-i-cancel-a-fragment-cache-if-a-condition-fails", "title": "Rails (ERB): Can I cancel a fragment cache if a condition fails?", "body": "<p>I'm looking for a simple and efficient way to cancel a cache write for a named fragment in an ERB view if a condition fails.</p>\n\n<p>I am currently doing this:</p>\n\n<pre><code>&lt;% cache(\"header_#{$I18n.locale}\", expires_in: 1.day) do %&gt;\n  &lt;% begin %&gt;\n      &lt;%= raw open(\"https://mywebsite.org/remote/fragment\", :read_timeout =&gt; 10).read %&gt;\n  &lt;% rescue OpenURI::HTTPError =&gt; e %&gt;\n    Error Loading Remote File: &lt;%= e.message %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Obviously some of this is just to demonstrate my problem, not to show a best practice for production code.</p>\n\n<p><strong>Here's the problem:</strong> The above will cache the error message and show it for 1 day instead of retrying the server on the next load. </p>\n\n<p>(Usually this would not be happening in a view, but in this case I'm writing a plugin for a bigger rails app and can't modify the controller, just the view.)</p>\n\n<p><strong>This is what I'd like to do:</strong></p>\n\n<pre><code>&lt;% cache(\"header_#{$I18n.locale}\", expires_in: 1.day) do %&gt;\n  &lt;% begin %&gt;\n      &lt;%= raw open(\"https://mywebsite.org/remote/fragment\", :read_timeout =&gt; 10).read %&gt;\n  &lt;% rescue OpenURI::HTTPError =&gt; e %&gt;\n    --&gt; Some command to cancel the cache action started above\n    --&gt; Show a backup something to the user (I'll provide)\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Does anyone have a suggestion as to how this can be done? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478116398, "post_id": 40388577, "comment_id": 68028922, "body": "I don&#39;t really understand what you&#39;re asking. Let&#39;s say class <code>A</code> has attributes <code>b</code> and <code>c</code> (that are readable). Let&#39;s say <code>a</code> is of type <code>A</code>. If you want to access <code>b</code> or <code>c</code> you can just run <code>a.b</code> and <code>a.c</code> respectively."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478116665, "post_id": 40388577, "comment_id": 68029059, "body": "I&#39;m trying to figure out two things. First, how can you use phone_number and label from the PhoneContact class? As you said, can I do Phonebook.phone_number and PhoneBook.label to call those variables? Secondly, How do I make my add method work? I want the add method to use the parameters: name, phone_number, and label. So, when I use the method find(name) it will show the name."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478116731, "post_id": 40388577, "comment_id": 68029100, "body": "You can&#39;t call <code>Phonebook.phone_number</code> as <code>Phonebook</code> is the class. You need to call it on an instance variable of type <code>Phonebook</code>. You can do this <code>pb = Phonebook.new</code>, then <code>pb.phone_number</code> or <code>pb.label</code>."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478117064, "post_id": 40388577, "comment_id": 68029272, "body": "I see. and for my add method  can I do something like this <code>def add_contact (newContact = {})         flag = false         if newContact.length &lt; 1           return flag         else           flag = true           newContact.collect do |pb.name, pb.phone_number, pb.label|             contactList[name] = number           end           return flag         end       end</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478120778, "post_id": 40388577, "comment_id": 68031266, "body": "Try to avoid doing double-negative conditions. You have <code>if !contactList</code> and it has an <code>else</code> clause, which means the second case is <code>if !!contactList</code>. Try inverting the logic and swapping the blocks. Additionally Ruby strongly encourages the <code>contact_list</code> style naming convention for methods and variables, all lower-case."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478391189, "post_id": 40388577, "comment_id": 68135811, "body": "Your add function is wrong. You defined it with param (a hash) but you&#39;re calling it with three params (name, phone_number, label). Your code does not correspond to the example. I would first start by creating a hash in your add function that instantiates a PhoneContact object. Once you do that add it to your hash, then add the logic in your add method. Also, you may need an initialize method in your PhoneBook that creates a global hash or an instance variable hash. Break down your code one method at a time. Right now, your code is useless according to your example."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478391653, "post_id": 40388577, "comment_id": 68135919, "body": "Your PhoneContact class needs to instantiate an object of PhoneNumber, not call the normalize method (not sure what you&#39;re doing here). Also, your phoneBook class has no find method, but you&#39;re using a find method in your example."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478119813, "post_id": 40388876, "comment_id": 68030730, "body": "Thank you for the explanation. It does clear things up. I now do understand what instance variables and instance methods are. I&#39;m not sure if my question is clear my issue is how do I make a add method with the parameters label and phone_number from the PhoneContact class in the PhoneNumber class.   I get that If I create a new instance of PhoneBook by doing <code>B = PhoneBook.new</code> But, I don&#39;t follow how <code>B.add(&#39;555-555-5555&#39;, :label)</code> is suppose to work when the add method can&#39;t use label and phone_number from the other class."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478119971, "post_id": 40388876, "comment_id": 68030805, "body": "What is <code>:label</code> supposed to be referring to? If I have <code>james_may = PhoneContact.new(&#39;(555) 555-5555&#39;, :mobile)</code> and <code>b = PhoneBook.new</code> and I wanted to add <code>james_may</code> to <code>b</code>, I could do, <code>b.add(james_may.phone_number, james_may.label)</code>."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120384, "post_id": 40388876, "comment_id": 68031049, "body": "label refers to to what kind of phone number it is. So, it can be the person&#39;s home number, cell number, work number, etc. How would my add method in my PhoneBook class look if I&#39;m doing this <code>b.add(james_may.phone_number, james_may.label)</code>? Because the way I was thinking was doing a hash. So, contact name would be with the phone number of the person."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120473, "post_id": 40388876, "comment_id": 68031111, "body": "Well you can change your add method to just take <code>james_may</code>. It would be better to store <code>PhoneContacts</code> instead of fields of <code>PhoneContacts</code>."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120556, "post_id": 40388876, "comment_id": 68031153, "body": "I edited my answer to show you what <code>add</code> should do."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120792, "post_id": 40388876, "comment_id": 68031273, "body": "I get an error: <code>in add&#39;: wrong number of arguments (2 for 1) (ArgumentError)</code>"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120817, "post_id": 40388876, "comment_id": 68031288, "body": "Yes, because now in add you should do this instead <code>b.add(james_may)</code>."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120891, "post_id": 40388876, "comment_id": 68031322, "body": "I see, but I get this error now: ` <code>add&#39;: undefined method </code>&lt;&lt;&#39; for nil:NilClass (NoMethodError)``"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478120935, "post_id": 40388876, "comment_id": 68031345, "body": "In <code>initialize</code> do <code>@contactList = []</code>. You don&#39;t want a hash. It doesn&#39;t make sense here."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478121477, "post_id": 40388876, "comment_id": 68031639, "body": "So, something like this: <code>def initialize (contactList)    @contactList =[ ]   end</code> gives an error of <code>in initialize: wrong number of arguments (0 for 1) (ArgumentError)</code>"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478121565, "post_id": 40388876, "comment_id": 68031690, "body": "You don&#39;t need <code>contactList</code> as a parameter for initialize."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478121568, "post_id": 40388876, "comment_id": 68031692, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127225/discussion-between-eli-sadoff-and-codes316\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "edited": false, "score": 0, "creation_date": 1478391992, "post_id": 40388876, "comment_id": 68135989, "body": "@Codes316 it gives you an error because when you&#39;re instantiating the object you need to pass in a parameter (in this case contactList) - but your example shows that you don&#39;t need to, instead you should create a phonecontact object in your add method and store it as a hash by name; also you can store a hash within your hash with label and phone number for a particular name. This would be the best approach."}], "tags": [], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "is_accepted": true, "score": 2, "last_activity_date": 1478120518, "last_edit_date": 1478120518, "creation_date": 1478117351, "answer_id": 40388876, "question_id": 40388577, "link": "https://stackoverflow.com/questions/40388577/how-use-other-variables-in-other-classes-in-ruby/40388876#40388876", "title": "How use other variables in other classes in Ruby", "body": "<p>Ok, so your confusion seems to be two-fold. The first problem is what object to call a method on. Let me provide you an explanation here. Say I have this class <code>A</code></p>\n\n<pre><code>class A\n  attr_accessor :b, :c\n\n  def initialize(b, c)\n    @b = b\n    @c = c\n  end\n\n  class &lt;&lt; self\n    def alphabet\n      'abcdefghijklmnopqrstuvwxyz'\n    end\n  end\nend\n</code></pre>\n\n<p>Also, let's say I have <code>a = A.new('b', 8)</code>. I can call the methods I defined like this:</p>\n\n<pre><code>a.b # =&gt; 'b'\na.c # =&gt; 8\nA.alphabet # =&gt; 'abcdefghijklmnopqrstuvwxyz'\n</code></pre>\n\n<p>This works like this because <code>b</code> and <code>c</code> are instance methods which means they are called on an instance variable. <code>a</code> is an instance of the class <code>A</code>. However, <code>alphabet</code> is a class method (as evident by its being inside the <code>class &lt;&lt; self</code> class), so that is called on the class itself. This should explain instance methods vs. class methods</p>\n\n<p>Second problem: how do I write a <code>find</code> method for the phonebook class. So Phonebook has an attribute <code>contactList</code> and all of the elements in that array should be of the type <code>Phonecontact</code>, so to find a person from <code>contactList</code> by name we can do this</p>\n\n<pre><code>def find(name)\n  @contactList.select {|i| i.name == name}\nend\n</code></pre>\n\n<p>This will return an array of people with the name specified. If you want that array to be of their phone numbers you can do something like this. (Assume <code>pb</code> is a <code>Phonebook</code> with a contact list)</p>\n\n<pre><code>pb.find('james').map(&amp;:phone_number)\n</code></pre>\n\n<p>Additionally, I recommend that your <code>add</code> method store <code>PhoneContacts</code>, so it can really be as simple as this</p>\n\n<pre><code>def add(contact)\n  @contactList &lt;&lt; contact\nend\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 40388876, "answer_count": 1, "score": 0, "last_activity_date": 1478120518, "creation_date": 1478116242, "question_id": 40388577, "link": "https://stackoverflow.com/questions/40388577/how-use-other-variables-in-other-classes-in-ruby", "title": "How use other variables in other classes in Ruby", "body": "<p>I have this phone book program that takes a phone number and the type of phone number (it can be your home phone, cell phone, etc.) which is referred to as label. The program can take those values and store it in an address book where it can add contacts, delete contacts, and find a contact. </p>\n\n<p>There is a class called PhoneContact that uses two parameters: phone number and label. The purpose of this class is to take in a phone number along with a label(Home phone, work phone, cell phone, etc.) and returns the output of what type of phone number it is, what the area code of that number is, etc. </p>\n\n<p>An example would be:</p>\n\n<pre><code>James_May = PhoneContact.new('(555) 555-5555', :mobile)\nputs James_May.phone_number\n&gt;&gt; (555) 555-555\nputs James_May.label\n&gt;&gt; mobile\n</code></pre>\n\n<p>I created a PhoneBook class that is able to store, add, delete, and find phone contacts. </p>\n\n<p>An Example of this is:</p>\n\n<pre><code> JG_contact = PhoneBook.new\n    JG_contact.add('Gary, James', '5555555555', :home)\n    puts \"** JG's new entry:\"\n    &gt;&gt; **James's new entry:\n    puts book.find('Gary, James')\n    &gt;&gt;(954) 111-2222 (work)\n      (444) 555-5555 (cell)\n</code></pre>\n\n<p><em>My problem is I'm not sure how to implement the variables like    phone_number and label from the PhoneNumber class to the PhoneBook    class. How do I use variables from other classes and does it make    sense to implement these variables in a hash?</em></p>\n\n<p>Here is a snippet of the code from the PhoneClass: </p>\n\n<pre><code>class PhoneContact\n  attr_reader :label\n\n  def initialize(phone_number, label)\n    @label = label\n    @phone_number = normalize(phone_number)\n  end\n</code></pre>\n\n<p>Here is the code from the PhoneBook Class: </p>\n\n<pre><code>require_relative ./PhoneContact\n\n    class PhoneBook\n\n      def contactList\n        @contactList ||= {}\n      end\n\n      def add_contact (newContact = {})\n        flag = false\n        if newContact.length &lt; 1\n          return flag\n        else\n          flag = true\n          newContact.collect do |name, number|\n            contactList[name] = number\n          end\n          return flag\n        end\n      end\n\n      def delete (targetName)\n        if !contactList.has_key?(targetName)\n          return false\n        else\n          contactList.delete(targetName)\n          return true\n        end\n\n      end\n      def display_contact (targetName)\n        number = -1\n        if contactList.has_key?(targetName)\n          number = contactList(targetName)\n          puts \"Contact name : #{targetName}, Contact Number, #{number}\"\n        else\n          puts \"#{targetName} doesn't exist in the phonebook\"\n        end\n      end\n\n      def display_all_contacts\n        if !contactList.empty?\n          contactList.each {|name, number| puts \"Contact name: #{name}, contact number #{number}\" }\n      else\n        puts \"You don't have any contact details your phonebook\"\n      end\n      end\n      end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 604637, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/871759556fbe5979aeb8e686a4248487?s=128&d=identicon&r=PG", "display_name": "juan", "link": "https://stackoverflow.com/users/604637/juan"}, "edited": false, "score": 0, "creation_date": 1478121367, "post_id": 40389595, "comment_id": 68031587, "body": "uhmm, but I need to have a entire list of users with checkboxs and a save button."}, {"owner": {"reputation": 151, "user_id": 5965451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DDC06.png?s=128&g=1", "display_name": "Cyril Lavedrine", "link": "https://stackoverflow.com/users/5965451/cyril-lavedrine"}, "reply_to_user": {"reputation": 355, "user_id": 604637, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/871759556fbe5979aeb8e686a4248487?s=128&d=identicon&r=PG", "display_name": "juan", "link": "https://stackoverflow.com/users/604637/juan"}, "edited": false, "score": 0, "creation_date": 1478122343, "post_id": 40389595, "comment_id": 68032037, "body": "Hmm, that would be compatible with the above, if you add a boolean field is_member to the membership model. But you&#39;d have to create the membershipos as soon as the project is saved, which is a bit convoluted"}], "tags": [], "owner": {"reputation": 151, "user_id": 5965451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DDC06.png?s=128&g=1", "display_name": "Cyril Lavedrine", "link": "https://stackoverflow.com/users/5965451/cyril-lavedrine"}, "is_accepted": false, "score": 0, "last_activity_date": 1478120390, "last_edit_date": 1478120390, "creation_date": 1478119992, "answer_id": 40389595, "question_id": 40388300, "link": "https://stackoverflow.com/questions/40388300/mass-edit-create-destroy-many2many-relation-on-rails/40389595#40389595", "title": "Mass edit (create/destroy) many2many relation on Rails", "body": "<p>I think the helpers you want are included in the gem cocoon : <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">https://github.com/nathanvda/cocoon</a></p>\n\n<p>Using this gem, your view for the project edition would look like this :</p>\n\n<p>projects/_form</p>\n\n<pre><code>= simple_form_for @project do |f|\n  -# your project fields... \n  %h3 Members\n  #members\n    = f.simple_fields_for :members do |member|\n      = render 'member_fields', f: member\n    .links\n      = link_to_add_association 'add member', f, :members\n  = f.submit\n</code></pre>\n\n<p>projects/_member_fields</p>\n\n<pre><code>.nested-fields\n  = f.association :user\n  = link_to_remove_association \"remove user from project\", f\n</code></pre>\n\n<p><strong>Edit</strong> : I focused on the view part, but before that, in the model, you have to accept nested attributes from forms :</p>\n\n<pre><code>class Project &lt; ApplicationRecord\n  has_many :memberships, dependent: :destroy, class_name: 'ProjectMember'\n  has_many :members, through: :memberships, class_name: 'User', source: :user\n  accepts_nested_attributes_for :members, reject_if: :all_blank, allow_destroy: true\nend\n</code></pre>\n\n<p>There's also a bit of work to do in the controller to permit the nested attributes.</p>\n\n<pre><code>def project_params\n  params.require(:project).permit(:name, :description, members_attributes: [:id, :user_id, :_destroy])\nend\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 604637, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/871759556fbe5979aeb8e686a4248487?s=128&d=identicon&r=PG", "display_name": "juan", "link": "https://stackoverflow.com/users/604637/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478120390, "creation_date": 1478115261, "last_edit_date": 1478115825, "question_id": 40388300, "link": "https://stackoverflow.com/questions/40388300/mass-edit-create-destroy-many2many-relation-on-rails", "title": "Mass edit (create/destroy) many2many relation on Rails", "body": "<p>I'm stucked in the way to do this task on Rails 5.</p>\n\n<p>I need to \"mass\" edit a relation between a <code>Project</code> and it's <code>Members</code></p>\n\n<p>In the UI, I open a popup with a certain list of members (a list of <code>User</code>) and those member have or have not belongs to the <code>Project</code> (check the relations down here).</p>\n\n<p>I need to have the ability to mark some of them (who not belongs to) or unmark others (who belongs to) with checkbox's and \"save\" the form and create/delete the relations.</p>\n\n<p>For the record I have this models</p>\n\n<pre><code>// project.rb\n\nclass Project &lt; ApplicationRecord\n     has_many :memberships, dependent: :destroy, class_name: 'ProjectMember'\n     has_many :members, through: :memberships, class_name: 'User', source: :user\nend\n\n\n// project_member.rb\n\nclass ProjectMember &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :project\nend\n\n// user.rb\nclass User &lt; ApplicationRecord\n    has_many    :project_members\n    has_many    :projects, through: :project_members\nend\n</code></pre>\n\n<p>I'm kinda new on Rails and I'm really stucked in the way to create the forms (using SimpleForms) and how to edit the relation.</p>\n\n<p>What's the correct approach? I tried to find over the web without success :(</p>\n\n<p>I hope my question it's clear enough :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "timeslots"], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 6789141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e0d7a60159b3470929c03666a70a21?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Schenk", "link": "https://stackoverflow.com/users/6789141/jonathan-schenk"}, "is_accepted": false, "score": 1, "last_activity_date": 1478116026, "creation_date": 1478116026, "answer_id": 40388518, "question_id": 40388093, "link": "https://stackoverflow.com/questions/40388093/timeslots-application-ruby-on-rails/40388518#40388518", "title": "Timeslots application - Ruby on Rails", "body": "<p>This is a pretty vague question so be careful with that because stack overflow will probably close it soon. There is a lot of resources on the web about getting started but personally I have to say to go to <a href=\"https://www.railstutorial.org/book\" rel=\"nofollow noreferrer\">https://www.railstutorial.org/book</a> and really just pay attention and run through it. \nIt's not exactly what you are looking for but I was able to expand my first application off of this tutorial and then when you restart and make your own application you'll at least have a very good way of getting all of these things done and have the basics down. It does touch upon the user admin permissions you are looking at but in more of a twitter like application so you'd have to change a lot of things around.</p>\n\n<p>If you have any more specific questions feel free to post here or contact me and I'd be happy to help</p>\n"}], "owner": {"reputation": 1, "user_id": 5937382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4eb6639ea6a40686b46713daa5fe0cf?s=128&d=identicon&r=PG", "display_name": "mrngview", "link": "https://stackoverflow.com/users/5937382/mrngview"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478116026, "creation_date": 1478114534, "question_id": 40388093, "link": "https://stackoverflow.com/questions/40388093/timeslots-application-ruby-on-rails", "title": "Timeslots application - Ruby on Rails", "body": "<p>I would like to create a Ruby on Rails application similar to Doodle that would allow users to book/reserve a time interval within a certain time. </p>\n\n<p>For instance, dividing an hour in 12 slots of 5 minutes and allowing users (12 users in that case) to select one slot.</p>\n\n<p>That would be for my business.</p>\n\n<p>As an Admin I could:</p>\n\n<ul>\n<li>Create/Delete/Modify users.</li>\n<li>Create/Delete time slots.</li>\n<li>Comment.</li>\n</ul>\n\n<p>As a User I could:</p>\n\n<ul>\n<li>Select a slot.</li>\n<li>Comment.</li>\n</ul>\n\n<p>I have some notions of RoR, HTML, CSS and JS and I was wondering if there is any kind of tutorial on the web to do so.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 383, "user_id": 6889933, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b819d95e4d369dfa5b4aeac622c703b?s=128&d=identicon&r=PG&f=1", "display_name": "nickackerman42", "link": "https://stackoverflow.com/users/6889933/nickackerman42"}, "edited": false, "score": 2, "creation_date": 1478113319, "post_id": 40387792, "comment_id": 68027246, "body": "The relevant question: <a href=\"http://stackoverflow.com/questions/6182628/ruby-class-inheritance-what-is-double-less-than\" title=\"ruby class inheritance what is double less than\">stackoverflow.com/questions/6182628/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1478113964, "creation_date": 1478113964, "answer_id": 40387957, "question_id": 40387792, "link": "https://stackoverflow.com/questions/40387792/why-does-self-in-class-self-refer-to-the-class/40387957#40387957", "title": "Why does self in &quot;class &lt;&lt; self&quot; refer to the class?", "body": "<p>Inside methods <code>self</code> refers to the instance, inside class/module definition, but outside of any method\u00a0\u2014 to the class/module itself.</p>\n\n<pre><code>class Thing\n  puts self.inspect\n  def foo\n    puts self.inspect\n  end\nend\nputs \"===\"\nThing.new.foo\n</code></pre>\n\n<p>Try the code above and you\u2019ll likely see what\u2019s happening there: the class is being parsed in the first place, and the first <code>puts</code> is being executed. Then <code>puts \"===\"</code> prints the <code>\"===\"</code> string out. And, afterwards, the instance is being printed from inside the method.</p>\n"}, {"comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 1, "creation_date": 1478116610, "post_id": 40388008, "comment_id": 68029028, "body": "It&#39;s worth noting that <code>self</code> referring to <code>Thing</code> inside the context of a <code>class Thing</code> expression (and outside the context of a method body) is a straightforward consequence of the design goals of the language: constructs like <code>attr_reader</code> and <code>include</code> are meant to feel like declarative keywords, but they are implemented as methods of <code>Class</code> (well, <code>Module</code>). To feel declarative, you want to be able to call them by bare name in the context of the class body. A method called by name with no explicit receiver is called on <code>self</code>, so, <code>self</code> <i>has</i> to be the class."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1478125458, "post_id": 40388008, "comment_id": 68033352, "body": "&quot;<code>class &lt;&lt; self</code> within the class or <code>class &lt;&lt; Thing</code> outside the class does one thing and one thing only: it changes <code>self</code> to <code>Thing</code>&#39;s singleton class within the block that follows.&quot; \u2013 It also changes the <i>default definee</i> to <code>Thing</code>&#39;s singleton class, which is usually <i>the</i> primary reason to use it in the first place. And it changes the constant definition context to <code>Thing</code>&#39;s singleton class as well. So, it does <i>three</i> things, in fact, the same three things a &quot;normal&quot; class definition also changes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478125954, "post_id": 40388008, "comment_id": 68033559, "body": "@J&#246;rgWMittag, I&#39;m not familiar with the expression &quot;default definee&quot;. Is it defined somewhere for Ruby? Also, do things #2 and #3 follow from <code>self</code> being set to the singleton class?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478126261, "post_id": 40388008, "comment_id": 68033680, "body": "The <i>default definee</i> is where methods end up that are defined without an explicit receiver, i.e. normal instance methods defined like <code>def bar</code> instead of <code>def foo.bar</code>. The only article I know of where the concept is explained is <a href=\"http://yugui.jp/articles/846\" rel=\"nofollow noreferrer\"><i>Three implicit contexts in Ruby</i></a> by yugui (Ruby core team member, committer, and Ruby 1.9 release manager). In it, she explicitly mentions that Yehuda Katz&#39;s article you linked to is wrong, BTW. These three contexts are independent. E.g. <code>instance_eval</code> changes <code>self</code> but doesn&#39;t change the default definee or the constant context."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478126364, "post_id": 40388008, "comment_id": 68033717, "body": "Likewise, <code>def foo</code> changes <code>self</code> to the receiver object, but the default definee is still the innermost lexically enclosing module."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478126861, "post_id": 40388008, "comment_id": 68033873, "body": "Thanks for the clarification, @J&#246;rg."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1478115451, "last_edit_date": 1478115451, "creation_date": 1478114207, "answer_id": 40388008, "question_id": 40387792, "link": "https://stackoverflow.com/questions/40387792/why-does-self-in-class-self-refer-to-the-class/40388008#40388008", "title": "Why does self in &quot;class &lt;&lt; self&quot; refer to the class?", "body": "<p>Let's find out.</p>\n\n<pre><code>class Thing\n   puts \"self=#{self}\"\n   class &lt;&lt; self\n     puts \"self in singleton class=#{self}\"\n     def foo\n       puts \"I am #{self}.\"\n     end\n   end\nend\n  # self=Thing\n  # self in singleton class=#&lt;Class:Thing&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Thing.foo\n  # I am Thing.\n</code></pre>\n\n<p>We see <code>class &lt;&lt; self</code> is the same as <code>class &lt;&lt; Thing</code>.</p>\n\n<p>This is the same as</p>\n\n<pre><code>class Thing\nend\n\nclass &lt;&lt; Thing\n   puts \"self in singleton class=#{self}\"\n   def foo\n     puts \"I am #{self}.\"\n   end\nend\n  # self in singleton class=#&lt;Class:Thing&gt;\n\nThing.foo\n  # I am Thing.\n</code></pre>\n\n<p><code>class &lt;&lt; self</code> within the class or <code>class &lt;&lt; Thing</code> outside the class does one thing and one thing only: it changes <code>self</code> to <code>Thing</code>'s singleton class within the block that follows. That is the same as saying that it changes the <em>scope</em> to <code>Thing</code>'s singleton class within the block.</p>\n\n<p><a href=\"http://yehudakatz.com/2009/11/15/metaprogramming-in-ruby-its-all-about-the-self/\" rel=\"nofollow noreferrer\">This article</a> by Yehuda Katz is required reading.</p>\n"}], "owner": {"reputation": 383, "user_id": 6889933, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b819d95e4d369dfa5b4aeac622c703b?s=128&d=identicon&r=PG&f=1", "display_name": "nickackerman42", "link": "https://stackoverflow.com/users/6889933/nickackerman42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 40387957, "answer_count": 2, "score": 4, "last_activity_date": 1478115451, "creation_date": 1478113262, "question_id": 40387792, "link": "https://stackoverflow.com/questions/40387792/why-does-self-in-class-self-refer-to-the-class", "title": "Why does self in &quot;class &lt;&lt; self&quot; refer to the class?", "body": "<p>The code below outputs \"I am Thing.\"</p>\n\n<pre><code>class Thing\n   class &lt;&lt; self\n      def foo\n         puts \"I am #{self}.\"\n      end\n   end\nend\n\nThing.foo\n</code></pre>\n\n<p>I thought \"self\" refers to an object of type Thing, but it refers to the class Thing. I have gathered from a previous question (linked in the comments) that this has something to do with the fact that Thing is an instance of Object. Is the block beginning with class &lt;&lt; self actually executed in a context where \"self\" refers to Thing as an instance? What is going on here? </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 644, "user_id": 5259402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f3c2f0ad97df6f2c796381115c388e?s=128&d=identicon&r=PG&f=1", "display_name": "JVon", "link": "https://stackoverflow.com/users/5259402/jvon"}, "edited": false, "score": 3, "creation_date": 1478112531, "post_id": 40387411, "comment_id": 68026827, "body": "I think it is fine since OP already showed us their attempted code, which frankly is like 90% done anyway."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5463745"}, "edited": false, "score": 0, "creation_date": 1478112612, "post_id": 40387411, "comment_id": 68026876, "body": "I&#39;m just asking for help... I didn&#39;t know that wasn&#39;t allowed..? Professor recommends this site. For learning. Couldn&#39;t find a similar question, so I asked it."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1478113012, "post_id": 40387411, "comment_id": 68027093, "body": "Can you put <i>all</i> your code up in the question as to give a better idea of your approach..."}, {"owner": {"reputation": 644, "user_id": 5259402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f3c2f0ad97df6f2c796381115c388e?s=128&d=identicon&r=PG&f=1", "display_name": "JVon", "link": "https://stackoverflow.com/users/5259402/jvon"}, "edited": false, "score": 0, "creation_date": 1478114731, "post_id": 40387411, "comment_id": 68027967, "body": "I&#39;ll take a look, but notice that your code won&#39;t even run because you are missing an <code>end</code> in your <code>str_fb</code> method."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1478114927, "post_id": 40387411, "comment_id": 68028084, "body": "This is definitely a keepable question. It may not be an <i>excellent</i> question, but it&#39;s certainly acceptable, no need to close the question as off-topic."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5463745"}, "edited": false, "score": 0, "creation_date": 1478291976, "post_id": 40388731, "comment_id": 68111178, "body": "where do I loop from 1-50 in your suggestion of the assignment? I&#39;m not quite sure I understand it fully. And I&#39;m still confused on how to send the string directly into an array"}, {"owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "edited": false, "score": 0, "creation_date": 1478294794, "post_id": 40388731, "comment_id": 68112318, "body": "ah, sorry. I think I misunderstood what you need to do - let me try again"}], "tags": [], "owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "is_accepted": false, "score": 0, "last_activity_date": 1478299012, "last_edit_date": 1478299012, "creation_date": 1478116820, "answer_id": 40388731, "question_id": 40387411, "link": "https://stackoverflow.com/questions/40387411/ruby-convert-int-and-store-into-an-array/40388731#40388731", "title": "Ruby: Convert int AND store into an array", "body": "<p>You can add items to an array using <code>push</code> method or <code>&lt;&lt;</code> (shovel) operator. I prefer the latter.</p>\n\n<p>Here is my take on your assignment:</p>\n\n<pre><code>module MyModule\n  class FizzBuzz\n    attr_reader :main\n\n    def initialize(range)\n      raise TypeError unless range.is_a? Range\n      @main = []\n      range.to_a.each do |i|\n        main &lt;&lt; process(i)\n      end\n    end\n\n    private\n\n    def process(num)\n      if num % 5 == 0 &amp;&amp; num % 3 == 0\n        \"FizzBuzz\"\n      elsif num % 3 == 0\n        \"Fizz\"\n      elsif num % 5 == 0\n        \"Buzz\"\n      else\n        num\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Note that I don't have any getter and setter methods. This is for two reasons:</p>\n\n<ol>\n<li>The by calling the <code>attr_reader</code> class method, I am setting up a public getter method for main in a much more elegant way</li>\n<li>I don't see a need for any setter methods as passing in the range when I initialise the class would is sufficient</li>\n</ol>\n\n<p>If you save this module in a file named <code>my_module.rb</code> and run the irb command you can interact with your class as follows:</p>\n\n<pre><code>\u279c  Code irb\nirb(main):001:0&gt; require \"#{absolute_path_to_file}/my_module\"\n=&gt; true\nirb(main):004:0&gt; include MyModule\n=&gt; Object\nirb(main):005:0&gt; FizzBuzz.new(1..15).main\n=&gt; [1, 2, \"Fizz\", 4, \"Buzz\", \"Fizz\", 7, 8, \"Fizz\", \"Buzz\", 11, \"Fizz\", 13, 14, \"FizzBuzz\"]\nirb(main):006:0&gt; FizzBuzz.new('abc').main\nTypeError: TypeError\n    from /Users/username/Code/my_module.rb:6:in `initialize'\n    from (irb):6:in `new'\n    from (irb):6\n    from /Users/alexveldtman/.rbenv/versions/2.3.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>UPDATE: After looking at the code again, I thought it would be cool to refactor the class a bit to get rid of those boring if statements.</p>\n\n<pre><code>module MyModule\n  class FizzBuzz\n    attr_reader :main\n\n    def initialize(range)\n      raise TypeError, 'not a Range' unless range.is_a? Range\n      @main = []\n      range.to_a.each do |i|\n        main &lt;&lt; fizzbuzzerize(i){|fizzy_string, k| string_or_num(fizzy_string, k) }\n      end\n    end\n\n    private\n\n    def fizzbuzzerize(num)\n      yield [divisible_by_3?(num), divisible_by_5?(num)].compact.join, num\n    end\n\n    def string_or_num(string, num)\n      (string.length &gt; 0 ? string : nil) || num\n    end\n\n    def divisible_by_3?(num)\n      num % 3 == 0 ? \"Fizz\" : nil\n    end\n\n    def divisible_by_5?(num)\n      num % 5 == 0 ? \"Buzz\" : nil\n    end\n  end\nend\n</code></pre>\n\n<p>Note: the fizzbuzzerize method yields to a block in stead of returning a value </p>\n"}, {"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 0, "last_activity_date": 1478117129, "creation_date": 1478117129, "answer_id": 40388816, "question_id": 40387411, "link": "https://stackoverflow.com/questions/40387411/ruby-convert-int-and-store-into-an-array/40388816#40388816", "title": "Ruby: Convert int AND store into an array", "body": "<p>To answer the original question, just put the variable you want to return inside an array into brackets:</p>\n\n<pre><code>def main\n  [str_fb]\nend\n</code></pre>\n\n<p>Lots of other Ruby-specific improvements could be made here. For starters, you can replace the <code>int_num</code> and <code>int_num=</code> methods with a single line: <code>attr_accessor :int_num</code>. (You would need to move your <code>raise</code> to the constructor.) </p>\n\n<p>You can replace the <code>str_fb</code> method with another single line: <code>attr_reader :str_fb</code>.</p>\n\n<p>In the constructor, it is more common in Ruby to use instance variables to store input parameters. Consider which methods you want to leave public and which to make private. You can make instance methods (including <code>attr_accessor</code> and <code>attr_reader</code> private by adding a single line <code>private</code> and moving those methods below it.</p>\n\n<p>So your code might look like this:</p>\n\n<pre><code>class FizzBuzz\n\n  attr_accessor :int_num\n  attr_reader :str_fb, :value\n\n  def initialize(int_num, str_fb, value)\n    raise TypeError unless int_num.is_a?(Integer)\n    @int_num = int_num\n    @str_fb = str_fb\n    @value = value\n  end\n\n  &lt;public instance methods here&gt;\n\n  private\n\n  &lt;private instance methods here&gt;\n\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5463745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1478299012, "creation_date": 1478111905, "last_edit_date": 1478113756, "question_id": 40387411, "link": "https://stackoverflow.com/questions/40387411/ruby-convert-int-and-store-into-an-array", "title": "Ruby: Convert int AND store into an array", "body": "<p>In my first ruby hw assignment I have to make a FizzBuzz program. (If an int is / 3 its converted to a \"Fizz\" string, if divisible by 5, a \"Buzz\" string, and if by both a \"FizzBuzz\" string.) Lastly, if not divisible by either I need to convert the number itself to a string AND store it into an array in a method named main. </p>\n\n<pre><code>class FizzBuzz\n  def initialize(int_num, str_fb, value)\n   self.int_num = int_num\n   self.str_fb = str_fb\n   self.value = value\n  end\n\n  def int_num\n   @int_num\n  end\n\n  def int_num=(num)\n   raise TypeError if not num.is_a? Integer\n   @num = int_num\n  end\n\n   def str_fb\n    @str_fb\n   end\n\n  def str_fb=(name)\n    if int_num % 3 == 0\n      int_num = \"Fizz\"\n    elsif int_num % 5 == 0\n       int_num = \"Buzz\"\n    elsif int_num % 5 == 0 and int_num % 3 == 0\n       int_num = \"FizzBuzz\"\n    else\n      str_fb = int_num.to_s     #Also needs to be stored in an array in main function\n  end\n\n\n  def main\n    ary =array.new\n  end\nend\n</code></pre>\n\n<p>How do I store the newly converted int_num (now a string) into the array in main? Also, the code above is only one method of the class, but does it appear correct? Thanks, I am a full blown Ruby noob and appreciate all the help.</p>\n\n<p>**Added full code. Still incomplete, as I need to create a getter and setter for value that loops 1-50.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 558, "user_id": 3294749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b89617237a3446a856c0e28585934b?s=128&d=identicon&r=PG&f=1", "display_name": "kriskova", "link": "https://stackoverflow.com/users/3294749/kriskova"}, "edited": false, "score": 0, "creation_date": 1478112613, "post_id": 40387221, "comment_id": 68026877, "body": "Isn&#39;t that just a wrong representation that you are looking at? I mean, an integer field will never be an empty string. It can be either a number or null, right?"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 558, "user_id": 3294749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b89617237a3446a856c0e28585934b?s=128&d=identicon&r=PG&f=1", "display_name": "kriskova", "link": "https://stackoverflow.com/users/3294749/kriskova"}, "edited": false, "score": 0, "creation_date": 1478112837, "post_id": 40387221, "comment_id": 68026996, "body": "In this circumstance: no.  If the blank option is selected then that would mean that the user has not selected an answer, thus <code>null</code>.  Pretend that there is another select option that specifies &#39;does not apply&#39; or &#39;no&#39; and which actually saves a blank string value.  Saving it as <code>null</code> in the database is just a way for me to say &#39;oh ok, they did not answer this question at all."}], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 2, "last_activity_date": 1478114040, "last_edit_date": 1478114040, "creation_date": 1478112725, "answer_id": 40387633, "question_id": 40387221, "link": "https://stackoverflow.com/questions/40387221/rails-collection-select-save-null-instead-of-empty-string-when-blank-option-s/40387633#40387633", "title": "Rails collection_select: save null instead of empty string when &#39;blank&#39; option selected", "body": "<p>This works:</p>\n\n<pre><code>def text_value=(value)\n  if value.empty?\n    write_attribute(:name, nil)\n  else\n    super\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2873, "user_id": 185870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1196a9e29e60e7615c9f0939f8be0f28?s=128&d=identicon&r=PG", "display_name": "Teoulas", "link": "https://stackoverflow.com/users/185870/teoulas"}, "is_accepted": false, "score": 1, "last_activity_date": 1478114848, "creation_date": 1478114848, "answer_id": 40388188, "question_id": 40387221, "link": "https://stackoverflow.com/questions/40387221/rails-collection-select-save-null-instead-of-empty-string-when-blank-option-s/40388188#40388188", "title": "Rails collection_select: save null instead of empty string when &#39;blank&#39; option selected", "body": "<p>If you want to do this for multiple attributes and/or models, there's a gem for that:\n<a href=\"https://github.com/rubiety/nilify_blanks\" rel=\"nofollow noreferrer\">https://github.com/rubiety/nilify_blanks</a></p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "accepted_answer_id": 40387633, "answer_count": 2, "score": 3, "last_activity_date": 1478114848, "creation_date": 1478111256, "last_edit_date": 1478112340, "question_id": 40387221, "link": "https://stackoverflow.com/questions/40387221/rails-collection-select-save-null-instead-of-empty-string-when-blank-option-s", "title": "Rails collection_select: save null instead of empty string when &#39;blank&#39; option selected", "body": "<p>I have the following code for a select box in a form:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :user_id %&gt;\n  &lt;%= f.collection_select :user_id, User.all, :id, :name, include_blank: true %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And it displays the following select options:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WfV7W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WfV7W.png\" alt=\"select options\"></a></p>\n\n<p>I noticed that when the <code>blank</code> option is selected, what actually gets saved in the database is an empty string: <code>''</code></p>\n\n<p>I do not want to save an empty string when the <code>blank</code> option is selected.  Instead: I want to save <code>null</code>.  </p>\n\n<p>I attempted overriding the setter in the rails model but it didn't work:</p>\n\n<pre><code>def text_value=(value)\n  write_attribute(:name, nil) and return if value.empty?\n  super\nend\n</code></pre>\n\n<p>How might I do this at the application level?  I am aware that I <em>could</em> have a Default Value specified at the Database level, but it seems that this might be better suited at the application level. </p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478113352, "post_id": 40387122, "comment_id": 68027259, "body": "Why the rush to select an answer? Do you always accept the one offered?"}], "answers": [{"tags": [], "owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "is_accepted": true, "score": 0, "last_activity_date": 1478111379, "creation_date": 1478111379, "answer_id": 40387251, "question_id": 40387122, "link": "https://stackoverflow.com/questions/40387122/complex-array-of-hashes-using-ruby/40387251#40387251", "title": "complex array of hashes using ruby", "body": "<pre><code>twitter_data.each do |data|\n  puts \"#{data.keys[0]}: #{data[data.keys[0]]['description']}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1478120041, "last_edit_date": 1478120041, "creation_date": 1478113316, "answer_id": 40387809, "question_id": 40387122, "link": "https://stackoverflow.com/questions/40387122/complex-array-of-hashes-using-ruby/40387809#40387809", "title": "complex array of hashes using ruby", "body": "<p>First let's start with a more reasonable data set.</p>\n\n<pre><code>twitter_data = [\n   { \"LaunchAcademy\"=&gt;{ \"description\"=&gt;\"A 10 week, intensive bootcamp\",\n                         \"last 2 tweets\"=&gt;[\"Hi ho\", \"Vote for a nasty person!\"],\n                         \"number of friends\"=&gt;1 } },\n   {  \"dpickett\"=&gt;    { \"description\"=&gt;\"Co-Founder, Co-Organizer\",\n                        \"last 2 tweets\"=&gt; [\"How now, brown cow?\", \"Little Miss Muffet..\"],\n                        \"number of friends\"=&gt;874 } }\n]\n</code></pre>\n\n<p>When we see what we have it's easy to see how the descriptions can be printed to the console.</p>\n\n<pre><code>twitter_data.each do |h|\n  k,v = h.first\n  puts \"Description for #{k}: #{v[\"description\"] }\"\nend\n  # Description for LaunchAcademy: A 10 week, intensive bootcamp\n  # Description for dpickett: Co-Founder, Co-Organizer\n</code></pre>\n\n<p>The steps are as follows. The first element is passed to the block and the block variable <code>h</code> is set equal to that element:</p>\n\n<pre><code>h = twitter_data.first\n  #=&gt; {\"LaunchAcademy\"=&gt;{\"description\"=&gt;\"A 10 week, intensive bootcamp\",\n  #                      \"last 2 tweets\"=&gt;[\"Hi ho\", \"Vote for a nasty person!\"],\n  #                      \"number of friends\"=&gt;1}}\n</code></pre>\n\n<p>The first (and only) key-value pair is then extracted and the block variables <code>k</code> and `v are assigned the key and value respectively, using <em>parallel assignement</em> (sometimes called <em>multiple assignment</em>): </p>\n\n<pre><code>k,v = h.first\n  #=&gt; [\"LaunchAcademy\",\n  #    {\"description\"=&gt;\"A 10 week, intensive bootcamp\",\n  #     \"last 2 tweets\"=&gt;[\"Hi ho\", \"Vote for a nasty person!\"],\n  #     \"number of friends\"=&gt;1}]\nk #=&gt; \"LaunchAcademy\" \nv #=&gt; {\"description\"=&gt;\"A 10 week, intensive bootcamp\",\n  #    \"last 2 tweets\"=&gt;[\"Hi ho\", \"Vote for a nasty person!\"],\n  #    \"number of friends\"=&gt;1} \n</code></pre>\n\n<p>The string to be <code>puts</code>'ed is therefore</p>\n\n<pre><code>\"Description for #{k}: #{v[\"description\"]}\"\n  #=&gt; \"Description for LaunchAcademy: A 10 week, intensive bootcamp\"\n</code></pre>\n\n<p>The same steps are followed for the second element of <code>twitter_data</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 6951619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a535e7f4917f9f230507b49da7dbbb0e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam. G ", "link": "https://stackoverflow.com/users/6951619/sam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 40387251, "answer_count": 2, "score": -1, "last_activity_date": 1478120041, "creation_date": 1478110939, "question_id": 40387122, "link": "https://stackoverflow.com/questions/40387122/complex-array-of-hashes-using-ruby", "title": "complex array of hashes using ruby", "body": "<p>def</p>\n\n<pre><code> twitter_data\n  [{\"LaunchAcademy\"=&gt;\n   {\"description\"=&gt;\n     \"A 10 week, intensive bootcamp teaching you how to code with a focus on Ruby on Rails\",\n    \"last twenty tweets\"=&gt;\n     [\"RT @chrisccerami: While learning web development I created a map of all of the shows @Screamales have played and damn @DonGiovanniRecs http\u2026\",\n      \"6 ways to quantify your code and why you need to do it:  by @kevinrcasey ,\n      \"Do more of what you want at work. How to create productive partnerships:  by @benvoss\",\n      \"RT @Pistachio: SO rad. bunch of local women learning to code with @gdiBoston at @HubSpot right now: ,\n      \"RT @STWatkins78: Huge breakthrough on my breakable toy today...can upload local file to soundcloud from my app...time for a beer! #LaunchAc\u2026\",\n      \"Just say yes to opportunities, especially if they scare you. great advice by @kerry_benjamin1\",\n      \"How the internet is changing software and business, using Ruby as an example:  by  @ukitazume ,\n      \"RT @chrisccerami: @JustusEapen @LaunchAcademy @MarsCuriosity ,\n      \"Come build some interesting projects! @womenwhocode Hack Night tomorrow. RSVP:,\n      \"RT @SpencerCDixon: One of the greatest parts of being a developer is the massive amount of control you have over a computer. Feels very emp\u2026\",\n      \"7 reasons to love Minitest for testing Ruby code:  by @FluxusFrequency, a graduate from our friends @gschool\",\n      \"Interested in becoming a game developer? Here's how:  via @skilledup ,\n      \"Web developer hiring trends, and what they mean for you: by @walesmd ,\n      \"RT @chrisccerami: I recently built my first API in Rails which I hope makes photos from Mars courtesy of @MarsCuriosity more accessible to \u2026\",\n      \"Build things that last. Make sure your work lives beyond you. by @acolangelo\",\n      \"Thanks to everyone who came to Ship It! Saturday! Check out the latest blog post for a recap:,\n      \"Write your code as if your best friend's inheriting it  by @MGraybosch,\n      \"Coding can improve the way we run the world. Old, but inspiring TED talk by @pahlkadot: ,\n      \"Practicing pitches and getting ready for Career Day, coming up on January 27th and 28th! ,\n      \"RT @lizvdk: The cool kids use GEOjson so I did too. Here's how I build it with Ruby: ],\n    \"number of followers\"=&gt;3590,\n    \"number of friends\"=&gt;699,\n    \"latest tweet\"=&gt;\n     \"RT @chrisccerami: While learning web development I created a map of all of the shows @Screamales have played and damn @DonGiovanniRecs http\u2026\",\n    \"number of tweets\"=&gt;1433,\n    \"location\"=&gt;\"Boston, MA\"}},\n {\"dpickett\"=&gt;\n   {\"description\"=&gt;\"Co-Founder at @LaunchAcademy, Co-Organizer of @bostonrb\",\n    \"last twenty tweets\"=&gt;\n     [\"RT @MeetingBoy: If your employees worked until 3AM, you have failed as a manager.\",\n      \"Glad to see two organizations that are near and dear to me (@EntrepreneurOrg and @YEC) at the top of this list: ,\n      \"@lizvdk I had the same reaction - it was like they spent the last 45 minutes  trolling the movie industry.\",\n      \"RIP @jamesgolick - I learned so much from you, and always thought you were one of the most professional and skilled devs I've ever met :-(\",\n      \"Aspiring devs, if you need an example of a professional that embodies all we try to teach and more, look to @hchood Thank you! I'll miss you\",\n      \"Some notes for my facilitation tomorrow on debugging JavaScript: ,\n      \"@marcomorawec and @kenmazaika great having you guys at Mission Control! Love meeting folks with their hearts in technical education :-)\",\n      \"RT @graysky: \\\"Resumes suck. Here\u2019s the data.\\\" by @alinelernerLLC Most create similar, unhelpful resume\",\n      \"@paulanthonywils @searls @markbates I reported the @bostonrb imitator as spam. Seems like the right thing to do\",\n      \"@divineanimal @LaunchAcademy we're delighted to have you! :-) See you soon and keep us posted on how prelearning is going.\",\n      \"sad to hear about @ezmobius passing. His work at @engineyard and some of his conference talks blew my mind. A source of wisdom for many. RIP\",\n      \"Thank you! ,\n      \"@jboursiquot happy birthday man!\",\n      \"lol! the irony of this error message!,\n      \"such refreshing honesty \\\"If you really believe that you and your business are one, business failure destroys you\\,\n      \"RT @bostonrb: Instead of our monthly meeting, we're going to party in December! Join us at the Black Rose on 12/9 @ 7PM. RSVP @ https://t.c\u2026\",\n      \"@dan_kleiman @LaunchAcademy @heroiceric Mr. G is shedding a tear right now.\",\n      \"@kdaigle I always consider there to be a 2 or 3 year lag in enterprise adoption of ideas like that.\",\n      \"Change is good. \\\"Why Google doesn\u2019t care about hiring top college graduates\\\" by @MaxNisen\",\n      \"This is why I can't read TechCrunch. What an uninformed piece, and a total misunderstanding of the term \\\"full stack\\],\n    \"number of followers\"=&gt;1604,\n    \"number of friends\"=&gt;874,\n    \"latest tweet\"=&gt;\n     \"RT @MeetingBoy: If your employees worked until 3AM, you have failed as a manager.\",\n    \"number of tweets\"=&gt;3451,\n    \"location\"=&gt;\"\u00dcT: 42.132759,-71.132183\"}},\n</code></pre>\n\n<p>I get how to call out one specified information for the array of hashes, what I'm struggling on is getting from all of the hashes at once. How would I be able to print each user and their description at once? \nexample </p>\n\n<pre><code>  LaunchAcademy: A 10 week, intensive bootcamp teaching you how to code with a\n  focus on Ruby on Rails\n  dpickett: Co-Founder at @LaunchAcademy, Co-Organizer of @bostonrb\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "activeadmin", "image-uploading"], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478114924, "post_id": 40388056, "comment_id": 68028079, "body": "Great! thank you, I&#39;ll check it out later tonight, I&#39;ll let you know how it goes."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478181410, "post_id": 40388056, "comment_id": 68056844, "body": "Hi @veldtmana, I added the gem to the <code>gemfile</code> but I&#39;m not sure how to integrate it with <code>active admin</code> or at least I can&#39;t find good enough directions how to do that. Could you perhaps guide me with the implementation. Thanks"}, {"owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478203445, "post_id": 40388056, "comment_id": 68070682, "body": "Hi @Slowboy, sure I&#39;ll quickly put something together for you"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478203546, "post_id": 40388056, "comment_id": 68070729, "body": "Thank you so much @veldtmana it would be great, I&#39;ve been kind a stuck in this for the whole day"}, {"owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 1, "creation_date": 1478215585, "post_id": 40388056, "comment_id": 68075851, "body": "@Slowboy here is an example implementation - please let me know if anything is unclear."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478274240, "post_id": 40388056, "comment_id": 68101784, "body": "Hi @veldtmana Thank you very much, this is partly working for me, the admin part is working and I can upload images there. But I can&#180;t see the images in the show.html.erb.... could you perhaps copy/paste your show.html.erb so I can see how you are doing this?"}, {"owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478277756, "post_id": 40388056, "comment_id": 68104080, "body": "Hi @Slowboy I haven&#39;t done anything outside of ActiveAdmin, but the show page should be very simple. I&#39;ll add a code snippet to the Post"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478284330, "post_id": 40388056, "comment_id": 68107570, "body": "Hi @veldtmana, this is basically how I did it, I&#39;m still getting this error <code>undefined method &#39;title&#39; for #&lt;Product::ActiveRecord_Relation:0x007f8ca2189828&gt;</code> and same goes for <code>photo</code>.... I&#39;m not really getting why.... am I missing something?"}, {"owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478286027, "post_id": 40388056, "comment_id": 68108426, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127404/discussion-between-veldtmana-and-slowboy\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "is_accepted": true, "score": 4, "last_activity_date": 1478278043, "last_edit_date": 1478278043, "creation_date": 1478114417, "answer_id": 40388056, "question_id": 40387006, "link": "https://stackoverflow.com/questions/40387006/multiple-image-uploads-with-paperclip-active-admin/40388056#40388056", "title": "Multiple image uploads with paperclip/active admin", "body": "<p>I would suggest using something like jQuery file upload to handle the file uploads for you.</p>\n\n<p>That way your controller still only handles one file upload at a time, though you can upload many files at a time as each upload is handled separately via an Ajax call. </p>\n\n<p>I have tried other alternatives, but trying to post more than one file to a server at a time, you quickly run into server timeout issues (especially on heroku).</p>\n\n<p>Here is a gem you can wire into ActiveAdmin</p>\n\n<p><a href=\"https://github.com/tors/jquery-fileupload-rails\" rel=\"nofollow noreferrer\">https://github.com/tors/jquery-fileupload-rails</a></p>\n\n<p>Let me know if you need more help on the implementation. </p>\n\n<p>UPDATE: (please see comments for context) </p>\n\n<p>Here is some example code illustrating how to implement the code in active admin. I know it looks like a lot of code but just work through it step by step and you will see its pretty simple.</p>\n\n<p>Product model:</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  has_many :photos\nend\n</code></pre>\n\n<p>Photo model:</p>\n\n<pre><code>class Photo &lt; ApplicationRecord\n  include ActionView::Helpers\n\n  belongs_to :product\n  has_attached_file :image, :styles =&gt; { large: \"500x500&gt;\",thumb: \"100x100&gt;\" }\n  validates_attachment_content_type :image, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\n\n  def thumb\n    link_to(image_tag(image.url(:thumb)), thumb_url)\n  end\n\n  private\n\n  def thumb_url\n    Rails.application.routes.url_helpers.admin_product_photo_path(product, self)\n  end\nend\n</code></pre>\n\n<p>Then in active admin do the following.</p>\n\n<p>ActiveAdmin Product:</p>\n\n<pre><code>ActiveAdmin.register Product do\n  permit_params :title\n\n  form do |f|\n    f.inputs do\n      f.input :title\n    end\n    f.actions\n   end\n\n  index do\n    column :title\n    column :images do |product|\n      product.photos.map do |photo|\n        link_to (image_tag photo.image.url(:thumb)), [:admin, photo.product, photo]\n      end.join.html_safe\n    end\n    actions\n  end\n\n  show do\n    attributes_table\n    panel \"Images\" do\n      div class: \"js-product_photos\" do\n        product.photos.map do |photo|\n          link_to (image_tag photo.image.url(:thumb)), [:admin, photo.product, photo]\n        end.join.html_safe\n      end\n      div do\n        semantic_form_for [:admin, resource, Photo.new], multipart: true do |f|\n          f.inputs do\n            f.input :image, as: :file,\n                            input_html: {\n                              class: 'js-photo_upload',\n                              type: \"file\",\n                              name: \"photo[image]\",\n                              multiple: true\n                            }\n          end\n         end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Note the html options defined in the form. That is where jQuery upload derives a lot of its options. the form url is also important.</p>\n\n<p>I could have added the form anywhere, but I think it works well on the product show page.</p>\n\n<p>ActiveAdmin Photo:</p>\n\n<pre><code>ActiveAdmin.register Photo do\n  belongs_to :product\n  permit_params :image\n\n  controller do\n    def create\n      create! do |format|\n        format.json { render :json =&gt; {thumb: resource.thumb} }\n      end\n    end\n  end\n\n  show do\n    attributes_table do\n      row :product\n      row :image do |product|\n        image_tag product.image.url(:large)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and finally in the <code>active_admin.js.coffee</code></p>\n\n<pre><code>#= require active_admin/base\n#= require jquery-fileupload/basic\n\n$ -&gt;\n  $('.js-photo_upload').fileupload dataType: 'json', done: (e, data) -&gt;\n    $('.js-product_photos').append data.result.thumb\n</code></pre>\n\n<p>And that's it! The files should upload via an AJAX call as soon as you select them. Once uploaded an image tag will be appended to the list of images. You can select more than one image at a time </p>\n\n<p>This really just scratches the surface of what the basic jQuery file uploader can do - read more about it here. <a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin\" rel=\"nofollow noreferrer\">https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin</a></p>\n\n<p>Just for reference the app I built is a rails 5 app, here are the gems that were important for this example:</p>\n\n<pre><code>gem 'activeadmin', github: 'activeadmin'\ngem 'inherited_resources', github: 'activeadmin/inherited_resources'\ngem 'devise'\ngem 'paperclip', \"~&gt; 5.0.0\"\ngem \"jquery-fileupload-rails\" \n</code></pre>\n\n<p>UPDATE: Based on a further question</p>\n\n<p>Now that you are able to upload images, you can display them on for example the product show page (<code>show.html.erb</code>):</p>\n\n<pre><code>&lt;h1&gt;&lt;%= @product.title %&gt;&lt;/h1&gt;\n&lt;% @product.photos.each do |photo| %&gt;\n  &lt;%= image_tag(photo.image.url(:large) %&gt;  \n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 40388056, "answer_count": 1, "score": 0, "last_activity_date": 1478278043, "creation_date": 1478110538, "last_edit_date": 1478111055, "question_id": 40387006, "link": "https://stackoverflow.com/questions/40387006/multiple-image-uploads-with-paperclip-active-admin", "title": "Multiple image uploads with paperclip/active admin", "body": "<p>Hi I want to be able to upload multiple pictures for a <code>product</code> instead of just one as a can now through the code below.</p>\n\n<p>I'm not sure how to manage my client request since I'm rather unexperienced working with <code>active admin</code> and <code>paperclip</code></p>\n\n<p>I have googled around and checked out various posts on Stack Overflow, but I haven't found a solution yet. Any suggestions or help would be great.... </p>\n\n<p>This is the <code>product</code> model</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  belongs_to :category\n  belongs_to :label\n\n  has_many :product_items, :dependent =&gt; :destroy\n\n   extend FriendlyId\n   friendly_id :title, use: [:slugged, :finders]\n\n\n    validates :title, :description, presence: true\n    validates :price_usd, :price_eu, numericality: {greater_than_or_equal_to: 0.01}\n    validates :title, uniqueness: true\n\n\n   has_attached_file :image, styles: { medium: \"500x500#\", thumb: \"100x100#\" }\n   validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\z/\n\n\n   def self.search(query)\n\n   where(\"title LIKE ? OR description LIKE ?\", \"%#{query}%\", \"%#{query}%\") \n  end\nend\n</code></pre>\n\n<p>and this is the <code>app/admin/product.rb</code></p>\n\n<pre><code>  ActiveAdmin.register Product do\n\n\n  permit_params :title, :slug, :description, :stock_quantity, :image, :price_usd, :price_eu, :category_id, :label_id\n\n  index do\n      column :title\n      column :slug\n      column :category\n      column :label\n      column :created_at\n      column :stock_quantity\n\n      column :price_eu, :sortable =&gt; :price_eu do |product|\n        number_to_currency(product.price_eu, :unit =&gt; \" \u20ac \" , :precision =&gt; 0) \n      end\n      column :price_euro, :sortable =&gt; :price_usd do |product|\n        number_to_currency(product.price_usd, :unit =&gt; \" $ \" , :precision =&gt; 0)\n      end\n\n      actions   \n\n  end\n\nform do |f|\n        f.inputs do\n        f.input :title\n        f.input :slug\n        f.input :description, as: :ckeditor, input_html: { ckeditor: { toolbar: 'Full' } }\n        f.input :stock_quantity\n        f.input :image\n        f.input :price_usd\n        f.input :price_eu\n        f.input :category\n        f.input :label\n        end\n        actions \n      end\n\nend\n</code></pre>\n\n<p>And here is the <code>products_controller.rb</code></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\nbefore_action :set_product, only: [:show, :edit, :update, :destroy]\n\n\n  def show\n  @meta_title = \"Samoli #{@product.title}\"\n  @meta_description = @product.description\n\n  end\n\ndef search\n\n@product = Product.search(params[:query]).order(\"created_at DESC\")\n@categories = Category.joins(:products).where(:products =&gt; {:id =&gt; @product.map{|x| x.id }}).distinct\n\n\nend\n\nprivate\n# Use callbacks to share common setup or constraints between actions.\ndef set_product\n  @product = Product.find(params[:id])\nend\n\n# Never trust parameters from the scary internet, only allow the white list through.\ndef product_params\n  params.require(:product).permit(:title, :description, :price_usd, :price_eu, :image, :category_id, :stock_quantity, :label_id, :query, :slug)\nend\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478110079, "post_id": 40386740, "comment_id": 68025446, "body": "Is the intent to remove items from the array if either (a) calling <code>#removed?</code> on the item returns true or (b) the item is equivalent to <code>something else</code>? Are you able to add a method to the class that <code>item</code> belongs to?"}, {"owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478110494, "post_id": 40386740, "comment_id": 68025708, "body": "The code in the example was just to demonstrate the scenario, I am actually working with an array of strings, not objects. I&#39;m really just trying to figure out how to return the value without exiting the block."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1478111140, "post_id": 40386740, "comment_id": 68026095, "body": "<a href=\"http://stackoverflow.com/a/11678342/479863\">This answer</a> to the duplicate seems  to be what you&#39;re looking for."}], "owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "closed_date": 1478111057, "answer_count": 0, "score": 0, "last_activity_date": 1478109660, "creation_date": 1478109660, "question_id": 40386740, "link": "https://stackoverflow.com/questions/40386740/how-to-return-a-value-early-from-a-ruby-block", "closed_reason": "Duplicate", "title": "How to return a value early from a Ruby block?", "body": "<p>I'm trying to write some Ruby code that will return a value from a block that is passed to a function. I don't want the block to exit early, I just want to avoid writing too many <code>if</code> statements in order to implicitly return the value.</p>\n\n<p>How can I rewrite this to return the value early?</p>\n\n<p>This works:</p>\n\n<pre><code>def my_method\n  my_array.delete_if do |item|\n    if item.removed?\n      true\n    elsif item == 'something else'\n      true\n    else\n      false\n    end\n  end\nend\n</code></pre>\n\n<p>This won't work because you can't call return in a block:</p>\n\n<pre><code>def my_method\n  my_array.delete_if do |item|\n    return true if item.removed?\n    return true if item == 'something else'\n\n    # ...\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux-mint"], "comments": [{"owner": {"reputation": 664, "user_id": 5200126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zG1IH.jpg?s=128&g=1", "display_name": "heyitsjhu", "link": "https://stackoverflow.com/users/5200126/heyitsjhu"}, "edited": false, "score": 0, "creation_date": 1478160351, "post_id": 40386726, "comment_id": 68043361, "body": "check to see which version of ruby you&#39;re using with <code>ruby -v</code>"}, {"owner": {"reputation": 3565, "user_id": 2363935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/273081c71f1516ee881f74fd63b07502?s=128&d=identicon&r=PG", "display_name": "kross", "link": "https://stackoverflow.com/users/2363935/kross"}, "edited": false, "score": 1, "creation_date": 1490048941, "post_id": 40386726, "comment_id": 72929363, "body": "I get the same thing using <code>ruby 2.3.3p222</code> and running <code>bundle exec rake db:migrate</code> on the official ruby docker container <code>ruby:2.3.3</code>.  It makes no sense to me.  Rails 5.0.1."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5005474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89df186be9310dc800bb5ee438ece46e?s=128&d=identicon&r=PG&f=1", "display_name": "Jinado", "link": "https://stackoverflow.com/users/5005474/jinado"}, "is_accepted": false, "score": 1, "last_activity_date": 1480702421, "creation_date": 1480702421, "answer_id": 40938553, "question_id": 40386726, "link": "https://stackoverflow.com/questions/40386726/ruby-on-rails-usr-bin-env-ruby2-3-no-such-file-or-directory/40938553#40938553", "title": "ruby on rails &quot;usr/bin/env: \u2018ruby2.3\u2019: No such file or directory&quot;", "body": "<p>I had the same problem but when running:</p>\n\n<pre><code>rails new my_application\n</code></pre>\n\n<p>but after reinstalling the rails gems by:</p>\n\n<pre><code>gem install rails\n</code></pre>\n\n<p>it worked just fine and I could run:</p>\n\n<pre><code>rails new my_application\nbundle install\n</code></pre>\n\n<p>and</p>\n\n<pre><code>bundle exec rails s\n</code></pre>\n\n<p>without any problems.</p>\n"}, {"tags": [], "owner": {"reputation": 3565, "user_id": 2363935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/273081c71f1516ee881f74fd63b07502?s=128&d=identicon&r=PG", "display_name": "kross", "link": "https://stackoverflow.com/users/2363935/kross"}, "is_accepted": false, "score": 1, "last_activity_date": 1490049820, "creation_date": 1490049820, "answer_id": 42915310, "question_id": 40386726, "link": "https://stackoverflow.com/questions/40386726/ruby-on-rails-usr-bin-env-ruby2-3-no-such-file-or-directory/42915310#42915310", "title": "ruby on rails &quot;usr/bin/env: \u2018ruby2.3\u2019: No such file or directory&quot;", "body": "<p>For me, the problem was with a cached set of gems (on CircleCI 2.0).  I changed my base image which changed the ruby location.  If you tried to <code>bundle install</code> with one ruby, removed it then switched to another, then this appears to cause the problem.</p>\n"}], "owner": {"reputation": 41, "user_id": 7106125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e900da08c7842b636dce25ecf536be2?s=128&d=identicon&r=PG&f=1", "display_name": "game1095", "link": "https://stackoverflow.com/users/7106125/game1095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6130, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1490049820, "creation_date": 1478109590, "last_edit_date": 1481141987, "question_id": 40386726, "link": "https://stackoverflow.com/questions/40386726/ruby-on-rails-usr-bin-env-ruby2-3-no-such-file-or-directory", "title": "ruby on rails &quot;usr/bin/env: \u2018ruby2.3\u2019: No such file or directory&quot;", "body": "<p>I got some problem when i typing <code>bundle exec rake db:migrate</code> on terminal \nthen i received the result like `/usr/bin/env: \u2018ruby2.3\u2019: No such file or directory</p>\n\n<p><a href=\"https://i.stack.imgur.com/swhMM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/swhMM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "linux", "cygwin", "chef-infra"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1478184197, "post_id": 40386718, "comment_id": 68058935, "body": "Why do you want to use cygwin here ? just get rid of it and use the same command <code>chef shell-init bash</code> in a dos prompt and you&#39;ll be fine"}], "answers": [{"tags": [], "owner": {"reputation": 4121, "user_id": 202576, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bdf45a8317ff3471cdcc7ba2f18c79a1?s=128&d=identicon&r=PG", "display_name": "onknows", "link": "https://stackoverflow.com/users/202576/onknows"}, "is_accepted": false, "score": 3, "last_activity_date": 1478693289, "creation_date": 1478693289, "answer_id": 40506669, "question_id": 40386718, "link": "https://stackoverflow.com/questions/40386718/i-am-not-able-start-chef-on-cygwin/40506669#40506669", "title": "I am not able start chef on cygwin", "body": "<p>I use a number of alias entries in my <code>.bash_profile</code> to make it work in Cygwin. </p>\n\n<pre><code>alias knife='/cygdrive/c/opscode/chefdk/embedded/bin/ruby C:/opscode/chefdk/bin/knife'\nalias chef-client='/cygdrive/c/opscode/chefdk/embedded/bin/ruby C:/opscode/chefdk/bin/chef-client'\nalias chef-solo='/cygdrive/c/opscode/chefdk/embedded/bin/ruby C:/opscode/chefdk/bin/chef-solo'\nalias shef='/cygdrive/c/opscode/chefdk/embedded/bin/ruby C:/opscode/chefdk/bin/shef'\nalias chef='/cygdrive/c/opscode/chefdk/embedded/bin/ruby C:/opscode/chefdk/bin/chef'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1479486353, "creation_date": 1479486353, "answer_id": 40681828, "question_id": 40386718, "link": "https://stackoverflow.com/questions/40386718/i-am-not-able-start-chef-on-cygwin/40681828#40681828", "title": "I am not able start chef on cygwin", "body": "<p>Just for the sake of stating it, we don't test our Windows packages on Cygwin nor do we encourage use with Cygwin. If you want bash because lolpowershell, just use a copy compiled for Windows natively. I usually use the one that comes with msysgit but there are plenty of builds elsewhere too.</p>\n"}], "owner": {"reputation": 63, "user_id": 6072566, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3a2266ae81a80a0d1908b10cedb98d2?s=128&d=identicon&r=PG&f=1", "display_name": "Srikarsh Vardhanreddy Kolanu", "link": "https://stackoverflow.com/users/6072566/srikarsh-vardhanreddy-kolanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 869, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479486353, "creation_date": 1478109570, "question_id": 40386718, "link": "https://stackoverflow.com/questions/40386718/i-am-not-able-start-chef-on-cygwin", "title": "I am not able start chef on cygwin", "body": "<p>My platform is windows. I installed chef development kill using chefdk-0.19.6-1-x86.msi. </p>\n\n<p>Then using Cygwin executed the below command</p>\n\n<pre><code>echo 'eval \"$(chef shell-init bash)\"' &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>to set chef ruby as default</p>\n\n<p>I don't have ruby </p>\n\n<pre><code> $ which ruby\n which: no ruby in (/usr/local/bin:/usr/bin:/cygdrive/c/Perl/site/bin:/cygdrive/c/Perl/bin:/cygdrive/c/WINDOWS/system32:/cygdrive/c/WINDOWS:/cygdrive/c/WINDOWS/System32/Wbem:/cygdrive/c/WINDOWS/System32/WindowsPowerShell/v1.0:/cygdrive/c/Program Files/1E/NomadBranch:/cygdrive/c/Program Files (x86)/Microsoft Application Virtualization Client:/cygdrive/c/Program Files (x86)/Java/jre7/bin:/cygdrive/c/Program Files/McAfee/Solidcore/Tools/GatherInfo:/cygdrive/c/Program Files/McAfee/Solidcore/Tools/Scanalyzer:/cygdrive/c/Program Files/McAfee/Solidcore:/cygdrive/c/Program Files/McAfee/Solidcore/Tools/ScGetCerts:/cygdrive/c/Program Files/McAfee/Tools/GatherInfo:/cygdrive/c/Program Files/McAfee/Tools/Scanalyzer:/cygdrive/c/Program Files/McAfee:/cygdrive/c/Program Files/McAfee/Tools/ScGetCerts:/cygdrive/c/Program Files/apache-maven-3.3.9/bin:/cygdrive/c/Program Files/Amazon/AWSCLI:/cygdrive/c/Program Files/Git/cmd:/cygdrive/c/Program Files/apache-maven-3.3.9/bin:/cygdrive/c/opscode/chefdk/bin:/home/JBE624/.chefdk/gem/ruby/2.0.0/bin:/c/opscode/chefdk/embedded/bin:/home/JBE624/.chefdk/gem/ruby/2.0.0/bin:/c/opscode/chefdk/embedded/bin)\n</code></pre>\n\n<p>But when I am trying to chef it is showing as below can anyone help</p>\n\n<pre><code>$ chef\nC:\\opscode\\chefdk\\embedded\\bin\\ruby.exe: No such file or directory -- /cygdrive/c/opscode/chefdk/bin/chef (LoadError)\n</code></pre>\n\n<p>I also tried below</p>\n\n<pre><code> $ echo 'export PATH=\"/opt/chefdk/embedded/bin:$PATH\"' &gt;&gt; ~/.bash_profile &amp;&amp; source ~/.bash_profile\n</code></pre>\n\n<p>C:\\opscode\\chefdk\\embedded\\bin\\ruby.exe: No such file or directory -- /cygdrive/c/opscode/chefdk/bin/chef (LoadError)</p>\n\n<p>followed below links</p>\n\n<p><a href=\"https://docs.chef.io/install_dk.html\" rel=\"nofollow noreferrer\">https://docs.chef.io/install_dk.html</a></p>\n\n<p>Can anyone help me to solve the above error. Help will be appreciated.</p>\n"}, {"tags": ["ruby", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478165079, "post_id": 40397030, "comment_id": 68045748, "body": "seem to be getting <code>undefined method map for &quot;125894&quot;:String</code>"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478167336, "post_id": 40397030, "comment_id": 68047215, "body": "any ideas on this one?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478170805, "post_id": 40397030, "comment_id": 68049490, "body": "Ah, right... it looks like the code is designed to handle value being an array... the edit I&#39;ve made to the answer should fix it."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478174589, "post_id": 40397030, "comment_id": 68051854, "body": "Thank you for your help again, much appreciated"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1478170768, "last_edit_date": 1478170768, "creation_date": 1478162566, "answer_id": 40397030, "question_id": 40386689, "link": "https://stackoverflow.com/questions/40386689/do-not-uri-encode-when-using-httparty/40397030#40397030", "title": "Do not URI encode when using httparty", "body": "<p>Make  your own wrapper for HTTParty and pass a proc to the normalizer that overrides the URI encoding.</p>\n\n<pre><code>app/config/intializers/rich_lewis_http.rb\n</code></pre>\n\n<p>.</p>\n\n<pre><code>class RichLewisHttp\n\n  include HTTParty\n\n  query_string_normalizer proc { |query|\n    query.map do |key, value|\n      [value].flatten.map {|v| \"#{key}=#{v}\"}.join('&amp;')\n    end.join('&amp;')\n  }\n\nend\n</code></pre>\n\n<p>Then you can do...</p>\n\n<pre><code>response = RichLewisHttp.get(url, query: query)\nresults = JSON.parse(response.body)\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 0, "accepted_answer_id": 40397030, "answer_count": 1, "score": 1, "last_activity_date": 1525613206, "creation_date": 1478109485, "last_edit_date": 1525613206, "question_id": 40386689, "link": "https://stackoverflow.com/questions/40386689/do-not-uri-encode-when-using-httparty", "title": "Do not URI encode when using httparty", "body": "<p>I have a request setup using httparty and would like to not have URI encoding take place. I have read that there is a class method available </p>\n\n<pre><code>query_string_normalizer proc { |query|\n  query.map do |key, value|\n    value.map {|v| \"#{key}=#{v}\"}\n  end.join('&amp;')\n}\n</code></pre>\n\n<p>But I  am unsure of how to use this in my current setup</p>\n\n<pre><code>url = 'https://url/here/report.json?'\nquery = { 'param1' =&gt; '125894',\n          'param2' =&gt; 'yesterday',\n          'param3' =&gt; 'about',\n          'param4' =&gt; 'client',\n          'parameters' =&gt; 'ns_ti:*',\n          'user' =&gt; ENV['USERNAME'],\n          'password' =&gt; ENV['PASSWORD']\n}\nresponse = HTTParty.get(url, query: query)\nresults = JSON.parse(response.body)\n</code></pre>\n\n<p>The issue here is that <code>parameters</code> gets encoded and gets sent as 'ns_ti%3A%2A' and I would like to avoid that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 5, "creation_date": 1478108141, "post_id": 40386213, "comment_id": 68024277, "body": "the option <code>method: :patch</code> is given as arg to the <code>lead_path</code> method, it should be passed to the <code>link_to</code> : <code>&lt;%= link_to loan_product, lead_path(@lead, lead: { loan_product: loan_product }), method: :patch %&gt; </code>"}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1478108252, "post_id": 40386213, "comment_id": 68024339, "body": "Ah, thank-you! That was a frustrating hour, ha."}], "answers": [{"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 3, "last_activity_date": 1478108679, "creation_date": 1478108679, "answer_id": 40386421, "question_id": 40386213, "link": "https://stackoverflow.com/questions/40386213/rails-5-cant-access-update-method-in-view/40386421#40386421", "title": "Rails 5: can&#39;t access update method in view", "body": "<p>As said in my comment:</p>\n\n<p>the option <code>method: :patch</code> is given as arg to the <code>lead_path</code> method, it should be passed to the <code>link_to</code> instead: </p>\n\n<pre><code>&lt;%= link_to loan_product, lead_path(...), method: :patch %&gt; \n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 40386421, "answer_count": 1, "score": 0, "last_activity_date": 1478108679, "creation_date": 1478107936, "question_id": 40386213, "link": "https://stackoverflow.com/questions/40386213/rails-5-cant-access-update-method-in-view", "title": "Rails 5: can&#39;t access update method in view", "body": "<p>I'm trying to update an attribute with a single button like so:</p>\n\n<pre><code>&lt;%= link_to loan_product, lead_path(@lead, lead: { loan_product: loan_product }, method: :patch) %&gt;\n</code></pre>\n\n<p>The params come through just fine, but <code>lead_path</code> only accesses the <code>show</code> method of the controller and not the <code>update</code> one <em>despite</em> the <code>method</code> being set to <em>either</em> <code>:patch</code> or <code>:put</code>, and because of that the attribute isn't updated. </p>\n\n<p>How can I point this <code>link_to</code> to the default <code>update</code> method in the controller? I'm just rocking default resources in <code>routes.rb</code>, i.e., <code>resources :leads</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "is_accepted": false, "score": 1, "last_activity_date": 1478107942, "creation_date": 1478107942, "answer_id": 40386219, "question_id": 40385998, "link": "https://stackoverflow.com/questions/40385998/static-scope-inside-has-many-in-rails-4/40386219#40386219", "title": "Static scope inside has_many in Rails 4", "body": "<p>Does this work? I haven't tested it, but the theory is that you're accessing the specific key name you want, rather than the last-known key name.</p>\n\n<pre><code>object_class_names.keys.each_with_index do |key_name, index|\n  has_many \"#{key_name}_objects\",\n           -&gt; { where(:var =&gt; object_class_names.keys[index]) },\n           :class_name =&gt; object_class_names[key_name]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 4008027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rQ5cb.jpg?s=128&g=1", "display_name": "Kobus Post", "link": "https://stackoverflow.com/users/4008027/kobus-post"}, "edited": false, "score": 0, "creation_date": 1478124172, "post_id": 40390373, "comment_id": 68032859, "body": "Yes, this works! Both this and ArtOfCode&#39;s answer work, although I think this solution is slightly more elegant. I have no clue though as to why. What is the difference between this loop and the one I used? I would say you&#39;d end up with the same problem, but for some reason this works, and my code doesn&#39;t. Ah well. Thanks! :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 144, "user_id": 4008027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rQ5cb.jpg?s=128&g=1", "display_name": "Kobus Post", "link": "https://stackoverflow.com/users/4008027/kobus-post"}, "edited": false, "score": 0, "creation_date": 1478124610, "post_id": 40390373, "comment_id": 68033040, "body": "@KobusPost I&#39;m falling asleep at the moment, typing from mobile, but I&#39;ll try to find a moment tomorrow to check and explain what was wrong with the one you had (I should confess - never had I used <code>for</code> loop in Ruby, not even once.. :))"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1478123272, "creation_date": 1478123272, "answer_id": 40390373, "question_id": 40385998, "link": "https://stackoverflow.com/questions/40385998/static-scope-inside-has-many-in-rails-4/40390373#40390373", "title": "Static scope inside has_many in Rails 4", "body": "<p>You might use <a href=\"https://ruby-doc.org/core-2.3.1/Hash.html#method-i-each_pair\" rel=\"nofollow noreferrer\">Hash#<code>each_pair</code></a> here:</p>\n\n<pre><code>object_class_names.each_pair do |key_name, klass|\n  has_many :\"#{key_name}_objects\", -&gt; { where(var: key_name) }, class_name: klass.to_s\nend\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 4008027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rQ5cb.jpg?s=128&g=1", "display_name": "Kobus Post", "link": "https://stackoverflow.com/users/4008027/kobus-post"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40390373, "answer_count": 2, "score": 2, "last_activity_date": 1478123272, "creation_date": 1478107233, "last_edit_date": 1478109930, "question_id": 40385998, "link": "https://stackoverflow.com/questions/40385998/static-scope-inside-has-many-in-rails-4", "title": "Static scope inside has_many in Rails 4", "body": "<p>I'm having the following issue. I want to set a certain amount of has_many relations in a model, with names taken from a passed array (or in this case, the keys of a hash). Like this:</p>\n\n<pre><code>object_class_names = {:foo =&gt; FooClass, :bar =&gt; BarClass}\n\nfor key_name in object_class_names.keys\n  has_many  \"#{key_name}_objects\".to_sym,\n            -&gt; {where(var: key_name)},\n            :class_name =&gt; object_class_names[key_name]\nend\n</code></pre>\n\n<p>This results in two has_many relations: <code>some_object.foo_objects</code> &amp; <code>some_object.bar_objects</code>. Both have a specific class_name and a specific scope, set in the where clause in the lambda. However, because the scope is a lambda it gets the key_name in the where clause dynamically. This is the last known key_name variable, which is the last one in the loop, in this case 'bar'. So both <code>foo_objects</code> and <code>bar_objects</code> return a set of objects scoped with <code>where(var: \"bar\")</code>. </p>\n\n<p>Usually the lambda makes a great way to pass in dynamic scopes in has_many relations, but in this case I don't really need it. Is it possible to set a static scope inside a has_many relation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1478117528, "post_id": 40386041, "comment_id": 68029518, "body": "I have these before actions: before_action :set_post, only: [:show, :edit, :update, :destroy]   before_action :authenticate_user!, only: [:edit, :update, :destroy, :new, :create]  The page I am attempting to open is currently blank. I just want the basic, blank page to open."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1478164272, "post_id": 40386041, "comment_id": 68045303, "body": "In the routes is <code>get &quot;posts&#47;local&quot; =&gt; &quot;posts#local&quot;</code> above where you presumably have <code>resources :posts</code>?  If not I think it&#39;s considering it as a call to <code>posts#show</code> with an id of local.  Which would then try to set the post hence the error"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 0, "last_activity_date": 1478107378, "creation_date": 1478107378, "answer_id": 40386041, "question_id": 40385914, "link": "https://stackoverflow.com/questions/40385914/new-page-not-loading-activerecordrecordnotfound/40386041#40386041", "title": "New page not loading - ActiveRecord::RecordNotFound", "body": "<p>I'm assuming you have <code>before_action</code> in your controller</p>\n\n<p>You want to ensure that's not called for the local action</p>\n\n<pre><code>before_action :set_post, except: [:local]\n</code></pre>\n\n<p>or if it's only used in show</p>\n\n<pre><code>before_action :set_post, only: [:show]\n</code></pre>\n\n<p>You can pass either except or only arrays of the action names as symbols.</p>\n"}, {"comments": [{"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 0, "creation_date": 1478117465, "post_id": 40386133, "comment_id": 68029485, "body": "Right now, I want no content on the page. I just want a blank page to open. I have to before actions:   before_action :set_post, only: [:show, :edit, :update, :destroy]   before_action :authenticate_user!, only: [:edit, :update, :destroy, :new, :create]  I don&#39;t think (?) either of them should impact the page as it&#39;s blank. Not sure what to do."}], "tags": [], "owner": {"reputation": 101, "user_id": 7043377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qLhv7.jpg?s=128&g=1", "display_name": "Thomas Vanderstraeten", "link": "https://stackoverflow.com/users/7043377/thomas-vanderstraeten"}, "is_accepted": false, "score": 0, "last_activity_date": 1478107690, "creation_date": 1478107690, "answer_id": 40386133, "question_id": 40385914, "link": "https://stackoverflow.com/questions/40385914/new-page-not-loading-activerecordrecordnotfound/40386133#40386133", "title": "New page not loading - ActiveRecord::RecordNotFound", "body": "<p>The problem originates from the fact that you're not passing any id in the params to the controller. Hence your method set_post cannot retrieve any post and returns the ActiveRecord error.</p>\n\n<p>So you've got 2 options:</p>\n\n<ul>\n<li>Either you want to use set_post and need to specify an :id param in your routes</li>\n<li>Or you avoid calling set_post by adapting your before_action filter (as per the answer of j-dexx)</li>\n</ul>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478107690, "creation_date": 1478106954, "question_id": 40385914, "link": "https://stackoverflow.com/questions/40385914/new-page-not-loading-activerecordrecordnotfound", "title": "New page not loading - ActiveRecord::RecordNotFound", "body": "<p>This strikes me as pretty simple, which is why it's bugging me that I can't figure it out. I am creating a basic news app in rails. I have a \"Posts\" controller that controls the content for my basic pages. I want to have a page with local news. I went into the posts controller and made a new action called \"local\"</p>\n\n<pre><code>def local\n\nend \n</code></pre>\n\n<p>I then went into my routes.rb file and made a route for the page. </p>\n\n<pre><code>get \"posts/local\" =&gt; \"posts#local\"\n</code></pre>\n\n<p>I then created a local.html.erb file and placed it in my post views. </p>\n\n<p>When I try to click a link with the posts_local_path, I get this: </p>\n\n<pre><code>ActiveRecord::RecordNotFound\n\nExtracted source (around line #74):\n72\n73\n74\n75\n76\n77\n\n# Use callbacks to share common setup or constraints between actions.\ndef set_post\n  @post = Post.friendly.find(params[:id])\nend\n\n# Never trust parameters from the scary internet, only allow the white list through.\n</code></pre>\n\n<p>I don't understand. This is not involved in any way with the page I am trying to open. I'm not using that part of the controller. I'm stuck. Can someone help me understand what I'm doing wrong? Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rails-activerecord", "virtual-attribute"], "answers": [{"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 2, "last_activity_date": 1478106186, "creation_date": 1478106186, "answer_id": 40385658, "question_id": 40385536, "link": "https://stackoverflow.com/questions/40385536/sum-or-group-virtual-attributes-in-ruby-on-rails/40385658#40385658", "title": "sum() or group() virtual attributes in ruby on rails", "body": "<p>This can be achieved by <code>Enumerable#reduce</code> method:</p>\n\n<pre><code>@surfaces.reduce(0){ |sum, surface| sum + surface.area }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1478254856, "post_id": 40386622, "comment_id": 68089036, "body": "Thanks for your reply! Your solution is great but I&#39;m still corious if there is any way to make the virtual <code>:area</code> attribute as useable as the real <code>:width</code> or <code>:length</code> attributes. So I can do <code>.sum(:area)</code> or <code>.group(:area)</code> just as I would do it with <code>:width</code>. <code>width * height</code> was just a simple examlpe it should represent any calculation or even more complex function for general purpose."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1478416119, "post_id": 40386622, "comment_id": 68139847, "body": "Sorry but ActiveRecord isn&#39;t smart enough to translate arbitrary Ruby code to SQL."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1478109258, "creation_date": 1478109258, "answer_id": 40386622, "question_id": 40385536, "link": "https://stackoverflow.com/questions/40385536/sum-or-group-virtual-attributes-in-ruby-on-rails/40386622#40386622", "title": "sum() or group() virtual attributes in ruby on rails", "body": "<p><code>sum</code> will quite happily accept an SQL expression instead of just a column name so all you need to do is translate your <code>sum</code> method into SQL:</p>\n\n<pre><code>@surfaces.sum('width * height')\n@surfaces.sum('surface.width * surface.height') # If you think other tables might be involved.\n</code></pre>\n\n<p>Also, class methods on your models are mixed into relations (since scopes and class methods are really the same thing) so you could add a class method to go with your instance method:</p>\n\n<pre><code>class Surface &lt; ActiveRecord::Base\n  def self.area\n    sum('surface.width * surface.height')\n  end\n  def area\n     self.width * self.length\n  end\nend\n</code></pre>\n\n<p>and say:</p>\n\n<pre><code>@surfaces.area\n</code></pre>\n\n<p>You're usually better off letting the database do the heavy lifting with your data, that's what they're for and what they're good at.</p>\n"}], "owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 40386622, "answer_count": 2, "score": 2, "last_activity_date": 1478109265, "creation_date": 1478105803, "last_edit_date": 1478109265, "question_id": 40385536, "link": "https://stackoverflow.com/questions/40385536/sum-or-group-virtual-attributes-in-ruby-on-rails", "title": "sum() or group() virtual attributes in ruby on rails", "body": "<p>let's say I have a model like this:</p>\n\n<pre><code>class Surface &lt; ActiveRecord::Base\n  attr_accessible :width, :length\n\n  def area\n     self.width * self.length\n  end\nend\n</code></pre>\n\n<p>Where <code>@surface.area</code> returns the area of a surface. Now, lets say I have many surfaces called <code>@surfaces</code> and I want to sum all areas. How do I do this?</p>\n\n<p>My favorite solution would look like this:</p>\n\n<pre><code>@surfaces.sum(:area)\n</code></pre>\n\n<p>But it does not work. So how can I call <code>.sum()</code> or <code>.group()</code> or any similar functions on a virtual attributes like this in rails? I would like to avoid <code>.each do |surface|</code> calls.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "docker", "dockerfile"], "comments": [{"owner": {"reputation": 26372, "user_id": 5867722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VQ1v.jpg?s=128&g=1", "display_name": "Farhad Farahi", "link": "https://stackoverflow.com/users/5867722/farhad-farahi"}, "edited": false, "score": 0, "creation_date": 1478106230, "post_id": 40385520, "comment_id": 68023137, "body": "Are you using a caching repository? or a proxy server ?"}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1478144107, "post_id": 40385662, "comment_id": 68038082, "body": "Currently I think not using proxy. It just an aws instance. and I deploy it by elastic beantalk. How can I fix that. Could you  intruct more detail"}, {"owner": {"reputation": 26372, "user_id": 5867722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VQ1v.jpg?s=128&g=1", "display_name": "Farhad Farahi", "link": "https://stackoverflow.com/users/5867722/farhad-farahi"}, "reply_to_user": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1478159771, "post_id": 40385662, "comment_id": 68043086, "body": "First try to pull another image like <code>docker pull debian:jessie</code> , to see if you still have the issue."}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1478192364, "post_id": 40385662, "comment_id": 68064677, "body": "It still bug: Tag jessie not found in repository docker.io/library/debian. I try another instance it work fine. Dont know what happen, so crazy =]"}, {"owner": {"reputation": 26372, "user_id": 5867722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VQ1v.jpg?s=128&g=1", "display_name": "Farhad Farahi", "link": "https://stackoverflow.com/users/5867722/farhad-farahi"}, "reply_to_user": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1478192949, "post_id": 40385662, "comment_id": 68065013, "body": "I still think there is a connection problem for that exact instance."}, {"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 2, "creation_date": 1478195468, "post_id": 40385662, "comment_id": 68066330, "body": "Maybe, AWS instance connection have some problem. After restart It work fine now. Thanks a lot Farhad. Life is still beautiful, because of some kindly people like you ^^"}, {"owner": {"reputation": 26372, "user_id": 5867722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VQ1v.jpg?s=128&g=1", "display_name": "Farhad Farahi", "link": "https://stackoverflow.com/users/5867722/farhad-farahi"}, "reply_to_user": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1478195957, "post_id": 40385662, "comment_id": 68066599, "body": "Happy to help, Please accept the answer so we can help others too."}], "tags": [], "owner": {"reputation": 26372, "user_id": 5867722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VQ1v.jpg?s=128&g=1", "display_name": "Farhad Farahi", "link": "https://stackoverflow.com/users/5867722/farhad-farahi"}, "is_accepted": true, "score": 2, "last_activity_date": 1478196017, "last_edit_date": 1478196017, "creation_date": 1478106203, "answer_id": 40385662, "question_id": 40385520, "link": "https://stackoverflow.com/questions/40385520/tag-latest-not-found-in-repository-docker-io-library-package/40385662#40385662", "title": "Tag latest not found in repository docker.io/library/&lt;package&gt;", "body": "<p>You Probably have some kind of <code>connection issue</code>. I get that when I'm using free (unreliable) proxy servers.</p>\n\n<p>You can also try to restart your aws instance and check again.</p>\n"}], "owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 40385662, "answer_count": 1, "score": 0, "last_activity_date": 1482608224, "creation_date": 1478105748, "question_id": 40385520, "link": "https://stackoverflow.com/questions/40385520/tag-latest-not-found-in-repository-docker-io-library-package", "title": "Tag latest not found in repository docker.io/library/&lt;package&gt;", "body": "<p>when build a dockerfile.</p>\n\n<pre><code>FROM ruby:latest\nMAINTAINER ...\n</code></pre>\n\n<p>I receive some info:</p>\n\n<pre><code>Pulling repository docker.io/library/ruby\nbfe1e909440a: Download complete \n33a372e3ad95: Download complete \n1230b07f5c40: Download complete \n0ebd84a329dd: Download complete \n...\nPulling repository docker.io/library/ruby\nTag latest not found in repository docker.io/library/ruby\n</code></pre>\n\n<p>I try with run in console 'docker pull ruby' , it through the same error.</p>\n\n<p>Is it a problem of docker server?</p>\n"}, {"tags": ["ruby", "bundler", "unity-test-framework"], "comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478106363, "post_id": 40385493, "comment_id": 68023216, "body": "Also, is there a difference between <code>apt-get install bundler</code> and <code>gem install bundler</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478179634, "post_id": 40386416, "comment_id": 68055518, "body": "Thanks for the info. In conjunction with veldtmana&#39;s answer this helped me understand things (a little) more. I went with rbenv in WSL and its worked a lot more easily than my aborted attempt at using RVM!"}], "tags": [], "owner": {"reputation": 56, "user_id": 6147041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72659cc8a3206e6ac3b9106b472ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel", "link": "https://stackoverflow.com/users/6147041/rachel"}, "is_accepted": true, "score": 3, "last_activity_date": 1478108649, "creation_date": 1478108649, "answer_id": 40386416, "question_id": 40385493, "link": "https://stackoverflow.com/questions/40385493/how-to-run-bundle-install-as-normal-user/40386416#40386416", "title": "How to run bundle install as normal user", "body": "<p>I've been working with Ruby only a few weeks now. I'll say, I know where you are. I am not about to help much but will say, to your last question in the comments, that my understanding is that the two commands are different. </p>\n\n<p>My understanding of a short answer.. One can have diff versions of Ruby they need to work with (legacy projects, etc) and not every version of Ruby can run every version of a given gem. For this reason, one can use rbenv or rvm to help manage the art of setting up a project with a particular version of ruby and then installing the needed gems. </p>\n\n<p>I've been working with rvm on my mac and rbenv in linux and find them both similar enough for the simple stuff I've been doing. Installing rbenv on linux proved slightly easier. Once set up properly, sudo is no longer needed to install gems - which is preferred. I would recommend trying one of these and installing per their website instructions. Things should go smoother once set up. </p>\n"}, {"comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478179528, "post_id": 40389480, "comment_id": 68055451, "body": "Thanks. I tried RVM first but it was hopelessly complicated FWIW and I couldn&#39;t get it to work right (I think my previously root installed vbundler was still being used) so I uninstalled everything (past ruby install &amp; bundler included) then went with rbenv. Aside from making sure I used <code>.bashrc</code> where the installation guide mentions <code>.bash_profile</code>, this has worked like a dream. (I also added <code>rbenv local 2.3.1</code> to the .bashrc so that ruby would already be selected when I open bash)."}], "tags": [], "owner": {"reputation": 166, "user_id": 7040027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37407cfccbfc6c2c6370a74c41fec074?s=128&d=identicon&r=PG", "display_name": "veldtmana", "link": "https://stackoverflow.com/users/7040027/veldtmana"}, "is_accepted": false, "score": 2, "last_activity_date": 1478119585, "creation_date": 1478119585, "answer_id": 40389480, "question_id": 40385493, "link": "https://stackoverflow.com/questions/40385493/how-to-run-bundle-install-as-normal-user/40389480#40389480", "title": "How to run bundle install as normal user", "body": "<p>Try running:</p>\n\n<pre><code>gem install bundler\nbundle install\n</code></pre>\n\n<p>I will try to explain how the ruby ecosystem works:</p>\n\n<p>Bundler is a gem - a module - that is installed on top of ruby. Gems are installed using </p>\n\n<pre><code> gem install &lt;gem name&gt;\n</code></pre>\n\n<p>I would recommend you look at installing a ruby version manager before doing anything else. the two main candidates are RVM and rbenv.</p>\n\n<p>I find RVM is the simpler option for the beginner, but it eats up more space on your hard drive.</p>\n\n<ul>\n<li>check out how to install rvm at <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">https://rvm.io/</a></li>\n<li>alternatively look at rbenv at <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">https://github.com/rbenv/rbenv</a></li>\n</ul>\n\n<p>after you have installed ruby you can test that it is installed correctly by calling <code>ruby -v</code> from the command line.</p>\n\n<p>After that you can install bundler by calling <code>gem install bundler</code></p>\n\n<p>Once the gem is installed you should be able to run bundler, however if you are using rbenv you might need to run rehash first</p>\n\n<p>I hope that explanation makes sense - please shout if you have questions.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 820620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGUXi.jpg?s=128&g=1", "display_name": "hartmut", "link": "https://stackoverflow.com/users/820620/hartmut"}, "is_accepted": false, "score": 0, "last_activity_date": 1615399923, "creation_date": 1615399923, "answer_id": 66570536, "question_id": 40385493, "link": "https://stackoverflow.com/questions/40385493/how-to-run-bundle-install-as-normal-user/66570536#66570536", "title": "How to run bundle install as normal user", "body": "<p>If you - for some reason - stuck with a system installation of ruby,\nthis does the job:</p>\n<pre><code>export GEM_HOME=&quot;$(ruby -e 'puts Gem.user_dir')&quot;\nexport PATH=&quot;$GEM_HOME/bin:$PATH&quot;\n</code></pre>\n<p>found it elsewhere: <a href=\"https://guilhermesimoes.github.io/blog/using-bundler-with-system-ruby\" rel=\"nofollow noreferrer\">https://guilhermesimoes.github.io/blog/using-bundler-with-system-ruby</a></p>\n"}], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3386, "favorite_count": 0, "accepted_answer_id": 40386416, "answer_count": 3, "score": 7, "last_activity_date": 1615399923, "creation_date": 1478105665, "last_edit_date": 1478179705, "question_id": 40385493, "link": "https://stackoverflow.com/questions/40385493/how-to-run-bundle-install-as-normal-user", "title": "How to run bundle install as normal user", "body": "<p>I am attempting to use <code>bundle install</code>. I am not a Ruby user - this is my first real foray into even running rake. I'm simply trying to user some packages from ThrowtheSwitch.org that use Rake and so on.</p>\n\n<p>I initially installed ruby several days ago using:</p>\n\n<pre><code>sudo apt-get install ruby-full\n</code></pre>\n\n<p>This allowed me to use rake with Unity testing framework. Now I'd like to use CMock. the instructions for using CMock say to <code>cd</code> into the directory then</p>\n\n<pre><code>$ bundle install\n$ bundle exec rake\n</code></pre>\n\n<p>So I install bundler using:</p>\n\n<pre><code>$ sudo apt-get install bundler\n</code></pre>\n\n<p>But then running the <code>bundle install</code> continuously asks me for my password. So I try:</p>\n\n<pre><code>$ gem install bundler\n</code></pre>\n\n<p>Which fails for write permissions on /var/lib/gems/1.9.1. So I try:</p>\n\n<pre><code>$ sudo gem install bundler\n</code></pre>\n\n<p>which installs OK so I try the <code>bundle install</code> again. But still get continuously asked for my password. So I try:</p>\n\n<pre><code>$ sudo bundle install\n</code></pre>\n\n<p>And get a warning that I should not run bundler as root:</p>\n\n<blockquote>\n  <p>Don't run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this machine.</p>\n</blockquote>\n\n<p>How can I install this properly so that I can run it as expected?</p>\n\n<p>Note: I have seen that there are several other questions on this topic, none of which I understood the answers to so let me underline that I am not a ruby (or even web stack) dev - I need this in layman's terms as much as possible.</p>\n\n<p>Note also: I did see several mentions of RVM and rbenv. I'm not sure if they were incidental to those questions in particular or if one or both is required. I do not currently have either. Am about to research exactly what they are now.</p>\n\n<p>Note the third: My platform is WSL (so Ubuntu, kind of).</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1478105407, "post_id": 40385382, "comment_id": 68022608, "body": "unclear what you&#39;re asking"}, {"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 0, "creation_date": 1478108125, "post_id": 40385382, "comment_id": 68024264, "body": "please provide more specifics and maybe even some code"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478105362, "creation_date": 1478105362, "question_id": 40385382, "link": "https://stackoverflow.com/questions/40385382/ruby-get-array-details-and-modify-it-from-running-process", "title": "ruby get array details and modify it from running process", "body": "<p>I have ruby script running which has array and hash variable values. Is there any way to get the array details of the running ruby script process and change its value without killing the current running process?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "twitter-bootstrap", "turbolinks"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": false, "score": 8, "last_activity_date": 1478105361, "creation_date": 1478105361, "answer_id": 40385381, "question_id": 40385030, "link": "https://stackoverflow.com/questions/40385030/bootstrap-tooltip-behavior-not-occurring-all-the-time-likely-due-to-turbolinks/40385381#40385381", "title": "Bootstrap Tooltip Behavior Not Occurring All The Time, Likely Due to Turbolinks", "body": "<p>Appears I got it to work.  Within <code>assets/javascripts/application.js</code> I changed this:</p>\n\n<pre><code>$(document).ready(function() {\n  $('[data-toggle=\"tooltip\"]').tooltip();\n});\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>$(document).on('turbolinks:load', function() {\n  $('[data-toggle=\"tooltip\"]').tooltip();\n})\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1240, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478105361, "creation_date": 1478104234, "question_id": 40385030, "link": "https://stackoverflow.com/questions/40385030/bootstrap-tooltip-behavior-not-occurring-all-the-time-likely-due-to-turbolinks", "title": "Bootstrap Tooltip Behavior Not Occurring All The Time, Likely Due to Turbolinks", "body": "<p>I am using Rails 4.  I pulled in only the Bootstrap javascript and css for tooltips via Bootstrap's <a href=\"http://getbootstrap.com/customize/\" rel=\"nofollow noreferrer\">customize tool</a>.  </p>\n\n<p>I notice that when I make a <em>direct</em> request to a page (typing in url and pressing enter) the tooltip javascript effect works just fine.  However: if I navigate to the page via clicking a link, or click the back button to go to the page with the tooltip: the tooltip effect no longer works. </p>\n\n<p>I am confident turbolinks is messing this up, but after many attempts I have not been successful in fixing the issue.  Removing turbolinks from the app is not an option.</p>\n\n<p>I call the tooltip like so:</p>\n\n<pre><code>&lt;a href=\"#\" data-toggle=\"tooltip\" title=\"Hooray for tooltips!\"&gt;&lt;i class=\"fa fa-question-circle\" aria-hidden=\"true\"&gt;&lt;/i&gt;&lt;/a&gt;\n</code></pre>\n\n<p>Here is the relevant js files:</p>\n\n<p><strong>assets/javascripts/application.js</strong></p>\n\n<pre><code>//= require jquery\n//= require jquery.turbolinks\n//= require jquery_ujs\n//= require jquery.ui.all\n//= require bootstrap_tooltip\n//= require_self\n//= require turbolinks\n\n$(document).ready(function() {\n  $('[data-toggle=\"tooltip\"]').tooltip();\n});\n</code></pre>\n\n<hr>\n\n<p><strong>assets/javascripts/bootstrap_tooltip.js</strong> file.</p>\n\n<pre><code>/*!\n * Bootstrap v3.3.7 (http://getbootstrap.com)\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n\n/*!\n * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=63028410c15050ebe29d01d3064c7189)\n * Config saved to config.json and https://gist.github.com/63028410c15050ebe29d01d3064c7189\n */\n\n\n\n\n    if (typeof jQuery === 'undefined') {\n        throw new Error('Bootstrap\\'s JavaScript requires jQuery')\n    }\n    +function ($) {\n        'use strict';\n        var version = $.fn.jquery.split(' ')[0].split('.')\n        if ((version[0] &lt; 2 &amp;&amp; version[1] &lt; 9) || (version[0] == 1 &amp;&amp; version[1] == 9 &amp;&amp; version[2] &lt; 1) || (version[0] &gt; 3)) {\n            throw new Error('Bootstrap\\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4')\n        }\n    }(jQuery);\n\n    /* ========================================================================\n     * Bootstrap: tooltip.js v3.3.7\n     * http://getbootstrap.com/javascript/#tooltip\n     * Inspired by the original jQuery.tipsy by Jason Frame\n     * ========================================================================\n     * Copyright 2011-2016 Twitter, Inc.\n     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n     * ======================================================================== */\n\n\n    +function ($) {\n        'use strict';\n\n        // TOOLTIP PUBLIC CLASS DEFINITION\n        // ===============================\n\n        var Tooltip = function (element, options) {\n            this.type       = null\n            this.options    = null\n            this.enabled    = null\n            this.timeout    = null\n            this.hoverState = null\n            this.$element   = null\n            this.inState    = null\n\n            this.init('tooltip', element, options)\n        }\n\n        Tooltip.VERSION  = '3.3.7'\n\n        Tooltip.TRANSITION_DURATION = 150\n\n        Tooltip.DEFAULTS = {\n            animation: true,\n            placement: 'top',\n            selector: false,\n            template: '&lt;div class=\"tooltip\" role=\"tooltip\"&gt;&lt;div class=\"tooltip-arrow\"&gt;&lt;/div&gt;&lt;div class=\"tooltip-inner\"&gt;&lt;/div&gt;&lt;/div&gt;',\n            trigger: 'hover focus',\n            title: '',\n            delay: 0,\n            html: false,\n            container: false,\n            viewport: {\n                selector: 'body',\n                padding: 0\n            }\n        }\n\n        Tooltip.prototype.init = function (type, element, options) {\n            this.enabled   = true\n            this.type      = type\n            this.$element  = $(element)\n            this.options   = this.getOptions(options)\n            this.$viewport = this.options.viewport &amp;&amp; $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : (this.options.viewport.selector || this.options.viewport))\n            this.inState   = { click: false, hover: false, focus: false }\n\n            if (this.$element[0] instanceof document.constructor &amp;&amp; !this.options.selector) {\n                throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')\n            }\n\n            var triggers = this.options.trigger.split(' ')\n\n            for (var i = triggers.length; i--;) {\n                var trigger = triggers[i]\n\n                if (trigger == 'click') {\n                    this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n                } else if (trigger != 'manual') {\n                    var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\n                    var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\n\n                    this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n                    this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n                }\n            }\n\n            this.options.selector ?\n                (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n                this.fixTitle()\n        }\n\n        Tooltip.prototype.getDefaults = function () {\n            return Tooltip.DEFAULTS\n        }\n\n        Tooltip.prototype.getOptions = function (options) {\n            options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n            if (options.delay &amp;&amp; typeof options.delay == 'number') {\n                options.delay = {\n                    show: options.delay,\n                    hide: options.delay\n                }\n            }\n\n            return options\n        }\n\n        Tooltip.prototype.getDelegateOptions = function () {\n            var options  = {}\n            var defaults = this.getDefaults()\n\n            this._options &amp;&amp; $.each(this._options, function (key, value) {\n                if (defaults[key] != value) options[key] = value\n            })\n\n            return options\n        }\n\n        Tooltip.prototype.enter = function (obj) {\n            var self = obj instanceof this.constructor ?\n                obj : $(obj.currentTarget).data('bs.' + this.type)\n\n            if (!self) {\n                self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n                $(obj.currentTarget).data('bs.' + this.type, self)\n            }\n\n            if (obj instanceof $.Event) {\n                self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true\n            }\n\n            if (self.tip().hasClass('in') || self.hoverState == 'in') {\n                self.hoverState = 'in'\n                return\n            }\n\n            clearTimeout(self.timeout)\n\n            self.hoverState = 'in'\n\n            if (!self.options.delay || !self.options.delay.show) return self.show()\n\n            self.timeout = setTimeout(function () {\n                if (self.hoverState == 'in') self.show()\n            }, self.options.delay.show)\n        }\n\n        Tooltip.prototype.isInStateTrue = function () {\n            for (var key in this.inState) {\n                if (this.inState[key]) return true\n            }\n\n            return false\n        }\n\n        Tooltip.prototype.leave = function (obj) {\n            var self = obj instanceof this.constructor ?\n                obj : $(obj.currentTarget).data('bs.' + this.type)\n\n            if (!self) {\n                self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n                $(obj.currentTarget).data('bs.' + this.type, self)\n            }\n\n            if (obj instanceof $.Event) {\n                self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false\n            }\n\n            if (self.isInStateTrue()) return\n\n            clearTimeout(self.timeout)\n\n            self.hoverState = 'out'\n\n            if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n            self.timeout = setTimeout(function () {\n                if (self.hoverState == 'out') self.hide()\n            }, self.options.delay.hide)\n        }\n\n        Tooltip.prototype.show = function () {\n            var e = $.Event('show.bs.' + this.type)\n\n            if (this.hasContent() &amp;&amp; this.enabled) {\n                this.$element.trigger(e)\n\n                var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])\n                if (e.isDefaultPrevented() || !inDom) return\n                var that = this\n\n                var $tip = this.tip()\n\n                var tipId = this.getUID(this.type)\n\n                this.setContent()\n                $tip.attr('id', tipId)\n                this.$element.attr('aria-describedby', tipId)\n\n                if (this.options.animation) $tip.addClass('fade')\n\n                var placement = typeof this.options.placement == 'function' ?\n                    this.options.placement.call(this, $tip[0], this.$element[0]) :\n                    this.options.placement\n\n                var autoToken = /\\s?auto?\\s?/i\n                var autoPlace = autoToken.test(placement)\n                if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n                $tip\n                    .detach()\n                    .css({ top: 0, left: 0, display: 'block' })\n                    .addClass(placement)\n                    .data('bs.' + this.type, this)\n\n                this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n                this.$element.trigger('inserted.bs.' + this.type)\n\n                var pos          = this.getPosition()\n                var actualWidth  = $tip[0].offsetWidth\n                var actualHeight = $tip[0].offsetHeight\n\n                if (autoPlace) {\n                    var orgPlacement = placement\n                    var viewportDim = this.getPosition(this.$viewport)\n\n                    placement = placement == 'bottom' &amp;&amp; pos.bottom + actualHeight &gt; viewportDim.bottom ? 'top'    :\n                        placement == 'top'    &amp;&amp; pos.top    - actualHeight &lt; viewportDim.top    ? 'bottom' :\n                            placement == 'right'  &amp;&amp; pos.right  + actualWidth  &gt; viewportDim.width  ? 'left'   :\n                                placement == 'left'   &amp;&amp; pos.left   - actualWidth  &lt; viewportDim.left   ? 'right'  :\n                                    placement\n\n                    $tip\n                        .removeClass(orgPlacement)\n                        .addClass(placement)\n                }\n\n                var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n                this.applyPlacement(calculatedOffset, placement)\n\n                var complete = function () {\n                    var prevHoverState = that.hoverState\n                    that.$element.trigger('shown.bs.' + that.type)\n                    that.hoverState = null\n\n                    if (prevHoverState == 'out') that.leave(that)\n                }\n\n                $.support.transition &amp;&amp; this.$tip.hasClass('fade') ?\n                    $tip\n                        .one('bsTransitionEnd', complete)\n                        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n                    complete()\n            }\n        }\n\n        Tooltip.prototype.applyPlacement = function (offset, placement) {\n            var $tip   = this.tip()\n            var width  = $tip[0].offsetWidth\n            var height = $tip[0].offsetHeight\n\n            // manually read margins because getBoundingClientRect includes difference\n            var marginTop = parseInt($tip.css('margin-top'), 10)\n            var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n            // we must check for NaN for ie 8/9\n            if (isNaN(marginTop))  marginTop  = 0\n            if (isNaN(marginLeft)) marginLeft = 0\n\n            offset.top  += marginTop\n            offset.left += marginLeft\n\n            // $.fn.offset doesn't round pixel values\n            // so we use setOffset directly with our own function B-0\n            $.offset.setOffset($tip[0], $.extend({\n                using: function (props) {\n                    $tip.css({\n                        top: Math.round(props.top),\n                        left: Math.round(props.left)\n                    })\n                }\n            }, offset), 0)\n\n            $tip.addClass('in')\n\n            // check to see if placing tip in new offset caused the tip to resize itself\n            var actualWidth  = $tip[0].offsetWidth\n            var actualHeight = $tip[0].offsetHeight\n\n            if (placement == 'top' &amp;&amp; actualHeight != height) {\n                offset.top = offset.top + height - actualHeight\n            }\n\n            var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)\n\n            if (delta.left) offset.left += delta.left\n            else offset.top += delta.top\n\n            var isVertical          = /top|bottom/.test(placement)\n            var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight\n            var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'\n\n            $tip.offset(offset)\n            this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)\n        }\n\n        Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {\n            this.arrow()\n                .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')\n                .css(isVertical ? 'top' : 'left', '')\n        }\n\n        Tooltip.prototype.setContent = function () {\n            var $tip  = this.tip()\n            var title = this.getTitle()\n\n            $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n            $tip.removeClass('fade in top bottom left right')\n        }\n\n        Tooltip.prototype.hide = function (callback) {\n            var that = this\n            var $tip = $(this.$tip)\n            var e    = $.Event('hide.bs.' + this.type)\n\n            function complete() {\n                if (that.hoverState != 'in') $tip.detach()\n                if (that.$element) { // TODO: Check whether guarding this code with this `if` is really necessary.\n                    that.$element\n                        .removeAttr('aria-describedby')\n                        .trigger('hidden.bs.' + that.type)\n                }\n                callback &amp;&amp; callback()\n            }\n\n            this.$element.trigger(e)\n\n            if (e.isDefaultPrevented()) return\n\n            $tip.removeClass('in')\n\n            $.support.transition &amp;&amp; $tip.hasClass('fade') ?\n                $tip\n                    .one('bsTransitionEnd', complete)\n                    .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n                complete()\n\n            this.hoverState = null\n\n            return this\n        }\n\n        Tooltip.prototype.fixTitle = function () {\n            var $e = this.$element\n            if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {\n                $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n            }\n        }\n\n        Tooltip.prototype.hasContent = function () {\n            return this.getTitle()\n        }\n\n        Tooltip.prototype.getPosition = function ($element) {\n            $element   = $element || this.$element\n\n            var el     = $element[0]\n            var isBody = el.tagName == 'BODY'\n\n            var elRect    = el.getBoundingClientRect()\n            if (elRect.width == null) {\n                // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093\n                elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })\n            }\n            var isSvg = window.SVGElement &amp;&amp; el instanceof window.SVGElement\n            // Avoid using $.offset() on SVGs since it gives incorrect results in jQuery 3.\n            // See https://github.com/twbs/bootstrap/issues/20280\n            var elOffset  = isBody ? { top: 0, left: 0 } : (isSvg ? null : $element.offset())\n            var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }\n            var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null\n\n            return $.extend({}, elRect, scroll, outerDims, elOffset)\n        }\n\n        Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n            return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :\n                placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :\n                    placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n                        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }\n\n        }\n\n        Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {\n            var delta = { top: 0, left: 0 }\n            if (!this.$viewport) return delta\n\n            var viewportPadding = this.options.viewport &amp;&amp; this.options.viewport.padding || 0\n            var viewportDimensions = this.getPosition(this.$viewport)\n\n            if (/right|left/.test(placement)) {\n                var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll\n                var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight\n                if (topEdgeOffset &lt; viewportDimensions.top) { // top overflow\n                    delta.top = viewportDimensions.top - topEdgeOffset\n                } else if (bottomEdgeOffset &gt; viewportDimensions.top + viewportDimensions.height) { // bottom overflow\n                    delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset\n                }\n            } else {\n                var leftEdgeOffset  = pos.left - viewportPadding\n                var rightEdgeOffset = pos.left + viewportPadding + actualWidth\n                if (leftEdgeOffset &lt; viewportDimensions.left) { // left overflow\n                    delta.left = viewportDimensions.left - leftEdgeOffset\n                } else if (rightEdgeOffset &gt; viewportDimensions.right) { // right overflow\n                    delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset\n                }\n            }\n\n            return delta\n        }\n\n        Tooltip.prototype.getTitle = function () {\n            var title\n            var $e = this.$element\n            var o  = this.options\n\n            title = $e.attr('data-original-title')\n                || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n            return title\n        }\n\n        Tooltip.prototype.getUID = function (prefix) {\n            do prefix += ~~(Math.random() * 1000000)\n            while (document.getElementById(prefix))\n            return prefix\n        }\n\n        Tooltip.prototype.tip = function () {\n            if (!this.$tip) {\n                this.$tip = $(this.options.template)\n                if (this.$tip.length != 1) {\n                    throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!')\n                }\n            }\n            return this.$tip\n        }\n\n        Tooltip.prototype.arrow = function () {\n            return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))\n        }\n\n        Tooltip.prototype.enable = function () {\n            this.enabled = true\n        }\n\n        Tooltip.prototype.disable = function () {\n            this.enabled = false\n        }\n\n        Tooltip.prototype.toggleEnabled = function () {\n            this.enabled = !this.enabled\n        }\n\n        Tooltip.prototype.toggle = function (e) {\n            var self = this\n            if (e) {\n                self = $(e.currentTarget).data('bs.' + this.type)\n                if (!self) {\n                    self = new this.constructor(e.currentTarget, this.getDelegateOptions())\n                    $(e.currentTarget).data('bs.' + this.type, self)\n                }\n            }\n\n            if (e) {\n                self.inState.click = !self.inState.click\n                if (self.isInStateTrue()) self.enter(self)\n                else self.leave(self)\n            } else {\n                self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n            }\n        }\n\n        Tooltip.prototype.destroy = function () {\n            var that = this\n            clearTimeout(this.timeout)\n            this.hide(function () {\n                that.$element.off('.' + that.type).removeData('bs.' + that.type)\n                if (that.$tip) {\n                    that.$tip.detach()\n                }\n                that.$tip = null\n                that.$arrow = null\n                that.$viewport = null\n                that.$element = null\n            })\n        }\n\n\n        // TOOLTIP PLUGIN DEFINITION\n        // =========================\n\n        function Plugin(option) {\n            return this.each(function () {\n                var $this   = $(this)\n                var data    = $this.data('bs.tooltip')\n                var options = typeof option == 'object' &amp;&amp; option\n\n                if (!data &amp;&amp; /destroy|hide/.test(option)) return\n                if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n                if (typeof option == 'string') data[option]()\n            })\n        }\n\n        var old = $.fn.tooltip\n\n        $.fn.tooltip             = Plugin\n        $.fn.tooltip.Constructor = Tooltip\n\n\n        // TOOLTIP NO CONFLICT\n        // ===================\n\n        $.fn.tooltip.noConflict = function () {\n            $.fn.tooltip = old\n            return this\n        }\n\n    }(jQuery);\n</code></pre>\n"}, {"tags": ["android", "ruby", "adb", "calabash", "calabash-android"], "comments": [{"owner": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1478106377, "post_id": 40384966, "comment_id": 68023225, "body": "Make sure your emulator is running <code>adbd</code> with <code>root</code> privileges - otherwise it won&#39;t be able to access the <code>&#47;data&#47;data&#47;</code> folder."}, {"owner": {"reputation": 267, "user_id": 3578133, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1434550637/picture?type=large", "display_name": "Jakub", "link": "https://stackoverflow.com/users/3578133/jakub"}, "reply_to_user": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1478106442, "post_id": 40384966, "comment_id": 68023271, "body": "I am using Genymotion emulator and it should be rooted by default, or am I wrong?"}, {"owner": {"reputation": 267, "user_id": 3578133, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1434550637/picture?type=large", "display_name": "Jakub", "link": "https://stackoverflow.com/users/3578133/jakub"}, "reply_to_user": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1478106543, "post_id": 40384966, "comment_id": 68023336, "body": "Also when I try manually push files to the emulated phone via cygwin by using adb push command, it works fine. But I need to do this inside the calabash test (some ruby file)"}, {"owner": {"reputation": 26831, "user_id": 1778421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIUgI.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/1778421/alex-p"}, "edited": false, "score": 0, "creation_date": 1478113436, "post_id": 40384966, "comment_id": 68027308, "body": "<code>pull</code> and <code>push</code> commands do have a fixed operand order - <code>push localpath remotepath</code> and <code>pull remotepath localpath</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 3640015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bZVy.png?s=128&g=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/3640015/amine"}, "is_accepted": false, "score": 0, "last_activity_date": 1478180823, "creation_date": 1478180823, "answer_id": 40403172, "question_id": 40384966, "link": "https://stackoverflow.com/questions/40384966/push-pull-files-in-calabash-android-tests/40403172#40403172", "title": "Push / Pull files in Calabash-Android tests", "body": "<p>I use this :</p>\n\n<p><strong>For Folder</strong></p>\n\n<p>system('adb -s x push Folder/subFolder /sdcard/Downloads/Folder')</p>\n\n<p>Where :</p>\n\n<ul>\n<li>Folder is inside the Current Active Directory where the command is launched</li>\n<li>x is the id of the device (use 'adb device' command),if there is one connected device then no need to specify it.</li>\n</ul>\n\n<p><strong>For File</strong></p>\n\n<p>system('adb push image.jpg /sdcard/Pictures')</p>\n\n<p>For Pull command just follow the same pattern.</p>\n"}], "owner": {"reputation": 267, "user_id": 3578133, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1434550637/picture?type=large", "display_name": "Jakub", "link": "https://stackoverflow.com/users/3578133/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478180823, "creation_date": 1478104038, "question_id": 40384966, "link": "https://stackoverflow.com/questions/40384966/push-pull-files-in-calabash-android-tests", "title": "Push / Pull files in Calabash-Android tests", "body": "<p>I want to push files from active directory (windows) to emulated android phone.\nMy active directory is where my calabash tests are and I want to push the files to something like /data/data/appName/files/ </p>\n\n<p>I tried various ways of doing this, I tried to escape paths, also win and bash forms, and so on... Am I missing something?</p>\n\n<pre><code>#causes adb: error: cannot stat No such file or directory\npull(\"/data/data/cz.getone.jkr_mb2.phone/files/\", \"\\%cd\\%\\\\calabash-tests\\\\data\\\\someFolder\\\\\")\n\n#causes adb: error: cannot create file/directory No such file or directory\npush(\"\\%cd\\%\\\\calabash-tests\\\\data\\\\someFolder\\\\\", \"/data/data/cz.getone.jkr_mb2.phone/files/\")\n\nsystem(\"#{default_device.adb_command} pull ./calabash-tests/data/sqlite/*.sqlite /data/data/cz.getone.jkr_mb2.phone/files\")\n\nsystem(\"#{default_device.adb_command} push ./calabash-tests/data/sqlite/*.sqlite /data/data/cz.getone.jkr_mb2.phone/files\")\n</code></pre>\n\n<p>From the errors it looks like when I am calling push/pull inside calabash tests, the cwd is root of emulated phone (/)... How to access also cwd on windows? Isnt pull/push method supposed to figure out which path is inside phone and which is not?</p>\n\n<p>This is how calabash pull method looks like inside... Idk how adb pull looks though</p>\n\n<pre><code>def pull(remote, local)\n  cmd = \"#{adb_command} pull #{remote} #{local}\"\n  raise \"Could not pull #{remote} to #{local}\" unless system(cmd)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope", "has-many-through", "has-scope"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1478105956, "post_id": 40384841, "comment_id": 68022958, "body": "BTW, <code>where.not(id: KeyRoomMapping.select(:key_id))</code> would use a subquery (<code>where id not in (select key_id ...)</code>) which should be faster than pulling all the distinct values out of the database and then sending back in with a separate query."}], "answers": [{"comments": [{"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1478103941, "post_id": 40384884, "comment_id": 68021727, "body": "Well i would like has_scope so that I can show All Keys first, then allow the user to click the link as a way to filter it down to Keys Without Rooms..."}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1478104080, "post_id": 40384884, "comment_id": 68021815, "body": "Is there a way to show All Keys to start, then allow Key.without_rooms to be a filtered via the link in the view?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1478104263, "post_id": 40384884, "comment_id": 68021931, "body": "@SurgePedroza I have edited the answer, even though I do not think it is the best you can get.."}, {"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 1, "creation_date": 1478104537, "post_id": 40384884, "comment_id": 68022080, "body": "This works, thanks! If you have any other suggestion feel free to share."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 1, "creation_date": 1478104646, "post_id": 40384884, "comment_id": 68022155, "body": "@SurgePedroza You&#39;re welcome! I just didn&#39;t read carefully the question from the first time, so nevermind the first part of the answer :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1478104718, "last_edit_date": 1478104718, "creation_date": 1478103759, "answer_id": 40384884, "question_id": 40384841, "link": "https://stackoverflow.com/questions/40384841/how-can-i-call-use-my-scope-in-my-view/40384884#40384884", "title": "How can I call/use my scope in my view", "body": "<p>Add a <code>boolean</code> option to <code>has_scope</code>, which you'll use while building the path:</p>\n\n<pre><code># controller\nhas_scope :without_rooms, type: :boolean\n\n# view\nlink_to \"Keys Without Rooms\", '/keys?without_rooms=true' # or keys_path(without_rooms: true)\n</code></pre>\n"}], "owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 1, "accepted_answer_id": 40384884, "answer_count": 1, "score": 1, "last_activity_date": 1478104718, "creation_date": 1478103640, "last_edit_date": 1478104151, "question_id": 40384841, "link": "https://stackoverflow.com/questions/40384841/how-can-i-call-use-my-scope-in-my-view", "title": "How can I call/use my scope in my view", "body": "<p>I am trying to use has_scope to filter all Keys that are not connected to a Room via my KeyRoomMapping Table. </p>\n\n<p>I've created the scope in my Keys model, but I don't know how to call the scope in my view. </p>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class Key &lt; ApplicationRecord  \n\n  has_many :key_room_mappings, foreign_key: :key_id, dependent: :destroy\n  has_many :rooms, through: :key_room_mappings\n\n  ###Is this the best way to find all Keys that are not connected to a room?\n  scope :without_rooms, -&gt; { where.not(id: KeyRoomMapping.distinct.pluck(:key_id)) }\n\nend\n\nclass KeyRoomMapping &lt; ApplicationRecord\n  belongs_to :room\n  belongs_to :key\n\nend\n\nclass Room &lt; ApplicationRecord\n  has_many :key_room_mappings, foreign_key: :room_id, dependent: :destroy\n  has_many :keys, through: :key_room_mappings\n\nend\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class KeysController &lt; ApplicationController\n\n  has_scope :without_rooms\n\n  def index\n    @keys = apply_scopes(Key).all\n  end\n\nend\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>###How can I use my scope to filter my list below, this is not working...\n&lt;%= link_to \"Keys Without Rooms\", {controller: 'keys', action: 'index', without_rooms: ''} %&gt;\n\n  &lt;% @keys.each do |key| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= key.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= key.copy %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "html-parsing"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1478104115, "post_id": 40384587, "comment_id": 68021840, "body": "It&#39;s a better option. <a href=\"http://stackoverflow.com/a/1732454/438992\">stackoverflow.com/a/1732454/438992</a>"}, {"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1478104259, "post_id": 40384587, "comment_id": 68021929, "body": "Why is it better though? I have tried installing it with no success. I get this error everytime I try to install it: ERROR:  While executing gem ... (Gem::FilePermissionError)     You don&#39;t have write permissions for the /Library/Ruby/Gems/2.0.0 directory."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1478106978, "post_id": 40384587, "comment_id": 68023617, "body": "YMMV, but this might help with installation: <a href=\"http://stackoverflow.com/questions/14607193/installing-gem-or-updating-rubygems-fails-with-permissions-error\" title=\"installing gem or updating rubygems fails with permissions error\">stackoverflow.com/questions/14607193/&hellip;</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478109951, "post_id": 40384587, "comment_id": 68025358, "body": "You should take the 3 seconds it takes to properly format and most importantly indent your code. Not only is it impolite to ask people for help when you are not even willing to spend the 3 seconds it takes to make your code readable, but in this specific case, the error will be immediately obvious, and you wouldn&#39;t even have had to ask the question in the first place."}, {"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "edited": false, "score": 0, "creation_date": 1478110749, "post_id": 40384587, "comment_id": 68025859, "body": "I don&#39;t understand how I&#39;ve formatted it incorrectly. It&#39;s formatted the same way that I have it in my original code."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1478110962, "post_id": 40384587, "comment_id": 68025971, "body": "It&#39;s better because parsing HTML is hard, and it&#39;s really easy to do it wrong."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "edited": false, "score": 0, "creation_date": 1478184524, "post_id": 40387851, "comment_id": 68059211, "body": "Thank you for answering my question. I appreciate the time you took to go through everything with me. If you believe I cannot achieve this with my own code I will certainly use Nokogiri. Thanks again."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1478113499, "creation_date": 1478113499, "answer_id": 40387851, "question_id": 40384587, "link": "https://stackoverflow.com/questions/40384587/creating-a-html-parser-in-ruby/40387851#40387851", "title": "Creating a HTML Parser in Ruby", "body": "<blockquote>\n  <p>I'm unsure what is causing the error and could use some guidance to fix the issue.</p>\n</blockquote>\n\n<p>Let's first apply some proper formatting to your code, to see more clearly what is going on:</p>\n\n<pre><code>puts 'Welcome to the HTML keyword highlighter!'\nputs 'Please Enter A Keyword: '\nkeyword = gets.chomp\ncan_edit = false \n\ninfile = File.new('desktop/code.html', 'r')\noutfile = File.new('Result.html', 'w')\n\ninfile.each {|i| \n  if i.include?('&lt;body&gt;')\n    can_edit = true\n  end\n\n  if i.include?('&lt;/body&gt;')\n    can_edit = false\n  end\n\n  if can_edit\n    keyword.gsub(keyword, %Q[&lt;span style=\"background-color: yellow; color: black\"&gt;#{keyword}&lt;/span&gt;])\n    outfile.write i\n  end\n\n  outfile.close\n  infile.close\n}\n</code></pre>\n\n<p>The error message says:</p>\n\n<pre><code>    part4_program.rb:16:in `each': closed stream (IOError)\n</code></pre>\n\n<p>So, what is happening is that you try to iterate using <code>each</code> over a closed file. And why is that? Well, now that the code is indented properly, we can easily see that you <code>close</code> both <code>infile</code> and <code>outfile</code> <em>inside</em> of the <code>each</code> iterator. This will lead to all sorts of problems: </p>\n\n<ul>\n<li>You close the file <em>while</em> <code>each</code> is still iterating over it. This will \"pull the rug out under <code>each</code>'s feet\", so to speak. How can it iterate over the file when the file is closed? You should be lucky that <code>each</code> detects this and you got a nice error message and a clean exit\u00a0\u2013 closing out the file out from under the iterator that is currently reading it, may have led to much subtler and harder to diagnose problems.</li>\n<li>Even if <code>each</code> <em>didn't</em> break because you closed the file out from unter it, you still call <code>close</code> <em>every</em> time you go through the iteration, but you can only <code>close</code> a file once, after that it is already closed and can't be closed again.</li>\n<li>And even <em>if</em> you could close files multiple times, you <code>write</code> to <code>outfile</code>, but you already <code>close</code>d it during the previous iteration. You can't write to a closed file.</li>\n</ul>\n\n<blockquote>\n  <p>I am also wondering if this program is heading in the right direction as an answer to the programming problem.</p>\n</blockquote>\n\n<p>Honestly, I don't even remotely understand what you are trying to do. But I am going to say \"No\", you are not heading in the right direction.</p>\n\n<p>Here are just a couple of simple ways to break your code:</p>\n\n<ul>\n<li>what if the keyword is <code>table</code>?</li>\n<li>what if <code>&lt;body&gt;</code> and <code>&lt;/body&gt;</code> are on the same line?</li>\n<li>what if the keyword appears on the line as <code>&lt;body&gt;</code> but before it?</li>\n<li>what if someone spells it <code>&lt;BODY&gt;</code> or <code>&lt;bOdY&gt;</code> instead?</li>\n<li>what about optional tags?</li>\n<li>what about Null End Tags?</li>\n<li>what if the keyword appears inside a comment?</li>\n<li>what if the keyword appears inside a tag?</li>\n<li>what if the keyword appears inside an attribute?</li>\n<li>what if the keyword appears inside a <code>&lt;script&gt;</code> element?</li>\n<li>what if the keyword appears inside a <code>&lt;style&gt;</code> element?</li>\n<li>what if the keyword appears inside a <code>&lt;![CDATA[</code> section?</li>\n</ul>\n\n<blockquote>\n  <p>I know Nokogiri is already available as a resource but I had hoped not to have to use it unless its thought to be a better option.</p>\n</blockquote>\n\n<p>HTML is complex. Really complex. Really, <em>really</em> complex. Unless you have some <em>very</em> good reasons to re-invent the wheel, you should re-use the work someone else has already done. Without even thinking too hard, I could come up with more than half a dozen ways to break your parser, and I didn't even get into the nasty corner cases. (Simply because I don't <em>know</em> the nasty corner cases, because I don't <em>need</em> to know them, because somebody else has already figured them all out.)</p>\n\n<p>The two fundamentals of Programming are Abstraction and Reuse. Creating Reusable Abstractions and Reusing other programmer's Abstractions.</p>\n"}], "owner": {"reputation": 77, "user_id": 4844185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ef4d1cf40e2b1e58e74a296c91195321?s=128&d=identicon&r=PG&f=1", "display_name": "mm19", "link": "https://stackoverflow.com/users/4844185/mm19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 40387851, "answer_count": 1, "score": 0, "last_activity_date": 1479568390, "creation_date": 1478102909, "last_edit_date": 1479568390, "question_id": 40384587, "link": "https://stackoverflow.com/questions/40384587/creating-a-html-parser-in-ruby", "title": "Creating a HTML Parser in Ruby", "body": "<p>I need help figuring out a programming problem that I've been working on.</p>\n\n<p><strong>The problem description:</strong></p>\n\n<p>Write a function in Ruby that accepts an HTML document (a string) and a keyword (also a string). The function will find all occurrences of the keyword in the HTML string after the <code>&lt;body&gt;</code> element unless the keyword appears within an HTML tag, then surround the string found with tags to ``highlight\u2019\u2019 the keyword. For example,</p>\n\n<pre><code>&lt;span style=\"background-color: blue; color: white\"&gt;keyword&lt;/span&gt;\n</code></pre>\n\n<p>You will have to be careful not to highlight strings occurring within an HTML\ntag. For example, if the keyword is ``table\u2019\u2019, you wouldn\u2019t want to mark up\nthis:</p>\n\n<pre><code>&lt;table width=\"100%\" border=\"0\"&gt;\n</code></pre>\n\n<p><strong>What I have done so far:</strong> </p>\n\n<pre><code>puts \"Welcome to the HTML keyword highlighter!\"\nputs \"Please Enter A Keyword: \"\nkeyword = gets.chomp\ncanEdit = false \n\ninfile = File.new(\"desktop/code.html\", \"r\")\noutfile = File.new(\"Result.html\", \"w\")\n\ninfile.each{ |i| \n    if (i.include? \"&lt;body&gt;\")\n        canEdit = true\n\n    end\n\n    if (i.include? \"&lt;/body&gt;\")\n        canEdit = false\n    end\n\n    if(canEdit == true)\n        keyword.gsub(keyword, \"&lt;span style=\\\"background-color: yellow; color: black\\\"&gt;#{keyword}&lt;/span&gt;\")\n\n    outfile.write i\nend\n\noutfile.close()\ninfile.close()\n}\n</code></pre>\n\n<p><strong>The error I receive currently:</strong> </p>\n\n<p>Welcome to the HTML keyword highlighter!</p>\n\n<p>Please Enter A Keyword: </p>\n\n<p>simple</p>\n\n<pre><code>/Users/Eva/Desktop/Personal/part4_program.rb:16:in `each': closed stream (IOError)\n\nfrom /Users/Eva/Desktop/Personal/part4_program.rb:16:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm unsure what is causing the error and could use some guidance to fix the issue. I am also wondering if this program is heading in the right direction as an answer to the programming problem. I know Nokogiri is already available as a resource but I had hoped not to have to use it unless its thought to be a better option.</p>\n"}, {"tags": ["ruby", "logstash", "scientific-notation"], "answers": [{"comments": [{"owner": {"reputation": 5669, "user_id": 53321, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/tXuEy.jpg?s=128&g=1", "display_name": "Dominik Sandjaja", "link": "https://stackoverflow.com/users/53321/dominik-sandjaja"}, "edited": false, "score": 0, "creation_date": 1478163205, "post_id": 40385857, "comment_id": 68044707, "body": "Thanks, this looks like an interesting approach. After some more investigation, the problem seems to be that every output codec can decide on its own, how to handle this formatting. For JSON, 0.7E-4 is an absolutely valid number, as well as for rubydebug. So it seems like we have to modify our (own) output codec to include that bugfix in our code ..."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1478107092, "last_edit_date": 1478107092, "creation_date": 1478106778, "answer_id": 40385857, "question_id": 40384460, "link": "https://stackoverflow.com/questions/40384460/avoid-scientific-notation-in-json-output-when-converting-field-to-float/40385857#40385857", "title": "Avoid scientific notation in JSON output when converting field to float", "body": "<p>The Logstash bug fix fixes values that are greater than or equal to 1000000000000000.0 and that are less than  0.0001.  Unfortunately \"0.0007674\" doesn't fit into either category.  You should see that if you set a smaller number, e.g. (0.00007674) then it works as expected.</p>\n\n<p>Note that the solution they're following creates a string representation of the float... verify in your output if the smaller value (0.00007674) is satisfactory or whether it appears as a string regardless.  </p>\n\n<p>If it appears as a string regardless, you may be better off simply not doing the mutation.</p>\n\n<p>You can override the <code>sprintf</code>  method in an initializer.</p>\n\n<p>app/config/initializers/fix_sprintf.rb</p>\n\n<pre><code>class LogStash::Event\n\n  alias_method :old_sprintf, :sprintf\n\n  public\n  def sprintf(format)\n    unchanged_format = format\n    if format.is_a?(Float) and format.to_s.include?('E')\n      format = (\"%.15f\" % format).sub(/0*$/,\"\")\n    else\n      format = format.to_s\n    end\n    if format.index(\"%\").nil?\n      return format\n    end \n\n    old_sprintf(unchanged_format)\n  end\nend \n</code></pre>\n"}], "owner": {"reputation": 5669, "user_id": 53321, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/tXuEy.jpg?s=128&g=1", "display_name": "Dominik Sandjaja", "link": "https://stackoverflow.com/users/53321/dominik-sandjaja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478107092, "creation_date": 1478102504, "question_id": 40384460, "link": "https://stackoverflow.com/questions/40384460/avoid-scientific-notation-in-json-output-when-converting-field-to-float", "title": "Avoid scientific notation in JSON output when converting field to float", "body": "<p>Running the following configuration in Logstash 2.3.4</p>\n\n<pre><code>input {\n    generator {\n        codec =&gt; json\n        lines =&gt; [\n            '{\"value\": \"0.0007674\"}'\n            ]\n        count =&gt; 1\n    }\n}\n\nfilter {\n  mutate {\n    convert =&gt; [\"value\", \"float\"]\n  }\n}\n\noutput {\n    stdout { codec =&gt; json_lines }\n    stdout { codec =&gt; json }\n}\n</code></pre>\n\n<p>leads to the following output:</p>\n\n<pre><code>{\"value\":7.674E-4,\"@version\":\"1\",\"@timestamp\":\"2016-11-02T15:33:54.741Z\",\"host\":\"myHost\",\"sequence\":0}\n{\"value\":7.674E-4,\"@version\":\"1\",\"@timestamp\":\"2016-11-02T15:33:54.741Z\",\"host\":\"myHost\",\"sequence\":0}\n</code></pre>\n\n<p>How can I prevent the conversion to scientific notation in the json output?</p>\n\n<p>I have found <a href=\"https://github.com/elastic/logstash/issues/1670\" rel=\"nofollow noreferrer\">this Logstash bug</a> with the corresponding fix and thought, that all outputs and codecs automatically profit from it, since it was put in the event class. But either I was wrong or I am missing something, so any hint is appreciated.</p>\n"}, {"tags": ["c", "ruby", "linux", "gcc"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478100887, "post_id": 40383751, "comment_id": 68019655, "body": "Would you mind to post your .c file, please?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105050, "post_id": 40383751, "comment_id": 68022398, "body": "Really strange! Il try to reproduce the error here before telling you something."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105659, "post_id": 40383751, "comment_id": 68022748, "body": "I repeated exactlly the same here and it compiled correctly. I mus assume there is something wrong with your installation. Do you have all the build tools installed?"}, {"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105717, "post_id": 40383751, "comment_id": 68022788, "body": "It does work in the interactive bash/sh. So everything seems to be installed."}, {"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105912, "post_id": 40383751, "comment_id": 68022940, "body": "@EddeAlmeida Do you want to see the script in Ruby, too?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105975, "post_id": 40383751, "comment_id": 68022971, "body": "Sure! Maybe there is some hint there about why it is not working."}, {"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478106951, "post_id": 40383751, "comment_id": 68023595, "body": "@EddeAlmeida Alright, it&#39;s there."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478108654, "post_id": 40383751, "comment_id": 68024588, "body": "Once more it worked fine here! With your code, not my simulation!"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "edited": false, "score": 0, "creation_date": 1478109003, "post_id": 40386470, "comment_id": 68024773, "body": "OK! Just one more question: Would <code>File.open(&quot;#{filename}.c&quot;,&quot;w&quot;).write(ostr).close</code> also be valid?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "edited": false, "score": 0, "creation_date": 1478109701, "post_id": 40386470, "comment_id": 68025189, "body": "No, write returns the number of bytes read so you&#39;ll get a <code>NoMethodError</code>. Also see my edit."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1478109680, "last_edit_date": 1478109680, "creation_date": 1478108818, "answer_id": 40386470, "question_id": 40383751, "link": "https://stackoverflow.com/questions/40383751/gcc-doesnt-compile-when-called-by-system-in-ruby/40386470#40386470", "title": "GCC doesn&#39;t compile when called by system() in Ruby", "body": "<p>Writing to a file stream is buffered, you need to flush the buffer before compiling the C file. Change this</p>\n\n<pre><code>File.open(\"#{filename}.c\",\"w\").write(ostr)\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>File.open(\"#{filename}.c\",\"w\") { |f| f.write(ostr) }\n</code></pre>\n\n<p>The block form automatically closes the file stream, flushing the write.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>A nicer way to do this is to write the code directly to gcc without saving it to an intermediate file.</p>\n\n<pre><code>IO.popen(\"gcc -Wall -o ./#{filename} -xc -\", 'w') { |io| io.write(ostr) }\n</code></pre>\n\n<p>If you want more control over the subprocess check out <a href=\"https://ruby-doc.org/stdlib/libdoc/open3/rdoc/index.html\" rel=\"nofollow noreferrer\">open3</a>.</p>\n"}], "owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 40386470, "answer_count": 1, "score": 2, "last_activity_date": 1478109680, "creation_date": 1478100385, "last_edit_date": 1478106919, "question_id": 40383751, "link": "https://stackoverflow.com/questions/40383751/gcc-doesnt-compile-when-called-by-system-in-ruby", "title": "GCC doesn&#39;t compile when called by system() in Ruby", "body": "<p>GCC compiles my C script when it's called on the command line by using \n<code>gcc main.c -o bfcout</code>. I wrote a script in Ruby where line 36 says <code>system(\"gcc main.c -o bfcout\")</code>. I also tried <code>bash -c #{Shellwords.escape(\"gcc -Wall #{filename}.c -o bfcompoutput\")}</code>.</p>\n\n<p>But I get an error: <code>/usr/lib/gcc/x86_64-pc-linux-gnu/6.2.1/../../../../lib/crt1.o: In function '_start':\n(.text+0x20): undefined reference to 'main'</code></p>\n\n<p>There IS a main() function, and as I said, compiling on the command line works! What is wrong here?</p>\n\n<p>EDIT: \nC file looks like this. It is generated by the script. And yes, it's a reference to Brainf***. Sorry for the many lines(and the bad formatting).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nunsigned char _c[30000]={};\nint ptr=0;\nint main(){\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nwhile (_c[ptr]) {\n    ++ptr;\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++ptr;\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++ptr;\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++ptr;\n    ++_c[ptr];\n    --ptr;\n    --ptr;\n    --ptr;\n    --ptr;\n    --_c[ptr];\n}\n++ptr;\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\n++_c[ptr];\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n--ptr;\n--ptr;\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\nputchar(_c[ptr]);\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\nputchar(_c[ptr]);\n++ptr;\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\nreturn 0;\n}\n</code></pre>\n\n<p>Script in Ruby:</p>\n\n<pre><code>require 'shellwords'\n\ncode = \"\"\n\nloop do\n    x = gets.chomp\n    break if x==\"__END__\"\n    code &lt;&lt; x\nend\n\ncode_arr = []\n\ncode.split(\"\").each {|ch|\n    case ch\n    when \"&gt;\";code_arr &lt;&lt; \"++ptr;\"\n    when \"&lt;\";code_arr &lt;&lt; \"--ptr;\"\n    when \"+\";code_arr &lt;&lt; \"++_c[ptr];\"\n    when \"-\";code_arr &lt;&lt; \"--_c[ptr];\"\n    when \".\";code_arr &lt;&lt; \"putchar(_c[ptr]);\"\n    when \",\";code_arr &lt;&lt; \"_c[ptr] = getchar();\"\n    when \"[\";code_arr &lt;&lt; \"while (_c[ptr]) {\"\n    when \"]\";code_arr &lt;&lt; \"}\"\n    end\n}\n\nfilename = \"main\"\n\nsp = \"\"\n\nostr = \"#include &lt;stdio.h&gt;\\nunsigned char _c[30000]={};#{sp}int ptr=0;#{sp}int main(){#{code_arr.join(sp)+sp}return 0;#{sp}}\"\nFile.open(\"#{filename}.c\",\"w\").write(ostr)\nputs ostr\nresult = system(\"gcc -Wall #{filename}.c -o ./#{filename}\")\nputs \"Process exited with code #{result}\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3725976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1ezvI.jpg?s=128&g=1", "display_name": "bonekost", "link": "https://stackoverflow.com/users/3725976/bonekost"}, "edited": false, "score": 0, "creation_date": 1478185392, "post_id": 40388800, "comment_id": 68059918, "body": "It works perfect but now I got problem to override whole NumberGenerator module in app without touching gem."}, {"owner": {"reputation": 427, "user_id": 1579659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0eaa55121d056cc928c1c7f0d9a3287?s=128&d=identicon&r=PG", "display_name": "Arpit Chauhan", "link": "https://stackoverflow.com/users/1579659/arpit-chauhan"}, "reply_to_user": {"reputation": 47, "user_id": 3725976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1ezvI.jpg?s=128&g=1", "display_name": "bonekost", "link": "https://stackoverflow.com/users/3725976/bonekost"}, "edited": false, "score": 0, "creation_date": 1478202574, "post_id": 40388800, "comment_id": 68070183, "body": "You can use <code>class_eval</code> on the generator class in file lib/spree/core/number_generator_decorator.rb. Also make sure lib folder is autoloaded by placing this is in config/application.rb: <code>config.autoload_paths &lt;&lt; Rails.root.join(&#39;lib&#39;)</code>"}, {"owner": {"reputation": 47, "user_id": 3725976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1ezvI.jpg?s=128&g=1", "display_name": "bonekost", "link": "https://stackoverflow.com/users/3725976/bonekost"}, "edited": false, "score": 1, "creation_date": 1478254673, "post_id": 40388800, "comment_id": 68088908, "body": "It finally works I had to put <code>Spree::Core::NumberGenerator.class_eval</code> inside <code>app&#47;models&#47;spree&#47;core&#47;number_generator_decorator.rb</code>"}], "tags": [], "owner": {"reputation": 427, "user_id": 1579659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0eaa55121d056cc928c1c7f0d9a3287?s=128&d=identicon&r=PG", "display_name": "Arpit Chauhan", "link": "https://stackoverflow.com/users/1579659/arpit-chauhan"}, "is_accepted": true, "score": 0, "last_activity_date": 1478117092, "creation_date": 1478117092, "answer_id": 40388800, "question_id": 40383215, "link": "https://stackoverflow.com/questions/40383215/spree-3-1-increment-order-number/40388800#40388800", "title": "Spree 3.1: Increment Order number", "body": "<p>You can try this:</p>\n\n<pre><code>def new_candidate(host)\n  max_number = host.maximum(:number) || STARTING_NUMBER\n  @prefix + (max_number.gsub(@prefix, '').to_i + 1).to_s\nend\n\ndef generate_permalink(host)\n  new_candidate(host)\nend\n</code></pre>\n\n<p>You will need to define STARTING_NUMBER constant in the generator class. Also, you will not need the <code>@length</code> instance variable anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 3725976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1ezvI.jpg?s=128&g=1", "display_name": "bonekost", "link": "https://stackoverflow.com/users/3725976/bonekost"}, "edited": false, "score": 0, "creation_date": 1478527886, "post_id": 40465389, "comment_id": 68178560, "body": "In Spree 3.1 there is no method <code>generate_number</code> in Spree::Order model or am I wrong?"}], "tags": [], "owner": {"reputation": 131, "user_id": 3699650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c4c2cfd8980322b621666663182553?s=128&d=identicon&r=PG", "display_name": "killerkiara", "link": "https://stackoverflow.com/users/3699650/killerkiara"}, "is_accepted": false, "score": 1, "last_activity_date": 1478522263, "creation_date": 1478522263, "answer_id": 40465389, "question_id": 40383215, "link": "https://stackoverflow.com/questions/40383215/spree-3-1-increment-order-number/40465389#40465389", "title": "Spree 3.1: Increment Order number", "body": "<p>I recently worked on a similar task to have an order number that contains the date of the order + a randomly generated number (for uniqueness).</p>\n\n<p>To achieve this I add an <code>order_decorator.rb</code> into <code>models/spree</code> and I override the <code>generate_number</code> method:</p>\n\n<pre><code>// First i redefine the length for my random number\nNUMBER_LENGTH  = 5\n\ndef generate_number(options = {})\n    options[:length]  ||= NUMBER_LENGTH\n\n    date = Date.today.strftime('%d-%m-%Y')\n    possible = (0..9).to_a\n    random = \"-#{(0...options[:length]).map { possible.shuffle.first }.join}\"\n    self.number ||= date + random\n  end\n</code></pre>\n\n<p>I don't like the generation of the random number (I would use `SecureRandom for it) but i left it initially was in Spree because for this it will do fine for my needs.</p>\n\n<p>In your case you can add inside the method the code you need to make your number incremental. </p>\n\n<p>I hope this helps! </p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 47, "user_id": 3725976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1ezvI.jpg?s=128&g=1", "display_name": "bonekost", "link": "https://stackoverflow.com/users/3725976/bonekost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 40388800, "answer_count": 2, "score": 1, "last_activity_date": 1478522263, "creation_date": 1478098916, "question_id": 40383215, "link": "https://stackoverflow.com/questions/40383215/spree-3-1-increment-order-number", "title": "Spree 3.1: Increment Order number", "body": "<p>I am trying to make Order number incremental in Spree 3.1.</p>\n\n<p>I got only this:</p>\n\n<pre><code>Spree::Order.class_eval do\n  before_validation(on: :create) do\n    self.number = Spree::Core::NumberGenerator.new(prefix: 'S').send(:generate_permalink, Spree::Order)\n  end\nend\n</code></pre>\n\n<p>but it's only change prefix.</p>\n\n<p>How should I rewrite <code>new_candidate</code> to get right result?</p>\n\n<pre><code>#lib/spree/core/number_generator.rb\ndef new_candidate(length)\n    @prefix + length.times.map { @candidates.sample(random: @random) }.join\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1478098816, "post_id": 40383161, "comment_id": 68018081, "body": "Enter the full path to the executable."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1478098838, "post_id": 40383161, "comment_id": 68018094, "body": "U didn&#39;t read my note."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1478098874, "post_id": 40383161, "comment_id": 68018120, "body": "&quot;System command&quot; doesn&#39;t mean much. but if whatever program you&#39;re trying to run is <b>NOT</b> findable via the underlying OS&#39;s $PATH, %PATH, etc... then you MUST provide the full absolute <code>&#47;path&#47;to&#47;whatever&#47;Automate</code>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1478098880, "post_id": 40383161, "comment_id": 68018129, "body": "@InQusitive Then you&#39;ll need to add the path to it as an environmental variable. You have to specify the location somehow."}, {"owner": {"reputation": 1244, "user_id": 1576117, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1bf745d09bf4483ba186353787e3b67d?s=128&d=identicon&r=PG", "display_name": "Darkwater", "link": "https://stackoverflow.com/users/1576117/darkwater"}, "edited": false, "score": 1, "creation_date": 1478098960, "post_id": 40383161, "comment_id": 68018186, "body": "You don&#39;t know where the command is stored? Sounds like something you should figure out first."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1478099016, "post_id": 40383161, "comment_id": 68018224, "body": "@MarcB: There are many paths in my PATH variable, I know one of them is the automation path but don&#39;t know which. Still do I need to give the path in the ruby script? Can&#39;t it take from PATH variable/? Anyway it works in cmd."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "reply_to_user": {"reputation": 1244, "user_id": 1576117, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1bf745d09bf4483ba186353787e3b67d?s=128&d=identicon&r=PG", "display_name": "Darkwater", "link": "https://stackoverflow.com/users/1576117/darkwater"}, "edited": false, "score": 0, "creation_date": 1478099739, "post_id": 40383161, "comment_id": 68018798, "body": "@Darkwater: Consider I have the path , for eg: C:/scripts . Now how do I excecute it?  system(&#39;C:\\Scripts\\Automate task 1&#39;) ??"}, {"owner": {"reputation": 1244, "user_id": 1576117, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1bf745d09bf4483ba186353787e3b67d?s=128&d=identicon&r=PG", "display_name": "Darkwater", "link": "https://stackoverflow.com/users/1576117/darkwater"}, "edited": false, "score": 0, "creation_date": 1478099875, "post_id": 40383161, "comment_id": 68018907, "body": "@InQusitive I have little experience with Ruby on Windows but I&#39;d suspect so, yes. At least that&#39;s how it&#39;d work on Linux."}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478098778, "creation_date": 1478098778, "last_edit_date": 1495542798, "question_id": 40383161, "link": "https://stackoverflow.com/questions/40383161/how-do-i-run-a-non-system-command-in-ruby", "title": "How do I run a non system command in ruby?", "body": "<p>We have an automation script which we run in Windows command prompt. </p>\n\n<p>We use it like 'Automate task 1'</p>\n\n<p>Now I am trying to run it using ruby. I followed <a href=\"https://stackoverflow.com/questions/2232/calling-shell-commands-from-ruby\">this SO</a> post.\nBut since this is not a system command it doesn't get executed.</p>\n\n<pre><code>system('Automate task 1')\n</code></pre>\n\n<p>How do I excute such commands?</p>\n\n<p>Note: We don't have access to type or source of that command nor knows where is the command stored. We just execute it in cmd.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 3323850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYzBr.png?s=128&g=1", "display_name": "alebian", "link": "https://stackoverflow.com/users/3323850/alebian"}, "is_accepted": false, "score": 0, "last_activity_date": 1478099107, "creation_date": 1478099107, "answer_id": 40383282, "question_id": 40383044, "link": "https://stackoverflow.com/questions/40383044/need-help-in-understanding-recursion-in-chapter-10-of-learn-to-program-by-chris/40383282#40383282", "title": "Need help in understanding recursion in Chapter 10 of Learn to Program by Chris Pine", "body": "<p>1) The value 0 will be held by the one who called that function, let's say</p>\n\n<pre><code>a = continent_size(world, x, y)\n</code></pre>\n\n<p>now a is 0. The rest of the statements will not be evaluated because the return statement will end the execution of that method.</p>\n\n<p>2) There is no return statement between the lines size = ... so it will execute all of them</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 4488333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UmTW7.jpg?s=128&g=1", "display_name": "Marcin Zareba", "link": "https://stackoverflow.com/users/4488333/marcin-zareba"}, "is_accepted": false, "score": 0, "last_activity_date": 1478099240, "creation_date": 1478099240, "answer_id": 40383329, "question_id": 40383044, "link": "https://stackoverflow.com/questions/40383044/need-help-in-understanding-recursion-in-chapter-10-of-learn-to-program-by-chris/40383329#40383329", "title": "Need help in understanding recursion in Chapter 10 of Learn to Program by Chris Pine", "body": "<p>1) The 0 value will be returned to the <code>continent_size</code> metehod instace which invoked the instance you are asking about. The rest of the <code>if-end</code> statement will not be evaluated as the method already returns 0 to its caller.</p>\n\n<p>2) It will 'stop' right after <code>(4,4)</code> (as it is water it will simply return <code>0</code>) and count the next <code>size = ...</code> line indeed</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6427415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478099240, "creation_date": 1478098458, "question_id": 40383044, "link": "https://stackoverflow.com/questions/40383044/need-help-in-understanding-recursion-in-chapter-10-of-learn-to-program-by-chris", "title": "Need help in understanding recursion in Chapter 10 of Learn to Program by Chris Pine", "body": "<p>Questions: </p>\n\n<p>1.)If the <code>world[y][x] != 'land'</code> condition is true, it will <code>return 0</code>. Who holds that value now? Are the codes after this <code>if-end statement</code> will still be evaluated?</p>\n\n<p>2.)There are 8 <code>size = size + ...</code> lines, which represents 8 neighbors of the tile (5,5). So using (5,5) and using <code>size = size + continent_size(world, x-1, y-1)</code> line, I know it will count (4,4) which in this case is <code>o</code>. My question, since (4,4) is <code>o</code> which is a <code>water</code>, will it still count (3,3), (2,2), etc or will it stop right after (4,4) and count the next <code>size = size + ...</code> line?</p>\n\n<pre><code># These are just to make the map easier for me to read.\n# \"M\" is visually more dense then \"o\".\nM = 'land'\no = 'water'\n\nworld = [[o,o,o,o,o,o,o,o,o,o,o],\n         [o,o,o,o,M,M,o,o,o,o,o],\n         [o,o,o,o,o,o,o,o,M,M,o],\n         [o,o,o,M,o,o,o,o,o,M,o],\n         [o,o,o,M,o,M,M,o,o,o,o],\n         [o,o,o,o,M,M,M,M,o,o,o],\n         [o,o,o,M,M,M,M,M,M,M,o],\n         [o,o,o,M,M,o,M,M,M,o,o],\n         [o,o,o,o,o,o,M,M,o,o,o],\n         [o,M,o,o,o,M,o,o,o,o,o],\n         [o,o,o,o,o,o,o,o,o,o,o]]\n\ndef continent_size world, x, y\n  if world[y][x] != 'land'\n    # Either it's water or we already counted it,\n    # but either way, we don't want to count it now.\n    return 0\n  end\n\n  # So first we count this tile...\n  size = 1\n  world[y][x] = 'counted land'\n\n  # ...then we count all of the neighboring eight tiles\n  # (and, of course, their neighbors by way of the recursion).\n  size = size + continent_size(world, x-1, y-1)\n  size = size + continent_size(world, x  , y-1)\n  size = size + continent_size(world, x+1, y-1)\n  size = size + continent_size(world, x-1, y  )\n  size = size + continent_size(world, x+1, y  ) \n  size = size + continent_size(world, x-1, y+1) \n  size = size + continent_size(world, x  , y+1) \n  size = size + continent_size(world, x+1, y+1) \n  size\nend\n\nputs continent_size(world, 5, 5)\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1478100280, "creation_date": 1478100280, "answer_id": 40383716, "question_id": 40382685, "link": "https://stackoverflow.com/questions/40382685/change-name-of-rubygems-package/40383716#40383716", "title": "Change name of rubygems package?", "body": "<p>To change the case of the gem I had to yank the previous releases and push the gem again. Not ideal but better to avoid confusion down the line.</p>\n"}], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 40383716, "answer_count": 1, "score": 0, "last_activity_date": 1478100280, "creation_date": 1478097515, "question_id": 40382685, "link": "https://stackoverflow.com/questions/40382685/change-name-of-rubygems-package", "title": "Change name of rubygems package?", "body": "<p>I have pushed a gem to rubygems and realized after the fact that I left the name as uppercase in the gemspec.</p>\n\n<pre><code>Gem::Specification.new do |s|\n  s.name        = 'Pagescript' # oops\n  # ...\nend\n</code></pre>\n\n<p>Can I fix this and push a new version or will it create a new gem on rubygems?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "hash"], "answers": [{"comments": [{"owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "edited": false, "score": 0, "creation_date": 1478097368, "post_id": 40382582, "comment_id": 68016994, "body": "So, if I use attributes, that works except that, it includes attributes like <code>id</code>.  Is there a more <code>Rails</code> way of doing what I&#39;m trying to without removing those attributes through additional code? Wasn&#39;t sure if there was a method I should be using."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "edited": false, "score": 0, "creation_date": 1478097436, "post_id": 40382582, "comment_id": 68017042, "body": "@daveomcd <code>record.attributes</code> is already a <code>Hash</code>, so it <i>is</i> what you want :) No need to call <code>to_hash</code> on it. <code>record.attributes == record.attributes.to_hash</code> =&gt; <code>true</code>"}, {"owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "edited": false, "score": 0, "creation_date": 1478097667, "post_id": 40382582, "comment_id": 68017212, "body": "Okay thanks, I think this is what I&#39;ll use with <code>update_attributes</code> -- <code>record.attributes.except(&#39;id&#39;,&#39;created_at&#39;,&#39;updated_at&#39;)</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "edited": false, "score": 1, "creation_date": 1478097760, "post_id": 40382582, "comment_id": 68017275, "body": "@daveomcd you can, for example, implement a <code>to_h</code> method in <code>Record</code> model like this: <code>def to_h; attributes.except(&#39;id&#39;,&#39;created_at&#39;,&#39;updated_at&#39;) end</code> and use it as <code>record.to_h</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1478097253, "creation_date": 1478097253, "answer_id": 40382582, "question_id": 40382546, "link": "https://stackoverflow.com/questions/40382546/why-am-i-getting-two-different-sets-of-values-from-my-ruby-object-when-using-to/40382582#40382582", "title": "Why am I getting two different sets of values from my Ruby object when using .to_hash?", "body": "<p><code>record</code> is an instance of <code>Record</code> class, whereas <code>record.attributes</code> is an instance of <code>Hash</code> class.</p>\n\n<p>The difference probably occur because <code>to_hash</code> method implemented differently for instances of these two classes.</p>\n"}], "owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 40382582, "answer_count": 1, "score": 0, "last_activity_date": 1478098085, "creation_date": 1478097118, "last_edit_date": 1478098085, "question_id": 40382546, "link": "https://stackoverflow.com/questions/40382546/why-am-i-getting-two-different-sets-of-values-from-my-ruby-object-when-using-to", "title": "Why am I getting two different sets of values from my Ruby object when using .to_hash?", "body": "<p>I have an object in my Rails project, and when I do <code>record.to_hash</code> I get values, but I'm missing at least one -- notably <code>experience</code>.  When I do record.attributes.to_hash I get more options including the attribute <code>experience</code>.  Here's my output from using byebug below.  Can anyone explain why this is the case? I was using <code>record.to_hash</code> in conjunction with <code>update_attributes</code> method to update an object but I need the additional attributes.</p>\n\n<pre><code>record.to_hash\n#=&gt; {:player_url=&gt;\"http://www.unlvrebels.com//sports/m-footbl/mtt/casey_acosta_1024286.html\", :headshot_url=&gt;nil, :jersey=&gt;\"87\", :first_name=&gt;\"Casey\", :last_name=&gt;\"Acosta\", :position=&gt;\"WR\", :height=&gt;\"5110\", :weight=&gt;\"160\", :eligibility=&gt;nil, :hometown_city=&gt;\"Las Vegas\", :hometown_state=&gt;\"NV\", :high_school=&gt;\"Chaparral HS\", :biography_text=&gt;nil, :is_basketball_player=&gt;false, :possible_dob=&gt;false, :possible_transfer=&gt;false, :possible_redshirt=&gt;false, :possible_gpa=&gt;false, :possible_track_participant=&gt;false, :possible_basketball_participant=&gt;false, :possible_baseball_participant=&gt;false, :possible_hockey_participant=&gt;false, :possible_lacrosse_participant=&gt;false, :possible_power_lifting_participant=&gt;false, :possible_rugby_participant=&gt;false, :possible_soccer_participant=&gt;false, :possible_volleyball_participant=&gt;false, :possible_wrestling_participant=&gt;false, :possible_medical_alert=&gt;false, :possible_character_alert=&gt;false, :school_id=&gt;664, :player_id=&gt;nil, :position_id=&gt;2}\nrecord.attributes.to_hash\n#=&gt; {\"id\"=&gt;nil, \"school_site_id\"=&gt;nil, \"player_url\"=&gt;\"http://www.unlvrebels.com//sports/m-footbl/mtt/casey_acosta_1024286.html\", \"headshot_url\"=&gt;nil, \"jersey\"=&gt;\"87\", \"first_name\"=&gt;\"Casey\", \"last_name\"=&gt;\"Acosta\", \"position\"=&gt;\"WR\", \"height\"=&gt;\"5110\", \"weight\"=&gt;\"160\", \"eligibility\"=&gt;nil, \"hometown_city\"=&gt;\"Las Vegas\", \"hometown_state\"=&gt;\"NV\", \"high_school\"=&gt;\"Chaparral HS\", \"major\"=&gt;nil, \"previous_school\"=&gt;nil, \"experience\"=&gt;\"FR\", \"biography_text\"=&gt;nil, \"has_relative_in_sports\"=&gt;false, \"is_basketball_player\"=&gt;false, \"possible_dob\"=&gt;false, \"possible_transfer\"=&gt;false, \"possible_redshirt\"=&gt;false, \"possible_gpa\"=&gt;false, \"possible_track_participant\"=&gt;false, \"possible_basketball_participant\"=&gt;false, \"possible_baseball_participant\"=&gt;false, \"possible_hockey_participant\"=&gt;false, \"possible_lacrosse_participant\"=&gt;false, \"possible_power_lifting_participant\"=&gt;false, \"possible_rugby_participant\"=&gt;false, \"possible_soccer_participant\"=&gt;false, \"possible_volleyball_participant\"=&gt;false, \"possible_wrestling_participant\"=&gt;false, \"possible_medical_alert\"=&gt;false, \"possible_character_alert\"=&gt;false, \"school_id\"=&gt;664, \"player_id\"=&gt;nil, \"position_id\"=&gt;2, \"created_at\"=&gt;nil, \"updated_at\"=&gt;nil}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4011642, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1562206357/picture?type=large", "display_name": "Mudit Maheshwari", "link": "https://stackoverflow.com/users/4011642/mudit-maheshwari"}, "edited": false, "score": 0, "creation_date": 1478098211, "post_id": 40382051, "comment_id": 68017627, "body": "it is giving 0 as pronoun everytime i run"}, {"owner": {"reputation": 11, "user_id": 4011642, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1562206357/picture?type=large", "display_name": "Mudit Maheshwari", "link": "https://stackoverflow.com/users/4011642/mudit-maheshwari"}, "edited": false, "score": 0, "creation_date": 1478098449, "post_id": 40382051, "comment_id": 68017815, "body": "after giving procount+=1 also it is not updating..can you please tell me how to update"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 11, "user_id": 4011642, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1562206357/picture?type=large", "display_name": "Mudit Maheshwari", "link": "https://stackoverflow.com/users/4011642/mudit-maheshwari"}, "edited": false, "score": 0, "creation_date": 1478099019, "post_id": 40382051, "comment_id": 68018228, "body": "make two things: this <code>sentence.split(&#47;\\w+&#47;).each do |word|</code> become <code>sentence.split.each do |word|</code> and this <code>if key == word</code> become <code>if key.downcase == word.downcase</code>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1478095789, "creation_date": 1478095789, "answer_id": 40382051, "question_id": 40381933, "link": "https://stackoverflow.com/questions/40381933/count-the-number-of-vowels-pronouns-in-each-line-of-string/40382051#40382051", "title": "Count the number of vowels,pronouns in each line of string?", "body": "<ul>\n<li>you don't need semicolon at the end of the lines</li>\n<li><code>if</code> requires an <code>end</code> (unless it's the inline form)</li>\n<li><code>++</code> operator doesn't exist in Ruby</li>\n<li><p>you compare two strings with the <code>==</code> operator (it's a method actually)</p>\n\n<pre><code>string = gets.chomp\n\nsentencecount = 0\nwordcount = 0\npronouns = {\"He\"=&gt;0, \"She\"=&gt;0, \"They\"=&gt;0, \"Them\"=&gt;0}\nprocount = 0\nstring.split(\".\").each do |sentence|\n  wordcount = 0\n  sentencecount += 1     #tracking number of sentences\n  vowels = sentence.scan(/[aeoui]/).count\n  procount = 0\n  sentence.split(/\\w+/).each do |word|\n    pronouns.each do|key, value|\n      if key == word\n        procount += 1\n      end\n      wordcount += 1  # tracking number of words\n    end\n  end\n\n  puts \"Sentence #{sentencecount} has #{wordcount} words, has  #{vowels} vowels\"\nend \n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": false, "score": 0, "last_activity_date": 1478102087, "creation_date": 1478102087, "answer_id": 40384306, "question_id": 40381933, "link": "https://stackoverflow.com/questions/40381933/count-the-number-of-vowels-pronouns-in-each-line-of-string/40384306#40384306", "title": "Count the number of vowels,pronouns in each line of string?", "body": "<p>Based off of your initial attempt, I've optimized it slightly and make it more readable in terms of code.</p>\n\n<pre><code>string = gets.chomp\npronouns = ['he', 'she', 'they', 'them']\ntotal_word_count = 0\ntotal_procount = 0\ntotal_vowel_count = 0\n\nsentences = string.split(\".\")\ntotal_sentence_count = sentences.size\n\nsentences.each_with_index do |sentence, idx|\n  # VOWELS\n  vowel_count = sentence.scan(/[aeoui]/).count\n  total_vowel_count += vowel_count\n\n  # WORDS\n  words = sentence.split\n  sentence_word_count = words.size\n  total_word_count += sentence_word_count\n\n  # PRONOUNS\n  sentence_procount = 0\n  words.each do |word|\n    sentence_procount += 1 if pronouns.include?(word.downcase)\n  end\n\n  total_procount += sentence_procount\n\n  puts \"Sentence #{idx + 1} has #{sentence_word_count} words, has  #{vowel_count} vowels\"\nend\n\nputs \"Input has #{total_sentence_count} sentences, #{total_word_count} words, #{total_vowel_count} vowels, and #{total_procount} pronouns\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1478109999, "last_edit_date": 1478109999, "creation_date": 1478108750, "answer_id": 40386442, "question_id": 40381933, "link": "https://stackoverflow.com/questions/40381933/count-the-number-of-vowels-pronouns-in-each-line-of-string/40386442#40386442", "title": "Count the number of vowels,pronouns in each line of string?", "body": "<p>I suggest you return an array of hashes, one for each line, each hash containing statistics for the associated line. You can then do what you want with the information in that array.</p>\n\n<pre><code>VOWELS   = 'aeiou'\nPRONOUNS = %w| he she they them |\n  #=&gt; [\"he\", \"she\", \"they\", \"them\"] \nPRONOUN_REGEX = /\\b#{Regexp.union(PRONOUNS)}\\b/\n  #=&gt; /\\b(?-mix:he|she|they|them)\\b/\n\ndef count_em(str)\n  str.downcase.split(/\\n/).map { |line|\n    { vowels:   line.count(VOWELS),\n      words:    line.scan(/[[:lower:]]+/).count,\n      pronouns: line.scan(PRONOUN_REGEX).size } }\nend\n\na = count_em \"He thought that she thought that he did not know the truth\\n\" +\n             \"Ren\u00e9 knew she would torment them until they went bananas\\n\"\n  #=&gt; [{:vowels=&gt;14, :words=&gt;12, :pronouns=&gt;3},\n  #    {:vowels=&gt;15, :words=&gt;10, :pronouns=&gt;3}] \n\na.each.with_index(1) { |h,i|\n  puts \"In line #{i} there are %d vowels, %d words and %d pronouns\" %\n    h.values_at(:vowels, :words, :pronouns) }\n  # In line 1 there are 14 vowels, 12 words and 3 pronouns\n  # In line 2 there are 15 vowels, 10 words and 3 pronouns\n\nputs \"The total number of vowels in all lines is %d\" %\n  a.map { |h| h[:vowels] }.reduce(:+)\n  # The total number of vowels in all lines is 29\n</code></pre>\n\n<p>This solution is incomplete in that it doesn't deal with contractions (\"don't\"), possessives (\"Mary's\"), abbreviations (\"1st\"), initials and numeric parts of names (\"J. Philip ('Phil') Sousa III\") and other twists of the English language.</p>\n"}], "owner": {"reputation": 11, "user_id": 4011642, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1562206357/picture?type=large", "display_name": "Mudit Maheshwari", "link": "https://stackoverflow.com/users/4011642/mudit-maheshwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478109999, "creation_date": 1478095452, "question_id": 40381933, "link": "https://stackoverflow.com/questions/40381933/count-the-number-of-vowels-pronouns-in-each-line-of-string", "title": "Count the number of vowels,pronouns in each line of string?", "body": "<p>I need to count the number of vowels,words,pronouns(\"he,she,them\") in each line of a string entered by user. if input is \"they are playing. he is studying\" the output expected is Sentence 1 has 3 words,has 4 vowels , 1 pronoun. \\nSentence 2 has 3 words,4 vowels , 1 pronoun.  I have written the following code but getting an error unexpected-end-of-input.</p>\n\n<pre><code>string = gets\nstring =string.chomp\n\n\nsentencecount = 0\nwordcount = 0\npronouns={\"He\"=&gt;0,\"She\"=&gt;0,\"They\"=&gt;0,\"Them\"=&gt;0}\nprocount=0;\nstring.split(\".\").each do |sentence|\n  wordcount = 0\n  sentencecount += 1     #tracking number of sentences\n   vowels=sentence.scan(/[aeoui]/).count\n   procount=0\n  sentence.split(/\\w+/).each do |word|\n    pronouns.each do|key,value|\n        if (key.eq word)\n            procount++\n\n    wordcount += 1  # tracking number of words\n  end\n\n  puts \"Sentence #{sentencecount} has #{wordcount} words, has  #{vowels} vowels\"\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1478095124, "post_id": 40381644, "comment_id": 68015422, "body": "Did you used <code>angular-devise</code> as showed in <code>thinkster.io</code> ?"}, {"owner": {"reputation": 13, "user_id": 5857837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938e65d8f163e0b2f57bcfa9d2dcb7e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rodras", "link": "https://stackoverflow.com/users/5857837/rodras"}, "reply_to_user": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1478097561, "post_id": 40381644, "comment_id": 68017135, "body": "Yes I did. I haven&#39;t given any Angular code as I think that the issue is in the back-end"}], "owner": {"reputation": 13, "user_id": 5857837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938e65d8f163e0b2f57bcfa9d2dcb7e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rodras", "link": "https://stackoverflow.com/users/5857837/rodras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478094699, "creation_date": 1478094699, "last_edit_date": 1495540845, "question_id": 40381644, "link": "https://stackoverflow.com/questions/40381644/rails-devise-methods-helpers-dont-work", "title": "Rails Devise methods &amp; helpers don&#39;t work", "body": "<p>I have inherited an application built with Rails (v. 4.2.0) + AngularJS. Most of it works reasonably well, but I have hit a wall with Devise (v .3.5.1) that I am unable to overcome.</p>\n\n<p>The application is structured this way: Angular.js handles the client side and is served from the back by the Rails app through an API. (The structure is very similar to the one from this tutorial: <a href=\"https://thinkster.io/angular-rails\" rel=\"nofollow noreferrer\">https://thinkster.io/angular-rails</a>).</p>\n\n<p>The problem if that for some reason, the app does not recognize helper methods of devise such as: <code>current_user</code> or <code>user_signin?</code> among others. Currently, anyone could make a request to /api/users and get a JSON with the information.</p>\n\n<p>For instance, if we add this code to the <code>/controllers/api/employees_controller.rb</code> and you make a request in your browser to /api/employees/:id you get the JSON despite nos being logged</p>\n\n<pre><code>def show\n  @employee = Employee.find(params[:id])\n  respond_to do |format|\n    format.json{\n      if user_signed_in? then\n        render text: @employee.to_json, status: 200\n      else\n        render :json =&gt; nil, status: 422\n      end\n    }\n  end\nend\n</code></pre>\n\n<p>Note: in this application the entity \"Employee\" is a type of \"User\"</p>\n\n<p>I have tried solutions named in this post <a href=\"https://stackoverflow.com/questions/6003883/rails-devise-user-signed-in-not-working\">Rails devise: user_signed_in? not working</a> but it didn't work for me</p>\n\n<p>Here are all the parts of the code that I think could offer some light to this issue</p>\n\n<p>/controllers/api/users/sessions_controller.rb</p>\n\n<pre><code>module Api\n  class Users::SessionsController &lt; Devise::SessionsController\n  before_filter :configure_sign_in_params, only: [:create]\n\n    #Devise couldn't find \"users_url\" so just defining it here (500 error)\n    def users_url\n      :root_path\n    end\n\n    # GET /resource/sign_in\n    def new\n      super\n    end\n\n    # POST /resource/sign_in\n    def create\n      user = User.new\n      if ( params[:user][:email] == \"\" || params[:user][:password] == \"\") then\n    render json: {errors: \"Insufficient data provided (user and/or password)\"}.to_json, status: :bad_request\n      elsif User.find_by_email(params[:user][:email]).present?\n    user = User.find_by_email(params[:user][:email])\n    if user.valid_password?(params[:user][:password]) then\n      sign_in :user, user\n      render json: user.to_json(only: [:id, :email, :name, :last_name, :type, :company_id,:configuration,:phone]), status: :created\n    else\n      render json: {errors: \"Wrong password.\"}.to_json, status: :unauthorized\n    end\n      else\n    render json: {errors: \"Could not find user with that email.\"}.to_json, status: :unauthorized\n      end\n    end\n\n    # DELETE /resource/sign_out\n    def destroy\n      puts \"HEEEEY\"\n    end\n\n    # protected\n\n    # If you have extra params to permit, append them to the sanitizer.\n    def configure_sign_in_params\n      devise_parameter_sanitizer.for(:sign_in) &lt;&lt; :attribute\n    end\n  end\nend\n</code></pre>\n\n<p>models/user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable#, :confirmable\n\n  scope :admins, -&gt; { where(admin: true) }\n\n  validates :email, presence: true\n  validates :name, presence: true, length: { in: 1..50 }\n\nend\n</code></pre>\n\n<p>config/routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\n namespace :api, defaults: {format: :json} do\n\n   resources :contacts\n   resources :job_application\n  #  devise_for :admins, controllers: {sessions: 'admins/sessions'}\n  #  devise_for :employees, controllers: {sessions: 'employees/sessions'}\n\n    devise_for :users, controllers: {\n    sessions: 'api/users/sessions',\n    registrations: 'api/users/registrations',\n    }\n\n    devise_for :employees, controllers: {\n       sessions: 'api/employees/sessions',\n       registrations: 'api/employees/registrations',\n     }\n</code></pre>\n\n<p>If you need any other part of the code, please just let me know. </p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["ruby", "singleton"], "answers": [{"comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1478129350, "post_id": 40382708, "comment_id": 68034645, "body": "But you can&#39;t call new, that&#39;s part of being a singleton (new/initialize) is made private."}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1478097571, "creation_date": 1478097571, "answer_id": 40382708, "question_id": 40381603, "link": "https://stackoverflow.com/questions/40381603/is-there-an-appropriate-way-to-inject-a-service-into-singleton/40382708#40382708", "title": "Is there an appropriate way to inject a service into singleton?", "body": "<p>I personally prefer contructor injection, whether the object is a singleton or not. That ensures a fully initialized object after creation. Therefore the handling of <code>Display.display.nil?</code> should also be part of the constructor.</p>\n\n<pre><code>class FileSystemIcons\n  include Singleton\n\n  def initialize(display = Display.display) \n    fail(ArgumentError, 'No display given') unless display\n    @display = display\n    # ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1478178405, "creation_date": 1478094599, "last_edit_date": 1478178405, "question_id": 40381603, "link": "https://stackoverflow.com/questions/40381603/is-there-an-appropriate-way-to-inject-a-service-into-singleton", "title": "Is there an appropriate way to inject a service into singleton?", "body": "<h2>Update</h2>\n\n<p>I will leave this question for now since there may or may not be a valid use case for something like this.  For my case this was a design problem and instead of using a Singleton, I found a natural location to create an instance of a plain object and pass a reference to it were ever it is needed. Since it's now a plain object I can use constructor injection again. </p>\n\n<hr>\n\n<h2>Original question</h2>\n\n<p>I have what I think is an appropriate use of a Singleton.  It's an object that will lazily load the images for folders and filetypes for use in a <a href=\"http://jruby.org\" rel=\"nofollow noreferrer\">JRuby</a>, <a href=\"https://www.eclipse.org/swt\" rel=\"nofollow noreferrer\">SWT</a> application.</p>\n\n<p>The class will look something like below.  The methods need an instance of Display to create the images.</p>\n\n<p>The question is, what's the appropriate to inject the Display object and why?\nI was thinking of using a <code>begin ... rescue</code> block to set the value of @display to nil if the Display is not available and then providing a setter for unit testing.  </p>\n\n<p>I always wonder if I am doing something wrong when I think I need a Singleton, even more so when I need to do something unusual with a Singleton, so I would not rule other other options.</p>\n\n<pre><code>require \"singleton\"\n\nclass FileSystemIcons\n  include Singleton\n\n  attr_accessor :display, :cached_folder_image, :cached_file_images\n\n  def initialize \n    @display = Display.display\n    @cached_folder_image = nil\n    @cached_file_images = {}\n  end\n\n  def folder_image\n    unless cached_folder_image\n      ...\n      self.cached_folder_image = converted_image\n    end\n    cached_folder_image\n  end\n\n  def file_image file_name\n    ...\n    unless cached_file_images[ext]\n      ...\n      cached_file_images[ext]\n    end\n  end\n\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1478094640, "post_id": 40381489, "comment_id": 68015055, "body": "I don&#39;t know what you mean by <i>is not passing in time to appear in the email</i>. As for the redirect, that&#39;s because you&#39;ve not added a redirect in the action."}, {"owner": {"reputation": 1, "user_id": 6826951, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4eCEBVaZsok/AAAAAAAAAAI/AAAAAAAAABE/pqpG6LIe9iA/photo.jpg?sz=128", "display_name": "David Weber", "link": "https://stackoverflow.com/users/6826951/david-weber"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1478095806, "post_id": 40381489, "comment_id": 68015864, "body": "My mistake, that was supposed to be tracking. Thanks for the redirect tip."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1478095987, "post_id": 40381489, "comment_id": 68015983, "body": "So it&#39;s not passing in the ticket to the mailer?"}, {"owner": {"reputation": 1, "user_id": 6826951, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4eCEBVaZsok/AAAAAAAAAAI/AAAAAAAAABE/pqpG6LIe9iA/photo.jpg?sz=128", "display_name": "David Weber", "link": "https://stackoverflow.com/users/6826951/david-weber"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1478096232, "post_id": 40381489, "comment_id": 68016186, "body": "Ticket is passing, but I just noticed that tracking isn&#39;t committing to the database either. By directing the form_for to a different url will it not update anymore?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1478096472, "post_id": 40381489, "comment_id": 68016377, "body": "You don&#39;t update the ticket&#39;s attributes or save them"}], "owner": {"reputation": 1, "user_id": 6826951, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4eCEBVaZsok/AAAAAAAAAAI/AAAAAAAAABE/pqpG6LIe9iA/photo.jpg?sz=128", "display_name": "David Weber", "link": "https://stackoverflow.com/users/6826951/david-weber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478097006, "creation_date": 1478094229, "last_edit_date": 1478097006, "question_id": 40381489, "link": "https://stackoverflow.com/questions/40381489/rails-send-email-when-a-specified-field-is-updated", "title": "Rails Send Email when a Specified Field is Updated", "body": "<p>I have an app that is used for tracking in house devices. Once a device has been through the system it ships, so I am updating the 'Ticket'. I've been through a lot of contact form tutorials but they don't really help because they are all based on either gems or create methods.</p>\n\n<p>The code below mostly works but with two glaring problems: The @ticket.tracking is not passing in tracking to appear in the email and it is trying to find the linked template when it should just perform the action then redirect back to the edit page.</p>\n\n<p>Form:</p>\n\n<pre><code>&lt;%= form_for(@ticket, url: send_tracking_mail_path(@ticket)) do |tickettracking| %&gt;\n  &lt;%= tickettracking.text_field :tracking %&gt;\n  &lt;%= tickettracking.submit 'Submit Tracking', class: \"btn btn-primary btn-mini\", style: \"float: right;\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Ticket Controller:</p>\n\n<pre><code>def send_tracking_mail\n @ticket = Ticket.find(params[:id])\n TrackingMailer.tracking(@ticket).deliver_now\n flash[:notice] = \"Ticket tracking has been sent.\"\nend\n</code></pre>\n\n<p>Tracking Mailer:</p>\n\n<pre><code>class TrackingMailer &lt; ApplicationMailer\n def tracking(ticket)\n  @ticket = ticket\n  mail(to: @ticket.customer.email, subject: \"Tracking for #{ticket.name}\")\n end\nend\n</code></pre>\n\n<p>The route:</p>\n\n<pre><code>patch 'send_tracking_mail.:id', to: 'tickets#send_tracking_mail', as: :send_tracking_mail\n</code></pre>\n\n<p>The email sends but renders nothing for &lt;%= @ticket.tracking %></p>\n\n<pre><code>Your Device Has Been Shipped with tracking &lt;%= @ticket.tracking %&gt;\n</code></pre>\n\n<p>Edit:\nI was missing a couple of lines in the email method</p>\n\n<pre><code>def send_tracking_mail\n @ticket = Ticket.find(params[:id])\n @ticket.update(ticket_params)\n TrackingMailer.tracking(@ticket).deliver_now\n redirect_to edit_ticket_path(@ticket)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1478091906, "post_id": 40380603, "comment_id": 68013075, "body": "I found this: <a href=\"https://bugs.ruby-lang.org/issues/6864\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/6864</a>. Not sure if it was ever resolved."}, {"owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 1, "creation_date": 1478092045, "post_id": 40380603, "comment_id": 68013186, "body": "What version of Rails are you using? <code>DateTime.now...Float::INFINITY</code> works fine in Rails 5.0.0.1."}, {"owner": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "edited": false, "score": 0, "creation_date": 1478092200, "post_id": 40380603, "comment_id": 68013292, "body": "Oh, I&#39;m using <code>4.2.5</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 0, "creation_date": 1478092891, "post_id": 40380603, "comment_id": 68013798, "body": "@MuradYusufov: it works without rails even. In plain IRB 2.3.1 console."}, {"owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478094060, "post_id": 40380603, "comment_id": 68014630, "body": "@SergioTulentsev that&#39;s true, yeah, I just forgot to <code>require &#39;date&#39;</code> at first. This raises next question: what version of Ruby are you using?"}, {"owner": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "edited": false, "score": 0, "creation_date": 1478098286, "post_id": 40380603, "comment_id": 68017685, "body": "I&#39;m using Ruby 2.2.4"}, {"owner": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "edited": false, "score": 0, "creation_date": 1478099090, "post_id": 40380603, "comment_id": 68018283, "body": "And yes, it is REALLY WEIRD that when I run <code>rails c</code> <code>DateTime.now...Float::INFINITY</code> breaks, and yet in pry, <code>DateTime.now...Float::INFINITY</code> is fine. Strange strange magic."}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "edited": false, "score": 0, "creation_date": 1478095145, "post_id": 40380717, "comment_id": 68015445, "body": "@fatuhoku Ok, let me know if that worked. Also, it is rally strange that <code>DateTime.now...Float::INFINITY</code> does not work for you as is.."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1478091929, "creation_date": 1478091929, "answer_id": 40380717, "question_id": 40380603, "link": "https://stackoverflow.com/questions/40380603/how-can-i-override-the-and-operators-of-ruby-ranges-to-accept-floatinfi/40380717#40380717", "title": "How can I override the .. and ... operators of Ruby Ranges to accept Float::INFINITY?", "body": "<p>I don't think that what you want to do is a correct way of solving such issue.</p>\n\n<p>What I would suggest instead, is to simply override the <code>end_date</code> method in model:</p>\n\n<pre><code>def end_date\n  super == Float::INFINITY ? DateTime::Infinity.new : super\nend\n</code></pre>\n\n<p>This basically says if <code>end_date</code> in db is <code>Float::INFINITY</code> return <code>DateTime::Infinity.new</code> as <code>end_date</code>, otherwise return what's in database.</p>\n"}, {"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1546538699, "last_edit_date": 1546538699, "creation_date": 1546538394, "answer_id": 54027470, "question_id": 40380603, "link": "https://stackoverflow.com/questions/40380603/how-can-i-override-the-and-operators-of-ruby-ranges-to-accept-floatinfi/54027470#54027470", "title": "How can I override the .. and ... operators of Ruby Ranges to accept Float::INFINITY?", "body": "<p>Ruby 2.6 introduces <a href=\"https://ruby-doc.org/core-2.6/Range.html#class-Range-label-Endless+Ranges\" rel=\"nofollow noreferrer\">endless range</a>, which can be used in this manner, for example:</p>\n\n<pre><code>(DateTime.now..)\n(DateTime.now...)\n</code></pre>\n\n<p>This provides a new approach to answering this question. Hope it's useful for someone!</p>\n"}], "owner": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 40380717, "answer_count": 2, "score": 2, "last_activity_date": 1546538699, "creation_date": 1478091612, "last_edit_date": 1478092386, "question_id": 40380603, "link": "https://stackoverflow.com/questions/40380603/how-can-i-override-the-and-operators-of-ruby-ranges-to-accept-floatinfi", "title": "How can I override the .. and ... operators of Ruby Ranges to accept Float::INFINITY?", "body": "<p>I want to override the <code>..</code> and <code>...</code> operators in Ruby's <code>Range</code>.</p>\n\n<p>Reason is, I'm working with infinite date ranges in the database. If you pull an <code>infinty</code> datetime out of Postgres, you get a <code>Float::INFINITY</code> in Ruby.</p>\n\n<p>The problem with this is, I cannot use <code>Float::INFINITY</code> as the end of a range:</p>\n\n<pre><code>Date.today...Float::INFINITY\n=&gt; Wed, 02 Nov 2016...Infinity \n\nDateTime.now...Float::INFINITY\n# ArgumentError: bad value for range\n\nTime.now...Float::INFINITY\n# ArgumentError: bad value for range\n</code></pre>\n\n<p>... yet I use <code>..</code> and <code>...</code> syntax quite often in my code.</p>\n\n<p>To even be able to construct the range, you need to use  <code>DateTime::Infinity.new</code> instead:</p>\n\n<pre><code>Date.today...DateTime::Infinity.new\n=&gt; Wed, 02 Nov 2016...#&lt;Date::Infinity:0x007fd82348c698 @d=1&gt; \n\nDateTime.now...DateTime::Infinity.new\n=&gt; Wed, 02 Nov 2016 12:57:07 +0000...#&lt;Date::Infinity:0x007fd82348c698 @d=1&gt; \n\nTime.now...DateTime::Infinity.new\n=&gt; 2016-11-02 12:57:33 +0000...#&lt;Date::Infinity:0x007fd82348c698 @d=1&gt; \n</code></pre>\n\n<p>But I would need to do the the <code>Float::INFINITY</code> -> <code>DateTime::Infinity.new</code> conversion every time:</p>\n\n<p><code>model.start_time...convert_infinity(model.end_time)</code></p>\n\n<p>Is there a way I can override the <code>..</code> and <code>...</code> operators so that I can incorporate the conversion function and keep the syntactic sugar?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1478151749, "post_id": 40387865, "comment_id": 68039973, "body": "yeah, basic recursion i guess :)"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1478115963, "last_edit_date": 1478115963, "creation_date": 1478113570, "answer_id": 40387865, "question_id": 40380473, "link": "https://stackoverflow.com/questions/40380473/build-multi-associated-array-with-unknown-depth/40387865#40387865", "title": "build multi associated array with unknown depth", "body": "<p>It's not perfect but I think it can be helpful :</p>\n\n<pre><code>class TakeSubs\n    def initialize(string)\n        @arr = string.split('/')\n    end\n\n    def get_it(i=0)\n        element = @arr[i]\n        if element \n            [element, Hash[:child, get_it(i+1)]]\n        else\n            []\n        end\n    end\n\nend \n\nres = TakeSubs.new('a/b/c')\np res.get_it\n #=&gt; [\"a\",  {:child =&gt; [\"b\",  {:child =&gt; [\"c\", {:child =&gt; []}]}]}]         \n</code></pre>\n"}], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 2, "accepted_answer_id": 40387865, "answer_count": 1, "score": 2, "last_activity_date": 1478115963, "creation_date": 1478091261, "last_edit_date": 1592644375, "question_id": 40380473, "link": "https://stackoverflow.com/questions/40380473/build-multi-associated-array-with-unknown-depth", "title": "build multi associated array with unknown depth", "body": "<p>I have sorted strings from a <code>directorylisting</code> and need to make nested JSON out of it.</p>\n<p>Input:</p>\n<pre><code>/\n/caseIH130SeriesbyStevie.zip/\n/caseIH130SeriesbyStevie.zip/shaders\n/caseIH130SeriesbyStevie.zip/shared\n/caseIH1660byStevie.zip/\n/caseIH1660byStevie.zip/shaders\n/caseIH1660byStevie.zip/shared\n/caseIH1660byStevie.zip/shared/lightPattern\n</code></pre>\n<p>Expected output</p>\n<pre><code>[ \n  name: &quot;/&quot;, children: [\n    name: &quot;caseIH130SeriesbyStevie.zip&quot;, children: [\n      name: &quot;shaders&quot;, children: [],    \n      name: &quot;shared&quot;, children: [] ],\n    name: &quot;caseIH1660byStevie.zip&quot;, children: [\n      name: &quot;shaders&quot;, children: [],    \n      name: &quot;shared&quot;, children: [] ],\n\n# ...\n</code></pre>\n<p>I struggle building up that array.</p>\n<p>First level is obviously easy.</p>\n<pre><code> if file == &quot;/&quot;\n    tree[&quot;root&quot;][file] = {name: file, children: {}}\n  else\n    parent = file.path.split(&quot;/&quot;).reject!(&amp;:blank?) \n    # ... \n</code></pre>\n<p>My problem here is, that <code>parent</code> is <code>caseIH130SeriesbyStevie.zip</code>\ni can go with <code>tree[&quot;root&quot;][parent.first] = </code>\nbut what if parent is 2 (or 3) elements long , like <code>[&quot;caseIH130SeriesbyStevie.zip&quot;, &quot;shaders&quot;]</code></p>\n<p>I then need to access <code>tree[&quot;root&quot;][parent.first][:children][parent.second] = {}</code>\nthe whole thing can go probpably 8 levels deep.</p>\n<p>Do i miss something or is that kind of difficult ?</p>\n<h2>Summary / tl;dr</h2>\n<p>turn  <code>&quot;a/b/c/d&quot;</code> into\n<code>[&quot;a&quot;, child: [&quot;b&quot;, child: [&quot;c&quot;, child: [&quot;d&quot;, child: []]]]]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1478091554, "post_id": 40380530, "comment_id": 68012853, "body": "Please remove your answer and edit @AndreyDeineko answer with <code>inject</code> code. Thanks"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1478091615, "post_id": 40380530, "comment_id": 68012891, "body": "@ABPrime there is no need to edit my answer with <code>inject</code> because it is always more efficient to make singe traverse over an array than two (as here <code>map</code> and <code>inject</code>) :)"}, {"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478091985, "post_id": 40380530, "comment_id": 68013130, "body": "@AndreyDeineko: Agree."}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1478091494, "last_edit_date": 1478091494, "creation_date": 1478091399, "answer_id": 40380530, "question_id": 40380428, "link": "https://stackoverflow.com/questions/40380428/rails-sum-method-returns-undefined/40380530#40380530", "title": "Rails sum method returns undefined", "body": "<p>because your @debits_for_rate is an object not an array of numbers.</p>\n\n<p><code> @debits_for_rate.sum(&amp;:amount) </code>\nelse </p>\n\n<p><code>@debits_for_rate.map(&amp;:amount).inject(:+) </code></p>\n\n<p>This will fetch you the sum.</p>\n"}, {"comments": [{"owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "edited": false, "score": 0, "creation_date": 1478092023, "post_id": 40380536, "comment_id": 68013165, "body": "Agreed above is inefficient; child of a slow do-a-little-step-n-verify  process.  Solved"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 5, "last_activity_date": 1478091415, "creation_date": 1478091415, "answer_id": 40380536, "question_id": 40380428, "link": "https://stackoverflow.com/questions/40380428/rails-sum-method-returns-undefined/40380536#40380536", "title": "Rails sum method returns undefined", "body": "<p>You are doing it in inefficient way by transforming AR into array and then performing Ruby operations while database level calculations could be used instead.</p>\n\n<p>But to solve this particular issue you should go with:</p>\n\n<pre><code>@debits_for_rate.sum(&amp;:amount) \n</code></pre>\n"}], "owner": {"reputation": 4075, "user_id": 2291357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/dff442b2192921f04f324948d263e001?s=128&d=identicon&r=PG", "display_name": "Jerome", "link": "https://stackoverflow.com/users/2291357/jerome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "accepted_answer_id": 40380536, "answer_count": 2, "score": 2, "last_activity_date": 1478091722, "creation_date": 1478091111, "last_edit_date": 1478091722, "question_id": 40380428, "link": "https://stackoverflow.com/questions/40380428/rails-sum-method-returns-undefined", "title": "Rails sum method returns undefined", "body": "<p>Generating the following error <code>undefined method +' for #&lt;Debit</code></p>\n\n<p>where the controller action defines</p>\n\n<pre><code>@debits = Debit.order(\"vatunitid ASC\").where('unit_id = ? AND folio_id = ?', session[:unit_id], @folio.id).to_a\n@adhoc_folios = Folio.order(\"created_at asc\").where(['checkout IS NULL AND unit_id = ? AND id != ?', session[:unit_id], @folio.id]).all\n@vatunits = Vatunit.where(['unit_id = ?', session[:unit_id]]).to_a\n@rates = @debits.map(&amp;:vatunitid).uniq\n</code></pre>\n\n<p>and presently in the view (for testing purposes)</p>\n\n<pre><code> @rates.each do |rate| \n   @debits_for_rate = @debits.select{ |i| i.vatunitid == rate } \n   @debits_for_rate.count \n   @debits_for_rate.sum(:amount) \n</code></pre>\n\n<p>The count instruction returns a proper value<br>\nThe call to sum is deemed at this point inexistent.</p>\n\n<p>How did this come about and how to overcome it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "answers": [{"tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1478099218, "last_edit_date": 1478099218, "creation_date": 1478091215, "answer_id": 40380463, "question_id": 40380290, "link": "https://stackoverflow.com/questions/40380290/ror-ransack-how-to-add-own-sql-form-option/40380463#40380463", "title": "RoR Ransack how to add own sql + form option", "body": "<p>I would suggest you to take the user input in the form and pass pass it to controller -> model.</p>\n\n<p>Then go with below approach to fetch your query result &amp; return the response to view. </p>\n\n<pre><code>query = \"select * from employers where id = #{employer_id}\"\nresult = ActiveRecord::Base.connection.select_all query\n</code></pre>\n"}], "owner": {"reputation": 775, "user_id": 3177874, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/658b0f0286b0f1091a92731bc5b5ac62?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Zubrzycki", "link": "https://stackoverflow.com/users/3177874/micha%c5%82-zubrzycki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478099218, "creation_date": 1478090671, "question_id": 40380290, "link": "https://stackoverflow.com/questions/40380290/ror-ransack-how-to-add-own-sql-form-option", "title": "RoR Ransack how to add own sql + form option", "body": "<p>I have an sql query in RoR: \n<code>\"DATE_FORMAT(CURDATE() ,'%m-%d')= DATE_FORMAT(#{field_name} ,'%m-%d')\"</code> \nfor searching users that have birthdays today.\nI want to add it to ransack form, to be chosen on webpage. Tried <code>Ransack.configure</code> but I can't get how implement in it custom sql. Is it possible and what's the best way to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2043, "user_id": 157943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745c55f201b982c31c610cabab10a6be?s=128&d=identicon&r=PG", "display_name": "gmcnaughton", "link": "https://stackoverflow.com/users/157943/gmcnaughton"}, "edited": false, "score": 1, "creation_date": 1478089206, "post_id": 40379732, "comment_id": 68011402, "body": "Can you include the failure message you&#39;re seeing when you run the tests?"}, {"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "reply_to_user": {"reputation": 2043, "user_id": 157943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745c55f201b982c31c610cabab10a6be?s=128&d=identicon&r=PG", "display_name": "gmcnaughton", "link": "https://stackoverflow.com/users/157943/gmcnaughton"}, "edited": false, "score": 0, "creation_date": 1478089325, "post_id": 40379732, "comment_id": 68011473, "body": "Yea - sorry - pasted over it!"}, {"owner": {"reputation": 352, "user_id": 3218479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/611888728aab430eca0a26235e7a85b7?s=128&d=identicon&r=PG", "display_name": "cema-sp", "link": "https://stackoverflow.com/users/3218479/cema-sp"}, "edited": false, "score": 1, "creation_date": 1478090762, "post_id": 40379732, "comment_id": 68012357, "body": "@RaptorMan It looks like you haven&#39;t provided password reset <i>id</i> (see your <code>edit_password_reset</code> route)"}, {"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "reply_to_user": {"reputation": 352, "user_id": 3218479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/611888728aab430eca0a26235e7a85b7?s=128&d=identicon&r=PG", "display_name": "cema-sp", "link": "https://stackoverflow.com/users/3218479/cema-sp"}, "edited": false, "score": 0, "creation_date": 1478092709, "post_id": 40379732, "comment_id": 68013660, "body": "@cema-sp is this something the tutorial would have included in the partials or something that would have been listed in the fixtures?"}, {"owner": {"reputation": 352, "user_id": 3218479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/611888728aab430eca0a26235e7a85b7?s=128&d=identicon&r=PG", "display_name": "cema-sp", "link": "https://stackoverflow.com/users/3218479/cema-sp"}, "edited": false, "score": 1, "creation_date": 1478094763, "post_id": 40379732, "comment_id": 68015158, "body": "You need a User fixture. Then create a user int test: <code>@user = users(:michael)</code> and get page with: <code>get :edit, { id: @user. reset_token }</code>. See <a href=\"https://www.railstutorial.org/book/password_reset#sec-password_reset_test\" rel=\"nofollow noreferrer\">railstutorial.org/book/password_reset#sec-password_reset_tes&zwnj;&#8203;t</a>"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "edited": false, "score": 0, "creation_date": 1478089719, "post_id": 40379851, "comment_id": 68011733, "body": "I added the update to the bottom of the description ... from what I saw (frustratingly) ... create, new, edit are all present in the route.  I gave up on the rake routes, as when I edit the routes.rb file - the error message is different, telling me the file issue is either beyond my knowledge or located away from the actual routing in routes.rb"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "edited": false, "score": 1, "creation_date": 1478090581, "post_id": 40379851, "comment_id": 68012229, "body": "+ It would be nice if you could use rspec instead of mini_test. Easy to learn to you&#39;ll have great developer support. By the way michael hartl tutorial- rails 4 uses rspec by default. :)"}, {"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "edited": false, "score": 0, "creation_date": 1478093510, "post_id": 40379851, "comment_id": 68014260, "body": "I tried in both routes.rb &amp; in the controller test, I tried new, then edit, then update like so ...  &quot;get    &#39;/edit&#39;,    to: &#39;password_resets#edit&#39;&quot; with update.  No change thus far."}, {"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "edited": false, "score": 0, "creation_date": 1478098008, "post_id": 40379851, "comment_id": 68017481, "body": "I&#39;m using rails 5 tutorial ... I think ... I&#39;ve heard someone say I should go with pry over rspec &amp; mini ... in this type of situation would rspec be better or worse?  I&#39;m trying to plough through it using the books recommendations the first time...so I won&#39;t be installing any extra gems at this point (i&#39;m also nearing the limit of what my cloud9 account will allow me for memory to run at any time) @ajay"}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 1, "last_activity_date": 1478102637, "last_edit_date": 1478102637, "creation_date": 1478089303, "answer_id": 40379851, "question_id": 40379732, "link": "https://stackoverflow.com/questions/40379732/ruby-on-rails-tutorial-by-michael-hartl-no-route-action-but-its-in-the-route/40379851#40379851", "title": "Ruby on Rails Tutorial by Michael Hartl - no route action, but it&#39;s in the routes.rb", "body": "<p>Instead of <code>get :edit</code>, try <code>get '/password_resets/new'</code></p>\n\n<p>To check the route path, run <code>rake routes</code> in terminal and see\nequivalent paths for <code>:edit</code> and <code>:new</code> actions.</p>\n"}, {"comments": [{"owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "edited": false, "score": 0, "creation_date": 1478098103, "post_id": 40380809, "comment_id": 68017551, "body": "This was the best wording of the solution.  The error was indeed generated as the other two people had said - just yours helped me turn around &amp; find my error the best.  Thank you."}], "tags": [], "owner": {"reputation": 26, "user_id": 7067914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFlFge-iOUY/AAAAAAAAAAI/AAAAAAAAALQ/AOlRM84F0SU/photo.jpg?sz=128", "display_name": "Jagdeep SINGH", "link": "https://stackoverflow.com/users/7067914/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1478092207, "creation_date": 1478092207, "answer_id": 40380809, "question_id": 40379732, "link": "https://stackoverflow.com/questions/40379732/ruby-on-rails-tutorial-by-michael-hartl-no-route-action-but-its-in-the-route/40380809#40380809", "title": "Ruby on Rails Tutorial by Michael Hartl - no route action, but it&#39;s in the routes.rb", "body": "<p>I think you should be passing the required parameter with the request as below:</p>\n\n<pre><code>test \"should get edit\" do\n  get :edit, { id: &lt;id-of-the-resource-for-your-controller&gt; }\n  assert_response :success\nend\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 4289112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spCU9.jpg?s=128&g=1", "display_name": "Mirv - Matt", "link": "https://stackoverflow.com/users/4289112/mirv-matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 40380809, "answer_count": 2, "score": -1, "last_activity_date": 1478102637, "creation_date": 1478088934, "last_edit_date": 1478097823, "question_id": 40379732, "link": "https://stackoverflow.com/questions/40379732/ruby-on-rails-tutorial-by-michael-hartl-no-route-action-but-its-in-the-route", "title": "Ruby on Rails Tutorial by Michael Hartl - no route action, but it&#39;s in the routes.rb", "body": "<p><strong>Update</strong> - typical user error - <em>guys thanks for all the technical help!  It looks like the password_reset_controller_test should have never been made.  For some reason - my control exists even though there was a \"--no-test-framework\" used in 12.1.1.  I'm pretty sure I mistyped something &amp; that's why the tutorial doesn't have a ID for the user on it.</em>  To recap:  the solution was removing the controller test - as there's an integration test made later.</p>\n\n<p>I've got an issue with an error claiming no route, but can clearly see the route in the routes.rb file &amp; in the rake routes.  I'm using Michael Hartl's Ruby on Rails tutorial guide.  In chapter 12, I've got a failing test. I tested this by removing and adding back several parts - it appears to actually be in the controller, even though it claims no action found.  I also checked for params issues as best as I know how with my limited knowledge.</p>\n\n<p>Any hints would be appreciated!</p>\n\n<p>Thanks ...</p>\n\n<pre><code>ERROR[\"test_should_get_edit\", PasswordResetsControllerTest, 2016-10-20 15:24:37 +0000]\n test_should_get_edit#PasswordResetsControllerTest (1476977077.08s)\nActionController::UrlGenerationError:         ActionController::UrlGenerationError: No route matches {:action=&gt;\"edit\", :controller=&gt;\"password_resets\"}\n            test/controllers/password_resets_controller_test.rb:11:in `block in &lt;class:PasswordResetsControllerTest&gt;'\n        test/controllers/password_resets_controller_test.rb:11:in `block in &lt;class:PasswordResetsControllerTest&gt;'\n\n  54/54: [=======================================================================] 100% Time: 00:00:03, Time: 00:00:03\n\nFinished in 3.02339s\n54 tests, 279 assertions, 0 failures, 1 errors, 0 skips\n</code></pre>\n\n<p>Controller Test</p>\n\n<pre><code>password_resets_controller_test\n    require 'test_helper'\n\n    class PasswordResetsControllerTest &lt; ActionController::TestCase\n\n      test \"should get new\" do\n        get :new\n        assert_response :success\n      end\n\n      test \"should get edit\" do\n        get :edit\n        assert_response :success\n      end\n    end\n</code></pre>\n\n<p>Routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  root   'static_pages#home'\n  get    '/help',    to: 'static_pages#help'\n  get    '/about',   to: 'static_pages#about'\n  get    '/contact', to: 'static_pages#contact'\n  get    '/signup',  to: 'users#new'\n  get    '/login',   to: 'sessions#new'\n  post   '/login',   to: 'sessions#create'\n  delete '/logout',  to: 'sessions#destroy'\n\n  resources :users\n  resources :account_activations, only: [:edit]\n  resources :password_resets,     only: [:new, :create, :edit, :update]\n  resources :microposts,          only: [:create, :destroy]\nend\n</code></pre>\n\n<p>Controller file</p>\n\n<pre><code>class PasswordResetsController &lt; ApplicationController\n  before_action :get_user,         only: [:edit, :update]\n  before_action :valid_user,       only: [:edit, :update]\n  before_action :check_expiration, only: [:edit, :update]    # Case (1)\n\n  def new\n  end\n\n  def create\n    @user = User.find_by(email: params[:password_reset][:email].downcase)\n    if @user\n      @user.create_reset_digest\n      @user.send_password_reset_email\n      flash[:info] = \"Email sent with password reset instructions\"\n      redirect_to root_url\n    else\n      flash.now[:danger] = \"Email address not found\"\n      render 'new'\n    end\n  end\n\n  def edit\n  end\n\n  def update\n    if params[:user][:password].empty?\n      @user.errors.add(:password, \"can't be empty\")\n      render 'edit'\n    elsif @user.update_attributes(user_params)\n      log_in @user\n      @user.update_attribute(:reset_digest, nil)\n      flash[:success] = \"Password has been reset.\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n\n  private\n\n    def user_params\n      params.require(:user).permit(:password, :password_confirmation)\n    end\n\n    # Before filters\n\n    def get_user\n      @user = User.find_by(email: params[:email])\n    end\n\n    # Confirms a valid user.\n    def valid_user\n      unless (@user &amp;&amp; @user.activated? &amp;&amp;\n              @user.authenticated?(:reset, params[:id]))\n        redirect_to root_url\n      end\n    end\n\n    # Checks expiration of reset token.\n    def check_expiration\n      if @user.password_reset_expired?\n        flash[:danger] = \"Password reset has expired.\"\n        redirect_to new_password_reset_url\n      end\n    end\nend\n</code></pre>\n\n<p>Here's rake routes file - if I read this right there's an edit option in there ... also the editing of the route file when I remove the resource gets a different error message.</p>\n\n<pre><code>rake routes\n                 Prefix Verb   URI Pattern                             Controller#Action\n                   root GET    /                                       static_pages#home\n                   help GET    /help(.:format)                         static_pages#help\n                  about GET    /about(.:format)                        static_pages#about\n                contact GET    /contact(.:format)                      static_pages#contact\n                 signup GET    /signup(.:format)                       users#new\n                  login GET    /login(.:format)                        sessions#new\n                        POST   /login(.:format)                        sessions#create\n                 logout DELETE /logout(.:format)                       sessions#destroy\n                  users GET    /users(.:format)                        users#index\n                        POST   /users(.:format)                        users#create\n               new_user GET    /users/new(.:format)                    users#new\n              edit_user GET    /users/:id/edit(.:format)               users#edit\n                   user GET    /users/:id(.:format)                    users#show\n                        PATCH  /users/:id(.:format)                    users#update\n                        PUT    /users/:id(.:format)                    users#update\n                        DELETE /users/:id(.:format)                    users#destroy\nedit_account_activation GET    /account_activations/:id/edit(.:format) account_activations#edit\n        password_resets POST   /password_resets(.:format)              password_resets#create\n     new_password_reset GET    /password_resets/new(.:format)          password_resets#new\n    edit_password_reset GET    /password_resets/:id/edit(.:format)     password_resets#edit\n         password_reset PATCH  /password_resets/:id(.:format)          password_resets#update\n                        PUT    /password_resets/:id(.:format)          password_resets#update\n             microposts POST   /microposts(.:format)                   microposts#create\n              micropost DELETE /microposts/:id(.:format)               microposts#destroy\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1478088687, "last_edit_date": 1478088687, "creation_date": 1478086562, "answer_id": 40378973, "question_id": 40378925, "link": "https://stackoverflow.com/questions/40378925/get-array-element-by-key/40378973#40378973", "title": "Get array element by key", "body": "<p>Try</p>\n\n<pre><code>comic = COMICS[params['key'].to_i]\n</code></pre>\n\n<p>The param comes from the path so it's a string.</p>\n"}], "owner": {"reputation": 199, "user_id": 5297613, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53c5b7f3fe4021ec4ad6dc3dc05cf65b?s=128&d=identicon&r=PG&f=1", "display_name": "Devoted Enthusiast", "link": "https://stackoverflow.com/users/5297613/devoted-enthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 40378973, "answer_count": 1, "score": 1, "last_activity_date": 1478088687, "creation_date": 1478086438, "question_id": 40378925, "link": "https://stackoverflow.com/questions/40378925/get-array-element-by-key", "title": "Get array element by key", "body": "<p>This is my <code>app.rb</code>:</p>\n\n<pre><code>require 'sinatra'\nCOMICS = [\n  {\n    'name' =&gt; 'Test #1',\n    'code' =&gt; 'Link \u21161'\n    },\n  {\n    'name' =&gt; 'Test #2',\n    'code' =&gt; 'Test \u21162'\n    },\n  {\n    'name' =&gt; 'Test #3',\n    'code' =&gt; 'Test \u21163'\n    },\n  {\n    'name' =&gt; 'Test #4',\n    'code' =&gt; 'Test \u21164'\n    }\n  ]\nget '/' do\n  erb :index, :locals =&gt; { :comics =&gt; COMICS }\nend\n\nget '/single/:key' do\n  comic = COMICS[params['key']]\n  erb :single, :locals =&gt; { :comic =&gt; comic }\nend\n</code></pre>\n\n<p>But when I try accessing: <code>/single/0</code> for example I get the following error:</p>\n\n<blockquote>\n  <p>TypeError at /single/1</p>\n  \n  <p>no implicit conversion of String into Integer</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "controller"], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478085512, "post_id": 40378591, "comment_id": 68009152, "body": "So should I place that method under applicationController?"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1478085409, "creation_date": 1478085409, "answer_id": 40378591, "question_id": 40378534, "link": "https://stackoverflow.com/questions/40378534/authenticate-user-in-controller-and-then-redirect/40378591#40378591", "title": "Authenticate user in controller and then redirect", "body": "<p>If you need to call adminLogin from ProjectsController, it should be defined either in ApplicationController or in a common parent class which derives from ApplicationController.</p>\n"}, {"comments": [{"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478091402, "post_id": 40379555, "comment_id": 68012767, "body": "By using your exact code I am getting a <code>The website rerouted too many times</code> so I am not quite sure if that&#39;s the right thing. If I changed your method to this   <code>@email = &#39;username&#39;     redirect_to( @email == &#39;username&#39; ? admin_projects_path : admin_login_path )</code>  It is getting the right email and routing to <code>&#47;admin&#47;projects</code> but then it&#39;s crashing with again too many times rerouting error"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478091841, "post_id": 40379555, "comment_id": 68013029, "body": "Cool, give it a shot now. Might have tried to get too fancy with it. When all else fails, just go with a good old if/else :)"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478092222, "post_id": 40379555, "comment_id": 68013304, "body": "Please see my comment above with the updated code ^^^"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478094037, "post_id": 40379555, "comment_id": 68014615, "body": "You&#39;re missing an end on your if/else statement"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478094234, "post_id": 40379555, "comment_id": 68014759, "body": "It&#39;s there. Just didn&#39;t format properly here. The variable is going right in the if statement, so is just the redirect_to which I guess is not redirecting me there. As I have a before each statement, should I tell projects_controller that <code>email</code> now has a value ?"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478094367, "post_id": 40379555, "comment_id": 68014848, "body": "See the edit to the answer. Basically just checks to make sure email params are present"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478094720, "post_id": 40379555, "comment_id": 68015126, "body": "Nope. It is working perfect though if I make it only on <code>before_filter :adminLogin, only: :show</code> show action. So it&#39;s behaving weird just if I have :index in the filter, or I can say the filter on the :index action"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478095650, "post_id": 40379555, "comment_id": 68015782, "body": "I can see if I route it somewhere else that&#39;s working, so my guess is that it&#39;s getting redirected to admin_projects_path then something must throw it back to admin_login_path and I am not quite sure what that is"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478095981, "post_id": 40379555, "comment_id": 68015977, "body": "Yeah, hard to say without more code. My answer was more to point you in the right direction of how to structure the controllers to fit your needs. You&#39;ll probably have to work out the kinks that are specific to your code."}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1478096078, "post_id": 40379555, "comment_id": 68016047, "body": "Thank you for your help !"}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1478094327, "last_edit_date": 1478094327, "creation_date": 1478088366, "answer_id": 40379555, "question_id": 40378534, "link": "https://stackoverflow.com/questions/40378534/authenticate-user-in-controller-and-then-redirect/40379555#40379555", "title": "Authenticate user in controller and then redirect", "body": "<p>You should be able to get by with this in application_controller:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def redirect_unless_admin\n    email = params[:email]\n    password = params[:password]\n    if params[:email].present? &amp;&amp; email == 'username'\n      redirect_to admin_projects_path\n    else\n      redirect_to root_path\n    end\n  end\nend\n</code></pre>\n\n<p>and this in admin/projects_controller:</p>\n\n<pre><code>class Admin::ProjectsController &lt; ApplicationController\n  before_filter :redirect_unless_admin\nend\n</code></pre>\n\n<p>That way the <code>redirect_unless_admin</code> method is available to any controller that inherits application_controller. You can customize the logic any way you need to figure out which redirect to use, but this should be a good starting point.</p>\n"}], "owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 40379555, "answer_count": 2, "score": 0, "last_activity_date": 1478094327, "creation_date": 1478085204, "last_edit_date": 1478092057, "question_id": 40378534, "link": "https://stackoverflow.com/questions/40378534/authenticate-user-in-controller-and-then-redirect", "title": "Authenticate user in controller and then redirect", "body": "<p>I have the following code under <code>projects_controller.rb</code></p>\n\n<pre><code>class Admin::ProjectsController &lt; ApplicationController\nbefore_filter :require_login\n\ndef require_login\n  while (adminLogin != 'username')\n    redirect_to admin_login_path and return\n  end\nend\n</code></pre>\n\n<p>And this under <code>application_controller.rb</code></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n# Return the admin user\n def adminLogin\n   @email = params[:email]\n   @password = params[:password]\n   return @email\n end\nend\n</code></pre>\n\n<p>I am trying to get the email in that form and pass it to the projects controller so when the email is defined, the admin can log in. When I press the submit button on the form I can see the right email being sent to the projects controller by using <code>&lt;%= debug @email %&gt;</code> in the form, but the page redirects to login again. How can I then go to /projects?</p>\n\n<p>[UPDATE]:</p>\n\n<p><code>application_controller.rb</code></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\nprotect_from_forgery\n\n# Return the admin user\n\ndef redirect_unless_admin\n@email = params[:email]\npassword = params[:password]\nif (@email == 'username')\n  redirect_to admin_projects_path\nelse\n   redirect_to admin_login_path\nend\n</code></pre>\n\n<p>end\nend</p>\n\n<p>and I require this method in my <code>projects_controller.rb</code>. This is just breaking it, redirecting too many times</p>\n"}, {"tags": ["ruby", "rubygems", "openshift"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1478086151, "post_id": 40378185, "comment_id": 68009515, "body": "I think you&#39;ll need to show some code to get any answers :)"}, {"owner": {"reputation": 127, "user_id": 3096016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3229108b44a3673773958765d003703?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiamour", "link": "https://stackoverflow.com/users/3096016/sathiamour"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1478090113, "post_id": 40378185, "comment_id": 68011949, "body": "@Kris I attached the command line image. hope you understand my error."}], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 720515, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80789bafd34cfc456b309bedbd2b7e51?s=128&d=identicon&r=PG", "display_name": "doeke", "link": "https://stackoverflow.com/users/720515/doeke"}, "edited": false, "score": 0, "creation_date": 1490192927, "post_id": 40390674, "comment_id": 73003738, "body": "Access to OpenShift Online (Next Gen) is still restricted, and the original platform is no longer available to new users. I guess I&#39;ll have to look for an alternative."}, {"owner": {"reputation": 68, "user_id": 7035837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UTGoH.jpg?s=128&g=1", "display_name": "mithun_ghose", "link": "https://stackoverflow.com/users/7035837/mithun-ghose"}, "edited": false, "score": 0, "creation_date": 1511955410, "post_id": 40390674, "comment_id": 82060309, "body": "The link is broken"}], "tags": [], "owner": {"reputation": 31, "user_id": 6828695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4dbd884308e7387f2727075187d2b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Suninvictus", "link": "https://stackoverflow.com/users/6828695/suninvictus"}, "is_accepted": false, "score": 3, "last_activity_date": 1511957528, "last_edit_date": 1511957528, "creation_date": 1478124656, "answer_id": 40390674, "question_id": 40378185, "link": "https://stackoverflow.com/questions/40378185/rhc-setup-login-error/40390674#40390674", "title": "rhc setup login error", "body": "<p>developer preview is no longer using rhc, use oc instead as command line tool</p>\n\n<p><a href=\"https://docs.openshift.com/enterprise/3.0/cli_reference/get_started_cli.html\" rel=\"nofollow noreferrer\">https://docs.openshift.com/enterprise/3.0/cli_reference/get_started_cli.html</a></p>\n"}], "owner": {"reputation": 127, "user_id": 3096016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3229108b44a3673773958765d003703?s=128&d=identicon&r=PG&f=1", "display_name": "Sathiamour", "link": "https://stackoverflow.com/users/3096016/sathiamour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1662, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511957528, "creation_date": 1478084116, "last_edit_date": 1478089990, "question_id": 40378185, "link": "https://stackoverflow.com/questions/40378185/rhc-setup-login-error", "title": "rhc setup login error", "body": "<p>I got error while Openshift login through windows command prompt in rhc setup. Please look below code and give some solution.</p>\n\n<p>The error shows like:</p>\n\n<blockquote>\n  <p>\"The OpenShift Online (Next Gen) Developer Preview is here! We will\n  not be accepting new users onto the OpenShift Online (v2) platform\"\n  <a href=\"https://i.stack.imgur.com/HhzIj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HhzIj.jpg\" alt=\"enter image description here\"></a></p>\n</blockquote>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 1, "last_activity_date": 1478083557, "creation_date": 1478083557, "answer_id": 40378016, "question_id": 40377812, "link": "https://stackoverflow.com/questions/40377812/ruby-regex-match-method/40378016#40378016", "title": "Ruby Regex match method", "body": "<p>Try this:</p>\n\n<p>Edited the regex and put () to capture group and the beginning and the end</p>\n\n<pre><code>re = /^([\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]{2,})$/m\nstr = 'a@b.com\np@qasdf.com\nadbadf@bwdsfqaf.com\n....\na@bdotcom\n\n\naasdf.com\n\nwww.yahoo.com'\n\n# Print the match result\nstr.scan(re) do |match|\n    puts match.to_s\nend\n</code></pre>\n\n<p><a href=\"http://ideone.com/8xkQ5M\" rel=\"nofollow noreferrer\">Running sample code</a></p>\n"}, {"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 3, "last_activity_date": 1478083684, "creation_date": 1478083684, "answer_id": 40378055, "question_id": 40377812, "link": "https://stackoverflow.com/questions/40377812/ruby-regex-match-method/40378055#40378055", "title": "Ruby Regex match method", "body": "<p>The regex matches email addresses:</p>\n\n<pre><code>'invalid' =~ email_regex\n=&gt; nil # which boolean value is false\n\n'email@example.com' =~ email_regex\n=&gt; 0 # which boolean value is true\n</code></pre>\n\n<p>however:</p>\n\n<pre><code>\"email@example.com\\n\" =~ email_regex\n=&gt; nil\n</code></pre>\n\n<p>The newline character <code>\\n</code> is appended by <code>gets</code> to every input.</p>\n\n<p>That is why, the <code>until</code> loop will run forever regardless of what you will type in the terminal. The matching result will always be <code>nil</code> because of the newline character.</p>\n\n<p>Try using <code>gets.chomp</code>, which will trim the newline character and your code should work.</p>\n"}], "owner": {"reputation": 165, "user_id": 4236374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb2a4e7e90fa03b288828008eaf7eba8?s=128&d=identicon&r=PG&f=1", "display_name": "Airwavezx", "link": "https://stackoverflow.com/users/4236374/airwavezx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 40378055, "answer_count": 2, "score": 2, "last_activity_date": 1478083684, "creation_date": 1478083025, "question_id": 40377812, "link": "https://stackoverflow.com/questions/40377812/ruby-regex-match-method", "title": "Ruby Regex match method", "body": "<p>I was giving this regex <code>/\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]{2,}\\z/</code> and I'm to use it in order to verify the validity of an email address.</p>\n\n<p>This is my first Ruby code and I'm not sure how to do it. I was told to use the <code>.match</code> method, which returns <code>MatchData</code> object. But how do I go on verifying that the <code>MatchData</code> object confirms the validity?</p>\n\n<p>I attempted using the following, but it seems that it's accepting any string, even not an email address.</p>\n\n<pre><code>#Register new handler\ndef register_handler\n\n    email_regex = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]{2,}\\z/\n    email = \"invalid\"\n    unless email =~ email_regex then\n        puts(\"Insert your e-mail address:\")\n        email = gets\n    end\n\n    puts(\"email received\")\n\n\nend\n</code></pre>\n\n<p>What is the correct way to do this? Either using <code>.match</code> or the method I attempted above.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "boolean"], "answers": [{"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478082383, "post_id": 40377472, "comment_id": 68007211, "body": "I think, in this case <code>if isbookmarked == 0</code> is optional)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478082452, "post_id": 40377472, "comment_id": 68007246, "body": "@AlexGolubenko you&#39;re right -  in this specific case it is. But I usually tend to double check, so here I&#39;d also have <code>else raise &#39;Invalid isbookmarked value&#39;</code> :)"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1478082569, "post_id": 40377472, "comment_id": 68007330, "body": "@AndreyDeineko given the request is coming from an app, it definitely makes sense to raise an error if an incorrect value is passed."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478082663, "post_id": 40377472, "comment_id": 68007393, "body": "@AndreyDeineko Yeah, your right) Also, what you think about using <code>case</code>  instead <code>if</code>, for solve this task?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478082802, "post_id": 40377472, "comment_id": 68007476, "body": "@AlexGolubenko <code>case</code> would work perfectly fine here :)"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478083055, "post_id": 40377472, "comment_id": 68007636, "body": "@AndreyDeineko Thanks! +1 :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1478082058, "creation_date": 1478082058, "answer_id": 40377472, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement/40377472#40377472", "title": "Rails - map 1 to true in if statement", "body": "<p>In Ruby everything is truthy except for <code>nil</code> and <code>false</code>. Thus both <code>0</code> and <code>1</code> are truthy - you will never reach the <code>else</code> part with this set up.</p>\n\n<p>So in your case you want to check exactly for <code>0</code> or <code>1</code>:</p>\n\n<pre><code>if isbookmarked == 1\n  do something\nelsif isbookmarked == 0\n  do something\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 1, "last_activity_date": 1478083014, "last_edit_date": 1478083014, "creation_date": 1478082681, "answer_id": 40377687, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement/40377687#40377687", "title": "Rails - map 1 to true in if statement", "body": "<p>You can also use <a href=\"https://ruby-doc.org/core-1.9.3/Numeric.html#method-i-zero-3F\" rel=\"nofollow noreferrer\"><code>zero?</code></a> to check whether the value is zero or not. But there is no special method to check 1 only way <code>isbookmarked == 1</code></p>\n\n<pre><code>if isbookmarked.zero?\n  do something\nelse\n  do something\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478082950, "creation_date": 1478082950, "answer_id": 40377780, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement/40377780#40377780", "title": "Rails - map 1 to true in if statement", "body": "<p>You can use this gem called <a href=\"https://github.com/prodis/wannabe_bool\" rel=\"nofollow noreferrer\">wannabe_bool</a>, you will get a <code>to_b</code> method which can convert almost everything to boolean, you can check the gem documentation for all the options available.</p>\n\n<pre><code>if isbookmarked.to_b\n  do something\nelse\n  do something\nend\n</code></pre>\n\n<p>I have tried few of the things on console that might help you</p>\n\n<pre><code>2.0.0-p451 :002 &gt; \"1\".to_b\n =&gt; true \n2.0.0-p451 :003 &gt; \"0\".to_b\n =&gt; false \n2.0.0-p451 :004 &gt; 1.to_b\n =&gt; true \n2.0.0-p451 :005 &gt; 0.to_b\n =&gt; false\n</code></pre>\n\n<p><a href=\"https://github.com/prodis/wannabe_bool\" rel=\"nofollow noreferrer\">https://github.com/prodis/wannabe_bool</a></p>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1478085593, "last_edit_date": 1478085593, "creation_date": 1478082966, "answer_id": 40377788, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement/40377788#40377788", "title": "Rails - map 1 to true in if statement", "body": "<p>So, in addition to @AndreyDaineko, you also can use <a href=\"http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-case\" rel=\"nofollow noreferrer\"><code>case</code></a></p>\n\n<pre><code>case isbookmarked\nwhen 1\n  do something\nwhen 0\n  do something\nelse\n  something go wrong\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478084847, "last_edit_date": 1478084847, "creation_date": 1478084422, "answer_id": 40378296, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement/40378296#40378296", "title": "Rails - map 1 to true in if statement", "body": "<p>A helper method like below may come in handy.</p>\n\n<pre><code>def truthy?(val)\n  val.present? &amp;&amp; !val.to_s.strip.in?(['false', '0'])\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1478085844, "last_edit_date": 1478085844, "creation_date": 1478085523, "answer_id": 40378629, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement/40378629#40378629", "title": "Rails - map 1 to true in if statement", "body": "<p>I would argue that you should use the same logic that Rails uses to identify booleans. Rails implements <a href=\"https://github.com/rails/rails/blob/master/activemodel/lib/active_model/type/boolean.rb\" rel=\"nofollow noreferrer\">type casting to booleans</a> like this:</p>\n\n<pre><code>FALSE_VALUES = [false, 0, \"0\", \"f\", \"F\", \"false\", \"FALSE\", \"off\", \"OFF\"].to_set\n\ndef cast_value(value)\n  if value == \"\"\n    nil\n  else\n    !FALSE_VALUES.include?(value)\n  end\nend\n</code></pre>\n\n<p>You can use this implementation like this (Rails 5 version):</p>\n\n<pre><code>ActiveModel::Type::Boolean.new.cast(isbookmarked)\n</code></pre>\n\n<p>Or the Rails 4.2 versions would look like this:</p>\n\n<pre><code>ActiveRecord::Type::Boolean.new.type_cast_from_user(isbookmarked)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5685130, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4b073ec52fb17437b0fe60967a077e1?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/5685130/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 40377472, "answer_count": 6, "score": 1, "last_activity_date": 1478085844, "creation_date": 1478082004, "last_edit_date": 1478083689, "question_id": 40377451, "link": "https://stackoverflow.com/questions/40377451/rails-map-1-to-true-in-if-statement", "title": "Rails - map 1 to true in if statement", "body": "<p>I am getting a request from mobile app. They are sending a variable <code>isbookmarked</code> that can be either <code>1</code> or <code>0</code>. I am checking in if statement. </p>\n\n<pre><code>if isbookmarked\n  do something\nelse\n  do something\nend\n</code></pre>\n\n<p>The <code>else</code> part is never executed because <code>0</code> is not recognised as <code>false</code> </p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478079976, "post_id": 40376745, "comment_id": 68005678, "body": "thank you for clearing that up. Is there a preferred way, so module or call the class as you have specified ?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478080094, "post_id": 40376745, "comment_id": 68005747, "body": "It usually depends on the situation, I use both. But here if you defined <code>BikeCheck</code> only to contain a method you want to use in <code>BikeCommands</code> - it definitely qualifies as a case to use module instead :)"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478080356, "post_id": 40376745, "comment_id": 68005920, "body": "thanks again, when inlcuding/extending I can just call the method by name then?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478080434, "post_id": 40376745, "comment_id": 68005961, "body": "@Richlewis right. When method is mixed in you can use it by name :)"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478080537, "post_id": 40376745, "comment_id": 68006034, "body": "so i&#39;ve changed my class to a module, removed <code>BikeCheck.new</code> and then within <code>BikeCommands</code> class I have <code>include BikeCheck</code>. but still get same error, if you could provide a module example that would help a lot, thanks"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478080800, "post_id": 40376745, "comment_id": 68006216, "body": "remove <code>self</code> from <code>check_frame_number</code> method definition, add <code>extend BikeCheck</code> in <code>BikeCommands</code> and of course <code>require</code> the file with module at the top. It would work, the only thing is that you defined <code>check_frame_number</code> to not accept any arguments, but are passing <code>match[:frame_number]</code>.."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478080863, "post_id": 40376745, "comment_id": 68006255, "body": "ah i see, sorry that was a typo with not accepting an argument"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1478079871, "creation_date": 1478079871, "answer_id": 40376745, "question_id": 40376669, "link": "https://stackoverflow.com/questions/40376669/undefined-method-for-class-sinatra/40376745#40376745", "title": "Undefined method for class - Sinatra", "body": "<p>No, you can not require a method defined in class - methods defined in class only available to class, class instances and within the inheritance.</p>\n\n<p>Mixing method only possible with including modules.</p>\n\n<p>To solve you issue you could either do</p>\n\n<pre><code>class BikeCommands &lt; SlackRubyBot::Bot\n  match /^Is this bike stolen (?&lt;frame_number&gt;\\w*)\\?$/ do |client, data, match|\n    BikeCheck.check_frame_number(match[:frame_number]) # &lt;===========\n    client.say(channel: data.channel, text: @message)\n  end\nend\n</code></pre>\n\n<p>or write a module with the method and <code>include</code>/<code>extend</code> in class, you want that method to be available in.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 40376745, "answer_count": 1, "score": 0, "last_activity_date": 1525702061, "creation_date": 1478079637, "last_edit_date": 1525702061, "question_id": 40376669, "link": "https://stackoverflow.com/questions/40376669/undefined-method-for-class-sinatra", "title": "Undefined method for class - Sinatra", "body": "<p>It seems I don't quite understand initializing or using a class within another class.</p>\n\n<p>I have a Sinatra app and have created a class to handle fetching data from an api</p>\n\n<pre><code># path: ./lib/api/bikes/bike_check\nclass BikeCheck\n  def self.check_frame_number(argument)\n    # logic here\n  end\nend\nBikeCheck.new\n</code></pre>\n\n<p>I then have another class that needs to consume/use the <code>check_frame_number</code> method</p>\n\n<pre><code>require 'slack-ruby-bot'\n# Class that calls BikeCheck api\nrequire './lib/api/bikes/bike_check'\n\nclass BikeCommands &lt; SlackRubyBot::Bot\n  match /^Is this bike stolen (?&lt;frame_number&gt;\\w*)\\?$/ do |client, data, match|\n    check_frame_number(match[:frame_number])\n    client.say(channel: data.channel, text: @message)\n  end\nend\nBikeCommands.run\n</code></pre>\n\n<p>When <code>check_frame_number</code> is called I get a <code>undefined method</code> error. What I would like to know is what basic thing am I not doing/understanding, I thought by requiring the file which has the class it would be available to use.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1478079214, "post_id": 40376503, "comment_id": 68005273, "body": "In spite of that it sounds like a bad idea in the first place you could simply put your whole script inside <code>while true end</code> block - it will run over and over again"}], "answers": [{"tags": [], "owner": {"reputation": 8871, "user_id": 1260906, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aPM5A.png?s=128&g=1", "display_name": "Afr", "link": "https://stackoverflow.com/users/1260906/afr"}, "is_accepted": true, "score": 2, "last_activity_date": 1478081089, "creation_date": 1478081089, "answer_id": 40377138, "question_id": 40376503, "link": "https://stackoverflow.com/questions/40376503/ruby-restart-script-automatically-once-it-ends-execution/40377138#40377138", "title": "ruby restart script automatically once it ends execution", "body": "<p>I have a ruby daemon running on my server and for some mysterious reasons it crashes some times. I wrapped it into a <code>while true</code> loop and print me some timestamps to <code>stdout</code>, like that:</p>\n\n<pre><code>#!/bin/bash\nwhile true; do\n    echo $(date +%Y%m%d%H%M%S) \"Starting my custom ruby daemon...\"\n    ruby /home/user/my/custom/ruby/daemon.rb\n    echo $(date +%Y%m%d%H%M%S) \"My custom ruby daemon crashed. Respawning in 10 sec...\"\n    sleep 10\ndone\n</code></pre>\n\n<p>That works well. Putting a sleep into it is highly recommended, in case something goes wrong the loop wont blow up your shell.</p>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 40377138, "answer_count": 1, "score": 2, "last_activity_date": 1478081089, "creation_date": 1478079150, "question_id": 40376503, "link": "https://stackoverflow.com/questions/40376503/ruby-restart-script-automatically-once-it-ends-execution", "title": "ruby restart script automatically once it ends execution", "body": "<p>I have a ruby script which do some stuffs for long and its not predictable how long it will take to finish. But I want the script execution to be restarted automatically once it finishes the execution. Is there any possibilities to make it work in Ruby 1.8.7?</p>\n"}, {"tags": ["ruby", "chef-infra", "test-kitchen", "chef-zero", "inspec"], "comments": [{"owner": {"reputation": 501, "user_id": 4978971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12568bf3b1251cdccebcbcabdc3f241c?s=128&d=identicon&r=PG&f=1", "display_name": "JackChance", "link": "https://stackoverflow.com/users/4978971/jackchance"}, "edited": false, "score": 0, "creation_date": 1478639011, "post_id": 40376456, "comment_id": 68236932, "body": "<a href=\"http://inspec.io/docs/reference/ruby_usage/\" rel=\"nofollow noreferrer\">inspec.io/docs/reference/ruby_usage</a> might help you out."}, {"owner": {"reputation": 61, "user_id": 7103529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4912abcf53ef67283b8ce4c8e5891bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Cummins", "link": "https://stackoverflow.com/users/7103529/martin-cummins"}, "reply_to_user": {"reputation": 501, "user_id": 4978971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12568bf3b1251cdccebcbcabdc3f241c?s=128&d=identicon&r=PG&f=1", "display_name": "JackChance", "link": "https://stackoverflow.com/users/4978971/jackchance"}, "edited": false, "score": 0, "creation_date": 1480936136, "post_id": 40376456, "comment_id": 69154681, "body": "Thanks, that looks like what I need I had hoped there was a more straightforward way."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7103529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4912abcf53ef67283b8ce4c8e5891bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Cummins", "link": "https://stackoverflow.com/users/7103529/martin-cummins"}, "edited": false, "score": 0, "creation_date": 1480936002, "post_id": 40681692, "comment_id": 69154586, "body": "Thanks coderanger, I had expected it would be different as the approach used uses the Chef DSL. Will try your suggestion thanks!"}, {"owner": {"reputation": 19821, "user_id": 170230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cNDYy.png?s=128&g=1", "display_name": "Draco Ater", "link": "https://stackoverflow.com/users/170230/draco-ater"}, "edited": false, "score": 0, "creation_date": 1562591211, "post_id": 40681692, "comment_id": 100411374, "body": "@coderanger Why do you suggest to use <code>command</code> and not ruby native <code>IO.read</code>?"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1479485947, "creation_date": 1479485947, "answer_id": 40681692, "question_id": 40376456, "link": "https://stackoverflow.com/questions/40376456/how-do-i-access-chef-data-bags-in-inspec/40681692#40681692", "title": "How do I access Chef data_bags in InSpec", "body": "<p>This is not possible. InSpec runs totally separately from Chef and has nothing to do with Chef internally. You would have to write the bag items as files from the Chef side and then read them in via your InSpec code, which would be tricky, something like this perhaps (untested):</p>\n\n<pre><code>item = JSON.parse(command('cat /tmp/item.json').stdout)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": false, "score": 0, "last_activity_date": 1547715925, "creation_date": 1547715925, "answer_id": 54232318, "question_id": 40376456, "link": "https://stackoverflow.com/questions/40376456/how-do-i-access-chef-data-bags-in-inspec/54232318#54232318", "title": "How do I access Chef data_bags in InSpec", "body": "<p>there are many ways to <a href=\"https://www.inspec.io/docs/reference/cli/\" rel=\"nofollow noreferrer\">execute <code>inspec</code></a> -- local, SSH, WinRM, or Dockerit -- and isn't clear from the question how do you execute <code>inspec</code>.</p>\n\n<p>assuming that:</p>\n\n<ol>\n<li>you execute <code>inspec</code> locally on a node connected to the chef server (install inspec on the node itself and then invoke it)</li>\n<li>the node holds the client configuration (assuming it is located in <code>/etc/chef/client.rb</code>, client key and the encrypted data bag secret key</li>\n<li><p>the inspec embedded ruby has the <code>chef</code> rubygem installed. here is a hint:</p>\n\n<p><code>$ /opt/inspec/embedded/bin/gem install chef</code></p></li>\n</ol>\n\n<p>then you can use inspec to read the data bag content by using ruby.</p>\n\n<pre><code>require 'chef'\nChef::Config.from_file '/etc/chef/client.rb'\ndata_bag = Chef::DataBagItem.load 'data_bag_name'\nitem = data_bag['item']\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7103529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4912abcf53ef67283b8ce4c8e5891bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Cummins", "link": "https://stackoverflow.com/users/7103529/martin-cummins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1356, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1547715925, "creation_date": 1478078999, "last_edit_date": 1481436664, "question_id": 40376456, "link": "https://stackoverflow.com/questions/40376456/how-do-i-access-chef-data-bags-in-inspec", "title": "How do I access Chef data_bags in InSpec", "body": "<p>I am writing InSpec tests for some new Chef recipes I am working on. I would like to utilise the data_bags used by the cookbooks to iterate through the data bag items. I can't figure out how to access them in my InSpec tests! The recipes are using the search, data_bag and data_bag_item methods. But these methods don't appear to be available in my InSpec test. I suspect these are Chef DSL specific methods? The source for the data_bags is under source control so I have access to the json for them on my local file system.</p>\n\n<p>How do I access these data_bags in Chef_zero using InSpec syntax?</p>\n\n<p>I found a couple of examples online but I don't see how the data_bags are actually loaded by chef_zero so that they can be used in the tests e.g. <a href=\"https://github.com/charlesjohnson/fundamentals-with-tests/blob/master/chef-repo/cookbooks/users/test/integration/default/serverspec/default_spec.rb\" rel=\"nofollow noreferrer\">https://github.com/charlesjohnson/fundamentals-with-tests/blob/master/chef-repo/cookbooks/users/test/integration/default/serverspec/default_spec.rb</a>\nand\n<a href=\"https://github.com/chef/chef/blob/master/kitchen-tests/test/integration/webapp/default_spec.rb\" rel=\"nofollow noreferrer\">https://github.com/chef/chef/blob/master/kitchen-tests/test/integration/webapp/default_spec.rb</a></p>\n\n<p>I am using a Windows server 2012R2 box on a Vagrant test-kitchen. This is an example of an data bag items from one of the data bags:</p>\n\n<pre><code>{\n  \"User\": \"mcummins\",\n  \"FullName\": \"Martin Cummins\",\n  \"id\": \"mcummins\"\n}\n</code></pre>\n\n<p>This particular data bag lists Windows Active Directory users added to the administrators group. </p>\n\n<p>I have set the data_bag_path in my .kitchen.yml (I set it in suites and provisioner) but I haven't got to a point where I can see which one is correct:</p>\n\n<pre><code>---\ndriver:\n  name: vagrant\n  customize:\n   natdnshostresolver1: \"on\"\n\nprovisioner:\n  name: chef_zero\n  data_bags_path: ../../../data_bags\n#  client_rb:\n#    audit_mode: :audit_only\n\nverifier:\n  name: inspec\n\nplatforms:\n   - name: mwrock/Windows2012R2\n     transport:\n      name: winrm\n\nsuites:\n  - name: default\n    data_bags_path: ../../../data_bags\n    run_list:\n      - recipe[SPMWindowsBuilder::default]\n    verifier:\n      inspec_tests:\n        - test/integration\n    attributes:\n</code></pre>\n"}, {"tags": ["ruby", "shell", "rspec"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 1, "creation_date": 1478086402, "post_id": 40376142, "comment_id": 68009671, "body": "<code>echo $PATH</code> in the script to see if it contains a path to <code>which rspec</code>. Try using the <code>bash</code> shebang in case <code>sh</code> isn&#39;t alised to it, <code>#!&#47;usr&#47;bin&#47;env bash</code>. If you project uses it also consider <code>bundle exec rspec ...</code>. And finally not sure what the <code>command</code> command is for, is it needed?"}, {"owner": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1478101772, "post_id": 40376142, "comment_id": 68020314, "body": "The <code>echo $PATH</code> within the script is a list half as big as when I do it from within the terminal, and it&#39;s missing all the ruby stuff. Any ideas why it&#39;s using a different PATH?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1478101954, "post_id": 40376142, "comment_id": 68020453, "body": "It must be loading a different environment, e.g. it might not be sourcing <code>.bashrc</code> / <code>.profile</code>, which is why I suggested the different shebang."}, {"owner": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1478194120, "post_id": 40376142, "comment_id": 68065616, "body": "The bash shebang has the same stunted path list. And although I have bundle it isn&#39;t recognised as a valid command, presumably for the same reason rspec isn&#39;t working. Perhaps I should start (or look for) a new question as to how I get a shell script with access to my PATH variable."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1478263592, "post_id": 40376142, "comment_id": 68094353, "body": "You can try to <code>source ~&#47;.bashrc</code> after the shebang. But yes, I think this is where the problem lies."}], "answers": [{"comments": [{"owner": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "edited": false, "score": 0, "creation_date": 1478101341, "post_id": 40380383, "comment_id": 68019997, "body": "If I try this the terminal doesn&#39;t show, and it deletes the content of my shell script."}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "edited": false, "score": 0, "creation_date": 1478153032, "post_id": 40380383, "comment_id": 68040346, "body": "are you using windows machine or linux/mac machine? Note: above one works perfectly for me though."}, {"owner": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "edited": false, "score": 0, "creation_date": 1478193348, "post_id": 40380383, "comment_id": 68065240, "body": "Linux Mint 18 &#175;\\_(\u30c4)_/&#175;"}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1478092169, "last_edit_date": 1478092169, "creation_date": 1478090970, "answer_id": 40380383, "question_id": 40376142, "link": "https://stackoverflow.com/questions/40376142/rspec-not-found-when-running-from-shell-script/40380383#40380383", "title": "Rspec not found when running from shell script", "body": "<pre><code>$ echo 'rspec spec/models/employers_spec.rb' &gt; my_shell.sh\n$ sh my_shell.sh\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Finished in 4.48 seconds\n1 example, 0 failures\nRandomized with seed 9820\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "is_accepted": false, "score": 0, "last_activity_date": 1478202441, "creation_date": 1478202441, "answer_id": 40410026, "question_id": 40376142, "link": "https://stackoverflow.com/questions/40376142/rspec-not-found-when-running-from-shell-script/40410026#40410026", "title": "Rspec not found when running from shell script", "body": "<p>So I kinda got it to work, and thought I'd share.</p>\n\n<p>If I double click on the sh file, it opens a terminal, but fails. And I determined that it was due to the PATH variable being incomplete. More specifically it was missing these entries...</p>\n\n<pre><code>/home/joebloggs/.rvm/gems/ruby-2.3.0/bin:\n/home/joebloggs/.rvm/gems/ruby-2.3.0@global/bin:\n/home/joebloggs/.rvm/rubies/ruby-2.3.0/bin:\n</code></pre>\n\n<p>However, if I then used the exact same terminal that failed the script because it couldn't find the rspec command, and then ran <code>./test.sh</code>, it worked. I could also directly type <code>rspec spec spec/pos_spec.rb</code> and it would also work. So it just seems that starting the script from a double click changes the PATH variable momentarily?</p>\n\n<p>Anyway, I wont mark this as the correct answer, as it doesn't solve the original problem.</p>\n\n<p><strong>TLDR:</strong> Don't double click the sh file, run it from terminal using <code>./script.sh</code>.</p>\n"}], "owner": {"reputation": 1056, "user_id": 2986364, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/F0HEH.jpg?s=128&g=1", "display_name": "I_do_python", "link": "https://stackoverflow.com/users/2986364/i-do-python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478202441, "creation_date": 1478077946, "question_id": 40376142, "link": "https://stackoverflow.com/questions/40376142/rspec-not-found-when-running-from-shell-script", "title": "Rspec not found when running from shell script", "body": "<p>I'm trying to write a shell script to execute my rspecs in a project, but the script gives the error <code>rspec: not found</code>.</p>\n\n<p>This is the script...</p>\n\n<pre><code>#!/bin/sh\ncommand rspec spec spec/pos_spec.rb\n$SHELL\n</code></pre>\n\n<p>...outputs</p>\n\n<pre><code>/home/joebloggs/GitHub/repo/test: 2: /home/joebloggs/GitHub/repo/test: rspec: not found\n</code></pre>\n\n<p>The line <code>rspec spec repo/pos_spec.rb</code> works if I type it directly into the shell, so I'm not sure why it can't find rspec. How can I get this to work?</p>\n"}, {"tags": ["ruby", "rubygems", "rbenv", "ruby-2.3.1"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1478085366, "post_id": 40376062, "comment_id": 68009060, "body": "Output of <code>gem env home</code> after <code>rbenv local 2.3.1</code>?"}, {"owner": {"reputation": 1420, "user_id": 1600966, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6ccdda7bbffae70986b07409f58e1d2b?s=128&d=identicon&r=PG", "display_name": "peuhse", "link": "https://stackoverflow.com/users/1600966/peuhse"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1478099613, "post_id": 40376062, "comment_id": 68018702, "body": "<code>&#47;Library&#47;Ruby&#47;Gems&#47;2.0.0</code> and <code>rbenv local 2.3.1</code> gives nothing"}], "answers": [{"comments": [{"owner": {"reputation": 1420, "user_id": 1600966, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6ccdda7bbffae70986b07409f58e1d2b?s=128&d=identicon&r=PG", "display_name": "peuhse", "link": "https://stackoverflow.com/users/1600966/peuhse"}, "edited": false, "score": 0, "creation_date": 1478100902, "post_id": 40381974, "comment_id": 68019670, "body": "My path looks like: <code>&#47;Users&#47;pepe&#47;.rbenv&#47;shims:&#47;Users&#47;pepe&#47;.rbenv&#47;shims:&#47;usr&#47;local&zwnj;&#8203;&#47;bin:&#47;usr&#47;bin:&#47;bin:&#47;&zwnj;&#8203;usr&#47;sbin:&#47;sbin:&#47;opt&#47;&zwnj;&#8203;X11&#47;bin:&#47;Users&#47;pepe&#47;&zwnj;&#8203;Library&#47;Android&#47;sdk&#47;&zwnj;&#8203;tools:&#47;Users&#47;pepe&#47;Li&zwnj;&#8203;brary&#47;Android&#47;sdk&#47;pl&zwnj;&#8203;atform-tools</code>"}, {"owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "reply_to_user": {"reputation": 1420, "user_id": 1600966, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6ccdda7bbffae70986b07409f58e1d2b?s=128&d=identicon&r=PG", "display_name": "peuhse", "link": "https://stackoverflow.com/users/1600966/peuhse"}, "edited": false, "score": 0, "creation_date": 1478157659, "post_id": 40381974, "comment_id": 68042133, "body": "try <code>&#47;Users&#47;pepe&#47;.rbenv&#47;shims:&#47;Users&#47;pepe&#47;.rbenv&#47;bin:&#47;Users&#47;pepe&#47;&zwnj;&#8203;.rbenv&#47;shims:&#47;usr&#47;lo&zwnj;&#8203;cal\u200c\u200b&#47;bin:&#47;usr&#47;bin:&#47;&zwnj;&#8203;bin:&#47;\u200c\u200busr&#47;sbin:&#47;sbi&zwnj;&#8203;n:&#47;opt&#47;\u200c\u200bX11&#47;bin:&#47;Us&zwnj;&#8203;ers&#47;pepe&#47;\u200c\u200bLibrary&#47;A&zwnj;&#8203;ndroid&#47;sdk&#47;\u200c\u200btools:&#47;&zwnj;&#8203;Users&#47;pepe&#47;Li\u200c\u200bbrary&zwnj;&#8203;&#47;Android&#47;sdk&#47;pl\u200c\u200batf&zwnj;&#8203;orm-tools</code>"}, {"owner": {"reputation": 1420, "user_id": 1600966, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6ccdda7bbffae70986b07409f58e1d2b?s=128&d=identicon&r=PG", "display_name": "peuhse", "link": "https://stackoverflow.com/users/1600966/peuhse"}, "edited": false, "score": 0, "creation_date": 1478773263, "post_id": 40381974, "comment_id": 68290539, "body": "I don&#39;t know how to get that specific path. Look at my bash_profile in my updated question."}], "tags": [], "owner": {"reputation": 832, "user_id": 5594180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv01N.png?s=128&g=1", "display_name": "Sa\u0161a Zejnilovi\u0107", "link": "https://stackoverflow.com/users/5594180/sa%c5%a1a-zejnilovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1478095563, "creation_date": 1478095563, "answer_id": 40381974, "question_id": 40376062, "link": "https://stackoverflow.com/questions/40376062/error-while-executing-gem-gemfilepermissionerror/40381974#40381974", "title": "ERROR: While executing gem ... (Gem::FilePermissionError)", "body": "<p>Try mooving things in <code>$PATH</code> a little. Move rbenv to the front of the <code>$PATH</code>.</p>\n\n<p><code>$PATH</code> in your shell should look roughtly like (pseudocode):</p>\n\n<pre><code>{rbenv shims} : {rbenv bin} : {system paths}\n</code></pre>\n"}], "owner": {"reputation": 1420, "user_id": 1600966, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/6ccdda7bbffae70986b07409f58e1d2b?s=128&d=identicon&r=PG", "display_name": "peuhse", "link": "https://stackoverflow.com/users/1600966/peuhse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2509, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478773511, "creation_date": 1478077711, "last_edit_date": 1478773511, "question_id": 40376062, "link": "https://stackoverflow.com/questions/40376062/error-while-executing-gem-gemfilepermissionerror", "title": "ERROR: While executing gem ... (Gem::FilePermissionError)", "body": "<p>I'm trying to setup rbenv to use with fastlane. I follow the instructions <a href=\"https://github.com/rbenv/rbenv#homebrew-on-mac-os-x\" rel=\"nofollow noreferrer\">here</a>. I've installed rbenv</p>\n\n<p><code>rbenv install 2.3.1</code></p>\n\n<p>Then updated it so the version points to: </p>\n\n<p><code>rbenv local 2.3.1</code> => <code>2.3.1 (set by /Users/pepe/Development/test-ios/.ruby-version)</code></p>\n\n<p>I then try to install bundler: </p>\n\n<p><code>gem install bundler</code> and get the following error: </p>\n\n<p><code>\nERROR:  While executing gem ... (Gem::FilePermissionError)\nYou don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.\n</code></p>\n\n<p>And running following gives me: </p>\n\n<p><code>\nrbenv which gem\n/Users/pernillau-ext/.rbenv/versions/2.3.1/bin/gem\n</code></p>\n\n<p><code>\nwhich gem\n/Users/pernillau-ext/.rbenv/shims/gem\n</code></p>\n\n<p>Obviously rbenv points to one installation of gem and the system (Mac OS  X 10.116) comes with preinstalled ruby and gems which is installed in /Library/Ruby/Gems/2.0.0 directory. So, what am I missing here? Why is gem command using the wrong version. </p>\n\n<p>EDIT: </p>\n\n<p>My bash_profile:\n<code>\nexport ANDROID_HOME=/Users/pepe/Library/Android/sdk\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_102.jdk/Contents/Home\nexport GEM_PATH=/Users/pepe/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\nexport PATH=$PATH:/Users/pernillau-ext/Library/Android/sdk/tools:/Users/pernillau-ext/Library/Android/sdk/platform-tools\nPATH=\"$(perl -e 'print join(\":\", grep { not $seen{$_}++ } split(/:/, $ENV{PATH}))')\"\neval \"$(rbenv init -)\"\n</code></p>\n"}, {"tags": ["ruby", "firefox", "selenium-webdriver", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1478108127, "creation_date": 1478108127, "answer_id": 40386269, "question_id": 40375620, "link": "https://stackoverflow.com/questions/40375620/capybara-http-auth-after-redirect/40386269#40386269", "title": "Capybara: HTTP Auth. after redirect", "body": "<p>Since you're using selenium-webdriver, after clicking on the button you can try</p>\n\n<pre><code>page.driver.send(:find_modal).authenticate(username, password)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6887693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb85aed856bad2b8bce04b10151a78f?s=128&d=identicon&r=PG&f=1", "display_name": "P.Schultz", "link": "https://stackoverflow.com/users/6887693/p-schultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478108127, "creation_date": 1478076294, "last_edit_date": 1478089859, "question_id": 40375620, "link": "https://stackoverflow.com/questions/40375620/capybara-http-auth-after-redirect", "title": "Capybara: HTTP Auth. after redirect", "body": "<p>I'm facing a problem with HTTP Auth after redirecting from another page.</p>\n\n<p>So let's assume. In my test i will visit my url with e.g <code>visit('http://admin:password@url1')</code>. \nAfter doing some stuff on this site i click on a button and i will be redirected to another site (<code>http://url2.com</code>) which requires a http auth as well. Now I need to enter new credentials which are not the same as from url1. Selecting the element and filling it with input will not work. I'm using Ruby with capybara and firefox with selenium-webdriver. How can I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6412456, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153421657022624/picture?type=large", "display_name": "Gregor", "link": "https://stackoverflow.com/users/6412456/gregor"}, "edited": false, "score": 0, "creation_date": 1478077413, "post_id": 40375825, "comment_id": 68004236, "body": "Thanks Vasile, this would go in the spec_helper but what would go in the rspec test itself?"}, {"owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "reply_to_user": {"reputation": 65, "user_id": 6412456, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153421657022624/picture?type=large", "display_name": "Gregor", "link": "https://stackoverflow.com/users/6412456/gregor"}, "edited": false, "score": 0, "creation_date": 1478080147, "post_id": 40375825, "comment_id": 68005784, "body": "I&#39;m not sure I understand. Just test the methods as usual. You have control over the response with webmock."}, {"owner": {"reputation": 65, "user_id": 6412456, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153421657022624/picture?type=large", "display_name": "Gregor", "link": "https://stackoverflow.com/users/6412456/gregor"}, "edited": false, "score": 0, "creation_date": 1478085649, "post_id": 40375825, "comment_id": 68009226, "body": "Yeah got it now! Thanks!"}, {"owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "reply_to_user": {"reputation": 65, "user_id": 6412456, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153421657022624/picture?type=large", "display_name": "Gregor", "link": "https://stackoverflow.com/users/6412456/gregor"}, "edited": false, "score": 0, "creation_date": 1478089394, "post_id": 40375825, "comment_id": 68011512, "body": "No problem. If my answer helped could you please upvote it, or select it as the best answer. If not, let me know how I can make it more clear."}], "tags": [], "owner": {"reputation": 1985, "user_id": 1629709, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ykH7V.png?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1629709/sebastian"}, "is_accepted": true, "score": 0, "last_activity_date": 1478077000, "creation_date": 1478077000, "answer_id": 40375825, "question_id": 40375589, "link": "https://stackoverflow.com/questions/40375589/how-should-i-test-this-code-with-rspec-rails/40375825#40375825", "title": "How should I test this code with rspec rails?", "body": "<p>I would use <a href=\"https://github.com/bblimke/webmock\" rel=\"nofollow noreferrer\">webmock</a> to get around making API requests.</p>\n\n<p>Here's an example on how the code in yout <code>spec_helper.rb</code> could look like:</p>\n\n<pre><code>require 'webmock/rspec'\n\ndef stub_api_requests\n  response = File.read('spec/fixtures/payload.json')\n  stub_request(:get, %r{http:\\/\\/api.bandsintown.com\\/artists/\\/(.)*})\n    .to_return(\n      status: 200,\n      body: response\n    )\nend\n\nconfig.before(:each) do\n  stub_api_requests\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6412456, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153421657022624/picture?type=large", "display_name": "Gregor", "link": "https://stackoverflow.com/users/6412456/gregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 40375825, "answer_count": 1, "score": 1, "last_activity_date": 1478077000, "creation_date": 1478076190, "question_id": 40375589, "link": "https://stackoverflow.com/questions/40375589/how-should-i-test-this-code-with-rspec-rails", "title": "How should I test this code with rspec rails?", "body": "<p>In my rails application I have a module with an API call that I would like to write rspec tests for. What would you write as proper tests for this? I have read not to combine httparty with rspec because it is very slow and now I have no idea how to do this. Thanks for the advice!</p>\n\n<pre><code>module BandsInTown\n  class API\n    attr_reader :artist_name, :info, :events\n\n    def initialize(artist_name)\n        @artist_name = artist_name\n    end\n\n    def artist_info\n        @info = fetch_data\n    end\n\n    def artist_events\n        @events = fetch_data 'events'\n    end\n\n    private\n\n    def fetch_data(endpoint = nil)\n        request_url = \"http://api.bandsintown.com/artists/#{[@artist_name, endpoint].compact.join('/')}.json?api_version=2.0&amp;app_id=AUTH_KEY\"\n        resp = HTTParty.get(request_url)\n        return false if resp.code != 200\n        resp\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "timeout", "net-http"], "owner": {"reputation": 1784, "user_id": 435817, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/336ff924a5e2f7efe299b3d1210957e2?s=128&d=identicon&r=PG", "display_name": "patrickdavey", "link": "https://stackoverflow.com/users/435817/patrickdavey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478111106, "creation_date": 1478075831, "last_edit_date": 1478111106, "question_id": 40375484, "link": "https://stackoverflow.com/questions/40375484/ruby-nethttp-ensure-get-finishes-within-a-time", "title": "Ruby Net:HTTP ensure get *finishes* within a time", "body": "<p>I am trying to use <code>Net:HTTP</code> to pull in a file remotely.</p>\n\n<p>I know (and have set) both <code>read_timeout</code> and <code>open_timeout</code> , however, those just set that the handshake has been completed within a time, and that the read has started receiving data. However, I want to ensure that the image is downloaded within 1 second (say) or aborts.</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\n\nurl = URI.parse \"http://eoimages.gsfc.nasa.gov/images/imagerecords/74000/74393/world.topo.200407.3x21600x10800.png\"\n\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = url.scheme == \"https\"\n\nhttp.read_timeout = 1\nhttp.open_timeout = 1\nresp = http.start() {|http|\n  http.get(url.path)\n}\n</code></pre>\n\n<p>Now, this succeeds, but it certainly isn't downloading the 110meg image within 1 second (not on my connection anyway).</p>\n\n<p>According to this <a href=\"http://www.mikeperham.com/2015/05/08/timeout-rubys-most-dangerous-api/\" rel=\"nofollow noreferrer\">well cited article by Mike Perham</a> timeout is evil, so, what <em>is</em> the right way to timeout a <code>Net:HTTP</code> call?</p>\n\n<p>To be clear, the code above <em>will not complete</em> within 1 second, and I want to know the correct way to abort a get request (as I don't want it sitting around forever tying up a ruby process)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "edited": false, "score": 1, "creation_date": 1478076162, "post_id": 40375434, "comment_id": 68003622, "body": "Can you please add the error message you are getting? IMHO the problem is that you are using bad syntax for creating new hash. Use <code>Hash.new</code> instead of <code>hash.new</code>."}, {"owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "reply_to_user": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "edited": false, "score": 0, "creation_date": 1478076975, "post_id": 40375434, "comment_id": 68004000, "body": "I believe you were right. It was an undefined method, but it appears that contactList was declared as a local variable."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1478076104, "creation_date": 1478076104, "answer_id": 40375568, "question_id": 40375434, "link": "https://stackoverflow.com/questions/40375434/why-doesnt-my-hash-work-in-ruby/40375568#40375568", "title": "Why doesn&#39;t my hash work in Ruby?", "body": "<p>Because you have defined <strong><em>class local variable</em></strong> <code>contactList</code>, whereas you wanted to have an <strong><em>instance variable</em></strong>.</p>\n\n<p>Remove this line</p>\n\n<pre><code>contactList = hash.new\n</code></pre>\n\n<p>and add the following method: </p>\n\n<pre><code>def contactList\n  @contactList ||= {}\nend\n</code></pre>\n\n<p>P.S. there is no such thing as <code>hash.new</code>, you most likely meant <code>Hash.new</code>.</p>\n\n<p>P.P.S. By Ruby naming conventions your variables/methods names should be snake-cased, not camel cased.\nSo it should be <code>contact_list</code>.</p>\n"}], "owner": {"reputation": 273, "user_id": 5402818, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f52d9f0493439595131c31f078e4a3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Codes316", "link": "https://stackoverflow.com/users/5402818/codes316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 40375568, "answer_count": 1, "score": -1, "last_activity_date": 1478083724, "creation_date": 1478075616, "last_edit_date": 1478083724, "question_id": 40375434, "link": "https://stackoverflow.com/questions/40375434/why-doesnt-my-hash-work-in-ruby", "title": "Why doesn&#39;t my hash work in Ruby?", "body": "<p>I have this phonebook program that looks up all the contacts, deletes a contact, and adds a contact. I created a hash global variable called <code>contactList</code>. However, the program fails to recognize this. What did I do wrong?</p>\n\n<pre><code>class PhoneBook\n  contactList = hash.new\n  def Add(newContact = {})\n    flag = false\n    if newContact.length &lt; 1\n      return flag\n    else\n      flag = true\n      newContact.collect do |name, number|\n        contactList[name] = number\n      end\n      return flag\n    end\n  end\n\n  def delete (targetName)\n    if !contactList.has_key?(targetName)\n      return false\n    else\n      contactList.delete(targetName)\n      return true\n    end\n\n  end\n  def displayContact (targetName)\n    number = -1\n    if contactList.has_key?(targetName)\n      number = contactList(targetName)\n      puts \"Contact name : #{targetName}, Contact Number, #{number}\"\n    else\n      puts \"#{targetName} doesn't exist in the phonebook\"\n    end\n  end\n  def displayAllContacts\n    if !contactList.empty?\n      contactList.each {|name, number| puts \"Contact name: #{name}, contact number #{number}\" }\n  else\n    puts \"You don't have any contact details your phonebook\"\n  end\n  end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "html-select", "ruby-on-rails-5", "dropdown"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478074571, "post_id": 40375176, "comment_id": 68002903, "body": "<code>include_blank: params[:product]</code>?"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478074755, "post_id": 40375176, "comment_id": 68002989, "body": "I already tried this option, it seems the more obvious to me, but it displayed nothing at all."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478074897, "post_id": 40375176, "comment_id": 68003060, "body": "may be because params[:product] is <code>nil</code> or empty string?"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478075386, "post_id": 40375176, "comment_id": 68003267, "body": "I don&#39;t think because the param is present in the url, and the products are well filtered"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478075460, "post_id": 40375176, "comment_id": 68003297, "body": "just check what&#39;s in <code>params[:product]</code>, maybe you want <code>params[:product][:name]</code> or something. Debug the value of <code>params[:product]</code> and make sure it is there"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478076324, "post_id": 40375176, "comment_id": 68003689, "body": "When I use pry to debug I get : params[:product] = &quot;produit1&quot;"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1478076431, "post_id": 40375176, "comment_id": 68003735, "body": "then it should work just fine. may be add explicit braces <code>{ include_blank: params[:product] }</code>"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478076894, "post_id": 40375176, "comment_id": 68003953, "body": "Yeah that was it ! The only problems is that &quot;which products?&quot; completely disapear and my list look like : &quot;product1, product1, product2&quot; OR &quot;product2, product2, product1&quot;. The selected product appear both instead of just being selected"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478077055, "post_id": 40375176, "comment_id": 68004046, "body": "I&#39;ll upvote for your comment for sure. But it&#39;s not exactly the answer, see my comment below :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478077105, "post_id": 40375176, "comment_id": 68004085, "body": "<code>select_tag :type,  options_for_select(&quot;&lt;option value = &#39;produit1&#39;&gt;Produit1&lt;&#47;option&gt;&lt;option value = &#39;Produit2&#39;&gt;Produit2&lt;&#47;option&gt;&quot;, params[:product], selected: params[:product]), id: &quot;different_option_value_html&quot;, onchange: &quot;this.form.submit();&quot;, include_blank: &quot;Which products?&quot;</code>"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478077366, "post_id": 40375176, "comment_id": 68004212, "body": "&gt;&gt; wrong number of arguments (given 3, expected 1..2)"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 5861200, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b2e5842f7a19a8752df4b89a3cccab77?s=128&d=identicon&r=PG&f=1", "display_name": "sofarsophie", "link": "https://stackoverflow.com/users/5861200/sofarsophie"}, "edited": false, "score": 0, "creation_date": 1500886938, "post_id": 40377265, "comment_id": 77514981, "body": "Thank you soooo much. Browsed over 10 questions and resources before coming across your answer!"}], "tags": [], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "is_accepted": true, "score": 5, "last_activity_date": 1478081445, "creation_date": 1478081445, "answer_id": 40377265, "question_id": 40375176, "link": "https://stackoverflow.com/questions/40375176/select-tag-how-to-put-params-as-selected-value/40377265#40377265", "title": "Select tag : how to put params as selected value?", "body": "<p>I finally change the syntax and it works fine using :<code>options_for_select(:collection, :selected)</code></p>\n\n<p>So there is my code now :</p>\n\n<pre><code>= select_tag :product,  options_for_select([\"Product1\", \"Product2\"], params[:product]), id: \"different_option_value_html\", onchange: \"this.form.submit();\", include_blank: \"Which product ?\"\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3897, "favorite_count": 1, "accepted_answer_id": 40377265, "answer_count": 1, "score": 5, "last_activity_date": 1478081644, "creation_date": 1478074442, "last_edit_date": 1478081644, "question_id": 40375176, "link": "https://stackoverflow.com/questions/40375176/select-tag-how-to-put-params-as-selected-value", "title": "Select tag : how to put params as selected value?", "body": "<p>I have a select tag with 2 options : </p>\n\n<pre><code> select_tag :type,  options_for_select(\"&lt;option value = 'produit1'&gt;Produit1&lt;/option&gt;&lt;option value = 'Produit2'&gt;Produit2&lt;/option&gt;\", params[:product]), id: \"different_option_value_html\", onchange: \"this.form.submit();\", include_blank: \"Which products ?\"\n</code></pre>\n\n<p>When one of this options are selected, the form is automatically submit. I would like to keep the params in first position. I mean visible without clicking on the select, at the place of \"which products\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1478073581, "post_id": 40374543, "comment_id": 68002478, "body": "development environment ? The problem doesnt appear after a reaload probably because when they are accessed for the first time they are not found and then loaded and thus is available later on."}, {"owner": {"reputation": 44, "user_id": 2826911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e51f7dbb595799e71ed9d23cc1cd438?s=128&d=identicon&r=PG&f=1", "display_name": "user2826911", "link": "https://stackoverflow.com/users/2826911/user2826911"}, "reply_to_user": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1478074135, "post_id": 40374543, "comment_id": 68002720, "body": "@AlokSwain yes, it&#39;s in development. Haven&#39;t tried it in production yet. I realize this probably won&#39;t happen in production because they will be autoloaded when the server starts. I was hoping for a fix so I don&#39;t have to deal with it in dev."}], "owner": {"reputation": 44, "user_id": 2826911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e51f7dbb595799e71ed9d23cc1cd438?s=128&d=identicon&r=PG&f=1", "display_name": "user2826911", "link": "https://stackoverflow.com/users/2826911/user2826911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478071940, "creation_date": 1478071940, "question_id": 40374543, "link": "https://stackoverflow.com/questions/40374543/rails-loaderror-unable-to-autoload-constant-expected-to-define-it-only-h", "title": "Rails - LoadError (Unable to autoload constant _ expected _ to define it) Only happens intermittently, refreshing fixes the issue", "body": "<p>My Rails 5.0.1 application uses a lot of namespaces, and I've recently been encountering <code>LoadError (expected to define)</code> when trying to access controllers. The problem is though, that it only happens sometimes, with different controllers, and reloading the page fixes it.</p>\n\n<p>An example of a controller that caused this error:</p>\n\n<pre><code>LoadError (Unable to autoload constant\nAPI::V1::ProgramRequirements::Requirements::StudentRequirementsController, expected\n/app/controllers/api/v1/program_requirements/requirements/student_requirements_controller.rb to define it)\n</code></pre>\n\n<p>An <code>ls</code> of the <code>/app/controllers/api/v1/program_requirements/requirements</code> directory:</p>\n\n<pre><code>{other_controllers} student_requirements_controller.rb\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>module API::V1::ProgramRequirements::Requirements\n  class StudentRequirementsController &lt; ::API::V1::ApplicationController\n    # omitted....\n  end\nend\n</code></pre>\n\n<p>The route:</p>\n\n<pre><code>namespace :api do\n  namespace :v1 do\n    namespace :program_requirements do\n      resources :requirements, except: [:new, :edit] do\n        scope module: :requirements do\n          resources :student_requirements, except: [:new, :edit]\n        end\n      end  \n    end\n  end\nend\n</code></pre>\n\n<p>This problem only recently started happening, and it doesn't always happen with the same controller. I don't have any other controllers with the same name under the same namespace defined.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1478071331, "post_id": 40374314, "comment_id": 68001535, "body": "Note that <code>when</code> is a <a href=\"https://ruby-doc.org/core/doc/keywords_rdoc.html\" rel=\"nofollow noreferrer\">keyword</a> in Ruby."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478071478, "post_id": 40374314, "comment_id": 68001604, "body": "Thanks for pointing it out. As you may imagine the sample code has just for demonstration and I&#39;m not planning to create a <code>when</code> method."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1478072898, "post_id": 40374314, "comment_id": 68002207, "body": "15 minutes from posting to selecting an answer! That&#39;s bad, not good (imo).  Not only may a lightning-fast selection discourage other answers, but it&#39;s a bit dismaying for those still working on answers (here at least two) to see the checkmark flash on so soon after the question has been posted."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478071491, "post_id": 40374412, "comment_id": 68001610, "body": "lambda is not equal to proc"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478071532, "post_id": 40374412, "comment_id": 68001634, "body": "There&#39;s important differences, but in this case they can both be supplied as arguments."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478071558, "post_id": 40374412, "comment_id": 68001645, "body": "@Stefan Thanks for catching that."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1478071564, "post_id": 40374412, "comment_id": 68001649, "body": "Yes, they can, but I suggest fixing the misleading wording. :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478071602, "post_id": 40374412, "comment_id": 68001669, "body": "Any reference to a Proc will do here. I&#39;m <i>recommending</i> the <code>lambda</code> approach."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1478071758, "post_id": 40374412, "comment_id": 68001722, "body": "btw, why would one use <code>Proc.new { ... }</code> when there&#39;s <code>proc { ... }</code>? :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478072718, "post_id": 40374412, "comment_id": 68002123, "body": "Never had occasion to use the new notation for that."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1478072947, "post_id": 40374412, "comment_id": 68002231, "body": "@SergioTulentsev: A loooong time ago, <code>Kernel#proc</code> was an alias for <code>Kernel#lambda</code> and thus returned a lambda. It was then changed to basically do <code>def proc(&amp;blk) Proc.new(&amp;blk) end</code>. However, if you didn&#39;t know what Ruby version your code would be running on, you would have to avoid <code>Kernel#proc</code> because you couldn&#39;t know what it would do. Rubyists who learned Ruby before 2003 tend to avoid <code>Kernel#proc</code> for that reason, even though Ruby versions in which it returns a lambda have been retired long ago."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1478073023, "post_id": 40374412, "comment_id": 68002264, "body": "@SergioTulentsev: Yes, but in 1.8 it does something different (returns a lambda instead of a plain <code>Proc</code>) than it does in 1.9+, so anybody who learned Ruby during the period where 1.8 and 1.9 were used in parallel tends to avoid it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1478075962, "post_id": 40374412, "comment_id": 68003524, "body": "@J&#246;rgWMittag: ah, thanks for this history lesson! I myself started with ruby in 2008. :)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1478072732, "last_edit_date": 1478072732, "creation_date": 1478071389, "answer_id": 40374412, "question_id": 40374314, "link": "https://stackoverflow.com/questions/40374314/passing-a-block-as-keyword-argument/40374412#40374412", "title": "Passing a block as keyword argument", "body": "<p>If you want to supply multiple blocks you need to pass them through as a Proc, or use the <code>lambda</code> construct to declare them:</p>\n\n<pre><code>when(\n  even: -&gt; (x) { x+1 },\n  odd: -&gt; (x) { x-1 }\n)\n</code></pre>\n\n<p>You can also declare them using <code>proc { ... }</code> or <code>lambda { ... }</code> which is the old style declaration for same.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478073481, "post_id": 40374757, "comment_id": 68002441, "body": "<code>1.method(:succ)</code> is not equivalent to <code>-&gt; (n) { n + 1 }</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478073670, "post_id": 40374757, "comment_id": 68002520, "body": "Of course, stupid typo. I mixed up two different examples I was trying out."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478073985, "post_id": 40374757, "comment_id": 68002651, "body": "A minor difference: one invokes <code>n + 1</code>, the other <code>1 + n</code>, but this example is obviously about integers, so it doesn&#39;t matter."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1478074168, "post_id": 40374757, "comment_id": 68002734, "body": "Argh, you&#39;re right. <code>-</code> is not associative. It&#39;s still too early for me."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 5, "last_activity_date": 1478074202, "last_edit_date": 1478074202, "creation_date": 1478072720, "answer_id": 40374757, "question_id": 40374314, "link": "https://stackoverflow.com/questions/40374314/passing-a-block-as-keyword-argument/40374757#40374757", "title": "Passing a block as keyword argument", "body": "<p>No, this is not possible. Blocks aren't objects, you can't pass them as arguments, <em>except</em> as block arguments. They are a lightweight syntactic and semantic construct that is <em>only</em> allowed as a block argument to a message send. The light weight of blocks is predicated on the fact that there can be at most one block, and thus it doesn't need to be named and/or bound to a parameter.</p>\n\n<p>What you <em>can</em> do, however, is pass multiple <code>Proc</code>s or lambdas. After all, <code>Proc</code>s and lambdas are objects like any other object, so you can pass them as arguments like any other object:</p>\n\n<pre><code>pippo(even: -&gt; n { n+1 }, odd: -&gt; n { n-1 })\n\ndef pippo(even: , odd:)\n  if even? then even.(self) else odd.(self) end\nend\n</code></pre>\n\n<p>Actually, this allows you to pass <em>any</em> object which responds to <code>call</code>, e.g. a <code>Method</code>:</p>\n\n<pre><code>pippo(even: 1.method(:+), odd: 1.method(:-))\n</code></pre>\n"}], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 1, "accepted_answer_id": 40374412, "answer_count": 2, "score": 3, "last_activity_date": 1478074202, "creation_date": 1478071025, "last_edit_date": 1478071624, "question_id": 40374314, "link": "https://stackoverflow.com/questions/40374314/passing-a-block-as-keyword-argument", "title": "Passing a block as keyword argument", "body": "<p>Is it possible (if yes how) to pass a block as a keyword argument in a ruby method?</p>\n\n<p>Basically, I'd like to do</p>\n\n<pre><code>pippo(even: {|n| n+1 }, odd: {|n| n-1})\n</code></pre>\n\n<p>Having the method defined as such</p>\n\n<pre><code>def pippo(even: , odd:)\n  even? ? even.yield(self) : odd.yield(self)\nend\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1478070963, "post_id": 40373914, "comment_id": 68001363, "body": "check it out <a href=\"https://github.com/plataformatec/devise#strong-parameters\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise#strong-parameters</a>"}, {"owner": {"reputation": 1, "user_id": 3233159, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001417618454/picture?type=large", "display_name": "FAllS", "link": "https://stackoverflow.com/users/3233159/falls"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1478072024, "post_id": 40373914, "comment_id": 68001841, "body": "It worked, Thanks you !!!"}], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 4394917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HxfUWEWDkGY/AAAAAAAAAAI/AAAAAAAAASU/bcnFGkQSNqA/photo.jpg?sz=128", "display_name": "dsn raghavendra rao", "link": "https://stackoverflow.com/users/4394917/dsn-raghavendra-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1478075818, "creation_date": 1478075818, "answer_id": 40375481, "question_id": 40373914, "link": "https://stackoverflow.com/questions/40373914/rails-5-0-devise-default-sign-up-not-taking-saving-custom-attribute-input-in-db/40375481#40375481", "title": "Rails 5.0 devise default sign up not taking/saving custom attribute input in DB", "body": "<p>Please check below code </p>\n\n<pre><code>&lt;%=form_for(resource,as:resource_name,url:registration_path(resource_name)) do |f| %&gt; \n\n &lt;%= devise_error_messages! %&gt; \n  &lt;div align=\"center\"&gt;\n     &lt;div class=\"field\" &gt;\n        &lt;%= f.label :email %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email, autofocus: true %&gt;\n     &lt;/div&gt;\n\n     &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password %&gt;\n        &lt;% if @minimum_password_length %&gt;\n          &lt;em&gt;(&lt;%= @minimum_password_length %&gt; chara min)&lt;/em&gt;\n        &lt;% end %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n     &lt;/div&gt;\n\n     &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n     &lt;/div&gt;\n\n     &lt;div class=\"field\" &gt;\n        &lt;%= f.label :designation %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :designation, autofocus: true %&gt;\n     &lt;/div&gt;\n\n     &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit \"Sign up\" %&gt;\n     &lt;/div&gt;\n    &lt;%= render \"users/shared/links\" %&gt; \n &lt;/div&gt;\n</code></pre>\n\n   \n\n<p>Now added this to ApplicationController.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n     before_action :configure_permitted_parameters, if: :devise_controller?\n\n protected\n\n   def configure_permitted_parameters\n      devise_parameter_sanitizer.permit(:sign_up, keys: [:designation])\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3233159, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001417618454/picture?type=large", "display_name": "FAllS", "link": "https://stackoverflow.com/users/3233159/falls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478075818, "creation_date": 1478069181, "question_id": 40373914, "link": "https://stackoverflow.com/questions/40373914/rails-5-0-devise-default-sign-up-not-taking-saving-custom-attribute-input-in-db", "title": "Rails 5.0 devise default sign up not taking/saving custom attribute input in DB", "body": "<p>The sign up file    </p>\n\nSign up\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n&lt;div align=\"center\"&gt;\n  &lt;div class=\"field\" &gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt;\n    &lt;% if @minimum_password_length %&gt;\n    &lt;em&gt;(&lt;%= @minimum_password_length %&gt; chara min)&lt;/em&gt;\n    &lt;% end %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n   &lt;div class=\"field\" &gt;\n    &lt;%= f.label :designation %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :designation, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n  &lt;%= render \"users/shared/links\" %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p>The RegistrationsController\nprivate</p>\n\n<pre><code>def sign_up_params\n    params.require(:designation).(:email, :password)\n\nend\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p>The ERROR\nActionController::ParameterMissing (param is missing or the value is empty: designation):</p>\n\n<p>=======\nJust have to take value in the designation attribute but it is always nil </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "is_accepted": false, "score": 0, "last_activity_date": 1478072119, "last_edit_date": 1478072119, "creation_date": 1478067396, "answer_id": 40373551, "question_id": 40373517, "link": "https://stackoverflow.com/questions/40373517/best-practice-for-passing-user-id-into-params-for-a-new-object-from-a-nested-re/40373551#40373551", "title": "Best practice for passing :user_id into params for a new object from a nested resource form?", "body": "<p>You can try </p>\n\n<pre><code>@post = Post.new(user_id: current_user.id, forum_id: params[:forum_id])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1478116762, "post_id": 40373674, "comment_id": 68029118, "body": "When I use that on the new action it builds <code>@post</code> with a <code>forum_id</code>. However, when it reaches create, the <code>forum_id</code> has been stripped and becomes <code>nil</code>. my <code>post_params</code> has <code>:forum_id</code> and <code>:user_id</code> has been whitelisted. Does this sound normal do you?"}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": true, "score": 1, "last_activity_date": 1478067967, "creation_date": 1478067967, "answer_id": 40373674, "question_id": 40373517, "link": "https://stackoverflow.com/questions/40373517/best-practice-for-passing-user-id-into-params-for-a-new-object-from-a-nested-re/40373674#40373674", "title": "Best practice for passing :user_id into params for a new object from a nested resource form?", "body": "<p>You can use <code>build</code>:</p>\n\n<pre><code>@post = Forum.find(params[:forum_id]).posts.build\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1478072318, "creation_date": 1478072318, "answer_id": 40374651, "question_id": 40373517, "link": "https://stackoverflow.com/questions/40373517/best-practice-for-passing-user-id-into-params-for-a-new-object-from-a-nested-re/40374651#40374651", "title": "Best practice for passing :user_id into params for a new object from a nested resource form?", "body": "<p>You'll have to set user_id separately, as it won't be set by <code>forum.posts.new</code></p>\n\n<pre><code>forum = current_user.forums.find(params[:forum_id])\n@post = forum.posts.new(user_id: current_user.id)\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 40373674, "answer_count": 3, "score": 0, "last_activity_date": 1478072498, "creation_date": 1478067196, "last_edit_date": 1478072498, "question_id": 40373517, "link": "https://stackoverflow.com/questions/40373517/best-practice-for-passing-user-id-into-params-for-a-new-object-from-a-nested-re", "title": "Best practice for passing :user_id into params for a new object from a nested resource form?", "body": "<pre><code># User model\nhas_many :forums\nhas_many :posts\n\n# Forum model\nbelongs_to :user\nhas_many :posts\n\n# Post model\nbelongs_to :user\nbelongs_to :forum\n</code></pre>\n\n<p>I have a <code>post</code> form that is nested in a <code>forum</code>. I want to initialize the form with the needed <code>forum_id</code> and <code>user_id</code> so it can be save correctly at the end.</p>\n\n<p>This is my (failing) attempt.</p>\n\n<pre><code># posts_controller\ndef new\n  @post = current_user.forums.find(params[:forum_id]).posts.new\nend\n</code></pre>\n\n<p>This is what @post gets me as a result:</p>\n\n<pre><code># @post\n#&lt;Post id: nil, title: nil, description: nil, user_id: nil, forum_id: 1, created_at: nil, updated_at: nil&gt;\n</code></pre>\n\n<p>Perhaps I'm not doing this correctly at all. I'd like to find the best practice or just a one of the better options than forcing things.</p>\n\n<p>Would it be better to bring in the <code>user_id</code> all the way through the form until it's creation?</p>\n\n<p>Is there a better way that I'm not seeing?</p>\n"}, {"tags": ["java", "ruby", "swing", "jruby", "embedded-resource"], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 6897476, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7d1f4b7fe23115a3cf52a7cc6a792f94?s=128&d=identicon&r=PG&f=1", "display_name": "danynl", "link": "https://stackoverflow.com/users/6897476/danynl"}, "edited": false, "score": 0, "creation_date": 1478070652, "post_id": 40373300, "comment_id": 68001249, "body": "This didn&#39;t seem to work in the jar. Are you automatically assumed that <code>lib</code> is the root in jar file?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 265, "user_id": 6897476, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7d1f4b7fe23115a3cf52a7cc6a792f94?s=128&d=identicon&r=PG&f=1", "display_name": "danynl", "link": "https://stackoverflow.com/users/6897476/danynl"}, "edited": false, "score": 0, "creation_date": 1478070812, "post_id": 40373300, "comment_id": 68001310, "body": "I did. I am not sure how to do the relative path - the current directory - or directories in general - does not matter when you are executing from a jar. But the point is that you can&#39;t trust the filesystem, the only thing you can trust is the classloader."}, {"owner": {"reputation": 265, "user_id": 6897476, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7d1f4b7fe23115a3cf52a7cc6a792f94?s=128&d=identicon&r=PG&f=1", "display_name": "danynl", "link": "https://stackoverflow.com/users/6897476/danynl"}, "edited": false, "score": 0, "creation_date": 1478072654, "post_id": 40373300, "comment_id": 68002094, "body": "lets say my image is located inside <code>test_gemjar.jar</code> and the path to image is <code>ABCD_gemjar.jar&#47;gems&#47;ABCD-0.1.0&#47;lib&#47;ABCD&#47;img&#47;test.png</code>. How would load this image using get_resource?"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1478065988, "creation_date": 1478065988, "answer_id": 40373300, "question_id": 40373202, "link": "https://stackoverflow.com/questions/40373202/ruby-how-to-load-image-relative-to-source-code-in-jar/40373300#40373300", "title": "ruby how to load image relative to source code in jar", "body": "<p>Just like in Java - your file is not a file, it has to be addressed as a resource-inna-jar:</p>\n\n<pre><code>java.net.URL url = getClass().getResource(\"img/test.png\");\nImageIcon image = new ImageIcon(url);\n</code></pre>\n\n<p>Didn't try, but translated into Ruby, I believe it's something like</p>\n\n<pre><code>url = JRuby.runtime.jruby_class_loader.get_resource(\"/lib/img/test.png\")\nimage = ImageIcon.new(url)\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 6897476, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7d1f4b7fe23115a3cf52a7cc6a792f94?s=128&d=identicon&r=PG&f=1", "display_name": "danynl", "link": "https://stackoverflow.com/users/6897476/danynl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478075928, "creation_date": 1478065410, "last_edit_date": 1478075928, "question_id": 40373202, "link": "https://stackoverflow.com/questions/40373202/ruby-how-to-load-image-relative-to-source-code-in-jar", "title": "ruby how to load image relative to source code in jar", "body": "<p>I have a jruby Swing application in a jar. In my source code <code>main.rb</code> I have an image specified as </p>\n\n<p><code>img = ImageIcon.new(\"img/test.png\")</code> </p>\n\n<p>which does not load. My path looks like this</p>\n\n<p><code>lib/main.rb</code></p>\n\n<p><code>lib/img/test.png</code></p>\n\n<p>Is there a way to specify the relative path to the image?</p>\n\n<p>In addition, I've found the equivalent way of doing this in Java using getResource</p>\n\n<p><code>new javax.swing.ImageIcon(getClass().getResource(\"myimage.jpeg\"))</code></p>\n\n<p>How would I implement this in jruby?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ubuntu-16.04", "jasmine2.0"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478065112, "post_id": 40372979, "comment_id": 67999214, "body": "to easily make a public url for localhost you can use localtunnel or ngrok. another option is to deploy to a hosting platform."}, {"owner": {"reputation": 2176, "user_id": 4756398, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/327d9051425cf0168c13dcbeb992925a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Davenport", "link": "https://stackoverflow.com/users/4756398/jeff-davenport"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478065762, "post_id": 40372979, "comment_id": 67999427, "body": "This seems like a very hackey method. @maxpleaner"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478065820, "post_id": 40372979, "comment_id": 67999440, "body": "what kind of non-hacky method are you comparing it to?"}, {"owner": {"reputation": 2176, "user_id": 4756398, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/327d9051425cf0168c13dcbeb992925a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Davenport", "link": "https://stackoverflow.com/users/4756398/jeff-davenport"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478066795, "post_id": 40372979, "comment_id": 67999800, "body": "I would much rather change the address that jasmine listens on, is that impossible?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478069439, "post_id": 40372979, "comment_id": 68000783, "body": "it&#39;s not that simple. Changing address (binding the host, which is something you can do in any server) is only part of making an application visible to the internet. ngrok or localtunnel do this for you simply. That&#39;s why they&#39;re not totally free (you have a limit on the number of ports you expose at once)."}, {"owner": {"reputation": 2176, "user_id": 4756398, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/327d9051425cf0168c13dcbeb992925a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Davenport", "link": "https://stackoverflow.com/users/4756398/jeff-davenport"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478069582, "post_id": 40372979, "comment_id": 68000841, "body": "Yes I know it is not as simple as just changing the listening address. I administer several production servers, so I very aware of the steps that need to be done. However the first step is changing the listening address on jasmine, which is the only step I am having an issue with. I don&#39;t need to setup an entire ngrok server and client setup just to overcome such a tiny issue. That is quite overkill in my mind @maxpleaner"}], "answers": [{"tags": [], "owner": {"reputation": 2176, "user_id": 4756398, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/327d9051425cf0168c13dcbeb992925a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Davenport", "link": "https://stackoverflow.com/users/4756398/jeff-davenport"}, "is_accepted": false, "score": 0, "last_activity_date": 1478120835, "creation_date": 1478120835, "answer_id": 40389801, "question_id": 40372979, "link": "https://stackoverflow.com/questions/40372979/change-binding-ip-address-in-jasmin-or-use-two-rails-development-environments/40389801#40389801", "title": "Change binding IP address in jasmin, Or use two rails development environments", "body": "<p>I was able to solve this by adding this to my nginx conf</p>\n\n<pre><code>server {\n    server_name         example.com;\n    root /home/user/rails/public;\n    location / {\n        proxy_pass         http://localhost:8888;\n        proxy_set_header   Upgrade $http_upgrade;\n        proxy_set_header   Connection \"upgrade\";\n        proxy_set_header   Host 127.0.0.1;\n        proxy_redirect     off;\n        proxy_http_version 1.1;\n        proxy_buffering    off;\n        proxy_cache_bypass $http_pragma $http_authorization;\n        proxy_no_cache     $http_pragma $http_authorization;\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 2176, "user_id": 4756398, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/327d9051425cf0168c13dcbeb992925a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Davenport", "link": "https://stackoverflow.com/users/4756398/jeff-davenport"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478120835, "creation_date": 1478064102, "last_edit_date": 1478064711, "question_id": 40372979, "link": "https://stackoverflow.com/questions/40372979/change-binding-ip-address-in-jasmin-or-use-two-rails-development-environments", "title": "Change binding IP address in jasmin, Or use two rails development environments", "body": "<p>I kind of have two questions in one, I am trying to bind the IP address from jasmine rails rubygem to something other than localhost.</p>\n\n<p>The reason being is that I develop using Ruby on rails, and 50% of the time I am on my laptop and the other 50% of the time I work from my PC. So I need to be able to access it from the browser using both machines.</p>\n\n<p>I tried using X Forwarding on the Linux machines, but this is very sluggish and slowing down my work.</p>\n\n<p>So my two questions are, for the Rails way\n1: Should I be changing the jasmine bind IP to something else, if so, how?\n2: Should I be running the development server on both machines separately, rather than just ftp uploading to the PC from the laptop?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1478061711, "post_id": 40372461, "comment_id": 67998287, "body": "Check the capitalisation of <code>pie</code> ;-)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478071644, "post_id": 40372461, "comment_id": 68001678, "body": "Do remember that floating point values are always approximations so using them for monetary calculations is trouble."}], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 0, "last_activity_date": 1478061721, "creation_date": 1478061721, "answer_id": 40372618, "question_id": 40372461, "link": "https://stackoverflow.com/questions/40372461/ruby-shopping-cart/40372618#40372618", "title": "Ruby Shopping Cart", "body": "<p>The trouble is a capitalized letter in <code>store.add_to_cart \"Pie\"</code>. This adds the string <code>\"Pie\"</code> to your <code>@cart</code> array. When you iterate over <code>@cart</code> using <code>#inject</code>, <code>@products[\"Pie\"]</code> returns <code>nil</code>, because there is no key for <code>\"Pie\"</code> in your hash (the keys are case-sensitive). You can't add <code>nil</code> to <code>sum</code>, which is a float. </p>\n\n<p>Try again with a lowercase \"pie\" and it should work fine. Or to avoid capitalization issues in the future, change your <code>cart_total</code> method to <code>@cart.inject(0){ |sum, item| sum + @products[item.downcase] }</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6179337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec127ebc39c30e2065ce8e95b7df9eb?s=128&d=identicon&r=PG&f=1", "display_name": "sgfp", "link": "https://stackoverflow.com/users/6179337/sgfp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 40372618, "answer_count": 1, "score": 0, "last_activity_date": 1478061721, "creation_date": 1478060657, "last_edit_date": 1478061656, "question_id": 40372461, "link": "https://stackoverflow.com/questions/40372461/ruby-shopping-cart", "title": "Ruby Shopping Cart", "body": "<p>I'm new at Ruby and I'm having difficulty finishing this shopping cart program. I'm not sure what I'm doing wrong. Can anyone tell me how to get the last two lines to output the code that I have in comments next to them? Any help would be appreciated. Thanks. </p>\n\n<pre><code>class Store\n\n    def initialize\n       @products = {\"eggs\" =&gt; 1.5, \"bread\" =&gt; 3.00, \"granola cereal\" =&gt; 3.4, \"coffee\" =&gt; 2.3, \"pie\" =&gt; 4.7}\n       @cart = []\n    end\n\n    def add_to_cart( item )\n        @cart &lt;&lt; item\n    end\n\n    def add_product( item, price )\n        @products[item] = price\n    end\n\n    def cart_total\n        @cart.inject(0){|sum, item| sum + @products[item]}\n    end\n\n    def items\n        @products.join(', ')\n    end\nend\n\n\nstore = Store.new                  \nstore.add_to_cart \"eggs\"\nstore.add_to_cart \"Pie\"\nstore.add_to_cart \"bread\"\nputs store.cart                     # output: eggs, pie, bread\nprintf \"$%6.2f\", store.cart_total   # output: $ 9.20\n</code></pre>\n\n<p>When I try to run this, I get this error:</p>\n\n<pre><code>nil can't be coerced into Float\n(repl):17:in `+'\n(repl):17:in `block in total'\n(repl):17:in `each'\n(repl):17:in `inject'\n(repl):17:in `total'\n(repl):28:in `&lt;main&gt;main&gt;'   \n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "dom", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 0, "creation_date": 1478063237, "post_id": 40372195, "comment_id": 67998680, "body": "Your jQuery selector is <code>#movies, .pagination</code> yet I do not see any element with <code>pagination</code> class in your templates. Could you clarify what are you trying to accomplish with that jQuery selector?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478074054, "post_id": 40372195, "comment_id": 68002687, "body": "There&#39;s some downright bizarre code in the controller there. Why is <code>@movies</code> being redefined, repaginated, and reordered so many times? If you want to chain filters together usually you do that without pagination. As in: <code>Movie.search(params[:search]).genre(params[:genre]).date_rel&zwnj;&#8203;ist(params[:date_rel&zwnj;&#8203;ist]).rating(params[&zwnj;&#8203;:rating]).order(&#39;cre&zwnj;&#8203;ated_at DESC&#39;).page(params[:page]).per(20)</code> where you can format that over multiple lines for clarity."}, {"owner": {"reputation": 1, "user_id": 7102620, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-T2qRMZonlPw/AAAAAAAAAAI/AAAAAAAAADM/WMtQqBD1ou8/photo.jpg?sz=128", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/7102620/andriy-kondzolko"}, "edited": false, "score": 0, "creation_date": 1478088241, "post_id": 40372195, "comment_id": 68010827, "body": "Pagination I temporarily deleted, this right now is not interesting for me."}], "owner": {"reputation": 1, "user_id": 7102620, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-T2qRMZonlPw/AAAAAAAAAAI/AAAAAAAAADM/WMtQqBD1ou8/photo.jpg?sz=128", "display_name": "Andriy Kondzolko", "link": "https://stackoverflow.com/users/7102620/andriy-kondzolko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478058620, "creation_date": 1478058620, "question_id": 40372195, "link": "https://stackoverflow.com/questions/40372195/update-dom-in-ruby-on-rails-5", "title": "Update DOM in Ruby on Rails 5", "body": "<p>Have a problem with my app on ruby on rails 5, after ajax request cannot run javascript. I think this is problem with DOM, but I not have a good knowledge with JavaScript and cannot fix this problem. Will be very<br>\nappreciation everyone who will try to help me.</p>\n\n<blockquote>\n  <p>movies_controller.rb</p>\n</blockquote>\n\n<pre><code> def home\nif params[:search]\n  @movies = Movie.search(params[:search]).order('created_at DESC').page(params[:page]).per(20)\n  @movies = @movies.genre(params[:genre]).order('created_at DESC').page(params[:page]).per(20)\n  @movies = @movies.date_relist(params[:date_relist]).order('created_at DESC').page(params[:page]).per(20)\n  @movies = @movies.rating(params[:rating]).order('created_at DESC').page(params[:page]).per(20)\nelse\n  @movies = Movie.all.order('created_at DESC').page(params[:page]).per(20)\n  @movies_genre = Movie.all.select(:genre).uniq.order('genre ASC')\n  @date_relist = Movie.all.select(:date_relist).uniq.order('date_relist DESC')\n  @rating = (Movie.all.select(:rating).uniq).order('rating DESC')\nend\n</code></pre>\n\n<p>end</p>\n\n<blockquote>\n  <p>home.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;%= form_for root_path, method: :get, id: \"movies_search\", remote: true do %&gt;\n&lt;%= label_tag :search %&gt;\n&lt;%= text_field_tag :search, params[:search]%&gt;\n&lt;%= label_tag :genre %&gt;\n&lt;%= select_tag :genre, options_from_collection_for_select(@movies_genre, \"genre\", \"genre\") %&gt;\n&lt;%= label_tag :date_relist %&gt;\n&lt;%= select_tag :date_relist, options_from_collection_for_select(@date_relist, \"date_relist\", \"date_relist\"), include_blank: true %&gt;\n  &lt;%= label_tag :rating %&gt;\n&lt;%= select_tag :rating, options_from_collection_for_select(@rating, \"rating\", \"rating\"), include_blank: true %&gt;\n&lt;%= submit_tag \"Search\", name: nil  %&gt;\n</code></pre>\n\n\n\n<pre><code>&lt;div class=\"content\"&gt;\n&lt;div class=\"wrapper\"&gt;\n  &lt;div id=\"movies\"&gt; &lt;%= render partial: 'movies' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<blockquote>\n  <p>home.js.erb</p>\n</blockquote>\n\n<pre><code>$(\"#movies, .pagination\").html(\"&lt;%= escape_javascript(render(\"movies\")) %&gt;\")\n</code></pre>\n\n<blockquote>\n  <p>_movies.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;% @movies.each do |m| %&gt;\n\n&lt;div class=\"card\"&gt;\n  &lt;div class=\"card__container card__container--closed\"&gt;\n    &lt;svg class=\"card__image\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 1920 1200\" preserveAspectRatio=\"xMidYMid slice\"&gt;\n      &lt;defs&gt;\n        &lt;clipPath id=\"clipPath&lt;%=m.id%&gt;\"&gt;\n          &lt;polygon class=\"clip\" points=\"0,1200 0,0 1920,0 1920,1200\"&gt;&lt;/polygon&gt;\n        &lt;/clipPath&gt;\n      &lt;/defs&gt;\n      &lt;image clip-path=\"url(#clipPath&lt;%=m.id%&gt;)\" width=\"1920\" height=\"1200\" xlink:href=\"/pictures/&lt;%= m.img %&gt;\"&gt;&lt;/image&gt;\n    &lt;/svg&gt;\n    &lt;div class=\"card__content\"&gt;\n      &lt;i class=\"card__btn-close fa fa-times\"&gt;&lt;/i&gt;\n      &lt;div class=\"card__caption\"&gt;\n        &lt;h2 class=\"card__title\"&gt;&lt;%= m.title %&gt;&lt;/h2&gt;\n        &lt;p class=\"card__subtitle\"&gt;Genre - &lt;%= m.genre %&gt;&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;div class=\"card__copy\"&gt;\n        &lt;div class=\"meta\"&gt;\n          &lt;img class=\"meta__avatar\" src=\"/pictures/&lt;%= m.img %&gt;\" alt=\"author01\" /&gt;\n          &lt;img class=\"krug\"/&gt;\n          &lt;div class=\"description\"&gt;\n            &lt;span class=\"meta__author\"&gt;Running Time - &lt;%= m.runtime %&gt;&lt;/span&gt;&lt;br&gt;\n            &lt;span class=\"meta__date\"&gt;Release Date - &lt;%= m.date_relist %&gt;&lt;/span&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"text\" style=\"text-align: center\"&gt;\n          &lt;p&gt;\n            &lt;%= raw(m.trailer) %&gt;\n            &lt;br&gt;\n            &lt;%= m.desc %&gt;\n          &lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n\n"}, {"tags": ["ruby-on-rails", "ruby", "google-api"], "comments": [{"owner": {"reputation": 241, "user_id": 4322949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8vYl.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/4322949/erica"}, "edited": false, "score": 0, "creation_date": 1478057032, "post_id": 40371927, "comment_id": 67997310, "body": "Try taking reference from this site,it worked for me. <a href=\"http://www.thegreatcodeadventure.com/using-the-google-api-ruby-client-with-google-calendar-api/\" rel=\"nofollow noreferrer\">thegreatcodeadventure.com/&hellip;</a>"}, {"owner": {"reputation": 2599, "user_id": 39223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/39e19e0acb0d2809f60f57cec9b50512?s=128&d=identicon&r=PG", "display_name": "RJHunter", "link": "https://stackoverflow.com/users/39223/rjhunter"}, "edited": false, "score": 0, "creation_date": 1478057585, "post_id": 40371927, "comment_id": 67997428, "body": "Can you edit your question to include the exact error messages? The one that you call &quot;Unknown Constant&quot;, and the one where using <code>require</code> &quot;fails&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 1, "last_activity_date": 1478115255, "last_edit_date": 1478115255, "creation_date": 1478100617, "answer_id": 40383826, "question_id": 40371927, "link": "https://stackoverflow.com/questions/40371927/ruby-on-rails-google-api/40383826#40383826", "title": "Ruby on Rails Google API", "body": "<p>The following works for me on Rails 4.2.1 -- Note that there are two requires.</p>\n\n<pre><code>require 'google/apis'\n=&gt; true\nrequire 'google/apis/calendar_v3'\n=&gt; true\nservice = Google::Apis::CalendarV3::CalendarService.new\n=&gt; #&lt;Google::Apis::CalendarV3::CalendarService:0x007fca01ae60a0 @root_url=\"https://www.googleapis.com/\", @base_path=\"calendar/v3/\", @upload_path=\"upload/calendar/v3/\", @batch_path=\"batch\", @client_options=#&lt;struct Google::Apis::ClientOptions application_name=\"unknown\", application_version=\"0.0.0\", proxy_url=nil, use_net_http=false&gt;, @request_options=#&lt;struct Google::Apis::RequestOptions authorization=nil, retries=0, header=nil, timeout_sec=nil, open_timeout_sec=20&gt;&gt;\n</code></pre>\n\n<p>My gem file contains:</p>\n\n<pre><code>gem 'google-api-client', '0.9'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7102580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f02ff797431871d85ed5650fc4a5ce?s=128&d=identicon&r=PG&f=1", "display_name": "collegestudent1234", "link": "https://stackoverflow.com/users/7102580/collegestudent1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478115255, "creation_date": 1478056591, "last_edit_date": 1478065796, "question_id": 40371927, "link": "https://stackoverflow.com/questions/40371927/ruby-on-rails-google-api", "title": "Ruby on Rails Google API", "body": "<p>I'm currently doing a Ruby on Rails project where I try to query from the Google Calendar API. I'm using this line of code: </p>\n\n<pre><code>service = Google::Apis::CalendarV3::CalendarService.new\n</code></pre>\n\n<p>and I have the gem <code>google-api-client</code> in my Gemfile. However, when I try to run the app with this line, it fails saying that it is Unknown Constant: Google Apis. If I try to put in the line that I've seen on StackOverflow, where I put <code>require 'google/apis/calendar_v3'</code> in the ruby file, it fails. I've spent 4 hours online trying to find anyone with a similar solution. If I try another API, like <code>require 'google/apis/drive_v2'</code>, it works fine, just calendar. :( </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "edited": false, "score": 0, "creation_date": 1478054438, "post_id": 40371570, "comment_id": 67996651, "body": "when does the @current value get reset?"}, {"owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "reply_to_user": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "edited": false, "score": 0, "creation_date": 1478054614, "post_id": 40371570, "comment_id": 67996702, "body": "This is the offending line: <code>session[:user_id] = nil unless current_user_admin?</code>. When you call <code>current_user_admin?</code>, it calls <code>current_user</code> which tries to reset the <code>@current</code> variable. If you delete a <code>User</code> you should always clear it out of the session. Perhaps try <code>session[:user_id] = nil if session[:id] == params[:id]</code> This will clear out the session if the ID is equal to the ID of the user you just deleted."}, {"owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "edited": false, "score": 0, "creation_date": 1478056671, "post_id": 40371570, "comment_id": 67997234, "body": "is there any way to make the second current_user method work?"}, {"owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "reply_to_user": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "edited": false, "score": 0, "creation_date": 1478056830, "post_id": 40371570, "comment_id": 67997275, "body": "If you ensure that <code>session[:user_id]</code> never contains an invalid user ID then the second <code>current_user</code> method will work. It&#39;s still recommended to use the <code>||=</code> operator because it is way more performant (you&#39;ll only every run the <code>User#find</code> query once per request cycle."}, {"owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "reply_to_user": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "edited": false, "score": 0, "creation_date": 1478057208, "post_id": 40371570, "comment_id": 67997362, "body": "Happy to help! :)"}], "tags": [], "owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "is_accepted": true, "score": 1, "last_activity_date": 1478053820, "creation_date": 1478053820, "answer_id": 40371570, "question_id": 40371316, "link": "https://stackoverflow.com/questions/40371316/rails-ruby-double-pipe-session/40371570#40371570", "title": "rails ruby double pipe session", "body": "<p>The <code>||=</code> operator means \"set this variable if its not already set\". </p>\n\n<p>When you delete the account that you are currently signed in as, you remove the <code>User</code> from the database, however the <code>session[:user_id]</code> is still set to the now deleted <code>User</code>'s ID. </p>\n\n<p>Attempting to call <code>User#find</code> with a user ID which has been deleted will result in an <code>ActiveRecord</code> error. </p>\n\n<p>The reason why this does <em>not</em> happen when the <code>||=</code> operator is present is because the <code>@current</code> variable is <em>already</em> set therefore the <code>User#find</code> is never called. </p>\n\n<pre><code># this will only try to call User#find if the @current variable is not already set\n@current ||= User.find(session[:user_id])\n\n# this will always attempt to call User#find\n# if session[:user_id] is set to a deleted user's ID it will raise an error\n@current = User.find(session[:user_id]) \n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 40371570, "answer_count": 1, "score": 0, "last_activity_date": 1478053820, "creation_date": 1478051643, "question_id": 40371316, "link": "https://stackoverflow.com/questions/40371316/rails-ruby-double-pipe-session", "title": "rails ruby double pipe session", "body": "<p>I'm trying to make the following work:</p>\n\n<p>1) If I'm a user, I get signed out when I delete my account.</p>\n\n<p>2) If I'm an admin, I stay signed in when I delete other user's account.</p>\n\n<p>It works when I set the current_user method as</p>\n\n<pre><code>  def current_user\n    @current ||= User.find(session[:user_id]) if session[:user_id]\n  end\n</code></pre>\n\n<p>but when I set it as</p>\n\n<pre><code>  def current_user\n    User.find(session[:user_id]) if session[:user_id]\n  end\n</code></pre>\n\n<p>it gives me this error</p>\n\n<pre><code>ActiveRecord::RecordNotFound in UsersController#destroy\nCouldn't find User with 'id'=30\n</code></pre>\n\n<p>I don't understand why \"@current ||=\" makes it work.</p>\n\n<pre><code>application_controller.rb\n\ndef require_signin\n  unless current_user\n    session[:intended_url] = request.url\n    redirect_to signin_path, notice: \"This page requires signin\"\n  end\nend\n\ndef require_admin\n  unless current_user_admin?\n    redirect_to root_path, notice: \"Unauthorized Access\"\n  end\nend\n\ndef current_user_admin?\n  current_user &amp;&amp; current_user.admin?\nend\n\ndef current_user\n  @current ||= User.find(session[:user_id]) if session[:user_id]\nend\n\ndef current_user?(user)\n  user == current_user\nend\n\n\nuser_controller.rb \n\ndef destroy\n    @user = User.find(params[:id])\n    unless current_user?(@user) || current_user_admin?\n        redirect_to root_path, alert: \"Unauthorized Access\"\n    end     \n    @user.destroy\n    session[:user_id] = nil unless current_user_admin?\n    redirect_to players_path, alert: \"'#{@user.name}' was deleted\"\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1478049807, "creation_date": 1478049807, "answer_id": 40371100, "question_id": 40371047, "link": "https://stackoverflow.com/questions/40371047/flat-map-in-ruby-when-working-with-different-elements/40371100#40371100", "title": "flat_map in ruby when working with different elements", "body": "<p><code>[1].flatten</code> is <code>[1]</code> - there is no second level. <code>[[1]].flatten</code> is <code>[1]</code>. This is the difference between your last example and all others.</p>\n\n<p>If you try plain <code>map</code> first,</p>\n\n<pre><code>[[1], {a: \"a\"}, {b: \"b\"}].map(&amp;:to_a)\n# =&gt; [[1], [[:a, \"a\"]], [[:b, \"b\"]]]\n</code></pre>\n\n<p>Notice that each hash arrayifies to an array of arrays (each of which is a pair of a key and a value). When you <code>flatten</code> it by one level:</p>\n\n<pre><code>[[1], {a: \"a\"}, {b: \"b\"}].map(&amp;:to_a).flatten(1)\n# =&gt; [1, [:a, \"a\"], [:b, \"b\"]] \n</code></pre>\n\n<p>This is exactly what you are getting with <code>flat_map</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1478113726, "last_edit_date": 1478113726, "creation_date": 1478052848, "answer_id": 40371468, "question_id": 40371047, "link": "https://stackoverflow.com/questions/40371047/flat-map-in-ruby-when-working-with-different-elements/40371468#40371468", "title": "flat_map in ruby when working with different elements", "body": "<p>For any array <code>arr</code> having <code>m+n</code> elements, if</p>\n\n<pre><code>arr.map { ... }\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>[a1, a2,.., am, o1, o2,.., on]\n</code></pre>\n\n<p>where <code>a1, a2,.., am</code> are are arrays and <code>o1, o2,.., on</code> are objects other than arrays, then by changing <code>map</code> to <code>flat_map</code>, leaving the block unchanged, <code>flat_map</code> will return</p>\n\n<pre><code>[*a1, *a2,.., *am, o1, o2,.., on]\n</code></pre>\n\n<p><strong>Example 1</strong></p>\n\n<p>For</p>\n\n<pre><code>arr = [[1], {a: \"a\"}, {b: \"b\"}]\n</code></pre>\n\n<p>we have</p>\n\n<pre><code>arr.map(&amp;:to_a)\n  #=&gt; [[1], [[:a, \"a\"]], [[:b, \"b\"]]]\n</code></pre>\n\n<p>so it follows that</p>\n\n<pre><code>arr.flat_map(&amp;:to_a)\n</code></pre>\n\n<p>will return</p>\n\n<pre><code>[*[1], *[[:a, \"a\"]], *[[:b, \"b\"]]]\n  #=&gt; [1, [:a, \"a\"], [:b, \"b\"]] \n</code></pre>\n\n<p>and indeed it does.</p>\n\n<p><strong>Example 2</strong></p>\n\n<p>Suppose now that we have</p>\n\n<pre><code>arr = [1, 'cat', [2,3], {a: 4}]\n</code></pre>\n\n<p>then</p>\n\n<pre><code>arr.map(&amp;:itself)\n  #=&gt; [1, \"cat\", [2, 3], {:a=&gt;4}]\n</code></pre>\n\n<p>so  </p>\n\n<pre><code>arr.flat_map(&amp;:itself)\n</code></pre>\n\n<p>is found to return</p>\n\n<pre><code>[1, \"cat\", 2, 3, {:a=&gt;4}]\n</code></pre>\n\n<p>which is the reduction of</p>\n\n<pre><code>[1, \"cat\", *[2, 3], {:a=&gt;4}]\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1993, "favorite_count": 0, "accepted_answer_id": 40371468, "answer_count": 2, "score": 3, "last_activity_date": 1478113726, "creation_date": 1478049333, "question_id": 40371047, "link": "https://stackoverflow.com/questions/40371047/flat-map-in-ruby-when-working-with-different-elements", "title": "flat_map in ruby when working with different elements", "body": "<p>I think flat_map is great when you have an array of hashes of variable lengths and you want to work with each one individually:</p>\n\n<pre><code>data = [\n  {'apple' =&gt; 'fruit'},\n  {'carrot' =&gt; 'vegetable'},\n  {'orange' =&gt; 'fruit', 'pear' =&gt; 'fruit'},\n  {'lettuce' =&gt; 'vegetable'}\n] \n\ndata.flat_map(&amp;:to_a).reduce([]) {|acc, (k,v)| acc &lt;&lt; Hash[k,v] }\n =&gt; [{\"apple\"=&gt;\"fruit\"}, {\"carrot\"=&gt;\"vegetable\"}, {\"orange\"=&gt;\"fruit\"}, {\"pear\"=&gt;\"fruit\"}, {\"lettuce\"=&gt;\"vegetable\"}] \n</code></pre>\n\n<p>But I don't think I fully understand flat_map. According to <a href=\"http://www.apidock.com/ruby/Enumerable/flat_map\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Returns a new array with the concatenated results of running block\n  once for every element in enum.</p>\n</blockquote>\n\n<p>But look at this example:</p>\n\n<pre><code>[[1], {a: \"a\"}, {b: \"b\"}].flat_map(&amp;:to_a)\n=&gt; [1, [:a, \"a\"], [:b, \"b\"]] \n</code></pre>\n\n<p>The first item is stripped from the inner array, the other items are converted to arrays. How does it know to do this?</p>\n\n<p>When I call to_a like this:</p>\n\n<pre><code>[1].to_a\n =&gt; [1] \n[1].to_a.flatten\n =&gt; [1] \n</code></pre>\n\n<p>You see the result is different than what flat_map did. What is flat_map doing in the first example to strip the item of the array?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 2081579, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2cf910eeba1f1377ca935807d309165f?s=128&d=identicon&r=PG", "display_name": "Doublespeed", "link": "https://stackoverflow.com/users/2081579/doublespeed"}, "edited": false, "score": 0, "creation_date": 1478057784, "post_id": 40371052, "comment_id": 67997467, "body": "+1 for the simplicity. I gave the other answer the win since it breaks down the regex individual pieces. Thank you for your help."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1478049366, "creation_date": 1478049366, "answer_id": 40371052, "question_id": 40370978, "link": "https://stackoverflow.com/questions/40370978/identify-extract-replace-part-of-a-string-in-ruby/40371052#40371052", "title": "Identify extract &amp; replace part of a string in ruby", "body": "<p>For the first url</p>\n\n<pre><code>url1 = \"forum-351-page-2.html\"\n\n(1..30).each do |x|\n  puts url1.sub(/page-\\d*/, \"page-#{x}\")\nend\n</code></pre>\n\n<p>This will output </p>\n\n<pre><code>\"forum-351-page-1.html\"\n\"forum-351-page-2.html\"\n\"forum-351-page-3.html\"\n...\n\"forum-351-page-28.html\"\n\"forum-351-page-29.html\"\n\"forum-351-page-30.html\"\n</code></pre>\n\n<p>You can do the same thing for the second url.</p>\n\n<pre><code>url1.sub(/page=\\d*$/, \"page=#{x}\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1033, "user_id": 2081579, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2cf910eeba1f1377ca935807d309165f?s=128&d=identicon&r=PG", "display_name": "Doublespeed", "link": "https://stackoverflow.com/users/2081579/doublespeed"}, "edited": false, "score": 0, "creation_date": 1478057679, "post_id": 40371257, "comment_id": 67997442, "body": "+1 Thank you this is awesome. Thank you for breaking down the way this works. What&#39;s a good resource I can use to learn Regex in Ruby? With problems/solutions so I can practice? I&#39;m sadly oblivious to it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1033, "user_id": 2081579, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2cf910eeba1f1377ca935807d309165f?s=128&d=identicon&r=PG", "display_name": "Doublespeed", "link": "https://stackoverflow.com/users/2081579/doublespeed"}, "edited": false, "score": 0, "creation_date": 1478058789, "post_id": 40371257, "comment_id": 67997681, "body": "You might want to have a look at <a href=\"http://www.regular-expressions.info/tutorial.html\" rel=\"nofollow noreferrer\">this tutorial</a>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1478055916, "last_edit_date": 1478055916, "creation_date": 1478051134, "answer_id": 40371257, "question_id": 40370978, "link": "https://stackoverflow.com/questions/40370978/identify-extract-replace-part-of-a-string-in-ruby/40371257#40371257", "title": "Identify extract &amp; replace part of a string in ruby", "body": "<pre><code>R = /\n    (?:             # begin non-capture group\n      (?&lt;=-page-)   # match string in a positive lookbehind\n      \\d+           # match 1 or more digits\n      (?=\\.html)    # match period followed by 'html' in a positive lookahead\n    )               # close non-capture group\n    |               # or\n    (?:             # begin non-capture group\n      (?&lt;=&amp;page=)   # match string in a positive lookbehind\n      \\d+           # match 1 or more digits\n      \\z            # match end of string\n    )               # close non-capture group\n    /x              # free-spacing regex definition mode\n\ndef update(str, val)\n  str.sub(R, val.to_s)\nend\n\nupdate(\"forum-351-page-2.html\", 4)\n  #=&gt; \"forum-351-page-4.html\"\nupdate(\"forumdisplay.php?fid=115&amp;page=3\", \"4\")\n  #=&gt; \"forumdisplay.php?fid=115&amp;page=4\"\n</code></pre>\n"}], "owner": {"reputation": 1033, "user_id": 2081579, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2cf910eeba1f1377ca935807d309165f?s=128&d=identicon&r=PG", "display_name": "Doublespeed", "link": "https://stackoverflow.com/users/2081579/doublespeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 40371257, "answer_count": 2, "score": 0, "last_activity_date": 1478055916, "creation_date": 1478048816, "last_edit_date": 1478049281, "question_id": 40370978, "link": "https://stackoverflow.com/questions/40370978/identify-extract-replace-part-of-a-string-in-ruby", "title": "Identify extract &amp; replace part of a string in ruby", "body": "<p>I've been having difficulty trying to figureout how to go about solving this issue. I have 2 kinds of URLs in which I need to be able to update/increment the number value for the page. </p>\n\n<p>Url 1:</p>\n\n<pre><code>forum-351-page-2.html\n</code></pre>\n\n<p>In the above, I would like to modify this url for n pages. So I'd like to generate new urls with a given range of say page-1 to page-30. But that's all I'd like to change. page-n.html </p>\n\n<p>Url 2:</p>\n\n<pre><code>href=\"forumdisplay.php?fid=115&amp;page=3\n</code></pre>\n\n<p>The second url is different but I feal it's easier visit.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1478049612, "post_id": 40370706, "comment_id": 67995620, "body": "the duplicate doesn&#39;t cover rounding to two places."}], "answers": [{"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1478048062, "post_id": 40370737, "comment_id": 67995214, "body": "Ah. Integers. Of course. Thanks for the deep answer."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 5, "last_activity_date": 1478047228, "creation_date": 1478047228, "answer_id": 40370737, "question_id": 40370706, "link": "https://stackoverflow.com/questions/40370706/rails-bad-math/40370737#40370737", "title": "Rails: bad math?", "body": "<p>Welcome to integer math. In Ruby (like many languages) an integer divided by an integer returns an integer. In your case, 5 / 13 returns 0. If either your numerator or denominator is converted to a float before you run this operation, you will get a float in return, and the expected answer will result. </p>\n\n<p>You can convert to a float using <code>to_f</code>. So <code>(progress_index.to_f / positive_statuses.size) * 100</code> should work.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1478049439, "last_edit_date": 1592644375, "creation_date": 1478047465, "answer_id": 40370779, "question_id": 40370706, "link": "https://stackoverflow.com/questions/40370706/rails-bad-math/40370779#40370779", "title": "Rails: bad math?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.1/Fixnum.html#method-i-fdiv\" rel=\"nofollow noreferrer\">Fixnum#fdiv</a> and <a href=\"http://ruby-doc.org/core-2.3.1/Float.html#method-i-round\" rel=\"nofollow noreferrer\">Float#round</a> here:</p>\n<pre><code>def progress_percentage\n  ((progress_index.fdiv positive_statuses.size) * 100).round 2\nend\n</code></pre>\n<p>as requested, returns your number rounded to two decimal places.</p>\n<h3>Example</h3>\n<pre><code>((5.fdiv 13)*100).round 2\n#=&gt; 38.46 \n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1478049381, "accepted_answer_id": 40370737, "answer_count": 2, "score": 0, "last_activity_date": 1478049439, "creation_date": 1478047047, "question_id": 40370706, "link": "https://stackoverflow.com/questions/40370706/rails-bad-math", "closed_reason": "Duplicate", "title": "Rails: bad math?", "body": "<p>I've got this method:</p>\n\n<pre><code>def progress_percentage\n  (progress_index / positive_statuses.size) * 100\nend\n</code></pre>\n\n<p>It's returning <code>0</code> and it should be <code>38.46</code>.</p>\n\n<pre><code>@lead.progress_index          # this is 5\n@lead.positive_statuses.size  # this is 13\n@lead.progress_percentage     # this is 0?\n</code></pre>\n\n<p>The first two values have been confirmed. What is going on? Edit: confirmed in the view here.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FQdkU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FQdkU.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 241, "user_id": 4322949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8vYl.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/4322949/erica"}, "edited": false, "score": 0, "creation_date": 1478047917, "post_id": 40370606, "comment_id": 67995168, "body": "I think this will help you : <a href=\"http://stackoverflow.com/questions/23967390/rails-flash-notice-via-ajax#\" title=\"rails flash notice via ajax%23\">stackoverflow.com/questions/23967390/&hellip;</a> Cheers."}, {"owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "edited": false, "score": 0, "creation_date": 1478054476, "post_id": 40370606, "comment_id": 67996659, "body": "Please include a code snippet of your AJAX request, how you are rendering your form, your controller code, etc. If you are using server-rendered JavaScript (SJR) via a <code>create.js.erb</code> template, then you can definitely show errors on the page in the flash or inline by updating the DOM with JavaScript."}, {"owner": {"reputation": 1330, "user_id": 3041606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/b0ejf.png?s=128&g=1", "display_name": "makallio85", "link": "https://stackoverflow.com/users/3041606/makallio85"}, "edited": false, "score": 0, "creation_date": 1478058919, "post_id": 40370606, "comment_id": 67997708, "body": "Yes it is indeed."}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1478181889, "post_id": 40371840, "comment_id": 68057215, "body": "Thanks for answer, but still not work, I updated my code with your changes, please take a look"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1478218744, "post_id": 40371840, "comment_id": 68076649, "body": "I have updated my controller code to set the flash first and then render the js file.check that out and let me know :)"}, {"owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1478223773, "post_id": 40371840, "comment_id": 68077898, "body": "with your change only show the message &quot;You cannot edit this Page&quot; but not show the errors when I put duplicate key. the file &quot;error_messages&quot; is a .js or _js?"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1478244709, "post_id": 40371840, "comment_id": 68083922, "body": "so instead of flash message..put the model.error in it..ti will show the errors...flash.now[:error] = model.errors.full_messages"}, {"owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1478293114, "post_id": 40371840, "comment_id": 68111634, "body": "I put a duplicate key but the message does not appear. in the console appears this: ActiveRecord::StatementInvalid (TinyTds::Error: Violation of PRIMARY KEY constraint &#39;PK_Empresas&#39;. Cannot insert duplicate key in object &#39;dbo.Empresas&#39;. The duplicate key value is (3000)."}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "reply_to_user": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1478480478, "post_id": 40371840, "comment_id": 68158299, "body": "Its a database constraint error where you are trying to create new record while creating unique keys...just rename that key..may be an id or title/name.."}, {"owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "edited": false, "score": 0, "creation_date": 1479086363, "post_id": 40371840, "comment_id": 68396996, "body": "yes indeed, But that message is the one I need, which shows that the primary key exists"}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 0, "last_activity_date": 1478244803, "last_edit_date": 1478244803, "creation_date": 1478055830, "answer_id": 40371840, "question_id": 40370606, "link": "https://stackoverflow.com/questions/40370606/flash-messages-ajax/40371840#40371840", "title": "Flash messages (ajax)", "body": "<p>Yes..its possible..</p>\n\n<p>firstly,create a helper method that can be used to show flash messages on the view.</p>\n\n<pre><code> ###application_helper.rb\n    def flash_display\n        Rails.logger.info \"show flash message ajax======== \"\n      response = \"\"\n      flash.each do |name, msg|\n        msg=msg ###\"&lt;i class='fa fa-quote-left fa-border'&gt;&lt;/i&gt;\"+msg+\"&lt;i class='fa fa-quote-right fa-border'&gt;&lt;/i&gt;\"+\"&lt;button type='button' class='close' title='hide' data-dismiss='alert'&gt;&lt;i class='fa-times-circle-o fa pull-right'&gt;&lt;/i&gt;&lt;/button&gt;\".html_safe\n        response = response + \n        content_tag(:div, msg, :id =&gt; \"flash_#{name}\",:class=&gt;\"alert alert-danger\") do \n            \"#{msg}\".html_safe  \n        end     \n      end\n      flash.discard\n      response\n    end\n</code></pre>\n\n<p>Secondly,In your controller code where you post data using <code>remote=true</code>,handle js response as shown below.</p>\n\n<pre><code>     respond_to do |format|\n          ##use locals if multiple models\n        ##add model errors\n        ##flash.now[:error] = @model.errors.full_messages\n        ##flash.now[:error] = @model.errors.full_messages.to_sentence\n        flash.now[:error]=\"You cannot edit this Page\"\n        format.js { render 'shared/error_messages_js'}\n       end\n\n     ##views/shared/error_messages_js.erb\n        $('#flash_messages_placeholder').html(\"&lt;%= escape_javascript raw(flash_display) %&gt;\");\n</code></pre>\n\n<p><strong>So,the above js.erb file will look for an empty placeholder to show flash messages.So your form must also have a placeholder</strong></p>\n\n<pre><code>    ###_form.html.erb\n    &lt;form action=\"&lt;%= post_data_path(current_user)%&gt;\" method=\"post\" data-remote=\"true\"&gt;\n    &lt;div id=\"flash_messages_placeholder\" &gt; &lt;/div&gt;\n\n    ##input fields/submit button goes here\n   &lt;%end%&gt;\n</code></pre>\n\n<p>Hope it helps :)</p>\n"}], "owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478293327, "creation_date": 1478046097, "last_edit_date": 1478293327, "question_id": 40370606, "link": "https://stackoverflow.com/questions/40370606/flash-messages-ajax", "title": "Flash messages (ajax)", "body": "<p>Is it possible to show the errors of the form in the flash messages in ajax? I want to show the errors of the form when is not possible to save a record due to unique field. </p>\n\n<p>my index</p>\n\n<pre><code>&lt;!--&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;--&gt;\n&lt;h1&gt;Empresas&lt;/h1&gt;\n&lt;style&gt;\n.container {\n}\n\n&lt;/style&gt;\n&lt;div class=\"container\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"text-center\"&gt;\n      &lt;!-- Button trigger modal --&gt;\n      &lt;button type=\"button\" class=\"btn btn-primary btn-lg\" data-toggle=\"modal\" data-target=\"#mynewempresa\"&gt;\n        Nueva empresa\n      &lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;br&gt;\n  &lt;br&gt;\n\n\n\n  &lt;table id=\"empresas\" class=\"display\"&gt;&lt;!--el id empresas es de datatables referenciado en empresas.coffe y display class es una clase de datatables--&gt;\n  &lt;thead&gt;\n\n    &lt;tr&gt;&lt;!--active es para sombrear la fila--&gt;\n      &lt;th&gt;Clave&lt;/th&gt;\n      &lt;th&gt;Empresa&lt;/th&gt;\n      &lt;th&gt;Acci\u00f3n&lt;/th&gt;\n      &lt;th&gt;&lt;/th&gt;\n\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n    &lt;tbody id=\"container_empresas\"&gt;\n      &lt;%= render @empresas %&gt;&lt;!--carga todos los empresas--&gt;\n&lt;/tbody&gt;\n\n\n&lt;/table&gt;\n&lt;!-- Modal create action --&gt;\n&lt;%= form_for(@empresa, remote: true, html: {class: \"form-horizontal formulario-validado-create\"}) do |f| %&gt; &lt;!--ajax remote: true--&gt;\n  &lt;div class=\"modal fade\" id=\"mynewempresa\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"&gt;\n    &lt;div class=\"modal-dialog\" role=\"document\"&gt;\n      &lt;div class=\"modal-content\"&gt;\n        &lt;div class=\"modal-header\"&gt;\n          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n          &lt;h4 class=\"modal-title\" id=\"myModalLabel\"&gt;Agregar empresa&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-body\"&gt;\n\n          &lt;div id=\"flash_messages_placeholder\" &gt;\n\n           &lt;/div&gt;\n\n          &lt;div class=\"form-group\"&gt;\n            &lt;%= f.label :IdEmpresa, \"Clave:\", class: \"control-label col-md-2 \" %&gt;\n            &lt;div class=\"col-md-3\"&gt;\n              &lt;%= f.text_field :IdEmpresa, class: \"form-control empresa_clave\",autofocus: true, minlength: \"1\", required: \"true\"  %&gt;\n            &lt;/div&gt;\n              &lt;%= f.label :Empresa, \"Empresa:\", class: \"control-label col-md-2\" %&gt;\n            &lt;div class=\"col-md-5\"&gt;\n              &lt;%= f.text_field :Empresa, class: \"form-control empresa_empresa\",minlength: \"4\", required: \"true\"  %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n\n\n\n\n        &lt;/div&gt;\n\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\" id=\"mynewempresaclose\"&gt;Cerrar&lt;/button&gt;\n          &lt;%= submit_tag \"Crear\", class: \"btn btn-primary\"%&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;%end%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>my controller</p>\n\n<pre><code>class EmpresasController &lt; ApplicationController\n  before_action :set_empresa, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_usuario!\n\n\n  # GET /empresas\n  # GET /empresas.json\n  def index\n    @empresas = Empresa.all\n    @empresa = Empresa.new\n    respond_to do |format|\n      format.html\n      format.csv { send_data @empresas.to_csv}\n      format.xls #{ send_data @empresas.to_csv(col_sep: \"\\t\") }\n    end\n  end\n\n  def import\n    Empresa.import(params[:file])\n    redirect_to empresas_path, notice: \"Sucursales importadas.\"\n  end\n\n  # GET /empresas/1\n  # GET /empresas/1.json\n  def show\n  end\n\n  # GET /empresas/new\n  def new\n    @empresa = Empresa.new\n  end\n\n  # GET /empresas/1/edit\n  def edit\n  end\n\n  # POST /empresas\n  # POST /empresas.json\n  def create\n    @empresa = Empresa.new(empresa_params)\n    format.js { render 'shared/error_messages_js'}\n\n    respond_to do |format|\n      if @empresa.save\n        format.html { redirect_to @empresa, notice: 'Empresa was successfully created.' }\n        format.json { render :show, status: :created, location: @empresa }\n        format.js {flash.now[:notice] = 'La Sucursal se ha creado de forma exitosa.'} #ajax\n\n\n      else\n        format.html { render :new }\n        format.json { render json: @empresa.errors, status: :unprocessable_entity }\n        format.js {flash.now[:alert] = 'Error al crear la sucursal.'} #ajax\n\n\n      end\n    end\n  end\n\n  # PATCH/PUT /empresas/1\n  # PATCH/PUT /empresas/1.json\n\n\n\n  def update\n    respond_to do |format|\n            ##use locals if multiple models\n        ##add model errors\n        flash.now[:error] = @empresa.errors.full_messages\n        ##flash.now[:error] = @model.errors.full_messages.to_sentence\n\n      if @empresa.update(empresa_params)\n        format.html { redirect_to @empresa, notice: 'Empresa was successfully updated.' }\n        format.json { render :show, status: :ok, location: @empresa }\n        format.js {flash.now[:notice] = 'La Sucursal se ha actualizado de forma exitosa.'} #ajax\n\n\n      else\n        format.html { render :edit }\n        format.json { render json: @empresa.errors, status: :unprocessable_entity }\n        format.js {flash.now[:alert] = 'Error al actualizar la sucursal.'} #ajax\n\n\n      end\n    end\n  end\n\n  # DELETE /empresas/1\n  # DELETE /empresas/1.json\n  def destroy\n    @empresa.destroy\n    respond_to do |format|\n      format.html { redirect_to empresas_url, notice: 'Empresa was successfully destroyed.' }\n      format.json { head :no_content }\n      format.js {flash.now[:notice] = 'La Sucursal se ha borrado de forma exitosa.'} #ajax\n\n\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_empresa\n      @empresa = Empresa.find(params[:idempresa])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def empresa_params\n      params.require(:empresa).permit(:IdEmpresa, :Empresa)\n    end\nend\n</code></pre>\n\n<p>my application helper:</p>\n\n<pre><code>module ApplicationHelper\n  ###application_helper.rb\n   def flash_display\n       Rails.logger.info \"show flash message ajax======== \"\n     response = \"\"\n     flash.each do |name, msg|\n       msg=msg ###\"&lt;i class='fa fa-quote-left fa-border'&gt;&lt;/i&gt;\"+msg+\"&lt;i class='fa fa-quote-right fa-border'&gt;&lt;/i&gt;\"+\"&lt;button type='button' class='close' title='hide' data-dismiss='alert'&gt;&lt;i class='fa-times-circle-o fa pull-right'&gt;&lt;/i&gt;&lt;/button&gt;\".html_safe\n       response = response +\n       content_tag(:div, msg, :id =&gt; \"flash_#{name}\",:class=&gt;\"alert alert-danger\") do\n           \"#{msg}\".html_safe\n       end\n     end\n     flash.discard\n     response\n   end\nend\n</code></pre>\n\n<p>##views/shared/error_messages_js.erb</p>\n\n<pre><code>$('#flash_messages_placeholder').html(\"&lt;%= escape_javascript raw(flash_display) %&gt;\");\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 1, "creation_date": 1478072707, "post_id": 40370541, "comment_id": 68002115, "body": "How is this related to <a href=\"https://stackoverflow.com/questions/tagged/json\">json</a>?"}, {"owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1478084237, "post_id": 40370541, "comment_id": 68008377, "body": "I&#39;ve added this just because node attributes are in json"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1478084463, "post_id": 40370541, "comment_id": 68008526, "body": "They are not ;-) Or.. depends on how at what place you see it.."}], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "edited": false, "score": 0, "creation_date": 1478084497, "post_id": 40374751, "comment_id": 68008548, "body": "Thanks. I have seen some Ohai issues and Ohai rollback is not that simple when chef client is affected. The plugin file stored locally. So I wanted to discuss here if you know how the plugin can be limited to not affect other host components. I know that this is a bit of over-engineering, but having some limits like in Java heap size max or something else would be great."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "edited": false, "score": 0, "creation_date": 1478084588, "post_id": 40374751, "comment_id": 68008605, "body": "I see, from that perspective it really makes sense :) Not sure if there&#39;s such thing as &quot;heap&quot; in Ruby.."}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": false, "score": 1, "last_activity_date": 1478072681, "creation_date": 1478072681, "answer_id": 40374751, "question_id": 40370541, "link": "https://stackoverflow.com/questions/40370541/chef-ohai-plugin-infinite-loop-resources-leak-and-shell-out-risk-minimizing/40374751#40374751", "title": "Chef Ohai plugin infinite loop, resources leak and shell out risk minimizing", "body": "<p>The chef-client run won't start/succeed, if <em>ohai</em> hangs.. you should notice this in some kind of monitoring.</p>\n\n<p>Regarding the <em>timeout</em> part: Searching the source code reveals <a href=\"https://github.com/chef/ohai/blob/13485c17da688654890047d1952d9f71e735d162/lib/ohai/mixin/command.rb#L33-L36\" rel=\"nofollow noreferrer\">this</a>:</p>\n\n\n\n<pre class=\"lang-rb prettyprint-override\"><code>def shell_out(cmd, **options)\n  # unless specified by the caller timeout after 30 seconds\n  options[:timeout] ||= 30\n  so = Mixlib::ShellOut.new(cmd, options)\n</code></pre>\n\n<p>So you should be able to set the timeout as you like (2 seconds in this case):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>so = shell_out(\"/bin/your-command\", :timeout =&gt; 2)\n</code></pre>\n\n<p>Regarding the third sub-question</p>\n\n<blockquote>\n  <p>Do you know more protections just in case?</p>\n</blockquote>\n\n<p>you are getting pretty broad. Try to solve the problems that occur, stop over-engineering.</p>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1479484496, "creation_date": 1479484496, "answer_id": 40681254, "question_id": 40370541, "link": "https://stackoverflow.com/questions/40370541/chef-ohai-plugin-infinite-loop-resources-leak-and-shell-out-risk-minimizing/40681254#40681254", "title": "Chef Ohai plugin infinite loop, resources leak and shell out risk minimizing", "body": "<p>Just for the sake of completeness, Chef does not guard against broken or malicious Ohai plugins. If you put <code>sleep 1 while true</code> in your Ohai plugin it will happily sit there forever.</p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "is_accepted": true, "score": 0, "last_activity_date": 1479683088, "creation_date": 1479683088, "answer_id": 40710487, "question_id": 40370541, "link": "https://stackoverflow.com/questions/40370541/chef-ohai-plugin-infinite-loop-resources-leak-and-shell-out-risk-minimizing/40710487#40710487", "title": "Chef Ohai plugin infinite loop, resources leak and shell out risk minimizing", "body": "<p>Seems I have found solution to limit Ohai resources for Redhat Linux in terms of CPU, disk space usage, disk space I/O, long run timeout and heap size memory limit. So you will not affect other host's components. In ideal world, you write optimised and right code, but memory leak is global problem and could happen so I think protections are needed especially when you have loaded Ohai plugin to hunders or tousands production servers.</p>\n\n<p><strong>CPU -</strong>\nIf I'm right Ohai plugin gets lowest cpu priority (-19?). Please confirm this if you know. So Ohai plugin cannot affect your production app in terms of CPU.</p>\n\n<p><strong>Disk space -</strong>\nOhai plugin should write to node attributes</p>\n\n<p><strong>Protection for unexpected long run -</strong></p>\n\n<pre><code>    require 'timeout'\n    begin\n      status = Timeout::timeout(600) {\n        # Ohai plugin code is here\n      }\n    rescue Timeout::Error\n      puts 'timeout'\n    end\n</code></pre>\n\n<p><strong>Protection for unexpected long run of shell_out:</strong></p>\n\n<pre><code>so = shell_out(\"/bin/your-command\", :timeout =&gt; 30)\n</code></pre>\n\n<p><strong>Memory (RAM) heap size limit -</strong></p>\n\n<pre><code>require \"thread\"\n# This thread is memory watcher. It works separately and does exit if heap size reached.\n# rss is checked including childs but excluding shared memory.\n# This could be ok for Ohai plugin. I'm assuming memory is not shared.\n# Exit - if heap size limit reached (10 000 KB) or any unexpected scenario happened.\nThread.start {\n  loop do\n    sleep 1\n    current_memory_rss = `ps ax -o pid,rss | grep -E \"^[[:space:]]*#{$$}\"`.strip.split.map(&amp;:to_i)[1].to_i\n\n    if current_memory_rss != nil &amp;&amp; current_memory_rss &gt; 0 &amp;&amp; $$ != nil &amp;&amp; $$.to_i &gt; 0\n      exit if current_memory_rss &gt; 10_000\n    else\n      exit\n    end\n  end\n}\n\n# Your Ohai code begins here\n# For testing, any code can be included to make memory growing constantly as infinite loop:\nloop do\n  puts `ps ax -o pid,rss | grep -E \"^[[:space:]]*#{$$}\"`.strip.split.map(&amp;:to_i)[1].to_s + ' KB'\nend\n</code></pre>\n\n<p>Please let me know if you have better solutions, but it seems it works.</p>\n\n<p><strong>Disk I/O read heavy usage -</strong>\ntimeout should help here, but recommended to avoid commands like <code>find</code> and similar others</p>\n"}], "owner": {"reputation": 804, "user_id": 5689995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-dkQNVFt5pIA/AAAAAAAAAAI/AAAAAAAAD4g/DiQXgwL6g3c/photo.jpg?sz=128", "display_name": "laimison", "link": "https://stackoverflow.com/users/5689995/laimison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 40710487, "answer_count": 3, "score": -1, "last_activity_date": 1479683088, "creation_date": 1478045547, "last_edit_date": 1478084469, "question_id": 40370541, "link": "https://stackoverflow.com/questions/40370541/chef-ohai-plugin-infinite-loop-resources-leak-and-shell-out-risk-minimizing", "title": "Chef Ohai plugin infinite loop, resources leak and shell out risk minimizing", "body": "<p>Usually, Ohai plugin runs periodically to collect some host parameters and some of the plugins usually added to all nodes in the company. This could be sensitive for resources using and how Ohai handle that. So I have two questions here.</p>\n\n<p>The first one is what will happen if I will put infinite loop accidentally? Does Ohai/ruby has some max heap size or any memory limits?</p>\n\n<p>Second question would be about shell out in Ohai. Is it possible to reduce timeout? Do you know more protections just in case?</p>\n\n<p>I use only special ruby timeout for now:</p>\n\n<pre><code>require 'timeout'\nbegin\n  status = Timeout::timeout(600) {\n    # all code here\n  }\nrescue Timeout::Error\n  puts 'timeout'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "rails-admin"], "owner": {"reputation": 1924, "user_id": 2190906, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/v7jUv.jpg?s=128&g=1", "display_name": "ePascoal", "link": "https://stackoverflow.com/users/2190906/epascoal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478044756, "creation_date": 1478044756, "question_id": 40370451, "link": "https://stackoverflow.com/questions/40370451/rails-admin-mongodb-how-can-you-edit-an-embedded-document-via-rails-admin", "title": "Rails Admin (mongodb) : How can you edit an embedded document via rails admin?", "body": "<p>How to edit an embedded document via rails admin?\n<a href=\"https://i.stack.imgur.com/CHaMj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CHaMj.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my example i have one Home model(for content)  and i have a Translation model. \nthis is my home document:</p>\n\n<pre><code>[{\n  \"_id\": \"home\",\n  \"title\": {\n      \"_id\":\"home_title\"\n  },\n  \"subtitle\": {\n      \"_id\":\"home_subtitle\"\n  }\n}]\n</code></pre>\n\n<p>and my translation document:</p>\n\n<p>[{\n  \"_id\": \"home_title\",\n  \"en\":\"title\",\n  \"pt\":\"titulo\"\n  },\n  {\n  \"_id\": \"home_subtitle\",\n  \"en\":\"subtitle\",\n  \"pt\":\"subtitulo\"\n  }\n]</p>\n\n<p>Home has embedded translation.</p>\n\n<p>in <strong>home.rb</strong>:</p>\n\n<pre><code>class Home\n  include Mongoid::Document\n  field :title\n  field :subtitle\n  embeds_one :title, as: :translatable, class_name: 'Translation'\n  embeds_one :subtitle, as: :translatable, class_name: 'Translation'\nend\n</code></pre>\n\n<p>in translation.rb:</p>\n\n<pre><code>class Translation\n\n  include Mongoid::Document\n  attr_accessor :_id\n  embedded_in :translatable\n\n  field :pt\n  field :en\n\nend\n</code></pre>\n\n<p>how can you edit an embedded document via rails admin? Supposing is a 1:1 relantionship.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478065507, "post_id": 40371563, "comment_id": 67999331, "body": "I think if you remove the <code>proc { }</code> then you can use <code>instance_eval &amp;filter_method</code>."}, {"owner": {"reputation": 280615, "user_id": 75170, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dee3c76d4bb3d44677c839ef281e52f9?s=128&d=identicon&r=PG", "display_name": "John Feminella", "link": "https://stackoverflow.com/users/75170/john-feminella"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478088494, "post_id": 40371563, "comment_id": 68010989, "body": "@maxpleaner I can&#39;t remove the <code>proc</code> because in other controllers I&#39;ll still want to use the <code>before ..., &amp;...</code> style. I guess I could refactor those other controllers, though?"}], "tags": [], "owner": {"reputation": 280615, "user_id": 75170, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dee3c76d4bb3d44677c839ef281e52f9?s=128&d=identicon&r=PG", "display_name": "John Feminella", "link": "https://stackoverflow.com/users/75170/john-feminella"}, "is_accepted": false, "score": 1, "last_activity_date": 1478053752, "creation_date": 1478053752, "answer_id": 40371563, "question_id": 40369829, "link": "https://stackoverflow.com/questions/40369829/how-can-i-extract-a-ruby-instance-eval-invocation-into-a-method/40371563#40371563", "title": "How can I extract a Ruby `instance_eval` invocation into a method?", "body": "<p>I wound up doing this:</p>\n\n<pre><code>module Filters\n  def self.authorize_admin\n    proc { halt(401) unless current_user.admin? }\n  end\n\n  def self.filter(controller, filter)\n    filter_method = method(filter.to_sym)\n    controller.instance_eval &amp;(filter_method.call)\n  end\nend\n</code></pre>\n\n<p>and you now invoke it like:</p>\n\n<pre><code>Filters.filter(self, :authorize_admin)\n</code></pre>\n"}], "owner": {"reputation": 280615, "user_id": 75170, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dee3c76d4bb3d44677c839ef281e52f9?s=128&d=identicon&r=PG", "display_name": "John Feminella", "link": "https://stackoverflow.com/users/75170/john-feminella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478053752, "creation_date": 1478040680, "question_id": 40369829, "link": "https://stackoverflow.com/questions/40369829/how-can-i-extract-a-ruby-instance-eval-invocation-into-a-method", "title": "How can I extract a Ruby `instance_eval` invocation into a method?", "body": "<p>I have this Ruby code for a Padrino application:</p>\n\n<pre><code>module Filters\n  def self.authorize_admin\n    proc { halt(401) unless current_user.admin? }\n  end\nend\n\nApp.controllers :secrets do\n  before :show, &amp;Filters.authorize_admin\n  # ...\nend\n</code></pre>\n\n<p>When the <code>secrets</code> controller receives a request on the <code>show</code> route, it will run the <code>authorize_admin</code> filter.</p>\n\n<p>If I want this rule to apply to every route instead, I might write this:</p>\n\n<pre><code>before { instance_eval &amp;Filters.authorize_admin }\n</code></pre>\n\n<p>I'd like to extract this to a method in <code>Filters</code> instead, so that I can just write:</p>\n\n<pre><code>before { Filters.only_administrators }\n</code></pre>\n\n<p>What's the right way to do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activesupport"], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "is_accepted": true, "score": 1, "last_activity_date": 1478064780, "creation_date": 1478064780, "answer_id": 40373087, "question_id": 40369765, "link": "https://stackoverflow.com/questions/40369765/ruby-2-3-load-method-doesnt-return-classes-loaded-anymore-returns-boolean-ins/40373087#40373087", "title": "Ruby 2.3 load method doesn&#39;t return classes loaded anymore - Returns boolean instead", "body": "<p>This is not Ruby. Ruby's <code>load</code> always returned <code>true</code>, both in 1.8.7 and 2.3.1. However, there's ActiveSupport <code>load</code> that uses <code>load_dependency</code> (<a href=\"http://apidock.com/rails/v3.0.0/ActiveSupport/Dependencies/Loadable/load_dependency\" rel=\"nofollow noreferrer\">http://apidock.com/rails/v3.0.0/ActiveSupport/Dependencies/Loadable/load_dependency</a>) which does return new constants defined in the file. </p>\n\n<p>Can you try to use <code>load_dependency</code> instead of <code>load</code> here?</p>\n"}], "owner": {"reputation": 119, "user_id": 1896065, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/65528b147c9323a2ecb0d12dbb916833?s=128&d=identicon&r=PG", "display_name": "JmG", "link": "https://stackoverflow.com/users/1896065/jmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 40373087, "answer_count": 1, "score": 1, "last_activity_date": 1478064780, "creation_date": 1478040260, "question_id": 40369765, "link": "https://stackoverflow.com/questions/40369765/ruby-2-3-load-method-doesnt-return-classes-loaded-anymore-returns-boolean-ins", "title": "Ruby 2.3 load method doesn&#39;t return classes loaded anymore - Returns boolean instead", "body": "<p>I am migrating a project from Ruby 1.8.7 to Ruby 2.3 and rails from 2 to 4. </p>\n\n<p>I have this code which was working in 1.8.7</p>\n\n<pre><code>class_list = []\noriginal_mechanism = ActiveSupport::Dependencies.mechanism\nActiveSupport::Dependencies.mechanism = :load \n  begin\n    class_list += load(\"/tmp/abc.rb\")\n  rescue Exception =&gt; e\n    debug e.backtrace\n  end\nActiveSupport::Dependencies.mechanism = original_mechanism \n</code></pre>\n\n<p>my sample file abc.rb</p>\n\n<pre><code>class Abc\n  def ...\nend\nclass Def\n...\nend\n</code></pre>\n\n<p>In Ruby 1.8.7 class_list is <b>[Abc,Def]</b></p>\n\n<p>In Ruby 2.3 class_list is <b>[true]</b> - (I had to change the line to 'class_list &lt;&lt; load(\"/tmp/abc.rb\")' to make it give this output )</p>\n\n<p>Any of you know how to make it return the old way? All I want is the ClassNames of the classes loaded at the end. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478046775, "post_id": 40370621, "comment_id": 67994901, "body": "The formatting on this is a little messed up, but you do have the right answer here."}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1478171038, "post_id": 40370621, "comment_id": 68049648, "body": "Thanks, might it be correct to make it a one line? <code>gem uninstall gem-name &amp; bundle install</code> ? I actually did uninstall install of the gem (instead of using bundler)"}], "tags": [], "owner": {"reputation": 46, "user_id": 5216403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50a3bfa13fcda09a61151978b1b91?s=128&d=identicon&r=PG&f=1", "display_name": "Rabulist", "link": "https://stackoverflow.com/users/5216403/rabulist"}, "is_accepted": true, "score": 2, "last_activity_date": 1478167486, "last_edit_date": 1478167486, "creation_date": 1478046275, "answer_id": 40370621, "question_id": 40369764, "link": "https://stackoverflow.com/questions/40369764/how-to-reset-some-ruby-gem-files-without-git/40370621#40370621", "title": "How to reset some Ruby Gem files without git?", "body": "<p>You can uninstall the gem</p>\n\n<pre><code>gem uninstall gem-name\n</code></pre>\n\n<p>And then do a </p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>should be the easiest solution</p>\n"}], "owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 40370621, "answer_count": 1, "score": 0, "last_activity_date": 1478167486, "creation_date": 1478040260, "question_id": 40369764, "link": "https://stackoverflow.com/questions/40369764/how-to-reset-some-ruby-gem-files-without-git", "title": "How to reset some Ruby Gem files without git?", "body": "<p>I have made some modifications to some gem files that's not tracked by git. How do I reset the gem files to it's used version in console (with bundler?) ?</p>\n\n<p>I'm also using Ruby on Rails.</p>\n"}, {"tags": ["ruby", "slack-api"], "comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1478038457, "post_id": 40369227, "comment_id": 67992517, "body": "if you put a downvote at least explain why please"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1478064576, "creation_date": 1478064576, "answer_id": 40373051, "question_id": 40369227, "link": "https://stackoverflow.com/questions/40369227/using-slack-ruby-bot/40373051#40373051", "title": "Using slack-ruby-bot", "body": "<p>You're code is already most of the way there, I think.</p>\n\n<pre><code>match /^Is this bike stolen (?&lt;frame_number&gt;\\w*)\\?$/ do |client, data, match|\n  client.say(channel: data.channel, text: \"text here\")\nend\n</code></pre>\n\n<p>I think all you need to do is add the <code>@bot</code> string to the regex - </p>\n\n<pre><code>/^@bot Is this bike stolen (?&lt;frame_number&gt;\\w*)\\?$/\n</code></pre>\n\n<p>If you want to use this will all commands, you can make a wrapper method for the regex:</p>\n\n<pre><code>def bot_regex(rest_of_regex)\n  /^@bot #{rest_of_regex}$/\nend\n\nregex = bot_regex \"Is this bike stolen (?&lt;frame_number&gt;\\w*)\\?\"\nmatch regex do |client, data, match| # etc\n</code></pre>\n\n<p>It might also be helpful to wrap the regex match catcher in a method:</p>\n\n<pre><code>def regex_matcher(name)\n  \"(?&lt;#{name}&gt;\\w*)\"\nend\n\nmatcher = regex_matcher(\"frame_number\")\nregex = bot_regex \"Is this bike stolen #{matcher}\\?\"\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478064576, "creation_date": 1478037157, "question_id": 40369227, "link": "https://stackoverflow.com/questions/40369227/using-slack-ruby-bot", "title": "Using slack-ruby-bot", "body": "<p>I am trying to get to grips with the <code>slack-ruby-bot</code> gem. Looking at the examples I can match on text and then send back a response</p>\n\n<pre><code>match /^Is this bike stolen (?&lt;frame_number&gt;\\w*)\\?$/ do |client, data, match|\n  client.say(channel: data.channel, text: \"text here\")\nend\n</code></pre>\n\n<p>To get a response from the bot I would just write <code>Is this bike stolen 123456?</code> and i would get <code>text here</code> returned.</p>\n\n<p>What I want to achieve though is for a response only if i do <code>@bot Is this bike stolen 123456?</code>, so i have to specifically ask the bot.</p>\n\n<p>It would also be great to show some typing text whilst the response is being put together</p>\n\n<p>Has anyone got experience with this or have some examples to look at for inspiration</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 95, "user_id": 5450839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffc5d3ab2c8f6883e504603c2516ebfa?s=128&d=identicon&r=PG&f=1", "display_name": "tkz79", "link": "https://stackoverflow.com/users/5450839/tkz79"}, "edited": false, "score": 1, "creation_date": 1478037389, "post_id": 40368828, "comment_id": 67992087, "body": "Have you tried the following options: <a href=\"http://stackoverflow.com/questions/12591763/how-do-i-set-a-request-referrer-inside-my-rspec\" title=\"how do i set a request referrer inside my rspec\">stackoverflow.com/questions/12591763/&hellip;</a>"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "reply_to_user": {"reputation": 95, "user_id": 5450839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffc5d3ab2c8f6883e504603c2516ebfa?s=128&d=identicon&r=PG&f=1", "display_name": "tkz79", "link": "https://stackoverflow.com/users/5450839/tkz79"}, "edited": false, "score": 0, "creation_date": 1478038080, "post_id": 40368828, "comment_id": 67992372, "body": "@tkz79 that got me sorted out. Thank you."}], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478035233, "creation_date": 1478035233, "question_id": 40368828, "link": "https://stackoverflow.com/questions/40368828/how-to-redirect-to-request-referrer-for-devise-authenticated-controller-test", "title": "How to redirect_to request.referrer for Devise authenticated controller test?", "body": "<p>I'm trying to get a test to pass. The controller action I'm testing finishes with <code>redirect_to request.referrer</code> and it works in development.</p>\n\n<p>In my controller test however I'm getting:</p>\n\n<blockquote>\n  <p>ActionController::ActionControllerError: Cannot redirect to nil!</p>\n</blockquote>\n\n<p>Here's the test:</p>\n\n<pre><code>it 'should update a group' do\n  put :update, id: group1.id, group: { name: 'foo' }\n  expect(response).to be_success\nend\n</code></pre>\n\n<p>I have other tests for the same controller that...</p>\n\n<pre><code>expect(response).to be_success\n</code></pre>\n\n<p>...and they pass, provided the action they test finishes by rendering or redirecting to something that is not <code>request.referer</code>.</p>\n\n<p>I'm authenticating my user in that controller:</p>\n\n<pre><code>before_action :authenticate_user!\n</code></pre>\n\n<p>I have each example preceded with:</p>\n\n<pre><code>before(:each) do\n  sign_in user1\nend\n</code></pre>\n\n<p>I'm configuring RSpec like so:</p>\n\n<pre><code>RSpec.configure do |config|\n  config.include Devise::Test::ControllerHelpers, type: :controller\nend\n</code></pre>\n\n<p>From what I understand if I pass a headers hash to my test request (for example with 'HTTP_REFERER') it will overwrite the one from Devise. Is the solution here to properly set that hash?</p>\n\n<p>I'm using <strong>rspec-rails</strong> (3.5.2), <strong>devise</strong> (4.2.0), <strong>rails</strong> (5.0.0.1)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1478035695, "post_id": 40368566, "comment_id": 67991353, "body": "I have no idea what your store certificate contains but it should contain the end of the trust chain, i.e. the one certificate which fits at the end of the certificate chain sent by the server. And of course all certificates except the server certificate should be CA certificates, i.e. have the basic constraint CA:true. You also might try to remove the <code>verify_depth</code> setting."}, {"owner": {"reputation": 3079, "user_id": 689424, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ffd09ae496b61db8fce4e1aaaf50f5?s=128&d=identicon&r=PG", "display_name": "onetwopunch", "link": "https://stackoverflow.com/users/689424/onetwopunch"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1478362276, "post_id": 40368566, "comment_id": 68127545, "body": "Thanks for the input, the file does contain the certs in proper order and I&#39;ve tried with and without the verify_depth option."}], "owner": {"reputation": 3079, "user_id": 689424, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ffd09ae496b61db8fce4e1aaaf50f5?s=128&d=identicon&r=PG", "display_name": "onetwopunch", "link": "https://stackoverflow.com/users/689424/onetwopunch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478035397, "creation_date": 1478033998, "last_edit_date": 1478035397, "question_id": 40368566, "link": "https://stackoverflow.com/questions/40368566/verify-self-issued-chained-cert-with-ruby-openssl", "title": "Verify self-issued chained cert with Ruby OpenSSL", "body": "<p>I'm trying to us ActiveResource to pull from an internal API where we have a self-issued cert chain with 3 certs inside in PEM format. ActiveResource just passes the <code>ssl_options</code> to Net::HTTP so that shouldn't be a factor.</p>\n\n<p>I've tried a number of options to get it to work including:</p>\n\n<pre><code>store = OpenSSL::X509::Store.new\nstore.add_file('foo.com.chained.crt')\nself.ssl_options = {\n  cert_store:  store,\n  verify_depth: 3,\n  verify_mode: OpenSSL::SSL::VERIFY_PEER,\n}\n</code></pre>\n\n<p>I've also tried using this method perscribed in the <a href=\"https://github.com/rails/activeresource/blob/411aa5ccfab1ba41adaee165f456b52b9494b849/lib/active_resource/base.rb#L166\" rel=\"nofollow noreferrer\">source</a></p>\n\n<pre><code> class Person &lt; ActiveResource::Base\n    self.site = \"https://secure.api.people.com/\"\n\n    File.open(pem_file_path, 'rb') do |pem_file|\n      self.ssl_options = {\n        cert:        OpenSSL::X509::Certificate.new(pem_file),\n        # key:         OpenSSL::PKey::RSA.new(pem_file),\n        verify_depth: 3,\n        verify_mode: OpenSSL::SSL::VERIFY_PEER }\n    end\n  end\n</code></pre>\n\n<p>As well as many permutations of these and other inputs like <code>key</code> and setting the <code>.crt</code> file as <code>ca_file</code>. None work and all give me the following error:</p>\n\n<pre><code>ActiveResource::SSLError: SSL_connect returned=1 errno=0 state=error: certificate verify failed\n</code></pre>\n\n<p>Except when I use the <code>key</code> parameter, which gives me:</p>\n\n<pre><code>OpenSSL::PKey::RSAError: Neither PUB key nor PRIV key: nested asn1 error\n</code></pre>\n\n<p>I'm really stuck here and this API is severely making me question my understanding of SSL. I would assume to authenticate the server, all you'd need would be the chained cert. I'm confused how the public key fits in and I really don't understand why explicitly creating a local trusted store and referencing that doesn't work.</p>\n\n<p>I'm using <code>verify_depth: 3</code> since the chained cert has three signatures, but I've tried without that option and it still doesn't work. The only thing that seems to work is using <code>VERIFY_NONE</code>, which is obviously wrong.</p>\n\n<p><strong>My question is</strong> how should I properly configure OpenSSL in Ruby to use a self-issued, chained certificate in one <code>.crt</code> file? And why haven't the method's I've listed above worked?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478032495, "post_id": 40368170, "comment_id": 67989770, "body": "That code won&#39;t compile in C. Regardless, ruby has a for loop, but it&#39;s not used. Check out <a href=\"http://stackoverflow.com/documentation/ruby/1159/iteration#t=201611012034506435448\">this</a>."}, {"owner": {"reputation": 65, "user_id": 7038644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfb18dcf3c7e257f7b0025dd0feec24?s=128&d=identicon&r=PG&f=1", "display_name": "A.L", "link": "https://stackoverflow.com/users/7038644/a-l"}, "edited": false, "score": 0, "creation_date": 1478032806, "post_id": 40368170, "comment_id": 67989952, "body": "I will check it out thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478034797, "post_id": 40368170, "comment_id": 67990934, "body": "Why the rush to select an answer? Quick selections can discourage other answers and short-circuit members who are still preparing answers. There&#39;s no rush. Most here wait a minimum of a couple of hours."}, {"owner": {"reputation": 65, "user_id": 7038644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfb18dcf3c7e257f7b0025dd0feec24?s=128&d=identicon&r=PG&f=1", "display_name": "A.L", "link": "https://stackoverflow.com/users/7038644/a-l"}, "edited": false, "score": 0, "creation_date": 1478037998, "post_id": 40368170, "comment_id": 67992343, "body": "I am new to this site and I am unfamiliar with how things go"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7038644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfb18dcf3c7e257f7b0025dd0feec24?s=128&d=identicon&r=PG&f=1", "display_name": "A.L", "link": "https://stackoverflow.com/users/7038644/a-l"}, "edited": false, "score": 0, "creation_date": 1478033212, "post_id": 40368253, "comment_id": 67990131, "body": "Thank you for the help I will try this out and see if it works"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1478033272, "post_id": 40368253, "comment_id": 67990164, "body": "It is not a <i>literal</i> translation, since it does not increment <code>i</code>, whilst the C code does."}, {"owner": {"reputation": 65, "user_id": 7038644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfb18dcf3c7e257f7b0025dd0feec24?s=128&d=identicon&r=PG&f=1", "display_name": "A.L", "link": "https://stackoverflow.com/users/7038644/a-l"}, "edited": false, "score": 0, "creation_date": 1478033695, "post_id": 40368253, "comment_id": 67990371, "body": "What does #{i} mean?"}, {"owner": {"reputation": 107, "user_id": 3462514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591f903f3e54b513e7b2b77e81b2cd48?s=128&d=identicon&r=PG&f=1", "display_name": "shawnbro", "link": "https://stackoverflow.com/users/3462514/shawnbro"}, "edited": false, "score": 0, "creation_date": 1478037960, "post_id": 40368253, "comment_id": 67992326, "body": "#{i} is a string interpolation.  it just prints the value of our i variable."}], "tags": [], "owner": {"reputation": 107, "user_id": 3462514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/591f903f3e54b513e7b2b77e81b2cd48?s=128&d=identicon&r=PG&f=1", "display_name": "shawnbro", "link": "https://stackoverflow.com/users/3462514/shawnbro"}, "is_accepted": true, "score": 0, "last_activity_date": 1478037940, "last_edit_date": 1478037940, "creation_date": 1478032711, "answer_id": 40368253, "question_id": 40368170, "link": "https://stackoverflow.com/questions/40368170/translation-of-a-c-for-loop-to-ruby/40368253#40368253", "title": "Translation of a C for loop to Ruby", "body": "<p>Here's a translation into Ruby of your code.</p>\n\n<pre><code>n = 3\ni = 1\nwhile i &lt;= n\n  puts \"i = #{i}\"\n  i = 3\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 7038644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfb18dcf3c7e257f7b0025dd0feec24?s=128&d=identicon&r=PG&f=1", "display_name": "A.L", "link": "https://stackoverflow.com/users/7038644/a-l"}, "edited": false, "score": 0, "creation_date": 1478033238, "post_id": 40368257, "comment_id": 67990147, "body": "Thanks I&#39;ll try it out"}], "tags": [], "owner": {"reputation": 1189, "user_id": 4667831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PMFlL.jpg?s=128&g=1", "display_name": "Zaid Qureshi", "link": "https://stackoverflow.com/users/4667831/zaid-qureshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1478032733, "creation_date": 1478032733, "answer_id": 40368257, "question_id": 40368170, "link": "https://stackoverflow.com/questions/40368170/translation-of-a-c-for-loop-to-ruby/40368257#40368257", "title": "Translation of a C for loop to Ruby", "body": "<p>For loops don't work the same in Ruby, for loops in ruby take in a range. You are better of with a while loop</p>\n\n<pre><code>i=0\nn=3\nwhile i&lt;=n do\n puts \"Value of local variable is #{i}\"\n i=3\nend\n</code></pre>\n\n<p><a href=\"https://www.tutorialspoint.com/ruby/ruby_loops.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/ruby/ruby_loops.htm</a> has more details</p>\n"}, {"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 0, "last_activity_date": 1478035518, "creation_date": 1478035518, "answer_id": 40368888, "question_id": 40368170, "link": "https://stackoverflow.com/questions/40368170/translation-of-a-c-for-loop-to-ruby/40368888#40368888", "title": "Translation of a C for loop to Ruby", "body": "<p>You can also try the never used <code>upto</code></p>\n\n<pre><code>i = 0\nn = 3\ni.upto(n) do |ans|\n  puts \"Value of i is #{ans}\"\nend\n</code></pre>\n\n<p>or </p>\n\n<pre><code>n = 3\n1.upto(n) do |i|\n  puts \"Value of i is #{i}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7038644, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfb18dcf3c7e257f7b0025dd0feec24?s=128&d=identicon&r=PG&f=1", "display_name": "A.L", "link": "https://stackoverflow.com/users/7038644/a-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 40368253, "answer_count": 3, "score": 0, "last_activity_date": 1478056546, "creation_date": 1478032346, "last_edit_date": 1478032436, "question_id": 40368170, "link": "https://stackoverflow.com/questions/40368170/translation-of-a-c-for-loop-to-ruby", "title": "Translation of a C for loop to Ruby", "body": "<p>I have this code:</p>\n\n<pre><code>int i, n=3;\nfor (i = 1; i &lt;= n; i++){\n  printf(\"i = %d\\n\", i);\n  i = 3\n}\n</code></pre>\n\n<p>I know that it will go through the code 2 times. How do you translate this code to Ruby or how would this look like in Ruby? I have done some researcchh on it and since I am extremely new to Ruby I have no clue. The inside print part doesn't really matter I am more worried about how to set it up.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1478032730, "post_id": 40368034, "comment_id": 67989914, "body": "as the answer indicates below. You should be able to just require it to use it.  To do this application wide add it to the <code>config&#47;application.rb</code> inside the <code>class Application &lt; Rails::Application</code> or if you just want it one time you can require it wherever you&#39;re using it (i.e. in the console just enter <code>require &#39;csv&#39;</code> then run your code."}], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": true, "score": 2, "last_activity_date": 1478031912, "creation_date": 1478031912, "answer_id": 40368066, "question_id": 40368034, "link": "https://stackoverflow.com/questions/40368034/where-is-the-csv-gem-in-rails/40368066#40368066", "title": "Where is the CSV gem in Rails?", "body": "<p>You need to <code>require 'csv'</code> to use it!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 40368066, "answer_count": 1, "score": 2, "last_activity_date": 1478031912, "creation_date": 1478031793, "question_id": 40368034, "link": "https://stackoverflow.com/questions/40368034/where-is-the-csv-gem-in-rails", "title": "Where is the CSV gem in Rails?", "body": "<p>I\u2019m using Rails 4.2 with Ruby 2.3.0.  I want to use the CSV parsing library, which according to the documentation is part of the core Ruby distribution \u2014 <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html</a> .  However, when I put this on my page</p>\n\n<pre><code>csv = CSV.parse(text_content, :headers =&gt; true)\n</code></pre>\n\n<p>it results in this error</p>\n\n<pre><code>Error during processing: uninitialized constant CsvToActivityConverterService::CSV\n</code></pre>\n\n<p>Do I need another gem to include the CSV library in my Rails project?</p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1478036349, "post_id": 40367946, "comment_id": 67991636, "body": "I would prefer <code>IO.foreach(&quot;file1.txt&quot;) {  |line| puts &quot;** &quot; + line.chomp.reverse + &quot; **&quot; }</code>. See <a href=\"http://ruby-doc.org/core-2.3.0/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a>. (This is often written <code>File.foreach(...</code>, which works because <code>File</code> is a subclass of <code>IO</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1478032331, "post_id": 40367994, "comment_id": 67989684, "body": "Ok and truthy and falsy refers to is the data type set by Ruby to true or false?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1478032497, "post_id": 40367994, "comment_id": 67989772, "body": "@the12 Predicates typically return one of the Boolean values <code>true</code> or <code>false</code>, but this is not required, as any value other than <code>false</code> or <code>nil</code> works like <code>true</code> when a Boolean value is required. Meaning <code>while 2</code> would work, as well as <code>while true</code> or <code>while &#39;hello world&#39;</code>"}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1478032778, "post_id": 40367994, "comment_id": 67989938, "body": "Ok and just to double check, you are assigning the value of file.gets to the variable line AND putting it in the while statement?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 1, "creation_date": 1478032846, "post_id": 40367994, "comment_id": 67989970, "body": "@the12 yes, assigning operator here takes precedence, so <code>while foo = 2</code> actually evaluates to <code>while 2</code> which basically means <code>while true</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 1, "creation_date": 1478290400, "post_id": 40367994, "comment_id": 68110437, "body": "@the12: assignment operator returns value that was assigned. That&#39;s why it is possible to simultaneously assign some variable <b>and</b> test it in a conditional."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478291517, "post_id": 40367994, "comment_id": 68110979, "body": "Thank you again @SergioTulentsev :)"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1478031633, "creation_date": 1478031633, "answer_id": 40367994, "question_id": 40367946, "link": "https://stackoverflow.com/questions/40367946/ruby-boolean-assignment-operator-in-a-loop/40367994#40367994", "title": "Ruby Boolean assignment operator in a loop", "body": "<p>In Ruby everything evaluates to truthy or falsey.</p>\n\n<p>There are two falsey things:</p>\n\n<ul>\n<li><code>nil</code></li>\n<li><code>false</code></li>\n</ul>\n\n<p>Everything else is truthy.</p>\n\n<p>The <code>while</code> loop checks for truthiness of <code>line</code> variable.</p>\n\n<p>Until it is anything but either <code>nil</code> or <code>false</code> it loops.</p>\n\n<p>In your example the loop will stop when <code>file.gets</code> returns <code>nil</code>, meaning, there's no next line.</p>\n"}, {"tags": [], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1478031685, "creation_date": 1478031685, "answer_id": 40368009, "question_id": 40367946, "link": "https://stackoverflow.com/questions/40367946/ruby-boolean-assignment-operator-in-a-loop/40368009#40368009", "title": "Ruby Boolean assignment operator in a loop", "body": "<p>What happens is that <code>while</code> is using the variable <code>line</code> as its condition. <code>line = file.gets</code> is assigned before <code>while</code> checks the condition. Additionally, <code>while</code> knows how to break out of the loop because at EOF <code>file.gets</code> returns <code>nil</code> which is <code>false</code>-y. </p>\n"}], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 40367994, "answer_count": 2, "score": 1, "last_activity_date": 1478031685, "creation_date": 1478031402, "question_id": 40367946, "link": "https://stackoverflow.com/questions/40367946/ruby-boolean-assignment-operator-in-a-loop", "title": "Ruby Boolean assignment operator in a loop", "body": "<p>Given the following code:</p>\n\n<pre><code>File.open('file1.txt', 'r') do |file|\n  while line = file.gets\n    puts \"** \" + line.chomp.reverse + \" **\"\n  end\nend\n</code></pre>\n\n<p>I am confused to what is the question being asked? This is a simple piece of code I got off my tutorial, that reads a file's lines and puts it out. I do understand most of it, I believe you are assigning a variable <code>line</code> to the return value of <code>file.gets</code>, and it retrieves the value of those lines, and puts it out. </p>\n\n<p>Where I am having trouble is the initial loop statement: <code>while line = file gets</code></p>\n\n<p>My question is that what kind of question are you asking and how does it break out of the loop? </p>\n\n<p>i.e.:<code>x=3 x ==3</code>--> You are asking is X equal to 3, if true will return <code>true</code>, if false will return <code>false</code>. </p>\n\n<p>Also, are you simultaneously assigning the return value of <code>file.gets</code> to the variable <code>line</code>, in addition to putting it in the while statement? </p>\n"}, {"tags": ["ruby", "git", "github"], "answers": [{"tags": [], "owner": {"reputation": 13234, "user_id": 409792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9f1a530bb9d8cf91a889b4af5f80e9?s=128&d=identicon&r=PG", "display_name": "zwippie", "link": "https://stackoverflow.com/users/409792/zwippie"}, "is_accepted": false, "score": 0, "last_activity_date": 1478171118, "creation_date": 1478171118, "answer_id": 40399911, "question_id": 40367594, "link": "https://stackoverflow.com/questions/40367594/store-tag-value-from-git-repo-into-file/40399911#40399911", "title": "store tag value from git repo into file", "body": "<p>Changing a file in a tagged commit does not make the changed file part of the previously tagged commit. So if you change <code>version.rb</code> you still have to create another tagged version of your repo.</p>\n\n<p>Looks like you just have to remember to bump the version in <code>version.rb</code>.</p>\n"}], "owner": {"reputation": 265, "user_id": 6897476, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7d1f4b7fe23115a3cf52a7cc6a792f94?s=128&d=identicon&r=PG&f=1", "display_name": "danynl", "link": "https://stackoverflow.com/users/6897476/danynl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478171118, "creation_date": 1478029889, "last_edit_date": 1478166661, "question_id": 40367594, "link": "https://stackoverflow.com/questions/40367594/store-tag-value-from-git-repo-into-file", "title": "store tag value from git repo into file", "body": "<p>I am new to git and I have a repo stored on git. I want to implement version control the <code>tag</code> value that is available on git. </p>\n\n<p>I have a file called<code>version.rb</code> which specifies the version of the plugin that I am currently using, which look like this :</p>\n\n<p><code>Version = \"0.1.0\"</code></p>\n\n<p>and the tag associated with this commit would be <code>\"0.1.0\"</code>.</p>\n\n<p>Issue :</p>\n\n<pre><code>  Sometimes when I create a new tag for the repo, I would forget to update the value of `Version` in version.rb.\n</code></pre>\n\n<p>I want to update the <code>Version</code> value in <code>version.rb</code> to be the same value as a the tag value on the repo. Is there a way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 1, "creation_date": 1478028679, "post_id": 40367118, "comment_id": 67987835, "body": "Have you looked into using a db-safe templating engine like <a href=\"https://github.com/Shopify/liquid\" rel=\"nofollow noreferrer\">Liquid</a>?"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478029137, "post_id": 40367118, "comment_id": 67988029, "body": "yes but it seemed it was for a situation where you need to secure what internet visitors do/create templates, not when I create them."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478029157, "post_id": 40367118, "comment_id": 67988037, "body": "Also I did not understand on Liquid if it&#39;s storing the html templates in database or not"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478029361, "post_id": 40367118, "comment_id": 67988148, "body": "Liquid just parses text, which you can store in the database. Instead of &lt;?= my_string ?&gt; you would use {{ my_string }}. The difference is that Liquid template is parsed, while ERB (Ruby) code could be executed. I would never consider storing server-side executable code in the database."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478030187, "post_id": 40367118, "comment_id": 67988580, "body": "I see. might be right for me then. But it seesm they don&#39;t have a ruby parser now=&gt; on <a href=\"https://github.com/Shopify/liquid\" rel=\"nofollow noreferrer\">github.com/Shopify/liquid</a> they don&#39;t even explain how to &quot;set up/install&quot; for Rails"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478030515, "post_id": 40367118, "comment_id": 67988749, "body": "here say it does not work for Rails anymore: <a href=\"https://github.com/Shopify/liquid/wiki/getting-liquid-to-work-in-rails\" rel=\"nofollow noreferrer\">github.com/Shopify/liquid/wiki/getting-liquid-to-work-in-rai&zwnj;&#8203;ls</a>"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478032960, "post_id": 40367118, "comment_id": 67990025, "body": "thanks for your suggestion, i&#39;ll try it"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1478033386, "post_id": 40367118, "comment_id": 67990213, "body": "It works with Rails - that page was just saying that they removed support for <code>.liquid</code> files (instead of <code>.erb</code>). You can store the liquid templates in your database and then parse them onto your page. See <a href=\"https://github.com/Shopify/liquid#how-to-use-liquid\" rel=\"nofollow noreferrer\">github.com/Shopify/liquid#how-to-use-liquid</a>"}], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1478031223, "post_id": 40367401, "comment_id": 67989124, "body": "Just remember that this method <i>might</i> solve your problem but it essentially hardcodes your partial name and the variable names within in partial. You would need to update your database each time you change the names of the variables and such."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1478032944, "post_id": 40367401, "comment_id": 67990019, "body": "I know, I think I&#39;ll try Liquid suggested by @mysmallidea but yours is a good idea too"}], "tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": true, "score": 1, "last_activity_date": 1478029014, "creation_date": 1478029014, "answer_id": 40367401, "question_id": 40367118, "link": "https://stackoverflow.com/questions/40367118/rails-store-html-templates-in-filesystem-or-database/40367401#40367401", "title": "Rails - Store html templates in filesystem or database", "body": "<p>How about you have a modal object that <code>has_one :template</code>? The template in this case is a linked list of the partials that you want with it's arguments.</p>\n\n<p>Example:</p>\n\n<pre><code> Modal.first.template\n # =&gt; {1: [\n #         [partial1, {user: 12, pet: 'dog'}], \n #         [partial3, {title: \"Hello world}]\n #        ], \n #     2: [\n #         [partial7, {text: 'This is the intro sentence}]\n #        ], \n #     ...\n #     }\n</code></pre>\n\n<p>So now, as long as your options and the variables match up and the partial's name doesnt change, youre good to go. The maintenance does seem high but I dont see how your local/production servers would be out of sync this way.</p>\n\n<p>The database then would not need to hold any HTML as long as it knew the name of the partials or perhaps the route to the partial.</p>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 40367401, "answer_count": 1, "score": 2, "last_activity_date": 1478029014, "creation_date": 1478027812, "question_id": 40367118, "link": "https://stackoverflow.com/questions/40367118/rails-store-html-templates-in-filesystem-or-database", "title": "Rails - Store html templates in filesystem or database", "body": "<p>I'm building what can be described as a CMS (at least on some parts it operates as a CMS).</p>\n\n<p>I read that \"of course you should never put html code in the database\" but reading <a href=\"https://www.reddit.com/r/rails/comments/4mlih5/help_each_activerecord_object_has_its_own_html/\" rel=\"nofollow noreferrer\">this</a> and seeing some actually do it (this <a href=\"https://github.com/andreapavoni/panoramic\" rel=\"nofollow noreferrer\">gem</a>,  or <a href=\"https://github.com/adamcooke/florrick\" rel=\"nofollow noreferrer\">here</a>), I am doubting the best way to solve my problem. </p>\n\n<p>Below is explained my current issues with my current solution. Maybe the best way is to put it in database, maybe it's to keep in filesystem but in anotherway than what I do.</p>\n\n<p>The administrators of the back office (on <a href=\"http://activeadmin.info/\" rel=\"nofollow noreferrer\">Active Admin</a>) I build (ie: developers but also \"marketers\" => not the general public/internet visitors) can go to Active Admin and create \"Modals\".</p>\n\n<p>For example I can create in Active Admin's 'create new Modal' a modal like this: name =>\"Mix of 2 texts, 1 image, 1 video\" and components => { text1, text2, image1, video 1 } </p>\n\n<p>This will create in my table 'Modals' a new modal</p>\n\n<pre><code>id= 37 (it's an example), name: \"Mix of 2 texts, 1 image, 1 video\", components = components =&gt; { text1, text2, image1, video 1 }\n</code></pre>\n\n<p>Then in active Admin, the administrator can go and create a new 'Page' (there's a Page model too in my database):\nHe can set for example\ntitle: \"example of title\"\nmodals: there he will choose in a select drop down one of the modals. Let's say now he chooses the modal 37. \nActive Admin will then ask him, ok then please choose the following components for this modal which are (important: the app asks him this because I stored in the database Modal table that the components for modal = 37 are text1, text2, image1 and image2):</p>\n\n<ul>\n<li>text 1 - he can write for example 'this is the intro sentence'</li>\n<li>text 2 - he can write here 'some text'</li>\n<li>image 1 - he writes <a href=\"http://example.com/image1.png\" rel=\"nofollow noreferrer\">http://example.com/image1.png</a></li>\n<li>image 2 - he writes <a href=\"http://example.com/image2.png\" rel=\"nofollow noreferrer\">http://example.com/image2.png</a></li>\n</ul>\n\n<p>This will create in Active Admin a Page id=8 (example) and in the database Page has an attribute column 'Modal' that will look like this</p>\n\n<pre><code>Page.modal(:id =&gt;8) =\n [{\"modal_id\":\"37\",\n   \"text1\":\"this is the intro sentence\",\"text2\":\"some text\",\n   \"image1\": \"http://example.com/image1.png\",\n   \"image2\":\"http://example.com/image2.png\"},\n { here we could have another modal for the same Page}\n ]\n</code></pre>\n\n<p>So when the internet users will load the Page id = 8, and user clicks on a  specific butto, it will load modal 8.</p>\n\n<p><strong>The code on page.html.erb</strong></p>\n\n<pre><code>&lt;% @page.modal.each_with_index do |modal, index| %&gt;\n  &lt;% index_plus_one = index + 1 %&gt; \n\n&lt;div&gt;\n      &lt;span onclick=\"loadModalContent&lt;%= modal['modal_id'] %&gt;()\"&gt; \n        &lt;i class=\"fa fa-camera\" aria-hidden=\"true\"&gt;&lt;/i&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n    &lt;script&gt;\n      function loadModalContent&lt;%= modal['modal_id'] %&gt;() {\n        var msg;\n        msg = Messenger().post({\n          message:  '&lt;%= j render partial: \"pages/modal#{ modal['modal_id'] }\",\n                    locals: { modal: modal, index: index_plus_one } %&gt;'\n        });\n      }  \n    &lt;/script&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>As you see, now the user clicked on the button, and the app will look into the column 'modal' and will check the first in the array which is an id= 37. so as a developer, when a new template is created in the back office (active admin), <strong>we must create a new partial _modal37.html.erb in the filesystem with the correct id</strong>:</p>\n\n<p><strong>_modal37.html.erb</strong></p>\n\n<pre><code>&lt;div&gt;this is the first text &lt;%= modal['text1'] %&gt;&lt;/div&gt;\n&lt;div&gt;this is the first image : &lt;%= modal['image1'] %&gt;&lt;/div&gt;\n&lt;div&gt;this is the second text &lt;%= modal['image1'] %&gt;&lt;/div&gt;\n&lt;div&gt;this is the second image &lt;%= modal['image 2'] %&gt;&lt;/div&gt; \n</code></pre>\n\n<p>Coming back to my internet user who loaded Page 8 and then clicked the button, the app will load the modal's content by loading partial _modal37.html.erb.</p>\n\n<p>So all is working well today :) and even though there are some risks (not the scope of the question but if administrators of the Back office ( Active Admin )change the structure of the modal, then we have in the file system also to change it, for example they add a 'image3'...), but my main problem is the following:</p>\n\n<p><strong>It's how to coordinate and keep this system while not breaking the LOCAL environment / PRODUCTION environment development.</strong></p>\n\n<p>Indeed, maybe you did not notice but there is a <strong>big issue</strong>. I know because I faced it:)</p>\n\n<p>When I did all the above, I was in LOCAL development. This means that I created in my filesystem a partial _modal37.html.erb. But the problem is that in production, who knows, maybe the 37th created modal will not have the same structure, maybe it will be (text1, video1) and no image and so in production the partial _modal37.html.erb must be different than the one I used in local mode.</p>\n\n<p>So if I keep things like now, I need to be VERY rigorous , almost god-strict level, and I think <strong>this shows me this solution is not right</strong>: I 'd need every time </p>\n\n<ul>\n<li>if i create in the local 'active admin'  a new modal (let's say the newly created has id=37)</li>\n<li>create in my filesystem the  partial _37.html.erb</li>\n<li>go into the active admin in Production and create the SAME modal (for Modal model) which will be also hopefully 37 if from the beginning of time i have replicated each time what I do in local, also in Production...</li>\n</ul>\n\n<p>If i follow this EVERY single time, local and production will always be sync' and have the same id/components but it's hell:)</p>\n\n<p>Same when I do Deletes or Edit make any change in local Active Admin the structure of a Modal, I must do it in Production too...That's never ending and not realistic to comply with:)</p>\n\n<p>So what should I do ?</p>\n\n<ul>\n<li><p>put the html template in database, instead of having it inside my partials ? How to, in that case, to tell Rails to execute the code inside the database: 'this is the first text &lt;%= modal['text1'] %>'. how would the database \"understand\"/be \"conscious\" that each modal in &lt;%= modal['text1'] %> is inside the ruby loop you can see in 'page.html.erb' above ? Hard...</p></li>\n<li><p>keep the set up like today and put the html modal content in the partials: how to solve my very \"logistic\" local/production coordination problem ?</p></li>\n</ul>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database", "rubymine"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1478027595, "post_id": 40366897, "comment_id": 67987301, "body": "If you have <code>seeds.rb</code> you can run <code>rake db:seed</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5552, "user_id": 3160466, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4aINw.png?s=128&g=1", "display_name": "ArtOfCode", "link": "https://stackoverflow.com/users/3160466/artofcode"}, "is_accepted": true, "score": 1, "last_activity_date": 1478027786, "creation_date": 1478027786, "answer_id": 40367109, "question_id": 40366897, "link": "https://stackoverflow.com/questions/40366897/existing-rb-files-to-create-local-mysql-database/40367109#40367109", "title": "Existing .rb files to create local MySQL database", "body": "<p>You can create the database for a Rails project in one command:</p>\n\n<pre><code>$ rails db:create\n</code></pre>\n\n<p><em>(for Rails 5 only; if you're using Rails &lt;= 4, <code>s/rails/rake/</code>)</em></p>\n\n<p>You'll also need to load the schema in, which is one more command:</p>\n\n<pre><code>$ rails db:schema:load\n</code></pre>\n\n<p>If you have seeding data in <code>seeds.rb</code>, you can load that with one further command:</p>\n\n<pre><code>$ rails db:seed\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7033997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb32e6ce4c69a689093516a5dec2e0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Han nah", "link": "https://stackoverflow.com/users/7033997/han-nah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 40367109, "answer_count": 1, "score": 0, "last_activity_date": 1478040753, "creation_date": 1478026999, "last_edit_date": 1478040753, "question_id": 40366897, "link": "https://stackoverflow.com/questions/40366897/existing-rb-files-to-create-local-mysql-database", "title": "Existing .rb files to create local MySQL database", "body": "<p>I downloaded source code from BitBucket and I am trying to set up a local MySQL database with an existing .rb files in RubyMine. Is there a direct way to do so or do I need to set up all the tables manually?</p>\n"}, {"tags": ["ruby", "jruby"], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "edited": false, "score": 0, "creation_date": 1478192049, "post_id": 40369547, "comment_id": 68064454, "body": "Thank you for the reply. Unfortunately that dint work either. In the call to my JRuby jar file, the following workaround did the magic. <code>java -Djruby.native.verbose=true -Djava.library.path=&#47;lib64 -jar ssh_test.jar </code>. Problem was that it was not able to load the native C-library for <code>lib.so</code>. So passing its path to the command worked."}], "tags": [], "owner": {"reputation": 83, "user_id": 3906168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df2975d95af1473b93412182fe2093e0?s=128&d=identicon&r=PG&f=1", "display_name": "kane morgan", "link": "https://stackoverflow.com/users/3906168/kane-morgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1478038940, "creation_date": 1478038940, "answer_id": 40369547, "question_id": 40366582, "link": "https://stackoverflow.com/questions/40366582/how-to-suppress-net-ssh-warnings-in-jruby/40369547#40369547", "title": "How to suppress net-ssh warnings in JRuby?", "body": "<p>From the source code it looks like you might need to set verbose to :silent rather than nil</p>\n"}, {"tags": [], "owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1478192105, "creation_date": 1478192105, "answer_id": 40407190, "question_id": 40366582, "link": "https://stackoverflow.com/questions/40366582/how-to-suppress-net-ssh-warnings-in-jruby/40407190#40407190", "title": "How to suppress net-ssh warnings in JRuby?", "body": "<p>System is not able to load the native C libraries. This can be fixed by using the following:</p>\n\n<pre><code>java -Djruby.native.verbose=true -Djava.library.path=/lib64 -jar ssh_test.jar\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1478192105, "creation_date": 1478025882, "question_id": 40366582, "link": "https://stackoverflow.com/questions/40366582/how-to-suppress-net-ssh-warnings-in-jruby", "title": "How to suppress net-ssh warnings in JRuby?", "body": "<p>I am seeing <code>ELF</code> warning with <code>net-ssh</code> and I am trying to suppress that warning from printing it on console.</p>\n\n<p>I tried mentioning <code>$VERBOSE = nil</code> before I create my <code>ssh</code> object but that did not help. I still see the warning messages on the console.</p>\n\n<p>Later I tried to use <code>Kernel.suppress_warnings</code> but that seems to be Rails specific.</p>\n\n<p>At last I tried to redirect the warning message to <code>STDERR</code> but that did  not work either.</p>\n\n<p>Any help in making this work is really appreciated. Thanks!</p>\n\n<p>Below is the line that is generating warning message.</p>\n\n<p><code>$SSH, @ssh = Net::SSH.start(@hostname, @username, :password =&gt; @password) if !host.nil?</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "for-loop"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1478092407, "post_id": 40366337, "comment_id": 68013451, "body": "Why do you have 30 room columns in a table? This <i>reeks</i> of suboptimal design."}, {"owner": {"reputation": 378, "user_id": 4267804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e1036d3e728f3bb865307cf6eaf92b8?s=128&d=identicon&r=PG", "display_name": "Priince Abalogu", "link": "https://stackoverflow.com/users/4267804/priince-abalogu"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478096256, "post_id": 40366337, "comment_id": 68016206, "body": "I wont mind an alternative... was due to deadline but definitely know thats not the right way to do a booking system... what i had before was just to book 1 room but needed to add booking multiple rooms up to 30"}], "answers": [{"comments": [{"owner": {"reputation": 7922, "user_id": 2747593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cdcEd.jpg?s=128&g=1", "display_name": "Scott Weldon", "link": "https://stackoverflow.com/users/2747593/scott-weldon"}, "edited": false, "score": 0, "creation_date": 1478110566, "post_id": 40366491, "comment_id": 68025755, "body": "While this code snippet may solve the problem, it doesn&#39;t explain why or how it answers the question. Please <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">include an explanation for your code</a>, as that really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion. <b>Flaggers / reviewers:</b> <a href=\"//meta.stackoverflow.com/a/260413/2747593\">For code-only answers such as this one, downvote, don&#39;t delete!</a>"}], "tags": [], "owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "is_accepted": false, "score": 0, "last_activity_date": 1478134648, "last_edit_date": 1478134648, "creation_date": 1478025543, "answer_id": 40366491, "question_id": 40366337, "link": "https://stackoverflow.com/questions/40366337/better-way-to-write-if-statement-with-a-lot-of-repeats-in-rails-ruby/40366491#40366491", "title": "better way to write If statement with a lot of repeats in rails ruby", "body": "<p>You can use a range of numbers to loop through and call <code>\"column_#{i}\"</code> on each one. The <code>all?</code> method will return true if every iteration of the loop is true. Try something like this:</p>\n\n<pre><code>if (1..30).all?{|index| self.send(\"column#{index}\")&amp;.present? }\n  #...\nelsif (1..29).all?{|index| self.send(\"column#{index}\")&amp;.present? }\n  #...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5138, "user_id": 452931, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f82ea6b1913994a90d50ecb256dd9c93?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/452931/gerry"}, "is_accepted": false, "score": 1, "last_activity_date": 1478026272, "last_edit_date": 1478026272, "creation_date": 1478025961, "answer_id": 40366603, "question_id": 40366337, "link": "https://stackoverflow.com/questions/40366337/better-way-to-write-if-statement-with-a-lot-of-repeats-in-rails-ruby/40366603#40366603", "title": "better way to write If statement with a lot of repeats in rails ruby", "body": "<p>Well you can do something like this:</p>\n\n<pre><code>if (up_to_29 = (1..29).all?{|i| send(\"column#{i}\").present? }) &amp;&amp; column30.present?\n  # update_columns column1: ...\nelsif up_to_29\n  # update_columns column1: ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14, "user_id": 3295520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ss2cd.jpg?s=128&g=1", "display_name": "nnluukhtn", "link": "https://stackoverflow.com/users/3295520/nnluukhtn"}, "is_accepted": true, "score": 0, "last_activity_date": 1478090153, "last_edit_date": 1478090153, "creation_date": 1478088802, "answer_id": 40379685, "question_id": 40366337, "link": "https://stackoverflow.com/questions/40366337/better-way-to-write-if-statement-with-a-lot-of-repeats-in-rails-ruby/40379685#40379685", "title": "better way to write If statement with a lot of repeats in rails ruby", "body": "<h1>Options 1: Assume that all model attributes need to validate</h1>\n\n<pre><code>validate_needed_columns = Model.attribute_names\nwhile validate_needed_columns.present? do\n  if validate_needed_columns.all?{ |c| Model[c].present? }\n    Model.update_columns(&lt;Hash here&gt;)\n    break\n  end\n\n  validate_needed_columns.pop\nend\n</code></pre>\n\n<h1>Options 2: Use mapping to set which columns need to update</h1>\n\n<pre><code>validate_needed_columns = {\n  column_name_1: value_to_update_1,\n  ...\n  column_name_n: value_to_update_n\n}\nvalidate_needed_column_keys = validate_needed_columns.keys\nwhile validate_needed_column_keys.present? do\n  if validate_needed_column_keys.all?{ |c| Model[c].present? }\n    Model.update_columns(&lt;Use mapping to set value here&gt;)\n    break\n  end\n\n  validate_needed_column_keys.pop\nend\n</code></pre>\n"}], "owner": {"reputation": 378, "user_id": 4267804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e1036d3e728f3bb865307cf6eaf92b8?s=128&d=identicon&r=PG", "display_name": "Priince Abalogu", "link": "https://stackoverflow.com/users/4267804/priince-abalogu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 40379685, "answer_count": 3, "score": 0, "last_activity_date": 1478161223, "creation_date": 1478024931, "last_edit_date": 1478161223, "question_id": 40366337, "link": "https://stackoverflow.com/questions/40366337/better-way-to-write-if-statement-with-a-lot-of-repeats-in-rails-ruby", "title": "better way to write If statement with a lot of repeats in rails ruby", "body": "<p>I have a table with 30 different columns and I am trying to write a method that calls on each column containing a value. </p>\n\n<p>eg. </p>\n\n<pre><code>def add_details \ncustomer = Customer.find self.customer_id \nif self.room1.present? &amp;&amp; self.room2.present? &amp;&amp; self.room3.present? &amp;&amp; self.room4.present? &amp;&amp; self.room5.present?  &amp;&amp; self.room6.present? &amp;&amp; self.room7.present?  &amp;&amp; self.room8.present? &amp;&amp; self.room9.present? &amp;&amp; self.room10.present? &amp;&amp; self.room11.present? &amp;&amp; self.room12.present? &amp;&amp; self.room13.present? &amp;&amp; self.room14.present? &amp;&amp; self.room15.present?  &amp;&amp; self.room16.present? &amp;&amp; self.room17.present?  &amp;&amp; self.room18.present? &amp;&amp; self.room19.present? &amp;&amp; self.room20.present? &amp;&amp; self.room21.present? &amp;&amp; self.room22.present? &amp;&amp; self.room23.present? &amp;&amp; self.room24.present? &amp;&amp; self.room25.present?  &amp;&amp; self.room26.present? &amp;&amp; self.room27.present?  &amp;&amp; self.room28.present? &amp;&amp; self.room29.present? &amp;&amp; self.room30.present? \n\nelsif self.room.present? &amp;&amp; self.room2.present? &amp;&amp; self.room3.present? &amp;&amp; self.room4.present? &amp;&amp; self.room5.present?  &amp;&amp; self.room6.present? &amp;&amp; self.room7.present?  &amp;&amp; self.room8.present? &amp;&amp; self.room9.present? &amp;&amp; self.room10.present? &amp;&amp; self.room11.present? &amp;&amp; self.room12.present? &amp;&amp; self.room13.present? &amp;&amp; self.room14.present? &amp;&amp; self.room15.present?  &amp;&amp; self.room16.present? &amp;&amp; self.room17.present?  &amp;&amp; self.room18.present? &amp;&amp; self.room19.present? &amp;&amp; self.room20.present? &amp;&amp; self.room21.present? &amp;&amp; self.room22.present? &amp;&amp; self.room23.present? &amp;&amp; self.room24.present? &amp;&amp; self.room25.present?  &amp;&amp; self.room26.present? &amp;&amp; self.room27.present?  &amp;&amp; self.room28.present? &amp;&amp; self.room29.present? \n  room = Room.find self.room\n  .....\n  room29 = ... end end \n</code></pre>\n\n<p>This is a whole lot of repeating myself and I know ruby is dynamic so there should be a way to increment the numbers with like a for loop and it would still work. I dont know if anyone has a better way to write this</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "edited": false, "score": 0, "creation_date": 1478026057, "post_id": 40366270, "comment_id": 67986521, "body": "I was thinking that because attr_accessor adds the a= and b= methods to the class that their action on &#39;self&#39; would be implicit - but I guess it&#39;s a Ruby parsing thing. = as an assignment operator takes precedence over = in a method name. thanks!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478029182, "post_id": 40366270, "comment_id": 67988052, "body": "If one questions what Andrey is saying, add the line <code>p &quot;local variables = #{local_variables}&quot;</code> at the end of (the original) <code>initialize</code>. When <code>foo = MyClass.new</code> is invoked, <code>&quot;local variables = [:a, :b]&quot;</code> is displayed."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1478025013, "last_edit_date": 1478025013, "creation_date": 1478024688, "answer_id": 40366270, "question_id": 40366254, "link": "https://stackoverflow.com/questions/40366254/attr-accessor-not-updating-value/40366270#40366270", "title": "attr_accessor not updating value", "body": "<p>You are just defining local variables <code>a</code> and <code>b</code>.</p>\n\n<p>What you want instead, is to set new values for instance variables <code>a</code> and <code>b</code>. Here is how you can do that:</p>\n\n<pre><code>def update_values options\n  self.a = options[:a] # or @a = options[:a]\n  self.b = options[:b] # or @b = options[:b]\nend\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>foo = MyClass.new\n#=&gt; #&lt;MyClass:0x007f83eac30300 @a=1, @b=2&gt;\nfoo.update_values(a: 2, b: 3)\nfoo #=&gt;#&lt;MyClass:0x007f83eac30300 @a=2, @b=3&gt;\n</code></pre>\n"}], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 40366270, "answer_count": 1, "score": 3, "last_activity_date": 1478084610, "creation_date": 1478024647, "last_edit_date": 1478084610, "question_id": 40366254, "link": "https://stackoverflow.com/questions/40366254/attr-accessor-not-updating-value", "title": "attr_accessor not updating value", "body": "<p>I have a class with attribute accessors:</p>\n\n<pre><code>class MyClass\n  attr_accessor :a, :b\n\n  def initialize\n    @a = 1\n    @b = 2\n  end\n\n  def update_values options\n    a = options[:a]\n    b = options[:b]\n  end\nend\n</code></pre>\n\n<p>I think that after calling <code>update_values</code>, <code>a</code> and <code>b</code> should retain their new values:</p>\n\n<pre><code>describe MyClass do\n  before do\n    @thing = MyClass.new\n  end\n\n  it 'should set a and b' do\n    expect(@thing.a).to eq 1\n    expect(@thing.b).to eq 2\n    @thing.update_values a: 2, b: 5\n    expect(@thing.a).to eq 2\n    expect(@thing.b).to eq 5\n  end\nend\n</code></pre>\n\n<p>This is not happening - the test fails:</p>\n\n<pre><code>Failures:\n\n  1) MyClass should set a and b\n     Failure/Error: expect(@thing.a).to eq 2\n\n       expected: 2\n            got: 1\n\n       (compared using ==)\n</code></pre>\n\n<p>Isn't this how attribute accessors should work? What am I missing?</p>\n"}, {"tags": ["ruby", "oop", "instance-variables", "puts"], "answers": [{"comments": [{"owner": {"reputation": 1574, "user_id": 169320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d765156db8436b8749ec6cefef3d5f35?s=128&d=identicon&r=PG", "display_name": "user169320", "link": "https://stackoverflow.com/users/169320/user169320"}, "edited": false, "score": 0, "creation_date": 1478025144, "post_id": 40366242, "comment_id": 67986071, "body": "Murad, that works well. A question: is the &#39;to_s&#39; in &#39;m.to_s&#39; unnecessary?"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 1574, "user_id": 169320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d765156db8436b8749ec6cefef3d5f35?s=128&d=identicon&r=PG", "display_name": "user169320", "link": "https://stackoverflow.com/users/169320/user169320"}, "edited": false, "score": 0, "creation_date": 1478025214, "post_id": 40366242, "comment_id": 67986102, "body": "@user169320 You can do <code>@members.map(&amp;:to_s).join(&#39;. &#39;)</code> if you want."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478030766, "post_id": 40366242, "comment_id": 67988882, "body": "user169320, Murad is suggesting the you change the second line of <code>Team#to_s</code> to <code>&quot;Those members are: #{@members.map{ |m| m.to_s}.join(&#39;. &#39;)}.&quot;</code> (as well as adding <code>Person#to_s</code>)"}], "tags": [], "owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "is_accepted": true, "score": 2, "last_activity_date": 1478024575, "creation_date": 1478024575, "answer_id": 40366242, "question_id": 40366085, "link": "https://stackoverflow.com/questions/40366085/how-can-i-create-a-to-s-with-an-instance-variable-pointing-to-an-array-of-object/40366242#40366242", "title": "How can I create a to_s with an instance variable pointing to an array of objects from another class?", "body": "<p>Define <code>to_s</code> (<code>\"#{@name}, who is #{@age} years old\"</code>) for the <code>Person</code> class. Then you can do <code>@members.map{ |m| m.to_s}.join('. ')</code></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1478032152, "post_id": 40366247, "comment_id": 67989578, "body": "I prefer this approach to @Murad&#39;s as adding the method <code>Person#to_s</code> is both unnecessary and potentially confusing to readers who look only at the coding of the class <code>Person</code>. Eli, why <code>%Q(...)</code> rather than just double quotes?"}], "tags": [], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1478025119, "last_edit_date": 1478025119, "creation_date": 1478024607, "answer_id": 40366247, "question_id": 40366085, "link": "https://stackoverflow.com/questions/40366085/how-can-i-create-a-to-s-with-an-instance-variable-pointing-to-an-array-of-object/40366247#40366247", "title": "How can I create a to_s with an instance variable pointing to an array of objects from another class?", "body": "<p>First off, you don't want to have <code>puts</code> in a <code>to_s</code> method. Instead just return the string. Second, the variable <code>members</code> is probably not actually what you want outputted in the method. Try this instead</p>\n\n<pre><code>def to_s\n  %Q(#{@name} has #{@members.size} team members. Those members are #{@members.map{|i| \"#{i.name} who is #{i.age}\"}.join(', ')})\nend\n</code></pre>\n"}], "owner": {"reputation": 1574, "user_id": 169320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d765156db8436b8749ec6cefef3d5f35?s=128&d=identicon&r=PG", "display_name": "user169320", "link": "https://stackoverflow.com/users/169320/user169320"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 40366242, "answer_count": 2, "score": 0, "last_activity_date": 1478025119, "creation_date": 1478024038, "question_id": 40366085, "link": "https://stackoverflow.com/questions/40366085/how-can-i-create-a-to-s-with-an-instance-variable-pointing-to-an-array-of-object", "title": "How can I create a to_s with an instance variable pointing to an array of objects from another class?", "body": "<p>With the code below, I would like to create a <code>to_s</code> method that prints out information as such:</p>\n\n<p>Southside has 3 team members.\nThose members are: Dario, who is 22 years old. Ted, who is 21 years old. Bob, who is 44 years old.</p>\n\n<p>Currently, I get this:</p>\n\n<p>Southside has 3 team members.\nThose members are: </p>\n\n<pre><code>[#&lt;Person:0x000000025cd6e8 @name=\"Dario\", @age=22&gt;, #&lt;Person:0x000000025cd670 @name=\"Ted\", @age=21&gt;, #&lt;Person:0x000000025cd620 @name=\"Bob\", @age=44&gt;].\n#&lt;Team:0x000000025cd7d8&gt;\n</code></pre>\n\n<p>The part I'm finding difficult is accessing the instance variables of the Person class objects that are in the Team members array.</p>\n\n<p>Here are the two classes:</p>\n\n<pre><code>class Team\n  attr_accessor :name, :members\n\n  def initialize(name)\n    @name = name\n    @members = []\n  end\n\n  def &lt;&lt;(person)\n    members.push person\n  end\n\n  def to_s\n    puts \"#{@name} has #{@members.size} team members.\"\n    puts \"Those members are: #{@members}.\"\n  end\nend\n\nclass Person\n  attr_accessor :name, :age\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\nend\n\nsouth_side_bowlers = Team.new(\"Southside\")\n\nsouth_side_bowlers &lt;&lt; Person.new(\"Dario\", 22)\nsouth_side_bowlers &lt;&lt; Person.new(\"Ted\", 21)\nsouth_side_bowlers &lt;&lt; Person.new(\"Bob\", 44)\n\nputs south_side_bowlers\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1761, "user_id": 3741320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10222536/picture?type=large", "display_name": "James Milani", "link": "https://stackoverflow.com/users/3741320/james-milani"}, "edited": false, "score": 0, "creation_date": 1478044881, "post_id": 40365520, "comment_id": 67994438, "body": "Hey Raidspec -- could you show us your routes? You have a routing error. Do you have something like this? <code>devise_for :users, path: &#39;&#39;, path_names: { sign_in: &#39;login&#39;, sign_out: &#39;logout&#39;, sign_up: &#39;register&#39;, edit: &#39;settings&#39; }</code> in <code>config&#47;routes.rb</code>?"}, {"owner": {"reputation": 71, "user_id": 5854975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/990344fcf8b14a9487b01c1f87f01747?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5854975/raidspec"}, "reply_to_user": {"reputation": 1761, "user_id": 3741320, "user_type": "registered", "profile_image": "https://graph.facebook.com/10222536/picture?type=large", "display_name": "James Milani", "link": "https://stackoverflow.com/users/3741320/james-milani"}, "edited": false, "score": 0, "creation_date": 1478050062, "post_id": 40365520, "comment_id": 67995739, "body": "This is my route right now: devise_for :users, :controllers =&gt; {registrations: &#39;users/registrations&#39;, sessions: &#39;users/sessions&#39;}. It shouldn&#39;t even be going to that route though. It should be logging the user in dynamically. If anyone has a repo of this already done, i would LOVE you forever."}], "owner": {"reputation": 71, "user_id": 5854975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/990344fcf8b14a9487b01c1f87f01747?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5854975/raidspec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478050089, "creation_date": 1478021857, "last_edit_date": 1478050089, "question_id": 40365520, "link": "https://stackoverflow.com/questions/40365520/devise-login-dynamically-but-reloads-the-page-instead", "title": "Devise login dynamically, but reloads the page instead", "body": "<p>I've created a widget that lets users install it with a line of JS script and it will prompt them to login, but it seems i have incorrectly setup the dynamic login for devise. </p>\n\n<p>I basically need users to be able to login dynamically (can't reload pages because the widget is on a 3rd party site). And yes, i did make sure that the server which is hosting my widget is running at the same time.</p>\n\n<p>How I'm rendering the login page: <code>&lt;%=j (render 'devise/sessions/new') %&gt;</code></p>\n\n<p>devise/sessions/_new.html.erb:</p>\n\n<pre><code>&lt;h2&gt;Log in&lt;/h2&gt;\n&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name), format: :json, remote: true) do |f| %&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :email %&gt;\n            &lt;%= f.email_field :email, autofocus: true %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password %&gt;\n            &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n    &lt;/div&gt;\n    &lt;% if devise_mapping.rememberable? -%&gt;\n        &lt;div class=\"field\"&gt;\n            &lt;%= f.check_box :remember_me %&gt;\n                &lt;%= f.label :remember_me %&gt;\n        &lt;/div&gt;\n        &lt;% end -%&gt;\n            &lt;div class=\"actions\"&gt;\n                &lt;%= f.submit \"Log in\" %&gt;\n            &lt;/div&gt;\n            &lt;% end %&gt;\n</code></pre>\n\n<p>widget.js.erb:</p>\n\n<pre><code>//DEVISE CODE TO MAKE AJAX FUNCTIONAL\n  var Authentication = {\n    callbackSubmit: function(){\n      var self = this;\n\n      $(\"form\").bind(\"ajax:success\", function(e, response, status, xhr){\n        if(response.success){\n          window.location.reload();\n        }else{\n          self.errorsFromServer();\n        }\n      });\n    },\n  }\n\n    Authentication.callbackSubmit();\n});\n</code></pre>\n\n<p>My error: <a href=\"https://i.stack.imgur.com/UhD9j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UhD9j.png\" alt=\"enter image description here\"></a></p>\n\n<p>ROUTES:</p>\n\n<pre><code>  devise_for :users, :controllers =&gt; {registrations: 'users/registrations', sessions: 'users/sessions'}\n</code></pre>\n"}, {"tags": ["ruby", "optimization", "runtime"], "comments": [{"owner": {"reputation": 5033, "user_id": 409156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cvssg.jpg?s=128&g=1", "display_name": "jacefarm", "link": "https://stackoverflow.com/users/409156/jacefarm"}, "edited": false, "score": 0, "creation_date": 1478029632, "post_id": 40365191, "comment_id": 67988289, "body": "StackOverflow is a &quot;Question &amp; Answer&quot; forum. You&#39;re asking for general consulting or tutoring on a subject (optimization), which is a covered extensively, and easily found, with a search of the Internet. Your question is likely to be down-voted and left unanswered, unless you show further effort and make your question more specific.  For help, see \u201c<a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask a Good Question</a>\u201d."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1478034605, "post_id": 40365191, "comment_id": 67990853, "body": "I don&#39;t think this asks for &quot;general consulting or tutoring&quot; at all. The question is precise and clear: Which part of the code is slow?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7100815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1GO4.jpg?s=128&g=1", "display_name": "dines", "link": "https://stackoverflow.com/users/7100815/dines"}, "edited": false, "score": 0, "creation_date": 1478038714, "post_id": 40369404, "comment_id": 67992615, "body": "Thanks Michael. This gives me some great ideas and new methods to  practice on. Cheers"}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": true, "score": 1, "last_activity_date": 1478038041, "creation_date": 1478038041, "answer_id": 40369404, "question_id": 40365191, "link": "https://stackoverflow.com/questions/40365191/advice-needed-with-optimization-when-solving-katas/40369404#40369404", "title": "Advice needed with optimization when solving Kata&#39;s", "body": "<p>There is a lot of issues here, mainly time complexity is O(n^2) because of the last line which counts number occurrences in both arrays. For each number in <code>range_wanted</code> it needs to iterate over all elements of both arrays. This is highly inefficient.</p>\n\n<p>Try to run your code in irb with those arguments <code>find_arr([], [], [1, 10_000_000], \"odd\")</code> or bigger range.</p>\n\n<p>Here are some suggestions how to improve this code:</p>\n\n<ol>\n<li>Count occurrences yourself by storing them in a hash</li>\n<li>When counting you can skip those numbers that don't meet requirements, range and odd/even</li>\n<li>If you want to check if value is in a range, you should use <code>cover?</code> method from <code>Range</code> class. Do not change range into array and iterate over it.</li>\n<li>In this line <code>range_wanted = range.select {|num| wanted == \"odd\" ? num.odd? : num.even?}</code> you are testing <code>wanted == \"odd\"</code> in every iteration, but this won't ever change as it is passed as argument. You can move this condition outside of loop</li>\n</ol>\n\n<p>Here is refactored code. I wrote it out of my head, so there may be some issues but it should give you an idea on how to write your own solution.</p>\n\n<pre><code>def find_arr(arrA, arrB, rng, wanted)\n  countA = Hash.new(0)\n  countB = Hash.new(0)\n\n  # If wanted == \"odd\" we want to test elem % 2 == 1, otherwise elem % 2 == 0\n  remainder = wanted == \"odd\" ? 1 : 0\n  range = (rng[0]..rng[1])\n\n  arrA.each do |elem|\n    if range.cover?(elem) &amp;&amp; (elem % 2 == remainder)\n      countA[elem] += 1\n    end\n  end\n\n  arrB.each do |elem|\n    if range.cover?(elem) &amp;&amp; (elem % 2 == remainder)\n      countB[elem] += 1\n    end\n  end\n\n  result = []\n\n  countA.each do |elem, count|\n    if count &gt; 1 &amp;&amp; countB[elem] &gt; 1\n      result.push(elem)\n    end\n  end\n\n  result\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7100815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1GO4.jpg?s=128&g=1", "display_name": "dines", "link": "https://stackoverflow.com/users/7100815/dines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 40369404, "answer_count": 1, "score": 0, "last_activity_date": 1478038041, "creation_date": 1478020666, "last_edit_date": 1478034650, "question_id": 40365191, "link": "https://stackoverflow.com/questions/40365191/advice-needed-with-optimization-when-solving-katas", "title": "Advice needed with optimization when solving Kata&#39;s", "body": "<p>I'm doing Katas at codewars and I on occasion pass all the tests but fail due to timeout reasons. Could you please help with comments on how to improve my code by refactoring the code below.</p>\n\n<p><code>arrA</code> and <code>arrB</code> are arrays, <code>rng</code> is a range and <code>wanted</code> is either \"odd\" or \"even\". I need to return an array that holds numbers that exists more than once in each array, and is within the range and is either odd or even.</p>\n\n<pre><code>def find_arr(arrA, arrB, rng, wanted)\n  common = arrA &amp;&amp; arrB\n\n  range = (rng[0]..rng[1]).to_a.select {|num| common.include?(num)}\n\n  range_wanted = range.select {|num| wanted == \"odd\" ? num.odd? : num.even?}\n\n  numbers_twice = range_wanted.select {|num| arrA.count(num) &gt; 1 &amp;&amp; arrB.count(num) &gt; 1}\nend\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "knife", "chefdk"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1478077410, "post_id": 40364968, "comment_id": 68004235, "body": "I don&#39;t know how you did install knife, but <code>&#47;usr&#47;local&#47;bin</code> is not its place at all. Did you tweak your previous install ? To fix (workaround) this use <code>chef shell-init bash</code> at start of your session, this will set the PATH and some other variables to chef-dk ones and all should work smoothly."}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1479484342, "creation_date": 1479484342, "answer_id": 40681201, "question_id": 40364968, "link": "https://stackoverflow.com/questions/40364968/error-after-upgrading-to-chefdk-0-19-6-1-bash-usr-local-bin-knife-usr-bin-ru/40681201#40681201", "title": "Error after upgrading to chefDK 0.19.6-1 bash: /usr/local/bin/knife: /usr/bin/ruby2.1: bad interpreter: No such file or directory", "body": "<p>We recently switched Chef and ChefDK from Ruby 2.1 to 2.3. It sounds like when you installed the newer ChefDK it didn't correctly overwrite the previous symlinks or that the install was only partially completed.</p>\n"}], "owner": {"reputation": 131, "user_id": 1845739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxVMh.jpg?s=128&g=1", "display_name": "victor h damian chicon", "link": "https://stackoverflow.com/users/1845739/victor-h-damian-chicon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479484342, "creation_date": 1478019966, "question_id": 40364968, "link": "https://stackoverflow.com/questions/40364968/error-after-upgrading-to-chefdk-0-19-6-1-bash-usr-local-bin-knife-usr-bin-ru", "title": "Error after upgrading to chefDK 0.19.6-1 bash: /usr/local/bin/knife: /usr/bin/ruby2.1: bad interpreter: No such file or directory", "body": "<p>Upgraded chefdk and i'm getting this error runing knife</p>\n\n<pre><code>bash: /usr/local/bin/knife: /usr/bin/ruby2.1: bad interpreter: No such file or directory\n</code></pre>\n\n<p>why is my /usr/local/bin/knife calling /usr/bin/ruby2.1</p>\n\n<p>Anyway i changed the /usr/local/bin/knife file to point to my ruby file</p>\n\n<pre><code>$ which ruby\n /opt/chefdk/embedded/bin/ruby\n\n\n #!/opt/chefdk/embedded/bin/ruby\n #\n # This file was generated by RubyGems.\n ......... \n</code></pre>\n"}, {"tags": ["ruby", "testing"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478019032, "post_id": 40364683, "comment_id": 67982491, "body": "Normally you write tests on <i>parts</i> of your program, and if necessary an &quot;integration test&quot; on the whole thing in more of a black-box manner. Tools like <a href=\"http://travis-ci.org\" rel=\"nofollow noreferrer\">Travis</a> can help automate your testing and verify changes made to code."}, {"owner": {"reputation": 296, "user_id": 1832293, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/j6Nzk.jpg?s=128&g=1", "display_name": "damian", "link": "https://stackoverflow.com/users/1832293/damian"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478019330, "post_id": 40364683, "comment_id": 67982686, "body": "In this case I have some tests on specific methods in my script. But what I&#39;m really interested in is testing the whole script. It&#39;s a replacement of some old script and there are a few config files in JSON, many ways of providing user input etc. So I want to test if it behaves exactly like the old script (returns the same result) - this is the most important thing. Methods are not enough because I might have overlooked something that worked with the old script but no longer works with the new."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478019478, "post_id": 40364683, "comment_id": 67982775, "body": "You can write a test that does exactly what you have here using basic stuff like <code>assert</code>. There&#39;s the classic <a href=\"https://github.com/test-unit/test-unit\" rel=\"nofollow noreferrer\"><code>test-unit</code></a> library or alternatives like <a href=\"http://rspec.info\" rel=\"nofollow noreferrer\">RSpec</a> if you feel that&#39;s not enough."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1478019761, "creation_date": 1478019761, "answer_id": 40364904, "question_id": 40364683, "link": "https://stackoverflow.com/questions/40364683/testing-a-whole-script-in-ruby/40364904#40364904", "title": "Testing a whole script in Ruby", "body": "<p>Using <code>test-unit</code> you end up with code like this:</p>\n\n<pre><code>class TestScript &lt; Test::Unit::TestCase\n  def test_output\n    assert_equal 'test', `script --options`\n  end\nend\n</code></pre>\n\n<p>You'll probably want to use the <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/open3/rdoc/Open3.html#method-c-popen3\" rel=\"nofollow noreferrer\"><code>open3</code></a> library when dealing with output from programs as that gives you more control over how that's handled. You could write your own wrapper for that as well, like <code>assert_output_equal</code>:</p>\n\n<pre><code>def assert_output_equal(output, command, message = nil, &amp;block)\n  Open3.popen3(command) do |stdin, stdout, stderr, wait_thr|\n    assert_equal output, stdout.read, message, &amp;block\n  end\nend\n</code></pre>\n\n<p>You can add on to that to test for the status from your process, ensuring it succeeded, and that there wasn't any output on STDERR and such.</p>\n\n<p>When it comes to testing things that produce a lot of textual output (e.g. JSON data, formatted lists) I find it's best to create files in a place like <code>test/expect</code> and compare the file to the output rather than defining the text in the source. This makes it easy to create the files in the first place:</p>\n\n<pre><code>old_script &gt; test/expected/old_script.default\nold_script --option &gt; test/expected/old_script.with-option\n</code></pre>\n\n<p>It also makes your version control diffs easier to read when something needs to be adjusted in there.</p>\n"}, {"comments": [{"owner": {"reputation": 731, "user_id": 4475279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a795946d8c18ce3634e92c01339f16b3?s=128&d=identicon&r=PG&f=1", "display_name": "magiraud", "link": "https://stackoverflow.com/users/4475279/magiraud"}, "edited": false, "score": 0, "creation_date": 1596817356, "post_id": 40370937, "comment_id": 111942302, "body": "We develop another CLI testing framework, <a href=\"http://www.should-test.net\" rel=\"nofollow noreferrer\">Should</a>. It can also count occurrences, look for regular expressions, use variables, or check exit codes."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1478048962, "last_edit_date": 1478048962, "creation_date": 1478048523, "answer_id": 40370937, "question_id": 40364683, "link": "https://stackoverflow.com/questions/40364683/testing-a-whole-script-in-ruby/40370937#40370937", "title": "Testing a whole script in Ruby", "body": "<h2>Define Test Fixtures</h2>\n\n<blockquote>\n  <p>What is the best way of testing a whole script? I want to test if a script returns (prints) a correct result.</p>\n</blockquote>\n\n<p>You need a <em>test fixture</em> that includes a known input value and an expected result. In other words:</p>\n\n<ol>\n<li>Given a known input value,</li>\n<li>When you run the program</li>\n<li>Then you will receive your <em>expected</em> answer as output.</li>\n</ol>\n\n<p>Note that testing an entire program this way can tell you if you got the right results from a set of inputs, but it will generally <em>not</em> provide insight into where the problem is. However, many forms of acceptance testing using this \"black box\" approach to testing, so it's certainly a reasonable approach as long as you understand the limitations.</p>\n\n<h2>Possible Frameworks</h2>\n\n<p>The list of possible testing frameworks is not infinite, but if you don't want to write your own test harness from scratch you may want to try one of the more popular ones. Some possibilities to kick-start your own research include:</p>\n\n<ul>\n<li><a href=\"https://github.com/sstephenson/bats\" rel=\"nofollow noreferrer\">Bats</a></li>\n<li><a href=\"https://cucumber.io/\" rel=\"nofollow noreferrer\">Cucumber</a></li>\n<li><a href=\"https://github.com/cucumber/aruba\" rel=\"nofollow noreferrer\">Aruba</a></li>\n</ul>\n\n<p>There are of course plenty of others, but per your original question you will probably want to focus on ATDD or BDD testing tools, rather than unit testing, if you want to test the entire script rather than its component parts.</p>\n"}], "owner": {"reputation": 296, "user_id": 1832293, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/j6Nzk.jpg?s=128&g=1", "display_name": "damian", "link": "https://stackoverflow.com/users/1832293/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1478048962, "creation_date": 1478018982, "last_edit_date": 1478027916, "question_id": 40364683, "link": "https://stackoverflow.com/questions/40364683/testing-a-whole-script-in-ruby", "title": "Testing a whole script in Ruby", "body": "<p>What is the best way of testing a whole script? I want to test if a script returns (prints) a correct result. So far what I have is another script that more or less does just:</p>\n\n<p><code># test.rb</code></p>\n\n<pre><code>expected = 'test'\noutput = `script.rb --many params`\nif output != expected\n  puts \"Error\"\nend\n</code></pre>\n\n<p>In this example, the script I want to test is called script.rb.\nCheers.</p>\n"}]